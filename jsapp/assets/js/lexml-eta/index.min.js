const e=Symbol("defaultState"),t=Symbol("delegatesFocus"),o=Symbol("firstRender"),i=Symbol("focusTarget"),a=Symbol("hasDynamicTemplate"),r=Symbol("ids"),n=Symbol("nativeInternals"),s=Symbol("raiseChangeEvents"),l=Symbol("render"),c=Symbol("renderChanges"),u=Symbol("rendered"),d=Symbol("rendering"),p=Symbol("setState"),h=Symbol("shadowRoot"),m=Symbol("shadowRootMode"),f=Symbol("state"),v=Symbol("stateEffects"),g=Symbol("template");function b(e,t){return"boolean"==typeof t?t:"string"==typeof t&&(""===t||e.toLowerCase()===t.toLowerCase())}function y(e,t){let o=t;for(;o;){const t=o.assignedSlot||o.parentNode||o.host;if(t===e)return!0;o=t}return!1}function x(e){const t=S(e,(e=>e instanceof HTMLElement&&e.matches('a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable="true"],[tabindex]')&&e.tabIndex>=0)),{value:o}=t.next();return o instanceof HTMLElement?o:null}function A(e,t){return Array.prototype.findIndex.call(e,(e=>e===t||y(e,t)))}function w(e,t){const o=t.composedPath()[0];return e===o||y(e,o)}function*_(e){e&&(yield e,yield*function*(e){let t=e;for(;t=t instanceof HTMLElement&&t.assignedSlot?t.assignedSlot:t instanceof ShadowRoot?t.host:t.parentNode,t;)yield t}(e))}function E(e,t,o){e.toggleAttribute(t,o),e[n]&&e[n].states&&e[n].states.toggle(t,o)}const O={checked:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,multiple:!0,noresize:!0,readonly:!0,selected:!0};function*S(e,t){let o;if(t(e)&&(yield e),e instanceof HTMLElement&&e.shadowRoot)o=e.shadowRoot.children;else{const t=e instanceof HTMLSlotElement?e.assignedNodes({flatten:!0}):[];o=t.length>0?t:e.childNodes}if(o)for(let e=0;e<o.length;e++)yield*S(o[e],t)}const I={html:(e,...t)=>k.html(e,...t).content},k={html(e,...t){const o=document.createElement("template");return o.innerHTML=String.raw(e,...t),o}},C=new Map;function N(e){if("function"==typeof e){let t;try{t=new e}catch(o){if("TypeError"!==o.name)throw o;!function(e){let t;const o=/^[A-Za-z][A-Za-z0-9_$]*$/,i=e.name&&e.name.match(o);if(i){const e=/([A-Z])/g,o=i[0].replace(e,((e,t,o)=>o>0?`-${t}`:t));t=o.toLowerCase()}else t="custom-element";let a,r=C.get(t)||0;for(;a=`${t}-${r}`,customElements.get(a);r++);customElements.define(a,e),C.set(t,r+1)}(e),t=new e}return t}return document.createElement(e)}function T(e,t){const o=e.parentNode;if(!o)throw"An element must have a parent before it can be substituted.";return(e instanceof HTMLElement||e instanceof SVGElement)&&(t instanceof HTMLElement||t instanceof SVGElement)&&(Array.prototype.forEach.call(e.attributes,(e=>{t.getAttribute(e.name)||"class"===e.name||"style"===e.name||t.setAttribute(e.name,e.value)})),Array.prototype.forEach.call(e.classList,(e=>{t.classList.add(e)})),Array.prototype.forEach.call(e.style,(o=>{t.style[o]||(t.style[o]=e.style[o])}))),t.append(...e.childNodes),o.replaceChild(t,e),t}function q(e,t){if("function"==typeof t&&e.constructor===t||"string"==typeof t&&e instanceof Element&&e.localName===t)return e;{const o=N(t);return T(e,o),o}}const R={tabindex:"tabIndex"},D={tabIndex:"tabindex"};function P(e){if(e===HTMLElement)return[];const t=Object.getPrototypeOf(e.prototype).constructor;let o=t.observedAttributes;o||(o=P(t));const i=Object.getOwnPropertyNames(e.prototype).filter((t=>{const o=Object.getOwnPropertyDescriptor(e.prototype,t);return o&&"function"==typeof o.set})).map((e=>function(e){let t=D[e];if(!t){const o=/([A-Z])/g;t=e.replace(o,"-$1").toLowerCase(),D[e]=t}return t}(e))).filter((e=>o.indexOf(e)<0));return o.concat(i)}const L=Symbol("state"),M=Symbol("raiseChangeEventsInNextRender"),$=Symbol("changedSinceLastRender");function j(e,t){const o={};for(const r in t)i=t[r],a=e[r],(i instanceof Date&&a instanceof Date?i.getTime()===a.getTime():i===a)||(o[r]=!0);var i,a;return o}const z=new Map,F=Symbol("shadowIdProxy"),B=Symbol("proxyElement"),U={get(e,t){const o=e[B][h];return o&&"string"==typeof t?o.getElementById(t):null}};const V=function(e){return class extends e{attributeChangedCallback(e,t,o){if(super.attributeChangedCallback&&super.attributeChangedCallback(e,t,o),o!==t&&!this[d]){const t=function(e){let t=R[e];if(!t){const o=/-([a-z])/g;t=e.replace(o,(e=>e[1].toUpperCase())),R[e]=t}return t}(e);if(t in this){const i=O[e]?b(e,o):o;this[t]=i}}}static get observedAttributes(){return P(this)}}}(function(t){class i extends t{constructor(){super(),this[o]=void 0,this[s]=!1,this[$]=null,this[p](this[e])}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[c]()}get[e](){return super[e]||{}}[l](e){super[l]&&super[l](e)}[c](){void 0===this[o]&&(this[o]=!0);const e=this[$];if(this[o]||e){const t=this[s];this[s]=this[M],this[d]=!0,this[l](e),this[d]=!1,this[$]=null,this[u](e),this[o]=!1,this[s]=t,this[M]=t}}[u](e){super[u]&&super[u](e)}async[p](e){this[d]&&console.warn(`${this.constructor.name} called [setState] during rendering, which you should avoid.\nSee https://elix.org/documentation/ReactiveMixin.`);const{state:t,changed:i}=function(e,t){const o=Object.assign({},e[L]),i={};let a=t;for(;;){const t=j(o,a);if(0===Object.keys(t).length)break;Object.assign(o,a),Object.assign(i,t),a=e[v](o,t)}return{state:o,changed:i}}(this,e);if(this[L]&&0===Object.keys(i).length)return;Object.freeze(t),this[L]=t,this[s]&&(this[M]=!0);const a=void 0===this[o]||null!==this[$];this[$]=Object.assign(this[$]||{},i);this.isConnected&&!a&&(await Promise.resolve(),this[c]())}get[f](){return this[L]}[v](e,t){return super[v]?super[v](e,t):{}}}return"true"===new URLSearchParams(location.search).get("elixdebug")&&Object.defineProperty(i.prototype,"state",{get(){return this[f]}}),i}(function(e){return class extends e{get[r](){if(!this[F]){const e={[B]:this};this[F]=new Proxy(e,U)}return this[F]}[l](e){if(super[l]&&super[l](e),!this[h]){const e=function(e){let t=e[a]?void 0:z.get(e.constructor);if(void 0===t){if(t=e[g],t&&!(t instanceof HTMLTemplateElement))throw`Warning: the [template] property for ${e.constructor.name} must return an HTMLTemplateElement.`;e[a]||z.set(e.constructor,t||null)}return t}(this);if(e){const o=this.attachShadow({delegatesFocus:this[t],mode:this[m]}),i=document.importNode(e.content,!0);o.append(i),this[h]=o}else this[h]=null}}get[m](){return"open"}}}(HTMLElement))),H=Symbol("checkSize"),G=Symbol("closestAvailableItemIndex"),Q=Symbol("contentSlot"),K=e,W=Symbol("defaultTabIndex"),X=t,Y=Symbol("effectEndTarget"),J=o,Z=i,ee=Symbol("getItemText"),te=Symbol("goDown"),oe=Symbol("goEnd"),ie=Symbol("goFirst"),ae=Symbol("goLast"),re=Symbol("goLeft"),ne=Symbol("goNext"),se=Symbol("goPrevious"),le=Symbol("goRight"),ce=Symbol("goStart"),ue=Symbol("goToItemWithPrefix"),de=Symbol("goUp"),pe=a,he=r,me=Symbol("inputDelegate"),fe=Symbol("itemsDelegate"),ve=Symbol("keydown"),ge=Symbol("mouseenter"),be=Symbol("mouseleave"),ye=n,xe=s,Ae=l,we=c,_e=Symbol("renderDataToElement"),Ee=u,Oe=d,Se=Symbol("scrollTarget"),Ie=p,ke=h,Ce=m,Ne=Symbol("startEffect"),Te=f,qe=v,Re=Symbol("swipeDown"),De=Symbol("swipeDownComplete"),Pe=Symbol("swipeLeft"),Le=Symbol("swipeLeftTransitionEnd"),Me=Symbol("swipeRight"),$e=Symbol("swipeRightTransitionEnd"),je=Symbol("swipeUp"),ze=Symbol("swipeUpComplete"),Fe=Symbol("swipeStart"),Be=Symbol("swipeTarget"),Ue=Symbol("tap"),Ve=g,He=Symbol("toggleSelectedFlag");"true"===new URLSearchParams(location.search).get("elixdebug")&&(window.elix={internal:{checkSize:H,closestAvailableItemIndex:G,contentSlot:Q,defaultState:K,defaultTabIndex:W,delegatesFocus:X,effectEndTarget:Y,firstRender:J,focusTarget:Z,getItemText:ee,goDown:te,goEnd:oe,goFirst:ie,goLast:ae,goLeft:re,goNext:ne,goPrevious:se,goRight:le,goStart:ce,goToItemWithPrefix:ue,goUp:de,hasDynamicTemplate:pe,ids:he,inputDelegate:me,itemsDelegate:fe,keydown:ve,mouseenter:ge,mouseleave:be,nativeInternals:ye,event:event,raiseChangeEvents:xe,render:Ae,renderChanges:we,renderDataToElement:_e,rendered:Ee,rendering:Oe,scrollTarget:Se,setState:Ie,shadowRoot:ke,shadowRootMode:Ce,startEffect:Ne,state:Te,stateEffects:qe,swipeDown:Re,swipeDownComplete:De,swipeLeft:Pe,swipeLeftTransitionEnd:Le,swipeRight:Me,swipeRightTransitionEnd:$e,swipeUp:je,swipeUpComplete:ze,swipeStart:Fe,swipeTarget:Be,tap:Ue,template:Ve,toggleSelectedFlag:He}});const Ge=Symbol("previousBodyStyleOverflow"),Qe=Symbol("previousDocumentMarginRight");const Ke=Symbol("wrap"),We=Symbol("wrappingFocus");function Xe(e){return class extends e{[ve](e){const t=x(this[ke]);if(t){const o=document.activeElement&&(document.activeElement===t||document.activeElement.contains(t)),i=this[ke].activeElement,a=i&&(i===t||y(i,t));(o||a)&&"Tab"===e.key&&e.shiftKey&&(this[We]=!0,this[he].focusCatcher.focus(),this[We]=!1)}return super[ve]&&super[ve](e)||!1}[Ae](e){super[Ae]&&super[Ae](e),this[J]&&this[he].focusCatcher.addEventListener("focus",(()=>{if(!this[We]){const e=x(this[ke]);e&&e.focus()}}))}[Ke](e){const t=I.html`
        <style>
          #focusCapture {
            display: flex;
            height: 100%;
            overflow: hidden;
            width: 100%;
          }

          #focusCaptureContainer {
            align-items: center;
            display: flex;
            flex: 1;
            flex-direction: column;
            justify-content: center;
            position: relative;
          }
        </style>
        <div id="focusCapture">
          <div id="focusCaptureContainer"></div>
          <div id="focusCatcher" tabindex="0"></div>
        </div>
      `,o=t.getElementById("focusCaptureContainer");o&&(e.replaceWith(t),o.append(e))}}}function Ye(e){return class extends e{constructor(){super(),this.addEventListener("keydown",(async e=>{this[xe]=!0,this[Te].focusVisible||this[Ie]({focusVisible:!0});this[ve](e)&&(e.preventDefault(),e.stopImmediatePropagation()),await Promise.resolve(),this[xe]=!1}))}attributeChangedCallback(e,t,o){if("tabindex"===e){let e;null===o?e=-1:(e=Number(o),isNaN(e)&&(e=this[W]?this[W]:0)),this.tabIndex=e}else super.attributeChangedCallback(e,t,o)}get[K](){const e=this[X]?-1:0;return Object.assign(super[K]||{},{tabIndex:e})}[ve](e){return!!super[ve]&&super[ve](e)}[Ae](e){super[Ae]&&super[Ae](e),e.tabIndex&&(this.tabIndex=this[Te].tabIndex)}get tabIndex(){return super.tabIndex}set tabIndex(e){super.tabIndex!==e&&(super.tabIndex=e),this[Oe]||this[Ie]({tabIndex:e})}}}Xe.wrap=Ke;const Je=function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{role:null})}[Ae](e){if(super[Ae]&&super[Ae](e),e.role){const{role:e}=this[Te];e?this.setAttribute("role",e):this.removeAttribute("role")}}get role(){return super.role}set role(e){const t=String(e);super.role=t,this[Oe]||this[Ie]({s:t})}}}(V);class Ze extends Je{get[K](){return Object.assign(super[K],{role:"none"})}get[Ve](){return k.html`
      <style>
        :host {
          display: inline-block;
          height: 100%;
          left: 0;
          position: fixed;
          top: 0;
          touch-action: manipulation;
          width: 100%;
        }
      </style>
      <slot></slot>
    `}}class et extends Ze{constructor(){super(),"PointerEvent"in window||this.addEventListener("touchmove",(e=>{1===e.touches.length&&e.preventDefault()}))}}const tt=Symbol("closePromise"),ot=Symbol("closeResolve");function it(e){return class extends e{attributeChangedCallback(e,t,o){if("opened"===e){const t=b(e,o);this.opened!==t&&(this.opened=t)}else super.attributeChangedCallback(e,t,o)}async close(e){super.close&&await super.close(),this[Ie]({closeResult:e}),await this.toggle(!1)}get closed(){return this[Te]&&!this[Te].opened}get closeFinished(){return this[Te].closeFinished}get closeResult(){return this[Te].closeResult}get[K](){const e={closeResult:null,opened:!1};return this[Ne]&&Object.assign(e,{closeFinished:!0,effect:"close",effectPhase:"after",openCloseEffects:!0}),Object.assign(super[K]||{},e)}async open(){super.open&&await super.open(),this[Ie]({closeResult:void 0}),await this.toggle(!0)}get opened(){return this[Te]&&this[Te].opened}set opened(e){this[Ie]({closeResult:void 0}),this.toggle(e)}[Ae](e){if(super[Ae](e),e.opened){const{opened:e}=this[Te];E(this,"opened",e)}if(e.closeFinished){const{closeFinished:e}=this[Te];E(this,"closed",e)}}[Ee](e){if(super[Ee]&&super[Ee](e),e.opened&&this[xe]){const e=new CustomEvent("opened-changed",{bubbles:!0,detail:{closeResult:this[Te].closeResult,opened:this[Te].opened}});this.dispatchEvent(e);const t=new CustomEvent("openedchange",{bubbles:!0,detail:{closeResult:this[Te].closeResult,opened:this[Te].opened}});if(this.dispatchEvent(t),this[Te].opened){const e=new CustomEvent("opened",{bubbles:!0});this.dispatchEvent(e);const t=new CustomEvent("open",{bubbles:!0});this.dispatchEvent(t)}else{const e=new CustomEvent("closed",{bubbles:!0,detail:{closeResult:this[Te].closeResult}});this.dispatchEvent(e);const t=new CustomEvent("close",{bubbles:!0,detail:{closeResult:this[Te].closeResult}});this.dispatchEvent(t)}}const t=this[ot];this.closeFinished&&t&&(this[ot]=null,this[tt]=null,t(this[Te].closeResult))}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.openCloseEffects||t.effect||t.effectPhase||t.opened){const{effect:t,effectPhase:i,openCloseEffects:a,opened:r}=e,n=a?"close"===t&&"after"===i:!r;Object.assign(o,{closeFinished:n})}return o}async toggle(e=!this.opened){super.toggle&&await super.toggle(e);if(e!==this[Te].opened){const t={opened:e};this[Te].openCloseEffects&&(t.effect=e?"open":"close","after"===this[Te].effectPhase&&(t.effectPhase="before")),await this[Ie](t)}}whenClosed(){return this[tt]||(this[tt]=new Promise((e=>{this[ot]=e}))),this[tt]}}}class at extends V{get[Ve](){return k.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }
      </style>
      <slot></slot>
    `}}const rt=Symbol("appendedToDocument"),nt=Symbol("assignedZIndex"),st=Symbol("restoreFocusToElement");function lt(e){const t=function(){const e=document.body.querySelectorAll("*"),t=Array.from(e,(e=>{const t=getComputedStyle(e);let o=0;if("static"!==t.position&&"auto"!==t.zIndex){const e=t.zIndex?parseInt(t.zIndex):0;o=isNaN(e)?0:e}return o}));return Math.max(...t)}()+1;e[nt]=t,e.style.zIndex=t.toString()}function ct(e){const t=getComputedStyle(e).zIndex,o=e.style.zIndex,i=!isNaN(parseInt(o));if("auto"===t)return i;if("0"===t&&!i){const t=e.assignedSlot||(e instanceof ShadowRoot?e.host:e.parentNode);if(!(t instanceof HTMLElement))return!0;if(!ct(t))return!1}return!0}function ut(e){return class extends e{get[Q](){const e=this[ke]&&this[ke].querySelector("slot:not([name])");return this[ke]&&e||console.warn(`SlotContentMixin expects ${this.constructor.name} to define a shadow tree that includes a default (unnamed) slot.\nSee https://elix.org/documentation/SlotContentMixin.`),e}get[K](){return Object.assign(super[K]||{},{content:null})}[Ee](e){if(super[Ee]&&super[Ee](e),this[J]){const e=this[Q];e&&e.addEventListener("slotchange",(async()=>{this[xe]=!0;const t=e.assignedNodes({flatten:!0});Object.freeze(t),this[Ie]({content:t}),await Promise.resolve(),this[xe]=!1}))}}}}const dt=it(function(e){return class extends e{get autoFocus(){return this[Te].autoFocus}set autoFocus(e){this[Ie]({autoFocus:e})}get[K](){return Object.assign(super[K]||{},{autoFocus:!0,persistent:!1})}async open(){this[Te].persistent||this.isConnected||(this[rt]=!0,document.body.append(this)),super.open&&await super.open()}[Ae](e){if(super[Ae]&&super[Ae](e),this[J]&&this.addEventListener("blur",(e=>{const t=e.relatedTarget||document.activeElement;if(t instanceof HTMLElement){y(this,t)||(this.opened?this[st]=t:(t.focus(),this[st]=null))}})),(e.effectPhase||e.opened||e.persistent)&&!this[Te].persistent){(void 0===this.closeFinished?this.closed:this.closeFinished)?this[nt]&&(this.style.zIndex="",this[nt]=null):this[nt]?this.style.zIndex=this[nt]:ct(this)||lt(this)}}[Ee](e){if(super[Ee]&&super[Ee](e),this[J]&&this[Te].persistent&&!ct(this)&&lt(this),e.opened&&this[Te].autoFocus)if(this[Te].opened){this[st]||document.activeElement===document.body||(this[st]=document.activeElement);const e=x(this);e&&e.focus()}else this[st]&&(this[st].focus(),this[st]=null);!this[J]&&!this[Te].persistent&&this.closeFinished&&this[rt]&&(this[rt]=!1,this.parentNode&&this.parentNode.removeChild(this))}get[Ve](){const e=super[Ve]||k.html``;return e.content.append(I.html`
        <style>
          :host([closed]) {
            display: none;
          }
        </style>
      `),e}}}(ut(V)));class pt extends dt{get backdrop(){return this[he]&&this[he].backdrop}get backdropPartType(){return this[Te].backdropPartType}set backdropPartType(e){this[Ie]({backdropPartType:e})}get[K](){return Object.assign(super[K],{backdropPartType:Ze,framePartType:at})}get frame(){return this[he].frame}get framePartType(){return this[Te].framePartType}set framePartType(e){this[Ie]({framePartType:e})}[Ae](e){super[Ae](e),ht(this[ke],this[Te],e)}[Ee](e){super[Ee](e),e.opened&&this[Te].content&&this[Te].content.forEach((e=>{e[H]&&e[H]()}))}get[Ve](){const e=super[Ve];return e.content.append(I.html`
      <style>
        :host {
          display: inline-grid;
          /* Constrain content if overlay's height is constrained. */
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          max-height: 100vh;
          max-width: 100vw;
          outline: none;
          position: fixed;
          -webkit-tap-highlight-color: transparent;
        }

        [part~="frame"] {
          box-sizing: border-box;
          display: grid;
          overscroll-behavior: contain;
          pointer-events: initial;
          position: relative;
        }

        #frameContent {
          display: grid;
          grid-template: minmax(0, 1fr) / minmax(0, 1fr);
          overflow: hidden;
        }
      </style>
      <div id="backdrop" part="backdrop" tabindex="-1"></div>
      <div id="frame" part="frame" role="none">
        <div id="frameContent">
          <slot></slot>
        </div>
      </div>
    `),ht(e.content,this[Te]),e}}function ht(e,t,o){if(!o||o.backdropPartType){const{backdropPartType:o}=t,i=e.getElementById("backdrop");i&&q(i,o)}if(!o||o.framePartType){const{framePartType:o}=t,i=e.getElementById("frame");i&&q(i,o)}}const mt=function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{role:"dialog"})}[ve](e){let t=!1;if("Escape"===e.key)this.close({canceled:"Escape"}),t=!0;return t||super[ve]&&super[ve](e)||!1}[Ae](e){if(super[Ae]&&super[Ae](e),e.opened)if(this[Te].opened&&document.documentElement){const e=document.documentElement.clientWidth,t=window.innerWidth-e;this[Ge]=document.body.style.overflow,this[Qe]=t>0?document.documentElement.style.marginRight:null,document.body.style.overflow="hidden",t>0&&(document.documentElement.style.marginRight=`${t}px`)}else null!=this[Ge]&&(document.body.style.overflow=this[Ge],this[Ge]=null),null!=this[Qe]&&(document.documentElement.style.marginRight=this[Qe],this[Qe]=null);if(e.role){const{role:e}=this[Te];this.setAttribute("role",e)}}get role(){return super.role}set role(e){super.role=e,this[Oe]||this[Ie]({role:e})}}}(Xe(Ye(pt)));class ft extends mt{get[K](){return Object.assign(super[K],{backdropPartType:et,tabIndex:-1})}get[Ve](){const e=super[Ve],t=e.content.querySelector("#frame");return this[Xe.wrap](t),e.content.append(I.html`
        <style>
          :host {
            height: 100%;
            left: 0;
            pointer-events: initial;
            top: 0;
            width: 100%;
          }
        </style>
      `),e}}class vt extends ft{get choiceButtons(){return this[Te].choiceButtons}get choiceButtonPartType(){return this[Te].choiceButtonPartType}set choiceButtonPartType(e){this[Ie]({choiceButtonPartType:e})}get choices(){return this[Te].choices}set choices(e){this[Ie]({choices:e})}get[K](){return Object.assign(super[K],{choiceButtonPartType:"button",choiceButtons:[],choices:["OK"]})}[ve](e){let t=!1;const o=1===e.key.length&&e.key.toLowerCase();if(o){const e=this.choices.find((e=>e[0].toLowerCase()===o));e&&(this.close({choice:e}),t=!0)}return t||super[ve]&&super[ve](e)||!1}[Ae](e){super[Ae](e),this[J]&&this[he].choiceButtonContainer.addEventListener("click",(async e=>{const t=e.target;if(t instanceof HTMLElement){const e=t.textContent;this[xe]=!0,await this.close({choice:e}),this[xe]=!1}})),e.choiceButtons&&function(e,t){const o=[...t],i=e.childNodes.length,a=o.length,r=Math.max(i,a);for(let t=0;t<r;t++){const r=e.childNodes[t],n=o[t];t>=i?e.append(n):t>=a?e.removeChild(e.childNodes[a]):r!==n&&(o.indexOf(r,t)>=t?e.insertBefore(n,r):e.replaceChild(n,r))}}(this[he].choiceButtonContainer,this[Te].choiceButtons)}[qe](e,t){const o=super[qe](e,t);if(t.choiceButtonPartType||t.choices){const t=e.choices.map((t=>{const o=N(e.choiceButtonPartType);return"part"in o&&(o.part="choice-button"),o.textContent=t,o}));Object.freeze(t),Object.assign(o,{choiceButtons:t})}return o}get[Ve](){const e=super[Ve],t=e.content.querySelector("slot:not([name])");return t&&t.replaceWith(I.html`
        <div id="alertDialogContent">
          <slot></slot>
          <div id="choiceButtonContainer" part="choice-button-container"></div>
        </div>
      `),e}}const gt=document.createElement("div");gt.attachShadow({mode:"open",delegatesFocus:!0});const bt=gt.shadowRoot.delegatesFocus;function yt(e){if("selectedText"in e)return e.selectedText;if("value"in e&&"options"in e){const t=e.value,o=e.options.find((e=>e.value===t));return o?o.innerText:""}return"value"in e?e.value:e.innerText}function xt(e,t){const{ariaLabel:o,ariaLabelledby:i}=t,a=e.isConnected?e.getRootNode():null;let r=null;if(i&&a){const o=i.split(" ").map((o=>{const i=a.getElementById(o);return i?i===e&&null!==t.value?t.selectedText:yt(i):""}));r=o.join(" ")}else if(o)r=o;else if(a){const t=e.id;if(t){const e=a.querySelector(`[for="${t}"]`);e instanceof HTMLElement&&(r=yt(e))}if(null===r){const t=e.closest("label");t&&(r=yt(t))}}return r&&(r=r.trim()),r}let At=!1;const wt=Symbol("focusVisibleChangedListener");function _t(e){return class extends e{constructor(){super(),this.addEventListener("focusout",(e=>{Promise.resolve().then((()=>{const t=e.relatedTarget||document.activeElement,o=this===t,i=y(this,t);!o&&!i&&(this[Ie]({focusVisible:!1}),document.removeEventListener("focusvisiblechange",this[wt]),this[wt]=null)}))})),this.addEventListener("focusin",(()=>{Promise.resolve().then((()=>{this[Te].focusVisible!==At&&this[Ie]({focusVisible:At}),this[wt]||(this[wt]=()=>{this[Ie]({focusVisible:At})},document.addEventListener("focusvisiblechange",this[wt]))}))}))}get[K](){return Object.assign(super[K]||{},{focusVisible:!1})}[Ae](e){if(super[Ae]&&super[Ae](e),e.focusVisible){const{focusVisible:e}=this[Te];this.toggleAttribute("focus-visible",e)}}get[Ve](){const e=super[Ve]||k.html``;return e.content.append(I.html`
        <style>
          :host {
            outline: none;
          }

          :host([focus-visible]:focus-within) {
            outline-color: Highlight; /* Firefox */
            outline-color: -webkit-focus-ring-color; /* All other browsers */
            outline-style: auto;
          }
        </style>
      `),e}}}function Et(e){if(At!==e){At=e;const t=new CustomEvent("focus-visible-changed",{detail:{focusVisible:At}});document.dispatchEvent(t);const o=new CustomEvent("focusvisiblechange",{detail:{focusVisible:At}});document.dispatchEvent(o)}}function Ot(e){return class extends e{get[X](){return!0}focus(e){const t=this[Z];t&&t.focus(e)}get[Z](){return x(this[ke])}}}window.addEventListener("keydown",(()=>{Et(!0)}),{capture:!0}),window.addEventListener("mousedown",(()=>{Et(!1)}),{capture:!0});const St=Symbol("extends"),It=Symbol("delegatedPropertySetters"),kt={a:!0,area:!0,button:!0,details:!0,iframe:!0,input:!0,select:!0,textarea:!0},Ct={address:["scroll"],blockquote:["scroll"],caption:["scroll"],center:["scroll"],dd:["scroll"],dir:["scroll"],div:["scroll"],dl:["scroll"],dt:["scroll"],fieldset:["scroll"],form:["reset","scroll"],frame:["load"],h1:["scroll"],h2:["scroll"],h3:["scroll"],h4:["scroll"],h5:["scroll"],h6:["scroll"],iframe:["load"],img:["abort","error","load"],input:["abort","change","error","select","load"],li:["scroll"],link:["load"],menu:["scroll"],object:["error","scroll"],ol:["scroll"],p:["scroll"],script:["error","load"],select:["change","scroll"],tbody:["scroll"],tfoot:["scroll"],thead:["scroll"],textarea:["change","select","scroll"]},Nt=["click","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","wheel"],Tt={abort:!0,change:!0,reset:!0},qt=["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],Rt=["accept-charset","autoplay","buffered","challenge","codebase","colspan","contenteditable","controls","crossorigin","datetime","dirname","for","formaction","http-equiv","icon","ismap","itemprop","keytype","language","loop","manifest","maxlength","minlength","muted","novalidate","preload","radiogroup","readonly","referrerpolicy","rowspan","scoped","usemap"],Dt=Ot(V);class Pt extends Dt{constructor(){super();const e=this;!this[ye]&&e.attachInternals&&(this[ye]=e.attachInternals())}attributeChangedCallback(e,t,o){if(Rt.indexOf(e)>=0){const t=Object.assign({},this[Te].innerAttributes,{[e]:o});this[Ie]({innerAttributes:t})}else super.attributeChangedCallback(e,t,o)}blur(){this.inner.blur()}get[K](){return Object.assign(super[K],{innerAttributes:{}})}get[W](){return kt[this.extends]?0:-1}get extends(){return this.constructor[St]}get inner(){const e=this[he]&&this[he].inner;return e||console.warn("Attempted to get an inner standard element before it was instantiated."),e}static get observedAttributes(){return[...super.observedAttributes,...Rt]}[Ae](e){super[Ae](e);const t=this.inner;if(this[J]){(Ct[this.extends]||[]).forEach((e=>{t.addEventListener(e,(()=>{const t=new Event(e,{bubbles:Tt[e]||!1});this.dispatchEvent(t)}))})),"disabled"in t&&Nt.forEach((e=>{this.addEventListener(e,(e=>{t.disabled&&e.stopImmediatePropagation()}))}))}if(e.tabIndex&&(t.tabIndex=this[Te].tabIndex),e.innerAttributes){const{innerAttributes:e}=this[Te];for(const o in e)Lt(t,o,e[o])}this.constructor[It].forEach((o=>{if(e[o]){const e=this[Te][o];("selectionEnd"===o||"selectionStart"===o)&&null===e||(t[o]=e)}}))}[Ee](e){if(super[Ee](e),e.disabled){const{disabled:e}=this[Te];void 0!==e&&E(this,"disabled",e)}}get[Ve](){const e=qt.includes(this.extends)?"block":"inline-block",t=this.extends;return k.html`
      <style>
        :host {
          display: ${e}
        }
        
        [part~="inner"] {
          box-sizing: border-box;
          height: 100%;
          width: 100%;
        }
      </style>
      <${t} id="inner" part="inner ${t}">
        <slot></slot>
      </${t}>
    `}static wrap(e){class t extends Pt{}t[St]=e;const o=document.createElement(e);return function(e,t){const o=Object.getOwnPropertyNames(t);e[It]=[],o.forEach((o=>{const i=Object.getOwnPropertyDescriptor(t,o);if(!i)return;const a=function(e,t){if("function"==typeof t.value){if("constructor"!==e)return function(e,t){const o=function(...t){this.inner[e](...t)};return{configurable:t.configurable,enumerable:t.enumerable,value:o,writable:t.writable}}(e,t)}else if("function"==typeof t.get||"function"==typeof t.set)return function(e,t){const o={configurable:t.configurable,enumerable:t.enumerable};t.get&&(o.get=function(){return function(e,t){return e[Te][t]||e[ke]&&e.inner[t]}(this,e)});t.set&&(o.set=function(t){!function(e,t,o){e[Te][t]!==o&&e[Ie]({[t]:o})}(this,e,t)});t.writable&&(o.writable=t.writable);return o}(e,t);return null}(o,i);a&&(Object.defineProperty(e.prototype,o,a),a.set&&e[It].push(o))}))}(t,Object.getPrototypeOf(o)),t}}function Lt(e,t,o){O[t]?"string"==typeof o?e.setAttribute(t,""):null===o&&e.removeAttribute(t):null!=o?e.setAttribute(t,o.toString()):e.removeAttribute(t)}const Mt=function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{composeFocus:!bt})}[Ae](e){super[Ae]&&super[Ae](e),this[J]&&this.addEventListener("mousedown",(e=>{if(this[Te].composeFocus&&0===e.button&&e.target instanceof Element){const t=function(e){for(const t of _(e)){const e=t[i]||t,o=e;if(e instanceof HTMLElement&&e.tabIndex>=0&&!o.disabled&&!(e instanceof HTMLSlotElement))return e}return null}(e.target);t&&(t.focus(),e.preventDefault())}}))}}}(function(e){return class extends e{get ariaLabel(){return this[Te].ariaLabel}set ariaLabel(e){this[Te].removingAriaAttribute||this[Ie]({ariaLabel:String(e)})}get ariaLabelledby(){return this[Te].ariaLabelledby}set ariaLabelledby(e){this[Te].removingAriaAttribute||this[Ie]({ariaLabelledby:String(e)})}get[K](){return Object.assign(super[K]||{},{ariaLabel:null,ariaLabelledby:null,inputLabel:null,removingAriaAttribute:!1})}[Ae](e){if(super[Ae]&&super[Ae](e),this[J]&&this.addEventListener("focus",(()=>{this[xe]=!0;const e=xt(this,this[Te]);this[Ie]({inputLabel:e}),this[xe]=!1})),e.inputLabel){const{inputLabel:e}=this[Te];e?this[me].setAttribute("aria-label",e):this[me].removeAttribute("aria-label")}}[Ee](e){if(super[Ee]&&super[Ee](e),this[J]){(window.requestIdleCallback||setTimeout)((()=>{const e=xt(this,this[Te]);this[Ie]({inputLabel:e})}))}const{ariaLabel:t,ariaLabelledby:o}=this[Te];e.ariaLabel&&!this[Te].removingAriaAttribute&&this.getAttribute("aria-label")&&(this.setAttribute("delegated-label",t),this[Ie]({removingAriaAttribute:!0}),this.removeAttribute("aria-label")),e.ariaLabelledby&&!this[Te].removingAriaAttribute&&this.getAttribute("aria-labelledby")&&(this.setAttribute("delegated-labelledby",o),this[Ie]({removingAriaAttribute:!0}),this.removeAttribute("aria-labelledby")),e.removingAriaAttribute&&this[Te].removingAriaAttribute&&this[Ie]({removingAriaAttribute:!1})}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.ariaLabel&&e.ariaLabel||t.selectedText&&e.ariaLabelledby&&this.matches(":focus-within")){const t=xt(this,e);Object.assign(o,{inputLabel:t})}return o}}}(_t(Pt.wrap("button"))));class $t extends Mt{get[K](){return Object.assign(super[K],{role:"button"})}get[me](){return this[he].inner}[Ue](){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});this.dispatchEvent(e)}get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host {
            display: inline-flex;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
          }

          [part~="button"] {
            align-items: center;
            background: none;
            border: none;
            color: inherit;
            flex: 1;
            font: inherit;
            outline: none;
            padding: 0;
          }
        </style>
      `),e}}class jt extends(function(e){return class extends e{get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host([disabled]) ::slotted(*) {
            opacity: 0.5;
          }

          [part~="button"] {
            display: inline-flex;
            justify-content: center;
            margin: 0;
            position: relative;
          }
        </style>
      `),e}}}($t)){}class zt extends jt{get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          [part~="button"] {
            background: #eee;
            border: 1px solid #ccc;
            padding: 0.25em 0.5em;
          }
        </style>
      `),e}}class Ft extends et{get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host {
            background: rgba(0, 0, 0, 0.2);
          }
        </style>
      `),e}}class Bt extends at{get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host {
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);
            box-sizing: border-box;
          }
        </style>
      `),e}}function Ut(e){return class extends e{get[K](){return Object.assign(super[K]||{},{backdropPartType:Ft,framePartType:Bt})}}}class Vt extends(Ut(vt)){get[K](){return Object.assign(super[K],{choiceButtonPartType:zt})}get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          [part~="frame"] {
            padding: 1em;
          }

          [part~="choice-button-container"] {
            margin-top: 1em;
          }

          [part~="choice-button"]:not(:first-child) {
            margin-left: 0.5em;
          }
        </style>
      `),e}}customElements.define("elix-alert-dialog",class extends Vt{});class Ht extends(Ut(ft)){}customElements.define("elix-dialog",class extends Ht{});const Gt={a:"link",article:"region",button:"button",h1:"sectionhead",h2:"sectionhead",h3:"sectionhead",h4:"sectionhead",h5:"sectionhead",h6:"sectionhead",hr:"sectionhead",iframe:"region",link:"link",menu:"menu",ol:"list",option:"option",output:"liveregion",progress:"progressbar",select:"select",table:"table",td:"td",textarea:"textbox",th:"th",ul:"list"};function Qt(e){const t=e[ke],o=t&&t.querySelector("slot:not([name])");return o&&o.parentNode instanceof Element&&function(e){for(const t of _(e))if(t instanceof HTMLElement&&Kt(t))return t;return null}(o.parentNode)||e}function Kt(e){const t=getComputedStyle(e),o=t.overflowX,i=t.overflowY;return"scroll"===o||"auto"===o||"scroll"===i||"auto"===i}function Wt(e,t,o){const i=e[G](e[Te],{direction:o,index:t});if(i<0)return!1;const a=e[Te].currentIndex!==i;return a&&e[Ie]({currentIndex:i}),a}const Xt=["applet","basefont","embed","font","frame","frameset","isindex","keygen","link","multicol","nextid","noscript","object","param","script","style","template","noembed"];function Yt(e,t,o){const i=e[Te].items,a=o?0:i.length-1,r=o?i.length:0,n=o?1:-1;let s,l,c=null;const{availableItemFlags:u}=e[Te];for(s=a;s!==r;s+=n){if((!u||u[s])&&(l=i[s].getBoundingClientRect(),l.top<=t&&t<=l.bottom)){c=i[s];break}}if(!c||!l)return null;const d=getComputedStyle(c),p=d.paddingTop?parseFloat(d.paddingTop):0,h=d.paddingBottom?parseFloat(d.paddingBottom):0,m=l.top+p,f=m+c.clientHeight-p-h;return o&&m<=t||!o&&f>=t?s:s-n}function Jt(e,t){const o=e[Te].items,i=e[Te].currentIndex,a=e[Se].getBoundingClientRect(),r=Yt(e,t?a.bottom:a.top,t);let n;if(r&&i===r){const a=o[i].getBoundingClientRect(),r=e[Se].clientHeight;n=Yt(e,t?a.bottom+r:a.top-r,t)}else n=r;if(!n){const i=t?o.length-1:0;n=e[G]?e[G](e[Te],{direction:t?-1:1,index:i}):i}const s=n!==i;if(s){const t=e[xe];e[xe]=!0,e[Ie]({currentIndex:n}),e[xe]=t}return s}const Zt=Symbol("typedPrefix"),eo=Symbol("prefixTimeout");function to(e){const t=e;t[eo]&&(clearTimeout(t[eo]),t[eo]=!1)}function oo(e){e[Zt]="",to(e)}function io(e){to(e),e[eo]=setTimeout((()=>{oo(e)}),1e3)}function ao(e){return class extends e{connectedCallback(){const e="rtl"===getComputedStyle(this).direction;this[Ie]({rightToLeft:e}),super.connectedCallback()}}}function ro(e){return class extends e{get[K](){return Object.assign(super[K]||{},{items:null})}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.content){const t=e.content,i=t?Array.prototype.filter.call(t,(e=>{return(t=e)instanceof Element&&(!t.localName||Xt.indexOf(t.localName)<0);var t})):null;i&&Object.freeze(i),Object.assign(o,{items:i})}return o}}}const no=function(e){return class extends e{get[K](){const e=super[K];return Object.assign(e,{itemRole:e.itemRole||"menuitem",role:e.role||"menu"})}get itemRole(){return this[Te].itemRole}set itemRole(e){this[Ie]({itemRole:e})}[Ae](e){super[Ae]&&super[Ae](e);const t=this[Te].items;if((e.items||e.itemRole)&&t){const{itemRole:e}=this[Te];t.forEach((t=>{e===Gt[t.localName]?t.removeAttribute("role"):t.setAttribute("role",e)}))}if(e.role){const{role:e}=this[Te];this.setAttribute("role",e)}}get role(){return super.role}set role(e){super.role=e,this[Oe]||this[Ie]({role:e})}}}(function(e){return class extends e{attributeChangedCallback(e,t,o){if("current-index"===e)this.currentIndex=Number(o);else if("current-item-required"===e){const t=b(e,o);this.currentItemRequired!==t&&(this.currentItemRequired=t)}else if("cursor-operations-wrap"===e){const t=b(e,o);this.cursorOperationsWrap!==t&&(this.cursorOperationsWrap=t)}else super.attributeChangedCallback(e,t,o)}get currentIndex(){const{items:e,currentIndex:t}=this[Te];return e&&e.length>0?t:-1}set currentIndex(e){isNaN(e)||this[Ie]({currentIndex:e})}get currentItem(){const{items:e,currentIndex:t}=this[Te];return e&&e[t]}set currentItem(e){const{items:t}=this[Te];if(!t)return;const o=t.indexOf(e);this[Ie]({currentIndex:o})}get currentItemRequired(){return this[Te].currentItemRequired}set currentItemRequired(e){this[Ie]({currentItemRequired:e})}get cursorOperationsWrap(){return this[Te].cursorOperationsWrap}set cursorOperationsWrap(e){this[Ie]({cursorOperationsWrap:e})}goFirst(){return super.goFirst&&super.goFirst(),this[ie]()}goLast(){return super.goLast&&super.goLast(),this[ae]()}goNext(){return super.goNext&&super.goNext(),this[ne]()}goPrevious(){return super.goPrevious&&super.goPrevious(),this[se]()}[Ee](e){if(super[Ee]&&super[Ee](e),e.currentIndex&&this[xe]){const{currentIndex:e}=this[Te],t=new CustomEvent("current-index-changed",{bubbles:!0,detail:{currentIndex:e}});this.dispatchEvent(t);const o=new CustomEvent("currentindexchange",{bubbles:!0,detail:{currentIndex:e}});this.dispatchEvent(o)}}}}(function(e){return class extends e{[Ee](e){super[Ee]&&super[Ee](e),e.currentItem&&this.scrollCurrentItemIntoView()}scrollCurrentItemIntoView(){super.scrollCurrentItemIntoView&&super.scrollCurrentItemIntoView();const{currentItem:e,items:t}=this[Te];if(!e||!t)return;const o=this[Se].getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.bottom-o.bottom,r=i.left-o.left,n=i.right-o.right,s=i.top-o.top,l=this[Te].orientation||"both";"horizontal"!==l&&"both"!==l||(n>0?this[Se].scrollLeft+=n:r<0&&(this[Se].scrollLeft+=Math.ceil(r))),"vertical"!==l&&"both"!==l||(a>0?this[Se].scrollTop+=a:s<0&&(this[Se].scrollTop+=Math.ceil(s)))}get[Se](){return super[Se]||Qt(this)}}}(Ot(function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{canGoDown:null,canGoLeft:null,canGoRight:null,canGoUp:null})}[te](){return super[te]&&super[te](),this[ne]()}[oe](){return super[oe]&&super[oe](),this[ae]()}[re](){return super[re]&&super[re](),this[Te]&&this[Te].rightToLeft?this[ne]():this[se]()}[le](){return super[le]&&super[le](),this[Te]&&this[Te].rightToLeft?this[se]():this[ne]()}[ce](){return super[ce]&&super[ce](),this[ie]()}[de](){return super[de]&&super[de](),this[se]()}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.canGoNext||t.canGoPrevious||t.languageDirection||t.orientation||t.rightToLeft){const{canGoNext:t,canGoPrevious:i,orientation:a,rightToLeft:r}=e,n="horizontal"===a||"both"===a,s="vertical"===a||"both"===a,l=s&&t,c=!!n&&(r?t:i),u=!!n&&(r?i:t),d=s&&i;Object.assign(o,{canGoDown:l,canGoLeft:c,canGoRight:u,canGoUp:d})}return o}}}(function(e){return class extends e{get items(){return this[Te]?this[Te].items:null}[Ee](e){if(super[Ee]&&super[Ee](e),!this[J]&&e.items&&this[xe]){const e=new CustomEvent("items-changed",{bubbles:!0});this.dispatchEvent(e);const t=new CustomEvent("itemschange",{bubbles:!0});this.dispatchEvent(t)}}}}(function(e){return class extends e{[G](e,t={}){const o=void 0!==t.direction?t.direction:1,i=void 0!==t.index?t.index:e.currentIndex,a=void 0!==t.wrap?t.wrap:e.cursorOperationsWrap,{items:r}=e,n=r?r.length:0;if(0===n)return-1;if(a){let t=(i%n+n)%n;const a=((t-o)%n+n)%n;for(;t!==a;){if(!e.availableItemFlags||e.availableItemFlags[t])return t;t=((t+o)%n+n)%n}}else for(let t=i;t>=0&&t<n;t+=o){if(!e.availableItemFlags||e.availableItemFlags[t])return t}return-1}get[K](){return Object.assign(super[K]||{},{currentIndex:-1,desiredCurrentIndex:null,currentItem:null,currentItemRequired:!1,cursorOperationsWrap:!1})}[ie](){return super[ie]&&super[ie](),Wt(this,0,1)}[ae](){return super[ae]&&super[ae](),Wt(this,this[Te].items.length-1,-1)}[ne](){super[ne]&&super[ne]();const{currentIndex:e,items:t}=this[Te];return Wt(this,e<0&&t?0:e+1,1)}[se](){super[se]&&super[se]();const{currentIndex:e,items:t}=this[Te];return Wt(this,e<0&&t?t.length-1:e-1,-1)}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.availableItemFlags||t.items||t.currentIndex||t.currentItemRequired){const{currentIndex:i,desiredCurrentIndex:a,currentItem:r,currentItemRequired:n,items:s}=e,l=s?s.length:0;let c,u=a;if(t.items&&!t.currentIndex&&r&&l>0&&s[i]!==r){const e=s.indexOf(r);e>=0&&(u=e)}else t.currentIndex&&(i<0&&null!==r||i>=0&&(0===l||s[i]!==r)||null===a)&&(u=i);n&&u<0&&(u=0),u<0?(u=-1,c=-1):0===l?c=-1:(c=Math.max(Math.min(l-1,u),0),c=this[G](e,{direction:1,index:c,wrap:!1}),c<0&&(c=this[G](e,{direction:-1,index:c-1,wrap:!1})));const d=s&&s[c]||null;Object.assign(o,{currentIndex:c,desiredCurrentIndex:u,currentItem:d})}return o}}}(function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{texts:null})}[ee](e){return super[ee]?super[ee](e):(t=e).getAttribute("aria-label")||t.getAttribute("alt")||t.innerText||t.textContent||"";var t}[qe](e,t){const o=super[qe]?super[qe](e,t):{};if(t.items){const{items:t}=e,i=function(e,t){return e?Array.from(e,(e=>t(e))):null}(t,this[ee]);i&&(Object.freeze(i),Object.assign(o,{texts:i}))}return o}}}(function(e){return class extends e{[te](){if(super[te])return super[te]()}[oe](){if(super[oe])return super[oe]()}[re](){if(super[re])return super[re]()}[le](){if(super[le])return super[le]()}[ce](){if(super[ce])return super[ce]()}[de](){if(super[de])return super[de]()}[ve](e){let t=!1;if(e.target===this){const o=this[Te].orientation||"both",i="horizontal"===o||"both"===o,a="vertical"===o||"both"===o;switch(e.key){case"ArrowDown":a&&(t=e.altKey?this[oe]():this[te]());break;case"ArrowLeft":!i||e.metaKey||e.altKey||(t=this[re]());break;case"ArrowRight":!i||e.metaKey||e.altKey||(t=this[le]());break;case"ArrowUp":a&&(t=e.altKey?this[ce]():this[de]());break;case"End":t=this[oe]();break;case"Home":t=this[ce]()}}return t||super[ve]&&super[ve](e)||!1}}}(Ye(function(e){return class extends e{[ve](e){let t=!1;if("horizontal"!==this.orientation)switch(e.key){case"PageDown":t=this.pageDown();break;case"PageUp":t=this.pageUp()}return t||super[ve]&&super[ve](e)}get orientation(){return super.orientation||this[Te]&&this[Te].orientation||"both"}pageDown(){return super.pageDown&&super.pageDown(),Jt(this,!0)}pageUp(){return super.pageUp&&super.pageUp(),Jt(this,!1)}get[Se](){return super[Se]||Qt(this)}}}(function(e){return class extends e{constructor(){super(),oo(this)}[ue](e){if(super[ue]&&super[ue](e),null==e||0===e.length)return!1;const t=e.toLowerCase(),o=this[Te].texts.findIndex((o=>o.substr(0,e.length).toLowerCase()===t));if(o>=0){const e=this[Te].currentIndex;return this[Ie]({currentIndex:o}),this[Te].currentIndex!==e}return!1}[ve](e){let t;switch(e.key){case"Backspace":!function(e){const t=e,o=t[Zt]?t[Zt].length:0;o>0&&(t[Zt]=t[Zt].substr(0,o-1));e[ue](t[Zt]),io(e)}(this),t=!0;break;case"Escape":oo(this);break;default:e.ctrlKey||e.metaKey||e.altKey||1!==e.key.length||function(e,t){const o=e,i=o[Zt]||"";o[Zt]=i+t,e[ue](o[Zt]),io(e)}(this,e.key)}return t||super[ve]&&super[ve](e)}}}(ao(function(e){return ro(ut(e))}(function(e){return class extends e{constructor(){super(),this.addEventListener("mousedown",(e=>{0===e.button&&(this[xe]=!0,this[Ue](e),this[xe]=!1)}))}[Ae](e){super[Ae]&&super[Ae](e),this[J]&&Object.assign(this.style,{touchAction:"manipulation",mozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none",userSelect:"none"})}[Ue](e){const t=e.composedPath?e.composedPath()[0]:e.target,{items:o,currentItemRequired:i}=this[Te];if(o&&t instanceof Node){const a=A(o,t),r=a>=0?o[a]:null;(r&&!r.disabled||!r&&!i)&&(this[Ie]({currentIndex:a}),e.stopPropagation())}}}}(V)))))))))))))));class so extends no{get[K](){return Object.assign(super[K],{availableItemFlags:null,highlightCurrentItem:!0,orientation:"vertical",currentItemFocused:!1})}async flashCurrentItem(){const e=this[Te].focusVisible,t=matchMedia("(pointer: fine)").matches;if(e||t){const e=75;this[Ie]({highlightCurrentItem:!1}),await new Promise((t=>setTimeout(t,e))),this[Ie]({highlightCurrentItem:!0}),await new Promise((t=>setTimeout(t,e)))}}[Ae](e){super[Ae](e),this[J]&&(this.addEventListener("disabledchange",(e=>{this[xe]=!0;const t=e.target,{items:o}=this[Te],i=null===o?-1:o.indexOf(t);if(i>=0){const e=this[Te].availableItemFlags.slice();e[i]=!t.disabled,this[Ie]({availableItemFlags:e})}this[xe]=!1})),"PointerEvent"in window?this.addEventListener("pointerdown",(e=>this[Ue](e))):this.addEventListener("touchstart",(e=>this[Ue](e))),this.removeAttribute("tabindex"));const{currentIndex:t,items:o}=this[Te];if((e.items||e.currentIndex||e.highlightCurrentItem)&&o){const{highlightCurrentItem:e}=this[Te];o.forEach(((o,i)=>{o.toggleAttribute("current",e&&i===t)}))}(e.items||e.currentIndex||e.currentItemFocused||e.focusVisible)&&o&&o.forEach(((e,o)=>{const i=o===t,a=t<0&&0===o;this[Te].currentItemFocused?i||a||e.removeAttribute("tabindex"):(i||a)&&(e.tabIndex=0)}))}[Ee](e){if(super[Ee](e),!this[J]&&e.currentIndex&&!this[Te].currentItemFocused){const{currentItem:e}=this[Te];(e instanceof HTMLElement?e:this).focus(),this[Ie]({currentItemFocused:!0})}}get[Se](){return this[he].content}[qe](e,t){const o=super[qe](e,t);if(t.currentIndex&&Object.assign(o,{currentItemFocused:!1}),t.items){const{items:t}=e,i=null===t?null:t.map((e=>!e.disabled));Object.assign(o,{availableItemFlags:i})}return o}get[Ve](){return k.html`
      <style>
        :host {
          box-sizing: border-box;
          cursor: default;
          display: inline-flex;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
        }

        #content {
          display: flex;
          flex: 1;
          flex-direction: column;
          max-height: 100%;
          overflow-x: hidden;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch; /* for momentum scrolling */
        }
        
        ::slotted(*) {
          flex-shrink: 0;
          outline: none;
          touch-action: manipulation;
        }

        ::slotted(option) {
          font: inherit;
          min-height: inherit;
        }
      </style>
      <div id="content" role="none">
        <slot></slot>
      </div>
    `}}const lo=Symbol("documentMouseupListener");async function co(e){const t=this,o=t[ke].elementsFromPoint(e.clientX,e.clientY);if(t.opened){const e=o.indexOf(t[he].source)>=0,i=t[he].popup,a=o.indexOf(i)>=0,r=i.frame&&o.indexOf(i.frame)>=0;e?t[Te].dragSelect&&(t[xe]=!0,t[Ie]({dragSelect:!1}),t[xe]=!1):a||r||(t[xe]=!0,await t.close(),t[xe]=!1)}}function uo(e){e[Te].opened&&e.isConnected?e[lo]||(e[lo]=co.bind(e),document.addEventListener("mouseup",e[lo])):e[lo]&&(document.removeEventListener("mouseup",e[lo]),e[lo]=null)}function po(e){return class extends e{get[K](){return Object.assign(super[K]||{},{disabled:!1})}get disabled(){return this[Te].disabled}set disabled(e){this[Ie]({disabled:e})}[Ee](e){if(super[Ee]&&super[Ee](e),e.disabled&&(this.toggleAttribute("disabled",this.disabled),this[xe])){const e=new CustomEvent("disabled-changed",{bubbles:!0});this.dispatchEvent(e);const t=new CustomEvent("disabledchange",{bubbles:!0});this.dispatchEvent(t)}}}}function ho(e,t,o,i){const a=mo(e,o,i);let r=0,n=0;const s="above"===o||"below"===o;switch(o){case"above":r=a.y-t.top;break;case"below":r=t.bottom-a.y;break;case"left":n=a.x-t.left;break;case"right":n=t.right-a.x}switch(i){case"bottom":r=a.y-t.top;break;case"center":s?n=t.width:r=t.height;break;case"stretch":s?n=e.width:r=e.height;break;case"left":n=t.right-a.x;break;case"right":n=a.x-t.left;break;case"top":r=t.bottom-a.y}return r=Math.max(0,r),n=Math.max(0,n),{height:r,width:n}}function mo(e,t,o){let i=0,a=0;const r="above"===t||"below"===t;switch(t){case"above":a=e.top;break;case"below":a=e.bottom;break;case"left":case"right":i=e[t]}switch(o){case"bottom":case"top":a=e[o];break;case"left":case"right":i=e[o];break;case"center":r?i=e.left+e.width/2:a=e.top+e.height/2;break;case"stretch":r?i=e.left:a=e.top}return{x:i,y:a}}function fo(e,t,o,i){const a=function(e){const{align:t,direction:o,rightToLeft:i}=e,a="below",r={above:"above",below:"below",column:"below","column-reverse":"above",left:"left",right:"right",row:i?"left":"right","row-reverse":i?"right":"left"}[o]||a,n={above:"horizontal",below:"horizontal",left:"vertical",right:"vertical"}[r],s={horizontal:"left",vertical:"top"}[n];return{align:{horizontal:{center:"center",end:i?"left":"right",left:"left",right:"right",start:i?"right":"left",stretch:"stretch"},vertical:{bottom:"bottom",center:"center",end:"bottom",start:"top",stretch:"stretch",top:"top"}}[n][t]||s,direction:r,rightToLeft:i}}(i),r=function(e,t){const o={above:"below",below:"above",left:"right",right:"left"},i={top:"bottom",bottom:"top",left:"right",right:"left"},a=[{align:t,direction:e}];"center"===t||"stretch"===t?a.push({align:t,direction:o[e]}):(a.push({align:i[t],direction:e}),a.push({align:t,direction:o[e]}),a.push({align:i[t],direction:o[e]}));return a}(a.direction,a.align);r.sort(((i,a)=>function(e,t,o,i,a){const r=ho(o,a,e.direction,e.align),n=ho(o,a,t.direction,t.align),s=i.width<=r.width,l=i.height<=r.height,c=s||l,u=s&&l,d=i.width<=n.width,p=i.height<=n.height,h=d||p,m=d&&p,f=r.width*r.height,v=n.width*n.height;return u&&m?0:u?-1:m?1:c&&!h?-1:h&&!c?1:c&&f>v?-1:h&&v>f?1:f>v?-1:v>f?1:0}(i,a,e,t,o)));const n=r[0];return n.rect=function(e,t,o,i,a){const r=mo(e,i,a);let{x:n,y:s,bottom:l,right:c}=o,u=0,d=0,p=t.height,h=t.width;const m="above"===i||"below"===i;switch(i){case"above":d=r.y-t.height,l=r.y;break;case"below":d=r.y,s=r.y;break;case"left":u=r.x-t.width,c=r.x;break;case"right":u=r.x,n=r.x}switch(a){case"bottom":d=r.y-t.height,l=r.y;break;case"left":u=r.x,n=r.x;break;case"center":m?u=r.x-t.width/2:d=r.y-t.height/2;break;case"right":u=r.x-t.width,c=r.x;break;case"stretch":m?(u=r.x,h=e.width):(d=r.y,p=e.height);break;case"top":d=r.y,s=r.y}return u=Math.max(u,n),d=Math.max(d,s),h=Math.min(h,c-u),p=Math.min(p,l-d),new DOMRect(u,d,h,p)}(e,t,o,n.direction,n.align),n}const vo=Symbol("implicitCloseListener");async function go(e){const t=this,o=e.relatedTarget||document.activeElement;o instanceof Element&&!y(t,o)&&(t[xe]=!0,await t.close({canceled:"window blur"}),t[xe]=!1)}async function bo(e){const t=this,o="resize"!==e.type||t[Te].closeOnWindowResize;!w(t,e)&&o&&(t[xe]=!0,await t.close({canceled:`window ${e.type}`}),t[xe]=!1)}const yo=Ye(function(e){return class extends e{get closeOnWindowResize(){return this[Te].closeOnWindowResize}set closeOnWindowResize(e){this[Ie]({closeOnWindowResize:e})}get[K](){return Object.assign(super[K]||{},{closeOnWindowResize:!0,role:"alert"})}[ve](e){let t=!1;if("Escape"===e.key)this.close({canceled:"Escape"}),t=!0;return t||super.keydown&&super.keydown(e)||!1}[Ae](e){if(super[Ae]&&super[Ae](e),this[J]&&this.addEventListener("blur",go.bind(this)),e.role){const{role:e}=this[Te];this.setAttribute("role",e)}}[Ee](e){if(super[Ee]&&super[Ee](e),e.opened)if(this.opened){("requestIdleCallback"in window?window.requestIdleCallback:setTimeout)((()=>{var e;this.opened&&((e=this)[vo]=bo.bind(e),window.addEventListener("blur",e[vo]),window.addEventListener("resize",e[vo]),window.addEventListener("scroll",e[vo]))}))}else(t=this)[vo]&&(window.removeEventListener("blur",t[vo]),window.removeEventListener("resize",t[vo]),window.removeEventListener("scroll",t[vo]),t[vo]=null);var t}get role(){return super.role}set role(e){super.role=e,this[Oe]||this[Ie]({role:e})}}}(pt));class xo extends yo{[Ae](e){super[Ae](e),e.backdropPartType&&(this[he].backdrop.addEventListener("mousedown",Ao.bind(this)),"PointerEvent"in window||this[he].backdrop.addEventListener("touchend",Ao))}}async function Ao(e){const t=this;t[xe]=!0,await t.close({canceled:"mousedown outside"}),t[xe]=!1,e.preventDefault(),e.stopPropagation()}const wo=Symbol("resizeListener"),_o=po(_t(ao(it(V))));function Eo(e){const{popupAlign:t,popupDirection:o,rightToLeft:i}=e[Te],a=fo(e[he].source.getBoundingClientRect(),e[he].popup.getBoundingClientRect(),So(),{align:t,direction:o,rightToLeft:i});e[Ie]({popupLayout:a})}function Oo(e,t,o){if(!o||o.popupPartType){const{popupPartType:o}=t,i=e.getElementById("popup");i&&q(i,o)}if(!o||o.sourcePartType){const{sourcePartType:o}=t,i=e.getElementById("source");i&&q(i,o)}}function So(){const e=window.visualViewport;return e?new DOMRect(e.offsetLeft,e.offsetTop,e.width,e.height):new DOMRect(0,0,window.innerWidth,window.innerHeight)}const Io=Ot(Ye(function(e){return class extends e{connectedCallback(){super.connectedCallback(),uo(this)}get[K](){return Object.assign(super[K]||{},{dragSelect:!0})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),uo(this)}[Ee](e){super[Ee](e),e.opened&&uo(this)}[qe](e,t){const o=super[qe](e,t);return t.opened&&e.opened&&Object.assign(o,{dragSelect:!0}),o}}}(class extends _o{get[K](){return Object.assign(super[K],{ariaHasPopup:"true",popupAlign:"start",popupDirection:"column",popupLayout:null,popupPartType:xo,sourcePartType:"div"})}get[me](){return this[he].source}get frame(){return this[he].popup.frame}get horizontalAlign(){return this[Te].popupAlign}set horizontalAlign(e){console.warn('The "horizontalAlign" property has been renamed to "popupAlign"; the "horizontal-align" attribute is now "popup-align".'),this[Ie]({popupAlign:e})}get popupAlign(){return this[Te].popupAlign}set popupAlign(e){this[Ie]({popupAlign:e})}get popupDirection(){return this[Te].popupDirection}set popupDirection(e){this[Ie]({popupDirection:e})}get popupPosition(){return this[Te].popupPosition}set popupPosition(e){console.warn('The "popupPosition" property has been renamed to "popupDirection"; the "popup-position" attribute is now "popup-direction".'),this[Ie]({popupPosition:e})}get popupPartType(){return this[Te].popupPartType}set popupPartType(e){this[Ie]({popupPartType:e})}[Ae](e){if(super[Ae](e),Oo(this[ke],this[Te],e),this[J]||e.ariaHasPopup){const{ariaHasPopup:e}=this[Te];null===e?this[me].removeAttribute("aria-haspopup"):this[me].setAttribute("aria-haspopup",this[Te].ariaHasPopup)}if(e.popupPartType&&(this[he].popup.addEventListener("open",(()=>{this.opened||(this[xe]=!0,this.open(),this[xe]=!1)})),this[he].popup.addEventListener("close",(e=>{if(!this.closed){this[xe]=!0;const t=e.detail.closeResult;this.close(t),this[xe]=!1}}))),e.opened||e.popupLayout){const{opened:e,popupLayout:t}=this[Te];if(e)if(t){const e=this[he].popup,o=function(e){const{align:t,direction:o,rect:i}=e,a=So(),r={},n="above"===o||"below"===o;switch(o){case"above":r.bottom=a.bottom-i.bottom+"px";break;case"below":r.top=`${i.top}px`;break;case"left":r.right=a.right-i.right+"px";break;case"right":r.left=`${i.left}px`}switch(t){case"bottom":r.bottom=a.bottom-i.bottom+"px";break;case"center":case"stretch":n?(r.left=`${i.left}px`,r.right=a.right-i.right+"px"):(r.bottom=a.bottom-i.bottom+"px",r.top=`${i.top}px`);break;case"left":r.left=`${i.left}px`;break;case"right":r.right=a.right-i.right+"px";break;case"top":r.top=`${i.top}px`}return r}(t);Object.assign(e.style,o,{opacity:""})}else Object.assign(this[he].popup.style,{bottom:"",left:"",opacity:0,right:"",top:""});else Object.assign(this[he].popup.style,{bottom:"",left:"",opacity:"",right:"",top:""})}if(e.opened){const{opened:e}=this[Te];this[he].popup.opened=e}if(e.disabled&&"disabled"in this[he].source){const{disabled:e}=this[Te];this[he].source.disabled=e}if(e.popupLayout){const{popupLayout:e}=this[Te];if(e){const{align:t,direction:o}=e,i=this[he].popup;"position"in i&&(i.position=o),"align"in i&&(i.align=t)}}}[Ee](e){super[Ee](e);const{opened:t}=this[Te];var o;e.opened?t?(o=this,setTimeout((()=>{o[Te].opened&&(Eo(o),function(e){const t=e;t[wo]=()=>{Eo(e)},(window.visualViewport||window).addEventListener("resize",t[wo])}(o))}))):function(e){const t=e;if(t[wo]){(window.visualViewport||window).removeEventListener("resize",t[wo]),t[wo]=null}}(this):e.popupLayout&&this[Te].opened&&!this[Te].popupLayout&&Eo(this)}get sourcePartType(){return this[Te].sourcePartType}set sourcePartType(e){this[Ie]({sourcePartType:e})}[qe](e,t){const o=super[qe](e,t);return(t.opened&&!e.opened||e.opened&&(t.popupAlign||t.popupDirection||t.rightToLeft))&&Object.assign(o,{popupLayout:null}),o}get[Ve](){const e=super[Ve];return e.content.append(I.html`
      <style>
        :host {
          display: inline-block;
          position: relative;
        }

        [part~="source"] {
          height: 100%;
          -webkit-tap-highlight-color: transparent;
          touch-action: manipulation;
          width: 100%;
        }

        [part~="popup"] {
          max-height: 100%;
          max-width: 100%;
          outline: none;
          position: fixed;
        }
      </style>
      <div id="source" part="source">
        <slot name="source"></slot>
      </div>
      <div id="popup" part="popup" exportparts="backdrop, frame" role="none">
        <slot></slot>
      </div>
    `),Oo(e.content,this[Te]),e}})));async function ko(e){const t=this,o=e.relatedTarget||document.activeElement;o instanceof Element&&!y(t,o)&&(t[xe]=!0,await t.close({canceled:"blur"}),t[xe]=!1)}const Co=Symbol("documentMousemoveListener");function No(e){const t=this,{hasHoveredOverItemSinceOpened:o,opened:i}=t[Te];if(i){const i=e.composedPath?e.composedPath()[0]:e.target,a=t.items;if(i&&i instanceof Node&&a){const e=A(a,i),r=a[e],n=r&&!r.disabled?e:-1;(o||n>=0)&&n!==t[Te].currentIndex&&(t[xe]=!0,t[Ie]({currentIndex:n}),n>=0&&!o&&t[Ie]({hasHoveredOverItemSinceOpened:!0}),t[xe]=!1)}}}function To(e){e[Te].opened&&e.isConnected?e[Co]||(e[Co]=No.bind(e),document.addEventListener("mousemove",e[Co])):e[Co]&&(document.removeEventListener("mousemove",e[Co]),e[Co]=null)}async function qo(e){const t=e[xe],o=e[Te].currentIndex>=0,i=e.items;if(i){const a=o?i[e[Te].currentIndex]:void 0,r=e[Te].popupList;o&&"flashCurrentItem"in r&&await r.flashCurrentItem();const n=e[xe];e[xe]=t,await e.close(a),e[xe]=n}}const Ro=function(e){return class extends e{connectedCallback(){super.connectedCallback(),To(this)}get[K](){return Object.assign(super[K]||{},{currentIndex:-1,hasHoveredOverItemSinceOpened:!1,popupList:null})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),To(this)}[ve](e){let t=!1;if("Enter"===e.key)this.opened&&(qo(this),t=!0);return t||super[ve]&&super[ve](e)||!1}[Ae](e){if(super[Ae]&&super[Ae](e),e.popupList){const{popupList:e}=this[Te];e&&(e.addEventListener("mouseup",(async e=>{const t=this[Te].currentIndex;this[Te].dragSelect||t>=0?(e.stopPropagation(),this[xe]=!0,await qo(this),this[xe]=!1):e.stopPropagation()})),e.addEventListener("currentindexchange",(e=>{this[xe]=!0;const t=e;this[Ie]({currentIndex:t.detail.currentIndex}),this[xe]=!1})))}if(e.currentIndex||e.popupList){const{currentIndex:e,popupList:t}=this[Te];t&&"currentIndex"in t&&(t.currentIndex=e)}}[Ee](e){if(super[Ee]&&super[Ee](e),e.opened){if(this[Te].opened){const{popupList:e}=this[Te];e.scrollCurrentItemIntoView&&setTimeout((()=>{e.scrollCurrentItemIntoView()}))}To(this)}}[qe](e,t){const o=super[qe]?super[qe](e,t):{};return t.opened&&e.opened&&Object.assign(o,{hasHoveredOverItemSinceOpened:!1}),o}}}(class extends Io{get[K](){return Object.assign(super[K],{sourcePartType:"button"})}[ve](e){let t;switch(e.key){case" ":case"ArrowDown":case"ArrowUp":this.closed&&(this.open(),t=!0);break;case"Enter":this.opened||(this.open(),t=!0);break;case"Escape":this.opened&&(this.close({canceled:"Escape"}),t=!0)}if(t=super[ve]&&super[ve](e),!t&&this.opened&&!e.metaKey&&!e.altKey)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":case"PageDown":case"PageUp":case" ":t=!0}return t}[Ae](e){if(super[Ae](e),this[J]&&(this.addEventListener("blur",ko.bind(this)),this[he].source.addEventListener("focus",(async e=>{const t=w(this[he].popup,e),o=null!==this[Te].popupHeight;!t&&this.opened&&o&&(this[xe]=!0,await this.close(),this[xe]=!1)}))),e.opened){const{opened:e}=this[Te];this.toggleAttribute("opened",e)}if(e.sourcePartType){this[he].source.addEventListener("mousedown",(e=>{if(this.disabled)return void e.preventDefault();const t=e;t.button&&0!==t.button||(setTimeout((()=>{this.opened||(this[xe]=!0,this.open(),this[xe]=!1)})),e.stopPropagation())}))}e.popupPartType&&this[he].popup.removeAttribute("tabindex")}get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          [part~="source"] {
            cursor: default;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-user-select: none;
            user-select: none;
          }

          :host([opened][focus-visible]) {
            outline: none;
          }
        </style>
      `),e}});class Do extends Ro{get[K](){return Object.assign(super[K],{menuPartType:so})}get items(){const e=this[he]&&this[he].menu;return e?e.items:null}get menuPartType(){return this[Te].menuPartType}set menuPartType(e){this[Ie]({menuPartType:e})}[Ae](e){if(super[Ae](e),Po(this[ke],this[Te],e),e.menuPartType&&(this[he].menu.addEventListener("blur",(async e=>{const t=e.relatedTarget||document.activeElement;this.opened&&!y(this[he].menu,t)&&(this[xe]=!0,await this.close(),this[xe]=!1)})),this[he].menu.addEventListener("mousedown",(e=>{0===e.button&&this.opened&&(e.stopPropagation(),e.preventDefault())}))),e.opened){const{opened:e}=this[Te];this[he].source.setAttribute("aria-expanded",e.toString())}}[Ee](e){super[Ee](e),e.menuPartType&&this[Ie]({popupList:this[he].menu})}[qe](e,t){const o=super[qe](e,t);return t.opened&&!e.opened&&Object.assign(o,{currentIndex:-1}),o}get[Ve](){const e=super[Ve],t=e.content.querySelector("slot:not([name])");return t&&t.replaceWith(I.html`
        <div id="menu" part="menu">
          <slot></slot>
        </div>
      `),Po(e.content,this[Te]),e.content.append(I.html`
      <style>
        [part~="menu"] {
          max-height: 100%;
        }
      </style>
    `),e}}function Po(e,t,o){if(!o||o.menuPartType){const{menuPartType:o}=t,i=e.getElementById("menu");i&&q(i,o)}}const Lo=po(V);class Mo extends Lo{get[K](){return Object.assign(super[K],{direction:"down"})}get direction(){return this[Te].direction}set direction(e){this[Ie]({direction:e})}[Ae](e){if(super[Ae](e),e.direction){const{direction:e}=this[Te];this[he].downIcon.style.display="down"===e?"block":"none",this[he].upIcon.style.display="up"===e?"block":"none"}}get[Ve](){return k.html`
      <style>
        :host {
          display: inline-block;
        }
      </style>
      <div id="downIcon" part="toggle-icon down-icon">
        <slot name="down-icon"></slot>
      </div>
      <div id="upIcon" part="toggle-icon up-icon">
        <slot name="up-icon"></slot>
      </div>
    `}}function $o(e,t,o){if(!o||o.popupTogglePartType){const{popupTogglePartType:o}=t,i=e.getElementById("popupToggle");i&&q(i,o)}}class jo extends so{get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host ::slotted(*) {
            padding: 0.25em 1em;
          }
          
          :host ::slotted([current]) {
            background: highlight;
            color: highlighttext;
          }

          @media (pointer: coarse) {
            ::slotted(*) {
              padding: 1em;
            }
          }
        </style>
      `),e}}class zo extends Mo{get[Ve](){const e=super[Ve],t=e.content.getElementById("downIcon"),o=I.html`
      <svg
        id="downIcon"
        part="toggle-icon down-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 0 l5 5 5 -5 z" />
      </svg>
    `.firstElementChild;t&&o&&T(t,o);const i=e.content.getElementById("upIcon"),a=I.html`
      <svg
        id="upIcon"
        part="toggle-icon up-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 10 5"
      >
        <path d="M 0 5 l5 -5 5 5 z" />
      </svg>
    `.firstElementChild;return i&&a&&T(i,a),e.content.append(I.html`
        <style>
          :host {
            align-items: center;
            display: inline-flex;
            padding: 2px;
          }

          :host(:not([disabled])):hover {
            background: #eee;
          }

          [part~="toggle-icon"] {
            fill: currentColor;
            height: 10px;
            margin: 0.25em;
            width: 10px;
          }
        </style>
      `),e}}class Fo extends Ze{}class Bo extends xo{get[K](){return Object.assign(super[K],{backdropPartType:Fo,framePartType:Bt})}}class Uo extends(function(e){return class extends e{get[K](){return Object.assign(super[K]||{},{popupTogglePartType:Mo})}get popupTogglePartType(){return this[Te].popupTogglePartType}set popupTogglePartType(e){this[Ie]({popupTogglePartType:e})}[Ae](e){if(super[Ae](e),$o(this[ke],this[Te],e),e.popupDirection||e.popupTogglePartType){const{popupDirection:e}=this[Te],t="above"===e||"column-reverse"===e?"up":"down",o=this[he].popupToggle;"direction"in o&&(o.direction=t)}if(e.disabled){const{disabled:e}=this[Te];this[he].popupToggle.disabled=e}}get[Ve](){const e=super[Ve],t=e.content.querySelector('[part~="source"]');return t&&t.append(I.html`
          <div
            id="popupToggle"
            part="popup-toggle"
            exportparts="toggle-icon, down-icon, up-icon"
            tabindex="-1"
          ></div>
      `),$o(e.content,this[Te]),e.content.append(I.html`
      <style>
        [part~="popup-toggle"] {
          outline: none;
        }

        [part~="source"] {
          align-items: center;
          display: flex;
        }
      </style>
    `),e}}}(Do)){get[K](){return Object.assign(super[K],{menuPartType:jo,popupPartType:Bo,popupTogglePartType:zo,sourcePartType:zt})}get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          [part~="menu"] {
            background: window;
            border: none;
            padding: 0.5em 0;
          }
        </style>
      `),e}}customElements.define("elix-menu-button",class extends Uo{});class Vo extends(function(e){return class extends e{constructor(){super();const e=this;!this[ye]&&e.attachInternals&&(this[ye]=e.attachInternals())}attributeChangedCallback(e,t,o){if("current"===e){const t=b(e,o);this.current!==t&&(this.current=t)}else super.attributeChangedCallback(e,t,o)}get[K](){return Object.assign(super[K]||{},{current:!1})}[Ae](e){if(super[Ae](e),e.current){const{current:e}=this[Te];E(this,"current",e)}}[Ee](e){if(super[Ee]&&super[Ee](e),e.current){const{current:e}=this[Te],t=new CustomEvent("current-changed",{bubbles:!0,detail:{current:e}});this.dispatchEvent(t);const o=new CustomEvent("currentchange",{bubbles:!0,detail:{current:e}});this.dispatchEvent(o)}}get current(){return this[Te].current}set current(e){this[Ie]({current:e})}}}(po(function(e){return class extends e{constructor(){super();const e=this;!this[ye]&&e.attachInternals&&(this[ye]=e.attachInternals())}get[K](){return Object.assign(super[K]||{},{selected:!1})}[Ae](e){if(super[Ae](e),e.selected){const{selected:e}=this[Te];E(this,"selected",e)}}[Ee](e){if(super[Ee]&&super[Ee](e),e.selected){const{selected:e}=this[Te],t=new CustomEvent("selected-changed",{bubbles:!0,detail:{selected:e}});this.dispatchEvent(t);const o=new CustomEvent("selectedchange",{bubbles:!0,detail:{selected:e}});this.dispatchEvent(o)}}get selected(){return this[Te].selected}set selected(e){this[Ie]({selected:e})}}}(V)))){}class Ho extends Vo{get[Ve](){return k.html`
      <style>
        :host {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
          font-size: 10pt;
          white-space: nowrap;
        }

        :host([disabled]) {
          opacity: 0.5;
        }

        #checkmark {
          height: 1em;
          visibility: hidden;
          width: 1em;
        }

        :host([selected]) #checkmark {
          visibility: visible;
        }
      </style>
      <svg id="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="4 6 18 12">
        <path d="M0 0h24v24H0V0z" fill="none"/>
        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
      </svg>
      <slot></slot>
    `}}customElements.define("elix-menu-item",class extends Ho{});class Go extends V{get disabled(){return!0}[Ae](e){super[Ae](e),this[J]&&this.setAttribute("aria-hidden","true")}}class Qo extends Go{get[Ve](){return k.html`
      <style>
        :host {
          padding: 0 !important;
        }

        hr {
          border-bottom-width: 0px;
          border-color: #fff; /* Ends up as light gray */
          border-top-width: 1px;
          margin: 0.25em 0;
        }
      </style>
      <hr>
    `}}customElements.define("elix-menu-separator",class extends Qo{});const Ko=Symbol("timeout"),Wo=ao(function(e){return class extends e{get[Y](){return super[Y]||this}[Ae](e){if(super[Ae]&&super[Ae](e),this[J]){(this[Y]===this?this:this[ke]).addEventListener("transitionend",(e=>{const t=this[Te].effectEndTarget||this[Y];e.target===t&&this[Ie]({effectPhase:"after"})}))}}[Ee](e){if(super[Ee]&&super[Ee](e),e.effect||e.effectPhase){const{effect:e,effectPhase:t}=this[Te],o=new CustomEvent("effect-phase-changed",{bubbles:!0,detail:{effect:e,effectPhase:t}});this.dispatchEvent(o);const i=new CustomEvent("effectphasechange",{bubbles:!0,detail:{effect:e,effectPhase:t}});this.dispatchEvent(i),e&&("after"!==t&&this.offsetHeight,"before"===t&&this[Ie]({effectPhase:"during"}))}}async[Ne](e){await this[Ie]({effect:e,effectPhase:"before"})}}}(xo));class Xo extends Wo{constructor(){super(),this.addEventListener("mouseout",(()=>{Jo(this)})),this.addEventListener("mouseover",(()=>{Yo(this)}))}attributeChangedCallback(e,t,o){"duration"===e?this.duration=Number(o):super.attributeChangedCallback(e,t,o)}get[K](){return Object.assign(super[K],{duration:null,fromEdge:"bottom"})}get duration(){return this[Te].duration}set duration(e){isNaN(e)||this[Ie]({duration:e})}get[Y](){return this[he].frame}get fromEdge(){return this[Te].fromEdge}set fromEdge(e){this[Ie]({fromEdge:e})}[Ae](e){if(super[Ae](e),e.fromEdge){const e={bottom:{alignItems:"center",justifyContent:"flex-end"},"bottom-left":{alignItems:"flex-start",justifyContent:"flex-end"},"bottom-right":{alignItems:"flex-end",justifyContent:"flex-end"},top:{alignItems:"center",justifyContent:null},"top-left":{alignItems:"flex-start",justifyContent:null},"top-right":{alignItems:"flex-end",justifyContent:null}};Object.assign(this.style,e[this[Te].fromEdge])}if(e.effect||e.effectPhase||e.fromEdge||e.rightToLeft){const{effect:e,effectPhase:t,fromEdge:o,rightToLeft:i}=this[Te],a={"bottom-left":"bottom-right","bottom-right":"bottom-left","top-left":"top-right","top-right":"top-left"},r=i&&a[o]||o,n={bottom:"translateY(100%)","bottom-left":"translateX(-100%)","bottom-right":"translateX(100%)",top:"translateY(-100%)","top-left":"translateX(-100%)","top-right":"translateX(100%)"},s={bottom:"translateY(0)","bottom-left":"translateX(0)","bottom-right":"translateX(0)",top:"translateY(0)","top-left":"translateX(0)","top-right":"translateX(0)"},l="open"===e&&"before"!==t||"close"===e&&"before"===t,c=l?1:0,u=l?s[r]:n[r];Object.assign(this[he].frame.style,{opacity:c,transform:u})}}[Ee](e){super[Ee](e),Jo(this)}}function Yo(e){const t=e;t[Ko]&&(clearTimeout(t[Ko]),t[Ko]=null)}function Jo(e){e.opened&&function(e){Yo(e);const t=e[Te].duration;null!==t&&t>0&&(e[Ko]=setTimeout((()=>{e.close()}),t))}(e)}class Zo extends Xo{get[K](){return Object.assign(super[K],{framePartType:Bt})}get[Ve](){const e=super[Ve];return e.content.append(I.html`
        <style>
          :host {
            align-items: initial;
            display: flex;
            flex-direction: column;
            height: 100%;
            justify-content: initial;
            left: 0;
            outline: none;
            pointer-events: none;
            top: 0;
            -webkit-tap-highlight-color: transparent;
            width: 100%;
          }

          [part~="frame"] {
            margin: 1em;
            transition-duration: 0.25s;
            transition-property: opacity, transform;
            will-change: opacity, transform;
          }
        </style>
      `),e}}
/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */
var ei,ti;customElements.define("elix-toast",class extends Zo{}),ei="undefined"!=typeof self?self:void 0,ti=function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=109)}([function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(17),a=o(18),r=o(19),n=o(45),s=o(46),l=o(47),c=o(48),u=o(49),d=o(12),p=o(32),h=o(33),m=o(31),f=o(1),v={Scope:f.Scope,create:f.create,find:f.find,query:f.query,register:f.register,Container:i.default,Format:a.default,Leaf:r.default,Embed:c.default,Scroll:n.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:m.default}};t.default=v},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){var o=this;return t="[Parchment] "+t,(o=e.call(this,t)||this).message=t,o.name=o.constructor.name,o}return a(t,e),t}(Error);t.ParchmentError=r;var n,s={},l={},c={},u={};function d(e,t){var o;if(void 0===t&&(t=n.ANY),"string"==typeof e)o=u[e]||s[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)o=u.text;else if("number"==typeof e)e&n.LEVEL&n.BLOCK?o=u.block:e&n.LEVEL&n.INLINE&&(o=u.inline);else if(e instanceof HTMLElement){var i=(e.getAttribute("class")||"").split(/\s+/);for(var a in i)if(o=l[i[a]])break;o=o||c[e.tagName]}return null==o?null:t&n.LEVEL&o.scope&&t&n.TYPE&o.scope?o:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(n=t.Scope||(t.Scope={})),t.create=function(e,t){var o=d(e);if(null==o)throw new r("Unable to create "+e+" blot");var i=o,a=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(t);return new i(a,t)},t.find=function e(o,i){return void 0===i&&(i=!1),null==o?null:null!=o[t.DATA_KEY]?o[t.DATA_KEY].blot:i?e(o.parentNode,i):null},t.query=d,t.register=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(t.length>1)return t.map((function(t){return e(t)}));var i=t[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new r("Invalid definition");if("abstract"===i.blotName)throw new r("Cannot register abstract class");if(u[i.blotName||i.attrName]=i,"string"==typeof i.keyName)s[i.keyName]=i;else if(null!=i.className&&(l[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map((function(e){return e.toUpperCase()})):i.tagName=i.tagName.toUpperCase();var a=Array.isArray(i.tagName)?i.tagName:[i.tagName];a.forEach((function(e){null!=c[e]&&null!=i.className||(c[e]=i)}))}return i}},function(e,t,o){var i=o(51),a=o(11),r=o(3),n=o(20),s=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var o={};return 0===e.length?this:(o.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(o.attributes=t),this.push(o))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var o={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(o.attributes=t),this.push(o)},l.prototype.push=function(e){var t=this.ops.length,o=this.ops[t-1];if(e=r(!0,{},e),"object"==typeof o){if("number"==typeof e.delete&&"number"==typeof o.delete)return this.ops[t-1]={delete:o.delete+e.delete},this;if("number"==typeof o.delete&&null!=e.insert&&(t-=1,"object"!=typeof(o=this.ops[t-1])))return this.ops.unshift(e),this;if(a(e.attributes,o.attributes)){if("string"==typeof e.insert&&"string"==typeof o.insert)return this.ops[t-1]={insert:o.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof o.retain)return this.ops[t-1]={retain:o.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],o=[];return this.forEach((function(i){(e(i)?t:o).push(i)})),[t,o]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+n.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+n.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var o=[],i=n.iterator(this.ops),a=0;a<t&&i.hasNext();){var r;a<e?r=i.next(e-a):(r=i.next(t-a),o.push(r)),a+=n.length(r)}return new l(o)},l.prototype.compose=function(e){var t=n.iterator(this.ops),o=n.iterator(e.ops),i=[],r=o.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){for(var s=r.retain;"insert"===t.peekType()&&t.peekLength()<=s;)s-=t.peekLength(),i.push(t.next());r.retain-s>0&&o.next(r.retain-s)}for(var c=new l(i);t.hasNext()||o.hasNext();)if("insert"===o.peekType())c.push(o.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),o.peekLength()),d=t.next(u),p=o.next(u);if("number"==typeof p.retain){var h={};"number"==typeof d.retain?h.retain=u:h.insert=d.insert;var m=n.attributes.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(m&&(h.attributes=m),c.push(h),!o.hasNext()&&a(c.ops[c.ops.length-1],h)){var f=new l(t.rest());return c.concat(f).chop()}}else"number"==typeof p.delete&&"number"==typeof d.retain&&c.push(p)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var o=[this,e].map((function(t){return t.map((function(o){if(null!=o.insert)return"string"==typeof o.insert?o.insert:s;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),r=new l,c=i(o[0],o[1],t),u=n.iterator(this.ops),d=n.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var o=0;switch(e[0]){case i.INSERT:o=Math.min(d.peekLength(),t),r.push(d.next(o));break;case i.DELETE:o=Math.min(t,u.peekLength()),u.next(o),r.delete(o);break;case i.EQUAL:o=Math.min(u.peekLength(),d.peekLength(),t);var s=u.next(o),l=d.next(o);a(s.insert,l.insert)?r.retain(o,n.attributes.diff(s.attributes,l.attributes)):r.push(l).delete(o)}t-=o}})),r.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var o=n.iterator(this.ops),i=new l,a=0;o.hasNext();){if("insert"!==o.peekType())return;var r=o.peek(),s=n.length(r)-o.peekLength(),c="string"==typeof r.insert?r.insert.indexOf(t,s)-s:-1;if(c<0)i.push(o.next());else if(c>0)i.push(o.next(c));else{if(!1===e(i,o.next(1).attributes||{},a))return;a+=1,i=new l}}i.length()>0&&e(i,{},a)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var o=n.iterator(this.ops),i=n.iterator(e.ops),a=new l;o.hasNext()||i.hasNext();)if("insert"!==o.peekType()||!t&&"insert"===i.peekType())if("insert"===i.peekType())a.push(i.next());else{var r=Math.min(o.peekLength(),i.peekLength()),s=o.next(r),c=i.next(r);if(s.delete)continue;c.delete?a.push(c):a.retain(r,n.attributes.transform(s.attributes,c.attributes,t))}else a.retain(n.length(o.next()));return a.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var o=n.iterator(this.ops),i=0;o.hasNext()&&i<=e;){var a=o.peekLength(),r=o.peekType();o.next(),"delete"!==r?("insert"===r&&(i<e||!t)&&(e+=a),i+=a):e-=Math.min(a,e-i)}return e},e.exports=l},function(e,t){var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===i.call(e)},s=function(e){if(!e||"[object Object]"!==i.call(e))return!1;var t,a=o.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&o.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!a&&!r)return!1;for(t in e);return void 0===t||o.call(e,t)},l=function(e,t){a&&"__proto__"===t.name?a(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!o.call(e,t))return;if(r)return r(e,t).value}return e[t]};e.exports=function e(){var t,o,i,a,r,u,d=arguments[0],p=1,h=arguments.length,m=!1;for("boolean"==typeof d&&(m=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(null!=(t=arguments[p]))for(o in t)i=c(d,o),d!==(a=c(t,o))&&(m&&a&&(s(a)||(r=n(a)))?(r?(r=!1,u=i&&n(i)?i:[]):u=i&&s(i)?i:{},l(d,{name:o,newValue:e(m,u,a)})):void 0!==a&&l(d,{name:o,newValue:a}));return d}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=d(o(3)),n=d(o(2)),s=d(o(0)),l=d(o(16)),c=d(o(6)),u=d(o(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),i(t,[{key:"attach",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new n.default).insert(this.value(),(0,r.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var o=s.default.query(e,s.default.Scope.BLOCK_ATTRIBUTE);null!=o&&this.attributes.attribute(o,t)}},{key:"formatAt",value:function(e,t,o,i){this.format(o,i)}},{key:"insertAt",value:function(e,o,i){if("string"==typeof o&&o.endsWith("\n")){var r=s.default.create(v.blotName);this.parent.insertBefore(r,0===e?this:this.next),r.insertAt(0,o.slice(0,-1))}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,o,i)}}]),t}(s.default.Embed);f.scope=s.default.Scope.BLOCK_BLOT;var v=function(e){function t(e){p(this,t);var o=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.cache={},o}return m(t,e),i(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(s.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),g(t))}),new n.default).insert("\n",g(this))),this.cache.delta}},{key:"deleteAt",value:function(e,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,o),this.cache={}}},{key:"formatAt",value:function(e,o,i,r){o<=0||(s.default.query(i,s.default.Scope.BLOCK)?e+o===this.length()&&this.format(i,r):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(o,this.length()-e-1),i,r),this.cache={})}},{key:"insertAt",value:function(e,o,i){if(null!=i)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,o,i);if(0!==o.length){var r=o.split("\n"),n=r.shift();n.length>0&&(e<this.length()-1||null==this.children.tail?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),n):this.children.tail.insertAt(this.children.tail.length(),n),this.cache={});var s=this;r.reduce((function(e,t){return(s=s.split(e,!0)).insertAt(0,t),t.length}),e+n.length)}}},{key:"insertBefore",value:function(e,o){var i=this.children.head;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,o),i instanceof l.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,o){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,o),this.cache={}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o&&(0===e||e>=this.length()-1)){var i=this.clone();return 0===e?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,o);return this.cache={},r}}]),t}(s.default.Block);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,r.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:g(e.parent,t))}v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[c.default,s.default.Embed,u.default],t.bubbleFormats=g,t.BlockEmbed=f,t.default=v},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();o(50);var n=v(o(2)),s=v(o(14)),l=v(o(8)),c=v(o(9)),u=v(o(0)),d=o(15),p=v(d),h=v(o(3)),m=v(o(10)),f=v(o(34));function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var y=(0,m.default)("quill"),x=function(){function e(t){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(this,e),this.options=A(t,i),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var a=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&o.root.classList.toggle("ql-blank",o.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var i=o.selection.lastRange,a=i&&0===i.length?i.index:void 0;w.call(o,(function(){return o.editor.update(null,t,a)}),e)}));var r=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+a+"<p><br></p></div>");this.setContents(r),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return r(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),m.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var a=e.attrName||e.blotName;"string"==typeof a?this.register("formats/"+a,e,t):Object.keys(e).forEach((function(i){o.register(i,e[i],t)}))}else null==this.imports[e]||i||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),r(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var o=e;(e=document.createElement("div")).classList.add(o)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,o){var i=this,r=_(e,t,o),n=a(r,4);return e=n[0],t=n[1],o=n[3],w.call(this,(function(){return i.editor.deleteText(e,t)}),o,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,(function(){var i=o.getSelection(!0),a=new n.default;if(null==i)return a;if(u.default.query(e,u.default.Scope.BLOCK))a=o.editor.formatLine(i.index,i.length,g({},e,t));else{if(0===i.length)return o.selection.format(e,t),a;a=o.editor.formatText(i.index,i.length,g({},e,t))}return o.setSelection(i,l.default.sources.SILENT),a}),i)}},{key:"formatLine",value:function(e,t,o,i,r){var n,s=this,l=_(e,t,o,i,r),c=a(l,4);return e=c[0],t=c[1],n=c[2],r=c[3],w.call(this,(function(){return s.editor.formatLine(e,t,n)}),r,e,0)}},{key:"formatText",value:function(e,t,o,i,r){var n,s=this,l=_(e,t,o,i,r),c=a(l,4);return e=c[0],t=c[1],n=c[2],r=c[3],w.call(this,(function(){return s.editor.formatText(e,t,n)}),r,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=void 0;o="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var i=this.container.getBoundingClientRect();return{bottom:o.bottom-i.top,height:o.height,left:o.left-i.left,right:o.right-i.left,top:o.top-i.top,width:o.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,o=_(e,t),i=a(o,2);return e=i[0],t=i[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,o=_(e,t),i=a(o,2);return e=i[0],t=i[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,o,i){var a=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,(function(){return a.editor.insertEmbed(t,o,i)}),r,t)}},{key:"insertText",value:function(e,t,o,i,r){var n,s=this,l=_(e,0,o,i,r),c=a(l,4);return e=c[0],n=c[2],r=c[3],w.call(this,(function(){return s.editor.insertText(e,t,n)}),r,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,o){this.clipboard.dangerouslyPasteHTML(e,t,o)}},{key:"removeFormat",value:function(e,t,o){var i=this,r=_(e,t,o),n=a(r,4);return e=n[0],t=n[1],o=n[3],w.call(this,(function(){return i.editor.removeFormat(e,t)}),o,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){e=new n.default(e);var o=t.getLength(),i=t.editor.deleteText(0,o),a=t.editor.applyDelta(e),r=a.ops[a.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),a.delete(1)),i.compose(a)}),o)}},{key:"setSelection",value:function(t,o,i){if(null==t)this.selection.setRange(null,o||e.sources.API);else{var r=_(t,o,i),n=a(r,4);t=n[0],o=n[1],i=n[3],this.selection.setRange(new d.Range(t,o),i),i!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,o=(new n.default).insert(e);return this.setContents(o,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){return e=new n.default(e),t.editor.applyDelta(e,o)}),o,!0)}}]),e}();function A(e,t){if((t=(0,h.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==x.DEFAULTS.theme){if(t.theme=x.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=f.default;var o=(0,h.default)(!0,{},t.theme.DEFAULTS);[o,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var i=Object.keys(o.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var o=x.import("modules/"+t);return null==o?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=o.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,h.default)(!0,{},x.DEFAULTS,{modules:i},o,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,o){return t.modules[o]&&(e[o]=t.modules[o]),e}),{}),t}function w(e,t,o,i){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new n.default;var a=null==o?null:this.getSelection(),r=this.editor.delta,s=e();if(null!=a&&(!0===o&&(o=a.index),null==i?a=E(a,s,t):0!==i&&(a=E(a,o,i,t)),this.setSelection(a,l.default.sources.SILENT)),s.length()>0){var c,u,d=[l.default.events.TEXT_CHANGE,s,r,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(d)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,d)}return s}function _(e,t,o,a,r){var n={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(r=a,a=o,o=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(r=a,a=o,o=t,t=0),"object"===(void 0===o?"undefined":i(o))?(n=o,r=a):"string"==typeof o&&(null!=a?n[o]=a:r=o),[e,t,n,r=r||l.default.sources.API]}function E(e,t,o,i){if(null==e)return null;var r=void 0,s=void 0;if(t instanceof n.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,i!==l.default.sources.USER)})),u=a(c,2);r=u[0],s=u[1]}else{var p=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&i===l.default.sources.USER?e:o>=0?e+o:Math.max(t,e+o)})),h=a(p,2);r=h[0],s=h[1]}return new d.Range(r,s-r)}x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=l.default.events,x.sources=l.default.sources,x.version="1.3.7",x.imports={delta:n.default,parchment:u.default,"core/module":c.default,"core/theme":f.default},t.expandConfig=A,t.overload=_,t.default=x},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=s(o(7)),n=s(o(0));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"formatAt",value:function(e,o,i,r){if(t.compare(this.statics.blotName,i)<0&&n.default.query(i,n.default.Scope.BLOT)){var s=this.isolate(e,o);r&&s.wrap(i,r)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,o,i,r)}},{key:"optimize",value:function(e){if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var o=this.parent.isolate(this.offset(),this.length());this.moveChildren(o),o.wrap(this)}}}],[{key:"compare",value:function(e,o){var i=t.order.indexOf(e),a=t.order.indexOf(o);return i>=0||a>=0?i-a:e===o?0:e<o?-1:1}}]),t}(n.default.Inline);u.allowedChildren=[u,n.default.Embed,r.default],u.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=u},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=a)&&i.__esModule?i:{default:i}).default.Text);t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=n(o(54));function n(e){return e&&e.__esModule?e:{default:e}}var s=(0,n(o(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var o;e.__quill&&e.__quill.emitter&&(o=e.__quill.emitter).handleDOM.apply(o,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",s.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"emit",value:function(){s.log.apply(s,arguments),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,o=Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];(this.listeners[e.type]||[]).forEach((function(t){var i=t.node,a=t.handler;(e.target===i||i.contains(e.target))&&a.apply(void 0,[e].concat(o))}))}},{key:"listenDOM",value:function(e,t,o){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:o})}}]),t}(r.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,o){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),this.quill=t,this.options=o};a.DEFAULTS={},t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=["error","warn","log","info"],a="warn";function r(e){if(i.indexOf(e)<=i.indexOf(a)){for(var t,o=arguments.length,r=Array(o>1?o-1:0),n=1;n<o;n++)r[n-1]=arguments[n];(t=console)[e].apply(t,r)}}function n(e){return i.reduce((function(t,o){return t[o]=r.bind(console,o,e),t}),{})}r.level=n.level=function(e){a=e},t.default=n},function(e,t,o){var i=Array.prototype.slice,a=o(52),r=o(53),n=e.exports=function(e,t,o){return o||(o={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?o.strict?e===t:e==t:function(e,t,o){var c,u;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(r(e))return!!r(t)&&(e=i.call(e),t=i.call(t),n(e,t,o));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var d=a(e),p=a(t)}catch(e){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),c=d.length-1;c>=0;c--)if(d[c]!=p[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!n(e[u],t[u],o))return!1;return typeof e==typeof t}(e,t,o))};function s(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),a=function(){function e(e,t,o){void 0===o&&(o={}),this.attrName=e,this.keyName=t;var a=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=o.scope?this.scope=o.scope&i.Scope.LEVEL|a:this.scope=i.Scope.ATTRIBUTE,null!=o.whitelist&&(this.whitelist=o.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=i.query(e,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=d(o(2)),s=d(o(0)),l=d(o(4)),c=d(o(6)),u=d(o(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(c.default);f.blotName="code",f.tagName="CODE";var v=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),a(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,o){return t.insert(o).insert("\n",e.formats())}),new n.default)}},{key:"format",value:function(e,o){if(e!==this.statics.blotName||!o){var a=this.descendant(u.default,this.length()-1),n=i(a,1)[0];null!=n&&n.deleteAt(n.length()-1,1),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o)}}},{key:"formatAt",value:function(e,o,i,a){if(0!==o&&null!=s.default.query(i,s.default.Scope.BLOCK)&&(i!==this.statics.blotName||a!==this.statics.formats(this.domNode))){var r=this.newlineIndex(e);if(!(r<0||r>=e+o)){var n=this.newlineIndex(e,!0)+1,l=r-n+1,c=this.isolate(n,l),u=c.next;c.format(i,a),u instanceof t&&u.formatAt(0,e-n+o-l,i,a)}}}},{key:"insertAt",value:function(e,t,o){if(null==o){var a=this.descendant(u.default,e),r=i(a,2),n=r[0],s=r[1];n.insertAt(s,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var o=this.domNode.textContent.slice(e).indexOf("\n");return o>-1?e+o:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===o.statics.formats(o.domNode)&&(o.optimize(e),o.moveChildren(this),o.remove())}},{key:"replace",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=s.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof s.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var o=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return o.setAttribute("spellcheck",!1),o}},{key:"formats",value:function(){return!0}}]),t}(l.default);v.blotName="code-block",v.tagName="PRE",v.TAB="  ",t.Code=f,t.default=v},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=g(o(2)),s=g(o(20)),l=g(o(0)),c=g(o(13)),u=g(o(24)),d=o(4),p=g(d),h=g(o(16)),m=g(o(21)),f=g(o(11)),v=g(o(3));function g(e){return e&&e.__esModule?e:{default:e}}var b=/^[ -~]*$/,y=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return r(e,[{key:"applyDelta",value:function(e){var t=this,o=!1;this.scroll.update();var r=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var o=(0,m.default)(t.attributes);return delete o.image,e.insert({image:t.attributes.image},o)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,m.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var i=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(i,t.attributes)}return e.push(t)}),new n.default)}(e)).reduce((function(e,n){var c=n.retain||n.delete||n.insert.length||1,u=n.attributes||{};if(null!=n.insert){if("string"==typeof n.insert){var h=n.insert;h.endsWith("\n")&&o&&(o=!1,h=h.slice(0,-1)),e>=r&&!h.endsWith("\n")&&(o=!0),t.scroll.insertAt(e,h);var m=t.scroll.line(e),f=a(m,2),g=f[0],b=f[1],y=(0,v.default)({},(0,d.bubbleFormats)(g));if(g instanceof p.default){var x=g.descendant(l.default.Leaf,b),A=a(x,1)[0];y=(0,v.default)(y,(0,d.bubbleFormats)(A))}u=s.default.attributes.diff(y,u)||{}}else if("object"===i(n.insert)){var w=Object.keys(n.insert)[0];if(null==w)return e;t.scroll.insertAt(e,w,n.insert[w])}r+=c}return Object.keys(u).forEach((function(o){t.scroll.formatAt(e,c,o,u[o])})),e+c}),0),e.reduce((function(e,o){return"number"==typeof o.delete?(t.scroll.deleteAt(e,o.delete),e):e+(o.retain||o.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new n.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach((function(a){if(null==o.scroll.whitelist||o.scroll.whitelist[a]){var r=o.scroll.lines(e,Math.max(t,1)),n=t;r.forEach((function(t){var r=t.length();if(t instanceof c.default){var s=e-t.offset(o.scroll),l=t.newlineIndex(s+n)-s+1;t.formatAt(s,l,a,i[a])}else t.format(a,i[a]);n-=r}))}})),this.scroll.optimize(),this.update((new n.default).retain(e).retain(t,(0,m.default)(i)))}},{key:"formatText",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach((function(a){o.scroll.formatAt(e,t,a,i[a])})),this.update((new n.default).retain(e).retain(t,(0,m.default)(i)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new n.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[],i=[];0===t?this.scroll.path(e).forEach((function(e){var t=a(e,1)[0];t instanceof p.default?o.push(t):t instanceof l.default.Leaf&&i.push(t)})):(o=this.scroll.lines(e,t),i=this.scroll.descendants(l.default.Leaf,e,t));var r=[o,i].map((function(e){if(0===e.length)return{};for(var t=(0,d.bubbleFormats)(e.shift());Object.keys(t).length>0;){var o=e.shift();if(null==o)return t;t=x((0,d.bubbleFormats)(o),t)}return t}));return v.default.apply(v.default,r)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,o){return this.scroll.insertAt(e,t,o),this.update((new n.default).retain(e).insert(function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},t,o)))}},{key:"insertText",value:function(e,t){var o=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(i).forEach((function(a){o.scroll.formatAt(e,t.length,a,i[a])})),this.update((new n.default).retain(e).insert(t,(0,m.default)(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&!(e.children.length>1)&&e.children.head instanceof h.default}},{key:"removeFormat",value:function(e,t){var o=this.getText(e,t),i=this.scroll.line(e+t),r=a(i,2),s=r[0],l=r[1],u=0,d=new n.default;null!=s&&(u=s instanceof c.default?s.newlineIndex(l)-l+1:s.length()-l,d=s.delta().slice(l,l+u-1).insert("\n"));var p=this.getContents(e,t+u).diff((new n.default).insert(o).concat(d)),h=(new n.default).retain(e).concat(p);return this.applyDelta(h)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(b)&&l.default.find(t[0].target)){var a=l.default.find(t[0].target),r=(0,d.bubbleFormats)(a),s=a.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),p=(new n.default).insert(c),h=(new n.default).insert(a.value()),m=(new n.default).retain(s).concat(p.diff(h,o));e=m.reduce((function(e,t){return t.insert?e.insert(t.insert,r):e.push(t)}),new n.default),this.delta=i.compose(e)}else this.delta=this.getDelta(),e&&(0,f.default)(i.compose(e),this.delta)||(e=i.diff(this.delta,o));return e}}]),e}();function x(e,t){return Object.keys(t).reduce((function(o,i){return null==e[i]||(t[i]===e[i]?o[i]=t[i]:Array.isArray(t[i])?t[i].indexOf(e[i])<0&&(o[i]=t[i].concat([e[i]])):o[i]=[t[i],e[i]]),o}),{})}t.default=y},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=c(o(0)),n=c(o(21)),s=c(o(11)),l=c(o(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(0,c(o(10)).default)("quill:selection"),h=function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.index=t,this.length=o},m=function(){function e(t,o){var i=this;d(this,e),this.emitter=o,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=r.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||setTimeout(i.update.bind(i,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&i.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var e=i.getNativeRange();null!=e&&e.start.node!==i.cursor.textNode&&i.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{i.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var o=t.range,a=o.startNode,r=o.startOffset,n=o.endNode,s=o.endOffset;i.setNativeRange(a,r,n,s)}})),this.update(l.default.sources.SILENT)}return a(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var o=this.getNativeRange();if(null!=o&&o.native.collapsed&&!r.default.query(e,r.default.Scope.BLOCK)){if(o.start.node!==this.cursor.textNode){var i=r.default.find(o.start.node,!1);if(null==i)return;if(i instanceof r.default.Leaf){var a=i.split(o.start.offset);i.parent.insertBefore(this.cursor,a)}else i.insertBefore(this.cursor,o.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this.scroll.length();e=Math.min(e,o-1),t=Math.min(e+t,o-1)-e;var a=void 0,r=this.scroll.leaf(e),n=i(r,2),s=n[0],l=n[1];if(null==s)return null;var c=s.position(l,!0),u=i(c,2);a=u[0],l=u[1];var d=document.createRange();if(t>0){d.setStart(a,l);var p=this.scroll.leaf(e+t),h=i(p,2);if(s=h[0],l=h[1],null==s)return null;var m=s.position(l,!0),f=i(m,2);return a=f[0],l=f[1],d.setEnd(a,l),d.getBoundingClientRect()}var v="left",g=void 0;return a instanceof Text?(l<a.data.length?(d.setStart(a,l),d.setEnd(a,l+1)):(d.setStart(a,l-1),d.setEnd(a,l),v="right"),g=d.getBoundingClientRect()):(g=s.domNode.getBoundingClientRect(),l>0&&(v="right")),{bottom:g.top+g.height,height:g.height,left:g[v],right:g[v],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var o=this.normalizeNative(t);return p.info("getNativeRange",o),o}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,o=[[e.start.node,e.start.offset]];e.native.collapsed||o.push([e.end.node,e.end.offset]);var a=o.map((function(e){var o=i(e,2),a=o[0],n=o[1],s=r.default.find(a,!0),l=s.offset(t.scroll);return 0===n?l:s instanceof r.default.Container?l+s.length():l+s.index(a,n)})),n=Math.min(Math.max.apply(Math,u(a)),this.scroll.length()-1),s=Math.min.apply(Math,[n].concat(u(a)));return new h(s,n-s)}},{key:"normalizeNative",value:function(e){if(!f(this.root,e.startContainer)||!e.collapsed&&!f(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,o=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>o)t=t.childNodes[o],o=0;else{if(t.childNodes.length!==o)break;o=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=o})),t}},{key:"rangeToNative",value:function(e){var t=this,o=e.collapsed?[e.index]:[e.index,e.index+e.length],a=[],r=this.scroll.length();return o.forEach((function(e,o){e=Math.min(r-1,e);var n,s=t.scroll.leaf(e),l=i(s,2),c=l[0],u=l[1],d=c.position(u,0!==o),p=i(d,2);n=p[0],u=p[1],a.push(n,u)})),a.length<2&&(a=a.concat(a)),a}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var o=this.getBounds(t.index,t.length);if(null!=o){var a=this.scroll.length()-1,r=this.scroll.line(Math.min(t.index,a)),n=i(r,1)[0],s=n;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,a));s=i(l,1)[0]}if(null!=n&&null!=s){var c=e.getBoundingClientRect();o.top<c.top?e.scrollTop-=c.top-o.top:o.bottom>c.bottom&&(e.scrollTop+=o.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",e,t,o,i),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=o.parentNode){var r=document.getSelection();if(null!=r)if(null!=e){this.hasFocus()||this.root.focus();var n=(this.getNativeRange()||{}).native;if(null==n||a||e!==n.startContainer||t!==n.startOffset||o!==n.endContainer||i!==n.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==o.tagName&&(i=[].indexOf.call(o.parentNode.childNodes,o),o=o.parentNode);var s=document.createRange();s.setStart(e,t),s.setEnd(o,i),r.removeAllRanges(),r.addRange(s)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(o=t,t=!1),p.info("setRange",e),null!=e){var i=this.rangeToNative(e);this.setNativeRange.apply(this,u(i).concat([t]))}else this.setNativeRange(null);this.update(o)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,o=this.getRange(),a=i(o,2),r=a[0],c=a[1];if(this.lastRange=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,s.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,n.default)(this.lastRange),(0,n.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,p)}}}]),e}();function f(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=h,t.default=m},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"insertInto",value:function(e,o){0===e.children.length?r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,o):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default.Embed);c.blotName="break",c.tagName="BR",t.default=c},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(44),n=o(30),s=o(1),l=function(e){function t(t){var o=e.call(this,t)||this;return o.build(),o}return a(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new r.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var o=c(t);e.insertBefore(o,e.children.head||void 0)}catch(e){if(e instanceof s.ParchmentError)return;throw e}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,o){e.deleteAt(t,o)}))},t.prototype.descendant=function(e,o){var i=this.children.find(o),a=i[0],r=i[1];return null==e.blotName&&e(a)||null!=e.blotName&&a instanceof e?[a,r]:a instanceof t?a.descendant(e,r):[null,-1]},t.prototype.descendants=function(e,o,i){void 0===o&&(o=0),void 0===i&&(i=Number.MAX_VALUE);var a=[],r=i;return this.children.forEachAt(o,i,(function(o,i,n){(null==e.blotName&&e(o)||null!=e.blotName&&o instanceof e)&&a.push(o),o instanceof t&&(a=a.concat(o.descendants(e,i,r))),r-=n})),a},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,o,i){this.children.forEachAt(e,t,(function(e,t,a){e.formatAt(t,a,o,i)}))},t.prototype.insertAt=function(e,t,o){var i=this.children.find(e),a=i[0],r=i[1];if(a)a.insertAt(r,t,o);else{var n=null==o?s.create("text",t):s.create(t,o);this.appendChild(n)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(o){e.insertBefore(o,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var o=s.create(this.statics.defaultChild);this.appendChild(o),o.optimize(t)}else this.remove()},t.prototype.path=function(e,o){void 0===o&&(o=!1);var i=this.children.find(e,o),a=i[0],r=i[1],n=[[this,e]];return a instanceof t?n.concat(a.path(r,o)):(null!=a&&n.push([a,r]),n)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(o){o instanceof t&&o.moveChildren(this),e.prototype.replace.call(this,o)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var o=this.clone();return this.parent.insertBefore(o,this.next),this.children.forEachAt(e,this.length(),(function(e,i,a){e=e.split(i,t),o.appendChild(e)})),o},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var o=this,i=[],a=[];e.forEach((function(e){e.target===o.domNode&&"childList"===e.type&&(i.push.apply(i,e.addedNodes),a.push.apply(a,e.removedNodes))})),a.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=s.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==o.domNode||t.detach())}})),i.filter((function(e){return e.parentNode==o.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=s.find(e.nextSibling));var i=c(e);i.next==t&&null!=i.next||(null!=i.parent&&i.parent.removeChild(o),o.insertBefore(i,t||void 0))}))},t}(n.default);function c(e){var t=s.find(e);if(null==t)try{t=s.create(e)}catch(o){t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(12),n=o(31),s=o(17),l=o(1),c=function(e){function t(t){var o=e.call(this,t)||this;return o.attributes=new n.default(o.domNode),o}return a(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var o=l.query(e);o instanceof r.default?this.attributes.attribute(o,t):t&&(null==o||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,o){var i=e.prototype.replaceWith.call(this,t,o);return this.attributes.copy(i),i},t.prototype.update=function(t,o){var i=this;e.prototype.update.call(this,t,o),t.some((function(e){return e.target===i.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(o,i){var a=e.prototype.wrap.call(this,o,i);return a instanceof t&&a.statics.scope===this.statics.scope&&this.attributes.move(a),a},t}(s.default);t.default=c},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(30),n=o(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var o=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(o+=1),[this.parent.domNode,o]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=n.Scope.INLINE_BLOT,t}(r.default);t.default=s},function(e,t,o){var i=o(11),a=o(3),r={attributes:{compose:function(e,t,o){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var i=a(!0,{},t);for(var r in o||(i=Object.keys(i).reduce((function(e,t){return null!=i[t]&&(e[t]=i[t]),e}),{})),e)void 0!==e[r]&&void 0===t[r]&&(i[r]=e[r]);return Object.keys(i).length>0?i:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var o=Object.keys(e).concat(Object.keys(t)).reduce((function(o,a){return i(e[a],t[a])||(o[a]=void 0===t[a]?null:t[a]),o}),{});return Object.keys(o).length>0?o:void 0},transform:function(e,t,o){if("object"!=typeof e)return t;if("object"==typeof t){if(!o)return t;var i=Object.keys(t).reduce((function(o,i){return void 0===e[i]&&(o[i]=t[i]),o}),{});return Object.keys(i).length>0?i:void 0}}},iterator:function(e){return new n(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function n(e){this.ops=e,this.index=0,this.offset=0}n.prototype.hasNext=function(){return this.peekLength()<1/0},n.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var o=this.offset,i=r.length(t);if(e>=i-o?(e=i-o,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var a={};return t.attributes&&(a.attributes=t.attributes),"number"==typeof t.retain?a.retain=e:"string"==typeof t.insert?a.insert=t.insert.substr(o,e):a.insert=t.insert,a}return{retain:1/0}},n.prototype.peek=function(){return this.ops[this.index]},n.prototype.peekLength=function(){return this.ops[this.index]?r.length(this.ops[this.index])-this.offset:1/0},n.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},n.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,o=this.next(),i=this.ops.slice(this.index);return this.offset=e,this.index=t,[o].concat(i)}return[]},e.exports=r},function(e,t){var o=function(){function e(e,t){return null!=t&&e instanceof t}var t,o,i;try{t=Map}catch(e){t=function(){}}try{o=Set}catch(e){o=function(){}}try{i=Promise}catch(e){i=function(){}}function a(r,s,l,c,u){"object"==typeof s&&(l=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===l&&(l=1/0),function r(l,m){if(null===l)return null;if(0===m)return l;var f,v;if("object"!=typeof l)return l;if(e(l,t))f=new t;else if(e(l,o))f=new o;else if(e(l,i))f=new i((function(e,t){l.then((function(t){e(r(t,m-1))}),(function(e){t(r(e,m-1))}))}));else if(a.__isArray(l))f=[];else if(a.__isRegExp(l))f=new RegExp(l.source,n(l)),l.lastIndex&&(f.lastIndex=l.lastIndex);else if(a.__isDate(l))f=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return f=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(f),f;e(l,Error)?f=Object.create(l):void 0===c?(v=Object.getPrototypeOf(l),f=Object.create(v)):(f=Object.create(c),v=c)}if(s){var g=d.indexOf(l);if(-1!=g)return p[g];d.push(l),p.push(f)}for(var b in e(l,t)&&l.forEach((function(e,t){var o=r(t,m-1),i=r(e,m-1);f.set(o,i)})),e(l,o)&&l.forEach((function(e){var t=r(e,m-1);f.add(t)})),l){var y;v&&(y=Object.getOwnPropertyDescriptor(v,b)),y&&null==y.set||(f[b]=r(l[b],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(b=0;b<x.length;b++){var A=x[b];(!(_=Object.getOwnPropertyDescriptor(l,A))||_.enumerable||u)&&(f[A]=r(l[A],m-1),_.enumerable||Object.defineProperty(f,A,{enumerable:!1}))}}if(u){var w=Object.getOwnPropertyNames(l);for(b=0;b<w.length;b++){var _,E=w[b];(_=Object.getOwnPropertyDescriptor(l,E))&&_.enumerable||(f[E]=r(l[E],m-1),Object.defineProperty(f,E,{enumerable:!1}))}}return f}(r,l)}function r(e){return Object.prototype.toString.call(e)}function n(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return a.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},a.__objToStr=r,a.__isDate=function(e){return"object"==typeof e&&"[object Date]"===r(e)},a.__isArray=function(e){return"object"==typeof e&&"[object Array]"===r(e)},a.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===r(e)},a.__getRegExpFlags=n,a}();"object"==typeof e&&e.exports&&(e.exports=o)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=h(o(0)),s=h(o(8)),l=o(4),c=h(l),u=h(o(16)),d=h(o(13)),p=h(o(25));function h(e){return e&&e.__esModule?e:{default:e}}function m(e){return e instanceof c.default||e instanceof l.BlockEmbed}var f=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.emitter=o.emitter,Array.isArray(o.whitelist)&&(i.whitelist=o.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),i.domNode.addEventListener("DOMNodeInserted",(function(){})),i.optimize(),i.enable(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,o){var a=this.line(e),n=i(a,2),s=n[0],c=n[1],p=this.line(e+o),h=i(p,1)[0];if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,o),null!=h&&s!==h&&c>0){if(s instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(s instanceof d.default){var m=s.newlineIndex(s.length(),!0);if(m>-1&&(s=s.split(m+1))===h)return void this.optimize()}else if(h instanceof d.default){var f=h.newlineIndex(0);f>-1&&h.split(f+1)}var v=h.children.head instanceof u.default?null:h.children.head;s.moveChildren(h,v),s.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,o,i,a){(null==this.whitelist||this.whitelist[i])&&(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,o,i,a),this.optimize())}},{key:"insertAt",value:function(e,o,i){if(null==i||null==this.whitelist||this.whitelist[o]){if(e>=this.length())if(null==i||null==n.default.query(o,n.default.Scope.BLOCK)){var a=n.default.create(this.statics.defaultChild);this.appendChild(a),null==i&&o.endsWith("\n")&&(o=o.slice(0,-1)),a.insertAt(0,o,i)}else{var s=n.default.create(o,i);this.appendChild(s)}else r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,o,i);this.optimize()}}},{key:"insertBefore",value:function(e,o){if(e.statics.scope===n.default.Scope.INLINE_BLOT){var i=n.default.create(this.statics.defaultChild);i.appendChild(e),e=i}r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,o)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,o=function e(t,o,i){var a=[],r=i;return t.children.forEachAt(o,i,(function(t,o,i){m(t)?a.push(t):t instanceof n.default.Container&&(a=a.concat(e(t,o,r))),r-=i})),a};return o(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,o),e.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,e,o))}},{key:"path",value:function(e){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var o=s.default.sources.USER;"string"==typeof e&&(o=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,o,e),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,o,e)}}}]),t}(n.default.Scroll);f.blotName="scroll",f.className="ql-editor",f.tagName="DIV",f.defaultChild="block",f.allowedChildren=[c.default,l.BlockEmbed,p.default],t.default=f},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=f(o(21)),s=f(o(11)),l=f(o(3)),c=f(o(2)),u=f(o(20)),d=f(o(0)),p=f(o(5)),h=f(o(10)),m=f(o(9));function f(e){return e&&e.__esModule?e:{default:e}}function v(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var g=(0,h.default)("quill:keyboard"),b=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",y=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.bindings={},Object.keys(i.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&i.options.bindings[t]&&i.addBinding(i.options.bindings[t])})),i.addBinding({key:t.keys.ENTER,shiftKey:null},E),i.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},A),i.addBinding({key:t.keys.DELETE},{collapsed:!0},w)):(i.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},A),i.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},w)),i.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},_),i.addBinding({key:t.keys.DELETE},{collapsed:!1},_),i.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},A),i.listen(),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"match",value:function(e,t){return t=I(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(o){return!!t[o]!==e[o]&&null!==t[o]}))&&t.key===(e.which||e.keyCode)}}]),r(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=I(e);if(null==i||null==i.key)return g.warn("Attempted to add invalid keyboard binding",i);"function"==typeof t&&(t={handler:t}),"function"==typeof o&&(o={handler:o}),i=(0,l.default)(i,t,o),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(o){if(!o.defaultPrevented){var r=o.which||o.keyCode,n=(e.bindings[r]||[]).filter((function(e){return t.match(o,e)}));if(0!==n.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=a(c,2),p=u[0],h=u[1],m=e.quill.getLeaf(l.index),f=a(m,2),v=f[0],g=f[1],b=0===l.length?[v,g]:e.quill.getLeaf(l.index+l.length),y=a(b,2),x=y[0],A=y[1],w=v instanceof d.default.Text?v.value().slice(0,g):"",_=x instanceof d.default.Text?x.value().slice(A):"",E={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:e.quill.getFormat(l),offset:h,prefix:w,suffix:_};n.some((function(t){if(null!=t.collapsed&&t.collapsed!==E.collapsed)return!1;if(null!=t.empty&&t.empty!==E.empty)return!1;if(null!=t.offset&&t.offset!==E.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==E.format[e]})))return!1}else if("object"===i(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=E.format[e]:!1===t.format[e]?null==E.format[e]:(0,s.default)(t.format[e],E.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(E.prefix)||null!=t.suffix&&!t.suffix.test(E.suffix)||!0===t.handler.call(e,l,E))}))&&o.preventDefault()}}}}))}}]),t}(m.default);function x(e,t){var o,i=e===y.keys.LEFT?"prefix":"suffix";return v(o={key:e,shiftKey:t,altKey:null},i,/^$/),v(o,"handler",(function(o){var i=o.index;e===y.keys.RIGHT&&(i+=o.length+1);var r=this.quill.getLeaf(i);return!(a(r,1)[0]instanceof d.default.Embed&&(e===y.keys.LEFT?t?this.quill.setSelection(o.index-1,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index-1,p.default.sources.USER):t?this.quill.setSelection(o.index,o.length+1,p.default.sources.USER):this.quill.setSelection(o.index+o.length+1,p.default.sources.USER),1))})),o}function A(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var o=this.quill.getLine(e.index),i=a(o,1)[0],r={};if(0===t.offset){var n=this.quill.getLine(e.index-1),s=a(n,1)[0];if(null!=s&&s.length()>1){var l=i.formats(),c=this.quill.getFormat(e.index-1,1);r=u.default.attributes.diff(l,c)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index-d,d,r,p.default.sources.USER),this.quill.focus()}}function w(e,t){var o=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-o)){var i={},r=0,n=this.quill.getLine(e.index),s=a(n,1)[0];if(t.offset>=s.length()-1){var l=this.quill.getLine(e.index+1),c=a(l,1)[0];if(c){var d=s.formats(),h=this.quill.getFormat(e.index,1);i=u.default.attributes.diff(d,h)||{},r=c.length()}}this.quill.deleteText(e.index,o,p.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index+r-1,o,i,p.default.sources.USER)}}function _(e){var t=this.quill.getLines(e),o={};if(t.length>1){var i=t[0].formats(),a=t[t.length-1].formats();o=u.default.attributes.diff(a,i)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index,1,o,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function E(e,t){var o=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var i=Object.keys(t.format).reduce((function(e,o){return d.default.query(o,d.default.Scope.BLOCK)&&!Array.isArray(t.format[o])&&(e[o]=t.format[o]),e}),{});this.quill.insertText(e.index,"\n",i,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==i[e]&&(Array.isArray(t.format[e])||"link"!==e&&o.quill.format(e,t.format[e],p.default.sources.USER))}))}function O(e){return{key:y.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var o=d.default.query("code-block"),i=t.index,r=t.length,n=this.quill.scroll.descendant(o,i),s=a(n,2),l=s[0],c=s[1];if(null!=l){var u=this.quill.getIndex(l),h=l.newlineIndex(c,!0)+1,m=l.newlineIndex(u+c+r),f=l.domNode.textContent.slice(h,m).split("\n");c=0,f.forEach((function(t,a){e?(l.insertAt(h+c,o.TAB),c+=o.TAB.length,0===a?i+=o.TAB.length:r+=o.TAB.length):t.startsWith(o.TAB)&&(l.deleteAt(h+c,o.TAB.length),c-=o.TAB.length,0===a?i-=o.TAB.length:r-=o.TAB.length),c+=t.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(i,r,p.default.sources.SILENT)}}}}function S(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,o){this.quill.format(e,!o.format[e],p.default.sources.USER)}}}function I(e){if("string"==typeof e||"number"==typeof e)return I({key:e});if("object"===(void 0===e?"undefined":i(e))&&(e=(0,n.default)(e,!1)),"string"==typeof e.key)if(null!=y.keys[e.key.toUpperCase()])e.key=y.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[b]=e.shortKey,delete e.shortKey),e}y.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},y.DEFAULTS={bindings:{bold:S("bold"),italic:S("italic"),underline:S("underline"),indent:{key:y.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:y.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:y.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":O(!0),"outdent code-block":O(!1),"remove tab":{key:y.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:y.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:y.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:y.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),o=a(t,2),i=o[0],r=o[1],n=(0,l.default)({},i.formats(),{list:"checked"}),s=(new c.default).retain(e.index).insert("\n",n).retain(i.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:y.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var o=this.quill.getLine(e.index),i=a(o,2),r=i[0],n=i[1],s=(new c.default).retain(e.index).insert("\n",t.format).retain(r.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var o=t.prefix.length,i=this.quill.getLine(e.index),r=a(i,2),n=r[0],s=r[1];if(s>o)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-s).delete(o+1).retain(n.length()-2-s).retain(1,{list:l});this.quill.updateContents(u,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-o,p.default.sources.SILENT)}},"code exit":{key:y.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),o=a(t,2),i=o[0],r=o[1],n=(new c.default).retain(e.index+i.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(n,p.default.sources.USER)}},"embed left":x(y.keys.LEFT,!1),"embed left shift":x(y.keys.LEFT,!0),"embed right":x(y.keys.RIGHT,!1),"embed right shift":x(y.keys.RIGHT,!0)}},t.default=y,t.SHORTKEY=b},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=l(o(0)),s=l(o(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.selection=o,i.textNode=document.createTextNode(t.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"value",value:function(){}}]),r(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,o){if(0!==this._length)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o);for(var i=this,r=0;null!=i&&i.statics.scope!==n.default.Scope.BLOCK_BLOT;)r+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=t.CONTENTS.length,i.optimize(),i.formatAt(r,t.CONTENTS.length,e,o),this._length=0)}},{key:"index",value:function(e,o){return e===this.textNode?0:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,o)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,o=this.selection.getNativeRange(),a=void 0,r=void 0,l=void 0;if(null!=o&&o.start.node===e&&o.end.node===e){var c=[e,o.start.offset,o.end.offset];a=c[0],r=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof s.default?(a=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(n.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=r){var d=[r,l].map((function(e){return Math.max(0,Math.min(a.data.length,e-1))})),p=i(d,2);return r=p[0],l=p[1],{startNode:a,startOffset:r,endNode:a,endOffset:l}}}}},{key:"update",value:function(e,t){var o=this;if(e.some((function(e){return"characterData"===e.type&&e.target===o.textNode}))){var i=this.restore();i&&(t.range=i)}}},{key:"value",value:function(){return""}}]),t}(n.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=n(o(0)),a=o(4),r=n(a);function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.default.Container);c.allowedChildren=[r.default,a.BlockEmbed,c],t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(0),s=(i=n)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){var o=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return o.startsWith("rgb(")?(o=o.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+o.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):o}}]),t}(s.default.Attributor.Style),d=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),p=new u("color","color",{scope:s.default.Scope.INLINE});t.ColorAttributor=u,t.ColorClass=d,t.ColorStyle=p},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,o){if(e!==this.statics.blotName||!o)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o);o=this.constructor.sanitize(o),this.domNode.setAttribute("href",o)}}],[{key:"create",value:function(e){var o=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),o.setAttribute("href",e),o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target","_blank"),o}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return u(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default);function u(e,t){var o=document.createElement("a");o.href=e;var i=o.href.slice(0,o.href.indexOf(":"));return t.indexOf(i)>-1}c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=c,t.sanitize=u},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=s(o(23)),n=s(o(107));function s(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){o.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case r.default.keys.ENTER:o.togglePicker();break;case r.default.keys.ESCAPE:o.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return a(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,o=document.createElement("span");return o.tabIndex="0",o.setAttribute("role","button"),o.classList.add("ql-picker-item"),e.hasAttribute("value")&&o.setAttribute("data-value",e.getAttribute("value")),e.textContent&&o.setAttribute("data-label",e.textContent),o.addEventListener("click",(function(){t.selectItem(o,!0)})),o.addEventListener("keydown",(function(e){switch(e.keyCode){case r.default.keys.ENTER:t.selectItem(o,!0),e.preventDefault();break;case r.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),o}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=n.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(o){var i=e.buildItem(o);t.appendChild(i),!0===o.selected&&e.selectItem(i)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.container.querySelector(".ql-selected");if(e!==o&&(null!=o&&o.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":i(Event))){var a=document.createEvent("Event");a.initEvent("change",!0,!0),this.select.dispatchEvent(a)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var o=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",o)}}]),e}();t.default=u},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=g(o(0)),a=g(o(5)),r=o(4),n=g(r),s=g(o(16)),l=g(o(25)),c=g(o(24)),u=g(o(35)),d=g(o(6)),p=g(o(22)),h=g(o(7)),m=g(o(55)),f=g(o(42)),v=g(o(23));function g(e){return e&&e.__esModule?e:{default:e}}a.default.register({"blots/block":n.default,"blots/block/embed":r.BlockEmbed,"blots/break":s.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":m.default,"modules/history":f.default,"modules/keyboard":v.default}),i.default.register(n.default,s.default,c.default,d.default,p.default,h.default),t.default=a.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(1),a=function(){function e(e){this.domNode=e,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return i.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,o,a){var r=this.isolate(e,t);if(null!=i.query(o,i.Scope.BLOT)&&a)r.wrap(o,a);else if(null!=i.query(o,i.Scope.ATTRIBUTE)){var n=i.create(this.statics.scope);r.wrap(n),n.format(o,a)}},e.prototype.insertAt=function(e,t,o){var a=null==o?i.create("text",t):i.create(t,o),r=this.split(e);this.parent.insertBefore(a,r)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var o=null;e.children.insertBefore(this,t),null!=t&&(o=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==o||e.domNode.insertBefore(this.domNode,o),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var o=this.split(e);return o.split(t),o},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var o="string"==typeof e?i.create(e,t):e;return o.replace(this),o},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var o="string"==typeof e?i.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(o,this.next),o.appendChild(this),o},e.blotName="abstract",e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=o(12),a=o(32),r=o(33),n=o(1),s=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=i.default.keys(this.domNode),o=a.default.keys(this.domNode),s=r.default.keys(this.domNode);t.concat(o).concat(s).forEach((function(t){var o=n.query(t,n.Scope.ATTRIBUTE);o instanceof i.default&&(e.attributes[o.attrName]=o)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(o){var i=t.attributes[o].value(t.domNode);e.format(o,i)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,o){return t[o]=e.attributes[o].value(e.domNode),t}),{})},e}();t.default=s},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function r(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){r(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(r(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(o(12).default);t.default=n},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});function r(e){var t=e.split("-"),o=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+o}Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[r(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[r(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[r(this.keyName)];return this.canAdd(e,t)?t:""},t}(o(12).default);t.default=n},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=o,this.modules={}}return i(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();a.DEFAULTS={modules:{}},a.themes={default:a},t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=s(o(0)),n=s(o(7));function s(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.contentNode=document.createElement("span"),o.contentNode.setAttribute("contenteditable",!1),[].slice.call(o.domNode.childNodes).forEach((function(e){o.contentNode.appendChild(e)})),o.leftGuard=document.createTextNode(l),o.rightGuard=document.createTextNode(l),o.domNode.appendChild(o.leftGuard),o.domNode.appendChild(o.contentNode),o.domNode.appendChild(o.rightGuard),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"index",value:function(e,o){return e===this.leftGuard?0:e===this.rightGuard?1:a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,o)}},{key:"restore",value:function(e){var t=void 0,o=void 0,i=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof n.default){var a=this.prev.length();this.prev.insertAt(a,i),t={startNode:this.prev.domNode,startOffset:a+i.length}}else o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this),t={startNode:o,startOffset:i.length};else e===this.rightGuard&&(this.next instanceof n.default?(this.next.insertAt(0,i),t={startNode:this.next.domNode,startOffset:i.length}):(o=document.createTextNode(i),this.parent.insertBefore(r.default.create(o),this.next),t={startNode:o,startOffset:i.length}));return e.data=l,t}},{key:"update",value:function(e,t){var o=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===o.leftGuard||e.target===o.rightGuard)){var i=o.restore(e.target);i&&(t.range=i)}}))}}]),t}(r.default.Embed);t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var i,a=o(0),r=(i=a)&&i.__esModule?i:{default:i},n={scope:r.default.Scope.BLOCK,whitelist:["right","center","justify"]},s=new r.default.Attributor.Attribute("align","align",n),l=new r.default.Attributor.Class("align","ql-align",n),c=new r.default.Attributor.Style("align","text-align",n);t.AlignAttribute=s,t.AlignClass=l,t.AlignStyle=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var i,a=o(0),r=(i=a)&&i.__esModule?i:{default:i},n=o(26),s=new r.default.Attributor.Class("background","ql-bg",{scope:r.default.Scope.INLINE}),l=new n.ColorAttributor("background","background-color",{scope:r.default.Scope.INLINE});t.BackgroundClass=s,t.BackgroundStyle=l},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var i,a=o(0),r=(i=a)&&i.__esModule?i:{default:i},n={scope:r.default.Scope.BLOCK,whitelist:["rtl"]},s=new r.default.Attributor.Attribute("direction","dir",n),l=new r.default.Attributor.Class("direction","ql-direction",n),c=new r.default.Attributor.Style("direction","direction",n);t.DirectionAttribute=s,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(0),s=(i=n)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},d=new s.default.Attributor.Class("font","ql-font",u),p=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"value",value:function(e){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(s.default.Attributor.Style),h=new p("font","font-family",u);t.FontStyle=h,t.FontClass=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var i,a=o(0),r=(i=a)&&i.__esModule?i:{default:i},n=new r.default.Attributor.Class("size","ql-size",{scope:r.default.Scope.INLINE,whitelist:["small","large","huge"]}),s=new r.default.Attributor.Style("size","font-size",{scope:r.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=n,t.SizeStyle=s},function(e,t,o){e.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=n(o(0)),r=n(o(5));function n(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(r.default.events.EDITOR_CHANGE,(function(e,t,o,a){e!==r.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&a!==r.default.sources.USER?i.transform(t):i.record(t,o))})),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var o=this.stack[e].pop();this.stack[t].push(o),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(o[e],r.default.sources.USER),this.ignoreChange=!1;var i=l(o[e]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var o=this.quill.getContents().diff(t),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var a=this.stack.undo.pop();o=o.compose(a.undo),e=a.redo.compose(e)}else this.lastRecorded=i;this.stack.undo.push({redo:e,undo:o}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(n(o(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),o=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=a.default.query(e,a.default.Scope.BLOCK)})))}(e)&&(o-=1),o}s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=s,t.getLastChangeIndex=l},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=m(o(3)),n=m(o(2)),s=m(o(8)),l=m(o(23)),c=m(o(34)),u=m(o(59)),d=m(o(60)),p=m(o(28)),h=m(o(61));function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[!1,"center","right","justify"],y=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],A=["1","2","3",!1],w=["small",!1,"large","huge"],_=function(e){function t(e,o){f(this,t);var i=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return e.emitter.listenDOM("click",document.body,(function t(o){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==i.tooltip||i.tooltip.root.contains(o.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(e){e.container.contains(o.target)||e.close()}))})),i}return g(t,e),i(t,[{key:"addModule",value:function(e){var o=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(o),o}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(o){if(o.startsWith("ql-")&&(o=o.slice("ql-".length),null!=t[o]))if("direction"===o)e.innerHTML=t[o][""]+t[o].rtl;else if("string"==typeof t[o])e.innerHTML=t[o];else{var i=e.value||"";null!=i&&t[o][i]&&(e.innerHTML=t[o][i])}}))}))}},{key:"buildPickers",value:function(e,t){var o=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&O(e,b),new d.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var o=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&O(e,y,"background"===o?"#ffffff":"#000000"),new u.default(e,t[o])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?O(e,x):e.classList.contains("ql-header")?O(e,A):e.classList.contains("ql-size")&&O(e,w)),new p.default(e)})),this.quill.on(s.default.events.EDITOR_CHANGE,(function(){o.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);_.DEFAULTS=(0,r.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var o=new FileReader;o.onload=function(o){var i=e.quill.getSelection(!0);e.quill.updateContents((new n.default).retain(i.index).delete(i.length).insert({image:o.target.result}),s.default.sources.USER),e.quill.setSelection(i.index+1,s.default.sources.SILENT),t.value=""},o.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var E=function(e){function t(e,o){f(this,t);var i=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return g(t,e),i(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,o=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var i=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",o,s.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",o,s.default.sources.USER)),this.quill.root.scrollTop=i;break;case"video":t=(e=o).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/),o=t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!o)break;var a=this.quill.getSelection(!0);if(null!=a){var r=a.index+a.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),o,s.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",s.default.sources.USER),this.quill.setSelection(r+2,s.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(h.default);function O(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var i=document.createElement("option");t===o?i.setAttribute("selected","selected"):i.setAttribute("value",t),e.appendChild(i)}))}t.BaseTooltip=E,t.default=_},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,o=this.iterator();t=o();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,o=this.head;null!=o;){if(o===e)return t;t+=o.length(),o=o.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var o,i=this.iterator();o=i();){var a=o.length();if(e<a||t&&e===a&&(null==o.next||0!==o.next.length()))return[o,e];e-=a}return[null,0]},e.prototype.forEach=function(e){for(var t,o=this.iterator();t=o();)e(t)},e.prototype.forEachAt=function(e,t,o){if(!(t<=0))for(var i,a=this.find(e),r=a[0],n=e-a[1],s=this.iterator(r);(i=s())&&n<e+t;){var l=i.length();e>n?o(i,e-n,Math.min(t,n+l-e)):o(i,0,Math.min(l,e+t-n)),n+=l}},e.prototype.map=function(e){return this.reduce((function(t,o){return t.push(e(o)),t}),[])},e.prototype.reduce=function(e,t){for(var o,i=this.iterator();o=i();)t=e(t,o);return t},e}();t.default=i},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(17),n=o(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var o=e.call(this,t)||this;return o.scroll=o,o.observer=new MutationObserver((function(e){o.update(e)})),o.observer.observe(o.domNode,s),o.attach(),o}return a(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,o){this.update(),0===t&&o===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,o)},t.prototype.formatAt=function(t,o,i,a){this.update(),e.prototype.formatAt.call(this,t,o,i,a)},t.prototype.insertAt=function(t,o,i){this.update(),e.prototype.insertAt.call(this,t,o,i)},t.prototype.optimize=function(t,o){var i=this;void 0===t&&(t=[]),void 0===o&&(o={}),e.prototype.optimize.call(this,o);for(var a=[].slice.call(this.observer.takeRecords());a.length>0;)t.push(a.pop());for(var s=function(e,t){void 0===t&&(t=!0),null!=e&&e!==i&&null!=e.domNode.parentNode&&(null==e.domNode[n.DATA_KEY].mutations&&(e.domNode[n.DATA_KEY].mutations=[]),t&&s(e.parent))},l=function(e){null!=e.domNode[n.DATA_KEY]&&null!=e.domNode[n.DATA_KEY].mutations&&(e instanceof r.default&&e.children.forEach(l),e.optimize(o))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=n.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(n.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=n.find(e,!1);s(t,!1),t instanceof r.default&&t.children.forEach((function(e){s(e,!1)}))}))):"attributes"===e.type&&s(t.prev)),s(t))})),this.children.forEach(l),a=(c=[].slice.call(this.observer.takeRecords())).slice();a.length>0;)t.push(a.pop())}},t.prototype.update=function(t,o){var i=this;void 0===o&&(o={}),(t=t||this.observer.takeRecords()).map((function(e){var t=n.find(e.target,!0);return null==t?null:null==t.domNode[n.DATA_KEY].mutations?(t.domNode[n.DATA_KEY].mutations=[e],t):(t.domNode[n.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==i&&null!=e.domNode[n.DATA_KEY]&&e.update(e.domNode[n.DATA_KEY].mutations||[],o)})),null!=this.domNode[n.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[n.DATA_KEY].mutations,o),this.optimize(t,o)},t.blotName="scroll",t.defaultChild="block",t.scope=n.Scope.BLOCK_BLOT,t.tagName="DIV",t}(r.default);t.default=l},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(18),n=o(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(o){if(o.tagName!==t.tagName)return e.formats.call(this,o)},t.prototype.format=function(o,i){var a=this;o!==this.statics.blotName||i?e.prototype.format.call(this,o,i):(this.children.forEach((function(e){e instanceof r.default||(e=e.wrap(t.blotName,!0)),a.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,o,i,a){null!=this.formats()[i]||n.query(i,n.Scope.ATTRIBUTE)?this.isolate(t,o).format(i,a):e.prototype.formatAt.call(this,t,o,i,a)},t.prototype.optimize=function(o){e.prototype.optimize.call(this,o);var i=this.formats();if(0===Object.keys(i).length)return this.unwrap();var a=this.next;a instanceof t&&a.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(e[o]!==t[o])return!1;return!0}(i,a.formats())&&(a.moveChildren(this),a.remove())},t.blotName="inline",t.scope=n.Scope.INLINE_BLOT,t.tagName="SPAN",t}(r.default);t.default=s},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(18),n=o(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(o){var i=n.query(t.blotName).tagName;if(o.tagName!==i)return e.formats.call(this,o)},t.prototype.format=function(o,i){null!=n.query(o,n.Scope.BLOCK)&&(o!==this.statics.blotName||i?e.prototype.format.call(this,o,i):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,o,i,a){null!=n.query(i,n.Scope.BLOCK)?this.format(i,a):e.prototype.formatAt.call(this,t,o,i,a)},t.prototype.insertAt=function(t,o,i){if(null==i||null!=n.query(o,n.Scope.INLINE))e.prototype.insertAt.call(this,t,o,i);else{var a=this.split(t),r=n.create(o,i);a.parent.insertBefore(r,a)}},t.prototype.update=function(t,o){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,o)},t.blotName="block",t.scope=n.Scope.BLOCK_BLOT,t.tagName="P",t}(r.default);t.default=s},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.formats=function(e){},t.prototype.format=function(t,o){e.prototype.formatAt.call(this,0,this.length(),t,o)},t.prototype.formatAt=function(t,o,i,a){0===t&&o===this.length()?this.format(i,a):e.prototype.formatAt.call(this,t,o,i,a)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(o(19).default);t.default=r},function(e,t,o){var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(t,"__esModule",{value:!0});var r=o(19),n=o(1),s=function(e){function t(t){var o=e.call(this,t)||this;return o.text=o.statics.value(o.domNode),o}return a(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,o,i){null==i?(this.text=this.text.slice(0,t)+o+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,o,i)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(o){e.prototype.optimize.call(this,o),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var o=n.create(this.domNode.splitText(e));return this.parent.insertBefore(o,this.next),this.text=this.statics.value(this.domNode),o},t.prototype.update=function(e,t){var o=this;e.some((function(e){return"characterData"===e.type&&e.target===o.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=n.Scope.INLINE_BLOT,t}(r.default);t.default=s},function(e,t,o){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:a.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var o=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>o.length)&&(t=o.length),t-=e.length;var i=o.indexOf(e,t);return-1!==i&&i===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,o=Object(this),i=o.length>>>0,a=arguments[1],r=0;r<i;r++)if(t=o[r],e.call(a,t,r,o))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var o=-1;function i(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var u=r(e,t),d=e.substring(0,u);u=n(e=e.substring(u),t=t.substring(u));var p=e.substring(e.length-u),h=function(e,t){var s;if(!e)return[[1,t]];if(!t)return[[o,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return s=[[1,l.substring(0,u)],[0,c],[1,l.substring(u+c.length)]],e.length>t.length&&(s[0][0]=s[2][0]=o),s;if(1==c.length)return[[o,e],[1,t]];var d=function(e,t){var o=e.length>t.length?e:t,i=e.length>t.length?t:e;if(o.length<4||2*i.length<o.length)return null;function a(e,t,o){for(var i,a,s,l,c=e.substring(o,o+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(c,u+1));){var p=r(e.substring(o),t.substring(u)),h=n(e.substring(0,o),t.substring(0,u));d.length<h+p&&(d=t.substring(u-h,u)+t.substring(u,u+p),i=e.substring(0,o-h),a=e.substring(o+p),s=t.substring(0,u-h),l=t.substring(u+p))}return 2*d.length>=e.length?[i,a,s,l,d]:null}var s,l,c,u,d,p=a(o,i,Math.ceil(o.length/4)),h=a(o,i,Math.ceil(o.length/2));if(!p&&!h)return null;s=h?p&&p[4].length>h[4].length?p:h:p,e.length>t.length?(l=s[0],c=s[1],u=s[2],d=s[3]):(u=s[0],d=s[1],l=s[2],c=s[3]);var m=s[4];return[l,c,u,d,m]}(e,t);if(d){var p=d[0],h=d[1],m=d[2],f=d[3],v=d[4],g=i(p,m),b=i(h,f);return g.concat([[0,v]],b)}return function(e,t){for(var i=e.length,r=t.length,n=Math.ceil((i+r)/2),s=n,l=2*n,c=new Array(l),u=new Array(l),d=0;d<l;d++)c[d]=-1,u[d]=-1;c[s+1]=0,u[s+1]=0;for(var p=i-r,h=p%2!=0,m=0,f=0,v=0,g=0,b=0;b<n;b++){for(var y=-b+m;y<=b-f;y+=2){for(var x=s+y,A=(S=y==-b||y!=b&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-y;S<i&&A<r&&e.charAt(S)==t.charAt(A);)S++,A++;if(c[x]=S,S>i)f+=2;else if(A>r)m+=2;else if(h&&(E=s+p-y)>=0&&E<l&&-1!=u[E]&&S>=(_=i-u[E]))return a(e,t,S,A)}for(var w=-b+v;w<=b-g;w+=2){for(var _,E=s+w,O=(_=w==-b||w!=b&&u[E-1]<u[E+1]?u[E+1]:u[E-1]+1)-w;_<i&&O<r&&e.charAt(i-_-1)==t.charAt(r-O-1);)_++,O++;if(u[E]=_,_>i)g+=2;else if(O>r)v+=2;else if(!h){var S;if((x=s+p-w)>=0&&x<l&&-1!=c[x])if(A=s+(S=c[x])-x,S>=(_=i-_))return a(e,t,S,A)}}}return[[o,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-u),t=t.substring(0,t.length-u));return d&&h.unshift([0,d]),p&&h.push([0,p]),s(h),null!=l&&(h=function(e,t){var i=function(e,t){if(0===t)return[0,e];for(var i=0,a=0;a<e.length;a++){var r=e[a];if(r[0]===o||0===r[0]){var n=i+r[1].length;if(t===n)return[a+1,e];if(t<n){e=e.slice();var s=t-i,l=[r[0],r[1].slice(0,s)],c=[r[0],r[1].slice(s)];return e.splice(a,1,l,c),[a+1,e]}i=n}}throw new Error("cursor_pos is out of bounds!")}(e,t),a=i[1],r=i[0],n=a[r],s=a[r+1];if(null==n)return e;if(0!==n[0])return e;if(null!=s&&n[1]+s[1]===s[1]+n[1])return a.splice(r,2,s,n),c(a,r,2);if(null!=s&&0===s[1].indexOf(n[1])){a.splice(r,2,[s[0],n[1]],[0,n[1]]);var l=s[1].slice(n[1].length);return l.length>0&&a.splice(r+2,0,[s[0],l]),c(a,r,3)}return e}(h,l)),h=function(e){for(var t=!1,i=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},a=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},r=2;r<e.length;r+=1)0===e[r-2][0]&&a(e[r-2][1])&&e[r-1][0]===o&&i(e[r-1][1])&&1===e[r][0]&&i(e[r][1])&&(t=!0,e[r-1][1]=e[r-2][1].slice(-1)+e[r-1][1],e[r][1]=e[r-2][1].slice(-1)+e[r][1],e[r-2][1]=e[r-2][1].slice(0,-1));if(!t)return e;var n=[];for(r=0;r<e.length;r+=1)e[r][1].length>0&&n.push(e[r]);return n}(h),h}function a(e,t,o,a){var r=e.substring(0,o),n=t.substring(0,a),s=e.substring(o),l=t.substring(a),c=i(r,n),u=i(s,l);return c.concat(u)}function r(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var o=0,i=Math.min(e.length,t.length),a=i,r=0;o<a;)e.substring(r,a)==t.substring(r,a)?r=o=a:i=a,a=Math.floor((i-o)/2+o);return a}function n(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var o=0,i=Math.min(e.length,t.length),a=i,r=0;o<a;)e.substring(e.length-a,e.length-r)==t.substring(t.length-a,t.length-r)?r=o=a:i=a,a=Math.floor((i-o)/2+o);return a}function s(e){e.push([0,""]);for(var t,i=0,a=0,l=0,c="",u="";i<e.length;)switch(e[i][0]){case 1:l++,u+=e[i][1],i++;break;case o:a++,c+=e[i][1],i++;break;case 0:a+l>1?(0!==a&&0!==l&&(0!==(t=r(u,c))&&(i-a-l>0&&0==e[i-a-l-1][0]?e[i-a-l-1][1]+=u.substring(0,t):(e.splice(0,0,[0,u.substring(0,t)]),i++),u=u.substring(t),c=c.substring(t)),0!==(t=n(u,c))&&(e[i][1]=u.substring(u.length-t)+e[i][1],u=u.substring(0,u.length-t),c=c.substring(0,c.length-t))),0===a?e.splice(i-l,a+l,[1,u]):0===l?e.splice(i-a,a+l,[o,c]):e.splice(i-a-l,a+l,[o,c],[1,u]),i=i-a-l+(a?1:0)+(l?1:0)+1):0!==i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,l=0,a=0,c="",u=""}""===e[e.length-1][1]&&e.pop();var d=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),d=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),d=!0)),i++;d&&s(e)}var l=i;function c(e,t,o){for(var i=t+o-1;i>=0&&i>=t-1;i--)if(i+1<e.length){var a=e[i],r=e[i+1];a[0]===r[1]&&e.splice(i,2,[a[0],a[1]+r[1]])}return e}l.INSERT=1,l.DELETE=o,l.EQUAL=0,e.exports=l},function(e,t){function o(e){var t=[];for(var o in e)t.push(o);return t}(e.exports="function"==typeof Object.keys?Object.keys:o).shim=o},function(e,t){var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function a(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=o?i:a).supported=i,t.unsupported=a},function(e,t){var o=Object.prototype.hasOwnProperty,i="~";function a(){}function r(e,t,o){this.fn=e,this.context=t,this.once=o||!1}function n(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),n.prototype.eventNames=function(){var e,t,a=[];if(0===this._eventsCount)return a;for(t in e=this._events)o.call(e,t)&&a.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},n.prototype.listeners=function(e,t){var o=i?i+e:e,a=this._events[o];if(t)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var r=0,n=a.length,s=new Array(n);r<n;r++)s[r]=a[r].fn;return s},n.prototype.emit=function(e,t,o,a,r,n){var s=i?i+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,o),!0;case 4:return u.fn.call(u.context,t,o,a),!0;case 5:return u.fn.call(u.context,t,o,a,r),!0;case 6:return u.fn.call(u.context,t,o,a,r,n),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,o);break;case 4:u[c].fn.call(u[c].context,t,o,a);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},n.prototype.on=function(e,t,o){var a=new r(t,o||this),n=i?i+e:e;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],a]:this._events[n].push(a):(this._events[n]=a,this._eventsCount++),this},n.prototype.once=function(e,t,o){var a=new r(t,o||this,!0),n=i?i+e:e;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],a]:this._events[n].push(a):(this._events[n]=a,this._eventsCount++),this},n.prototype.removeListener=function(e,t,o,r){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return 0==--this._eventsCount?this._events=new a:delete this._events[n],this;var s=this._events[n];if(s.fn)s.fn!==t||r&&!s.once||o&&s.context!==o||(0==--this._eventsCount?this._events=new a:delete this._events[n]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||r&&!s[l].once||o&&s[l].context!==o)&&c.push(s[l]);c.length?this._events[n]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new a:delete this._events[n]}return this},n.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new a:delete this._events[t])):(this._events=new a,this._eventsCount=0),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=i,n.EventEmitter=n,void 0!==e&&(e.exports=n)},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=y(o(3)),s=y(o(2)),l=y(o(0)),c=y(o(5)),u=y(o(10)),d=y(o(9)),p=o(36),h=o(37),m=y(o(13)),f=o(26),v=o(38),g=o(39),b=o(40);function y(e){return e&&e.__esModule?e:{default:e}}function x(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var A=(0,u.default)("quill:clipboard"),w="__ql-matcher",_=[[Node.TEXT_NODE,M],[Node.TEXT_NODE,P],["br",function(e,t){return C(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,P],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,function(e,t){var o={},i=e.style||{};return i.fontStyle&&"italic"===k(e).fontStyle&&(o.italic=!0),i.fontWeight&&(k(e).fontWeight.startsWith("bold")||parseInt(k(e).fontWeight)>=700)&&(o.bold=!0),Object.keys(o).length>0&&(t=I(t,o)),parseFloat(i.textIndent||0)>0&&(t=(new s.default).insert("\t").concat(t)),t}],["li",function(e,t){var o=l.default.query(e);if(null==o||"list-item"!==o.blotName||!C(t,"\n"))return t;for(var i=-1,a=e.parentNode;!a.classList.contains("ql-clipboard");)"list"===(l.default.query(a)||{}).blotName&&(i+=1),a=a.parentNode;return i<=0?t:t.compose((new s.default).retain(t.length()-1).retain(1,{indent:i}))}],["b",q.bind(q,"bold")],["i",q.bind(q,"italic")],["style",function(){return new s.default}]],E=[p.AlignAttribute,v.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),O=[p.AlignStyle,h.BackgroundStyle,f.ColorStyle,v.DirectionStyle,g.FontStyle,b.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),S=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],_.concat(i.options.matchers).forEach((function(e){var t=a(e,2),r=t[0],n=t[1];(o.matchVisual||n!==L)&&i.addMatcher(r,n)})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var o=this.container.innerText;return this.container.innerHTML="",(new s.default).insert(o,x({},m.default.blotName,t[m.default.blotName]))}var i=this.prepareMatching(),r=a(i,2),n=r[0],l=r[1],c=T(this.container,n,l);return C(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new s.default).retain(c.length()-1).delete(1))),A.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var i=this.convert(t);this.quill.updateContents((new s.default).retain(e).concat(i),o),this.quill.setSelection(e+i.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var o=this.quill.getSelection(),i=(new s.default).retain(o.index),a=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){i=i.concat(t.convert()).delete(o.length),t.quill.updateContents(i,c.default.sources.USER),t.quill.setSelection(i.length()-o.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=a,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],o=[];return this.matchers.forEach((function(i){var r=a(i,2),n=r[0],s=r[1];switch(n){case Node.TEXT_NODE:o.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:[].forEach.call(e.container.querySelectorAll(n),(function(e){e[w]=e[w]||[],e[w].push(s)}))}})),[t,o]}}]),t}(d.default);function I(e,t,o){return"object"===(void 0===t?"undefined":i(t))?Object.keys(t).reduce((function(e,o){return I(e,o,t[o])}),e):e.reduce((function(e,i){return i.attributes&&i.attributes[t]?e.push(i):e.insert(i.insert,(0,n.default)({},x({},t,o),i.attributes))}),new s.default)}function k(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function C(e,t){for(var o="",i=e.ops.length-1;i>=0&&o.length<t.length;--i){var a=e.ops[i];if("string"!=typeof a.insert)break;o=a.insert+o}return o.slice(-1*t.length)===t}function N(e){if(0===e.childNodes.length)return!1;var t=k(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,o){return e.nodeType===e.TEXT_NODE?o.reduce((function(t,o){return o(e,t)}),new s.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(i,a){var r=T(a,t,o);return a.nodeType===e.ELEMENT_NODE&&(r=t.reduce((function(e,t){return t(a,e)}),r),r=(a[w]||[]).reduce((function(e,t){return t(a,e)}),r)),i.concat(r)}),new s.default):new s.default}function q(e,t,o){return I(o,e,!0)}function R(e,t){var o=l.default.Attributor.Attribute.keys(e),i=l.default.Attributor.Class.keys(e),a=l.default.Attributor.Style.keys(e),r={};return o.concat(i).concat(a).forEach((function(t){var o=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=o&&(r[o.attrName]=o.value(e),r[o.attrName])||(null==(o=E[t])||o.attrName!==t&&o.keyName!==t||(r[o.attrName]=o.value(e)||void 0),null==(o=O[t])||o.attrName!==t&&o.keyName!==t||(o=O[t],r[o.attrName]=o.value(e)||void 0))})),Object.keys(r).length>0&&(t=I(t,r)),t}function D(e,t){var o=l.default.query(e);if(null==o)return t;if(o.prototype instanceof l.default.Embed){var i={},a=o.value(e);null!=a&&(i[o.blotName]=a,t=(new s.default).insert(i,o.formats(e)))}else"function"==typeof o.formats&&(t=I(t,o.blotName,o.formats(e)));return t}function P(e,t){return C(t,"\n")||(N(e)||t.length()>0&&e.nextSibling&&N(e.nextSibling))&&t.insert("\n"),t}function L(e,t){if(N(e)&&null!=e.nextElementSibling&&!C(t,"\n\n")){var o=e.offsetHeight+parseFloat(k(e).marginTop)+parseFloat(k(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*o&&t.insert("\n")}return t}function M(e,t){var o=e.data;if("O:P"===e.parentNode.tagName)return t.insert(o.trim());if(0===o.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!k(e.parentNode).whiteSpace.startsWith("pre")){var i=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};o=(o=o.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,i.bind(i,!0)),(null==e.previousSibling&&N(e.parentNode)||null!=e.previousSibling&&N(e.previousSibling))&&(o=o.replace(/^\s+/,i.bind(i,!1))),(null==e.nextSibling&&N(e.parentNode)||null!=e.nextSibling&&N(e.nextSibling))&&(o=o.replace(/\s+$/,i.bind(i,!1)))}return t.insert(o)}S.DEFAULTS={matchers:[],matchVisual:!0},t.default=S,t.matchAttributor=R,t.matchBlot=D,t.matchNewline=P,t.matchSpacing=L,t.matchText=M},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"optimize",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default);c.blotName="bold",c.tagName=["STRONG","B"],t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=u(o(2)),n=u(o(0)),s=u(o(5)),l=u(o(10)),c=u(o(9));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.default)("quill:toolbar"),h=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a,r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));if(Array.isArray(r.options.container)){var n=document.createElement("div");f(n,r.options.container),e.container.parentNode.insertBefore(n,e.container),r.container=n}else"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},Object.keys(r.options.handlers).forEach((function(e){r.addHandler(e,r.options.handlers[e])})),[].forEach.call(r.container.querySelectorAll("button, select"),(function(e){r.attach(e)})),r.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t){e===s.default.events.SELECTION_CHANGE&&r.update(t)})),r.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){var e=r.quill.selection.getRange(),t=i(e,1)[0];r.update(t)})),r):(a=p.error("Container required for toolbar",r.options),d(r,a))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,o=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(o){if(o=o.slice("ql-".length),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[o]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[o])return void p.warn("ignoring attaching to disabled format",o,e);if(null==n.default.query(o))return void p.warn("ignoring attaching to nonexistent format",o,e)}var a="SELECT"===e.tagName?"change":"click";e.addEventListener(a,(function(a){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),a.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),d=i(u,1)[0];if(null!=t.handlers[o])t.handlers[o].call(t,l);else if(n.default.query(o).prototype instanceof n.default.Embed){if(!(l=prompt("Enter "+o)))return;t.quill.updateContents((new r.default).retain(d.index).delete(d.length).insert(function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},o,l)),s.default.sources.USER)}else t.quill.format(o,l,s.default.sources.USER);t.update(d)})),this.controls.push([o,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(o){var a=i(o,2),r=a[0],n=a[1];if("SELECT"===n.tagName){var s=void 0;if(null==e)s=null;else if(null==t[r])s=n.querySelector("option[selected]");else if(!Array.isArray(t[r])){var l=t[r];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),s=n.querySelector('option[value="'+l+'"]')}null==s?(n.value="",n.selectedIndex=-1):s.selected=!0}else if(null==e)n.classList.remove("ql-active");else if(n.hasAttribute("value")){var c=t[r]===n.getAttribute("value")||null!=t[r]&&t[r].toString()===n.getAttribute("value")||null==t[r]&&!n.getAttribute("value");n.classList.toggle("ql-active",c)}else n.classList.toggle("ql-active",null!=t[r])}))}}]),t}(c.default);function m(e,t,o){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+t),null!=o&&(i.value=o),e.appendChild(i)}function f(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var o=document.createElement("span");o.classList.add("ql-formats"),t.forEach((function(e){if("string"==typeof e)m(o,e);else{var t=Object.keys(e)[0],i=e[t];Array.isArray(i)?function(e,t,o){var i=document.createElement("select");i.classList.add("ql-"+t),o.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),i.appendChild(t)})),e.appendChild(i)}(o,t,i):m(o,t,i)}})),e.appendChild(o)}))}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var o=this.quill.getFormat();Object.keys(o).forEach((function(t){null!=n.default.query(t,n.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,s.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",s.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",e,s.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),o=this.quill.getFormat(t),i=parseInt(o.indent||0);if("+1"===e||"-1"===e){var a="+1"===e?1:-1;"rtl"===o.direction&&(a*=-1),this.quill.format("indent",i+a,s.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,s.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),o=this.quill.getFormat(t);"check"===e?"checked"===o.list||"unchecked"===o.list?this.quill.format("list",!1,s.default.sources.USER):this.quill.format("list","unchecked",s.default.sources.USER):this.quill.format("list",e,s.default.sources.USER)}}},t.default=h,t.addControls=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(28),s=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.label.innerHTML=o,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildItem",value:function(e){var o=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return o.style.backgroundColor=e.getAttribute("value")||"",o}},{key:"selectItem",value:function(e,o){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,o);var i=this.label.querySelector(".ql-color-label"),a=e&&e.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=a:i.style.fill=a)}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default);t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(28),s=function(e){function t(e,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=o[e.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"selectItem",value:function(e,o){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,o),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default);t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function(){function e(t,o){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=o||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}return i(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,o=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=o+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),a=this.root.getBoundingClientRect(),r=0;if(a.right>i.right&&(r=i.right-a.right,this.root.style.left=t+r+"px"),a.left<i.left&&(r=i.left-a.left,this.root.style.left=t+r+"px"),a.bottom>i.bottom){var n=a.bottom-a.top,s=e.bottom-e.top+n;this.root.style.top=o-s+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=a},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var o=[],i=!0,a=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(i=(n=s.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw r}}return o}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),n=h(o(3)),s=h(o(8)),l=o(43),c=h(l),u=h(o(27)),d=o(15),p=h(o(41));function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],b=function(e){function t(e,o){m(this,t),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=g);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.quill.container.classList.add("ql-snow"),i}return v(t,e),r(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),p.default),this.tooltip=new y(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,o){e.handlers.link.call(e,!o.format.link)}))}}]),t}(c.default);b.DEFAULTS=(0,n.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var o=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(o)&&0!==o.indexOf("mailto:")&&(o="mailto:"+o),this.quill.theme.tooltip.edit("link",o)}else this.quill.format("link",!1)}}}}});var y=function(e){function t(e,o){m(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.preview=i.root.querySelector("a.ql-preview"),i}return v(t,e),r(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var o=e.linkRange;e.restoreFocus(),e.quill.formatText(o,"link",!1,s.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(s.default.events.SELECTION_CHANGE,(function(t,o,a){if(null!=t){if(0===t.length&&a===s.default.sources.USER){var r=e.quill.scroll.descendant(u.default,t.index),n=i(r,2),l=n[0],c=n[1];if(null!=l){e.linkRange=new d.Range(t.index-c,l.length());var p=u.default.formats(l.domNode);return e.preview.textContent=p,e.preview.setAttribute("href",p),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=b},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=P(o(29)),a=o(36),r=o(38),n=o(64),s=P(o(65)),l=P(o(66)),c=o(67),u=P(c),d=o(37),p=o(26),h=o(39),m=o(40),f=P(o(56)),v=P(o(68)),g=P(o(27)),b=P(o(69)),y=P(o(70)),x=P(o(71)),A=P(o(72)),w=P(o(73)),_=o(13),E=P(_),O=P(o(74)),S=P(o(75)),I=P(o(57)),k=P(o(41)),C=P(o(28)),N=P(o(59)),T=P(o(60)),q=P(o(61)),R=P(o(108)),D=P(o(62));function P(e){return e&&e.__esModule?e:{default:e}}i.default.register({"attributors/attribute/direction":r.DirectionAttribute,"attributors/class/align":a.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":r.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":a.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":r.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":m.SizeStyle},!0),i.default.register({"formats/align":a.AlignClass,"formats/direction":r.DirectionClass,"formats/indent":n.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":m.SizeClass,"formats/blockquote":s.default,"formats/code-block":E.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":f.default,"formats/code":_.Code,"formats/italic":v.default,"formats/link":g.default,"formats/script":b.default,"formats/strike":y.default,"formats/underline":x.default,"formats/image":A.default,"formats/video":w.default,"formats/list/item":c.ListItem,"modules/formula":O.default,"modules/syntax":S.default,"modules/toolbar":I.default,"themes/bubble":R.default,"themes/snow":D.default,"ui/icons":k.default,"ui/picker":C.default,"ui/icon-picker":T.default,"ui/color-picker":N.default,"ui/tooltip":q.default},!0),t.default=i.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(0),s=(i=n)&&i.__esModule?i:{default:i};function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"add",value:function(e,o){if("+1"===o||"-1"===o){var i=this.value(e)||0;o="+1"===o?i+1:i-1}return 0===o?(this.remove(e),!0):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,o)}},{key:"canAdd",value:function(e,o){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,o)||r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(o))}},{key:"value",value:function(e){return parseInt(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(s.default.Attributor.Class),d=new u("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=d},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(4);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=a)&&i.__esModule?i:{default:i}).default);s.blotName="blockquote",s.tagName="blockquote",t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=o(4);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((i=r)&&i.__esModule?i:{default:i}).default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],t.default=l},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=l(o(0)),n=l(o(4)),s=l(o(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),i(t,[{key:"format",value:function(e,o){e!==h.blotName||o?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o):this.replaceWith(r.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,o){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,o),this):(this.parent.unwrap(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,o))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:a(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(n.default);p.blotName="list-item",p.tagName="LI";var h=function(e){function t(e){c(this,t);var o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=function(t){if(t.target.parentNode===e){var i=o.statics.formats(e),a=r.default.find(t.target);"checked"===i?a.format("list","unchecked"):"unchecked"===i&&a.format("list","checked")}};return e.addEventListener("touchstart",i),e.addEventListener("mousedown",i),o}return d(t,e),i(t,null,[{key:"create",value:function(e){var o="ordered"===e?"OL":"UL",i=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,o);return"checked"!==e&&"unchecked"!==e||i.setAttribute("data-checked","checked"===e),i}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),i(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,o=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e;var e,t,o}},{key:"insertBefore",value:function(e,o){if(e instanceof p)a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,o);else{var i=null==o?this.length():o.offset(this),r=this.split(i);r.parent.insertBefore(e,r)}}},{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&o.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(o.moveChildren(this),o.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var o=r.default.create(this.statics.defaultChild);e.moveChildren(o),this.appendChild(o)}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(s.default);h.blotName="list",h.scope=r.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],t.ListItem=p,t.default=h},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(56);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=a)&&i.__esModule?i:{default:i}).default);s.blotName="italic",s.tagName=["EM","I"],t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(6);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((i=n)&&i.__esModule?i:{default:i}).default);c.blotName="script",c.tagName=["SUB","SUP"],t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(6);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=a)&&i.__esModule?i:{default:i}).default);s.blotName="strike",s.tagName="S",t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=o(6);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((i=a)&&i.__esModule?i:{default:i}).default);s.blotName="underline",s.tagName="U",t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(0),s=(i=n)&&i.__esModule?i:{default:i},l=o(27);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=["alt","height","width"],p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,o){d.indexOf(e)>-1?o?this.domNode.setAttribute(e,o):this.domNode.removeAttribute(e):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o)}}],[{key:"create",value:function(e){var o=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&o.setAttribute("src",this.sanitize(e)),o}},{key:"formats",value:function(e){return d.reduce((function(t,o){return e.hasAttribute(o)&&(t[o]=e.getAttribute(o)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.default.Embed);p.blotName="image",p.tagName="IMG",t.default=p},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},n=o(4),s=o(27),l=(i=s)&&i.__esModule?i:{default:i};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=["height","width"],p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"format",value:function(e,o){d.indexOf(e)>-1?o?this.domNode.setAttribute(e,o):this.domNode.removeAttribute(e):r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,o)}}],[{key:"create",value:function(e){var o=r(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen",!0),o.setAttribute("src",this.sanitize(e)),o}},{key:"formats",value:function(e){return d.reduce((function(t,o){return e.hasAttribute(o)&&(t[o]=e.getAttribute(o)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(n.BlockEmbed);p.blotName="video",p.className="ql-video",p.tagName="IFRAME",t.default=p},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=l(o(35)),n=l(o(5)),s=l(o(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),i(t,null,[{key:"create",value:function(e){var o=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,o,{throwOnError:!1,errorColor:"#f00"}),o.setAttribute("data-value",e)),o}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(r.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var h=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return d(t,e),i(t,null,[{key:"register",value:function(){n.default.register(p,!0)}}]),t}(s.default);t.FormulaBlot=p,t.default=h},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),a=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},r=l(o(0)),n=l(o(5)),s=l(o(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),i(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(o(13)).default);p.className="ql-syntax";var h=new r.default.Attributor.Class("token","hljs",{scope:r.default.Scope.INLINE}),m=function(e){function t(e,o){c(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return i.quill.on(n.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(a),a=setTimeout((function(){i.highlight(),a=null}),i.options.interval)})),i.highlight(),i}return d(t,e),i(t,null,[{key:"register",value:function(){n.default.register(h,!0),n.default.register(p,!0)}}]),i(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(n.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(p).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(n.default.sources.SILENT),null!=t&&this.quill.setSelection(t,n.default.sources.SILENT)}}}]),t}(s.default);m.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=p,t.CodeToken=h,t.default=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var i=function e(t,o,i){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,o);if(void 0===a){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,o,i)}if("value"in a)return a.value;var n=a.get;return void 0!==n?n.call(i):void 0},a=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=d(o(3)),n=d(o(8)),s=o(43),l=d(s),c=o(15),u=d(o(41));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],v=function(e){function t(e,o){p(this,t),null!=o.modules.toolbar&&null==o.modules.toolbar.container&&(o.modules.toolbar.container=f);var i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.quill.container.classList.add("ql-bubble"),i}return m(t,e),a(t,[{key:"extendToolbar",value:function(e){this.tooltip=new g(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);v.DEFAULTS=(0,r.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var g=function(e){function t(e,o){p(this,t);var i=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return i.quill.on(n.default.events.EDITOR_CHANGE,(function(e,t,o,a){if(e===n.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&a===n.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(t.index,t.length);if(1===r.length)i.position(i.quill.getBounds(t));else{var s=r[r.length-1],l=i.quill.getIndex(s),u=Math.min(s.length()-1,t.index+t.length-l),d=i.quill.getBounds(new c.Range(l,u));i.position(d)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return m(t,e),a(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(n.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),a=this.root.querySelector(".ql-tooltip-arrow");if(a.style.marginLeft="",0===o)return o;a.style.marginLeft=-1*o-a.offsetWidth/2+"px"}}]),t}(s.BaseTooltip);g.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=g,t.default=v},function(e,t,o){e.exports=o(63)}]).default},"object"==typeof exports&&"object"==typeof module?module.exports=ti():"function"==typeof define&&define.amd?define([],ti):"object"==typeof exports?exports.Quill=ti():ei.Quill=ti();var oi,ii,ai=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ri=Symbol(),ni=new Map,si=class{constructor(e,t){if(this._$cssResult$=!0,t!==ri)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=ni.get(this.cssText);return ai&&void 0===e&&(ni.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}},li=e=>new si("string"==typeof e?e:e+"",ri),ci=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new si(o,ri)},ui=ai?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return li(t)})(e):e,di=window.trustedTypes,pi=di?di.emptyScript:"",hi=window.reactiveElementPolyfillSupport,mi={toAttribute(e,t){switch(t){case Boolean:e=e?pi:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},fi=(e,t)=>t!==e&&(t==t||e==e),vi={attribute:!0,type:String,converter:mi,reflect:!1,hasChanged:fi},gi=class extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,o)=>{const i=this._$Eh(o,t);void 0!==i&&(this._$Eu.set(i,o),e.push(i))})),e}static createProperty(e,t=vi){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdate(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||vi}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const o of t)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(ui(e))}else void 0!==e&&t.push(ui(e));return t}static _$Eh(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,o;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(o=e.hostConnected)||void 0===o||o.call(e))}removeController(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return o=t,i=this.constructor.elementStyles,ai?o.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((e=>{const t=document.createElement("style"),i=window.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=e.cssText,o.appendChild(t)})),t;var o,i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$ES(e,t,o=vi){var i,a;const r=this.constructor._$Eh(e,o);if(void 0!==r&&!0===o.reflect){const n=(null!==(a=null===(i=o.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==a?a:mi.toAttribute)(t,o.type);this._$Ei=e,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$Ei=null}}_$AK(e,t){var o,i,a;const r=this.constructor,n=r._$Eu.get(e);if(void 0!==n&&this._$Ei!==n){const e=r.getPropertyOptions(n),s=e.converter,l=null!==(a=null!==(i=null===(o=s)||void 0===o?void 0:o.fromAttribute)&&void 0!==i?i:"function"==typeof s?s:null)&&void 0!==a?a:mi.fromAttribute;this._$Ei=n,this[n]=l(t,e.type),this._$Ei=null}}requestUpdate(e,t,o){let i=!0;void 0!==e&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||fi)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Ei!==e&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(e,o))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((e,t)=>this[t]=e)),this._$Et=void 0);let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(o)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(o)}willUpdate(e){}_$AE(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){void 0!==this._$E_&&(this._$E_.forEach(((e,t)=>this._$ES(t,this[t],e))),this._$E_=void 0),this._$EU()}updated(e){}firstUpdated(e){}};gi.finalized=!0,gi.elementProperties=new Map,gi.elementStyles=[],gi.shadowRootOptions={mode:"open"},null==hi||hi({ReactiveElement:gi}),(null!==(oi=globalThis.reactiveElementVersions)&&void 0!==oi?oi:globalThis.reactiveElementVersions=[]).push("1.2.3");var bi=globalThis.trustedTypes,yi=bi?bi.createPolicy("lit-html",{createHTML:e=>e}):void 0,xi=`lit$${(Math.random()+"").slice(9)}$`,Ai="?"+xi,wi=`<${Ai}>`,_i=document,Ei=(e="")=>_i.createComment(e),Oi=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Si=Array.isArray,Ii=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ki=/-->/g,Ci=/>/g,Ni=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Ti=/'/g,qi=/"/g,Ri=/^(?:script|style|textarea|title)$/i,Di=(e=>(t,...o)=>({_$litType$:e,strings:t,values:o}))(1),Pi=Symbol.for("lit-noChange"),Li=Symbol.for("lit-nothing"),Mi=new WeakMap,$i=_i.createTreeWalker(_i,129,null,!1),ji=class{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let a=0,r=0;const n=e.length-1,s=this.parts,[l,c]=((e,t)=>{const o=e.length-1,i=[];let a,r=2===t?"<svg>":"",n=Ii;for(let t=0;t<o;t++){const o=e[t];let s,l,c=-1,u=0;for(;u<o.length&&(n.lastIndex=u,l=n.exec(o),null!==l);)u=n.lastIndex,n===Ii?"!--"===l[1]?n=ki:void 0!==l[1]?n=Ci:void 0!==l[2]?(Ri.test(l[2])&&(a=RegExp("</"+l[2],"g")),n=Ni):void 0!==l[3]&&(n=Ni):n===Ni?">"===l[0]?(n=null!=a?a:Ii,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,s=l[1],n=void 0===l[3]?Ni:'"'===l[3]?qi:Ti):n===qi||n===Ti?n=Ni:n===ki||n===Ci?n=Ii:(n=Ni,a=void 0);const d=n===Ni&&e[t+1].startsWith("/>")?" ":"";r+=n===Ii?o+wi:c>=0?(i.push(s),o.slice(0,c)+"$lit$"+o.slice(c)+xi+d):o+xi+(-2===c?(i.push(void 0),t):d)}const s=r+(e[o]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==yi?yi.createHTML(s):s,i]})(e,t);if(this.el=ji.createElement(l,o),$i.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=$i.nextNode())&&s.length<n;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(xi)){const o=c[r++];if(e.push(t),void 0!==o){const e=i.getAttribute(o.toLowerCase()+"$lit$").split(xi),t=/([.?@])?(.*)/.exec(o);s.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?Hi:"?"===t[1]?Qi:"@"===t[1]?Ki:Vi})}else s.push({type:6,index:a})}for(const t of e)i.removeAttribute(t)}if(Ri.test(i.tagName)){const e=i.textContent.split(xi),t=e.length-1;if(t>0){i.textContent=bi?bi.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],Ei()),$i.nextNode(),s.push({type:2,index:++a});i.append(e[t],Ei())}}}else if(8===i.nodeType)if(i.data===Ai)s.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(xi,e+1));)s.push({type:7,index:a}),e+=xi.length-1}a++}}static createElement(e,t){const o=_i.createElement("template");return o.innerHTML=e,o}};function zi(e,t,o=e,i){var a,r,n,s;if(t===Pi)return t;let l=void 0!==i?null===(a=o._$Cl)||void 0===a?void 0:a[i]:o._$Cu;const c=Oi(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,o,i)),void 0!==i?(null!==(n=(s=o)._$Cl)&&void 0!==n?n:s._$Cl=[])[i]=l:o._$Cu=l),void 0!==l&&(t=zi(e,l._$AS(e,t.values),l,i)),t}var Fi,Bi,Ui=class{constructor(e,t,o,i){var a;this.type=2,this._$AH=Li,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cg=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=zi(this,e,t),Oi(e)?e===Li||null==e||""===e?(this._$AH!==Li&&this._$AR(),this._$AH=Li):e!==this._$AH&&e!==Pi&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.S(e):(e=>{var t;return Si(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])})(e)?this.A(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}S(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==Li&&Oi(this._$AH)?this._$AA.nextSibling.data=e:this.S(_i.createTextNode(e)),this._$AH=e}T(e){var t;const{values:o,_$litType$:i}=e,a="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=ji.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.m(o);else{const e=new class{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:o},parts:i}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:_i).importNode(o,!0);$i.currentNode=a;let r=$i.nextNode(),n=0,s=0,l=i[0];for(;void 0!==l;){if(n===l.index){let t;2===l.type?t=new Ui(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new Wi(r,this,e)),this.v.push(t),l=i[++s]}n!==(null==l?void 0:l.index)&&(r=$i.nextNode(),n++)}return a}m(e){let t=0;for(const o of this.v)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}(a,this),t=e.p(this.options);e.m(o),this.S(t),this._$AH=e}}_$AC(e){let t=Mi.get(e.strings);return void 0===t&&Mi.set(e.strings,t=new ji(e)),t}A(e){Si(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const a of e)i===t.length?t.push(o=new Ui(this.M(Ei()),this.M(Ei()),this,this.options)):o=t[i],o._$AI(a),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}},Vi=class{constructor(e,t,o,i,a){this.type=1,this._$AH=Li,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=Li}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,o,i){const a=this.strings;let r=!1;if(void 0===a)e=zi(this,e,t,0),r=!Oi(e)||e!==this._$AH&&e!==Pi,r&&(this._$AH=e);else{const i=e;let n,s;for(e=a[0],n=0;n<a.length-1;n++)s=zi(this,i[o+n],t,n),s===Pi&&(s=this._$AH[n]),r||(r=!Oi(s)||s!==this._$AH[n]),s===Li?e=Li:e!==Li&&(e+=(null!=s?s:"")+a[n+1]),this._$AH[n]=s}r&&!i&&this.k(e)}k(e){e===Li?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}},Hi=class extends Vi{constructor(){super(...arguments),this.type=3}k(e){this.element[this.name]=e===Li?void 0:e}},Gi=bi?bi.emptyScript:"",Qi=class extends Vi{constructor(){super(...arguments),this.type=4}k(e){e&&e!==Li?this.element.setAttribute(this.name,Gi):this.element.removeAttribute(this.name)}},Ki=class extends Vi{constructor(e,t,o,i,a){super(e,t,o,i,a),this.type=5}_$AI(e,t=this){var o;if((e=null!==(o=zi(this,e,t,0))&&void 0!==o?o:Li)===Pi)return;const i=this._$AH,a=e===Li&&i!==Li||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==Li&&(i===Li||a);a&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==o?o:this.element,e):this._$AH.handleEvent(e)}},Wi=class{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){zi(this,e)}},Xi=window.litHtmlPolyfillSupport;null==Xi||Xi(ji,Ui),(null!==(ii=globalThis.litHtmlVersions)&&void 0!==ii?ii:globalThis.litHtmlVersions=[]).push("2.1.3");var Yi=class extends gi{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const o=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=o.firstChild),o}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=((e,t,o)=>{var i,a;const r=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:t;let n=r._$litPart$;if(void 0===n){const e=null!==(a=null==o?void 0:o.renderBefore)&&void 0!==a?a:null;r._$litPart$=n=new Ui(t.insertBefore(Ei(),e),e,void 0,null!=o?o:{})}return n._$AI(e),n})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}render(){return Pi}};Yi.finalized=!0,Yi._$litElement$=!0,null===(Fi=globalThis.litElementHydrateSupport)||void 0===Fi||Fi.call(globalThis,{LitElement:Yi});var Ji=globalThis.litElementPolyfillSupport;null==Ji||Ji({LitElement:Yi}),(null!==(Bi=globalThis.litElementVersions)&&void 0!==Bi?Bi:globalThis.litElementVersions=[]).push("3.1.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Zi=ci`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`,ea=ci`
  ${Zi}

  :host {
    display: block;
  }

  .radio-group {
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-large);
    padding-top: var(--sl-spacing-x-small);
  }

  .radio-group .radio-group__label {
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-color);
    padding: 0 var(--sl-spacing-2x-small);
  }

  ::slotted(sl-radio:not(:last-of-type)) {
    display: block;
    margin-bottom: var(--sl-spacing-2x-small);
  }

  .radio-group:not(.radio-group--has-fieldset) {
    border: none;
    padding: 0;
    margin: 0;
    min-width: 0;
  }

  .radio-group:not(.radio-group--has-fieldset) .radio-group__label {
    position: absolute;
    width: 0;
    height: 0;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    overflow: hidden;
    white-space: nowrap;
  }
`,ta=1,oa=2,ia=3,aa=4,ra=e=>(...t)=>({_$litDirective$:e,values:t}),na=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}},sa=ra(class extends na{constructor(e){var t;if(super(e),e.type!==ta||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var o,i;if(void 0===this.st){this.st=new Set,void 0!==e.strings&&(this.et=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(o=this.et)||void 0===o?void 0:o.has(e))&&this.st.add(e);return this.render(t)}const a=e.element.classList;this.st.forEach((e=>{e in t||(a.remove(e),this.st.delete(e))}));for(const e in t){const o=!!t[e];o===this.st.has(e)||(null===(i=this.et)||void 0===i?void 0:i.has(e))||(o?(a.add(e),this.st.add(e)):(a.remove(e),this.st.delete(e)))}return Pi}}),la=Object.defineProperty,ca=Object.defineProperties,ua=Object.getOwnPropertyDescriptor,da=Object.getOwnPropertyDescriptors,pa=Object.getOwnPropertySymbols,ha=Object.prototype.hasOwnProperty,ma=Object.prototype.propertyIsEnumerable,fa=(e,t,o)=>t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,va=(e,t)=>{for(var o in t||(t={}))ha.call(t,o)&&fa(e,o,t[o]);if(pa)for(var o of pa(t))ma.call(t,o)&&fa(e,o,t[o]);return e},ga=(e,t)=>ca(e,da(t)),ba=(e,t)=>{var o={};for(var i in e)ha.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&pa)for(var i of pa(e))t.indexOf(i)<0&&ma.call(e,i)&&(o[i]=e[i]);return o},ya=(e,t,o,i)=>{for(var a,r=i>1?void 0:i?ua(t,o):t,n=e.length-1;n>=0;n--)(a=e[n])&&(r=(i?a(t,o,r):a(r))||r);return i&&r&&la(t,o,r),r},xa=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){window.customElements.define(e,t)}}})(e,t),Aa=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?ga(va({},t),{finisher(o){o.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}};function wa(e){return(t,o)=>void 0!==o?((e,t,o)=>{t.constructor.createProperty(o,e)})(e,t,o):Aa(e,t)}function _a(e){return wa(ga(va({},e),{state:!0}))}var Ea;function Oa(e,t){return(({finisher:e,descriptor:t})=>(o,i)=>{var a;if(void 0===i){const i=null!==(a=o.originalKey)&&void 0!==a?a:o.key,r=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(o.key)}:ga(va({},o),{key:i});return null!=e&&(r.finisher=function(t){e(t,i)}),r}{const a=o.constructor;void 0!==t&&Object.defineProperty(o,i,t(i)),null==e||e(a,i)}})({descriptor:o=>{const i={get(){var t,o;return null!==(o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==o?o:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof o?Symbol():"__"+o;i.get=function(){var o,i;return void 0===this[t]&&(this[t]=null!==(i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}null===(Ea=window.HTMLSlotElement)||void 0===Ea||Ea.prototype.assignedElements;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Sa=["sl-radio","sl-radio-button"],Ia=class extends Yi{constructor(){super(...arguments),this.hasButtonGroup=!1,this.label="",this.fieldset=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","radiogroup")}getAllRadios(){return[...this.querySelectorAll(Sa.join(","))].filter((e=>Sa.includes(e.tagName.toLowerCase())))}handleRadioClick(e){const t=e.target.closest(Sa.map((e=>`${e}:not([disabled])`)).join(","));if(t){this.getAllRadios().forEach((e=>{e.checked=e===t,e.input.tabIndex=e===t?0:-1}))}}handleKeyDown(e){var t;if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)){const o=this.getAllRadios().filter((e=>!e.disabled)),i=null!=(t=o.find((e=>e.checked)))?t:o[0],a=["ArrowUp","ArrowLeft"].includes(e.key)?-1:1;let r=o.indexOf(i)+a;r<0&&(r=o.length-1),r>o.length-1&&(r=0),this.getAllRadios().forEach((e=>{e.checked=!1,e.input.tabIndex=-1})),o[r].focus(),o[r].checked=!0,o[r].input.tabIndex=0,e.preventDefault()}}handleSlotChange(){const e=this.getAllRadios(),t=e.find((e=>e.checked));this.hasButtonGroup=!!e.find((e=>"sl-radio-button"===e.tagName.toLowerCase())),e.forEach((e=>{e.setAttribute("role","radio"),e.input.tabIndex=-1})),t?t.input.tabIndex=0:e.length>0&&(e[0].input.tabIndex=0)}render(){const e=Di`
      <slot @click=${this.handleRadioClick} @keydown=${this.handleKeyDown} @slotchange=${this.handleSlotChange}></slot>
    `;return Di`
      <fieldset
        part="base"
        class=${sa({"radio-group":!0,"radio-group--has-fieldset":this.fieldset})}
      >
        <legend part="label" class="radio-group__label">
          <slot name="label">${this.label}</slot>
        </legend>
        ${this.hasButtonGroup?Di`<sl-button-group part="button-group">${e}</sl-button-group>`:e}
      </fieldset>
    `}};Ia.styles=ea,ya([Oa("slot:not([name])")],Ia.prototype,"defaultSlot",2),ya([_a()],Ia.prototype,"hasButtonGroup",2),ya([wa()],Ia.prototype,"label",2),ya([wa({type:Boolean,attribute:"fieldset"})],Ia.prototype,"fieldset",2),Ia=ya([xa("sl-radio-group")],Ia);var ka=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .button-group {
    display: flex;
    flex-wrap: nowrap;
  }
`,Ca=["sl-button","sl-radio-button"],Na=class extends Yi{constructor(){super(...arguments),this.label=""}handleFocus(e){const t=Ta(e.target);null==t||t.classList.add("sl-button-group__button--focus")}handleBlur(e){const t=Ta(e.target);null==t||t.classList.remove("sl-button-group__button--focus")}handleMouseOver(e){const t=Ta(e.target);null==t||t.classList.add("sl-button-group__button--hover")}handleMouseOut(e){const t=Ta(e.target);null==t||t.classList.remove("sl-button-group__button--hover")}handleSlotChange(){const e=[...this.defaultSlot.assignedElements({flatten:!0})];e.forEach((t=>{const o=e.indexOf(t),i=Ta(t);null!==i&&(i.classList.add("sl-button-group__button"),i.classList.toggle("sl-button-group__button--first",0===o),i.classList.toggle("sl-button-group__button--inner",o>0&&o<e.length-1),i.classList.toggle("sl-button-group__button--last",o===e.length-1))}))}render(){return Di`
      <div
        part="base"
        class="button-group"
        role="group"
        aria-label=${this.label}
        @focusout=${this.handleBlur}
        @focusin=${this.handleFocus}
        @mouseover=${this.handleMouseOver}
        @mouseout=${this.handleMouseOut}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
      </div>
    `}};function Ta(e){return Ca.includes(e.tagName.toLowerCase())?e:e.querySelector(Ca.join(","))}Na.styles=ka,ya([Oa("slot")],Na.prototype,"defaultSlot",2),ya([wa()],Na.prototype,"label",2),Na=ya([xa("sl-button-group")],Na);var qa=(()=>{const e=document.createElement("style");let t;try{document.head.appendChild(e),e.sheet.insertRule(":focus-visible { color: inherit }"),t=!0}catch(e){t=!1}finally{e.remove()}return t})(),Ra=li(qa?":focus-visible":":focus"),Da=ci`
  ${Zi}

  :host {
    display: inline-block;
    position: relative;
    width: auto;
    cursor: pointer;
  }

  .button {
    display: inline-flex;
    align-items: stretch;
    justify-content: center;
    width: 100%;
    border-style: solid;
    border-width: var(--sl-input-border-width);
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-font-weight-semibold);
    text-decoration: none;
    user-select: none;
    white-space: nowrap;
    vertical-align: middle;
    padding: 0;
    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,
      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;
    cursor: inherit;
  }

  .button::-moz-focus-inner {
    border: 0;
  }

  .button:focus {
    outline: none;
  }

  .button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When disabled, prevent mouse events from bubbling up */
  .button--disabled * {
    pointer-events: none;
  }

  .button__prefix,
  .button__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    pointer-events: none;
  }

  .button__label ::slotted(sl-icon) {
    vertical-align: -2px;
  }

  /*
   * Standard buttons
   */

  /* Default */
  .button--standard.button--default {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--standard.button--default:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-300);
    color: var(--sl-color-primary-700);
  }

  .button--standard.button--default${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--default:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-100);
    border-color: var(--sl-color-primary-400);
    color: var(--sl-color-primary-700);
  }

  /* Primary */
  .button--standard.button--primary {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary:hover:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--primary${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-primary-500);
    border-color: var(--sl-color-primary-500);
    color: var(--sl-color-neutral-0);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--primary:active:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--standard.button--success {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success:hover:not(.button--disabled) {
    background-color: var(--sl-color-success-500);
    border-color: var(--sl-color-success-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--success${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--success:active:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--standard.button--neutral {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral:hover:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--neutral${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-neutral-500);
    border-color: var(--sl-color-neutral-500);
    color: var(--sl-color-neutral-0);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--neutral:active:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--standard.button--warning {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }
  .button--standard.button--warning:hover:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--warning${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-warning-500);
    border-color: var(--sl-color-warning-500);
    color: var(--sl-color-neutral-0);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--warning:active:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--standard.button--danger {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger:hover:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
  }

  .button--standard.button--danger${Ra}:not(.button--disabled) {
    background-color: var(--sl-color-danger-500);
    border-color: var(--sl-color-danger-500);
    color: var(--sl-color-neutral-0);
    box-shadow: var(--sl-focus-ring);
  }

  .button--standard.button--danger:active:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Outline buttons
   */

  .button--outline {
    background: none;
    border: solid 1px;
  }

  /* Default */
  .button--outline.button--default {
    border-color: var(--sl-color-neutral-300);
    color: var(--sl-color-neutral-700);
  }

  .button--outline.button--default:hover:not(.button--disabled),
  .button--outline.button--default.button--checked:not(.button--disabled) {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--default${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-primary-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--default:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Primary */
  .button--outline.button--primary {
    border-color: var(--sl-color-primary-600);
    color: var(--sl-color-primary-600);
  }

  .button--outline.button--primary:hover:not(.button--disabled),
  .button--outline.button--primary.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--primary${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-primary-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--primary:active:not(.button--disabled) {
    border-color: var(--sl-color-primary-700);
    background-color: var(--sl-color-primary-700);
    color: var(--sl-color-neutral-0);
  }

  /* Success */
  .button--outline.button--success {
    border-color: var(--sl-color-success-600);
    color: var(--sl-color-success-600);
  }

  .button--outline.button--success:hover:not(.button--disabled),
  .button--outline.button--success.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--success${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-success-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--success:active:not(.button--disabled) {
    border-color: var(--sl-color-success-700);
    background-color: var(--sl-color-success-700);
    color: var(--sl-color-neutral-0);
  }

  /* Neutral */
  .button--outline.button--neutral {
    border-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-600);
  }

  .button--outline.button--neutral:hover:not(.button--disabled),
  .button--outline.button--neutral.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--neutral${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-neutral-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--neutral:active:not(.button--disabled) {
    border-color: var(--sl-color-neutral-700);
    background-color: var(--sl-color-neutral-700);
    color: var(--sl-color-neutral-0);
  }

  /* Warning */
  .button--outline.button--warning {
    border-color: var(--sl-color-warning-600);
    color: var(--sl-color-warning-600);
  }

  .button--outline.button--warning:hover:not(.button--disabled),
  .button--outline.button--warning.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--warning${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-warning-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--warning:active:not(.button--disabled) {
    border-color: var(--sl-color-warning-700);
    background-color: var(--sl-color-warning-700);
    color: var(--sl-color-neutral-0);
  }

  /* Danger */
  .button--outline.button--danger {
    border-color: var(--sl-color-danger-600);
    color: var(--sl-color-danger-600);
  }

  .button--outline.button--danger:hover:not(.button--disabled),
  .button--outline.button--danger.button--checked:not(.button--disabled) {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  .button--outline.button--danger${Ra}:not(.button--disabled) {
    border-color: var(--sl-color-danger-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--outline.button--danger:active:not(.button--disabled) {
    border-color: var(--sl-color-danger-700);
    background-color: var(--sl-color-danger-700);
    color: var(--sl-color-neutral-0);
  }

  /*
   * Text buttons
   */

  .button--text {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-600);
  }

  .button--text:hover:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
  }

  .button--text${Ra}:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-500);
    box-shadow: var(--sl-focus-ring);
  }

  .button--text:active:not(.button--disabled) {
    background-color: transparent;
    border-color: transparent;
    color: var(--sl-color-primary-700);
  }

  /*
   * Size modifiers
   */

  .button--small {
    font-size: var(--sl-button-font-size-small);
    height: var(--sl-input-height-small);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
  }

  .button--medium {
    font-size: var(--sl-button-font-size-medium);
    height: var(--sl-input-height-medium);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
  }

  .button--large {
    font-size: var(--sl-button-font-size-large);
    height: var(--sl-input-height-large);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
  }

  /*
   * Pill modifier
   */

  .button--pill.button--small {
    border-radius: var(--sl-input-height-small);
  }

  .button--pill.button--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .button--pill.button--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Circle modifier
   */

  .button--circle {
    padding-left: 0;
    padding-right: 0;
  }

  .button--circle.button--small {
    width: var(--sl-input-height-small);
    border-radius: 50%;
  }

  .button--circle.button--medium {
    width: var(--sl-input-height-medium);
    border-radius: 50%;
  }

  .button--circle.button--large {
    width: var(--sl-input-height-large);
    border-radius: 50%;
  }

  .button--circle .button__prefix,
  .button--circle .button__suffix,
  .button--circle .button__caret {
    display: none;
  }

  /*
   * Caret modifier
   */

  .button--caret .button__suffix {
    display: none;
  }

  .button--caret .button__caret {
    display: flex;
    align-items: center;
  }

  .button--caret .button__caret svg {
    width: 1em;
    height: 1em;
  }

  /*
   * Loading modifier
   */

  .button--loading {
    position: relative;
    cursor: wait;
  }

  .button--loading .button__prefix,
  .button--loading .button__label,
  .button--loading .button__suffix,
  .button--loading .button__caret {
    visibility: hidden;
  }

  .button--loading sl-spinner {
    --indicator-color: currentColor;
    position: absolute;
    font-size: 1em;
    height: 1em;
    width: 1em;
    top: calc(50% - 0.5em);
    left: calc(50% - 0.5em);
  }

  /*
   * Badges
   */

  .button ::slotted(sl-badge) {
    position: absolute;
    top: 0;
    right: 0;
    transform: translateY(-50%) translateX(50%);
    pointer-events: none;
  }

  /*
   * Button spacing
   */

  .button--has-label.button--small .button__label {
    padding: 0 var(--sl-spacing-small);
  }

  .button--has-label.button--medium .button__label {
    padding: 0 var(--sl-spacing-medium);
  }

  .button--has-label.button--large .button__label {
    padding: 0 var(--sl-spacing-large);
  }

  .button--has-prefix.button--small {
    padding-left: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--small .button__label {
    padding-left: var(--sl-spacing-x-small);
  }

  .button--has-prefix.button--medium {
    padding-left: var(--sl-spacing-small);
  }

  .button--has-prefix.button--medium .button__label {
    padding-left: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large {
    padding-left: var(--sl-spacing-small);
  }

  .button--has-prefix.button--large .button__label {
    padding-left: var(--sl-spacing-small);
  }

  .button--has-suffix.button--small,
  .button--caret.button--small {
    padding-right: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--small .button__label,
  .button--caret.button--small .button__label {
    padding-right: var(--sl-spacing-x-small);
  }

  .button--has-suffix.button--medium,
  .button--caret.button--medium {
    padding-right: var(--sl-spacing-small);
  }

  .button--has-suffix.button--medium .button__label,
  .button--caret.button--medium .button__label {
    padding-right: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large,
  .button--caret.button--large {
    padding-right: var(--sl-spacing-small);
  }

  .button--has-suffix.button--large .button__label,
  .button--caret.button--large .button__label {
    padding-right: var(--sl-spacing-small);
  }

  /*
   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).
   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the
   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to
   * buttons and we style them here instead.
   */

  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  :host(.sl-button-group__button--inner) .button {
    border-radius: 0;
  }

  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  /* All except the first */
  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {
    margin-left: calc(-1 * var(--sl-input-border-width));
  }

  /* Add a visual separator between solid buttons */
  :host(.sl-button-group__button:not(.sl-button-group__button--focus, .sl-button-group__button--first, [variant='default']):not(:hover, :active, :focus))
    .button:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    border-left: solid 1px rgb(128 128 128 / 33%);
    mix-blend-mode: multiply;
  }

  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */
  :host(.sl-button-group__button--hover) {
    z-index: 1;
  }

  :host(.sl-button-group__button--focus),
  :host(.sl-button-group__button[checked]) {
    z-index: 2;
  }
`,Pa=ci`
  ${Da}
  label {
    display: inline-block;
    position: relative;
  }
  /* We use a hidden input so constraint validation errors work, since they don't appear to show when used with buttons.
    We can't actually hide it, though, otherwise the messages will be suppressed by the browser. */
  .hidden-input {
    all: unset;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    outline: dotted 1px red;
    opacity: 0;
    z-index: -1;
  }
`,La=(e,...t)=>({_$litStatic$:t.reduce(((t,o,i)=>t+(e=>{if(void 0!==e._$litStatic$)return e._$litStatic$;throw Error(`Value passed to 'literal' function must be a 'literal' result: ${e}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`)})(o)+e[i+1]),e[0])}),Ma=new Map,$a=(e=>(t,...o)=>{var i;const a=o.length;let r,n;const s=[],l=[];let c,u=0,d=!1;for(;u<a;){for(c=t[u];u<a&&void 0!==(n=o[u],r=null===(i=n)||void 0===i?void 0:i._$litStatic$);)c+=r+t[++u],d=!0;l.push(n),s.push(c),u++}if(u===a&&s.push(t[a]),d){const e=s.join("$$lit$$");void 0===(t=Ma.get(e))&&(s.raw=s,Ma.set(e,t=s)),o=l}return e(t,...o)})(Di),ja=class extends Event{constructor(e){super("formdata"),this.formData=e}},za=class extends FormData{constructor(e){super(e),this.form=e,e.dispatchEvent(new ja(this))}append(e,t){let o=this.form.elements[e];if(o||(o=document.createElement("input"),o.type="hidden",o.name=e,this.form.appendChild(o)),this.has(e)){const i=this.getAll(e),a=i.indexOf(o.value);-1!==a&&i.splice(a,1),i.push(t),this.set(e,i)}else super.append(e,t);o.value=t}};function Fa(){window.FormData&&!function(){const e=document.createElement("form");let t=!1;return document.body.append(e),e.addEventListener("submit",(e=>{new FormData(e.target),e.preventDefault()})),e.addEventListener("formdata",(()=>t=!0)),e.dispatchEvent(new Event("submit",{cancelable:!0})),e.remove(),t}()&&(window.FormData=za,window.addEventListener("submit",(e=>{e.defaultPrevented||new FormData(e.target)})))}"complete"===document.readyState?Fa():window.addEventListener("DOMContentLoaded",(()=>Fa()));var Ba=class{constructor(e,t){(this.host=e).addController(this),this.options=va({form:e=>e.closest("form"),name:e=>e.name,value:e=>e.value,disabled:e=>e.disabled,reportValidity:e=>"function"!=typeof e.reportValidity||e.reportValidity()},t),this.handleFormData=this.handleFormData.bind(this),this.handleFormSubmit=this.handleFormSubmit.bind(this)}hostConnected(){document.addEventListener("formdata",this.handleFormData,{capture:!0}),document.addEventListener("submit",this.handleFormSubmit,{capture:!0})}hostDisconnected(){document.removeEventListener("formdata",this.handleFormData,{capture:!0}),document.removeEventListener("submit",this.handleFormSubmit,{capture:!0})}handleFormData(e){const t=this.options.disabled(this.host),o=this.options.name(this.host),i=this.options.value(this.host);t||"string"!=typeof o||void 0===i||(Array.isArray(i)?i.forEach((t=>{e.formData.append(o,t.toString())})):e.formData.append(o,i.toString()))}handleFormSubmit(e){const t=this.options.form(this.host),o=this.options.disabled(this.host),i=this.options.reportValidity;e.target!==t||o||(null==t?void 0:t.noValidate)||i(this.host)||(e.preventDefault(),e.stopImmediatePropagation())}submit(e){const t=this.options.form(this.host);if(t){const o=document.createElement("button");o.type="submit",o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.clipPath="inset(50%)",o.style.overflow="hidden",o.style.whiteSpace="nowrap",e&&["formaction","formmethod","formnovalidate","formtarget"].forEach((t=>{e.hasAttribute(t)&&o.setAttribute(t,e.getAttribute(t))})),t.append(o),o.click(),o.remove()}}},Ua=class{constructor(e,...t){this.slotNames=[],(this.host=e).addController(this),this.slotNames=t,this.handleSlotChange=this.handleSlotChange.bind(this)}hasDefaultSlot(){return[...this.host.childNodes].some((e=>{if(e.nodeType===e.TEXT_NODE&&""!==e.textContent.trim())return!0;if(e.nodeType===e.ELEMENT_NODE){const t=e;if("sl-visually-hidden"===t.tagName.toLowerCase())return!1;if(!t.hasAttribute("slot"))return!0}return!1}))}hasNamedSlot(e){return null!==this.host.querySelector(`:scope > [slot="${e}"]`)}test(e){return"[default]"===e?this.hasDefaultSlot():this.hasNamedSlot(e)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}handleSlotChange(e){const t=e.target;(this.slotNames.includes("[default]")&&!t.name||t.name&&this.slotNames.includes(t.name))&&this.host.requestUpdate()}};function Va(e){if(!e)return"";const t=e.assignedNodes({flatten:!0});let o="";return[...t].forEach((e=>{e.nodeType===Node.TEXT_NODE&&(o+=e.textContent)})),o}var Ha=e=>null!=e?e:Li
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function Ga(e,t){const o=va({waitUntilFirstUpdate:!1},t);return(t,i)=>{const{update:a}=t;if(e in t){const r=e;t.update=function(e){if(e.has(r)){const t=e.get(r),a=this[r];t!==a&&(o.waitUntilFirstUpdate&&!this.hasUpdated||this[i](t,a))}a.call(this,e)}}}}function Qa(e,t,o){const i=new CustomEvent(t,va({bubbles:!0,cancelable:!1,composed:!0,detail:{}},o));return e.dispatchEvent(i),i}function Ka(e,t){return new Promise((o=>{e.addEventListener(t,(function i(a){a.target===e&&(e.removeEventListener(t,i),o())}))}))}var Wa=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this,{value:e=>e.checked?e.value:void 0}),this.hasSlotController=new Ua(this,"[default]","prefix","suffix"),this.hasFocus=!1,this.disabled=!1,this.checked=!1,this.invalid=!1,this.variant="default",this.size="medium",this.pill=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","radio")}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}reportValidity(){return this.hiddenInput.reportValidity()}setCustomValidity(e){this.hiddenInput.setCustomValidity(e)}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleClick(){this.disabled||(this.checked=!0)}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false"),this.hasUpdated&&Qa(this,"sl-change")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false"),this.hasUpdated&&(this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity())}render(){return $a`
      <div part="base">
        <input class="hidden-input" type="radio" aria-hidden="true" tabindex="-1" />
        <button
          part="button"
          class=${sa({button:!0,"button--default":"default"===this.variant,"button--primary":"primary"===this.variant,"button--success":"success"===this.variant,"button--neutral":"neutral"===this.variant,"button--warning":"warning"===this.variant,"button--danger":"danger"===this.variant,"button--small":"small"===this.size,"button--medium":"medium"===this.size,"button--large":"large"===this.size,"button--checked":this.checked,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--outline":!0,"button--pill":this.pill,"button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
          ?disabled=${this.disabled}
          type="button"
          name=${Ha(this.name)}
          value=${Ha(this.value)}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
          @click=${this.handleClick}
        >
          <span part="prefix" class="button__prefix">
            <slot name="prefix"></slot>
          </span>
          <span part="label" class="button__label">
            <slot></slot>
          </span>
          <span part="suffix" class="button__suffix">
            <slot name="suffix"></slot>
          </span>
        </button>
      </div>
    `}};Wa.styles=Pa,ya([Oa(".button")],Wa.prototype,"input",2),ya([Oa(".hidden-input")],Wa.prototype,"hiddenInput",2),ya([_a()],Wa.prototype,"hasFocus",2),ya([wa()],Wa.prototype,"name",2),ya([wa()],Wa.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],Wa.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],Wa.prototype,"checked",2),ya([wa({type:Boolean,reflect:!0})],Wa.prototype,"invalid",2),ya([Ga("checked")],Wa.prototype,"handleCheckedChange",1),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],Wa.prototype,"handleDisabledChange",1),ya([wa({reflect:!0})],Wa.prototype,"variant",2),ya([wa({reflect:!0})],Wa.prototype,"size",2),ya([wa({type:Boolean,reflect:!0})],Wa.prototype,"pill",2),Wa=ya([xa("sl-radio-button")],Wa);var Xa,Ya=ci`
  .form-control .form-control__label {
    display: none;
  }

  .form-control .form-control__help-text {
    display: none;
  }

  /* Label */
  .form-control--has-label .form-control__label {
    display: inline-block;
    color: var(--sl-input-label-color);
    margin-bottom: var(--sl-spacing-3x-small);
  }

  .form-control--has-label.form-control--small .form-control__label {
    font-size: var(--sl-input-label-font-size-small);
  }

  .form-control--has-label.form-control--medium .form-control__label {
    font-size: var(--sl-input-label-font-size-medium);
  }

  .form-control--has-label.form-control--large .form-control_label {
    font-size: var(--sl-input-label-font-size-large);
  }

  /* Help text */
  .form-control--has-help-text .form-control__help-text {
    display: block;
    color: var(--sl-input-help-text-color);
  }

  .form-control--has-help-text .form-control__help-text ::slotted(*) {
    margin-top: var(--sl-spacing-3x-small);
  }

  .form-control--has-help-text.form-control--small .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-small);
  }

  .form-control--has-help-text.form-control--medium .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-medium);
  }

  .form-control--has-help-text.form-control--large .form-control__help-text {
    font-size: var(--sl-input-help-text-font-size-large);
  }
`,Ja=ci`
  ${Zi}
  ${Ya}

  :host {
    display: block;
  }

  .input {
    flex: 1 1 auto;
    display: inline-flex;
    align-items: stretch;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    cursor: text;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,
      var(--sl-transition-fast) background-color;
  }

  /* Standard inputs */
  .input--standard {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
  }

  .input--standard:hover:not(.input--disabled) {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
  }

  .input--standard.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  .input--standard.input--focused:not(.input--disabled) .input__control {
    color: var(--sl-input-color-focus);
  }

  .input--standard.input--disabled {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input--standard.input--disabled .input__control {
    color: var(--sl-input-color-disabled);
  }

  .input--standard.input--disabled .input__control::placeholder {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Filled inputs */
  .input--filled {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .input--filled:hover:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .input--filled.input--focused:not(.input--disabled) {
    background-color: var(--sl-input-filled-background-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  .input--filled.input--disabled {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .input__control {
    flex: 1 1 auto;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    min-width: 0;
    height: 100%;
    color: var(--sl-input-color);
    border: none;
    background: none;
    box-shadow: none;
    padding: 0;
    margin: 0;
    cursor: inherit;
    -webkit-appearance: none;
  }

  .input__control::-webkit-search-decoration,
  .input__control::-webkit-search-cancel-button,
  .input__control::-webkit-search-results-button,
  .input__control::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  .input__control:-webkit-autofill,
  .input__control:-webkit-autofill:hover,
  .input__control:-webkit-autofill:focus,
  .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;
    -webkit-text-fill-color: var(--sl-color-primary-500);
    caret-color: var(--sl-input-color);
  }

  .input--filled .input__control:-webkit-autofill,
  .input--filled .input__control:-webkit-autofill:hover,
  .input--filled .input__control:-webkit-autofill:focus,
  .input--filled .input__control:-webkit-autofill:active {
    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;
  }

  .input__control::placeholder {
    color: var(--sl-input-placeholder-color);
    user-select: none;
  }

  .input:hover:not(.input--disabled) .input__control {
    color: var(--sl-input-color-hover);
  }

  .input__control:focus {
    outline: none;
  }

  .input__prefix,
  .input__suffix {
    display: inline-flex;
    flex: 0 0 auto;
    align-items: center;
    cursor: default;
  }

  .input__prefix ::slotted(sl-icon),
  .input__suffix ::slotted(sl-icon) {
    color: var(--sl-input-icon-color);
  }

  /*
   * Size modifiers
   */

  .input--small {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    height: var(--sl-input-height-small);
  }

  .input--small .input__control {
    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-small);
  }

  .input--small .input__clear,
  .input--small .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-small) * 2);
  }

  .input--small .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-small);
  }

  .input--small .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-small);
  }

  .input--medium {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    height: var(--sl-input-height-medium);
  }

  .input--medium .input__control {
    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-medium);
  }

  .input--medium .input__clear,
  .input--medium .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-medium) * 2);
  }

  .input--medium .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-medium);
  }

  .input--medium .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-medium);
  }

  .input--large {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    height: var(--sl-input-height-large);
  }

  .input--large .input__control {
    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    padding: 0 var(--sl-input-spacing-large);
  }

  .input--large .input__clear,
  .input--large .input__password-toggle {
    width: calc(1em + var(--sl-input-spacing-large) * 2);
  }

  .input--large .input__prefix ::slotted(*) {
    padding-left: var(--sl-input-spacing-large);
  }

  .input--large .input__suffix ::slotted(*) {
    padding-right: var(--sl-input-spacing-large);
  }

  /*
   * Pill modifier
   */

  .input--pill.input--small {
    border-radius: var(--sl-input-height-small);
  }

  .input--pill.input--medium {
    border-radius: var(--sl-input-height-medium);
  }

  .input--pill.input--large {
    border-radius: var(--sl-input-height-large);
  }

  /*
   * Clearable + Password Toggle
   */

  .input__clear,
  .input__password-toggle {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .input__clear:hover,
  .input__password-toggle:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .input__clear:focus,
  .input__password-toggle:focus {
    outline: none;
  }

  .input--empty .input__clear {
    visibility: hidden;
  }

  /* Don't show the browser's password toggle in Edge */
  ::-ms-reveal {
    display: none;
  }
`,Za=new Set,er=new MutationObserver(ir),tr=new Map,or=document.documentElement.lang||navigator.language;function ir(){or=document.documentElement.lang||navigator.language,[...Za.keys()].map((e=>{"function"==typeof e.requestUpdate&&e.requestUpdate()}))}er.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"]});var ar=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){Za.add(this.host)}hostDisconnected(){Za.delete(this.host)}term(e,...t){return function(e,t,...o){const i=e.toLowerCase().slice(0,2),a=e.length>2?e.toLowerCase():"",r=tr.get(a),n=tr.get(i);let s;if(r&&r[t])s=r[t];else if(n&&n[t])s=n[t];else{if(!Xa||!Xa[t])return console.error(`No translation found for: ${t}`),t;s=Xa[t]}return"function"==typeof s?s(...o):s}(this.host.lang||or,e,...t)}date(e,t){return function(e,t,o){return t=new Date(t),new Intl.DateTimeFormat(e,o).format(t)}(this.host.lang||or,e,t)}number(e,t){return function(e,t,o){return t=Number(t),isNaN(t)?"":new Intl.NumberFormat(e,o).format(t)}(this.host.lang||or,e,t)}relativeTime(e,t,o){return function(e,t,o,i){return new Intl.RelativeTimeFormat(e,i).format(t,o)}(this.host.lang||or,e,t,o)}};!function(...e){e.map((e=>{const t=e.$code.toLowerCase();tr.set(t,e),Xa||(Xa=e)})),ir()}({$code:"en",$name:"English",$dir:"ltr",clearEntry:"Clear entry",close:"Close",copy:"Copy",currentValue:"Current value",hidePassword:"Hide password",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",toggleColorFormat:"Toggle color format"});var rr={},nr=ra(class extends na{constructor(e){if(super(e),e.type!==ia&&e.type!==ta&&e.type!==aa)throw Error("The `live` directive is not allowed on child or event bindings");if(!(e=>void 0===e.strings)(e))throw Error("`live` bindings can only contain a single expression")}render(e){return e}update(e,[t]){if(t===Pi||t===Li)return t;const o=e.element,i=e.name;if(e.type===ia){if(t===o[i])return Pi}else if(e.type===aa){if(!!t===o.hasAttribute(i))return Pi}else if(e.type===ta&&o.getAttribute(i)===t+"")return Pi;return((e,t=rr)=>{e._$AH=t})(e),t}}),sr=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this),this.hasSlotController=new Ua(this,"help-text","label"),this.localize=new ar(this),this.hasFocus=!1,this.isPasswordVisible=!1,this.type="text",this.size="medium",this.value="",this.filled=!1,this.pill=!1,this.label="",this.helpText="",this.clearable=!1,this.togglePassword=!1,this.disabled=!1,this.readonly=!1,this.required=!1,this.invalid=!1}get valueAsDate(){var e,t;return null!=(t=null==(e=this.input)?void 0:e.valueAsDate)?t:null}set valueAsDate(e){this.updateComplete.then((()=>{this.input.valueAsDate=e,this.value=this.input.value}))}get valueAsNumber(){var e,t;return null!=(t=null==(e=this.input)?void 0:e.valueAsNumber)?t:parseFloat(this.value)}set valueAsNumber(e){this.updateComplete.then((()=>{this.input.valueAsNumber=e,this.value=this.input.value}))}firstUpdated(){this.invalid=!this.input.checkValidity()}focus(e){this.input.focus(e)}blur(){this.input.blur()}select(){this.input.select()}setSelectionRange(e,t,o="none"){this.input.setSelectionRange(e,t,o)}setRangeText(e,t,o,i="preserve"){this.input.setRangeText(e,t,o,i),this.value!==this.input.value&&(this.value=this.input.value,Qa(this,"sl-input"),Qa(this,"sl-change"))}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleChange(){this.value=this.input.value,Qa(this,"sl-change")}handleClearClick(e){this.value="",Qa(this,"sl-clear"),Qa(this,"sl-input"),Qa(this,"sl-change"),this.input.focus(),e.stopPropagation()}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleInput(){this.value=this.input.value,Qa(this,"sl-input")}handleInvalid(){this.invalid=!0}handleKeyDown(e){const t=e.metaKey||e.ctrlKey||e.shiftKey||e.altKey;"Enter"!==e.key||t||this.formSubmitController.submit()}handlePasswordToggle(){this.isPasswordVisible=!this.isPasswordVisible}handleValueChange(){this.invalid=!this.input.checkValidity()}render(){const e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),o=!!this.label||!!e,i=!!this.helpText||!!t;return Di`
      <div
        part="form-control"
        class=${sa({"form-control":!0,"form-control--small":"small"===this.size,"form-control--medium":"medium"===this.size,"form-control--large":"large"===this.size,"form-control--has-label":o,"form-control--has-help-text":i})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${o?"false":"true"}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <div
            part="base"
            class=${sa({input:!0,"input--small":"small"===this.size,"input--medium":"medium"===this.size,"input--large":"large"===this.size,"input--pill":this.pill,"input--standard":!this.filled,"input--filled":this.filled,"input--disabled":this.disabled,"input--focused":this.hasFocus,"input--empty":0===this.value.length,"input--invalid":this.invalid})}
          >
            <span part="prefix" class="input__prefix">
              <slot name="prefix"></slot>
            </span>

            <input
              part="input"
              id="input"
              class="input__control"
              type=${"password"===this.type&&this.isPasswordVisible?"text":this.type}
              name=${Ha(this.name)}
              ?disabled=${this.disabled}
              ?readonly=${this.readonly}
              ?required=${this.required}
              placeholder=${Ha(this.placeholder)}
              minlength=${Ha(this.minlength)}
              maxlength=${Ha(this.maxlength)}
              min=${Ha(this.min)}
              max=${Ha(this.max)}
              step=${Ha(this.step)}
              .value=${nr(this.value)}
              autocapitalize=${Ha(this.autocapitalize)}
              autocomplete=${Ha(this.autocomplete)}
              autocorrect=${Ha(this.autocorrect)}
              ?autofocus=${this.autofocus}
              spellcheck=${Ha(this.spellcheck)}
              pattern=${Ha(this.pattern)}
              enterkeyhint=${Ha(this.enterkeyhint)}
              inputmode=${Ha(this.inputmode)}
              aria-describedby="help-text"
              aria-invalid=${this.invalid?"true":"false"}
              @change=${this.handleChange}
              @input=${this.handleInput}
              @invalid=${this.handleInvalid}
              @keydown=${this.handleKeyDown}
              @focus=${this.handleFocus}
              @blur=${this.handleBlur}
            />

            ${this.clearable&&this.value.length>0?Di`
                  <button
                    part="clear-button"
                    class="input__clear"
                    type="button"
                    aria-label=${this.localize.term("clearEntry")}
                    @click=${this.handleClearClick}
                    tabindex="-1"
                  >
                    <slot name="clear-icon">
                      <sl-icon name="x-circle-fill" library="system"></sl-icon>
                    </slot>
                  </button>
                `:""}
            ${this.togglePassword?Di`
                  <button
                    part="password-toggle-button"
                    class="input__password-toggle"
                    type="button"
                    aria-label=${this.localize.term(this.isPasswordVisible?"hidePassword":"showPassword")}
                    @click=${this.handlePasswordToggle}
                    tabindex="-1"
                  >
                    ${this.isPasswordVisible?Di`
                          <slot name="show-password-icon">
                            <sl-icon name="eye-slash" library="system"></sl-icon>
                          </slot>
                        `:Di`
                          <slot name="hide-password-icon">
                            <sl-icon name="eye" library="system"></sl-icon>
                          </slot>
                        `}
                  </button>
                `:""}

            <span part="suffix" class="input__suffix">
              <slot name="suffix"></slot>
            </span>
          </div>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${i?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};sr.styles=Ja,ya([Oa(".input__control")],sr.prototype,"input",2),ya([_a()],sr.prototype,"hasFocus",2),ya([_a()],sr.prototype,"isPasswordVisible",2),ya([wa({reflect:!0})],sr.prototype,"type",2),ya([wa({reflect:!0})],sr.prototype,"size",2),ya([wa()],sr.prototype,"name",2),ya([wa()],sr.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"filled",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"pill",2),ya([wa()],sr.prototype,"label",2),ya([wa({attribute:"help-text"})],sr.prototype,"helpText",2),ya([wa({type:Boolean})],sr.prototype,"clearable",2),ya([wa({attribute:"toggle-password",type:Boolean})],sr.prototype,"togglePassword",2),ya([wa()],sr.prototype,"placeholder",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"readonly",2),ya([wa({type:Number})],sr.prototype,"minlength",2),ya([wa({type:Number})],sr.prototype,"maxlength",2),ya([wa()],sr.prototype,"min",2),ya([wa()],sr.prototype,"max",2),ya([wa({type:Number})],sr.prototype,"step",2),ya([wa()],sr.prototype,"pattern",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"required",2),ya([wa({type:Boolean,reflect:!0})],sr.prototype,"invalid",2),ya([wa()],sr.prototype,"autocapitalize",2),ya([wa()],sr.prototype,"autocorrect",2),ya([wa()],sr.prototype,"autocomplete",2),ya([wa({type:Boolean})],sr.prototype,"autofocus",2),ya([wa()],sr.prototype,"enterkeyhint",2),ya([wa({type:Boolean})],sr.prototype,"spellcheck",2),ya([wa()],sr.prototype,"inputmode",2),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],sr.prototype,"handleDisabledChange",1),ya([Ga("value",{waitUntilFirstUpdate:!0})],sr.prototype,"handleValueChange",1),sr=ya([xa("sl-input")],sr);var lr="";function cr(e){lr=e}var ur=[...document.getElementsByTagName("script")],dr=ur.find((e=>e.hasAttribute("data-shoelace")));if(dr)cr(dr.getAttribute("data-shoelace"));else{const e=ur.find((e=>/shoelace(\.min)?\.js($|\?)/.test(e.src)));let t="";e&&(t=e.getAttribute("src")),cr(t.split("/").slice(0,-1).join("/"))}var pr={"check-lg":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">\n      <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"></path>\n    </svg>\n  ',"chevron-down":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',"chevron-left":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>\n    </svg>\n  ',"chevron-right":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',eye:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">\n      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>\n      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>\n    </svg>\n  ',"eye-slash":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">\n      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>\n      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>\n      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>\n    </svg>\n  ',eyedropper:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>\n    </svg>\n  ',"grip-vertical":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">\n      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n    </svg>\n  ',"person-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">\n      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n    </svg>\n  ',"play-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>\n    </svg>\n  ',"pause-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>\n    </svg>\n  ',"star-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">\n      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n    </svg>\n  ',x:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n      <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',"x-circle-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">\n      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>\n    </svg>\n  '},hr=[{name:"default",resolver:e=>`${lr.replace(/\/$/,"")}/assets/icons/${e}.svg`},{name:"system",resolver:e=>e in pr?`data:image/svg+xml,${encodeURIComponent(pr[e])}`:""}],mr=[];function fr(e){return hr.find((t=>t.name===e))}var vr=new Map;var gr=new Map;async function br(e){if(gr.has(e))return gr.get(e);const t=await function(e,t="cors"){if(vr.has(e))return vr.get(e);const o=fetch(e,{mode:t}).then((async e=>({ok:e.ok,status:e.status,html:await e.text()})));return vr.set(e,o),o}(e),o={ok:t.ok,status:t.status,svg:null};if(t.ok){const e=document.createElement("div");e.innerHTML=t.html;const i=e.firstElementChild;o.svg="svg"===(null==i?void 0:i.tagName.toLowerCase())?i.outerHTML:""}return gr.set(e,o),o}var yr=ci`
  ${Zi}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    contain: strict;
    box-sizing: content-box !important;
  }

  .icon,
  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,xr=class extends na{constructor(e){if(super(e),this.it=Li,e.type!==oa)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===Li||null==e)return this.vt=void 0,this.it=e;if(e===Pi)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this.vt;this.it=e;const t=[e];return t.raw=t,this.vt={_$litType$:this.constructor.resultType,strings:t,values:[]}}};xr.directiveName="unsafeHTML",xr.resultType=1;var Ar=class extends xr{};Ar.directiveName="unsafeSVG",Ar.resultType=2;var wr=ra(Ar),_r=new DOMParser,Er=class extends Yi{constructor(){super(...arguments),this.svg="",this.label="",this.library="default"}connectedCallback(){var e;super.connectedCallback(),e=this,mr.push(e)}firstUpdated(){this.setIcon()}disconnectedCallback(){var e;super.disconnectedCallback(),e=this,mr=mr.filter((t=>t!==e))}getUrl(){const e=fr(this.library);return this.name&&e?e.resolver(this.name):this.src}redraw(){this.setIcon()}async setIcon(){var e;const t=fr(this.library),o=this.getUrl();if(o)try{const i=await br(o);if(o!==this.getUrl())return;if(i.ok){const o=_r.parseFromString(i.svg,"text/html").body.querySelector("svg");null!==o?(null==(e=null==t?void 0:t.mutator)||e.call(t,o),this.svg=o.outerHTML,Qa(this,"sl-load")):(this.svg="",Qa(this,"sl-error"))}else this.svg="",Qa(this,"sl-error")}catch(e){Qa(this,"sl-error")}else this.svg.length>0&&(this.svg="")}handleChange(){this.setIcon()}render(){const e="string"==typeof this.label&&this.label.length>0;return Di` <div
      part="base"
      class="icon"
      role=${Ha(e?"img":void 0)}
      aria-label=${Ha(e?this.label:void 0)}
      aria-hidden=${Ha(e?void 0:"true")}
    >
      ${wr(this.svg)}
    </div>`}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function Or(e){const t=e.tagName.toLowerCase();return"-1"!==e.getAttribute("tabindex")&&(!e.hasAttribute("disabled")&&((!e.hasAttribute("aria-disabled")||"false"===e.getAttribute("aria-disabled"))&&(!("input"===t&&"radio"===e.getAttribute("type")&&!e.hasAttribute("checked"))&&(null!==e.offsetParent&&("hidden"!==window.getComputedStyle(e).visibility&&(!("audio"!==t&&"video"!==t||!e.hasAttribute("controls"))||(!!e.hasAttribute("tabindex")||(!(!e.hasAttribute("contenteditable")||"false"===e.getAttribute("contenteditable"))||["button","input","select","textarea","a","audio","video","summary"].includes(t)))))))))}function Sr(e){var t,o;const i=[];!function e(t){t instanceof HTMLElement&&(i.push(t),null!==t.shadowRoot&&"open"===t.shadowRoot.mode&&e(t.shadowRoot)),[...t.querySelectorAll("*")].forEach((t=>e(t)))}(e);return{start:null!=(t=i.find((e=>Or(e))))?t:null,end:null!=(o=i.reverse().find((e=>Or(e))))?o:null}}Er.styles=yr,ya([_a()],Er.prototype,"svg",2),ya([wa()],Er.prototype,"name",2),ya([wa()],Er.prototype,"src",2),ya([wa()],Er.prototype,"label",2),ya([wa()],Er.prototype,"library",2),ya([Ga("name"),Ga("src"),Ga("library")],Er.prototype,"setIcon",1),Er=ya([xa("sl-icon")],Er);var Ir=[];var kr=new Set;function Cr(e){kr.add(e),document.body.classList.add("sl-scroll-lock")}function Nr(e){kr.delete(e),0===kr.size&&document.body.classList.remove("sl-scroll-lock")}function Tr(e,t,o="vertical",i="smooth"){const a=function(e,t){return{top:Math.round(e.getBoundingClientRect().top-t.getBoundingClientRect().top),left:Math.round(e.getBoundingClientRect().left-t.getBoundingClientRect().left)}}(e,t),r=a.top+t.scrollTop,n=a.left+t.scrollLeft,s=t.scrollLeft,l=t.scrollLeft+t.offsetWidth,c=t.scrollTop,u=t.scrollTop+t.offsetHeight;"horizontal"!==o&&"both"!==o||(n<s?t.scrollTo({left:n,behavior:i}):n+e.clientWidth>l&&t.scrollTo({left:n-t.offsetWidth+e.clientWidth,behavior:i})),"vertical"!==o&&"both"!==o||(r<c?t.scrollTo({top:r,behavior:i}):r+e.clientHeight>u&&t.scrollTo({top:r-t.offsetHeight+e.clientHeight,behavior:i}))}var qr=ci`
  ${Zi}

  :host {
    --width: 31rem;
    --header-spacing: var(--sl-spacing-large);
    --body-spacing: var(--sl-spacing-large);
    --footer-spacing: var(--sl-spacing-large);

    display: contents;
  }

  .dialog {
    display: flex;
    align-items: center;
    justify-content: center;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: var(--sl-z-index-dialog);
  }

  .dialog__panel {
    display: flex;
    flex-direction: column;
    z-index: 2;
    width: var(--width);
    max-width: calc(100% - var(--sl-spacing-2x-large));
    max-height: calc(100% - var(--sl-spacing-2x-large));
    background-color: var(--sl-panel-background-color);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--sl-shadow-x-large);
  }

  .dialog__panel:focus {
    outline: none;
  }

  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */
  @media screen and (max-width: 420px) {
    .dialog__panel {
      max-height: 80vh;
    }
  }

  .dialog--open .dialog__panel {
    display: flex;
    opacity: 1;
    transform: none;
  }

  .dialog__header {
    flex: 0 0 auto;
    display: flex;
  }

  .dialog__title {
    flex: 1 1 auto;
    font: inherit;
    font-size: var(--sl-font-size-large);
    line-height: var(--sl-line-height-dense);
    padding: var(--header-spacing);
    margin: 0;
  }

  .dialog__close {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-x-large);
    padding: 0 var(--header-spacing);
  }

  .dialog__body {
    flex: 1 1 auto;
    padding: var(--body-spacing);
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .dialog__footer {
    flex: 0 0 auto;
    text-align: right;
    padding: var(--footer-spacing);
  }

  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {
    margin-left: var(--sl-spacing-x-small);
  }

  .dialog:not(.dialog--has-footer) .dialog__footer {
    display: none;
  }

  .dialog__overlay {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background-color: var(--sl-overlay-background-color);
  }
`;function Rr(e,t,o){return new Promise((i=>{if((null==o?void 0:o.duration)===1/0)throw new Error("Promise-based animations must be finite.");const a=e.animate(t,ga(va({},o),{duration:Pr()?0:o.duration}));a.addEventListener("cancel",i,{once:!0}),a.addEventListener("finish",i,{once:!0})}))}function Dr(e){return(e=e.toString().toLowerCase()).indexOf("ms")>-1?parseFloat(e):e.indexOf("s")>-1?1e3*parseFloat(e):parseFloat(e)}function Pr(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Lr(e){return Promise.all(e.getAnimations().map((e=>new Promise((t=>{const o=requestAnimationFrame(t);e.addEventListener("cancel",(()=>o),{once:!0}),e.addEventListener("finish",(()=>o),{once:!0}),e.cancel()})))))}function Mr(e,t){return e.map((e=>ga(va({},e),{height:"auto"===e.height?`${t}px`:e.height})))}var $r=new Map,jr=new WeakMap;function zr(e,t){$r.set(e,function(e){return null!=e?e:{keyframes:[],options:{duration:0}}}(t))}function Fr(e,t){const o=jr.get(e);if(null==o?void 0:o[t])return o[t];const i=$r.get(t);return i||{keyframes:[],options:{duration:0}}}var Br=class extends Yi{constructor(){super(...arguments),this.hasSlotController=new Ua(this,"footer"),this.localize=new ar(this),this.open=!1,this.label="",this.noHeader=!1}connectedCallback(){super.connectedCallback(),this.modal=new class{constructor(e){this.tabDirection="forward",this.element=e,this.handleFocusIn=this.handleFocusIn.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this)}activate(){Ir.push(this.element),document.addEventListener("focusin",this.handleFocusIn),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}deactivate(){Ir=Ir.filter((e=>e!==this.element)),document.removeEventListener("focusin",this.handleFocusIn),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)}isActive(){return Ir[Ir.length-1]===this.element}checkFocus(){if(this.isActive()&&!this.element.matches(":focus-within")){const{start:e,end:t}=Sr(this.element),o="forward"===this.tabDirection?e:t;"function"==typeof(null==o?void 0:o.focus)&&o.focus({preventScroll:!0})}}handleFocusIn(){this.checkFocus()}handleKeyDown(e){"Tab"===e.key&&e.shiftKey&&(this.tabDirection="backward"),requestAnimationFrame((()=>this.checkFocus()))}handleKeyUp(){this.tabDirection="forward"}}(this)}firstUpdated(){this.dialog.hidden=!this.open,this.open&&(this.modal.activate(),Cr(this))}disconnectedCallback(){super.disconnectedCallback(),Nr(this)}async show(){if(!this.open)return this.open=!0,Ka(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,Ka(this,"sl-after-hide")}requestClose(e){if(Qa(this,"sl-request-close",{cancelable:!0,detail:{source:e}}).defaultPrevented){const e=Fr(this,"dialog.denyClose");Rr(this.panel,e.keyframes,e.options)}else this.hide()}handleKeyDown(e){"Escape"===e.key&&(e.stopPropagation(),this.requestClose("keyboard"))}async handleOpenChange(){if(this.open){Qa(this,"sl-show"),this.originalTrigger=document.activeElement,this.modal.activate(),Cr(this);const e=this.querySelector("[autofocus]");e&&e.removeAttribute("autofocus"),await Promise.all([Lr(this.dialog),Lr(this.overlay)]),this.dialog.hidden=!1,requestAnimationFrame((()=>{Qa(this,"sl-initial-focus",{cancelable:!0}).defaultPrevented||(e?e.focus({preventScroll:!0}):this.panel.focus({preventScroll:!0})),e&&e.setAttribute("autofocus","")}));const t=Fr(this,"dialog.show"),o=Fr(this,"dialog.overlay.show");await Promise.all([Rr(this.panel,t.keyframes,t.options),Rr(this.overlay,o.keyframes,o.options)]),Qa(this,"sl-after-show")}else{Qa(this,"sl-hide"),this.modal.deactivate(),await Promise.all([Lr(this.dialog),Lr(this.overlay)]);const e=Fr(this,"dialog.hide"),t=Fr(this,"dialog.overlay.hide");await Promise.all([Rr(this.panel,e.keyframes,e.options),Rr(this.overlay,t.keyframes,t.options)]),this.dialog.hidden=!0,Nr(this);const o=this.originalTrigger;"function"==typeof(null==o?void 0:o.focus)&&setTimeout((()=>o.focus())),Qa(this,"sl-after-hide")}}render(){return Di`
      <div
        part="base"
        class=${sa({dialog:!0,"dialog--open":this.open,"dialog--has-footer":this.hasSlotController.test("footer")})}
        @keydown=${this.handleKeyDown}
      >
        <div part="overlay" class="dialog__overlay" @click=${()=>this.requestClose("overlay")} tabindex="-1"></div>

        <div
          part="panel"
          class="dialog__panel"
          role="dialog"
          aria-modal="true"
          aria-hidden=${this.open?"false":"true"}
          aria-label=${Ha(this.noHeader?this.label:void 0)}
          aria-labelledby=${Ha(this.noHeader?void 0:"title")}
          tabindex="0"
        >
          ${this.noHeader?"":Di`
                <header part="header" class="dialog__header">
                  <h2 part="title" class="dialog__title" id="title">
                    <slot name="label"> ${this.label.length>0?this.label:String.fromCharCode(65279)} </slot>
                  </h2>
                  <sl-icon-button
                    part="close-button"
                    exportparts="base:close-button__base"
                    class="dialog__close"
                    name="x"
                    label=${this.localize.term("close")}
                    library="system"
                    @click="${()=>this.requestClose("close-button")}"
                  ></sl-icon-button>
                </header>
              `}

          <div part="body" class="dialog__body">
            <slot></slot>
          </div>

          <footer part="footer" class="dialog__footer">
            <slot name="footer"></slot>
          </footer>
        </div>
      </div>
    `}};Br.styles=qr,ya([Oa(".dialog")],Br.prototype,"dialog",2),ya([Oa(".dialog__panel")],Br.prototype,"panel",2),ya([Oa(".dialog__overlay")],Br.prototype,"overlay",2),ya([wa({type:Boolean,reflect:!0})],Br.prototype,"open",2),ya([wa({reflect:!0})],Br.prototype,"label",2),ya([wa({attribute:"no-header",type:Boolean,reflect:!0})],Br.prototype,"noHeader",2),ya([Ga("open",{waitUntilFirstUpdate:!0})],Br.prototype,"handleOpenChange",1),Br=ya([xa("sl-dialog")],Br),zr("dialog.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:250,easing:"ease"}}),zr("dialog.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:250,easing:"ease"}}),zr("dialog.denyClose",{keyframes:[{transform:"scale(1)"},{transform:"scale(1.02)"},{transform:"scale(1)"}],options:{duration:250}}),zr("dialog.overlay.show",{keyframes:[{opacity:0},{opacity:1}],options:{duration:250}}),zr("dialog.overlay.hide",{keyframes:[{opacity:1},{opacity:0}],options:{duration:250}});var Ur=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .icon-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    background: none;
    border: none;
    border-radius: var(--sl-border-radius-medium);
    font-size: inherit;
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-x-small);
    cursor: pointer;
    transition: var(--sl-transition-medium) color;
    -webkit-appearance: none;
  }

  .icon-button:hover:not(.icon-button--disabled),
  .icon-button:focus:not(.icon-button--disabled) {
    color: var(--sl-color-primary-600);
  }

  .icon-button:active:not(.icon-button--disabled) {
    color: var(--sl-color-primary-700);
  }

  .icon-button:focus {
    outline: none;
  }

  .icon-button--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .icon-button${Ra} {
    box-shadow: var(--sl-focus-ring);
  }
`,Vr=class extends Yi{constructor(){super(...arguments),this.label="",this.disabled=!1}render(){const e=!!this.href,t=Di`
      <sl-icon
        name=${Ha(this.name)}
        library=${Ha(this.library)}
        src=${Ha(this.src)}
        aria-hidden="true"
      ></sl-icon>
    `;return e?Di`
          <a
            part="base"
            class="icon-button"
            href=${Ha(this.href)}
            target=${Ha(this.target)}
            download=${Ha(this.download)}
            rel=${Ha(this.target?"noreferrer noopener":void 0)}
            role="button"
            aria-disabled=${this.disabled?"true":"false"}
            aria-label="${this.label}"
            tabindex=${this.disabled?"-1":"0"}
          >
            ${t}
          </a>
        `:Di`
          <button
            part="base"
            class=${sa({"icon-button":!0,"icon-button--disabled":this.disabled})}
            ?disabled=${this.disabled}
            type="button"
            aria-label=${this.label}
          >
            ${t}
          </button>
        `}};Vr.styles=Ur,ya([Oa(".icon-button")],Vr.prototype,"button",2),ya([wa()],Vr.prototype,"name",2),ya([wa()],Vr.prototype,"library",2),ya([wa()],Vr.prototype,"src",2),ya([wa()],Vr.prototype,"href",2),ya([wa()],Vr.prototype,"target",2),ya([wa()],Vr.prototype,"download",2),ya([wa()],Vr.prototype,"label",2),ya([wa({type:Boolean,reflect:!0})],Vr.prototype,"disabled",2),Vr=ya([xa("sl-icon-button")],Vr);var Hr=ci`
  ${Zi}

  :host {
    display: block;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    text-align: left;
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    color: var(--sl-color-neutral-400);
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix ::slotted(*) {
    margin-right: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix ::slotted(*) {
    margin-left: var(--sl-spacing-x-small);
  }

  :host(:focus) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'])) .menu-item,
  :host(${Ra}:not(.sl-focus-invisible):not([aria-disabled='true'])) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }
`,Gr=class extends Yi{constructor(){super(...arguments),this.checked=!1,this.value="",this.disabled=!1}firstUpdated(){this.setAttribute("role","menuitem")}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}render(){return Di`
      <div
        part="base"
        class=${sa({"menu-item":!0,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":!1})}
      >
        <span class="menu-item__check">
          <sl-icon name="check-lg" library="default" aria-hidden="true"></sl-icon>
        </span>

        <span part="prefix" class="menu-item__prefix">
          <slot name="prefix"></slot>
        </span>

        <span part="label" class="menu-item__label">
          <slot></slot>
        </span>

        <span part="suffix" class="menu-item__suffix">
          <slot name="suffix"></slot>
        </span>

        <span class="menu-item__chevron">
          <sl-icon name="chevron-right" library="default" aria-hidden="true"></sl-icon>
        </span>
      </div>
    `}};Gr.styles=Hr,ya([Oa(".menu-item")],Gr.prototype,"menuItem",2),ya([wa({type:Boolean,reflect:!0})],Gr.prototype,"checked",2),ya([wa()],Gr.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],Gr.prototype,"disabled",2),ya([Ga("checked")],Gr.prototype,"handleCheckedChange",1),ya([Ga("disabled")],Gr.prototype,"handleDisabledChange",1),Gr=ya([xa("sl-menu-item")],Gr);var Qr=ci`
  ${Zi}
  ${Ya}

  :host {
    display: block;
  }

  .select {
    display: block;
  }

  .select__control {
    display: inline-flex;
    align-items: center;
    justify-content: start;
    position: relative;
    width: 100%;
    font-family: var(--sl-input-font-family);
    font-weight: var(--sl-input-font-weight);
    letter-spacing: var(--sl-input-letter-spacing);
    vertical-align: middle;
    overflow: hidden;
    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow;
    cursor: pointer;
  }

  .select__menu {
    max-height: 50vh;
    overflow: auto;
  }

  /* Standard selects */
  .select--standard .select__control {
    background-color: var(--sl-input-background-color);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    color: var(--sl-input-color);
  }

  .select--standard:not(.select--disabled) .select__control:hover {
    background-color: var(--sl-input-background-color-hover);
    border-color: var(--sl-input-border-color-hover);
    color: var(--sl-input-color-hover);
  }

  .select--standard.select--focused:not(.select--disabled) .select__control {
    background-color: var(--sl-input-background-color-focus);
    border-color: var(--sl-input-border-color-focus);
    box-shadow: var(--sl-focus-ring);
    outline: none;
    color: var(--sl-input-color-focus);
  }

  .select--standard.select--disabled .select__control {
    background-color: var(--sl-input-background-color-disabled);
    border-color: var(--sl-input-border-color-disabled);
    color: var(--sl-input-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
    outline: none;
  }

  /* Filled selects */
  .select--filled .select__control {
    border: none;
    background-color: var(--sl-input-filled-background-color);
    color: var(--sl-input-color);
  }

  .select--filled:hover:not(.select--disabled) .select__control {
    background-color: var(--sl-input-filled-background-color-hover);
  }

  .select--filled.select--focused:not(.select--disabled) .select__control {
    outline: none;
    background-color: var(--sl-input-filled-background-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  .select--filled.select--disabled .select__control {
    background-color: var(--sl-input-filled-background-color-disabled);
    opacity: 0.5;
    cursor: not-allowed;
  }

  .select--disabled .select__tags,
  .select--disabled .select__clear {
    pointer-events: none;
  }

  .select__prefix {
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__label {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
    user-select: none;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .select__label::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .select__clear {
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    width: 1.25em;
    font-size: inherit;
    color: var(--sl-input-icon-color);
    border: none;
    background: none;
    padding: 0;
    transition: var(--sl-transition-fast) color;
    cursor: pointer;
  }

  .select__clear:hover {
    color: var(--sl-input-icon-color-hover);
  }

  .select__suffix {
    display: inline-flex;
    align-items: center;
    color: var(--sl-input-placeholder-color);
  }

  .select__icon {
    flex: 0 0 auto;
    display: inline-flex;
    transition: var(--sl-transition-medium) transform ease;
  }

  .select--open .select__icon {
    transform: rotate(-180deg);
  }

  /* Placeholder */
  .select--placeholder-visible .select__label {
    color: var(--sl-input-placeholder-color);
  }

  .select--disabled.select--placeholder-visible .select__label {
    color: var(--sl-input-placeholder-color-disabled);
  }

  /* Tags */
  .select__tags {
    display: inline-flex;
    align-items: center;
    flex-wrap: wrap;
    justify-content: left;
    margin-left: var(--sl-spacing-2x-small);
  }

  /* Hidden input (for form control validation to show) */
  .select__hidden-select {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    overflow: hidden;
    white-space: nowrap;
  }

  /*
   * Size modifiers
   */

  /* Small */
  .select--small .select__control {
    border-radius: var(--sl-input-border-radius-small);
    font-size: var(--sl-input-font-size-small);
    min-height: var(--sl-input-height-small);
  }

  .select--small .select__prefix ::slotted(*) {
    margin-left: var(--sl-input-spacing-small);
  }

  .select--small .select__label {
    margin: 0 var(--sl-input-spacing-small);
  }

  .select--small .select__clear {
    margin-right: var(--sl-input-spacing-small);
  }

  .select--small .select__suffix ::slotted(*) {
    margin-right: var(--sl-input-spacing-small);
  }

  .select--small .select__icon {
    margin-right: var(--sl-input-spacing-small);
  }

  .select--small .select__tags {
    padding-bottom: 2px;
  }

  .select--small .select__tags sl-tag {
    padding-top: 2px;
  }

  .select--small .select__tags sl-tag:not(:last-of-type) {
    margin-right: var(--sl-spacing-2x-small);
  }

  .select--small.select--has-tags .select__label {
    margin-left: 0;
  }

  /* Medium */
  .select--medium .select__control {
    border-radius: var(--sl-input-border-radius-medium);
    font-size: var(--sl-input-font-size-medium);
    min-height: var(--sl-input-height-medium);
  }

  .select--medium .select__prefix ::slotted(*) {
    margin-left: var(--sl-input-spacing-medium);
  }

  .select--medium .select__label {
    margin: 0 var(--sl-input-spacing-medium);
  }

  .select--medium .select__clear {
    margin-right: var(--sl-input-spacing-medium);
  }

  .select--medium .select__suffix ::slotted(*) {
    margin-right: var(--sl-input-spacing-medium);
  }

  .select--medium .select__icon {
    margin-right: var(--sl-input-spacing-medium);
  }

  .select--medium .select__tags {
    padding-bottom: 3px;
  }

  .select--medium .select__tags sl-tag {
    padding-top: 3px;
  }

  .select--medium .select__tags sl-tag:not(:last-of-type) {
    margin-right: var(--sl-spacing-2x-small);
  }

  .select--medium.select--has-tags .select__label {
    margin-left: 0;
  }

  /* Large */
  .select--large .select__control {
    border-radius: var(--sl-input-border-radius-large);
    font-size: var(--sl-input-font-size-large);
    min-height: var(--sl-input-height-large);
  }

  .select--large .select__prefix ::slotted(*) {
    margin-left: var(--sl-input-spacing-large);
  }

  .select--large .select__label {
    margin: 0 var(--sl-input-spacing-large);
  }

  .select--large .select__clear {
    margin-right: var(--sl-input-spacing-large);
  }

  .select--large .select__suffix ::slotted(*) {
    margin-right: var(--sl-input-spacing-large);
  }

  .select--large .select__icon {
    margin-right: var(--sl-input-spacing-large);
  }

  .select--large .select__tags {
    padding-bottom: 4px;
  }
  .select--large .select__tags sl-tag {
    padding-top: 4px;
  }

  .select--large .select__tags sl-tag:not(:last-of-type) {
    margin-right: var(--sl-spacing-2x-small);
  }

  .select--large.select--has-tags .select__label {
    margin-left: 0;
  }

  /*
   * Pill modifier
   */
  .select--pill.select--small .select__control {
    border-radius: var(--sl-input-height-small);
  }

  .select--pill.select--medium .select__control {
    border-radius: var(--sl-input-height-medium);
  }

  .select--pill.select--large .select__control {
    border-radius: var(--sl-input-height-large);
  }
`,Kr=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this),this.hasSlotController=new Ua(this,"help-text","label"),this.localize=new ar(this),this.hasFocus=!1,this.isOpen=!1,this.displayLabel="",this.displayTags=[],this.multiple=!1,this.maxTagsVisible=3,this.disabled=!1,this.name="",this.placeholder="",this.size="medium",this.hoist=!1,this.value="",this.filled=!1,this.pill=!1,this.label="",this.placement="bottom",this.helpText="",this.required=!1,this.clearable=!1,this.invalid=!1}connectedCallback(){super.connectedCallback(),this.handleMenuSlotChange=this.handleMenuSlotChange.bind(this),this.resizeObserver=new ResizeObserver((()=>this.resizeMenu())),this.updateComplete.then((()=>{this.resizeObserver.observe(this),this.syncItemsFromValue()}))}firstUpdated(){this.invalid=!this.input.checkValidity()}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this)}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}getItemLabel(e){return Va(e.shadowRoot.querySelector("slot:not([name])"))}getItems(){return[...this.querySelectorAll("sl-menu-item")]}getValueAsArray(){return this.multiple&&""===this.value?[]:Array.isArray(this.value)?this.value:[this.value]}focus(e){this.control.focus(e)}blur(){this.control.blur()}handleBlur(){this.isOpen||(this.hasFocus=!1,Qa(this,"sl-blur"))}handleClearClick(e){e.stopPropagation(),this.value=this.multiple?[]:"",Qa(this,"sl-clear"),this.syncItemsFromValue()}handleDisabledChange(){this.disabled&&this.isOpen&&this.dropdown.hide(),this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus||(this.hasFocus=!0,Qa(this,"sl-focus"))}handleKeyDown(e){const t=e.target,o=this.getItems(),i=o[0],a=o[o.length-1];if("sl-tag"!==t.tagName.toLowerCase())if("Tab"!==e.key){if(["ArrowDown","ArrowUp"].includes(e.key)){if(e.preventDefault(),this.isOpen||this.dropdown.show(),"ArrowDown"===e.key)return this.menu.setCurrentItem(i),void i.focus();if("ArrowUp"===e.key)return this.menu.setCurrentItem(a),void a.focus()}e.ctrlKey||e.metaKey||this.isOpen||1!==e.key.length||(e.stopPropagation(),e.preventDefault(),this.dropdown.show(),this.menu.typeToSelect(e))}else this.isOpen&&this.dropdown.hide()}handleLabelClick(){this.focus()}handleMenuSelect(e){const t=e.detail.item;this.multiple?this.value=this.value.includes(t.value)?this.value.filter((e=>e!==t.value)):[...this.value,t.value]:this.value=t.value,this.syncItemsFromValue()}handleMenuShow(){this.resizeMenu(),this.isOpen=!0}handleMenuHide(){this.isOpen=!1,this.control.focus()}handleMultipleChange(){var e;const t=this.getValueAsArray();this.value=this.multiple?t:null!=(e=t[0])?e:"",this.syncItemsFromValue()}async handleMenuSlotChange(){const e=this.getItems(),t=[];e.forEach((e=>{t.includes(e.value)&&console.error(`Duplicate value found in <sl-select> menu item: '${e.value}'`,e),t.push(e.value)})),await Promise.all(e.map((e=>e.render))).then((()=>this.syncItemsFromValue()))}handleTagInteraction(e){e.composedPath().find((e=>{if(e instanceof HTMLElement){return e.classList.contains("tag__remove")}return!1}))&&e.stopPropagation()}async handleValueChange(){this.syncItemsFromValue(),await this.updateComplete,this.invalid=!this.input.checkValidity(),Qa(this,"sl-change")}resizeMenu(){this.menu.style.width=`${this.control.clientWidth}px`,this.dropdown.reposition()}syncItemsFromValue(){const e=this.getItems(),t=this.getValueAsArray();if(e.map((e=>e.checked=t.includes(e.value))),this.multiple){const o=e.filter((e=>t.includes(e.value)));if(this.displayLabel=o.length>0?this.getItemLabel(o[0]):"",this.displayTags=o.map((e=>Di`
          <sl-tag
            part="tag"
            exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button
            "
            variant="neutral"
            size=${this.size}
            ?pill=${this.pill}
            removable
            @click=${this.handleTagInteraction}
            @keydown=${this.handleTagInteraction}
            @sl-remove=${t=>{t.stopPropagation(),this.disabled||(e.checked=!1,this.syncValueFromItems())}}
          >
            ${this.getItemLabel(e)}
          </sl-tag>
        `)),this.maxTagsVisible>0&&this.displayTags.length>this.maxTagsVisible){const e=this.displayTags.length;this.displayLabel="",this.displayTags=this.displayTags.slice(0,this.maxTagsVisible),this.displayTags.push(Di`
          <sl-tag
            part="tag"
            exportparts="
              base:tag__base,
              content:tag__content,
              remove-button:tag__remove-button
            "
            variant="neutral"
            size=${this.size}
          >
            +${e-this.maxTagsVisible}
          </sl-tag>
        `)}}else{const o=e.find((e=>e.value===t[0]));this.displayLabel=o?this.getItemLabel(o):"",this.displayTags=[]}}syncValueFromItems(){const e=this.getItems().filter((e=>e.checked)).map((e=>e.value));this.multiple?this.value=this.value.filter((t=>e.includes(t))):this.value=e.length>0?e[0]:""}render(){const e=this.hasSlotController.test("label"),t=this.hasSlotController.test("help-text"),o=this.multiple?this.value.length>0:""!==this.value,i=!!this.label||!!e,a=!!this.helpText||!!t;return Di`
      <div
        part="form-control"
        class=${sa({"form-control":!0,"form-control--small":"small"===this.size,"form-control--medium":"medium"===this.size,"form-control--large":"large"===this.size,"form-control--has-label":i,"form-control--has-help-text":a})}
      >
        <label
          part="form-control-label"
          class="form-control__label"
          for="input"
          aria-hidden=${i?"false":"true"}
          @click=${this.handleLabelClick}
        >
          <slot name="label">${this.label}</slot>
        </label>

        <div part="form-control-input" class="form-control-input">
          <sl-dropdown
            part="base"
            .hoist=${this.hoist}
            .placement=${this.placement}
            .stayOpenOnSelect=${this.multiple}
            .containingElement=${this}
            ?disabled=${this.disabled}
            class=${sa({select:!0,"select--open":this.isOpen,"select--empty":0===this.value.length,"select--focused":this.hasFocus,"select--clearable":this.clearable,"select--disabled":this.disabled,"select--multiple":this.multiple,"select--standard":!this.filled,"select--filled":this.filled,"select--has-tags":this.multiple&&this.displayTags.length>0,"select--placeholder-visible":""===this.displayLabel,"select--small":"small"===this.size,"select--medium":"medium"===this.size,"select--large":"large"===this.size,"select--pill":this.pill,"select--invalid":this.invalid})}
            @sl-show=${this.handleMenuShow}
            @sl-hide=${this.handleMenuHide}
          >
            <div
              part="control"
              slot="trigger"
              id="input"
              class="select__control"
              role="combobox"
              aria-describedby="help-text"
              aria-haspopup="true"
              aria-disabled=${this.disabled?"true":"false"}
              aria-expanded=${this.isOpen?"true":"false"}
              aria-controls="menu"
              tabindex=${this.disabled?"-1":"0"}
              @blur=${this.handleBlur}
              @focus=${this.handleFocus}
              @keydown=${this.handleKeyDown}
            >
              <span part="prefix" class="select__prefix">
                <slot name="prefix"></slot>
              </span>

              <div part="display-label" class="select__label">
                ${this.displayTags.length>0?Di` <span part="tags" class="select__tags"> ${this.displayTags} </span> `:this.displayLabel.length>0?this.displayLabel:this.placeholder}
              </div>

              ${this.clearable&&o?Di`
                    <button
                      part="clear-button"
                      class="select__clear"
                      @click=${this.handleClearClick}
                      aria-label=${this.localize.term("clearEntry")}
                      tabindex="-1"
                    >
                      <slot name="clear-icon">
                        <sl-icon name="x-circle-fill" library="system"></sl-icon>
                      </slot>
                    </button>
                  `:""}

              <span part="suffix" class="select__suffix">
                <slot name="suffix"></slot>
              </span>

              <span part="icon" class="select__icon" aria-hidden="true">
                <sl-icon name="chevron-down" library="system"></sl-icon>
              </span>

              <!-- The hidden input tricks the browser's built-in validation so it works as expected. We use an input
              instead of a select because, otherwise, iOS will show a list of options during validation. The focus
              handler is used to move focus to the primary control when it's marked invalid.  -->
              <input
                class="select__hidden-select"
                aria-hidden="true"
                ?required=${this.required}
                .value=${o?"1":""}
                tabindex="-1"
                @focus=${()=>this.control.focus()}
              />
            </div>

            <sl-menu part="menu" id="menu" class="select__menu" @sl-select=${this.handleMenuSelect}>
              <slot @slotchange=${this.handleMenuSlotChange}></slot>
            </sl-menu>
          </sl-dropdown>
        </div>

        <div
          part="form-control-help-text"
          id="help-text"
          class="form-control__help-text"
          aria-hidden=${a?"false":"true"}
        >
          <slot name="help-text">${this.helpText}</slot>
        </div>
      </div>
    `}};Kr.styles=Qr,ya([Oa(".select")],Kr.prototype,"dropdown",2),ya([Oa(".select__control")],Kr.prototype,"control",2),ya([Oa(".select__hidden-select")],Kr.prototype,"input",2),ya([Oa(".select__menu")],Kr.prototype,"menu",2),ya([_a()],Kr.prototype,"hasFocus",2),ya([_a()],Kr.prototype,"isOpen",2),ya([_a()],Kr.prototype,"displayLabel",2),ya([_a()],Kr.prototype,"displayTags",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"multiple",2),ya([wa({attribute:"max-tags-visible",type:Number})],Kr.prototype,"maxTagsVisible",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"disabled",2),ya([wa()],Kr.prototype,"name",2),ya([wa()],Kr.prototype,"placeholder",2),ya([wa()],Kr.prototype,"size",2),ya([wa({type:Boolean})],Kr.prototype,"hoist",2),ya([wa()],Kr.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"filled",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"pill",2),ya([wa()],Kr.prototype,"label",2),ya([wa()],Kr.prototype,"placement",2),ya([wa({attribute:"help-text"})],Kr.prototype,"helpText",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"required",2),ya([wa({type:Boolean})],Kr.prototype,"clearable",2),ya([wa({type:Boolean,reflect:!0})],Kr.prototype,"invalid",2),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],Kr.prototype,"handleDisabledChange",1),ya([Ga("multiple")],Kr.prototype,"handleMultipleChange",1),ya([Ga("value",{waitUntilFirstUpdate:!0})],Kr.prototype,"handleValueChange",1),Kr=ya([xa("sl-select")],Kr);var Wr=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .tag {
    display: flex;
    align-items: center;
    border: solid 1px;
    line-height: 1;
    white-space: nowrap;
    user-select: none;
    cursor: default;
  }

  .tag__remove::part(base) {
    color: inherit;
    padding: 0;
  }

  /*
   * Variant modifiers
   */

  .tag--primary {
    background-color: var(--sl-color-primary-50);
    border-color: var(--sl-color-primary-200);
    color: var(--sl-color-primary-800);
  }

  .tag--success {
    background-color: var(--sl-color-success-50);
    border-color: var(--sl-color-success-200);
    color: var(--sl-color-success-800);
  }

  .tag--neutral {
    background-color: var(--sl-color-neutral-50);
    border-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-800);
  }

  .tag--warning {
    background-color: var(--sl-color-warning-50);
    border-color: var(--sl-color-warning-200);
    color: var(--sl-color-warning-800);
  }

  .tag--danger {
    background-color: var(--sl-color-danger-50);
    border-color: var(--sl-color-danger-200);
    color: var(--sl-color-danger-800);
  }

  /*
   * Size modifiers
   */

  .tag--small {
    font-size: var(--sl-button-font-size-small);
    height: calc(var(--sl-input-height-small) * 0.8);
    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-small);
    padding: 0 var(--sl-spacing-x-small);
  }

  .tag--small .tag__remove {
    margin-left: var(--sl-spacing-2x-small);
    margin-right: calc(-1 * var(--sl-spacing-3x-small));
  }

  .tag--medium {
    font-size: var(--sl-button-font-size-medium);
    height: calc(var(--sl-input-height-medium) * 0.8);
    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-medium);
    padding: 0 var(--sl-spacing-small);
  }

  .tag__remove {
    margin-left: var(--sl-spacing-2x-small);
    margin-right: calc(-1 * var(--sl-spacing-2x-small));
  }

  .tag--large {
    font-size: var(--sl-button-font-size-large);
    height: calc(var(--sl-input-height-large) * 0.8);
    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);
    border-radius: var(--sl-input-border-radius-large);
    padding: 0 var(--sl-spacing-medium);
  }

  .tag__remove {
    font-size: 1.4em;
    margin-left: var(--sl-spacing-2x-small);
    margin-right: calc(-1 * var(--sl-spacing-x-small));
  }

  /*
   * Pill modifier
   */

  .tag--pill {
    border-radius: var(--sl-border-radius-pill);
  }
`,Xr=class extends Yi{constructor(){super(...arguments),this.localize=new ar(this),this.variant="neutral",this.size="medium",this.pill=!1,this.removable=!1}handleRemoveClick(){Qa(this,"sl-remove")}render(){return Di`
      <span
        part="base"
        class=${sa({tag:!0,"tag--primary":"primary"===this.variant,"tag--success":"success"===this.variant,"tag--neutral":"neutral"===this.variant,"tag--warning":"warning"===this.variant,"tag--danger":"danger"===this.variant,"tag--text":"text"===this.variant,"tag--small":"small"===this.size,"tag--medium":"medium"===this.size,"tag--large":"large"===this.size,"tag--pill":this.pill,"tag--removable":this.removable})}
      >
        <span part="content" class="tag__content">
          <slot></slot>
        </span>

        ${this.removable?Di`
              <sl-icon-button
                part="remove-button"
                exportparts="base:remove-button__base"
                name="x"
                library="system"
                label=${this.localize.term("remove")}
                class="tag__remove"
                @click=${this.handleRemoveClick}
              ></sl-icon-button>
            `:""}
      </span>
    `}};Xr.styles=Wr,ya([wa({reflect:!0})],Xr.prototype,"variant",2),ya([wa({reflect:!0})],Xr.prototype,"size",2),ya([wa({type:Boolean,reflect:!0})],Xr.prototype,"pill",2),ya([wa({type:Boolean})],Xr.prototype,"removable",2),Xr=ya([xa("sl-tag")],Xr);var Yr=ci`
  ${Zi}

  :host {
    display: block;
  }

  .menu {
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    background: var(--sl-panel-background-color);
    padding: var(--sl-spacing-x-small) 0;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,Jr=class extends Yi{constructor(){super(...arguments),this.typeToSelectString=""}firstUpdated(){this.setAttribute("role","menu")}getAllItems(e={includeDisabled:!0}){return[...this.defaultSlot.assignedElements({flatten:!0})].filter((t=>"menuitem"===t.getAttribute("role")&&!(!e.includeDisabled&&t.disabled)))}getCurrentItem(){return this.getAllItems({includeDisabled:!1}).find((e=>"0"===e.getAttribute("tabindex")))}setCurrentItem(e){const t=this.getAllItems({includeDisabled:!1}),o=e.disabled?t[0]:e;t.forEach((e=>{e.setAttribute("tabindex",e===o?"0":"-1")}))}typeToSelect(e){var t;const o=this.getAllItems({includeDisabled:!1});clearTimeout(this.typeToSelectTimeout),this.typeToSelectTimeout=window.setTimeout((()=>this.typeToSelectString=""),1e3),"Backspace"===e.key?e.metaKey||e.ctrlKey?this.typeToSelectString="":this.typeToSelectString=this.typeToSelectString.slice(0,-1):this.typeToSelectString+=e.key.toLowerCase(),qa||o.forEach((e=>e.classList.remove("sl-focus-invisible")));for(const e of o){if(Va(null==(t=e.shadowRoot)?void 0:t.querySelector("slot:not([name])")).toLowerCase().trim().startsWith(this.typeToSelectString)){this.setCurrentItem(e),e.focus();break}}}handleClick(e){const t=e.target.closest("sl-menu-item");!1===(null==t?void 0:t.disabled)&&Qa(this,"sl-select",{detail:{item:t}})}handleKeyUp(){if(!qa){this.getAllItems().forEach((e=>{e.classList.remove("sl-focus-invisible")}))}}handleKeyDown(e){if("Enter"===e.key){const t=this.getCurrentItem();e.preventDefault(),null==t||t.click()}if(" "===e.key&&e.preventDefault(),["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=this.getAllItems({includeDisabled:!1}),o=this.getCurrentItem();let i=o?t.indexOf(o):0;if(t.length>0)return e.preventDefault(),"ArrowDown"===e.key?i++:"ArrowUp"===e.key?i--:"Home"===e.key?i=0:"End"===e.key&&(i=t.length-1),i<0&&(i=t.length-1),i>t.length-1&&(i=0),this.setCurrentItem(t[i]),void t[i].focus()}this.typeToSelect(e)}handleMouseDown(e){const t=e.target;"menuitem"===t.getAttribute("role")&&(this.setCurrentItem(t),qa||t.classList.add("sl-focus-invisible"))}handleSlotChange(){const e=this.getAllItems({includeDisabled:!1});e.length>0&&this.setCurrentItem(e[0])}render(){return Di`
      <div
        part="base"
        class="menu"
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @keyup=${this.handleKeyUp}
        @mousedown=${this.handleMouseDown}
      >
        <slot @slotchange=${this.handleSlotChange}></slot>
      </div>
    `}};function Zr(e){return e.split("-")[0]}function en(e){return e.split("-")[1]}function tn(e){return["top","bottom"].includes(Zr(e))?"x":"y"}function on(e){return"y"===e?"height":"width"}function an(e,t,o){let{reference:i,floating:a}=e;const r=i.x+i.width/2-a.width/2,n=i.y+i.height/2-a.height/2,s=tn(t),l=on(s),c=i[l]/2-a[l]/2,u="x"===s;let d;switch(Zr(t)){case"top":d={x:r,y:i.y-a.height};break;case"bottom":d={x:r,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:n};break;case"left":d={x:i.x-a.width,y:n};break;default:d={x:i.x,y:i.y}}switch(en(t)){case"start":d[s]-=c*(o&&u?-1:1);break;case"end":d[s]+=c*(o&&u?-1:1)}return d}Jr.styles=Yr,ya([Oa(".menu")],Jr.prototype,"menu",2),ya([Oa("slot")],Jr.prototype,"defaultSlot",2),Jr=ya([xa("sl-menu")],Jr);function rn(e){return"number"!=typeof e?function(e){return va({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function nn(e){return ga(va({},e),{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}async function sn(e,t){var o;void 0===t&&(t={});const{x:i,y:a,platform:r,rects:n,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=t,m=rn(h),f=s[p?"floating"===d?"reference":"floating":d],v=nn(await r.getClippingRect({element:null==(o=await(null==r.isElement?void 0:r.isElement(f)))||o?f:f.contextElement||await(null==r.getDocumentElement?void 0:r.getDocumentElement(s.floating)),boundary:c,rootBoundary:u})),g=nn(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===d?ga(va({},n.floating),{x:i,y:a}):n.reference,offsetParent:await(null==r.getOffsetParent?void 0:r.getOffsetParent(s.floating)),strategy:l}):n[d]);return{top:v.top-g.top+m.top,bottom:g.bottom-v.bottom+m.bottom,left:v.left-g.left+m.left,right:g.right-v.right+m.right}}var ln=Math.min,cn=Math.max;function un(e,t,o){return cn(e,ln(t,o))}var dn={left:"right",right:"left",bottom:"top",top:"bottom"};function pn(e){return e.replace(/left|right|bottom|top/g,(e=>dn[e]))}var hn={start:"end",end:"start"};function mn(e){return e.replace(/start|end/g,(e=>hn[e]))}var fn=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var o;const{placement:i,middlewareData:a,rects:r,initialPlacement:n,platform:s,elements:l}=t,c=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",flipAlignment:m=!0}=c,f=ba(c,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]),v=Zr(i),g=p||(v===n||!m?[pn(n)]:function(e){const t=pn(e);return[mn(e),t,mn(t)]}(n)),b=[n,...g],y=await sn(t,f),x=[];let A=(null==(o=a.flip)?void 0:o.overflows)||[];if(u&&x.push(y[v]),d){const{main:e,cross:t}=function(e,t,o){void 0===o&&(o=!1);const i=en(e),a=tn(e),r=on(a);let n="x"===a?i===(o?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[r]>t.floating[r]&&(n=pn(n)),{main:n,cross:pn(n)}}(i,r,await(null==s.isRTL?void 0:s.isRTL(l.floating)));x.push(y[e],y[t])}if(A=[...A,{placement:i,overflows:x}],!x.every((e=>e<=0))){var w,_;const e=(null!=(w=null==(_=a.flip)?void 0:_.index)?w:0)+1,t=b[e];if(t)return{data:{index:e,overflows:A},reset:{skip:!1,placement:t}};let o="bottom";switch(h){case"bestFit":{var E;const e=null==(E=A.slice().sort(((e,t)=>e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)-t.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)))[0])?void 0:E.placement;e&&(o=e);break}case"initialPlacement":o=n}return{reset:{placement:o}}}return{}}}};var vn=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){const{x:o,y:i,placement:a,rects:r,platform:n,elements:s}=t,l=function(e,t,o,i){void 0===i&&(i=!1);const a=Zr(e),r=en(e),n="x"===tn(e),s=["left","top"].includes(a)?-1:1;let l=1;"end"===r&&(l=-1),i&&n&&(l*=-1);const c="function"==typeof o?o(ga(va({},t),{placement:e})):o,{mainAxis:u,crossAxis:d}="number"==typeof c?{mainAxis:c,crossAxis:0}:va({mainAxis:0,crossAxis:0},c);return n?{x:d*l,y:u*s}:{x:u*s,y:d*l}}(a,r,e,await(null==n.isRTL?void 0:n.isRTL(s.floating)));return{x:o+l.x,y:i+l.y,data:l}}}};var gn=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:i,placement:a}=t,r=e,{mainAxis:n=!0,crossAxis:s=!1,limiter:l={fn:e=>{let{x:t,y:o}=e;return{x:t,y:o}}}}=r,c=ba(r,["mainAxis","crossAxis","limiter"]),u={x:o,y:i},d=await sn(t,c),p=tn(Zr(a)),h="x"===p?"y":"x";let m=u[p],f=u[h];if(n){const e="y"===p?"bottom":"right";m=un(m+d["y"===p?"top":"left"],m,m-d[e])}if(s){const e="y"===h?"bottom":"right";f=un(f+d["y"===h?"top":"left"],f,f-d[e])}const v=l.fn(ga(va({},t),{[p]:m,[h]:f}));return ga(va({},v),{data:{x:v.x-o,y:v.y-i}})}}};function bn(e){return"[object Window]"===(null==e?void 0:e.toString())}function yn(e){if(null==e)return window;if(!bn(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function xn(e){return yn(e).getComputedStyle(e)}function An(e){return bn(e)?"":e?(e.nodeName||"").toLowerCase():""}function wn(e){return e instanceof yn(e).HTMLElement}function _n(e){return e instanceof yn(e).Element}function En(e){return e instanceof yn(e).ShadowRoot||e instanceof ShadowRoot}function On(e){const{overflow:t,overflowX:o,overflowY:i}=xn(e);return/auto|scroll|overlay|hidden/.test(t+i+o)}function Sn(e){return["table","td","th"].includes(An(e))}function In(e){const t=navigator.userAgent.toLowerCase().includes("firefox"),o=xn(e);return"none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||["transform","perspective"].includes(o.willChange)||t&&"filter"===o.willChange||t&&!!o.filter&&"none"!==o.filter}var kn=Math.min,Cn=Math.max,Nn=Math.round;function Tn(e,t){void 0===t&&(t=!1);const o=e.getBoundingClientRect();let i=1,a=1;return t&&wn(e)&&(i=e.offsetWidth>0&&Nn(o.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Nn(o.height)/e.offsetHeight||1),{width:o.width/i,height:o.height/a,top:o.top/a,right:o.right/i,bottom:o.bottom/a,left:o.left/i,x:o.left/i,y:o.top/a}}function qn(e){return(t=e,(t instanceof yn(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function Rn(e){return bn(e)?{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}:{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Dn(e){return Tn(qn(e)).left+Rn(e).scrollLeft}function Pn(e,t,o){const i=wn(t),a=qn(t),r=Tn(e,i&&function(e){const t=Tn(e);return Nn(t.width)!==e.offsetWidth||Nn(t.height)!==e.offsetHeight}(t));let n={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(i||!i&&"fixed"!==o)if(("body"!==An(t)||On(a))&&(n=Rn(t)),wn(t)){const e=Tn(t,!0);s.x=e.x+t.clientLeft,s.y=e.y+t.clientTop}else a&&(s.x=Dn(a));return{x:r.left+n.scrollLeft-s.x,y:r.top+n.scrollTop-s.y,width:r.width,height:r.height}}function Ln(e){return"html"===An(e)?e:e.assignedSlot||e.parentNode||(En(e)?e.host:null)||qn(e)}function Mn(e){return wn(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function $n(e){const t=yn(e);let o=Mn(e);for(;o&&Sn(o)&&"static"===getComputedStyle(o).position;)o=Mn(o);return o&&("html"===An(o)||"body"===An(o)&&"static"===getComputedStyle(o).position&&!In(o))?t:o||function(e){let t=Ln(e);for(En(t)&&(t=t.host);wn(t)&&!["html","body"].includes(An(t));){if(In(t))return t;t=t.parentNode}return null}(e)||t}function jn(e){if(wn(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=Tn(e);return{width:t.width,height:t.height}}function zn(e){return["html","body","#document"].includes(An(e))?e.ownerDocument.body:wn(e)&&On(e)?e:zn(Ln(e))}function Fn(e,t){var o;void 0===t&&(t=[]);const i=zn(e),a=i===(null==(o=e.ownerDocument)?void 0:o.body),r=yn(i),n=a?[r].concat(r.visualViewport||[],On(i)?i:[]):i,s=t.concat(n);return a?s:s.concat(Fn(Ln(n)))}function Bn(e,t){return"viewport"===t?nn(function(e){const t=yn(e),o=qn(e),i=t.visualViewport;let a=o.clientWidth,r=o.clientHeight,n=0,s=0;return i&&(a=i.width,r=i.height,Math.abs(t.innerWidth/i.scale-i.width)<.01&&(n=i.offsetLeft,s=i.offsetTop)),{width:a,height:r,x:n,y:s}}(e)):_n(t)?function(e){const t=Tn(e),o=t.top+e.clientTop,i=t.left+e.clientLeft;return{top:o,left:i,x:i,y:o,right:i+e.clientWidth,bottom:o+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t):nn(function(e){var t;const o=qn(e),i=Rn(e),a=null==(t=e.ownerDocument)?void 0:t.body,r=Cn(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),n=Cn(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let s=-i.scrollLeft+Dn(e);const l=-i.scrollTop;return"rtl"===xn(a||o).direction&&(s+=Cn(o.clientWidth,a?a.clientWidth:0)-r),{width:r,height:n,x:s,y:l}}(qn(e)))}function Un(e){const t=Fn(Ln(e)),o=["absolute","fixed"].includes(xn(e).position)&&wn(e)?$n(e):e;return _n(o)?t.filter((e=>_n(e)&&function(e,t){const o=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(o&&En(o)){let o=t;do{if(o&&e===o)return!0;o=o.parentNode||o.host}while(o)}return!1}(e,o)&&"body"!==An(e))):[]}var Vn={getClippingRect:function(e){let{element:t,boundary:o,rootBoundary:i}=e;const a=[..."clippingAncestors"===o?Un(t):[].concat(o),i],r=a[0],n=a.reduce(((e,o)=>{const i=Bn(t,o);return e.top=Cn(i.top,e.top),e.right=kn(i.right,e.right),e.bottom=kn(i.bottom,e.bottom),e.left=Cn(i.left,e.left),e}),Bn(t,r));return{width:n.right-n.left,height:n.bottom-n.top,x:n.left,y:n.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:o,strategy:i}=e;const a=wn(o),r=qn(o);if(o===r)return t;let n={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if((a||!a&&"fixed"!==i)&&(("body"!==An(o)||On(r))&&(n=Rn(o)),wn(o))){const e=Tn(o,!0);s.x=e.x+o.clientLeft,s.y=e.y+o.clientTop}return ga(va({},t),{x:t.x-n.scrollLeft+s.x,y:t.y-n.scrollTop+s.y})},isElement:_n,getDimensions:jn,getOffsetParent:$n,getDocumentElement:qn,getElementRects:e=>{let{reference:t,floating:o,strategy:i}=e;return{reference:Pn(t,$n(o),i),floating:ga(va({},jn(o)),{x:0,y:0})}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===xn(e).direction};function Hn(e,t,o,i){void 0===i&&(i={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:n=!0,animationFrame:s=!1}=i;let l=!1;const c=a&&!s,u=r&&!s,d=n&&!s,p=c||u?[..._n(e)?Fn(e):[],...Fn(t)]:[];p.forEach((e=>{c&&e.addEventListener("scroll",o,{passive:!0}),u&&e.addEventListener("resize",o)}));let h,m=null;d&&(m=new ResizeObserver(o),_n(e)&&m.observe(e),m.observe(t));let f=s?Tn(e):null;return s&&function t(){if(l)return;const i=Tn(e);!f||i.x===f.x&&i.y===f.y&&i.width===f.width&&i.height===f.height||o();f=i,h=requestAnimationFrame(t)}(),()=>{var e;l=!0,p.forEach((e=>{c&&e.removeEventListener("scroll",o),u&&e.removeEventListener("resize",o)})),null==(e=m)||e.disconnect(),m=null,s&&cancelAnimationFrame(h)}}var Gn=(e,t,o)=>(async(e,t,o)=>{const{placement:i="bottom",strategy:a="absolute",middleware:r=[],platform:n}=o,s=await(null==n.isRTL?void 0:n.isRTL(t));let l=await n.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:u}=an(l,i,s),d=i,p={};const h=new Set;for(let o=0;o<r.length;o++){const{name:m,fn:f}=r[o];if(h.has(m))continue;const{x:v,y:g,data:b,reset:y}=await f({x:c,y:u,initialPlacement:i,placement:d,strategy:a,middlewareData:p,rects:l,platform:n,elements:{reference:e,floating:t}});c=null!=v?v:c,u=null!=g?g:u,p=ga(va({},p),{[m]:va(va({},p[m]),b)}),y&&("object"==typeof y&&(y.placement&&(d=y.placement),y.rects&&(l=!0===y.rects?await n.getElementRects({reference:e,floating:t,strategy:a}):y.rects),({x:c,y:u}=an(l,d,s)),!1!==y.skip&&h.add(m)),o=-1)}return{x:c,y:u,placement:d,strategy:a,middlewareData:p}})(e,t,va({platform:Vn},o)),Qn=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .dropdown {
    position: relative;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__positioner {
    position: absolute;
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    color: var(--color);
    box-shadow: var(--sl-shadow-large);
    overflow: auto;
    overscroll-behavior: none;
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    pointer-events: all;
  }

  .dropdown__positioner[data-placement^='top'] .dropdown__panel {
    transform-origin: bottom;
  }

  .dropdown__positioner[data-placement^='bottom'] .dropdown__panel {
    transform-origin: top;
  }

  .dropdown__positioner[data-placement^='left'] .dropdown__panel {
    transform-origin: right;
  }

  .dropdown__positioner[data-placement^='right'] .dropdown__panel {
    transform-origin: left;
  }
`,Kn=class extends Yi{constructor(){super(...arguments),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleMenuItemActivate=this.handleMenuItemActivate.bind(this),this.handlePanelSelect=this.handlePanelSelect.bind(this),this.handleDocumentKeyDown=this.handleDocumentKeyDown.bind(this),this.handleDocumentMouseDown=this.handleDocumentMouseDown.bind(this),this.containingElement||(this.containingElement=this)}async firstUpdated(){this.panel.hidden=!this.open,this.open&&(await this.updateComplete,this.addOpenListeners(),this.startPositioner())}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide(),this.stopPositioner()}focusOnTrigger(){const e=this.trigger.querySelector("slot").assignedElements({flatten:!0})[0];"function"==typeof(null==e?void 0:e.focus)&&e.focus()}getMenu(){return this.panel.querySelector("slot").assignedElements({flatten:!0}).find((e=>"sl-menu"===e.tagName.toLowerCase()))}handleDocumentKeyDown(e){var t;if("Escape"===e.key)return this.hide(),void this.focusOnTrigger();if("Tab"===e.key){if(this.open&&"sl-menu-item"===(null==(t=document.activeElement)?void 0:t.tagName.toLowerCase()))return e.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout((()=>{var e,t,o;const i=(null==(e=this.containingElement)?void 0:e.getRootNode())instanceof ShadowRoot?null==(o=null==(t=document.activeElement)?void 0:t.shadowRoot)?void 0:o.activeElement:document.activeElement;this.containingElement&&(null==i?void 0:i.closest(this.containingElement.tagName.toLowerCase()))===this.containingElement||this.hide()}))}}handleDocumentMouseDown(e){const t=e.composedPath();this.containingElement&&!t.includes(this.containingElement)&&this.hide()}handleMenuItemActivate(e){Tr(e.target,this.panel)}handlePanelSelect(e){const t=e.target;this.stayOpenOnSelect||"sl-menu"!==t.tagName.toLowerCase()||(this.hide(),this.focusOnTrigger())}handlePopoverOptionsChange(){this.updatePositioner()}handleTriggerClick(){this.open?this.hide():this.show()}handleTriggerKeyDown(e){if("Escape"===e.key)return this.focusOnTrigger(),void this.hide();if([" ","Enter"].includes(e.key))return e.preventDefault(),void this.handleTriggerClick();const t=this.getMenu();if(t){const o=t.defaultSlot.assignedElements({flatten:!0}),i=o[0],a=o[o.length-1];["ArrowDown","ArrowUp","Home","End"].includes(e.key)&&(e.preventDefault(),this.open||this.show(),o.length>0&&requestAnimationFrame((()=>{"ArrowDown"!==e.key&&"Home"!==e.key||(t.setCurrentItem(i),i.focus()),"ArrowUp"!==e.key&&"End"!==e.key||(t.setCurrentItem(a),a.focus())})));const r=["Tab","Shift","Meta","Ctrl","Alt"];this.open&&!r.includes(e.key)&&t.typeToSelect(e)}}handleTriggerKeyUp(e){" "===e.key&&e.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const e=this.trigger.querySelector("slot").assignedElements({flatten:!0}).find((e=>Sr(e).start));let t;if(e){switch(e.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":t=e.button;break;default:t=e}t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,Ka(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,Ka(this,"sl-after-hide")}reposition(){this.updatePositioner()}addOpenListeners(){this.panel.addEventListener("sl-activate",this.handleMenuItemActivate),this.panel.addEventListener("sl-select",this.handlePanelSelect),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel.removeEventListener("sl-activate",this.handleMenuItemActivate),this.panel.removeEventListener("sl-select",this.handlePanelSelect),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled)this.open=!1;else if(this.updateAccessibleTrigger(),this.open){Qa(this,"sl-show"),this.addOpenListeners(),await Lr(this),this.startPositioner(),this.panel.hidden=!1;const{keyframes:e,options:t}=Fr(this,"dropdown.show");await Rr(this.panel,e,t),Qa(this,"sl-after-show")}else{Qa(this,"sl-hide"),this.removeOpenListeners(),await Lr(this);const{keyframes:e,options:t}=Fr(this,"dropdown.hide");await Rr(this.panel,e,t),this.panel.hidden=!0,this.stopPositioner(),Qa(this,"sl-after-hide")}}startPositioner(){this.stopPositioner(),this.updatePositioner(),this.positionerCleanup=Hn(this.trigger,this.positioner,this.updatePositioner.bind(this))}updatePositioner(){var e;this.open&&this.trigger&&this.positioner&&Gn(this.trigger,this.positioner,{placement:this.placement,middleware:[vn({mainAxis:this.distance,crossAxis:this.skidding}),fn(),gn(),(e={apply:({width:e,height:t})=>{Object.assign(this.panel.style,{maxWidth:`${e}px`,maxHeight:`${t}px`})},padding:8},void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:o,rects:i,platform:a,elements:r}=t,n=e,{apply:s}=n,l=ba(n,["apply"]),c=await sn(t,l),u=Zr(o),d=en(o);let p,h;"top"===u||"bottom"===u?(p=u,h=d===(await(null==a.isRTL?void 0:a.isRTL(r.floating))?"start":"end")?"left":"right"):(h=u,p="end"===d?"top":"bottom");const m=cn(c.left,0),f=cn(c.right,0),v=cn(c.top,0),g=cn(c.bottom,0),b={height:i.floating.height-(["left","right"].includes(o)?2*(0!==v||0!==g?v+g:cn(c.top,c.bottom)):c[p]),width:i.floating.width-(["top","bottom"].includes(o)?2*(0!==m||0!==f?m+f:cn(c.left,c.right)):c[h])};return null==s||s(va(va({},b),i)),{reset:{rects:!0}}}})],strategy:this.hoist?"fixed":"absolute"}).then((({x:e,y:t,placement:o})=>{this.positioner.setAttribute("data-placement",o),Object.assign(this.positioner.style,{position:this.hoist?"fixed":"absolute",left:`${e}px`,top:`${t}px`})}))}stopPositioner(){this.positionerCleanup&&(this.positionerCleanup(),this.positionerCleanup=void 0,this.positioner.removeAttribute("data-placement"))}render(){return Di`
      <div
        part="base"
        id="dropdown"
        class=${sa({dropdown:!0,"dropdown--open":this.open})}
      >
        <span
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
        >
          <slot name="trigger" @slotchange=${this.handleTriggerSlotChange}></slot>
        </span>

        <!-- Position the panel with a wrapper since the popover makes use of translate. This let's us add animations
        on the panel without interfering with the position. -->
        <div class="dropdown__positioner">
          <div
            part="panel"
            class="dropdown__panel"
            aria-hidden=${this.open?"false":"true"}
            aria-labelledby="dropdown"
          >
            <slot></slot>
          </div>
        </div>
      </div>
    `}};Kn.styles=Qn,ya([Oa(".dropdown__trigger")],Kn.prototype,"trigger",2),ya([Oa(".dropdown__panel")],Kn.prototype,"panel",2),ya([Oa(".dropdown__positioner")],Kn.prototype,"positioner",2),ya([wa({type:Boolean,reflect:!0})],Kn.prototype,"open",2),ya([wa({reflect:!0})],Kn.prototype,"placement",2),ya([wa({type:Boolean})],Kn.prototype,"disabled",2),ya([wa({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],Kn.prototype,"stayOpenOnSelect",2),ya([wa({attribute:!1})],Kn.prototype,"containingElement",2),ya([wa({type:Number})],Kn.prototype,"distance",2),ya([wa({type:Number})],Kn.prototype,"skidding",2),ya([wa({type:Boolean})],Kn.prototype,"hoist",2),ya([Ga("distance"),Ga("hoist"),Ga("placement"),Ga("skidding")],Kn.prototype,"handlePopoverOptionsChange",1),ya([Ga("open",{waitUntilFirstUpdate:!0})],Kn.prototype,"handleOpenChange",1),Kn=ya([xa("sl-dropdown")],Kn),zr("dropdown.show",{keyframes:[{opacity:0,transform:"scale(0.9)"},{opacity:1,transform:"scale(1)"}],options:{duration:100,easing:"ease"}}),zr("dropdown.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.9)"}],options:{duration:100,easing:"ease"}});var Wn=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this,{form:e=>{if(e.hasAttribute("form")){const t=e.getRootNode(),o=e.getAttribute("form");return t.getElementById(o)}return e.closest("form")}}),this.hasSlotController=new Ua(this,"[default]","prefix","suffix"),this.hasFocus=!1,this.variant="default",this.size="medium",this.caret=!1,this.disabled=!1,this.loading=!1,this.outline=!1,this.pill=!1,this.circle=!1,this.type="button"}click(){this.button.click()}focus(e){this.button.focus(e)}blur(){this.button.blur()}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleClick(e){if(this.disabled||this.loading)return e.preventDefault(),void e.stopPropagation();"submit"===this.type&&this.formSubmitController.submit(this)}render(){const e=!!this.href,t=e?La`a`:La`button`;return $a`
      <${t}
        part="base"
        class=${sa({button:!0,"button--default":"default"===this.variant,"button--primary":"primary"===this.variant,"button--success":"success"===this.variant,"button--neutral":"neutral"===this.variant,"button--warning":"warning"===this.variant,"button--danger":"danger"===this.variant,"button--text":"text"===this.variant,"button--small":"small"===this.size,"button--medium":"medium"===this.size,"button--large":"large"===this.size,"button--caret":this.caret,"button--circle":this.circle,"button--disabled":this.disabled,"button--focused":this.hasFocus,"button--loading":this.loading,"button--standard":!this.outline,"button--outline":this.outline,"button--pill":this.pill,"button--has-label":this.hasSlotController.test("[default]"),"button--has-prefix":this.hasSlotController.test("prefix"),"button--has-suffix":this.hasSlotController.test("suffix")})}
        ?disabled=${Ha(e?void 0:this.disabled)}
        type=${this.type}
        name=${Ha(e?void 0:this.name)}
        value=${Ha(e?void 0:this.value)}
        href=${Ha(this.href)}
        target=${Ha(this.target)}
        download=${Ha(this.download)}
        rel=${Ha(this.target?"noreferrer noopener":void 0)}
        role="button"
        aria-disabled=${this.disabled?"true":"false"}
        tabindex=${this.disabled?"-1":"0"}
        @blur=${this.handleBlur}
        @focus=${this.handleFocus}
        @click=${this.handleClick}
      >
        <span part="prefix" class="button__prefix">
          <slot name="prefix"></slot>
        </span>
        <span part="label" class="button__label">
          <slot></slot>
        </span>
        <span part="suffix" class="button__suffix">
          <slot name="suffix"></slot>
        </span>
        ${this.caret?$a`
                <span part="caret" class="button__caret">
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                </span>
              `:""}
        ${this.loading?$a`<sl-spinner></sl-spinner>`:""}
      </${t}>
    `}};Wn.styles=Da,ya([Oa(".button")],Wn.prototype,"button",2),ya([_a()],Wn.prototype,"hasFocus",2),ya([wa({reflect:!0})],Wn.prototype,"variant",2),ya([wa({reflect:!0})],Wn.prototype,"size",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"caret",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"loading",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"outline",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"pill",2),ya([wa({type:Boolean,reflect:!0})],Wn.prototype,"circle",2),ya([wa()],Wn.prototype,"type",2),ya([wa()],Wn.prototype,"name",2),ya([wa()],Wn.prototype,"value",2),ya([wa()],Wn.prototype,"href",2),ya([wa()],Wn.prototype,"target",2),ya([wa()],Wn.prototype,"download",2),ya([wa()],Wn.prototype,"form",2),ya([wa({attribute:"formaction"})],Wn.prototype,"formAction",2),ya([wa({attribute:"formmethod"})],Wn.prototype,"formMethod",2),ya([wa({attribute:"formnovalidate",type:Boolean})],Wn.prototype,"formNoValidate",2),ya([wa({attribute:"formtarget"})],Wn.prototype,"formTarget",2),Wn=ya([xa("sl-button")],Wn);var Xn=ci`
  ${Zi}

  :host {
    --track-width: 2px;
    --track-color: rgb(128 128 128 / 25%);
    --indicator-color: var(--sl-color-primary-600);
    --speed: 2s;

    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  .spinner {
    flex: 1 1 auto;
    height: 100%;
    width: 100%;
  }

  .spinner__track,
  .spinner__indicator {
    fill: none;
    stroke-width: var(--track-width);
    r: calc(0.5em - var(--track-width) / 2);
    cx: 0.5em;
    cy: 0.5em;
    transform-origin: 50% 50%;
  }

  .spinner__track {
    stroke: var(--track-color);
    transform-origin: 0% 0%;
    mix-blend-mode: multiply;
  }

  .spinner__indicator {
    stroke: var(--indicator-color);
    stroke-linecap: round;
    stroke-dasharray: 150% 75%;
    animation: spin var(--speed) linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
      stroke-dasharray: 0.01em, 2.75em;
    }

    50% {
      transform: rotate(450deg);
      stroke-dasharray: 1.375em, 1.375em;
    }

    100% {
      transform: rotate(1080deg);
      stroke-dasharray: 0.01em, 2.75em;
    }
  }
`,Yn=class extends Yi{render(){return Di`
      <svg part="base" class="spinner" role="status">
        <circle class="spinner__track"></circle>
        <circle class="spinner__indicator"></circle>
      </svg>
    `}};Yn.styles=Xn,Yn=ya([xa("sl-spinner")],Yn);var Jn=ci`
  ${Zi}

  :host {
    --divider-width: 4px;
    --divider-hit-area: 12px;
    --min: 0%;
    --max: 100%;

    display: grid;
  }

  .start,
  .end {
    overflow: hidden;
  }

  .divider {
    flex: 0 0 var(--divider-width);
    display: flex;
    position: relative;
    align-items: center;
    justify-content: center;
    background-color: var(--sl-color-neutral-200);
    color: var(--sl-color-neutral-900);
    z-index: 1;
  }

  .divider:focus {
    outline: none;
  }

  :host(:not([disabled])) .divider${Ra} {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  :host([disabled]) .divider {
    cursor: not-allowed;
  }

  /* Horizontal */
  :host(:not([vertical], [disabled])) .divider {
    cursor: col-resize;
  }

  :host(:not([vertical])) .divider::after {
    display: flex;
    content: '';
    position: absolute;
    height: 100%;
    left: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);
    width: var(--divider-hit-area);
  }

  /* Vertical */
  :host([vertical]) {
    flex-direction: column;
  }

  :host([vertical]:not([disabled])) .divider {
    cursor: row-resize;
  }

  :host([vertical]) .divider::after {
    content: '';
    position: absolute;
    width: 100%;
    top: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);
    height: var(--divider-hit-area);
  }
`;function Zn(e,t,o){return e<t?t:e>o?o:e}var es=class extends Yi{constructor(){super(...arguments),this.localize=new ar(this),this.position=50,this.vertical=!1,this.disabled=!1,this.snapThreshold=12}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver((e=>this.handleResize(e))),this.updateComplete.then((()=>this.resizeObserver.observe(this))),this.detectSize(),this.cachedPositionInPixels=this.percentageToPixels(this.position)}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.unobserve(this)}detectSize(){const{width:e,height:t}=this.getBoundingClientRect();this.size=this.vertical?t:e}percentageToPixels(e){return this.size*(e/100)}pixelsToPercentage(e){return e/this.size*100}handleDrag(e){this.disabled||(e.preventDefault(),function(e,t){function o(o){const i=e.getBoundingClientRect(),a=e.ownerDocument.defaultView,r=i.left+a.pageXOffset,n=i.top+a.pageYOffset,s=o.pageX-r,l=o.pageY-n;t(s,l)}document.addEventListener("pointermove",o,{passive:!0}),document.addEventListener("pointerup",(function e(){document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",e)}))}(this,((e,t)=>{let o=this.vertical?t:e;if("end"===this.primary&&(o=this.size-o),this.snap){this.snap.split(" ").forEach((e=>{let t;t=e.endsWith("%")?this.size*(parseFloat(e)/100):parseFloat(e),o>=t-this.snapThreshold&&o<=t+this.snapThreshold&&(o=t)}))}this.position=Zn(this.pixelsToPercentage(o),0,100)})))}handleKeyDown(e){if(!this.disabled&&["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=this.position;const o=(e.shiftKey?10:1)*("end"===this.primary?-1:1);e.preventDefault(),("ArrowLeft"===e.key&&!this.vertical||"ArrowUp"===e.key&&this.vertical)&&(t-=o),("ArrowRight"===e.key&&!this.vertical||"ArrowDown"===e.key&&this.vertical)&&(t+=o),"Home"===e.key&&(t="end"===this.primary?100:0),"End"===e.key&&(t="end"===this.primary?0:100),this.position=Zn(t,0,100)}}handlePositionChange(){this.cachedPositionInPixels=this.percentageToPixels(this.position),this.positionInPixels=this.percentageToPixels(this.position),Qa(this,"sl-reposition")}handlePositionInPixelsChange(){this.position=this.pixelsToPercentage(this.positionInPixels)}handleVerticalChange(){this.detectSize()}handleResize(e){const{width:t,height:o}=e[0].contentRect;this.size=this.vertical?o:t,this.primary&&(this.position=this.pixelsToPercentage(this.cachedPositionInPixels))}render(){const e=this.vertical?"gridTemplateRows":"gridTemplateColumns",t=this.vertical?"gridTemplateColumns":"gridTemplateRows",o=`\n      clamp(\n        0%,\n        clamp(\n          var(--min),\n          ${this.position}% - var(--divider-width) / 2,\n          var(--max)\n        ),\n        calc(100% - var(--divider-width))\n      )\n    `;return"end"===this.primary?this.style[e]=`auto var(--divider-width) ${o}`:this.style[e]=`${o} var(--divider-width) auto`,this.style[t]="",Di`
      <div part="panel start" class="start">
        <slot name="start"></slot>
      </div>

      <div
        part="divider"
        class="divider"
        tabindex=${Ha(this.disabled?void 0:"0")}
        role="separator"
        aria-label=${this.localize.term("resize")}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleDrag}
        @touchstart=${this.handleDrag}
      >
        <slot name="handle"></slot>
      </div>

      <div part="panel end" class="end">
        <slot name="end"></slot>
      </div>
    `}};es.styles=Jn,ya([Oa(".divider")],es.prototype,"divider",2),ya([wa({type:Number,reflect:!0})],es.prototype,"position",2),ya([wa({attribute:"position-in-pixels",type:Number})],es.prototype,"positionInPixels",2),ya([wa({type:Boolean,reflect:!0})],es.prototype,"vertical",2),ya([wa({type:Boolean,reflect:!0})],es.prototype,"disabled",2),ya([wa()],es.prototype,"primary",2),ya([wa()],es.prototype,"snap",2),ya([wa({type:Number,attribute:"snap-threshold"})],es.prototype,"snapThreshold",2),ya([Ga("position")],es.prototype,"handlePositionChange",1),ya([Ga("positionInPixels")],es.prototype,"handlePositionInPixelsChange",1),ya([Ga("vertical")],es.prototype,"handleVerticalChange",1),es=ya([xa("sl-split-panel")],es);var ts=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .radio {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .radio__icon {
    display: inline-flex;
    width: var(--sl-toggle-size);
    height: var(--sl-toggle-size);
  }

  .radio__icon svg {
    width: 100%;
    height: 100%;
  }

  .radio__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--sl-toggle-size);
    height: var(--sl-toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 50%;
    background-color: var(--sl-input-background-color);
    color: transparent;
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;
  }

  .radio__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .radio:not(.radio--checked):not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Focus */
  .radio:not(.radio--checked):not(.radio--disabled) .radio__input${Ra} ~ .radio__control {
    border-color: var(--sl-input-border-color-focus);
    background-color: var(--sl-input-background-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  /* Checked */
  .radio--checked .radio__control {
    color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked + hover */
  .radio.radio--checked:not(.radio--disabled) .radio__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked + focus */
  .radio.radio--checked:not(.radio--disabled) .radio__input${Ra} ~ .radio__control {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
    box-shadow: var(--sl-focus-ring);
  }

  /* Disabled */
  .radio--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* When the control isn't checked, hide the circle for Windows High Contrast mode a11y */
  .radio:not(.radio--checked) svg circle {
    opacity: 0;
  }

  .radio__label {
    line-height: var(--sl-toggle-size);
    margin-left: 0.5em;
    user-select: none;
  }
`,os=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this,{value:e=>e.checked?e.value:void 0}),this.hasFocus=!1,this.disabled=!1,this.checked=!1,this.invalid=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","radio")}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleClick(){this.disabled||(this.checked=!0)}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleCheckedChange(){this.setAttribute("aria-checked",this.checked?"true":"false"),this.hasUpdated&&Qa(this,"sl-change")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false"),this.hasUpdated&&(this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity())}render(){return Di`
      <label
        part="base"
        class=${sa({radio:!0,"radio--checked":this.checked,"radio--disabled":this.disabled,"radio--focused":this.hasFocus})}
      >
        <input
          class="radio__input"
          type="radio"
          name=${Ha(this.name)}
          value=${Ha(this.value)}
          .checked=${nr(this.checked)}
          .disabled=${this.disabled}
          @click=${this.handleClick}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
        />
        <span part="control" class="radio__control">
          <span part="checked-icon" class="radio__icon">
            <svg viewBox="0 0 16 16">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g fill="currentColor">
                  <circle cx="8" cy="8" r="3.42857143"></circle>
                </g>
              </g>
            </svg>
          </span>
        </span>

        <span part="label" class="radio__label">
          <slot></slot>
        </span>
      </label>
    `}};os.styles=ts,ya([Oa(".radio__input")],os.prototype,"input",2),ya([_a()],os.prototype,"hasFocus",2),ya([wa()],os.prototype,"name",2),ya([wa()],os.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],os.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],os.prototype,"checked",2),ya([wa({type:Boolean,reflect:!0})],os.prototype,"invalid",2),ya([Ga("checked")],os.prototype,"handleCheckedChange",1),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],os.prototype,"handleDisabledChange",1),os=ya([xa("sl-radio")],os);var is=ci`
  ${Zi}

  :host {
    display: block;
  }

  .details {
    border: solid 1px var(--sl-color-neutral-200);
    border-radius: var(--sl-border-radius-medium);
    background-color: var(--sl-color-neutral-0);
    overflow-anchor: none;
  }

  .details--disabled {
    opacity: 0.5;
  }

  .details__header {
    display: flex;
    align-items: center;
    border-radius: inherit;
    padding: var(--sl-spacing-medium);
    user-select: none;
    cursor: pointer;
  }

  .details__header:focus {
    outline: none;
  }

  .details__header${Ra} {
    box-shadow: var(--sl-focus-ring);
  }

  .details--disabled .details__header {
    cursor: not-allowed;
  }

  .details--disabled .details__header${Ra} {
    outline: none;
    box-shadow: none;
  }

  .details__summary {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
  }

  .details__summary-icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    transition: var(--sl-transition-medium) transform ease;
  }

  .details--open .details__summary-icon {
    transform: rotate(90deg);
  }

  .details__body {
    overflow: hidden;
  }

  .details__content {
    padding: var(--sl-spacing-medium);
  }
`,as=class extends Yi{constructor(){super(...arguments),this.open=!1,this.disabled=!1}firstUpdated(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}async show(){if(!this.open&&!this.disabled)return this.open=!0,Ka(this,"sl-after-show")}async hide(){if(this.open&&!this.disabled)return this.open=!1,Ka(this,"sl-after-hide")}handleSummaryClick(){this.disabled||(this.open?this.hide():this.show(),this.header.focus())}handleSummaryKeyDown(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.open?this.hide():this.show()),"ArrowUp"!==e.key&&"ArrowLeft"!==e.key||(e.preventDefault(),this.hide()),"ArrowDown"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this.show())}async handleOpenChange(){if(this.open){Qa(this,"sl-show"),await Lr(this.body),this.body.hidden=!1;const{keyframes:e,options:t}=Fr(this,"details.show");await Rr(this.body,Mr(e,this.body.scrollHeight),t),this.body.style.height="auto",Qa(this,"sl-after-show")}else{Qa(this,"sl-hide"),await Lr(this.body);const{keyframes:e,options:t}=Fr(this,"details.hide");await Rr(this.body,Mr(e,this.body.scrollHeight),t),this.body.hidden=!0,this.body.style.height="auto",Qa(this,"sl-after-hide")}}render(){return Di`
      <div
        part="base"
        class=${sa({details:!0,"details--open":this.open,"details--disabled":this.disabled})}
      >
        <header
          part="header"
          id="header"
          class="details__header"
          role="button"
          aria-expanded=${this.open?"true":"false"}
          aria-controls="content"
          aria-disabled=${this.disabled?"true":"false"}
          tabindex=${this.disabled?"-1":"0"}
          @click=${this.handleSummaryClick}
          @keydown=${this.handleSummaryKeyDown}
        >
          <div part="summary" class="details__summary">
            <slot name="summary">${this.summary}</slot>
          </div>

          <span part="summary-icon" class="details__summary-icon">
            <sl-icon name="chevron-right" library="system"></sl-icon>
          </span>
        </header>

        <div class="details__body">
          <div part="content" id="content" class="details__content" role="region" aria-labelledby="header">
            <slot></slot>
          </div>
        </div>
      </div>
    `}};as.styles=is,ya([Oa(".details")],as.prototype,"details",2),ya([Oa(".details__header")],as.prototype,"header",2),ya([Oa(".details__body")],as.prototype,"body",2),ya([wa({type:Boolean,reflect:!0})],as.prototype,"open",2),ya([wa()],as.prototype,"summary",2),ya([wa({type:Boolean,reflect:!0})],as.prototype,"disabled",2),ya([Ga("open",{waitUntilFirstUpdate:!0})],as.prototype,"handleOpenChange",1),as=ya([xa("sl-details")],as),zr("details.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:250,easing:"linear"}}),zr("details.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:250,easing:"linear"}});var rs=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .checkbox {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .checkbox__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--sl-toggle-size);
    height: var(--sl-toggle-size);
    border: solid var(--sl-input-border-width) var(--sl-input-border-color);
    border-radius: 2px;
    background-color: var(--sl-input-background-color);
    color: var(--sl-color-neutral-0);
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;
  }

  .checkbox__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  .checkbox__control .checkbox__icon {
    display: inline-flex;
    width: var(--sl-toggle-size);
    height: var(--sl-toggle-size);
  }

  .checkbox__control .checkbox__icon svg {
    width: 100%;
    height: 100%;
  }

  /* Hover */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-input-border-color-hover);
    background-color: var(--sl-input-background-color-hover);
  }

  /* Focus */
  .checkbox:not(.checkbox--checked):not(.checkbox--disabled)
    .checkbox__input${Ra}
    ~ .checkbox__control {
    border-color: var(--sl-input-border-color-focus);
    background-color: var(--sl-input-background-color-focus);
    box-shadow: var(--sl-focus-ring);
  }

  /* Checked/indeterminate */
  .checkbox--checked .checkbox__control,
  .checkbox--indeterminate .checkbox__control {
    border-color: var(--sl-color-primary-600);
    background-color: var(--sl-color-primary-600);
  }

  /* Checked/indeterminate + hover */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
  }

  /* Checked/indeterminate + focus */
  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__input${Ra} ~ .checkbox__control,
  .checkbox.checkbox--indeterminate:not(.checkbox--disabled)
    .checkbox__input${Ra}
    ~ .checkbox__control {
    border-color: var(--sl-color-primary-500);
    background-color: var(--sl-color-primary-500);
    box-shadow: var(--sl-focus-ring);
  }

  /* Disabled */
  .checkbox--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .checkbox__label {
    line-height: var(--sl-toggle-size);
    margin-left: 0.5em;
    user-select: none;
  }
`,ns=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this,{value:e=>e.checked?e.value:void 0}),this.hasFocus=!1,this.disabled=!1,this.required=!1,this.checked=!1,this.indeterminate=!1,this.invalid=!1}firstUpdated(){this.invalid=!this.input.checkValidity()}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}handleClick(){this.checked=!this.checked,this.indeterminate=!1,Qa(this,"sl-change")}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleStateChange(){this.invalid=!this.input.checkValidity()}render(){return Di`
      <label
        part="base"
        class=${sa({checkbox:!0,"checkbox--checked":this.checked,"checkbox--disabled":this.disabled,"checkbox--focused":this.hasFocus,"checkbox--indeterminate":this.indeterminate})}
      >
        <input
          class="checkbox__input"
          type="checkbox"
          name=${Ha(this.name)}
          value=${Ha(this.value)}
          .indeterminate=${nr(this.indeterminate)}
          .checked=${nr(this.checked)}
          .disabled=${this.disabled}
          .required=${this.required}
          aria-checked=${this.checked?"true":"false"}
          @click=${this.handleClick}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
        />

        <span part="control" class="checkbox__control">
          ${this.checked?Di`
                <span part="checked-icon" class="checkbox__icon">
                  <svg viewBox="0 0 16 16">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                      <g stroke="currentColor" stroke-width="2">
                        <g transform="translate(3.428571, 3.428571)">
                          <path d="M0,5.71428571 L3.42857143,9.14285714"></path>
                          <path d="M9.14285714,0 L3.42857143,9.14285714"></path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </span>
              `:""}
          ${!this.checked&&this.indeterminate?Di`
                <span part="indeterminate-icon" class="checkbox__icon">
                  <svg viewBox="0 0 16 16">
                    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">
                      <g stroke="currentColor" stroke-width="2">
                        <g transform="translate(2.285714, 6.857143)">
                          <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>
                        </g>
                      </g>
                    </g>
                  </svg>
                </span>
              `:""}
        </span>

        <span part="label" class="checkbox__label">
          <slot></slot>
        </span>
      </label>
    `}};ns.styles=rs,ya([Oa('input[type="checkbox"]')],ns.prototype,"input",2),ya([_a()],ns.prototype,"hasFocus",2),ya([wa()],ns.prototype,"name",2),ya([wa()],ns.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],ns.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],ns.prototype,"required",2),ya([wa({type:Boolean,reflect:!0})],ns.prototype,"checked",2),ya([wa({type:Boolean,reflect:!0})],ns.prototype,"indeterminate",2),ya([wa({type:Boolean,reflect:!0})],ns.prototype,"invalid",2),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],ns.prototype,"handleDisabledChange",1),ya([Ga("checked",{waitUntilFirstUpdate:!0}),Ga("indeterminate",{waitUntilFirstUpdate:!0})],ns.prototype,"handleStateChange",1),ns=ya([xa("sl-checkbox")],ns);var ss=ci`
  ${Zi}

  :host {
    --height: var(--sl-toggle-size);
    --thumb-size: calc(var(--sl-toggle-size) + 4px);
    --width: calc(var(--height) * 2);

    display: inline-block;
  }

  .switch {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-input-font-family);
    font-size: var(--sl-input-font-size-medium);
    font-weight: var(--sl-input-font-weight);
    color: var(--sl-input-color);
    vertical-align: middle;
    cursor: pointer;
  }

  .switch__control {
    flex: 0 0 auto;
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: var(--width);
    height: var(--height);
    background-color: var(--sl-color-neutral-400);
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    border-radius: var(--height);
    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color;
  }

  .switch__control .switch__thumb {
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--sl-color-neutral-0);
    border-radius: 50%;
    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);
    transform: translateX(calc((var(--width) - var(--height)) / -2));
    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) background-color,
      var(--sl-transition-fast) border-color, var(--sl-transition-fast) box-shadow;
  }

  .switch__input {
    position: absolute;
    opacity: 0;
    padding: 0;
    margin: 0;
    pointer-events: none;
  }

  /* Hover */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-neutral-400);
  }

  /* Focus */
  .switch:not(.switch--checked):not(.switch--disabled) .switch__input${Ra} ~ .switch__control {
    background-color: var(--sl-color-neutral-400);
    border-color: var(--sl-color-neutral-400);
  }

  .switch:not(.switch--checked):not(.switch--disabled)
    .switch__input${Ra}
    ~ .switch__control
    .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    box-shadow: var(--sl-focus-ring);
  }

  /* Checked */
  .switch--checked .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch--checked .switch__control .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    transform: translateX(calc((var(--width) - var(--height)) / 2));
  }

  /* Checked + hover */
  .switch.switch--checked:not(.switch--disabled) .switch__control:hover {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
  }

  /* Checked + focus */
  .switch.switch--checked:not(.switch--disabled) .switch__input${Ra} ~ .switch__control {
    background-color: var(--sl-color-primary-600);
    border-color: var(--sl-color-primary-600);
  }

  .switch.switch--checked:not(.switch--disabled)
    .switch__input${Ra}
    ~ .switch__control
    .switch__thumb {
    background-color: var(--sl-color-neutral-0);
    border-color: var(--sl-color-primary-600);
    box-shadow: var(--sl-focus-ring);
  }

  /* Disabled */
  .switch--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .switch__label {
    line-height: var(--height);
    margin-left: 0.5em;
    user-select: none;
  }
`,ls=class extends Yi{constructor(){super(...arguments),this.formSubmitController=new Ba(this,{value:e=>e.checked?e.value:void 0}),this.hasFocus=!1,this.disabled=!1,this.required=!1,this.checked=!1,this.invalid=!1}firstUpdated(){this.invalid=!this.input.checkValidity()}click(){this.input.click()}focus(e){this.input.focus(e)}blur(){this.input.blur()}reportValidity(){return this.input.reportValidity()}setCustomValidity(e){this.input.setCustomValidity(e),this.invalid=!this.input.checkValidity()}handleBlur(){this.hasFocus=!1,Qa(this,"sl-blur")}handleCheckedChange(){this.input.checked=this.checked,this.invalid=!this.input.checkValidity()}handleClick(){this.checked=!this.checked,Qa(this,"sl-change")}handleDisabledChange(){this.input.disabled=this.disabled,this.invalid=!this.input.checkValidity()}handleFocus(){this.hasFocus=!0,Qa(this,"sl-focus")}handleKeyDown(e){"ArrowLeft"===e.key&&(e.preventDefault(),this.checked=!1,Qa(this,"sl-change")),"ArrowRight"===e.key&&(e.preventDefault(),this.checked=!0,Qa(this,"sl-change"))}render(){return Di`
      <label
        part="base"
        class=${sa({switch:!0,"switch--checked":this.checked,"switch--disabled":this.disabled,"switch--focused":this.hasFocus})}
      >
        <input
          class="switch__input"
          type="checkbox"
          name=${Ha(this.name)}
          value=${Ha(this.value)}
          .checked=${nr(this.checked)}
          .disabled=${this.disabled}
          .required=${this.required}
          role="switch"
          aria-checked=${this.checked?"true":"false"}
          @click=${this.handleClick}
          @blur=${this.handleBlur}
          @focus=${this.handleFocus}
          @keydown=${this.handleKeyDown}
        />

        <span part="control" class="switch__control">
          <span part="thumb" class="switch__thumb"></span>
        </span>

        <span part="label" class="switch__label">
          <slot></slot>
        </span>
      </label>
    `}};ls.styles=ss,ya([Oa('input[type="checkbox"]')],ls.prototype,"input",2),ya([_a()],ls.prototype,"hasFocus",2),ya([wa()],ls.prototype,"name",2),ya([wa()],ls.prototype,"value",2),ya([wa({type:Boolean,reflect:!0})],ls.prototype,"disabled",2),ya([wa({type:Boolean,reflect:!0})],ls.prototype,"required",2),ya([wa({type:Boolean,reflect:!0})],ls.prototype,"checked",2),ya([wa({type:Boolean,reflect:!0})],ls.prototype,"invalid",2),ya([Ga("checked",{waitUntilFirstUpdate:!0})],ls.prototype,"handleCheckedChange",1),ya([Ga("disabled",{waitUntilFirstUpdate:!0})],ls.prototype,"handleDisabledChange",1),ls=ya([xa("sl-switch")],ls);var cs=ci`
  ${Zi}

  :host {
    --max-width: 20rem;
    --hide-delay: 0ms;
    --show-delay: 150ms;

    display: contents;
  }

  .tooltip-target {
    display: contents;
  }

  .tooltip-positioner {
    position: absolute;
    z-index: var(--sl-z-index-tooltip);
    pointer-events: none;
  }

  .tooltip-positioner[data-placement^='top'] .tooltip {
    transform-origin: bottom;
  }

  .tooltip-positioner[data-placement^='bottom'] .tooltip {
    transform-origin: top;
  }

  .tooltip-positioner[data-placement^='left'] .tooltip {
    transform-origin: right;
  }

  .tooltip-positioner[data-placement^='right'] .tooltip {
    transform-origin: left;
  }

  .tooltip__content {
    max-width: var(--max-width);
    border-radius: var(--sl-tooltip-border-radius);
    background-color: var(--sl-tooltip-background-color);
    font-family: var(--sl-tooltip-font-family);
    font-size: var(--sl-tooltip-font-size);
    font-weight: var(--sl-tooltip-font-weight);
    line-height: var(--sl-tooltip-line-height);
    color: var(--sl-tooltip-color);
    padding: var(--sl-tooltip-padding);
  }

  .tooltip__arrow {
    position: absolute;
    background: var(--sl-tooltip-background-color);
    width: calc(var(--sl-tooltip-arrow-size) * 2);
    height: calc(var(--sl-tooltip-arrow-size) * 2);
    transform: rotate(45deg);
    z-index: -1;
  }
`,us=class extends Yi{constructor(){super(...arguments),this.content="",this.placement="top",this.disabled=!1,this.distance=10,this.open=!1,this.skidding=0,this.trigger="hover focus",this.hoist=!1}connectedCallback(){super.connectedCallback(),this.handleBlur=this.handleBlur.bind(this),this.handleClick=this.handleClick.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleMouseOver=this.handleMouseOver.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.updateComplete.then((()=>{this.addEventListener("blur",this.handleBlur,!0),this.addEventListener("focus",this.handleFocus,!0),this.addEventListener("click",this.handleClick),this.addEventListener("keydown",this.handleKeyDown),this.addEventListener("mouseover",this.handleMouseOver),this.addEventListener("mouseout",this.handleMouseOut),this.target=this.getTarget()}))}async firstUpdated(){this.tooltip.hidden=!this.open,this.open&&(await this.updateComplete,this.updatePositioner())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("blur",this.handleBlur,!0),this.removeEventListener("focus",this.handleFocus,!0),this.removeEventListener("click",this.handleClick),this.removeEventListener("keydown",this.handleKeyDown),this.removeEventListener("mouseover",this.handleMouseOver),this.removeEventListener("mouseout",this.handleMouseOut),this.stopPositioner()}async show(){if(!this.open)return this.open=!0,Ka(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,Ka(this,"sl-after-hide")}getTarget(){const e=[...this.children].find((e=>"style"!==e.tagName.toLowerCase()&&"content"!==e.getAttribute("slot")));if(!e)throw new Error("Invalid tooltip target: no child element was found.");return e}handleBlur(){this.hasTrigger("focus")&&this.hide()}handleClick(){this.hasTrigger("click")&&(this.open?this.hide():this.show())}handleFocus(){this.hasTrigger("focus")&&this.show()}handleKeyDown(e){this.open&&"Escape"===e.key&&(e.stopPropagation(),this.hide())}handleMouseOver(){if(this.hasTrigger("hover")){const e=Dr(getComputedStyle(this).getPropertyValue("--show-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout((()=>{this.show()}),e)}}handleMouseOut(){if(this.hasTrigger("hover")){const e=Dr(getComputedStyle(this).getPropertyValue("--hide-delay"));clearTimeout(this.hoverTimeout),this.hoverTimeout=window.setTimeout((()=>{this.hide()}),e)}}async handleOpenChange(){if(!this.disabled)if(this.open){Qa(this,"sl-show"),await Lr(this.tooltip),this.startPositioner(),this.tooltip.hidden=!1;const{keyframes:e,options:t}=Fr(this,"tooltip.show");await Rr(this.tooltip,e,t),Qa(this,"sl-after-show")}else{Qa(this,"sl-hide"),await Lr(this.tooltip);const{keyframes:e,options:t}=Fr(this,"tooltip.hide");await Rr(this.tooltip,e,t),this.tooltip.hidden=!0,this.stopPositioner(),Qa(this,"sl-after-hide")}}handleOptionsChange(){this.updatePositioner()}handleDisabledChange(){this.disabled&&this.open&&this.hide()}hasTrigger(e){return this.trigger.split(" ").includes(e)}startPositioner(){this.stopPositioner(),this.updatePositioner(),this.positionerCleanup=Hn(this.target,this.positioner,this.updatePositioner.bind(this))}updatePositioner(){var e;this.open&&this.target&&this.positioner&&Gn(this.target,this.positioner,{placement:this.placement,middleware:[vn({mainAxis:this.distance,crossAxis:this.skidding}),fn(),gn(),(e={element:this.arrow,padding:10},{name:"arrow",options:e,async fn(t){const{element:o,padding:i=0}=null!=e?e:{},{x:a,y:r,placement:n,rects:s,platform:l}=t;if(null==o)return{};const c=rn(i),u={x:a,y:r},d=tn(n),p=on(d),h=await l.getDimensions(o),m="y"===d?"top":"left",f="y"===d?"bottom":"right",v=s.reference[p]+s.reference[d]-u[d]-s.floating[p],g=u[d]-s.reference[d],b=await(null==l.getOffsetParent?void 0:l.getOffsetParent(o)),y=b?"y"===d?b.clientHeight||0:b.clientWidth||0:0,x=v/2-g/2,A=c[m],w=y-h[p]-c[f],_=y/2-h[p]/2+x,E=un(A,_,w);return{data:{[d]:E,centerOffset:_-E}}}})],strategy:this.hoist?"fixed":"absolute"}).then((({x:e,y:t,middlewareData:o,placement:i})=>{const a=o.arrow.x,r=o.arrow.y,n={top:"bottom",right:"left",bottom:"top",left:"right"}[i.split("-")[0]];this.positioner.setAttribute("data-placement",i),Object.assign(this.positioner.style,{position:this.hoist?"fixed":"absolute",left:`${e}px`,top:`${t}px`}),Object.assign(this.arrow.style,{left:"number"==typeof a?`${a}px`:"",top:"number"==typeof r?`${r}px`:"",right:"",bottom:"",[n]:"calc(var(--sl-tooltip-arrow-size) * -1)"})}))}stopPositioner(){this.positionerCleanup&&(this.positionerCleanup(),this.positionerCleanup=void 0,this.positioner.removeAttribute("data-placement"))}render(){return Di`
      <div class="tooltip-target" aria-describedby="tooltip">
        <slot></slot>
      </div>

      <div class="tooltip-positioner">
        <div
          part="base"
          id="tooltip"
          class=${sa({tooltip:!0,"tooltip--open":this.open})}
          role="tooltip"
          aria-hidden=${this.open?"false":"true"}
        >
          <div class="tooltip__arrow"></div>
          <div class="tooltip__content" aria-live=${this.open?"polite":"off"}>
            <slot name="content"> ${this.content} </slot>
          </div>
        </div>
      </div>
    `}};us.styles=cs,ya([Oa(".tooltip-positioner")],us.prototype,"positioner",2),ya([Oa(".tooltip")],us.prototype,"tooltip",2),ya([Oa(".tooltip__arrow")],us.prototype,"arrow",2),ya([wa()],us.prototype,"content",2),ya([wa()],us.prototype,"placement",2),ya([wa({type:Boolean,reflect:!0})],us.prototype,"disabled",2),ya([wa({type:Number})],us.prototype,"distance",2),ya([wa({type:Boolean,reflect:!0})],us.prototype,"open",2),ya([wa({type:Number})],us.prototype,"skidding",2),ya([wa()],us.prototype,"trigger",2),ya([wa({type:Boolean})],us.prototype,"hoist",2),ya([Ga("open",{waitUntilFirstUpdate:!0})],us.prototype,"handleOpenChange",1),ya([Ga("content"),Ga("distance"),Ga("hoist"),Ga("placement"),Ga("skidding")],us.prototype,"handleOptionsChange",1),ya([Ga("disabled")],us.prototype,"handleDisabledChange",1),us=ya([xa("sl-tooltip")],us),zr("tooltip.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:150,easing:"ease"}}),zr("tooltip.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:150,easing:"ease"}});var ds=ci`
  ${Zi}

  :host {
    --border-color: var(--sl-color-neutral-200);
    --border-radius: var(--sl-border-radius-medium);
    --border-width: 1px;
    --padding: var(--sl-spacing-large);

    display: inline-block;
  }

  .card {
    display: flex;
    flex-direction: column;
    background-color: var(--sl-panel-background-color);
    box-shadow: var(--sl-shadow-x-small);
    border: solid var(--border-width) var(--border-color);
    border-radius: var(--border-radius);
  }

  .card__image {
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    margin: calc(-1 * var(--border-width));
    overflow: hidden;
  }

  .card__image ::slotted(img) {
    display: block;
    width: 100%;
  }

  .card:not(.card--has-image) .card__image {
    display: none;
  }

  .card__header {
    border-bottom: solid var(--border-width) var(--border-color);
    padding: calc(var(--padding) / 2) var(--padding);
  }

  .card:not(.card--has-header) .card__header {
    display: none;
  }

  .card__body {
    padding: var(--padding);
  }

  .card--has-footer .card__footer {
    border-top: solid var(--border-width) var(--border-color);
    padding: var(--padding);
  }

  .card:not(.card--has-footer) .card__footer {
    display: none;
  }
`,ps=class extends Yi{constructor(){super(...arguments),this.hasSlotController=new Ua(this,"footer","header","image")}render(){return Di`
      <div
        part="base"
        class=${sa({card:!0,"card--has-footer":this.hasSlotController.test("footer"),"card--has-image":this.hasSlotController.test("image"),"card--has-header":this.hasSlotController.test("header")})}
      >
        <div part="image" class="card__image">
          <slot name="image"></slot>
        </div>

        <div part="header" class="card__header">
          <slot name="header"></slot>
        </div>

        <div part="body" class="card__body">
          <slot></slot>
        </div>

        <div part="footer" class="card__footer">
          <slot name="footer"></slot>
        </div>
      </div>
    `}};ps.styles=ds,ps=ya([xa("sl-card")],ps);const hs=Quill.import("delta");const ms=()=>{let e="";for(let t=0;t<32;t++){const o=16*Math.random()|0;e+=(8===t||12===t||16===t||20===t?"-":"")+(12===t?4:16===t?3&o|8:o).toString(16)}return e},fs=Quill.import("delta"),vs=Quill.import("parchment"),gs=Quill.import("core/module"),bs=Quill.import("blots/inline"),ys=Quill.import("modules/keyboard");class xs{static valueToAttributes(e,t){if(!e)return;const o=e.split("|");t.setAttribute("usuario",o[0]),t.setAttribute("date",o[1]),t.setAttribute("title","Revisão de "+o[0]+" em "+this.formatDDMMYYYYAndTime(new Date(o[1]))),t.setAttribute("id-revisao",o[2])}static formats(e){if((null==e?void 0:e.hasAttribute("usuario"))&&(null==e?void 0:e.hasAttribute("date")))return[e.getAttribute("usuario"),e.getAttribute("date"),e.getAttribute("id-revisao")].join("|")}static padTo2Digits(e){return e.toString().padStart(2,"0")}static formatDate(e){return[e.getFullYear(),xs.padTo2Digits(e.getMonth()+1),xs.padTo2Digits(e.getDate())].join("-")+" "+[xs.padTo2Digits(e.getHours()),xs.padTo2Digits(e.getMinutes()),"00"].join(":")}static formatDDMMYYYYAndTime(e){return`${[this.padTo2Digits(e.getDate()),this.padTo2Digits(e.getMonth()+1),e.getFullYear()].join("/")} ${[this.padTo2Digits(e.getHours()),this.padTo2Digits(e.getMinutes())].join(":")}`}}class As extends bs{static create(e){let t=super.create();return xs.valueToAttributes(e,t),t}static formats(e){return xs.formats(e)}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);xs.valueToAttributes(t,this.domNode)}}As.blotName="revisionBaseFormat",As.tagName="";class ws extends As{}ws.blotName="added",ws.tagName="ins";class _s extends As{}_s.blotName="removed",_s.tagName="del";class Es extends ys{listen(){this.quill.root.addEventListener("keydown",this.onKeyDown.bind(this)),super.listen()}onKeyDown(e){var t,o,i,a;(null===(o=null===(t=this.quill)||void 0===t?void 0:t.revisao)||void 0===o?void 0:o.gerenciarKeydown)&&(null===(a=null===(i=this.quill)||void 0===i?void 0:i.revisao)||void 0===a?void 0:a.emRevisao)&&this.quill.revisao.handleKeyDown(e)}}class Os extends gs{constructor(e,t){var o,i,a;if(super(e,t),this.ignorarEventoTextChange=!1,this.emRevisao=!1,this.gerenciarKeydown=!0,this.isAbrindoTexto=!1,this.quill=e,this.options=t,t&&Object.keys(t).length&&(this.usuario=t.usuario,this.emRevisao=null!==(o=t.emRevisao)&&void 0!==o&&o,this.gerenciarKeydown=null===(i=t.gerenciarKeydown)||void 0===i||i,this.tableModule=t.tableModule,this.tableTrick=t.tableTrick,this.quill.revisao=this,this.addClipboardMatcher(),this.addKeyboardBindings(this.quill),this.quill.on("text-change",this.onTextChange.bind(this)),this.quill.root.addEventListener("click",this.tratarClick.bind(this)),this.tableModule)){(null===(a=this.quill)||void 0===a?void 0:a.getModule("toolbar")).addHandler("table",(e=>{var t;const o=this.quill;return(!((e="")=>e.includes("newtable_"))(e)||!(e=>e&&e.getSelection(!0)&&e.getFormat(e.getSelection(!0)).td)(o))&&(null===(t=null==o?void 0:o.revisao)||void 0===t||t.setIgnorarEventoTextChange(!0),this.tableTrick.table_handler(e,o))}))}}static register(){Quill.register("modules/keyboard",Es,!0),Quill.register(ws,!0),Quill.register(_s,!0)}isTagRevisao(e){const t="string"==typeof e?e:null==e?void 0:e.tagName;return["INS","DEL"].includes(t)}getTagRevisaoMaisProxima(e){return!e||["BODY","HTML"].includes(e.tagName)?null:this.isTagRevisao(e)?e:this.getTagRevisaoMaisProxima(e.parentNode)}tratarClick(e){const t=this.getTagRevisaoMaisProxima(e.target);t&&this.mostrarTooltipRevisao(t)}revisarTodos(e){this.revisar(this.getRevisoes(),e,!0)}revisar(e,t,o=!1){this.emRevisao&&(e.filter((e=>this.isTagRevisao(e))).forEach((e=>{const o="INS"===e.tagName,i=Quill.find(e);if(this.ignorarEventoTextChange=!0,null!==i)if(t&&!o||!t&&o){const e=this.quill.getIndex(i),t=i.length();this.quill.updateContents((new fs).retain(e).delete(t),"user")}else i.format(o?"added":"removed",!1,"user")})),o&&this.getRevisoes().length>0&&this.revisar(this.getRevisoes(),t))}padTo2Digits(e){return e.toString().padStart(2,"0")}mostrarTooltipRevisao(e){if(!e)return;const t=document.createElement("div");t.classList.add("tooltip-revisao");const o=new Date(e.getAttribute("date")||"");t.innerHTML=`\n        <style>\n        .tooltip-revisao {\n          position: absolute;\n          border: 1px solid black;\n          background-color: white;\n          padding: 10px;\n          border-radius: 4px;\n          z-index: 9999;\n          font-size: 0.9rem;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          max-width: 300px;\n          transition: all 0.3s ease-in-out;\n        }\n        .tooltip-revisao__actions {\n          display: flex;\n          flex-direction: row;\n          gap: 0.5rem;\n          align-items: center;\n          justify-content: center;\n        }\n        .tooltip-revisao__actions button {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border: 1px solid #ccc;\n          border-radius: 15px;\n          background-color: #eee;\n          cursor: pointer;\n          padding: 0;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao__actions svg {\n          fill: currentColor;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao button:hover {\n          background-color: #ddd;\n        }\n        .tooltip-revisao button:active {\n          background-color: #ccc;\n        }\n        .tooltip-revisao__body {\n          display: flex;\n          flex-direction: row;\n          gap: 1rem;\n        }\n        .tooltip-revisao__autor {\n          font-weight: bold;\n        }\n        .tooltip-revisao__data {\n          font-size: 0.8rem;\n          color: #666;\n        }\n      </style>\n      <div class="tooltip-revisao__body" role="tooltip">\n        <div>\n          <div class="tooltip-revisao__autor">${e.getAttribute("usuario")}</div>\n          <div class="tooltip-revisao__data">${xs.formatDDMMYYYYAndTime(o)}</div>\n        </div>\n        <div class="tooltip-revisao__actions">\n          <button id="button-rejeitar-revisao" aria-label="Rejeitar revisão" title="Rejeitar revisão">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n              <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>\n            </svg>\n          </button>\n          <button id="button-aceitar-revisao" aria-label="Aceitar revisão" title="Aceitar revisão">\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">\n              <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n      `,t.style.opacity="0",document.body.appendChild(t);const i=(t,o)=>{const i=[...this.quill.root.querySelectorAll(`${e.tagName}[id-revisao="${e.getAttribute("id-revisao")}"]`)];this.revisar(i,o),a(t)};t.querySelector("#button-rejeitar-revisao").addEventListener("click",(e=>i(e,!1))),t.querySelector("#button-aceitar-revisao").addEventListener("click",(e=>i(e,!0))),this.ajustaPosicaoTooltip(t,e);const a=e=>{("click"===e.type||"keydown"===e.type&&"Escape"===e.key)&&r(),setTimeout((()=>this.quill.root.focus()),0)},r=()=>{t.style.opacity="0",setTimeout((()=>{t.remove(),document.removeEventListener("click",a),document.removeEventListener("keydown",a)}),300)};setTimeout((()=>{document.addEventListener("click",a),document.addEventListener("keydown",a),t.style.opacity="1"}),0),window.addEventListener("resize",(()=>this.ajustaPosicaoTooltip(t,e)))}ajustaPosicaoTooltip(e,t){const o=t.getBoundingClientRect();let i=o.top-e.clientHeight-10;i<window.scrollY&&(i=o.bottom+10),e.style.top=`${i+window.scrollY}px`;let a=o.left+o.width/2-e.clientWidth/2;a+e.clientWidth>window.innerWidth?a=window.innerWidth-e.clientWidth-10:a<0&&(a=10),e.style.left=`${a+window.scrollX}px`}createTooltip(){Array.from(this.querySelectorAll("#tooltipAcceptRefuse")).forEach((e=>this.removeChild(e)));const e=document.createElement("tooltip");e.id="tooltipAcceptRefuse",document.body.appendChild(e),document.createRange().createContextualFragment('\n    <style>\n    .tooltip {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n    }\n\n    .tooltip .tooltiptext {\n      display: none;\n      width: 120px;\n      background-color: #333;\n      color: #fff;\n      text-align: center;\n      border-radius: 6px;\n      padding: 5px;\n      position: absolute;\n      z-index: 1;\n      top: calc(100% + 5px);\n      left: 50%;\n      margin-left: -60px;\n    }\n\n    </style>\n    <div class="tooltip" id="tooltip">\n      Hover sobre mim\n      <span class="tooltiptext" id="tooltipContent">\n        <button onclick="botaoClicado(1)">Botão 1</button>\n        <button onclick="botaoClicado(2)">Botão 2</button>\n      </span>\n    </div>\n\n    <sl-button slot="footer" variant="primary">Fechar</sl-button>\n  ')}handleKeyDown(e){}addClipboardMatcher(){this.quill.clipboard.addMatcher("DEL",((e,t)=>{if(this.isAbrindoTexto)return console.log("abrindo texto"),t;{let o=vs.query(e);if(null==o||"removed"!==o.blotName)return t;const i=ms(),a=t.ops.reduce(((e,t)=>(t.insert&&(delete t.attributes.background,delete t.attributes.removed,this.emRevisao&&(t.attributes.added=this.buildAttributes(i)),e.push(t)),e)),[]);return new fs(a)}}))}addKeyboardBindings(e){function t(t,o,i){e.keyboard.addBinding(t,o,i);const a=Object.keys(e.keyboard.bindings).map((t=>e.keyboard.bindings[t])).flat().find((e=>e.handler===i)).key,r=(e.keyboard.bindings[a]||[]).pop();e.keyboard.bindings[a].unshift(r)}t({key:"Backspace"},null,((e,t)=>this.handleRemove(e,t,"Backspace"))),t({key:"Delete"},null,((e,t)=>this.handleRemove(e,t,"Delete"))),t({key:"z",shortKey:!0},null,((e,t)=>this.handleUndo(e,t))),t({key:"z",shortKey:!0,shiftKey:!0},null,((e,t)=>this.handleRedo(e,t))),t({key:"y",shortKey:!0},null,((e,t)=>this.handleRedo(e,t)))}handleUndo(e,t){const o=this.quill.getModule("table")&&this.tableModule;if(this.emRevisao&&(this.ignorarEventoTextChange=!0),o)return this.tableModule.keyboardHandler(this.quill,"undo",e,t);this.quill.history.undo()}handleRedo(e,t){const o=this.quill.getModule("table")&&this.tableModule;if(this.emRevisao&&(this.ignorarEventoTextChange=!0),o)return this.tableModule.keyboardHandler(this.quill,"redo",e,t);this.quill.history.redo()}buildAttributes(e=""){return this.usuario+"|"+xs.formatDate(new Date)+" |"+e}handleRemove(e,t,o){const i="Delete"===o?1:-1,a=this.quill;if(this.emRevisao){const t=a.getLeaf(e.index)[0],o=["image"].includes(t.statics.blotName),r=!t.text&&!o||-1!==i||e.length?e.index:e.index-1;let n=r;if(r<0||r>=a.getLength())return!0;const s=a.getContents(r,e.length||1),l=ms(),c=s.ops.reduce(((e,a)=>{var r,s;const c="string"==typeof a.insert?a.insert.length:1;return(null===(r=a.attributes)||void 0===r?void 0:r.added)?e.push({delete:c}):(null===(s=a.attributes)||void 0===s?void 0:s.list)&&!t.text?e.push({retain:c,attributes:{list:!1}}):t.text||o?(e.push({retain:c,attributes:{...a.attributes||{},removed:this.buildAttributes(l)}}),1===i&&(n+=c)):e.push({delete:c}),e}),[]);return r&&c.unshift({retain:r}),this.ignorarEventoTextChange=!0,a.updateContents({ops:c},"user"),a.setSelection(n),!1}return!0}onTextChange(e,t,o){var i,a,r;const n=null===(a=null===(i=e.ops.find((e=>e.insert)))||void 0===i?void 0:i.attributes)||void 0===a?void 0:a.added,s=2===e.ops.length&&e.ops[0].retain&&"\n"===e.ops[1].insert;if(this.ignorarEventoTextChange||!this.emRevisao||n||!e.ops.length||s)return void(this.ignorarEventoTextChange=!1);const l=this.quill;if(0===l.history.stack.undo.length)return;let c=0;this.ignorarEventoTextChange=!0;let u=l.history.stack.undo.pop();const d=JSON.parse(JSON.stringify(u.redo));l.history.cutoff(),l.history.ignoreChange=!0,l.updateContents(u.undo,"silent"),l.history.ignoreChange=!1,(null===(r=l.history.options)||void 0===r?void 0:r.userOnly)||l.history.stack.undo.pop(),this.ignorarEventoTextChange=!0;let p={ops:[]},h=0;const m=ms();p=d.ops.reduce(((e,t)=>{var o,i;const a=t.retain||t.delete||("string"==typeof t.insert?t.insert.length:1);if(t.retain&&(null===(o=t.attributes)||void 0===o?void 0:o.list))e.ops.push({retain:t.retain,attributes:{...t.attributes||{}}}),h+=t.retain;else if(t.retain)e.ops.push({retain:t.retain,attributes:{...t.attributes||{}}}),h+=t.retain;else if(t.delete){l.getContents(h,t.delete).ops.forEach((t=>{var o,i;t.insert&&(null===(o=t.attributes)||void 0===o?void 0:o.added)?e.ops.push({delete:t.insert.length}):t.insert&&!(null===(i=t.attributes)||void 0===i?void 0:i.added)?(e.ops.push({retain:t.insert.length,attributes:{removed:this.buildAttributes(m)}}),h+=t.insert.length,c+=t.insert.length):(e.ops.push({retain:t.retain||t.delete,attributes:{removed:this.buildAttributes(m)}}),h+=t.retain||t.delete)}))}else t.insert&&!(null===(i=t.attributes)||void 0===i?void 0:i.added)&&(t.attributes={...t.attributes||{},added:this.buildAttributes(m),removed:!1},e.ops.push(t),h+=a);return e}),p),l.history.cutoff(),l.updateContents(p,"user"),setTimeout((()=>{l.setSelection(h-c,0),l.format("added",this.buildAttributes(m),"silent"),l.format("removed",!1,"silent"),this.ignorarEventoTextChange=!1}),0)}setUsuario(e){this.usuario=e}setEmRevisao(e){this.emRevisao=e}setIgnorarEventoTextChange(e){this.ignorarEventoTextChange=e}getQuantidadeRevisoes(){return this.getRevisoesSemDuplicidade(this.getRevisoes()).length}getRevisoes(){return[...this.quill.root.querySelectorAll("ins, del")].filter((e=>{var t;return 65279!==(null===(t=e.innerText)||void 0===t?void 0:t.charCodeAt(0))}))}getRevisoesSemDuplicidade(e){const t=[];return e.forEach((e=>{t.find((t=>t.getAttribute("id-revisao")===e.getAttribute("id-revisao")))||t.push(e)})),t}}function Ss(){}function Is(e,t,o,i,a){for(var r=0,n=t.length,s=0,l=0;r<n;r++){var c=t[r];if(c.removed){if(c.value=e.join(i.slice(l,l+c.count)),l+=c.count,r&&t[r-1].added){var u=t[r-1];t[r-1]=t[r],t[r]=u}}else{if(!c.added&&a){var d=o.slice(s,s+c.count);d=d.map((function(e,t){var o=i[l+t];return o.length>e.length?o:e})),c.value=e.join(d)}else c.value=e.join(o.slice(s,s+c.count));s+=c.count,c.added||(l+=c.count)}}var p=t[n-1];return n>1&&"string"==typeof p.value&&(p.added||p.removed)&&e.equals("",p.value)&&(t[n-2].value+=p.value,t.pop()),t}function ks(e){return{newPos:e.newPos,components:e.components.slice(0)}}Quill.register("modules/revisao",Os,!0),Ss.prototype={diff:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.callback;"function"==typeof o&&(i=o,o={}),this.options=o;var a=this;function r(e){return i?(setTimeout((function(){i(void 0,e)}),0),!0):e}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e));var n=(t=this.removeEmpty(this.tokenize(t))).length,s=e.length,l=1,c=n+s;o.maxEditLength&&(c=Math.min(c,o.maxEditLength));var u=[{newPos:-1,components:[]}],d=this.extractCommon(u[0],t,e,0);if(u[0].newPos+1>=n&&d+1>=s)return r([{value:this.join(t),count:t.length}]);function p(){for(var o=-1*l;o<=l;o+=2){var i=void 0,c=u[o-1],d=u[o+1],p=(d?d.newPos:0)-o;c&&(u[o-1]=void 0);var h=c&&c.newPos+1<n,m=d&&0<=p&&p<s;if(h||m){if(!h||m&&c.newPos<d.newPos?(i=ks(d),a.pushComponent(i.components,void 0,!0)):((i=c).newPos++,a.pushComponent(i.components,!0,void 0)),p=a.extractCommon(i,t,e,o),i.newPos+1>=n&&p+1>=s)return r(Is(a,i.components,t,e,a.useLongestToken));u[o]=i}else u[o]=void 0}l++}if(i)!function e(){setTimeout((function(){if(l>c)return i();p()||e()}),0)}();else for(;l<=c;){var h=p();if(h)return h}},pushComponent:function(e,t,o){var i=e[e.length-1];i&&i.added===t&&i.removed===o?e[e.length-1]={count:i.count+1,added:t,removed:o}:e.push({count:1,added:t,removed:o})},extractCommon:function(e,t,o,i){for(var a=t.length,r=o.length,n=e.newPos,s=n-i,l=0;n+1<a&&s+1<r&&this.equals(t[n+1],o[s+1]);)n++,s++,l++;return l&&e.components.push({count:l}),e.newPos=n,s},equals:function(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function(e){for(var t=[],o=0;o<e.length;o++)e[o]&&t.push(e[o]);return t},castInput:function(e){return e},tokenize:function(e){return e.split("")},join:function(e){return e.join("")}};var Cs=new Ss;function Ns(e,t,o){return Cs.diff(e,t,o)}var Ts=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,qs=/\S/,Rs=new Ss;function Ds(e,t,o){return o=function(e,t){if("function"==typeof e)t.callback=e;else if(e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}(o,{ignoreWhitespace:!0}),Rs.diff(e,t,o)}Rs.equals=function(e,t){return this.options.ignoreCase&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t||this.options.ignoreWhitespace&&!qs.test(e)&&!qs.test(t)},Rs.tokenize=function(e){for(var t=e.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),o=0;o<t.length-1;o++)!t[o+1]&&t[o+2]&&Ts.test(t[o])&&Ts.test(t[o+2])&&(t[o]+=t[o+2],t.splice(o+1,2),o--);return t};var Ps=new Ss;function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}Ps.tokenize=function(e){var t=[],o=e.split(/(\n|\r\n)/);o[o.length-1]||o.pop();for(var i=0;i<o.length;i++){var a=o[i];i%2&&!this.options.newlineIsToken?t[t.length-1]+=a:(this.options.ignoreWhitespace&&(a=a.trim()),t.push(a))}return t},(new Ss).tokenize=function(e){return e.split(/(\S.+?[.!?])(?=\s+|$)/)},(new Ss).tokenize=function(e){return e.split(/([{}:;,]|\s+)/)};var Ms=Object.prototype.toString,$s=new Ss;function js(e,t,o,i,a){var r,n;for(t=t||[],o=o||[],i&&(e=i(a,e)),r=0;r<t.length;r+=1)if(t[r]===e)return o[r];if("[object Array]"===Ms.call(e)){for(t.push(e),n=new Array(e.length),o.push(n),r=0;r<e.length;r+=1)n[r]=js(e[r],t,o,i,a);return t.pop(),o.pop(),n}if(e&&e.toJSON&&(e=e.toJSON()),"object"===Ls(e)&&null!==e){t.push(e),n={},o.push(n);var s,l=[];for(s in e)e.hasOwnProperty(s)&&l.push(s);for(l.sort(),r=0;r<l.length;r+=1)n[s=l[r]]=js(e[s],t,o,i,s);t.pop(),o.pop()}else n=e;return n}$s.useLongestToken=!0,$s.tokenize=Ps.tokenize,$s.castInput=function(e){var t=this.options,o=t.undefinedReplacement,i=t.stringifyReplacer,a=void 0===i?function(e,t){return void 0===t?o:t}:i;return"string"==typeof e?e:JSON.stringify(js(e,null,null,a),a,"  ")},$s.equals=function(e,t){return Ss.prototype.equals.call($s,e.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"))};var zs=new Ss;function Fs(e){return Qs(e.replace(/(<([^>]+)>)/gi,"").trim())}function Bs(e,t){return!0===t.map((t=>new RegExp(Hs(Vs(t))+"\\s*$").test(e))).filter((e=>e))[0]}function Us(e){switch(e[0].trim()){case".":return"ponto";case":":return"dois pontos";case";":return"ponto e vírgula";case",":return"vírgula";default:return e[0].trim()}}function Vs(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Hs(e){return e.replace(/\s+/g,"\\s+")}function Gs(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}function Qs(e){return e.replace(/\s{2,}/g," ")}function Ks(e){return e.replace(/(<([^>]+)>)/gi,"")}zs.tokenize=function(e){return e.slice()},zs.join=zs.removeEmpty=function(e){return e};class Ws{constructor(e){this.strs=new Array,e&&this.append(e)}append(e){e&&this.strs.push(e)}toString(){return function(e){let t="";return e.forEach((e=>{t+=e})),t}(this.strs)}}const Xs=/[\u0300-\u036f]/g,Ys=(e,t)=>e.replace(new RegExp(`<${t}[^<]*(?:(?!</${t}>)<[^<]*)*</${t}>`,"gi"),""),Js=(e,t,o)=>("diffChars"===o?Ns:Ds)(e,t).map((e=>e.added?`<ins>${e.value}</ins>`:e.removed?(e=>`<del>${e}</del>`)(e.value):e.value)).join(""),Zs=(e,t)=>{if(t){const o=new RegExp(`(?<=<(${t.join("|")})>) +(?=</\\1>)`,"gi");return e.replace(o,(e=>e.replace(/ /g,"&nbsp;")))}return e.replace(/ /g,"&nbsp;")},el=e=>e.replace(/ +/g,(e=>e.replace(/ /g,"&nbsp;"))),tl=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.value},ol=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,il=Symbol(),al=new Map;class rl{constructor(e,t){if(this._$cssResult$=!0,t!==il)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){let e=al.get(this.cssText);return ol&&void 0===e&&(al.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const nl=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new rl(o,il)},sl=ol?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new rl("string"==typeof e?e:e+"",il))(t)})(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var ll;const cl=window.trustedTypes,ul=cl?cl.emptyScript:"",dl=window.reactiveElementPolyfillSupport,pl={toAttribute(e,t){switch(t){case Boolean:e=e?ul:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},hl=(e,t)=>t!==e&&(t==t||e==e),ml={attribute:!0,type:String,converter:pl,reflect:!1,hasChanged:hl};class fl extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(e){var t;null!==(t=this.l)&&void 0!==t||(this.l=[]),this.l.push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,o)=>{const i=this._$Eh(o,t);void 0!==i&&(this._$Eu.set(i,o),e.push(i))})),e}static createProperty(e,t=ml){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const a=this[e];this[t]=i,this.requestUpdate(e,a,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||ml}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),this.elementProperties=new Map(e.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const o of t)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(sl(e))}else void 0!==e&&t.push(sl(e));return t}static _$Eh(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}o(){var e;this._$Ep=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(e=this.constructor.l)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,o;(null!==(t=this._$Eg)&&void 0!==t?t:this._$Eg=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(o=e.hostConnected)||void 0===o||o.call(e))}removeController(e){var t;null===(t=this._$Eg)||void 0===t||t.splice(this._$Eg.indexOf(e)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Et.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const t=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{ol?e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):t.forEach((t=>{const o=document.createElement("style"),i=window.litNonce;void 0!==i&&o.setAttribute("nonce",i),o.textContent=t.cssText,e.appendChild(o)}))})(t,this.constructor.elementStyles),t}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$ES(e,t,o=ml){var i,a;const r=this.constructor._$Eh(e,o);if(void 0!==r&&!0===o.reflect){const n=(null!==(a=null===(i=o.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==a?a:pl.toAttribute)(t,o.type);this._$Ei=e,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$Ei=null}}_$AK(e,t){var o,i,a;const r=this.constructor,n=r._$Eu.get(e);if(void 0!==n&&this._$Ei!==n){const e=r.getPropertyOptions(n),s=e.converter,l=null!==(a=null!==(i=null===(o=s)||void 0===o?void 0:o.fromAttribute)&&void 0!==i?i:"function"==typeof s?s:null)&&void 0!==a?a:pl.fromAttribute;this._$Ei=n,this[n]=l(t,e.type),this._$Ei=null}}requestUpdate(e,t,o){let i=!0;void 0!==e&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||hl)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Ei!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,o))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((e,t)=>this[t]=e)),this._$Et=void 0);let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),null===(e=this._$Eg)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(o)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(o)}willUpdate(e){}_$AE(e){var t;null===(t=this._$Eg)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$ES(t,this[t],e))),this._$EC=void 0),this._$EU()}updated(e){}firstUpdated(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var vl;fl.finalized=!0,fl.elementProperties=new Map,fl.elementStyles=[],fl.shadowRootOptions={mode:"open"},null==dl||dl({ReactiveElement:fl}),(null!==(ll=globalThis.reactiveElementVersions)&&void 0!==ll?ll:globalThis.reactiveElementVersions=[]).push("1.3.1");const gl=globalThis.trustedTypes,bl=gl?gl.createPolicy("lit-html",{createHTML:e=>e}):void 0,yl=`lit$${(Math.random()+"").slice(9)}$`,xl="?"+yl,Al=`<${xl}>`,wl=document,_l=(e="")=>wl.createComment(e),El=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Ol=Array.isArray,Sl=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Il=/-->/g,kl=/>/g,Cl=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Nl=/'/g,Tl=/"/g,ql=/^(?:script|style|textarea|title)$/i,Rl=(e=>(t,...o)=>({_$litType$:e,strings:t,values:o}))(1),Dl=Symbol.for("lit-noChange"),Pl=Symbol.for("lit-nothing"),Ll=new WeakMap,Ml=wl.createTreeWalker(wl,129,null,!1),$l=(e,t)=>{const o=e.length-1,i=[];let a,r=2===t?"<svg>":"",n=Sl;for(let t=0;t<o;t++){const o=e[t];let s,l,c=-1,u=0;for(;u<o.length&&(n.lastIndex=u,l=n.exec(o),null!==l);)u=n.lastIndex,n===Sl?"!--"===l[1]?n=Il:void 0!==l[1]?n=kl:void 0!==l[2]?(ql.test(l[2])&&(a=RegExp("</"+l[2],"g")),n=Cl):void 0!==l[3]&&(n=Cl):n===Cl?">"===l[0]?(n=null!=a?a:Sl,c=-1):void 0===l[1]?c=-2:(c=n.lastIndex-l[2].length,s=l[1],n=void 0===l[3]?Cl:'"'===l[3]?Tl:Nl):n===Tl||n===Nl?n=Cl:n===Il||n===kl?n=Sl:(n=Cl,a=void 0);const d=n===Cl&&e[t+1].startsWith("/>")?" ":"";r+=n===Sl?o+Al:c>=0?(i.push(s),o.slice(0,c)+"$lit$"+o.slice(c)+yl+d):o+yl+(-2===c?(i.push(void 0),t):d)}const s=r+(e[o]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==bl?bl.createHTML(s):s,i]};class jl{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let a=0,r=0;const n=e.length-1,s=this.parts,[l,c]=$l(e,t);if(this.el=jl.createElement(l,o),Ml.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=Ml.nextNode())&&s.length<n;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(yl)){const o=c[r++];if(e.push(t),void 0!==o){const e=i.getAttribute(o.toLowerCase()+"$lit$").split(yl),t=/([.?@])?(.*)/.exec(o);s.push({type:1,index:a,name:t[2],strings:e,ctor:"."===t[1]?Vl:"?"===t[1]?Gl:"@"===t[1]?Ql:Ul})}else s.push({type:6,index:a})}for(const t of e)i.removeAttribute(t)}if(ql.test(i.tagName)){const e=i.textContent.split(yl),t=e.length-1;if(t>0){i.textContent=gl?gl.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],_l()),Ml.nextNode(),s.push({type:2,index:++a});i.append(e[t],_l())}}}else if(8===i.nodeType)if(i.data===xl)s.push({type:2,index:a});else{let e=-1;for(;-1!==(e=i.data.indexOf(yl,e+1));)s.push({type:7,index:a}),e+=yl.length-1}a++}}static createElement(e,t){const o=wl.createElement("template");return o.innerHTML=e,o}}function zl(e,t,o=e,i){var a,r,n,s;if(t===Dl)return t;let l=void 0!==i?null===(a=o._$Cl)||void 0===a?void 0:a[i]:o._$Cu;const c=El(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(r=null==l?void 0:l._$AO)||void 0===r||r.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,o,i)),void 0!==i?(null!==(n=(s=o)._$Cl)&&void 0!==n?n:s._$Cl=[])[i]=l:o._$Cu=l),void 0!==l&&(t=zl(e,l._$AS(e,t.values),l,i)),t}class Fl{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:o},parts:i}=this._$AD,a=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:wl).importNode(o,!0);Ml.currentNode=a;let r=Ml.nextNode(),n=0,s=0,l=i[0];for(;void 0!==l;){if(n===l.index){let t;2===l.type?t=new Bl(r,r.nextSibling,this,e):1===l.type?t=new l.ctor(r,l.name,l.strings,this,e):6===l.type&&(t=new Kl(r,this,e)),this.v.push(t),l=i[++s]}n!==(null==l?void 0:l.index)&&(r=Ml.nextNode(),n++)}return a}m(e){let t=0;for(const o of this.v)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class Bl{constructor(e,t,o,i){var a;this.type=2,this._$AH=Pl,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cg=null===(a=null==i?void 0:i.isConnected)||void 0===a||a}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=zl(this,e,t),El(e)?e===Pl||null==e||""===e?(this._$AH!==Pl&&this._$AR(),this._$AH=Pl):e!==this._$AH&&e!==Dl&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):(e=>{var t;return Ol(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])})(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==Pl&&El(this._$AH)?this._$AA.nextSibling.data=e:this.k(wl.createTextNode(e)),this._$AH=e}T(e){var t;const{values:o,_$litType$:i}=e,a="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=jl.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===a)this._$AH.m(o);else{const e=new Fl(a,this),t=e.p(this.options);e.m(o),this.k(t),this._$AH=e}}_$AC(e){let t=Ll.get(e.strings);return void 0===t&&Ll.set(e.strings,t=new jl(e)),t}S(e){Ol(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const a of e)i===t.length?t.push(o=new Bl(this.M(_l()),this.M(_l()),this,this.options)):o=t[i],o._$AI(a),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class Ul{constructor(e,t,o,i,a){this.type=1,this._$AH=Pl,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=Pl}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,o,i){const a=this.strings;let r=!1;if(void 0===a)e=zl(this,e,t,0),r=!El(e)||e!==this._$AH&&e!==Dl,r&&(this._$AH=e);else{const i=e;let n,s;for(e=a[0],n=0;n<a.length-1;n++)s=zl(this,i[o+n],t,n),s===Dl&&(s=this._$AH[n]),r||(r=!El(s)||s!==this._$AH[n]),s===Pl?e=Pl:e!==Pl&&(e+=(null!=s?s:"")+a[n+1]),this._$AH[n]=s}r&&!i&&this.C(e)}C(e){e===Pl?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Vl extends Ul{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===Pl?void 0:e}}const Hl=gl?gl.emptyScript:"";class Gl extends Ul{constructor(){super(...arguments),this.type=4}C(e){e&&e!==Pl?this.element.setAttribute(this.name,Hl):this.element.removeAttribute(this.name)}}class Ql extends Ul{constructor(e,t,o,i,a){super(e,t,o,i,a),this.type=5}_$AI(e,t=this){var o;if((e=null!==(o=zl(this,e,t,0))&&void 0!==o?o:Pl)===Dl)return;const i=this._$AH,a=e===Pl&&i!==Pl||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,r=e!==Pl&&(i===Pl||a);a&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==o?o:this.element,e):this._$AH.handleEvent(e)}}class Kl{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){zl(this,e)}}const Wl=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Xl,Yl;null==Wl||Wl(jl,Bl),(null!==(vl=globalThis.litHtmlVersions)&&void 0!==vl?vl:globalThis.litHtmlVersions=[]).push("2.2.2");class Jl extends fl{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var e,t;const o=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=o.firstChild),o}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Dt=((e,t,o)=>{var i,a;const r=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:t;let n=r._$litPart$;if(void 0===n){const e=null!==(a=null==o?void 0:o.renderBefore)&&void 0!==a?a:null;r._$litPart$=n=new Bl(t.insertBefore(_l(),e),e,void 0,null!=o?o:{})}return n._$AI(e),n})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Dt)||void 0===e||e.setConnected(!1)}render(){return Dl}}Jl.finalized=!0,Jl._$litElement$=!0,null===(Xl=globalThis.litElementHydrateSupport)||void 0===Xl||Xl.call(globalThis,{LitElement:Jl});const Zl=globalThis.litElementPolyfillSupport;null==Zl||Zl({LitElement:Jl}),(null!==(Yl=globalThis.litElementVersions)&&void 0!==Yl?Yl:globalThis.litElementVersions=[]).push("3.2.0");const ec=Rl`
  <style>
    /*!
    * Quill Editor v1.3.7
    * https://quilljs.com/
    * Copyright (c) 2014, Jason Chen
    * Copyright (c) 2013, salesforce.com
    */
    .ql-container {
      box-sizing: border-box;
      /* font-family: Helvetica, Arial, sans-serif; */
      font-family: var(--eta-font-serif);
      font-size: 13px;
      height: 100%;
      margin: 0px;
      position: relative;
    }
    .ql-container.ql-disabled .ql-tooltip {
      visibility: hidden;
    }
    .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {
      pointer-events: none;
    }
    .ql-clipboard {
      left: -100000px;
      height: 1px;
      overflow-y: hidden;
      position: absolute;
      top: 50%;
    }
    .ql-clipboard p {
      margin: 0;
      padding: 0;
    }
    .ql-editor {
      box-sizing: border-box;
      line-height: 1.42;
      height: 100%;
      outline: none;
      overflow-y: auto;
      padding: 12px 15px;
      tab-size: 4;
      -moz-tab-size: 4;
      text-align: left;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .ql-editor > * {
      cursor: text;
    }
    .ql-editor p,
    .ql-editor ol,
    .ql-editor ul,
    .ql-editor pre,
    .ql-editor blockquote,
    .ql-editor h1,
    .ql-editor h2,
    .ql-editor h3,
    .ql-editor h4,
    .ql-editor h5,
    .ql-editor h6 {
      margin: 0;
      padding: 0;
      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor p {
      line-height: 1.42;
      font-size: 18px;
    }
    .ql-editor ol,
    .ql-editor ul {
      padding-left: 1.5em;
    }
    .ql-editor ol > li,
    .ql-editor ul > li {
      list-style-type: none;
    }
    .ql-editor ul > li::before {
      content: '\\2022';
    }
    .ql-editor ul[data-checked='true'],
    .ql-editor ul[data-checked='false'] {
      pointer-events: none;
    }
    .ql-editor ul[data-checked='true'] > li *,
    .ql-editor ul[data-checked='false'] > li * {
      pointer-events: all;
    }
    .ql-editor ul[data-checked='true'] > li::before,
    .ql-editor ul[data-checked='false'] > li::before {
      color: #777;
      cursor: pointer;
      pointer-events: all;
    }
    .ql-editor ul[data-checked='true'] > li::before {
      content: '\\2611';
    }
    .ql-editor ul[data-checked='false'] > li::before {
      content: '\\2610';
    }
    .ql-editor li::before {
      display: inline-block;
      white-space: nowrap;
      width: 1.2em;
    }
    .ql-editor li:not(.ql-direction-rtl)::before {
      margin-left: -1.5em;
      margin-right: 0.3em;
      text-align: right;
    }
    .ql-editor li.ql-direction-rtl::before {
      margin-left: 0.3em;
      margin-right: -1.5em;
    }
    .ql-editor ol li:not(.ql-direction-rtl),
    .ql-editor ul li:not(.ql-direction-rtl) {
      padding-left: 1.5em;
    }
    .ql-editor ol li.ql-direction-rtl,
    .ql-editor ul li.ql-direction-rtl {
      padding-right: 1.5em;
    }
    .ql-editor ol li {
      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
      counter-increment: list-0;
    }
    .ql-editor ol li:before {
      content: counter(list-0, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-1 {
      counter-increment: list-1;
    }
    .ql-editor ol li.ql-indent-1:before {
      content: counter(list-1, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-1 {
      counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-2 {
      counter-increment: list-2;
    }
    .ql-editor ol li.ql-indent-2:before {
      content: counter(list-2, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-2 {
      counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-3 {
      counter-increment: list-3;
    }
    .ql-editor ol li.ql-indent-3:before {
      content: counter(list-3, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-3 {
      counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-4 {
      counter-increment: list-4;
    }
    .ql-editor ol li.ql-indent-4:before {
      content: counter(list-4, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-4 {
      counter-reset: list-5 list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-5 {
      counter-increment: list-5;
    }
    .ql-editor ol li.ql-indent-5:before {
      content: counter(list-5, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-5 {
      counter-reset: list-6 list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-6 {
      counter-increment: list-6;
    }
    .ql-editor ol li.ql-indent-6:before {
      content: counter(list-6, decimal) '. ';
    }
    .ql-editor ol li.ql-indent-6 {
      counter-reset: list-7 list-8 list-9;
    }
    .ql-editor ol li.ql-indent-7 {
      counter-increment: list-7;
    }
    .ql-editor ol li.ql-indent-7:before {
      content: counter(list-7, lower-alpha) '. ';
    }
    .ql-editor ol li.ql-indent-7 {
      counter-reset: list-8 list-9;
    }
    .ql-editor ol li.ql-indent-8 {
      counter-increment: list-8;
    }
    .ql-editor ol li.ql-indent-8:before {
      content: counter(list-8, lower-roman) '. ';
    }
    .ql-editor ol li.ql-indent-8 {
      counter-reset: list-9;
    }
    .ql-editor ol li.ql-indent-9 {
      counter-increment: list-9;
    }
    .ql-editor ol li.ql-indent-9:before {
      content: counter(list-9, decimal) '. ';
    }
    .ql-editor .ql-indent-1:not(.ql-direction-rtl) {
      padding-left: 3em;
    }
    .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {
      padding-left: 4.5em;
    }
    .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {
      padding-right: 3em;
    }
    .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {
      padding-right: 4.5em;
    }
    .ql-editor .ql-indent-2:not(.ql-direction-rtl) {
      padding-left: 6em;
    }
    .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {
      padding-left: 7.5em;
    }
    .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {
      padding-right: 6em;
    }
    .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {
      padding-right: 7.5em;
    }
    .ql-editor .ql-indent-3:not(.ql-direction-rtl) {
      padding-left: 9em;
    }
    .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {
      padding-left: 10.5em;
    }
    .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {
      padding-right: 9em;
    }
    .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {
      padding-right: 10.5em;
    }
    .ql-editor .ql-indent-4:not(.ql-direction-rtl) {
      padding-left: 12em;
    }
    .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {
      padding-left: 13.5em;
    }
    .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {
      padding-right: 12em;
    }
    .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {
      padding-right: 13.5em;
    }
    .ql-editor .ql-indent-5:not(.ql-direction-rtl) {
      padding-left: 15em;
    }
    .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {
      padding-left: 16.5em;
    }
    .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {
      padding-right: 15em;
    }
    .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {
      padding-right: 16.5em;
    }
    .ql-editor .ql-indent-6:not(.ql-direction-rtl) {
      padding-left: 18em;
    }
    .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {
      padding-left: 19.5em;
    }
    .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {
      padding-right: 18em;
    }
    .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {
      padding-right: 19.5em;
    }
    .ql-editor .ql-indent-7:not(.ql-direction-rtl) {
      padding-left: 21em;
    }
    .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {
      padding-left: 22.5em;
    }
    .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {
      padding-right: 21em;
    }
    .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {
      padding-right: 22.5em;
    }
    .ql-editor .ql-indent-8:not(.ql-direction-rtl) {
      padding-left: 24em;
    }
    .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {
      padding-left: 25.5em;
    }
    .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {
      padding-right: 24em;
    }
    .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {
      padding-right: 25.5em;
    }
    .ql-editor .ql-indent-9:not(.ql-direction-rtl) {
      padding-left: 27em;
    }
    .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {
      padding-left: 28.5em;
    }
    .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {
      padding-right: 27em;
    }
    .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {
      padding-right: 28.5em;
    }
    .ql-editor .ql-video {
      display: block;
      max-width: 100%;
    }
    .ql-editor .ql-video.ql-align-center {
      margin: 0 auto;
    }
    .ql-editor .ql-video.ql-align-right {
      margin: 0 0 0 auto;
    }
    .ql-editor .ql-bg-black {
      background-color: #000;
    }
    .ql-editor .ql-bg-red {
      background-color: #e60000;
    }
    .ql-editor .ql-bg-orange {
      background-color: #f90;
    }
    .ql-editor .ql-bg-yellow {
      background-color: #ff0;
    }
    .ql-editor .ql-bg-green {
      background-color: #008a00;
    }
    .ql-editor .ql-bg-blue {
      background-color: #06c;
    }
    .ql-editor .ql-bg-purple {
      background-color: #93f;
    }
    .ql-editor .ql-color-white {
      color: #fff;
    }
    .ql-editor .ql-color-red {
      color: #e60000;
    }
    .ql-editor .ql-color-orange {
      color: #f90;
    }
    .ql-editor .ql-color-yellow {
      color: #ff0;
    }
    .ql-editor .ql-color-green {
      color: #008a00;
    }
    .ql-editor .ql-color-blue {
      color: #06c;
    }
    .ql-editor .ql-color-purple {
      color: #93f;
    }
    .ql-editor .ql-font-serif {
      font-family: Georgia, Times New Roman, serif;
    }
    .ql-editor .ql-font-monospace {
      font-family: Monaco, Courier New, monospace;
    }
    .ql-editor .ql-size-small {
      font-size: 0.75em;
    }
    .ql-editor .ql-size-large {
      font-size: 1.5em;
    }
    .ql-editor .ql-size-huge {
      font-size: 2.5em;
    }
    .ql-editor .ql-direction-rtl {
      direction: rtl;
      text-align: inherit;
    }
    .ql-editor .ql-align-center {
      text-align: center;
    }
    .ql-editor .ql-align-justify {
      text-align: justify;
    }
    .ql-editor .ql-align-right {
      text-align: right;
    }
    .ql-editor.ql-blank::before {
      color: rgba(0, 0, 0, 0.6);
      content: attr(data-placeholder);
      font-style: italic;
      left: 15px;
      pointer-events: none;
      position: absolute;
      right: 15px;
    }
    .ql-snow.ql-toolbar:after,
    .ql-snow .ql-toolbar:after {
      clear: both;
      content: '';
      display: table;
    }
    .ql-snow.ql-toolbar button,
    .ql-snow .ql-toolbar button {
      background: none;
      border: none;
      cursor: pointer;
      display: inline-block;
      float: left;
      height: 24px;
      padding: 3px 5px;
      width: 28px;
    }
    .ql-snow.ql-toolbar button svg,
    .ql-snow .ql-toolbar button svg {
      float: left;
      height: 100%;
    }
    .ql-snow.ql-toolbar button:active:hover,
    .ql-snow .ql-toolbar button:active:hover {
      outline: none;
    }
    .ql-snow.ql-toolbar input.ql-image[type='file'],
    .ql-snow .ql-toolbar input.ql-image[type='file'] {
      display: none;
    }
    .ql-snow.ql-toolbar button:hover,
    .ql-snow .ql-toolbar button:hover,
    .ql-snow.ql-toolbar button:focus,
    .ql-snow .ql-toolbar button:focus,
    .ql-snow.ql-toolbar button.ql-active,
    .ql-snow .ql-toolbar button.ql-active,
    .ql-snow.ql-toolbar .ql-picker-label:hover,
    .ql-snow .ql-toolbar .ql-picker-label:hover,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active,
    .ql-snow.ql-toolbar .ql-picker-item:hover,
    .ql-snow .ql-toolbar .ql-picker-item:hover,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected {
      color: #06c;
    }
    .ql-snow.ql-toolbar button:hover .ql-fill,
    .ql-snow .ql-toolbar button:hover .ql-fill,
    .ql-snow.ql-toolbar button:focus .ql-fill,
    .ql-snow .ql-toolbar button:focus .ql-fill,
    .ql-snow.ql-toolbar button.ql-active .ql-fill,
    .ql-snow .ql-toolbar button.ql-active .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
    .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
      fill: #06c;
    }
    .ql-snow.ql-toolbar button:hover .ql-stroke,
    .ql-snow .ql-toolbar button:hover .ql-stroke,
    .ql-snow.ql-toolbar button:focus .ql-stroke,
    .ql-snow .ql-toolbar button:focus .ql-stroke,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
    .ql-snow.ql-toolbar button:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar button:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar button:focus .ql-stroke-miter,
    .ql-snow .ql-toolbar button:focus .ql-stroke-miter,
    .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
    .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
      stroke: #06c;
    }
    @media (pointer: coarse) {
      .ql-snow.ql-toolbar button:hover:not(.ql-active),
      .ql-snow .ql-toolbar button:hover:not(.ql-active) {
        color: #444;
      }
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {
        fill: #444;
      }
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,
      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,
      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {
        stroke: #444;
      }
    }
    .ql-snow {
      box-sizing: border-box;
    }
    .ql-snow * {
      box-sizing: border-box;
    }
    .ql-snow .ql-hidden {
      display: none;
    }
    .ql-snow .ql-out-bottom,
    .ql-snow .ql-out-top {
      visibility: hidden;
    }
    .ql-snow .ql-tooltip {
      position: absolute;
      transform: translateY(10px);
    }
    .ql-snow .ql-tooltip a {
      cursor: pointer;
      text-decoration: none;
    }
    .ql-snow .ql-tooltip.ql-flip {
      transform: translateY(-10px);
    }
    .ql-snow .ql-formats {
      display: inline-block;
      vertical-align: middle;
    }
    .ql-snow .ql-formats:after {
      clear: both;
      content: '';
      display: table;
    }
    .ql-snow .ql-stroke {
      fill: none;
      stroke: #444;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-width: 2;
    }
    .ql-snow .ql-stroke-miter {
      fill: none;
      stroke: #444;
      stroke-miterlimit: 10;
      stroke-width: 2;
    }
    .ql-snow .ql-fill,
    .ql-snow .ql-stroke.ql-fill {
      fill: #444;
    }
    .ql-snow .ql-empty {
      fill: none;
    }
    .ql-snow .ql-even {
      fill-rule: evenodd;
    }
    .ql-snow .ql-thin,
    .ql-snow .ql-stroke.ql-thin {
      stroke-width: 1;
    }
    .ql-snow .ql-transparent {
      opacity: 0.4;
    }
    .ql-snow .ql-direction svg:last-child {
      display: none;
    }
    .ql-snow .ql-direction.ql-active svg:last-child {
      display: inline;
    }
    .ql-snow .ql-direction.ql-active svg:first-child {
      display: none;
    }
    .ql-snow .ql-editor h1 {
      font-size: 2em;
    }
    .ql-snow .ql-editor h2 {
      font-size: 1.5em;
    }
    .ql-snow .ql-editor h3 {
      font-size: 1.17em;
    }
    .ql-snow .ql-editor h4 {
      font-size: 1em;
    }
    .ql-snow .ql-editor h5 {
      font-size: 0.83em;
    }
    .ql-snow .ql-editor h6 {
      font-size: 0.67em;
    }
    .ql-snow .ql-editor a {
      text-decoration: underline;
    }
    .ql-snow .ql-editor blockquote {
      border-left: 4px solid #ccc;
      margin-bottom: 5px;
      margin-top: 5px;
      padding-left: 16px;
    }
    .ql-snow .ql-editor code,
    .ql-snow .ql-editor pre {
      background-color: #f0f0f0;
      border-radius: 3px;
    }
    .ql-snow .ql-editor pre {
      white-space: pre-wrap;
      margin-bottom: 5px;
      margin-top: 5px;
      padding: 5px 10px;
    }
    .ql-snow .ql-editor code {
      font-size: 85%;
      padding: 2px 4px;
    }
    .ql-snow .ql-editor pre.ql-syntax {
      background-color: #23241f;
      color: #f8f8f2;
      overflow: visible;
    }
    .ql-snow .ql-editor img {
      max-width: 100%;
    }
    .ql-snow .ql-picker {
      color: #444;
      display: inline-block;
      float: left;
      font-size: 14px;
      font-weight: 500;
      height: 24px;
      position: relative;
      vertical-align: middle;
    }
    .ql-snow .ql-picker-label {
      cursor: pointer;
      display: inline-block;
      height: 100%;
      padding-left: 8px;
      padding-right: 2px;
      position: relative;
      width: 100%;
    }
    .ql-snow .ql-picker-label::before {
      display: inline-block;
      line-height: 22px;
    }
    .ql-snow .ql-picker-options {
      background-color: #fff;
      display: none;
      min-width: 100%;
      padding: 4px 8px;
      position: absolute;
      white-space: nowrap;
    }
    .ql-snow .ql-picker-options .ql-picker-item {
      cursor: pointer;
      display: block;
      padding-bottom: 5px;
      padding-top: 5px;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label {
      color: #ccc;
      z-index: 2;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
      fill: #ccc;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
      stroke: #ccc;
    }
    .ql-snow .ql-picker.ql-expanded .ql-picker-options {
      display: block;
      margin-top: -1px;
      top: 100%;
      z-index: 1;
    }
    .ql-snow .ql-color-picker,
    .ql-snow .ql-icon-picker {
      width: 28px;
    }
    .ql-snow .ql-color-picker .ql-picker-label,
    .ql-snow .ql-icon-picker .ql-picker-label {
      padding: 2px 4px;
    }
    .ql-snow .ql-color-picker .ql-picker-label svg,
    .ql-snow .ql-icon-picker .ql-picker-label svg {
      right: 4px;
    }
    .ql-snow .ql-icon-picker .ql-picker-options {
      padding: 4px 0px;
    }
    .ql-snow .ql-icon-picker .ql-picker-item {
      height: 24px;
      width: 24px;
      padding: 2px 4px;
    }
    .ql-snow .ql-color-picker .ql-picker-options {
      padding: 3px 5px;
      width: 152px;
    }
    .ql-snow .ql-color-picker .ql-picker-item {
      border: 1px solid transparent;
      float: left;
      height: 16px;
      margin: 2px;
      padding: 0px;
      width: 16px;
    }
    .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {
      position: absolute;
      margin-top: -9px;
      right: 0;
      top: 50%;
      width: 18px;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {
      content: attr(data-label);
    }
    .ql-snow .ql-picker.ql-header {
      width: 98px;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item::before {
      content: 'Normal';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
      content: 'Heading 1';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
      content: 'Heading 2';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
      content: 'Heading 3';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
      content: 'Heading 4';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
      content: 'Heading 5';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
      content: 'Heading 6';
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {
      font-size: 2em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {
      font-size: 1.5em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {
      font-size: 1.17em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {
      font-size: 1em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {
      font-size: 0.83em;
    }
    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {
      font-size: 0.67em;
    }
    .ql-snow .ql-picker.ql-font {
      width: 108px;
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item::before {
      content: 'Sans Serif';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
      content: 'Serif';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
      content: 'Monospace';
    }
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {
      font-family: Georgia, Times New Roman, serif;
    }
    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {
      font-family: Monaco, Courier New, monospace;
    }
    .ql-snow .ql-picker.ql-size {
      width: 98px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item::before {
      content: 'Normal';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
      content: 'Small';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
      content: 'Large';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
      content: 'Huge';
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {
      font-size: 10px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {
      font-size: 18px;
    }
    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {
      font-size: 32px;
    }
    .ql-snow .ql-color-picker.ql-background .ql-picker-item {
      background-color: #fff;
    }
    .ql-snow .ql-color-picker.ql-color .ql-picker-item {
      background-color: #000;
    }
    .ql-toolbar.ql-snow {
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      padding: 8px;
    }
    .ql-toolbar.ql-snow .ql-formats {
      margin-right: 15px;
    }
    .ql-toolbar.ql-snow .ql-picker-label {
      border: 1px solid transparent;
    }
    .ql-toolbar.ql-snow .ql-picker-options {
      border: 1px solid transparent;
      box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;
    }
    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
      border-color: #ccc;
    }
    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
      border-color: #ccc;
    }
    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,
    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {
      border-color: #000;
    }
    .ql-toolbar.ql-snow + .ql-container.ql-snow {
      border-top: 0px;
    }
    .ql-snow .ql-tooltip {
      background-color: #fff;
      border: 1px solid #ccc;
      box-shadow: 0px 0px 5px #ddd;
      color: #444;
      padding: 5px 12px;
      white-space: nowrap;
    }
    .ql-snow .ql-tooltip::before {
      content: 'Visit URL:';
      line-height: 26px;
      margin-right: 8px;
    }
    .ql-snow .ql-tooltip input[type='text'] {
      display: none;
      border: 1px solid #ccc;
      font-size: 13px;
      height: 26px;
      margin: 0px;
      padding: 3px 5px;
      width: 170px;
    }
    .ql-snow .ql-tooltip a.ql-preview {
      display: inline-block;
      max-width: 200px;
      overflow-x: hidden;
      text-overflow: ellipsis;
      vertical-align: top;
    }
    .ql-snow .ql-tooltip a.ql-action::after {
      border-right: 1px solid #ccc;
      content: 'Edit';
      margin-left: 16px;
      padding-right: 8px;
    }
    .ql-snow .ql-tooltip a.ql-remove::before {
      content: 'Remove';
      margin-left: 8px;
    }
    .ql-snow .ql-tooltip a {
      line-height: 26px;
    }
    .ql-snow .ql-tooltip.ql-editing a.ql-preview,
    .ql-snow .ql-tooltip.ql-editing a.ql-remove {
      display: none;
    }
    .ql-snow .ql-tooltip.ql-editing input[type='text'] {
      display: inline-block;
    }
    .ql-snow .ql-tooltip.ql-editing a.ql-action::after {
      border-right: 0px;
      content: 'Save';
      padding-right: 0px;
    }
    .ql-snow .ql-tooltip[data-mode='link']::before {
      content: 'Enter link:';
    }
    .ql-snow .ql-tooltip[data-mode='formula']::before {
      content: 'Enter formula:';
    }
    .ql-snow .ql-tooltip[data-mode='video']::before {
      content: 'Enter video:';
    }
    .ql-snow a {
      color: #06c;
    }
    .ql-container.ql-snow {
      border: 1px solid #ccc;
    }
  </style>
`,tc=Quill.import("parchment"),oc={scope:tc.Scope.BLOCK,whitelist:["ementa","norma-alterada"]},ic=new tc.Attributor.Class("estilo","estilo",oc),ac=Quill.import("parchment"),rc={scope:ac.Scope.BLOCK,whitelist:["0px"]},nc=new ac.Attributor.Class("margin-bottom","ql-margin-bottom",rc);class sc{constructor({id:e,numero:t,texto:o}){this.id=e,this.numero=t,this.texto=o}}const lc=Quill.import("parchment"),cc={scope:lc.Scope.BLOCK,whitelist:["0px"]},uc=new lc.Attributor.Class("text-indent","ql-text-indent",cc),dc="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,pc=!(!dc||!document.createElement("div").attachShadow({mode:"open"}).getSelection),hc=window.ShadyDOM&&window.ShadyDOM.inUse,mc=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,fc=!dc||hc||!pc&&!mc,vc=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,gc=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function bc(e,t,o){const i=t.childNodes||t.children;if(!i)return t;for(let t=0;t<i.length;++t){const r=i[o?t:i.length-1-t];if((a=r,gc.includes(a.nodeType))&&e.containsNode(r,!0)){if(e.containsNode(r,!1))return r;if(!vc.exec(r.localName||""))return bc(e,r,o)}}var a;return t}let yc={node:null,offset:-1};function xc(e,t,o){const i=t;for(;(t=Ac(t,o))&&t.contains(i););return!!t&&(t instanceof Element&&e.containsNode(t,!0))}function Ac(e,t){if(!t)return e.previousSibling||e.parentNode||null;for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}return null}!function(){if(pc||fc)return document.addEventListener("selectionchange",(e=>{document.dispatchEvent(new CustomEvent("-shadow-selectionchange"))})),()=>{};let e=!1;document.addEventListener("selectionchange",(t=>{if(e)return;e=!0;const o=window.getSelection();if("Caret"===o.type){const e=function(e,t){const o=[],i=e=>{for(let t=0;t<e.length;++t)e[t].shadowRoot&&o.push(e[t].shadowRoot)};for(t.shadowRoot&&o.push(t.shadowRoot),i(t.childNodes);o.length;){const t=o.shift();for(let o=0;o<t.childNodes.length;++o)if(e.containsNode(t.childNodes[o],!0))return t;i(t.querySelectorAll("*"))}return null}(o,o.anchorNode);if(e instanceof window.ShadowRoot){const t=_c(e);if(t){const e=t.startContainer,o=t.startOffset;yc={node:e,offset:o}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame((()=>{e=!1}))}))}();const wc=new Map;function _c(e){if(fc){const t=document.getSelection();return t.containsNode(e,!0)?t.getRangeAt(0):null}if(pc){const t=e.getSelection();return t.rangeCount?t.getRangeAt(0):null}const t=wc.get(e);if(t)return t;const o=function(e){const t=window.getSelection();if("None"===t.type)return{range:null,type:"none"};if("Caret"!==t.type&&"Range"!==t.type)throw new TypeError("unexpected type: "+t.type);const o=bc(t,e,!0);if(o===e)return{range:null,mode:"none"};const i=document.createRange();let a,r=null;if("Range"===t.type&&(r=bc(t,e,!1),a=function(e,t,o){if("Range"!==e.type)return;const i=()=>e.toString().length,a=i();let r;return e.modify("extend","forward","character"),r=i(),r>a||xc(e,o,!0)?(e.modify("extend","backward","character"),!0):r<a||!e.containsNode(t)?(e.modify("extend","backward","character"),!1):(e.modify("extend","backward","character"),r=i(),r>a||xc(e,t,!1)?(e.modify("extend","forward","character"),!1):r<a||!e.containsNode(o)?(e.modify("extend","forward","character"),!0):void 0)}(t,o,r),void 0===a))return i.setStart(o,0),i.setEnd(r,r.length),{range:i,mode:"all"};const n=t.toString().length;let s=0,l=0;if(null===r);else if(r.nodeType===Node.TEXT_NODE){const e=r.textContent,o=r.nextSibling;for(let o=e.length-1;o>=0;--o){r.splitText(o);if(t.toString().length!==n){l=o+1;break}}for(r.insertData(r.length,e.substr(r.length));r.nextSibling!==o;)r.nextSibling.remove()}if(o.nodeType===Node.TEXT_NODE){o!==r&&(o.appendData("?"),t.collapseToStart(),t.modify("extend","right","character"));const e=o.textContent,i=o.nextSibling;for(let i=o===r?l:e.length-1;i>=0;--i)if(o.splitText(i),""===t.toString()){s=i;break}for(o.insertData(o.length,e.substr(o.length));o.nextSibling!==i;)o.nextSibling.remove();o!==r&&o.deleteData(o.length-1,1),null===r&&(r=o,l=s)}else null===r&&(r=o);1===n&&yc&&yc.node===o&&yc.offset>s&&a&&(a=!1);!0===a?(t.collapse(o,s),t.extend(r,l)):!1===a?(t.collapse(r,l),t.extend(o,s)):t.setPosition(o,s);return i.setStart(o,s),i.setEnd(r,l),{range:i,mode:"normal"}}(e);return wc.set(e,o.range),window.setTimeout((()=>{wc.delete(e)}),0),o.range}const Ec=Quill.import("modules/keyboard"),Oc=Quill.import("modules/clipboard");class Sc{constructor(e){var t,o;this.ajustaHtml=(e="")=>e.replace(/ql-indent/g,"indent").replace(/ql-align-justify/g,"align-justify").replace(/ql-align-center/g,"align-center").replace(/ql-align-right/g,"align-right"),this.idNotaRodape=e.idNotaRodape,this.textoInicialNotaRodape=null!==(t=e.textoInicialNotaRodape)&&void 0!==t?t:"",this.domNodeNotaRodape=e.domNodeNotaRodape,this.tituloModal=e.tituloModal,this.modalElement=document.createElement("div"),this.modalElement.classList.add("modal"),this.shadowRoot=this.modalElement.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`\n      ${ec.strings.join("")}\n      <style>\n\n        :host {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          min-width: 400px;\n          max-width: 640px;\n          background-color: white;\n          padding: 20px;\n          border-radius: 10px;\n          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n          z-index: 1010;\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n          opacity: 0;\n          transform: translate(-50%, -50%) scale(0.95);\n          transition: opacity 0.3s, transform 0.3s;\n        }\n\n        .modal-body .ql-editor {\n          min-height: 400px;\n        }\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-title {\n          margin: 0;\n          font-size: 20px;\n        }\n\n        .modal-footer {\n          display: flex;\n          gap: 10px;\n          justify-content: flex-end;\n        }\n\n        .modal-textarea {\n          width: 100%;\n          height: 100px;\n          margin-bottom: 15px;\n          font-family: inherit;\n          font-size: inherit;\n          padding: 10px;\n          box-sizing: border-box;\n        }\n\n        .modal-close-button {\n          cursor: pointer;\n          background-color: #eee;\n          padding: 5px 10px;\n          border-radius: 5px;\n          transition: background-color 0.3s;\n          border: none;\n        }\n\n        .header-close-button {\n          background-color: transparent;\n          font-size: 30px;\n        }\n\n        .modal-save-button {\n          cursor: pointer;\n          background-color: #0284c7;\n          color: white;\n          padding: 9px 14px;\n          border-radius: 5px;\n          border: none;\n        }\n\n        .modal-save-button:hover {\n          background-color: #0ea5e9;\n        }\n\n        .modal-close-button: hover {\n          background-color: #ddd;\n        }\n\n        @media (max-width: 600px) {\n          :host {\n            width: 80%;\n            min-width: 0;\n          }\n        }\n        .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n          content: 'Salvar';\n        }\n        .ql-snow .ql-tooltip a.ql-action::after {\n          display: inline;\n          content: 'Editar';\n        }\n\n        .ql-snow .ql-tooltip a.ql-remove::before {\n          display: inline;\n          content: 'Remover';\n        }\n\n        .ql-snow .ql-tooltip[data-mode='link']::before  {\n          content: 'Insira o link:';\n        }\n\n        .ql-snow .ql-tooltip::before {\n          content: 'Visite a URL:';\n        }\n      </style>\n      <div class="modal-header">\n        <h1 id="modalTitle" class="modal-title">Editar nota de rodapé</h1>\n        <button class="modal-close-button header-close-button" aria-label="Fechar" title="Fechar">&times;</button>\n      </div>\n      <div class="modal-body">\n        <div id="editor-nota-rodape-container"></div>\n      </div>\n      <div class="modal-footer">\n        <button class="modal-save-button" aria-label="Salvar">Salvar</button>\n        <button class="modal-close-button" aria-label="Fechar">Fechar</button>\n      </div>\n    `,this.overlayElement=document.createElement("div"),this.overlayElement.classList.add("overlay"),this.overlayElement.style.opacity="0",this.overlayElement.style.transition="opacity 0.3s",this.overlayElement.style.position="fixed",this.overlayElement.style.top="0",this.overlayElement.style.left="0",this.overlayElement.style.width="100%",this.overlayElement.style.height="100%",this.overlayElement.style.backgroundColor="rgba(0, 0, 0, 0.2)",this.overlayElement.style.zIndex="1000",document.body.appendChild(this.overlayElement),document.body.appendChild(this.modalElement),this.keydownListener=e=>{"Escape"===e.key&&this.close()},document.addEventListener("keydown",this.keydownListener),Array.from(this.shadowRoot.querySelectorAll(".modal-close-button")).forEach((e=>e.addEventListener("click",(()=>this.close())))),null===(o=this.shadowRoot.querySelector(".modal-save-button"))||void 0===o||o.addEventListener("click",this.save.bind(this));const i=this.shadowRoot.querySelector("#editor-nota-rodape-container");Quill.register("modules/keyboard",Ec,!0),Quill.register("modules/clipboard",Oc,!0),Quill.register("formats/estilo-texto",ic,!0),Quill.register("formats/text-indent",uc,!0),Quill.register("formats/margin-bottom",nc,!0),this.quill=new Quill(i,{formats:["bold","italic","underline","link"],modules:{toolbar:{container:[["bold","italic","underline"],["link"]]}},placeholder:"Digite a nota de rodapé aqui...",theme:"snow"});this.quill.selection.getNativeRange=()=>(e=>{if(e){const t=e;if(t.baseNode&&(t.startContainer=e.baseNode,t.endContainer=e.focusNode,t.startOffset=e.baseOffset,t.endOffset=e.focusOffset,t.endOffset<t.startOffset&&(t.startContainer=e.focusNode,t.endContainer=e.baseNode,t.startOffset=e.focusOffset,t.endOffset=e.baseOffset)),t.startContainer)return{start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t}}return null})(_c(this.quill.root.getRootNode())),document.addEventListener("selectionchange",(()=>{this.quill.selection.update()}))}open(){var e,t;this.overlayElement.style.display="block",setTimeout((()=>{this.overlayElement.style.opacity="1",this.modalElement.style.opacity="1",this.modalElement.style.transform="translate(-50%, -50%) scale(1)"}),10),this.quill.root.innerHTML=null!==(e=this.textoInicialNotaRodape)&&void 0!==e?e:"";const o=this.shadowRoot.querySelector(".modal-title");o&&(o.innerHTML=null!==(t=this.tituloModal)&&void 0!==t?t:o.innerHTML)}close(e=!1){(e||this.shouldClose())&&(this.modalElement.style.opacity="0",this.overlayElement.style.opacity="0",setTimeout((()=>this.removeModal()),300))}shouldClose(){const e=this.quill.root.innerHTML;return console.log(e,this.textoInicialNotaRodape),e===this.textoInicialNotaRodape||confirm("Tem certeza que deseja fechar? As alterações não salvas serão perdidas.")}removeModal(){document.removeEventListener("keydown",this.keydownListener),this.modalElement.remove(),this.overlayElement.remove()}save(){const e=this.quill.root.innerHTML;e!==this.textoInicialNotaRodape&&e?(this.domNodeNotaRodape.dispatchEvent(new CustomEvent("nota-rodape:input",{detail:{id:this.idNotaRodape,texto:this.quill.root.innerHTML}})),this.close(!0)):this.close(!0)}}const Ic=Quill.import("delta"),kc=Quill.import("core/module"),Cc=Quill.import("blots/embed"),Nc=Quill.import("blots/text"),Tc=Quill.import("parchment"),qc={scope:Tc.Scope.INLINE_ATTRIBUTE},Rc=new Tc.Attributor.Attribute("id-nota-rodape","id-nota-rodape",qc),Dc=new Tc.Attributor.Attribute("numero","numero",qc),Pc=new Tc.Attributor.Attribute("texto","texto",qc);class Lc extends Cc{static create(e){let t=super.create(e);return t.setAttribute("class","nota-rodape"),t.setAttribute("contenteditable","false"),Lc.valueToAttributes(e,t),t}static value(e){return e.notaRodape||Lc.buildNotaRodape(e)}format(e,t){if(e!==this.statics.blotName||!t)return super.format(e,t);Lc.valueToAttributes(t,this.domNode)}static buildNotaRodape(e){return{id:e.getAttribute("id-nota-rodape"),numero:e.getAttribute("numero"),texto:tl(e.getAttribute("texto"))}}static valueToAttributes(e,t){e&&"boolean"!=typeof e&&(e.id&&t.setAttribute("id-nota-rodape",e.id),e.numero&&t.setAttribute("numero",e.numero),t.notaRodape=e,t.innerText=e.numero,t.setAttribute("texto",(e=>{const t=document.createElement("p");return t.textContent=e,t.innerHTML||""})(e.texto)))}}Lc.blotName="nota-rodape",Lc.tagName="nota-rodape",Lc.allowedChildren=[Nc];function Mc(e,t,o,i){var a,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const $c=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){window.customElements.define(e,t)}}})(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,jc=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(o){o.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}};function zc(e){return(t,o)=>void 0!==o?((e,t,o)=>{t.constructor.createProperty(o,e)})(e,t,o):jc(e,t)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function Fc(e){return zc({...e,state:!0})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Bc=({finisher:e,descriptor:t})=>(o,i)=>{var a;if(void 0===i){const i=null!==(a=o.originalKey)&&void 0!==a?a:o.key,r=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(o.key)}:{...o,key:i};return null!=e&&(r.finisher=function(t){e(t,i)}),r}{const a=o.constructor;void 0!==t&&Object.defineProperty(o,i,t(i)),null==e||e(a,i)}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;function Uc(e,t){return Bc({descriptor:o=>{const i={get(){var t,o;return null!==(o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==o?o:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof o?Symbol():"__"+o;i.get=function(){var o,i;return void 0===this[t]&&(this[t]=null!==(i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Vc(e){return Bc({descriptor:t=>({get(){var t,o;return null!==(o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelectorAll(e))&&void 0!==o?o:[]},enumerable:!0,configurable:!0})})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Hc;null===(Hc=window.HTMLSlotElement)||void 0===Hc||Hc.prototype.assignedElements;
/**
@license
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Gc=e=>t=>class extends t{connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._storeUnsubscribe=e.subscribe((()=>this.stateChanged(e.getState()))),this.stateChanged(e.getState())}disconnectedCallback(){this._storeUnsubscribe(),super.disconnectedCallback&&super.disconnectedCallback()}stateChanged(e){}};class Qc{constructor(){this.urlConsultaParlamentares="api/parlamentares",this.urlAutocomplete="api/autocomplete-norma",this.tamanhoMaximoAnexo=5120,this.tamanhoMaximoImagem=2048}}function Kc(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Wc="function"==typeof Symbol&&Symbol.observable||"@@observable",Xc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Yc={INIT:"@@redux/INIT"+Xc(),REPLACE:"@@redux/REPLACE"+Xc(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Xc()}};function Jc(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Zc(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";var o=function(e){return"function"==typeof e.constructor?e.constructor.name:null}(e);switch(o){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return o}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}function eu(e){var t=typeof e;return"production"!==process.env.NODE_ENV&&(t=Zc(e)),t}function tu(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function ou(){}"production"!==process.env.NODE_ENV&&"string"==typeof ou.name&&"isCrushed"!==ou.name&&tu('You are currently using minified code outside of NODE_ENV === "production". This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) to ensure you have the correct code for your production build.');class iu{constructor(e){this.hotkey="(Ctrl+Alt+G)",this.descricao="Adicionar Título, Capítulo, Seção e outros"+(e?" "+e:""),this.posicao=e}execute(e,t,o,i,a){return{type:"ADICIONAR_AGRUPADOR_ARTIGO",atual:e,novo:{tipo:t,posicao:i,manterNoMesmoGrupoDeAspas:a}}}}const au=new iu,ru=new iu("antes");function nu(e){return{type:"ADICIONAR_ALERTA",alerta:{id:e.id,tipo:e.tipo,mensagem:e.mensagem,podeFechar:e.podeFechar,exibirComandoEmenda:e.exibirComandoEmenda}}}function su(e){return{type:"REMOVER_ALERTA",id:e}}const lu=new class{constructor(){this.descricao="Alteração com Assistente"}execute(e,t,o){return{type:"ASSISTENTE_ALTERACAO",atual:e,norma:t,dispositivos:o}}},cu={agrupadorGenerico:{tipo:"DispositivoAgrupadorGenerico",name:void 0,tagId:"dg",descricao:void 0,descricaoPlural:void 0,tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},alinea:{tipo:"Alinea",name:"Alinea",tagId:"ali",descricao:"Alínea",descricaoPlural:"Alíneas",tiposPermitidosPai:["Inciso"],tiposPermitidosFilhos:["Item"],tipoProvavelFilho:"Item",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},articulacao:{tipo:"Articulacao",name:"Articulacao",tagId:"",descricao:"Articulação",descricaoPlural:"Articulações",tiposPermitidosPai:[],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},artigo:{tipo:"Artigo",name:"Artigo",tagId:"art",descricao:"Artigo",descricaoPlural:"Artigos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},capitulo:{tipo:"Capitulo",name:"Capitulo",tagId:"cap",descricao:"Capítulo",descricaoPlural:"Capítulos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo"],tiposPermitidosFilhos:["Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},caput:{tipo:"Caput",name:"Caput",tagId:"cpt",descricao:"Caput",descricaoPlural:"Capita",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},generico:{tipo:"DispositivoGenerico",name:void 0,tagId:"gen",descricao:"Dispositivo genérico",descricaoPlural:"Dispositivos genéricos",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],tiposPermitidosFilhos:["Paragrafo","Inciso","Alinea","Item"],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},inciso:{tipo:"Inciso",name:"Inciso",tagId:"inc",descricao:"Inciso",descricaoPlural:"Incisos",tiposPermitidosPai:["Artigo","Caput","Paragrafo"],tiposPermitidosFilhos:["Alinea"],tipoProvavelFilho:"Alinea",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},item:{tipo:"Item",name:"Item",tagId:"ite",descricao:"Item",descricaoPlural:"Itens",tiposPermitidosPai:["Alinea"],tiposPermitidosFilhos:[],tipoProvavelFilho:"DispositivoGenerico",INDICADOR_SEQUENCIA:[";","; e","; ou"],INDICADOR_FIM_SEQUENCIA:["."],INDICADOR_DESDOBRAMENTO:[":"]},livro:{tipo:"Livro",name:"Livro",tagId:"liv",descricao:"Livro",descricaoPlural:"Livros",tiposPermitidosPai:["Articulacao","Parte"],tiposPermitidosFilhos:["Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},omissis:{tipo:"Omissis",name:"Omissis",tagId:"omi",descricao:"Linha pontilhada (omissis)",descricaoPlural:"Linhas pontilhadas (omissis)",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Caput","Paragrafo","Alinea","Inciso"],tiposPermitidosFilhos:["Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo","Paragrafo","Alinea","Inciso","Item"],tipoProvavelFilho:void 0,INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:["NA"]},paragrafo:{tipo:"Paragrafo",name:"Paragrafo",tagId:"par",descricao:"Parágrafo",descricaoPlural:"Parágrafos",tiposPermitidosPai:["Artigo"],tiposPermitidosFilhos:["Inciso"],tipoProvavelFilho:"Inciso",INDICADOR_SEQUENCIA:["."],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:[":"]},parte:{tipo:"Parte",name:"Parte",tagId:"prt",descricao:"Parte",descricaoPlural:"Partes",tiposPermitidosPai:["Articulacao"],tiposPermitidosFilhos:["Livro","Titulo","Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},secao:{tipo:"Secao",name:"Secao",tagId:"sec",descricao:"Seção",descricaoPlural:"Seções",tiposPermitidosPai:["Articulacao","Parte","Livro","Titulo","Capitulo"],tiposPermitidosFilhos:["Subsecao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},subsecao:{tipo:"Subsecao",name:"Subsecao",tagId:"sub",descricao:"Subseção",descricaoPlural:"Subseções",tiposPermitidosPai:["Secao"],tiposPermitidosFilhos:["Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},titulo:{tipo:"Titulo",name:"Titulo",tagId:"tit",descricao:"Título",descricaoPlural:"Títulos",tiposPermitidosPai:["Articulacao","Parte","Livro"],tiposPermitidosFilhos:["Capitulo","Secao","Artigo"],tipoProvavelFilho:"Artigo",INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:[""],INDICADOR_DESDOBRAMENTO:["NA"]},ementa:{tipo:"Ementa",name:"Ementa",tagId:"eme",descricao:"Ementa",descricaoPlural:"Ementas",tiposPermitidosPai:["Articulacao"],tiposPermitidosFilhos:[],tipoProvavelFilho:void 0,INDICADOR_SEQUENCIA:["NA"],INDICADOR_FIM_SEQUENCIA:["NA"],INDICADOR_DESDOBRAMENTO:["NA"]}};class uu{constructor(e,t){var o,i;this.isDispositivoAlteracao=!1,this.descricao=`Adicionar ${null!==(i=null===(o=null==e?void 0:e.descricao)||void 0===o?void 0:o.toLowerCase())&&void 0!==i?i:""} ${t&&"filho"!==t?t:""}`,this.tipo=null==e?void 0:e.tipo,this.posicao=t}execute(e,t,o,i=!1){return{type:"ADICIONAR_ELEMENTO",atual:e,novo:{tipo:null!=o?o:this.tipo,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:t}},hasDesmembramento:i,posicao:this.posicao}}}const du=new uu,pu=new uu(cu.artigo),hu=new uu(cu.artigo,"antes"),mu=new uu(cu.artigo,"depois");new uu(cu.artigo,"filho");const fu=new uu(cu.alinea),vu=new uu(cu.alinea,"antes"),gu=new uu(cu.alinea,"depois"),bu=new uu(cu.alinea,"filho"),yu=new uu(cu.inciso),xu=new uu(cu.inciso,"antes"),Au=new uu(cu.inciso,"depois"),wu=new uu(cu.inciso,"filho"),_u=new uu(cu.item),Eu=new uu(cu.item,"antes"),Ou=new uu(cu.item,"depois"),Su=new uu(cu.item,"filho"),Iu=new uu(cu.omissis),ku=new uu(cu.paragrafo),Cu=new uu(cu.paragrafo,"antes"),Nu=new uu(cu.paragrafo,"depois"),Tu=new uu(cu.paragrafo,"filho");const qu=new class{constructor(){this.descricao="Adicionar Elemento from Clipboard"}execute(e,t,o,i=!1,a=!0,r="depois"){return{type:"ADICIONAR_ELEMENTOS_FROM_CLIPBOARD",atual:e,novo:{isDispositivoAlteracao:i,conteudo:{texto:t}},isColarSubstituindo:a,posicao:r}}};class Ru{constructor(e){this.descricao="Adicionar "+e.descricao,this.tipo=e.tipo}execute(e,t){return{type:"AGRUPAR_ELEMENTO",atual:e,novo:{tipo:this.tipo,uuid:+t}}}}const Du=new Ru(cu.parte),Pu=new Ru(cu.livro),Lu=new Ru(cu.titulo),Mu=new Ru(cu.capitulo),$u=new Ru(cu.secao),ju=new Ru(cu.subsecao),zu="APLICAR_ALTERACOES_EMENDA";const Fu=new class{constructor(){this.descricao="Atualizar"}execute(e,t=[]){return{type:zu,alteracoesEmenda:e,revisoes:t}}};const Bu=new class{constructor(){this.descricao="Atualizar Norma Referenciada"}execute(e){return this.tipo=e.tipo,{type:"ATUALIZAR_REFERENCIA_ELEMENTO",atual:e}}};const Uu=new class{constructor(){this.descricao="Atualizar dispositivo"}execute(e){return this.tipo=e.tipo,{type:"ATUALIZAR_TEXTO_ELEMENTO",atual:e}}};const Vu=new class{constructor(){this.descricao="Corrigir automaticamente"}execute(e,t){return{type:"AUTO_FIX",atual:e,mensagem:t}}};const Hu=new class{constructor(){this.descricao="Elemento selecionado"}execute(e){return{type:"ELEMENTO_SELECIONADO",atual:e}}};const Gu=new class{constructor(){this.descricao="Adicionar artigo para alterar outra norma"}execute(e){return{type:"INFORMAR_DADOS_ASSISTENTE",atual:e}}};class Qu{constructor(e,t,o,i){this.descricao=e,this.nomeAcao=t,this.hotkey=o,this.existeNaNormaAlterada=i}execute(e){return{type:"INFORMAR_EXISTENCIA_NA_NORMA",subType:this.nomeAcao,atual:e,existeNaNormaAlterada:this.existeNaNormaAlterada}}}const Ku=new Qu("Considerar existente na norma","considerarExistenteNaNorma","(Ctrl+Alt+X)",!0),Wu=new Qu("Considerar novo na norma","considerarNovoNaNorma","(Ctrl+Alt+X)",!1);class Xu{constructor(){this.descricao="Informar norma alterada"}execute(e){return{type:"INFORMAR_NORMA",atual:e}}}const Yu=new Xu;class Ju{constructor(){this.hotkey="(Alt+⇣)",this.descricao="Mover para baixo"}execute(e){return{type:"Mover para baixo",atual:e}}}const Zu=new Ju;class ed{constructor(){this.hotkey="(Alt+⇡)",this.descricao="Mover para cima"}execute(e){return{type:"Mover para cima",atual:e}}}const td=new ed,od="ABRIR_ARTICULACAO";class id{constructor(){this.hotkey="(Ctrl+D)",this.descricao="Remover"}execute(e,t){return{type:"REMOVER_ELEMENTO",atual:e,elementoLinhaAnterior:t}}}const ad=new id;class rd{constructor(){this.hotkey="(Ctrl+Alt+N)",this.descricao="Numerar dispositivo"}execute(e,t){return this.tipo=e.tipo,{type:"RENUMERAR_ELEMENTO",atual:e,novo:{numero:t}}}}const nd=new rd;const sd=new class{constructor(){this.descricao="Abandonar modificações"}execute(e){return{type:"RESTAURAR_ELEMENTO",atual:e}}};const ld=new class{constructor(){this.descricao="Suprimir apenas o Agrupador"}execute(e){return{type:"SUPRIMIR_AGRUPADOR",atual:e}}};const cd=new class{constructor(){this.descricao="Suprimir"}execute(e){return{type:"SUPRIMIR_ELEMENTO",atual:e}}};class ud{constructor(e,t,o,i){this.descricao=t,this.tipo=e.tipo,this.nomeAcao=o,this.hotkey=i}execute(e){return{type:"TRANSFORMAR_TIPO_ELEMENTO",subType:this.nomeAcao,atual:e,novo:{tipo:this.tipo}}}}const dd=new ud(cu.omissis,"Omitir Alíneas","transformarAlineaEmOmissisAlinea","(Ctrl+Alt+O)"),pd=new ud(cu.omissis,"Omitir Incisos","transformarIncisoCaputEmOmissisIncisoCaput","(Ctrl+Alt+O)"),hd=new ud(cu.omissis,"Omitir Itens","transformarItemEmOmissisItem","(Ctrl+Alt+O)"),md=new ud(cu.omissis,"Omitir Parágrafos","transformarParagrafoEmOmissisParagrafo","(Ctrl+Alt+O)"),fd=new ud(cu.omissis,"Omitir Incisos","transformarIncisoParagrafoEmOmissisIncisoParagrafo","(Ctrl+Alt+O)"),vd=new ud(cu.inciso,"Transformar em Inciso","transformarAlineaEmIncisoCaput","(Shift+Tab)"),gd=new ud(cu.inciso,"Transformar em Inciso","transformarAlineaEmIncisoParagrafo","(Shift+Tab)"),bd=new ud(cu.item,"Transformar em Item","transformarAlineaEmItem","(Tab)"),yd=new ud(cu.paragrafo,"Transformar em Parágrafo","transformarArtigoEmParagrafo","(Tab)"),xd=new ud(cu.inciso,"Transformar em Inciso","transformarDispositivoGenericoEmInciso"),Ad=new ud(cu.alinea,"Transformar em Alínea","transformarDispositivoGenericoEmAlinea"),wd=new ud(cu.item,"Transformar em Item","transformarDispositivoGenericoEmItem"),_d=new ud(cu.paragrafo,"Transformar em Parágrafo","transformarIncisoParagrafoEmParagrafo","(Shift+Tab)"),Ed=new ud(cu.paragrafo,"Transformar em Parágrafo","transformarIncisoCaputEmParagrafo","(Shift+Tab)"),Od=new ud(cu.alinea,"Transformar em Alínea","transformarIncisoCaputEmAlinea","(Tab)"),Sd=new ud(cu.alinea,"Transformar em Alínea","transformarIncisoParagrafoEmAlinea","(Tab)"),Id=new ud(cu.alinea,"Transformar em Alínea","transformarOmissisEmAlinea"),kd=new ud(cu.artigo,"Transformar em Artigo","transformarOmissisEmArtigo"),Cd=new ud(cu.inciso,"Transformar em Inciso","transformarOmissisEmIncisoCaput"),Nd=new ud(cu.inciso,"Transformar em Inciso","transformarOmissisEmIncisoParagrafo"),Td=new ud(cu.item,"Transformar em Item","transformarOmissisEmItem"),qd=new ud(cu.paragrafo,"Transformar em Parágrafo","transformarOmissisEmParagrafo"),Rd=new ud(cu.alinea,"Transformar em Alínea","transformarItemEmAlinea","(Shift+Tab)"),Dd=new ud(cu.artigo,"Transformar em Artigo","transformarParagrafoEmArtigo","(Shift+Tab)"),Pd=new ud(cu.inciso,"Transformar em Inciso","transformarParagrafoEmIncisoParagrafo","(Tab)"),Ld=new ud(cu.inciso,"Transformar em Inciso","transformarParagrafoEmIncisoCaput","(Tab)"),Md="VALIDAR_ARTICULACAO";const $d=new class{constructor(){this.descricao="Articulação validada"}execute(){return{type:Md}}};const jd=new class{constructor(){this.descricao="Elemento validado"}execute(e){return{type:"VALIDAR_ELEMENTO",atual:e}}};class zd{constructor(){this.descricao="Atualizar nota de alteração"}execute(e,t){return this.tipo=e.tipo,{type:"ATUALIZAR_NOTA_ALTERACAO",atual:e,notaAlteracao:t}}}const Fd=new zd;const Bd=new class{constructor(){this.descricao="Remover dispositivo sem texto"}execute(e,t){return{type:"REMOVER_ELEMENTO_SEM_TEXTO",atual:e,key:t}}};var Ud;!function(e){e.DISPOSITIVO_ADICIONADO="Dispositivo Adicionado",e.DISPOSITIVO_NOVO="Dispositivo Novo",e.DISPOSITIVO_MODIFICADO="Dispositivo Modificado",e.DISPOSITIVO_ORIGINAL="Dispositivo Original",e.DISPOSITIVO_SUPRIMIDO="Dispositivo Suprimido"}(Ud||(Ud={}));const Vd=e=>[Ud.DISPOSITIVO_ADICIONADO.toString(),Ud.DISPOSITIVO_MODIFICADO.toString(),Ud.DISPOSITIVO_SUPRIMIDO.toString()].includes(e.situacao.descricaoSituacao),Hd=".................................................................................................................................................................................................................................................................................",Gd=e=>e.tipo===cu.articulacao.tipo,Qd=e=>e.tipo===cu.generico.tipo,Kd=e=>e.tipo===cu.artigo.tipo,Wd=e=>e.tipo===cu.caput.tipo,Xd=e=>e.tipo===cu.paragrafo.tipo,Yd=e=>e.tipo===cu.inciso.tipo,Jd=e=>Yd(e)&&Wd(e.pai),Zd=e=>Yd(e)&&Xd(e.pai),ep=e=>e.tipo===cu.alinea.tipo,tp=e=>e.tipo===cu.item.tipo,op=e=>e.tipo===cu.omissis.tipo,ip=e=>[cu.articulacao.tipo,cu.agrupadorGenerico.tipo,cu.capitulo.tipo,cu.livro.tipo,cu.parte.tipo,cu.secao.tipo,cu.subsecao.tipo,cu.titulo.tipo].includes(e.tipo),ap=e=>ip(e)&&!Gd(e),rp=e=>e.tipo===cu.agrupadorGenerico.tipo,np=e=>[cu.paragrafo.tipo,cu.inciso.tipo,cu.alinea.tipo,cu.item.tipo].includes(e.tipo),sp=e=>e.tipo===cu.ementa.tipo,lp=e=>void 0!==e&&((e=>e.tipo===cu.capitulo.tipo)(e)||(e=>e.tipo===cu.parte.tipo)(e)||(e=>e.tipo===cu.livro.tipo)(e)||(e=>e.tipo===cu.titulo.tipo)(e)),cp=e=>op(e)||e.texto.startsWith(Hd)||e.texto.indexOf(Hd)>-1;var up;function dp(e){if(!e)return e;if(Gd(e))return e;if(void 0===e.pai)throw new Error("Não foi encontrada a articulação");return dp(e.pai)}function pp(e,t){if(t.uuid===e)return t;if(null!==t.filhos){let o=null;const i=t.hasAlteracao()?t.alteracoes.filhos:t.filhos;for(let t=0;null===o&&t<i.length;t++)o=pp(e,i[t]);return o}return null}!function(e){e.EMENDA="emenda",e.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",e.NORMA="norma",e.PROJETO="projeto"}(up||(up={}));const hp=(e,t)=>{if(void 0===t)throw new Error("uuid não foi informado");return pp(t,e)},mp=e=>{var t;return Np(e)?mp(e.filhos[e.filhos.length-1]):(null==e?void 0:e.hasAlteracao())&&(null===(t=e.alteracoes)||void 0===t?void 0:t.filhos.length)?mp(e.alteracoes.filhos[e.alteracoes.filhos.length-1]):e},fp=e=>{if(Kd(e)){const t=e;return[t.caput,...t.filhos.filter((e=>Xd(e)||op(e)&&!Wd(e.pai)))]}return[...e.filhos]},vp=e=>Kd(e)?dp(e).artigos.filter((t=>t.tipo===e.tipo)):e.pai?e.pai.filhos.filter((t=>t.tipo===e.tipo)):[e],gp=(e,t,o)=>{if(null==e?void 0:e.filhos){for(let i=null==e?void 0:e.indexOf(t);i>=0;i--){const t=null==e?void 0:e.filhos[i];ip(t)&&o.push(t)}if(null==e?void 0:e.pai)return gp(e.pai,t.pai,o)}return o},bp=e=>Kd(e.pai)?e.pai:bp(e.pai),yp=e=>{const t=e.pai;return Kd(t)&&!Zp(t)?e.pai:yp(e.pai)},xp=(e,t)=>{if(!e.pai)return;if(Jp(e)){const o=e.pai.caput;return!t||t(o)?o:xp(o,t)}const o=Kd(e.pai)?wp(e.pai):e.pai.filhos,i=o.indexOf(e),a=i?mp(o[i-1]):e.pai;return!t||t(a)?a:xp(a,t)},Ap=(e,t,o)=>{if(!e)return;let i;if(o)i=Fp(o);else{const t=Kd(e)?wp(e):e.filhos;t.length&&(i=t[0])}return i||uh(e)?i?!t||t(i)?i:Ap(i,t):void 0:Ap(e.pai,t,e)},wp=e=>[e.caput,...Ch(e)],_p=(e,t)=>{if(null==e?void 0:e.filhos){for(let o=(null==e?void 0:e.indexOf(t))-1;o>=0;o--){const t=null==e?void 0:e.filhos[o];if(Kd(t))return t;if(ip(t))return Ep(t)}if(null==e?void 0:e.pai)return _p(e.pai,t.pai)}},Ep=e=>{if(void 0!==e&&e.filhos)for(let t=e.filhos.length-1;t>=0;t--){const o=e.filhos[t];if(Kd(o))return o;if(ip(o))return Ep(o)}},Op=e=>{const t=e.pai.indexOf(e);return e.pai.filhos.filter(((e,o)=>o>t&&ip(e)))[0]},Sp=e=>{var t;return(null===(t=e.filhos)||void 0===t?void 0:t.filter((e=>Qd(e))).length)>0},Ip=e=>1===vp(e).length,kp=e=>{const t=vp(e);return t[t.length-1]===e},Cp=e=>vp(e)[0]===e,Np=e=>e.filhos&&e.filhos.length>0,Tp=e=>{var t;const o=null===(t=e.pai)||void 0===t?void 0:t.indexOf(e);return o&&o>0?e.pai.filhos[o-1]:void 0},qp=e=>{const t=vp(e),o=t.indexOf(e);return o>0?t[o-1]:void 0},Rp=e=>{const t=e.pai.indexOf(e);if(0===t)return;const o=e.pai.filhos.filter(((o,i)=>i<t&&(o.tipo===e.tipo||o.tipo===Iu.tipo)));return o.pop()},Dp=e=>{const t=e.pai.indexOf(e);if(0===t)return;const o=e.pai.filhos.filter(((o,i)=>i<t&&o.pai===e.pai));return o.pop()},Pp=e=>{const t=e.pai,o=fp(t),i=o.indexOf(e);if(!(i>0))return t;e=o[i-1];let a=fp(e);for(;a.length;)e=a[a.length-1],a=fp(e);return e},Lp=e=>{if(!e.pai)return;const t=e.pai.indexOf(e);return t<e.pai.filhos.length-1?e.pai.filhos[t+1]:void 0},Mp=e=>{const t=vp(e),o=t.indexOf(e);return o<t.length-1?t[o+1]:void 0},$p=e=>{var t,o,i;const a=null===(t=e.pai)||void 0===t?void 0:t.indexOf(e);return null!==(i=null===(o=e.pai)||void 0===o?void 0:o.filhos.filter(((t,o)=>o<a&&t.tipo===e.tipo&&t.pai===e.pai)))&&void 0!==i?i:[]},jp=e=>{var t,o,i;const a=null===(t=e.pai)||void 0===t?void 0:t.indexOf(e);return null!==(i=null===(o=e.pai)||void 0===o?void 0:o.filhos.filter(((t,o)=>o>a&&t.tipo===e.tipo)))&&void 0!==i?i:[]},zp=e=>{const t=e.pai.indexOf(e);if(t===e.pai.filhos.length-1)return;const o=e.pai.filhos.filter(((o,i)=>i>t&&(o.tipo===e.tipo||o.tipo===Iu.tipo)));return o[0]},Fp=e=>{const t=e.pai.indexOf(e);if(t===e.pai.filhos.length-1)return;const o=e.pai.filhos.filter(((o,i)=>i>t&&o.pai===e.pai));return o[0]},Bp=(e,t=!1)=>{if(Kd(e)){const t=dp(e),o=dp(e).indexOfArtigo(e);return t.artigos.filter(((e,t)=>t>o))}const o=e.pai.indexOf(e);return e.pai.filhos.filter(((e,i)=>t?i>o:i>=o)).filter((t=>e.tipo===t.tipo))},Up=e=>Kd(e)&&Ip(e),Vp=e=>Xd(e)&&Ip(e),Hp=e=>e.cabecaAlteracao||Gp(e)?e:Hp(e.pai),Gp=e=>!!e.pai&&Jp(e.pai),Qp=e=>jp(e).filter((e=>eh(e)&&"1"===e.numero)).length>0,Kp=e=>{const t=Hp(e),o=nh(t);if(o[o.length-1]===(Wd(e)?e.pai:e)){if(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&!Jp(t.pai)){const e=Ap(t,(e=>Kd(e)||ap(e)||!Zp(e)));return!(e&&Zp(e)&&!Jp(e.pai)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)}return!0}return!1},Wp=(e,t)=>{if(void 0!==e&&!Kd(e)){for(let o=t+1;o<e.filhos.length;o++){const t=e.filhos[o];if(np(t))return t}return Wp(e.pai,e.pai.indexOf(e))}},Xp=e=>{if(Lp(e))return!1;if(Xd(e)||!np(e))return!1;const t=Wp(e.pai,e.pai.indexOf(e));return!(t&&!Xd(t))},Yp=e=>!ip(e)&&(Kd(e)&&(e=e.caput),!rh([],e.filhos).some((e=>!ih(e)))),Jp=e=>Gd(e)&&void 0!==e.pai,Zp=e=>{if(!!e.isDispositivoAlteracao)return!0;try{return void 0!==dp(e).pai}catch(e){return!1}},eh=e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL,th=e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO,oh=e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO,ih=e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO,ah=e=>oh(e)||ih(e),rh=(e,t)=>(null==t||t.forEach((t=>{e.push(t),Np(t)&&rh(e,t.filhos)})),e),nh=e=>sh(e,[]),sh=(e,t)=>{t.push(e);const o=e.hasAlteracao()?e.alteracoes.filhos:e.filhos;return o.length&&o.forEach((e=>sh(e,t))),t},lh=(e,t)=>{if(e)if(t(e),e.tipo===cu.artigo.tipo){const o=e;o.caput&&(lh(o.caput,t),e.alteracoes&&lh(e.alteracoes,t),e.filhos.filter((e=>Xd(e)||op(e)&&!Wd(e.pai))).forEach((e=>{lh(e,t)})))}else e.alteracoes&&lh(e.alteracoes,t),e.filhos.forEach((e=>{lh(e,t)}))},ch=(e,t)=>{if(!e)return;let o=t(e);if(o)return o;if(e.tipo===cu.artigo.tipo){const i=e;if(i.caput){if(o=ch(i.caput,t),o)return o;if(e.alteracoes&&(o=ch(e.alteracoes,t),o))return o;for(const i of e.filhos.filter((e=>Xd(e)||op(e)&&!Wd(e.pai))))if(o=ch(i,t),o)return o}}else{if(e.alteracoes&&(o=ch(e.alteracoes,t),o))return o;for(const i of e.filhos)if(o=ch(i,t),o)return o}},uh=e=>e&&!e.pai&&e.tipo===cu.articulacao.tipo,dh=(e,t)=>{var o;if("ementa"===t)return null===(o=e.projetoNorma)||void 0===o?void 0:o.ementa;const i=ph(t);let a=e;if(i){const o=e.artigos.find((e=>i===e.id));if(o){if(t===i||t===i+"_cpt")return o;a=o}}return ch(a,(e=>t===e.id?e:void 0))},ph=e=>{const t=/^art\d+(-\d+)*/.exec(e);return(null==t?void 0:t.length)?t[0]:void 0},hh=(e,t)=>{if(!e||!t)return!1;let o=e.pai;for(;o;){if(o===t)return!0;o=o.pai}return!1},mh=e=>{if(!e)return!1;let t=e.pai;for(;t;){if(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)return!0;t=t.pai}return!1},fh=e=>{if(!e||!e.pai||ip(e.pai))return;const t=Lp(e);if(t&&op(t))return t;if(Wd(e)){const t=e.pai.filhos.filter((e=>Xd(e)||op(e)));return t.length>0&&op(t[0])?t[0]:void 0}return e.pai?fh(e.pai):void 0},vh=e=>{var t;const o=e.situacao.existeNaNormaAlterada;if(!Zp(e)||void 0===o)return;return[Ud.DISPOSITIVO_ADICIONADO+""].includes(null===(t=e.situacao)||void 0===t?void 0:t.descricaoSituacao)&&!o},gh=e=>{var t;const o="Caput"===e.tipo?e.pai:e;return!Zp(o)||null!==(t=vh(o))&&void 0!==t&&t},bh=e=>{if("Articulacao"!==e.tipo&&Zp(e)&&Kp(e)){return Hp(e).situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO}return!1},yh=(e,t=!1)=>{if(ip(e)){if(!t){const t=e.filhos.find((e=>ap(e)));if(t)return t}if(e.pai){const t=Mp(e);return t||yh(e.pai,!0)}}},xh=e=>yh(e.pai),Ah=e=>{var t,o;if(!ip(e)&&!Kd(e)&&!sp(e))return[];if(Zp(e))return["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"];const i=kh(e);if(!i)return["Parte","Livro","Titulo","Capitulo"];const a=Ih(e);if(!ip(e)&&a===i)return[i.tipo,Oh(i.tipo)].filter(Boolean);const r=ip(e)?e:e.pai;if(!a)return _h(i.tipo,null!==(t=Sh(r.tipo))&&void 0!==t?t:r.tipo);const n=_h(Oh(a.tipo),null!==(o=Sh(r.tipo))&&void 0!==o?o:r.tipo),s=Eh(i.tipo);return n.filter((e=>e&&Eh(e)>=s))},wh=e=>{const t=[];if(sp(e))return[];if(!ip(e))return Ah(e);if(Zp(e))return["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"];t.push(e.tipo);const o=kh(e),i=Oh(e.tipo);(!o||e===o||Eh(null!=i?i:"")>=Eh(o.tipo))&&t.push(i);const a=(e=>{const t=nh(dp(e)).filter(ip);return t[t.indexOf(e)-1]})(e);return a&&t.push(...Ah(a)),[...new Set(t)]},_h=(e="",t="")=>["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"].slice(Eh(e),Eh(t)+1),Eh=e=>["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"].indexOf(e),Oh=e=>{const t=["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"];return t[t.indexOf(e)-1]},Sh=e=>{const t=["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],o=t.indexOf(e);return-1===o?void 0:t[o+1]},Ih=e=>{const t=nh(dp(e)),o=t.indexOf(e);return t.filter(((e,t)=>t>o&&ip(e)&&!Gd(e)))[0]},kh=e=>dp(e).filhos.filter(ip)[0],Ch=e=>e.filhos.filter((t=>t.pai===e)),Nh=e=>{var t,o;return!!(null===(o=null===(t=dp(e).projetoNorma)||void 0===t?void 0:t.ementa)||void 0===o?void 0:o.texto)},Th=(e,t)=>{if(!t)throw new Error("uuid não foi informado");return qh(e,t)};function qh(e,t){if(e.uuid2===t)return e;if(null!==e.filhos){let o=null;const i=e.hasAlteracao()?e.alteracoes.filhos:e.filhos;for(let e=0;null===o&&e<i.length;e++)o=qh(i[e],t);return o}return null}class Rh{constructor(e){this.nome=e,this.valores=new Array,this.atributos=new Ws}toString(){if(!this.valores.length)return"<"+this.nome+this.atributos+"/>";const e=new Ws("<"+this.nome+this.atributos+">");return this.valores.forEach((t=>{e.append(t)})),e.append("</"+this.nome+">"),e.toString()}add(e){return e&&this.valores.push(e),this}addAtributo(e,t){return this.atributos.append(" "),this.atributos.append(e),t&&(this.atributos.append('="'),this.atributos.append(t),this.atributos.append('"')),this}}class Dh{static compare(e,t){if(!e||!t)throw new Error("Tentativa de comparação de dispositivo nulo.");if(!e.pai)return-1;if(!t.pai)return 1;const o=Dh.getIndices(e),i=Dh.getIndices(t);return Dh.comparaIndices(o,i)}static getIndices(e){const t=[];let o=this.getPaiParaComparacao(e);for(;o;)t.push(this.getIndexDoFilho(o,e)),e=o,o=this.getPaiParaComparacao(e);return t.reverse(),t}static getPaiParaComparacao(e){if(e.pai)return Kd(e.pai)&&Jp(e)?e.pai.caput:e.pai}static getIndexDoFilho(e,t){return Wd(t)?0:Xd(t)||op(t)&&Kd(e)?e.filhos.indexOf(t)+1:Jp(t)?-1:e.filhos.indexOf(t)}static comparaIndices(e,t){let o=0;const i=e.length,a=t.length;for(let r=0;r<i&&r<a&&0===o;r++)o=e[r]-t[r];return 0===o&&(o=i-a),o}}class Ph{static getAlteracao(e){let t=e;if(t.tipo===cu.alteracao.tipo)return t;if(Zp(t)){for(;t&&t.tipo!==cu.alteracao.tipo;)t=t.pai;return t}}static existeNaNormaAlterada(e){return e.situacao.existeNaNormaAlterada}}class Lh{static getDispositivosNaoOriginais(e){var t,o;const i=[];return(null===(o=null===(t=e.projetoNorma)||void 0===t?void 0:t.ementa)||void 0===o?void 0:o.situacao.descricaoSituacao)===Ud.DISPOSITIVO_MODIFICADO&&i.push(e.projetoNorma.ementa),lh(e,(e=>{e.pai&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL&&i.push(e)})),i}static getDispositivosAdicionados(e){const t=[];return lh(e,(e=>{e.pai&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&t.push(e)})),t}static getDispositivosComando(e){const t=new Array;for(const o of e){if(o.situacao.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL||Zp(o)||Jp(o))continue;const e=Lh.getDispositivoAfetado(o);e&&!t.includes(e)&&t.push(e)}return t}static getDispositivoAfetado(e){const t=e.pai;return uh(t)?e:Wd(t)&&t.pai.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL?t.filhos.find((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL))?e:Lh.getDispositivoAfetado(t.pai):Kd(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO?e:Lh.isAlteracaoIntegral(t)?Lh.getDispositivoAfetado(t):e}static retiraPrimeirosFilhosAdicionadosAgrupador(e){const t=e[0];if(Zp(t)||t.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO)return e;if(!e.find((e=>ap(e))))return e;const o=[];let i=[];return e.forEach((e=>{i.indexOf(e)<0&&(o.push(e),ap(e)&&(i=this.listaFilhosAdicionadosComAgrupador(e)))})),o}static listaFilhosAdicionadosComAgrupador(e){const t=[];return ch(e,(e=>e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&!Wd(e)&&!Jp(e)||(t.push(e),!1))),t}static getDispositivoAfetadoEmAlteracao(e){if(op(e)){if(Lh.isOmissisAdjacenteADispositivoDeEmenda(e))return}else if(e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&Lh.isTextoOmitido(e))return;const t=Wd(e.pai)?e.pai.pai:e.pai;return Lh.isAlteracaoIntegralEmAlteracao(t)?Lh.getDispositivoAfetadoEmAlteracao(t):e}static isTextoOmitido(e){var t;return op(e)||e.texto.startsWith(Hd)||ip(e)&&!!(null===(t=e.caput)||void 0===t?void 0:t.texto.startsWith(Hd))}static getDescricaoSituacaoParaComandoEmenda(e){return e.isDispositivoAlteracao&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&Ph.existeNaNormaAlterada(e)&&!op(e)?Ud.DISPOSITIVO_MODIFICADO:e.situacao.descricaoSituacao}static isMesmaSituacaoParaComandoEmenda(e,t){return this.getDescricaoSituacaoParaComandoEmenda(e)===this.getDescricaoSituacaoParaComandoEmenda(t)}static isAlteracaoIntegral(e){const t=this.getDescricaoSituacaoParaComandoEmenda(e);if(t===Ud.DISPOSITIVO_ORIGINAL)return!1;if(Zp(e)&&ap(e)&&t===Ud.DISPOSITIVO_SUPRIMIDO)return!1;if(t===Ud.DISPOSITIVO_SUPRIMIDO)return!0;if(t===Ud.DISPOSITIVO_ADICIONADO)return!ap(e);if(!e.filhos.length)return!Kd(e)||t!==Ud.DISPOSITIVO_ORIGINAL;for(const t of e.filhos)if(!Lh.isAlteracaoIntegral(t))return!1;return!0}static isAlteracaoIntegralEmAlteracao(e){return!Jp(e)&&(ap(e)?this.getDescricaoSituacaoParaComandoEmenda(e)===Ud.DISPOSITIVO_ADICIONADO:e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&!Lh.isTextoOmitido(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)}static getArvoreDispositivos(e){const t=new Map;return e.length?(e.forEach((e=>{this.atualizaMapa(e,t)})),t):t}static atualizaMapa(e,t){const o=this.getHierarquiaDispositivosDeUmDispositivo(e);let i=t;o.forEach((e=>{const t=i.get(e);if(t)i=t;else{const t=new Map;i.set(e,t),i=t}}))}static getHierarquiaDispositivosDeUmDispositivo(e){const t=new Array;t.push(e);let o=e.pai;for(;o&&!uh(o)&&!ap(o);)t.push(o),o=o.pai;return t.reverse(),t}static getArvoreDispositivosDeAlteracaoDeNorma(e){const t=new Map;if(!e.length)return t;for(const o of e)this.atualizaMapaDeAlteracaoDeNorma(o,t);return t}static atualizaMapaDeAlteracaoDeNorma(e,t){const o=this.getHierarquiaDispositivosDeUmDispositivo(e);let i=t;for(const e of o)if(Zp(e)&&!Jp(e))if(i.has(e))i=i.get(e);else{const t=new Map;i.set(e,t),i=t}}static isSequenciasPlural(e){const t=e.length;return 0!==t&&(t>1||Lh.isSequenciaPlural(e[0]))}static isSequenciaPlural(e){const t=e.getQuantidadeRanges();return 0!==t&&(t>1||e.getPrimeiroRange().getQuantidadeDispositivos()>1)}static getProximoAgrupador(e){let t=e;do{t=Lp(t)}while(t&&!ip(t));return t}static getDispositivoIrmaoPosterior(e){if(Kd(e)||ip(e))return this.getArtigoPosterior(e);if(!this.isUltimoDispositivoDoMesmoTipo(e)){const t=e.pai,o=t.filhos.indexOf(e)+1;return t.filhos[o]}}static getArtigoPosterior(e){const t=e.pai;if(t.filhos.length){for(let o=t.filhos.indexOf(e)+1;o<t.filhos.length;o++){const e=t.filhos[o];if(Kd(e))return e;if(ip(e)){const t=this.buscaProximoArtigo(e);if(t)return t}}if(t.pai)return this.getArtigoPosterior(t)}}static buscaProximoArtigo(e){const t=e.filhos;for(const e of t){if(Kd(e))return e;if(ip(e))return this.buscaProximoArtigo(e)}}static isUltimoDispositivoDoMesmoTipo(e){if(!e.pai)return!0;const t=e.pai,o=t.filhos.indexOf(e);return t.filhos.length===o+1||t.filhos[o+1].tipo!==e.tipo}static getFilhosEstiloLexML(e){return fp(e)}static getDispositivoAnteriorDireto(e){return Pp(e)}static getDispositivoPosteriorDireto(e){const t=this.getFilhosEstiloLexML(e);return t.length?t[0]:this.getProximoIrmaoRecursivo(e)}static getProximoIrmaoRecursivo(e){if(!e)return;const t=Lp(e);if(t)return t;{const t=e.pai;return t?void 0:this.getProximoIrmaoRecursivo(t)}}static getRotuloPais(e){const t=new Ws;let o;for(;e&&!Kd(e);)o=e.pai,t.append(o.pronomePossessivoSingular),t.append(o.getNumeracaoComRotuloParaComandoEmenda(e)),e=o;return t.toString()}static getDispositivosNaAlteracaoParaComando(e){const t=new Array;lh(e,(e=>{e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL&&t.push(e)}));const o=new Array;return t.forEach((e=>{const t=Lh.getDispositivoAfetadoEmAlteracao(e);t&&!o.includes(t)&&o.push(t)})),o.sort(Dh.compare),o}static isOmissisAdjacenteADispositivoDeEmenda(e){if(!op(e))return!1;let t=Lh.getDispositivoAnteriorDireto(e);if(Wd(t)&&(t=t.pai),t&&t.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL)return!0;const o=Lh.getDispositivoPosteriorDireto(e);return!(!o||o.situacao.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL)}static isMesmoTipoParaComandoEmenda(e,t){return e.tipo===t.tipo&&(!Kd(e)||Lh.isAlteracaoIntegral(e)===Lh.isAlteracaoIntegral(t))}static getTextoDoDispositivoOuOmissis(e,t=!1){return e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO||Wd(e)?" "+Lh.trataTextoParaCitacao(e,t):e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO?op(e)?" (Suprimir linha pontilhada)":" (Suprimir)":" "+new Rh("Omissis")}static trataTextoParaCitacao(e,t=!1){var o;let i=Kd(e)?e.caput.texto:null!==(o=e.texto)&&void 0!==o?o:"";return i.includes(Hd)&&(i=i.replace(Hd,new Rh("Omissis").toString())),i=t?i.replace(/”( *(?:\(NR\)) *)?/,""):i.replace(/”( *(?:\(NR\)) *)?/,"’$1 "),i.trim().replace(/\s{2,}/g," ").replace(/^<p>\s?/i,"").replace(/\s?<\/p>$/i,"").replace(/<\/?a.*?>/gi,"").replace(/\s([\\.,:?!])/g,"$1")}static isFechaAspas(e){return Kp(e)}static verificaNecessidadeRenumeracaoRedacaoFinal(e){for(const t of e)if(Lh.implicaEmRenumeracaoRedacaoFinal(t))return!0;return!1}static implicaEmRenumeracaoRedacaoFinal(e){return!(!e.rotulo||"0"!==e.numero&&!/.*(?:-\d).*/i.test(e.rotulo))||!(!Kd(e)&&!Xd(e)||1!==vp(e).filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL)).length)}static normalizaCabecalhoComandoEmenda(e){return Qs(e.replace(/caput/g,"<i>caput</i>"))}static verificaAgrupadoresAdicionadosEmSequencia(e,t){if(!ap(e)&&!ap(t))return!1;return!this.getFilhoNaoAdicionadoDeAgrupadorAdicionado(e)&&Fp(e)===t}static getFilhoNaoAdicionadoDeAgrupadorAdicionado(e){return ch(e,(e=>(Kd(e)||ap(e))&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO?e:void 0))}}var Mh,$h;!function(e){e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR"}(Mh||(Mh={})),function(e){e.INFORMAR_NORMA="É necessário informar a norma a ser alterada",e.OMISSIS_ANTES="É necessário uma linha pontilhada antes deste dispositivo",e.OMISSIS_SEQUENCIAIS="Não pode haver mais de uma linha pontilhada sequencialmente",e.RENUMERAR_DISPOSITIVO="Numere o dispositivo"}($h||($h={}));const jh=e=>{var t;const o=Kd(e)?e.caput:e;return Bs(o.texto,null!==(t=o.INDICADOR_DESDOBRAMENTO)&&void 0!==t?t:[])},zh=e=>{var t;const o=Kd(e)?e.caput:e;return Bs(o.texto,null!==(t=o.INDICADOR_FIM_SEQUENCIA)&&void 0!==t?t:[])},Fh=e=>{var t;const o=Kd(e)?e.caput:e;return Bs(o.texto,null!==(t=o.INDICADOR_SEQUENCIA)&&void 0!==t?t:[])},Bh=Hd,Uh=e=>new RegExp(Hs(Vs("o seguinte acréscimo:"))+"\\s*$").test(e)||new RegExp(Hs(Vs("os seguintes acréscimos:"))+"\\s*$").test(e)||new RegExp(Hs(Vs("passa a vigorar com a seguinte alteração:"))+"\\s*$").test(e)||new RegExp(Hs(Vs("passa a vigorar com as seguintes alterações:"))+"\\s*$").test(e),Vh=e=>/^[.]*(?:\s*)["”“]?(\s*)?\(NR\)\s*$/.test(e)?Bh:/["”]?(\s*)?\(NR\)?\s*$/.test(e)?e.replace(/["“](?!.*["”])/,"”"):e!==Hd&&e!==Bh&&new RegExp("^[.]+$").test(e)?Hd:e,Hh=e=>{var t,o;const i=[];var a;if((Gd(e)||e.texto)&&0!==e.texto.trim().length||Qh(i,Mh.ERROR,`Não foi informado um texto para ${e.artigoDefinido+" "+(null===(t=e.descricao)||void 0===t?void 0:t.toLowerCase())}.`),Gd(e)||!e.texto||function(e){const t=document.createElement("div");return t.innerHTML=e,t.innerHTML===e}(e.texto)||Qh(i,Mh.ERROR,"O conteúdo do dispositivo não é um HTML válido."),!Gd(e)&&e.texto&&e.texto.trim().length>500&&Qh(i,Mh.WARNING,"Pelo princípio da concisão, o texto dos dispositivos não deve ser extenso, devendo ser utilizadas frases curtas e concisas."),e.texto&&-1!==e.texto.indexOf("r$")&&Qh(i,Mh.WARNING,"O texto do dispositivo possui r$ (real brasileiro) com letra minúscula. Deveria ser R$ com letra maiúscula."),np(e)&&!Xd(e)&&e.texto&&/^[A-ZÀ-Ú]/.test(Fs(e.texto))&&0!==e.texto.indexOf("R$")&&Qh(i,Mh.WARNING,`${e.descricao} deveria iniciar com letra minúscula, a não ser que se trate de uma situação especial, como nome próprio.`),!np(e)||Xd(e)||op(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||Np(e)&&!Yp(e)||Xp(e)||void 0===e.INDICADOR_SEQUENCIA||Fh(e)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ponto e vírgula.`),!Kd(e)&&!Xd(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||/^[...]{3,}/.test(e.texto)||/^[A-ZÀ-Ú]/.test(Fs(e.texto))||Qh(i,Mh.ERROR,`${e.descricao} deveria iniciar com letra maiúscula.`),Zp(e)||ip(e)||op(e)||!e.texto||-1!==e.texto.indexOf(Hd)||Yp(e)||/^[.]+$/.test(e.texto)||!(!Kd(e)&&Np(e)||Kd(e)&&Np(e.caput))||jh(e)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_DESDOBRAMENTO)}.`),Zp(e)||!np(e)||Xd(e)||!e.texto||Sp(e.pai)||Np(e)&&!Yp(e)||!Xp(e)||zh(e)||Qh(i,Mh.ERROR,`Último dispositivo de uma sequência deveria terminar com ${Us(e.INDICADOR_FIM_SEQUENCIA)}.`),Zp(e)||!Kd(e)&&!Xd(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||Np(e)&&!Yp(e)||e.alteracoes||Fh(e)||void 0!==(a=e.texto)&&/.*:[\s]{1,2}["”“].*[.]["”“]$/.test(a)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_SEQUENCIA)}.`),Zp(e)||!Kd(e)||!e.texto||-1!==e.texto.indexOf(Hd)||Yp(e)||/^[.]+$/.test(e.texto)||!e.hasAlteracao()||jh(e)||Uh(e.texto)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_DESDOBRAMENTO)}.`),Zp(e)||!Kd(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||e.alteracoes||Np(e)&&Np(e.caput)||Gp(e)||!jh(e)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_SEQUENCIA)}.`),!Kd(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||Np(e)&&Np(e.caput)||!e.alteracoes||e.hasAlteracao()||!jh(e)||Qh(i,Mh.ERROR,`${e.descricao} deveria informar alterações propostas.`),!Zp(e)&&Kd(e)&&e.hasAlteracao()&&!(null===(o=e.alteracoes)||void 0===o?void 0:o.base)&&Qh(i,Mh.ERROR,$h.INFORMAR_NORMA,!0),!Zp(e)||ip(e)||!e.texto||-1!==e.texto.indexOf(Hd)||Yp(e)||/^[.]+$/.test(e.texto)||Kd(e)||!Np(e)||jh(e)||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_DESDOBRAMENTO)}.`),Zp(e)&&!ip(e)&&e.texto&&-1===e.texto.indexOf(Hd)&&!Yp(e)&&!/^[.]+$/.test(e.texto)&&Kd(e)&&Np(e.caput)&&!jh(e)&&Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_DESDOBRAMENTO)}.`),!Zp(e)||ip(e)||!e.texto||-1!==e.texto.indexOf(Hd)||Yp(e)||/^[.]+$/.test(e.texto)||!jh(e)||(!Kd(e)||Np(e.caput))&&Np(e)||Qh(i,Mh.ERROR,`${e.descricao} não deveria terminar com ${Us(e.INDICADOR_DESDOBRAMENTO)}.`),!(Zp(e)&&Xd(e)&&e.texto&&-1===e.texto.indexOf(Hd))||/^[.]+$/.test(e.texto)||Np(e)||Ip(e)||kp(e)||Fh(e)||Lp(e)&&op(Lp(e))||Qh(i,Mh.ERROR,`${e.descricao} deveria terminar com ${Us(e.INDICADOR_SEQUENCIA)}.`),Zp(e)&&e.texto&&e===Hp(e)&&0===e.filhos.length&&(e.texto===Bh||e.texto.indexOf(Hd)>=0)&&Qh(i,Mh.ERROR,"Não foi informada nenhuma alteração."),!Zp(e)||!e.texto||-1!==e.texto.indexOf(Hd)||/^[.]+$/.test(e.texto)||!np(e)||Xd(e)||op(e)||Sp(e.pai)||Np(e)&&!Yp(e)||zh(e)||!Xp(e)||Gh(e)||Qh(i,Mh.ERROR,`Último dispositivo de uma sequência deveria terminar com ${Us(e.INDICADOR_FIM_SEQUENCIA)}.`),!Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.situacao.tipoEmenda!==up.EMENDA_ARTIGO_ONDE_COUBER&&e.pai.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO){const t=[];t.push(e),Lh.verificaNecessidadeRenumeracaoRedacaoFinal(t)&&null===localStorage.getItem("naoMostrarExplicacaoSufixo")&&Qh(i,Mh.WARNING,"Como interpretar sufixos (-1, -2,...)?",void 0,"onmodalsufixos")}return[...new Set(i)]},Gh=e=>{const t=Ap(e);return void 0!==t&&t.tipo===cu.omissis.name},Qh=(e,t,o,i,a="")=>{const r=e.filter((e=>e.descricao===o)).length>0;r||(void 0===i?e.push({tipo:t,descricao:o,nomeEvento:a}):e.push({tipo:t,descricao:o,fix:i}))},Kh=e=>ip(e)?(e=>{var t,o,i;const a=[];var r,n;return Gd(e)||e.texto&&0!==e.texto.trim().length||Qh(a,Mh.ERROR,`Não foi informado um texto para ${e.artigoDefinido} ${null===(t=e.descricao)||void 0===t?void 0:t.toLowerCase()}.`),!Gd(e)&&e.texto&&(r=e.texto,/[.,:]\s*$/.test(r))&&Qh(a,Mh.ERROR,`Não pode haver sinal de pontuação ao final do texto d${e.artigoDefinido} ${null===(o=e.descricao)||void 0===o?void 0:o.toLowerCase()}.`),!Gd(e)&&(n=e.texto,/<.+>/g.test(null==n?void 0:n.trim()))&&Qh(a,Mh.ERROR,`Texto d${e.artigoDefinido} ${null===(i=e.descricao)||void 0===i?void 0:i.toLowerCase()} não pode possuir formatação.`),a})(e):Hh(e);var Wh;function Xh(e){return class extends e{constructor(){super(...arguments),this.tipoGenero="feminino",this.artigoDefinido="a",this.pronomePossessivoSingular=" da ",this.pronomePossessivoPlural=" das ",this.artigoDefinidoSingular=" a ",this.artigoDefinidoPlural=" as ",this.artigoIndefinidoSingular=" uma ",this.artigoDefinidoPrecedidoPreposicaoASingular=" à ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" às ",this.contracaoEmArtigoDefinidoSingular=" na "}}}function Yh(e){return class extends e{constructor(){super(...arguments),this.tipoGenero="indefinido",this.artigoDefinido="",this.pronomePossessivoSingular="",this.pronomePossessivoPlural="",this.artigoDefinidoSingular="",this.artigoDefinidoPlural="",this.artigoIndefinidoSingular="",this.artigoDefinidoPrecedidoPreposicaoASingular="",this.artigoDefinidoPrecedidoPreposicaoAPlural="",this.contracaoEmArtigoDefinidoSingular=""}}}function Jh(e){return class extends e{constructor(){super(...arguments),this.tipoGenero="masculino",this.artigoDefinido="o",this.pronomePossessivoSingular=" do ",this.pronomePossessivoPlural=" dos ",this.artigoDefinidoSingular=" o ",this.artigoDefinidoPlural=" os ",this.artigoIndefinidoSingular=" um ",this.artigoDefinidoPrecedidoPreposicaoASingular=" ao ",this.artigoDefinidoPrecedidoPreposicaoAPlural=" aos ",this.contracaoEmArtigoDefinidoSingular=" no "}}}!function(e){e.MASCULINO="masculino",e.FEMININO="feminino",e.INDEFINIDO="indefinido"}(Wh||(Wh={}));const Zh=new(Xh(Object)),em=new(Jh(Object)),tm=new(Yh(Object)),om=e=>"F"===e?Zh:"M"===e?em:tm;class im{constructor(e,t){this.nome=e,this.genero="string"==typeof t?om(t):t}}const am={autoridades:[{urn:"federal",descricao:"Federal"},{urn:"senado.federal",descricao:"Senado Federal"},{urn:"congresso.nacional",descricao:"Congresso Nacional"}],tiposDocumento:[{urn:"lei",descricao:"Lei",genero:"F"},{urn:"lei.complementar",descricao:"Lei Complementar",genero:"F"},{urn:"lei.delegada",descricao:"Lei Delegada",genero:"F"},{urn:"decreto.legislativo",descricao:"Decreto Legislativo",genero:"M"},{urn:"decreto.lei",descricao:"Decreto-Lei",genero:"M"},{urn:"decreto",descricao:"Decreto",genero:"M"},{urn:"consolidacao.leis.trabalho",descricao:"Consolidação das Leis do Trabalho",genero:"F"},{urn:"resolucao",descricao:"Resolução",genero:"F"},{urn:"regimento.interno",descricao:"Regimento Interno",genero:"M"},{urn:"constituicao",descricao:"Constituição",genero:"F"},{urn:"ato.disposicoes.constitucionais.transitorias",descricao:"Ato das Disposições Constitucionais Transitórias",genero:"M"},{urn:"medida.provisoria",descricao:"Medida Provisória",genero:"F"},{urn:"medida.provisoria;mpv",descricao:"Medida Provisória",genero:"F"},{urn:"emenda.constitucional",descricao:"Emenda Constitucional",genero:"F"},{urn:"emenda.constitucional.revisao",descricao:"Emenda Constitucional de Revisão",genero:"F"},{urn:"proposta.emenda.constitucional;pec",descricao:"Proposta de Emenda Constitucional",genero:"F"},{urn:"projeto.lei;pl",descricao:"Projeto de Lei",genero:"M"},{urn:"projeto.lei;pls",descricao:"Projeto de Lei do Senado",genero:"M"},{urn:"projeto.lei.complementar;plp",descricao:"Projeto de Lei Complementar",genero:"M"},{urn:"projeto.lei.complementar;pls",descricao:"Projeto de Lei Complementar do Senado",genero:"M"},{urn:"projeto.lei;plc",descricao:"Projeto de Lei da Câmara",genero:"M"},{urn:"projeto.lei.complementar;plc",descricao:"Projeto de Lei Complementar da Câmara",genero:"M"},{urn:"projeto.lei.conversao;plv",descricao:"Projeto de Lei de Conversão",genero:"M"},{urn:"projeto.resolucao;prs",descricao:"Projeto de Resolução do Senado",genero:"M"},{urn:"projeto.decreto.legislativo;pds",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"projeto.decreto.legislativo;pdl",descricao:"Projeto de Decreto Legislativo",genero:"M"},{urn:"substitutivo.projeto.lei.senado;scd",descricao:"Substitutivo da Câmara dos Deputados",genero:"M"},{urn:"emenda.projeto.lei.senado;ecd",descricao:"Emenda(s) da Câmara dos Deputados",genero:"F"}],fakeUrns:[{sigla:"PEC",urnAutoridade:"senado.federal",urnTipoDocumento:"proposta.emenda.constitucional;pec"},{sigla:"PL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pl"},{sigla:"PLS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;pls"},{sigla:"PLP",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.complementar;plp"},{sigla:"PLC",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei;plc"},{sigla:"PLV",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.conversao;plv"},{sigla:"PRS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.resolucao;prs"},{sigla:"PDS",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pds"},{sigla:"PDL",urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.decreto.legislativo;pdl"},{sigla:"SCD",urnAutoridade:"senado.federal",urnTipoDocumento:"substitutivo.projeto.lei.senado;scd"},{sigla:"ECD",urnAutoridade:"senado.federal",urnTipoDocumento:"emenda.projeto.lei.senado;ecd"},{sigla:"MPV",urnAutoridade:"senado.federal",urnTipoDocumento:"medida.provisoria;mpv"}],siglas:[{urnAutoridade:"federal",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"projeto.lei",sigla:"PLN"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei",sigla:"PLS"},{urnAutoridade:"congresso.nacional",urnTipoDocumento:"medida.provisoria",sigla:"MPV"},{urnAutoridade:"senado.federal",urnTipoDocumento:"projeto.lei.senado.federal",sigla:"PLS"},{urnAutoridade:"camara.deputados",urnTipoDocumento:"projeto.lei",sigla:"PLC"}],atalhosUrn:[{urnTipoDocumento:"constituicao",urnAutoridade:"federal",urn:"urn:lex:br:federal:constituicao:1988-10-05;1988",nome:"Constituição Federal"},{urnTipoDocumento:"ato.disposicoes.constitucionais.transitorias",urnAutoridade:"federal",urn:"urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988",nome:"Ato das Disposições Constitucionais Transitórias - ADCT"},{urnTipoDocumento:"consolidacao.leis.trabalho",urnAutoridade:"federal",urn:"urn:lex:br:federal:decreto.lei:1943-05-01;5452",nome:"Consolidação das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei nº 5.452, de 1º de maio de 1943",genero:"F"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"senado.federal",urn:"urn:lex:br:senado.federal:resolucao:1970-11-27;93",nome:"Regimento Interno do Senado Federal",genero:"M"},{urnTipoDocumento:"regimento.interno",urnAutoridade:"congresso.nacional",urn:"urn:lex:br:congresso.nacional:resolucao:1970-08-11;1",nome:"Regimento Comum do Congresso Nacional",genero:"M"}],eventos:[{urn:"leitura",tipoTextoProcessoLegislativo:"Texto inicial",genero:"M"},{urn:"aprovacao.substitutivo.decisao.terminativa",tipoTextoProcessoLegislativo:"Redação do vencido em turno suplementar na Comissão",substitutivo:"s",genero:"F"},{urn:"aprovacao.substitutivo",tipoTextoProcessoLegislativo:"Redação do vencido em turno suplementar no Plenário",substitutivo:"s",genero:"F"},{urn:"apresentacao.substitutivo",tipoTextoProcessoLegislativo:"Texto do substitutivo",substitutivo:"s",genero:"M"}]},rm=e=>{var t,o,i,a,r;const n=null!==(t=nm(e))&&void 0!==t?t:{},s=e=>e.urnTipoDocumento===n.urn;return null!==(r=null!==(i=null===(o=am.siglas.find(s))||void 0===o?void 0:o.sigla)&&void 0!==i?i:null===(a=am.fakeUrns.find(s))||void 0===a?void 0:a.sigla)&&void 0!==r?r:""},nm=e=>{var t;const o=null===(t=e.replace("urn:lex:br:",""))||void 0===t?void 0:t.split(":");return am.tiposDocumento.filter((e=>e.urn===o[1]))[0]},sm=e=>{var t,o,i;const a=null===(t=e.replace("urn:lex:br:",""))||void 0===t?void 0:t.split(":");return(null===(o=a[2])||void 0===o?void 0:o.indexOf(";"))>-1?null===(i=a[2])||void 0===i?void 0:i.substring(a[2].indexOf(";")+1):""},lm=e=>new Intl.NumberFormat("pt-BR",{style:"decimal"}).format(+e),cm=e=>{var t,o,i,a;const r=null===(t=e.replace("urn:lex:br:",""))||void 0===t?void 0:t.split(":");if(r.length<3)return"";if("LEXML_URN_ID"===r[2])return"";if(/^\d{4};$/.test(r[2]))return r[2].split(";")[0];const n=null===(a=null===(i=null===(o=r[2])||void 0===o?void 0:o.substring(0,r[2].indexOf(";")))||void 0===i?void 0:i.split("-"))||void 0===a?void 0:a.reverse();return n?n.join("/"):""},um=e=>{var t,o,i,a,r;const n=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],s=null===(t=e.replace("urn:lex:br:",""))||void 0===t?void 0:t.split(":"),l=null===(o=s[2])||void 0===o?void 0:o.substring(0,s[2].indexOf(";"));if(/^\d{4}$/.test(l)||/\d{4}$/.test(l))return l;const c=null===(r=null===(a=null===(i=s[2])||void 0===i?void 0:i.substring(0,s[2].indexOf(";")))||void 0===a?void 0:a.split("-"))||void 0===r?void 0:r.reverse();return c?(c[1]=n[+c[1]-1],c.join(" de ")):""},dm=e=>/^\d{4}$/.test(cm(e))?cm(e):cm(e).split("/").slice(-1)[0],pm=e=>{const t=e.indexOf("!");return-1!==t?e.substring(0,t):e},hm=e=>{const t=e.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\d{4})$/);return t?`${t[3]}-${t[2]}-${t[1]}`:""},mm=(e,t,o)=>{const i=am.fakeUrns.find((t=>t.sigla===e.toUpperCase()));if(i)return((e,t,o,i)=>`urn:lex:br:${e}:${t}:${/\d{4}[-]/.test(i)||/^\d{4}$/.test(i)?i:hm(i)};${o}`)(i.urnAutoridade,i.urnTipoDocumento,t,o);throw`Sigla '${e}' não encontrada no vocabulário para montagem da urn.`},fm=e=>{var t,o;const i=null===(t=(e=>{var t;const o=null===(t=e.replace("urn:lex:br:",""))||void 0===t?void 0:t.split(":");return am.autoridades.filter((e=>e.urn===o[0]))[0]})(e))||void 0===t?void 0:t.urn,a=null===(o=nm(e))||void 0===o?void 0:o.urn,r=/^\d{1,5}$/.test(sm(e)),n=/\d{4}[-]/.test(cm(e))||/^\d{4}$/.test(cm(e))?cm(e):hm(cm(e));return(null==e?void 0:e.startsWith("urn:lex:br:"))&&i&&a&&r&&n},vm=e=>{var t;const o=am.atalhosUrn.find((t=>t.urn===e));if(o)return o.nome;const i=pm(e),a=sm(i),r=null===(t=nm(i))||void 0===t?void 0:t.descricao,n=cm(i),[s,l,c]=n.split("/").map((e=>parseInt(e))),u=n.includes("/")?gm(new Date(c,l-1,s)):s;return(r||"")+(a?" nº "+parseInt(a).toLocaleString("pt-BR"):"")+", de "+u},gm=e=>e?e.getDate()+" de "+e.toLocaleDateString("pt-BR",{month:"long"})+" de "+e.getFullYear():void 0,bm=e=>{const t=nm(e);let o=om(t.genero),i="Projeto";return o===Zh&&(i=t.urn.startsWith("medida.provisoria")?"Medida Provisória":"Proposta"),new im(i,o)},ym={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},xm=e=>/^0(-[a-z]+)?$/i.test(e),Am=e=>/^\d+$/.test(e),wm=e=>/^\d{1,}(([-]?[1-9]+){0,2})$/.test(e),_m=e=>/[a-zA-Z]+/.test(e),Em=e=>/^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(e),Om=e=>{if(!_m(e))return e;e=e.toLowerCase();let t=0;return[...e].forEach((e=>t=e.toLowerCase().charCodeAt(0)-97+1+26*t)),t.toString()},Sm=e=>{const t=parseInt(e);return t?Im(t):e},Im=e=>{let t="",o=0;for(;e>0;)o=(e-1)%26,e=(e-o-1)/26,t=t.replace(/^/,String.fromCharCode(97+o));return t},km=e=>{if(e.startsWith("0"))return"0";if(!Em(e))throw new Error("O valor '"+e+"' não é um número em algarismo romano válido.");let t=0,o=1;for(let i=(e=e.toLowerCase()).length-1;i>=0;i--){const a=Cm(e.charAt(i));a>o&&(o=a),a<o?t-=a:t+=a}return t.toString()},Cm=e=>{switch(e.toLowerCase()){case"i":return 1;case"v":return 5;case"x":return 10;case"l":return 50;case"c":return 100;case"d":return 500;case"m":return 1e3;default:return 0}},Nm=e=>{let t,o="",i=-1===e.search(/-/)?parseInt(e):parseInt(e.substring(0,e.search(/-/)));const a=-1===e.search(/-/)?"":e.substring(e.search(/-/));for(const e in ym){if(t=Math.floor(i/ym[e]),t>=0)for(let i=0;i<t;i++)o+=e;i%=ym[e]}return o+a},Tm=(e,t,o)=>{const i=-1===e.search(/-/)?e.replace("º",""):e.substring(0,e.search(/-/)).replace("º",""),a=-1===e.search(/-/)?"":e.substring(e.search(/-/));return("0"===i?"0":t?t(i):i)+(a?o?o(a):a:"")},qm=e=>{const t=null==e?void 0:e.split("-"),o=null==t?void 0:t.map((e=>{var t;return e&&(Am(e)?null===(t=Sm(e))||void 0===t?void 0:t.toUpperCase():e)}));return(null==o?void 0:o.length)>0?null==o?void 0:o.join("-"):""},Rm=e=>{const t=null==e?void 0:e.split("-"),o=null==t?void 0:t.map((e=>e&&(_m(e)?Om(e):e)));return(null==o?void 0:o.length)>0?null==o?void 0:o.join("-"):""},Dm=(e,t)=>{if(e===t)return 0;const o=null==e?void 0:e.split("-"),i=null==t?void 0:t.split("-"),[a,...r]=o,[n,...s]=i;if(!a||n&&parseInt(a)<parseInt(n))return 1;if(!n||a&&parseInt(a)>parseInt(n))return-1;if(e&&t&&t.includes(e))return 1;for(let e=0;e<3;e++){const t=e>=(null==r?void 0:r.length)?0:r[e],o=e>=(null==s?void 0:s.length)?0:s[e];if(+t>+o)return-1;if(+t<+o)return 1}return 0},Pm=e=>jm(e),Lm={Artigo:e=>Am(e.replace("º",""))||/^(artigo )?[uúÚ]nico$/i.test(e),Paragrafo:e=>Am(e.replace("º",""))||/^(par[aáÁ]grafo )?[uúÚ]nico$/i.test(e),Inciso:Em,Alinea:_m,Item:Am},Mm=e=>{const t=null==e?void 0:e.split("-");return e&&Am(t[0])&&1===t.length?(t[0]=""+(+t[0]+1),t.join("-")):e&&Am(t[t.length-1])?(t[t.length-1]=""+(+t[t.length-1]+1),t.join("-")):e},$m=e=>{const t=null==e?void 0:e.split("-");return e&&Am(t[t.length-1])?(t[t.length-1]=t[t.length-1]+"-1",t.join("-")):e},jm=e=>{const t=Kd(e)?(e=>{const t=dp(e).indexOfArtigo(e);return t<1?[]:dp(e).artigos.filter(((e,o)=>o<t))})(e):$p(e),o=Kd(e)?(e=>{const t=dp(e).indexOfArtigo(e);return-1===t||dp(e).artigos.length===t+1?[]:dp(e).artigos.filter(((e,o)=>o>t))})(e):jp(e),i=t&&t.filter((e=>eh(e)||ah(e))).reverse()[0],a=o&&o.filter((e=>eh(e)||ah(e)))[0],r=null==t?void 0:t.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)).reverse()[0];if(!qp(e)&&!a)return"1";if(!i&&a)return r?"0"===r.numero?$m("0"):Mm(r.numero):"0";if(i&&!a)return Mm(qp(e).numero);if(i&&a)return i===qp(e)?$m(i.numero):Mm(qp(e).numero);const n=(e=>{let t=0;const o=e.tipo;for(;void 0!==e&&!eh(e)&&!ah(e)&&e.tipo===o;)t++,e=Kd(e)?_p(e.pai,e):Tp(e);return t})(e);return""+n},zm=e=>Zp(e)?(e=>{var t,o,i,a,r,n,s,l,c;const u=[];return null===e&&u.push({tipo:Mh.ERROR,descricao:"O dispositivo não foi informado"}),null!==e&&void 0!==e.numero&&0===e.numero.trim().length&&u.push({tipo:Mh.ERROR,descricao:"O dispositivo não contém numeração"}),null===e||op(e)||0!==(null===(t=e.rotulo)||void 0===t?void 0:t.trim().length)||u.push({tipo:Mh.ERROR,descricao:"O dispositivo não contém rótulo"}),null===e||Qd(e)||!(null===(o=e.rotulo)||void 0===o?void 0:o.endsWith(e.tipo))&&(null===(i=e.rotulo)||void 0===i?void 0:i.toLowerCase())!==(null===(a=cu[e.tipo.toLowerCase()].descricao)||void 0===a?void 0:a.toLowerCase())||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&"1"===(null===(r=Mp(e))||void 0===r?void 0:r.numero)&&(null===(n=Mp(e))||void 0===n?void 0:n.situacao.descricaoSituacao)!==Ud.DISPOSITIVO_ADICIONADO||u.push({tipo:Mh.ERROR,descricao:$h.RENUMERAR_DISPOSITIVO,fix:!0}),null!==e&&Zp(e)&&Xd(e)&&!Ip(e)&&(null===(s=e.rotulo)||void 0===s?void 0:s.endsWith("único."))&&u.push({tipo:Mh.ERROR,descricao:`Quando houver mais de um ${e.descricao}, não pode se tratar de '${e.descricao} único'`}),null===e||Gp(e)||void 0===e.numero||!Cp(e)||ip(e.pai)||op(e)||Tp(e)&&(void 0===Tp(e)||op(mp(Tp(e))))||"1"===e.numero||"1u"===e.numero||u.push({tipo:Mh.ERROR,descricao:$h.OMISSIS_ANTES,fix:!0}),null!==e&&!Gp(e)&&void 0!==e.numero&&e.pai.indexOf(e)>0&&qp(e)&&e.tipo!==(null===(l=qp(e))||void 0===l?void 0:l.rotulo)&&!op(Tp(e))&&!((e,t)=>{if(-1===e.numero.indexOf("-")&&-1===t.numero.indexOf("-"))return+e.numero+1==+t.numero;const o=e.numero.split("-"),i=t.numero.split("-");if(i.length>o.length){const e=i.pop();return o.join("-")===i.join("-")&&"1"===e}{o.length>i.length&&o.pop();const e=o.pop(),t=i.pop();return o.join("-")===i.join("-")&&+e+1==+t}})(Tp(e),e)&&e.numero!==(null===(c=qp(e))||void 0===c?void 0:c.numero)&&u.push({tipo:Mh.ERROR,descricao:$h.OMISSIS_ANTES,fix:!0}),null!==e&&void 0!==e.numero&&e.pai.indexOf(e)>0&&$p(e).filter((e=>void 0!==e.numero)).filter((t=>t!==e)).filter((t=>e.numero!==t.numero&&1===Dm(e.numero,t.numero))).length>0&&u.push({tipo:Mh.ERROR,descricao:"O dispositivo tem número menor ao de algum dispositivo anterior"}),null!==e&&void 0!==e.numero&&!e.pai.isLastFilho(e)&&Bp(e).filter((t=>t!==e&&e.pai===t.pai&&void 0!==t.numero)).filter((t=>1===Dm(t.numero,e.numero))).length>0&&u.push({tipo:Mh.ERROR,descricao:"O dispositivo tem número maior do que algum dispositivo posterior"}),null!==e&&void 0!==e.numero&&vp(e).filter((t=>t.numero&&t.numero===e.numero)).length>1&&u.push({tipo:Mh.ERROR,descricao:"O dispositivo tem número igual ao de outro dispositivo"}),u})(e):(e=>{const t=[];return null===e&&t.push({tipo:Mh.ERROR,descricao:"O dispositivo não foi informado"}),null!==e&&e.numero&&0===e.numero.trim().length&&t.push({tipo:Mh.ERROR,descricao:"O dispositivo não contém numeração"}),null!==e&&!op(e)&&e.rotulo&&0===e.rotulo.trim().length&&t.push({tipo:Mh.ERROR,descricao:"O dispositivo não contém rótulo"}),t})(e),Fm=e=>Gd(e)&&void 0===e.pai||eh(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO?[]:(e=>{var t,o,i,a;const r=[];if(null===e&&r.push({tipo:Mh.ERROR,descricao:"O dispositivo não foi informado"}),null!==e&&e.filhos.length>0&&0===e.tiposPermitidosFilhos.length&&r.push({tipo:Mh.ERROR,descricao:`Segundo a Legislação vigente, ${e.descricao} não poderia possuir filhos`}),null===e||!Zp(e)||e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||"1"!==(null===(t=Mp(e))||void 0===t?void 0:t.numero)&&"1u"!==(null===(o=Mp(e))||void 0===o?void 0:o.numero)||(null===(i=Mp(e))||void 0===i?void 0:i.situacao.descricaoSituacao)===Ud.DISPOSITIVO_ADICIONADO||r.push({tipo:Mh.ERROR,descricao:"Não é permitido um dispositivo de alteração da norma antes do primeiro dispositivo"}),null!==e&&(Qd(e)||rp(e))&&r.push({tipo:Mh.ERROR,descricao:"Não foi possível validar a natureza deste dispositivo com base na legislação vigente"}),null===e||!e.pai||rp(e.pai)||op(e)||Qd(e)||e.tiposPermitidosPai.includes(e.pai.tipo)||r.push({tipo:Mh.ERROR,descricao:`Segundo a Legislação vigente, ${e.descricao} somente poderia pertencer a ${e.tiposPermitidosPai.join(", ")}`}),null!==e&&!Qd&&e.filhos.length>0&&(0===e.tiposPermitidosFilhos.length||e.filhos.filter((t=>!e.tiposPermitidosFilhos.includes(t.tipo))).length>0)){const t=0===e.tiposPermitidosFilhos.length?"não poderia possuir filhos":`somente poderia possuir ${e.tiposPermitidosFilhos.join(", ")}`;r.push({tipo:Mh.ERROR,descricao:`Segundo a Legislação vigente, ${e.descricao} ${t}`})}var n,s;return null!==e&&op(e)&&void 0!==Tp(e)&&op(mp(Tp(e))||op(Tp(e)))&&r.push({tipo:Mh.ERROR,descricao:"Não pode haver mais de uma linha pontilhada sequencialmente"}),null!==e&&e.pai&&op(e)&&Wd(e.pai)&&void 0===Lp(e)&&cu.omissis.tipo===(null===(a=e.pai.pai.filhos.filter((e=>!Wd(e.pai)))[0])||void 0===a?void 0:a.tipo)&&r.push({tipo:Mh.ERROR,descricao:$h.OMISSIS_SEQUENCIAIS,fix:!0}),null!==e&&op(e)&&e.pai&&!Lp(e)&&e.pai&&void 0!==Lp(Wd(e.pai)?e.pai.pai:e.pai)&&op(Lp(Wd(e.pai)?e.pai.pai:e.pai))&&r.push({tipo:Mh.ERROR,descricao:$h.OMISSIS_SEQUENCIAIS,fix:!0}),null!==e&&op(e)&&e.pai&&void 0!==zp(e)&&op(zp(e))&&(n=e,s=zp(e),n.pai===s.pai&&((e,t)=>e.pai.indexOf(e)+1===t.pai.indexOf(t))(n,s))&&r.push({tipo:Mh.ERROR,descricao:$h.OMISSIS_SEQUENCIAIS,fix:!0}),null!==e&&op(e)&&void 0!==Tp(e)&&eh(Tp(e))&&void 0!==Tp(e).numero&&void 0!==Lp(e)&&eh(Lp(e))&&void 0!==Lp(e).numero&&0===Dm(""+(+Tp(e).numero+1),Lp(e).numero)&&r.push({tipo:Mh.ERROR,descricao:"Não pode haver linha pontilhada entre dispositivos originais sequenciais"}),r})(e).concat(Kh(e),zm(e),(e=>{const t=[];return e.alteracoes&&e.alteracoes.base?(fm(e.alteracoes.base)||t.push({tipo:Mh.ERROR,descricao:"Não foi informada uma norma alterada válida"}),t):[]})(e));class Bm{constructor(e){this.descricaoSituacao=Ud.DISPOSITIVO_SUPRIMIDO,this.dispositivoOriginal=e}getAcoesPermitidas(e,t){const o=[];return(Jd(e)?e.pai.pai:e.pai).situacao.descricaoSituacao!==Ud.DISPOSITIVO_SUPRIMIDO&&(o.push(sd),o.push(...t.filter((t=>t.descricao.startsWith("Adicionar")&&e.tipo===t.tipo)))),o}}const Um=e=>Gd(e)?"cpt_alt1":e.tagId?e.tagId+(Wd(e)?"":op(e)?function(e){if(e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO){const t=vp(e).filter((t=>t.pai===e.pai));return t.sort(((t,o)=>{const i=(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO?1:0)-(o.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO?1:0);return i||e.pai.indexOf(t)-e.pai.indexOf(o)})),t.indexOf(e)+1}return $p(e).length+1}(e):e.numero?(Kd(e)||Xd(e))&&"1"===e.numero&&Ip(e)?"1u":e.numero:`[sn:${e.uuid}]`):void 0;const Vm=(e,t=[])=>{if(Gd(e)&&void 0===e.pai)return;const o=Um(e);if(o&&t.unshift(o),Kd(e)){if(Zp(e)){const o=dp(e);Vm(o,t)}}else Vm(e.pai,t)},Hm=e=>{const t=[];return Vm(e,t),t.join("_")},Gm=e=>{var t,o;return void 0!==(null===(o=null===(t=e.hierarquia)||void 0===t?void 0:t.pai)||void 0===o?void 0:o.uuidAlteracao)||void 0!==e.uuidAlteracao},Qm=(e,t=0)=>void 0===(null==e?void 0:e.pai)||ip(e)?t:Kd(e)?Zp(e)?++t:t:(t=Gp(null==e?void 0:e.pai)?t+2:++t,Kd(null==e?void 0:e.pai)?t:Qm(e.pai,t)),Km=e=>{var t;const o=e.pai?Wd(e.pai)?e.pai.pai:e.pai:void 0,i=o&&Zp(e)?dp(e).pai:void 0;return{tipo:null==o?void 0:o.tipo,uuid:null==o?void 0:o.uuid,uuid2:null==o?void 0:o.uuid2,lexmlId:null==o?void 0:o.id,uuidAlteracao:null==i?void 0:i.uuid,uuid2Alteracao:null==i?void 0:i.uuid2,existeNaNormaAlterada:o&&th(o)?o.situacao.existeNaNormaAlterada:void 0,descricaoSituacao:null===(t=null==o?void 0:o.situacao)||void 0===t?void 0:t.descricaoSituacao}},Wm=(e,t=!0,o=!1)=>{var i,a,r;const n=e.pai,s="Articulacao"!==e.tipo&&Zp(e)&&Kp(e);let l,c,u;if(s){const t=Hp(e);l=t.notaAlteracao,c=t.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO}if(o){let t=xp(e);t&&(Gd(t)&&!Jp(t)&&Nh(t)&&(t=t.projetoNorma.ementa),u=Wm(Wd(t)||Jp(t)?t.pai:t))}return{tipo:e.tipo,nivel:Qm(e),agrupador:ip(e),hierarquia:{pai:n?Km(e):void 0,posicao:n?n.indexOf(e):void 0,numero:e.numero},editavel:!(Gd(e)||e.situacao instanceof Bm),sendoEditado:!1,uuid:e.uuid,uuid2:e.uuid2,lexmlId:e.numero&&Hm(e)||e.id,numero:e.numero,rotulo:null!==(i=e.rotulo)&&void 0!==i?i:"",conteudo:{texto:e.texto},norma:null===(a=e.alteracoes)||void 0===a?void 0:a.base,existeNaNormaAlterada:th(e)?e.situacao.existeNaNormaAlterada:void 0,index:0,acoesPossiveis:t?e.getAcoesPossiveis(e):[],descricaoSituacao:null===(r=e.situacao)||void 0===r?void 0:r.descricaoSituacao,mensagens:eh(e)?[]:e.mensagens,abreAspas:Gp(e),fechaAspas:s,notaAlteracao:l,dispositivoAlteracao:Zp(e),tipoOmissis:"Omissis"===e.tipo?af(n):void 0,podeEditarNotaAlteracao:c,tiposAgrupadoresQuePodemSerInseridosAntes:wh(e),tiposAgrupadoresQuePodemSerInseridosDepois:Ah(e),artigoDefinido:e.artigoDefinido,elementoAnteriorNaSequenciaDeLeitura:u}},Xm=(e,t=!1)=>{const o=Wm(e,!0,t);return o.mensagens=Fm(e),o},Ym=(e,t,o=!1,i=!1)=>{const a=o?Xm:Wm;void 0!==t.filhos&&t.filhos.forEach((t=>{var r;const n=a(t,!0,i);Kd(t)&&(n.conteudo.texto=t.caput.texto),e.push(n),Kd(t)&&t.hasAlteracao()&&(null===(r=t.alteracoes)||void 0===r||r.filhos.forEach((t=>{e.push(a(t,!0,i)),Ym(e,t,o,i)}))),Ym(e,t,o,i)}))},Jm=(e,t=!1,o=!1)=>{var i;const a=t?Xm:Wm,r=[];return r.push(a(e,!0,o)),Gd(e)&&!Zp(e)&&Nh(e)&&!nh(dp(e)).some((e=>e.situacao.tipoEmenda===up.EMENDA_ARTIGO_ONDE_COUBER))&&r.push(a(e.projetoNorma.ementa,!0)),Kd(e)&&e.hasAlteracao()&&Kd(e)&&e.hasAlteracao()&&(null===(i=e.alteracoes)||void 0===i||i.filhos.forEach((e=>{r.push(a(e,!0,o)),Ym(r,e,t,o)}))),Ym(r,e,t,o),r},Zm=(e,t,o=!1)=>{var i,a;if("Ementa"===t.tipo)return null===(i=e.projetoNorma)||void 0===i?void 0:i.ementa;const r=((e,t)=>{var o,i;return!Gm(t)||Jp(e)?e:null!==(i=null===(o=Zm(e,{uuid:t.hierarquia?t.hierarquia.pai.uuidAlteracao:t.uuidAlteracao}))||void 0===o?void 0:o.alteracoes)&&void 0!==i?i:e})(e,t);if(!o&&Gm(t)){const e=r.pai?r.pai:Zm(r,{uuid:t.hierarquia?t.hierarquia.pai.uuidAlteracao:t.uuidAlteracao});if(!(null==e?void 0:e.alteracoes))return;return null===(a=e.alteracoes)||void 0===a?void 0:a.filhos.flatMap((e=>{const t=[];return sh(e,t),t})).filter((e=>e.uuid===t.uuid))[0]}if((null==t?void 0:t.tipo)===cu.artigo.tipo){const e=r.filhos.find((e=>e.uuid===t.uuid));if(e)return e}const n=(null==t?void 0:t.tipo)===cu.articulacao.tipo||void 0===(null==t?void 0:t.uuid)?r:hp(r,t.uuid);return null!==n?n:void 0},ef=(e,t,o)=>{var i;const a=Fm(t);if(a.length>0||t.mensagens&&(null===(i=t.mensagens)||void 0===i?void 0:i.length)>0){t.mensagens=a;const i=Wm(t,o);i.mensagens=Fm(t),e.push(i)}},tf=(e,t=!0)=>{const o=[];if(!e)return[];if(Zp(e)&&Np(e)&&e.filhos.filter((e=>e.tipo===cu.omissis.tipo)).length>0&&(ef(o,e),e.filhos.filter((e=>e.tipo===cu.omissis.tipo)).forEach((e=>ef(o,e)))),np(e)||Qd(e)){const i=Jd(e)?e.pai.pai:e.pai;ef(o,i),ip(i)&&ef(o,Jd(e)?e.pai.pai:e.pai),vp(e).forEach((i=>{(t||i!==e)&&ef(o,i,!0)}))}else!t||Gd(e)||ip(e)||ef(o,e,!0);const i=Tp(e);return void 0!==i&&op(i)&&ef(o,i,!1),o},of=e=>(Kd(e)||Xd(e))&&vp(e).length<=2?vp(e).filter((t=>e.uuid!==t.uuid)):Bp(e,!0).filter((t=>t.tipo===e.tipo)),af=e=>{switch(null==e?void 0:e.tipo){case"Caput":return"inciso-caput";case"Inciso":return"alinea";case"Alinea":return"item";case"Artigo":return"paragrafo";case"Paragrafo":return"inciso-paragrafo";default:return""}},rf=e=>{var t,o,i;return!(!e.dispositivoAlteracao||void 0===e.existeNaNormaAlterada||"Omissis"===e.tipo||e.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO)&&("Artigo"===e.tipo||(null===(i=null===(o=null===(t=e.hierarquia)||void 0===t?void 0:t.pai)||void 0===o?void 0:o.existeNaNormaAlterada)||void 0===i||i))};var nf;!function(e){e.ArticulacaoAtualizada="ArticulacaoAtualizada",e.ComandoEmendaGerado="ComandoEmendaGerado",e.DocumentoCarregado="DocumentoCarregado",e.InformarDadosAssistente="InformarDadosAssistente",e.InformarNorma="InformarNorma",e.ElementoModificado="ElementoModificado",e.ElementoIncluido="ElementoIncluido",e.ElementoRemovido="ElementoRemovido",e.ElementoRenumerado="ElementoRenumerado",e.ElementoRestaurado="ElementoRestaurado",e.ElementoSuprimido="ElementoSuprimido",e.ElementoValidado="ElementoValidado",e.ElementoSelecionado="ElementoSelecionado",e.ElementoMarcado="ElementoMarcado",e.SituacaoElementoModificada="SituacaoElementoModificada",e.AtualizacaoAlertas="AtualizacaoAlertas",e.ElementoReferenciado="ElementoReferenciado",e.RevisaoAtivada="RevisaoAtivada",e.RevisaoDesativada="RevisaoDesativada",e.AtualizaUsuario="AtualizaUsuario",e.RevisaoAceita="RevisaoAceita",e.RevisaoRejeitada="RevisaoRejeitada",e.RevisaoAdicionalRejeitada="RevisaoAdicionalRejeitada",e.AdicionarAnexoEmendaTextoLivre="AdicionarAnexoEmendaTextoLivre",e.RemoverAnexoEmendaTextoLivre="RemoverAnexoEmendaTextoLivre"}(nf||(nf={}));const sf=(e,t)=>((e,t)=>{const o=Jm(e);return{articulacao:e,modo:t,past:[],present:[],future:[],ui:{events:[{stateType:nf.DocumentoCarregado,elementos:o}],alertas:[]},revisoes:[],numEventosPassadosAntesDaRevisao:0}})(t.articulacao,t.classificacao);const lf=function(e=0){return{next:()=>++e}}();function cf(e){return class extends e{constructor(){super(...arguments),this.mensagens=[]}}}class uf{constructor(e){this.tipoAcao=e,this.isDispositivoAlteracao=!0,this.descricao="INICIAR_BLOCO"===e?"Adicionar alteração de norma":"Finalizar alteração de norma"}execute(e,t,o,i=!1){return{type:"ADICIONAR_ELEMENTO",subType:this.tipoAcao,atual:e,novo:{tipo:o,isDispositivoAlteracao:this.isDispositivoAlteracao,conteudo:{texto:t}},hasDesmembramento:i}}}const df=new uf("INICIAR_BLOCO"),pf=new uf("FINALIZAR_BLOCO");function hf(e){return class extends e{get alteracoes(){}hasAlteracao(){return!1}}}var mf;function ff(e){return class extends e{constructor(){super(...arguments),this.tipoConteudo=mf.ConteudoTexto,this.texto=""}}}function vf(e){return class extends e{addFilho(e,t){if(t&&this.filhos.indexOf(t)>=0){const o=this.filhos.indexOf(t)+1;this.isLastFilho(t)?this.filhos.push(e):this.filhos.splice(o,0,e)}else this.filhos.push(e);Kd(e)&&dp(e).addArtigo(e,t)}addFilhoOnPosition(e,t){var o;if(e.pai=this,this.filhos.splice(t,0,e),Kd(e)){const t=null!==(o=Tp(e))&&void 0!==o?o:_p(e.pai.pai,e.pai),i=dp(e),a=t?i.indexOfArtigo(t)+1:0;i.addArtigoOnPosition(e,a)}}hasArtigos(){return this.filhos.filter((e=>Kd(e))).length>0}isLastFilho(e){return this.filhos.indexOf(e)===this.filhos.length-1}get filhos(){var e;return this._filhos=null!==(e=this._filhos)&&void 0!==e?e:[],this._filhos}indexOf(e){return this.filhos.indexOf(e)}removeFilho(e){this._filhos=this.filhos.filter((t=>t.uuid!==e.uuid)),Kd(e)&&dp(e).removeArtigo(e)}renumeraFilhos(){var e;gh(this)&&(this.filhos.filter((e=>Zp(e)&&Qp(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)).filter((e=>!Kd(e))).forEach((e=>{e.numero=Pm(e),e.createRotulo(e),e.id=Hm(e)})),null===(e=dp(this.filhos[0]))||void 0===e||e.renumeraArtigos())}}}function gf(e){return class extends e{addFilho(e,t){if(t){const o=this.filhos.indexOf(t)+1;this.isLastFilho(t)?this.filhos.push(e):this.filhos.splice(o,0,e)}else this.filhos.push(e)}addFilhoOnPosition(e,t){e.pai=this,this.filhos.splice(t,0,e)}hasArtigos(){return this.filhos.filter((e=>Kd(e))).length>0}isLastFilho(e){return this.filhos.indexOf(e)===this.filhos.length-1}get filhos(){var e;return this._filhos=null!==(e=this._filhos)&&void 0!==e?e:[],this._filhos}indexOf(e){return this.filhos.indexOf(e)}removeFilho(e){this._filhos=this.filhos.filter((t=>t.uuid!==e.uuid))}renumeraFilhos(){gh(this)&&this.filhos.forEach((e=>{if(Zp(e)&&Qp(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO){e.numero=Pm(e),e.createRotulo(e);const t=Hm(e);e.id!==t&&nh(e).forEach((e=>e.id=Hm(e)))}}))}}}function bf(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoAgrupadorLcp95",this.informouAgrupadorUnico=!1}getNomeAgrupadorUnico(e){const t=`${e.descricao} Únic${e.artigoDefinido}`;return["Secao","Subsecao"].includes(e.tipo)?t:t.toUpperCase()}normalizaNumeracao(e){var t;const o=null!==(t=e.split(" ")[1])&&void 0!==t?t:e,i=/[CDILMVX]+(-[a-zA-Z]+)*/.exec(o);return i?i[0]:Hs(o).trim().replace(/-$/,"").trim()}createNumeroFromRotulo(e){if(e&&!["parte","livro","título","capítulo","seção","subseção"].some((t=>t===e.toLowerCase())))if(this.informouAgrupadorUnico=/.*[uú]nic[ao]/i.test(e),this.informouAgrupadorUnico)this.numero="1";else{const t=this.normalizaNumeracao(e);if(!t)return void(this.numero=void 0);const o=Tm(t,xm(e)?null:km,Rm);this.numero=wm(o)?o:void 0}}createRotulo(e){var t,o,i;const a=void 0===e.descricao?null!==(t=e.name)&&void 0!==t?t:"":["Secao","Subsecao"].includes(e.tipo)?e.descricao:e.descricao.toLocaleUpperCase();void 0===this.numero||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.situacao.tipoEmenda===up.EMENDA_ARTIGO_ONDE_COUBER&&"Articulacao"===(null===(o=e.pai)||void 0===o?void 0:o.tipo)?this.rotulo=a:void 0===this.numero||wm(this.numero)?e.isDispositivoAlteracao&&Gp(e)?this.rotulo=this.informouAgrupadorUnico?this.getNomeAgrupadorUnico(e):a+" "+Tm(this.numero,Nm,e.isDispositivoAlteracao?qm:void 0):1!==vp(e).length||(null===(i=e.pai)||void 0===i?void 0:i.situacao).existeNaNormaAlterada?this.rotulo=a+" "+Tm(this.numero,Nm,e.isDispositivoAlteracao?qm:void 0):this.rotulo=this.getNomeAgrupadorUnico(e):this.rotulo=a+" "+this.numero}setMaiusculaPrimeiraLetraDaDescricao(e){const t=e.split("-"),[o,...i]=t,a=o.toLocaleLowerCase().split(" ");for(let e=0;e<a.length;e++)a[e]=Em(a[e])?a[1].toUpperCase():Gs(a[e]);return a.join(" ")+(i.length>0?"-"+i.join(""):"")}getNumeracaoParaComandoEmenda(){if(void 0===this.numero)return"[ainda não numerado]";const e=this.rotulo.trim().replace(/^.+? +/,"");return e.toLowerCase().startsWith("únic")?this.setMaiusculaPrimeiraLetraDaDescricao(e):e}getNumeracaoComRotuloParaComandoEmenda(){const e=new Ws;return e.append(this.setMaiusculaPrimeiraLetraDaDescricao(this.rotulo)),e.toString()}}}function yf(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return""}}}!function(e){e.ConteudoTexto="Conteúdo de Texto"}(mf||(mf={}));const xf=new class{constructor(){this.descricao="Linha pontilhada"}execute(e){return e.conteudo.texto=Hd,Uu.execute(e)}};const Af=new class{constructor(){this.descricao="Remover linha pontilhada"}execute(e){return e.conteudo.texto="",Uu.execute(e)}},wf="ACEITAR_REVISAO";const _f=new class{constructor(){this.descricao="Aceitar revisão"}execute(e,t){return{type:wf,elemento:e,revisao:t}}},Ef="REJEITAR_REVISAO";const Of=new class{constructor(){this.descricao="Rejeitar revisão"}execute(e,t){return{type:Ef,elemento:e,revisao:t}}};const Sf=new class{constructor(){this.descricao="Exibir diferenças"}execute(e){return{type:"EXIBIR_DIFERENCA",elemento:e}}},If=[];If.push(Yu),If.push(Gu),If.push(Ku),If.push(Wu),If.push(Fd),If.push(Zu),If.push(td),If.push(nd),If.push(df),If.push(pf),If.push(dd),If.push(pd),If.push(hd),If.push(md),If.push(fd),If.push(vd),If.push(gd),If.push(bd),If.push(yd),If.push(xd),If.push(Ad),If.push(wd),If.push(Sd),If.push(_d),If.push(Rd),If.push(Ed),If.push(Od),If.push(Id),If.push(kd),If.push(Cd),If.push(Nd),If.push(Td),If.push(qd),If.push(Dd),If.push(Pd),If.push(Ld),If.push(ad),If.push(sd),If.push(cd),If.push(ld),If.push(jd),If.push(Du),If.push(Pu),If.push(Lu),If.push(Mu),If.push($u),If.push(ju),If.push(hu),If.push(mu),If.push(xu),If.push(Au),If.push(wu),If.push(vu),If.push(gu),If.push(bu),If.push(Eu),If.push(Ou),If.push(Su),If.push(Cu),If.push(Nu),If.push(Tu),If.push(au),If.push(ru),If.push(xf),If.push(Af),If.push(_f),If.push(Of),If.push(Sf);const kf=[];kf.push(du),kf.push(pu),kf.push(yu),kf.push(ku),kf.push(_u),kf.push(fu);const Cf=e=>If.includes(e),Nf=[...If,...kf,$d],Tf=e=>Nf.filter((t=>t instanceof Ru&&t.tipo===e))[0],qf=e=>{var t,o;return Zp(e.pai)&&0===e.filhos.length&&e.tipo!==cu.omissis.name&&(null===(t=Tp(e))||void 0===t?void 0:t.tipo)!==cu.omissis.name&&(null===(o=Lp(e))||void 0===o?void 0:o.tipo)!==cu.omissis.name};var Rf;!function(e){e.AGRUPADOR="Não é possível mover agrupadores de artigo.",e.ORIGINAL="Não é possível mover um dispositivo original.",e.PROXIMO_DIFERENTE_PARAGRAFO="O próximo dispositivo não é um parágrafo.",e.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA="O tipo do próximo dispositivo não corresponde ao tipo do dispositivo atual (alteração de norma).",e.PROXIMO_DIFERENTE_ALINEA="O próximo dispositivo não é uma alínea.",e.PROXIMO_DIFERENTE_INCISO="O próximo dispositivo não é um inciso."}(Rf||(Rf={}));const Df=(e,t)=>{const o=e.past?e.past:[];return o.push(JSON.parse(JSON.stringify(t))),o},Pf=(e,t)=>{var o;return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:null===(o=e.ui)||void 0===o?void 0:o.events,message:t},emRevisao:e.emRevisao,usuario:e.usuario,revisoes:e.revisoes,numEventosPassadosAntesDaRevisao:e.numEventosPassadosAntesDaRevisao}},Lf=(e,t)=>{var o;let i;if(t.endsWith("EmOmissis")){const e=t.replace("transformar","").replace("EmOmissis","");i="transformar"+e+"EmOmissis"+e}else i=t;const a=e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e.nomeAcao===t||e.nomeAcao.replaceAll("IncisoCaput","Inciso").replaceAll("IncisoParagrafo","Inciso")===i));return null===(o=a[0])||void 0===o?void 0:o.nomeAcao},Mf=(e,t)=>e.getAcoesPossiveis(e).filter((e=>e instanceof t)).length>0,$f=(e,t)=>("Dispositivo Original"===e.situacao.descricaoSituacao&&zf(e,Rf.ORIGINAL),Pf(t,{tipo:Mh.ERROR,descricao:"Operação não permitida. <br>"+jf(e.motivosOperacaoNaoPermitida)})),jf=e=>void 0!==e?e.join("<br>"):"",zf=(e,t)=>{void 0!==e.motivosOperacaoNaoPermitida?e.motivosOperacaoNaoPermitida.includes(t)||e.motivosOperacaoNaoPermitida.push(t):(e.motivosOperacaoNaoPermitida=[],e.motivosOperacaoNaoPermitida.push(t))};function Ff(e){return class extends e{getAcoesPossiveis(e){var t,o,i,a;const r=[];if(!ip(e))return[];if(r.push(hu),r.push(mu),0===$p(e).length&&jp(e).length>0&&e.filhos.filter((e=>ip(e))).length>0&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||r.push(ad),e.pai&&Gd(e.pai)&&ip(e.pai)&&void 0===qp(e)){const i=null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.indexOf(e.pai.tipo);null===(o=e.tiposPermitidosPai)||void 0===o||o.filter(((e,t)=>t>i)).forEach((e=>r.push(Tf(e))))}if(e.pai&&!Gd(e.pai)&&ip(e.pai)&&0===e.pai.indexOf(e)){const t=null===(i=e.tiposPermitidosPai)||void 0===i?void 0:i.indexOf(e.pai.tipo);null===(a=e.tiposPermitidosPai)||void 0===a||a.filter(((e,o)=>o>t)).forEach((e=>r.push(Tf(e))))}return Zp(e)&&r.push(nd),r.push(au),Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?r.push(Wu):r.push(Ku)),zf(e,Rf.AGRUPADOR),e.getAcoesPermitidas(e,r)}getAcaoPossivelTab(e){}getAcaoPossivelShiftTab(e){}}}class Bf{constructor(){this.descricaoSituacao=Ud.DISPOSITIVO_NOVO}getAcoesPermitidas(e,t){return[...new Set(t)].filter((e=>void 0!==e)).filter((e=>"Adicionar"!==e.descricao&&"Atualizar dispositivo"!==e.descricao)).sort(((e,t)=>e.descricao.localeCompare(t.descricao)))}}class Uf extends Bf{constructor(){super(...arguments),this.descricaoSituacao=Ud.DISPOSITIVO_ADICIONADO,this.tipoEmenda=up.EMENDA}getAcoesPermitidas(e,t){return[...new Set(t)].filter((e=>!(e instanceof Ru))).filter((e=>void 0!==e)).filter((e=>"Adicionar"!==e.descricao&&"Atualizar dispositivo"!==e.descricao)).sort(((e,t)=>e.descricao.localeCompare(t.descricao)))}}function Vf(e){return class extends e{constructor(){super(...arguments),this.situacao=new Bf}getAcoesPermitidas(e,t){var o;return null===(o=this.situacao)||void 0===o?void 0:o.getAcoesPermitidas(e,t)}}}class Hf{constructor(e){this.tipo=cu[e].tipo,this.tagId=cu[e].tagId,this.name=cu[e].name,this.descricao=cu[e].descricao,this.descricaoPlural=cu[e].descricaoPlural,this.tiposPermitidosPai=cu[e].tiposPermitidosPai,this.tiposPermitidosFilhos=cu[e].tiposPermitidosFilhos,this.tipoProvavelFilho=cu[e].tipoProvavelFilho,this.INDICADOR_SEQUENCIA=cu[e].INDICADOR_SEQUENCIA,this.INDICADOR_FIM_SEQUENCIA=cu[e].INDICADOR_FIM_SEQUENCIA,this.INDICADOR_DESDOBRAMENTO=cu[e].INDICADOR_DESDOBRAMENTO}}const Gf=(e,t)=>{void 0!==t.tipoProvavelFilho&&e.filhos.forEach(((o,i)=>{var a;const r=dv(Kd(t)&&cu.inciso.name===t.tipoProvavelFilho?t.caput:t,t.tipoProvavelFilho);r.texto=null!==(a=o.texto)&&void 0!==a?a:"",r.situacao=o.situacao,r.mensagens=Fm(r),r.createRotulo(r),o.filhos&&Gf(o,r),i===e.filhos.length-1&&t.renumeraFilhos()}))},Qf=(e,t)=>{e.tipo===t.tipo&&e.filhos.forEach((o=>{var i;const a=dv(Kd(t)&&Wd(o.pai)?t.caput:t,o.tipo);o.rotulo?a.rotulo=o.rotulo:a.createRotulo(a),a.texto=null!==(i=o.texto)&&void 0!==i?i:"",a.situacao=o.situacao,e.removeFilho(o),a.mensagens=Fm(o),o.filhos&&(e.tipo===t.tipo?Qf(o,a):Gf(o,a)),0===e.filhos.length&&t.renumeraFilhos()}))},Kf=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return ep(e)?(t.push(ad),Zp(e)&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&"1"===e.numero||t.push(vu),t.push(gu),void 0!==zp(e)?t.push(Zu):zf(e,Rf.PROXIMO_DIFERENTE_ALINEA),void 0!==Rp(e)?t.push(td):zf(e,Rf.PROXIMO_DIFERENTE_ALINEA),Zp(e)&&!vh(e.pai)&&t.push(nd),Zp(e)&&Kp(e)&&t.push(df),ih(e)||t.push(Su),(Ip(e)||kp(e))&&t.push(Xd(e.pai.pai)?gd:vd),Cp(e)&&(void 0===Tp(e)||op(Tp(e)))||t.push(bd),qf(e)&&t.push(dd),Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?t.push(Wu):t.push(Ku)),bh(e)&&t.push(Fd),!e.isDispositivoAlteracao||cp(e)||ih(e)||t.push(xf),e.isDispositivoAlteracao&&cp(e)&&!ih(e)&&t.push(Af),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){var t;if(ep(e))return null===(t=e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(e){var t;if(ep(e))return Ip(e)||kp(e)?Xd(e.pai.pai)?gd:vd:null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}}}(cf(Xh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoAlineaLcp95",this.SUFIXO=")"}normalizaNumeracao(e){const t=/[a-z]+(-[a-zA-Z0-9]+)*/.exec(e.trim());return t?t[0]:Hs(e).trim().replace(/\)$/,"").trim()}createNumeroFromRotulo(e){this.numero=Tm(this.normalizaNumeracao(e),xm(e)?null:Om,Rm)}createRotulo(e){this.rotulo=void 0===this.numero?cu.alinea.name:Tm(this.numero,Sm,e.isDispositivoAlteracao?qm:void 0)+this.SUFIXO}getNumeracaoParaComandoEmenda(){return void 0===this.numero?"[ainda não numerada]":"“"+this.rotulo.trim().replace(this.SUFIXO,"")+"”"}getNumeracaoComRotuloParaComandoEmenda(){var e,t;return void 0===this.numero?(null===(e=cu.alinea.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" [ainda não numerada]":(null===(t=cu.alinea.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(gf(Hf)))))))),Wf=Vf(function(e){return class extends e{getAcoesPossiveis(e){var t,o,i,a,r,n,s;const l=[];if(!Kd(e))return[];if(l.push(du),l.push(ad),zp(e)||xh(e)?l.push(Zu):zf(e,Rf.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA),Rp(e)||ap(e.pai)?l.push(td):zf(e,Rf.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA),Gp(e)&&Zp(e)&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&"1"===e.numero||l.push(hu),l.push(mu),ih(e)||(l.push(Tu),l.push(wu)),Zp(e)||l.push(Gu),Zp(e)&&l.push(nd),e.alteracoes&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_MODIFICADO&&l.push(Yu),e.hasAlteracao()||Zp(e)||0!==e.texto.length&&jh(e)||l.push(pu),e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||e.hasAlteracao()||Zp(e)||Np(e)||l.push(df),!(e.pai.indexOf(e)>0&&void 0!==Tp(e))||(null===(t=Tp(e))||void 0===t?void 0:t.hasAlteracao())||op(Tp(e))||Zp(e)&&Tp(e)&&ip(Tp(e))||l.push(yd),e.pai&&!Zp(e)&&Gd(e.pai)&&0===e.pai.filhos.filter((e=>ip(e))).length&&l.push(Mu),e.pai&&Zp(e)&&ip(e.pai)&&l.push(Mu),!Zp(e)&&e.pai&&(e=>{const t=e.pai.indexOf(e);return e.pai.filhos.filter(((e,o)=>o>t&&ip(e))).length>0})(e)&&l.push(Tf(Op(e).tipo)),!Zp(e)&&ip(e.pai)){const t=null!==(i=null===(o=e.tiposPermitidosPai)||void 0===o?void 0:o.indexOf(e.pai.tipo))&&void 0!==i?i:0;null===(a=e.tiposPermitidosPai)||void 0===a||a.filter((()=>t>0)).filter(((o,i)=>e.pai.indexOf(e)>0?i>=t:i>t)).forEach((e=>l.push(Tf(e))))}if(!Zp(e)&&ip(e.pai)&&!Gd(e.pai)&&e.pai.indexOf(e)>0&&(e=>{var t;return void 0!==(null===(t=e.pai)||void 0===t?void 0:t.pai)&&gp(e.pai.pai,e.pai,[]).length>0})(e)){const t=null!==(n=null===(r=e.tiposPermitidosPai)||void 0===r?void 0:r.indexOf(e.pai.tipo))&&void 0!==n?n:0,o=gp(e.pai.pai,e.pai,[]).reduce(((e,t)=>e.includes(t.tipo)&&void 0!==Op(t)?e:e.concat(t.tipo)),[]);null===(s=e.tiposPermitidosPai)||void 0===s||s.filter((()=>t>0)).filter((e=>o.includes(e))).forEach((e=>l.push(Tf(e))))}return Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?l.push(Wu):l.push(Ku)),bh(e)&&l.push(Fd),l.push(ru),!e.isDispositivoAlteracao||cp(e)||ih(e)||l.push(xf),e.isDispositivoAlteracao&&cp(e)&&!ih(e)&&l.push(Af),e.getAcoesPermitidas(e,l)}getAcaoPossivelTab(e){var t;if(Kd(e))return null===(t=e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(e){var t;if(e.tiposPermitidosFilhos)return Jd(e)&&(Ip(e)||kp(e))?Ed:Zd(e)&&(Ip(e)||kp(e))?_d:ep(e)&&(Ip(e)||kp(e))?Xd(e.pai.pai)?gd:vd:null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}}}(cf(Jh(function(e){return class extends e{hasAlteracao(){var e;return!!this.alteracoes&&(null===(e=this.alteracoes.filhos)||void 0===e?void 0:e.length)>0}}}(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoArtigoLcp95",this.PREFIXO="Art. ",this.SUFIXO="º",this.ARTIGO_UNICO="Artigo único.",this.informouArtigoUnico=!1}normalizaNumeracao(e){return e.replace(/["”“]/g,"").replace(/\./g,"").replace(/artigo [uú]nico/i,"1").replace(/(art[.]{0,1})/i,"").replace(/[º]/i,"").trim()}isNumeracaoComComplementoAlfabetico(e){return/^\d{1,}[º]?(([-]?[a-zA-Z]+){0,2})$/.test(e)}isNumeracaoComComplementoNumerico(e){return/^\d{1,}[º]?(([-]?[1-9]+){0,2})$/.test(e)}createNumeroFromRotulo(e){const t=this.normalizaNumeracao(e);this.informouArtigoUnico=/.*[uú]nico/i.test(e),this.numero=this.informouArtigoUnico?"1":this.isNumeracaoComComplementoAlfabetico(t)?Tm(t,void 0,Rm):this.isNumeracaoComComplementoNumerico(t)?t:void 0}createRotulo(e){void 0===e?this.rotulo=cu.artigo.descricao:e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||e.situacao.tipoEmenda!==up.EMENDA_ARTIGO_ONDE_COUBER||Zp(e)?void 0===this.numero?this.rotulo=e.tipo:void 0===this.numero||wm(this.numero)?Gp(e)||Zp(e)&&ip(e.pai)&&1===e.pai.filhos.length?this.rotulo=this.informouArtigoUnico?this.ARTIGO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao(e):1===dp(e).artigos.length?this.rotulo=this.ARTIGO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao(e):this.rotulo=this.PREFIXO+this.numero+this.SUFIXO:this.rotulo="Art."}getNumeroAndSufixoNumeracao(e,t=!1){var o;const i=null===(o=this.numero)||void 0===o?void 0:o.split("-"),[a,...r]=i,n=+(null!=a?a:"1")>0&&parseInt(null!=a?a:"1",10)<10;return(n?a+this.SUFIXO:a)+(r.length>0?"-"+(null==r?void 0:r.map((t=>e.isDispositivoAlteracao?Sm(t):t)).join("-").toUpperCase()):"")+(t||n&&!r.length?"":".")}getNumeracaoParaComandoEmenda(e){return void 0===this.numero?"[ainda não numerado]":this.informouArtigoUnico?"artigo único":this.getNumeroAndSufixoNumeracao(e,!0)}getNumeracaoComRotuloParaComandoEmenda(e){var t;return void 0===this.numero?(null===(t=cu.artigo.descricao)||void 0===t?void 0:t.toLowerCase())+" [ainda não numerado]":this.informouArtigoUnico?"artigo único":"art. "+this.getNumeroAndSufixoNumeracao(e,!0)}}}(function(e){return class extends e{get filhos(){const e=this.getIncisosCaput(),t=this.paragrafos;return e.concat(t)}getIncisosCaput(){var e,t;return null!==(t=null===(e=this.caput)||void 0===e?void 0:e.filhos)&&void 0!==t?t:[]}get paragrafos(){var e;return this._paragrafos=null!==(e=this._paragrafos)&&void 0!==e?e:[],this._paragrafos}addFilhoOnPosition(e,t){Yd(e)?this.caput.addFilhoOnPosition(e,t):(e.pai=this,this.paragrafos.splice(t-this.getIncisosCaput().length,0,e))}addFilho(e,t){Wd(e)?this.caput=e:Yd(e)?this.addIncisoCaput(e,t):this.addParagrafo(e,t)}removeFilho(e){var t;Yd(e)?null===(t=this.caput)||void 0===t||t.removeFilho(e):this.removeParagrafo(e)}addIncisoCaput(e,t){this.caput.addFilho(e,t)}addParagrafo(e,t){if(t){const o=this.paragrafos.indexOf(t)+1;this.isLastFilho(t)?this.paragrafos.push(e):this.paragrafos.splice(o,0,e)}else this.paragrafos.push(e)}removeParagrafo(e){var t;this._paragrafos=null===(t=this._paragrafos)||void 0===t?void 0:t.filter((t=>t.uuid!==e.uuid?t:t.pai=void 0))}isLastFilho(e){return this.paragrafos.indexOf(e)===this.paragrafos.length-1}indexOf(e){return Yd(e)?this.caput.indexOf(e):this.filhos.indexOf(e)}renumeraIncisos(){var e;null===(e=this.caput)||void 0===e||e.renumeraFilhos()}renumeraParagrafos(){this.paragrafos.forEach((e=>{Zp(e)&&Qp(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO?(e.numero=Pm(e),e.createRotulo(e),e.id=Hm(e)):e.createRotulo(e)}))}isParagrafoUnico(){return 1===this.paragrafos.length}renumeraFilhos(){gh(this)?(this.renumeraIncisos(),this.renumeraParagrafos()):this.ajustaRotuloParagrafoUnicoSeNecessario()}ajustaRotuloParagrafoUnicoSeNecessario(){const e=this.paragrafos.filter((e=>!op(e))).length,t=this.paragrafos.filter((e=>!op(e))).find((e=>{var t;return null===(t=e.id)||void 0===t?void 0:t.endsWith("par1u")}));t&&(t.rotulo=1===e?"Parágrafo único.":"§ 1º")}}}(class extends Hf{constructor(){super("artigo")}get texto(){var e,t;return null!==(t=null===(e=this.caput)||void 0===e?void 0:e.texto)&&void 0!==t?t:""}set texto(e){this.caput.texto=e}}))))))),Xf=Vf(function(e){return class extends e{getAcoesPossiveis(e){return[]}getAcaoPossivelTab(e){}getAcaoPossivelShiftTab(e){}}}(cf(Jh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoIndisponivel"}createRotulo(){this.rotulo=void 0}createNumeroFromRotulo(){}getNumeracaoParaComandoEmenda(){return""}getNumeracaoComRotuloParaComandoEmenda(){return"caput"}}}(gf(Hf)))))))),Yf=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return Qd(e)?(t.push(ad),Zp(e)&&Kp(e)&&t.push(df),(Xd(e.pai)||Wd(e.pai)||Yd(e.pai)||ep(e.pai))&&e.pai.tipoProvavelFilho.length>0&&t.push(Nf.filter((t=>t instanceof ud&&t.nomeAcao==="transformarDispositivoGenericoEm"+e.pai.tipoProvavelFilho))[0]),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){}getAcaoPossivelShiftTab(e){}}}(cf(Yh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoDispositivoGenericoLcp95",this.SUFIXO=" -"}createNumeroFromRotulo(){}createRotulo(){this.rotulo=void 0===this.numero?"dg":this.numero+this.SUFIXO}getNumeracaoParaComandoEmenda(){return void 0===this.numero?"dg":this.numero}getNumeracaoComRotuloParaComandoEmenda(){return this.getNumeracaoParaComandoEmenda()}}}(gf(Hf)))))))),Jf=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return Yd(e)?(t.push(du),t.push(ad),Zp(e)&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&"1"===e.numero||t.push(xu),t.push(Au),void 0!==zp(e)?t.push(Zu):zf(e,Rf.PROXIMO_DIFERENTE_INCISO),void 0!==Rp(e)?t.push(td):zf(e,Rf.PROXIMO_DIFERENTE_INCISO),Zp(e)&&!vh(e.pai)&&t.push(nd),Zp(e)&&Kp(e)&&t.push(df),ih(e)||t.push(bu),zh(e)&&kp(e)&&t.push(ku),!Jd(e)||Cp(e)&&(void 0===Tp(e)||op(Tp(e)))||t.push(Od),Jd(e)&&(Ip(e)||kp(e))&&t.push(Ed),Jd(e)&&qf(e)&&t.push(pd),Zd(e)&&(Ip(e)||Cp(e))&&t.push(fd),Zd(e)&&(!Cp(e)||void 0!==Tp(e)&&op(Tp(e)))&&t.push(Sd),Zd(e)&&qf(e)&&t.push(fd),Zd(e)&&(Ip(e)||kp(e))&&t.push(_d),Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?t.push(Wu):t.push(Ku)),bh(e)&&t.push(Fd),!e.isDispositivoAlteracao||cp(e)||ih(e)||t.push(xf),e.isDispositivoAlteracao&&cp(e)&&!ih(e)&&t.push(Af),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){var t;if(Yd(e))return!Jd(e)||Ip(e)&&Cp(e)?Zd(e)&&(Ip(e)||kp(e))?Sd:null===(t=e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((t=>{const o=Yd(e)?e.pai.tipo:"",i=t.endsWith(cu.inciso.name)?!Xd(e)||Ip(e)&&Cp(e)?"IncisoCaput":"IncisoParagrafo":t,a="transformar"+e.tipo+o+"Em"+i;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&a&&e.nomeAcao===a))[0]}))[0]:Od}getAcaoPossivelShiftTab(e){var t;if(Yd(e))return Jd(e)&&(Ip(e)||kp(e))?Ed:Zd(e)&&(Ip(e)||kp(e))?_d:null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}}}(cf(Jh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoIncisoLcp95",this.SUFIXO=" –"}normalizaNumeracao(e){const t=/[CDILMVX]+(-[a-zA-Z0-9]+)*/.exec(e);return t?t[0]:Hs(e).trim().replace(/-$/,"").trim()}createNumeroFromRotulo(e){const t=Tm(this.normalizaNumeracao(e),xm(e)?null:km,Rm);this.numero=wm(t)?t:void 0}createRotulo(e){this.rotulo=void 0===this.numero?cu.inciso.name:Tm(this.numero,Nm,e.isDispositivoAlteracao?qm:void 0)+this.SUFIXO}getNumeracaoParaComandoEmenda(e){return void 0===this.numero?"[ainda não numerado]":Tm(this.numero,Nm,e.isDispositivoAlteracao?qm:void 0)}getNumeracaoComRotuloParaComandoEmenda(e){var t,o;return void 0===this.numero?(null===(t=cu.inciso.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+" [ainda não numerado]":(null===(o=cu.inciso.descricao)||void 0===o?void 0:o.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda(e)}}}(gf(Hf)))))))),Zf=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return tp(e)?(t.push(ad),Zp(e)&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&"1"===e.numero||t.push(Eu),t.push(Ou),void 0!==zp(e)&&t.push(Zu),void 0!==Rp(e)&&t.push(td),Zp(e)&&!vh(e.pai)&&t.push(nd),Zp(e)&&Kp(e)&&t.push(df),(Ip(e)||kp(e))&&t.push(Rd),qf(e)&&t.push(hd),Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?t.push(Wu):t.push(Ku)),bh(e)&&t.push(Fd),!e.isDispositivoAlteracao||cp(e)||ih(e)||t.push(xf),e.isDispositivoAlteracao&&cp(e)&&!ih(e)&&t.push(Af),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){var t;if(tp)return null===(t=e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}getAcaoPossivelShiftTab(e){var t;if(e.tiposPermitidosFilhos)return null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}}}(cf(Jh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoItemLcp95",this.SUFIXO="."}normalizaNumeracao(e){const t=/\d+(-[a-zA-Z0-9]+)*/.exec(e.trim());return t?t[0]:Hs(e).trim().replace(/\.$/,"").trim()}isNumeracaoValidaParaRotulo(e){return/^\d{1,}(([-]?[a-zA-Z0-9]+){0,2})$/.test(e)}createNumeroFromRotulo(e){const t=this.normalizaNumeracao(e);this.numero=this.isNumeracaoValidaParaRotulo(t)?Tm(t,void 0,Rm):void 0}createRotulo(e){this.rotulo=void 0===this.numero?cu.item.name:Tm(this.numero,void 0,e.isDispositivoAlteracao?qm:void 0)+this.SUFIXO}getNumeracaoParaComandoEmenda(){return void 0===this.numero?"[ainda não numerado]":this.rotulo.trim().replace(".","")}getNumeracaoComRotuloParaComandoEmenda(){var e,t;return void 0===this.numero?(null===(e=cu.item.descricao)||void 0===e?void 0:e.toLocaleLowerCase())+" [ainda não numerado]":(null===(t=cu.item.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+" "+this.getNumeracaoParaComandoEmenda()}}}(gf(Hf)))))))),ev=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return Xd(e)?(t.push(ad),Zp(e)&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&"1"===e.numero||t.push(Cu),t.push(Nu),void 0!==zp(e)?t.push(Zu):zf(e,Rf.PROXIMO_DIFERENTE_PARAGRAFO),void 0!==Rp(e)?t.push(td):zf(e,Rf.PROXIMO_DIFERENTE_PARAGRAFO),Zp(e)&&!vh(e.pai)&&t.push(nd),ih(e)||t.push(wu),!Cp(e)&&!Ip(e)||Tp(e)&&op(Tp(e))||t.push(Ld),!Cp(e)&&Xd(Tp(e))&&t.push(Pd),(kp(e)||Ip(e))&&t.push(Dd),qf(e)&&t.push(md),Zp(e)&&Kp(e)&&t.push(df),Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(e.situacao.existeNaNormaAlterada?t.push(Wu):t.push(Ku)),bh(e)&&t.push(Fd),!e.isDispositivoAlteracao||cp(e)||ih(e)||t.push(xf),e.isDispositivoAlteracao&&cp(e)&&!ih(e)&&t.push(Af),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){var t;if(Xd(e))return null===(t=e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((t=>{const o=t.endsWith(cu.inciso.name)?Xd(e)&&!Ip(e)&&!Cp(e)&&Xd(Tp(e))?"IncisoParagrafo":"IncisoCaput":t,i="transformar"+e.tipo+"Em"+o;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&i&&e.nomeAcao===i))[0]}))[0]}getAcaoPossivelShiftTab(e){var t;if(e.tiposPermitidosFilhos)return Jd(e)&&(Ip(e)||kp(e))?Ed:Zd(e)&&(Ip(e)||kp(e))?_d:ep(e)&&(Ip(e)||kp(e))?Xd(e.pai.pai)?gd:vd:null===(t=e.tiposPermitidosPai)||void 0===t?void 0:t.map((t=>{const o="transformar"+e.tipo+"Em"+t;return e.getAcoesPossiveis(e).filter((e=>e instanceof ud)).filter((e=>e instanceof ud&&e.nomeAcao&&o&&e.nomeAcao===o))[0]}))[0]}}}(cf(Jh(hf(ff(function(e){return class extends e{constructor(){super(...arguments),this.type="NumeracaoParagrafoLcp95",this.PREFIXO="§ ",this.SUFIXO="º",this.PARAGRAFO_UNICO="Parágrafo único.",this.informouParagrafoUnico=!1}normalizaNumeracao(e){return e.trim().replace(/\./g,"").replace(/§/i,"").replace(/par[aá]grafo [uú]nico/i,"1").replace(/[º]/i,"").trim()}isNumeracaoComComplementoAlfabetico(e){return/^\d{1,}[º]?(([-]?[a-zA-Z]+){0,2})$/.test(e)}isNumeracaoComComplementoNumerico(e){return/^\d{1,}[º]?(([-]?[1-9]+){0,2})$/.test(e)}createNumeroFromRotulo(e){const t=this.normalizaNumeracao(e);this.informouParagrafoUnico=/.*[uú]nico/i.test(e),this.numero=this.informouParagrafoUnico?"1":this.isNumeracaoComComplementoAlfabetico(t)?Tm(t,void 0,Rm):this.isNumeracaoComComplementoNumerico(t)?t:void 0}createRotulo(e){var t,o;void 0!==this.numero&&e?wm(this.numero)?e.isDispositivoAlteracao?vh(e)?1===(null===(t=e.pai)||void 0===t?void 0:t.filhos.filter((e=>Xd(e))).length)?this.rotulo=this.PARAGRAFO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao(e):this.rotulo=this.informouParagrafoUnico?this.PARAGRAFO_UNICO:this.PREFIXO+this.getNumeroAndSufixoNumeracao(e):1===(null===(o=e.pai)||void 0===o?void 0:o.filhos.filter((e=>Xd(e))).length)?this.rotulo=this.PARAGRAFO_UNICO:this.rotulo=this.PREFIXO+this.numero===void 0?void 0:this.PREFIXO+this.getNumeroAndSufixoNumeracao(e):this.rotulo=this.getNumeroAndSufixoNumeracao(e):this.rotulo=cu.paragrafo.name}getNumeroAndSufixoNumeracao(e,t=!1){var o;const i=null===(o=this.numero)||void 0===o?void 0:o.split("-"),[a,...r]=i,n=parseInt(null!=a?a:"1",10)<10;return(n?a+this.SUFIXO:a)+(r.length>0?"-"+(null==r?void 0:r.map((t=>e.isDispositivoAlteracao?Sm(t):t)).join("-").toUpperCase()):"")+(t||n&&!r.length?"":".")}getNumeracaoParaComandoEmenda(e){return void 0===this.numero?"[ainda não numerado]":this.isParagrafoUnico()?"parágrafo único":this.getNumeroAndSufixoNumeracao(e,!0)}getNumeracaoComRotuloParaComandoEmenda(e){var t;return void 0===this.numero?(null===(t=cu.paragrafo.descricao)||void 0===t?void 0:t.toLocaleLowerCase())+" [ainda não numerado]":this.isParagrafoUnico()?"parágrafo único":"§ "+this.getNumeroAndSufixoNumeracao(e,!0)}isParagrafoUnico(){var e,t;return this.isDispositivoAlteracao&&(null===(e=this.rotulo)||void 0===e?void 0:e.includes("único"))||!this.isDispositivoAlteracao&&1===(null===(t=this.pai)||void 0===t?void 0:t.filhos.filter((e=>Xd(e))).length)}}}(gf(Hf)))))))),tv=Vf(Ff(cf(Yh(hf(ff(bf(vf(class extends Hf{constructor(){super("articulacao")}get artigos(){var e;return null!==(e=this._artigos)&&void 0!==e?e:[]}addArtigo(e,t){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],void 0!==t?this._artigos.splice(this._artigos.indexOf(t)+1,0,e):this._artigos.push(e)}addArtigoOnPosition(e,t){var o;this._artigos=null!==(o=this._artigos)&&void 0!==o?o:[],this._artigos.splice(t,0,e)}removeArtigo(e){var t;this._artigos=null!==(t=this._artigos)&&void 0!==t?t:[],this._artigos=this._artigos.filter((t=>t.uuid!==e.uuid))}renumeraArtigos(){this.artigos.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)).forEach((e=>{Zp(e)||(e.numero=Pm(e)),e.createRotulo(e),e.id=Hm(e);const t=e.caput;t&&(t.id=Hm(t))}))}indexOfArtigo(e){return this.artigos.indexOf(e)}})))))))),ov=Vf(Ff(cf(Jh(hf(ff(bf(vf(Hf)))))))),iv=Vf(Ff(cf(Yh(hf(ff(bf(vf(Hf)))))))),av=Vf(Ff(cf(Jh(hf(ff(bf(vf(Hf)))))))),rv=Vf(Ff(cf(Xh(hf(ff(bf(vf(Hf)))))))),nv=Vf(Ff(cf(Xh(hf(ff(bf(vf(Hf)))))))),sv=Vf(Ff(cf(Xh(hf(ff(bf(vf(Hf)))))))),lv=Vf(Ff(cf(Jh(hf(ff(bf(vf(Hf)))))))),cv=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return op(e)?(t.push(ad),void 0!==zp(e)&&t.push(Zu),void 0!==Rp(e)&&t.push(td),Zp(e)&&Kp(e)&&t.push(df),Gd(e.pai)&&void 0!==Tp(e)&&t.push(kd),Wd(e.pai)&&t.push(Cd),Kd(e.pai)&&t.push(qd),Xd(e.pai)&&t.push(Nd),Yd(e.pai)&&t.push(Id),ep(e.pai)&&t.push(Td),bh(e)&&t.push(Fd),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){}getAcaoPossivelShiftTab(e){}}}(Xh(hf(function(e){return class extends e{constructor(){super(...arguments),this.tipoConteudo=mf.ConteudoTexto,this._texto=Hd}get texto(){return this._texto}set texto(e){const t=Vh(e);this._texto=t===Bh?Bh:Hd}}}(yf(gf(Hf))))))),uv=Vf(function(e){return class extends e{getAcoesPossiveis(e){const t=[];return sp(e)?(t.push(mu),t.push(au),e.getAcoesPermitidas(e,t)):[]}getAcaoPossivelTab(e){}getAcaoPossivelShiftTab(e){}}}(Xh(hf(ff(yf(gf(Hf))))))),dv=(e,t,o,i)=>{const a=pv(t,e);return void 0!==i&&i>=0?e.addFilhoOnPosition(a,i):o?e.addFilho(a,o):e.addFilho(a),a},pv=(e,t)=>{let o;switch(e.toLowerCase()){case"alinea":o=new Kf(e.toLowerCase());break;case"artigo":o=new Wf,o.caput=pv(cu.caput.tipo,o);break;case"capitulo":o=new ov(e.toLowerCase());break;case"caput":o=new Xf(e.toLowerCase());break;case"inciso":o=new Jf(e.toLowerCase());break;case"item":o=new Zf(e.toLowerCase());break;case"livro":o=new av(e.toLowerCase());break;case"omissis":o=new cv(e.toLowerCase());break;case"paragrafo":o=new ev(e.toLowerCase());break;case"parte":o=new rv(e.toLowerCase());break;case"secao":o=new sv(e.toLowerCase());break;case"subsecao":o=new nv(e.toLowerCase());break;case"titulo":o=new lv(e.toLowerCase());break;case"ementa":o=new uv(e.toLowerCase());break;default:o=t&&ip(t)?new iv("agrupadorGenerico"):new Yf("generico"),o.mensagens=[],o.mensagens.push({tipo:Mh.WARNING,descricao:"Não foi possível validar a natureza deste dispositivo com base na legislação vigente"})}return o.uuid=lf.next(),o.uuid2=ms(),o.name=e,o.pai=Yd(o)&&Kd(t)?t.caput:t,o.isDispositivoAlteracao=Zp(o),wv(o),o},hv=()=>{const e=new tv;return e.uuid=lf.next(),e.uuid2=ms(),e},mv=e=>{e.alteracoes=hv(),e.alteracoes.pai=e},fv=(e,t)=>{var o,i,a,r,n,s,l,c,u,d,p,h,m,f,v,g,b,y,x,A,w,_,E,O,S,I,k,C;let N;if(Zp(e))if("INICIAR_BLOCO"===t.subType)N=Av(cu.artigo.tipo,dp(e)),N.texto=(null===(a=null===(i=null===(o=t.novo)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)||void 0===a?void 0:a.length)>0?null===(n=null===(r=t.novo)||void 0===r?void 0:r.conteudo)||void 0===n?void 0:n.texto:"";else if("FINALIZAR_BLOCO"===t.subType){const o=dp(e);N=vv(o.pai),N.texto=Vh(null!==(c=null===(l=null===(s=t.novo)||void 0===s?void 0:s.conteudo)||void 0===l?void 0:l.texto)&&void 0!==c?c:"")}else if(((e,t)=>{var o,i,a;if(!Zp(e))return!1;const r=bp(e);return kp(r)&&(n=Vh(null!==(a=null===(i=null===(o=t.atual)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)&&void 0!==a?a:""),/\.["”](?:\s*\(NR\))\s*$/.test(n))&&Kp(e);var n})(e,t)){const o=dp(e);N="INICIAR_BLOCO"===t.subType?Av(cu.artigo.tipo,o):vv(o.pai),N.texto="INICIAR_BLOCO"===t.subType?"":Vh(null!==(p=null===(d=null===(u=t.novo)||void 0===u?void 0:u.conteudo)||void 0===d?void 0:d.texto)&&void 0!==p?p:"")}else N=vv(e),N.createRotulo(),N.texto=(null===(f=null===(m=null===(h=t.novo)||void 0===h?void 0:h.conteudo)||void 0===m?void 0:m.texto)||void 0===f?void 0:f.length)>0?Vh(null!==(b=null===(g=null===(v=t.novo)||void 0===v?void 0:v.conteudo)||void 0===g?void 0:g.texto)&&void 0!==b?b:""):"";else e.alteracoes||Uh(null===(x=null===(y=t.atual)||void 0===y?void 0:y.conteudo)||void 0===x?void 0:x.texto)||(null===(A=t.novo)||void 0===A?void 0:A.isDispositivoAlteracao)?(e.hasAlteracao()||mv(e),N=Av(e.tipo,e.alteracoes),N.texto=(null===(E=null===(_=null===(w=t.novo)||void 0===w?void 0:w.conteudo)||void 0===_?void 0:_.texto)||void 0===E?void 0:E.length)>0?null===(S=null===(O=t.novo)||void 0===O?void 0:O.conteudo)||void 0===S?void 0:S.texto:""):(N=vv(e),N.texto=null!==(C=null===(k=null===(I=t.novo)||void 0===I?void 0:I.conteudo)||void 0===k?void 0:k.texto)&&void 0!==C?C:"");return N},vv=e=>e.hasAlteracao()?gv(e):Kd(e)?Zp(e)?dv(e.caput,cu.inciso.tipo,void 0,0):yv(e):ip(e)?xv(e):Zp(e)?op(e)?dv(e.pai,Kd(e.pai)?cu.paragrafo.tipo:e.pai.tipoProvavelFilho,e):Np(e)||jh(e)?dv(e,e.tipoProvavelFilho,e):dv(e.pai,e.tipo,e):sp(e)?dv(e.pai,cu.artigo.tipo,void 0,0):bv(e),gv=e=>{var t;return e.pai.isLastFilho(e)&&(null===(t=null==e?void 0:e.pai)||void 0===t?void 0:t.pai)?dv(e.pai.pai,e.pai.tipo,e.pai):dv(e.pai,e.tipo,e)},bv=e=>{if(jh(e)){const t=e.tipoProvavelFilho;return e.pai.filhos.length>0?dv(e,t,void 0,0):dv(e,t)}if(e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL&&zh(e)&&e.pai.isLastFilho(e)){if(Jd(e)){const t=e.pai.pai;return t.filhos.filter((e=>Xd(e))).length>0?dv(t,cu.paragrafo.tipo,void 0,0):dv(t,cu.paragrafo.tipo)}return dv(e.pai.pai,e.pai.tipo,e.pai)}return dv(e.pai,e.tipo,e)},yv=e=>{if(jh(e)){const t=e.tipoProvavelFilho;if(t===cu.inciso.tipo){const o=e.caput;return o.filhos.length>0?dv(o,t,void 0,0):dv(o,t)}return e.pai.filhos.length>0?dv(e,t,void 0,0):dv(e,t)}return Fh(e)&&e.filhos.length>0&&Xd(e.filhos[0])?dv(e,cu.paragrafo.tipo,void 0,0):dv(e.pai,e.tipo,e)},xv=e=>dv(e,cu.artigo.tipo,void 0,0),Av=(e,t,o,i)=>{const a=dv(t,e,o,i);return a.situacao=new Uf,a.isDispositivoAlteracao=!0,a.notaAlteracao="NR",a.createRotulo(a),a},wv=e=>{Zp(e)&&(dp(e).renumeraFilhos=()=>{},dp(e).renumeraArtigos=()=>{})},_v=new Map;_v.set("Alinea",/(al[ií]nea|ali.?\s)\s*([uú]nica|[a-z]+[)]?(?:-[a-z])?).*/i),_v.set("Artigo",/(art\.?|artigo)\s*([uú]nico\s*|\d+(?:-[a-z])?).*/i),_v.set("Inciso",/(inciso|inc.?\s)\s*([uú]nico|[MDCLXVI]+[)]?(?:-[a-z])?).*/i),_v.set("Item",/(item)\s*([uú]nico\s*|\d+(?:-[a-z])?).*/i),_v.set("Paragrafo",/(§|par[aá]grafo|par.?\s)\s*([uú]nico\s*|\d+(?:-[a-z])?).*/i);const Ev=(e,t,o=up.EMENDA)=>{const i=Ov(e);let a=!0;if(!i||0===i.length)throw new Error("Não foi possível informado o dispositivo");i[0].tipo!==cu.artigo&&i.reverse()[0].tipo!==cu.artigo&&(a=!1);const r=a?i.shift():void 0,n=((e,t,o)=>{e.hasAlteracao()||(mv(e),e.alteracoes.situacao=new Uf,e.alteracoes.situacao.tipoEmenda=o);const i=Av(cu.artigo.tipo,e.alteracoes,void 0,0);return i.isDispositivoAlteracao=!0,i.situacao=new Uf,i.situacao.tipoEmenda=o,i.situacao.existeNaNormaAlterada=!0,t.numero&&i.createNumeroFromRotulo(t.numero),i.createRotulo(i),i.id=Hm(i),Kd(i)&&(i.caput.situacao=new Uf,i.caput.situacao.tipoEmenda=o),i})(t,null!=r?r:{tipo:cu.artigo},o);return((e,t,o)=>{let i=e;null==t||t.forEach((e=>{var t,a;(null===(t=i.tiposPermitidosFilhos)||void 0===t?void 0:t.includes(null===(a=e.tipo)||void 0===a?void 0:a.tipo))?(i=dv(i,e.tipo.tipo),e.numero&&i.createNumeroFromRotulo(e.numero),i.createRotulo(i)):e.numero&&e.numero.match(/\d.*/)?(i=dv(i,Kd(i)?cu.paragrafo.tipo:ep(i)?cu.item.tipo:cu.generico.tipo),e.numero&&i.createNumeroFromRotulo(e.numero),i.createRotulo(i)):(i=dv(i,cu.generico.tipo),i.rotulo=e.numero),o&&(i.situacao.tipoEmenda=o),i.isDispositivoAlteracao=!0,i.situacao=new Uf,i.situacao.existeNaNormaAlterada=!0,i.id=Hm(i),Kd(i)&&(i.caput.situacao=new Uf,o&&(i.caput.situacao.tipoEmenda=o)),i.mensagens=Fm(i)}))})(n,i,o),n},Ov=e=>{const t=new Sv(e);if(t.valido)return t.referencias};class Sv{constructor(e){this.texto=e,this.valido=!1,this.referencias=[],this.regexEncaixe="(?:-[a-z]+){0,3}",this.regexArtigo=`(art|artigo)\\s([uú]nico|\\d+${this.regexEncaixe})`,this.regexParagrafo=`(§|par[aá]grafo|par)\\s([uú]nico|\\d+${this.regexEncaixe})`,this.regexInciso=`(inciso|inc)\\s([uú]nico|X{0,3}(?:IX|IV|[XV]?I{0,3})${this.regexEncaixe})`,this.regexAlinea=`(al[ií]nea|al[ií])\\s([a-z]+${this.regexEncaixe})`,this.regexItem=`(item)\\s(\\d+${this.regexEncaixe})`,this.regex=`^(?:(?:(?:(?:${this.regexItem}\\s)?(?:${this.regexAlinea}\\s))?(?:${this.regexInciso}\\s))?(?:${this.regexParagrafo}\\s)?)?(?:${this.regexArtigo})$`,this.parse()}parse(){this.preparaTexto();const e=new RegExp(this.regex,"gi").exec(this.texto);if(e){this.valido=!0;const o=e.slice(1).filter((e=>void 0!==e));for(let e=0,i=1;o.length,i<=o.length-1;e+=2,i+=2){const a=(t=o[e]).trim().match(/ali|al[ií]nea.*/i)?cu.alinea:t.trim().match(/art[igo]?.*/i)?cu.artigo:t.trim().match(/inc|inciso.*/i)?cu.inciso:t.trim().match(/item.*/i)?cu.item:t.trim().match(/§|par[ágrafo]?.*/i)?cu.paragrafo:void 0;if(!a)throw new Error(`Não pude identificar o tipo no texto informado: ${o[e]}`);this.referencias.push({tipo:a,numero:o[i]})}}var t}preparaTexto(){this.texto=this.texto.toLowerCase().replace(/[º°\\.]/g,"").replace(/[,;]/g," ").replace(/\sd[ao]\s/g," ").replace(/\scaput\s/g," ").replace(/\s+/g," ").trim()}}const Iv=new class{constructor(){this.descricao="Ativar/Desativar revisão"}execute(e=0){return{type:"ATIVAR_DESATIVAR_REVISAO",quantidade:e}}};var kv;!function(e){e.JUSTIFICATIVA="justificativa",e.TEXTO_LIVRE="textoLivre",e.EMENDA="emenda",e.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber"}(kv||(kv={}));const Cv=(e=[])=>e.filter(Vv).map((e=>e)),Nv=(e=[],t=0)=>Cv(e).filter((e=>e.elementoAposRevisao.uuid===t)).slice(-1)[0],Tv=(e=[],t=0)=>Cv(e).filter((e=>e.elementoAposRevisao.uuid===t)),qv=(e,t)=>{const o=[];return null==t||t.forEach((i=>{var a,r,n,s;if(Vv(i)){const o=i,l=o.stateType===nf.ElementoIncluido?zv(e,o):null===(n=null===(r=null===(a=o.elementoAntesRevisao)||void 0===a?void 0:a.hierarquia)||void 0===r?void 0:r.pai)||void 0===n?void 0:n.uuid,c=l?Nv("ADICIONAR_ELEMENTO"===o.actionType?e.revisoes:t,l):void 0;c&&Bv(o,c)&&(o.idRevisaoElementoPai=c.id,o.idRevisaoElementoPrincipal=null===(s=Rv(e,t,c))||void 0===s?void 0:s.id)}o.push(i)})),o},Rv=(e,t,o)=>{var i,a,r;const n=o.stateType===nf.ElementoIncluido?zv(e,o):null===(r=null===(a=null===(i=o.elementoAntesRevisao)||void 0===i?void 0:i.hierarquia)||void 0===a?void 0:a.pai)||void 0===r?void 0:r.uuid,s=o&&Nv(t,n);return s?Rv(e,t,s):o},Dv={ADICIONAR_ELEMENTO:()=>"Dispositivo adicionado",REMOVER_ELEMENTO:()=>"Dispositivo removido",SUPRIMIR_ELEMENTO:()=>"Dispositivo suprimido",ATUALIZAR_TEXTO_ELEMENTO:()=>"Texto do dispositivo foi alterado","Mover para baixo":e=>$v(e),"Mover para cima":()=>"Dispositivo movido",RESTAURAR_ELEMENTO:()=>"Dispositivo restaurado",ADICIONAR_ELEMENTOS_FROM_CLIPBOARD:e=>jv(e),UNDO:e=>jv(e),REDO:e=>jv(e)},Pv={[nf.ElementoIncluido]:()=>"Dispositivo adicionado",[nf.ElementoRemovido]:()=>"Dispositivo removido",[nf.ElementoRestaurado]:()=>"Dispositivo restaurado",[nf.ElementoModificado]:()=>"Texto do dispositivo foi alterado",[nf.ElementoSuprimido]:()=>"Dispositivo suprimido"},Lv=e=>Dv[e.actionType]?Dv[e.actionType](e):jv(e),Mv=e=>{var t;return null!==(t=e.descricao)&&void 0!==t?t:""},$v=e=>{const{tipo:t,rotulo:o}=e.elementoAntesRevisao||{tipo:"",numero:0};return"Dispositivo movido"+(t?` (antes era "${t} ${o}")`:"")},jv=(e,t)=>e.elementoAntesRevisao&&t&&e.elementoAntesRevisao.numero!==t.numero?$v(e):Pv[e.stateType](),zv=(e,t)=>Fv(e,t.elementoAposRevisao)||0,Fv=(e,t)=>{var o,i,a,r,n,s;const l=Zm(e.articulacao,t);return l?Zp(l)?Jp(l.pai)||Wd(l.pai)?null===(i=null===(o=l.pai)||void 0===o?void 0:o.pai)||void 0===i?void 0:i.uuid:null===(a=l.pai)||void 0===a?void 0:a.uuid:Wd(l.pai)?null===(n=null===(r=l.pai)||void 0===r?void 0:r.pai)||void 0===n?void 0:n.uuid:null===(s=l.pai)||void 0===s?void 0:s.uuid:void 0},Bv=(e,t)=>{var o,i;return e.stateType!==nf.ElementoModificado&&(null===(o=t.elementoAntesRevisao)||void 0===o?void 0:o.descricaoSituacao)===(null===(i=e.elementoAntesRevisao)||void 0===i?void 0:i.descricaoSituacao)&&e.stateType===t.stateType},Uv=(e=[],t)=>[t,...Cv(e).filter((e=>e.idRevisaoElementoPrincipal===t.id))],Vv=e=>"elementoAposRevisao"in e,Hv=e=>!Vv(e),Gv=(e,t)=>{var o;if(!(null===(o=e.revisoes)||void 0===o?void 0:o.length))return!1;const i=nh(t).map((e=>e.uuid));return e.revisoes.filter((e=>Vv(e)&&Yv(e))).map((e=>e)).some((e=>{var t,o,a,r;return i.includes(null===(t=e.elementoAntesRevisao)||void 0===t?void 0:t.uuid)||i.includes(null===(r=null===(a=null===(o=e.elementoAntesRevisao)||void 0===o?void 0:o.hierarquia)||void 0===a?void 0:a.pai)||void 0===r?void 0:r.uuid)}))},Qv=e=>Vv(e)&&!e.idRevisaoElementoPrincipal;var Kv,Wv;!function(e){e.JustificativaAlterada="Justificação Alterada"}(Kv||(Kv={})),function(e){e.TextoLivreAlterado="Texto Livre Alterado"}(Wv||(Wv={}));const Xv=(e=[])=>e.filter((e=>Vv(e)&&Yv(e))).sort(((e,t)=>e.elementoAposRevisao.uuid-t.elementoAposRevisao.uuid)),Yv=e=>e.stateType===nf.ElementoRemovido,Jv=e=>{e&&(delete e.acoesPossiveis,delete e.tiposAgrupadoresQuePodemSerInseridosAntes,delete e.tiposAgrupadoresQuePodemSerInseridosDepois,e.revisao&&e.revisao,eg(e.elementoAnteriorNaSequenciaDeLeitura))},Zv=["tipo","uuid","uuid2","lexmlId","conteudo","descricaoSituacao","uuidAlteracao","uuid2Alteracao","existeNaNormaAlterada"],eg=e=>{if(e)for(const t in e)Zv.includes(t)||delete e[t]},tg=(e=[])=>e.filter(Qv).length,og=(e=[])=>{var t;const o=document.querySelectorAll("ins, del")||[],i=[];for(let e=0;e<o.length;e++){const a=o[e];65279!==(null===(t=a.innerText)||void 0===t?void 0:t.charCodeAt(0))&&i.push(a)}return i.length+tg(e)},ig=()=>{const e=document.getElementById("chk-nao-mostrar-modal-novamente");e&&localStorage.setItem("naoMostrarNovamenteDisclaimerMarcaAlteracao",e.checked?"true":"false")},ag=(e,t)=>{e&&(t?e.setAttribute("checked",""):e.removeAttribute("checked"))},rg=(e,t=[],o,i)=>{const a=ng(t,o.elementoAnteriorNaSequenciaDeLeitura);if(a)if("exclusao"===i)o.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(sg(t,a).elementoAposRevisao)),eg(o.elementoAnteriorNaSequenciaDeLeitura);else{const t=Zm(e,o),i=Wm(mp(t));eg(i),a.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=i,a.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=i;const r=Wm(t);dg(r,a.elementoAposRevisao)&&(a.elementoAposRevisao.hierarquia.posicao=r.hierarquia.posicao+1,a.elementoAntesRevisao.hierarquia.posicao=r.hierarquia.posicao+1)}},ng=(e=[],t)=>e.filter(Vv).map((e=>e)).filter(Yv).find((e=>e.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura.uuid===t.uuid)),sg=(e=[],t)=>e.map((e=>e)).filter((e=>e.idRevisaoElementoPrincipal===t.id)).slice(-1)[0]||t,lg=e=>{const t=e;return!!(Vv(e)&&t.stateType===nf.ElementoIncluido&&t.elementoAntesRevisao&&t.elementoAposRevisao&&t.elementoAntesRevisao.tipo===t.elementoAposRevisao.tipo)},cg=e=>{const t=e;return!!(Vv(e)&&t.elementoAntesRevisao&&t.elementoAposRevisao&&t.elementoAntesRevisao.tipo!==t.elementoAposRevisao.tipo)},ug=e=>Vv(e)&&e.stateType===nf.ElementoModificado,dg=(e,t)=>{var o,i,a,r;return(null===(i=null===(o=e.hierarquia)||void 0===o?void 0:o.pai)||void 0===i?void 0:i.lexmlId)===(null===(r=null===(a=t.hierarquia)||void 0===a?void 0:a.pai)||void 0===r?void 0:r.lexmlId)&&e.uuid<t.uuid},pg=e=>{var t;null===(t=e.ui)||void 0===t||t.events.filter((e=>e.stateType!==nf.RevisaoRejeitada)).filter((e=>e.stateType!==nf.RevisaoAdicionalRejeitada)).forEach((t=>hg(e.revisoes,t.elementos)))},hg=(e=[],t=[])=>{t.filter(Boolean).forEach((t=>{const o=Nv(e,t.uuid);t.revisao=o?JSON.parse(JSON.stringify(o)):void 0}))},mg=(e,t,o,i)=>{var a,r;const n={aceitar:[nf.ElementoValidado],rejeitar:[nf.ElementoIncluido,nf.ElementoRemovido,nf.ElementoSuprimido,nf.ElementoRenumerado,nf.ElementoValidado,nf.ElementoSelecionado,nf.ElementoMarcado,nf.SituacaoElementoModificada]};let s=[],l=[];t.forEach((e=>{s.push(...e.past[0]),l.push(...e.ui.events)}));const c={...e};n[i].forEach((e=>{s=Rg(c,s,e),l=Rg(c,l,e)}));const u=o.map((e=>e.id));return c.past=Df(c,s),c.present=l,c.future=[],c.ui={events:l,alertas:null===(a=e.ui)||void 0===a?void 0:a.alertas},c.revisoes=null===(r=e.revisoes)||void 0===r?void 0:r.filter((e=>!u.includes(e.id))),c};class fg{constructor(){this.descricaoSituacao=Ud.DISPOSITIVO_ORIGINAL}getAcoesPermitidas(e,t){const o=t.filter((e=>!(e instanceof Ru))).filter((e=>!(e instanceof id))).filter((e=>{var t;return!(null===(t=e.descricao)||void 0===t?void 0:t.startsWith("Mover"))})).filter((e=>!(e instanceof ud))).filter((e=>!(e instanceof rd))).filter((e=>!(e instanceof Xu)));return sp(e)||ip(e)&&Zp(e)||0!==nh(e).filter((e=>Vd(e))).length||o.push(cd),ip(e)&&Zp(e)&&o.push(ld),o}}const vg=e=>{var t;e.uuid=lf.next(),null===(t=e.filhos)||void 0===t||t.forEach((e=>vg(e)))},gg=(e,t)=>t.map((t=>{const o=Kd(t)?dp(t).indexOfArtigo(t):-1,i=t.pai,a=Kd(t)?qp(t):void 0;if(null==i||i.removeFilho(t),t.pai=e,e.addFilho(t,a),Kd(t)&&!a){const e=dp(t);e.removeArtigo(t),e.addArtigoOnPosition(t,o)}return t})),bg=(e,t)=>Gd(e)&&!Jp(e)&&Nh(e)?e.projetoNorma.ementa:Gd(e)||(e=>Kd(e)&&0===dp(e).indexOfArtigo(e))(t)&&!Zp(t)||0===t.pai.indexOf(t)?e:function(e){return Kd(e.pai)&&0===Ch(e.pai).indexOf(e)}(t)?mp(t.pai.caput):mp(e);const yg=e=>void 0!==e&&""!==e,xg=(e,t=!1)=>{const o=[];return nh(e).forEach((e=>{if(t){const t=Fm(e);t&&(e.mensagens=t,o.push(Wm(e,!0,!0)))}else o.push(Wm(e,!0,!0))})),o},Ag=(e,t)=>{const o=[];return wg(e,t).forEach((e=>o.push(...Jm(e,!0)))),o},wg=(e,t)=>{const o=new Map;return t.forEach((t=>{var i;const a=Zm(e,t)||(null===(i=t.hierarquia)||void 0===i?void 0:i.pai)&&Zm(e,t.hierarquia.pai);if(a&&Zp(a)){const e=Hp(a);o.set(e.id,e)}})),Array.from(o.values())},_g=(e,t)=>{const o=new Dg;return o.setReferencia(Wm(bg(e,t))),o.add(nf.ElementoIncluido,xg(t)),o.add(nf.ElementoRenumerado,of(t).map((e=>(e.mensagens=Fm(e),Wm(e))))),o.add(nf.ElementoValidado,tf(t,!1)),Zp(e)&&o.add(nf.SituacaoElementoModificada,[Wm(e)]),o},Eg=e=>{const t=new Dg,o=Wm(e);return o.mensagens=Fm(e),t.add(nf.ElementoModificado,[o]),t.add(nf.ElementoValidado,tf(e)),t},Og=(e,t)=>{e.mensagens=Fm(e);const o=Wm(e),i=t?[t]:[];return i.push(o),[{stateType:nf.ElementoModificado,elementos:i},{stateType:nf.ElementoValidado,elementos:tf(e,!0)}]},Sg=(e,t)=>{const o=e.articulacao,i=Jm(t,!1,!0),a=of(t),r=Tp(t),n=Zp(t),s=t.pai;s.removeFilho(t),s.renumeraFilhos(),Jp(s)&&0===s.filhos.length&&(s.pai.alteracoes=void 0);const l=r&&(Up(r)||Vp(r))?r:Wd(s)?s.pai:s;1===o.artigos.length&&a.push(o.artigos[0]);const c=((e,t,o)=>{const i=new Dg;return i.add(nf.ElementoRemovido,e),i.add(nf.ElementoRenumerado,t.map((e=>Wm(e)))),i.add(nf.ElementoValidado,o),i})(i,a,tf(l,!1));if(n&&(c.add(nf.ElementoValidado,tf(s,!0)),r||s))try{const e=r||("Caput"===s.tipo?s.pai:s);c.add(nf.SituacaoElementoModificada,Jm(e))}catch(e){c.add(nf.SituacaoElementoModificada,[])}return c.build()},Ig=(e,t)=>{let o=t.pai.indexOf(t);const i=t.pai.filhos.filter(((e,t)=>t<o&&ip(e))),a=t.pai,r=Wm(t,!1,!0),n=qp(t),s=(e=>{const t=nh(dp(e)),o=t.indexOf(e);return t.filter(((e,t)=>t<o&&ip(e)&&!Gd(e))).reverse()[0]})(t),l=(null==i?void 0:i.length)>0?i.reverse()[0]:t.pai,c=(null==i?void 0:i.length)>0?i.reverse()[0]:o>0?mp(l.filhos[o-1]):l,u=Gd(c)||Np(l)&&l.filhos[0].id===t.id?l:mp(c),d=[];let p=l.filhos.length;t.filhos.forEach((a=>{var r,n;let u;return u=Kd(a)?null!=s?s:e:(null===(r=l.tiposPermitidosFilhos)||void 0===r?void 0:r.includes(a.tipo))?l:(null===(n=c.tiposPermitidosFilhos)||void 0===n?void 0:n.includes(a.tipo))?c:kg(t.pai,a.tipo,[]),a.pai=u,t.removeFilho(a),(null==i?void 0:i.length)>0?u.addFilhoOnPosition(a,p++):u.addFilhoOnPosition(a,o++),d.push(Wm(a)),a})),t.pai.removeFilho(t),null==l||l.renumeraFilhos(),a.renumeraFilhos();const h=l.filhos.filter(((e,t)=>t>=o&&(ip(e)||Gp(e)))).map((e=>Wm(e))).flat(),m=(null==a?void 0:a.filhos.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_NOVO)).map((e=>Wm(e))))||[];n&&1===vp(n).length&&h.unshift(Wm(n));const f=new Dg;return f.setReferencia(Gd(u)&&Jp(u)?Wm(u.pai):Wm(u)),f.add(nf.ElementoRemovido,[r]),f.add(nf.SituacaoElementoModificada,d),f.add(nf.ElementoRenumerado,[...h,...m]),f.build()},kg=(e,t,o)=>{var i;if(e)return(null===(i=e.tiposPermitidosFilhos)||void 0===i?void 0:i.includes(t))?0===o.length||o.includes(e)?e:void 0:kg(e.pai,t,o)},Cg=e=>{const t=[],o=e=>{const o=Wm(e);(e=>{var t,o,i,a,r,n,s,l,c;e.numero=null!==(o=null===(t=e.situacao.dispositivoOriginal)||void 0===t?void 0:t.numero)&&void 0!==o?o:"",e.rotulo=null!==(a=null===(i=e.situacao.dispositivoOriginal)||void 0===i?void 0:i.rotulo)&&void 0!==a?a:"",e.id=null!==(n=null===(r=e.situacao.dispositivoOriginal)||void 0===r?void 0:r.lexmlId)&&void 0!==n?n:"",e.texto=e.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO?null!==(c=null===(l=null===(s=e.situacao.dispositivoOriginal)||void 0===s?void 0:s.conteudo)||void 0===l?void 0:l.texto)&&void 0!==c?c:"":e.texto,e.situacao=new fg,Kd(e)&&(e.caput.situacao=new fg)})(e),t.push({stateType:nf.ElementoRestaurado,elementos:[o,Wm(e)]})};if(e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO){const i=nh(e).filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO));i.forEach(o);const a=Ng(e);a&&t.push({stateType:nf.ElementoValidado,elementos:[a]})}else o(e);return t.push({stateType:nf.ElementoSelecionado,elementos:[Wm(e,!0)]}),t},Ng=e=>{const t=e.pai&&!ip(e.pai)?Wd(e.pai)?e.pai.pai:e.pai:null;return t?(t.mensagens=Fm(t),Wm(t,!0)):null},Tg=(e,t)=>null==e?void 0:e.filter((e=>e.stateType===t))[0],qg=e=>{const t=new Map;return e.filter((e=>[nf.ElementoRemovido,nf.ElementoIncluido].includes(e.stateType))).forEach((e=>{var o;return null===(o=e.elementos)||void 0===o?void 0:o.forEach((e=>t.set(e.uuid,e)))})),Array.from(t.values())},Rg=(e,t,o)=>{const i=t.filter((e=>e.stateType!==o));if(o===nf.ElementoRemovido){const e=t.filter((e=>e.stateType===nf.ElementoRemovido)).map((e=>e.elementos||[])).flat();e.length&&i.push({stateType:o,elementos:e})}else{const a=[],r=new Map;t.filter((e=>e.stateType===o)).forEach((t=>{var i;null===(i=t.elementos)||void 0===i||i.forEach((t=>{const i=[nf.ElementoIncluido,nf.ElementoMarcado,nf.SituacaoElementoModificada,nf.ElementoRenumerado].includes(o)?Nv(e.revisoes,t.uuid):void 0;if(i&&Yv(i))a.push(t);else if(!r.has(t.uuid)){const i=Zm(e.articulacao,t);i&&(r.set(t.uuid,i),a.push(Xm(i,o===nf.ElementoIncluido)))}}))})),a.length&&i.push({stateType:o,elementos:a})}return i};class Dg{constructor(){this.eventos=[],this.eventos=[{stateType:nf.ElementoIncluido,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoRemovido,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoModificado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoRenumerado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoRestaurado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoSuprimido,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoValidado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoSelecionado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoMarcado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.SituacaoElementoModificada,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.ElementoReferenciado,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.RevisaoAceita,referencia:void 0,pai:void 0,elementos:[]},{stateType:nf.RevisaoRejeitada,referencia:void 0,pai:void 0,elementos:[]}]}add(e,t){const o=this.get(e);t.forEach((e=>{var t,i,a;return a=e,(null==(i=o)?void 0:i.elementos.map((e=>{var t,o;return e.uuid===a.uuid&&e.rotulo===a.rotulo&&(null===(t=e.conteudo)||void 0===t?void 0:t.texto)===(null===(o=a.conteudo)||void 0===o?void 0:o.texto)})).filter((e=>e)).length)>0||null===(t=o.elementos)||void 0===t?void 0:t.push(e)}))}build(){return this.eventos.filter((e=>e.elementos&&e.elementos.length>0))}get(e){return this.eventos.filter((t=>t.stateType===e))[0]}setReferencia(e){this.get(nf.ElementoIncluido).referencia=e}}const Pg=e=>{var t;if(parseInt(e.numero)>1){const o=Tp(e),i=dv(e.pai,cu.omissis.tipo,o,o?void 0:0);i.situacao=new Uf,null===(t=e.pai)||void 0===t||t.addFilhoOnPosition(i,0)}},Lg=(e,t)=>{var o,i,a,r,n,s,l,c,u,d,p,h,m,f,v,g,b,y,x,A,w,_,E;let O=!1;const S=Zm(e.articulacao,t.atual,!0),I=S&&Kd(S)&&t.novo.tipo===cu.inciso.tipo?S.caput:void 0,k="filho"===t.posicao&&I?I:S,C=k&&"filho"===t.posicao&&Np(k)?k.filhos[k.filhos.length-1]:void 0;if(void 0===k||k.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO&&jh(k))return e.ui.events=[],e;if(k.situacao.descricaoSituacao!==Ud.DISPOSITIVO_NOVO&&k.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&jh(k)&&!yg(null===(i=null===(o=t.novo)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto)){if(k.hasAlteracao()&&(null===(a=k.alteracoes)||void 0===a?void 0:a.filhos)&&eh(k.alteracoes.filhos[0])&&!op(k.alteracoes.filhos[0])&&"1"===k.alteracoes.filhos[0].numero&&"antes"!==t.posicao&&k.tipo!==t.novo.tipo)return e.ui.events=[],e;if(void 0===t.posicao&&Zp(k)&&Np(k)&&eh(k.filhos[0])&&!op(k.filhos[0])&&!Xd(k.filhos[0])&&"1"===k.filhos[0].numero)return e.ui.events=[],e}let N=0===k.pai.indexOf(k)?!t.posicao&&k.hasAlteracao()?k:Jd(k)||Gp(k)?k.pai.pai:k.pai:k.pai.filhos[k.pai.indexOf(k)-1];(null===(r=k.situacao)||void 0===r?void 0:r.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL&&yg(null===(s=null===(n=t.novo)||void 0===n?void 0:n.conteudo)||void 0===s?void 0:s.texto)&&(t.atual.conteudo.texto=k.texto,t.novo.conteudo.texto=void 0);const T=Up(k)||Vp(k),q=Xm(k),R=[];if(Ym(R,k),((e,t,o)=>{var i,a,r,n,s,l,c,u,d;if(o&&(null===(i=o.ui)||void 0===i?void 0:i.events)){const t=Tg(o.ui.events,nf.ElementoModificado);if(t&&t.elementos&&(null===(r=null===(a=t.elementos[0])||void 0===a?void 0:a.conteudo)||void 0===r?void 0:r.texto)===e.texto)return!0}return""!==e.texto&&""===(null===(s=null===(n=t.atual)||void 0===n?void 0:n.conteudo)||void 0===s?void 0:s.texto)||(null===(c=null===(l=t.atual)||void 0===l?void 0:l.conteudo)||void 0===c?void 0:c.texto)&&0!==e.texto.localeCompare(null===(d=null===(u=t.atual)||void 0===u?void 0:u.conteudo)||void 0===d?void 0:d.texto)})(k,t,e)&&(k.texto=Zp(k)?Vh(null!==(u=null===(c=t.atual.conteudo)||void 0===c?void 0:c.texto)&&void 0!==u?u:""):null===(l=t.atual.conteudo)||void 0===l?void 0:l.texto,O=!0),((e,t)=>{var o,i,a;const r=Wd(e)?e.pai:e;return Qd(r)||jh(r)&&!Mf(r,uu)||(null===(o=r.situacao)||void 0===o?void 0:o.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL&&yg(null===(a=null===(i=t.novo)||void 0===i?void 0:i.conteudo)||void 0===a?void 0:a.texto)})(k,t))return Pf(e,{tipo:Mh.INFO,descricao:"Não é possível criar dispositivos nessa situação"});let D;if(t.posicao&&"filho"!==t.posicao&&!sp(k)){if(k.tipo===t.novo.tipo)D="antes"===t.posicao?dv(k.pai,t.novo.tipo,void 0,((e,t)=>{const o=e.pai.indexOf(e);return"antes"===t?o:o===e.pai.filhos.length-1?void 0:o+1})(k,t.posicao)):dv(k.pai,t.novo.tipo,k);else if(ip(k)&&t.novo.tipo===cu.artigo.tipo)if("antes"===t.posicao){const e=xp(k);N=e;const o=e?ip(e)?e:Kd(e)?e.pai:bp(e).pai:k.pai,i=e&&ip(e)?0:void 0,a=!e||ip(e)?void 0:Kd(e)?e:bp(e);D=dv(o,t.novo.tipo,a,i)}else D=dv(k,t.novo.tipo,void 0,0)}else D=k.hasAlteracao()?Av(cu.artigo.tipo,k.alteracoes,void 0,0):sp(k)&&t.novo.tipo?dv(e.articulacao,t.novo.tipo,void 0,0):t.novo.tipo&&k.tipo!==t.novo.tipo?dv(k,t.novo.tipo,C):fv(k,t);if(Gp(D)&&(D.notaAlteracao="NR"),Gp(D)&&(D.notaAlteracao="NR"),(null===(d=k.situacao)||void 0===d?void 0:d.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL||(null===(p=k.situacao)||void 0===p?void 0:p.descricaoSituacao)===Ud.DISPOSITIVO_MODIFICADO||(null===(h=k.situacao)||void 0===h?void 0:h.descricaoSituacao)===Ud.DISPOSITIVO_SUPRIMIDO||k.situacao instanceof Uf){D.situacao=new Uf,Kd(D)&&(D.caput.situacao=new Uf),D.situacao.tipoEmenda=e.modo;const t=D.pai;Jp(t)&&1===t.filhos.length&&(t.situacao=new Uf)}yg(null===(f=null===(m=t.novo)||void 0===m?void 0:m.conteudo)||void 0===f?void 0:f.texto)&&k.tipo===D.tipo&&Np(k)&&Qf(k,D),Zp(D)&&(D.createRotulo(D),D.id=Hm(D),null===(v=D.mensagens)||void 0===v||v.push({tipo:Mh.WARNING,descricao:"É necessário informar o rótulo do dispositivo"})),Zp(D)&&D.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(D.situacao.existeNaNormaAlterada=Gp(D)||!gh(D.pai)),D.pai.renumeraFilhos(),(null===(g=D.situacao)||void 0===g?void 0:g.descricaoSituacao)===Ud.DISPOSITIVO_ADICIONADO&&(D.id=Hm(D));const P=t.posicao&&"antes"===t.posicao?_g(N,D):"filho"===t.posicao&&C?_g(C,D):"filho"===t.posicao&&!C&&Wd(k)?_g(k.pai,D):_g(k,D),L=Xm(k);if(yg(null===(y=null===(b=t.novo)||void 0===b?void 0:b.conteudo)||void 0===y?void 0:y.texto)&&k.tipo===D.tipo&&R&&R.length>0&&P.add(nf.ElementoRemovido,R),ip(D)&&2===vp(D).length){const e=vp(D).filter((e=>e!==D));P.add(nf.ElementoModificado,[Wm(e[0])])}return(O||yg(null===(A=null===(x=t.novo)||void 0===x?void 0:x.conteudo)||void 0===A?void 0:A.texto))&&P.add(nf.ElementoModificado,[q,L]),(O||yg(null===(_=null===(w=t.novo)||void 0===w?void 0:w.conteudo)||void 0===_?void 0:_.texto)||op(k))&&P.add(nf.ElementoValidado,[L]),(Up(k)||T)&&(P.add(nf.ElementoValidado,[L]),P.add(nf.ElementoRenumerado,[L])),t.posicao&&"antes"===t.posicao&&P.add(nf.ElementoRenumerado,of(D).map((e=>Wm(e)))),P.add(nf.ElementoMarcado,[Wm(D),Wm(k)]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,P.build()),present:P.build(),future:[],ui:{events:P.build(),alertas:null===(E=e.ui)||void 0===E?void 0:E.alertas}}},Mg=(e,t)=>{var o,i,a,r,n;let s=Zm(e.articulacao,t.atual,!0);if(void 0===s)return e;if(!Kd(s)&&!ip(s)&&!sp(s))return Pf(e,{tipo:Mh.ERROR,descricao:"Não é permitido adicionar agrupador de artigo a partir da seleção atual"});if((Gd(s)||sp(s))&&"antes"===t.novo.posicao)return Pf(e,{tipo:Mh.ERROR,descricao:"Não é permitido adicionar agrupador de artigo antes da ementa"});const l=cu[t.novo.tipo.toLowerCase()].descricao;if(!t.isAbrindoEmenda&&"antes"===t.novo.posicao&&!wh(s).includes(t.novo.tipo))return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}" antes do dispositivo selecionado [${s.rotulo}]`});if(!t.isAbrindoEmenda&&"depois"===t.novo.posicao&&!Ah(s).includes(t.novo.tipo))return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}" após o dispositivo selecionado [${s.rotulo}]`});sp(s)&&(s=e.articulacao);const c=t.novo.posicao,u=t.novo.manterNoMesmoGrupoDeAspas,d=Zp(s)?Hp(s):void 0,p=d?nh(d):[],h=nh(e.articulacao);if(Zp(s)){if(Gp(s)&&u&&"antes"===c&&!(null===(o=s.tiposPermitidosPai)||void 0===o?void 0:o.includes(t.novo.tipo)))return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}", no mesmo grupo de aspas, antes do dispositivo selecionado [${s.rotulo}]`});if(!Gp(s)&&u&&!p.some((e=>{var o;return null===(o=e.tiposPermitidosFilhos)||void 0===o?void 0:o.includes(t.novo.tipo)})))return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}", no mesmo grupo de aspas, após o dispositivo selecionado [${s.rotulo}]`});if(Kd(s)&&!Gp(s)&&!u)return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}", na alteração de norma, a partir do atual dispositivo selecionado [${s.rotulo}]`});if(!u)return zg(e,s,c,t.novo.tipo,!1,{rotulo:t.novo.rotulo,uuid:t.novo.uuid});if(Gp(s)&&"antes"===c)return zg(e,s,c,t.novo.tipo,!0,{rotulo:t.novo.rotulo,uuid:t.novo.uuid})}let m;const f=Vg(s,c,h);if(Gd(s)||(v=s,g=t.novo.tipo,v.pai.tipo!==g)){const o=kg(f,t.novo.tipo,p);if(!o)return Pf(e,{tipo:Mh.ERROR,descricao:`Não é permitido adicionar agrupador "${l}" a partir do atual dispositivo selecionado [${s.rotulo}]`});const i=s.pai===o?s.pai.indexOf(s)+("antes"===c?0:1):$g(s,o,h,p);m=dv(o,t.novo.tipo,void 0,i)}else m=dv(s.pai.pai,t.novo.tipo,void 0,s.pai.pai.indexOf(s.pai)+1);var v,g;m.uuid=null!==(i=t.novo.uuid)&&void 0!==i?i:m.uuid,m.situacao=new Uf,m.situacao.tipoEmenda=e.modo,m.texto=null!==(a=t.novo.texto)&&void 0!==a?a:"",m.createRotulo(m),m.rotulo=null!==(r=t.novo.rotulo)&&void 0!==r?r:m.rotulo,m.id=Hm(m),Zp(m)&&m.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(m.situacao.existeNaNormaAlterada=Gp(m)||!gh(m.pai));const b=Bg(s,m,c,p);gg(m,b),m.pai.renumeraFilhos(),m.pai.filhos.forEach((e=>e.renumeraFilhos()));const y=nh(m.pai);y.filter((e=>ip(e)&&!("Articulacao"===e.tipo&&void 0===e.pai))).forEach((e=>e.id=Hm(e)));const x=y.filter(jg).map((e=>Wm(e))),A=qp(m);A&&2===vp(m).length&&x.unshift(Wm(A));const w=new Dg;Gd(f)&&Nh(f)?w.setReferencia(Wm(e.articulacao.projetoNorma.ementa)):Kd(s)&&"depois"===c||Kd(f)&&"antes"===c?w.setReferencia(Wm(mp(f))):w.setReferencia(Wm(f));const _=m.filhos.map((e=>Wm(e))),E=Wm(m);E.manterNoMesmoGrupoDeAspas=u,w.add(nf.ElementoIncluido,[E]),w.add(nf.SituacaoElementoModificada,[Wm(s),..._]),w.add(nf.ElementoRenumerado,x),w.add(nf.ElementoMarcado,[Wm(m)]);const O=nh(e.articulacao),S=O[O.indexOf(m)+1];return w.add(nf.ElementoReferenciado,S?[Wm(S)]:[]),m===kh(m)&&Nh(m)&&w.get(nf.SituacaoElementoModificada).elementos.push(Wm(e.articulacao.projetoNorma.ementa)),{articulacao:e.articulacao,modo:e.modo,past:Df(e,w.build()),present:w.build(),future:[],ui:{events:w.build(),alertas:null===(n=e.ui)||void 0===n?void 0:n.alertas}}},$g=(e,t,o,i)=>{const a=o.filter((o=>Fg(o,i)&&(o===e||t.filhos.includes(o))));return a.indexOf(e)},jg=e=>!Kd(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO,zg=(e,t,o,i,a=!1,r={})=>{var n,s,l,c,u;const d=Hp(t),p=d.pai.indexOf(d)+("antes"===o?0:1),h=Av(i,d.pai,void 0,p);h.rotulo=null!==(n=r.rotulo)&&void 0!==n?n:h.rotulo,h.uuid=null!==(s=r.uuid)&&void 0!==s?s:h.uuid,h.texto=null!==(c=null!==(l=r.texto)&&void 0!==l?l:h.texto)&&void 0!==c?c:"",h.id=Hm(h),Zp(h)&&h.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(h.situacao.existeNaNormaAlterada=Gp(h)||!gh(h.pai));const m=0===p?h.pai.pai:mp(h.pai.filhos[p-1]),f=new Dg;if(a){t.cabecaAlteracao=!1,gg(h,[t]),h.pai.renumeraFilhos(),h.renumeraFilhos();const e=[...h.pai.filhos.filter(jg).map((e=>Wm(e))),...h.filhos.filter(jg).map((e=>Wm(e)))];f.add(nf.ElementoRenumerado,e)}f.setReferencia(Wm(m));const v=Wm(h);v.manterNoMesmoGrupoDeAspas=a,f.add(nf.ElementoIncluido,[v]),f.add(nf.SituacaoElementoModificada,Jm(h)),f.add(nf.ElementoMarcado,[Wm(h)]);const g=nh(e.articulacao),b=g[g.indexOf(h)+1];return f.add(nf.ElementoReferenciado,b?[Wm(b)]:[]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,f.build()),present:f.build(),future:[],ui:{events:f.build(),alertas:null===(u=e.ui)||void 0===u?void 0:u.alertas}}},Fg=(e,t)=>0===t.length||t.includes(e),Bg=(e,t,o,i)=>{const a=nh(dp(e)),r=Ug(e,t.tipo);ip(e)&&"depois"===o&&r.push(e);const n=a.indexOf(e)+("antes"===o?0:1);return a.filter(((e,o)=>{var a;return o>=n&&e!==t&&!!(null===(a=t.tiposPermitidosFilhos)||void 0===a?void 0:a.includes(e.tipo))&&r.includes(e.pai)&&Fg(e,i)}))},Ug=(e,t,o=[])=>{const i=["Parte","Livro","Titulo","Capitulo","Secao","Subsecao","Artigo"];return e&&i.indexOf(e.tipo)>=i.indexOf(t)?(o.push(e.pai),Ug(e.pai,t,o)):o},Vg=(e,t,o)=>{const i=Zp(e),a=o.filter((e=>Zp(e)===i));return a[a.indexOf(e)-("antes"===t?1:0)]};class Hg{constructor(e){this.descricaoSituacao=Ud.DISPOSITIVO_MODIFICADO,this.dispositivoOriginal=e}getAcoesPermitidas(e,t){const o=t.filter((e=>!(e instanceof Ru))).filter((e=>!(e instanceof id))).filter((e=>!(e instanceof rd))).filter((e=>{var t;return!(null===(t=e.descricao)||void 0===t?void 0:t.startsWith("Mover"))})).filter((e=>"Adicionar"!==e.descricao&&"Atualizar dispositivo"!==e.descricao)).filter((e=>!(e instanceof ud)));return o.push(sd),o.filter((e=>void 0!==e)).sort(((e,t)=>e.descricao.localeCompare(t.descricao)))}}const Gg=(e,t)=>{const o=["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],i=[];for(const a of t.dispositivosAdicionados)o.includes(a.tipo)?i.push(...Kg(e,a)):i.push(Wg(e,a));return i},Qg=e=>e.id.split("_").some((e=>e.startsWith("alt"))),Kg=(e,t)=>{const o=e.articulacao;let i=dh(e.articulacao,t.idPosicaoAgrupador),a="depois";if(dh(e.articulacao,t.id))return[];if(i){Gd(i)&&!Jp(i)&&Nh(i)?i=i.projetoNorma.ementa:((e,t)=>!Zp(e)&&Qg(t))(i,t)&&(i=i.alteracoes.filhos[0],a="antes");const r=Wm(i),n=!t.abreAspas&&!t.fechaAspas,s=Mg(e,{atual:r,novo:{tipo:t.tipo,posicao:a,manterNoMesmoGrupoDeAspas:n,rotulo:t.rotulo},isAbrindoEmenda:!0}).ui.events.filter((e=>e.stateType!==nf.ElementoMarcado)),l=s.find((e=>e.stateType===nf.ElementoIncluido)).elementos,c=l[0],u=Zm(o,c);return Zg(u,t,up.EMENDA),l.length=0,l.push(Wm(u)),s}return[]},Wg=(e,t)=>{const o={stateType:nf.ElementoIncluido,referencia:void 0,pai:void 0,elementos:[]},i=Yg(e.articulacao,t,e.modo);if(i){if(i.rotulo&&i.createNumeroFromRotulo(i.rotulo),!o.referencia){const a=Dp(i);let r=Wd(i.pai)?i.pai.pai:i.pai;r=Jp(r)?dh(e.articulacao,r.pai.id):r,t.idPai&&ip(r)?o.referencia=Wm(r):o.referencia=Wm(Xg(a||r,i))}lh(i,(e=>{var t;if(!Wd(e)&&!Jp(e)){const i=Wm(e);i.lexmlId=Hm(e),null===(t=o.elementos)||void 0===t||t.push(i)}}))}return o},Xg=(e,t)=>{const o=bg(e,t);return o.id!==t.id?o:t.pai.filhos[t.pai.filhos.length-2]},Yg=(e,t,o)=>{var i,a;let r;const n="Caput"===t.tipo;if(t.idIrmaoAnterior){const o=dh(e,eb(t.idIrmaoAnterior));o&&(r=o.id===t.idIrmaoAnterior?dv(o.pai,t.tipo,o):dv(o,t.tipo,void 0,0))}else if(t.idPai){const o=dh(e,eb(t.idPai));o&&("Inciso"!==t.tipo&&"Omissis"!==t.tipo||"Artigo"!==o.tipo?n?(o.texto=null!==(i=t.texto)&&void 0!==i?i:"",r=o.caput):"Alteracao"===t.tipo?(mv(o),r=o.alteracoes,o.alteracoes.id=t.id,o.alteracoes.base=t.urnNormaAlterada):(r=dv(o,t.tipo,void 0,0),r.texto=null!==(a=t.texto)&&void 0!==a?a:""):r=dv(o.caput,t.tipo,void 0,0))}else r=dv(e,t.tipo,void 0,0);return r&&Zg(r,t,o),r&&t.filhos&&t.filhos.forEach(((i,a)=>{0===a?(i.idPai=t.id,i.id=Jg(i.id,t.id)):i.idIrmaoAnterior=t.filhos[a-1].id,Yg(e,i,o)})),r},Jg=(e,t)=>e.startsWith(t)?e:t.split("_").slice(0,-1).join("_")+"_"+e,Zg=(e,t,o)=>{var i,a;e.texto=null!==(i=t.texto)&&void 0!==i?i:"",e.id=t.id;const r=new Uf;if(r.tipoEmenda=o,e.situacao=r,e.isDispositivoAlteracao&&(r.existeNaNormaAlterada=!!t.existeNaNormaAlterada),Wd(e)||op(e)||Gd(e)||(e.createNumeroFromRotulo(t.rotulo),e.rotulo=t.rotulo,t.abreAspas&&(e.cabecaAlteracao=!0)),!Gd(e)&&(e.texto=null!==(a=t.texto)&&void 0!==a?a:"",t.fechaAspas)){Hp(e).notaAlteracao=t.notaAlteracao}},eb=e=>e.replace(/(_cpt)$/,""),tb=(e,t)=>{const o=[];let i;return t.forEach((t=>{var a;try{if(Vv(t)){const a=t;ib(e,a,i,o),Yv(a)&&(i=a.elementoAposRevisao)}null===(a=e.revisoes)||void 0===a||a.push(t)}catch(e){}})),e.revisoes=qv(e,e.revisoes),[...ob(e,t),{stateType:nf.ElementoIncluido,elementos:o}]},ob=(e,t)=>{const o=[],i=t.map((e=>e)).filter((e=>"RESTAURAR_ELEMENTO"===e.actionType))||[];if(i.length){const t=i.map((t=>dh(e.articulacao,t.elementoAposRevisao.lexmlId))).map((e=>Wm(e)));o.push({stateType:nf.ElementoRestaurado,elementos:t})}return o},ib=(e,t,o,i)=>{var a,r,n,s,l,c,u,d,p,h,m,f,v,g,b,y;if(Yv(t)){let a;if(Qv(t)){let i=Th(e.articulacao,t.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura.uuid2);i=i||dh(e.articulacao,eb(t.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura.lexmlId))||null,a=i?Wm(i):o}else a=o;t.elementoAposRevisao.uuid=lf.next(),t.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(a)),t.elementoAntesRevisao.uuid=t.elementoAposRevisao.uuid,t.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(a)),ab(e,t),i.push(t.elementoAposRevisao),o=t.elementoAposRevisao}else{const o=Wm(dh(e.articulacao,t.elementoAposRevisao.lexmlId));t.elementoAposRevisao.uuid=o.uuid,t.elementoAposRevisao.uuid2=o.uuid2,t.elementoAposRevisao.hierarquia.pai.uuid=null===(r=null===(a=o.hierarquia)||void 0===a?void 0:a.pai)||void 0===r?void 0:r.uuid,t.elementoAposRevisao.hierarquia.pai.uuid2=null===(s=null===(n=o.hierarquia)||void 0===n?void 0:n.pai)||void 0===s?void 0:s.uuid2,lg(t)||cg(t)?(t.elementoAntesRevisao.uuid=lf.next(),t.elementoAntesRevisao.hierarquia.pai.uuid=null===(c=null===(l=o.hierarquia)||void 0===l?void 0:l.pai)||void 0===c?void 0:c.uuid,t.elementoAntesRevisao.hierarquia.pai.uuid2=null===(d=null===(u=o.hierarquia)||void 0===u?void 0:u.pai)||void 0===d?void 0:d.uuid2):t.stateType!==nf.ElementoIncluido&&(t.elementoAntesRevisao.uuid=o.uuid,t.elementoAntesRevisao.uuid2=o.uuid2,t.elementoAntesRevisao.hierarquia.pai.uuid=null===(h=null===(p=o.hierarquia)||void 0===p?void 0:p.pai)||void 0===h?void 0:h.uuid,t.elementoAntesRevisao.hierarquia.pai.uuid2=null===(f=null===(m=o.hierarquia)||void 0===m?void 0:m.pai)||void 0===f?void 0:f.uuid2),o.dispositivoAlteracao&&(t.elementoAposRevisao.hierarquia.pai.uuidAlteracao=null===(g=null===(v=o.hierarquia)||void 0===v?void 0:v.pai)||void 0===g?void 0:g.uuidAlteracao,t.elementoAposRevisao.hierarquia.pai.uuid2Alteracao=null===(y=null===(b=o.hierarquia)||void 0===b?void 0:b.pai)||void 0===y?void 0:y.uuid2Alteracao)}},ab=(e,t)=>{let o,i,a=0,r="";if(Qv(t)){const n=dh(e.articulacao,t.elementoAposRevisao.hierarquia.pai.lexmlId);if(a=null==n?void 0:n.uuid,r=null==n?void 0:n.uuid2,n&&Zp(n)){const e=dp(n);o=null==e?void 0:e.uuid,i=null==e?void 0:e.uuid2}}else{const o=((e=[],t)=>null==e?void 0:e.find((e=>e.id===t)))(e.revisoes,t.idRevisaoElementoPai);a=o.elementoAposRevisao.uuid,r=o.elementoAposRevisao.uuid2}t.elementoAposRevisao.hierarquia.pai.uuid=a,t.elementoAposRevisao.hierarquia.pai.uuid2=r,t.elementoAntesRevisao.hierarquia.pai.uuid=a,t.elementoAntesRevisao.hierarquia.pai.uuid2=r,t.elementoAposRevisao.hierarquia.pai.uuidAlteracao=o,t.elementoAposRevisao.hierarquia.pai.uuid2Alteracao=i,t.elementoAntesRevisao.hierarquia.pai.uuidAlteracao=o,t.elementoAntesRevisao.hierarquia.pai.uuid2Alteracao=i},rb=(e,t)=>{var o,i,a,r;const n=Zm(e.articulacao,t.atual,!0),s=t.atual.norma,l=(null==n?void 0:n.alteracoes.base)||"",c=new RegExp(`<a.+href=.${l}.*?>.*?</a>`,"ig"),u=vm(s);if(void 0===n||!n.alteracoes||l===s&&n.texto.match(c))return e.ui.events=[],e;const d=`<a href="${p=s}">${vm(p)}</a>`;var p;const h=n.texto;if(n.texto.match(c))n.texto=h.replace(c,d);else if(n.texto.includes(u))n.texto=h.replace(u,d);else if(s&&fm(s)&&(void 0===n.texto||""===(null===(o=n.texto)||void 0===o?void 0:o.trim()))){const e=null===(i=nm(s))||void 0===i?void 0:i.genero,t=`${nm(s).descricao} nº ${lm(sm(s))}, de ${um(s)}`;n.texto=`${e&&"M"===e?"O":"A"} <a href="${s}">${t}</a>, passa a vigorar com as seguintes alterações:`}else{const e=parseInt(localStorage.indexCursor);n.texto=[h.slice(0,e),d,h.slice(e)].join(" "),localStorage.removeItem("indexCursor")}const m=Wm(n);n.alteracoes.base=s,(null===(a=n.situacao)||void 0===a?void 0:a.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL&&(n.situacao=new Hg(m));const f=new Dg,v=Wm(n,!0);v.mensagens=Fm(n),f.add(nf.ElementoValidado,[v]),f.add(nf.ElementoModificado,[v]),f.add(nf.SituacaoElementoModificada,[v]);const g=Eg(n);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,Og(n,m)),present:g.build(),future:e.future,ui:{events:f.build(),alertas:null===(r=e.ui)||void 0===r?void 0:r.alertas}}},nb=(e,t)=>{var o,i,a,r,n,s;const l=Zm(e.articulacao,t.atual,!0),c=null===(i=null===(o=null==l?void 0:l.situacao.dispositivoOriginal)||void 0===o?void 0:o.conteudo)||void 0===i?void 0:i.texto,u=null===(r=null===(a=t.atual)||void 0===a?void 0:a.conteudo)||void 0===r?void 0:r.texto,d=l&&c===u;if(void 0===l||l.texto===u)return e.ui.events=[],e;const p=Wm(l);l.texto=Zp(l)?Vh(null!=u?u:""):u,d?l.situacao=new fg:(null===(n=l.situacao)||void 0===n?void 0:n.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL&&(l.situacao=new Hg(p));const h=new Dg,m=Wm(l,!0);m.mensagens=Fm(l),lp(l)&&(l.texto=l.texto.toUpperCase()),h.add(nf.ElementoModificado,[m]),h.add(nf.ElementoValidado,tf(l)),""===u&&h.add(nf.ElementoMarcado,[m]),h.eventos.push({stateType:nf.ElementoSelecionado,elementos:[m]});const f=Eg(l);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,Og(l,p)),present:f.build(),future:[],ui:{events:h.build(),alertas:null===(s=e.ui)||void 0===s?void 0:s.alertas}}},sb=(e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;i.mensagens=Fm(i);const a=Wm(i,!0),r=[{stateType:nf.InformarNorma,elementos:[a]}];return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:[],ui:{events:r,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}},lb=(e,t)=>{const o=!vh(e);if(o===t)return;return o&&!t?ub(e):cb(e)},cb=e=>{if(db(e))return{tipo:Mh.INFO,descricao:'Não é permitido mudar a indicação de dispositivo "Novo" para "Existente" quando dispositivo hierarquicamente superior é novo na norma alteradao.'}},ub=e=>{const t=nh(e).filter((t=>!ip(e)||!Kd(t)));return pb(t.slice(1))?{tipo:Mh.INFO,descricao:'Não é permitido mudar a indicação de dispositivo "Existente" para "Novo" quando existe dispositivo subordinado sem numeração.'}:hb(e)?{tipo:Mh.INFO,descricao:'Não é permitido mudar a indicação de dispositivo "Existente" para "Novo" quando existe texto omitido na estrutura do dispositivo.'}:mb(t.slice(1))?{tipo:Mh.INFO,descricao:'Não é permitido mudar a indicação de dispositivo "Existente" para "Novo" quando existe numeração não sequencial nos dispositivos subordinados.'}:void 0},db=e=>{var t;const o=(null===(t=e.pai)||void 0===t?void 0:t.situacao).existeNaNormaAlterada;return!Kd(e)&&!Gp(e)&&!(null==o||o)},pb=e=>e.some((e=>{var t;return((null===(t=e.mensagens)||void 0===t?void 0:t.some((e=>{var t;return null===(t=e.descricao)||void 0===t?void 0:t.toLowerCase().includes("numere o dispositivo")})))||void 0===e.numero)&&!op(e)})),hb=e=>nh(e).some((e=>{var t;return"Omissis"===e.tipo||(null===(t=e.texto)||void 0===t?void 0:t.includes(Hd))})),mb=e=>e.some((e=>{var t;return null===(t=e.mensagens)||void 0===t?void 0:t.some((e=>{var t;return null===(t=e.descricao)||void 0===t?void 0:t.includes("omissis antes")}))})),fb=(e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0),a=i&&Zp(i)&&Hp(i);if(void 0===i)return e.ui.events=[],e;if(!((e,t)=>{const o=Lf(e,t.subType);return e.getAcoesPossiveis(e).filter((e=>e instanceof ud&&e.nomeAcao&&e.nomeAcao===o)).length>0})(i,t))return Pf(e,{tipo:Mh.INFO,descricao:"Nessa situação, não é possível transformar o dispositivo"});const r=Tp(i);if(r&&vh(r)&&!vh(i))return Pf(e,{tipo:Mh.INFO,descricao:"Dispositivo existente não pode ser transformado em filho de dispositivo novo"});const n=a&&r&&mp(r);t.subType=Lf(i,t.subType);const s=[...Jm(i,!1,!0)],l=of(i),c=((e,t)=>{var o,i;const a=e.pai;let r,n;switch(t.subType){case"transformarAlineaEmItem":case"transformarIncisoCaputEmAlinea":case"transformarIncisoParagrafoEmAlinea":case"transformarParagrafoEmIncisoParagrafo":case"transformarArtigoEmParagrafo":n=Tp(e),r=dv(n,t.novo.tipo);break;case"transformarDispositivoGenericoEmInciso":case"transformarDispositivoGenericoEmAlinea":case"transformarDispositivoGenericoEmItem":case"transformarOmissisEmAlinea":case"transformarOmissisEmArtigo":case"transformarOmissisEmIncisoCaput":case"transformarOmissisEmIncisoParagrafo":case"transformarOmissisEmItem":case"transformarOmissisEmParagrafo":case"transformarAlineaEmOmissisAlinea":case"transformarItemEmOmissisItem":case"transformarParagrafoEmOmissisParagrafo":case"transformarIncisoCaputEmOmissisIncisoCaput":case"transformarIncisoParagrafoEmOmissisIncisoParagrafo":n=a,r=dv(a,t.novo.tipo,void 0,null==a?void 0:a.indexOf(e));break;case"transformarParagrafoEmInciso":if(Xd(e)&&(Cp(e)||Ip(e))){n=a,r=dv(n.caput,t.novo.tipo);break}n=Tp(e),r=dv(n,t.novo.tipo);break;case"transformarParagrafoEmIncisoCaput":n=a,r=dv(n.caput,t.novo.tipo);break;default:n=e.pai.pai,r=dv(n,t.novo.tipo,e.pai)}return r.texto=null!==(i=null===(o=t.atual.conteudo)||void 0===o?void 0:o.texto)&&void 0!==i?i:e.texto,r.createRotulo(r),r.situacao=e.situacao,Gp(r)&&(r.notaAlteracao="NR"),r.mensagens=Fm(r),null==a||a.removeFilho(e),null==a||a.renumeraFilhos(),null==n||n.renumeraFilhos(),Gf(e,r),r})(i,t),u=of(c).concat(l),d=xg(c,!0),p=Wd(c.pai)?c.pai.pai:c.pai;r&&Vp(r)&&(r.pai.renumeraFilhos(),u.unshift(r));const h=Tp(c);if(h){const e=Fm(h);h.mensagens!==e&&d.unshift(Wm(h))}const m=d.filter((e=>e.uuid===p.uuid)).length>0?i.pai:p;m&&nh(m).forEach((e=>{e.mensagens=Fm(e),d.unshift(Wm(e))}));const f=null!=h?h:c.pai,v=((e,t,o,i,a)=>{const r=new Dg;return r.setReferencia(Wm(bg(e,t))),r.add(nf.ElementoIncluido,Jm(t)),r.add(nf.ElementoRemovido,o),r.add(nf.ElementoRenumerado,i),r.add(nf.ElementoValidado,a),r})(Wd(f)?f.pai:f,c,s,u.map((e=>{e.mensagens=Fm(e);return Wm(e)})),d);return"Artigo"===c.tipo&&a?v.add(nf.SituacaoElementoModificada,[Wm(mp(a))]):"Paragrafo"===c.tipo&&n&&v.add(nf.SituacaoElementoModificada,[Wm(n)]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,v.build()),present:v.build(),future:[],ui:{events:v.build(),alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}},vb=(e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;if(ip(i)&&!Zp(i))if(Gd(i.pai)){const t=["Parte","Livro","Titulo","Capitulo"];if(!i.filhos.every((e=>Kd(e)||t.includes(e.tipo))))return Pf(e,{tipo:Mh.ERROR,descricao:`Operação não permitida (se houver seções abaixo do "${i.rotulo}", elas devem ser removidas antes)`})}else if(i.filhos.filter((e=>!Kd(e))).length){const t=nh(i.pai).filter(ip),o=t[t.indexOf(i)-1]||{},a=t[t.indexOf(i)+1]||{};if(o.tipo!==a.tipo&&!kg(i.pai,a.tipo,[]))return Pf(e,{tipo:Mh.ERROR,descricao:`Operação não permitida (o agrupador "${a.rotulo}" não poder estar diretamente subordinado ao agrupador "${o.rotulo}")`})}if(!Mf(i,id))return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível excluir um dispositivo original mas apenas suprimi-lo."});if(!Zp(i)&&(Up(i)||1===e.articulacao.filhos.length&&e.articulacao.filhos[0]===i&&!Np(i)))return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível excluir o único dispositivo disponível."});if(e.emRevisao&&((e,t)=>{var o;if(!(null===(o=e.revisoes)||void 0===o?void 0:o.length))return!1;const i=nh(t).map((e=>e.uuid));return e.revisoes.filter(Vv).map((e=>e)).some((e=>{var t,o,a,r;return i.includes(null===(t=e.elementoAntesRevisao)||void 0===t?void 0:t.uuid)||i.includes(null===(r=null===(a=null===(o=e.elementoAntesRevisao)||void 0===o?void 0:o.hierarquia)||void 0===a?void 0:a.pai)||void 0===r?void 0:r.uuid)}))})(e,i)&&!t.isRejeitandoRevisao)return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível remover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão."});const a=((e=[],t="")=>Cv(e).filter((e=>e.elementoAposRevisao.uuid2===t)).slice(-1)[0])(e.revisoes,i.uuid2);if(e.emRevisao&&a&&Qv(a)&&lg(a)&&!t.isRejeitandoRevisao)return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível remover dispositivo movido em modo de revisão."});const r=ip(i)?i.filhos[0]||Lp(i)||Tp(i):void 0,n=r?Wm(r):void 0,s=Nh(i)&&i===kh(i),l=ip(i)?Ig(e.articulacao,i):Sg(e,i);return n&&(l.push({stateType:nf.ElementoMarcado,elementos:[n]}),l.push({stateType:nf.ElementoReferenciado,elementos:[n]})),s&&l.push({stateType:nf.SituacaoElementoModificada,elementos:[Wm(e.articulacao.projetoNorma.ementa)]}),{articulacao:e.articulacao,modo:e.modo,past:Df(e,l),present:l,future:[],ui:{events:l,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}},gb=e=>{switch(e){case Ud.DISPOSITIVO_ADICIONADO:return new Uf;case Ud.DISPOSITIVO_NOVO:return new Bf;default:return new fg}},bb=(e,t)=>{if(Gm(t)){const o=Jp(e)?e.pai:hp(e,t.hierarquia.pai.uuidAlteracao)||dh(e,t.hierarquia.pai.lexmlId);if(o)return o.alteracoes||(o.alteracoes=hv(),o.alteracoes.pai=o),t.hierarquia.pai.tipo===cu.articulacao.tipo?o.alteracoes:hp(o.alteracoes,t.hierarquia.pai.uuid)||dh(o.alteracoes,t.hierarquia.pai.lexmlId)||null}return hp(e,t.hierarquia.pai.uuid)||dh(e,t.hierarquia.pai.lexmlId)||null},yb=(e,t,o)=>{var i,a,r;const n=dv(Kd(t)&&(e.tipo===cu.inciso.name||(e=>e.tipo===cu.omissis.tipo&&"inciso-caput"===e.tipoOmissis)(e))?t.caput:t,e.tipo,void 0,e.hierarquia.posicao);return n.uuid=e.uuid,n.uuid2=e.uuid2,n.id=e.lexmlId,n.texto=null!==(a=null===(i=null==e?void 0:e.conteudo)||void 0===i?void 0:i.texto)&&void 0!==a?a:"",n.numero=null===(r=null==e?void 0:e.hierarquia)||void 0===r?void 0:r.numero,n.rotulo=null==e?void 0:e.rotulo,n.mensagens=null==e?void 0:e.mensagens,n.situacao=gb(e.descricaoSituacao),"Dispositivo Adicionado"===e.descricaoSituacao&&(n.situacao.existeNaNormaAlterada=e.existeNaNormaAlterada,o&&(n.situacao.tipoEmenda=o)),Kd(n)&&(n.caput.situacao=gb(e.descricaoSituacao),e.norma&&(mv(n),n.alteracoes.base=e.norma,n.alteracoes.situacao=new Uf,n.alteracoes.situacao.tipoEmenda=o)),n},xb=(e,t,o)=>{if(void 0!==t&&void 0!==t.elementos&&void 0!==t.elementos[0]){const i=t.elementos[0],a=t.elementos.some((e=>e.elementoAnteriorNaSequenciaDeLeitura)),r=bb(e.articulacao,i),n=((e,t,o)=>{const i=t.shift(),a=bb(e,i)||dh(e,i.hierarquia.pai.lexmlId),r=yb(i,a,o),n=r.id,s=[r];return null==t||t.forEach((t=>{var a,l;const c=(null===(a=t.hierarquia)||void 0===a?void 0:a.pai)===(null===(l=null==i?void 0:i.hierarquia)||void 0===l?void 0:l.pai)?r.pai:bb(e,t)||dh(e,n),u=yb(t,c,o);s.push(u)})),s})(e.articulacao,t.elementos,e.modo);if(null==r||r.renumeraFilhos(),o){let t=0===i.hierarquia.posicao?Gd(r)&&Jp(r)?r.pai:r:mp(Tp(n[0]));if(t){t=Gd(t)&&Nh(t)?t.projetoNorma.ementa:t;const i=Zm(e.articulacao,t);i?o.referencia=Wm(i):Pf(e,{tipo:Mh.ERROR,descricao:"Erro inesperado"})}}return t.stateType===nf.ElementoIncluido&&(o.referencia=t.referencia),n.map((e=>Wm(e,!0,a)))}return[]},Ab=(e,t)=>void 0!==t&&void 0!==t.elementos&&void 0!==t.elementos[0]?(t.elementos.forEach((t=>{const o=Zm(e.articulacao,t,!0);if(o){const e=o.pai;e.removeFilho(o),e.renumeraFilhos()}})),t.elementos):[],wb=(e,t,o,i=[])=>{if(void 0!==t&&void 0!==t.elementos&&void 0!==t.elementos[0]){const a=[];let r=0;return t.elementos.forEach((t=>{var n,s,l,c,u,d,p;const h=Zm(e.articulacao,t,!0);if(h){if(r!==h.uuid||"REDO"===o&&r===h.uuid){if(h.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO?((e=[],t)=>e.map((e=>e)).find((e=>Vv(e)&&e.stateType===nf.ElementoRestaurado&&e.elementoAposRevisao.uuid===t)))(i,h.uuid)||h.situacao.dispositivoOriginal.conteudo.texto===(null===(n=t.conteudo)||void 0===n?void 0:n.texto)?(h.texto=null!==(l=null===(s=h.situacao.dispositivoOriginal.conteudo)||void 0===s?void 0:s.texto)&&void 0!==l?l:"",h.situacao=new fg):h.texto=null!==(u=null===(c=t.conteudo)||void 0===c?void 0:c.texto)&&void 0!==u?u:"":(t.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO&&(h.situacao=new Hg(Wm(h))),h.texto=null!==(p=null===(d=t.conteudo)||void 0===d?void 0:d.texto)&&void 0!==p?p:""),h.alteracoes&&(h.alteracoes.base=t.norma),h.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&(h.situacao.existeNaNormaAlterada=t.existeNaNormaAlterada,Zp(h)&&Kp(h))){Hp(h).notaAlteracao=t.notaAlteracao}h.mensagens=Fm(h),a.push(Wm(h)),r=h.uuid}}})),a}return[]},_b=(e,t)=>{if(void 0!==t&&void 0!==t.elementos&&void 0!==t.elementos[0]){const o=[];return t.elementos.forEach((t=>{const i=Zm(e.articulacao,t,!0);i&&o.push(Wm(i))})),o}return[]},Eb=(e,t)=>{const o=Tg(t,nf.ElementoValidado);if(void 0!==o&&void 0!==o.elementos&&void 0!==o.elementos[0]){const t=[];return o.elementos.forEach((o=>{const i=Zm(e.articulacao,o,!0);i&&(i.mensagens=Fm(i),t.push(Wm(i)))})),t}return[]},Ob=(e,t)=>{const o=[];return t.filter((e=>e.stateType===nf.SituacaoElementoModificada)).forEach((t=>{var i;null===(i=t.elementos)||void 0===i||i.forEach((t=>{const i=Zm(e.articulacao,t,!0);i&&o.push(Wm(i))}))})),o},Sb=e=>{const t=["Parte","Livro","Titulo","Capitulo","Secao","Subsecao"],o=e.filter((e=>![nf.RevisaoAceita,nf.RevisaoRejeitada,nf.RevisaoAdicionalRejeitada].includes(e.stateType)));return o.length>0&&[nf.ElementoIncluido,nf.ElementoRemovido].includes(o[0].stateType)&&o[0].elementos.length>0&&t.includes(o[0].elementos[0].tipo)},Ib=(e,t,o)=>{var i;const a=t[0].elementos[0],r=o[0].elementos[0],n=Zm(e,r);n.texto=null!==(i=a.conteudo.texto)&&void 0!==i?i:"",n.numero=a.numero,n.id=a.lexmlId,n.rotulo=a.rotulo,o[0].elementos.length=0,o[0].elementos.push(Wm(n))},kb=(e,t,o)=>{var i,a,r,n;const s=t.elementos["UNDO"===o?0:1],l=Zm(e.articulacao,s,!0),c=Wm(l);let u;s.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO?(l.situacao=new Hg(Wm(l)),u=nf.ElementoRestaurado):s.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO?(l.situacao=new Bm(Wm(l)),u=nf.ElementoRestaurado):(l.situacao=new fg,u=nf.ElementoRestaurado),l.numero=null!==(i=s.numero)&&void 0!==i?i:"",l.rotulo=null!==(a=s.rotulo)&&void 0!==a?a:"",l.texto=null!==(n=null===(r=s.conteudo)||void 0===r?void 0:r.texto)&&void 0!==n?n:"";return{stateType:u,elementos:ih(l)?[Wm(l)]:[c,Wm(l)]}},Cb=(e,t,o)=>{const i=[],a=t.filter((e=>e.stateType===o));return a.length&&a.forEach((t=>{const a=t.elementos.map((e=>e.revisao));if(e.revisoes.push(...a),i.push({stateType:t.stateType,elementos:t.elementos}),((e=[])=>e.some((e=>Yv(e))))(a)){const t=a.map((e=>e.elementoAntesRevisao));o===nf.RevisaoAdicionalRejeitada&&t.forEach((t=>vb({...e,emRevisao:!1},{atual:t}))),o===nf.RevisaoAceita&&(i.push({stateType:nf.ElementoIncluido,elementos:t}),i.push({stateType:nf.ElementoMarcado,elementos:[t[0]]})),(t=>{t.filter(Qv).forEach((o=>{const i=o.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura,a=ng(e.revisoes,i);if(a&&a.id!==o.id){const e=ng(t,i),o=sg(t,e),r=JSON.parse(JSON.stringify(o.elementoAposRevisao));eg(r),a.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=r,a.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=r}}))})(a)}else{const t=((e=[],t)=>e.filter(Vv).map((e=>{const o=e.elementoAposRevisao;return t?Wm(Zm(t.articulacao,o)):o})))(a,e).map((e=>JSON.parse(JSON.stringify(e))));hg(e.revisoes,t),i.push({stateType:nf.SituacaoElementoModificada,elementos:t}),o===nf.RevisaoAceita&&i.push({stateType:nf.ElementoMarcado,elementos:[t[0]]})}})),i},Nb=e=>{var t,o,i,a;if(void 0===e.future||0===e.future.length)return e.ui.events=[],e;const r=e.future.pop(),n=Df(e,r),s={articulacao:e.articulacao,modo:e.modo,past:n,present:[],future:e.future,ui:{events:[],alertas:null===(t=e.ui)||void 0===t?void 0:t.alertas},emRevisao:e.emRevisao,usuario:e.usuario,revisoes:e.revisoes,numEventosPassadosAntesDaRevisao:e.numEventosPassadosAntesDaRevisao};if(Sb(r)){let t;if(t={...s},t.past=[],t.present=[],t.future=[],r[0].stateType===nf.ElementoIncluido){const o=r.find((e=>e.stateType===nf.ElementoReferenciado)).elementos[0],i=r[0].elementos[0];t=Mg(t,{atual:o,novo:{tipo:i.tipo,uuid:i.uuid,posicao:"antes",manterNoMesmoGrupoDeAspas:i.manterNoMesmoGrupoDeAspas}}),Ib(e.articulacao,r,t.ui.events)}else t=vb(t,{atual:r[0].elementos[0]});const i=Tb(r);if(i.length){const t=i.map((e=>e.elementos||[])).flat().map((e=>Tv(s.revisoes,e.uuid))).flat().map((e=>e.id)).filter(Boolean);s.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!t.includes(e.id)))}return s.ui.events=[...i,...t.ui.events],s.present=[...i,...t.ui.events],s}const l=new Dg;l.add(nf.ElementoRemovido,Ab(e,Tg(r,nf.ElementoRemovido))),l.add(nf.ElementoIncluido,xb(e,Tg(r,nf.ElementoIncluido),Tg(l.eventos,nf.ElementoIncluido))),r.filter((e=>e.stateType===nf.ElementoModificado)).forEach((t=>l.eventos.push({stateType:nf.ElementoModificado,elementos:wb(e,t,"REDO")}))),l.add(nf.ElementoSuprimido,((e,t,o,i)=>void 0!==t&&void 0!==t.elementos&&void 0!==t.elementos[0]?(t.elementos.forEach((t=>{var a,r,n,s,l,c,u;const d=Zm(e.articulacao,t,!0);i instanceof fg?(d.numero=null!==(r=null===(a=d.situacao.dispositivoOriginal)||void 0===a?void 0:a.numero)&&void 0!==r?r:"",d.rotulo=null!==(s=null===(n=d.situacao.dispositivoOriginal)||void 0===n?void 0:n.rotulo)&&void 0!==s?s:"",d.texto=null!==(u=null===(c=null===(l=d.situacao.dispositivoOriginal)||void 0===l?void 0:l.conteudo)||void 0===c?void 0:c.texto)&&void 0!==u?u:"",d.situacao=new fg):d.situacao=new i(Wm(d)),o.elementos.push(Wm(d))})),o.elementos):[])(e,Tg(r,nf.ElementoSuprimido),Tg(l.eventos,nf.ElementoSuprimido),Bm)),r.filter((e=>e.stateType===nf.ElementoRestaurado)).forEach((t=>l.eventos.push(kb(e,t,"REDO")))),l.add(nf.ElementoRenumerado,_b(e,Tg(r,nf.ElementoRenumerado))),l.add(nf.ElementoValidado,Eb(e,r));const c=null===(i=Tg(r,nf.ElementoMarcado))||void 0===i?void 0:i.elementos;c&&(l.add(nf.ElementoMarcado,c),l.add(nf.ElementoSelecionado,[c[0]])),l.add(nf.SituacaoElementoModificada,Ag(e.articulacao,qg(l.eventos))),l.eventos.push({stateType:nf.SituacaoElementoModificada,elementos:Ob(e,r)});const u=Tb(r);if(u.length){const t=u.map((e=>e.elementos||[])).flat().map((e=>Tv(s.revisoes,e.uuid))).flat().map((e=>e.id)).filter(Boolean);s.revisoes=null===(a=e.revisoes)||void 0===a?void 0:a.filter((e=>!t.includes(e.id)))}return s.ui.events=[...u,...l.build()],s.present=[...u,...l.build()],s},Tb=e=>e.filter((e=>[nf.RevisaoAceita,nf.RevisaoRejeitada,nf.RevisaoAdicionalRejeitada].includes(e.stateType))),qb=e=>({stateType:nf.ElementoMarcado,elementos:[Wm(e)],moverParaFimLinha:!0}),Rb=(e,t)=>(!e.modo.startsWith("emenda")||t.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)&&!Np(t),Db=(e,t)=>{if(!t)return"";if("Alinea"!==e.tipo)return t.toUpperCase();return t.split("-").map(((e,t)=>t>0?e.toUpperCase():e)).join("-")},Pb=(e,t)=>{var o,i,a;const r=Zm(e.articulacao,t.atual,!0);if(void 0===r)return e.ui.events=[],e;const n=nh(r).filter((e=>Vd(e))).length>0;if(!n&&(null===(o=r.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Ud.DISPOSITIVO_MODIFICADO&&(null===(i=r.situacao)||void 0===i?void 0:i.descricaoSituacao)!==Ud.DISPOSITIVO_SUPRIMIDO)return e;const s=Cg(r);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,s),present:s,future:[],ui:{events:s,alertas:null===(a=e.ui)||void 0===a?void 0:a.alertas}}},Lb=(e,t)=>{0!==e.length&&(null==e||e.forEach((e=>{t.add(e.situacao.descricaoSituacao),Lb(e.filhos,t)})))},Mb=(e,t)=>{var o,i;const a=Zm(e.articulacao,t.atual,!0);if(void 0===a||(null===(o=a.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Ud.DISPOSITIVO_ORIGINAL)return e.ui.events=[],e;if(!(e=>{var t;const o=new Set;return o.add(e.situacao.descricaoSituacao),Lb(e.filhos,o),e.alteracoes&&Lb(null===(t=e.alteracoes)||void 0===t?void 0:t.filhos,o),1===o.size&&[...o][0]===Ud.DISPOSITIVO_ORIGINAL})(a))return Pf(e,{tipo:Mh.ERROR,descricao:"Só é possível suprimir dispositivos que não tenham sofrido modificação."});const r=((e,t)=>{nh(t).forEach((e=>e.situacao=new Bm(Wm(e)))),t.alteracoes&&t.alteracoes.filhos.length>0&&t.alteracoes.filhos.forEach((e=>nh(e).forEach((e=>e.situacao=new Bm(Wm(e))))));const o=new Dg;o.add(nf.ElementoSuprimido,Jm(t));const i=Ng(t);return i&&o.add(nf.ElementoValidado,[i]),o.add(nf.ElementoSelecionado,[Wm(t,!0)]),o.build()})(e.articulacao,a);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,r),present:r,future:[],ui:{events:r,alertas:null===(i=e.ui)||void 0===i?void 0:i.alertas}}},$b=e=>{var t,o,i;if(void 0===e.past||0===e.past.length)return e.ui.events=[],e;const a=e.past.pop(),r=((e,t)=>{const o=e.future?e.future:[];return o.push(JSON.parse(JSON.stringify(t))),o})(e,a),n={articulacao:e.articulacao,modo:e.modo,past:e.past,present:[],future:r,ui:{events:[],alertas:null===(t=e.ui)||void 0===t?void 0:t.alertas},emRevisao:e.emRevisao,usuario:e.usuario,revisoes:e.revisoes,numEventosPassadosAntesDaRevisao:e.numEventosPassadosAntesDaRevisao};if(Sb(a)){let t;t={...n},t.past=[],t.present=[],t.future=[];const o=a.filter((e=>![nf.RevisaoAceita,nf.RevisaoRejeitada,nf.RevisaoAdicionalRejeitada].includes(e.stateType)));if(o[0].stateType===nf.ElementoIncluido)t=vb(t,{atual:o[0].elementos[0]});else{const i=o.find((e=>e.stateType===nf.ElementoReferenciado)).elementos[0],a=o[0].elementos[0];t=Mg(t,{atual:i,novo:{tipo:a.tipo,uuid:a.uuid,posicao:"antes",manterNoMesmoGrupoDeAspas:a.manterNoMesmoGrupoDeAspas}}),Ib(e.articulacao,o,t.ui.events)}const i=[...Cb(n,a,nf.RevisaoAceita),...Cb(n,a,nf.RevisaoRejeitada),...Cb(n,a,nf.RevisaoAdicionalRejeitada)].filter((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.length}));return n.ui.events=[...i,...t.ui.events],n.present=[...i,...t.ui.events],n}const s=new Dg;s.add(nf.ElementoRemovido,Ab(e,Tg(a,nf.ElementoIncluido))),s.add(nf.ElementoIncluido,xb(e,Tg(a,nf.ElementoRemovido),Tg(s.eventos,nf.ElementoIncluido))),a.filter((e=>e.stateType===nf.ElementoSuprimido)).forEach((t=>s.eventos.push(...((e,t)=>{var o;const i=[];return null===(o=t.elementos)||void 0===o||o.forEach((t=>{const o=Zm(e.articulacao,t,!0),a=Wm(o);o.situacao=new fg,i.push({stateType:nf.ElementoRestaurado,elementos:[a,Wm(o)]})})),i})(e,t)))),a.filter((e=>e.stateType===nf.ElementoRestaurado)).forEach((t=>s.eventos.push(kb(e,t,"UNDO"))));const l=((e=[])=>e.map((e=>e.revisao)))(a.filter((e=>e.stateType===nf.RevisaoRejeitada)).map((e=>e.elementos||[])).flat());a.filter((e=>e.stateType===nf.ElementoModificado)).forEach((t=>s.eventos.push({stateType:nf.ElementoModificado,elementos:wb(e,t,"UNDO",l)}))),s.add(nf.ElementoRenumerado,_b(e,Tg(a,nf.ElementoRenumerado))),s.add(nf.ElementoValidado,Eb(e,a));const c=s.get(nf.ElementoIncluido);if(!(!c.elementos||!c.elementos.length)&&c.elementos[0].agrupador)s.add(nf.ElementoMarcado,[c.elementos[0]]),s.add(nf.ElementoSelecionado,[c.elementos[0]]);else{const t=null===(i=null===(o=Tg(a,nf.ElementoMarcado))||void 0===o?void 0:o.elementos)||void 0===i?void 0:i.filter((t=>Zm(e.articulacao,t,!0)));t&&(s.add(nf.ElementoMarcado,[t[1],t[0]].filter(Boolean)),s.add(nf.ElementoSelecionado,[t[1]].filter(Boolean)))}s.add(nf.SituacaoElementoModificada,s.get(nf.ElementoIncluido).elementos||[]),s.add(nf.SituacaoElementoModificada,Ag(e.articulacao,qg(s.eventos))),s.add(nf.SituacaoElementoModificada,Ob(e,a));let u=[...Cb(n,a,nf.RevisaoAceita),...Cb(n,a,nf.RevisaoRejeitada),...Cb(n,a,nf.RevisaoAdicionalRejeitada)].filter((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.length}));return u=Rg(n,u,nf.ElementoIncluido),u=Rg(n,u,nf.SituacaoElementoModificada),u=Rg(n,u,nf.ElementoMarcado),n.ui.events=[...u,...s.build()],n.present=[...u,...s.build()],n};let jb,zb=!1;const Fb=(e,t=!1)=>{var o,i;if(zb=t,!(null===(o=null==e?void 0:e.value)||void 0===o?void 0:o.projetoNorma))throw new Error("Não se trata de um documento lexml válido");const a={classificacao:(null===(i=e.value)||void 0===i?void 0:i.projetoNorma.norma)?up.NORMA:up.PROJETO,tipo:nm(Ub(e)),...Vb(e),...Hb(e),...Gb(e.value.projetoNorma.norma||e.value.projetoNorma.projeto)};return a.articulacao&&(a.articulacao.projetoNorma=a,a.ementa&&(a.ementa.pai=a.articulacao)),(e=>{if(window.process.env.testMode)return;const t=(e,t,o)=>(null==e?void 0:e.match(/<(b|i)>(?:(?!(<\/\1>)).)*<a[^>]*>.*<\/a>.*<\/\1>/gi))?(o.setContents(o.clipboard.convert(e)),t.querySelector(".ql-editor p").innerHTML):e,o=document.createElement("div"),i=new Quill(o,{});e.ementa&&(e.ementa.texto=t(e.ementa.texto,o,i)),e.articulacao&&nh(e.articulacao).forEach((e=>{e.texto=t(e.texto,o,i)}))})(a),a},Bb=e=>null==e?void 0:e.replace(/[\n]/g,"").trim(),Ub=e=>{var t,o,i;return null===(i=null===(o=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.metadado)||void 0===o?void 0:o.identificacao)||void 0===i?void 0:i.urn},Vb=e=>({urn:Ub(e)}),Hb=e=>{var t,o,i,a,r,n,s,l,c,u,d,p,h,m,f,v;const g=null!==(n=null===(r=null===(a=null===(i=null===(o=null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.projetoNorma)||void 0===o?void 0:o.norma)||void 0===i?void 0:i.parteInicial)||void 0===a?void 0:a.epigrafe)||void 0===r?void 0:r.content[0])&&void 0!==n?n:"",b=ty(null===(u=null===(c=null===(l=null===(s=null==e?void 0:e.value)||void 0===s?void 0:s.projetoNorma)||void 0===l?void 0:l.norma)||void 0===c?void 0:c.parteInicial)||void 0===u?void 0:u.ementa.content),y=null!==(v=null===(f=null===(m=null===(h=null===(p=null===(d=null==e?void 0:e.value)||void 0===d?void 0:d.projetoNorma)||void 0===p?void 0:p.norma)||void 0===h?void 0:h.parteInicial)||void 0===m?void 0:m.preambulo)||void 0===f?void 0:f.p[0].content[0])&&void 0!==v?v:"";return{epigrafe:Bb(g),ementa:Qb(Bb(b)),preambulo:Bb(y)}},Gb=e=>({articulacao:Kb(e.articulacao)}),Qb=e=>{if(!e)return;const t=dv(hv(),"Ementa");return t.pai=void 0,t.texto=ey(e),t.rotulo="",t.id="ementa",zb&&(t.situacao=new fg),t},Kb=e=>{const t=hv();return Wb(t,e.lXhier,[]),t},Wb=(e,t,o)=>{e&&t&&(null==t||t.forEach((t=>{var i,a,r,n,s,l,c,u,d,p,h,m,f,v,g,b,y,x;let A;const w=null===(i=t.value)||void 0===i?void 0:i.notaAlteracao;if(null===(a=t.value)||void 0===a?void 0:a.fechaAspas){const e=o.pop();e&&(e.notaAlteracao=null===(r=t.value)||void 0===r?void 0:r.notaAlteracao)}"Caput"===(null===(n=t.name)||void 0===n?void 0:n.localPart)?("s"===(null===(s=t.value)||void 0===s?void 0:s.abreAspas)?(o.push(A),A.rotulo=null===(l=t.value)||void 0===l?void 0:l.rotulo,A.cabecaAlteracao=!0,A.notaAlteracao=w):(null===(c=t.value)||void 0===c?void 0:c.rotulo)&&(A.rotulo=t.value.rotulo,A.createNumeroFromRotulo(A.rotulo)),e.texto=(null===(u=t.value)||void 0===u?void 0:u.textoOmitido)?Hd:Bb(Zb(t)),e.caput.href=null===(d=t.value)||void 0===d?void 0:d.href,e.caput.id=null===(p=t.value)||void 0===p?void 0:p.id,Xb(e,null===(h=t.value)||void 0===h?void 0:h.alteracao,o),Wb(e.caput,null===(m=t.value)||void 0===m?void 0:m.lXcontainersOmissis,o)):"alteracao"===(null===(f=t.name)||void 0===f?void 0:f.localPart)?(Xb(e,t,o),Wb(e.caput,null===(v=t.value)||void 0===v?void 0:v.lXcontainersOmissis,o)):"p"===(null===(g=t.name)||void 0===g?void 0:g.localPart)?Yb(t):e.alteracoes||(A=Jb(e,t,o),Wb(A,null!==(y=null===(b=t.value)||void 0===b?void 0:b.lXhier)&&void 0!==y?y:null===(x=t.value)||void 0===x?void 0:x.lXcontainersOmissis,o))})))},Xb=(e,t,o)=>{var i;t&&(mv(e),e.alteracoes.id=t.id,e.alteracoes.base=t.base,zb&&(e.alteracoes.situacao=new fg),null===(i=t.content)||void 0===i||i.forEach((t=>{var i,a,r,n,s;if("p"===(null===(i=t.name)||void 0===i?void 0:i.localPart))Yb(t);else{const i=Jb(e.alteracoes,t,o);i.isDispositivoAlteracao=!0,i.rotulo=null===(a=t.value)||void 0===a?void 0:a.rotulo,Wb(i,null!==(n=null===(r=t.value)||void 0===r?void 0:r.lXhier)&&void 0!==n?n:null===(s=t.value)||void 0===s?void 0:s.lXcontainersOmissis,o)}})))},Yb=e=>{var t;jb.texto=(jb.texto+" "+Bb(ty(null===(t=e.value)||void 0===t?void 0:t.content))).replace(/\s+/g," ")},Jb=(e,t,o)=>{var i,a,r,n,s,l,c,u,d,p;const h=dv(e,null===(i=t.name)||void 0===i?void 0:i.localPart),m=null===(a=t.value)||void 0===a?void 0:a.notaAlteracao;if(null===(r=t.value)||void 0===r?void 0:r.fechaAspas){const e=o.pop();e&&(e.notaAlteracao=null===(n=t.value)||void 0===n?void 0:n.notaAlteracao)}return op(h)||("s"===(null===(s=t.value)||void 0===s?void 0:s.abreAspas)?(o.push(h),h.rotulo=null===(l=t.value)||void 0===l?void 0:l.rotulo,h.cabecaAlteracao=!0,h.notaAlteracao=m):h.rotulo=null===(c=t.value)||void 0===c?void 0:c.rotulo,h.createNumeroFromRotulo(h.rotulo)),h.href=null===(u=t.value)||void 0===u?void 0:u.href,h.id=null===(d=t.value)||void 0===d?void 0:d.id,zb&&(h.situacao=new fg,Kd(h)&&(h.caput.situacao=new fg)),h.texto=(null===(p=t.value)||void 0===p?void 0:p.textoOmitido)?Hd:Bb(Zb(t)),jb=h,h},Zb=e=>{var t,o,i,a,r;let n="";return(null===(t=e.value)||void 0===t?void 0:t.nomeAgrupador)?null!==(o=e.value.nomeAgrupador.content[0])&&void 0!==o?o:"":(null===(r=null===(a=null===(i=e.value)||void 0===i?void 0:i.p)||void 0===a?void 0:a.map((e=>e)))||void 0===r||r.map((e=>e.content)).forEach((e=>n+=ty(e))),ey(n))},ey=e=>{const t=document.createElement("div");t.innerHTML=e;const o=t.getElementsByTagName("*");for(let e=0;e<o.length;e++){const t=o[e].innerHTML;if(-1!==t.indexOf('"')){const i=t.replace(/"(?=\w|$)/g,"&#8220;").replace(/(?=[\w,.?!\-")]|^)"/g,"&#8221;");o[e].innerHTML=i}}return t.innerHTML.replace(/&nbsp;/g," ")},ty=e=>{let t="";return null==e||e.forEach((e=>{if(e.value)t+=oy(e.name,e.value);else{let o=e;o=o.replace(/"(?=\w|$)/g,"&#8220;"),o=o.replace(/(?=[\w,.?!\-")]|^)"/g,"&#8221;"),t+=o}})),t},oy=(e,t)=>{const o=e.localPart;return"span"===o&&t.href?`<a href="${t.href}">${ty(t.content)}</a>`:"b"===o||"i"===o||"sub"===o||"sup"===o?`<${o}>${ty(t.content)}</${o}>`:""},iy=e=>{var t;if(!(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.projetoNorma))throw new Error("Não se trata de um documento lexml válido");return{...Gb(e.value.projetoNorma.norma?e.value.projetoNorma.norma:e.value.projetoNorma.projeto)}};var ay;!function(e){e[e.ARTICULACAO_SEM_FILHOS=0]="ARTICULACAO_SEM_FILHOS",e[e.AGRUPADOR_GENERICO_NA_ARTICULACAO=1]="AGRUPADOR_GENERICO_NA_ARTICULACAO",e[e.AGRUPADORES_DE_ARTIGO=2]="AGRUPADORES_DE_ARTIGO",e[e.DISPOSITIVOS_DE_TIPOS_DIFERENTES=3]="DISPOSITIVOS_DE_TIPOS_DIFERENTES",e[e.DISPOSITIVOS_COM_ROTULO_DUPLICADO=4]="DISPOSITIVOS_COM_ROTULO_DUPLICADO",e[e.ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO=5]="ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO",e[e.ALTERACAO_DENTRO_DE_ALTERACAO=6]="ALTERACAO_DENTRO_DE_ALTERACAO",e[e.FILHOS_EM_DISPOSITIVO_SUPRIMIDO=7]="FILHOS_EM_DISPOSITIVO_SUPRIMIDO",e[e.DISPOSITIVO_JA_MODIFICADO=8]="DISPOSITIVO_JA_MODIFICADO",e[e.DISPOSITIVO_EM_POSICAO_INVALIDA=9]="DISPOSITIVO_EM_POSICAO_INVALIDA",e[e.DISPOSITIVO_ANTES_DO_ATUAL=10]="DISPOSITIVO_ANTES_DO_ATUAL",e[e.ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES=11]="ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES",e[e.ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS=12]="ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS",e[e.ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA=13]="ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA",e[e.ARTICULACAO_INCONSISTENTE=14]="ARTICULACAO_INCONSISTENTE"}(ay||(ay={}));class ry{constructor(e,t,o,i,a,r,n,s=!0,l="depois"){var c;this.isColarSubstituindo=!0,this.montarRestricoes=()=>[...gy(this.articulacaoColada),..._y(this,this.infoDispositivos)],this.textoColadoOriginal=t,this.textoColadoAjustado=o,this.textoColadoAjustadoParaParser=i,this.isColandoArtigoSemNumeracao=Dy(o),this.jsonix=a,this.articulacaoProposicao=e,this.articulacaoColada=r,this.isColarSubstituindo=s,this.posicao=l,this.infoDispositivos={tiposColados:dy(this.articulacaoColada),atual:Zm(this.articulacaoProposicao,n),existentes:[],novos:[]},this.tipoColado=py(this.articulacaoColada),this.infoDispositivos.referencia=Cy(r.filhos[0].tipo,this.infoDispositivos.atual),this.infoDispositivos.existentes=fy(this.articulacaoProposicao,this.articulacaoColada,this.infoDispositivos.referencia),this.infoDispositivos.novos=vy(this.articulacaoProposicao,this.articulacaoColada,this.infoDispositivos.referencia),this.infoElementos={tiposColados:this.infoDispositivos.tiposColados,atual:Wm(this.infoDispositivos.atual),existentes:this.infoDispositivos.existentes.map((e=>Wm(e))),novos:this.getElementos(this.infoDispositivos.novos),referencia:this.infoDispositivos.referencia?Wm(this.infoDispositivos.referencia):void 0},this.podeColarAntes=(null===(c=this.infoDispositivos.referencia)||void 0===c?void 0:c.tipo)===this.infoDispositivos.tiposColados[0],this.restricoes=this.montarRestricoes()}getElementos(e){try{return e.map((e=>Wm(e)))}catch(e){return[]}}static async newInstanceFromTexto(e,t,o,i){let a=ly(Dy(t)?Py(t):t),r=await uy(a),n=iy(r);const s=nh(n.articulacao);return sy(s)&&(a=ny(a,s),r=await uy(a),n=iy(r)),new ry(o,e,t,a,r,n.articulacao,i)}static newInstanceFromJsonix(e,t,o,i=!0,a="depois"){const r=iy(e);return new ry(t,"","","",e,r.articulacao,o,i,a)}static newInstanceFromTextoEJsonix(e,t,o,i,a){const r=iy(o);return new ry(i,e,t,t,o,r.articulacao,a)}static newInstanceFromArticulacao(e,t,o){return new ry(t,"","","",void 0,e,o)}atualizarAtributosEAnaliseContextualizada(e,t){const o=[ay.ARTICULACAO_SEM_FILHOS,ay.AGRUPADORES_DE_ARTIGO,ay.DISPOSITIVOS_DE_TIPOS_DIFERENTES,ay.DISPOSITIVOS_COM_ROTULO_DUPLICADO];this.posicao=t,this.isColarSubstituindo=e,this.restricoes=this.restricoes.filter((e=>o.includes(e.tipo))),this.restricoes.push(..._y(this,this.infoDispositivos))}}const ny=(e,t)=>{let o=e;const i=t.filter((e=>tp(e)&&!ep(e.pai)));return i.forEach((e=>{const t=Vs(e.texto).split(" ").join("[\\s\\n]?"),i=new RegExp(`(\\n)(.*${e.numero}.*${t})`,"i");o=o.replace(i," $2")})),o},sy=e=>e.some((e=>tp(e)&&!ep(e.pai)&&!Gd(e.pai))),ly=e=>{const t=e.replace(/\r/g,"").replace(/\n\s*\(NR\)/gi," (NR)").replace(/(\(NR\))\./gi,"$1");if(!cy(t))return t;if(!t.match(/(?<=\n|^)["“‘']?art(?:\.|\s|\d)(?:.|\n)+?(?:(?=\n["“‘']?art(?:\.|\s|\d))|$)/gi))return t;return t.replace(/(?<=\n|^)\s*["“‘']?(art(?:\.|\s|\d)(?:.|\n)+?)(["”’]\s*(?:\(NR\))?[\s]*)?(?:(?=\n\s*["“‘']?art(?:\.|\s|\d))|$)/gi,"\n$1").trim()},cy=e=>!!e.match(/^["“‘']/),uy=async e=>{const t={method:"POST",headers:{"Content-Type":"text/plain"},body:e};try{const e=await fetch("https://www6ghml.senado.leg.br/editor-emendas/api/parser/jsonix",t);return await e.json()}catch(e){return console.error(e)}},dy=e=>[...new Set(e.filhos.filter((e=>"Omissis"!==e.tipo)).map((e=>e.tipo)))],py=e=>hy(e.filhos[0]),hy=e=>my(e.tipo),my=e=>cu[null==e?void 0:e.toLowerCase()],fy=(e,t,o)=>{!o||Kd(t.filhos[0])&&!Zp(o)||Ty(t.filhos,o);const i=nh(t).filter((e=>"Articulacao"!==e.tipo)).map((e=>e.id)).reduce(((e,t)=>(t&&(e.push(t),t.endsWith("_par1")&&e.push(t.replace("_par1","_par1u"))),e)),[]);return nh(e).filter((e=>eh(e)&&i.includes(e.id)))},vy=(e,t,o)=>{const i=fy(e,t,o).map((e=>e.id));return nh(t).filter((e=>!Gd(e)&&!i.includes(e.id)))},gy=e=>{const t=[];if(!e||!e.filhos.length)return t.push({tipo:ay.ARTICULACAO_SEM_FILHOS,mensagens:["Não foi possível identificar dispositivos no texto informado"]}),t;if(nh(e).some(rp)&&t.push({tipo:ay.AGRUPADOR_GENERICO_NA_ARTICULACAO,mensagens:["Não foi possível identificar, corretamente, os dispositivos no texto a ser colado."]}),by(e)&&t.push({tipo:ay.AGRUPADORES_DE_ARTIGO,mensagens:["Não é permitido colar texto com agrupadores de artigo.","Por favor, adicione-os manualmente no editor e depois cole os artigos, se houverem."]}),e.filhos.filter((e=>!op(e))).length!==vp(e.filhos.filter((e=>!op(e)))[0]).length){const o=[...new Set(e.filhos.map((e=>{var t;return null===(t=cu[e.tipo.toLowerCase()].descricaoPlural)||void 0===t?void 0:t.toLocaleLowerCase()})))];t.push({tipo:ay.DISPOSITIVOS_DE_TIPOS_DIFERENTES,mensagens:[`Não é permitido colar texto com dispositivos de tipos diferentes: ${o.join(", ")}.`,"Por favor, cole-os separadamente."]})}if(wy(e)&&t.push({tipo:ay.DISPOSITIVOS_COM_ROTULO_DUPLICADO,mensagens:["Não é permitido colar dispositivos com rótulos duplicados."]}),yy(e)){const o=["Não foi possível identificar, corretamente, os dispositivos no texto a ser colado.",Ay(nh(e)),"Por favor, verifique se o texto está correto e tente novamente."].filter(Boolean);t.push({tipo:ay.ARTICULACAO_INCONSISTENTE,mensagens:o})}return t},by=e=>e.filhos.filter((e=>ip(e)&&"DispositivoAgrupadorGenerico"!==e.tipo)).length>0,yy=e=>nh(e).slice(1).some((e=>xy(e))),xy=e=>{var t,o;return!((null===(o=null===(t=e.pai)||void 0===t?void 0:t.tiposPermitidosFilhos)||void 0===o?void 0:o.includes(e.tipo))||op(e)||!e.pai||Gd(e.pai))},Ay=e=>{var t,o;const i=e.find((e=>xy(e)));if(i&&i.pai){const e=Wd(i.pai)?i.pai.pai:i.pai,a=null===(t=null==e?void 0:e.tiposPermitidosFilhos)||void 0===t?void 0:t.map((e=>{var t;return null===(t=cu[e.toLowerCase()].descricao)||void 0===t?void 0:t.toLowerCase()}));return`O dispositivo "${i.rotulo}" não pode ser colado como filho de "${null==e?void 0:e.rotulo}" pois o tipo do dispositivo é ${null===(o=cu[i.tipo.toLowerCase()].descricao)||void 0===o?void 0:o.toLowerCase()} e o tipo permitido é ${null==a?void 0:a.join(" ou ")}.`}return""},wy=e=>{const t=e.filhos.map((e=>e.rotulo));return t.length>new Set(t).size},_y=(e,t)=>{const o=[],{textoColadoAjustado:i,articulacaoColada:a,articulacaoProposicao:r,tipoColado:n,isColarSubstituindo:s,posicao:l}=e,{atual:c,referencia:u,existentes:d}=t;if(e.infoElementos.tiposColados.includes("DispositivoAgrupadorGenerico"))return o;if(!a.filhos.length)return o;const p=n.descricaoPlural;Zp(c)&&Dy(i)&&o.push({tipo:ay.ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO,mensagens:["Não é permitido colar artigo sem numeração dentro de alteração de norma."]}),Zp(c)&&a.filhos.some((e=>{var t;return Kd(e)&&(null===(t=e.alteracoes)||void 0===t?void 0:t.filhos.length)}))&&o.push({tipo:ay.ALTERACAO_DENTRO_DE_ALTERACAO,mensagens:["Não é permitido colar alteração de norma dentro de alteração de norma"]});const h=d||fy(dp(c),a,u);if(c.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO&&a.filhos&&Ny(a.filhos,c)&&o.push({tipo:ay.FILHOS_EM_DISPOSITIVO_SUPRIMIDO,mensagens:["Não é permitido colar filhos em dispositivo suprimido"]}),s&&h.some(ah)){const e=h.filter(ah).map((e=>e.id)),t=nh(r).filter((t=>n.name===t.tipo&&e.includes(t.id))).map((e=>{var t;return null===(t=e.rotulo)||void 0===t?void 0:t.replace(/ [-–)]/,"")})).join(", ");o.push({tipo:ay.DISPOSITIVO_JA_MODIFICADO,titulo:"Atenção, dispositivo já modificado encontrado",mensagens:[`Não é permitido colar dispositivos que já foram alterados na emenda${t?` (veja ${p}: ${t})`:""}.`],isPermitidoColarAdicionando:!0})}const m=u||Cy(a.filhos[0].tipo,c);if(!m){const e=my(c.tipo).descricaoPlural;return o.push({tipo:ay.DISPOSITIVO_EM_POSICAO_INVALIDA,mensagens:[`Não é permitido colar ${null==p?void 0:p.toLowerCase()} sobre ${null==e?void 0:e.toLowerCase()}`]}),o}return"antes"===l&&m.tipo!==a.filhos[0].tipo&&o.push({tipo:ay.DISPOSITIVO_ANTES_DO_ATUAL,mensagens:[`Não é permitido colar ${p} antes do atual dispositivo selecionado`]}),Ey(e,t)&&o.push({tipo:ay.ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES,mensagens:["Não é permitido adicionar incisos ou parágrafos a artigo que já possua alterações de norma"],isPermitidoColarAdicionando:!0}),Oy(e,t)&&o.push({tipo:ay.ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS,mensagens:["Não é permitido adicionar alterações de norma a artigo que já possua incisos ou parágrafos"],isPermitidoColarAdicionando:!0}),Sy(e)&&o.push({tipo:ay.ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA,mensagens:["Não é permitido colar artigo com mudança na identificação da norma alterada"],isPermitidoColarAdicionando:!0}),o},Ey=(e,t)=>e.isColarSubstituindo&&Iy(t.existentes)&&ky(e.articulacaoColada.filhos),Oy=(e,t)=>e.isColarSubstituindo&&ky(t.existentes)&&Iy(e.articulacaoColada.filhos),Sy=e=>!e,Iy=e=>e.some((e=>{var t;return Kd(e)&&!Zp(e)&&(null===(t=e.alteracoes)||void 0===t?void 0:t.filhos.length)})),ky=e=>e.some((e=>{var t;return Kd(e)&&!Zp(e)&&(null===(t=e.filhos)||void 0===t?void 0:t.length)})),Cy=(e,t)=>t?t.tipo===e||(t.tiposPermitidosFilhos||[]).includes(e)?t:Cy(e,t.pai):void 0,Ny=(e,t)=>{var o;return e[0].tipo!==t.tipo&&!!(null===(o=t.tiposPermitidosFilhos)||void 0===o?void 0:o.includes(e[0].tipo))},Ty=(e,t)=>{let o;o=t.tipo===e[0].tipo?t.pai.id:t.id,Kd(t)&&Yd(e[0])&&(o+="_cpt"),e.forEach((e=>nh(e).forEach((e=>qy(e,o)))))},qy=(e,t)=>{var o;!(null===(o=e.id)||void 0===o?void 0:o.startsWith(t))&&Ry(e,t)},Ry=(e,t)=>{e.id=t+"_"+e.id,Kd(e)&&e.caput&&(e.caput.id=t+"_"+e.caput.id)},Dy=e=>{var t;const o=null===(t=Ks(e))||void 0===t?void 0:t.replace(/&nbsp;/g," ").replace(/["“']/g,"").trim();return/^(["“‘'])?(art\.\s+(?!\d+)[x. ]*[º0]?)/gim.test(o)},Py=e=>{if(Dy(e)){let t=5e3,o=e.replaceAll(/^(["“‘'])?(art\.\s+(?!\d+)[x. ]*[º0]?)/gim,"$1ArtigoANumerar");for(;-1!==o.indexOf("ArtigoANumerar");)o=o.replace("ArtigoANumerar","Art. "+t+++". ");return o}return e},Ly=e=>{let t=e.replace(/\xA0/g," ").replace(/<![^>]*>/g,"").replace(/<p/g,"\n<p").replace(/<br\b[^>]*>/gi,"\n").replace(/&nbsp;/g," ").replace(/(<br\s*\/?>)/gi," ").replace(/<([a-z]+) .*?=".*?( *\/?>)/gi,"<$1$2").replace(/;[/s]?[e][/s]?$/,"; ").replace(";","; ").replace(/^["“']/g,"").replace(/<\/?body[^>]*>/gi,"").replace(/\r/g,"").replace(/\n+/g,"\n").replace(/&ldquo; |&ldquo;/g,"“").replace(/&rdquo;/g,"”");const o=["B","STRONG","I","EM","SUP","SUB","P"];return o.map((e=>e.toLowerCase())).forEach((e=>t=t.replace(new RegExp(`<${e}[^>]*>`,"gi"),`<${e}>`))),t=t.replace(/<(\/?)strong>/gi,"<$1b>").replace(/<(\/?)em(>)/gi,"<$1i>"),t=t.replace(/<p[^>]*>(?:.|\n)*?<\/p>/gi,(e=>e.replace(/\n/g," "))).replace(/[\t ]+/g," "),t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<"),t=((e,t)=>{const o=new RegExp(`<(?!(?:/?(${t.join("|")})\\b))[^>]*>`,"gi");return e.replace(o,"")})(t,o).replace(/<p[^>]*>/gi,"\n<p>").replace(/(?<=<\/p>).*/gi,"").replace(/<\/?p[^>]*>/g,"\n").replace(/\n+/g,"\n").replace(/ +/g," ").replace(/\n\s+/g,"\n").replace(/\n *<i>(Parágrafo único\. *)<\/i>/gi,"\n$1").trim(),t},My=/^\.{2,}/,$y=(e,t,o,i,a,r,n,s,l)=>{const c=Zp(o);let u=i;const d=[],p=[],h=[];t.filhos.forEach((t=>{if(c||!op(t)){const o=Zy(e,t.id);if(o&&r){const e=Xy(o,t,s,c);p.push(...nh(e).filter(oh)),d.push(...nh(e).filter(th)),h.push(...nh(e).filter(ih)),u=e}else{u=o&&n?o:u;const e=ex(u,t,c,!1,s,"antes"===a&&u===i?a:void 0);d.push(...nh(e)),h.push(...nh(e).filter(ih)),u=e}}}));const m=[];let f;return zy(t,o,i)&&(f=Fy(i),i.pai.removeFilho(i),i.pai.renumeraFilhos(),d.forEach((e=>e.id=Hm(e)))),m.push(By(d,i)),f&&m.push(f),m.push(...Uy(p)),m.push(jy(d,i,l)),Vy(m,p,h),m.push(Gy(d,c)),d[0]&&m.push(Qy([d[0],o])),m.filter((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.length}))},jy=(e,t,o)=>{const i=(t.tipo===o?t.pai:t).filhos.filter((t=>th(t)&&!e.includes(t)));return{stateType:nf.ElementoRenumerado,elementos:i.map((e=>Wm(e)))}},zy=(e,t,o)=>{const i=nh(e).filter((e=>!["Articulacao","Omissis"].includes(e.tipo)))[0];return t===o&&i.tipo===o.tipo&&!o.texto&&th(o)},Fy=e=>({stateType:nf.ElementoRemovido,elementos:[Xm(e)]}),By=(e,t)=>{const o=[],i=t.pai;let a;if(e.length){let t=nh(i),r=t.indexOf(e[0]);-1===r&&(t=nh(dp(i)),r=t.indexOf(e[0])),e.forEach((e=>{const t=Wm(e,!0,!0);t.mensagens=Fm(e),o.push(t)})),a=Wm(t[r-1])}return{stateType:nf.ElementoIncluido,elementos:o,referencia:a}},Uy=e=>{const t=[];return e.forEach((e=>{t.push({stateType:nf.ElementoModificado,elementos:[e.situacao.dispositivoOriginal,Xm(e)]})})),t},Vy=(e,t,o)=>{const i=[];if(o.length>0&&o.forEach((e=>{i.push(e)})),i.length>0){const t=[];i.forEach((e=>{Hy(e).forEach((e=>{0===t.filter((t=>t.id===e.id)).length&&t.push(e)}))})),e.push({stateType:nf.ElementoSuprimido,elementos:t.map((e=>Xm(e)))})}},Hy=e=>{const t=nh(e.pai).filter(ih).map((e=>nh(e))).flat();return t},Gy=(e,t)=>{const o=[];return t&&o.push(...sx(e).map((e=>Xm(e)))),o.push(...Ky(e).map((e=>Xm(e)))),o.push(...Wy(e).map((e=>Xm(e)))),{stateType:nf.SituacaoElementoModificada,elementos:o}},Qy=e=>({stateType:nf.ElementoMarcado,elementos:e.map((e=>Xm(e)))}),Ky=e=>[...new Set(e.filter(Xd).map((e=>e.pai)))].map((e=>e.filhos.filter((e=>Xd(e)&&"1"===e.numero)))).flat(),Wy=e=>e.filter((e=>{var t;return Kd(e)&&!Jp(e)&&(null===(t=e.alteracoes)||void 0===t?void 0:t.filhos.length)})),Xy=(e,t,o,i,a=[])=>{var r;let n,s=e;Ks(e.texto)!==Ks(t.texto)&&!t.texto.match(My)&&t.texto.trim()&&(e.situacao=new Hg(Xm(e)),e.texto=t.texto);return((null===(r=t.alteracoes)||void 0===r?void 0:r.filhos)||t.filhos).forEach((t=>{if(op(t)&&a.push(rx(e,t)),!op(t)||i){const r=Zy(dp(e),t.id);r?(s=r,Xy(r,t,o,i||Zp(t),a)):(s=n&&Yy(n,a,t)||s,ex(s,t,i||Zp(t),!!n,o,"depois"),s=t)}n=op(t)?t:void 0})),i||Jy(e,t,a),e},Yy=(e,t,o)=>{var i;return null===(i=t.find((t=>t.omissis===e)))||void 0===i?void 0:i.omitidos.filter((e=>e.tipo===o.tipo)).slice(-1)[0]},Jy=(e,t,o)=>{const i=dp(t),a=o.map((e=>e.omitidos)).flat();e.filhos.forEach((e=>{Zy(i,e.id)||dh(i,e.id.replace("par1u","par1"))||a.find((t=>t.id===e.id))||nh(e).forEach((e=>e.situacao=new Bm(Xm(e))))}))},Zy=(e,t)=>{const o=dh(e,t);return o||(t.endsWith("par1")||t.split("_").includes("par1")?dh(e,t.replace("_par1_","_par1u_").replace(/par1$/,"par1u")):void 0)},ex=(e,t,o,i,a,r)=>{var n,s,l,c;if(!op(e)&&(null===(n=e.tiposPermitidosFilhos)||void 0===n?void 0:n.includes(t.tipo))?Kd(e)&&Yd(t)?(t.pai=e.caput,i?e.caput.addFilho(t):e.caput.addFilhoOnPosition(t,0)):(t.pai=e,i?e.addFilho(t):e.addFilhoOnPosition(t,0)):!Zp(e)&&Zp(t)?(t.pai=e.alteracoes,e.alteracoes.addFilhoOnPosition(t,0)):(t.pai=e.pai,null===(s=e.pai)||void 0===s||s.addFilhoOnPosition(t,e.pai.indexOf(e)+("antes"===r?0:1))),t.texto.match(My)&&!o&&(t.texto=""),ax(t,a),o?t.notaAlteracao=Gp(t)?"NR":void 0:ix(t),!(null===(c=null===(l=t.pai)||void 0===l?void 0:l.tiposPermitidosFilhos)||void 0===c?void 0:c.includes(t.tipo))&&!op(t))throw new Error("Erro ao colar dispositivo adicionado");return tx(t),t},tx=e=>{var t;null===(t=e.pai)||void 0===t||t.renumeraFilhos(),nh(e).forEach((e=>{e.id=Hm(e),Kd(e)&&(e.caput.id=Hm(e.caput))}))},ox=(e,t)=>{e.situacao=new Uf,e.isDispositivoAlteracao=Zp(e),e.situacao.tipoEmenda=t,e.isDispositivoAlteracao&&!op(e)&&(e.situacao.existeNaNormaAlterada=!0)},ix=e=>{e.filhos.filter(op).forEach((e=>e.pai.removeFilho(e))),e.filhos.forEach(ix),e.id=Hm(e),e.renumeraFilhos()},ax=(e,t)=>{ox(e,t),e.filhos.forEach((e=>{ox(e,t),e.filhos&&ax(e,t)})),e.alteracoes&&(ox(e.alteracoes,t),e.alteracoes.filhos.forEach((e=>{ox(e,t),e.filhos&&ax(e,t)})))},rx=(e,t)=>{const o=nh(Wd(t.pai)?t.pai.pai:t.pai),i=nh(Kd(e)?e:e.pai),a=o.indexOf(t),r=o[a-1],n=o[a+1],s=i.find((e=>e.id===r.id)),l=n&&i.find((e=>e.id===n.id)),c=nx(i,s,l,n),u=[...new Set(c.map((e=>e.id.split("_")[0])))];if(u.length>1)throw new Error("Erro ao montar lista de dispositivos omitidos");return{omissis:t,anterior:r,posterior:n,omitidos:c}},nx=(e,t,o,i)=>{const a=[];if(o){const i=e.findIndex((e=>e.id===t.id)),r=e.findIndex((e=>e.id===o.id));a.push(...e.filter(((e,t)=>t>i&&t<r)))}else{const o=e.findIndex((e=>e.id===t.id));a.push(...e.filter(((e,t)=>t>o&&(!i||e.id.startsWith(i.pai.id)))))}return a},sx=e=>{const t=new Map;e.forEach((e=>{const o=Hp(e);t.set(o.id,o)}));return[...t.values()].map((e=>{const t=mp(e),o=xp(t,(e=>!(!e.pai||e.pai!==t.pai)));return o?[o,t]:[t]})).flat().filter((e=>e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO))},lx=e=>{const t=e.revisoes.filter((e=>e.descricao!==Kv.JustificativaAlterada)).length>0,o=e.revisoes.filter((e=>e.descricao===Kv.JustificativaAlterada)).length>0;return t&&o?" das abas texto e justificação ":t?" da aba texto ":o?" da aba justificação ":" "};class cx{constructor(e,t,o){this.id=ms(),this.usuario=e,this.dataHora=t,this.descricao=o}}class ux extends cx{constructor(e,t,o){super(e,t,o),this.type="RevisaoJustificativa"}}class dx extends cx{constructor(e,t,o){super(e,t,o),this.type="RevisaoTextoLivre"}}class px extends cx{constructor(e,t,o,i,a,r,n){var s;super(i,a,o),this.type="RevisaoElemento",this.actionType=e,this.stateType=t,this.elementoAntesRevisao=r,this.elementoAposRevisao=n,this.descricao=o||(Vv(s=this)?Lv(s):Mv(s)),Jv(this.elementoAntesRevisao),Jv(this.elementoAposRevisao)}}const hx=e=>e.toString().padStart(2,"0"),mx=e=>`${[e.getFullYear(),hx(e.getMonth()+1),hx(e.getDate())].join("-")} ${[hx(e.getHours()),hx(e.getMinutes()),hx(e.getSeconds())].join(":")}`,fx="ATUALIZAR_USUARIO";const vx=new class{constructor(){this.descricao="Atualizar o usuário da revisão."}execute(e){return{type:fx,usuario:e}}},gx=e=>{var t;return!!(null===(t=e.future)||void 0===t?void 0:t.length)&&[nf.RevisaoAceita,nf.RevisaoRejeitada].includes(e.future[e.future.length-1][0].stateType)},bx=e=>{var t;return!!(null===(t=e.ui)||void 0===t?void 0:t.events.some((e=>e.stateType===nf.RevisaoRejeitada)))},yx=(e,t)=>{var o;const i=Sx(e,nf.ElementoSuprimido),a=[],r=[];return Ix(i).forEach((o=>{var i;const n=Nv(e.revisoes,o.uuid);if(n&&(null===(i=n.elementoAntesRevisao)||void 0===i?void 0:i.descricaoSituacao)===Ud.DISPOSITIVO_SUPRIMIDO)r.push(n);else{const i=Zm(e.articulacao,o),s=(null==n?void 0:n.elementoAntesRevisao)||JSON.parse(JSON.stringify(i.situacao.dispositivoOriginal));a.push(new px(t,nf.ElementoSuprimido,"",e.usuario,mx(new Date),s,JSON.parse(JSON.stringify(o)))),n&&r.push(n)}})),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!r.includes(e))),a},xx=(e,t)=>{var o;const i=Sx(e,nf.ElementoModificado),a=[],r=[];return Ix(i).forEach((o=>{const i=Nv(e.revisoes,o.uuid);if(i)(ug(i)||(e=>Vv(e)&&e.stateType===nf.ElementoRestaurado)(i))&&Nx(i,o)&&r.push(i),i.elementoAposRevisao=JSON.parse(JSON.stringify(o)),e.usuario&&(i.usuario=e.usuario),i.dataHora=mx(new Date);else{const i=qx(e,o);Ax(i,o)||a.push(new px(t,nf.ElementoModificado,"",e.usuario,mx(new Date),i,JSON.parse(JSON.stringify(o))))}})),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!r.includes(e))),a},Ax=(e,t)=>{var o,i,a,r,n,s,l;return!(t.tipo!==(null==e?void 0:e.tipo)||!(null===(i=null===(o=t.conteudo)||void 0===o?void 0:o.texto)||void 0===i?void 0:i.includes(Hd))||!(null===(r=null===(a=null==e?void 0:e.conteudo)||void 0===a?void 0:a.texto)||void 0===r?void 0:r.includes(Hd))||(null===(s=null===(n=t.conteudo)||void 0===n?void 0:n.texto)||void 0===s?void 0:s.replace('<span class="texto__omissis">',"").replace("</span>",""))!==(null===(l=null==e?void 0:e.conteudo)||void 0===l?void 0:l.texto))},wx=(e,t)=>{var o;const i=Ix(Sx(e,nf.ElementoIncluido)),a=Ix(Sx(e,nf.ElementoRemovido)),r=[],n=[],s=(o,i)=>{const a=new px(t,nf.ElementoIncluido,"",e.usuario,mx(new Date),o?JSON.parse(JSON.stringify(o)):void 0,JSON.parse(JSON.stringify(i)));return a.descricao=jv(a,i),a};return((e=[],t)=>{const o=Cv(e);return t.some((e=>o.some((t=>t.elementoAposRevisao.uuid===e.uuid))))})(e.revisoes,a)?a.forEach(((o,a)=>{var l;const c=Nv(e.revisoes,o.uuid);c?cg(c)&&Cx(c,i[a])?n.push(...((e=[],t="")=>Cv(e).filter((e=>e.elementoAposRevisao.lexmlId===t)))(e.revisoes,o.lexmlId)):Nx(c,i[a])&&c.elementoAntesRevisao.uuid!==o.uuid?n.push(...((e=[],t="")=>Cv(e).filter((e=>e.elementoAposRevisao.uuid2===t)))(e.revisoes,i[a].uuid2)):(e.revisoes=null===(l=e.revisoes)||void 0===l?void 0:l.filter((e=>e.id!==c.id)),c.stateType=nf.ElementoIncluido,c.actionType=t,c.dataHora=mx(new Date),c.elementoAposRevisao=JSON.parse(JSON.stringify(i[a])),Jv(c.elementoAposRevisao),c.usuario=e.usuario,c.descricao=jv(c,i[a]),c.idRevisaoElementoPai=n.find((e=>e.id===c.idRevisaoElementoPai))?void 0:c.idRevisaoElementoPai,c.idRevisaoElementoPrincipal=n.find((e=>e.id===c.idRevisaoElementoPrincipal))?void 0:c.idRevisaoElementoPrincipal,r.push(c)):r.push(s(o,i[a]))})):a.forEach(((e,t)=>r.push(s(e,i[t])))),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!n.includes(e))),r},_x=(e,t)=>{var o;const i=Sx(e,nf.ElementoIncluido),a=[],r=[],n=Ix(i).map((e=>e.uuid));return Ix(i).forEach((o=>{var i,s;const l=Nv(e.revisoes,o.uuid);l?r.push(l):(n.includes(null===(s=null===(i=o.hierarquia)||void 0===i?void 0:i.pai)||void 0===s?void 0:s.uuid)||rg(e.articulacao,e.revisoes,o,"inclusao"),a.push(new px(t,nf.ElementoIncluido,"",e.usuario,mx(new Date),void 0,JSON.parse(JSON.stringify(o)))))})),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!r.includes(e))),a},Ex=(e,t)=>{var o;const i=Sx(e,nf.ElementoRemovido),a=[],r=[],n=Ix(i),s=n.map((e=>e.uuid));return n.forEach((o=>{var i,n;const l=Nv(e.revisoes,o.uuid);if(!l||!Qv(l)&&lg(l)){s.includes(null===(n=null===(i=o.hierarquia)||void 0===i?void 0:i.pai)||void 0===n?void 0:n.uuid)||rg(e.articulacao,e.revisoes,o,"exclusao");const r=JSON.parse(JSON.stringify(o));a.push(new px(t,nf.ElementoRemovido,"",e.usuario,mx(new Date),r,{...r,acoesPossiveis:[]}))}else r.push(l)})),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!r.includes(e))),a},Ox=(e,t)=>{var o;const i=Sx(e,nf.ElementoRestaurado),a=[],r=[];return i.forEach((o=>{var i;const n=o.elementos[1],s=o.elementos[0],l=n||s,c=Nv(e.revisoes,s.uuid);if(c&&(null===(i=c.elementoAntesRevisao)||void 0===i?void 0:i.descricaoSituacao)===l.descricaoSituacao&&Nx(c,l))r.push(c);else{const o=Zm(e.articulacao,s),i=n?s:o.situacao.dispositivoOriginal,l=Wm(o);a.push(new px(t,nf.ElementoRestaurado,"",e.usuario,mx(new Date),JSON.parse(JSON.stringify(i)),JSON.parse(JSON.stringify(l)))),c&&r.push(c)}})),e.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!r.includes(e))),a},Sx=(e,t)=>{var o;return(null===(o=e.ui)||void 0===o?void 0:o.events.filter((e=>e.stateType===t)))||[]},Ix=e=>kx(e.map((e=>e.elementos||[])).flat()),kx=e=>{const t=new Map,o=[];return e.reverse().forEach((e=>{t.has(e.uuid)||(t.set(e.uuid,e),o.unshift(e))})),o},Cx=(e,t)=>{var o,i,a,r,n;return(null===(o=e.elementoAntesRevisao)||void 0===o?void 0:o.lexmlId)===t.lexmlId&&(null===(i=e.elementoAntesRevisao)||void 0===i?void 0:i.rotulo)===t.rotulo&&(null===(r=null===(a=e.elementoAntesRevisao)||void 0===a?void 0:a.conteudo)||void 0===r?void 0:r.texto)===(null===(n=t.conteudo)||void 0===n?void 0:n.texto)},Nx=(e,t)=>{var o,i,a,r,n,s,l,c,u,d;return(null===(o=e.elementoAntesRevisao)||void 0===o?void 0:o.uuid2)===t.uuid2&&(null===(i=e.elementoAntesRevisao)||void 0===i?void 0:i.rotulo)===t.rotulo&&(null===(r=null===(a=e.elementoAntesRevisao)||void 0===a?void 0:a.conteudo)||void 0===r?void 0:r.texto)===(null===(n=t.conteudo)||void 0===n?void 0:n.texto)&&(null===(c=null===(l=null===(s=e.elementoAntesRevisao)||void 0===s?void 0:s.hierarquia)||void 0===l?void 0:l.pai)||void 0===c?void 0:c.lexmlId)===(null===(d=null===(u=t.hierarquia)||void 0===u?void 0:u.pai)||void 0===d?void 0:d.lexmlId)},Tx=e=>{const t=Sx(e,nf.ElementoIncluido),o=Sx(e,nf.ElementoRemovido);return!!t.length&&t.length===o.length},qx=(e,t)=>{const o=[...e.past].pop().filter((e=>{var o;return e.stateType===nf.ElementoModificado&&(null===(o=e.elementos)||void 0===o?void 0:o.some((e=>e.uuid===t.uuid)))})),i=o.pop();return i?JSON.parse(JSON.stringify(i.elementos[0])):void 0},Rx=e=>{var t;null===(t=e.ui)||void 0===t||t.events.forEach((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.filter(Boolean).forEach((t=>{t.revisao&&!t.revisao.idRevisaoElementoPrincipal&&(t.acoesPossiveis=e.stateType===nf.ElementoRemovido?[]:[...t.acoesPossiveis||[]],!t.acoesPossiveis.includes(_f)&&t.acoesPossiveis.push(_f),!t.acoesPossiveis.includes(Of)&&t.acoesPossiveis.push(Of))}))}))},Dx=e=>{var t;return((null===(t=e.ui)||void 0===t?void 0:t.events)||[]).some((e=>e.stateType===nf.ElementoIncluido||e.stateType===nf.ElementoRemovido))},Px=e=>{let t=Cv(e.revisoes||[]).filter((e=>e.elementoAposRevisao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)).filter((e=>!Yv(e)));t.forEach((t=>{const o=Zm(e.articulacao,t.elementoAposRevisao);if(o){const e=Wm(o,!1,!0);t.elementoAposRevisao.lexmlId=o.id,t.elementoAposRevisao.hierarquia.pai.lexmlId=o.pai.id,t.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura)),t.elementoAntesRevisao&&(t.elementoAntesRevisao.lexmlId=o.id,t.elementoAntesRevisao.hierarquia.pai.lexmlId=o.pai.id,t.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura)))}})),t=Cv(e.revisoes||[]).filter((e=>Qv(e)&&Yv(e))),t.forEach((t=>{const o=Zm(e.articulacao,t.elementoAposRevisao.hierarquia.pai);t.elementoAposRevisao.hierarquia.pai.lexmlId=o.id}))},Lx=e=>{const t=Cv(e.revisoes||[]).filter((e=>Qv(e)&&Yv(e)));Mx(t,Tg(e.ui.events,nf.ElementoIncluido)),Mx(t,Tg(e.ui.events,nf.ElementoRemovido))},Mx=(e=[],t)=>{if(!t)return;const o=t.stateType===nf.ElementoIncluido?1:-1,i=t.stateType===nf.ElementoIncluido?(e,t)=>e.hierarquia.posicao<=t:(e,t)=>e.hierarquia.posicao<t;e.forEach((e=>{const a=e.elementoAposRevisao.hierarquia.pai.lexmlId,r=e.elementoAposRevisao.hierarquia.posicao,n=t.elementos.filter((e=>{var t,o;return(null===(o=null===(t=e.hierarquia)||void 0===t?void 0:t.pai)||void 0===o?void 0:o.lexmlId)===a&&i(e,r)})).length*o;e.elementoAposRevisao.hierarquia.posicao+=n}))},$x=(e,t=[])=>{var o;const i=[];t.filter(Qv).forEach((t=>{const o={...e,past:[],present:[],future:[],ui:{...e.ui,events:[]}};i.push(jx(o,{revisao:t}))}));const a=mg(e,i,t,"aceitar");return a.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!Qv(e))),a},jx=(e,t)=>{var o,i;const a=t.revisao||Nv(e.revisoes,t.elemento.uuid),r=Uv(e.revisoes,a),n=r.map((e=>e.id)),s=r.map((t=>{const o=Yv(t)?t.elementoAposRevisao:Xm(Zm(e.articulacao,t.elementoAposRevisao));return o.revisao=JSON.parse(JSON.stringify(t)),o})),l=s.map((t=>Zm(e.articulacao,t))).filter(Boolean).map((e=>Xm(e))),c=[{stateType:nf.RevisaoAceita,elementos:s}];l.length&&c.push({stateType:nf.ElementoValidado,elementos:l});const u=e.revisoes.filter((e=>!n.includes(e.id)));return Yv(a)&&zx(u,r),{...e,past:Df(e,c),present:c,future:[],ui:{events:c,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas},revisoes:null===(i=e.revisoes)||void 0===i?void 0:i.filter((e=>!n.includes(e.id)))}},zx=(e,t)=>{const o=t[0],i=t[t.length-1],a=e.find((e=>{var t,o;return(null===(o=null===(t=e.elementoAposRevisao)||void 0===t?void 0:t.elementoAnteriorNaSequenciaDeLeitura)||void 0===o?void 0:o.uuid)===i.elementoAposRevisao.uuid}));a&&(a.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=o.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura,a.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=o.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura)},Fx=(e,t=[])=>{var o;const i=[];t.filter(Qv).forEach((t=>{const o={...e,past:[],present:[],future:[],ui:{...e.ui,events:[]}};i.push(Bx(o,{revisao:t}))}));const a=mg(e,i,t,"rejeitar");return a.revisoes=null===(o=e.revisoes)||void 0===o?void 0:o.filter((e=>!Qv(e))),a},Bx=(e,t)=>{var o,i;const a=t.revisao||Nv(e.revisoes,t.elemento.uuid),r=Uv(e.revisoes,a),n=r.map((e=>e.id)),s=r.map((e=>(e.elementoAposRevisao.revisao=JSON.parse(JSON.stringify(e)),e.elementoAposRevisao))),l=[{stateType:nf.RevisaoRejeitada,elementos:s}];if(lg(a)){const t=s.map((e=>e.uuid2)),o=e.revisoes.filter((e=>!n.includes(e.id))).filter((e=>t.includes(e.elementoAposRevisao.uuid2)));n.push(...o.map((e=>e.id))),Vx(e,o.filter(Qv));const i=o.map((e=>(e.elementoAposRevisao.revisao=JSON.parse(JSON.stringify(e)),e.elementoAposRevisao)));l.push({stateType:nf.RevisaoAdicionalRejeitada,elementos:i})}const c={...e,past:[]};l.push(...Vx(c,r.filter(Qv)));const u=ug(a)?Ux(l,a,e):l;return{...e,past:Df(e,u),present:l,future:[],ui:{events:l,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas},revisoes:null===(i=e.revisoes)||void 0===i?void 0:i.filter((e=>!n.includes(e.id)))}},Ux=(e,t,o)=>{const i=e.filter((e=>e.stateType!==nf.ElementoModificado)),a=Zm(o.articulacao,t.elementoAposRevisao);return i.push({stateType:nf.ElementoModificado,elementos:[t.elementoAposRevisao,t.elementoAntesRevisao]}),i.push({stateType:nf.ElementoValidado,elementos:tf(a,!0)}),i},Vx=(e,t)=>{const o=[];return t.forEach((t=>{t.stateType===nf.ElementoSuprimido&&o.push(...Hx(e,t)),t.stateType===nf.ElementoModificado&&o.push(...Gx(e,t)),t.stateType===nf.ElementoRestaurado&&o.push(...Qx(e,t)),t.stateType===nf.ElementoIncluido&&o.push(...Kx(e,t)),t.stateType===nf.ElementoRemovido&&o.push(...Wx(e,t))})),Rg(e,o,nf.ElementoRenumerado)},Hx=(e,t)=>{var o;return(null===(o=Pb(e,{atual:t.elementoAntesRevisao}).ui)||void 0===o?void 0:o.events)||[]},Gx=(e,t)=>{var o;return(null===(o=nb(e,{atual:t.elementoAntesRevisao}).ui)||void 0===o?void 0:o.events)||[]},Qx=(e,t)=>{var o,i,a,r;return(null===(o=t.elementoAntesRevisao)||void 0===o?void 0:o.descricaoSituacao)===Ud.DISPOSITIVO_SUPRIMIDO?(null===(i=Mb(e,{atual:t.elementoAntesRevisao}).ui)||void 0===i?void 0:i.events)||[]:(null===(a=t.elementoAntesRevisao)||void 0===a?void 0:a.descricaoSituacao)===Ud.DISPOSITIVO_MODIFICADO&&(null===(r=nb(e,{atual:t.elementoAntesRevisao}).ui)||void 0===r?void 0:r.events)||[]},Kx=(e,t)=>{var o;const i=Zm(e.articulacao,t.elementoAposRevisao),a=xp(i,(e=>!Wd(e))),r=(null===(o=vb(e,{atual:t.elementoAposRevisao,isRejeitandoRevisao:!0}).ui)||void 0===o?void 0:o.events)||[];t.elementoAntesRevisao&&r.push(...Wx(e,t));const n=sg(e.revisoes,t),s=ng(e.revisoes,n.elementoAposRevisao);if(s){const e=a?Wm(a):void 0;s.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=e?JSON.parse(JSON.stringify(e)):void 0,s.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=e?JSON.parse(JSON.stringify(e)):void 0}return r},Wx=(e,t)=>{const o=Uv(e.revisoes,t),i={stateType:nf.ElementoRemovido,elementos:o.map((e=>e.elementoAntesRevisao))},a={stateType:nf.ElementoIncluido,elementos:[]},r=[],n=t.elementoAposRevisao;if(n.agrupador){let t={...e,past:[],present:[],future:[],ui:{events:[]}};t=Mg(t,{atual:n.elementoAnteriorNaSequenciaDeLeitura,novo:{tipo:n.tipo,uuid:n.uuid,posicao:"depois",manterNoMesmoGrupoDeAspas:n.manterNoMesmoGrupoDeAspas}}),r.push(...t.ui.events)}else r.push({stateType:nf.ElementoIncluido,elementos:xb(e,i,a)});Xx(e,t,r[0].elementos[0]);const s=of(Zm(e.articulacao,r[0].elementos[0])).filter(th);return r.push({stateType:nf.ElementoRenumerado,elementos:s.map((e=>Wm(e)))}),r.push({stateType:nf.SituacaoElementoModificada,elementos:Ag(e.articulacao,qg(r))}),r.push({stateType:nf.ElementoValidado,elementos:Yx(e,r)}),r.filter((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.length}))},Xx=(e,t,o)=>{var i;const a=mp(Zm(e.articulacao,o)),r=Wm(a,!1,!0),n=ng(null===(i=e.revisoes)||void 0===i?void 0:i.filter((e=>e.id!==t.id)),r);n&&n.id!==t.id&&(n.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(r)),n.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura=JSON.parse(JSON.stringify(r)))},Yx=(e,t)=>t.filter((e=>e.stateType===nf.ElementoIncluido)).map((e=>e.elementos||[])).flat().map((t=>Zm(e.articulacao,t))).map((e=>Xm(e))),Jx="LIMPAR_REVISAO";const Zx=new class{execute(){return{type:Jx,revisoes:[]}}},eA=(e,t)=>{var o;return"REDO"===e&&!!(null===(o=t.ui)||void 0===o?void 0:o.events.some((e=>e.stateType===nf.RevisaoAceita)))},tA=(e,t)=>{var o;return"REDO"===e&&!!(null===(o=t.ui)||void 0===o?void 0:o.events.some((e=>e.stateType===nf.RevisaoRejeitada)))},oA=function(e){for(var t=Object.keys(e),o={},i=0;i<t.length;i++){var a=t[i];"production"!==process.env.NODE_ENV&&void 0===e[a]&&tu('No reducer provided for key "'+a+'"'),"function"==typeof e[a]&&(o[a]=e[a])}var r,n,s=Object.keys(o);"production"!==process.env.NODE_ENV&&(r={});try{!function(e){Object.keys(e).forEach((function(t){var o=e[t];if(void 0===o(void 0,{type:Yc.INIT}))throw new Error("production"===process.env.NODE_ENV?Kc(12):'The slice reducer for key "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===o(void 0,{type:Yc.PROBE_UNKNOWN_ACTION()}))throw new Error("production"===process.env.NODE_ENV?Kc(13):'The slice reducer for key "'+t+"\" returned undefined when probed with a random type. Don't try to handle '"+Yc.INIT+'\' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(o)}catch(e){n=e}return function(e,t){if(void 0===e&&(e={}),n)throw n;if("production"!==process.env.NODE_ENV){var i=function(e,t,o,i){var a=Object.keys(t),r=o&&o.type===Yc.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===a.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!Jc(e))return"The "+r+' has unexpected type of "'+eu(e)+'". Expected argument to be an object with the following keys: "'+a.join('", "')+'"';var n=Object.keys(e).filter((function(e){return!t.hasOwnProperty(e)&&!i[e]}));return n.forEach((function(e){i[e]=!0})),o&&o.type===Yc.REPLACE?void 0:n.length>0?"Unexpected "+(n.length>1?"keys":"key")+' "'+n.join('", "')+'" found in '+r+'. Expected to find one of the known reducer keys instead: "'+a.join('", "')+'". Unexpected keys will be ignored.':void 0}(e,o,t,r);i&&tu(i)}for(var a=!1,l={},c=0;c<s.length;c++){var u=s[c],d=o[u],p=e[u],h=d(p,t);if(void 0===h){var m=t&&t.type;throw new Error("production"===process.env.NODE_ENV?Kc(14):"When called with an action of type "+(m?'"'+String(m)+'"':"(unknown type)")+', the slice reducer for key "'+u+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}l[u]=h,a=a||h!==p}return(a=a||s.length!==Object.keys(e).length)?l:e}}({appReducer:(e={},t)=>(t.type,e),elementoReducer:(e={},t)=>{var o,i;let a,r=e.usuario,n=t.type,s=e.emRevisao,l=e.revisoes||[],c=e.numEventosPassadosAntesDaRevisao||0;switch(t.type){case"ADICIONAR_AGRUPADOR_ARTIGO":a=Mg(e,t);break;case"INFORMAR_EXISTENCIA_NA_NORMA":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;if(!Mf(i,Qu))return Pf(e,{tipo:Mh.INFO,descricao:"Nessa situação, não é possível alterar esse dado do dispositivo"});const a=!vh(i),r=t.existeNaNormaAlterada;if(a===r)return e.ui.events=[],e;const n=lb(i,r);if(n)return Pf(e,n);const s=a&&!t.existeNaNormaAlterada,l=[];if(s){const e=nh(i).filter((e=>!ip(i)||ip(e)));e.forEach((e=>{const o=Wm(e);e.situacao.existeNaNormaAlterada=t.existeNaNormaAlterada;const i=Wm(e);l.push({stateType:nf.ElementoModificado,elementos:[o,i]})}))}else{const e=Wm(i);i.situacao.existeNaNormaAlterada=t.existeNaNormaAlterada;const o=Wm(i);l.push({stateType:nf.ElementoModificado,elementos:[e,o]}),l.push({stateType:nf.SituacaoElementoModificada,elementos:Jm(i)})}return l.push({stateType:nf.ElementoSelecionado,elementos:[Wm(i)]}),{articulacao:e.articulacao,modo:e.modo,past:Df(e,l),present:l,future:[],ui:{events:l,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case"ATUALIZAR_NOTA_ALTERACAO":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;if(!Mf(i,zd))return Pf(e,{tipo:Mh.INFO,descricao:"Nessa situação, não é possível alterar esse dado do dispositivo"});const a=Hp(i);if(void 0===a)return Pf(e,{tipo:Mh.INFO,descricao:"Nessa situação, não é possível alterar esse dado do dispositivo"});if(a.notaAlteracao===t.notaAlteracao)return e.ui.events=[],e;const r=Wm(i);a.notaAlteracao=t.notaAlteracao||void 0;const n=Wm(i),s=[];return s.push({stateType:nf.ElementoModificado,elementos:[r,n]}),s.push({stateType:nf.ElementoValidado,elementos:[n]}),{articulacao:e.articulacao,modo:e.modo,past:Df(e,s),present:s,future:[],ui:{events:s,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case zu:a=((e,t)=>{var o,i,a;let r=[];(null===(i=null===(o=e.ui)||void 0===o?void 0:o.alertas)||void 0===i?void 0:i.length)>0&&(r=e.ui.alertas);const n={articulacao:e.articulacao,modo:e.modo,past:[],present:[],future:[],ui:{events:[],alertas:r},revisoes:[],emRevisao:e.emRevisao,numEventosPassadosAntesDaRevisao:0},s=new Dg;t.alteracoesEmenda.dispositivosSuprimidos&&(s.add(nf.ElementoSuprimido,[]),t.alteracoesEmenda.dispositivosSuprimidos.forEach((t=>{const o=dh(e.articulacao,t.id);o&&lh(o,(e=>{var t;e.situacao=new Bm(Wm(e)),null===(t=s.get(nf.ElementoSuprimido).elementos)||void 0===t||t.push(Wm(e))}))}))),t.alteracoesEmenda.dispositivosModificados&&(s.add(nf.ElementoModificado,[]),t.alteracoesEmenda.dispositivosModificados.forEach((t=>{var o;const i=dh(e.articulacao,"Caput"===t.tipo?eb(t.id):t.id);i&&(i.situacao=new Hg(Wm(i)),i.texto=t.texto,null===(o=s.get(nf.ElementoModificado).elementos)||void 0===o||o.push(Wm(i)))}))),t.alteracoesEmenda.dispositivosAdicionados&&s.eventos.push(...Gg(e,t.alteracoesEmenda)),(null===(a=t.revisoes)||void 0===a?void 0:a.length)&&(s.eventos.push(...tb(n,t.revisoes)),n.emRevisao=!0),n.ui.events=s.build();const l=[];if(n.ui.events.filter((e=>e.stateType===nf.ElementoIncluido)).forEach((e=>l.push(...e.elementos))),n.ui.events.push({stateType:nf.SituacaoElementoModificada,elementos:Ag(e.articulacao,l)}),n.emRevisao&&n.ui.events.push({stateType:nf.RevisaoAtivada}),e.articulacao){const t=nh(e.articulacao).find((e=>!Gd(e)&&(th(e)||ih(e)||oh(e))));t&&n.ui.events.push({stateType:nf.ElementoMarcado,elementos:[Wm(t)]})}return n})(e,t),s=a.emRevisao;break;case"ASSISTENTE_ALTERACAO":a=((e,t)=>{var o,i,a;const r=Zm(e.articulacao,t.atual,!0);if(void 0===r||!Kd(r))return e.ui.events=[],e;const n=dv(r.pai,r.tipo,r);if(n.situacao=new Uf,n.situacao.tipoEmenda=e.modo,n.isDispositivoAlteracao=!1,n.situacao.existeNaNormaAlterada=void 0,null===(o=n.pai)||void 0===o||o.renumeraFilhos(),n.id=Hm(n),n.caput.situacao=n.situacao=new Uf,n.caput.situacao.tipoEmenda=e.modo,mv(n),n.alteracoes.situacao=new Uf,n.alteracoes.situacao.tipoEmenda=e.modo,t.dispositivos)try{Ev(t.dispositivos,n,e.modo)}catch(t){return Pf(e,{tipo:Mh.ERROR,descricao:t.message})}if(t.norma){n.alteracoes.base=t.norma;const e=null===(i=nm(t.norma))||void 0===i?void 0:i.genero;if(t.norma&&fm(t.norma)){const o=`${nm(t.norma).descricao} nº ${lm(sm(t.norma))}, de ${um(t.norma)}`;n.texto=`${e&&"M"===e?"O":"A"} <a href="${t.norma}">${o}</a>, passa a vigorar com as seguintes alterações:`}}const s=sh(n,[]);s.forEach(((e,t)=>{t>0&&t<s.length-1&&(e.texto=Hd),t>1&&Pg(e)}));const l=new Dg;return l.setReferencia(Wm(bg(r,n))),l.add(nf.ElementoIncluido,xg(n,!0)),l.add(nf.ElementoValidado,tf(n,!1)),l.add(nf.ElementoMarcado,[Wm(mp(n)),Wm(r)]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,l.build()),present:l.build(),future:[],ui:{events:l.build(),alertas:null===(a=e.ui)||void 0===a?void 0:a.alertas}}})(e,t);break;case"ATUALIZAR_ELEMENTO":a=((e,t)=>{var o,i,a,r,n;const s=Zm(e.articulacao,t.atual,!0);if(void 0===s||s.texto===t.atual.conteudo.texto)return e.ui.events=[],e;const l=Wm(s);s.texto=Zp(s)?Vh(null!==(a=null===(i=t.atual.conteudo)||void 0===i?void 0:i.texto)&&void 0!==a?a:""):null===(o=t.atual.conteudo)||void 0===o?void 0:o.texto,(null===(r=s.situacao)||void 0===r?void 0:r.descricaoSituacao)===Ud.DISPOSITIVO_ORIGINAL&&(s.situacao=new Hg(l));const c=Eg(s);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,Og(s,l)),present:c.build(),future:e.future,ui:{events:c.build(),alertas:null===(n=e.ui)||void 0===n?void 0:n.alertas}}})(e,t);break;case"ATUALIZAR_REFERENCIA_ELEMENTO":a=rb(e,t);break;case"ATUALIZAR_TEXTO_ELEMENTO":a=nb(e,t);break;case"AUTO_FIX":a=((e,t)=>{var o,i;const a=Zm(e.articulacao,t.atual,!0);if(void 0===a||!(e=>{var t,o;return(null!==(o=null===(t=e.mensagens)||void 0===t?void 0:t.filter((e=>e.fix)))&&void 0!==o?o:[]).length>0})(a))return e.ui.events=[],e;const r=new Dg;switch(null===(o=t.mensagem)||void 0===o?void 0:o.descricao){case $h.INFORMAR_NORMA:return sb(e,t);case $h.OMISSIS_ANTES:{const e=Tp(a),t=dv(a.pai,cu.omissis.tipo,e,e?void 0:0);t.situacao=new Uf,t.mensagens=Fm(t);const o=Wm(t,!0);a.mensagens=Fm(a);const i=Wm(a);let n;r.add(nf.ElementoIncluido,[o]),r.add(nf.ElementoValidado,[i]),n=e?Kd(e)&&Np(e)?mp(e):e:Jd(a)?a.pai.pai:a.pai,r.setReferencia(Wm(n));break}case $h.OMISSIS_SEQUENCIAIS:{const e=Wm(a);let t=Lp(a);t&&op(t)||(t=fh(a.pai));const o=a.pai;o.removeFilho(a),o.renumeraFilhos(),r.add(nf.ElementoRemovido,[e]),t&&r.add(nf.ElementoValidado,[Wm(t)]);break}default:return e.ui=[],e}return{articulacao:e.articulacao,modo:e.modo,past:Df(e,r.build()),present:r.build(),future:[],ui:{events:r.build(),alertas:null===(i=e.ui)||void 0===i?void 0:i.alertas}}})(e,t);break;case"ADICIONAR_ELEMENTO":a=Lg(e,t);break;case"ADICIONAR_ELEMENTOS_FROM_CLIPBOARD":a=((e,t)=>{var o,i,a,r;const n=Zm(e.articulacao,t.atual,!0);if(void 0===n)return e.ui.events=[],e;const s=null!==(o=t.infoTextoColado)&&void 0!==o?o:ry.newInstanceFromJsonix(null===(a=null===(i=t.novo)||void 0===i?void 0:i.conteudo)||void 0===a?void 0:a.texto,e.articulacao,t.atual,t.isColarSubstituindo,t.posicao);if(s.restricoes.length)return Pf(e,{tipo:Mh.ERROR,descricao:s.restricoes[0].mensagens[0]});const l=s.articulacaoColada,c=Zm(e.articulacao,s.infoElementos.referencia);Kd(l.filhos[0])&&!Zp(n)||Ty(l.filhos,c);const u=$y(e.articulacao,l,n,c,t.posicao,t.isColarSubstituindo,t.isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao,e.modo,s.infoElementos.tiposColados[0]);return{articulacao:e.articulacao,modo:e.modo,past:Df(e,u),present:u,future:[],ui:{events:u,alertas:null===(r=e.ui)||void 0===r?void 0:r.alertas}}})(e,t);break;case"AGRUPAR_ELEMENTO":a=Mg(e,t);break;case"TRANSFORMAR_TIPO_ELEMENTO":a=fb(e,t);break;case"ELEMENTO_SELECIONADO":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i){const o=Nv(e.revisoes,t.atual.uuid);if(o){const t={...o.elementoAntesRevisao,acoesPossiveis:[]};e.ui.events=[{stateType:nf.ElementoSelecionado,elementos:[t]}]}else e.ui.events=[];return e}i.mensagens=Fm(i);const a=Wm(i,!0),r=[{stateType:nf.ElementoSelecionado,elementos:[a]}];return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:r,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case"INFORMAR_DADOS_ASSISTENTE":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;i.mensagens=Fm(i);const a=Wm(i,!0),r=[{stateType:nf.InformarDadosAssistente,elementos:[a]}];return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:[],ui:{events:r,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case"INFORMAR_NORMA":a=sb(e,t);break;case"Mover para baixo":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;if(!Mf(i,Ju))return $f(i,e);if(e.emRevisao&&Gv(e,i)&&!t.isRejeitandoRevisao)return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível mover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão."});let a=Fp(i);if(!a&&Kd(i)&&(a=xh(i)),!a)return e;const r=ap(a),n=[...Jm(i,!1,!0)],s=of(i),l=i.pai,c=r?a:a.pai,u=r?0:c.indexOf(i)+1;vg(i),i.pai.removeFilho(i),c.addFilhoOnPosition(i,u),c.renumeraFilhos(),l!==c&&l.renumeraFilhos(),nh(i).forEach((e=>e.id=Hm(e)));const d=i.pai.filhos[i.pai.indexOf(i)-1];d&&nh(d).forEach((e=>e.id=Hm(e)));const p=r?a:mp(a),h=new Dg;return h.setReferencia(Wm(bg(p,i))),h.add(nf.ElementoIncluido,sh(i,[]).map((e=>(e.mensagens=Fm(e),Wm(e))))),h.add(nf.ElementoRemovido,n),h.add(nf.ElementoRenumerado,s.map((e=>Wm(e)))),h.add(nf.ElementoMarcado,[Wm(i),t.atual]),h.add(nf.ElementoSelecionado,[Wm(i)]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,h.build()),present:h.build(),future:[],ui:{events:h.build(),alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case"Mover para cima":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;if(!Mf(i,ed))return $f(i,e);if(e.emRevisao&&Gv(e,i)&&!t.isRejeitandoRevisao)return Pf(e,{tipo:Mh.ERROR,descricao:"Não é possível mover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão."});const a=Zp(i),r=Kd(i)?xp(i,(e=>(Kd(e)||ip(e))&&Zp(e)===a)):Dp(i);if(void 0===r||uh(r)||sp(r))return e;const n=Jm(i,!1,!0),s=vp(i).filter((e=>e!==i&&e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL));vg(i);const l=i.pai;let c=r.pai,u=c.indexOf(r);if(ip(r)){const e=xp(r,(e=>(Kd(e)||ip(e))&&Zp(e)===a));ip(e)?(c=e,u=0):(c=e.pai,u=c.indexOf(e)+1)}i.pai.removeFilho(i),c.addFilhoOnPosition(i,u),c.renumeraFilhos(),l!==c&&l.renumeraFilhos(),nh(i).forEach((e=>e.id=Hm(e)));const d=i.pai.filhos[i.pai.indexOf(i)+1];d&&nh(d).forEach((e=>e.id=Hm(e)));const p=xp(i,(e=>!Wd(e)&&!Jp(e))),h=new Dg;return h.add(nf.ElementoRemovido,n),h.setReferencia(Wm(bg(p,i))),h.add(nf.ElementoIncluido,sh(i,[]).map((e=>(e.mensagens=Fm(e),Wm(e))))),h.add(nf.ElementoRenumerado,s.map((e=>Wm(e)))),h.add(nf.ElementoMarcado,[Wm(i),t.atual]),h.add(nf.ElementoSelecionado,[Wm(i)]),{articulacao:e.articulacao,modo:e.modo,past:Df(e,h.build()),present:h.build(),future:[],ui:{events:h.build(),alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case"RENUMERAR_ELEMENTO":a=((e,t)=>{var o,i,a,r;const n=Zm(e.articulacao,t.atual,!0);if(void 0===n)return e.ui.events=[],e;if(!Mf(n,rd))return Pf(e,{tipo:Mh.INFO,descricao:"Nessa situação, não é possível renumerar o dispositivo"});if(Zp(n)&&(null===(i=Db(n,null===(o=t.novo)||void 0===o?void 0:o.numero))||void 0===i?void 0:i.startsWith("0")))return Pf(e,{tipo:Mh.INFO,descricao:"Não pode haver um dispositivo com esse rótulo em alteração de norma"});const s=Df(e,Og(n));try{const e=Db(n,null===(a=t.novo)||void 0===a?void 0:a.numero);n.createNumeroFromRotulo(e),n.id=Hm(n),"Artigo"===n.tipo&&(n.caput.id=Hm(n.caput))}catch(t){return Pf(e,{tipo:Mh.ERROR,descricao:"O rótulo informado é inválido",detalhe:t})}n.createRotulo(n);const l=Eg(n);return{articulacao:e.articulacao,modo:e.modo,past:s,present:l.build(),future:e.future,ui:{events:l.build(),alertas:null===(r=e.ui)||void 0===r?void 0:r.alertas}}})(e,t);break;case"RESTAURAR_ELEMENTO":a=Pb(e,t);break;case"SUPRIMIR_AGRUPADOR":a=((e,t)=>{var o,i;const a=Zm(e.articulacao,t.atual,!0);if(void 0===a||(null===(o=a.situacao)||void 0===o?void 0:o.descricaoSituacao)!==Ud.DISPOSITIVO_ORIGINAL)return e.ui.events=[],e;a.situacao=new Bm(Wm(a));const r=new Dg;r.add(nf.ElementoSuprimido,[Wm(a)]);const n=r.build();return{articulacao:e.articulacao,modo:e.modo,past:Df(e,n),present:n,future:[],ui:{events:n,alertas:null===(i=e.ui)||void 0===i?void 0:i.alertas}}})(e,t);break;case"SUPRIMIR_ELEMENTO":a=Mb(e,t);break;case od:a=sf(0,t);break;case"REDO":a=Nb(e);break;case"REMOVER_ELEMENTO":a=vb(e,t);break;case"REMOVER_ELEMENTO_SEM_TEXTO":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i||!Rb(e,i))return e.ui.events=[],e;const a=Tp(i),r=vb(e,t);return"Backspace"===t.key&&a&&(null===(o=r.ui)||void 0===o||o.events.push(qb(a))),r})(e,t);break;case"SHIFT_TAB":case"TAB":a=((e,t)=>{const o=Zm(e.articulacao,t.atual,!0);if(void 0===o)return e.ui.events=[],e;const i="TAB"===t.type?o.getAcaoPossivelTab(o):o.getAcaoPossivelShiftTab(o);if(!i)return e.ui.events=[],e;const a={type:"TRANSFORMAR_TIPO_ELEMENTO",subType:i.nomeAcao,atual:t.atual,novo:{tipo:i.tipo}};return fb(e,a)})(e,t);break;case"UNDO":a=$b(e);break;case"VALIDAR_ELEMENTO":a=((e,t)=>{var o;const i=Zm(e.articulacao,t.atual,!0);if(void 0===i)return e.ui.events=[],e;i.mensagens=Fm(i);const a=Wm(i,!0),r=[{stateType:nf.ElementoValidado,elementos:[a]}];return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:r,alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t);break;case Md:a=(e=>{var t;const o=[];sh(e.articulacao,[]).forEach((e=>{const t=Fm(e);(null==t?void 0:t.length)>0&&(e.mensagens=t,o.push(Wm(e)))}));const i=[{stateType:nf.ElementoValidado,elementos:o}];return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:i,alertas:null===(t=e.ui)||void 0===t?void 0:t.alertas}}})(e);break;case"ADICIONAR_ALERTA":a=((e,t)=>{var o,i,a,r;let n=(null===(o=e.ui)||void 0===o?void 0:o.alertas)||[];return n=(null===(a=null===(i=e.ui)||void 0===i?void 0:i.alertas)||void 0===a?void 0:a.filter((({id:e})=>e===t.alerta.id)).length)>0?[...n]:[...n,t.alerta],{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:[{stateType:nf.AtualizacaoAlertas}],message:null===(r=e.ui)||void 0===r?void 0:r.mensagem,alertas:n}}})(e,t);break;case"REMOVER_ALERTA":a=((e,t)=>{var o,i,a;const r=null===(i=null===(o=e.ui)||void 0===o?void 0:o.alertas)||void 0===i?void 0:i.filter((({id:e})=>e!==t.id));return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:[{stateType:nf.AtualizacaoAlertas}],message:null===(a=e.ui)||void 0===a?void 0:a.mensagem,alertas:r}}})(e,t);break;case"LIMPAR_ALERTAS":a=(e=>{var t;return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:[{stateType:nf.AtualizacaoAlertas}],message:null===(t=e.ui)||void 0===t?void 0:t.mensagem,alertas:[]}}})(e);break;case"ATIVAR_DESATIVAR_REVISAO":a=((e,t)=>{var o;const i=!e.emRevisao;return!i&&t.quantidade>0?{...Pf(e,{tipo:Mh.INFO,descricao:"É necessário resolver todas as marcas de revisão"+lx(e)+"para desativar o modo de controle de alterações"}),emRevisao:!0}:{...e,emRevisao:i,ui:{events:[{stateType:i?nf.RevisaoAtivada:nf.RevisaoDesativada}],alertas:null===(o=e.ui)||void 0===o?void 0:o.alertas}}})(e,t),s=a.emRevisao,c=(null===(o=a.past)||void 0===o?void 0:o.length)||0;break;case fx:a=((e,t)=>{var o,i;return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:[{stateType:nf.AtualizaUsuario}],message:null===(o=e.ui)||void 0===o?void 0:o.mensagem,alertas:null===(i=e.ui)||void 0===i?void 0:i.alertas},usuario:t.usuario}})(e,t),r=a.usuario;break;case wf:a=((e,t)=>t.revisao||t.elemento?jx(e,t):$x(e,e.revisoes))(e,t);break;case Ef:a=((e,t)=>t.revisao||t.elemento?Bx(e,t):Fx(e,e.revisoes))(e,t);break;case Jx:a=(e=>{var t;return{articulacao:e.articulacao,modo:e.modo,past:e.past,present:e.present,future:e.future,ui:{events:[{stateType:nf.AtualizacaoAlertas}],message:null===(t=e.ui)||void 0===t?void 0:t.mensagem,alertas:e.alertas},revisoes:[],emRevisao:!1,usuario:e.usuario}})(e);break;default:n=void 0,a=e}return[Jx].includes(n)&&(l=[]),[od,zu,wf,Ef].includes(n)||eA(n,a)||tA(n,a)||(a.revisoes=l,a.numEventosPassadosAntesDaRevisao=s?c:(null===(i=a.past)||void 0===i?void 0:i.length)||0),a.emRevisao=s,a.usuario=r,a=((e,t)=>{var o,i,a,r,n;const s=null===(o=e.ui)||void 0===o?void 0:o.events.map((e=>e.elementos)).flat().length;if([od,fx,Md].includes(t)||!e.emRevisao||!t||!s)return e;if(t===zu)return pg(e),e;if("UNDO"===t&&((null===(i=e.past)||void 0===i?void 0:i.length)||0)<e.numEventosPassadosAntesDaRevisao)return pg(e),e;if("REDO"===t&&((null===(a=e.past)||void 0===a?void 0:a.length)||0)<=e.numEventosPassadosAntesDaRevisao)return pg(e),e;if((null===(n=null===(r=e.ui)||void 0===r?void 0:r.message)||void 0===n?void 0:n.tipo)===Mh.ERROR)return e;let l=[];return"UNDO"===t&&gx(e)||bx(e)||(l.push(...yx(e,t)),l.push(...xx(e,t)),l.push(...Ox(e,t)),Tx(e)?l.push(...wx(e,t)):(l.push(..._x(e,t)),l.push(...Ex(e,t)))),l=qv(e,l),Dx(e)&&(Px(e),Lx(e)),e.revisoes.push(...l),pg(e),Rx(e),e})(a,n),(e=>{var t;return null===(t=e.ui)||void 0===t||t.events.forEach((e=>{var t;return null===(t=e.elementos)||void 0===t?void 0:t.filter(Boolean).forEach((e=>{var t,o,i;(e.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO||e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.revisao&&"Texto do dispositivo foi alterado"===e.revisao.descricao||e.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL&&e.revisao&&(null===(o=null===(t=e.revisao.elementoAntesRevisao)||void 0===t?void 0:t.conteudo)||void 0===o?void 0:o.texto)!==(null===(i=e.conteudo)||void 0===i?void 0:i.texto))&&!e.acoesPossiveis.includes(Sf)&&e.acoesPossiveis.push(Sf)}))})),e})(a)}}),iA=function e(t,o,i){var a;if("function"==typeof o&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error("production"===process.env.NODE_ENV?Kc(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof o&&void 0===i&&(i=o,o=void 0),void 0!==i){if("function"!=typeof i)throw new Error("production"===process.env.NODE_ENV?Kc(1):"Expected the enhancer to be a function. Instead, received: '"+eu(i)+"'");return i(e)(t,o)}if("function"!=typeof t)throw new Error("production"===process.env.NODE_ENV?Kc(2):"Expected the root reducer to be a function. Instead, received: '"+eu(t)+"'");var r=t,n=o,s=[],l=s,c=!1;function u(){l===s&&(l=s.slice())}function d(){if(c)throw new Error("production"===process.env.NODE_ENV?Kc(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return n}function p(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?Kc(4):"Expected the listener to be a function. Instead, received: '"+eu(e)+"'");if(c)throw new Error("production"===process.env.NODE_ENV?Kc(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var t=!0;return u(),l.push(e),function(){if(t){if(c)throw new Error("production"===process.env.NODE_ENV?Kc(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");t=!1,u();var o=l.indexOf(e);l.splice(o,1),s=null}}}function h(e){if(!Jc(e))throw new Error("production"===process.env.NODE_ENV?Kc(7):"Actions must be plain objects. Instead, the actual type was: '"+eu(e)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(void 0===e.type)throw new Error("production"===process.env.NODE_ENV?Kc(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(c)throw new Error("production"===process.env.NODE_ENV?Kc(9):"Reducers may not dispatch actions.");try{c=!0,n=r(n,e)}finally{c=!1}for(var t=s=l,o=0;o<t.length;o++){(0,t[o])()}return e}function m(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?Kc(10):"Expected the nextReducer to be a function. Instead, received: '"+eu(e));r=e,h({type:Yc.REPLACE})}function f(){var e,t=p;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error("production"===process.env.NODE_ENV?Kc(11):"Expected the observer to be an object. Instead, received: '"+eu(e)+"'");function o(){e.next&&e.next(d())}return o(),{unsubscribe:t(o)}}})[Wc]=function(){return this},e}return h({type:Yc.INIT}),(a={dispatch:h,subscribe:p,getState:d,replaceReducer:m})[Wc]=f,a}(oA,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());let aA=class extends(Gc(iA)(Jl)){constructor(){super(),this.elementos=[],this.lexmlEtaConfig=new Qc,this.tabIndex=-1}createRenderRoot(){return this}render(){return Rl`
      <style>
        lexml-eta-editor {
          display: block;
          height: 100%;
        }

        lexml-eta-editor:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>
      <lexml-eta-editor .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-editor>
    `}};Mc([zc({type:Array})],aA.prototype,"elementos",void 0),Mc([zc({type:Object})],aA.prototype,"lexmlEtaConfig",void 0),aA=Mc([$c("lexml-eta-articulacao")],aA);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const rA=2;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class nA extends class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}{constructor(e){if(super(e),this.it=Pl,e.type!==rA)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===Pl||null==e)return this.ft=void 0,this.it=e;if(e===Dl)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this.ft;this.it=e;const t=[e];return t.raw=t,this.ft={_$litType$:this.constructor.resultType,strings:t,values:[]}}}nA.directiveName="unsafeHTML",nA.resultType=1;const sA=(e=>(...t)=>({_$litDirective$:e,values:t}))(nA);let lA=class extends(Gc(iA)(Jl)){constructor(){super(...arguments),this.alertas=[]}update(e){super.update(e)}stateChanged(e){var t;this.alertas=(null===(t=e.elementoReducer.ui)||void 0===t?void 0:t.alertas)||[]}buildTemplateComando(e){const t=null==e?void 0:e.reduce(((e,t)=>e+`<p> ${t.cabecalho} </p>`),"");return Rl`${t}`}buildTemplateCitacao(e){return e.replaceAll("<Rotulo>","<b>").replaceAll("</Rotulo>","</b> ").replaceAll("<Alteracao>",'<div class="alteracao">').replaceAll("</Alteracao>","</div> ").replaceAll("<Omissis/>",'<span class="texto__omissis">...............................................</span>')}render(){var e,t;const o=null===(e=this.emenda)||void 0===e?void 0:e.cabecalhoComum,i=null===(t=this.emenda)||void 0===t?void 0:t.comandos;return Rl`
      <style>
        :host {
          --lexml-emenda-comando-height: 100%;
          --lexml-emenda-comando-overflow: hidden;
          --lexml-emenda-comando-border: 1px solid #ccc;
        }
        .lexml-emenda-comando {
          display: block;
          height: var(--lexml-emenda-comando-height);
          overflow: var(--lexml-emenda-comando-overflow);
          overflow-y: auto;
          padding: 0px 10px;
          font-size: 18px;
          font-family: 'Times New Roman', Times, serif;
          text-align: justify;
        }
        .lexml-emenda-comando:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }

        .lexml-emenda-cabecalhoComando {
          display: block;
          margin-top: 1em;
          text-indent: 3em;
        }

        .lexml-emenda-citacaoComando {
          display: block;
          margin-top: 1em;
        }

        .lexml-emenda-complementoComando {
          margin-top: 1em;
        }

        .lexml-emenda-citacaoComando p {
          /* text-align: justify; */
          text-indent: 3em;
          margin: 0;
        }

        .lexml-emenda-citacaoComando p.ementa {
          text-indent: 0;
          margin-left: 30%;
        }

        .lexml-emenda-citacaoComando p.agrupador {
          text-indent: 0;
          text-align: center;
        }

        .lexml-emenda-citacaoComando p.secao,
        .lexml-emenda-citacaoComando p.subsecao {
          font-weight: bold;
        }

        .lexml-emenda-citacaoComando div.alteracao {
          margin-left: 4em;
        }

        .lexml-emenda-citacaoComando div.alteracao p {
          text-indent: 2em;
        }
        .mensagem {
          font-size: 0.8em;
          font-weight: normal;
          text-align: left;
          border: 1px solid;
          padding: 4px 10px;
          margin: 10px 0;
          display: inline-block;
          border-radius: 2px;
          font-family: var(--sl-font-sans);
        }
        .mensagem--warning {
          color: #856404;
          background-color: #fff3cd;
          border-color: #ffeeba;
        }
        .mensagem--danger {
          color: #721c24;
          background-color: #f8d7da;
          border-color: #f5c6cb;
        }
      </style>

      <div class="lexml-emenda-comando">
        ${(this.alertas||[]).filter((e=>e.exibirComandoEmenda)).map((e=>Rl`<div class="lexml-emenda-complementoComando mensagem mensagem--danger">${e.mensagem}</div>`))}
        ${o?sA(`<p class="lexml-emenda-cabecalhoComando">${o}</p>`):""}
        ${null==i?void 0:i.map((e=>sA('<div class="lexml-emenda-cabecalhoComando">'+(e.rotulo?`<strong>${e.rotulo}</strong> `:"")+e.cabecalho+'</div><div class="lexml-emenda-citacaoComando">'+this.buildTemplateCitacao(e.citacao)+"</div>"+(e.complemento?'<div class="lexml-emenda-complementoComando mensagem mensagem--warning">'+e.complemento+"</div>":""))))}
      </div>
    `}};Mc([zc({type:Object})],lA.prototype,"emenda",void 0),Mc([zc({type:Array})],lA.prototype,"alertas",void 0),lA=Mc([$c("lexml-emenda-comando")],lA);class cA{constructor(e,t){this.callback=e,this.canceled=t}isCanceled(){var e;return null!==(e=this.canceled)&&void 0!==e&&e}cancel(){this.canceled=!0}}class uA{constructor(){this.subscriptions=[]}subscribe(e){const t=new cA(e);return this.subscriptions.push(t),t}notify(e){this.subscriptions.forEach((t=>{t.isCanceled()||setTimeout((()=>{t.callback(e)}),1)}))}clean(){this.subscriptions=[]}}const dA="primary",pA=new uA;class hA{constructor(){this.mensagens=[],this.nomeDispositivoSingular="",this.nomeDispositivoPlural="",this.isPrimeiroDialogoTipoColagem=!0,this.exibeDialogAviso=!0}}const mA=e=>{if(e.exibeDialogAviso){e.idDialog="slDialogoAviso",e.labelDialog="Importante!",e.tipoRodape="RODAPE_FECHAR",e.variante=dA;const t=["Por favor, verifique se o texto e a estrutura de dispositivos colados está de acordo com o esperado. ","Podem ser necessários ajustes."];e.mensagens=t,gA(e)}},fA=(e,t,o,i,a=!0)=>{const r=new hA;r.quill=e,r.rootStore=t,r.infoTextoColado=o,r.range=i,r.nomeDispositivoSingular=$A(MA.SINGULAR,r.infoTextoColado),r.nomeDispositivoPlural=$A(MA.PLURAL,r.infoTextoColado),r.isPrimeiroDialogoTipoColagem=a,o.infoElementos.novos.length>1||o.infoElementos.existentes.length>1?(vA(r),r.isPrimeiroDialogoTipoColagem=!1,mA(r)):((e=>{e.mensagens=["Selecione abaixo o formato com o qual gostaria de colar seu texto."],e.idDialog="slDialogoTipoColagem",e.labelDialog="Antes de prosseguir",e.tipoRodape="RODAPE_CONFIRMAR",e.variante=dA,gA(e)})(r),r.isPrimeiroDialogoTipoColagem=!1)},vA=e=>{if(e.infoTextoColado.restricoes.length){const t=e.infoTextoColado.restricoes[0];e.labelDialog=t.titulo||"Operação não permitida",t.isPermitidoColarAdicionando?(e=>{const t=[...e.infoTextoColado.restricoes[0].mensagens,"Você deseja adicionar "+zA(e.nomeDispositivoSingular)+FA(e.nomeDispositivoSingular)+e.nomeDispositivoPlural+" após a posição atual?"];e.mensagens=t,e.idDialog="slDialogoAdicionarAposAtual",e.tipoRodape="RODAPE_CONFIRMAR",e.variante=dA,gA(e)})(e):(e=>{e.mensagens=e.infoTextoColado.restricoes[0].mensagens,e.idDialog="slDialogoNaoPermitido",e.labelDialog="Operação não permitida",e.tipoRodape="RODAPE_FECHAR",e.variante="danger",e.exibeDialogAviso=!1,gA(e)})(e),e.exibeDialogAviso=!1}else 0===e.infoTextoColado.restricoes.length&&0===e.infoTextoColado.infoElementos.existentes.length?OA(e,!1):(e.exibeDialogAviso=!1,(e=>{e.idDialog="slDialogoModificarExistenteAdicionarNovo",e.labelDialog="Atenção, dispositivo já existe no texto",e.tipoRodape="RODAPE_CONFIRMAR",e.variante=dA;const t=["Você gostaria de modificar "+FA(e.nomeDispositivoSingular)+e.nomeDispositivoPlural+" existentes ou adicionar novos após o atual?"];e.mensagens=t,gA(e)})(e))},gA=e=>{Array.from(document.querySelectorAll(".dialogo-colagem")).forEach((e=>document.body.removeChild(e)));const t=document.createElement("sl-dialog");t.classList.add("dialogo-colagem"),t.id=e.idDialog,document.body.appendChild(t),t.label=e.labelDialog;const o=document.createRange().createContextualFragment(`\n    <style>\n      .rodape-confirmar {\n        float: right;\n      }\n      .tiposColagem {\n        font-weight: normal;\n      }\n      sl-dialog::part(title) {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n      }\n    </style>\n      <div class="tiposColagem">\n        ${kA(e.mensagens)}\n        <br><br>\n        ${CA(e)}\n        <div class="rodape-confirmar">\n        ${RA(e)}\n        <div/>\n      </div>\n  `);AA(o,t,e),wA(o),e.quill.blur(),t.appendChild(o),t.show(),setTimeout((()=>yA(e)),0),"slDialogoTipoColagem"===e.idDialog&&setTimeout((()=>bA()),0)},bA=()=>{document.getElementById("btnConfirmar").focus()},yA=e=>{const t=document.querySelector("#"+e.idDialog).shadowRoot.querySelector("#title");null==t||t.insertAdjacentHTML("afterbegin",xA(e))},xA=e=>"danger"===e.variante?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40041 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987\n10.8231 16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627 13.2\n16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736 13.8235\n12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235 10.8\n13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6 12.6235\n6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z" fill="#CA3A31"/>\n</svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none">\n<path d="M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40042 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0V0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987 10.8231\n16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627\n13.2 16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736\n13.8235 12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235\n10.8 13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6\n12.6235 6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z" fill="#3982C1"/>\n</svg>',AA=(e,t,o)=>{const i=e.querySelectorAll("sl-button");if(1===i.length){i[0].onclick=()=>{IA(t,o)}}else if(i.length>1){const e=i[0];i[1].onclick=()=>{IA(t,o)},e.onclick=()=>{EA(o,t)}}},wA=e=>{const t=e.querySelectorAll("sl-radio");if(t.length>0){const e=t[0],o=t[1];e.onclick=()=>{LA()},o.onclick=()=>{LA()}}},_A=e=>document.getElementById(e).querySelector("sl-radio[checked]").value,EA=(e,t)=>{const{idDialog:o}=e;let i="",a=!1;"slDialogoAdicionarAposAtual"===o?i="1"===_A("rdgSimNao")?"1":"":"slDialogoTipoColagem"===o?(i=_A("rdgTipoColagem"),"1"===i?(SA(e),i=""):"2"===i&&e.isPrimeiroDialogoTipoColagem?(e.isPrimeiroDialogoTipoColagem=!1,i="",fA(e.quill,e.rootStore,e.infoTextoColado,e.range,!1)):"2"!==i||e.isPrimeiroDialogoTipoColagem||(vA(e),i="")):"slDialogoModificarExistenteAdicionarNovo"===o&&(i=_A("rdgModificarExistenteAdicionarNovo"),a="1"===i),i&&OA(e,a),IA(t,e),mA(e)},OA=(e,t)=>{const{infoTextoColado:o,rootStore:i}=e;i.dispatch(qu.execute(o.infoElementos.atual,o.jsonix,void 0,o.infoElementos.atual.dispositivoAlteracao,t,"depois"))},SA=e=>{const{quill:t,range:o,infoTextoColado:i}=e;t.clipboard.dangerouslyPasteHTML(o.index,i.textoColadoOriginal),pA.notify("clipboard")},IA=(e,t)=>{null==e||e.hide(),document.body.contains(e)&&document.body.removeChild(e),setTimeout((()=>t.quill.focus()),0)},kA=e=>e.join("<br><br>"),CA=e=>"slDialogoTipoColagem"===e.idDialog?NA():"slDialogoModificarExistenteAdicionarNovo"===e.idDialog?TA(e):"slDialogoModificarDispositivosExistentes"===e.idDialog||"slDialogoAdicionarAposAtual"===e.idDialog?qA():"",NA=()=>'\n  <sl-radio-group id="rdgTipoColagem">\n    <sl-radio class="tipo-colagem" id="colarSimples" value="1">Colar como texto simples</sl-radio>\n    <sl-radio class="tipo-colagem" id="colarEstruturado" value="2" checked>Colar como dispositivo</sl-radio>\n  </sl-radio-group>\n  ',TA=e=>'\n  <sl-radio-group id="rdgModificarExistenteAdicionarNovo">\n    <sl-radio id="modificarExistente" value="1">Modificar '+e.nomeDispositivoPlural+' existentes</sl-radio>\n    <sl-radio id="adicionarNovo" value="2">Adicionar nov'+FA(e.nomeDispositivoSingular)+e.nomeDispositivoPlural+"</sl-radio>\n  </sl-radio-group>\n  ",qA=()=>'\n  <sl-radio-group id="rdgSimNao">\n    <sl-radio id="sim" value="1">Sim</sl-radio>\n    <sl-radio id="nao" value="2">Não</sl-radio>\n  </sl-radio-group>\n  ',RA=e=>"RODAPE_CONFIRMAR"===e.tipoRodape?PA(e):DA(),DA=()=>'\n    <div class="rodape-confirmar">\n      <br/>\n      <sl-button slot="footer" variant="primary">Fechar</sl-button>\n    </div>\n  ',PA=e=>`\n    <div class="rodape-confirmar" id="rodapeConfirmar">\n      <br/>\n      <sl-button id="btnConfirmar" slot="footer" variant="primary" ${"slDialogoTipoColagem"===e.idDialog?"":"disabled"}>Confirmar</sl-button>\n      <sl-button slot="footer" variant="default">Fechar</sl-button>\n    </div>\n  `,LA=()=>{document.getElementById("btnConfirmar").disabled=!1,bA()};var MA;!function(e){e[e.PLURAL=0]="PLURAL",e[e.SINGULAR=1]="SINGULAR"}(MA||(MA={}));const $A=(e,t)=>{if(t.infoElementos.tiposColados.includes("DispositivoAgrupadorGenerico"))return"";const o=t.infoElementos.tiposColados[0].toLowerCase();return e===MA.PLURAL?cu[o].descricaoPlural.toLowerCase():cu[o].descricao.toLowerCase()},jA=e=>["parte","seção","subseção","alínea"].includes(e),zA=e=>jA(e)?"todas ":"todos ",FA=e=>jA(e)?"as ":"os ";class BA extends class{}{constructor(){super(...arguments),this.nivel=0,this.rotulo="",this.agrupador=!1,this.editavel=!0,this.sendoEditado=!1,this.index=0}}const UA=Quill.import("blots/block");class VA extends UA{constructor(e){super(e)}get instanceBlotName(){return VA.blotName}get linha(){return this.parent.parent.parent}get tamanho(){return this.length()-1}get tagName(){return this.domNode.tagName}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML.replace("&nbsp;",""):""}set html(e){this.domNode.innerHTML=e}}var HA;VA.blotName="EtaBlot",function(e){e[e.Esquerda=0]="Esquerda",e[e.Direita=1]="Direita"}(HA||(HA={}));class GA extends VA{constructor(){super(GA.create())}get instanceBlotName(){return GA.blotName}static create(){const e=super.create();return e.setAttribute("contenteditable","false"),e.setAttribute("class",GA.className),e}}GA.blotName="EtaBlotMenu",GA.tagName="sl-dropdown",GA.className="lx-eta-dropdown";class QA extends VA{constructor(){super(QA.create())}get instanceBlotName(){return QA.blotName}static create(){const e=super.create();return e.setAttribute("variant","text"),e.setAttribute("size","small"),e.setAttribute("slot","trigger"),e.setAttribute("contenteditable","false"),e.setAttribute("class",QA.className),e.innerHTML="&vellip;",e}}QA.blotName="EtaBlotMenuBotao",QA.tagName="sl-button",QA.className="lx-eta-dropbtn";class KA extends VA{constructor(e){super(KA.create(e))}get instanceBlotName(){return KA.blotName}static create(e){const t=super.create(),o=e===HA.Esquerda?"":" lx-eta-dropdown-content-right";return t.setAttribute("contenteditable","false"),t.setAttribute("class",KA.className+o),t}}KA.blotName="EtaBlotMenuConteudo",KA.tagName="sl-menu",KA.className="lx-eta-dropdown-content";class WA extends VA{constructor(e,t){super(WA.create(e,t))}get instanceBlotName(){return WA.blotName}static create(e,t){var o;const i=super.create();return i.setAttribute("contenteditable","false"),i.setAttribute("class",WA.className),i.innerHTML=(null!==(o=e.descricao)&&void 0!==o?o:"")+(e.hotkey?`<span slot="suffix"> ${e.hotkey} </span>`:""),i.addEventListener("mousedown",(()=>{var o;if(e.descricao===Yu.descricao||e.descricao===Gu.descricao){const e=null===(o=document.getSelection())||void 0===o?void 0:o.focusOffset;localStorage.setItem("indexCursor",JSON.stringify(e))}t(e)})),i}}WA.blotName="EtaBlotMenuItem",WA.tagName="sl-menu-item",WA.className="lx-eta-dropdown-content-item";class XA extends VA{constructor(e){super(XA.create(e))}get instanceBlotName(){return XA.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",XA.getClasseCSS(e)),t.setAttribute("data-rotulo",e.rotulo),e.abreAspas&&t.setAttribute("abre-aspas","true"),YA(e)&&t.setAttribute("pode-informar-numeracao","true"),e.tipo&&t.setAttribute("tipo-dispositivo",e.tipo),t.innerHTML=XA.montarRotulo(e),e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.dispositivoAlteracao&&(t.title=e.existeNaNormaAlterada?"Dispositivo existente na norma alterada":"Dispositivo a ser adicionado à norma"),t.onclick=JA(t,e),t}get rotulo(){return this.domNode.getAttribute("data-rotulo")}format(e,t,o){e===XA.blotName?(this.domNode.setAttribute("data-rotulo",(o?"“":"")+t),o&&this.domNode.setAttribute("abre-aspas","true"),this.domNode.innerHTML=t):e===XA.formatoStyle?this.domNode.setAttribute("style",XA.criarAtributoStyle(t)):super.format(e,t)}static criarAtributoStyle(e){let t="Articulacao"===e.tipo?"color: #373634; font-weight: 600; line-height: 0.42;":"color: #373634; font-weight: 600; line-height: 1.42;";return t=e.agrupador?`${t} display: block; font-size: 1rem; text-align: center;`:`${t} float: left; margin-right: 10px;`,t}static getClasseCSS(e){var t,o,i;const a={[Ud.DISPOSITIVO_ADICIONADO]:"dispositivo--adicionado",[Ud.DISPOSITIVO_MODIFICADO]:"dispositivo--modificado",[Ud.DISPOSITIVO_SUPRIMIDO]:"dispositivo--suprimido"},r=e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO;return"texto__rotulo"+(e.agrupador?" texto__rotulo--agrupador":" texto__rotulo--padrao")+(r&&e.dispositivoAlteracao?" rotulo":"")+" texto__rotulo--"+(null===(t=e.tipo)||void 0===t?void 0:t.toLowerCase())+" "+(null!==(i=a[null!==(o=e.descricaoSituacao)&&void 0!==o?o:""])&&void 0!==i?i:"")}setEstilo(e){this.domNode.setAttribute("class",`${XA.getClasseCSS(e)}`)}atualizarAtributos(e){this.setEstilo(e),this.domNode.setAttribute("data-rotulo",e.rotulo),e.abreAspas?this.domNode.setAttribute("abre-aspas","true"):this.domNode.removeAttribute("abre-aspas"),YA(e)?this.domNode.setAttribute("pode-informar-numeracao","true"):this.domNode.removeAttribute("pode-informar-numeracao"),this.domNode.onclick=JA(this.domNode,e),this.domNode.innerHTML=XA.montarRotulo(e)}static montarRotulo(e){const t=cu[e.tipo.toLowerCase()].descricao;return e.revisao&&XA.isRevisaoPrincipalDeExclusaoDeDispositivo(e)?null!=t?t:"":e.rotulo}static isRevisaoPrincipalDeExclusaoDeDispositivo(e){const t=e.revisao;return Qv(t)&&Yv(t)}}XA.blotName="EtaBlotRotulo",XA.tagName="LABEL",XA.formatoStyle="STYLE";const YA=e=>{var t,o,i;return!(e.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||!e.dispositivoAlteracao||!e.abreAspas&&"Artigo"!==e.tipo&&null!==(i=null===(o=null===(t=e.hierarquia)||void 0===t?void 0:t.pai)||void 0===o?void 0:o.existeNaNormaAlterada)&&void 0!==i&&!i)},JA=(e,t)=>YA(t)?()=>e.dispatchEvent(new CustomEvent("rotulo",{bubbles:!0,cancelable:!0,detail:{elemento:t}})):()=>!1;class ZA extends VA{constructor(e){super(ZA.create(e)),this.elemento=e}get instanceBlotName(){return ZA.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",ZA.className),t.innerHTML=ZA.montarHTML(e),t}static formats(){return!0}atualizarAtributos(e){this.elemento=e,this.domNode.innerHTML=ZA.montarHTML(e)}static montarHTML(e){return e.abreAspas?"“":""}}var ew,tw;ZA.blotName="EtaBlotAbreAspas",ZA.tagName="abre-aspas",ZA.className="abre-aspas",function(e){e[e.Esquerda=0]="Esquerda",e[e.Direita=1]="Direita"}(ew||(ew={}));class ow extends VA{constructor(e){super(ow.create(e))}get instanceBlotName(){return ow.blotName}static create(e){const t=super.create();return t.innerHTML=" ",t.setAttribute("contenteditable","false"),t.setAttribute("class",ow.className),t.setAttribute("title","Recusar revisão"),ow.atualizarAtributos(e,t),t}atualizarElemento(e){ow.atualizarAtributos(e,this.domNode)}static atualizarAtributos(e,t){t.setAttribute("id","buttonRevisaoRecusar"+e.uuid),t.onclick=()=>t.dispatchEvent(new CustomEvent("rejeitar-revisao",{bubbles:!0,cancelable:!0,detail:{elemento:e}}))}}ow.blotName="EtaBlotRevisaoRecusar",ow.className="blot__revisao_recusar",ow.tagName="button",function(e){e[e.Esquerda=0]="Esquerda",e[e.Direita=1]="Direita"}(tw||(tw={}));class iw extends VA{constructor(e){super(iw.create(e))}get instanceBlotName(){return iw.blotName}static create(e){const t=super.create();return t.innerHTML=" ",t.setAttribute("contenteditable","false"),t.setAttribute("class",iw.className),t.setAttribute("title","Aceitar revisão"),iw.atualizarAtributos(e,t),t}atualizarElemento(e){iw.atualizarAtributos(e,this.domNode)}static atualizarAtributos(e,t){t.setAttribute("id","buttonRevisaoAceitar"+e.uuid),t.onclick=()=>t.dispatchEvent(new CustomEvent("aceitar-revisao",{bubbles:!0,cancelable:!0,detail:{elemento:e}}))}}iw.blotName="EtaBlotRevisaoAceitar",iw.className="blot__revisao_aceitar",iw.tagName="button";const aw=Quill.import("blots/container");class rw extends aw{constructor(e){super(e)}get firstBlot(){return this.children.head}findBlot(e){if(this.firstBlot)return this.findBlotByBlotName(this.firstBlot,e)}findBlotByBlotName(e,t){if((null==e?void 0:e.instanceBlotName)===t)return e;if("object"==typeof e&&e)for(const o in e)if(["children","head","next"].includes(o)){const i=this.findBlotByBlotName(e[o],t);if((null==i?void 0:i.instanceBlotName)===t)return i}}findBlotByClass(e,t){if(e instanceof t)return e;if("object"==typeof e&&e)for(const o in e)if(["children","head","next"].includes(o)){const i=this.findBlotByClass(e[o],t);if(i instanceof t)return i}}}var nw;!function(e){e[e.Esquerda=0]="Esquerda",e[e.Direita=1]="Direita"}(nw||(nw={}));class sw extends VA{constructor(e){super(sw.create(e))}get instanceBlotName(){return sw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",sw.className),sw.atualizarAtributos(e,t),t}atualizarElemento(e){sw.atualizarAtributos(e,this.domNode)}static atualizarAtributos(e,t){t.setAttribute("id","buttonInfoRevisao"+e.uuid),t.setAttribute("title",sw.montarMensagem(e)),t.innerHTML=e.revisao.usuario.sigla||((e="")=>{var t;return(null===(t=e.match(/\b[A-Z][a-z]*\b/g))||void 0===t?void 0:t.map((e=>e.charAt(0))).filter(((e,t,o)=>0===t||t===o.length-1)).join(""))||""})(e.revisao.usuario.nome).charAt(0)||"R"}static montarMensagem(e){const t=e.revisao;return"Ação: "+t.descricao+" | Usuário: "+t.usuario.nome+" | Data/Hora: "+t.dataHora}}sw.blotName="EtaBlotRevisao",sw.className="blot__revisao",sw.tagName="button";class lw extends rw{constructor(e){super(lw.create(e))}get instanceBlotName(){return lw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",lw.className),lw.atualizarAtributos(e,t),t}atualizarElemento(e){lw.atualizarAtributos(e,this.domNode),this.atualizarBlots(e)}atualizarBlots(e){var t,o,i;null===(t=this.blotBotaoAceitarRevisao)||void 0===t||t.atualizarElemento(e),null===(o=this.blotBotaoRejeitarRevisao)||void 0===o||o.atualizarElemento(e),null===(i=this.blotInfoRevisao)||void 0===i||i.atualizarElemento(e)}static atualizarAtributos(e,t){t.setAttribute("id",lw.className+e.uuid)}get blotBotaoAceitarRevisao(){return this.findBlot(iw.blotName)}get blotBotaoRejeitarRevisao(){return this.findBlot(ow.blotName)}get blotInfoRevisao(){return this.findBlot(sw.blotName)}}lw.blotName="EtaContainerRevisao",lw.tagName="DIV",lw.className="container__revisao";class cw extends VA{constructor(){super(cw.create())}get instanceBlotName(){return cw.blotName}static create(){return super.create()}}cw.blotName="EtaBlotQuebraLinha",cw.tagName="BR";class uw extends VA{constructor(e){super(uw.create(e))}get instanceBlotName(){return uw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.classList.add(uw.className),uw._atualizarAtributos(e,t),t}static formats(){return!0}atualizarElemento(e){this.atualizarAtributos(e)}atualizarAtributos(e){uw._atualizarAtributos(e,this.domNode)}static _atualizarAtributos(e,t){t.innerHTML=uw.getDescricaoTipoOmissis(e),"Omissis"===e.tipo?t.classList.add("tipo-omissis"):t.classList.remove("tipo-omissis")}static getDescricaoTipoOmissis(e){switch(e.tipoOmissis){case"inciso-caput":case"inciso-paragrafo":return" Incisos omitidos ";case"paragrafo":return" Parágrafos omitidos ";case"alinea":return" Alíneas omitidas ";case"item":return" Itens omitidos ";default:return""}}}uw.blotName="EtaBlotTipoOmissis",uw.tagName="blot-tipo-omissis",uw.className="blot-tipo-omissis";class dw extends VA{constructor(e){super(dw.create(e))}get instanceBlotName(){return dw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("id","blot-existencia"+e.uuid),t.classList.add(dw.className),dw._atualizarAtributos(e,t),t}static formats(){return!0}atualizarElemento(e){this.atualizarAtributos(e)}atualizarAtributos(e){dw._atualizarAtributos(e,this.domNode)}static _atualizarAtributos(e,t){t.innerHTML=dw.montarHTML(e),t.onclick=pw(t,e),rf(e)?(t.classList.add("existencia"),t.title=e.existeNaNormaAlterada?"Dispositivo existente na norma alterada":"Dispositivo a ser adicionado à norma"):t.classList.remove("existencia")}static montarHTML(e){return rf(e)?e.existeNaNormaAlterada?"Existente":"Novo":""}}dw.blotName="EtaBlotExistencia",dw.tagName="blot-existencia",dw.className="blot-existencia";const pw=(e,t)=>rf(t)?()=>e.dispatchEvent(new CustomEvent("toggle-existencia",{bubbles:!0,cancelable:!0,detail:{elemento:t}})):()=>!1;class hw extends VA{constructor(e){super(hw.create(e)),this.elemento=e}get instanceBlotName(){return hw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",hw.className),t.innerHTML=hw.montarHTML(e),t}static formats(){return!0}atualizarAtributos(e){this.elemento=e,this.domNode.innerHTML=hw.montarHTML(e)}static montarHTML(e){return e.fechaAspas?"” ":" "}}hw.blotName="EtaBlotFechaAspas",hw.tagName="fecha-aspas",hw.className="fecha-aspas";class mw extends VA{constructor(e){super(mw.create(e))}get instanceBlotName(){return mw.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",mw.className),mw._atualizarAtributos(e,t),t}static formats(){return!0}atualizarAtributos(e){mw._atualizarAtributos(e,this.domNode)}static _atualizarAtributos(e,t){t.innerHTML=mw.montarHTML(e),t.onclick=fw(t,e),e.notaAlteracao?t.setAttribute("nota-alteracao",e.notaAlteracao||""):t.removeAttribute("nota-alteracao"),e.podeEditarNotaAlteracao?t.classList.add("nota-alteracao-editavel"):t.classList.remove("nota-alteracao-editavel")}static montarHTML(e){return e.notaAlteracao?"("+e.notaAlteracao+")":" "}}mw.blotName="EtaBlotNotaAlteracao",mw.tagName="nota-alteracao",mw.className="nota-alteracao";const fw=(e,t)=>t.podeEditarNotaAlteracao?()=>e.dispatchEvent(new CustomEvent("nota-alteracao",{bubbles:!0,cancelable:!0,detail:{elemento:t}})):()=>!1;class vw extends VA{constructor(){super(vw.create())}get instanceBlotName(){return vw.blotName}static create(){const e=super.create();return e.setAttribute("contenteditable","false"),e.innerHTML="&nbsp;",e}}vw.blotName="EtaBlotEspaco",vw.tagName="ESPACO",vw.className="espaco";class gw extends VA{constructor(e){super(gw.create(e))}get instanceBlotName(){return gw.blotName}static create(e){const t=super.create();let o="";return""!==e.nomeEvento&&t.setAttribute("id",e.nomeEvento),o=e.tipo===Mh.INFO?"mensagem--info":e.tipo===Mh.WARNING?"mensagem--warning":"mensagem--danger",t.setAttribute("contenteditable","false"),t.classList.add(o),t.innerHTML=e.descricao?e.descricao:"",e.fix&&(t.innerHTML+='. <span class="mensagem__fix">Corrigir agora.</span>',t.onclick=()=>t.dispatchEvent(new CustomEvent("mensagem",{bubbles:!0,cancelable:!0,detail:{mensagem:e}}))),e.nomeEvento&&""!==e.nomeEvento&&(t.innerHTML+='. <span class="mensagem__fix">Saiba mais</span>',t.onclick=()=>t.dispatchEvent(new CustomEvent(e.nomeEvento,{bubbles:!0,cancelable:!0,detail:{mensagem:e}}))),t}}gw.blotName="EtaBlotMensagem",gw.tagName="div",gw.className="mensagem";class bw extends rw{constructor(e){super(bw.create()),this.alinhamentoMenu=e}get instanceBlotName(){return bw.blotName}static create(){const e=super.create();return e.setAttribute("contenteditable","false"),e.setAttribute("class",bw.className),e}}bw.blotName="EtaContainerTdDireito",bw.tagName="DIV",bw.className="container__menu";class yw extends rw{constructor(e){super(yw.create(e))}get instanceBlotName(){return yw.blotName}static create(e){const t=super.create();t.setAttribute("class",yw.className+" container__texto--nivel"+e.nivel);const o=Number(getComputedStyle(document.documentElement).getPropertyValue("--elemento-padding-factor"));if(o){const i=(e.agrupador||"Ementa"===e.tipo?0:e.nivel)*o+5;t.setAttribute("style",`padding-left: ${i}px;`)}return e.tipoOmissis&&t.setAttribute("tipo-omissis",e.tipoOmissis),t}}yw.blotName="EtaContainerTdEsquerdo",yw.tagName="DIV",yw.className="container__texto",yw.classLevel="level";class xw extends rw{constructor(e,t){super(xw.create(e,t))}get instanceBlotName(){return xw.blotName}static create(e,t){const o=super.create(),i=t===HA.Esquerda?" container__linha--reverse":"";return o.setAttribute("class",xw.className+i),o}}var Aw;xw.blotName="EtaContainerTr",xw.tagName="DIV",xw.className="container__linha",function(e){e[e.Esquerda=0]="Esquerda",e[e.Direita=1]="Direita"}(Aw||(Aw={}));class ww extends VA{constructor(e){super(ww.create(e))}get instanceBlotName(){return ww.blotName}static create(e){const t=super.create();return t.innerHTML=" ",t.setAttribute("contenteditable","false"),t.setAttribute("class",ww.className),t.setAttribute("title","Exibir diferenças"),ww.atualizarAtributos(e,t),t}atualizarElemento(e){ww.atualizarAtributos(e,this.domNode)}static atualizarAtributos(e,t){t.setAttribute("id","buttonExibirDiferencas"+e.uuid),t.onclick=()=>t.dispatchEvent(new CustomEvent("exibir-diferencas",{bubbles:!0,cancelable:!0,detail:{elemento:e}}))}}ww.blotName="EtaBlotOpcoesDiff",ww.className="blot__opcoes_diff",ww.tagName="button";class _w extends rw{constructor(e){super(_w.create(e))}get instanceBlotName(){return _w.blotName}static create(e){const t=super.create();return t.setAttribute("contenteditable","false"),t.setAttribute("class",_w.className),_w.atualizarAtributos(e,t),t}atualizarElemento(e){_w.atualizarAtributos(e,this.domNode),this.atualizarBlots(e)}atualizarBlots(e){var t;null===(t=this.blotBotaoExibirDiferencas)||void 0===t||t.atualizarElemento(e)}static atualizarAtributos(e,t){t.setAttribute("id",_w.className+e.uuid)}get blotBotaoExibirDiferencas(){return this.findBlot(ww.blotName)}}_w.blotName="EtaContainerOpcoes",_w.tagName="DIV",_w.className="container__opcoes";class Ew{static criarContainerLinha(e){const t=new Sw(e),o=new xw(e.editavel,this.alinhamentoMenu),i=new yw(e),a=new bw(this.alinhamentoMenu);return e.abreAspas&&new ZA(e).insertInto(i),new XA(e).insertInto(i),!0===e.dispositivoAlteracao&&e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&new dw(e).insertInto(i),"Omissis"===e.tipo&&new uw(e).insertInto(i),e.agrupador&&(new cw).insertInto(i),new Ow(e).insertInto(i),void 0!==e.fechaAspas&&e.fechaAspas&&(new hw(e).insertInto(i),new mw(e).insertInto(i)),(new vw).insertInto(a),(e.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO||e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.revisao&&"Texto do dispositivo foi alterado"===e.revisao.descricao)&&Ew.criarContainerOpcoes(e).insertInto(o),e.revisao&&Qv(e.revisao)&&Ew.criarContainerRevisao(e).insertInto(o),i.insertInto(o),a.insertInto(o),o.insertInto(t),t}static criarContainerRevisao(e){const t=new lw(e);return new iw(e).insertInto(t),new ow(e).insertInto(t),new sw(e).insertInto(t),t}static criarContainerOpcoes(e){const t=new _w(e);return new ww(e).insertInto(t),t}static criarContainerMensagens(e){const t=new xw(!1,this.alinhamentoMenu),o=new yw(e),i=new bw(this.alinhamentoMenu);return e.mensagens&&e.mensagens.length>0&&e.mensagens.forEach((e=>{if(e.nomeEvento&&""!==e.nomeEvento){const t=document.getElementById("onmodalsufixos");e.nomeEvento&&""!==e.nomeEvento&&!t&&new gw(e).insertInto(o)}else new gw(e).insertInto(o)})),(new vw).insertInto(i),o.domNode.classList.add("container__texto--mensagem"),o.insertInto(t),i.insertInto(t),t}static montarSpanOmissisAsString(){return'<span class="texto__omissis">'+Hd+"</span>"}}Ew.alinhamentoMenu=HA.Esquerda;class Ow extends VA{constructor(e){super(Ow.create(e)),this._htmlAnt=""}get instanceBlotName(){return Ow.blotName}static create(e){var t,o;const i=super.create(),a=Vh(null!==(o=null===(t=e.conteudo)||void 0===t?void 0:t.texto)&&void 0!==o?o:"").trim();return i.setAttribute("class",Ow.getClasseCSS(e)),i.setAttribute("contenteditable",(null==e?void 0:e.editavel)?"true":"false"),i.setAttribute("id","texto__dispositivo"+e.uuid),e.notaAlteracao&&i.setAttribute("nota-alteracao",e.notaAlteracao||""),e.fechaAspas&&i.setAttribute("fecha-aspas","true"),"Omissis"===e.tipo||a.indexOf(Hd)>=0?i.innerHTML=Ew.montarSpanOmissisAsString():i.innerHTML=""!==a?a:"<br>",i}set htmlAnt(e){this._htmlAnt=e}get htmlAnt(){return this._htmlAnt}get alterado(){return this._htmlAnt!==this.html}static getClasseCSS(e){return"texto__dispositivo"}atualizarAtributos(e){this.htmlAnt=this.html,e.notaAlteracao?this.domNode.setAttribute("nota-alteracao",e.notaAlteracao||""):this.domNode.removeAttribute("nota-alteracao"),e.fechaAspas?this.domNode.setAttribute("fecha-aspas","true"):this.domNode.removeAttribute("fecha-aspas")}}Ow.blotName="EtaBlotConteudo",Ow.tagName="P",Ow.className="texto__dispositivo";class Sw extends rw{constructor(e){var t,o,i,a;super(Sw.create(e)),this.elemento=e,this._lexmlId=null!==(t=e.lexmlId)&&void 0!==t?t:"",this._uuid2=null!==(o=e.uuid2)&&void 0!==o?o:"",this._editavel=e.editavel,this._nivel=e.nivel,this._numero=null!==(i=e.numero)&&void 0!==i?i:"",this._tipo=null!==(a=e.tipo)&&void 0!==a?a:"",this._agrupador=e.agrupador,this._hierarquia=e.hierarquia,this._descricaoSituacao=e.descricaoSituacao?e.descricaoSituacao:void 0,this._existeNaNormaAlterada=e.existeNaNormaAlterada}get instanceBlotName(){return Sw.blotName}static criarId(e){return`lxEtaId${null!=e?e:0}`}static create(e){var t,o;const i=super.create(),a=Vh(null!==(o=null===(t=e.conteudo)||void 0===t?void 0:t.texto)&&void 0!==o?o:"").trim();return i.setAttribute("class",Sw.className+" "+Sw.getClasseCSS(e)),i.setAttribute("id",Sw.criarId(e.uuid)),Sw.atualizarAtributoRevisao(e,i),Sw.atualizarAtributoExistenciaNormaAlterada(e,i),("Omissis"===e.tipo||a.indexOf(Hd)>=0)&&i.classList.add("container_elemento--omissis"),i}findBlot(e){if(this.blotRotulo)return this.findBlotRef(this.blotRotulo.next,e)}findBlotRef(e,t){if(e)return e.instanceBlotName===t?e:this.findBlotRef(e.next,t)}searchBlotRotuloNode(e){if(e instanceof XA)return e;if("object"==typeof e&&e)for(const t in e)if(["children","head","next"].includes(t)){const o=this.searchBlotRotuloNode(e[t]);if(o instanceof XA)return o}}get blotRotulo(){return this.searchBlotRotuloNode(this.children.head)}get blotExistencia(){return this.findBlot(dw.blotName)}get blotConteudo(){return this.findBlot(Ow.blotName)}get blotAbreAspas(){return this.findBlot(ZA.blotName)}get blotFechaAspas(){return this.findBlot(hw.blotName)}get blotNotaAlteracao(){return this.findBlot(mw.blotName)}get containerRevisao(){return this.findBlotByBlotName(this.children,lw.blotName)}get containerDireito(){return this.children.head.children.tail}get blotInsideContainerDireito(){return this.containerDireito.children.head}get tamanho(){return this.length()-1}get id(){var e;return null!==(e=this.domNode.getAttribute("id"))&&void 0!==e?e:""}set agrupador(e){this._agrupador=e}get agrupador(){return this._agrupador}set editavel(e){this._editavel=e}get editavel(){return this._editavel}set hierarquia(e){this._hierarquia=e}get hierarquia(){return this._hierarquia}set nivel(e){this._nivel=e}get nivel(){return this._nivel}set numero(e){this._numero=e}get numero(){return this._numero}set tipo(e){this._tipo=e}get tipo(){return this._tipo}set descricaoSituacao(e){this._descricaoSituacao=e}get descricaoSituacao(){return this._descricaoSituacao}set existeNaNormaAlterada(e){this._existeNaNormaAlterada=e}get existeNaNormaAlterada(){return this._existeNaNormaAlterada}get uuid(){return parseInt(this.id.substr(7),0)}set uuid2(e){this._uuid2=e}get uuid2(){return this._uuid2}set lexmlId(e){this._lexmlId=e}get lexmlId(){var e;return null!==(e=this._lexmlId)&&void 0!==e?e:""}get html(){return"<br>"!==this.domNode.innerHTML?this.domNode.innerHTML:""}set html(e){this.domNode.innerHTML=e}resetClasses(){this.domNode.classList.remove("dispositivo--adicionado"),this.domNode.classList.remove("dispositivo--modificado"),this.domNode.classList.remove("dispositivo--suprimido")}setEstilo(e){let t="";switch(this.resetClasses(),e.descricaoSituacao){case Ud.DISPOSITIVO_ADICIONADO:t="dispositivo--adicionado";break;case Ud.DISPOSITIVO_MODIFICADO:t="dispositivo--modificado";break;case Ud.DISPOSITIVO_SUPRIMIDO:t="dispositivo--suprimido"}t&&this.domNode.classList.add(t),this.blotRotulo.setEstilo(e)}static atualizarAtributoRevisao(e,t){e.revisao?(t.setAttribute("em-revisao","true"),"ElementoRemovido"===e.revisao.stateType?t.setAttribute("excluido","true"):t.removeAttribute("excluido")):(t.removeAttribute("em-revisao"),t.removeAttribute("excluido"))}static atualizarAtributoExistenciaNormaAlterada(e,t){rf(e)?t.setAttribute("existenanormaalterada",(!!e.existeNaNormaAlterada).toString()):t.removeAttribute("existenanormaalterada")}atualizarAtributos(e){var t,o,i,a,r;Sw.atualizarAtributoRevisao(e,this.domNode),Sw.atualizarAtributoExistenciaNormaAlterada(e,this.domNode),null===(t=this.blotAbreAspas)||void 0===t||t.atualizarAtributos(e),null===(o=this.blotRotulo)||void 0===o||o.atualizarAtributos(e),null===(i=this.blotExistencia)||void 0===i||i.atualizarAtributos(e),this.blotConteudo.atualizarAtributos(e),null===(a=this.blotFechaAspas)||void 0===a||a.atualizarAtributos(e),null===(r=this.blotNotaAlteracao)||void 0===r||r.atualizarAtributos(e)}atualizarElemento(e){var t,o,i,a;this.elemento=e,this._lexmlId=null!==(t=e.lexmlId)&&void 0!==t?t:"",this._uuid2=null!==(o=e.uuid2)&&void 0!==o?o:"",this._editavel=e.editavel,this._nivel=e.nivel,this._numero=null!==(i=e.numero)&&void 0!==i?i:"",this._tipo=null!==(a=e.tipo)&&void 0!==a?a:"",this._agrupador=e.agrupador,this._hierarquia=e.hierarquia,this._descricaoSituacao=e.descricaoSituacao?e.descricaoSituacao:void 0,this._existeNaNormaAlterada=e.existeNaNormaAlterada,this.setEstilo(e),this.atualizarAtributos(e)}format(e,t){e===Sw.blotName?this.domNode.setAttribute("style",Sw.criarAtributoStyle(t)):super.format(e,t)}ativarBorda(){this.domNode.classList.add("container__elemento--ativo")}desativarBorda(){this.domNode.classList.remove("container__elemento--ativo"),this.limparContainerDireito()}limparContainerDireito(){this.blotInsideContainerDireito instanceof GA&&(this.blotInsideContainerDireito.remove(),(new vw).insertInto(this.containerDireito))}static criarAtributoStyle(e){let t="Articulacao"===e.tipo?"width: 100%; min-height: 1px; line-height: 0.42; margin: 1px":"width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;";return e.agrupador&&(t=`${t} text-align: center;`),t}static getClasseCSS(e){var t;let o="Articulacao"===e.tipo?"container__elemento--articulacao":"container__elemento--padrao";return o=`${o} elemento-tipo-${null===(t=e.tipo)||void 0===t?void 0:t.toLowerCase()}`,o=e.agrupador?`${o} agrupador`:"Ementa"===e.tipo?`${o} ementa`:`${o} h-artigo`,e.dispositivoAlteracao&&(o=`${o} dispositivo-alteracao`),o}isLinhaComMarcacaoDeExclusao(){return this.domNode.hasAttribute("excluido")}}function Iw(e){e.stopPropagation(),e.preventDefault()}Sw.blotName="EtaContainerTable",Sw.tagName="DIV",Sw.className="container__elemento";const kw="a-z0-9áéíóúÁÉÍÓÚãẽĩõũÃẼĨÕŨàèìòùÀÈÌÒÙäëïöüÄËÏÖÜâêîôûÂÊÎÔÛçÇýÝỹỸỳỲÿŸŶŷñÑ\\s'!@#$%&\\*\\(\\)_\\-+=`{}\\[\\]\\^~<,>.:;?/|\\ªº¹²³£¢¬§¿¡“”",Cw=new RegExp(`[${kw}]`,"i"),Nw=new RegExp(`[^${kw}]`,"gi"),Tw=Quill.import("modules/keyboard");class qw extends Tw{constructor(e,t){super(e,t),this.operacaoTecladoInvalida=new uA,this.adicionaElementoTeclaEnter=new uA,this.removeElemento=new uA,this.removeElementoSemTexto=new uA,this.renumeraElemento=new uA,this.transformaElemento=new uA,this.moveElemento=new uA,this.onChange=new uA,this.toggleExistencia=new uA,this.adicionaAgrupador=new uA,this.altGraphPressionado=!1}listen(){this.quill.root.addEventListener("keyup",(e=>{!e.ctrlKey||e.altKey||e.shiftKey||!"biBI".includes(e.key)||this.onHotKeyToolbar()})),this.quill.root.addEventListener("keydown",(e=>{var t;this.altGraphPressionado=e.altKey&&2===e.location;const o=null===(t=this.quill.linhaAtual)||void 0===t?void 0:t.elemento;if(this.quill.cursorDeTextoEstaSobreLink()||"Backspace"===e.key&&this.quill.cursorDeTextoEstaSobreLink(-1)||!this.isTeclaQueAlteraTexto(e)||this.onChange.notify("keyboard"),this.quill.cursorDeTextoEstaSobreLink()&&this.quill.cursorDeTextoEstaSobreLink(-1)&&!["Delete","Backspace"].includes(e.key)){if(!e.ctrlKey&&1===e.key.length||e.ctrlKey&&"xvXV".includes(e.key)||e.altKey&&"0123456789".includes(e.key)||"Enter"===e.key)return void Iw(e)}else{if(this.verificaSelecaoComLink())return void Iw(e);if("Omissis"===this.quill.linhaAtual.tipo&&!["ArrowUp","ArrowDown"].includes(e.key)&&(this.isTeclaQueAlteraTexto(e)||"Enter"===e.key||e.altKey||e.metaKey)&&!e.ctrlKey)return"Enter"===e.key&&this.enterEmOmissis(),void Iw(e);if(this.quill.cursorDeTextoEstaSobreOmissis()&&!["Delete","Backspace"].includes(e.key)&&(this.isTeclaQueAlteraTexto(e)||"Enter"===e.key||e.altKey)&&!e.ctrlKey)return"Enter"===e.key&&this.enterEmOmissis(),void Iw(e);if((null==o?void 0:o.descricaoSituacao)===Ud.DISPOSITIVO_SUPRIMIDO&&this.isNotTeclasDeNavegacao(e))Iw(e);else if(e.ctrlKey){if(e.altKey||e.metaKey||(["Delete","Backspace"].includes(e.key)?Iw(e):"Home"===e.key?this.onTeclaHome(e):"End"===e.key?this.onTeclaEnd(e):"a"!==e.key.toLowerCase()||e.shiftKey?"d"===e.key.toLowerCase()?this.onTeclaCtrlD(e):"z"===e.key.toLowerCase()?this.onTeclaCtrlZ(e):"y"===e.key.toLowerCase()?this.onTeclaCtrlY(e):e.ctrlKey&&e.shiftKey&&"a"===e.key.toLowerCase()?this.onTeclaCtrlShiftA(e):"b"!==e.key&&"i"!==e.key&&"x"!==e.key&&"v"!==e.key||this.onValidarTecla(e):this.onTeclaCtrlA(e)),(e.altKey||e.metaKey)&&(["o"].includes(e.key.toLowerCase())?this.onHotKeyTransformacaoTipo(e):["n","®"].includes(e.key.toLowerCase())?this.onHotKeyRenumeraDispositivo(e):["x","≈"].includes(e.key.toLowerCase())?this.onHotKeyToggleExistencia(e):["g"].includes(e.key.toLowerCase())&&this.onHotKeyAdicionaAgrupador(e),["229","172","68","248","960","8224"].includes(e.key.charCodeAt(0).toString()))){let t="";switch(e.key.charCodeAt(0).toString()){case"229":t="a";break;case"172":t="l";break;case"68":t="n";break;case"248":t="o";break;case"960":t="p";break;case"8224":t="t"}if(t){const e=new KeyboardEvent("keydown",{key:t});this.onHotKeyTransformacaoTipo(e)}}}else e.altKey?"ArrowUp"!==e.key&&"ArrowDown"!==e.key||this.onHotKeyMover(e):"ArrowRight"===e.key?this.onTeclaArrowRight(e):"ArrowLeft"===e.key?this.onTeclaArrowLeft(e):"ArrowDown"===e.key?this.onTeclaArrowDown(e):"ArrowUp"===e.key?this.onTeclaArrowUp(e):"Enter"===e.key?this.onTeclaEnter(e):"Escape"===e.key?this.onTeclaEscape(e):"Delete"===e.key?this.onTeclaDelete(e):"Backspace"===e.key?this.onTeclaBackspace(e):"Tab"===e.key?this.onTeclaTab(e):1===e.key.length&&Cw.test(e.key)&&this.onValidarTecla(e)}})),super.listen()}isNotTeclasDeNavegacao(e){return!e.ctrlKey&&"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&"Home"!==e.key&&"End"!==e.key&&!e.shiftKey}isTeclaComCaracterGrafico(e){return 3!==e.location&&"123456=[]/".includes(e.key)}isTeclaQueAlteraTexto(e){return!(e.ctrlKey||e.altKey||e.metaKey)&&(!(this.altGraphPressionado&&!this.isTeclaComCaracterGrafico(e))&&!(!["Delete","Backspace"].includes(e.key)&&1!==e.key.length))}verificarOperacaoTecladoPermitida(){const e=this.quill.textoSelecionado;if(e.conteudo&&e.quantidadeCR>0){if(1===e.quantidadeCR&&/\n$/gi.test(e.conteudo)){const e=this.quill.getSelection();return e&&this.quill.setSelection(e.index,e.length-1,Quill.sources.API),!0}return this.operacaoTecladoInvalida.notify(),!1}return!0}onTeclaArrowRight(e){const t=this.quill.getSelection(!0),[o,i]=this.quill.getLine(t.index);i===o.tamanho&&(o.linha.next&&this.quill.setIndex(this.quill.getIndex(o.linha.next.blotConteudo),Quill.sources.USER),Iw(e))}onTeclaArrowLeft(e){const t=this.quill.getSelection(!0),[o,i]=this.quill.getLine(t.index);if(0===i){if(o.linha.prev){const e=o.linha.prev,t=this.quill.getIndex(e.blotConteudo)+e.blotConteudo.tamanho;this.quill.setIndex(t,Quill.sources.USER)}Iw(e)}}onTeclaArrowUp(e){const t=this.quill.getSelection(!0),[o,i]=this.quill.getLine(t.index);if(0===i||this.quill.cursorDeTextoEstaSobreOmissis()){if(o.linha.prev){const e=o.linha.prev,t=this.quill.getIndex(e.blotConteudo)+e.blotConteudo.tamanho;this.quill.setIndex(t,Quill.sources.USER)}Iw(e)}this.quill.isProcessandoMudancaLinha&&Iw(e)}onTeclaArrowDown(e){const t=this.quill.getSelection(!0),[o,i]=this.quill.getLine(t.index);(i===o.tamanho||this.quill.cursorDeTextoEstaSobreOmissis())&&(o.linha.next&&this.quill.setIndex(this.quill.getIndex(o.linha.next.blotConteudo),Quill.sources.USER),Iw(e)),this.quill.isProcessandoMudancaLinha&&Iw(e)}onTeclaEnter(e){if(this.verificarOperacaoTecladoPermitida()&&!this.quill.cursorDeTextoEstaSobreLink(-1)){const e=this.quill.getSelection(!0);this.quill.setSelection(e.index,0,Quill.sources.SILENT),this.adicionaElementoTeclaEnter.notify(e)}Iw(e)}onTeclaEscape(e){const t=this.quill.getSelection(!0);this.quill.setIndex(t.index,Quill.sources.SILENT),this.quill.setSelection(this.quill.inicioConteudoAtual,0,Quill.sources.SILENT),Iw(e)}onTeclaDelete(e){const t=this.quill.getSelection(!0);if(this.quill.linhaAtual.blotConteudo.html)if(this.verificarOperacaoTecladoPermitida()&&t.index!==this.quill.fimConteudoAtual){if(this.quill.cursorDeTextoEstaSobreLink()){let t=this.quill.getSelection().index;this.quill.cursorDeTextoEstaSobreLink(-1)||(t+=1),this.apagaTextoNaPosicao(t),Iw(e)}else if(this.quill.cursorDeTextoEstaSobreOmissis()){this.quill.linhaAtual.domNode.classList.remove("container_elemento--omissis");const t=this.quill.getSelection().index;this.apagaTextoNaPosicao(t),Iw(e)}}else Iw(e);else Iw(e),this.removeElementoSemTexto.notify(e.key)}onTeclaBackspace(e){const t=this.quill.getSelection(!0);if(this.quill.linhaAtual.blotConteudo.html){if(!this.verificarOperacaoTecladoPermitida()||t.index===this.quill.inicioConteudoAtual&&0===t.length)Iw(e);else if(this.quill.cursorDeTextoEstaSobreLink(-1)){const t=this.quill.getSelection().index;this.apagaTextoNaPosicao(t),Iw(e)}else if(this.quill.cursorDeTextoEstaSobreOmissis()){this.quill.linhaAtual.domNode.classList.remove("container_elemento--omissis");const t=this.quill.getSelection().index;this.apagaTextoNaPosicao(t),Iw(e)}}else Iw(e),this.removeElementoSemTexto.notify(e.key)}onValidarTecla(e){this.verificarOperacaoTecladoPermitida()||Iw(e)}onTeclaHome(e){const t=this.quill.getPrimeiraLinha(),o=this.quill.getIndex(t.next.blotConteudo);this.quill.setIndex(o,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,0),Iw(e)}onTeclaEnd(e){var t,o;const i=null!==(o=this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo)+(null===(t=this.quill.getUltimaLinha().blotConteudo)||void 0===t?void 0:t.tamanho))&&void 0!==o?o:0;this.quill.setIndex(i,Quill.sources.USER),this.quill.scroll.domNode.scrollTo(0,this.quill.scroll.domNode.scrollHeight),Iw(e)}onTeclaCtrlD(e){this.removeElemento.notify(),Iw(e)}onTeclaTab(e){this.transformaElemento.notify(e),Iw(e)}onTeclaCtrlZ(e){this.quill.undo(),Iw(e)}onTeclaCtrlY(e){this.quill.redo(),Iw(e)}onTeclaCtrlA(e){Iw(e)}onTeclaCtrlShiftA(e){this.quill.setSelection(this.quill.inicioConteudoAtual,this.quill.linhaAtual.blotConteudo.tamanho,Quill.sources.SILENT),Iw(e)}onHotKeyRenumeraDispositivo(e){this.renumeraElemento.notify(e),Iw(e)}onHotKeyMover(e){this.moveElemento.notify(e),Iw(e)}onHotKeyTransformacaoTipo(e){this.transformaElemento.notify(e),Iw(e)}onHotKeyToolbar(){var e;(null===(e=document.getSelection())||void 0===e?void 0:e.toString())&&this.onChange.notify("toolbar(hotkey)")}onHotKeyToggleExistencia(e){this.toggleExistencia.notify(e),Iw(e)}onHotKeyAdicionaAgrupador(e){this.adicionaAgrupador.notify(e),Iw(e)}verificaSelecaoComLink(){var e,t,o,i;const a=this.quill.getSelection();if(!a)return!1;let r=!1;const n=this.quill.getContents(a).ops;return((null===(t=null===(e=n[0])||void 0===e?void 0:e.attributes)||void 0===t?void 0:t.link)||(null===(i=null===(o=n[n.length-1])||void 0===o?void 0:o.attributes)||void 0===i?void 0:i.link))&&(r=!0),r}apagaTextoNaPosicao(e){const[t,o]=this.quill.getLeaf(e);this.quill.deleteText(e-o,t.text.length)}enterEmOmissis(){if(this.verificarOperacaoTecladoPermitida()){const e=this.quill.getSelection(!0),t=this.quill.getIndex(this.quill.linhaAtual.blotConteudo),o=this.quill.linhaAtual.blotConteudo.length();e.index!==t&&(e.index=t+o-1),this.adicionaElementoTeclaEnter.notify(e)}}}const Rw='\n<svg class="icon-negrito" id="negrito" viewBox="0 0 16 16">\n<path class="ql-fill" d="M10.7,13.5c-0.1,0-0.4,0-0.6-0.2L6,7.8C6,7.7,5.8,7.7,5.8,7.8l0,5.1c0,0.3-0.2,0.5-0.5,0.5H3.7\n\tc-0.3,0-0.5-0.2-0.5-0.5l0-9.5c-0.1-0.2,0-0.4,0.1-0.5c0.1-0.2,0.4-0.4,0.7-0.4h1c0.1,0,0.4,0,0.6,0.2l4.4,5.9\n\tc0.1,0.1,0.2,0,0.2-0.1V3c0-0.3,0.2-0.5,0.5-0.5h1.5c0.3,0,0.5,0.2,0.5,0.5V13c0,0.3-0.2,0.5-0.5,0.5H10.7z"/>\n</svg>\n',Dw=Quill.import("blots/inline");class Pw extends Dw{get instanceBlotName(){return Pw.blotName}static formats(){return!0}}Pw.blotName="EtaBlotConteudoOmissis",Pw.tagName="span",Pw.className="texto__omissis";class Lw extends VA{constructor(){super(Lw.create())}get instanceBlotName(){return Lw.blotName}static create(){const e=super.create();return e.setAttribute("contenteditable","false"),e.setAttribute("style","font-size: 0.8em;"),e}}Lw.blotName="mensagens",Lw.tagName="MENSAGENS";const Mw=Quill.import("modules/clipboard");class $w extends(Gc(iA)(Mw)){constructor(e,t){super(e,t),this.onChange=new uA,this.onPasteTextoArticulado=new uA,this.quill.root.addEventListener("cut",(e=>{var t;if(this.quill.cursorDeTextoEstaSobreLink())return void Iw(e);(null===(t=document.getSelection())||void 0===t?void 0:t.toString())&&this.onChange.notify("clipboard")}))}convert(e){if("string"==typeof e)return this.container.innerHTML=e,super.convert();this.container.innerHTML=this.container.innerHTML.replace(Nw,"").replace(/(<p\s*)/gi," <p").replace(/(<br\s*\/>)/gi," ").replace(/<(?!strong)(?!\/strong)(?!em)(?!\/em)(?!sub)(?!\/sub)(?!sup)(?!\/sup)(.*?)>/gi,"").replace(/<([a-z]+) .*?=".*?( *\/?>)/gi,"<$1$2");const t=super.convert();return this.container.innerHTML="",t}onPaste(e){var t,o;if(this.quill.cursorDeTextoEstaSobreLink())return void Iw(e);e.preventDefault();let i=null===(t=null==e?void 0:e.clipboardData)||void 0===t?void 0:t.getData("text/html");const a=null===(o=null==e?void 0:e.clipboardData)||void 0===o?void 0:o.getData("text/plain"),r=this.quill.getSelection();if(i&&(i=(e=>Ys(e,"head"))((e=>Ys(e,"script"))(Ys(i,"style")))),i&&i.length>0&&Ks(i).length>0){const e=Ly(i);if(void 0!==e&&this.hasRotulo(e))return void this.adicionaDispositivos(a,e,r);this.quill.deleteText(r.index,r.length),this.quill.clipboard.dangerouslyPasteHTML(r.index,e),e&&this.onChange.notify("clipboard")}else if(a){if(""!==a.trim()&&this.hasRotulo(a))return void this.adicionaDispositivos(a,a,r);this.quill.clipboard.dangerouslyPasteHTML(r.index,a),a&&this.onChange.notify("clipboard")}}hasRotulo(e){var t;const o=null===(t=Ks(e))||void 0===t?void 0:t.replace(/&nbsp;/g," ").replace(/["“']/g,"").trim();return!!(o&&o.length>0&&/^(parte|livro|t[ií]tulo|cap[ií]tulo|se[cç][aã]o|subse[cç][aã]o|art\.|art|§|par[aá]grafo [uú]nico|[IVXMDC]{1,3}\s*[-–]{1}|[az]{1,2}\)|\d{1,3}[\t .]+).*/i.test(o))}adicionaDispositivos(e,t,o){this.onPasteTextoArticulado.notify({textoColadoOriginal:e,textoColadoAjustado:t,range:o})}}class jw extends Quill{constructor(e,t){super(e,t)}getConteudoHtml(e,t,o){const i=this.scroll.children.head;return this.setConteudo(this.converterHtmlParaDelta(e),Quill.sources.SILENT),this.deleteText(t+o,i.length()-o-1,Quill.sources.SILENT),t>0&&this.deleteText(0,t,Quill.sources.SILENT),i.domNode.innerHTML}converterHtmlParaDelta(e){return this.clipboard.convert(null!=e?e:"")}converterDeltaParaHtml(e){return this.setConteudo(e,Quill.sources.SILENT),this.scroll.children.head.domNode.innerHTML}setConteudo(e,t){var o;const i=this.scroll.children.head;let a=0;i.length()>1&&this.deleteText(a,i.length()-1,null!=t?t:Quill.sources.SILENT),this.insertText(a," ",Quill.sources.SILENT),null===(o=e.ops)||void 0===o||o.forEach((e=>{e.attributes?this.insertText(a,e.insert,e.attributes,null!=t?t:Quill.sources.SILENT):this.insertText(a,e.insert,null!=t?t:Quill.sources.SILENT),a+=e.insert.length})),this.deleteText(a,1,Quill.sources.SILENT)}}class zw extends Quill{constructor(e,t,o){super(e,o),this._undoEstruturaVazio=!0,this._redoEstruturaVazio=!0,this._processandoMudancaLinha=!1,this.undoRedoEstrutura=new uA,this.elementoSelecionado=new uA,this.customClickHandler=e=>{try{let t=zw.find(e.target);if(["EtaBlotOpcoesDiff"].includes(t.instanceBlotName))return;for(;t&&"EtaContainerTable"!==t.instanceBlotName;)t=t.parent;t&&t===this.linhaAtual&&t.blotConteudo.domNode.focus()}catch(e){}},this.observableSelectionChange=new uA,this.onSelectionChange=(e,t)=>{const o=this.linhaAtual;this._mudouDeLinha=this.verificarMudouLinha(e,t),this._mudouDeLinha&&(this.observableSelectionChange.notify(o),this.limparHistory())},this.onTextChange=()=>{this._linhaAtual&&setTimeout((()=>{var e;(null===(e=this.linhaAtual)||void 0===e?void 0:e.blotConteudo)&&this.acertarAspas()}),0)},this.on("text-change",this.onTextChange),this.on("selection-change",this.onSelectionChange),this.buffer=new jw(t,{}),this.root.addEventListener("dragstart",(e=>{e.preventDefault()})),this.root.addEventListener("drop",(e=>{e.preventDefault()})),this.root.addEventListener("click",this.customClickHandler)}get mudouDeLinha(){var e;return null!==(e=this._mudouDeLinha)&&void 0!==e&&e}get linhaAnterior(){return this._linhaAnterior}get linhaAtual(){return this._linhaAtual}get inicioConteudoAtual(){return this.linhaAtual.blotConteudo?this.getIndex(this.linhaAtual.blotConteudo):0}get fimConteudoAtual(){return this.inicioConteudoAtual+this.linhaAtual.blotConteudo.tamanho}get textoSelecionado(){var e,t,o;const i=null!==(e=this.getSelection())&&void 0!==e?e:{index:0,length:0},a=this.getText().substr(i.index,i.length);return{conteudo:a,quantidadeCR:null!==(o=null===(t=a.match(/(\n)/gi))||void 0===t?void 0:t.length)&&void 0!==o?o:0}}get isUndoEstruturaVazio(){return this._undoEstruturaVazio}set undoEstruturaVazio(e){this._undoEstruturaVazio=e}get isRedoEstruturaVazio(){return this._redoEstruturaVazio}set redoEstruturaVazio(e){this._redoEstruturaVazio=e}get isProcessandoMudancaLinha(){return this._processandoMudancaLinha}set processandoMudancaLinha(e){this._processandoMudancaLinha=e}static configurar(){const e=zw.import("parchment"),t=new e.Attributor.Attribute("id","id",{scope:e.Scope.BLOCK}),o=new e.Attributor.Style("paddingLeft","padding-left",{scope:e.Scope.BLOCK}),i=new e.Attributor.Style("border","border",{scope:e.Scope.BLOCK}),a=new e.Attributor.Style("borderColor","border-color",{scope:e.Scope.BLOCK}),r=new e.Attributor.Style("display","display",{scope:e.Scope.BLOCK}),n=new e.Attributor.Style("aria-label","aria-label",{scope:e.Scope.BLOCK}),s=new e.Attributor.Attribute("dataRotulo","data-rotulo",{scope:e.Scope.BLOCK});Quill.import("ui/icons").bold=Rw;const l=Quill.import("formats/bold");l.tagName="b",Quill.register(l,!0);const c=Quill.import("formats/italic");c.tagName="i",Quill.register(c,!0),zw.register("modules/clipboard",$w,!0),zw.register("modules/keyboard",qw,!0),zw.register(Pw,!0),zw.register(ZA,!0),zw.register(hw,!0),zw.register(mw,!0),zw.register(dw,!0),zw.register(uw,!0),zw.register(Ow,!0),zw.register(vw,!0),zw.register(gw,!0),zw.register(Lw,!0),zw.register(QA,!0),zw.register(KA,!0),zw.register(WA,!0),zw.register(GA,!0),zw.register(XA,!0),zw.register(Sw,!0),zw.register(yw,!0),zw.register(bw,!0),zw.register(xw,!0),zw.register(lw,!0),zw.register(sw,!0),zw.register(iw,!0),zw.register(ow,!0),zw.register(_w,!0),zw.register(ww,!0),zw.register(t,!0),zw.register(o,!0),zw.register(i,!0),zw.register(a,!0),zw.register(r,!0),zw.register(n,!0),zw.register(s,!0)}destroi(){var e,t,o;null===(e=this.root)||void 0===e||e.removeEventListener("click",this.customClickHandler),this.off("text-change",this.onTextChange),this.off("selection-change",this.onSelectionChange),null===(t=this.keyboard)||void 0===t||t.operacaoTecladoInvalida.clean(),null===(o=this.keyboard)||void 0===o||o.adicionaElementoTeclaEnter.clean()}getConteudoHtmlParteLinha(e,t,o){return this.buffer.getConteudoHtml(e.html,t,o)}getPrimeiraLinha(){return this.scroll.children.head}getUltimaLinha(){return this.scroll.children.tail}getLinhaByUuid2(e,t=this.getPrimeiraLinha()){return t.uuid2===e?t:t.next?this.getLinhaByUuid2(e,t.next):void 0}getLinha(e,t=this.getPrimeiraLinha()){return t.uuid===e?t:t.next?this.getLinha(e,t.next):void 0}getLinhaPorId(e){return Quill.find(this.getHtmlElement(Sw.criarId(e)),!1)}setIndex(e,t=Quill.sources.USER){var o;const i=null!==(o=this.getSelection(!0))&&void 0!==o?o:{index:0,length:0};if(e!==i.index||0!==i.length)try{this.setSelection(e,0,t)}catch(o){this.setSelection(e-1,0,t)}}setConteudoLinha(e,t,o){var i;let a=this.getIndex(e);e.length()>1&&this.deleteText(a,e.length()-1,null!=o?o:Quill.sources.SILENT),this.insertText(a," ",Quill.sources.SILENT),null===(i=t.ops)||void 0===i||i.forEach((e=>{e.attributes?this.insertText(a,e.insert,e.attributes,null!=o?o:Quill.sources.SILENT):this.insertText(a,e.insert,null!=o?o:Quill.sources.SILENT),a+=e.insert.length})),this.deleteText(a,1,Quill.sources.SILENT)}converterHtmlParaDelta(e){return this.buffer.converterHtmlParaDelta(e)}converterDeltaParaHtml(e){return this.buffer.converterDeltaParaHtml(e)}irProximaLinha(){var e;const t=this.getIndex(null===(e=this._linhaAtual)||void 0===e?void 0:e.next.blotConteudo);this.setSelection(t,0)}desmarcarLinhaAtual(e){this._linhaAnterior=e,null==e||e.desativarBorda()}marcarLinhaAtual(e){e&&"Articulacao"!==e.tipo&&(this.atualizarLinhaCorrente(e),this.elementoSelecionado.notify(e.uuid))}undo(){0===this.history.stack.undo.length?this.isUndoEstruturaVazio||this.undoRedoEstrutura.notify(zw.UNDO):(this.history.undo(),this.focus())}redo(){0===this.history.stack.redo.length?this.isRedoEstruturaVazio||this.undoRedoEstrutura.notify(zw.REDO):(this.history.redo(),this.focus())}limparHistory(){setTimeout((()=>{this.history.clear()}),0)}desmarcarLinhas(){document.querySelectorAll(".container__elemento--ativo").forEach((e=>{this.getLinhaPorId(parseInt(e.id.substr(7),0)).desativarBorda()}))}verificarMudouLinha(e,t){if(t&&0===(null==e?void 0:e.index)&&0===(null==e?void 0:e.length))return this.setSelection(t.index,0),!1;if(e){const o=this.getLine(e.index)[0],i=o.linha;if(o.tagName===XA.tagName||o.tagName===vw.tagName||o.tagName===GA.tagName||o.tagName===Lw.tagName||o.tagName===ZA.tagName||o.tagName===uw.tagName||o.tagName===dw.tagName?this.setSelection(this.getIndex(o.linha.blotConteudo),0,Quill.sources.SILENT):o.tagName!==hw.tagName&&o.tagName!==mw.tagName||this.setSelection(this.getIndex(o.linha.blotFechaAspas)-1,0,Quill.sources.SILENT),t){const e=this.getLine(t.index)[0];if(e){if(i===e.linha)return!1}}return this.desmarcarLinhas(),this.marcarLinhaAtual(i),!0}return!1}getHtmlElement(e){return this.root.querySelector(`#${e}`)}acertarAspas(){var e,t;if(this._linhaAtual){const o=this.inicioConteudoAtual,i=null!==(t=this.getText(o,null===(e=this.linhaAtual)||void 0===e?void 0:e.blotConteudo.tamanho))&&void 0!==t?t:"";let a=o;if(i.indexOf('"')>-1)for(let e=0;e<i.length;e++)if('"'===i[e]){const t=0===e||i[e-1].match(/\s/)?"“":"”";a+=e,this.deleteText(a,1,Quill.sources.SILENT),this.insertText(a,t,Quill.sources.SILENT),a=o}}}atualizarLinhaCorrente(e){this.processandoMudancaLinha=!0,this._linhaAtual=e,this._linhaAtual.blotConteudo.htmlAnt=this._linhaAtual.blotConteudo.html,e.ativarBorda(),this.scrollToElemento(e.uuid)}scrollToElemento(e){const t=this.getHtmlElement(Sw.criarId(e));setTimeout((()=>{this.isInEtaBoxViewport(t)||this.scrollIntoEtaBox(t)}),0)}scrollIntoEtaBox(e){var t;const o=e.offsetTop;null===(t=e.closest(".ql-editor"))||void 0===t||t.scrollTo(0,o)}isInEtaBoxViewport(e){const t=e.getBoundingClientRect(),o=e.closest("#lx-eta-box"),i=(null==o?void 0:o.getBoundingClientRect().bottom)||0;return t.top>=0&&t.bottom<=i}cursorDeTextoEstaSobreLink(e=0){var t;const o=this.getSelection();if(o){const i=this.getContents(o.index+e,1).ops;return!(!i||!i[0])&&(null===(t=i[0].attributes)||void 0===t?void 0:t.link)}return!1}cursorDeTextoEstaSobreOmissis(){const e=this.getSelection();if(e){return this.getLeaf(e.index)[0].text===Hd}return!1}}zw.UNDO="undo",zw.REDO="redo";class Fw{constructor(e="",t="",o="",i=[],a=[],r=""){this.urn="",this.nomePreferido="",this.nomesAlternativos=[],this.nomes=[],this.ementa="",this.nomePorExtenso="",this.urn=e,this.nomePreferido=t,this.nomesAlternativos=a,this.nomes=i,this.ementa=r,this.nomePorExtenso=o}numero(){return this.urn.split(";")[1]}tipo(){return this.urn.split(":")[4]}sData(){return this.urn.split(":")[5].split(";")[0]}data(){const e=this.sData();return new Date(e)}dataDDMMYYYY(){return(e=>[hx(e.getDate()),hx(e.getMonth()+1),e.getFullYear()].join("/"))(this.data())}}let Bw=class extends Jl{constructor(){super(...arguments),this.placeholder="",this.label="",this.items=[],this.disabled=!1,this.opened=!1,this.async=!0,this.maxSuggestions=10,this.onSearch=e=>console.log("Texto da pesquisa",e),this.onSelect=e=>console.log("Item selecionado:",e),this.onChange=e=>console.log("Mudança texto:",e),this._interval=1e3,this._bound={},this._blur=!1,this._mouseEnter=!1,this._search=()=>{const{value:e}=this.contentElement;this.async?(clearTimeout(this._timer),(e.length>=5||!this.async)&&(this._timer=setTimeout((()=>{this.onSearch(e)}),this.async?this._interval:0))):this.onSearch(e)}}render(){var e;return Rl`
      <style>
        .suggest-container {
          position: relative;
        }

        ul {
          position: absolute;
          display: block;
          list-style-type: none;
          margin: 0;
          padding: 0;
          z-index: 10000;
          border: 1px solid grey;
          background: white;
        }
        li {
          padding: 4px;
          cursor: pointer;
        }
        li.active {
          background: whitesmoke;
        }
        [hidden] {
          display: none;
        }

        .lexml-autocomplete-input {
          width: 100%;
        }

        @media (max-width: 576px) {
          .lexml-autocomplete-label {
            width: calc(100% - 2px);
            display: block;
          }
          .lexml-autocomplete-input {
            width: calc(100% - 2px);
          }
        }
      </style>
      <slot id="dropdown-input">
        <sl-input
          id="defaultInput"
          class="lexml-autocomplete-input"
          type="text"
          label=${this.label}
          placeholder=${this.placeholder}
          .value=${(null===(e=this.value)||void 0===e?void 0:e.description)||""}
          @change=${e=>this._handleChange(e.target.value)}
          ?disabled=${this.disabled}
        ></sl-input>
      </slot>
      <div class="suggest-container">
        <ul id="suggestions" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>
          ${this.items.map((e=>Rl`<li @click=${()=>this.autocomplete(e)}>${e.description}</li>`))}
        </ul>
      </div>
    `}get contentElement(){if(this._inputEl)return this._inputEl;if(!this.hasUpdated)return;const e=this.shadowRoot.getElementById("dropdown-input").assignedElements();return this._inputEl=e.length?e[0]:this.shadowRoot.getElementById("defaultInput"),this._inputEl}get value(){return this.contentElement&&this.contentElement.value}set value(e){this.contentElement?this.contentElement.value=e:this._tempValue=e}firstUpdated(){this._suggestionEl=this.shadowRoot.getElementById("suggestions"),this._suggestionEl.style.width=`${this.contentElement.getBoundingClientRect().width}px`,this._bound.onKeyDown=this._handleKeyDown.bind(this),this._bound.onKeyUp=this._handleKeyUp.bind(this),this._bound.onFocus=this._handleFocus.bind(this),this._bound.onBlur=this._handleBlur.bind(this),this._bound.onChange=this._handleChange.bind(this),this.contentElement.addEventListener("keydown",this._bound.onKeyDown),this.contentElement.addEventListener("keyup",this._bound.onKeyUp),this.contentElement.addEventListener("focus",this._bound.onFocus),this.contentElement.addEventListener("blur",this._bound.onBlur),this.contentElement.addEventListener("sl-input",this._bound.onChange),void 0!==this._tempValue&&(this.contentElement.value=this._tempValue)}disconnectedCallback(){this.contentElement&&(this.contentElement.removeEventListener("keydown",this._bound.onKeyDown),this.contentElement.removeEventListener("keyup",this._bound.onKeyUp),this.contentElement.removeEventListener("focus",this._bound.onFocus),this.contentElement.removeEventListener("blur",this._bound.onBlur),this.contentElement.removeEventListener("sl-input",this._bound.onChange))}focus(e){this.contentElement&&this.contentElement.focus(e)}updated(e){e.has("items")&&(this.items.length>1||1===this.items.length&&this.items[0]!==this.contentElement.value?this.open():this.close()),e.has("opened")&&this.opened&&this._suggestionEl.childElementCount&&(this._highlightedEl=this._suggestionEl.children[0],this._highlightedEl.classList.add("active"))}open(){"0px"===this._suggestionEl.style.width&&(this._suggestionEl.style.width=`${this.contentElement.getBoundingClientRect().width}px`),this.items.length&&(this.opened=!0)}close(){this.opened=!1,this._highlightedEl=null}autocomplete(e){this.contentElement.value=e,this.onSelect(e),this.close()}_highlightPrev(){this._highlightedEl&&this._highlightedEl.previousElementSibling&&(this._highlightedEl.classList.remove("active"),this._highlightedEl=this._highlightedEl.previousElementSibling,this._highlightedEl.classList.add("active"))}_highlightNext(){this._highlightedEl&&this._highlightedEl.nextElementSibling&&(this._highlightedEl.classList.remove("active"),this._highlightedEl=this._highlightedEl.nextElementSibling,this._highlightedEl.classList.add("active"))}_handleChange(e){this.onChange(e)}_handleKeyDown(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),e.stopPropagation())}_handleKeyUp(e){var t,o;switch(e.key){case"ArrowUp":(null===(t=this._highlightedEl)||void 0===t?void 0:t.previousElementSibling)&&(e.preventDefault(),e.stopPropagation(),this._highlightPrev());break;case"ArrowDown":(null===(o=this._highlightedEl)||void 0===o?void 0:o.nextElementSibling)&&(e.preventDefault(),e.stopPropagation(),this._highlightNext());break;case"Enter":this._highlightedEl&&this._highlightedEl.click(),this.contentElement.blur();break;default:this._search()}}_handleFocus(){this._blur=!1,this.items.length>1&&this.open()}_handleBlur(){this._blur=!0,setTimeout((()=>this.close()),200)}_handleItemMouseEnter(){this._mouseEnter=!0}_handleItemMouseLeave(){this._mouseEnter=!1,this._blur&&setTimeout((()=>this.close()),500)}};Mc([zc({type:String})],Bw.prototype,"placeholder",void 0),Mc([zc({type:String})],Bw.prototype,"label",void 0),Mc([zc({type:Array,reflect:!0})],Bw.prototype,"items",void 0),Mc([zc({type:Boolean,reflect:!0})],Bw.prototype,"disabled",void 0),Mc([zc({type:Boolean,reflect:!0})],Bw.prototype,"opened",void 0),Mc([zc({type:Boolean,reflect:!0})],Bw.prototype,"async",void 0),Mc([zc({type:Number})],Bw.prototype,"maxSuggestions",void 0),Mc([zc({type:Function})],Bw.prototype,"onSearch",void 0),Mc([zc({type:Function})],Bw.prototype,"onSelect",void 0),Mc([zc({type:Function})],Bw.prototype,"onChange",void 0),Mc([zc({type:String})],Bw.prototype,"value",null),Bw=Mc([$c("autocomplete-async")],Bw);class Uw{constructor(e,t){this.description=t,this.value=e}}let Vw=class extends Jl{constructor(){super(...arguments),this.urnInicial="",this.onSelect=e=>{},this._selectedNorma=new Fw,this._optionsNorma=[],this._normas=[]}async _searchNormas(e){try{const t=await fetch(`${this.urlAutocomplete}?query=${e}`);return(await t.json()).map((e=>new Fw(e.urn,e.nomePreferido,e.nomePorExtenso,e.nomes,e.nomesAlternativos,e.ementa)))}catch(e){console.log("Erro inesperado ao consultar as normas"),console.log(e)}return Promise.resolve([])}_updateNormas(e){const t=e.replace(/[,;]| nº /gi," ").replaceAll(".","").toLowerCase();this._searchNormas(t).then((e=>{this._normas=e,this._optionsNorma=e.map((e=>new Uw(e.urn,e.nomePreferido)))}))}_handleSearch(e){this._updateNormas(e)}_handleSelect(e){const t=this._normas.find((t=>t.urn===e.value));t&&(this._selectedNorma=t,this.onSelect(this._selectedNorma))}_getNormaByURN(e){const t=new Fw(e),o=`${t.sData()} ${t.numero()}`;this._searchNormas(o).then((t=>{this._selectedNorma=t.find((t=>t.urn===e)),this.onSelect(this._selectedNorma),this._autoCompleteAsync.value=this._selectedNorma.nomePreferido}))}firstUpdated(){this.urnInicial&&this._getNormaByURN(this.urnInicial),this.focusAutoComplete()}focusAutoComplete(){setTimeout((()=>{this._autoCompleteAsync.focus()}),100)}_handleChange(e){this._selectedNorma=new Fw,this.onSelect(this._selectedNorma)}render(){return Rl`<style>
        .ajuda,
        .sp-ementa {
          font-size: var(--sl-font-size-small);
          font-weight: normal;
        }
        .wp-ementa {
          height: 85px;
          margin-top: 10px;
          overflow-y: auto;
          border: 1px solid var(--sl-color-gray-300);
          padding: 5px;
          border-radius: var(--sl-border-radius-small);
          background-color: var(--sl-color-gray-100);
        }
        .wp-ementa p {
          margin: 0;
        }
        .lb-ementa {
          display: block;
          margin-top: 10px;
        }
      </style>
      <div>
        <autocomplete-async
          id="auto-complete-async"
          label="Identificação da norma"
          placeholder="ex: Lei 10406 ou Código Civil"
          .items=${this._optionsNorma}
          .onSearch=${e=>this._handleSearch(e)}
          .onSelect=${e=>this._handleSelect(e)}
          .onChange=${e=>this._handleChange(e)}
        ></autocomplete-async>
        <span class="ajuda">Informar a identificação da norma com tipo e número ou o apelido da norma. São aceitas abreviações como LCP e MPV.</span>
        <label class="lb-ementa">Ementa:</label>
        <div class="wp-ementa"><span class="sp-ementa">${(this._selectedNorma.ementa||"").slice(0,450)}</span></div>
      </div>`}};async function Hw(e,t,o,i,a){var r,n,s,l,c,u;const d=document.createElement("sl-dialog");document.body.appendChild(d),d.label="Assistente de alteração de norma",d.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const p=document.createRange().createContextualFragment(`\n  <style>\n    .ajuda {\n      font-size: var(--sl-font-size-small);\n      font-weight: normal;\n    }\n\n    sl-radio-group::part(base) {\n      display: grid;\n      grid-template-columns: 230px 1fr;\n      grid-gap: 0px;\n      flex-wrap: wrap;\n    }\n\n    sl-radio::part(base) {\n      display: flex;\n      flex-direction: row;\n    }\n\n    sl-radio-group sl-input::part(form-control) {\n      display: flex;\n      flex-direction: row;\n      gap: 10px;\n      align-items: center;\n      flex-wrap: wrap;\n    }\n\n    #dataNorma::part(form-control-input){\n      max-width: 160px;\n    }\n    #anoNorma::part(form-control-input){\n      max-width: 90px;\n    }\n\n    @media (max-width: 520px) {\n      sl-radio-group::part(base) {\n        display: flex;\n        grid-template-columns: column;\n        gap: 10px;\n        flex-wrap: wrap;\n      }\n    }\n  </style>\n  <autocomplete-norma id="auto-norma" urlAutocomplete="${a}"></autocomplete-norma>\n  <br />\n    <sl-input name="dispositivos" id="dispositivos" placeholder="ex: inciso I do § 3º do Art.1º" label="Dispositivo da norma" clearable></sl-input>\n    <span class="ajuda">Informar apenas um dispositivo. Depois poderão ser adicionados outros.</span>\n    <p class="ajuda" style="margin-block-end: 0;">\n      Terminar sempre com o artigo, por exemplo:\n    </p>\n    <ul class="ajuda" style="margin-block-start: .3em; margin-block-end: 0;">\n      <li>item 9 da alínea b do inciso V do parágrafo 4º do artigo 12-B</li>\n      <li>ali c, inc X, par 6, art 1</li>\n      <li>§ 8 art 32</li>\n      <li>parágrafo único do art 7º</li>\n    </ul>\n  </div>\n  <br/>\n  <sl-alert variant="warning" closable class="alert-closable">\n    <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>\n    <strong>Dados inválidos.</strong><br/>\n    <span>Revise os dados informados.</span>\n  </sl-alert>\n  <sl-button slot="footer" variant="default">Cancelar</sl-button>\n  <sl-button slot="footer" variant="primary">Ok</sl-button>\n  `);let h=new Fw;const m=p.querySelector("#auto-norma"),f=p.querySelector("#dispositivos"),v=p.querySelectorAll("sl-button"),g=v[0],b=v[1],y=p.querySelector("sl-alert"),x=y.querySelector("strong"),A=y.querySelector("span"),w=(e="Dados inválidos.",t="Revise os dados informados.")=>{x.innerHTML=e,A.innerHTML=t};m.onSelect=e=>{h=e},b.onclick=()=>{let a=!1;const r=null==f?void 0:f.value;if(w(),h.urn)if(r&&r.length>0)try{Ev(r,dv(hv(),cu.artigo.tipo))}catch(e){w("Dispositivo da norma não identificado.","Informe apenas um dispositivo em um dos formatos acima. Depois será possível alterar outros dispositivos."),a=!0}else w("Informe o dispositivo da norma a ser alterada.","Informe apenas um dispositivo em um dos formatos acima. Depois será possível alterar outros dispositivos."),a=!0;else w("Dados inválidos","Identifique uma norma a ser alterada."),a=!0;a?null==y||y.show():(t.focus(),null==y||y.hide(),null==d||d.hide(),null==d||d.remove(),e.norma=h.urn,o.dispatch(i.execute(e,h.urn,r)))},g.onclick=()=>{t.focus(),null==d||d.hide(),null==d||d.remove()},t.blur(),await d.appendChild(p),await d.show();const _=null===(u=null===(c=null===(l=null===(s=null===(n=null===(r=document.querySelector("#auto-norma"))||void 0===r?void 0:r.shadowRoot)||void 0===n?void 0:n.querySelector("#auto-complete-async"))||void 0===s?void 0:s.shadowRoot)||void 0===l?void 0:l.querySelector("#defaultInput"))||void 0===c?void 0:c.shadowRoot)||void 0===u?void 0:u.querySelector("#input");null==_||_.focus()}Mc([zc({type:String})],Vw.prototype,"urnInicial",void 0),Mc([zc({type:String})],Vw.prototype,"urlAutocomplete",void 0),Mc([zc({type:Function})],Vw.prototype,"onSelect",void 0),Mc([Fc()],Vw.prototype,"_selectedNorma",void 0),Mc([Fc()],Vw.prototype,"_optionsNorma",void 0),Mc([Uc("#auto-complete-async")],Vw.prototype,"_autoCompleteAsync",void 0),Vw=Mc([$c("autocomplete-norma")],Vw);const Gw=e=>!e.revisao||"Dispositivo removido"!==e.revisao.descricao;class Qw{constructor(){this.adicionado=!1}}const Kw=e=>{Array.from(document.querySelectorAll("#slDialogExibirDiferencas")).forEach((e=>document.body.removeChild(e)));const t=document.createElement("sl-dialog");t.id="slDialogExibirDiferencas",document.body.appendChild(t),t.label="Exibir diferenças do texto atual com";t.addEventListener("sl-after-hide",(()=>{setTimeout((()=>(()=>{try{e.quill&&e.quill.focus(),null==t||t.hide(),document.body.removeChild(t)}catch(e){}})()),0)}));const o=!!(e=Ww(e)).textoAntesRevisao;let i=Js(e.textoOriginal,e.textoAtual,"diffWords"),a=i.replace(/\s+/g," ");i=Zs(Js(a,i,"diffChars"),["ins","del"]);const r=e.adicionado||i===e.textoOriginal?"":'<sl-tab slot="nav" panel="modificado"> Texto original </sl-tab>',n=o?'<sl-tab slot="nav" panel="modificadoRevisao">Texto antes da revisão</sl-tab>':"";let s=o?Js(e.textoAntesRevisao,e.textoAtual,"diffWords"):void 0;o&&(a=s.replace(/\s+/g," "),s=Zs(Js(a,s,"diffChars"),["ins","del"])),e.textoOriginal=el(e.textoOriginal),e.textoAtual=el(e.textoAtual),o&&(e.textoAntesRevisao=el(e.textoAntesRevisao));const l=e.adicionado||i===e.textoOriginal?"":`<sl-tab-panel name="modificado">\n\n        <sl-card class="card-header texto-alterado">\n          <div slot="header">\n            Texto original\n          </div>\n          <p class="texto-quill">\n            ${e.textoOriginal}\n          </p>\n        </sl-card>\n\n        <sl-card class="card-header texto-alterado">\n          <div slot="header">\n            Diferença\n          </div>\n          <p class="texto-quill">\n            ${i}\n          </p>\n        </sl-card>\n\n        <sl-card class="card-header texto-alterado">\n          <div slot="header">\n          Texto atual\n          </div>\n          <p class="texto-quill">\n            ${e.textoAtual}\n          </p>\n        </sl-card>\n\n      </sl-tab-panel>`,c=o?`<sl-tab-panel name="modificadoRevisao">\n\n          <sl-card class="card-header texto-alterado">\n            <div slot="header">\n              Texto antes da revisão\n            </div>\n            <p class="texto-quill">\n              ${e.textoAntesRevisao}\n            </p>\n          </sl-card>\n\n          <sl-card class="card-header texto-alterado">\n            <div slot="header">\n              Diferença\n            </div>\n            <p class="texto-quill">\n              ${s}\n            </p>\n          </sl-card>\n\n          <sl-card class="card-header texto-alterado">\n            <div slot="header">\n              Texto atual\n            </div>\n            <p class="texto-quill">\n              ${e.textoAtual}\n            </p>\n          </sl-card>\n\n        </sl-tab-panel>`:"",u=document.createRange().createContextualFragment(`\n  <style>\n\n    sl-dialog {\n      --width: 90vw;\n    }\n    sl-dialog::part(base) {\n      max-width: 1200px;\n      margin: 0 auto;\n    }\n\n    .texto-alterado ins {\n      background-color: #c6ffc6;\n      text-decoration: none;\n    }\n\n    .texto-alterado del {\n      background-color: #ffc6c6;\n    }\n\n    p .texto-quill {\n      white-space: pre-wrap;\n      text-align: justify;\n      text-indent: 0 !important;\n    }\n\n    sl-tab-panel::part(base) {\n      padding-top: 1rem;\n      display: flex;\n      flex-direction: row;\n      gap: 1rem;\n      align-items: stretch;\n      justify-content: center;\n    }\n\n    sl-card {\n      box-shadow: var(--sl-shadow-x-large) !important;\n      width: 33%;\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n    }\n\n    @media (max-width: 768px) {\n      sl-card {\n        width: 100%;\n      }\n    }\n\n    sl-card::part(base){\n      height: 100%;\n    }\n\n    sl-card::part(header) {\n      background-color: var(--sl-color-neutral-200);\n    }\n\n\n    @media (max-width: 768px) {\n      sl-tab-panel::part(base) {\n        flex-direction: column;\n      }\n      sl-dialog {\n        --width: 100vw !important;\n      }\n    }\n\n  </style>\n  <div class="texto-alterado">\n    <sl-tab-group>\n      ${r}\n      ${n}\n\n      ${l}\n      ${c}\n    </sl-tab-group>\n  </div>\n\n\n  <sl-button slot="footer" variant="primary">Fechar</sl-button>\n  `);u.querySelectorAll("sl-button")[0].onclick=()=>null==t?void 0:t.hide(),e.quill&&e.quill.blur(),t.appendChild(u),t.show()},Ww=e=>(e.textoAtual.includes("....")&&(e.textoAtual="...................."),e),Xw=e=>{const t="alertaInfo";if(!document.getElementById(t)){const t=Object.assign(document.createElement("sl-alert"),{variant:"danger",closable:!0,duration:4e3,innerHTML:`\n          <sl-icon name="exclamation-octagon" slot="icon" id="alertaInfo"></sl-icon>\n          ${e}\n        `});document.body.append(t),t.toast()}};let Yw=class extends(Gc(iA)(Jl)){constructor(){super(),this.lexmlEtaConfig=new Qc,this.modo=up.EMENDA,this.eventosOnChange=[],this.inscricoes=[],this._idSwitchRevisao="chk-em-revisao",this._idBadgeQuantidadeRevisao="badge-marca-alteracao",this.exibirBotoesParaTratarTodas=!1,this.onSelectionChange=(e,t,o)=>{0===(null==e?void 0:e.length)&&o===Quill.sources.USER&&this.ajustarLinkParaNorma()},this.listenerRotulo=e=>{e.stopImmediatePropagation(),this.renumerarElemento()},this.listenerNotaAlteracao=e=>{e.stopImmediatePropagation(),this.editarNotaAlteracao(e.detail.elemento)},this.listenerToggleExistencia=e=>{e.stopImmediatePropagation(),this.toggleExistenciaElemento(e.detail.elemento)},this.listenerMensagem=e=>{var t,o;e.stopImmediatePropagation();const i=this.quill.linhaAtual;if(i)if($h.RENUMERAR_DISPOSITIVO===(null===(o=null===(t=e.detail)||void 0===t?void 0:t.mensagem)||void 0===o?void 0:o.descricao))this.renumerarElemento();else{const t=i.blotConteudo,o=this.criarElemento(i.uuid,i.uuid2,i.lexmlId,i.tipo,t.html,i.numero,i.hierarquia);iA.dispatch(Vu.execute(o,e.detail.mensagem))}},this.listenerAceitarRevisao=e=>{e.stopImmediatePropagation(),this.aceitarRevisao(e.detail.elemento)},this.listenerRejeitarRevisao=e=>{e.stopImmediatePropagation(),this.rejeitarRevisao(e.detail.elemento)},this.navegarEntreMarcasRevisao=e=>{const t="abaixo"===e?"next":"prev";let o=this.quill.linhaAtual;for(o.elemento.revisao&&(o=o[t]);o&&!o.elemento.revisao;)o=o[t];o&&(this.quill.desmarcarLinhaAtual(this.quill.linhaAtual),this.quill.marcarLinhaAtual(o))},this.checkedSwitchMarcaAlteracao=()=>{const e=document.getElementById(this._idSwitchRevisao);ag(e,iA.getState().elementoReducer.emRevisao)},this.disabledParagrafoElementoRemovido=e=>{var t;(null!==(t=e.elementos)&&void 0!==t?t:[]).forEach((e=>{const t=document.getElementById("texto__dispositivo"+e.uuid);t&&(e.revisao&&"Dispositivo removido"===e.revisao.descricao?t.setAttribute("contenteditable","false"):t.setAttribute("contenteditable","true"))}))},this.tabIndex=-1}get quill(){return this._quill}createRenderRoot(){return this}async firstUpdated(){this.inicializar(this.configEditor()),this.querySelectorAll(".ql-bold, .ql-italic, .ql-script").forEach((e=>{e.addEventListener("click",(e=>{e.stopImmediatePropagation()}))}))}stateChanged(e){var t,o,i;this.quill?(this.quill.undoEstruturaVazio=0===(null!==(t=e.elementoReducer.past)&&void 0!==t?t:[]).length,this.quill.redoEstruturaVazio=0===(null!==(o=e.elementoReducer.future)&&void 0!==o?o:[]).length,e.elementoReducer.ui&&(e.elementoReducer.ui.message?Xw(e.elementoReducer.ui.message.descricao):"AtualizacaoAlertas"!==(null===(i=e.elementoReducer.ui.events[0])||void 0===i?void 0:i.stateType)&&this.processarStateEvents(e.elementoReducer.ui.events))):this.quillNaoInicializado(e)}disconnectedCallback(){this.inscricoes.forEach((e=>e.cancel())),this.destroiQuill(),super.disconnectedCallback()}render(){return Rl`
      <style>
        :host {
          --lx-eta-editor-height: 100%;
          --lx-eta-editor-overflow: display;
        }

        lexml-eta-editor .ql-editor {
          white-space: normal;
        }

        #lx-eta-editor {
          overflow: var(--lx-eta-editor-overflow);
          display: block;
          height: var(--heightEmenda);
        }
        .sl-toast-stack sl-alert::part(base) {
          background-color: var(--sl-color-danger-100);
        }
        .checkBoxRevisao {
          padding: 3px 5px;
          margin: 5px 5px 5px 4px;
        }
      </style>
      <div id="lx-eta-box">
        <div id="lx-eta-barra-ferramenta">
          <button class="ql-bold" title="Negrito (Ctrl+b)"></button>
          <button class="ql-italic" title="Itálico (Ctrl+i)"></button>
          <button class="ql-script" value="sub" title="Subscrito"></button>
          <button class="ql-script" value="super" title="Sobrescrito"></button>

          <button @click=${this.onClickUndo} class="lx-eta-ql-button lx-eta-btn-desfazer" title="Desfazer (Ctrl+Z)">
            <svg class="icon-undo-redo" id="undo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>
          <button @click=${this.onClickRedo} class="lx-eta-ql-button" title="Refazer (Ctrl+y)">
            <svg class="icon-undo-redo lx-eta-rebate-180-graus" id="redo" viewBox="0 0 512 512">
              <path
                d="M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z"
              />
            </svg>
          </button>
          <button type="button" class="ql-clean" title="Remover formatação">
            <svg class="" viewBox="0 0 18 18">
              <line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"></line>
              <line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"></line>
              <line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"></line>
              <line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"></line>
              <rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"></rect>
            </svg>
          </button>

          <lexml-switch-revisao
          class="revisao-container"
          .nomeSwitch="${this._idSwitchRevisao}"
          .nomeBadgeQuantidadeRevisao="${this._idBadgeQuantidadeRevisao}"
          modo="${this.modo}"
          >
          </lexml-switch-revisao>

          <sl-button class="button-navegacao-marca" variant="default" size="small" circle @click=${()=>this.navegarEntreMarcasRevisao("abaixo")}>
            <sl-icon-button name="arrow-down"></sl-icon-button>
          </sl-button>

          <sl-button class="button-navegacao-marca" variant="default" size="small" circle @click=${()=>this.navegarEntreMarcasRevisao("acima")}>
            <sl-icon-button name="arrow-up"></sl-icon-button>
          </sl-button>

          ${this.exibirBotoesParaTratarTodas?this.renderBotoesParaTratarTodasRevisoes():""}

          <input type="button" @click=${this.artigoOndeCouber} class="${"ql-hidden"} btn--artigoOndeCouber" value="Propor artigo onde couber" title="Artigo onde couber"></input>
          <div class="mobile-buttons">
            <button class="mobile-button btn-comando" title="Comando" @click=${this.showComandoEmendaModal}>
              <sl-icon name="code"></sl-icon>
              <span>Comando</span>
            </button>
            <button class="mobile-button btn-dicas" title="Dicas" @click=${this.showAjudaModal}>
              <sl-icon name="lightbulb"></sl-icon>
              <span>Dicas</span>
            </button>
            <button class="mobile-button" title="Atalhos" @click=${this.showAtalhosModal}>
              <sl-icon name="keyboard"></sl-icon>
              <span>Atalhos</span>
            </button>
          </div>
        </div>
        <div id="lx-eta-editor"></div>
      </div>
      <elix-toast id="toast-alerta" duration="3000">
        <div id="toast-msg"></div>
      </elix-toast>
      <div id="lx-eta-buffer"><p></p></div>
      <lexml-ajuda-modal></lexml-ajuda-modal>
      <lexml-emenda-comando-modal></lexml-emenda-comando-modal>
      <lexml-atalhos-modal></lexml-atalhos-modal>
      <!-- <lexml-sufixos-modal></lexml-sufixos-modal> -->
    `}renderBotoesParaTratarTodasRevisoes(){return Rl`
      <sl-icon-button id="btnRejeitarTodasRevisoes" name="x" label="" title="Rejeitar Revisões" ?disabled=${!0} @click=${()=>this.rejeitarTodasRevisoes()}>
        Rejeitar Revisões
      </sl-icon-button>

      <sl-icon-button id="btnAceitarTodasRevisoes" name="check-lg" label="" title="Aceitar Revisões" ?disabled=${!0} @click=${()=>this.aceitarTodasRevisoes()}>
        Aceitar Revisões
      </sl-icon-button>
    `}showAjudaModal(){this.ajudaModal.show()}showAtalhosModal(){this.atalhosModal.show()}showComandoEmendaModal(){this.comandoEmendaModal.show()}formatacaoAlterada(){var e;(null===(e=document.getSelection())||void 0===e?void 0:e.toString())&&this.agendarEmissaoEventoOnChange("toolbar")}onClickUndo(){this.quill.undo()}onClickRedo(){this.quill.redo()}artigoOndeCouber(){}ajustarLinkParaNorma(){const e=document.querySelector("a.ql-preview"),t=null==e?void 0:e.getAttribute("href");if(null==t?void 0:t.startsWith("urn")){const o="https://normas.leg.br/?urn="+t;e.setAttribute("href",o),e.innerHTML=(e=>{var t;const o=pm(e),i=sm(o),a=null===(t=nm(o))||void 0===t?void 0:t.descricao,r=cm(o);return(a||"")+(i?" nº "+i:"")+(r.length>7?" de "+r:"")})(t)}}onBold(e){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("bold",e),this.formatacaoAlterada())}onItalic(e){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("italic",e),this.formatacaoAlterada())}onScript(e){this.quill.keyboard.verificarOperacaoTecladoPermitida()&&(this.quill.format("script",e),this.formatacaoAlterada())}onOperacaoInvalida(){this.alertar("Operação não permitida.")}isDesmembramento(e,t,o){return 0!==(t+o).localeCompare(e)}adicionarElemento(e){var t,o;const i=this.quill.linhaAtual,a=i.blotConteudo,r=null!==(t=this.quill.inicioConteudoAtual)&&void 0!==t?t:0,n=null!==(o=r+a.tamanho)&&void 0!==o?o:0;let s="",l="";if(e.index===r)s="",l=a.html;else if(e.index===n)s=a.html,l="";else{const t=n-e.index;s=this.quill.getConteudoHtmlParteLinha(a,0,a.tamanho-t),l=this.quill.getConteudoHtmlParteLinha(a,e.index-r,t)}const c=this.criarElemento(i.uuid,i.uuid2,i.lexmlId,i.tipo,s,i.numero,i.hierarquia);if(this.isDesmembramento(a.htmlAnt,s,l)){const e=this.criarElemento(i.uuid,i.uuid2,i.lexmlId,i.tipo,s+l,i.numero,i.hierarquia);iA.dispatch(Uu.execute(e))}iA.dispatch(du.execute(c,l))}editarNotaAlteracao(e){((e,t,o)=>{if(Gw(e)){const i=document.createElement("sl-dialog");document.body.appendChild(i),i.label="Nota de alteração",i.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const a=document.createRange().createContextualFragment('\n    <sl-radio-group fieldset label="Selecione o tipo de nota de alteração:">\n      <sl-radio class="nota" id="nota-nr" value="NR">Nova redação \'(NR)\'</sl-radio>\n      <sl-radio class="nota" id="nota-vazia" value="">Sem nota de alteração</sl-radio>\n    </sl-radio-group>\n    <sl-button slot="footer" variant="default">Cancelar</sl-button>\n    <sl-button slot="footer" variant="primary">Ok</sl-button>\n    '),r={NR:a.querySelector("#nota-nr"),VZ:a.querySelector("#nota-vazia")},n="AC"===e.notaAlteracao?void 0:e.notaAlteracao;r[n||"VZ"].checked=!0;const s=a.querySelectorAll("sl-button"),l=s[0];s[1].onclick=()=>{const t=document.querySelector('sl-radio.nota[aria-checked="true"]').value;e.notaAlteracao!==t&&o.dispatch(Fd.execute(e,t)),null==i||i.hide(),null==i||i.remove()},l.onclick=()=>{t.focus(),null==i||i.hide(),null==i||i.remove()},t.blur(),i.appendChild(a),i.show(),setTimeout((()=>{r[e.notaAlteracao||"VZ"].focus()}),0)}})(e,this.quill,iA)}async renumerarElemento(){var e,t,o,i;const a=this.quill.linhaAtual,r=this.criarElemento(null!==(e=a.uuid)&&void 0!==e?e:0,null!==(t=a.uuid2)&&void 0!==t?t:"",a.lexmlId,null!==(o=a.tipo)&&void 0!==o?o:"","",a.numero,a.hierarquia,a.descricaoSituacao,a.existeNaNormaAlterada);if(!((e,t)=>{var o,i,a,r;const n=Zm(e,t);return!(void 0===n||op(n)||void 0===(null===(i=null===(o=t.hierarquia)||void 0===o?void 0:o.pai)||void 0===i?void 0:i.uuidAlteracao)||t.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL||t.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO||t.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO||Zp(n)&&n.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&"1"===(null===(a=Mp(n))||void 0===a?void 0:a.numero)&&(null===(r=Mp(n))||void 0===r?void 0:r.situacao.descricaoSituacao)!==Ud.DISPOSITIVO_ADICIONADO)})(iA.getState().elementoReducer.articulacao,r))return void this.alertar("Nessa situação, não é possível renumerar o dispositivo");const n=document.createElement("sl-dialog");document.body.appendChild(n),n.label="Informar numeração",n.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const s=document.createRange().createContextualFragment(`\n      <div class="input-validation-required">\n        <sl-input type="text" help-text="${(e=>{var t;const o=e.toLowerCase(),i=null===(t=cu[o].descricao)||void 0===t?void 0:t.toLowerCase();if(o){if(["artigo","paragrafo","item"].includes(o))return"Digite o número do "+i+". Ex: 5, 6-A"+("paragrafo"===o?", único":"");if("alinea"===o)return"Digite a letra da "+i+". Ex: b, c-A";return`Digite o número romano d${["parte","secao","subsecao"].includes(o)?"a":"o"} ${i}. Ex: II, III-A'`}return""})(null!==(i=r.tipo)&&void 0!==i?i:"")}" label="Numeração do dispositivo:" clearable></sl-input>\n        <br/>\n      </div>\n      <br/>\n      <sl-alert variant="warning" closable class="alert-closable">\n        <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>\n        <div class="erro"></div>\n      </sl-alert>\n      <sl-button slot="footer" variant="default">Cancelar</sl-button>\n      <sl-button slot="footer" variant="primary">Ok</sl-button>\n    `),l=s.querySelector("sl-input"),c=`${u=a.blotRotulo.rotulo,u.replace(/\./g,"").replace(/["“]/g,"").replace(/^Parte/i,"").replace(/^Livro/i,"").replace(/^T[ií]tulo/i,"").replace(/^Cap[iíÍ]tulo/i,"").replace(/^Se[cçÇ][aãÃ]o/i,"").replace(/^Subse[cçÇ][aãÃ]o/i,"").replace(/^Artigo$/i,"").replace(/^Par[aáÁ]grafo$/i,"").replace(/^Inciso$/i,"").replace(/^Al[iíÍ]nea$/i,"").replace(/^Item$/i,"").replace(/Art/i,"").replace(/§/i,"").replace(/§/i,"").replace(/[º]/i,"").replace(/[–-][/s]*$/,"").replace(/[)][/s]*$/,"").trim()}`;var u;l.value=c;const d=s.querySelectorAll("sl-button"),p=d[0],h=d[1],m=s.querySelector(".erro"),f=s.querySelector("sl-alert");h.onclick=()=>{var e;this.quill.focus(),null==n||n.hide(),null==n||n.remove(),(null===(e=l.value)||void 0===e?void 0:e.trim().toLowerCase())!==(null==c?void 0:c.toLowerCase())&&iA.dispatch(nd.execute(r,l.value.trim()))},p.onclick=()=>{this.quill.focus(),null==n||n.hide(),null==n||n.remove()};const v=()=>{const e=l.value;return/^\s*$/.test(e)?"A numeração não pode ser vazia.":""},g=e=>{let t=v();t||!r.tipo||((e,t)=>{const o=e.split("-"),i=o[0],a="-"+o.slice(1,o.length).join("-"),r=(Lm[t]||Em)(i)&&"0"!==i;return 1===o.length?r:r&&/^(-[a-z]{1,2}){1,2}$/i.test(a)})(l.value,r.tipo)||(t="Numeração inválida."),m.innerText=t,t?null==f||f.show():null==f||f.hide(),h.disabled=Boolean(t),h.disabled||"Enter"===e.key&&h.click()};l.addEventListener("keyup",g),l.addEventListener("sl-clear",g),n.appendChild(s),null==n||n.show(),h.disabled=Boolean(v()),setTimeout((()=>l.focus()),0)}toggleExistencia(){var e,t,o;const i=this.quill.linhaAtual,a=this.criarElemento(null!==(e=i.uuid)&&void 0!==e?e:0,null!==(t=i.uuid2)&&void 0!==t?t:"",i.lexmlId,null!==(o=i.tipo)&&void 0!==o?o:"","",i.numero,i.hierarquia,i.descricaoSituacao,i.existeNaNormaAlterada);this.toggleExistenciaElemento(a)}adicionaAgrupador(){this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento)}adicionarAgrupadorArtigo(e){((e,t,o)=>{var i,a;Array.from(document.querySelectorAll("#slDialogAdicionarAgrupadorArtigo")).forEach((e=>document.body.removeChild(e)));const r=null===(a=null===(i=e.hierarquia)||void 0===i?void 0:i.pai)||void 0===a?void 0:a.tipo,n=e.agrupador?e.tipo:"Articulacao"===r?"Capitulo":r,s=document.createElement("sl-dialog");s.id="slDialogAdicionarAgrupadorArtigo",document.body.appendChild(s),s.label="Adicionar agrupador de artigo",s.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const l=document.createRange().createContextualFragment(`\n  <style>\n\n    #chkManterNoMesmoGrupoDeAspas {\n      margin: 10px;\n    }\n    #chkManterNoMesmoGrupoDeAspas[disabled] {\n      display: none;\n    }\n    #rdgPosicao {\n      margin-top: 20px;\n    }\n\n  </style>\n  <div class="agrupadores">\n    <sl-radio-group fieldset label="Tipo de agrupador" id="rdgTipoAgrupador">\n      <sl-radio class="tipo-agrupador" id="Parte" value="Parte">Parte</sl-radio>\n      <sl-radio class="tipo-agrupador" id="Livro" value="Livro">Livro</sl-radio>\n      <sl-radio class="tipo-agrupador" id="Titulo" value="Titulo">Título</sl-radio>\n      <sl-radio class="tipo-agrupador" id="Capitulo" value="Capitulo">Capítulo</sl-radio>\n      <sl-radio class="tipo-agrupador" id="Secao" value="Secao">Seção</sl-radio>\n      <sl-radio class="tipo-agrupador" id="Subsecao" value="Subsecao">Subseção</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div style="display: ${"Artigo"===e.tipo?"none":"block"};">\n    <sl-radio-group fieldset label="Posicionamento" id="rdgPosicao">\n      <sl-radio class="posicao-agrupador" id="posicao-antes" value="antes">Antes</sl-radio>\n      <sl-radio class="posicao-agrupador" id="posicao-depois" value="depois" checked>Depois</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div>\n    <sl-checkbox id="chkManterNoMesmoGrupoDeAspas">Manter no mesmo grupo de aspas</sl-checkbox>\n  </div>\n  <sl-button slot="footer" variant="default">Cancelar</sl-button>\n  <sl-button slot="footer" variant="primary">Ok</sl-button>\n  `),c=Array.from(l.querySelectorAll(".tipo-agrupador")),u=[...e.tiposAgrupadoresQuePodemSerInseridosAntes];"Artigo"!==e.tipo&&u.push(...e.tiposAgrupadoresQuePodemSerInseridosDepois);const d=1===u.length?u[0]:n,p=c.find((e=>e.value===d));p.checked=!0,c.forEach((e=>{const t=e;t.disabled=!u.includes(t.value),t.checked=!t.disabled&&t.checked,t.checked&&setTimeout((()=>{t.focus()}),0)}));const h=l.querySelectorAll("sl-button"),m=h[0],f=h[1],v=l.querySelector("#posicao-antes"),g=l.querySelector("#posicao-depois"),b=l.querySelector("#chkManterNoMesmoGrupoDeAspas");let y=!1;b.checked=y;const x="Artigo"===e.tipo?au:ru,A=()=>{var t;const o=null===(t=document.querySelector('sl-radio.posicao-agrupador[aria-checked="true"]'))||void 0===t?void 0:t.value,i=e.abreAspas&&e.fechaAspas;e.agrupador?i?(b.disabled=!1,b.checked=y):!e.abreAspas&&!e.fechaAspas||e.abreAspas&&"depois"===o||e.fechaAspas&&"antes"===o?(b.disabled=!0,b.checked=!0):(b.disabled=!1,b.checked=y):(b.disabled=!0,b.checked=!e.abreAspas)};b.onchange=e=>{y=e.target.checked},setTimeout((()=>A()),0),l.querySelector("#rdgPosicao").onclick=()=>{A()},l.querySelector("#rdgTipoAgrupador").onclick=t=>{"Artigo"!==e.tipo&&u.includes(t.target.value)&&(v.disabled=!e.tiposAgrupadoresQuePodemSerInseridosAntes.includes(t.target.value),g.disabled=!e.tiposAgrupadoresQuePodemSerInseridosDepois.includes(t.target.value),v.disabled||g.disabled?(v.checked=!v.disabled,g.checked=!g.disabled):(v.checked=!1,g.checked=!0),A())},f.onclick=()=>{const t=document.querySelector('sl-radio.tipo-agrupador[aria-checked="true"]').value,i="Artigo"===e.tipo?"antes":document.querySelector('sl-radio.posicao-agrupador[aria-checked="true"]').value,a=b.checked;t&&o.dispatch(x.execute(e,t,void 0,i,a)),null==s||s.hide(),document.body.removeChild(s)},m.onclick=()=>{t.focus(),null==s||s.hide(),document.body.removeChild(s)},setTimeout((()=>p.click()),0),t.blur(),s.appendChild(l),s.show()})(e,this.quill,iA)}toggleExistenciaElemento(e){const t=e.existeNaNormaAlterada?Wu:Ku;iA.dispatch(t.execute(e))}removerElementoSemTexto(e){var t,o;const i=this.quill.linhaAtual,a=this.criarElemento(null!==(t=i.uuid)&&void 0!==t?t:0,i.uuid2,i.lexmlId,null!==(o=i.tipo)&&void 0!==o?o:"","",i.numero,i.hierarquia);iA.dispatch(Bd.execute(a,e))}removerElemento(){var e,t,o;const i=this.quill.linhaAtual,a=null===(e=this.quill.linhaAtual.prev)||void 0===e?void 0:e.elemento,r=this.criarElemento(null!==(t=i.uuid)&&void 0!==t?t:0,i.uuid2,i.lexmlId,null!==(o=i.tipo)&&void 0!==o?o:"","",i.numero,i.hierarquia);iA.dispatch(ad.execute(r,a))}moverElemento(e){const t=this.quill.linhaAtual;if(t){const o=t.blotConteudo.html,i=this.criarElemento(t.uuid,t.uuid2,t.lexmlId,t.tipo,o,t.numero,t.hierarquia);"ArrowUp"===e.key?iA.dispatch(td.execute(i)):"ArrowDown"===e.key&&iA.dispatch(Zu.execute(i))}}transformarElemento(e){const t=this.quill.linhaAtual,o=t.blotConteudo.html,i=this.criarElemento(t.uuid,t.uuid2,t.lexmlId,t.tipo,o,t.numero,t.hierarquia);"o"===e.key.toLowerCase()?iA.dispatch(((e,t)=>new ud(cu[t.toLowerCase()],"Transformar "+e.tipo+"em "+cu[t.toLowerCase()].name,"transformar"+e.tipo+"Em"+cu[t.toLowerCase()].name).execute(e))(i,cu.omissis.name)):Tw.keys.TAB&&iA.dispatch(e.shiftKey?{type:"SHIFT_TAB",atual:i}:(e=>({type:"TAB",atual:e}))(i))}elementoSelecionado(e){var t;const o=this.quill.linhaAtual;if(o){const i=this.criarElemento(e,o.uuid2,o.lexmlId,null!==(t=o.tipo)&&void 0!==t?t:"","",o.numero,o.hierarquia);iA.dispatch(Hu.execute(i)),this.quill.processandoMudancaLinha=!1}}undoRedoEstrutura(e){"undo"===e?iA.dispatch({type:"UNDO"}):iA.dispatch({type:"REDO"})}processarStateEvents(e){const t=e.filter((e=>e.stateType===nf.ElementoSelecionado)).slice(-1)[0];null==e||e.forEach((o=>{var i;switch(o.stateType){case nf.DocumentoCarregado:this.destroiQuill(),this.inicializar(this.configEditor()),this.carregarArticulacao(null!==(i=o.elementos)&&void 0!==i?i:[]);break;case nf.InformarDadosAssistente:Hw(o.elementos[0],this.quill,iA,lu,this.lexmlEtaConfig.urlAutocomplete);break;case nf.InformarNorma:!async function(e,t,o,i,a){const r=document.createElement("sl-dialog");document.body.appendChild(r),r.label="Dados da norma vigente",r.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const n=document.createRange().createContextualFragment(`\n\n  <div class="input-validation-required">\n    <autocomplete-norma id="auto-norma" urnInicial="${e.norma}" urlAutocomplete="${a}"></autocomplete-norma>\n  </div>\n  <br/>\n  <sl-alert variant="warning" closable class="alert-closable">\n    <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>\n    <strong>Dados inválidos.</strong><br/>\n    Identifique uma norma a ser alterada.\n  </sl-alert>\n  <sl-button slot="footer" variant="default">Cancelar</sl-button>\n  <sl-button slot="footer" variant="primary">Ok</sl-button>\n  `),s=n.querySelector("#auto-norma"),l=n.querySelectorAll("sl-button"),c=l[0],u=l[1],d=n.querySelector("sl-alert");let p="";s.onSelect=e=>{p=e.urn},u.onclick=()=>{p?(t.focus(),null==d||d.hide(),null==r||r.hide(),null==r||r.remove(),e.norma=p,o.dispatch(i.execute(e))):null==d||d.show()},c.onclick=()=>{t.focus(),null==r||r.hide(),null==r||r.remove()},t.blur(),await r.appendChild(n),await r.show(),s.focusAutoComplete()}(o.elementos[0],this.quill,iA,Bu,this.lexmlEtaConfig.urlAutocomplete);break;case nf.ElementoIncluido:this.inserirNovoElementoNoQuill(o.elementos[0],o.referencia,!0),this.inserirNovosElementosNoQuill(o,!0);break;case nf.ElementoModificado:case nf.ElementoRestaurado:this.atualizarQuill(o),this.atualizarOmissis(o),e[e.length-1]===o&&this.marcarLinha(o);break;case nf.ElementoSuprimido:this.atualizarSituacao(o),e[e.length-1]===o&&this.marcarLinha(o);break;case nf.ElementoRemovido:this.removerLinhaQuill(o);break;case nf.ElementoRenumerado:this.renumerarQuill(o);break;case nf.ElementoValidado:this.atualizarMensagemQuill(o);break;case nf.ElementoSelecionado:this.atualizarAtributos(o),t===o&&this.montarMenuContexto(o),this.atualizarMensagemQuill(o);break;case nf.ElementoMarcado:setTimeout((()=>this.marcarLinha(o)),100);break;case nf.SituacaoElementoModificada:this.atualizarQuill(o),this.atualizarSituacao(o),this.atualizarAtributos(o),this.atualizarMensagemQuill(o),this.atualizarOmissis(o);break;case nf.RevisaoAtivada:this.checkedSwitchMarcaAlteracao();break;case nf.RevisaoDesativada:this.checkedSwitchMarcaAlteracao(),this.atualizarEstiloBotaoRevisao();break;case nf.RevisaoAceita:this.processaRevisoesAceitas(e,o);break;case nf.RevisaoAdicionalRejeitada:this.removerLinhaQuill(o)}this.disabledParagrafoElementoRemovido(o),this.quill.limparHistory()})),this.indicadorMarcaRevisao(e),this.indicadorTextoModificado(e),this.atualizarStatusBotoesRevisao();const o=[nf.ElementoModificado,nf.ElementoSuprimido,nf.ElementoRestaurado,nf.ElementoIncluido,nf.ElementoRemovido,nf.ElementoRenumerado],i=null==e?void 0:e.filter((e=>o.includes(e.stateType))).map((e=>e.stateType));(null==i?void 0:i.length)&&(this.eventosOnChange.push(...i),this.agendarEmissaoEventoOnChange("stateEvents",i))}processaRevisoesAceitas(e,t){this.isAceitandoRevisoesDeExclusao(t)?this.removerLinhaQuill(t):(this.atualizarAtributos(t),e[e.length-1]===t&&this.montarMenuContexto(t),this.atualizarMensagemQuill(t))}isAceitandoRevisoesDeExclusao(e){var t,o;return null!==(o=null===(t=e.elementos)||void 0===t?void 0:t.some((e=>{var t,o;return(null===(o=null===(t=this.quill.getLinha(e.uuid))||void 0===t?void 0:t.elemento.revisao)||void 0===o?void 0:o.stateType)===nf.ElementoRemovido})))&&void 0!==o&&o}existeReinclusaoDoElemento(e,t){return e.some((e=>e.uuid===t.uuid))}marcarLinha(e){try{this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);const t=e.elementos[0],o=this.quill.getLinha(t.uuid);this.quill.atualizarLinhaCorrente(o),this.elementoSelecionado(o.uuid);const i=this.quill.getIndex(o.blotConteudo);try{this.quill.setIndex(i,Quill.sources.SILENT)}catch(e){}e.moverParaFimLinha&&setTimeout((()=>{const e=this.quill.getSelection().index+this.quill.linhaAtual.blotConteudo.html.length;this.quill.setSelection(e,0,Quill.sources.USER)}),0)}catch(e){}}processarEscolhaMenu(e){var t,o,i,a,r,n,s;if(e===nd)this.renumerarElemento();else if(e===Fd)this.editarNotaAlteracao(this.quill.linhaAtual.elemento);else if(e instanceof iu)this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento);else if(e===ad){const r=this.quill.linhaAtual,n=this.criarElemento(null!==(t=r.uuid)&&void 0!==t?t:0,r.uuid2,r.lexmlId,null!==(o=r.tipo)&&void 0!==o?o:"","",r.numero,r.hierarquia);n.conteudo.texto=null!==(i=r.blotConteudo.html)&&void 0!==i?i:"";const s=null===(a=this.quill.linhaAtual.prev)||void 0===a?void 0:a.elemento;iA.dispatch(e.execute(n,s))}else if(e===Sf)this.exibirDiferencas(this.quill.linhaAtual.elemento);else{const t=this.quill.linhaAtual,o=this.criarElemento(null!==(r=t.uuid)&&void 0!==r?r:0,t.uuid2,t.lexmlId,null!==(n=t.tipo)&&void 0!==n?n:"","",t.numero,t.hierarquia);o.conteudo.texto=null!==(s=t.blotConteudo.html)&&void 0!==s?s:"",iA.dispatch(e.execute(o))}}inserirNovoElementoNoQuill(e,t,o){var i,a;const r=(e,t)=>{this.quill.desmarcarLinhaAtual(t),this.quill.marcarLinhaAtual(e);try{this.quill.setIndex(this.quill.getIndex(e.blotConteudo),Quill.sources.SILENT)}catch(e){}},n=this.quill.getLinha(e.uuid);if(n)return n.atualizarElemento(e),void(o&&r(n,this.quill.linhaAtual));const s=this.quill.getLinha((null===(i=e.elementoAnteriorNaSequenciaDeLeitura)||void 0===i?void 0:i.uuid)||t.uuid);if(s){const t=Ew.criarContainerLinha(e);s.next?t.insertInto(this.quill.scroll,s.next):t.insertInto(this.quill.scroll);const i=iA.getState().elementoReducer.modo===up.EMENDA_ARTIGO_ONDE_COUBER;""!==(null===(a=this.quill.linhaAtual)||void 0===a?void 0:a.blotConteudo.html)||""===t.blotConteudo.html||i||"Omissis"===e.tipo?o&&!this.timerOnChange&&r(t,this.quill.linhaAtual):this.quill.linhaAtual.blotConteudo.htmlAnt=this.quill.linhaAtual.blotConteudo.html,t.descricaoSituacao=e.descricaoSituacao,t.existeNaNormaAlterada=e.existeNaNormaAlterada,t.setEstilo(e)}}inserirNovosElementosNoQuill(e,t){var o;const i=null!==(o=e.elementos)&&void 0!==o?o:[];for(let e=1;e<i.length;e++)this.inserirNovoElementoNoQuill(i[e],i[e-1],t)}atualizarSituacao(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).forEach((e=>{var t;o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,"Ementa"===e.tipo?void 0:o),o&&e.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=e.descricaoSituacao,o.setEstilo(e),o.atualizarElemento(e))}))}atualizarAtributos(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).forEach((e=>{var t;o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,"Ementa"===e.tipo?void 0:o),o&&o.atualizarElemento(e)}))}atualizarOmissis(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).forEach((e=>{var t,i,a,r,n;if(e.dispositivoAlteracao&&(o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,o),o&&Vh(null===(i=o.blotConteudo)||void 0===i?void 0:i.html).indexOf(Hd)>=0&&"Omissis"===e.tipo&&(o.blotConteudo.html=Ew.montarSpanOmissisAsString()),(null===(a=e.conteudo)||void 0===a?void 0:a.texto)!==(null==o?void 0:o.blotConteudo.html))){Vh(null!==(n=null===(r=e.conteudo)||void 0===r?void 0:r.texto)&&void 0!==n?n:"").indexOf(Hd)>=0&&(null==o||o.domNode.classList.add("container_elemento--omissis"))}}))}atualizarQuill(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).map((e=>{var t,i,a,r,n,s,l;if(o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,"Ementa"===e.tipo?void 0:o),o){let t=!1;e.editavel!==o.editavel&&(o.editavel=e.editavel),e.rotulo!==(null===(i=o.blotRotulo)||void 0===i?void 0:i.html)&&(o.numero=null!==(a=e.numero)&&void 0!==a?a:"",null===(r=o.blotRotulo)||void 0===r||r.format(XA.blotName,e.rotulo)),e.nivel!==o.nivel&&(o.nivel=e.nivel,o.format(Sw.blotName,e),t=!0),e.agrupador!==o.agrupador&&(o.agrupador=e.agrupador,null===(n=o.blotRotulo)||void 0===n||n.format(XA.formatoStyle,e),t||o.format(Sw.blotName,e));const c=null!==(l=null===(s=e.conteudo)||void 0===s?void 0:s.texto)&&void 0!==l?l:"";if(o.blotConteudo.html!==c&&(o.blotConteudo.html="Omissis"===e.tipo?Ew.montarSpanOmissisAsString():c),e.descricaoSituacao!==o.descricaoSituacao&&(o.descricaoSituacao=e.descricaoSituacao,o.setEstilo(e)),o.atualizarElemento(e),2===o.children.length&&o.children.tail.remove(),e.mensagens&&e.mensagens.length>0&&!this.elementoRemovidoEmRevisao(e)){const t=document.getElementById("onmodalsufixos");this.isMensagemSufixos(e)?null===t&&Ew.criarContainerMensagens(e).insertInto(o):Ew.criarContainerMensagens(e).insertInto(o)}}}))}elementoRemovidoEmRevisao(e){return!(!e.revisao||e.revisao.stateType!==nf.ElementoRemovido)}removerLinhaQuill(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).forEach(((t,i)=>{var a,r;o=this.quill.getLinha(null!==(a=t.uuid)&&void 0!==a?a:0,o)||this.quill.getLinha(null!==(r=t.uuid)&&void 0!==r?r:0),o&&(!t.revisao||o.elemento.revisao&&Yv(o.elemento.revisao)?o.remove():(o.atualizarElemento(t),0===i&&this.montarMenuContexto(e)))}));const i=this.quill.getSelection();if(i){const e=this.quill.getLine(i.index-1)[0].linha,t=this.quill.getIndex(e.blotConteudo);this.quill.setSelection(t,0,Quill.sources.SILENT),this.quill.marcarLinhaAtual(e)}}renumerarQuill(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).map((e=>{var t,i,a;o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,o)||this.quill.getLinha(null!==(i=e.uuid)&&void 0!==i?i:0),o&&(null===(a=o.blotRotulo)||void 0===a||a.format(XA.blotName,e.rotulo))}))}atualizarMensagemQuill(e){var t;let o;(null!==(t=e.elementos)&&void 0!==t?t:[]).map((e=>{var t;if(o=this.quill.getLinha(null!==(t=e.uuid)&&void 0!==t?t:0,o),o&&(2===(null==o?void 0:o.children.length)&&o.children.tail.remove(),e.mensagens&&e.mensagens.length>0&&!this.elementoRemovidoEmRevisao(e))){const t=document.getElementById("onmodalsufixos");this.isMensagemSufixos(e)?null===t&&Ew.criarContainerMensagens(e).insertInto(o):Ew.criarContainerMensagens(e).insertInto(o)}}))}isMensagemSufixos(e){return e.mensagens&&1===e.mensagens.length&&"onmodalsufixos"===e.mensagens[0].nomeEvento}montarMenuContexto(e){var t,o;const i=e.elementos?e.elementos[0]:new BA,a=(null!==(t=null==i?void 0:i.acoesPossiveis)&&void 0!==t?t:[]).filter((e=>Cf(e)));if(a.length>0){const e=new GA,t=new KA(this.quill.linhaAtual.containerDireito.alinhamentoMenu),i=e=>{this.processarEscolhaMenu(e),this.quill.focus()};(new QA).insertInto(e),a.forEach((e=>{new WA(e,i).insertInto(t)})),t.insertInto(e),null===(o=this.quill.linhaAtual.blotInsideContainerDireito)||void 0===o||o.remove(),e.insertInto(this.quill.linhaAtual.containerDireito)}}criarElemento(e,t,o,i,a,r,n,s,l){const c=new BA;return c.uuid=e,c.uuid2=t,c.lexmlId=o,c.tipo=i,c.numero=r,c.conteudo={texto:a},c.hierarquia=n,c.descricaoSituacao=s,c.existeNaNormaAlterada=l,c}inicializar(e){const t=this.getHtmlElement("lx-eta-editor"),o=this.getHtmlElement("lx-eta-buffer");zw.configurar(),this._quill=new zw(t,o,e),this.quill.on("selection-change",this.onSelectionChange),this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this))),this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.removeElementoSemTexto.subscribe(this.removerElementoSemTexto.bind(this))),this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.toggleExistencia.subscribe(this.toggleExistencia.bind(this))),this.inscricoes.push(this.quill.keyboard.adicionaAgrupador.subscribe(this.adicionaAgrupador.bind(this))),this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this))),this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this))),this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this))),this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this))),this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this))),this.inscricoes.push(pA.subscribe(this.agendarEmissaoEventoOnChange.bind(this))),this.inscricoes.push(this.quill.clipboard.onPasteTextoArticulado.subscribe(this.onPasteTextoArticulado.bind(this))),t.addEventListener("rotulo",(e=>{e.stopImmediatePropagation(),this.renumerarElemento()})),t.addEventListener("nota-alteracao",(e=>{e.stopImmediatePropagation(),this.editarNotaAlteracao(e.detail.elemento)})),t.addEventListener("toggle-existencia",(e=>{e.stopImmediatePropagation(),this.toggleExistenciaElemento(e.detail.elemento)})),t.addEventListener("mensagem",(e=>{var t,o;e.stopImmediatePropagation();const i=this.quill.linhaAtual;if(i)if($h.RENUMERAR_DISPOSITIVO===(null===(o=null===(t=e.detail)||void 0===t?void 0:t.mensagem)||void 0===o?void 0:o.descricao))this.renumerarElemento();else{const t=i.blotConteudo,o=this.criarElemento(i.uuid,i.uuid2,i.lexmlId,i.tipo,t.html,i.numero,i.hierarquia);iA.dispatch(Vu.execute(o,e.detail.mensagem))}})),t.addEventListener("aceitar-revisao",(e=>{e.stopImmediatePropagation(),this.aceitarRevisao(e.detail.elemento)})),t.addEventListener("rejeitar-revisao",(e=>{e.stopImmediatePropagation(),this.rejeitarRevisao(e.detail.elemento)})),t.addEventListener("exibir-diferencas",(e=>{e.stopImmediatePropagation(),this.exibirDiferencas(e.detail.elemento)})),t.addEventListener("onmodalsufixos",(e=>{e.stopImmediatePropagation(),this.exibirModalSufixos()})),this.configListenersEta()}exibirModalSufixos(){this.dispatchEvent(new CustomEvent("onexibirsufixos",{bubbles:!0,composed:!0,detail:{}}))}exibirDiferencas(e){var t;const o=new Qw;o.textoAtual=e.conteudo.texto,o.quill=this.quill;const i=e.revisao,a=dh(iA.getState().elementoReducer.articulacao,e.lexmlId);i?(o.textoAntesRevisao=i.elementoAntesRevisao.conteudo.texto,a&&a.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&a.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL?o.textoOriginal=a.situacao.dispositivoOriginal.conteudo.texto:(o.textoOriginal=e.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL?o.textoAtual:o.textoAntesRevisao,o.adicionado=!0),Kw(o)):(a&&void 0!==(null===(t=a.situacao.dispositivoOriginal)||void 0===t?void 0:t.conteudo)&&(o.textoOriginal=a.situacao.dispositivoOriginal.conteudo.texto),Kw(o))}aceitarRevisao(e){iA.dispatch(_f.execute(e,void 0)),this.alertaGlobalRevisao(),this.setCursorCurrentLine()}setCursorCurrentLine(){this.quill.focus()}rejeitarRevisao(e){iA.dispatch(Of.execute(e,void 0)),this.setCursorCurrentLine()}aceitarTodasRevisoes(){iA.dispatch(_f.execute(void 0,void 0))}rejeitarTodasRevisoes(){iA.dispatch(Of.execute(void 0,void 0))}agendarEmissaoEventoOnChange(e,t=[]){clearTimeout(this.timerOnChange),this.timerOnChange=setTimeout((()=>this.emitirEventoOnChange(e,t)),1e3)}atualizarTextoElemento(e){var t,o,i;if(null===(t=null==e?void 0:e.blotConteudo)||void 0===t?void 0:t.alterado){const t=this.criarElemento(e.uuid,e.uuid2,e.lexmlId,e.tipo,null!==(i=null===(o=e.blotConteudo)||void 0===o?void 0:o.html)&&void 0!==i?i:"",e.numero,e.hierarquia);iA.dispatch(Uu.execute(t))}}alertaGlobalVerificaRenumeracao(){const e="alerta-global-renumeracao",t=Lh.getDispositivosAdicionados(iA.getState().elementoReducer.articulacao);if(t.length&&Lh.verificaNecessidadeRenumeracaoRedacaoFinal(t)){const t={id:e,tipo:"warning",mensagem:"Os rótulos apresentados servem apenas para o posicionamento correto do novo dispositivo no texto. Serão feitas as renumerações necessárias no momento da consolidação das emendas.",podeFechar:!0};iA.dispatch(nu(t))}else iA.dispatch(su(e))}alertaGlobalVerificaCorrelacao(){var e,t;const o=document.querySelector("lexml-eta").getDispositivosEmenda()||[],i=Object.values(o).flat(1).map((e=>e.id));if([...new Set(i.map((e=>e.split("_").filter((e=>e.startsWith("art")))[0])))].length>1){const e={id:"alerta-global-correlacao",tipo:"info",mensagem:"Cada emenda pode referir-se a apenas um dispositivo, salvo se houver correlação entre dispositivos. Verifique se há correlação entre os dispositivos emendados antes de submetê-la.",podeFechar:!0,exibirComandoEmenda:!0};iA.dispatch(nu(e))}else(null===(t=null===(e=iA.getState().elementoReducer.ui)||void 0===e?void 0:e.alertas)||void 0===t?void 0:t.some((e=>"alerta-global-correlacao"===e.id)))&&iA.dispatch(su("alerta-global-correlacao"))}alertaGlobalRevisao(){var e,t;const o="alerta-global-revisao";if(document.getElementsByClassName("blot__revisao").length>0){const e={id:o,tipo:"info",mensagem:"Este documento contém marcas de revisão e não deve ser protocolado até que estas sejam removidas.",podeFechar:!0,exibirComandoEmenda:!0};iA.dispatch(nu(e))}else(null===(t=null===(e=iA.getState().elementoReducer.ui)||void 0===e?void 0:e.alertas)||void 0===t?void 0:t.some((e=>e.id===o)))&&iA.dispatch(su(o))}emitirEventoOnChange(e,t=[]){var o;this.atualizarTextoElemento(this.quill.linhaAtual),this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:e}})),(null===(o=this.eventosOnChange)||void 0===o?void 0:o.length)&&(this.eventosOnChange.includes(nf.ElementoIncluido)||this.eventosOnChange.includes(nf.ElementoRemovido))&&this.alertaGlobalVerificaRenumeracao(),this.alertaGlobalVerificaCorrelacao(),this.alertaGlobalRevisao(),this.eventosOnChange=[],this.timerOnChange=null}carregarArticulacao(e){setTimeout((()=>{this.quill.getLine(0)[0].remove(),e.forEach((e=>{const t=Ew.criarContainerLinha(e);t.insertInto(this.quill.scroll),t.setEstilo(e),e.tipo===cu.generico.tipo&&iA.dispatch(jd.execute(e))})),this.quill.limparHistory(),e.length>1&&setTimeout((()=>{const t=this.quill.getLinha(e[1].uuid);(null==t?void 0:t.blotConteudo)&&this.quill.setSelection(this.quill.getIndex(null==t?void 0:t.blotConteudo),0,Quill.sources.USER)}),0),iA.dispatch($d.execute())}),0)}configEditor(){return{formats:["bold","italic","link","script","EtaBlotConteudoOmissis"],modules:{toolbar:{container:"#lx-eta-barra-ferramenta",handlers:{bold:this.onBold.bind(this),italic:this.onItalic.bind(this),script:this.onScript.bind(this)}},history:{delay:0,maxStack:500,userOnly:!0}},theme:"snow"}}async confirmar(e,t,o){let i="";const a=document.createElement("sl-dialog");a.label="Confirmação";a.innerHTML=e+'\n      <sl-button slot="footer" variant="default">Não</sl-button>\n      <sl-button slot="footer" variant="primary">Sim</sl-button>\n    ',document.body.appendChild(a),await a.show();const r=a.querySelectorAll("sl-button"),n=r[0],s=r[1];s.focus(),n.onclick=()=>{i="Não",null==a||a.hide(),null==a||a.remove()},s.onclick=()=>{i="Sim",null==a||a.hide(),null==a||a.remove()},a.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()})),a.addEventListener("sl-hide",(e=>{e.detail.closeResult=i,o(e)}))}alertar(e){const t=Object.assign(document.createElement("sl-alert"),{variant:"danger",closable:!0,duration:4e3,innerHTML:`\n        <sl-icon name="exclamation-octagon" slot="icon"></sl-icon>\n        ${e}\n      `});document.body.append(t),t.toast()}quillNaoInicializado(e){var t;let o=[];const i=e=>{setTimeout((()=>{this.quill?e.length>0&&this.carregarArticulacao(e):i(e)}),70)};if(e.elementoReducer.ui){const i=e.elementoReducer.ui.events.find((e=>e.stateType===nf.DocumentoCarregado));o=null!==(t=null==i?void 0:i.elementos)&&void 0!==t?t:[]}i(o)}getHtmlElement(e){return this.querySelector(`#${e}`)}destroiQuill(){this.removeListenersEta(),this.getHtmlElement("lx-eta-editor").innerHTML="",this.getHtmlElement("lx-eta-buffer").innerHTML="",this.quill&&(this.quill.off("selection-change",this.onSelectionChange),this.quill.destroi()),this._quill=void 0}configListenersEta(){const e=this.getHtmlElement("lx-eta-editor");e.addEventListener("rotulo",this.listenerRotulo),e.addEventListener("nota-alteracao",this.listenerNotaAlteracao),e.addEventListener("toggle-existencia",this.listenerToggleExistencia),e.addEventListener("mensagem",this.listenerMensagem),e.addEventListener("aceitar-revisao",this.listenerAceitarRevisao),e.addEventListener("rejeitar-revisao",this.listenerRejeitarRevisao)}removeListenersEta(){const e=this.getHtmlElement("lx-eta-editor");e.removeEventListener("rotulo",this.listenerRotulo),e.removeEventListener("nota-alteracao",this.listenerNotaAlteracao),e.removeEventListener("toggle-existencia",this.listenerToggleExistencia),e.removeEventListener("mensagem",this.listenerMensagem),e.removeEventListener("aceitar-revisao",this.listenerAceitarRevisao),e.removeEventListener("rejeitar-revisao",this.listenerRejeitarRevisao)}async onPasteTextoArticulado(e){const t=this.quill.linhaAtual,o=new BA;o.uuid=t.uuid,o.tipo=t.tipo;const i=await ry.newInstanceFromTexto(e.textoColadoOriginal,e.textoColadoAjustado,iA.getState().elementoReducer.articulacao,t.elemento);fA(this.quill,iA,i,e.range)}atualizarEstiloBotaoRevisao(){const e=this.getHtmlElement("lx-eta-btn-revisao");e&&e.classList.toggle("revisao-ativa",iA.getState().elementoReducer.emRevisao)}indicadorTextoModificado(e){const t=[nf.DocumentoCarregado,nf.ElementoIncluido,nf.ElementoValidado,nf.AtualizaUsuario,nf.AtualizacaoAlertas],o=new Map;e.filter((e=>!t.includes(e.stateType))).map((e=>e.elementos||[])).flat().forEach((e=>o.set(e.uuid,e)));const i=[...o.values()],a=i.filter((e=>e.descricaoSituacao!==Ud.DISPOSITIVO_MODIFICADO)).map((e=>e.uuid)),r=i.filter((e=>{var t,o,i;return e.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO||e.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.revisao&&"Texto do dispositivo foi alterado"===e.revisao.descricao||e.descricaoSituacao===Ud.DISPOSITIVO_ORIGINAL&&e.revisao&&(null===(o=null===(t=e.revisao.elementoAntesRevisao)||void 0===t?void 0:t.conteudo)||void 0===o?void 0:o.texto)!==(null===(i=e.conteudo)||void 0===i?void 0:i.texto)})).map((e=>e.uuid));a.forEach((e=>{var t;const o=document.getElementById(_w.className+e);if(o){const i=this.quill.getLinha(e);null===(t=null==i?void 0:i.containerOpcoes)||void 0===t||t.remove(),o.remove()}})),r.forEach((e=>{var t;const i=this.quill.getLinha(e);if(i)if(this.adicionaRemoveOpcaoDiffMenu(i.elemento,r),null===(t=i.containerOpcoes)||void 0===t?void 0:t.blotBotaoExibirDiferencas)i.containerOpcoes.atualizarElemento(o.get(e));else{const t=document.getElementById(_w.className+e);t&&t.remove();i.children.head.insertBefore(Ew.criarContainerOpcoes(o.get(e)),i.containerDireito.prev)}}))}adicionaRemoveOpcaoDiffMenu(e,t){var o;t.includes(e.uuid)&&(null===(o=e.acoesPossiveis)||void 0===o||o.push(Sf))}indicadorMarcaRevisao(e){const t=[nf.DocumentoCarregado,nf.ElementoIncluido,nf.ElementoValidado,nf.AtualizaUsuario,nf.AtualizacaoAlertas],o=new Map;e.filter((e=>!t.includes(e.stateType))).map((e=>e.elementos||[])).flat().forEach((e=>o.set(e.uuid,e)));const i=[...o.values()],a=i.filter((e=>!e.revisao)).map((e=>e.uuid)),r=i.filter((e=>e.revisao&&Qv(e.revisao))).map((e=>e.uuid));a.forEach((e=>{var t;if(document.getElementById(lw.className+e)){const o=this.quill.getLinha(e);null===(t=null==o?void 0:o.containerRevisao)||void 0===t||t.remove()}})),r.forEach((e=>{var t;const i=this.quill.getLinha(e);if(i)if(null===(t=i.containerRevisao)||void 0===t?void 0:t.blotBotaoAceitarRevisao)i.containerRevisao.atualizarElemento(o.get(e));else{i.children.head.insertBefore(Ew.criarContainerRevisao(o.get(e)),i.containerDireito.prev)}}))}atualizarStatusBotoesRevisao(){const e=tg(iA.getState().elementoReducer.revisoes);this.btnAceitarTodasRevisoes&&(this.btnAceitarTodasRevisoes.disabled=0===e),this.btnRejeitarTodasRevisoes&&(this.btnRejeitarTodasRevisoes.disabled=0===e)}};Mc([zc({type:Object})],Yw.prototype,"lexmlEtaConfig",void 0),Mc([Uc("lexml-ajuda-modal")],Yw.prototype,"ajudaModal",void 0),Mc([Uc("lexml-atalhos-modal")],Yw.prototype,"atalhosModal",void 0),Mc([Uc("lexml-emenda-comando-modal")],Yw.prototype,"comandoEmendaModal",void 0),Mc([Uc("#btnAceitarTodasRevisoes")],Yw.prototype,"btnAceitarTodasRevisoes",void 0),Mc([Uc("#btnRejeitarTodasRevisoes")],Yw.prototype,"btnRejeitarTodasRevisoes",void 0),Mc([zc({type:Boolean})],Yw.prototype,"exibirBotoesParaTratarTodas",void 0),Yw=Mc([$c("lexml-eta-editor")],Yw);let Jw=class extends Jl{constructor(){super(...arguments),this.htmlAgrupador=()=>{var e,t,o;return Rl`<p class="rotulo">${this.elemento.rotulo}</p>
      <p class="texto-agrupador">${sA(null!==(o=null===(t=null===(e=this.elemento)||void 0===e?void 0:e.conteudo)||void 0===t?void 0:t.texto)&&void 0!==o?o:"")}</p>`},this.htmlDispositivo=()=>{var e,t,o;return Rl`
      <p class="texto" style="${`padding-left: ${20*this.elemento.nivel}px;`}">
        <span class="rotulo">${this.elemento.rotulo}</span>
        ${sA(null!==(o=null===(t=null===(e=this.elemento)||void 0===e?void 0:e.conteudo)||void 0===t?void 0:t.texto)&&void 0!==o?o:"")}
      </p>
    `}}render(){return Rl`
      <div class="box">
        <div class="conteudo">${this.elemento.agrupador?this.htmlAgrupador():this.htmlDispositivo()}</div>
      </div>
    `}};Jw.styles=nl`
    :host {
      display: block;
      padding: 0px;
      margin: 0px;
      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
        'Noto Color Emoji';
      font-size: 1.1em;
      line-height: 1.2;
      color: #646260;
      text-transform: none !important;
    }

    p.rotulo {
      margin: 5px !important;
      color: #373634;
      font-weight: 600;
      text-align: center;
    }

    p.texto {
      margin: 5px !important;
    }

    p.texto-agrupador {
      margin: 5px !important;
      text-align: center;
    }

    span.rotulo {
      color: #373634;
      font-weight: 600;
    }
  `,Mc([zc({type:Object})],Jw.prototype,"elemento",void 0),Jw=Mc([$c("lexml-eta-elemento")],Jw);let Zw=class extends Jl{render(){return Rl`
      <div class="lx-eta-help">
        <div class="lx-eta-help-content">
          <h4>Desfazer e refazer</h4>
          <div class="lx-eta-help-group">
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Z</sl-badge>&nbsp;-&nbsp;Desfaz ultima alteração</div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Y</sl-badge>&nbsp;-&nbsp;Refaz alteração</div>
          </div>
          <h4>Seleção e navegação</h4>
          <div class="lx-eta-help-group">
            <div>
              <sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Shift</sl-badge>+<sl-badge variant="neutral">A</sl-badge>&nbsp;-&nbsp;Seleciona o texto do
              dispositivo atual
            </div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Home</sl-badge>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">End</sl-badge>&nbsp;-&nbsp;Vai para o último dispositivo</div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">F</sl-badge>&nbsp;-&nbsp;Localizar texto</div>
          </div>
          <h4>Criação e edição de dispositivos adicionados</h4>
          <div class="lx-eta-help-group">
            <div>
              <sl-badge variant="neutral">Enter</sl-badge>&nbsp;-&nbsp;Cria um novo dispositivo do mesmo tipo ou cria dispositivo subordinado quando termina com dois pontos
            </div>
            <div><span class="lx-eta-help-info">Os atalhos abaixo funcionam apenas para dispositivos adicionados</span></div>
            <div><sl-badge variant="neutral">Tab</sl-badge>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provável</div>
            <div>
              <sl-badge variant="neutral">Shift</sl-badge>+<sl-badge variant="neutral">Tab</sl-badge>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais
              provável
            </div>
            <div><sl-badge variant="neutral">Alt</sl-badge>+<sl-badge variant="neutral">&uarr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para cima</div>
            <div><sl-badge variant="neutral">Alt</sl-badge>+<sl-badge variant="neutral">&darr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para baixo</div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">D</sl-badge>&nbsp;-&nbsp;Remove dispositivo atual</div>
            <div><span class="lx-eta-help-info">Os atalhos abaixo funcionam apenas para dispositivos adicionados em alteração de normas</span></div>
            <div>
              <sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Alt</sl-badge>+<sl-badge variant="neutral">N</sl-badge>&nbsp;-&nbsp;Numera o dispositivo que
              foi adicionado em alteração de norma
            </div>
            <div>
              <sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">Alt</sl-badge>+<sl-badge variant="neutral">O</sl-badge>&nbsp;-&nbsp;Omite dispositivos
              (transforma em linha pontilhada que representa um ou mais dispositivos omitidos)
            </div>
            <div><sl-badge variant="neutral">...</sl-badge>&nbsp;-&nbsp;Digitando três pontos no texto do dispositivo, cria-se uma linha pontilhada</div>
          </div>
          <h4>Formatação de texto</h4>
          <div class="lx-eta-help-group">
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">B</sl-badge>&nbsp;-&nbsp;Aplica <b>negrito</b> ao texto selecionado</div>
            <div><sl-badge variant="neutral">Ctrl</sl-badge>+<sl-badge variant="neutral">I</sl-badge>&nbsp;-&nbsp;Aplica <i>itálico</i> ao texto selecionado</div>
          </div>
        </div>
      </div>
    `}};Zw.styles=nl`
    :host {
      display: block;
      padding: 10px;
      font-family: var(--sl-font-sans);
    }
    .lx-eta-help-content div div {
      color: black;
      padding: 0.4rem 0;
      text-decoration: none;
      display: block;
      white-space: wrap;
      font-size: 0.8em;
      font-weight: normal !important;
      text-align: left;
    }

    .lx-eta-help-info {
      display: block;
      font-weight: normal !important;
      text-align: left;
      color: #555555;
      background-color: #fefefe;
      border: 0.5px solid #ccc;
      padding: 0.5rem;
      margin-block: 0.1rem;
      border-radius: 0.5rem;
      font-style: italic;
    }
    .lx-eta-help-content h4 {
      padding: 1rem 0 0.5rem 0;
      margin: 0;
    }

    .lx-eta-help-group {
      background-color: #eeeeee;
      padding: 0.5rem;
      border-radius: 0.5rem;
      border: 0.5px solid #ccc;
      box-shadow: var(--sl-shadow-x-large);
      margin-block-end: 1rem;
    }
  `,Zw=Mc([$c("lexml-eta-atalhos")],Zw);const e_=Rl`
  <style>
    .editor-texto-rico {
      height: 375px;
      font-size: 18px !important;
    }
    .editor-texto-rico p,
    .editor-texto-rico ol,
    .editor-texto-rico ul {
      margin-bottom: 0.7rem;
    }
    .editor-texto-rico p:not(.ql-align-rigth, .ql-align-center) {
      text-indent: 3rem;
    }
    .ql-toolbar.ql-snow .ql-formats {
      margin-right: 8px;
    }
    .editor-texto-rico.ql-snow .ql-tooltip.ql-editing a.ql-action::after {
      content: 'Salvar';
    }
    .editor-texto-rico.ql-snow .ql-tooltip a.ql-action::after {
      display: inline;
      content: 'Editar';
    }

    .editor-texto-rico.ql-snow .ql-tooltip a.ql-remove::before {
      display: inline;
      content: 'Remover';
    }

    .editor-texto-rico.ql-snow .ql-tooltip::before {
      content: 'Insira o link:';
    }

    .editor-texto-rico .estilo-ementa {
      text-indent: 0 !important;
      text-align: justify;
      margin-left: 40%;
    }
    .editor-texto-rico .estilo-norma-alterada {
      margin-left: 3rem;
    }

    #revisoes-justificativa-icon sl-icon,
    #revisoes-texto-livre-icon sl-icon,
    #aceita-revisao-justificativa {
      margin-right: 0.1rem;
    }

    .revisoes-justificativa-icon__ativo {
      color: white;
      background-color: var(--sl-color-warning-600) !important;
      border-color: white !important;
    }
    .revisoes-texto-livre-icon__ativo {
      color: white;
      background-color: var(--sl-color-warning-600) !important;
      border-color: white !important;
    }
    .lista-revisoes-justificativa {
      padding-left: 1rem;
      padding-right: 0.5rem;
    }
    #chk-em-revisao-justificativa {
      border: 1px solid #ccc !important;
      padding: 5px 10px !important;
      border-radius: 20px !important;
      margin-left: auto;
      margin-right: 5px;
      font-weight: bold;
      background-color: #eee;
    }
    #chk-em-revisao-justificativa[checked] {
      background-color: var(--sl-color-blue-100);
    }

    #chk-em-revisao-texto-livre {
      border: 1px solid #ccc !important;
      padding: 5px 10px !important;
      border-radius: 20px !important;
      margin-left: auto;
      margin-right: 5px;
      font-weight: bold;
      background-color: #eee;
    }
    #chk-em-revisao-texto-livre[checked] {
      background-color: var(--sl-color-blue-100);
    }

    #toolbar {
      padding: 1.5px 0 1.5px 8px;
    }

    #badge-marca-alteracao-justificativa::part(base) {
      min-width: 1.4rem;
    }

    #badge-marca-alteracao-texto-livre::part(base) {
      min-width: 1.4rem;
    }
    revisao-container {
      margin-left: auto;
    }

    .ql-toolbar .panel-revisao {
      display: flex;
      flex-grow: 1;
    }

    .ql-picker.ql-estilo .ql-picker-label {
      width: 160px;
    }

    .ql-picker.ql-estilo .ql-picker-label::before,
    .ql-picker.ql-estilo .ql-picker-item::before {
      content: 'Texto normal';
    }

    .ql-picker.ql-estilo .ql-picker-label[data-value='ementa']:before,
    .ql-picker.ql-estilo .ql-picker-item[data-value='ementa']:before {
      content: 'Ementa';
    }

    .ql-picker.ql-estilo .ql-picker-label[data-value='norma-alterada']:before,
    .ql-picker.ql-estilo .ql-picker-item[data-value='norma-alterada']:before {
      content: 'Norma alterada';
    }

    .ql-estilo span.ql-picker-label {
      border-color: #ccc !important;
    }

    .ql-picker-item[data-value='insert']::after {
      content: 'Inserir tabela';
    }

    .ql-picker-item[data-value='append-col']::after {
      content: 'Inserir coluna';
    }

    .ql-picker-item[data-value='append-col-before']::after {
      content: 'Inserir coluna à esquerda';
    }

    .ql-picker-item[data-value='append-col-after']::after {
      content: 'Inserir coluna à direita';
    }

    .ql-picker-item[data-value='remove-col']::after {
      content: 'Remover coluna';
    }

    .ql-picker-item[data-value='change-width-col-modal']::after {
      content: 'Alterar a largura da coluna';
    }

    .ql-picker-item[data-value='change-width-table-modal']::after {
      content: 'Alterar a largura da tabela';
    }

    .ql-picker-item[data-value='append-row']::after {
      content: 'Inserir linha';
    }

    .ql-picker-item[data-value='append-row-above']::after {
      content: 'Inserir linha acima';
    }

    .ql-picker-item[data-value='append-row-below']::after {
      content: 'Inserir linha abaixo';
    }

    .ql-picker-item[data-value='remove-row']::after {
      content: 'Remover linha';
    }

    .ql-picker-item[data-value='split-cell']::after {
      content: 'Dividir célula';
    }

    .ql-picker-item[data-value='merge-selection']::after {
      content: 'Mesclar células';
    }

    .ql-picker-item[data-value='remove-cell']::after {
      content: 'Remover célula';
    }

    .ql-picker-item[data-value='remove-selection']::after {
      content: 'Remover seleção';
    }

    .ql-picker-item[data-value='undo']::after {
      content: 'Desfazer';
    }

    .ql-picker-item[data-value='redo']::after {
      content: 'Refazer';
    }

    .ql-picker-item[data-value='remove-table']:before {
      content: 'Remover tabela';
    }

    .ql-editor td > p {
      text-indent: 0 !important;
      margin-bottom: 0 !important;
    }

    .table-selected {
      border: 1px solid #87ceeb; /* Define a borda sólida em tom azul claro */
      box-shadow: 0 0 10px rgba(135, 206, 235, 0.5); /* Adiciona sombra com tom azul claro */
    }

    .ql-snow .ql-editor img {
      max-width: 100%;
    }

    .editor-texto-rico p.ql-text-indent-0px {
      text-indent: 0;
    }

    .editor-texto-rico p.ql-margin-bottom-0px {
      margin-bottom: 0;
    }

    .ql-editor ins {
      text-decoration: none;
      background-color: #b2e6be;
      /* #d4edda; */
    }

    .ql-editor del {
      text-decoration: strikethrough;
      background-color: #f4a9b0;
      /* #f8d7da; */
    }

    @media (max-width: 768px) {
      .mobile-buttons {
        display: inline-block !important;
      }
      #chk-em-revisao-justificativa span {
        display: none;
      }
      .ql-snow .ql-editor img {
        max-width: 100%;
      }
    }
  </style>
`,t_=Rl`<style>
  .ql-editor table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    overflow: hidden;
    white-space: nowrap;
    margin-left: auto;
    margin-right: auto;
  }

  .ql-editor table td {
    border: 1px solid black;
    padding: 2px 5px;
    height: 25px;
    vertical-align: top;
    white-space: pre-wrap; /* https://github.com/quilljs/quill/issues/1760 */
  }

  .ql-editor table td[rowspan='2'] {
    height: 50px;
  }

  .ql-editor table td[rowspan='3'] {
    height: 75px;
  }

  .ql-editor table td[rowspan='4'] {
    height: 100px;
  }

  .ql-editor table td[rowspan='5'] {
    height: 125px;
  }

  .ql-editor table td[rowspan='6'] {
    height: 150px;
  }

  .ql-editor table td[rowspan='7'] {
    height: 175px;
  }

  .ql-editor table td[rowspan='8'] {
    height: 200px;
  }

  .ql-editor table td[rowspan='9'] {
    height: 225px;
  }

  .ql-editor table td.ql-cell-selected {
    background-color: #cce0f8;
  }

  .ql-editor table td[merge_id] {
    display: none;
  }

  .quill-better-table-wrapper {
    overflow-x: auto;
  }

  .ql-picker.ql-table {
    width: auto !important;
    margin-right: 0;
  }

  .ql-picker.ql-table .ql-picker-label svg {
    display: none;
  }

  .ql-picker.ql-table .ql-picker-label::before {
    display: block;
    font-size: 14px;
  }

  .ql-table:nth-of-type(1) .ql-picker-label {
    background: url('data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-table" viewBox="0 0 16 16"><path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"/></svg>')
        no-repeat center,
      white;
    background-size: 16px;
  }

  .ql-picker.ql-table .ql-picker-label::before {
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    padding-top: 2px;
    line-height: 1em;
  }

  .ql-table:nth-of-type(1),
  .ql-contain {
    width: 90px;
    margin-right: 0;
  }

  .ql-picker.ql-table:nth-of-type(1) {
    font-size: 11px;
    font-weight: normal;
  }

  .ql-picker.ql-table .ql-picker-label {
    padding: 2px 3px;
    width: 23px;
  }

  .ql-picker.ql-table:nth-of-type(1) .ql-picker-options {
    width: 180px;
  }

  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {
    display: block;
    float: left;
    width: 30px;
    height: 30px;
    line-height: 30px;
    text-align: center;
    padding: 0px;
    margin: 1px;
  }

  .ql-toolbar .ql-picker.ql-table .ql-picker-item {
    display: none;
  }

  .ql-toolbar .ql-picker.ql-table .ql-picker-item.enabled {
    display: block;
  }

  .ql-picker.ql-table:nth-of-type(2) {
    display: flex;
    width: 145px;
  }

  .ql-table:nth-of-type(2) .ql-picker-label {
    background: url('data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-border" viewBox="0 0 16 16"><path d="M0 0h.969v.5H1v.469H.969V1H.5V.969H0V0zm2.844 1h-.938V0h.938v1zm1.875 0H3.78V0h.938v1zm1.875 0h-.938V0h.938v1zm.937 0V.969H7.5V.5h.031V0h.938v.5H8.5v.469h-.031V1H7.53zm2.813 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zM15.5 1h-.469V.969H15V.5h.031V0H16v.969h-.5V1zM1 1.906v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM1 3.78v.938H0V3.78h1zm6.5.938V3.78h1v.938h-1zm7.5 0V3.78h1v.938h-1zM1 5.656v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM.969 8.5H.5v-.031H0V7.53h.5V7.5h.469v.031H1v.938H.969V8.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875-.031V8.5H7.53v-.031H7.5V7.53h.031V7.5h.938v.031H8.5v.938h-.031zm1.875.031h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.406 0h-.469v-.031H15V7.53h.031V7.5h.469v.031h.5v.938h-.5V8.5zM0 10.344v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 12.22v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 14.094v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM.969 16H0v-.969h.5V15h.469v.031H1v.469H.969v.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H7.5v-.469h.031V15h.938v.031H8.5v.469h-.031v.5H7.53zm2.813 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H15v-.469h.031V15h.469v.031h.5V16h-.969z"/></svg>')
        no-repeat center,
      white;
    background-size: 16px;
  }
  .ql-picker.ql-table:nth-of-type(2) {
    color: #444;
  }

  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {
    border: 1px solid #444;
    color: #444;
  }

  .ql-table:nth-of-type(2) .ql-picker-label.ql-active {
    color: #444 !important;
  }

  .ql-toolbar .ql-picker-item.ql-selected:before,
  .ql-picker.ql-table:nth-of-type(2) .ql-picker-item {
    color: #444;
  }

  /* .ql-picker-label.ql-active .ql-stroke {
    stroke: #444 !important;
  } */

  .ql-picker-item[data-value='remove-table'] {
    border: none !important;
    width: 100%;
  }

  .ql-picker-item[data-value='newtable_1_1']:before {
    content: '1x1';
  }

  .ql-picker-item[data-value='newtable_1_2']:before {
    content: '1x2';
  }

  .ql-picker-item[data-value='newtable_1_3']:before {
    content: '1x3';
  }

  .ql-picker-item[data-value='newtable_1_4']:before {
    content: '1x4';
  }

  .ql-picker-item[data-value='newtable_1_5']:before {
    content: '1x5';
  }

  .ql-picker-item[data-value='newtable_2_1']:before {
    content: '2x1';
  }

  .ql-picker-item[data-value='newtable_2_2']:before {
    content: '2x2';
  }

  .ql-picker-item[data-value='newtable_2_3']:before {
    content: '2x3';
  }

  .ql-picker-item[data-value='newtable_2_4']:before {
    content: '2x4';
  }

  .ql-picker-item[data-value='newtable_2_5']:before {
    content: '2x5';
  }

  .ql-picker-item[data-value='newtable_3_1']:before {
    content: '3x1';
  }

  .ql-picker-item[data-value='newtable_3_2']:before {
    content: '3x2';
  }

  .ql-picker-item[data-value='newtable_3_3']:before {
    content: '3x3';
  }

  .ql-picker-item[data-value='newtable_3_4']:before {
    content: '3x4';
  }

  .ql-picker-item[data-value='newtable_3_5']:before {
    content: '3x5';
  }

  .ql-picker-item[data-value='newtable_4_1']:before {
    content: '4x1';
  }

  .ql-picker-item[data-value='newtable_4_2']:before {
    content: '4x2';
  }

  .ql-picker-item[data-value='newtable_4_3']:before {
    content: '4x3';
  }

  .ql-picker-item[data-value='newtable_4_4']:before {
    content: '4x4';
  }

  .ql-picker-item[data-value='newtable_4_5']:before {
    content: '4x5';
  }

  .ql-picker-item[data-value='newtable_5_1']:before {
    content: '5x1';
  }

  .ql-picker-item[data-value='newtable_5_2']:before {
    content: '5x2';
  }

  .ql-picker-item[data-value='newtable_5_3']:before {
    content: '5x3';
  }

  .ql-picker-item[data-value='newtable_5_4']:before {
    content: '5x4';
  }

  .ql-picker-item[data-value='newtable_5_5']:before {
    content: '5x5';
  }

  p:has(img) {
    text-align: center !important;
    text-indent: 0 !important;
  }
</style>`,o_=Quill.import("blots/container"),i_=Quill.import("blots/block"),a_=Quill.import("blots/block/embed"),r_=Quill.import("parchment");class n_ extends o_{static create(e){return super.create(e)}}n_.blotName="contain",n_.tagName="contain",n_.scope=r_.Scope.BLOCK_BLOT,n_.defaultChild="block",n_.allowedChildren=[i_,a_,o_];const s_=Quill.import("blots/container"),l_=Quill.import("blots/block"),c_=Quill.import("blots/block/embed"),u_=Quill.import("parchment");class d_ extends n_{static create(e){let t=super.create("td"),o=e.split("|");return t.setAttribute("table_id",o[0]),t.setAttribute("row_id",o[1]),t.setAttribute("cell_id",o[2]),o[3]&&t.setAttribute("merge_id",o[3]),o[4]&&t.setAttribute("colspan",o[4]),o[5]&&t.setAttribute("rowspan",o[5]),t}format(){}formats(){return{[this.statics.blotName]:[this.domNode.getAttribute("table_id"),this.domNode.getAttribute("row_id"),this.domNode.getAttribute("cell_id"),this.domNode.getAttribute("merge_id"),this.domNode.getAttribute("colspan"),this.domNode.getAttribute("rowspan")].join("|")}}optimize(e){super.optimize(e);let t=this.parent;if(null!=t){if("td"===t.statics.blotName)return this.moveChildren(t,this),void this.remove();if("tr"!==t.statics.blotName){let e=u_.create("block");this.parent.insertBefore(e,this.next);let t=u_.create("table",this.domNode.getAttribute("table_id")),o=u_.create("tr",this.domNode.getAttribute("row_id"));t.appendChild(o),o.appendChild(this),t.replace(e)}}let o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&o.domNode.getAttribute("cell_id")===this.domNode.getAttribute("cell_id")&&(o.moveChildren(this),o.remove())}insertBefore(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t}))){let t=u_.create(this.statics.defaultChild);t.appendChild(e),e=t}super.insertBefore(e,t)}replace(e){if(e.statics.blotName!==this.statics.blotName){let t=u_.create(this.statics.defaultChild);e.moveChildren(t),this.appendChild(t)}null!=e.parent&&super.replace(e)}moveChildren(e,t){this.children.forEach((function(o){e.insertBefore(o,t)}))}}d_.blotName="td",d_.tagName="td",d_.className="td-q",d_.scope=u_.Scope.BLOCK_BLOT,d_.allowedChildren=[l_,c_,s_];const p_=Quill.import("parchment");class h_{static register(e,t){h_.changes.push({type:e,...t})}static add(e){if(!h_.changes.length)return;const t=e.history.ignoreChange;e.history.ignoreChange=!0,e.history.lastRecorded=0,setTimeout((()=>{e.history.ignoreChange=t;const o=y_.random_id();e.history.tableStack[o]=h_.changes,e.history.stack.undo.push({type:"tableHistory",id:o}),h_.changes=[]}),0)}static undo(e,t){const o=e.history.ignoreChange;e.history.ignoreChange=!0;const i=e.history.tableStack[t];void 0!==i&&i.reverse().forEach((t=>{const o=e.getContents();switch(t.type){case"insert":h_.remove(t);break;case"remove":h_.insert(t);break;case"split":h_.merge(t,!0),y_.emitTextChange(e,o);break;case"merge":h_.split(t,!0);break;case"propertyChange":h_.propertyChange(t,!0)}})),setTimeout((()=>{const t=e.history.stack.undo.pop();e.history.stack.redo.push(t),e.history.ignoreChange=o}),0)}static redo(e,t){const o=e.history.ignoreChange;e.history.ignoreChange=!0;const i=e.history.tableStack[t];void 0!==i&&i.forEach((e=>{switch(e.type){case"insert":h_.insert(e);break;case"remove":h_.remove(e);break;case"split":h_.split(e,!1);break;case"merge":h_.merge(e,!1);break;case"propertyChange":h_.propertyChange(e,!1)}})),setTimeout((()=>{const t=e.history.stack.redo.pop();e.history.stack.undo.push(t),e.history.ignoreChange=o}),0)}static insert(e){const t=e.parentNode||e.nextNode.parentNode;if(t){const o=p_.find(t);if(o){const t=p_.create(e.node);if(e.nextNode){const i=p_.find(e.nextNode);i&&o.insertBefore(t,i)}else o.appendChild(t)}const i="TABLE"===e.node.nodeName?e.node:t.closest("table");return i.style.setProperty("overflow","visible"===(window.getComputedStyle(i).overflow||"visible")?"hidden":"visible"),setTimeout((()=>{i.style.removeProperty("overflow")}),0),!0}return!1}static remove(e){return e.node.remove(),!0}static split(e,t){const o=e.node;return o.removeAttribute("colspan"),o.removeAttribute("rowspan"),e.mergedNodes.forEach((e=>{e.node.removeAttribute("merge_id"),e.node.innerHTML=e[t?"oldContent":"newContent"]})),o.innerHTML=e[t?"oldContent":"newContent"],!0}static merge(e,t){const o=e.node,i=o.getAttribute("cell_id");return o.setAttribute("colspan",e.colSpan),o.setAttribute("rowspan",e.rowSpan),e.mergedNodes.forEach((e=>{e.node.innerHTML=e[t?"oldContent":"newContent"],e.node.setAttribute("merge_id",i)})),o.innerHTML=e[t?"oldContent":"newContent"],!0}static propertyChange(e,t){const{node:o,property:i,oldValue:a,newValue:r}=e,n=t?a:r;null!==n?o.setAttribute(i,n):o.removeAttribute(i)}}h_.changes=[];class m_{static get(e){return e.container.previousSibling&&e.container.previousSibling.classList&&e.container.previousSibling.classList.contains("ql-toolbar")?e.container.previousSibling:null}static toggle(e,t=[],o=!0){const i=m_.get(e);i&&("string"==typeof t&&(t=[t]),t.forEach((e=>{let t=`.ql-table .ql-picker-item[data-value="${e}"], .ql-table[value="${e}"]`;e.startsWith("*")&&e.endsWith("*")?t=`.ql-table .ql-picker-item[data-value*="${e.substring(1,e.length-1)}"], .ql-table[value*="${e.substring(1,e.length-1)}"]`:e.startsWith("*")?t=`.ql-table .ql-picker-item[data-value$="${e.substring(1)}"], .ql-table[value$="${e.substring(1)}"]`:e.endsWith("*")&&(t=`.ql-table .ql-picker-item[data-value^="${e.substring(0,e.length-1)}"], .ql-table[value^="${e.substring(0,e.length-1)}"]`),i.querySelectorAll(t).forEach((e=>{e.classList[o?"add":"remove"]("enabled")}))})))}static enable(e,t){m_.toggle(e,t,!0)}static disable(e,t){m_.toggle(e,t,!1)}static disableAll(e){const t=m_.get(e);if(!t)return!1;t.querySelectorAll(".ql-table .ql-picker-item.enabled, .ql-table.enabled[value]").forEach((e=>e.classList.remove("enabled")))}static isEnabled(e,t){const o=m_.get(e);if(!o)return!1;const i=o.querySelector(`.ql-table .ql-picker-item[data-value="${t}"], .ql-table[value="${t}"]`);return i&&i.classList.contains("enabled")}}class f_{static mouseDown(e,t,o){if(void 0!==o&&(f_.cellSelectionOnClick=o),1===t.which&&(f_.resetSelection(),!f_.cellSelectionOnClick&&t.ctrlKey||f_.cellSelectionOnClick)){f_.isMouseDown=!0,f_.previousSelection=[f_.selectionStartElement,f_.selectionEndElement],f_.selectionStartElement=f_.selectionEndElement=null,f_.resetSelection();const e=f_.getTargetCell(t);if(!e)return void(f_.focusedCell=null);if(!f_.preventMouseDown&&e===f_.clickedCellTimeout||f_.focusedCell===e)return void(f_.focusedCell=e);t.preventDefault(),f_.focusedCell=null,clearTimeout(f_.dblClickTimeout),f_.dblClickTimeout=setTimeout((()=>{f_.preventMouseDown=!0,f_.clickedCellTimeout=null}),500),f_.preventMouseDown=!1,f_.selectionStartElement=f_.clickedCellTimeout=e,f_.selectionStartElement&&f_.selectionStartElement.classList.add("ql-cell-selected")}}static mouseMove(e,t){if(f_.isMouseDown&&f_.selectionStartElement){const e=f_.selectionEndElement;if(f_.selectionEndElement=f_.getTargetCell(t),f_.selectionEndElement&&f_.selectionEndElement!==e&&f_.selectionStartElement.closest("table")===f_.selectionEndElement.closest("table")){f_.resetSelection();const e=f_.getSelectionCoords();for(let t=e.minY;t<=e.maxY;t++)for(let o=e.minX;o<=e.maxX;o++){let e=f_.getCellAt(o,t);e&&e.classList.add("ql-cell-selected")}}}}static mouseUp(e,t){f_.isMouseDown=!1,f_.selectionEndElement||(f_.selectionEndElement=f_.selectionStartElement),f_.previousSelection[0]!==f_.selectionStartElement&&f_.previousSelection[1]!==f_.selectionEndElement&&f_.selectionChange(e)}static selectionChange(e,t=null,o=null){let i=!1;if(f_.selectionStartElement||f_.selectionEndElement)i=!0,m_.enable(e,["split-cell","merge-selection","remove-selection"]);else{let a,r;if(m_.disable(e,["split-cell","merge-selection","remove-selection"]),null===t&&null!==o){const[t]=e.getLeaf(o.index),[i]=e.getLeaf(o.index+o.length);a=t.parent.domNode,r=i.parent.domNode}else{const e=window.getSelection();a=e.anchorNode?e.anchorNode.nodeType===Node.TEXT_NODE?e.anchorNode.parentElement:e.anchorNode:null,r=e.focusNode?e.focusNode.nodeType===Node.TEXT_NODE?e.focusNode.parentElement:e.focusNode:null}if(a&&r){let e=a.closest("table");e&&e.closest(".ql-editor")&&(r!==a?(e=r.closest("table"),i=e&&e.closest(".ql-editor")):i=!0)}}!i&&e.table.isInTable&&(e.table.isInTable=!1,m_.disableAll(e),m_.enable(e,["newtable_*","insert","undo","redo"])),i&&!e.table.isInTable&&(e.table.isInTable=!0,m_.enable(e,["append-row*","append-col*","remove-cell","remove-row","remove-col","change-width-col-modal","change-width-table-modal","remove-table"]))}static getSelectionCoords(){if(f_.selectionStartElement&&f_.selectionEndElement){const e=[[Array.prototype.indexOf.call(f_.selectionStartElement.parentElement.children,f_.selectionStartElement),Array.prototype.indexOf.call(f_.selectionStartElement.parentElement.parentElement.children,f_.selectionStartElement.parentElement)],[Array.prototype.indexOf.call(f_.selectionEndElement.parentElement.children,f_.selectionEndElement),Array.prototype.indexOf.call(f_.selectionEndElement.parentElement.parentElement.children,f_.selectionEndElement.parentElement)]];return{coords:e,minX:Math.min(e[0][0],e[1][0]),maxX:Math.max(e[0][0],e[1][0]),minY:Math.min(e[0][1],e[1][1]),maxY:Math.max(e[0][1],e[1][1])}}return null}static getCellAt(e,t){const o=f_.selectionStartElement.closest("table");return o&&void 0!==o.children[t]&&void 0!==o.children[t].children[e]?o.children[t].children[e]:null}static getTargetCell(e){let t=e.target,o=null;do{if(["td","th"].includes(t.tagName.toLowerCase())){o=t;break}t=t.parentNode}while(t&&t!==e.currentTarget);return o}static resetSelection(e){document.querySelectorAll(".ql-editor td.ql-cell-selected").forEach((e=>{e.classList.remove("ql-cell-selected")}))}}f_.focusedCell=null,f_.isMouseDown=!1,f_.selectionStartElement=null,f_.selectionEndElement=null,f_.previousSelection=[],f_.dblClickTimeout=null,f_.clickedCellTimeout=null,f_.preventMouseDown=!0,f_.cellSelectionOnClick=!0;const v_=Quill.import("parchment"),g_=Quill.import("blots/container"),b_=Quill.import("blots/scroll");class y_{static random_id(){return Math.random().toString(36).slice(2)}static getBlot(e){let t=null;const o=e.getSelection();return o&&(t=e.getLeaf(o.index)[0]),t}static find_td(e){let t=y_.getBlot(e);if(t)for(;null!=t&&"td"!==t.statics.blotName;)t=t.parent;return t}static find_td_node(e){let t=y_.find_td(e);if(t)return t.domNode}static find_table(e){const t=y_.find_td(e);if(t)return t.parent.parent}static find_table_node(e){const t=y_.find_table(e);if(t)return t.domNode}static getQuill(e){let t=null;if(e instanceof Node?!e instanceof Element&&(e=e.parentElement):"object"==typeof e&&void 0!==e.domNode&&(e=e.domNode),e instanceof Element){const o=e.closest(".ql-container");o&&(t=Quill.find(o))}return t}static insertTable(e,t,o){const i=y_.random_id(),a=v_.create("table",i);for(let e=0;e<o;e++){const e=y_.random_id(),o=v_.create("tr",e);a.appendChild(o);for(let a=0;a<t;a++){const t=[i,e,y_.random_id()].join("|"),a=v_.create("td",t);o.appendChild(a);const r=v_.create("block");a.appendChild(r);const n=v_.create("break");r.appendChild(n)}}let r=y_.getBlot(e),n=null;for(;null!=r&&!(r instanceof g_||r instanceof b_);)n=r,r=r.parent;r.insertBefore(a,n)}static removeTable(e){const t=f_.getSelectionCoords();let o;if(f_.resetSelection(e.container),t){const e=f_.selectionStartElement.closest("table");o=v_.find(e)}else{const t=y_.find_td(e);t&&(o=t.parent.parent)}o&&(h_.register("remove",{node:o.domNode,nextNode:o.next?o.next.domNode:null,parentNode:o.parent.domNode}),h_.add(e),o.remove())}static changeWidthTable(e,t){const o=`width:${t+"%"}`,i=y_.find_table(e);if(i){const t=i.domNode;h_.register("propertyChange",{node:t,property:"style",oldValue:t.style,newValue:o}),t.setAttribute("style",o),h_.add(e)}}static addCol(e,t="after"){const o=f_.getSelectionCoords();let i=y_.find_td(e);if(o){const e=f_.getCellAt(o.maxX,o.minY)||f_.getCellAt(o.maxX,o.maxY);e&&(i=v_.find(e))}if(i){if("before"!==t&&i.domNode.getAttribute("colspan")){const e=i.parent.domNode.children[Array.prototype.indexOf.call(i.parent.domNode.children,i.domNode)+Number.parseInt(i.domNode.getAttribute("colspan"))-1];e&&(i=v_.find(e))}const o=Array.prototype.indexOf.call(i.parent.domNode.children,i.domNode)+("before"===t?0:1),a=o===i.parent.domNode.children.length,r=i.parent.parent,n=r.domNode.getAttribute("table_id");let s=[];r.children.forEach((function(e){const t=e.domNode.getAttribute("row_id"),i=y_.random_id(),l=v_.create("td",[n,t,i].join("|"));if(!a||o===e.domNode.children.length)if(void 0===e.domNode.children[o])e.appendChild(l),h_.register("insert",{node:l.domNode,parentNode:e.domNode});else{const t=v_.find(e.domNode.children[o]);if(t){if(t.domNode.previousSibling){let e=t.domNode.previousSibling.getAttribute("merge_id");if(Number.parseInt(t.domNode.previousSibling.getAttribute("colspan")||1)>1&&(e=t.domNode.previousSibling.getAttribute("cell_id")),e&&(l.domNode.setAttribute("merge_id",e),-1===s.indexOf(e))){s.push(e);const t=r.domNode.querySelector('td[cell_id="'+e+'"]');if(t){const e=Number.parseInt(t.getAttribute("colspan"));t.setAttribute("colspan",e+1),h_.register("propertyChange",{node:t,property:"colspan",oldValue:e,newValue:e+1})}}}e.insertBefore(l,t),h_.register("insert",{node:l.domNode,nextNode:t.domNode})}}})),h_.add(e)}}static addRow(e,t="after"){const o=f_.getSelectionCoords();let i=y_.find_td(e);if(o){const e=f_.getCellAt(o.minX,o.maxY)||f_.getCellAt(o.maxX,o.maxY);e&&(i=v_.find(e))}if(i){const o=i.parent,a=o.domNode.children.length,r=o.parent,n=o.clone();let s=Array.prototype.indexOf.call(r.domNode.children,o.domNode)+("before"===t?0:1),l=!0;const c=Number.parseInt(i.domNode.getAttribute("rowspan")||1);c>1&&(l=!1,"before"!==t&&(s+=c-1));const u=r.domNode.getAttribute("table_id"),d=y_.random_id();n.domNode.setAttribute("row_id",d);let p=[],h=[];for(let e=0;e<a;e++){const i=o.domNode.children[e],a=y_.random_id(),s=v_.create("td",[u,d,a].join("|"));if(i&&l){let e,o;if(i.getAttribute("rowspan")?(e=i.getAttribute("cell_id"),o=i,"before"===t&&-1===h.indexOf(e)&&h.push(e)):i.getAttribute("merge_id")&&(e=i.getAttribute("merge_id"),o=r.domNode.querySelector('td[cell_id="'+e+'"]')),e&&o&&-1===h.indexOf(e)&&o.getAttribute("rowspan")){let t=Number.parseInt(o.getAttribute("rowspan"));t>1&&(-1===p.indexOf(e)&&(p.push(e),o.setAttribute("rowspan",t+1),h_.register("propertyChange",{node:o,property:"rowspan",oldValue:t,newValue:t+1})),s.domNode.setAttribute("merge_id",e))}}n.appendChild(s);const c=v_.create("block");s.appendChild(c);const m=v_.create("break");c.appendChild(m)}if(void 0===r.domNode.children[s])r.appendChild(n),h_.register("insert",{node:n.domNode,parentNode:r.domNode});else{const e=v_.find(r.domNode.children[s]);e&&(r.insertBefore(n,e),h_.register("insert",{node:n.domNode,nextNode:e.domNode}))}h_.add(e)}}static removeCol(e){const t=f_.getSelectionCoords();let o,i,a;if(f_.resetSelection(e.container),t){const e=f_.selectionStartElement.closest("table");o=v_.find(e),i=t.minX,a=t.maxX-t.minX+1}else{a=1;const t=y_.find_td(e);t&&(o=t.parent.parent,i=Array.prototype.indexOf.call(t.parent.domNode.children,t.domNode))}if(o&&"number"==typeof i&&"number"==typeof a){for(let e=0;e<a;e++)o.children.forEach((function(e){const t=e.domNode.children[i];if(t){const i=t.getAttribute("merge_id");if(i){const e=o.domNode.querySelector(`td[cell_id="${i}"]`);if(e){const t=Number.parseInt(e.getAttribute("colspan"));e.setAttribute("colspan",t-1),h_.register("propertyChange",{node:e,property:"colspan",oldValue:t,newValue:t-1})}}t.getAttribute("colspan")&&y_._split(t),h_.register("remove",{node:t,nextNode:t.nextSibling,parentNode:e.domNode});const a=v_.find(t);a&&a.remove()}}));f_.selectionStartElement=f_.selectionEndElement=null,h_.add(e)}}static changeWidthCol(e,t){const o=f_.getSelectionCoords();let i,a,r;if(f_.resetSelection(e.container),o){const e=f_.selectionStartElement.closest("table");i=v_.find(e),a=o.minX,r=o.maxX-o.minX+1}else{r=1;const t=y_.find_td(e);t&&(i=t.parent.parent,a=Array.prototype.indexOf.call(t.parent.domNode.children,t.domNode))}if(i&&"number"==typeof a&&"number"==typeof r){const o=t+"%";for(let e=0;e<r;e++)i.children.forEach((function(e){const t=e.domNode.children[a];t&&(h_.register("propertyChange",{node:t,property:"width",oldValue:t.width,newValue:o}),t.setAttribute("width",o))}));h_.add(e)}}static removeRow(e){const t=f_.getSelectionCoords();f_.resetSelection(e.container);const o=e=>{let t=[];[...e.children].forEach((function(o){const i=o.getAttribute("merge_id");if(i&&-1===t.indexOf(i)){const o=e.parentNode.querySelector(`td[cell_id="${i}"]`);if(t.push(i),o){const e=Number.parseInt(o.getAttribute("rowspan"));o.setAttribute("rowspan",e-1),h_.register("propertyChange",{node:o,property:"rowspan",oldValue:e,newValue:e-1})}}o.getAttribute("rowspan")&&y_._split(o)}))};if(t){const e=f_.selectionStartElement.closest("table"),i=t.minY,a=t.maxY-t.minY+1;for(let t=0;t<a;t++){const t=e.children[i];if(t){o(t),h_.register("remove",{node:t,nextNode:t.nextSibling,parentNode:e});const i=v_.find(t);i&&i.remove()}}}else{const t=y_.find_td(e);if(t){const e=t.parent;o(e.domNode),h_.register("remove",{node:e.domNode,nextNode:e.next?e.next.domNode:null,parentNode:e.parent.domNode});const i=v_.find(e.domNode);i&&i.remove()}}f_.selectionStartElement=f_.selectionEndElement=null,h_.add(e)}static splitCell(e){const t=f_.getSelectionCoords();f_.resetSelection(e.container);let o=y_.find_td(e);if(t&&t.maxX-t.minX==0&&t.maxY-t.minY==0){const e=f_.getCellAt(t.minX,t.minY);o=v_.find(e)}o&&y_._split(o.domNode)&&(f_.selectionStartElement=f_.selectionEndElement=null,o.domNode.innerHTML=o.domNode.innerHTML,h_.add(e))}static mergeSelection(e){const t=f_.getSelectionCoords();if(f_.resetSelection(e.container),t){const o=f_.selectionStartElement.closest("table"),i=t.maxX-t.minX+1,a=t.maxY-t.minY+1;if(i>1||a>1){let r,n=null,s=null,l=[],c=[];for(let e=t.minY;e<=t.maxY;e++)for(let i=t.minX;i<=t.maxX;i++){const t=o.children[e].children[i];if(t){if(""!==t.textContent&&c.push(t.innerHTML),n){let e=t.innerHTML;l.push({node:t,oldContent:e,newContent:"<p><br></p>"})}else r=t.getAttribute("cell_id"),n=t,s=n.innerHTML;if(t.getAttribute("colspan")||t.getAttribute("rowspan"))return alert("Cannot merge already merged cell"),!1}}n&&l.length&&(l.forEach((e=>{e.node.setAttribute("merge_id",r),e.node.innerHTML=e.newContent})),n.setAttribute("colspan",i),n.setAttribute("rowspan",a),n.innerHTML=c.join("")),f_.selectionStartElement=f_.selectionEndElement=null,h_.register("merge",{node:n,mergedNodes:l,colSpan:i,rowSpan:a,oldContent:s,newContent:n.innerHTML}),h_.add(e)}}}static removeCell(e){const t=f_.getSelectionCoords();f_.resetSelection(e.container);let o=y_.find_td(e);if(t&&t.maxX-t.minX==0&&t.maxY-t.minY==0){const e=f_.getCellAt(t.minX,t.minY);o=v_.find(e)}o&&y_._removeCell(o.domNode)&&(f_.selectionStartElement=f_.selectionEndElement=null,h_.add(e))}static removeSelection(e){const t=f_.getSelectionCoords();if(f_.resetSelection(e.container),t){const o=f_.selectionStartElement.closest("table");let i=[];for(let e=t.minY;e<=t.maxY;e++)for(let a=t.minX;a<=t.maxX;a++){const t=o.children[e].children[a];if(t){const e=t.getAttribute("merge_id");if(e){const t=o.querySelector(`td[cell_id="${e}"]`);t&&y_._split(t)}(t.getAttribute("rowspan")||t.getAttribute("colspan"))&&y_._split(t);let a=t,r=t.nextSibling,n=t.parentNode;"TR"===n.nodeName&&n.childNodes.length<=1&&(a=n,r=a.nextSibling,n=a.parentNode),i.push(a),h_.register("remove",{node:a,nextNode:r,parentNode:n})}}i.forEach((e=>{const t=v_.find(e);t&&t.remove()})),f_.selectionStartElement=f_.selectionEndElement=null,h_.add(e)}}static _removeCell(e,t=!0){let o=e.getAttribute("cell_id");if("TD"===e.nodeName){if(t){if(e.getAttribute("merge_id")){if(!(e=e.closest("table").querySelector('td[cell_id="'+e.getAttribute("merge_id")+'"]')))return!1;o=e.getAttribute("cell_id")}(e.getAttribute("colspan")||e.getAttribute("rowspan"))&&e.parentNode.parentNode.querySelectorAll(`td[merge_id="${o}"`).forEach((e=>{y_._removeCell(e,!1)}))}let i=e,a=e.nextSibling,r=e.parentNode;"TR"===r.nodeName&&r.childNodes.length<=1&&(i=r,a=i.nextSibling,r=i.parentNode,"TABLE"===r.nodeName&&r.childNodes.length<=1&&(i=r,a=i.nextSibling,r=i.parentNode));const n=v_.find(i);return n&&n.remove(),h_.register("remove",{node:i,nextNode:a,parentNode:r}),!0}return!1}static _split(e){const t=e.getAttribute("cell_id");let o=[];e.parentNode.parentNode.querySelectorAll(`td[merge_id="${t}"`).forEach((e=>{o.push({node:e,oldContent:e.innerHTML,newContent:e.innerHTML}),e.removeAttribute("merge_id")}));const i=Number.parseInt(e.getAttribute("colspan")||1),a=Number.parseInt(e.getAttribute("rowspan")||1);return(i>1||a>1)&&(e.removeAttribute("colspan"),e.removeAttribute("rowspan"),h_.register("split",{node:e,mergedNodes:o,colSpan:i,rowSpan:a,oldContent:e.innerHTML,newContent:e.innerHTML}),!0)}static emitTextChange(e,t,o="user"){const i=e.getContents();e.emitter.emit("text-change",t.diff(i),t,o)}static table_handler(e,t){if((f_.selectionStartElement&&!t.container.contains(f_.selectionStartElement)||f_.selectionEndElement&&!t.container.contains(f_.selectionEndElement))&&(f_.selectionStartElement=f_.selectionEndElement=null,f_.resetSelection()),e.includes("newtable_")){const o=e.split("_"),i=Number.parseInt(o[1]),a=Number.parseInt(o[2]);y_.insertTable(t,a,i)}else{let o="after";switch(e){case"append-col-before":o="before";case"append-col":case"append-col-after":y_.addCol(t,o);break;case"remove-col":y_.removeCol(t);break;case"append-row-above":o="before";case"append-row":case"append-row-below":y_.addRow(t,o);break;case"remove-row":y_.removeRow(t);break;case"insert":y_.insertTable(t,1,1);break;case"remove-table":y_.removeTable(t);break;case"split-cell":y_.splitCell(t);break;case"merge-selection":y_.mergeSelection(t);break;case"remove-cell":y_.removeCell(t);break;case"remove-selection":y_.removeSelection(t);break;case"undo":if(t.history.stack.undo.length){const e=t.history.stack.undo[t.history.stack.undo.length-1];if(void 0!==e.type&&void 0!==e.id&&"tableHistory"===e.type)return h_.undo(t,e.id),!1;if(e.undo?.ops.some((e=>null===e.attributes?.td))){const t=e.undo.ops.findIndex((e=>null===e.attributes?.td));e.undo.ops.splice(t,1)}}return!0;case"redo":if(t.history.stack.redo.length){const e=t.history.stack.redo[t.history.stack.redo.length-1];if(void 0!==e.type&&void 0!==e.id&&"tableHistory"===e.type)return h_.redo(t,e.id),!1}return!0;case"copy":if(f_.selectionStartElement&&f_.selectionEndElement){let{anchorNode:e,anchorOffset:t,focusNode:o,focusOffset:i}=window.getSelection();window.getSelection().removeAllRanges();let a=document.createRange();return a.setStart(f_.selectionStartElement,0),a.setEnd(f_.selectionEndElement,f_.selectionEndElement.childNodes.length),window.getSelection().addRange(a),f_.selectionStartElement===f_.selectionEndElement&&f_.selectionStartElement.classList.remove("ql-cell-selected"),document.execCommand("copy"),f_.selectionStartElement===f_.selectionEndElement&&f_.selectionStartElement.classList.add("ql-cell-selected"),window.getSelection().removeAllRanges(),a.setStart(e,t),a.setEnd(o,i),window.getSelection().addRange(a),!1}return!0}}}}const x_=Quill.import("parchment");class A_ extends n_{static create(e){let t=super.create("tr");return t.setAttribute("row_id",e||y_.random_id()),t}format(){}optimize(e){if(0===this.children.length)if(null!=this.statics.defaultChild){var t=this.createDefaultChild();this.appendChild(t),t.optimize(e)}else this.remove();let o=this.next;null!=o&&o.prev===this&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&o.domNode.getAttribute("row_id")===this.domNode.getAttribute("row_id")&&(o.moveChildren(this),o.remove())}insertBefore(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t}))){let o=this.createDefaultChild(t);o.appendChild(e),e=o}super.insertBefore(e,t)}replace(e){if(e.statics.blotName!==this.statics.blotName){let t=this.createDefaultChild();e.moveChildren(t,this),this.appendChild(t)}super.replace(e)}createDefaultChild(e){let t=null;return t=e?e.domNode.getAttribute("table_id"):this.parent?this.parent.domNode.getAttribute("table_id"):this.domNode.parent.getAttribute("table_id"),x_.create(this.statics.defaultChild,[t,this.domNode.getAttribute("row_id"),y_.random_id()].join("|"))}}A_.blotName="tr",A_.tagName="tr",A_.scope=x_.Scope.BLOCK_BLOT,A_.defaultChild="td",A_.allowedChildren=[d_];const w_=Quill.import("parchment");class __ extends n_{static create(e){let t=super.create("table");return t.setAttribute("table_id",e||y_.random_id()),t.setAttribute("border","1"),t}format(){}optimize(e){super.optimize(e);let t=y_.getQuill(this.domNode);if(!t)return;let o=this.next;const i=this.domNode.getAttribute("table_id");null!=o&&o.prev===this&&o.domNode.getAttribute("table_id")===i&&o.statics.blotName===this.statics.blotName&&o.domNode.tagName===this.domNode.tagName&&(o.moveChildren(this),o.remove()),void 0!==t.table.tables[i]&&t.table.tables[i].cell_counter===this.domNode.querySelectorAll("td").length&&t.table.tables[i].row_counter===this.domNode.querySelectorAll("tr").length&&(this.domNode.querySelectorAll("td[cell_id][colspan], td[cell_id][rowspan]").forEach((e=>{const t=Array.prototype.indexOf.call(e.parentNode.children,e),o=Number.parseInt(e.getAttribute("colspan")||1),i=Number.parseInt(e.getAttribute("rowspan")||1);if(!this.domNode.querySelector('td[merge_id="'+e.getAttribute("cell_id")+'"]')&&(o>1||i>1)){let a=e.parentNode;for(let r=1;r<=i&&a;r++){let i=1===r?a.children[t+1]:a.children[t];for(let t=1;t<=o;t++){if(1===t&&1===r)continue;let o=document.createElement("td");o.setAttribute("cell_id",y_.random_id()),o.setAttribute("row_id",a.getAttribute("row_id")),o.setAttribute("table_id",this.domNode.getAttribute("table_id")),o.setAttribute("merge_id",e.getAttribute("cell_id"));let n=document.createElement("p"),s=document.createElement("br");n.appendChild(s),o.appendChild(n),a.insertBefore(o,i)}a=a.nextSibling}}})),t.table.tables[i].pasted&&(h_.register("insert",{node:this.domNode,nextNode:this.domNode.nextSibling,parentNode:this.domNode.parentNode}),h_.add(t)),delete t.table.tables[i])}insertBefore(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t}))){let t=w_.create(this.statics.defaultChild,y_.random_id());t.appendChild(e),e=t}super.insertBefore(e,t)}}__.blotName="table",__.tagName="table",__.scope=w_.Scope.BLOCK_BLOT,__.defaultChild="tr",__.allowedChildren=[A_];const E_=Quill.import("blots/container"),O_=Quill.import("parchment"),S_=Quill.import("delta");E_.order=["list","contain","td","tr","table"];const I_=e=>{e.container.dispatchEvent(new CustomEvent("onTableInTable",{bubbles:!0,composed:!0}))};class k_{static register(){Quill.register(d_,!0),Quill.register(A_,!0),Quill.register(__,!0),Quill.register(n_,!0)}constructor(e,t){e.history.tableStack={},e.table={isInTable:!1,tables:{}},e.container.addEventListener("mousedown",(o=>f_.mouseDown(e,o,t.cellSelectionOnClick))),e.container.addEventListener("mousemove",(t=>f_.mouseMove(e,t))),e.container.addEventListener("mouseup",(t=>f_.mouseUp(e,t))),e.on("selection-change",((t,o)=>f_.selectionChange(e,t,o)));e.getModule("toolbar").addHandler("table",(function(t){k_.configToolbar(e,t)}));const o=e.getModule("clipboard");o.addMatcher("TABLE",(function(t,o){if(N_(e))return I_(e),new S_;const i=null===t.closest(".ql-editor"),a=t.getAttribute("table_id");return a&&(e.table.tables[a]={pasted:i,row_counter:t.querySelectorAll("tr").length,cell_counter:t.querySelectorAll("td").length}),o})),o.addMatcher("TR",(function(e,t){return t})),o.addMatcher("TD, TH",(function(e,t){if(0===t.length())t.ops=[{insert:"\n"}];else if(t.ops&&t.ops.length){const e=t.ops.reduce(((e,t,o)=>void 0!==t.insert?o:e),-1);e>=0&&!t.ops[e].insert.endsWith("\n")&&(t.ops[e].insert+="\n")}const o=e.closest("table");if(!e.getAttribute("table_id")&&o&&(o.getAttribute("table_id")||o.setAttribute("table_id",y_.random_id()),e.setAttribute("table_id",o.getAttribute("table_id"))),!e.getAttribute("row_id")){const t=e.closest("tr");t&&(t.getAttribute("row_id")||t.setAttribute("row_id",y_.random_id()),e.setAttribute("row_id",t.getAttribute("row_id")))}e.getAttribute("cell_id")||e.setAttribute("cell_id",y_.random_id());return t.compose((new S_).retain(t.length(),{td:[e.getAttribute("table_id"),e.getAttribute("row_id"),e.getAttribute("cell_id"),e.getAttribute("merge_id"),e.getAttribute("colspan"),e.getAttribute("rowspan")].join("|")}))})),m_.enable(e,["newtable_*","insert","undo","redo"])}static tableOptions(){const e=[];for(let t=1;t<=5;t++)for(let o=1;o<=5;o++)e.push("newtable_"+t+"_"+o);return e}static configToolbar(e,t){return C_(t)&&N_(e)?(I_(e),!1):y_.table_handler(t,e)}static removeNodeChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}static keyboardHandler(e,t,o,i){const a=e.getFormat(o.index-1),r=e.getFormat(o.index+o.length);if("undo"===t||"redo"===t||"copy"===t)return y_.table_handler(t,e);if(!a.td&&!i.format.td&&!r.td)return!0;if("backspace"===t){if(!i.offset&&!o.length){const t=window.getSelection(),o=(e=>{const t=[];for(let o=0;o<e.length;o++)t.push(o);return t.map((t=>e.item(t)))})(document.querySelectorAll(".ql-editor p")).filter((e=>t.containsNode(e,!0)));if(!o.length)return!0;if(f_.getSelectionCoords())return!1;let i=!1;return o.forEach(((e,t)=>{if(e.previousSibling){if("TABLE"===e.previousSibling.nodeName){const t=e.previousSibling.querySelectorAll("td");t.length&&y_._removeCell(t[t.length-1])&&(i=!0)}}else"TD"===e.parentNode.nodeName&&y_._removeCell(e.parentNode)&&(i=!0)})),i&&h_.add(e),!i}return!0}if("tab"===t){f_.resetSelection();const[t]=e.getLeaf(e.getSelection().index);let o,i,a;if(t.parent.domNode.closest("td")){if(t.parent.domNode.closest("td").nextSibling){for(a=t.parent.domNode.closest("td").nextSibling;a&&a.getAttribute("merge_id");)a=a.nextSibling;i=Quill.find(a||t.parent.domNode.closest("tr").nextSibling)}else t.parent.domNode.closest("tr").nextSibling?i=Quill.find(t.parent.domNode.closest("tr").nextSibling):t.parent.domNode.closest("table").nextSibling&&(i=Quill.find(t.parent.domNode.closest("table").nextSibling));return o=i.offset(e.scroll),e.setSelection(o,0),!1}return!0}if("shiftTab"===t){f_.resetSelection();const[t]=e.getLeaf(e.getSelection().index);let o,i,a;if(t.parent.domNode.closest("td")){if(t.parent.domNode.closest("td").previousSibling){for(a=t.parent.domNode.closest("td").previousSibling;a.getAttribute("merge_id");)a=a.previousSibling;i=Quill.find(a)}else if(t.parent.domNode.closest("tr").previousSibling){for(a=t.parent.domNode.closest("tr").previousSibling.lastChild;a.getAttribute("merge_id");)a=a.previousSibling;i=Quill.find(a)}else if(t.parent.domNode.closest("table").previousSibling)return!0;return o=i.offset(e.scroll),e.setSelection(o,0),!1}return!0}let n=e.selection.getNativeRange().start.node;if(!n)return!1;let s=O_.find(n);if("delete"===t&&s&&i.offset<(s.text?s.text.length:0))return!0;const[l]=e.getLine(o.index-1),[c]=e.getLine(o.index+1);if("selectAll"===t){let t,o,[i]=e.getLine(e.getSelection().index);if("TD"===i.parent.domNode.nodeName){o=i.parent.domNode.nextSibling?Quill.find(i.parent.domNode.nextSibling):i.parent.domNode.closest("tr").nextSibling?Quill.find(i.parent.domNode.closest("tr").nextSibling):Quill.find(i.parent.domNode.closest("table").nextSibling),t=Quill.find(i.parent.domNode);let a=t.offset(e.scroll),r=o.offset(e.scroll);return e.setSelection(a,r-a-1),!1}return!0}return!("backspace"!==t||!l||!l.next)||(!("delete"!==t||!c||!c.prev)||void 0)}}const C_=(e="")=>e.includes("newtable_"),N_=e=>e&&e.getSelection(!0)&&e.getFormat(e.getSelection(!0)).td,T_=Rl`
  <style>
    .nota-rodape {
      position: relative;
      cursor: pointer;
      font-size: 0.8em;
      line-height: 1;
      vertical-align: super;
      z-index: 1;
      margin-left: 0.1em;
    }

    .nota-rodape::after {
      content: attr(data-nota);
      color: transparent;
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform: translate(-50%, 50%);
      opacity: 0;
      background-color: var(--sl-color-red-300);
      color: black;
      width: 20px;
      height: 20px;
      line-height: 20px;
      text-align: center;
      border-radius: 50%;
      font-size: 0.7em;
      text-indent: 0;
      z-index: -1;
      transition: transform opacity 0.3s ease;
    }

    .nota-rodape:hover::after {
      animation: pulseAnimation 1s infinite;
      opacity: 0.5;
    }

    @keyframes pulseAnimation {
      0% {
        transform: translate(-50%, 50%) scale(0.8);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, 50%) scale(1.2);
        opacity: 0.5;
      }
      100% {
        transform: translate(-50%, 50%) scale(1.6);
        opacity: 0;
      }
    }

    .nota-rodape.pulse::after {
      animation: pulseAnimation 1s infinite;
    }
  </style>
`,q_=(e,t=!1)=>{if(!e.emRevisao)return e;if(t)R_(e);else{let t=[];t=D_(e),t.length>0&&e.revisoes.push(...t)}return e},R_=e=>{var t;e.revisoes=null===(t=e.revisoes)||void 0===t?void 0:t.filter((e=>e.descricao!==Kv.JustificativaAlterada))},D_=e=>{const t=[];return P_(e)||t.push(new ux(e.usuario,mx(new Date),Kv.JustificativaAlterada)),t},P_=e=>{var t;const o=null===(t=e.revisoes)||void 0===t?void 0:t.filter((t=>{var o;return t.usuario.nome===(null===(o=e.usuario)||void 0===o?void 0:o.nome)&&t.descricao===Kv.JustificativaAlterada}));if(o.length>0){return o[0].dataHora=mx(new Date),!0}return!1},L_=(e,t=!1)=>{if(!e.emRevisao)return e;if(t)M_(e);else{let t=[];t=$_(e),t.length>0&&e.revisoes.push(...t)}return e},M_=e=>{var t;e.revisoes=null===(t=e.revisoes)||void 0===t?void 0:t.filter((e=>e.descricao!==Wv.TextoLivreAlterado))},$_=e=>{const t=[];return j_(e)||t.push(new dx(e.usuario,mx(new Date),Wv.TextoLivreAlterado)),t},j_=e=>{var t;const o=(null===(t=e.revisoes)||void 0===t?void 0:t.filter((e=>e.descricao===Wv.TextoLivreAlterado)))||[];return o.length>0},z_=Quill.import("modules/keyboard"),F_=Quill.import("modules/clipboard"),B_=Quill.import("delta");let U_=class extends(Gc(iA)(Jl)){constructor(){super(),this.texto="",this.anexos=[],this.notasRodape=[],this.registroEvento="",this.lexmlEtaConfig=new Qc,this.modo="",this.onChange=new uA,this.icons=Quill.import("ui/icons"),this.existeRevisaoByModo=()=>this.modo===kv.TEXTO_LIVRE?((e=[])=>e.filter((e=>e.descricao===Wv.TextoLivreAlterado)).length)(iA.getState().elementoReducer.revisoes)>0:((e=[])=>e.filter((e=>e.descricao===Kv.JustificativaAlterada)).length)(iA.getState().elementoReducer.revisoes)>0,this.labelAnexo=()=>{var e;const t=null===(e=this.anexos)||void 0===e?void 0:e.length;return 1===t?"1 anexo":t>1?`${t} anexos`:""},this.onTableInTable=()=>{clearTimeout(this.timerAlerta),this.timerAlerta=setTimeout((()=>this.alertar("Não é permitido inserir uma tabela dentro de outra tabela.")),100)},this.init=()=>{var e,t,o;const i=this.querySelector(`#${this.id}-inner`);if(i){Quill.register("modules/keyboard",z_,!0),Quill.register("modules/clipboard",F_,!0),Quill.register("modules/table",k_,!0),Quill.register("formats/estilo-texto",ic,!0),Quill.register("formats/text-indent",uc,!0),Quill.register("formats/margin-bottom",nc,!0);const a=H_,r=V_;this.modo===kv.JUSTIFICATIVA&&(a.push(["nota-rodape"]),a[1]=["bold","italic","underline","link"],r.push("nota-rodape"),r.push("link")),this.quill=new Quill(i,{formats:r,modules:{toolbar:{container:a,handlers:{undo:this.undo,redo:this.redo,image:this.imageHandler}},aspasCurvas:!0,notaRodape:!0,table:{cellSelectionOnClick:!1},revisao:{usuario:(null===(e=iA.getState().elementoReducer.usuario)||void 0===e?void 0:e.nome)||"Anônimo",emRevisao:!1,gerenciarKeydown:!0,tableModule:k_,tableTrick:y_},history:{delay:1e3,maxStack:500,userOnly:!0},clipboard:{},keyboard:{bindings:{tab:{key:"tab",handler:(e,t)=>{if(k_.keyboardHandler(this.quill,"tab",e,t)&&this.quill){this.quill.history.cutoff();const t=(new B_).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,Quill.sources.SILENT)}}},shiftTab:{key:"tab",shiftKey:!0,handler:(e,t)=>k_.keyboardHandler(this.quill,"shiftTab",e,t)},selectAll:{key:"a",ctrlKey:!0,handler:(e,t)=>k_.keyboardHandler(this.quill,"selectAll",e,t)},backspace:{key:"backspace",handler:(e,t)=>k_.keyboardHandler(this.quill,"backspace",e,t)},delete:{key:"delete",handler:(e,t)=>k_.keyboardHandler(this.quill,"delete",e,t)},undo:{ctrlKey:!0,key:"z",handler:(e,t)=>k_.keyboardHandler(this.quill,"undo",e,t)},redo:{ctrlKey:!0,key:"y",handler:(e,t)=>k_.keyboardHandler(this.quill,"redo",e,t)},redo2:{ctrlKey:!0,shiftKey:!0,key:"z",handler:(e,t)=>k_.keyboardHandler(this.quill,"redo",e,t)},copy:{ctrlKey:!0,key:"c",handler:(e,t)=>k_.keyboardHandler(this.quill,"copy",e,t)},"list autofill":{key:" ",handler:()=>!0}}}},placeholder:"",theme:"snow"}),this.setContent(this.texto,this.notasRodape),this.addBotoesExtra(),this.configureTooltip(),this.elTableManagerButton=this.querySelectorAll("span.ql-table")[1],null===(t=this.quill)||void 0===t||t.on("text-change",this.updateTexto),null===(o=this.quill)||void 0===o||o.on("selection-change",this.onSelectionChange),this.alterarLarguraColunaModal.callback=this.alterarLarguraDaColuna,this.alterarLarguraTabelaModal.callback=this.alterarLarguraDaTabela,this.alterarLarguraImagemModal.callback=this.alterarLarguraDaImagem,i.addEventListener("contextmenu",this.menuContextImagem),i.addEventListener("click",this.onClick);this.quill.getModule("toolbar").addHandler("table",(e=>{var t,o;if(k_.configToolbar(this.quill,e),"change-width-col-modal"===e){this.lastSelecion=null===(t=this.quill)||void 0===t?void 0:t.getSelection();const e=y_.find_td_node(this.quill);this.showAlterarLarguraColunaModal(e.width)}else if("change-width-table-modal"===e){this.lastSelecion=null===(o=this.quill)||void 0===o?void 0:o.getSelection();const e=y_.find_table_node(this.quill);this.showAlterarLarguraTabelaModal(e.width)}})),this.quill.root.addEventListener("nota-rodape:change",this.updateNotasRodape),this.quill.root.addEventListener("nota-rodape:remove",this.updateNotasRodape),this.buildRevisoes()}},this.menuContextImagem=e=>{const t=e.target;"IMG"===t.tagName&&(e.preventDefault(),async function(e,t,o,i){const a=document.createRange().createContextualFragment(`\n    <div>\n      <style>\n      #bg-wp-menu-img {\n        position:absolute; top:0; left:0; width:100%; height:100%; z-index:999;\n      }\n      #menu-img {\n        position:absolute; z-index:9999;\n      }\n      </style>\n      <div id="bg-wp-menu-img">\n        <sl-menu id="menu-img" style="top:${o}px;left:${i}px;">\n          <sl-menu-item id="item-menu-largura-img" value="alterar-largura-imagem">Alterar a largura da imagem</sl-menu-item>\n        </sl-menu>\n      </div>\n    </div>\n  `),r=a.querySelector("#item-menu-largura-img"),n=a.querySelector("#bg-wp-menu-img");r.onclick=()=>{const o=t.getAttribute("width");e.showAlterarLarguraImagemModal(t,o)},n.onclick=()=>{var e;null===(e=n.parentElement)||void 0===e||e.remove()},await e.appendChild(a)}(this,t,e.pageY,e.pageX))},this.onClick=e=>{const t=e.target;"IMG"===t.tagName&&(e.preventDefault(),this.selectImage(t))},this.selectImage=e=>{const t=Quill.find(e);t&&this.quill.setSelection(this.quill.getIndex(t),1)},this.imageHandler=()=>{let e=this.querySelector("input.ql-image[type=file]");null===e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("hidden","true"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(()=>{if(null!==e.files&&null!==e.files[0]){const t=new FileReader;t.onload=t=>{if(this.tamanhoPermitido(t)){const o=this.quill.getSelection(!0);this.quill.updateContents((new B_).retain(o.index).delete(o.length).insert({image:t.target.result}),Quill.sources.USER),e.value="",e.remove()}else this.alertar(`Essa imagem ultrapassa o tamanho máximo permitido (${Math.trunc(this.lexmlEtaConfig.tamanhoMaximoImagem/1024)}MB)`),e.remove()},t.readAsDataURL(e.files[0])}})),this.appendChild(e)),e.click()},this.tamanhoPermitido=e=>Math.round(e.loaded/1024)<this.lexmlEtaConfig.tamanhoMaximoImagem,this.alterarLarguraDaColuna=e=>{this.quill.setSelection(this.lastSelecion),y_.changeWidthCol(this.quill,e),this.updateApenasTexto(),this.hideAlterarLarguraColunaModal()},this.alterarLarguraDaTabela=e=>{this.quill.setSelection(this.lastSelecion),y_.changeWidthTable(this.quill,e),this.updateApenasTexto(),this.hideAlterarLarguraTabelaModal()},this.alterarLarguraDaImagem=(e,t)=>{const o=Quill.find(e);o&&o.format("width",`${t}%`)},this.onSelectionChange=e=>{setTimeout((()=>{var t;const o=e&&(null===(t=this.quill)||void 0===t?void 0:t.getFormat(e));this.highLightBotaoGerenciarTabela(o)}),0)},this.highLightBotaoGerenciarTabela=e=>{var t,o;(null==e?void 0:e.td)?null===(t=this.elTableManagerButton)||void 0===t||t.classList.add("table-selected"):null===(o=this.elTableManagerButton)||void 0===o||o.classList.remove("table-selected")},this.addBotoesExtra=()=>{const e=this.quill.getModule("toolbar").container,t=this.querySelector(".panel-anexo"),o=this.querySelector(".panel-revisao");t&&(t.parentNode.removeChild(t),e.appendChild(t)),o.parentNode.removeChild(o),e.appendChild(o)},this.configureTooltip=()=>{const e=this.quill.getModule("toolbar").container;this.setTitle(e,"button.ql-bold","Negrito (Ctrl+b)"),this.setTitle(e,"button.ql-italic","Itálico (Ctrl+i)"),this.setTitle(e,"button.ql-underline","Sublinhado (Ctrl+u)"),this.setTitle(e,'button.ql-list[value="ordered"]',"Lista ordenada"),this.setTitle(e,'button.ql-list[value="bullet"]',"Lista não ordenada"),this.setTitle(e,"button.ql-blockquote","Bloco de citação"),this.setTitle(e,'button.ql-script[value="sub"]',"Subscrito"),this.setTitle(e,'button.ql-script[value="super"]',"Sobrescrito"),this.setTitle(e,".ql-align .ql-picker-options > span:nth-child(1)","Alinhar à esquerda"),this.setTitle(e,".ql-align .ql-picker-options > span:nth-child(2)","Centralizar"),this.setTitle(e,".ql-align .ql-picker-options > span:nth-child(3)","Alinhar à direita"),this.setTitle(e,".ql-align .ql-picker-options > span:nth-child(4)","Justificar"),this.setTitle(e,"button.ql-clean","Limpar formatação"),this.setTitle(e,"button.ql-image","Inserir imagem"),this.setTitle(e,"button.ql-undo","Desfazer (Ctrl+z)"),this.setTitle(e,"button.ql-redo","Refazer (Ctrl+y)"),this.setTitle(e,"button.ql-margin-bottom","Distância entre parágrafos"),this.setTitle(e,"button.ql-text-indent","Recuo de parágrafo"),this.setTitle(e,"button.ql-table","Tabela"),this.setTitle(e,"button.ql-nota-rodape","Nota de rodapé")},this.setTitle=(e,t,o)=>{var i;return null===(i=e.querySelector(t))||void 0===i?void 0:i.setAttribute("title",o)},this.setContent=(e,t=[])=>{if(!this.quill||!this.quill.root)return;this.texto=e;const o=(e||"").replace(/align-justify/g,"ql-align-justify").replace(/align-center/g,"ql-align-center").replace(/align-right/g,"ql-align-right");this.quill.history.clear(),this.quill.revisao.modo=this.modo,this.configAbrindoTexto(!0),this.quill.setContents(this.quill.clipboard.convert(o),"silent"),this.configAbrindoTexto(!1),this.notasRodape=t,setTimeout((()=>{this.quill.history.clear(),this.quill.notasRodape.associar(t)}),100),this.atualizaStatusElementosRevisao()},this.configAbrindoTexto=e=>{this.quill.revisao.isAbrindoTexto=e,this.quill.notasRodape.isAbrindoTexto=e;const t=this.quill.revisao.emRevisao;e||this.getQuantidadeDeRevisoes()>0&&!t&&this.switchRevisaoComponent&&(this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(!1),setTimeout((()=>{this.alertaGlobalRevisao()}),0)),this.atualizaQuantidadeRevisao(this.getQuantidadeDeRevisoes())},this.updateApenasTexto=()=>{var e;const t=this.ajustaHtml(null===(e=this.quill)||void 0===e?void 0:e.root.innerHTML);this.texto="<p><br></p>"===t?"":t},this.updateTexto=()=>{var e,t;const o=this.ajustaHtml(null===(e=this.quill)||void 0===e?void 0:e.root.innerHTML);this.texto="<p><br></p>"===o?"":o,this.agendarEmissaoEventoOnChange(),this.onSelectionChange(null===(t=this.quill)||void 0===t?void 0:t.getSelection()),this.atualizaStatusElementosRevisao(!1),this.buildRevisoes(),this.alertaGlobalRevisao()},this.updateNotasRodape=()=>{this.notasRodape=this.quill.notasRodape.getNotasRodape()},this.ajustaHtml=(e="")=>{let t=e.replace(/ql-indent/g,"indent").replace(/ql-align-justify/g,"align-justify").replace(/ql-align-center/g,"align-center").replace(/ql-align-right/g,"align-right");return t=((e="")=>{const t=document.createElement("div");return t.innerHTML=e,t.querySelectorAll("td[merge_id]").forEach((e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)})),t.innerHTML})(t),this.quill.notasRodape.ajustarConteudoTagsNotaRodape(t)},this.undo=()=>{var e,t,o;null===(e=this.quill)||void 0===e||e.focus(),this.quill.revisao.handleUndo(null===(t=this.quill)||void 0===t?void 0:t.getSelection(),void 0)&&(null===(o=this.quill)||void 0===o||o.history.undo(),this.atualizaStatusElementosRevisao())},this.redo=()=>{var e,t,o;null===(e=this.quill)||void 0===e||e.focus(),this.quill.revisao.handleRedo(null===(t=this.quill)||void 0===t?void 0:t.getSelection(),void 0)&&(null===(o=this.quill)||void 0===o||o.history.redo(),this.atualizaStatusElementosRevisao())},this.atualizaAnexo=e=>{this.anexos=[...e]},this.getNomeSwitch=()=>this.modo===kv.JUSTIFICATIVA?"chk-em-revisao-justificativa":"chk-em-revisao-texto-livre",this.getNomeBadge=()=>this.modo===kv.JUSTIFICATIVA?"badge-marca-alteracao-justificativa":"badge-marca-alteracao-texto-livre",this.aceitarRevisoes=()=>{this.quill.revisao.revisarTodos(!0),this.setTextoAntesRevisao(void 0),this.atualizaStatusElementosRevisao(),this.removeRevisoes()},this.getQuantidadeDeRevisoes=()=>{var e,t,o;return null!==(o=null===(t=null===(e=this.quill)||void 0===e?void 0:e.revisao)||void 0===t?void 0:t.getQuantidadeRevisoes())&&void 0!==o?o:0},this.rejeitarRevisoes=()=>{this.quill.revisao.revisarTodos(!1),this.setTextoAntesRevisao(void 0),this.atualizaStatusElementosRevisao(),this.removeRevisoes()},this.atualizaStatusElementosRevisao=(e=!0)=>{const t=()=>{const e=this.getQuantidadeDeRevisoes();e>0&&!iA.getState().elementoReducer.emRevisao&&this.switchRevisaoComponent&&this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(!1),0===e?this.removeRevisoes():e>0&&this.buildRevisoes(),this.desabilitaBtn(0===e,"rejeitar-revisao"),this.desabilitaBtn(0===e,"aceitar-revisao"),this.atualizaQuantidadeRevisao(e)};e?t():(clearTimeout(this.timerAtualizaStatusElementosRevisao),this.timerAtualizaStatusElementosRevisao=setTimeout(t,100))},this.desabilitaBtn=(e,t)=>{const o=this.querySelector(`.${t}`);o&&(e?o.setAttribute("disabled",e):o.removeAttribute("disabled"))},this.buildRevisoes=()=>{this.modo===kv.JUSTIFICATIVA?q_(iA.getState().elementoReducer):L_(iA.getState().elementoReducer)},this.removeRevisoes=()=>{q_(iA.getState().elementoReducer,!0),L_(iA.getState().elementoReducer,!0)},this.atualizaQuantidadeRevisao=e=>{const t=this.querySelector(`#${this.getNomeBadge()}`);t&&(t.innerHTML=e)},this.icons.undo='<svg viewbox="0 0 18 18">\n    <polygon class="ql-fill ql-stroke" points="6 10 4 12 2 10 6 10"></polygon>\n    <path class="ql-stroke" d="M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9"></path>\n    </svg>',this.icons.redo='<svg viewbox="0 0 18 18">\n    <polygon class="ql-fill ql-stroke" points="12 10 14 12 16 10 12 10"></polygon>\n    <path class="ql-stroke" d="M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5"></path>\n    </svg>',this.icons.bold=Rw,this.icons.underline='\n<svg class="icon-sublinhado" id="sublinhado" viewBox="0 0 16 16">\n<path class="ql-fill" d="M4.3,9.4c0-0.2,0.1-0.3,0.4-0.3h0.7c0.2,0,0.4,0.1,0.4,0.3C5.8,10.4,6.7,11,8.1,11c1.3,0,2.2-0.5,2.2-1.4\n\tc0-1.1-1.2-1.4-2.5-1.9C6.3,7.3,4.5,6.8,4.5,5c0-1.6,1.5-2.7,3.5-2.7c1.9,0,3.3,1.1,3.4,2.6c0,0.2-0.1,0.3-0.4,0.3h-0.7\n\tc-0.2,0-0.3-0.1-0.4-0.3C9.9,4.1,9.2,3.7,8.1,3.7C6.8,3.7,6,4.2,6,5c0,0.9,0.9,1.2,2.2,1.6c1.6,0.5,3.5,1.1,3.5,3.1\n\tc0,1.6-1.5,2.7-3.6,2.7C5.9,12.3,4.3,11.2,4.3,9.4z"/>\n<rect x="3" y="12.9" class="ql-fill" width="9.9" height="0.8"/>\n</svg>\n',this.icons["text-indent"]='\n<svg width="16" height="16" xmlns="http://www.w3.org/2000/svg">\n<path class="ql-fill" d="M 1.65,2.3 0.9,3.05 2.65,4.95 0.9,6.9 1.65,7.65 4.15,4.95 1.65,2.3 M 2.5,12.45 v 1.1 h 11.25 v -1.1 H 2.5 m 11.25,-2.1 V 9.25 H 2.5 v 1.1 h 11.25 m 0,-4.3 H 6.25 V 7.1 h 7.5 V 6.05 m 0,-3.25 h -7.5 v 1.1 h 7.5 z"></path>\n</svg>\n',this.icons["margin-bottom"]='\n<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n<path class="ql-fill" d="M 13.55 8.55 L 13.55 7.4 1.8 7.4 1.8 8.55 13.55 8.55 M 13.05 2.55 L 13.05 1.4 1.8 1.4 1.8 2.55 13.05 2.55 M 10.55 5.55 L 10.55 4.4 1.8 4.4 1.8 5.55 10.55 5.55 M 10.3 14.65 L 10.3 10.4 1.8 10.4 1.8 14.65 10.3 14.65 M 2.8 11.4 L 9.3 11.4 9.3 13.55 2.8 13.55 2.8 11.4 M 14.6 10.55 L 13.85 9.8 11.3 12.55 13.85 15.2 14.6 14.45 12.8 12.55 14.6 10.55 Z"/>\n</svg>\n',this.icons["nota-rodape"]='\n<svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n  <path class="ql-fill" d="M 5,12.5 C 5,12.223858 5.2238576,12 5.5,12 h 2 c 0.6666664,0 0.6666664,1 0,1 h -2 C 5.2238576,13 5,12.776142 5,12.5 m 0,-2 C 5,10.223858 5.2238576,10 5.5,10 h 5 c 0.666666,0 0.666666,1 0,1 h -5 C 5.2238576,11 5,10.776142 5,10.5" />\n  <path class="ql-fill" d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2" />\n  <path class="ql-fill" d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z" />\n</svg>\n'}get textoAntesRevisao(){return this.existeRevisaoByModo()?this._textoAntesRevisao:void 0}setTextoAntesRevisao(e){this._textoAntesRevisao=e}showAlterarLarguraColunaModal(e){this.alterarLarguraColunaModal.show(e)}hideAlterarLarguraColunaModal(){this.alterarLarguraColunaModal.hide()}showAlterarLarguraTabelaModal(e){this.alterarLarguraTabelaModal.show(e)}hideAlterarLarguraTabelaModal(){this.alterarLarguraTabelaModal.hide()}agendarEmissaoEventoOnChange(){clearTimeout(this.timerOnChange),this.timerOnChange=setTimeout((()=>{this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:this.registroEvento}})),this.onChange.notify(this.registroEvento)}),1e3)}update(e){super.update(e)}createRenderRoot(){return this}stateChanged(e){var t,o,i;const a=null===(t=this.quill)||void 0===t?void 0:t.revisao,r=null===(o=e.elementoReducer.ui)||void 0===o?void 0:o.events;r&&(r.some((e=>e.stateType===nf.RevisaoAtivada))?(a&&(a.emRevisao=!0),this._textoAntesRevisao||(this._textoAntesRevisao=this.texto)):r.some((e=>e.stateType===nf.RevisaoDesativada))&&(a&&(a.emRevisao=!1),this._textoAntesRevisao=void 0),r.some((e=>e.stateType===nf.AtualizaUsuario))&&a&&(a.usuario=(null===(i=e.elementoReducer.usuario)||void 0===i?void 0:i.nome)||"Anônimo"))}render(){return Rl`
      ${t_} ${e_} ${T_} ${this.modo===kv.TEXTO_LIVRE?this.renderBotaoAnexo():""}

      <div class="panel-revisao">
        <lexml-switch-revisao
          id="lexml-switch-revisao-component"
          modo="${this.modo}"
          class="revisao-container"
          .nomeSwitch="${this.getNomeSwitch()}"
          .nomeBadgeQuantidadeRevisao="${this.getNomeBadge()}"
        >
        </lexml-switch-revisao>

        <sl-button class="aceitar-revisao" variant="default" size="small" title="Aceitar revisões" @click=${()=>this.aceitarRevisoes()} disabled circle>
          <sl-icon name="check-lg"></sl-icon>
        </sl-button>
        <sl-button class="rejeitar-revisao" variant="default" size="small" title="Rejeitar revisões" @click=${()=>this.rejeitarRevisoes()} disabled circle>
          <sl-icon name="x"></sl-icon>
        </sl-button>
      </div>
      <div id="${this.id}-inner" class="editor-texto-rico" @onTableInTable=${this.onTableInTable}></div>
      <lexml-alterar-largura-tabela-coluna-modal id="lexml-alterar-largura-tabela-modal" tipo="tabela"></lexml-alterar-largura-tabela-coluna-modal>
      <lexml-alterar-largura-tabela-coluna-modal id="lexml-alterar-largura-coluna-modal" tipo="coluna"></lexml-alterar-largura-tabela-coluna-modal>
      <lexml-alterar-largura-imagem-modal id="lexml-alterar-largura-img-modal"></lexml-alterar-largura-imagem-modal>
    `}renderBotaoAnexo(){return Rl`
      <div class="panel-anexo">
        <button type="button" style="width:auto" title="Anexo" @click=${()=>async function(e,t,o){const i=document.createElement("sl-dialog");o.appendChild(i),i.label="Anexo",i.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const a=document.createRange().createContextualFragment(`\n  <style>\n    .anexo-item {\n      display: flex;\n      align-items: center;\n      gap: 0.5em;\n      margin-bottom: 1em;\n    }\n\n    sl-icon[name="paperclip"] {\n      width: 1.5em;\n      height: 1.5em;\n    }\n\n    sl-button sl-icon {\n      font-size: 1.5em;\n      pointer-events: none;\n      vertical-align: -4px;\n    }\n\n    #input-upload::part(form-control) {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      gap: 1em;\n    }\n  </style>\n  <div id="wp-upload">\n    <label for="input-upload">Selecione o arquivo a ser anexado à emenda</label>\n    <br/>\n    <br/>\n    <input id="input-upload" type="file" accept="application/pdf" size="small"></input>\n    <br/>\n    <label class="tipoErrado" style="color: red;" hidden="true" id="tipoErrado">Esse arquivo não é um PDF</label>\n    <br/>\n    <label class="tamanhoMaximoAtingido" style="color: red;" hidden="true" id="tamanhoMaximoAtingido">Ultrapassou o tamanho máximo permitido (${Math.trunc(o.lexmlEtaConfig.tamanhoMaximoAnexo/1024)}MB)</label>\n  </div>\n  <br/>\n  <div id="form" class="input-validation-required"></div>\n  <br/>\n  <sl-button id="btnConfirmarAnexo" class="controls" slot="footer" variant="primary">Confirmar</sl-button>\n  <sl-button class="controls" slot="footer" variant="default">Cancelar</sl-button>\n  `),r=t=>{const o=t.target.getAttribute("nomeArquivo");e=e.filter((e=>e.nomeArquivo!==o)),s()},n=t=>{var o,i;const a=t.target.getAttribute("nomeArquivo"),r=e.find((e=>e.nomeArquivo===a)),n=window.open();(null===(o=null==r?void 0:r.nomeArquivo)||void 0===o?void 0:o.match(/\.(pdf)$/))?null==n||n.document.write(`<embed src="${null==r?void 0:r.base64}" width="100%" height="100%" type="application/pdf"></embed>`):(null===(i=null==r?void 0:r.nomeArquivo)||void 0===i?void 0:i.match(/\.(jpeg|jpg|gif|png|svg)$/))?null==n||n.document.write(`<img src="${null==r?void 0:r.base64}" style="width:100%; height:auto;">`):null==n||n.document.write(`<a href="${null==r?void 0:r.base64}" download="${null==r?void 0:r.nomeArquivo}">Download do arquivo anexo</a>`)},s=()=>{let t="";l.hidden=!!e.length,e.forEach((e=>t+=`<span class="anexo-item">\n                            <sl-icon name="paperclip"></sl-icon>\n                            <a download="${e.nomeArquivo}" href="data:application/pdf;base64,${e.base64}">\n                              <span>\n                                ${e.nomeArquivo}\n                              </span>\n                            </a>\n                            \x3c!--\n                            <sl-button class="btn-preview-anexo" size="small" title="Visualizar o anexo em uma nova janela" nomeArquivo="${e.nomeArquivo}">\n                              <sl-icon name="eye"></sl-icon>\n                            </sl-button>\n                            --\x3e\n                            <sl-button class="btn-remove-anexo" size="small" title="Remover anexo" nomeArquivo="${e.nomeArquivo}">\n                              <sl-icon name="x"></sl-icon>\n                            </sl-button>\n                          </span>`)),u.innerHTML=t,((null==u?void 0:u.querySelectorAll(".btn-remove-anexo"))||[]).forEach((e=>e.onclick=r)),((null==u?void 0:u.querySelectorAll(".btn-preview-anexo"))||[]).forEach((e=>e.onclick=n))},l=a.querySelector("#wp-upload"),c=a.querySelector("#input-upload"),u=a.querySelector("#form"),d=a.querySelectorAll(".controls"),p=d[0],h=d[1];c.oninput=()=>{f(o)},p.onclick=()=>{t(e),m(i),null==i||i.hide(),null==i||i.remove(),e=[]},h.onclick=()=>{null==i||i.hide(),null==i||i.remove(),e=[]};const m=e=>{e.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:"anexo"}}))},f=async t=>{var o,i;if(null==c?void 0:c.files){const a=c.files[0],r=g(a,t);if(0===r.length){const t=await b(a);e.push(t),c.files=null,s(),null===(o=document.getElementById("btnConfirmarAnexo"))||void 0===o||o.removeAttribute("disabled")}else null===(i=document.getElementById("btnConfirmarAnexo"))||void 0===i||i.setAttribute("disabled","true"),r.forEach((e=>{var t;null===(t=document.getElementById(e))||void 0===t||t.removeAttribute("hidden")})),v.forEach((e=>{var t;r.includes(e)||null===(t=document.getElementById(e))||void 0===t||t.setAttribute("hidden","true")}))}},v=["tamanhoMaximoAtingido","tipoErrado"],g=(e,t)=>{const o=[];return e&&(Math.round(e.size/1024)>t.lexmlEtaConfig.tamanhoMaximoAnexo&&o.push("tamanhoMaximoAtingido"),"application/pdf"!==e.type&&o.push("tipoErrado"),o.length>0&&o.push("restricao")),o},b=e=>new Promise(((t,o)=>{p.disabled=!0,h.disabled=!0;const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{var o;p.disabled=!1,h.disabled=!1,t({nomeArquivo:e.name,base64:((null===(o=i.result)||void 0===o?void 0:o.toString())||"").replace(/.*;base64,/,"")})},i.onerror=e=>o(e)}));s(),await i.appendChild(a),await i.show(),setTimeout((()=>{c.focus()}),0)}(this.anexos,this.atualizaAnexo,this)}>
          <span>
            <svg xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 35 35" data-name="Layer 2" id="Layer_2">
              <path
                d="M18,34.75A11.32,11.32,0,0,1,6.69,23.45V8A7.78,7.78,0,0,1,22.25,8V22.49a4.58,4.58,0,1,1-9.15,0V9.29a1.25,1.25,0,0,1,2.5,0v13.2a2.08,2.08,0,1,0,4.15,0V8A5.28,5.28,0,0,0,9.19,8V23.45A8.82,8.82,0,0,0,18,32.25c4.6,0,7.81-3.62,7.81-8.8V9.66a1.25,1.25,0,0,1,2.5,0V23.45C28.31,30,24,34.75,18,34.75Z"
              />
            </svg>
            ${this.labelAnexo()}
          </span>
        </button>
      </div>
    `}alertar(e){const t=Object.assign(document.createElement("sl-alert"),{variant:"danger",closable:!0,duration:4e3,innerHTML:`\n        <sl-icon name="exclamation-octagon" slot="icon"></sl-icon>\n        ${e}\n      `});document.body.append(t),t.toast()}firstUpdated(){this.init()}disconnectedCallback(){var e,t;null===(e=this.quill)||void 0===e||e.off("text-change",this.updateTexto),null===(t=this.quill)||void 0===t||t.off("selection-change",this.onSelectionChange),super.disconnectedCallback()}alertaGlobalRevisao(){var e,t,o,i;const a="alerta-global-revisao";if(this.getQuantidadeDeRevisoes()>0||tg(iA.getState().elementoReducer.revisoes)>0){if(0===(null===(t=null===(e=iA.getState().elementoReducer.ui)||void 0===e?void 0:e.alertas)||void 0===t?void 0:t.filter((e=>e.id===a)).length)){const e={id:a,tipo:"info",mensagem:"Este documento contém marcas de revisão e não deve ser protocolado até que estas sejam removidas.",podeFechar:!0,exibirComandoEmenda:!0};setTimeout((()=>{iA.dispatch(nu(e))}),0)}}else(null===(i=null===(o=iA.getState().elementoReducer.ui)||void 0===o?void 0:o.alertas)||void 0===i?void 0:i.some((e=>e.id===a)))&&iA.dispatch(su(a))}editarNotaRodape(e){this.quill.notasRodape.editar(e)}removerNotaRodape(e){this.quill.notasRodape.remover(e)}};Mc([zc({type:String})],U_.prototype,"texto",void 0),Mc([zc({type:Array})],U_.prototype,"anexos",void 0),Mc([zc({type:Array})],U_.prototype,"notasRodape",void 0),Mc([zc({type:String,attribute:"registro-evento"})],U_.prototype,"registroEvento",void 0),Mc([zc({type:Object})],U_.prototype,"lexmlEtaConfig",void 0),Mc([zc({type:String})],U_.prototype,"modo",void 0),Mc([Uc("#lexml-alterar-largura-coluna-modal")],U_.prototype,"alterarLarguraColunaModal",void 0),Mc([Uc("#lexml-alterar-largura-tabela-modal")],U_.prototype,"alterarLarguraTabelaModal",void 0),Mc([Uc("#lexml-alterar-largura-img-modal")],U_.prototype,"alterarLarguraImagemModal",void 0),Mc([Uc("#lexml-switch-revisao-component")],U_.prototype,"switchRevisaoComponent",void 0),U_=Mc([$c("editor-texto-rico")],U_);const V_=["estilo","bold","italic","image","underline","align","list","script","image","table","tr","td","link","text-indent","margin-bottom","width","added","removed"],H_=[[{estilo:[!1,"ementa","norma-alterada"]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],["undo","redo"],[{align:[]}],[{"text-indent":"0px"}],[{"margin-bottom":"0px"}],["clean"],[{table:k_.tableOptions()},{table:["change-width-col-modal","change-width-table-modal","append-row-above","append-row-below","append-col-before","append-col-after","remove-col","remove-row","remove-table","split-cell","merge-selection"]}],["image"]];let G_=class extends Jl{constructor(){super(...arguments),this.valorLargura="",this.tipo=""}show(e){this.valorLargura=e?e.replace("%",""):"",this.slAlert.hide(),this.slDialog.show(),setTimeout((()=>{var e,t;null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("sl-input"))||void 0===t||t.focus()}),0)}hide(){this.slDialog.hide()}alterarLargura(){const e=parseInt(this.valorLargura);isNaN(e)||e<1||e>100?this.slAlert.show():this.callback&&(this.callback(e),this.hide())}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
        sl-input::part(base) {
          width: 150px;
        }
        sl-alert {
          margin-top: 20px;
        }
      </style>
      <sl-dialog label="Alterar a largura da ${this.tipo}">
        <label>Informe o percentual da largura da ${this.tipo}</label>
        <sl-input type="number" value=${this.valorLargura} width="30px" @input=${e=>this.valorLargura=e.target.value}>
          <sl-icon name="percent" slot="suffix"></sl-icon>
        </sl-input>
        <sl-alert variant="warning" closable class="alert-closable">
          <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>
          Informe uma valor numérico de 1 a 100.
        </sl-alert>
        <sl-button slot="footer" @click=${()=>this.alterarLargura()}>Alterar</sl-button>
        <sl-button slot="footer" variant="primary" @click=${()=>this.slDialog.hide()}>Fechar</sl-button>
      </sl-dialog>
    `}};Mc([Uc("sl-dialog")],G_.prototype,"slDialog",void 0),Mc([Uc("sl-alert")],G_.prototype,"slAlert",void 0),Mc([zc({type:String})],G_.prototype,"valorLargura",void 0),Mc([zc({type:String})],G_.prototype,"tipo",void 0),Mc([zc({type:Function})],G_.prototype,"callback",void 0),G_=Mc([$c("lexml-alterar-largura-tabela-coluna-modal")],G_);let Q_=class extends Jl{constructor(){super(...arguments),this.valorLargura="",this.tipo=""}show(e,t){this.valorLargura=t?t.replace("%",""):"",this.img=e,this.slAlert.hide(),this.slDialog.show(),setTimeout((()=>{var e,t;null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("sl-input"))||void 0===t||t.focus()}),0)}hide(){this.slDialog.hide()}alterarLargura(){const e=parseInt(this.valorLargura);isNaN(e)||e<1||e>100?this.slAlert.show():this.callback&&(this.callback(this.img,e),this.hide())}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
        sl-input::part(base) {
          width: 150px;
        }
        sl-alert {
          margin-top: 20px;
        }
      </style>
      <sl-dialog label="Alterar a largura da Imagem">
        <label>Informe o percentual da largura da Imagem</label>
        <sl-input type="number" value=${this.valorLargura} width="30px" @input=${e=>this.valorLargura=e.target.value}>
          <sl-icon name="percent" slot="suffix"></sl-icon>
        </sl-input>
        <sl-alert variant="warning" closable class="alert-closable">
          <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>
          Informe uma valor numérico de 1 a 100.
        </sl-alert>
        <sl-button slot="footer" @click=${()=>this.alterarLargura()}>Alterar</sl-button>
        <sl-button slot="footer" variant="primary" @click=${()=>this.slDialog.hide()}>Fechar</sl-button>
      </sl-dialog>
    `}};Mc([Uc("sl-dialog")],Q_.prototype,"slDialog",void 0),Mc([Uc("sl-alert")],Q_.prototype,"slAlert",void 0),Mc([zc({type:String})],Q_.prototype,"valorLargura",void 0),Mc([zc({type:String})],Q_.prototype,"tipo",void 0),Mc([zc({type:Function})],Q_.prototype,"callback",void 0),Q_=Mc([$c("lexml-alterar-largura-imagem-modal")],Q_);const K_=Rl`
  <style>
    :root,
    :host,
    .sl-theme-light {
      --sl-color-gray-50: hsl(0 0% 97.5%);
      --sl-color-gray-100: hsl(240 4.8% 95.9%);
      --sl-color-gray-200: hsl(240 5.9% 90%);
      --sl-color-gray-300: hsl(240 4.9% 83.9%);
      --sl-color-gray-400: hsl(240 5% 64.9%);
      --sl-color-gray-500: hsl(240 3.8% 46.1%);
      --sl-color-gray-600: hsl(240 5.2% 33.9%);
      --sl-color-gray-700: hsl(240 5.3% 26.1%);
      --sl-color-gray-800: hsl(240 3.7% 15.9%);
      --sl-color-gray-900: hsl(240 5.9% 10%);
      --sl-color-gray-950: hsl(240 7.3% 8%);

      --sl-color-red-50: hsl(0 85.7% 97.3%);
      --sl-color-red-100: hsl(0 93.3% 94.1%);
      --sl-color-red-200: hsl(0 96.3% 89.4%);
      --sl-color-red-300: hsl(0 93.5% 81.8%);
      --sl-color-red-400: hsl(0 90.6% 70.8%);
      --sl-color-red-500: hsl(0 84.2% 60.2%);
      --sl-color-red-600: hsl(0 72.2% 50.6%);
      --sl-color-red-700: hsl(0 73.7% 41.8%);
      --sl-color-red-800: hsl(0 70% 35.3%);
      --sl-color-red-900: hsl(0 62.8% 30.6%);
      --sl-color-red-950: hsl(0 60% 19.6%);

      --sl-color-orange-50: hsl(33.3 100% 96.5%);
      --sl-color-orange-100: hsl(34.3 100% 91.8%);
      --sl-color-orange-200: hsl(32.1 97.7% 83.1%);
      --sl-color-orange-300: hsl(30.7 97.2% 72.4%);
      --sl-color-orange-400: hsl(27 96% 61%);
      --sl-color-orange-500: hsl(24.6 95% 53.1%);
      --sl-color-orange-600: hsl(20.5 90.2% 48.2%);
      --sl-color-orange-700: hsl(17.5 88.3% 40.4%);
      --sl-color-orange-800: hsl(15 79.1% 33.7%);
      --sl-color-orange-900: hsl(15.3 74.6% 27.8%);
      --sl-color-orange-950: hsl(15.2 69.1% 19%);

      --sl-color-amber-50: hsl(48 100% 96.1%);
      --sl-color-amber-100: hsl(48 96.5% 88.8%);
      --sl-color-amber-200: hsl(48 96.6% 76.7%);
      --sl-color-amber-300: hsl(45.9 96.7% 64.5%);
      --sl-color-amber-400: hsl(43.3 96.4% 56.3%);
      --sl-color-amber-500: hsl(37.7 92.1% 50.2%);
      --sl-color-amber-600: hsl(32.1 94.6% 43.7%);
      --sl-color-amber-700: hsl(26 90.5% 37.1%);
      --sl-color-amber-800: hsl(22.7 82.5% 31.4%);
      --sl-color-amber-900: hsl(21.7 77.8% 26.5%);
      --sl-color-amber-950: hsl(22.9 74.1% 16.7%);

      --sl-color-yellow-50: hsl(54.5 91.7% 95.3%);
      --sl-color-yellow-100: hsl(54.9 96.7% 88%);
      --sl-color-yellow-200: hsl(52.8 98.3% 76.9%);
      --sl-color-yellow-300: hsl(50.4 97.8% 63.5%);
      --sl-color-yellow-400: hsl(47.9 95.8% 53.1%);
      --sl-color-yellow-500: hsl(45.4 93.4% 47.5%);
      --sl-color-yellow-600: hsl(40.6 96.1% 40.4%);
      --sl-color-yellow-700: hsl(35.5 91.7% 32.9%);
      --sl-color-yellow-800: hsl(31.8 81% 28.8%);
      --sl-color-yellow-900: hsl(28.4 72.5% 25.7%);
      --sl-color-yellow-950: hsl(33.1 69% 13.9%);

      --sl-color-lime-50: hsl(78.3 92% 95.1%);
      --sl-color-lime-100: hsl(79.6 89.1% 89.2%);
      --sl-color-lime-200: hsl(80.9 88.5% 79.6%);
      --sl-color-lime-300: hsl(82 84.5% 67.1%);
      --sl-color-lime-400: hsl(82.7 78% 55.5%);
      --sl-color-lime-500: hsl(83.7 80.5% 44.3%);
      --sl-color-lime-600: hsl(84.8 85.2% 34.5%);
      --sl-color-lime-700: hsl(85.9 78.4% 27.3%);
      --sl-color-lime-800: hsl(86.3 69% 22.7%);
      --sl-color-lime-900: hsl(87.6 61.2% 20.2%);
      --sl-color-lime-950: hsl(86.5 60.6% 13.9%);

      --sl-color-green-50: hsl(138.5 76.5% 96.7%);
      --sl-color-green-100: hsl(140.6 84.2% 92.5%);
      --sl-color-green-200: hsl(141 78.9% 85.1%);
      --sl-color-green-300: hsl(141.7 76.6% 73.1%);
      --sl-color-green-400: hsl(141.9 69.2% 58%);
      --sl-color-green-500: hsl(142.1 70.6% 45.3%);
      --sl-color-green-600: hsl(142.1 76.2% 36.3%);
      --sl-color-green-700: hsl(142.4 71.8% 29.2%);
      --sl-color-green-800: hsl(142.8 64.2% 24.1%);
      --sl-color-green-900: hsl(143.8 61.2% 20.2%);
      --sl-color-green-950: hsl(144.3 60.7% 12%);

      --sl-color-emerald-50: hsl(151.8 81% 95.9%);
      --sl-color-emerald-100: hsl(149.3 80.4% 90%);
      --sl-color-emerald-200: hsl(152.4 76% 80.4%);
      --sl-color-emerald-300: hsl(156.2 71.6% 66.9%);
      --sl-color-emerald-400: hsl(158.1 64.4% 51.6%);
      --sl-color-emerald-500: hsl(160.1 84.1% 39.4%);
      --sl-color-emerald-600: hsl(161.4 93.5% 30.4%);
      --sl-color-emerald-700: hsl(162.9 93.5% 24.3%);
      --sl-color-emerald-800: hsl(163.1 88.1% 19.8%);
      --sl-color-emerald-900: hsl(164.2 85.7% 16.5%);
      --sl-color-emerald-950: hsl(164.3 87.5% 9.4%);

      --sl-color-teal-50: hsl(166.2 76.5% 96.7%);
      --sl-color-teal-100: hsl(167.2 85.5% 89.2%);
      --sl-color-teal-200: hsl(168.4 83.8% 78.2%);
      --sl-color-teal-300: hsl(170.6 76.9% 64.3%);
      --sl-color-teal-400: hsl(172.5 66% 50.4%);
      --sl-color-teal-500: hsl(173.4 80.4% 40%);
      --sl-color-teal-600: hsl(174.7 83.9% 31.6%);
      --sl-color-teal-700: hsl(175.3 77.4% 26.1%);
      --sl-color-teal-800: hsl(176.1 69.4% 21.8%);
      --sl-color-teal-900: hsl(175.9 60.8% 19%);
      --sl-color-teal-950: hsl(176.5 58.6% 11.4%);

      --sl-color-cyan-50: hsl(183.2 100% 96.3%);
      --sl-color-cyan-100: hsl(185.1 95.9% 90.4%);
      --sl-color-cyan-200: hsl(186.2 93.5% 81.8%);
      --sl-color-cyan-300: hsl(187 92.4% 69%);
      --sl-color-cyan-400: hsl(187.9 85.7% 53.3%);
      --sl-color-cyan-500: hsl(188.7 94.5% 42.7%);
      --sl-color-cyan-600: hsl(191.6 91.4% 36.5%);
      --sl-color-cyan-700: hsl(192.9 82.3% 31%);
      --sl-color-cyan-800: hsl(194.4 69.6% 27.1%);
      --sl-color-cyan-900: hsl(196.4 63.6% 23.7%);
      --sl-color-cyan-950: hsl(196.8 61% 16.1%);

      --sl-color-sky-50: hsl(204 100% 97.1%);
      --sl-color-sky-100: hsl(204 93.8% 93.7%);
      --sl-color-sky-200: hsl(200.6 94.4% 86.1%);
      --sl-color-sky-300: hsl(199.4 95.5% 73.9%);
      --sl-color-sky-400: hsl(198.4 93.2% 59.6%);
      --sl-color-sky-500: hsl(198.6 88.7% 48.4%);
      --sl-color-sky-600: hsl(200.4 98% 39.4%);
      --sl-color-sky-700: hsl(201.3 96.3% 32.2%);
      --sl-color-sky-800: hsl(201 90% 27.5%);
      --sl-color-sky-900: hsl(202 80.3% 23.9%);
      --sl-color-sky-950: hsl(202.3 73.8% 16.5%);

      --sl-color-blue-50: hsl(213.8 100% 96.9%);
      --sl-color-blue-100: hsl(214.3 94.6% 92.7%);
      --sl-color-blue-200: hsl(213.3 96.9% 87.3%);
      --sl-color-blue-300: hsl(211.7 96.4% 78.4%);
      --sl-color-blue-400: hsl(213.1 93.9% 67.8%);
      --sl-color-blue-500: hsl(217.2 91.2% 59.8%);
      --sl-color-blue-600: hsl(221.2 83.2% 53.3%);
      --sl-color-blue-700: hsl(224.3 76.3% 48%);
      --sl-color-blue-800: hsl(225.9 70.7% 40.2%);
      --sl-color-blue-900: hsl(224.4 64.3% 32.9%);
      --sl-color-blue-950: hsl(226.2 55.3% 18.4%);

      --sl-color-indigo-50: hsl(225.9 100% 96.7%);
      --sl-color-indigo-100: hsl(226.5 100% 93.9%);
      --sl-color-indigo-200: hsl(228 96.5% 88.8%);
      --sl-color-indigo-300: hsl(229.7 93.5% 81.8%);
      --sl-color-indigo-400: hsl(234.5 89.5% 73.9%);
      --sl-color-indigo-500: hsl(238.7 83.5% 66.7%);
      --sl-color-indigo-600: hsl(243.4 75.4% 58.6%);
      --sl-color-indigo-700: hsl(244.5 57.9% 50.6%);
      --sl-color-indigo-800: hsl(243.7 54.5% 41.4%);
      --sl-color-indigo-900: hsl(242.2 47.4% 34.3%);
      --sl-color-indigo-950: hsl(243.5 43.6% 22.9%);

      --sl-color-violet-50: hsl(250 100% 97.6%);
      --sl-color-violet-100: hsl(251.4 91.3% 95.5%);
      --sl-color-violet-200: hsl(250.5 95.2% 91.8%);
      --sl-color-violet-300: hsl(252.5 94.7% 85.1%);
      --sl-color-violet-400: hsl(255.1 91.7% 76.3%);
      --sl-color-violet-500: hsl(258.3 89.5% 66.3%);
      --sl-color-violet-600: hsl(262.1 83.3% 57.8%);
      --sl-color-violet-700: hsl(263.4 70% 50.4%);
      --sl-color-violet-800: hsl(263.4 69.3% 42.2%);
      --sl-color-violet-900: hsl(263.5 67.4% 34.9%);
      --sl-color-violet-950: hsl(265.1 61.5% 21.4%);

      --sl-color-purple-50: hsl(270 100% 98%);
      --sl-color-purple-100: hsl(268.7 100% 95.5%);
      --sl-color-purple-200: hsl(268.6 100% 91.8%);
      --sl-color-purple-300: hsl(269.2 97.4% 85.1%);
      --sl-color-purple-400: hsl(270 95.2% 75.3%);
      --sl-color-purple-500: hsl(270.7 91% 65.1%);
      --sl-color-purple-600: hsl(271.5 81.3% 55.9%);
      --sl-color-purple-700: hsl(272.1 71.7% 47.1%);
      --sl-color-purple-800: hsl(272.9 67.2% 39.4%);
      --sl-color-purple-900: hsl(273.6 65.6% 32%);
      --sl-color-purple-950: hsl(276 59.5% 16.5%);

      --sl-color-fuchsia-50: hsl(289.1 100% 97.8%);
      --sl-color-fuchsia-100: hsl(287 100% 95.5%);
      --sl-color-fuchsia-200: hsl(288.3 95.8% 90.6%);
      --sl-color-fuchsia-300: hsl(291.1 93.1% 82.9%);
      --sl-color-fuchsia-400: hsl(292 91.4% 72.5%);
      --sl-color-fuchsia-500: hsl(292.2 84.1% 60.6%);
      --sl-color-fuchsia-600: hsl(293.4 69.5% 48.8%);
      --sl-color-fuchsia-700: hsl(294.7 72.4% 39.8%);
      --sl-color-fuchsia-800: hsl(295.4 70.2% 32.9%);
      --sl-color-fuchsia-900: hsl(296.7 63.6% 28%);
      --sl-color-fuchsia-950: hsl(297.1 56.8% 14.5%);

      --sl-color-pink-50: hsl(327.3 73.3% 97.1%);
      --sl-color-pink-100: hsl(325.7 77.8% 94.7%);
      --sl-color-pink-200: hsl(325.9 84.6% 89.8%);
      --sl-color-pink-300: hsl(327.4 87.1% 81.8%);
      --sl-color-pink-400: hsl(328.6 85.5% 70.2%);
      --sl-color-pink-500: hsl(330.4 81.2% 60.4%);
      --sl-color-pink-600: hsl(333.3 71.4% 50.6%);
      --sl-color-pink-700: hsl(335.1 77.6% 42%);
      --sl-color-pink-800: hsl(335.8 74.4% 35.3%);
      --sl-color-pink-900: hsl(335.9 69% 30.4%);
      --sl-color-pink-950: hsl(336.2 65.4% 15.9%);

      --sl-color-rose-50: hsl(355.7 100% 97.3%);
      --sl-color-rose-100: hsl(355.6 100% 94.7%);
      --sl-color-rose-200: hsl(352.7 96.1% 90%);
      --sl-color-rose-300: hsl(352.6 95.7% 81.8%);
      --sl-color-rose-400: hsl(351.3 94.5% 71.4%);
      --sl-color-rose-500: hsl(349.7 89.2% 60.2%);
      --sl-color-rose-600: hsl(346.8 77.2% 49.8%);
      --sl-color-rose-700: hsl(345.3 82.7% 40.8%);
      --sl-color-rose-800: hsl(343.4 79.7% 34.7%);
      --sl-color-rose-900: hsl(341.5 75.5% 30.4%);
      --sl-color-rose-950: hsl(341.3 70.1% 17.1%);

      --sl-color-primary-50: var(--sl-color-sky-50);
      --sl-color-primary-100: var(--sl-color-sky-100);
      --sl-color-primary-200: var(--sl-color-sky-200);
      --sl-color-primary-300: var(--sl-color-sky-300);
      --sl-color-primary-400: var(--sl-color-sky-400);
      --sl-color-primary-500: var(--sl-color-sky-500);
      --sl-color-primary-600: var(--sl-color-sky-600);
      --sl-color-primary-700: var(--sl-color-sky-700);
      --sl-color-primary-800: var(--sl-color-sky-800);
      --sl-color-primary-900: var(--sl-color-sky-900);
      --sl-color-primary-950: var(--sl-color-sky-950);

      --sl-color-success-50: var(--sl-color-green-50);
      --sl-color-success-100: var(--sl-color-green-100);
      --sl-color-success-200: var(--sl-color-green-200);
      --sl-color-success-300: var(--sl-color-green-300);
      --sl-color-success-400: var(--sl-color-green-400);
      --sl-color-success-500: var(--sl-color-green-500);
      --sl-color-success-600: var(--sl-color-green-600);
      --sl-color-success-700: var(--sl-color-green-700);
      --sl-color-success-800: var(--sl-color-green-800);
      --sl-color-success-900: var(--sl-color-green-900);
      --sl-color-success-950: var(--sl-color-green-950);

      --sl-color-warning-50: var(--sl-color-amber-50);
      --sl-color-warning-100: var(--sl-color-amber-100);
      --sl-color-warning-200: var(--sl-color-amber-200);
      --sl-color-warning-300: var(--sl-color-amber-300);
      --sl-color-warning-400: var(--sl-color-amber-400);
      --sl-color-warning-500: var(--sl-color-amber-500);
      --sl-color-warning-600: var(--sl-color-amber-600);
      --sl-color-warning-700: var(--sl-color-amber-700);
      --sl-color-warning-800: var(--sl-color-amber-800);
      --sl-color-warning-900: var(--sl-color-amber-900);
      --sl-color-warning-950: var(--sl-color-amber-950);

      --sl-color-danger-50: var(--sl-color-red-50);
      --sl-color-danger-100: var(--sl-color-red-100);
      --sl-color-danger-200: var(--sl-color-red-200);
      --sl-color-danger-300: var(--sl-color-red-300);
      --sl-color-danger-400: var(--sl-color-red-400);
      --sl-color-danger-500: var(--sl-color-red-500);
      --sl-color-danger-600: var(--sl-color-red-600);
      --sl-color-danger-700: var(--sl-color-red-700);
      --sl-color-danger-800: var(--sl-color-red-800);
      --sl-color-danger-900: var(--sl-color-red-900);
      --sl-color-danger-950: var(--sl-color-red-950);

      --sl-color-neutral-50: var(--sl-color-gray-50);
      --sl-color-neutral-100: var(--sl-color-gray-100);
      --sl-color-neutral-200: var(--sl-color-gray-200);
      --sl-color-neutral-300: var(--sl-color-gray-300);
      --sl-color-neutral-400: var(--sl-color-gray-400);
      --sl-color-neutral-500: var(--sl-color-gray-500);
      --sl-color-neutral-600: var(--sl-color-gray-600);
      --sl-color-neutral-700: var(--sl-color-gray-700);
      --sl-color-neutral-800: var(--sl-color-gray-800);
      --sl-color-neutral-900: var(--sl-color-gray-900);
      --sl-color-neutral-950: var(--sl-color-gray-950);

      --sl-color-neutral-0: hsl(0, 0%, 100%);
      --sl-color-neutral-1000: hsl(0, 0%, 0%);

      --sl-border-radius-small: 0.1875rem;
      --sl-border-radius-medium: 0.25rem;
      --sl-border-radius-large: 0.5rem;
      --sl-border-radius-x-large: 1rem;

      --sl-border-radius-circle: 50%;
      --sl-border-radius-pill: 9999px;

      --sl-shadow-x-small: 0 1px 2px hsl(240 3.8% 46.1% / 6%);
      --sl-shadow-small: 0 1px 2px hsl(240 3.8% 46.1% / 12%);
      --sl-shadow-medium: 0 2px 4px hsl(240 3.8% 46.1% / 12%);
      --sl-shadow-large: 0 2px 8px hsl(240 3.8% 46.1% / 12%);
      --sl-shadow-x-large: 0 4px 16px hsl(240 3.8% 46.1% / 12%);

      --sl-spacing-3x-small: 0.125rem;
      --sl-spacing-2x-small: 0.25rem;
      --sl-spacing-x-small: 0.5rem;
      --sl-spacing-small: 0.75rem;
      --sl-spacing-medium: 1rem;
      --sl-spacing-large: 1.25rem;
      --sl-spacing-x-large: 1.75rem;
      --sl-spacing-2x-large: 2.25rem;
      --sl-spacing-3x-large: 3rem;
      --sl-spacing-4x-large: 4.5rem;

      --sl-transition-x-slow: 1000ms;
      --sl-transition-slow: 500ms;
      --sl-transition-medium: 250ms;
      --sl-transition-fast: 150ms;
      --sl-transition-x-fast: 50ms;

      --sl-font-mono: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;
      --sl-font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
      --sl-font-serif: Georgia, 'Times New Roman', serif;

      --sl-font-size-2x-small: 0.625rem;
      --sl-font-size-x-small: 0.75rem;
      --sl-font-size-small: 0.875rem;
      --sl-font-size-medium: 1rem;
      --sl-font-size-large: 1.25rem;
      --sl-font-size-x-large: 1.5rem;
      --sl-font-size-2x-large: 2.25rem;
      --sl-font-size-3x-large: 3rem;
      --sl-font-size-4x-large: 4.5rem;

      --sl-font-weight-light: 300;
      --sl-font-weight-normal: 400;
      --sl-font-weight-semibold: 500;
      --sl-font-weight-bold: 700;

      --sl-letter-spacing-denser: -0.03em;
      --sl-letter-spacing-dense: -0.015em;
      --sl-letter-spacing-normal: normal;
      --sl-letter-spacing-loose: 0.075em;
      --sl-letter-spacing-looser: 0.15em;

      --sl-line-height-denser: 1;
      --sl-line-height-dense: 1.4;
      --sl-line-height-normal: 1.8;
      --sl-line-height-loose: 2.2;
      --sl-line-height-looser: 2.6;

      --sl-focus-ring-alpha: 40%;
      --sl-focus-ring-width: 3px;
      --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) hsl(198.6 88.7% 48.4% / var(--sl-focus-ring-alpha));

      --sl-button-font-size-small: var(--sl-font-size-x-small);
      --sl-button-font-size-medium: var(--sl-font-size-small);
      --sl-button-font-size-large: var(--sl-font-size-medium);

      --sl-input-height-small: 1.875rem;
      --sl-input-height-medium: 2.5rem;
      --sl-input-height-large: 3.125rem;

      --sl-input-background-color: var(--sl-color-neutral-0);
      --sl-input-background-color-hover: var(--sl-input-background-color);
      --sl-input-background-color-focus: var(--sl-input-background-color);
      --sl-input-background-color-disabled: var(--sl-color-neutral-100);
      --sl-input-border-color: var(--sl-color-neutral-300);
      --sl-input-border-color-hover: var(--sl-color-neutral-400);
      --sl-input-border-color-focus: var(--sl-color-primary-500);
      --sl-input-border-color-disabled: var(--sl-color-neutral-300);
      --sl-input-border-width: 1px;

      --sl-input-border-radius-small: var(--sl-border-radius-medium);
      --sl-input-border-radius-medium: var(--sl-border-radius-medium);
      --sl-input-border-radius-large: var(--sl-border-radius-medium);

      --sl-input-font-family: var(--sl-font-sans);
      --sl-input-font-weight: var(--sl-font-weight-normal);
      --sl-input-font-size-small: var(--sl-font-size-small);
      --sl-input-font-size-medium: var(--sl-font-size-medium);
      --sl-input-font-size-large: var(--sl-font-size-large);
      --sl-input-letter-spacing: var(--sl-letter-spacing-normal);

      --sl-input-color: var(--sl-color-neutral-700);
      --sl-input-color-hover: var(--sl-color-neutral-700);
      --sl-input-color-focus: var(--sl-color-neutral-700);
      --sl-input-color-disabled: var(--sl-color-neutral-900);
      --sl-input-icon-color: var(--sl-color-neutral-500);
      --sl-input-icon-color-hover: var(--sl-color-neutral-600);
      --sl-input-icon-color-focus: var(--sl-color-neutral-600);
      --sl-input-placeholder-color: var(--sl-color-neutral-500);
      --sl-input-placeholder-color-disabled: var(--sl-color-neutral-600);
      --sl-input-spacing-small: var(--sl-spacing-small);
      --sl-input-spacing-medium: var(--sl-spacing-medium);
      --sl-input-spacing-large: var(--sl-spacing-large);

      --sl-input-filled-background-color: var(--sl-color-neutral-100);
      --sl-input-filled-background-color-hover: var(--sl-color-neutral-100);
      --sl-input-filled-background-color-focus: var(--sl-color-neutral-100);
      --sl-input-filled-background-color-disabled: var(--sl-color-neutral-100);
      --sl-input-filled-color: var(--sl-color-neutral-800);
      --sl-input-filled-color-hover: var(--sl-color-neutral-800);
      --sl-input-filled-color-focus: var(--sl-color-neutral-700);
      --sl-input-filled-color-disabled: var(--sl-color-neutral-800);

      --sl-input-label-font-size-small: var(--sl-font-size-small);
      --sl-input-label-font-size-medium: var(--sl-font-size-medium);
      --sl-input-label-font-size-large: var(--sl-font-size-large);

      --sl-input-label-color: inherit;

      --sl-input-help-text-font-size-small: var(--sl-font-size-x-small);
      --sl-input-help-text-font-size-medium: var(--sl-font-size-small);
      --sl-input-help-text-font-size-large: var(--sl-font-size-medium);

      --sl-input-help-text-color: var(--sl-color-neutral-500);

      --sl-toggle-size: 1rem;

      --sl-overlay-background-color: hsl(240 3.8% 46.1% / 33%);

      --sl-panel-background-color: var(--sl-color-neutral-0);
      --sl-panel-border-color: var(--sl-color-neutral-200);
      --sl-panel-border-width: 1px;

      --sl-tooltip-border-radius: var(--sl-border-radius-medium);
      --sl-tooltip-background-color: var(--sl-color-neutral-800);
      --sl-tooltip-color: var(--sl-color-neutral-0);
      --sl-tooltip-font-family: var(--sl-font-sans);
      --sl-tooltip-font-weight: var(--sl-font-weight-normal);
      --sl-tooltip-font-size: var(--sl-font-size-small);
      --sl-tooltip-line-height: var(--sl-line-height-dense);
      --sl-tooltip-padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-small);
      --sl-tooltip-arrow-size: 4px;

      --sl-z-index-drawer: 700;
      --sl-z-index-dialog: 800;
      --sl-z-index-dropdown: 900;
      --sl-z-index-toast: 950;
      --sl-z-index-tooltip: 1000;
    }

    .sl-scroll-lock {
      overflow: hidden !important;
    }

    .sl-toast-stack {
      position: fixed;
      top: 0;
      right: 0;
      z-index: var(--sl-z-index-toast);
      width: 28rem;
      max-width: 100%;
      max-height: 100%;
      overflow: auto;
    }

    .sl-toast-stack sl-alert {
      --box-shadow: var(--sl-shadow-large);
      margin: var(--sl-spacing-medium);
    }
  </style>
`;class W_{constructor(){this.dataUltimaModificacao=(new Date).toISOString(),this.aplicacao="",this.versaoAplicacao="",this.modoEdicao=X_.EMENDA,this.metadados={},this.proposicao=new J_,this.epigrafe=new eE,this.componentes=[new tE],this.comandoEmendaTextoLivre=new lE,this.comandoEmenda=new sE,this.anexos=[],this.justificativa="",this.local="",this.data=(new Date).toISOString().replace(/T.*/,""),this.autoria=new uE,this.opcoesImpressao=new dE,this.revisoes=[],this.colegiadoApreciador=new Z_,this.notasRodape=[]}}var X_,Y_;!function(e){e.EMENDA="emenda",e.EMENDA_ARTIGO_ONDE_COUBER="emendaArtigoOndeCouber",e.EMENDA_TEXTO_LIVRE="emendaTextoLivre",e.EMENDA_SUBSTITUICAO_TERMO="emendaSubstituicaoTermo"}(X_||(X_={}));class J_{constructor(){this.urn="",this.sigla="",this.numero="",this.ano="",this.ementa="",this.identificacaoTexto=""}}class Z_{constructor(){this.siglaCasaLegislativa="CN",this.tipoColegiado="Plenário"}}class eE{constructor(){this.texto="",this.complemento=""}}class tE{constructor(){this.urn="",this.articulado=!0,this.dispositivos=new oE}}class oE{constructor(){this.dispositivosSuprimidos=[],this.dispositivosModificados=[],this.dispositivosAdicionados=[]}}class iE{constructor(){this.tipo="",this.id=""}}class aE extends iE{}class rE extends iE{}class nE extends rE{}class sE{constructor(){this.comandos=[]}}class lE{}class cE{constructor(e,t){this.cabecalho=e,this.citacao=t}}!function(e){e.NAO_IDENTIFICADO="Não identificado",e.PARLAMENTAR="Parlamentar",e.COMISSAO="Comissão",e.CASA_LEGISLATIVA="Casa Legislativa"}(Y_||(Y_={}));class uE{constructor(){this.tipo=Y_.PARLAMENTAR,this.imprimirPartidoUF=!0,this.quantidadeAssinaturasAdicionaisSenadores=0,this.quantidadeAssinaturasAdicionaisDeputados=0,this.parlamentares=[]}}class dE{constructor(){this.imprimirBrasao=!0,this.textoCabecalho="",this.reduzirEspacoEntreLinhas=!1,this.tamanhoFonte=14}}class pE{constructor(){this.tipo="Expressão",this.termo="",this.novoTermo="",this.flexaoGenero=!1,this.flexaoNumero=!1}}class hE{constructor(){this.ultimoProcessado=void 0,this.adjacentesOmissis=[],this.fecharAspasAposOmissis=!1}getTexto(e){e=e.filter((e=>e.pai.situacao.descricaoSituacao!==Ud.DISPOSITIVO_SUPRIMIDO||ap(e.pai))),this.adjacentesOmissis=this.buscaDispositivosAdjacentesAsOmissis(e),e.push(...this.adjacentesOmissis),e.sort(Dh.compare);const t=Lh.getArvoreDispositivosDeAlteracaoDeNorma(e),o=new Ws;this.montaCitacaoComando(o,t);if(this.fecharAspasAposOmissis||Lh.isFechaAspas(this.ultimoProcessado)){const e=[...t.keys()][0],i=Hp(e),a=i.notaAlteracao?" ("+i.notaAlteracao+")":"";return o.toString().replace(/(<\/p>)$/,"”"+a+"$1")}return o.toString()}buscaDispositivosAdjacentesAsOmissis(e){const t=new Array;for(const o of e)if(op(o)&&!ap(o.pai)){const i=Lh.getDispositivoAnteriorDireto(o);if(e.includes(i)||t.push(i),!Lh.isFechaAspas(o)){const i=Lh.getDispositivoPosteriorDireto(o);i&&!e.includes(i)&&t.push(i)}}return t}montaCitacaoComando(e,t){const o=[...t.keys()][0];t=t.get(o);const i=ap(o),a=o.tipo.toLowerCase()+(i?" agrupador":""),r=new Rh("p").addAtributo("class",a);if(Jp(o.pai)&&r.add("“"),r.add(new Rh("Rotulo").add(o.rotulo)),i)if(o.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)r.add(Lh.getTextoDoDispositivoOuOmissis(o)),e.append(r.toString());else{e.append(r.toString());const t=new Rh("p").addAtributo("class",a).add(Lh.getTextoDoDispositivoOuOmissis(o));e.append(t.toString())}else r.add(Lh.getTextoDoDispositivoOuOmissis(o,!0)),e.append(r.toString());this.ultimoProcessado=o,t.size>0&&o.situacao.descricaoSituacao!==Ud.DISPOSITIVO_SUPRIMIDO&&this.writeDispositivoTo(e,t),ap(o)||this.writeOmissisFinal(e,o)}writeDispositivoTo(e,t){const o=[...t.keys()];o.sort(Dh.compare);for(const i of o){const o=t.get(i),a=Lh.getDispositivoAnteriorDireto(i);if(Kd(this.ultimoProcessado)&&!Wd(i)?Wd(a)||op(i)||e.append(this.tagOmissisSemRotulo().toString()):this.ultimoProcessado===a||op(i)||a.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO||e.append(this.tagOmissisSemRotulo().toString()),!Wd(i)){const t=ap(i),a=i.tipo.toLowerCase()+(t?" agrupador":"");if(i.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL){const t=new Rh("p").addAtributo("classe",a);op(i)||t.add(new Rh("Rotulo").add(i.rotulo)),t.add(Lh.getTextoDoDispositivoOuOmissis(i,!0)),e.append(t.toString())}else if(this.hasFilhosPropostos(o)||this.adjacentesOmissis.includes(i)){const t=new Rh("p").addAtributo("classe",a);t.add(new Rh("Rotulo").add(i.rotulo)),t.add(new Rh("Omissis")),e.append(t.toString())}else e.append(new Rh("Omissis").toString())}this.ultimoProcessado=i,o&&o.size>0&&this.writeDispositivoTo(e,o)}}tagOmissisSemRotulo(){return new Rh("p").addAtributo("class","omissis").add(new Rh("Omissis"))}writeOmissisFinal(e,t){if(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)return;let o=t,i=Lh.getFilhosEstiloLexML(o);for(;i.length;)o=i[i.length-1],i=Lh.getFilhosEstiloLexML(o);if(Wd(o)&&(o=o.pai),o.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL||this.adjacentesOmissis.includes(o)&&!op(o)){if(!Lh.isFechaAspas(o)){const t=Lh.getDispositivoPosteriorDireto(o);t&&op(t)&&(e.append(this.tagOmissisSemRotulo().toString()),this.fecharAspasAposOmissis=!0)}}else e.append(this.tagOmissisSemRotulo().toString()),this.fecharAspasAposOmissis=!0}hasFilhosPropostos(e){if(!e||!e.size)return!1;const t=e;let o=!1;for(const[e,i]of t.entries()){if(e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL){o=!0;break}!o&&i&&(o=this.hasFilhosPropostos(i))}return o}}class mE{getTexto(e){const t=new Ws,o=new Array;lh(e,(e=>{e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL&&o.push(e)})),o.sort(Dh.compare);const i=o.length,a=o.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO||op(e))).length;return i-a>0&&this.getCitacoesMultiplas(t,o),t.toString()}getCitacoesMultiplas(e,t){let o,i,a=new Array;for(const r of t)o=this.getCabeca(r),o!==i&&(a.length&&this.getCitacaoMultipla(e,a),a=[o],i=o),a.includes(r)||a.push(r);a.length&&this.getCitacaoMultipla(e,a)}getCabeca(e){return Jp(e.pai)||Kd(e)||ap(e)||op(e)&&ap(e.pai)?e:bp(e)}getCitacaoMultipla(e,t){const o=new hE;e.append(o.getTexto(t))}}class fE{constructor(){this.emAlteracao=!1}getTexto(e,t=!0,o=!0){let i=Lh.getArvoreDispositivos(e);const a=new Ws,r=[...i.keys()][0];i=i.get(r);const n=ap(r),s=r.tipo.toLowerCase()+(n?" agrupador":""),l=new Rh("p").addAtributo("class",s);if(t&&l.add("“"),sp(r)||l.add(new Rh("Rotulo").add(r.rotulo)),ap(r)){a.append(l.toString());const e=new Rh("p").addAtributo("class",s).add(Lh.getTextoDoDispositivoOuOmissis(r));a.append(e.toString())}else{const e=Lh.getTextoDoDispositivoOuOmissis(r);l.add(sp(r)?e.trim():e),a.append(l.toString())}return i.size&&(this.ultimoProcessado=r,this.writeDispositivoTo(a,i)),this.writeOmissisFinal(a,r),o?a.toString().replace(/(<\/p>(?:<\/Alteracao>)?)$/,"”$1"):a.toString()}writeDispositivoTo(e,t){var o;const i=Array.from(t.keys());i.sort(Dh.compare);for(const a of i){const i=t.get(a);if(Jp(a)){e.append("<Alteracao>"),this.emAlteracao=!0,this.ultimoProcessado=a,i.size&&this.writeDispositivoTo(e,i),e.append("</Alteracao>");continue}if(Wd(a)){this.ultimoProcessado=a,i.size&&this.writeDispositivoTo(e,i);continue}const r=Lh.getDispositivoAnteriorDireto(a);if(Kd(this.ultimoProcessado)&&!Wd(a)?Wd(r)||e.append(this.tagOmissisSemRotulo().toString()):this.ultimoProcessado===r||this.ultimoProcessado.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO&&hh(r,this.ultimoProcessado)||e.append(this.tagOmissisSemRotulo().toString()),a.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL||this.hasFilhosPropostos(i)){const t=Kd(a)?a.caput:a,i=this.emAlteracao?null===(o=a.rotulo)||void 0===o?void 0:o.replace("“",""):a.rotulo,r=ap(a),n=a.tipo.toLowerCase()+(r?" agrupador":"");let s=new Rh("p").addAtributo("class",n);if(Gp(a)&&s.add("‘"),s.add(new Rh("Rotulo").add(i)),r&&(e.append(s.toString()),s=new Rh("p").addAtributo("class",n)),s.add(Lh.getTextoDoDispositivoOuOmissis(t)),a.isDispositivoAlteracao&&Kp(a)){s.add("’");const e=Hp(a);e.notaAlteracao&&s.add(" ("+e.notaAlteracao+")")}e.append(s.toString())}else e.append(this.tagOmissisSemRotulo().toString());this.ultimoProcessado=a,i.size&&this.writeDispositivoTo(e,i)}}tagOmissisSemRotulo(){return new Rh("p").addAtributo("class","omissis").add(new Rh("Omissis"))}writeOmissisFinal(e,t){if(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO||ap(t))return;let o=t;if(t.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO&&Kd(o)&&o.hasAlteracao())e.append(this.tagOmissisSemRotulo().toString());else{for(;o.filhos.length;)o=o.filhos[o.filhos.length-1];o.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL||mh(o)||e.append(this.tagOmissisSemRotulo().toString())}}hasFilhosPropostos(e){if(!e.size)return!1;let t=!1;for(const[o,i]of e.entries()){if(o.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ORIGINAL){t=!0;break}if(!t&&i.size&&(t=this.hasFilhosPropostos(i),t))break}return t}}class vE{constructor(e){this.articulacao=e}getTexto(){const e=new Ws,t=this.getDispositivosParaCitacao(),o=t.length,i=t.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)).length;return o-i>0&&this.getCitacoesMultiplas(e,t),e.toString()}getDispositivosParaCitacao(){const e=Lh.getDispositivosNaoOriginais(this.articulacao).filter((e=>!(ap(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)));e.sort(Dh.compare);const t=new Array;return e.forEach((e=>{Jp(e)?e.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&t.push(e):Zp(e)?t.indexOf(e.pai)>=0&&t.push(e):mh(e)||t.push(e)})),t}getCitacoesMultiplas(e,t){let o,i,a=new Array,r=[];if(t.forEach((t=>{if(o=(Kd(t)||ap(t)||sp(t))&&!Zp(t)?t:yp(t),o!==i){if(a.length){const t=i.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||r.indexOf(i)<0,n=r.indexOf(o)<0;n&&(r=[]),e.append((new fE).getTexto(a,t,n))}a=[],a.push(o),i=o}ip(o)&&o.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&r.indexOf(o)<0&&(r=this.getDispositivosMesmoGrupoDeAspas(o)),a.indexOf(t)<0&&a.push(t)})),a.length){const t=r.indexOf(i)<0;e.append((new fE).getTexto(a,t,!0))}}getDispositivosMesmoGrupoDeAspas(e){const t=new Array;return ch(e,(e=>!(Zp(e)||!ap(e)&&!Kd(e))&&(e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO||(t.push(e),!1)))),t.slice(1)}}const gE=(e,t)=>{e.splice(e.indexOf(t),1)};class bE{constructor(e){this.dispositivos=[],e&&this.add(e)}isSituacao(e){return!!this.dispositivos.length&&this.dispositivos[0].situacao.descricaoSituacao===e}isTipo(e){return!!this.dispositivos.length&&this.dispositivos[0].tipo===e}add(e){return!!this.podeAdicionarAoRange(e)&&(this.dispositivos.push(e),!0)}addInicio(e){this.dispositivos.splice(0,0,e)}isUltimo(e){return this.dispositivos.indexOf(e)===this.dispositivos.length-1}getPrimeiro(){return this.dispositivos[0]}getUltimo(){return this.dispositivos[this.dispositivos.length-1]}getQuantidadeDispositivos(){return this.dispositivos.length}getAnterior(e){if(!(e<1))return this.dispositivos[e-1]}getNumeracaoParaComandoEmenda(){let e=this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0]);return this.dispositivos.length>1&&(e+=" a "+this.getUltimo().getNumeracaoParaComandoEmenda(this.getUltimo())),e}print(e,t){this.isRotuloNecessario(t)?this.printRotuloInicio(e,t):e.append(this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0])),this.printSeparadorProximoDispositivo(e,t),this.printRotuloFimSeExistir(e)}printRotuloFimSeExistir(e){if(this.dispositivos.length>=2){const t=this.dispositivos[this.dispositivos.length-1];e.append(t.getNumeracaoParaComandoEmenda(t))}}printSeparadorProximoDispositivo(e,t){const o=this.getRangeDispositivosPosterior(t);this.dispositivos.length>=3?e.append(" a "):2!==this.dispositivos.length||o?this.dispositivos.length>1&&this.dispositivos.length<3&&o&&e.append(", "):e.append(" e ")}printRotuloInicio(e,t){const o=this.getRangeDispositivosPosterior(t);this.hasApenasUmDispositivo()&&!o||o&&!this.isMesmoTipoSituacao(o)?e.append(this.getRotuloCompletoSingular(this.dispositivos[0])):e.append(this.getRotuloCompletoPlural(this.dispositivos[0]))}isMesmoTipoSituacao(e){return e.isTipo(this.dispositivos[0].tipo)&&e.isSituacao(this.dispositivos[0].situacao.descricaoSituacao)}hasApenasUmDispositivo(){return 1===this.dispositivos.length}isRotuloNecessario(e){const t=this.getRangeDispositivosAnterior(e);return!t||!t.isMesmoTipoSituacao(this)||!(!this.isSituacao(Ud.DISPOSITIVO_ADICIONADO)||this.isMesmoPai(t))}isMesmoPai(e){return this.getPrimeiro().pai===e.getPrimeiro().pai}getRotuloCompletoSingular(e){const t=new Ws;e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO?t.append(e.artigoDefinidoSingular):t.append(" ");const o=e.getNumeracaoComRotuloParaComandoEmenda(e);return o.endsWith(".")?t.append(o.substring(0,o.indexOf("."))):t.append(o),t.toString()}getRotuloCompletoPlural(e){const t=new Ws;return e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO?t.append(e.artigoDefinidoPlural):t.append(" "),t.append(this.getTipoDispositivoPlural(e)),t.append(" "),t.append(e.getNumeracaoParaComandoEmenda(e)),t.toString()}getRangeDispositivosAnterior(e){const t=e.indexOf(this);if(t>0)return e[t-1]}getRangeDispositivosPosterior(e){if(1===e.length)return;const t=e.indexOf(this);return t>=0&&t<e.length-1?e[t+1]:void 0}getTipoDispositivoPlural(e){var t;return e.tipo===cu.artigo.tipo?"arts.":e.tipo===cu.paragrafo.tipo?"§§":(null===(t=e.descricaoPlural)||void 0===t?void 0:t.toLocaleLowerCase())+""}podeAdicionarAoRange(e){if(this.isVazio())return!0;const t=this.getUltimo();return t.tipo===e.tipo&&(!!Lh.isMesmaSituacaoParaComandoEmenda(t,e)&&(!(!Kd(e)&&e.pai!==t.pai)&&(Mp(t)===e&&(ap(e)?Lh.verificaAgrupadoresAdicionadosEmSequencia(t,e):Lh.isAlteracaoIntegral(t)===Lh.isAlteracaoIntegral(e)))))}isVazio(){return 0===this.dispositivos.length}toString(){const e=new Ws;return this.dispositivos.forEach((t=>{e.append(" "),e.append(""+t.rotulo)})),e.toString()}getDispositivos(){return this.dispositivos}getDispositivo(e){return this.dispositivos[e]}}class yE{constructor(){this.ranges=new Array,this.localizarEmAgrupador=!1,this.informarCaputDoDispositivo=!1}isVazio(){return 0===this.ranges.length}add(e){this.ranges.push(e)}addInicio(e){this.ranges.unshift(e)}getQuantidadeRanges(){return this.ranges.length}getPrimeiroRange(){return this.ranges[0]}getPrimeiroDispositivo(){return this.ranges[0].getPrimeiro()}getUltimoDispositivo(){return this.ranges[this.ranges.length-1].getUltimo()}getRanges(){return this.ranges}setRanges(e){this.ranges=e}getRange(e){return this.ranges[e]}getTextoListaDeDispositivos(){const e=new Ws,t=this.ranges.length;let o=1;for(const i of this.ranges)o>1&&(o===t?e.append(" e "):e.append(", ")),e.append(i.getNumeracaoParaComandoEmenda()),o++;return e.toString()}static debug(e){const t=new Ws;for(const o of e)t.append("seq: "+o);console.log(t)}toString(){return this.ranges.toString()}remove(e){gE(this.ranges,e)}}class xE{getSequencias(e){const t=this.getRanges(e);return this.agrupaRanges(t)}getRanges(e){let t=new Array,o=new bE;for(const i of e)o.add(i)||(t.push(o),o=new bE,o.add(i));return o.isVazio()||t.push(o),t=xE.separaRangesDeDoisDispositivos(t),t}static separaRangesDeDoisDispositivos(e){const t=new Array;for(const o of e)2===o.getQuantidadeDispositivos()?(t.push(new bE(o.getPrimeiro())),t.push(new bE(o.getUltimo()))):t.push(o);return t}separaRangesDeDoisDispositivosEmSequencias(e){for(const t of e)t.setRanges(xE.separaRangesDeDoisDispositivos(t.getRanges()))}agrupaRanges(e){const t=new Array;let o=new yE;for(const i of e)o.isVazio()?(o.add(i),t.push(o)):this.isMesmaSequencia(o,i)?o.add(i):(o=new yE,o.add(i),t.push(o));return t}isMesmaSequencia(e,t){const o=e.getPrimeiroDispositivo(),i=t.getUltimo();return Lh.isMesmoTipoParaComandoEmenda(o,i)&&Lh.isMesmaSituacaoParaComandoEmenda(o,i)&&(o.tipo===cu.artigo.tipo||o.pai===i.pai)&&o.tipo!==cu.omissis.tipo&&(!ip(o)||Lh.verificaAgrupadoresAdicionadosEmSequencia(e.getUltimoDispositivo(),t.getPrimeiro()))}separaDispositivosSeguidosDeOmissis(e){const t=new Array;for(const o of e)t.push(...this.separaDispositivosSeguidosDeOmissis2(o));return t}separaDispositivosSeguidosDeOmissis2(e){const t=new Array;let o=new yE;t.push(o);let i=new bE;o.add(i);for(const a of e.getRanges()){i.getQuantidadeDispositivos()>0&&(i=new bE,o.add(i));for(const e of a.getDispositivos()){const a=Lp(e);a&&a.tipo===cu.omissis.tipo?(this.adicionaouDispositivos(o,i)&&(0===i.getQuantidadeDispositivos()&&o.remove(i),o=new yE,t.push(o),i=new bE,o.add(i)),o.informarCaputDoDispositivo=!0,i.add(e),o=new yE,t.push(o),i=new bE,o.add(i)):i.add(e)}}return 0===i.getQuantidadeDispositivos()&&o.remove(i),0===o.getQuantidadeRanges()&&gE(t,o),this.separaRangesDeDoisDispositivosEmSequencias(t),t}adicionaouDispositivos(e,t){return e.getQuantidadeRanges()>1||t.getQuantidadeDispositivos()>0}}class AE{constructor(e){this.dispositivos=e}static compare(e,t){var o,i;return(null===(o=e.dispositivos)||void 0===o?void 0:o.length)?(null===(i=t.dispositivos)||void 0===i?void 0:i.length)?Dh.compare(e.dispositivos[0],t.dispositivos[0]):-1:1}}var wE,_E;!function(e){e[e.NENHUM=0]="NENHUM",e[e.DEFINIDO=1]="DEFINIDO",e[e.DEFINIDO_COM_PREPOSICAO_A=2]="DEFINIDO_COM_PREPOSICAO_A"}(wE||(wE={})),function(e){e[e.APENAS_ROTULO=0]="APENAS_ROTULO",e[e.DENOMINACAO_DO_AGRUPADOR=1]="DENOMINACAO_DO_AGRUPADOR",e[e.TODO_AGRUPADOR=2]="TODO_AGRUPADOR",e[e.O_AGRUPADOR=3]="O_AGRUPADOR",e[e.ADICAO=4]="ADICAO"}(_E||(_E={}));class EE{constructor(){this.artigoAntesDispositivo=wE.NENHUM,this.tipoReferenciaAgrupador=_E.APENAS_ROTULO}getTexto(e,t=!0){const o=new Ws,i=e.length;let a=1;for(const r of e){a>1&&(a===i?o.append(" e "):o.append(", "));const e=r.getPrimeiroDispositivo(),n=ap(e),s=this.tipoReferenciaAgrupador===_E.DENOMINACAO_DO_AGRUPADOR&&n,l=this.tipoReferenciaAgrupador===_E.TODO_AGRUPADOR&&n,c=this.tipoReferenciaAgrupador===_E.O_AGRUPADOR&&n&&!!e.filhos.length,u=n&&this.tipoReferenciaAgrupador===_E.ADICAO;r.informarCaputDoDispositivo?o.append(this.getReferenciaCaputDoDispositivo(r)):o.append(this.getTextoArtigoAntesSequencia(r,s,l,c)),s?o.append("denominação "+e.pronomePossessivoSingular+" "):c&&o.append("agrupador "),o.append(this.getRotuloTipoDispositivo(r,n)),o.append(" "),o.append(r.getTextoListaDeDispositivos()),t&&!u&&o.append(this.getRotuloPaisSequencia(r)),u&&o.append(EE.getLocalizacaoAgrupadores(r.getRanges())),a++}return o.toString().replace("ementa ","ementa")}getReferenciaCaputDoDispositivo(e){const t=new Ws,o=e.getPrimeiroDispositivo();if(o.tipo===cu.caput.tipo)return this.getTextoArtigoAntesSequencia(e);const i=Lh.isSequenciaPlural(e);return t.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,em,i)),t.append(" caput "),1===e.getRange(0).getQuantidadeDispositivos()?t.append(o.pronomePossessivoSingular):t.append(o.pronomePossessivoPlural),t.toString()}getTextoArtigoAntesSequencia(e,t=!1,o=!1,i=!1){const a=e.getPrimeiroDispositivo(),r=t?Zh:i?em:a,n=Lh.isSequenciaPlural(e);return(o?"feminino"===a.tipoGenero?"toda ":"todo ":"")+this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo,r,n)}getTextoArtigoAntesDispositivo(e,t,o){switch(e){case wE.DEFINIDO:return o?t.artigoDefinidoPlural:t.artigoDefinidoSingular;case wE.DEFINIDO_COM_PREPOSICAO_A:return o?t.artigoDefinidoPrecedidoPreposicaoAPlural:t.artigoDefinidoPrecedidoPreposicaoASingular;default:return""}}getRotuloTipoDispositivo(e,t){const o=e.getPrimeiroDispositivo(),i=EE.getRotuloTipoDispositivo(o,Lh.isSequenciaPlural(e));return t?Gs(i):i}static getRotuloTipoDispositivo(e,t){return e.getNumeracaoParaComandoEmenda(e).indexOf("único")>=0?"":t?Kd(e)?"arts.":Xd(e)?"§§":String(e.descricaoPlural).toLocaleLowerCase():Kd(e)?e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_MODIFICADO||Lh.isAlteracaoIntegral(e)?"art.":"caput do art.":Xd(e)?"§":String(e.descricao).toLowerCase()}getRotuloPaisSequencia(e){return this.getRotuloPais(e.getPrimeiroDispositivo(),e.localizarEmAgrupador)}getRotuloPais(e,t){var o;let i;const a=e;if(ip(e))return EE.getRotuloPaisAgrupador(e);const r=new Ws;for(;!uh(e);){if(i=e.pai,i&&Jp(i)){if(e.tipo===cu.omissis.tipo){const o=Lh.getDispositivoAnteriorDireto(e);if(o.tipo!==cu.alteracao.tipo)return r.append("após "),r.append(o.artigoDefinidoSingular),r.append(o.getNumeracaoComRotuloParaComandoEmenda(o)),r.append(this.getRotuloPais(o,t)),r.toString()}break}if(i&&!uh(i)&&(!ip(i)||Kd(a)&&t)){const a=Zp(e),n=!a&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO,s=a&&!Lh.isTextoOmitido(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&!Ph.existeNaNormaAlterada(e);if(n||s)r.append(i.artigoDefinidoPrecedidoPreposicaoASingular);else if(op(e)){const a=Lh.getDispositivoAnteriorDireto(e),n=Lh.getDispositivoPosteriorDireto(e);if(a===i&&n&&n.pai===i){const e=n.pronomePossessivoSingular+" "+(null===(o=n.descricao)||void 0===o?void 0:o.toLowerCase())+" "+n.getNumeracaoParaComandoEmenda(n);r.append("antes "+e),r.append(i.pronomePossessivoSingular)}else if(!Gd(a)||!a.pai)return r.append("após "),r.append(a.artigoDefinidoSingular),r.append(a.getNumeracaoComRotuloParaComandoEmenda(a)),r.append(this.getRotuloPais(a,t)),r.toString()}else r.append(i.pronomePossessivoSingular);r.append(i.getNumeracaoComRotuloParaComandoEmenda(i))}else if(Kd(e)&&uh(i)&&t){const t=Lh.getProximoAgrupador(e);t&&(r.append(" antes "),r.append(t.pronomePossessivoSingular),r.append(t.getNumeracaoComRotuloParaComandoEmenda(t)))}if(!i)break;e=i}return r.toString()}static getRotuloPaisAgrupador(e){const t=new Ws;let o=e.pai;for(;o&&!uh(o)&&!Gd(o);)t.append(" "),t.append(o.pronomePossessivoSingular),t.append(" "),t.append(o.getNumeracaoComRotuloParaComandoEmenda(o)),o=o.pai;return t.toString()}static getLocalizacaoAgrupadores(e){const t=e[e.length-1].getUltimo(),o=Ap(t,(e=>e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO&&!Wd(e)&&!Jp(e))),i=new Ws;if(i.append(" "),o)i.append("antes "),i.append(o.pronomePossessivoSingular),i.append(" "),i.append(o.getNumeracaoComRotuloParaComandoEmenda(o)),ap(o)&&i.append(EE.getRotuloPaisAgrupador(o));else{const t=e[0].getPrimeiro(),o=xp(t,(e=>Kd(e)||ap(e)));o?(i.append("após "),i.append(o.artigoDefinido),i.append(" "),i.append(o.getNumeracaoComRotuloParaComandoEmenda(o)),ap(o)&&i.append(EE.getRotuloPaisAgrupador(o))):i.append("!!! localização não encontrada !!!")}return i.toString()}}class OE extends AE{constructor(e,t,o){super(e),this.dispositivos=e,this.generoNormaAlterada=t,this.textoTodos=o}getTexto(e,t,o){const i=new Ws,a=(new xE).getSequencias(this.dispositivos),r=this.dispositivos.length>1;t?i.append(r?"Acrescentem-se ":"Acrescente-se "):(i.append(o?"; e ":"; "),i.append(r?"acrescentem-se ":"acrescente-se "));const n=new EE;if(i.append(n.getTexto(a)),o){const e=a[a.length-1].getPrimeiroDispositivo();Kd(e)||ap(e)?i.append(this.generoNormaAlterada.artigoDefinidoPrecedidoPreposicaoASingular):(""!==this.textoTodos&&i.append(this.textoTodos),i.append(" "),i.append(this.generoNormaAlterada.pronomePossessivoSingular)),i.append(" ")}return i.toString()}}class SE extends AE{constructor(e,t,o){super(e),this.dispositivos=e,this.generoNormaAlterada=t,this.textoTodos=o}getTexto(e,t,o){const i=new Ws,a=new xE,r=a.separaDispositivosSeguidosDeOmissis(a.getSequencias(this.dispositivos));t?i.append("Dê-se nova redação "):(i.append(o?"; e ":"; "),i.append("dê-se nova redação "));const n=new EE;return n.artigoAntesDispositivo=wE.DEFINIDO_COM_PREPOSICAO_A,n.tipoReferenciaAgrupador=_E.DENOMINACAO_DO_AGRUPADOR,i.append(n.getTexto(r)),o&&(""!==this.textoTodos&&i.append(this.textoTodos),i.append(" "),i.append(this.generoNormaAlterada.pronomePossessivoSingular),i.append(" ")),i.toString()}}class IE extends AE{constructor(e,t,o,i,a){super(e),this.dispositivos=e,this.alteracao=t,this.urnNormaAlterada=o,this.generoNormaAlterada=i,this.textoTodos=a}getTexto(e,t,o){const i=new Ws,a=(new xE).getSequencias(this.dispositivos),r=Lh.isSequenciasPlural(a);t?i.append(r?"Suprimam-se ":"Suprima-se "):(t||i.append(o?"; e ":"; "),i.append(r?"suprimam-se ":"suprima-se "));const n=new EE;return n.artigoAntesDispositivo=wE.DEFINIDO,n.tipoReferenciaAgrupador=_E.O_AGRUPADOR,i.append(n.getTexto(a)),o&&(""!==this.textoTodos&&i.append(this.textoTodos),i.append(" "),i.append(this.generoNormaAlterada.pronomePossessivoSingular),i.append(" ")),i.toString()}escreveDispositivoAlterado(e,t){e.append(t.pronomePossessivoSingular),e.append(EE.getRotuloTipoDispositivo(t,!1)),e.append(" "),e.append(t.getNumeracaoParaComandoEmenda(t)),e.append(Lh.getRotuloPais(t))}}class kE{constructor(e){this.alteracao=e}getTexto(e){const t=new Ws,o=Lh.getDispositivosNaAlteracaoParaComando(this.alteracao),i=this.alteracao.base;if(!i)return"Não foi possível gerar o comando de emenda porque a norma alterada não foi informada.";const a=(e=>{const t=nm(e);return om(t.genero)})(i),r=new Array,n=o.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO)),s=o.filter((e=>Lh.getDescricaoSituacaoParaComandoEmenda(e)===Ud.DISPOSITIVO_MODIFICADO)),l=o.filter((e=>Lh.getDescricaoSituacaoParaComandoEmenda(e)===Ud.DISPOSITIVO_ADICIONADO)),c=n.concat(s).concat(l),u=c.length,d=c.reduce(((e,t)=>e||"masculino"===t.tipoGenero),!1);let p="";2===u?p=d?", ambos":", ambas":u>2&&(p=d?", todos":", todas"),n.length&&r.push(new IE(n,this.alteracao,i,a,p)),s.length&&r.push(new SE(s,a,p)),l.length&&r.push(new OE(l,a,p)),r.sort(AE.compare);let h=0;const m=r.length-1;r.forEach((o=>{t.append(o.getTexto(e,0===h,h===m)),h++})),this.escreveLei(t,i);const f=o.reduce(((e,t)=>e||t.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO),!1);return f?(""===p||t.toString().includes(p)?t.append(","):t.append(p),t.append(" na forma proposta ")):(t.append(", como "),this.escreveProposto(t,o.filter((e=>!Lh.isTextoOmitido(e)||Np(e))))),t.append(" "),this.escreveDispositivoAlterado(t,this.alteracao.pai),t.append(" "),t.append(e.genero.pronomePossessivoSingular),t.append(" "),t.append(e.nome),this.temCitacao(s,l)?t.append(", nos termos a seguir:"):t.append("."),Lh.normalizaCabecalhoComandoEmenda(t.toString())}temCitacao(e,t){return!!e.length||!!t.find((e=>!op(e)))}escreveDispositivoAlterado(e,t){e.append("pel"+t.artigoDefinidoSingular.trim()),e.append(" "),e.append(EE.getRotuloTipoDispositivo(t,!1)),e.append(" "),e.append(t.getNumeracaoParaComandoEmenda(t)),e.append(Lh.getRotuloPais(t))}escreveLei(e,t){e.append(vm(t))}escreveProposto(e,t){const o=t.length>1,i=t.filter((e=>e.tipoGenero===Zh.tipoGenero)).length===t.length;e.append("propost"+(i?"a":"o")+(o?"s":""))}}class CE extends AE{constructor(e){super(e=Lh.retiraPrimeirosFilhosAdicionadosAgrupador(e)),this.dispositivos=e}getTexto(e,t,o){const i=new Ws;let a=(new xE).getSequencias(this.dispositivos);if(a=this.trataLocalizacaoEmAgrupador(a),t&&o&&this.trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(i,e,a))return i.toString();const r=Lh.isSequenciasPlural(a);t?i.append(r?"Acrescentem-se ":"Acrescente-se "):(i.append(o?"; e ":"; "),i.append(r?"acrescentem-se ":"acrescente-se "));const n=new EE;if(n.tipoReferenciaAgrupador=_E.ADICAO,i.append(n.getTexto(a)),o){const o=a[a.length-1],r=o.getPrimeiroDispositivo();!Kd(r)||o.localizarEmAgrupador?i.append(e.genero.pronomePossessivoSingular):i.append(e.genero.artigoDefinidoPrecedidoPreposicaoASingular),i.append(e.nome),i.append(t?", com a seguinte redação:":", nos termos a seguir:")}return i.toString()}trataLocalizacaoEmAgrupador(e){const t=new Array;for(const o of e){const e=o.getPrimeiroDispositivo();Kd(e)?t.push(...this.trataLocalizacaoEmAgrupadorSequencia(o)):t.push(o)}return t}trataLocalizacaoEmAgrupadorSequencia(e){const t=new Array,o=new Array;for(const t of e.getRanges())o.push(...t.getDispositivos());let i=!1;for(const e of o)if(this.isInclusaoDeArtigoProximoAAgrupador(e)){i=!0;break}if(!i)return t.push(e),t;let a=new yE;a.localizarEmAgrupador=!0,t.push(a);let r,n=new bE;a.add(n);for(const e of o)n.isVazio()||(e.pai!==r.pai?(a=new yE,a.localizarEmAgrupador=!0,t.push(a),n=new bE,a.add(n)):Lh.getDispositivoIrmaoPosterior(r)!==e&&(n=new bE,a.add(n))),n.add(e),r=e;for(const e of t)e.setRanges(xE.separaRangesDeDoisDispositivos(e.getRanges()));return t}isInclusaoDeArtigoProximoAAgrupador(e){return this.isInclusaoNoInicioDeAgrupador(e)||this.isInclusaoImediatamenteAntesDeAgrupador(e)}isInclusaoNoInicioDeAgrupador(e){const t=e.pai;return!(uh(t)||!ip(t))&&0===t.filhos.indexOf(e)}isInclusaoImediatamenteAntesDeAgrupador(e){const t=e.pai,o=Lh.getDispositivoIrmaoPosterior(e);return!!o&&t!==o.pai}trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(e,t,o){const i=o[0],a=i.getPrimeiroDispositivo();if(1===o.length&&ap(a)){const r=i.getRanges();if(1===r.length||2===r.length&&1===r[0].getDispositivos().length&&1===r[1].getDispositivos().length&&Lh.verificaAgrupadoresAdicionadosEmSequencia(r[0].getPrimeiro(),r[1].getPrimeiro())){const i=Lh.isSequenciasPlural(o);e.append(i?"Acrescentem-se,":"Acrescente-se,"),e.append(EE.getLocalizacaoAgrupadores(r)),e.append(t.genero.pronomePossessivoSingular),e.append(" "),e.append(t.nome),e.append(", "),e.append(a.artigoDefinido),e.append(i?"s seguintes ":" seguinte ");const n=new EE;return e.append(n.getTexto(o,!1)),e.append(":"),!0}}return!1}}class NE{constructor(e){this.dispositivos=e}getTexto(e){var t,o,i,a;if(!this.dispositivos.length)return"";const r=e.genero.contracaoEmArtigoDefinidoSingular+" "+e.nome,n=this.dispositivos.filter((e=>Kd(e)&&!ap(e.pai))).length,s=this.dispositivos.filter((e=>ap(e))).length,l=new Ws,c=n+s>1;c?l.append("Acrescentem-se, onde couber, "+r+" "):l.append("Acrescente-se, onde couber, "+r+" ");const u=n>0;if(u&&(l.append(c?"os seguintes ":"o seguinte "),l.append(n>1?"artigos":"artigo")),s>0){const e=this.dispositivos.find((e=>ap(e)));u?(l.append(" e "),l.append(s>1?null===(t=e.descricaoPlural)||void 0===t?void 0:t.toLocaleLowerCase():null===(o=e.descricao)||void 0===o?void 0:o.toLocaleLowerCase())):s>1?l.append(e.artigoDefinidoPlural+" seguintes "+(null===(i=e.descricaoPlural)||void 0===i?void 0:i.toLocaleLowerCase())):l.append(e.artigoDefinido+" seguinte "+(null===(a=e.descricao)||void 0===a?void 0:a.toLocaleLowerCase()))}return l.append(":"),Qs(l.toString())}}class TE extends AE{constructor(e){super(e),this.dispositivos=e}getTexto(e,t,o){const i=new Ws,a=(new xE).getSequencias(this.dispositivos);t?(i.append("Dê-se "),o||i.append("nova redação ")):(i.append(o?"; e ":"; "),i.append("dê-se nova redação "));const r=new EE;return r.artigoAntesDispositivo=wE.DEFINIDO_COM_PREPOSICAO_A,r.tipoReferenciaAgrupador=_E.DENOMINACAO_DO_AGRUPADOR,i.append(r.getTexto(a).trim()),o&&(i.append(" "+e.genero.pronomePossessivoSingular+" "+e.nome),i.append(t?" a seguinte redação:":", nos termos a seguir:")),i.toString()}}class qE extends AE{constructor(e){super(e),this.dispositivos=e}getTexto(e,t,o){const i=new Ws,a=(new xE).getSequencias(this.dispositivos),r=Lh.isSequenciasPlural(a);t?i.append(r?"Suprimam-se ":"Suprima-se "):(i.append(o?"; e ":"; "),i.append(r?"suprimam-se ":"suprima-se "));const n=new EE;return n.artigoAntesDispositivo=wE.DEFINIDO,n.tipoReferenciaAgrupador=_E.TODO_AGRUPADOR,i.append(n.getTexto(a)),o&&(i.append(" "+e.genero.pronomePossessivoSingular+" "+e.nome),i.append(t?".":", nos termos a seguir:")),i.toString()}}class RE{constructor(e){this.dispositivosEmenda=e}getTexto(e){let t="";const o=Lh.getDispositivosComando(this.dispositivosEmenda),i=o.filter((e=>e.situacao instanceof Uf&&e.situacao.tipoEmenda===up.EMENDA_ARTIGO_ONDE_COUBER));if(i.length){if(i.length<o.length)throw new Error("Adição de artigos onde couber e outras alterações na mesma emenda.");return new NE(i).getTexto(e)}const a=[],r=o.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO));r.length&&a.push(new qE(r));const n=o.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO));n.length&&a.push(new TE(n));const s=o.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO));s.length&&a.push(new CE(s)),a.sort(AE.compare);let l=0;const c=a.length-1;return a.forEach((o=>{t+=o.getTexto(e,0===l,l===c),l++})),Lh.normalizaCabecalhoComandoEmenda(t)}}class DE{constructor(e,t){this.substituicaoTermo=e,this.urn=t}getComplementoFlexoes(e,t){const o=[];return e&&o.push("gênero"),t&&o.push("número"),o.length?`, fazendo-se as flexões de ${o.join(" e ")} necessárias`:""}getTexto(){const{tipo:e,termo:t,novoTermo:o,flexaoGenero:i,flexaoNumero:a}=this.substituicaoTermo,r=bm(this.urn),n="número"==e.toLowerCase()?"o":"a";return`Substitua-se n${r.genero.artigoDefinido} ${r.nome} ${n} ${e.toLowerCase()} “${t}” por “${o}”${this.getComplementoFlexoes(i,a)}.`}}class PE{constructor(e,t){this.urn=e,this.payload=t}getComandoEmenda(){return((e={})=>"termo"in e)(this.payload)?this.getComandoEmendaSubstituicaoTermo():this.getComandoEmendaArticulacao()}getComandoEmendaSubstituicaoTermo(){const e=new sE,t=new DE(this.payload,this.urn);return e.comandos.push(new cE(t.getTexto(),"")),e}getComandoEmendaArticulacao(){const e=this.payload,t=new sE,o=Lh.getDispositivosNaoOriginais(e),i=this.getDispositivosRepresentativosDeCadaComando(o);if(i.sort(Dh.compare),!i.length)return t;const a=bm(this.urn);return i.forEach((i=>{let r,n,s;if(Gd(i)){r=new kE(i).getTexto(a);n=(new mE).getTexto(i),s=this.getTextoComplementoDispAlteracao(i)}else{r=new RE(o).getTexto(a);n=new vE(e).getTexto(),s=this.getTextoComplementoDispProposicao(o)}const l=new cE(r,n);s&&(l.complemento=s),t.comandos.push(l)})),t.comandos.length>1&&(t.cabecalhoComum=this.montaCabecalhoComum(a,t.comandos.length),t.comandos.forEach(((e,t)=>{e.rotulo=`Item ${t+1} –`}))),t}getDispositivosRepresentativosDeCadaComando(e){const t=[];let o=!1;return e.forEach((e=>{const i=dp(e);i&&Jp(i)?t.includes(i)||i.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||i.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO||t.push(i):o||(o=!0,t.push(e))})),t}montaCabecalhoComum(e,t){return`Dê-se nova redação ${e.genero.artigoDefinidoPrecedidoPreposicaoASingular} ${e.nome} nos termos dos itens ${this.listarItens(t)} a seguir.`}listarItens(e){return Array(e).fill(0).map(((e,t)=>t+1)).join(", ").replace(/, (\d+?)$/," e $1")}getTextoComplementoDispProposicao(e){const t=e.filter((e=>!Zp(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&e.situacao.tipoEmenda!==up.EMENDA_ARTIGO_ONDE_COUBER&&e.pai.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO));if(t.length&&Lh.verificaNecessidadeRenumeracaoRedacaoFinal(t))return"Os dispositivos acima propostos e adjacentes deverão ser devidamente renumerados no momento da consolidação das emendas ao texto da proposição pela Redação Final."}getTextoComplementoDispAlteracao(e){const t=ch(e,(e=>ap(e)&&e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO));if(t)return"O comando de supressão do agrupador não se refere aos dispositivos a ele subordinados."}}class LE{constructor(e,t,o){this.tipoEmenda=e,this.urn=t,this.articulacao=o}getDispositivosEmenda(){const e=new oE;return this.preencheDispositivos(e),e}preencheDispositivos(e){const t=Lh.getDispositivosNaoOriginais(this.articulacao),o=t.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_SUPRIMIDO&&e.pai.situacao.descricaoSituacao!==Ud.DISPOSITIVO_SUPRIMIDO));if(o.length)for(const t of o){const o=new aE;o.tipo=this.getTipoDispositivoParaEmenda(t),o.id=t.id,o.rotulo=t.rotulo,this.addUrnNormaAlteradaSeNecessario(t,o),e.dispositivosSuprimidos.push(o)}const i=t.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_MODIFICADO));if(i.length)for(const t of i){const o=new rE;if(Kd(t)){const e=t.caput;o.tipo=this.getTipoDispositivoParaEmenda(e),o.id=e.id,o.rotulo=t.rotulo,o.texto=this.trataTexto(e.texto)}else o.tipo=this.getTipoDispositivoParaEmenda(t),o.id=t.id,o.rotulo=t.rotulo,o.texto=this.trataTexto(t.texto);t.isDispositivoAlteracao&&this.preencheAtributosAlteracao(t,o),this.addUrnNormaAlteradaSeNecessario(t,o),e.dispositivosModificados.push(o)}const a=this.separaAgrupadores(t.filter((e=>e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO&&!this.isDispositivoFilhoDeAdicionado(e))));if(a.length)for(const t of a){const o=this.criaDispositivoEmendaAdicionado(t);this.addUrnNormaAlteradaSeNecessario(t,o),e.dispositivosAdicionados.push(o)}}separaAgrupadores(e){const t=e=>e.situacao.descricaoSituacao!==Ud.DISPOSITIVO_ADICIONADO?[]:ap(e)?[e,...e.filhos.flatMap((e=>t(e)))]:[e];return e.flatMap((e=>t(e)))}isDispositivoFilhoDeAdicionado(e){return!!(e.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||Wd(e.pai)&&e.pai.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO||e.isDispositivoAlteracao&&Kd(e)&&e.pai.pai.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)}criaDispositivoEmendaAdicionado(e,t=!0){var o,i,a;const r=new nE;if(r.tipo=this.getTipoDispositivoParaEmenda(e),e.id||(e.id=Hm(e)),r.id=e.id,Wd(e)||Jp(e)||op(e)||(r.rotulo=e.rotulo),Kd(e)||Jp(e)||(r.texto=this.trataTexto(e.texto)),t)if(Wd(e)||Jp(e))r.idPai=null===(o=e.pai)||void 0===o?void 0:o.id;else if(ap(e))r.idPosicaoAgrupador=this.calculaPosicaoAgrupador(e);else{const t=Lh.getFilhosEstiloLexML(e.pai);e!==t[0]?r.idIrmaoAnterior=t[t.indexOf(e)-1].id:uh(e.pai)||(r.idPai=null===(i=e.pai)||void 0===i?void 0:i.id)}if(Jp(e)){const t=e.base;t&&(r.urnNormaAlterada=t)}else e.isDispositivoAlteracao&&(r.existeNaNormaAlterada=null===(a=e.situacao)||void 0===a?void 0:a.existeNaNormaAlterada,this.preencheAtributosAlteracao(e,r));const n=Lh.getFilhosEstiloLexML(e);return Wd(e)&&e.pai.alteracoes&&n.push(e.pai.alteracoes),n.length&&(r.filhos=[],n.forEach((e=>{(Wd(e)||Jp(e)||e.situacao.descricaoSituacao===Ud.DISPOSITIVO_ADICIONADO)&&r.filhos.push(this.criaDispositivoEmendaAdicionado(e,!1))}))),r}calculaPosicaoAgrupador(e){const t=Pp(e);if(t&&!uh(t))return ap(t)||Kd(t)?t.id:bp(t).id}getTipoDispositivoParaEmenda(e){return Gd(e)?"Alteracao":e.tipo}preencheAtributosAlteracao(e,t){if(!op(e)&&t.texto&&t.texto.indexOf(Hd)>=0&&(t.textoOmitido=!0),Gp(e)&&(t.abreAspas=!0),Kp(e)){t.fechaAspas=!0;const o=Hp(e);t.notaAlteracao=o.notaAlteracao}}trataTexto(e){return e.indexOf(Hd)>=0?Hd:e.trim()}addUrnNormaAlteradaSeNecessario(e,t){var o,i,a;if(Zp(e)){const r=null===(a=null===(i=null===(o=dp(e))||void 0===o?void 0:o.pai)||void 0===i?void 0:i.alteracoes)||void 0===a?void 0:a.base;r&&(t.urnNormaAlterada=r)}}}const ME=(e,t)=>{var o;let i;if(i=ip(e)?t.lXhier=[]:t.lXcontainersOmissis=[],Kd(e)){const t=zE(e.caput);$E(e,t.value),i.push(t),jE(null===(o=e.filhos)||void 0===o?void 0:o.filter((e=>!Wd(e.pai))),i),ME(e.caput,t.value)}else jE(e.filhos,i);return i},$E=(e,t)=>{var o,i,a;e.hasAlteracao()&&(t.alteracao={TYPE_NAME:"br_gov_lexml__1.Alteracao",base:"",id:"",content:[]},t.alteracao.base=null!==(i=null===(o=e.alteracoes)||void 0===o?void 0:o.base)&&void 0!==i?i:"",t.alteracao.id=(e=>{const t=[];return Vm(e,t),t.join("_")+"_alt1"})(e.caput),null===(a=e.alteracoes.filhos)||void 0===a||a.forEach((e=>{const o=zE(e);t.alteracao.content.push(o),ME(e,o.value)})))},jE=(e,t)=>{null==e||e.forEach((e=>{const o=zE(e);t.push(o),ME(e,o.value)}))},zE=e=>{const t={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:e.tipo,prefix:"",key:`{http://www.lexml.gov.br/1.0}${e.tipo}`,string:`{http://www.lexml.gov.br/1.0}${e.tipo}`},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType"}};return FE(e,t.value),t},FE=(e,t)=>{t.href=Wd(e)?Um(e.pai)+"_"+Um(e):Um(e),t.id=Hm(e),Gp(e)?(t.abreAspas="s",t.rotulo=e.rotulo):Wd(e)||op(e)||(t.rotulo=e.rotulo);const o=Wd(e)?e.pai:e;if(Zp(o)&&Kp(o)){t.fechaAspas="s";const e=Hp(o);t.notaAlteracao=e.notaAlteracao||"NR"}ip(e)?t.nomeAgrupador={TYPE_NAME:"br_gov_lexml__1.GenInline",content:BE(e)}:Kd(e)||(e.texto===Hd?t.textoOmitido="s":t.p=[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:BE(e)}])},BE=e=>{const t=/<a[^>]+href="(.*?)"[^>]*>(.*?)<\/a>/gi,o=[],i=e.texto.match(t);if(i)e.texto.startsWith(i[0])||o.push(e.texto.substring(0,e.texto.indexOf(i[0])));else{const t=e.texto.indexOf("” (NR)");o.push(e.texto.substring(0,-1===t?void 0:t))}return null==i||i.forEach(((a,r)=>{var n,s;const l=a.match(t)?a:"";o.push(UE(null!=l?l:""));const c=(null===(n=e.texto)||void 0===n?void 0:n.indexOf(a))+a.length;if(c<e.texto.length-1){const t=i[r+1]?e.texto.indexOf(i[r+1]):e.texto.length;o.push(null===(s=e.texto.substring(c,t))||void 0===s?void 0:s.replace(/strong>/gi,"b>").replace(/em>/gi,"i>"))}})),o},UE=e=>{var t;const o=e.match(/href="(.*?)"*>/i),i=o&&o[1]?o[1]:"",a=e.match(/<a[^>]+href=".*?"[^>]*>(.*?)<\/a>/);return{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"span",prefix:"",key:"{http://www.lexml.gov.br/1.0}span",string:"{http://www.lexml.gov.br/1.0}span"},value:{TYPE_NAME:"br_gov_lexml__1.GenInline",href:i,content:a&&a[1]?[null===(t=a[1])||void 0===t?void 0:t.trim()]:[""]}}},VE={name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"LexML",prefix:"",key:"{http://www.lexml.gov.br/1.0}LexML",string:"{http://www.lexml.gov.br/1.0}LexML"},value:{TYPE_NAME:"br_gov_lexml__1.LexML",metadado:{TYPE_NAME:"br_gov_lexml__1.Metadado",identificacao:{TYPE_NAME:"br_gov_lexml__1.Identificacao",urn:""}},projetoNorma:{TYPE_NAME:"br_gov_lexml__1.ProjetoNorma",norma:{TYPE_NAME:"br_gov_lexml__1.HierarchicalStructure",parteInicial:{TYPE_NAME:"br_gov_lexml__1.ParteInicial",epigrafe:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"epigrafe",content:[""]},ementa:{TYPE_NAME:"br_gov_lexml__1.GenInline",id:"ementa",content:[""]},preambulo:{TYPE_NAME:"br_gov_lexml__1.TextoType",id:"preambulo",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}},articulacao:{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Artigo",prefix:"",key:"{http://www.lexml.gov.br/1.0}Artigo",string:"{http://www.lexml.gov.br/1.0}Artigo"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1",rotulo:"Art. 1º",lXcontainersOmissis:[{name:{namespaceURI:"http://www.lexml.gov.br/1.0",localPart:"Caput",prefix:"",key:"{http://www.lexml.gov.br/1.0}Caput",string:"{http://www.lexml.gov.br/1.0}Caput"},value:{TYPE_NAME:"br_gov_lexml__1.DispositivoType",id:"art1_cpt",p:[{TYPE_NAME:"br_gov_lexml__1.GenInline",content:[""]}]}}]}}]}}}}};let HE=class extends(Gc(iA)(Jl)){constructor(){super(...arguments),this.lexmlEtaConfig=new Qc,this.modo="",this.urn="",this._timerLoadEmenda=0}createRenderRoot(){return this}inicializarEdicao(e,t,o,i=!1){this.modo=e,this.urn=t,o&&(this.projetoNorma=o),this.loadProjetoNorma(i),document.querySelector("lexml-eta-articulacao").style.display="block"}getDispositivosEmenda(){if(this.modo!==up.EMENDA&&this.modo!==up.EMENDA_ARTIGO_ONDE_COUBER)return;const e=iA.getState().elementoReducer.articulacao;return new LE(this.modo,this.urn,e).getDispositivosEmenda()}setDispositivosERevisoesEmenda(e,t){this.revisoes=t,e&&(this.dispositivosEmenda=e,this.loadEmenda())}getComandoEmenda(){const e=iA.getState().elementoReducer.articulacao;return new PE(this.urn,e).getComandoEmenda()}getProjetoAtualizado(){const e={...this.projetoNorma},t=(o=iA.getState().elementoReducer.articulacao,{TYPE_NAME:"br_gov_lexml__1.Articulacao",lXhier:ME(o,{articulacao:{}})});var o;return e.value.projetoNorma[e.value.projetoNorma.norma?"norma":"projeto"].articulacao.lXhier=t.lXhier,e}loadProjetoNorma(e){var t,o;let i;if(this.projetoNorma&&this.projetoNorma.value||(this.projetoNorma=VE),this.modo===X_.EMENDA_ARTIGO_ONDE_COUBER){i=Fb(VE,!0);const t=i.articulacao.artigos[0];t.rotulo="Art.",t.numero="1",t.id="art1";const o=new Uf;o.tipoEmenda=up.EMENDA_ARTIGO_ONDE_COUBER,t.situacao=o,e&&i.articulacao.removeFilho(i.articulacao.filhos[0])}else i=Fb(this.projetoNorma,this.modo===up.EMENDA);var a,r;i.urn=this.urn,null===(o=null===(t=document.querySelector("lexml-emenda"))||void 0===t?void 0:t.querySelector("sl-tab"))||void 0===o||o.click(),iA.dispatch((a=i.articulacao,r=this.modo,{type:od,classificacao:r,articulacao:a}))}loadEmenda(){this.dispositivosEmenda&&(clearInterval(this._timerLoadEmenda),this._timerLoadEmenda=window.setTimeout((()=>{iA.dispatch(Fu.execute(this.dispositivosEmenda,this.revisoes))}),1e3))}render(){return Rl`
      ${K_}
      <style>
        #gtx-trans {
          display: block;
        }

        lexml-eta-articulacao {
          display: none;
          height: 100%;
        }

        lexml-eta-articulacao:focus {
          outline: 0;
          border: 0px solid #f1f1f1;
          -webkit-box-shadow: 0px;
          box-shadow: none;
        }
      </style>
      <lexml-eta-articulacao .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-articulacao>
    `}};Mc([zc({type:Object})],HE.prototype,"lexmlEtaConfig",void 0),HE=Mc([$c("lexml-eta")],HE);const GE=nl`
  sl-radio-group::part(base) {
    background-color: var(--sl-color-gray-100);
    box-shadow: var(--sl-shadow-x-large);
    padding: 20px 20px;
  }
  sl-radio-group::part(label) {
    background-color: var(--sl-color-gray-200);
    font-weight: bold;
    border-radius: 5px;
    border: 1px solid var(--sl-color-gray-300);
    padding: 2px 5px;
    box-shadow: var(--sl-shadow-small);
  }

  legend {
    font-weight: normal;
  }

  .lexml-autoria {
    display: block;
    font-size: var(--sl-font-size-small);
    font-family: var(--sl-font-sans);
    max-width: 700px;
  }

  .lexml-autocomplete {
    width: 100%;
  }

  .grid-autoria {
    display: grid;
    grid-template-columns: 3fr 2fr 250px;
  }

  .autoria-grid {
    display: flex;
    flex-direction: row;
    align-items: flex-start;
    width: 100%;
    padding: 0 0 4px 0;
    flex-wrap: wrap;
  }

  .autoria-grid--col1 {
    flex: none;
    order: 0;
    flex-grow: 1;
  }

  .autoria-grid--col2 {
    flex: none;
    order: 1;
    flex-grow: 1;
  }

  .autoria-grid--col3 {
    flex: none;
    order: 2;
    flex-grow: 1;
  }

  [class^='autoria-grid--'] {
    margin: 0px 2px;
  }

  .autoria-grid:first-child {
    padding: 0 0 2px 0;
  }

  .autoria-header {
    width: 180px;
    padding: 0px 2px;
  }

  .autoria-buttons {
    width: 124px;
    text-align: right;
  }

  .autoria-input {
    width: 100%;
    margin: 0px;
  }

  .autoria-button {
    background-color: white;
    border: 1px solid #555;
    border-radius: 2px;
    padding: 2px 4px;
    cursor: pointer;
  }

  .autoria-label {
    display: none;
  }

  .autoria-icon {
    background-color: #555;
  }

  .icon-up {
    display: block;
    width: 24px;
    height: 24px;
    -webkit-mask-position-y: 1px;
    -webkit-mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>");
    mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>");
  }

  .icon-down {
    display: block;
    width: 24px;
    height: 24px;
    -webkit-mask-position-y: 1px;
    -webkit-mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>");
    mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>");
  }

  .icon-delete {
    display: block;
    width: 24px;
    height: 24px;
    -webkit-mask-position-y: 1px;
    -webkit-mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>");
    mask-image: url("data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>");
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  .assinaturas-adicionais {
    padding-top: 10px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    vertical-align: center;
    gap: 10px;
  }

  .assinaturas-adicionais div {
    padding-top: 5px;
  }

  .assinaturas-adicionais .autoria-input {
    display: block;
    max-width: 400px;
  }

  @media (max-width: 576px) {
    .autoria-grid {
      flex-direction: column;
    }

    .autoria-labels {
      display: none;
    }
    .autoria-label {
      display: block;
    }

    .autoria-buttons {
      width: calc(100% - 3px);
    }

    .autoria-input {
      width: calc(100% - 2px);
    }

    [class^='autoria-grid--'] {
      width: 100%;
      padding: 2px 0;
    }
  }
`,QE=new class{constructor(){this.identificacao="",this.nome="",this.sexo="M",this.siglaPartido="",this.siglaUF="",this.siglaCasaLegislativa="CD",this.cargo=""}};function KE(e=200){return function(t,o,i){return{get(){const t=(...t)=>{let o=0;const a=()=>{clearInterval(o),this._isProcessandoValidacao?o=window.setTimeout((()=>a()),e):i.value.apply(this,t)};a()};return Object.defineProperty(this,o,{value:t,configurable:!0,writable:!0}),t}}}}let WE=class extends Jl{constructor(){super(...arguments),this._nomesAutocomplete=[],this._podeIncluirParlamentar=!0,this._parlamentaresAutocomplete=[],this._exibirTemplateTipoAutoria=!1,this._timerValidacao=0,this._isProcessandoValidacao=!1,this.timerEmitirEventoOnChange=0,this._isProcessandoMovimentacao=!1,this._lastIndexAutoCompleted=-1}set parlamentares(e){const t=this._parlamentaresAutocomplete;this._parlamentaresAutocomplete=e,this._nomesAutocomplete=e.map((e=>e.nome)),this.requestUpdate("parlamentares",t)}get parlamentares(){return this._parlamentaresAutocomplete}set autoria(e){const t=this._autoriaOriginal;this._autoriaOriginal=e,this._autoria=e?{...e,parlamentares:[...e.parlamentares]}:new uE,this._autoria.parlamentares.length||(this._autoria.parlamentares=[{...QE}]),this._podeIncluirParlamentar=this._isAllAutoresOk(),this.requestUpdate("autoria",t)}get autoria(){return this._autoriaOriginal}getAutoriaAtualizada(){return{...this._autoria,parlamentares:this._autoria.parlamentares.filter((e=>e.identificacao))}}render(){var e,t;return Rl`
      <sl-radio-group label="Autoria" fieldset class="lexml-autoria">
        ${this._getTipoAutoriaTemplate()}
        <div class="autoria-list">${this._getParlamentaresTemplate()}</div>
        <sl-button id="btnNovoParlamentar" variant="primary" @click=${this._incluirNovoParlamentar} ?disabled=${!this._podeIncluirParlamentar}>
          Incluir ${(null===(e=this._autoria)||void 0===e?void 0:e.parlamentares.length)?"outro":""} parlamentar
        </sl-button>

        ${this._getAssinaturasAdicionaisTemplate()}

        <div class="assinaturas-adicionais">
          <label>
            <input type="checkbox" id="chk-exibir-partido-uf" ?checked=${null===(t=this._autoria)||void 0===t?void 0:t.imprimirPartidoUF} @input=${e=>this._atualizarExibirPartidoUF(e)} />
            Imprimir partido e UF para os signatários
          </label>
        </div>
      </sl-radio-group>
    `}_getTipoAutoriaTemplate(){var e,t;return this._exibirTemplateTipoAutoria?Rl`
          <fieldset class="autoria-label--tipo-autoria">
            <legend>Tipo de autoria</legend>
            <div class="control">
              <label class="radio">
                <input type="radio" id="opt-parlamentar" name="tipoAutoria" value="Parlamentar" ?checked=${"Parlamentar"===(null===(e=this._autoria)||void 0===e?void 0:e.tipo)} />
                Parlamentar
              </label>
              <label class="radio">
                <input type="radio" id="opt-comissao" name="tipoAutoria" value="Comissão" ?checked=${"Comissão"===(null===(t=this._autoria)||void 0===t?void 0:t.tipo)} />
                Comissão
              </label>
            </div>
          </fieldset>
        `:Rl`<div></div>`}_getParlamentaresTemplate(){var e;return Rl`
      <div class="autoria-grid autoria-labels">
        <div class="autoria-grid--col1"><div class="autoria-header">Parlamentar</div></div>
        <div class="autoria-grid--col2"><div class="autoria-header">Cargo</div></div>
        <div class="autoria-grid--col3"><div class="autoria-buttons"></div></div>
      </div>
      ${null===(e=this._autoria)||void 0===e?void 0:e.parlamentares.map(((e,t)=>this._getParlamentarAutocompleteTemplate(t)))}
    `}_getParlamentarAutocompleteTemplate(e){var t;return Rl`
      <div class="autoria-grid">
        <div class="autoria-grid--col1">
          <label for="defaultInput" class="autoria-label">Parlamentar</label>
          <lexml-autocomplete
            class="lexml-autocomplete"
            .items=${this._nomesAutocomplete}
            value=${this._autoria.parlamentares[e].nome}
            @input=${t=>this._validarNomeParlamentar(t,e)}
            @blur=${t=>this._validarNomeParlamentar(t,e)}
            @autocomplete=${t=>this._atualizarParlamentar(t,e)}
            @keyup=${t=>this._handleKeyUp(t,e)}
            @click=${this._handleClickAutoComplete}
          ></lexml-autocomplete>
        </div>

        <div class="autoria-grid--col2">
          <label for="tex-cargo" class="autoria-label">Cargo</label>
          <sl-input
            type="text"
            id="tex-cargo"
            placeholder="ex: Presidente da Comissão ..., Líder do ..."
            class="autoria-input"
            aria-label="Cargo"
            size="small"
            .value=${null!==(t=this._autoria.parlamentares[e].cargo)&&void 0!==t?t:""}
            @input=${t=>this._atualizarCargo(t,e)}
            @keyup=${t=>this._handleKeyUp(t,e)}
          ></sl-input>
        </div>

        <div class="autoria-grid--col3">
          <div class="autoria-buttons">
            <sl-button
              id="paraBaixo"
              size="small"
              aria-label="Para baixo"
              title="Para baixo"
              @click=${()=>this._moverParlamentar(e,1)}
              .disabled=${e===this._autoria.parlamentares.length-1}
            >
              <sl-icon name="arrow-down"></sl-icon>
            </sl-button>
            <sl-button
              id="paraCima"
              size="small"
              aria-label="Para cima"
              title="Para cima"
              @click=${()=>this._moverParlamentar(e,-1)}
              .disabled=${0===e}
            >
              <sl-icon name="arrow-up"></sl-icon>
            </sl-button>
            <sl-button
              id="excluir"
              size="small"
              aria-label="Excluir"
              title="Excluir"
              @click=${()=>this._excluirParlamentar(e)}
              .disabled=${1===this._autoria.parlamentares.length}
            >
              <sl-icon name="trash"></sl-icon>
            </sl-button>
          </div>
        </div>
      </div>
    `}_getAssinaturasAdicionaisTemplate(){var e,t,o,i;return Rl`
      <div class="assinaturas-adicionais">
        <sl-input
          label="Quantidade de assinaturas adicionais de Senadores"
          type="number"
          id="num-assinaturas-adicionais-senadores"
          class="autoria-input"
          aria-label="Assinaturas Adicionais Senadores"
          size="small"
          .value=${null!==(t=null===(e=this._autoria)||void 0===e?void 0:e.quantidadeAssinaturasAdicionaisSenadores.toString())&&void 0!==t?t:"0"}
          @input=${e=>this._atualizarQtdAssinaturasAdicionaisSenadores(e)}
        ></sl-input>
        <sl-input
          label="Quantidade de assinaturas adicionais de Deputados Federais"
          type="number"
          id="num-assinaturas-adicionais-deputados"
          class="autoria-input"
          aria-label="Assinaturas Adicionais deputados"
          size="small"
          .value=${null!==(i=null===(o=this._autoria)||void 0===o?void 0:o.quantidadeAssinaturasAdicionaisDeputados.toString())&&void 0!==i?i:"0"}
          @input=${e=>this._atualizarQtdAssinaturasAdicionaisDeputados(e)}
        ></sl-input>
      </div>
    `}updated(){this._isProcessandoMovimentacao=!1}_isAllAutoresOk(){return this._autoria.parlamentares.every((e=>e.identificacao))}_incluirNovoParlamentar(){this._autoria.parlamentares=((e,t)=>{const o=[...e];return o.push(t),o})(this._autoria.parlamentares,{...QE}),this._podeIncluirParlamentar=!1,setTimeout((()=>this._autocompletes[this._autoria.parlamentares.length-1].focus()),200)}_moverParlamentar(e,t){this._autoria.parlamentares=((e,t,o)=>{const i=t+o;if(i<0||i>=e.length)return e;const a=[...e];return a.splice(i,0,a.splice(t,1)[0]),a})(this._autoria.parlamentares,e,t),this.agendarEmissaoEventoOnChange("moverAutor"),this.requestUpdate()}_excluirParlamentar(e){this._autoria.parlamentares=((e,t)=>{const o=[...e];return o.splice(t,1),o})(this._autoria.parlamentares,e),this._autoria.parlamentares.length||(this._autoria.parlamentares=[{...QE}]),this._podeIncluirParlamentar=this._isAllAutoresOk(),this.agendarEmissaoEventoOnChange("excluirAutor"),this.requestUpdate()}_validarNomeParlamentar(e,t){this._isProcessandoValidacao=!0;const o="blur"===e.type;o||clearInterval(this._timerValidacao),this._timerValidacao=window.setTimeout((()=>{var e;const i=this._podeIncluirParlamentar,a=this._autocompletes[t],r=this._autoria.parlamentares[t].cargo,n=null!==(e=a.value)&&void 0!==e?e:"",s=new RegExp("^"+n.normalize("NFD").replace(Xs,"")+"$","i"),l=this.parlamentares.find((e=>e.nome.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(s)))||{...QE,nome:o?"":n},c=!!l.identificacao;l.cargo=o&&!c?"":r,this._autoria.parlamentares[t]={...l},this._podeIncluirParlamentar=c&&this._isAllAutoresOk(),o&&!c&&(a.value=""),this._isProcessandoValidacao=!1,i!==this._podeIncluirParlamentar&&this.agendarEmissaoEventoOnChange("atualizarAutor")}),"blur"===e.type?200:0)}_atualizarParlamentar(e,t){const o=this.parlamentares.find((t=>t.nome===e.detail.value));if(o){const{cargo:e}=this._autoria.parlamentares[t];this._autoria.parlamentares[t]={...o,cargo:e}}this._podeIncluirParlamentar=!!o&&this._isAllAutoresOk(),e.target.focus(),this._lastIndexAutoCompleted=t,this.agendarEmissaoEventoOnChange("atualizarAutor"),this.requestUpdate()}_atualizarCargo(e,t){const o=this._autoria.parlamentares[t].cargo,i=e.target.value;this._autoria.parlamentares[t].cargo=i,o!==i&&this.agendarEmissaoEventoOnChange("atualizarAutor")}_atualizarQtdAssinaturasAdicionaisSenadores(e){this._autoria.quantidadeAssinaturasAdicionaisSenadores=Number(e.target.value)}_atualizarQtdAssinaturasAdicionaisDeputados(e){this._autoria.quantidadeAssinaturasAdicionaisDeputados=Number(e.target.value)}_atualizarExibirPartidoUF(e){this._autoria.imprimirPartidoUF=e.target.checked}_handleKeyUp(e,t){e.ctrlKey||e.altKey||e.shiftKey?!e.ctrlKey||e.altKey||e.shiftKey||("ArrowUp"===e.key?this._isProcessandoMovimentacao||(this._isProcessandoMovimentacao=!0,this._moverParlamentar(t,-1),this._focarAutocompleteOuCargo(e.target,t,-1)):"ArrowDown"===e.key&&(this._isProcessandoMovimentacao||(this._isProcessandoMovimentacao=!0,this._moverParlamentar(t,1),this._focarAutocompleteOuCargo(e.target,t,1)))):"Enter"===e.key&&this._podeIncluirParlamentar&&t!==this._lastIndexAutoCompleted?(this._btnNovoParlamentar.click(),this._lastIndexAutoCompleted=-1):["ArrowUp","ArrowDown"].includes(e.key)&&this._autoria.parlamentares[t].identificacao&&this._focarAutocompleteOuCargo(e.target,t,"ArrowUp"===e.key?-1:1)}_focarAutocompleteOuCargo(e,t,o){const i="LEXML-AUTOCOMPLETE"===e.tagName?this._autocompletes:this._inputCargos,a=t+o;a<0||a>=i.length||setTimeout((()=>i[a].focus()),0)}_handleClickAutoComplete(){window.setTimeout((()=>this._lastIndexAutoCompleted=-1),0)}agendarEmissaoEventoOnChange(e){clearInterval(this.timerEmitirEventoOnChange),this.timerEmitirEventoOnChange=window.setTimeout((()=>this.emitirEventoOnChange(e)),500)}emitirEventoOnChange(e){this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:e}}))}};WE.styles=[GE],Mc([Uc("#btnNovoParlamentar")],WE.prototype,"_btnNovoParlamentar",void 0),Mc([Vc("input#tex-cargo")],WE.prototype,"_inputCargos",void 0),Mc([Vc("lexml-autocomplete")],WE.prototype,"_autocompletes",void 0),Mc([Fc()],WE.prototype,"_nomesAutocomplete",void 0),Mc([Fc()],WE.prototype,"_podeIncluirParlamentar",void 0),Mc([zc({type:Array})],WE.prototype,"parlamentares",null),Mc([zc({type:Object})],WE.prototype,"autoria",null),Mc([KE()],WE.prototype,"_moverParlamentar",null),Mc([KE()],WE.prototype,"_excluirParlamentar",null),WE=Mc([$c("lexml-autoria")],WE);let XE=class extends Jl{constructor(){super(...arguments),this._comissoesAutocomplete=[],this.comissaoSelecionada="",this.isMPV=!1,this.isPlenario=!1,this.tipoColegiadoPlenario=!1,this._comissoesOptions=[]}set proposicao(e){this._proposicao=e,this.isMPV=!1,"MPV"===this._proposicao.sigla&&(this._colegiadoApreciador.siglaCasaLegislativa="CN",this._colegiadoApreciador.tipoColegiado="Comissão",this._colegiadoApreciador.siglaComissao=`CMMPV ${this._proposicao.numero}/${this._proposicao.ano}`,this._autocomplete.value=`${this._colegiadoApreciador.siglaComissao} - COMISSÃO MISTA DA MEDIDA PROVISÓRIA N° ${this._proposicao.numero}, DE ${this._proposicao.ano}`,this.isMPV=!0),this.requestUpdate()}get proposicao(){return this._proposicao}set comissoes(e){this.isPlenario=!1,this._comissoes&&0!==this._comissoes.length||(this._comissoes=e||[],this._comissoesOptions=this.comissoes.map((e=>new Uw(e.sigla,`${e.sigla} - ${e.nome}`))),this.requestUpdate()),void 0===e&&(this.isPlenario=!0)}get comissoes(){return this._comissoes}set colegiadoApreciador(e){if(this._colegiadoApreciador=e||new Z_,this.tipoColegiadoPlenario="Plenário"===this._colegiadoApreciador.tipoColegiado,this._colegiadoApreciador.siglaComissao){const e=this._comissoesOptions.find((e=>e.value===this._colegiadoApreciador.siglaComissao))||new Uw("","");this._autocomplete.value=e.description||this._colegiadoApreciador.siglaComissao}else this._autocomplete.value="";this.requestUpdate()}get colegiadoApreciador(){return this._colegiadoApreciador}render(){var e,t,o,i;return Rl`
      <style>
        fieldset {
          display: flex;
          flex-direction: column;
          gap: 1em;
          background-color: var(--sl-color-gray-100);
          box-shadow: var(--sl-shadow-x-large);
          flex-wrap: wrap;
          padding: 20px 20px;
          border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
          border-radius: var(--sl-border-radius-medium);
          max-width: 655px;
        }

        legend {
          background-color: var(--sl-color-gray-200);
          font-weight: bold;
          border-radius: 5px;
          border: 1px solid var(--sl-color-gray-300);
          padding: 2px 5px;
          box-shadow: var(--sl-shadow-small);
        }

        /* sl-radio-group::part(base) {
          display: flex;
          flex-direction: row;
          align-items: center;
          gap: 10px;
          background-color: var(--sl-color-gray-100);
          box-shadow: var(--sl-shadow-x-large);
          flex-wrap: wrap;
          padding: 20px 20px;
        }
        sl-radio-group::part(label) {
          background-color: var(--sl-color-gray-200);
          font-weight: bold;
          border-radius: 5px;
          border: 1px solid var(--sl-color-gray-300);
          padding: 2px 5px;
          box-shadow: var(--sl-shadow-small);
        }
        sl-radio-group > sl-radio:first-child {
          display: inline-flex;
          padding: 0 20px 0 0;
        }
        sl-input::part(form-control) {
          display: flex;
          flex-direction: row;
          gap: 10px;
          align-items: center;
          flex-wrap: wrap;
        }
        sl-input::part(base) {
          max-width: 190px;
        }
        @media (max-width: 480px) {
          sl-input::part(base) {
            max-width: 150px;
          }
        }

        sl-radio-group::part(base) {
          box-shadow: none;
        } */
      </style>
      <fieldset class="lexml-destino">
        <legend>Destino</legend>
        <div>
          <sl-radio-group id="tipoColegiado">
            <sl-radio
              name="tipoColegiado"
              @click=${()=>this.updateTipoColegiado("Plenário")}
              @sl-change=${e=>{var t;return(null===(t=e.target)||void 0===t?void 0:t.checked)&&this.updateTipoColegiado("Plenário")}}
              ?checked=${"Plenário"===(null===(e=this._colegiadoApreciador)||void 0===e?void 0:e.tipoColegiado)}
              value="Plenário"
              ?disabled=${this.isMPV||this.isPlenario}
              >Plenário</sl-radio
            >
            <sl-radio
              name="tipoColegiado"
              @click=${()=>this.updateTipoColegiado("Comissão")}
              @sl-change=${e=>{var t;return(null===(t=e.target)||void 0===t?void 0:t.checked)&&this.updateTipoColegiado("Comissão")}}
              ?checked=${"Comissão"===(null===(t=this._colegiadoApreciador)||void 0===t?void 0:t.tipoColegiado)}
              value="Comissão"
              ?disabled=${this.isMPV||this.isPlenario}
              >Comissão</sl-radio
            >
            <sl-radio
              name="tipoColegiado"
              @click=${()=>this.updateTipoColegiado("Plenário via Comissão")}
              @sl-change=${e=>{var t;return(null===(t=e.target)||void 0===t?void 0:t.checked)&&this.updateTipoColegiado("Plenário via Comissão")}}
              ?checked=${"Plenário via Comissão"===(null===(o=this._colegiadoApreciador)||void 0===o?void 0:o.tipoColegiado)}
              value="Plenário via Comissão"
              ?disabled=${this.isMPV||this.isPlenario}
              >Plenário via Comissão</sl-radio
            >
          </sl-radio-group>
        </div>
        <div style="width:100%;margin-top:10px">
          <autocomplete-async
            id="auto-complete-async"
            label="Comissão"
            .async=${!1}
            ?readonly=${this.isMPV||this.isPlenario}
            placeholder="ex: Comissão"
            .items=${this._comissoesAutocomplete}
            .onSearch=${e=>this._filtroComissao(e)}
            .onSelect=${e=>this._selecionarComissao(e)}
            @blur=${this._blurAutoComplete}
            ?disabled=${this.isMPV||this.isPlenario||this.tipoColegiadoPlenario||!(null===(i=this.comissoes)||void 0===i?void 0:i.length)}
          ></autocomplete-async>
        </div>
      </fieldset>
    `}updateTipoColegiado(e){this.isMPV||this.isPlenario||(this._colegiadoApreciador.tipoColegiado=e,this.tipoColegiadoPlenario="Plenário"===this._colegiadoApreciador.tipoColegiado,this.requestUpdate())}_selecionarComissao(e){this._colegiadoApreciador.siglaComissao=e.value}_filtroComissao(e){const t=new RegExp(e,"i");this._comissoesAutocomplete=this._comissoesOptions.filter((e=>e.description.match(t)))}_blurAutoComplete(){var e;(null===(e=this.comissoes)||void 0===e?void 0:e.length)&&setTimeout((()=>{var e;const t=null!==(e=this._autocomplete.value)&&void 0!==e?e:"";this._comissoesOptions.find((e=>t===e.description))||(this._autocomplete.value="",this.comissaoSelecionada="")}),200)}emitirEventoOnChange(e){this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:e}}))}};Mc([Uc("#auto-complete-async")],XE.prototype,"_autocomplete",void 0),Mc([Fc()],XE.prototype,"_comissoesAutocomplete",void 0),Mc([Fc()],XE.prototype,"comissaoSelecionada",void 0),Mc([zc({type:J_})],XE.prototype,"proposicao",null),Mc([zc({type:Array,state:!0})],XE.prototype,"comissoes",null),Mc([zc({type:Object,state:!0})],XE.prototype,"colegiadoApreciador",null),XE=Mc([$c("lexml-destino")],XE);let YE=class extends Jl{constructor(){super(...arguments),this.items=[],this.opened=!1,this.maxSuggestions=10,this._suggestions=[],this._bound={},this._blur=!1,this._mouseEnter=!1}render(){return Rl`
      <style>
        .suggest-container {
          position: relative;
        }

        ul {
          position: absolute;
          display: block;
          list-style-type: none;
          margin: 0;
          padding: 0;
          z-index: 10000;
          border: 1px solid grey;
          background: white;
        }
        li {
          padding: 4px;
          cursor: pointer;
        }
        li.active {
          background: whitesmoke;
        }
        [hidden] {
          display: none;
        }

        .lexml-autocomplete-input {
          width: 100%;
        }

        @media (max-width: 576px) {
          .lexml-autocomplete-label {
            width: calc(100% - 2px);
            display: block;
          }
          .lexml-autocomplete-input {
            width: calc(100% - 2px);
          }
        }
      </style>
      <slot id="dropdown-input">
        <!-- <input id="defaultInput" class="lexml-autocomplete-input" type="text" placeholder="Parlamentar" .value=${this.value||""} /> -->
        <sl-input id="defaultInput" class="lexml-autocomplete-input" type="text" placeholder="" size="small" .value=${this.value||""}></sl-input>
      </slot>
      <div class="suggest-container">
        <ul id="suggestions" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>
          ${this._suggestions.map((e=>Rl`<li @click=${()=>this.autocomplete(e)}>${e}</li>`))}
        </ul>
      </div>
    `}get contentElement(){if(this._inputEl)return this._inputEl;if(!this.hasUpdated)return;const e=this.shadowRoot.getElementById("dropdown-input").assignedElements();return this._inputEl=e.length?e[0]:this.shadowRoot.getElementById("defaultInput"),this._inputEl}get value(){return this.contentElement&&this.contentElement.value}set value(e){this.contentElement?this.contentElement.value=e:this._tempValue=e}firstUpdated(){this._suggestionEl=this.shadowRoot.getElementById("suggestions"),this._suggestionEl.style.width=`${this.contentElement.getBoundingClientRect().width}px`,this._bound.onKeyDown=this._handleKeyDown.bind(this),this._bound.onKeyUp=this._handleKeyUp.bind(this),this._bound.onFocus=this._handleFocus.bind(this),this._bound.onBlur=this._handleBlur.bind(this),this.contentElement.addEventListener("keydown",this._bound.onKeyDown),this.contentElement.addEventListener("keyup",this._bound.onKeyUp),this.contentElement.addEventListener("focus",this._bound.onFocus),this.contentElement.addEventListener("blur",this._bound.onBlur),void 0!==this._tempValue&&(this.contentElement.value=this._tempValue)}disconnectedCallback(){this.contentElement&&(this.contentElement.removeEventListener("keydown",this._bound.onKeyDown),this.contentElement.removeEventListener("keyup",this._bound.onKeyUp),this.contentElement.removeEventListener("focus",this._bound.onFocus),this.contentElement.removeEventListener("blur",this._bound.onBlur))}focus(e){this.contentElement&&this.contentElement.focus(e)}updated(e){e.has("opened")&&this.opened&&this._suggestionEl.childElementCount&&(this._highlightedEl=this._suggestionEl.children[0],this._highlightedEl.classList.add("active"))}open(){"0px"===this._suggestionEl.style.width&&(this._suggestionEl.style.width=`${this.contentElement.getBoundingClientRect().width}px`),this._suggestions.length&&(this.opened=!0)}close(){this.opened=!1,this._highlightedEl=null}suggest(e){this._suggestions=e||[],this._suggestions.length>1||1===this._suggestions.length&&this._suggestions[0]!==this.contentElement.value?this.open():this.close(),this.requestUpdate()}autocomplete(e){this.contentElement.value=e,this.close(),this.dispatchEvent(new CustomEvent("autocomplete",{detail:{value:e},composed:!0,bubbles:!0}))}_highlightPrev(){this._highlightedEl&&this._highlightedEl.previousElementSibling&&(this._highlightedEl.classList.remove("active"),this._highlightedEl=this._highlightedEl.previousElementSibling,this._highlightedEl.classList.add("active"))}_highlightNext(){this._highlightedEl&&this._highlightedEl.nextElementSibling&&(this._highlightedEl.classList.remove("active"),this._highlightedEl=this._highlightedEl.nextElementSibling,this._highlightedEl.classList.add("active"))}_handleKeyDown(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),e.stopPropagation())}_handleKeyUp(e){var t,o;switch(e.key){case"ArrowUp":(null===(t=this._highlightedEl)||void 0===t?void 0:t.previousElementSibling)&&(e.preventDefault(),e.stopPropagation(),this._highlightPrev());break;case"ArrowDown":(null===(o=this._highlightedEl)||void 0===o?void 0:o.nextElementSibling)&&(e.preventDefault(),e.stopPropagation(),this._highlightNext());break;case"Enter":this._highlightedEl&&this._highlightedEl.click();break;default:if(this.items.length){const{value:e}=this.contentElement,t=e.normalize("NFD").replace(Xs,"");this.suggest(this._findSuggetions(t))}}}_findSuggetions(e,t=this.maxSuggestions){if(!e)return[];let o=this._filterStartWith(e,t);return o.length<this.maxSuggestions&&(o=[...o,...this._filterContains(e,this.maxSuggestions-o.length).filter((e=>!o.includes(e)))]),o}_filterStartWith(e,t=this.maxSuggestions){const o=new RegExp("^"+e,"gi");return e&&this.items.filter((e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(o))).slice(0,t)||[]}_filterContains(e,t=this.maxSuggestions){const o=new RegExp(e,"gi");return e&&this.items.filter((e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").match(o))).slice(0,t)||[]}_handleFocus(){this._blur=!1,this._suggestions.length>1&&this.open()}_handleBlur(){this._blur=!0,setTimeout((()=>this.close()),200),this._suggestions=[]}_handleItemMouseEnter(){this._mouseEnter=!0}_handleItemMouseLeave(){this._mouseEnter=!1,this._blur&&setTimeout((()=>this.close()),500)}};Mc([zc({type:Array})],YE.prototype,"items",void 0),Mc([zc({type:Boolean,reflect:!0})],YE.prototype,"opened",void 0),Mc([zc({type:Number})],YE.prototype,"maxSuggestions",void 0),Mc([zc({type:String})],YE.prototype,"value",null),YE=Mc([$c("lexml-autocomplete")],YE);let JE=class extends Jl{constructor(){super(...arguments),this.data="",this.timerOnChange=0}updated(){this.inputData.value=this.data||this.inputData.value||(new Date).toISOString().replace(/T.+$/,""),this.data||this.optionNaoInformarData.checked||(this.optionNaoInformarData.checked=!0)}render(){return Rl`
      <style>
        sl-radio-group::part(base) {
          display: flex;
          flex-direction: row;
          align-items: center;
          gap: 10px;
          background-color: var(--sl-color-gray-100);
          box-shadow: var(--sl-shadow-x-large);
          flex-wrap: wrap;
          padding: 20px 20px;
        }
        sl-radio-group::part(label) {
          background-color: var(--sl-color-gray-200);
          font-weight: bold;
          border-radius: 5px;
          border: 1px solid var(--sl-color-gray-300);
          padding: 2px 5px;
          box-shadow: var(--sl-shadow-small);
        }
        sl-radio-group > sl-radio:first-child {
          display: inline-flex;
          padding: 0 20px 0 0;
        }
        sl-input::part(form-control) {
          display: flex;
          flex-direction: row;
          gap: 10px;
          align-items: center;
          flex-wrap: wrap;
        }
        sl-input::part(base) {
          max-width: 190px;
        }
        @media (max-width: 480px) {
          sl-input::part(base) {
            max-width: 150px;
          }
        }
      </style>
      <div class="lexml-data">
        <sl-radio-group label="Data" fieldset>
          <sl-radio name="data" value="2" ?checked=${!!this.data} @click=${this.setDate}>
            <sl-input id="input-data" label="Data" type="date" ?disabled=${!this.data} @input=${this.setDate}></sl-input>
          </sl-radio>
          <sl-radio name="data" id="no-date" value="1" ?checked=${!this.data} @click=${this.resetDate}>Não informar</sl-radio>
        </sl-radio-group>
      </div>
    `}getCurrentDate(){return(new Date).toLocaleDateString().split("/").reverse().join("-")}resetDate(){const e=this.data;this.data="",e!==this.data&&this.agendarEmissaoEventoOnChange()}setDate(){if(this.inputData){const e=this.data;this.data=this.inputData.value,e!==this.data&&this.agendarEmissaoEventoOnChange()}}agendarEmissaoEventoOnChange(){clearTimeout(this.timerOnChange),this.timerOnChange=window.setTimeout((()=>this.emitirEventoOnChange()),1e3)}emitirEventoOnChange(){this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:"data"}}))}};JE.styles=nl`
    .lexml-data {
      display: block;
      font-size: 1em;
      max-width: 700px;
    }
  `,Mc([Uc("#input-data")],JE.prototype,"inputData",void 0),Mc([Uc("#no-date")],JE.prototype,"optionNaoInformarData",void 0),Mc([zc({type:String})],JE.prototype,"data",void 0),JE=Mc([$c("lexml-data")],JE);class ZE{constructor(e,t,o){this.nome="Anônimo",this.nome=e||"Anônimo",this.id=t,this.sigla=o}}var eO=ci`
  ${Zi}

  :host {
    display: inline-flex;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: var(--sl-font-size-x-small);
    font-weight: var(--sl-font-weight-semibold);
    letter-spacing: var(--sl-letter-spacing-normal);
    line-height: 1;
    border-radius: var(--sl-border-radius-small);
    border: solid 1px var(--sl-color-neutral-0);
    white-space: nowrap;
    padding: 3px 6px;
    user-select: none;
    cursor: inherit;
  }

  /* Variant modifiers */
  .badge--primary {
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--success {
    background-color: var(--sl-color-success-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--neutral {
    background-color: var(--sl-color-neutral-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--warning {
    background-color: var(--sl-color-warning-600);
    color: var(--sl-color-neutral-0);
  }

  .badge--danger {
    background-color: var(--sl-color-danger-600);
    color: var(--sl-color-neutral-0);
  }

  /* Pill modifier */
  .badge--pill {
    border-radius: var(--sl-border-radius-pill);
  }

  /* Pulse modifier */
  .badge--pulse {
    animation: pulse 1.5s infinite;
  }

  .badge--pulse.badge--primary {
    --pulse-color: var(--sl-color-primary-600);
  }

  .badge--pulse.badge--success {
    --pulse-color: var(--sl-color-success-600);
  }

  .badge--pulse.badge--neutral {
    --pulse-color: var(--sl-color-neutral-600);
  }

  .badge--pulse.badge--warning {
    --pulse-color: var(--sl-color-warning-600);
  }

  .badge--pulse.badge--danger {
    --pulse-color: var(--sl-color-danger-600);
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 var(--pulse-color);
    }
    70% {
      box-shadow: 0 0 0 0.5rem transparent;
    }
    100% {
      box-shadow: 0 0 0 0 transparent;
    }
  }
`,tO=class extends Yi{constructor(){super(...arguments),this.variant="primary",this.pill=!1,this.pulse=!1}render(){return Di`
      <span
        part="base"
        class=${sa({badge:!0,"badge--primary":"primary"===this.variant,"badge--success":"success"===this.variant,"badge--neutral":"neutral"===this.variant,"badge--warning":"warning"===this.variant,"badge--danger":"danger"===this.variant,"badge--pill":this.pill,"badge--pulse":this.pulse})}
        role="status"
      >
        <slot></slot>
      </span>
    `}};tO.styles=eO,ya([wa({reflect:!0})],tO.prototype,"variant",2),ya([wa({type:Boolean,reflect:!0})],tO.prototype,"pill",2),ya([wa({type:Boolean,reflect:!0})],tO.prototype,"pulse",2),tO=ya([xa("sl-badge")],tO);var oO=ci`
  ${Zi}

  :host {
    --track-color: var(--sl-color-neutral-200);
    --indicator-color: var(--sl-color-primary-600);

    display: block;
  }

  .tab-group {
    display: flex;
    border: solid 1px transparent;
    border-radius: 0;
  }

  .tab-group .tab-group__tabs {
    display: flex;
    position: relative;
  }

  .tab-group .tab-group__indicator {
    position: absolute;
    left: 0;
    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) width ease;
  }

  .tab-group--has-scroll-controls .tab-group__nav-container {
    position: relative;
    padding: 0 var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    bottom: 0;
    width: var(--sl-spacing-x-large);
  }

  .tab-group__scroll-button--start {
    left: 0;
  }

  .tab-group__scroll-button--end {
    right: 0;
  }

  /*
   * Top
   */

  .tab-group--top {
    flex-direction: column;
  }

  .tab-group--top .tab-group__nav-container {
    order: 1;
  }

  .tab-group--top .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--top .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--top .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-bottom: solid 2px var(--track-color);
  }

  .tab-group--top .tab-group__indicator {
    bottom: -2px;
    border-bottom: solid 2px var(--indicator-color);
  }

  .tab-group--top .tab-group__body {
    order: 2;
  }

  .tab-group--top ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Bottom
   */

  .tab-group--bottom {
    flex-direction: column;
  }

  .tab-group--bottom .tab-group__nav-container {
    order: 2;
  }

  .tab-group--bottom .tab-group__nav {
    display: flex;
    overflow-x: auto;

    /* Hide scrollbar in Firefox */
    scrollbar-width: none;
  }

  /* Hide scrollbar in Chrome/Safari */
  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {
    width: 0;
    height: 0;
  }

  .tab-group--bottom .tab-group__tabs {
    flex: 1 1 auto;
    position: relative;
    flex-direction: row;
    border-top: solid 2px var(--track-color);
  }

  .tab-group--bottom .tab-group__indicator {
    top: calc(-1 * 2px);
    border-top: solid 2px var(--indicator-color);
  }

  .tab-group--bottom .tab-group__body {
    order: 1;
  }

  .tab-group--bottom ::slotted(sl-tab-panel) {
    --padding: var(--sl-spacing-medium) 0;
  }

  /*
   * Start
   */

  .tab-group--start {
    flex-direction: row;
  }

  .tab-group--start .tab-group__nav-container {
    order: 1;
  }

  .tab-group--start .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-right: solid 2px var(--track-color);
  }

  .tab-group--start .tab-group__indicator {
    right: calc(-1 * 2px);
    border-right: solid 2px var(--indicator-color);
  }

  .tab-group--start .tab-group__body {
    flex: 1 1 auto;
    order: 2;
  }

  .tab-group--start ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }

  /*
   * End
   */

  .tab-group--end {
    flex-direction: row;
  }

  .tab-group--end .tab-group__nav-container {
    order: 2;
  }

  .tab-group--end .tab-group__tabs {
    flex: 0 0 auto;
    flex-direction: column;
    border-left: solid 2px var(--track-color);
  }

  .tab-group--end .tab-group__indicator {
    left: calc(-1 * 2px);
    border-left: solid 2px var(--indicator-color);
  }

  .tab-group--end .tab-group__body {
    flex: 1 1 auto;
    order: 1;
  }

  .tab-group--end ::slotted(sl-tab-panel) {
    --padding: 0 var(--sl-spacing-medium);
  }
`,iO=class extends Yi{constructor(){super(...arguments),this.localize=new ar(this),this.tabs=[],this.panels=[],this.hasScrollControls=!1,this.placement="top",this.activation="auto",this.noScrollControls=!1}connectedCallback(){super.connectedCallback(),this.resizeObserver=new ResizeObserver((()=>{this.preventIndicatorTransition(),this.repositionIndicator(),this.updateScrollControls()})),this.mutationObserver=new MutationObserver((e=>{e.some((e=>!["aria-labelledby","aria-controls"].includes(e.attributeName)))&&setTimeout((()=>this.setAriaLabels())),e.some((e=>"disabled"===e.attributeName))&&this.syncTabsAndPanels()})),this.updateComplete.then((()=>{this.syncTabsAndPanels(),this.mutationObserver.observe(this,{attributes:!0,childList:!0,subtree:!0}),this.resizeObserver.observe(this.nav);new IntersectionObserver(((e,t)=>{var o;e[0].intersectionRatio>0&&(this.setAriaLabels(),this.setActiveTab(null!=(o=this.getActiveTab())?o:this.tabs[0],{emitEvents:!1}),t.unobserve(e[0].target))})).observe(this.tabGroup)}))}disconnectedCallback(){this.mutationObserver.disconnect(),this.resizeObserver.unobserve(this.nav)}show(e){const t=this.tabs.find((t=>t.panel===e));t&&this.setActiveTab(t,{scrollBehavior:"smooth"})}getAllTabs(e=!1){return[...this.shadowRoot.querySelector('slot[name="nav"]').assignedElements()].filter((t=>e?"sl-tab"===t.tagName.toLowerCase():"sl-tab"===t.tagName.toLowerCase()&&!t.disabled))}getAllPanels(){return[...this.body.querySelector("slot").assignedElements()].filter((e=>"sl-tab-panel"===e.tagName.toLowerCase()))}getActiveTab(){return this.tabs.find((e=>e.active))}handleClick(e){const t=e.target.closest("sl-tab");(null==t?void 0:t.closest("sl-tab-group"))===this&&null!==t&&this.setActiveTab(t,{scrollBehavior:"smooth"})}handleKeyDown(e){const t=e.target.closest("sl-tab");if((null==t?void 0:t.closest("sl-tab-group"))===this&&(["Enter"," "].includes(e.key)&&null!==t&&(this.setActiveTab(t,{scrollBehavior:"smooth"}),e.preventDefault()),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key))){const t=document.activeElement;if("sl-tab"===(null==t?void 0:t.tagName.toLowerCase())){let o=this.tabs.indexOf(t);"Home"===e.key?o=0:"End"===e.key?o=this.tabs.length-1:["top","bottom"].includes(this.placement)&&"ArrowLeft"===e.key||["start","end"].includes(this.placement)&&"ArrowUp"===e.key?o--:(["top","bottom"].includes(this.placement)&&"ArrowRight"===e.key||["start","end"].includes(this.placement)&&"ArrowDown"===e.key)&&o++,o<0&&(o=this.tabs.length-1),o>this.tabs.length-1&&(o=0),this.tabs[o].focus({preventScroll:!0}),"auto"===this.activation&&this.setActiveTab(this.tabs[o],{scrollBehavior:"smooth"}),["top","bottom"].includes(this.placement)&&Tr(this.tabs[o],this.nav,"horizontal"),e.preventDefault()}}}handleScrollToStart(){this.nav.scroll({left:this.nav.scrollLeft-this.nav.clientWidth,behavior:"smooth"})}handleScrollToEnd(){this.nav.scroll({left:this.nav.scrollLeft+this.nav.clientWidth,behavior:"smooth"})}updateScrollControls(){this.noScrollControls?this.hasScrollControls=!1:this.hasScrollControls=["top","bottom"].includes(this.placement)&&this.nav.scrollWidth>this.nav.clientWidth}setActiveTab(e,t){if(t=va({emitEvents:!0,scrollBehavior:"auto"},t),e!==this.activeTab&&!e.disabled){const o=this.activeTab;this.activeTab=e,this.tabs.map((e=>e.active=e===this.activeTab)),this.panels.map((e=>{var t;return e.active=e.name===(null==(t=this.activeTab)?void 0:t.panel)})),this.syncIndicator(),["top","bottom"].includes(this.placement)&&Tr(this.activeTab,this.nav,"horizontal",t.scrollBehavior),t.emitEvents&&(o&&Qa(this,"sl-tab-hide",{detail:{name:o.panel}}),Qa(this,"sl-tab-show",{detail:{name:this.activeTab.panel}}))}}setAriaLabels(){this.tabs.forEach((e=>{const t=this.panels.find((t=>t.name===e.panel));t&&(e.setAttribute("aria-controls",t.getAttribute("id")),t.setAttribute("aria-labelledby",e.getAttribute("id")))}))}syncIndicator(){this.getActiveTab()?(this.indicator.style.display="block",this.repositionIndicator()):this.indicator.style.display="none"}repositionIndicator(){const e=this.getActiveTab();if(!e)return;const t=e.clientWidth,o=e.clientHeight,i=this.getAllTabs(!0),a=i.slice(0,i.indexOf(e)).reduce(((e,t)=>({left:e.left+t.clientWidth,top:e.top+t.clientHeight})),{left:0,top:0});switch(this.placement){case"top":case"bottom":this.indicator.style.width=`${t}px`,this.indicator.style.height="auto",this.indicator.style.transform=`translateX(${a.left}px)`;break;case"start":case"end":this.indicator.style.width="auto",this.indicator.style.height=`${o}px`,this.indicator.style.transform=`translateY(${a.top}px)`}}preventIndicatorTransition(){const e=this.indicator.style.transition;this.indicator.style.transition="none",requestAnimationFrame((()=>{this.indicator.style.transition=e}))}syncTabsAndPanels(){this.tabs=this.getAllTabs(),this.panels=this.getAllPanels(),this.syncIndicator()}render(){return Di`
      <div
        part="base"
        class=${sa({"tab-group":!0,"tab-group--top":"top"===this.placement,"tab-group--bottom":"bottom"===this.placement,"tab-group--start":"start"===this.placement,"tab-group--end":"end"===this.placement,"tab-group--has-scroll-controls":this.hasScrollControls})}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
      >
        <div class="tab-group__nav-container" part="nav">
          ${this.hasScrollControls?Di`
                <sl-icon-button
                  part="scroll-button scroll-button--start"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--start"
                  name="chevron-left"
                  library="system"
                  label=${this.localize.term("scrollToStart")}
                  @click=${this.handleScrollToStart}
                ></sl-icon-button>
              `:""}

          <div class="tab-group__nav">
            <div part="tabs" class="tab-group__tabs" role="tablist">
              <div part="active-tab-indicator" class="tab-group__indicator"></div>
              <slot name="nav" @slotchange=${this.syncTabsAndPanels}></slot>
            </div>
          </div>

          ${this.hasScrollControls?Di`
                <sl-icon-button
                  part="scroll-button scroll-button--end"
                  exportparts="base:scroll-button__base"
                  class="tab-group__scroll-button tab-group__scroll-button--end"
                  name="chevron-right"
                  library="system"
                  label=${this.localize.term("scrollToEnd")}
                  @click=${this.handleScrollToEnd}
                ></sl-icon-button>
              `:""}
        </div>

        <div part="body" class="tab-group__body">
          <slot @slotchange=${this.syncTabsAndPanels}></slot>
        </div>
      </div>
    `}};iO.styles=oO,ya([Oa(".tab-group")],iO.prototype,"tabGroup",2),ya([Oa(".tab-group__body")],iO.prototype,"body",2),ya([Oa(".tab-group__nav")],iO.prototype,"nav",2),ya([Oa(".tab-group__indicator")],iO.prototype,"indicator",2),ya([_a()],iO.prototype,"hasScrollControls",2),ya([wa()],iO.prototype,"placement",2),ya([wa()],iO.prototype,"activation",2),ya([wa({attribute:"no-scroll-controls",type:Boolean})],iO.prototype,"noScrollControls",2),ya([wa()],iO.prototype,"lang",2),ya([Ga("noScrollControls",{waitUntilFirstUpdate:!0})],iO.prototype,"updateScrollControls",1),ya([Ga("placement",{waitUntilFirstUpdate:!0})],iO.prototype,"syncIndicator",1),iO=ya([xa("sl-tab-group")],iO);var aO=ci`
  ${Zi}

  :host {
    --padding: 0;

    display: block;
  }

  .tab-panel {
    border: solid 1px transparent;
    padding: var(--padding);
  }
`,rO=0;function nO(){return++rO}var sO=class extends Yi{constructor(){super(...arguments),this.attrId=nO(),this.componentId=`sl-tab-panel-${this.attrId}`,this.name="",this.active=!1}connectedCallback(){super.connectedCallback(),this.id=this.id.length>0?this.id:this.componentId}render(){return this.style.display=this.active?"block":"none",Di`
      <div part="base" class="tab-panel" role="tabpanel" aria-hidden=${this.active?"false":"true"}>
        <slot></slot>
      </div>
    `}};sO.styles=aO,ya([wa({reflect:!0})],sO.prototype,"name",2),ya([wa({type:Boolean,reflect:!0})],sO.prototype,"active",2),sO=ya([xa("sl-tab-panel")],sO);var lO=ci`
  ${Zi}

  :host {
    display: inline-block;
  }

  .tab {
    display: inline-flex;
    align-items: center;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    border-radius: var(--sl-border-radius-medium);
    color: var(--sl-color-neutral-600);
    padding: var(--sl-spacing-medium) var(--sl-spacing-large);
    white-space: nowrap;
    user-select: none;
    cursor: pointer;
    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;
  }

  .tab:hover:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab:focus {
    outline: none;
  }

  .tab${Ra}:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
    box-shadow: inset var(--sl-focus-ring);
  }

  .tab.tab--active:not(.tab--disabled) {
    color: var(--sl-color-primary-600);
  }

  .tab.tab--closable {
    padding-right: var(--sl-spacing-small);
  }

  .tab.tab--disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tab__close-button {
    font-size: var(--sl-font-size-large);
    margin-left: var(--sl-spacing-2x-small);
  }

  .tab__close-button::part(base) {
    padding: var(--sl-spacing-3x-small);
  }
`,cO=class extends Yi{constructor(){super(...arguments),this.localize=new ar(this),this.attrId=nO(),this.componentId=`sl-tab-${this.attrId}`,this.panel="",this.active=!1,this.closable=!1,this.disabled=!1}focus(e){this.tab.focus(e)}blur(){this.tab.blur()}handleCloseClick(){Qa(this,"sl-close")}render(){return this.id=this.id.length>0?this.id:this.componentId,Di`
      <div
        part="base"
        class=${sa({tab:!0,"tab--active":this.active,"tab--closable":this.closable,"tab--disabled":this.disabled})}
        role="tab"
        aria-disabled=${this.disabled?"true":"false"}
        aria-selected=${this.active?"true":"false"}
        tabindex=${this.disabled||!this.active?"-1":"0"}
      >
        <slot></slot>
        ${this.closable?Di`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                name="x"
                library="system"
                label=${this.localize.term("close")}
                class="tab__close-button"
                @click=${this.handleCloseClick}
                tabindex="-1"
              ></sl-icon-button>
            `:""}
      </div>
    `}};cO.styles=lO,ya([Oa(".tab")],cO.prototype,"tab",2),ya([wa({reflect:!0})],cO.prototype,"panel",2),ya([wa({type:Boolean,reflect:!0})],cO.prototype,"active",2),ya([wa({type:Boolean})],cO.prototype,"closable",2),ya([wa({type:Boolean,reflect:!0})],cO.prototype,"disabled",2),ya([wa()],cO.prototype,"lang",2),cO=ya([xa("sl-tab")],cO);const uO=Rl`
  <style>
    :root {
      --elemento-padding-factor: 20;
      --eta-font-serif: 'Times New Roman', Times, serif;
      --eta-font-sans: var(--sl-font-sans);
    }

    #lx-eta-box {
      /* display: grid;
      grid-template-columns: 1fr;
      grid-template-rows: 42px calc(100% - 30px); */
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* #lx-eta-box .ql-toolbar.ql-snow {
      border: 1px solid #ccc;
      box-sizing: border-box;
      padding: 3px 10px 3px 10px;
    } */

    .ql-toolbar.ql-snow {
      border: 1px solid #ccc;
      box-sizing: border-box;
      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;
      /* padding: 8px; */
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      min-height: 55px;
    }
    #lx-eta-box .ql-snow.ql-toolbar button,
    .ql-snow .ql-toolbar button {
      /* height: 20px !important;
      padding: 0px !important;
      width: 24px !important;
      margin: 0px !important; */
      background: none;
      border: none;
      cursor: pointer;
      display: inline-block;
      float: left;
      height: 24px;
      padding: 3px 5px;
      width: 28px;
    }

    #lx-eta-barra-ferramenta button:focus {
      outline: 0;
      border: 0px solid #f1f1f1;
      -webkit-box-shadow: 0px;
      box-shadow: none;
    }

    #lx-eta-barra-ferramenta .lx-eta-ql-button {
      font-size: 1.1em;
      color: #444444;
    }

    .lx-eta-rebate-180-graus {
      -moz-transform: scaleX(-1);
      -o-transform: scaleX(-1);
      -webkit-transform: scaleX(-1);
      transform: scaleX(-1);
    }

    #lx-eta-editor {
      overflow-y: hidden;
    }

    #lx-eta-editor .ql-editor {
      /* font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
        'Noto Color Emoji'; */
      font-family: var(--eta-font-serif);
      font-size: 18px;
      line-height: 1.42;
      color: #646260;
      text-transform: none !important;
      padding: 0 10px 0 8px;
      min-height: 250px;
      overflow-x: hidden;
    }

    #lx-eta-editor .ql-editor *:focus {
      outline: 0;
      border: 0px solid #f1f1f1;
      -webkit-box-shadow: 0px;
      box-shadow: none;
    }

    #lx-eta-editor .ql-editor label:before {
      /* content: attr(data-rotulo) ' '; */
    }

    #toast-msg {
      padding: 1em;
      font-size: 1.1em;
    }

    .lx-eta-dropbtn {
      background-color: transparent;
      color: #444444;
      width: 26px;
      font-weight: bold;
      vertical-align: middle;
      border: none;
      cursor: pointer;
      text-align: center;
    }

    .container__menu sl-button::part(base) {
      position: absolute;
      margin: -13px 0 0 -15px;
      background-color: #e1e1e1;
      line-height: 20px;
      height: 23px;
      color: black;
      font-weight: bold;
      font-size: 15px;
    }

    .container__menu sl-menu-item::part(suffix) {
      font-size: 14px;
      padding-left: 20px;
    }

    .container__menu sl-menu-item:hover .lx-eta-dropbtn {
      background-color: #e1e1e1;
    }

    .lx-eta-btn-desfazer {
      margin-left: 10px;
    }

    .icon-undo-redo {
      width: 19px;
      height: 16px !important;
    }

    .icon-undo-redo:hover {
      fill: #0066cc;
    }

    .icon-negrito {
      fill: #444;
    }

    .icon-negrito:hover {
      fill: #0066cc;
    }

    .icon-sublinhado {
      fill: #444;
    }

    .icon-sublinhado:hover {
      fill: #0066cc;
    }

    .lx-eta-dropdown-content-right {
      right: 0;
    }

    .ql-snow .ql-hidden {
      display: none;
    }

    .ql-snow .ql-tooltip::before {
      content: 'Acesse a norma:';
    }

    .ql-snow .ql-tooltip a.ql-action::after {
      display: none;
    }

    .ql-snow .ql-tooltip a.ql-remove::before {
      display: none;
    }

    .ql-snow .ql-tooltip a.ql-preview {
      max-width: 300px;
    }

    .btn--artigoOndeCouber {
    }

    .container__linha {
      display: flex;
      width: 100%;
    }

    .container__linha--reverse {
      flex-direction: row-reverse;
    }

    .container__texto {
      flex: 1;
      white-space: pre-wrap;
    }

    .container_elemento--omissis .container__texto {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
    }

    .container_elemento--omissis .container__texto--mensagem {
      flex: 1;
      display: inline-block;
    }

    .container_elemento--omissis .texto__rotulo {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      flex: none;
      order: 0;
      flex-grow: 0;
    }

    .container_elemento--omissis .texto__dispositivo {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      padding: 0px;
      flex-grow: 1;
    }

    .container_elemento--omissis .texto__omissis {
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
      flex-grow: 1;
      width: 50px;
      white-space: nowrap;
    }

    .elemento-tipo-capitulo .texto__dispositivo,
    .elemento-tipo-titulo .texto__dispositivo,
    .elemento-tipo-livro .texto__dispositivo,
    .elemento-tipo-parte .texto__dispositivo {
      text-transform: uppercase;
    }

    .elemento-tipo-secao .texto__dispositivo,
    .elemento-tipo-subsecao .texto__dispositivo {
      font-weight: bold;
    }

    .container__menu {
      width: 30px;
      vertical-align: top;
      text-align: center;
    }

    .container__elemento--padrao {
      width: 100%;
      min-height: 26px;
      border: 3px solid #ffffff;
      line-height: 1.42;
      margin: 0;
      padding: 0 5px 0 0;
    }

    .container__elemento--articulacao {
      width: 100%;
      min-height: 1px;
      line-height: 0.42;
      margin: 1px;
    }

    .agrupador {
      text-align: center;
    }

    label[pode-informar-numeracao='true'] {
      cursor: pointer;
      /* border-bottom: 1px dashed; */
      -webkit-box-shadow: 0px -1px 0px green inset;
      -moz-box-shadow: 0px -1px 0px green inset;
      box-shadow: 0px -1px 0px green inset;
    }

    /* [existenanormaalterada] label:after, */
    .existencia {
      font-family: var(--sl-font-sans);
      position: relative;
      left: 5px;
      top: -1px;
      margin-right: 5px;
      border: 1px solid green;
      padding: 0 4px;
      font-weight: normal;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      font-size: 12px;
    }

    .existencia {
      margin-left: -10px;
      margin-right: 15px;
    }

    .existencia:hover {
      cursor: pointer;
    }

    /* [existenanormaalterada='true'] label:after {
      content: 'Existente';
    }

    [existenanormaalterada='false'] label:after {
      content: 'Novo';
    } */

    .texto__rotulo {
      color: black;
      font-weight: 600;
    }

    .texto__rotulo--padrao {
      display: inline-block;
      padding-right: 10px; /* Manter padding em vez de margin para evitar problema de layout ao apagar todo o texto do dispositivo.
        Fica um sublinhado a mais, mas é melhor que a alternativa.
      */
    }

    .texto__rotulo--omissis,
    .tipo-omissis {
      font-family: var(--sl-font-sans);
      box-shadow: none;
    }

    .texto__rotulo--omissis:before,
    .tipo-omissis {
      position: relative;
      left: 0;
      top: -1px;
      margin-right: 5px;
      border: 1px solid green;
      padding: 0 4px;
      font-weight: normal;
      -webkit-border-radius: 4px;
      -moz-border-radius: 4px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
      display: none;
    }

    .agrupador .blot-tipo-omissis {
      display: block;
    }

    /* .container__texto[tipo-omissis='inciso-caput'] .texto__rotulo--omissis:before {
      content: ' Incisos omitidos ';
    }

    .container__texto[tipo-omissis='inciso-paragrafo'] .texto__rotulo--omissis:before {
      content: ' Incisos omitidos ';
    }

    .container__texto[tipo-omissis='paragrafo'] .texto__rotulo--omissis:before {
      content: ' Parágrafos omitidos ';
    }

    .container__texto[tipo-omissis='alinea'] .texto__rotulo--omissis:before {
      content: ' Alíneas omitidas ';
    }

    .container__texto[tipo-omissis='item'] .texto__rotulo--omissis:before {
      content: ' Itens omitidos ';
    } */

    .Omissis {
      word-break: break-all;
      word-break: break-word;
      -webkit-hyphens: auto;
      -moz-hyphens: auto;
      -ms-hyphens: auto;
      hyphens: auto;
    }

    .agrupador .existencia {
      margin-left: 0;
      margin-right: 0;
    }

    .dispositivo--adicionado {
      color: green;
    }

    .dispositivo--modificado {
      color: blue;
    }

    .dispositivo--suprimido {
      color: red;
    }

    .dispositivo--suprimido .texto__dispositivo {
      text-decoration: line-through;
    }

    /* .texto--suprimido {
      text-decoration: line-through;
    } */

    .ementa {
      margin-bottom: 30px;
    }

    .ementa .container__texto {
      margin-left: 35%;
    }

    .texto__rotulo--ementa {
      display: none;
    }

    .container__elemento--ativo {
      border: 3px solid #24d421;
      border-radius: 4px;
    }

    .mensagem {
      font-family: var(--sl-font-sans);
      font-size: 0.8em;
      font-weight: normal;
      border: 1px solid;
      padding: 4px 10px;
      margin: 2px;
      display: inline-block;
      border-radius: 2px;
    }

    .mensagem--success {
      color: #155724;
      background-color: #d4edda;
      border-color: #c3e6cb;
    }

    .mensagem--info {
      color: #0c5460;
      background-color: #d1ecf1;
      border-color: #bee5eb;
    }

    .mensagem--warning {
      color: #856404;
      background-color: #fff3cd;
      border-color: #ffeeba;
    }

    .mensagem--danger {
      color: #721c24;
      background-color: #f8d7da;
      border-color: #f5c6cb;
    }
    .mensagem__fix {
      color: blue;
      text-decoration: underline;
      cursor: pointer;
    }

    #lx-eta-buffer {
      display: none;
      height: 0px;
    }

    /* [fecha-aspas]::after {
      content: '” (' attr(nota-alteracao) ')';
      font-weight: bold;
    }

    [abre-aspas]::before {
      content: '“';
      font-weight: bold;
    } */

    .nota-alteracao,
    .abre-aspas,
    .fecha-aspas {
      font-weight: bold;
    }

    .nota-alteracao-editavel {
      text-decoration: underline;
      cursor: pointer;
    }

    .texto__dispositivo {
      display: inline;
      /* background-color: lightblue; */
    }

    @-moz-document url-prefix() {
      .agrupador .texto__dispositivo {
        display: inline-block;
        min-height: 1rem;
      }
    }

    .blot-existencia br,
    .blot-tipo-omissis br,
    .agrupador.dispositivo-alteracao p[fecha-aspas] br,
    .h-artigo br {
      display: inline; /* faz o BR não pular linha em texto__dispositivo vazio */
      content: ''; /* descola cursor do rótulo e remove quebra de linha quando "(NR) */
    }

    .mobile-buttons {
      float: right;
      /* margin-right: 30px; */
      width: auto !important;
      display: none !important;
    }

    .mobile-button {
      margin-right: 2px;
      width: auto !important;
    }

    .mobile-button sl-icon {
      font-size: 18px;
    }

    .mobile-button span {
      vertical-align: 4px;
    }

    @media (max-width: 768px) {
      .mobile-buttons {
        display: inline-block !important;
      }
      #chk-em-revisao span {
        display: none;
      }
      .button-navegacao-marca {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .mobile-button span {
        display: none;
      }
      .mobile-button:last-child {
        display: none !important;
      }
    }

    .revisao-ativa {
      background-color: #add8e6 !important;
    }

    [em-revisao='true'] {
      background-color: var(--sl-color-blue-100);
    }

    [excluido='true'] .texto__dispositivo {
      text-decoration: line-through;
      /* background-color: #d3d3d3; */
    }

    .blot__revisao {
      padding: 3px 7px;
      border: 1px solid white;
      border-radius: 1rem;
      background-color: rgb(217, 119, 6);
      color: white;
      cursor: pointer;
      position: relative;
      top: -1px;
    }

    .blot__revisao_aceitar {
      padding: 5px;
      border: 1px solid black;
      border-radius: 1rem;
      background-color: rgb(217, 119, 6);
      color: white;
      cursor: pointer;
      position: relative;
      width: 1.3rem;
      height: 1.3rem;
      top: -1px;
      background: url('assets/icons/check-lg.svg') no-repeat center, white;
      background-size: 1rem;
    }

    .blot__revisao_aceitar:hover {
      filter: invert(100%);
    }

    .blot__opcoes_diff {
      padding: 5px;
      border: 1px solid black;
      border-radius: 1rem;
      background-color: rgb(217, 119, 6);
      color: white;
      cursor: pointer;
      position: relative;
      width: 1.3rem;
      height: 1.3rem;
      top: -1px;
      background: url('assets/icons/plus-minus.svg') no-repeat center, white;
      background-size: 0.8rem;
      margin-right: 1.2px;
    }

    .blot__opcoes_diff:hover {
      filter: invert(100%);
    }

    .blot__revisao_recusar {
      padding: 5px;
      border: 1px solid black;
      border-radius: 1rem;
      background-color: rgb(217, 119, 6);
      color: white;
      cursor: pointer;
      position: relative;
      width: 1.3rem;
      height: 1.3rem;
      top: -1px;
      background: url('assets/icons/x.svg') no-repeat center, white;
      background-size: 1rem;
    }

    .blot__revisao_recusar:hover {
      filter: invert(100%);
    }

    .blot__revisao_aceitar:focus,
    .blot__opcoes_diff:focus .blot__revisao_recusar:focus {
      outline: 1px solid #000;
      border: 1px solid #000;
    }

    #chk-em-revisao {
      border: 1px solid #ccc !important;
      padding: 5px 10px !important;
      border-radius: 20px !important;
      margin-left: auto;
      margin-right: 5px;
      font-weight: bold;
      background-color: #eee;
    }
    #chk-em-revisao[checked] {
      background-color: var(--sl-color-blue-100);
    }

    .container__revisao {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 0.1rem;
      @media (max-width: 768px) {
        flex-direction: column;
      }
    }

    .container__opcoes {
      display: flex;
      flex-direction: row;
      align-items: center;
      margin-left: 0.1rem;
      gap: 0.1rem;
      @media (max-width: 768px) {
        flex-direction: column;
      }
    }

    @media (max-width: 480px) {
      .lx-eta-btn-desfazer {
        margin-left: 0px;
      }
    }

    @media (max-width: 398px) {
      .btn-dicas {
        display: none !important;
      }
    }
  </style>
`;class dO{constructor(){this.modo="Emenda",this.ementa="",this.motivo=""}}let pO=class extends(Gc(iA)(Jl)){constructor(){super(),this.existeObserverEmenda=!1,this.totalAlertas=0,this.exibirAjuda=!0,this.parlamentares=[],this.comissoes=[],this.lexmlEmendaConfig=new Qc,this.modo=up.EMENDA,this.urn="",this.ementa="",this.motivo="",this.parlamentaresCarregados=!1,this.comissoesCarregadas=!1,this.notasRodape=[],this.autoria=new uE,this.desativarMarcaRevisao=()=>{if(iA.getState().elementoReducer.emRevisao){const e=og(iA.getState().elementoReducer.revisoes);0===e&&iA.dispatch(Iv.execute(e))}},this.MOBILE_WIDTH=768,this.splitPanelPosition=67,this.sizeMode="",this.handleResize=()=>{this.updateLayoutSplitPanel(),this.ajustarAltura()},this.addEventListener("nota-rodape:change",this.onChangeNotasRodape),this.addEventListener("nota-rodape:remove",this.onChangeNotasRodape)}async getParlamentares(){try{const e=await fetch(this.lexmlEmendaConfig.urlConsultaParlamentares);return(await e.json()).map((e=>({identificacao:e.id+"",nome:e.nome,sexo:e.sexo,siglaPartido:e.siglaPartido,siglaUF:e.siglaUF,siglaCasaLegislativa:e.siglaCasa})))}catch(e){console.log("Erro inesperado ao carregar lista de parlamentares"),console.log(e)}finally{this.parlamentaresCarregados=!0}return Promise.resolve([])}async getComissoes(){try{if(!this.lexmlEmendaConfig.urlComissoes)return Promise.resolve(void 0);const e=await fetch(this.lexmlEmendaConfig.urlComissoes);return(await e.json()).map((e=>({siglaCasaLegislativa:e.siglaCasaLegislativa,sigla:e.sigla,nome:e.nome})))}catch(e){console.log("Erro inesperado ao carregar lista de comissões"),console.log(e)}finally{this.comissoesCarregadas=!0}return Promise.resolve([])}atualizaListaParlamentares(){this.getParlamentares().then((e=>this.parlamentares=e))}atualizaListaComissoes(){this.getComissoes().then((e=>this.comissoes=e))}montarColegiadoApreciador(e,t,o){return"MPV"===e.toUpperCase()?{siglaCasaLegislativa:"CN",tipoColegiado:"Comissão",siglaComissao:`CMMPV ${t}/${o}`}:{siglaCasaLegislativa:"SF",tipoColegiado:"Plenário"}}montarLocalFromColegiadoApreciador(e){return"Comissão"===e.tipoColegiado?"Sala da comissão":"Sala das sessões"}montarEmendaBasica(){const e=new W_;return e.modoEdicao=this.modo,e.componentes[0].urn=this.urn,e.proposicao=this.montarProposicaoPorUrn(this.urn,this.ementa),e}montarProposicaoPorUrn(e,t){return e?{urn:e,sigla:rm(e),numero:sm(e),ano:dm(e),ementa:t,identificacaoTexto:"Texto inicial"}:new J_}getEmenda(){if(!this.urn)return new W_;const e=this.montarEmendaBasica(),t=e.proposicao.numero.replace(/^0+/,"");this.isEmendaSubstituicaoTermo()?(e.substituicaoTermo=this._substituicaoTermo.getSubstituicaoTermo(),e.comandoEmenda=this._substituicaoTermo.getComandoEmenda(this.urn),e.comandoEmendaTextoLivre.texto=""):this.isEmendaTextoLivre()?(e.comandoEmendaTextoLivre.motivo=this.motivo,e.comandoEmendaTextoLivre.texto=this._lexmlEmendaTextoRico.texto,e.anexos=this._lexmlEmendaTextoRico.anexos,e.comandoEmendaTextoLivre.textoAntesRevisao=this._lexmlEmendaTextoRico.textoAntesRevisao):(e.comandoEmendaTextoLivre.texto="",e.componentes[0].dispositivos=this._lexmlEta.getDispositivosEmenda(),e.comandoEmenda=this._lexmlEta.getComandoEmenda()),e.justificativa=this._lexmlJustificativa.texto,e.notasRodape=this._lexmlJustificativa.notasRodape,e.autoria=this._lexmlAutoria.getAutoriaAtualizada(),e.data=this._lexmlData.data||void 0,e.opcoesImpressao=this._lexmlOpcoesImpressao.opcoesImpressao,e.colegiadoApreciador=this._lexmlDestino.colegiadoApreciador,e.epigrafe=new eE,e.epigrafe.texto="EMENDA Nº         ","Plenário"!==e.colegiadoApreciador.tipoColegiado&&e.colegiadoApreciador.siglaComissao&&(e.epigrafe.texto+=`- ${e.colegiadoApreciador.siglaComissao}`);const o=om(nm(e.proposicao.urn).genero);return e.epigrafe.complemento=`(${o.artigoDefinidoPrecedidoPreposicaoASingular.trim()} ${e.proposicao.sigla} ${t}/${e.proposicao.ano})`,e.local=this.montarLocalFromColegiadoApreciador(e.colegiadoApreciador),e.revisoes=this.getRevisoes(),e.justificativaAntesRevisao=this._lexmlJustificativa.textoAntesRevisao,e}removeRevisaoFormat(e){let t="";return""!==e&&(t=e=(e=e.replace(/<ins\b[^>]*>(.*?)<\/ins>/s,"")).replace(/<del\b[^>]*>(.*?)<\/del>/s,"")),t}getRevisoes(){const e=((e=[])=>{const t=e.filter((e=>Vv(e)&&!Yv(e)));return t.push(...Xv(e)),t.push(...e.filter(Hv)),t})([...iA.getState().elementoReducer.revisoes]);return e.filter(Vv).forEach((e=>{const t=e;Jv(t.elementoAposRevisao),t.elementoAntesRevisao&&Jv(t.elementoAntesRevisao)})),e}openModalSufixos(){null!==this.sufixosModal&&this.sufixosModal.show()}inicializarEdicao(e){var t,o,i;this._lexmlEmendaComando.emenda=[],this.modo=e.modo,this.projetoNorma=e.projetoNorma,this.inicializaProposicao(e),this.motivo=e.motivo,this.isEmendaTextoLivre()&&e.emenda&&(this.motivo=e.emenda.comandoEmendaTextoLivre.motivo||"Motivo não informado na emenda"),this.isEmendaTextoLivre()||this.isEmendaSubstituicaoTermo()||this._lexmlEta.inicializarEdicao(this.modo,this.urn,e.projetoNorma,!!e.emenda),e.emenda?this.setEmenda(e.emenda):this.resetaEmenda(e),this.limparAlertas(),this.isEmendaTextoLivre()&&!this._lexmlEmendaTextoRico.texto&&this.showAlertaEmendaTextoLivre(),this.setUsuario(null!==(t=e.usuario)&&void 0!==t?t:iA.getState().elementoReducer.usuario),setTimeout(this.handleResize,0),(null===(i=null===(o=e.emenda)||void 0===o?void 0:o.revisoes)||void 0===i?void 0:i.length)||this.desativarMarcaRevisao(),this._tabsEsquerda.show("lexml-eta"),this.modo.startsWith("emenda")&&!this.isEmendaTextoLivre()?setTimeout((()=>{var e;null===(e=this._tabsDireita)||void 0===e||e.show("comando")})):setTimeout((()=>{var e;null===(e=this._tabsDireita)||void 0===e||e.show("notas")})),this.updateView()}inicializaProposicao(e){this.urn="",this.ementa="",e.proposicao&&(this.urn=mm(e.proposicao.sigla,e.proposicao.numero,e.proposicao.ano),this.ementa=e.proposicao.ementa),e.emenda&&(this.urn||(this.urn=e.emenda.proposicao.urn),this.ementa||(this.ementa=e.emenda.proposicao.ementa)),this.projetoNorma&&(this.urn||(this.urn=Ub(this.projetoNorma)),this.ementa||(this.ementa=this.getEmentaFromProjetoNorma(this.projetoNorma)))}getEmentaFromProjetoNorma(e){var t,o,i,a;return ty(null===(a=null===(i=null===(o=null===(t=e.value)||void 0===t?void 0:t.projetoNorma)||void 0===o?void 0:o.norma)||void 0===i?void 0:i.parteInicial)||void 0===a?void 0:a.ementa.content)}stateChanged(e){var t,o,i,a,r,n;const s=null===(i=null===(o=null===(t=null==e?void 0:e.elementoReducer)||void 0===t?void 0:t.ui)||void 0===o?void 0:o.events)||void 0===i?void 0:i.some((e=>e.stateType===nf.RevisaoAtivada)),l=null===(n=null===(r=null===(a=null==e?void 0:e.elementoReducer)||void 0===a?void 0:a.ui)||void 0===r?void 0:r.events)||void 0===n?void 0:n.some((e=>e.stateType===nf.RevisaoDesativada));s&&this.mostrarDialogDisclaimerRevisao(),(s||l)&&this.emitiEventoOnRevisao(iA.getState().elementoReducer.emRevisao)}emitiEventoOnRevisao(e){this.dispatchEvent(new CustomEvent("onrevisao",{bubbles:!0,composed:!0,detail:{emRevisao:e}}))}setUsuario(e=new ZE){iA.dispatch(vx.execute(e))}setEmenda(e){iA.dispatch({type:"LIMPAR_ALERTAS"}),this.isEmendaTextoLivre()||this.isEmendaSubstituicaoTermo()||this._lexmlEta.setDispositivosERevisoesEmenda(e.componentes[0].dispositivos,e.revisoes),this._lexmlAutoria.autoria=e.autoria,this._lexmlOpcoesImpressao.opcoesImpressao=e.opcoesImpressao,this._lexmlJustificativa.setTextoAntesRevisao(e.justificativaAntesRevisao),this._lexmlDestino.colegiadoApreciador=e.colegiadoApreciador,this._lexmlDestino.proposicao=e.proposicao,this.notasRodape=e.notasRodape||[],this._lexmlJustificativa.setContent(e.justificativa,e.notasRodape),this.isEmendaTextoLivre()?(this._lexmlEmendaTextoRico.setContent((null==e?void 0:e.comandoEmendaTextoLivre.texto)||""),this._lexmlEmendaTextoRico.anexos=e.anexos||[],this._lexmlEmendaTextoRico.setTextoAntesRevisao(e.comandoEmendaTextoLivre.textoAntesRevisao),iA.dispatch(Fu.execute(e.componentes[0].dispositivos,e.revisoes))):this.isEmendaSubstituicaoTermo()&&this._substituicaoTermo.setSubstituicaoTermo(e.substituicaoTermo||new pE),this._lexmlData.data=e.data}resetaEmenda(e){const t=new W_;t.modoEdicao=e.modo,t.proposicao=this.montarProposicaoPorUrn(this.urn,e.ementa),t.autoria=this.montarAutoriaPadrao(e),t.opcoesImpressao=this.montarOpcoesImpressaoPadrao(e),this._lexmlEmendaComando.emenda={},this.setEmenda(t),iA.dispatch(Zx.execute())}montarAutoriaPadrao(e){const t=new uE,o=e.autoriaPadrao,i=this.parlamentares.find((e=>e.identificacao===(null==o?void 0:o.identificacao)&&e.siglaCasaLegislativa===(null==o?void 0:o.siglaCasaLegislativa)));return i&&(t.parlamentares=[i]),t}montarOpcoesImpressaoPadrao(e){const t=new dE;return e.opcoesImpressaoPadrao&&(t.imprimirBrasao=e.opcoesImpressaoPadrao.imprimirBrasao,t.textoCabecalho=e.opcoesImpressaoPadrao.textoCabecalho,t.tamanhoFonte=e.opcoesImpressaoPadrao.tamanhoFonte),t}createRenderRoot(){return this}updateLayoutSplitPanel(e=!1){"desktop"===this.sizeMode&&(this.slSplitPanel.position=this.splitPanelPosition),window.innerWidth<=this.MOBILE_WIDTH&&("mobile"!==this.sizeMode||e)?(this.sizeMode="mobile",this.slSplitPanel.position=100,this.slSplitPanel.setAttribute("disabled","true")):window.innerWidth>this.MOBILE_WIDTH&&("desktop"!==this.sizeMode||e)&&(this.sizeMode="desktop",this.slSplitPanel.position=this.splitPanelPosition,this.slSplitPanel.removeAttribute("disabled"))}connectedCallback(){super.connectedCallback(),window.addEventListener("resize",this.handleResize)}disconnectedCallback(){window.removeEventListener("resize",this.handleResize),super.disconnectedCallback()}firstUpdated(){var e,t,o;setTimeout((()=>this.atualizaListaParlamentares()),0),setTimeout((()=>this.atualizaListaComissoes()),0),null===(e=this._tabsEsquerda)||void 0===e||e.addEventListener("sl-tab-show",(e=>{var t;const o=e.detail.name;if("avisos"===o){const t=e.target.querySelector("sl-badge");t&&(t.pulse=!1)}else"autoria"===o&&(0===this.parlamentares.length&&this.atualizaListaParlamentares(),0===(null===(t=this.comissoes)||void 0===t?void 0:t.length)&&this.atualizaListaComissoes())})),this.slSplitPanel.addEventListener("sl-reposition",(()=>{this.ajustarAltura()}));const i=null===(t=this._tabsDireita)||void 0===t?void 0:t.querySelector("#badgeAtalhos");if(i){localStorage.getItem("naoPulsarBadgeAtalhos")||(i.pulse=!0,i.setAttribute("variant","warning"))}null===(o=this._tabsDireita)||void 0===o||o.addEventListener("sl-tab-show",(e=>{if("atalhos"===e.detail.name){const t=e.target.querySelector("sl-badge");t&&(t.pulse=!1,t.setAttribute("variant","primmay")),localStorage.setItem("naoPulsarBadgeAtalhos","true")}}))}updated(){}pesquisarAlturaParentElement(e){if(null===e.parentElement)return 0;{const t=getComputedStyle(this).getPropertyValue("--min-height").replace("px","");return e.clientHeight>=t?e.clientHeight:this.pesquisarAlturaParentElement(e.parentElement)}}ajustarAltura(e){var t,o;const i=null!=e?e:this.pesquisarAlturaParentElement(this),a=null===(o=null===(t=document.querySelector("sl-tab-group"))||void 0===t?void 0:t.shadowRoot)||void 0===o?void 0:o.querySelector(".tab-group__nav-container"),r=null==a?void 0:a.clientHeight;if(!r)return!1;const n=i-r-12;if(n<=0)return!1;const s=e=>document.querySelector(e),l=s('sl-tab-panel[name="justificativa"]'),c=s('sl-tab-panel[name="lexml-eta"]'),u=s("#editor-texto-rico-justificativa .ql-toolbar"),d=s("#lx-eta-barra-ferramenta"),p={justificativa:{display:l.style.display,opacity:l.style.opacity,pointerEvents:l.style.pointerEvents},emenda:{display:c.style.display,opacity:c.style.opacity,pointerEvents:c.style.pointerEvents}},h=(e,t,o=!1)=>{o?(e.style.opacity="0",e.style.pointerEvents="none",e.style.display="block"):(e.style.opacity=t.opacity,e.style.pointerEvents=t.pointerEvents,e.style.display=t.display)};"none"===p.justificativa.display&&h(l,p.justificativa,!0),"none"===p.emenda.display&&h(c,p.emenda,!0);const m=(null==u?void 0:u.clientHeight)+10,f=(null==d?void 0:d.clientHeight)+10;return h(l,p.justificativa),h(c,p.emenda),this.style.setProperty("--heightJustificativa",n-m+"px"),this.style.setProperty("--heightEmenda",n-f+"px"),this.style.setProperty("--height",`${n}px`),this.style.setProperty("--overflow","hidden"),!0}onChange(){let e=null;this.isEmendaSubstituicaoTermo()?(e=this._substituicaoTermo.getComandoEmenda(this.urn),this._lexmlEmendaComando.emenda=e,this._lexmlEmendaComandoModal.atualizarComandoEmenda(e)):this.isEmendaTextoLivre()&&(this._lexmlJustificativa.texto?iA.dispatch(su("alerta-global-justificativa")):this.disparaAlerta(),this._lexmlEmendaTextoRico.texto?iA.dispatch(su("alerta-global-emenda-texto-livre")):this.showAlertaEmendaTextoLivre()),this.isEmendaTextoLivre()||this.buildAlertaJustificativa(e)}buildAlertaJustificativa(e){var t;null===e&&(e=this._lexmlEta.getComandoEmenda(),this._lexmlEmendaComando.emenda=e,this._lexmlEmendaComandoModal.atualizarComandoEmenda(e)),null!==e&&(null===(t=e.comandos)||void 0===t?void 0:t.length)>0&&!this._lexmlJustificativa.texto?this.disparaAlerta():iA.dispatch(su("alerta-global-justificativa"))}disparaAlerta(){iA.dispatch(nu({id:"alerta-global-justificativa",tipo:"error",mensagem:"A emenda não possui uma justificação",podeFechar:!1}))}getJustificativa(){return""}limparAlertas(){iA.dispatch({type:"LIMPAR_ALERTAS"})}showAlertaEmendaTextoLivre(){iA.dispatch(nu({id:"alerta-global-emenda-texto-livre",tipo:"error",mensagem:"O comando de emenda deve ser preenchido.",podeFechar:!1}))}mostrarDialogDisclaimerRevisao(){(()=>{if("true"!==localStorage.getItem("naoMostrarNovamenteDisclaimerMarcaAlteracao")){const e=document.createElement("sl-dialog");e.label="Marcas de revisão";const t=' <sl-button slot="footer" variant="primary" id="closeButton">Fechar</sl-button>';e.innerHTML='\n      Todas as alterações realizadas no texto serão registradas e ficarão disponíveis para consulta.\n      Esta é uma versão inicial da funcionalidade de controle de alterações/marcas de revisão.\n      <br><br>\n      <sl-switch id="chk-nao-mostrar-modal-novamente">Não mostrar mais essa mensagem</sl-switch>\n    '.concat(t),document.body.appendChild(e),e.show(),e.addEventListener("sl-request-close",(e=>{"overlay"===e.detail.source&&e.preventDefault()}));const o=e.querySelector("#chk-nao-mostrar-modal-novamente");null==o||o.addEventListener("sl-change",(()=>{ig()}));const i=e.querySelector('#closeButton[slot="footer"]');null==i||i.addEventListener("click",(()=>{e.hide(),e.remove()}))}})()}isEmendaTextoLivre(){return this.modo&&"emendaTextoLivre"===this.modo}isEmendaSubstituicaoTermo(){return"emendaSubstituicaoTermo"===this.modo}updateView(){this.updateState=new Date}render(){return Rl`
      ${K_} ${ec} ${uO}
      <style>
        :root {
          --height: 100%;
          --overflow: visible;
          --min-height: 300px;
          --heightJustificativa: 100%;
          --heightEmenda: 100%;
          --visibilityNotasAcao: hidden;
        }
        sl-tab-panel {
          --padding: 0px;
        }
        sl-tab-panel::part(base) {
          height: var(--height);
        }
        sl-tab-panel.overflow-hidden::part(base) {
          overflow-y: auto;
        }
        lexml-emenda-comando {
          font-family: var(--eta-font-serif);
          display: ${this.modo.startsWith("emenda")&&!this.isEmendaTextoLivre()?"block":"none"};
          height: 100%;
        }
        lexml-eta {
          font-family: var(--eta-font-serif);
          text-align: left;
        }
        /* #editor-texto-rico-justificativa #editor-texto-rico {
          height: calc(var(--height) - 44px);
          overflow: var(--overflow);
        } */

        #editor-texto-rico-emenda-inner {
          height: calc(var(--heightJustificativa));
          overflow: var(--overflow);
        }
        #editor-texto-rico-justificativa-inner {
          height: calc(var(--heightJustificativa));
          overflow: var(--overflow);
        }
        .badge-pulse {
          margin-left: 7px;
          height: 16px;
          margin-top: -4px;
        }

        #badgeAtalhos::part(base) {
          height: 16px;
          margin-top: 2px;
          font-size: var(--sl-font-size-small);
          background-color: transparent;
          color: var(--sl-color-neutral-600);
        }
        sl-tab[panel='atalhos'][active] #badgeAtalhos::part(base) {
          color: var(--sl-color-primary-600);
        }

        sl-split-panel {
          --divider-width: 15px;
        }
        sl-tab sl-icon {
          margin-right: 5px;
          font-size: 18px;
        }
        .tab-autoria__container {
          padding: 10px;
        }
        .notas-rodape {
          font-family: var(--eta-font-serif);
          font-style: normal;
          padding: 10px;
        }
        .notas-rodape h4 {
          font-family: var(--eta-font-sans);
          font-style: normal;
          padding: 1rem 0px 0.5rem;
          margin: 0px;
        }
        .notas-texto-vazio {
          padding-left: 20px;
          color: var(--sl-color-gray-500);
          font-style: italic;
        }

        .notas-rodape ol {
          padding-left: 20px;
          list-style: none;
          counter-reset: item;
          margin: 0px;
        }

        .notas-rodape li {
          padding: 0px;
          position: relative;
          cursor: pointer;
          display: flex;
          flex-direction: row;
          align-items: center;
          justify-content: space-between;
        }

        .notas-rodape li:hover {
          --visibilityNotasAcao: visible;
          background-color: var(--sl-color-gray-100);
        }

        .notas-rodape li::before {
          content: counter(item);
          counter-increment: item;
          position: absolute;
          width: 20px;
          left: -20px;
          top: 4px;
          font-size: smaller;
          vertical-align: super;
          font-weight: bold;
          font-size: 12px;
          color: var(--sl-color-gray-500);
          text-align: right;
        }

        .notas-texto {
          flex-grow: 1;
          cursor: pointer;
          padding: 5px;
          color: var(--sl-color-gray-500);
        }

        .notas-acoes {
          display: flex;
          flex-direction: row;
          align-items: center;
        }

        .notas-acao {
          margin-left: 5px;
          visibility: var(--visibilityNotasAcao);
          cursor: pointer;
        }

        .notas-checkbox {
          appearance: none;
          background: transparent;
          display: none;
        }

        .notas-checkbox:checked + .notas-texto {
          color: black;
          font-style: italic;
        }

        @media (max-width: 768px) {
          sl-split-panel {
            --divider-width: 0px;
          }
        }
      </style>

      <sl-split-panel position="67">
        <sl-icon slot="handle" name="grip-vertical"></sl-icon>
        <div slot="start">
          <sl-tab-group id="tabs-esquerda">
            <sl-tab slot="nav" panel="lexml-eta">Texto</sl-tab>
            <sl-tab slot="nav" panel="justificativa">Justificação</sl-tab>
            <sl-tab slot="nav" panel="autoria">Destino, Data, Autoria e Impressão</sl-tab>
            <sl-tab slot="nav" panel="avisos">
              Avisos
              <div class="badge-pulse" id="contadorAvisos">${this.totalAlertas>0?Rl` <sl-badge variant="danger" pill pulse>${this.totalAlertas}</sl-badge> `:""}</div>
            </sl-tab>
            <sl-tab-panel name="lexml-eta" class="overflow-hidden">
              <lexml-eta
                style="display: ${this.isEmendaTextoLivre()||this.isEmendaSubstituicaoTermo()?"none":"block"}"
                id="lexmlEta"
                .lexmlEtaConfig=${this.lexmlEmendaConfig}
                @onchange=${this.onChange}
              ></lexml-eta>
              <editor-texto-rico
                style="display: ${this.isEmendaTextoLivre()?"block":"none"}"
                modo="textoLivre"
                id="editor-texto-rico-emenda"
                registroEvento="justificativa"
                @onchange=${this.onChange}
              ></editor-texto-rico>
              <lexml-substituicao-termo style="display: ${this.isEmendaSubstituicaoTermo()?"block":"none"}" @onchange=${this.onChange}></lexml-substituicao-termo>
            </sl-tab-panel>
            <sl-tab-panel name="justificativa" class="overflow-hidden">
              <editor-texto-rico
                .lexmlEtaConfig=${this.lexmlEmendaConfig}
                modo="justificativa"
                id="editor-texto-rico-justificativa"
                registroEvento="justificativa"
                @onchange=${this.onChange}
              ></editor-texto-rico>
            </sl-tab-panel>
            <sl-tab-panel name="autoria" class="overflow-hidden">
              <div class="tab-autoria__container">
                <lexml-destino .comissoes=${this.comissoes}></lexml-destino>
                <br />
                <lexml-data></lexml-data>
                <br />
                <lexml-autoria .parlamentares=${this.parlamentares}></lexml-autoria>
                <lexml-opcoes-impressao></lexml-opcoes-impressao>
              </div>
            </sl-tab-panel>
            <sl-tab-panel name="avisos" class="overflow-hidden">
              <lexml-eta-alertas></lexml-eta-alertas>
            </sl-tab-panel>
          </sl-tab-group>
        </div>
        <div slot="end">
          <sl-tab-group id="tabs-direita">
            ${this.tabIsVisible("comando")?Rl`
                  <sl-tab slot="nav" panel="comando">
                    <sl-icon name="code"></sl-icon>
                    Comando
                  </sl-tab>
                `:""}
            ${this.tabIsVisible("notas")?Rl`
                  <sl-tab slot="nav" panel="notas" title="Notas de rodapé">
                    <sl-badge variant="primary" id="badgeAtalhos" pill>
                      <sl-icon name="footnote"></sl-icon>
                      Notas
                    </sl-badge>
                  </sl-tab>
                `:""}
            ${this.tabIsVisible("dicas")?Rl`
                  <sl-tab slot="nav" panel="dicas">
                    <sl-icon name="lightbulb"></sl-icon>
                    Dicas
                  </sl-tab>
                `:""}
            ${this.tabIsVisible("atalhos")?Rl`
                  <sl-tab slot="nav" panel="atalhos">
                    <sl-badge variant="primary" id="badgeAtalhos" pill>
                      <sl-icon name="keyboard"></sl-icon>
                      Atalhos
                    </sl-badge>
                  </sl-tab>
                `:""}
            <sl-tab-panel name="comando" class="overflow-hidden">
              <lexml-emenda-comando></lexml-emenda-comando>
            </sl-tab-panel>
            <sl-tab-panel name="notas" class="overflow-hidden">
              <div class="notas-rodape">
                <h4>Notas de rodapé</h4>
                ${this.renderNotasRodape()}
              </div>
            </sl-tab-panel>
            <sl-tab-panel name="dicas" class="overflow-hidden">
              <lexml-ajuda></lexml-ajuda>
            </sl-tab-panel>
            <sl-tab-panel name="atalhos" class="overflow-hidden">
              <lexml-eta-atalhos></lexml-eta-atalhos>
            </sl-tab-panel>
          </sl-tab-group>
        </div>
      </sl-split-panel>
      <lexml-sufixos-modal></lexml-sufixos-modal>
    `}tabIsVisible(e){return("atalhos"!==e&&"dicas"!==e||"emendaSubstituicaoTermo"!==this.modo)&&(!("notas"!==e||!this.isEmendaTextoLivre()&&"edicao"!==this.modo)||this.modo.startsWith("emenda")&&!this.isEmendaTextoLivre())}onChangeNotasRodape(){this.notasRodape=this._lexmlJustificativa.notasRodape,this.focusOnTab("notas")}renderNotasRodape(){return this.notasRodape.length?Rl`
          <ol>
            ${this._lexmlJustificativa.notasRodape.map((e=>Rl`
                  <li>
                    <input type="checkbox" idNotaRodape="${e.id}" class="notas-checkbox" id="checkbox-${e.id}" @change=${()=>this.selecionarNotaRodape(e.id)} />
                    <label for="checkbox-${e.id}" class="notas-texto">${sA(e.texto)}</label>
                    <span class="notas-acoes">
                      <sl-button
                        class="notas-acao"
                        variant="default"
                        size="small"
                        aria-label="Editar nota de rodapé"
                        title="Editar nota de rodapé"
                        idNotaRodape="${e.id}"
                        @click=${this.editarNotaRodape}
                      >
                        <sl-icon slot="prefix" name="pencil-square"></sl-icon>
                      </sl-button>
                      <sl-button
                        class="notas-acao"
                        variant="default"
                        size="small"
                        aria-label="Excluir nota de rodapé"
                        title="Excluir nota de rodapé"
                        idNotaRodape="${e.id}"
                        @click=${this.removerNotaRodape}
                      >
                        <sl-icon slot="prefix" name="trash"></sl-icon>
                      </sl-button>
                    </span>
                  </li>
                `))}
          </ol>
        `:Rl`<span class="notas-texto-vazio">Não há notas de rodapé registradas.</span>`}focusOnTab(e){var t;const o=this.querySelector(`sl-tab[panel="${e}"]`);if(o&&(null===(t=this._tabsDireita)||void 0===t||t.show("notas"),"notas"===e)){const t=null==o?void 0:o.querySelector("sl-badge");if(!t)return;o.hasAttribute("active")||"notas"===e&&(t.setAttribute("pulse",""),setTimeout((()=>{t.removeAttribute("pulse")}),4e3))}}localizarNotaRodape(e){const t=this.querySelector(`.ql-editor nota-rodape[id-nota-rodape="${e}"]`),o=this.getTabFromElement(t);this.focusOnTab(o.getAttribute("name")),t&&setTimeout((()=>t.scrollIntoView({behavior:"smooth",block:"center"})),100);this.querySelectorAll(".ql-editor nota-rodape").forEach((t=>{t.attributes["id-nota-rodape"].value===e?null==t||t.classList.add("pulse"):t.classList.remove("pulse")}))}selecionarNotaRodape(e){const t=document.getElementById(`checkbox-${e}`);if(t)if(t.checked){document.querySelectorAll(".notas-checkbox").forEach((e=>{e.id!==t.id&&(e.checked=!1)})),this.localizarNotaRodape(e)}else this.removerPulsarNotaRodape(e)}removerPulsarNotaRodape(e){const t=this.querySelector(`.ql-editor nota-rodape[id-nota-rodape="${e}"]`);null==t||t.classList.remove("pulse")}editarNotaRodape(e){const t=e.target.getAttribute("idNotaRodape"),o=this.querySelector(`.ql-editor nota-rodape[id-nota-rodape="${t}"]`),i=this.getEditorTextoRicoFromElement(o);null==i||i.focus(),i.editarNotaRodape(t)}removerNotaRodape(e){const t=e.target.getAttribute("idNotaRodape"),o=this.querySelector(`.ql-editor nota-rodape[id-nota-rodape="${t}"]`),i=this.getEditorTextoRicoFromElement(o);null==i||i.focus(),i.removerNotaRodape(t)}getEditorTextoRicoFromElement(e){return e.closest("editor-texto-rico")}getTabFromElement(e){return e.closest("sl-tab-panel")}};Mc([zc({type:Boolean})],pO.prototype,"existeObserverEmenda",void 0),Mc([zc({type:Number})],pO.prototype,"totalAlertas",void 0),Mc([zc({type:Boolean})],pO.prototype,"exibirAjuda",void 0),Mc([zc({type:Array})],pO.prototype,"parlamentares",void 0),Mc([zc({type:Array})],pO.prototype,"comissoes",void 0),Mc([zc({type:Object})],pO.prototype,"lexmlEmendaConfig",void 0),Mc([Fc()],pO.prototype,"updateState",void 0),Mc([Fc()],pO.prototype,"notasRodape",void 0),Mc([Fc()],pO.prototype,"autoria",void 0),Mc([Uc("lexml-substituicao-termo")],pO.prototype,"_substituicaoTermo",void 0),Mc([Uc("lexml-eta")],pO.prototype,"_lexmlEta",void 0),Mc([Uc("#editor-texto-rico-emenda")],pO.prototype,"_lexmlEmendaTextoRico",void 0),Mc([Uc("#editor-texto-rico-justificativa")],pO.prototype,"_lexmlJustificativa",void 0),Mc([Uc("lexml-destino")],pO.prototype,"_lexmlDestino",void 0),Mc([Uc("lexml-autoria")],pO.prototype,"_lexmlAutoria",void 0),Mc([Uc("lexml-data")],pO.prototype,"_lexmlData",void 0),Mc([Uc("lexml-opcoes-impressao")],pO.prototype,"_lexmlOpcoesImpressao",void 0),Mc([Uc("#tabs-esquerda")],pO.prototype,"_tabsEsquerda",void 0),Mc([Uc("#tabs-direita")],pO.prototype,"_tabsDireita",void 0),Mc([Uc("lexml-emenda-comando")],pO.prototype,"_lexmlEmendaComando",void 0),Mc([Uc("lexml-emenda-comando-modal")],pO.prototype,"_lexmlEmendaComandoModal",void 0),Mc([Uc("sl-split-panel")],pO.prototype,"slSplitPanel",void 0),Mc([Uc("lexml-sufixos-modal")],pO.prototype,"sufixosModal",void 0),pO=Mc([$c("lexml-emenda")],pO);var hO=ci`
  ${Zi}

  :host {
    display: contents;

    /* For better DX, we'll reset the margin here so the base part can inherit it */
    margin: 0;
  }

  .alert {
    position: relative;
    display: flex;
    align-items: stretch;
    background-color: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-top-width: calc(var(--sl-panel-border-width) * 3);
    border-radius: var(--sl-border-radius-medium);
    box-shadow: var(--box-shadow);
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-normal);
    line-height: 1.6;
    color: var(--sl-color-neutral-700);
    margin: inherit;
  }

  .alert:not(.alert--has-icon) .alert__icon,
  .alert:not(.alert--closable) .alert__close-button {
    display: none;
  }

  .alert__icon {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-left: var(--sl-spacing-large);
  }

  .alert--primary {
    border-top-color: var(--sl-color-primary-600);
  }

  .alert--primary .alert__icon {
    color: var(--sl-color-primary-600);
  }

  .alert--success {
    border-top-color: var(--sl-color-success-600);
  }

  .alert--success .alert__icon {
    color: var(--sl-color-success-600);
  }

  .alert--neutral {
    border-top-color: var(--sl-color-neutral-600);
  }

  .alert--neutral .alert__icon {
    color: var(--sl-color-neutral-600);
  }

  .alert--warning {
    border-top-color: var(--sl-color-warning-600);
  }

  .alert--warning .alert__icon {
    color: var(--sl-color-warning-600);
  }

  .alert--danger {
    border-top-color: var(--sl-color-danger-600);
  }

  .alert--danger .alert__icon {
    color: var(--sl-color-danger-600);
  }

  .alert__message {
    flex: 1 1 auto;
    padding: var(--sl-spacing-large);
    overflow: hidden;
  }

  .alert__close-button {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    font-size: var(--sl-font-size-large);
    padding-right: var(--sl-spacing-medium);
  }
`,mO=Object.assign(document.createElement("div"),{className:"sl-toast-stack"}),fO=class extends Yi{constructor(){super(...arguments),this.hasSlotController=new Ua(this,"icon","suffix"),this.open=!1,this.closable=!1,this.variant="primary",this.duration=1/0}firstUpdated(){this.base.hidden=!this.open}async show(){if(!this.open)return this.open=!0,Ka(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,Ka(this,"sl-after-hide")}async toast(){return new Promise((e=>{null===mO.parentElement&&document.body.append(mO),mO.appendChild(this),requestAnimationFrame((()=>{this.clientWidth,this.show()})),this.addEventListener("sl-after-hide",(()=>{mO.removeChild(this),e(),null===mO.querySelector("sl-alert")&&mO.remove()}),{once:!0})}))}restartAutoHide(){clearTimeout(this.autoHideTimeout),this.open&&this.duration<1/0&&(this.autoHideTimeout=window.setTimeout((()=>this.hide()),this.duration))}handleCloseClick(){this.hide()}handleMouseMove(){this.restartAutoHide()}async handleOpenChange(){if(this.open){Qa(this,"sl-show"),this.duration<1/0&&this.restartAutoHide(),await Lr(this.base),this.base.hidden=!1;const{keyframes:e,options:t}=Fr(this,"alert.show");await Rr(this.base,e,t),Qa(this,"sl-after-show")}else{Qa(this,"sl-hide"),clearTimeout(this.autoHideTimeout),await Lr(this.base);const{keyframes:e,options:t}=Fr(this,"alert.hide");await Rr(this.base,e,t),this.base.hidden=!0,Qa(this,"sl-after-hide")}}handleDurationChange(){this.restartAutoHide()}render(){return Di`
      <div
        part="base"
        class=${sa({alert:!0,"alert--open":this.open,"alert--closable":this.closable,"alert--has-icon":this.hasSlotController.test("icon"),"alert--primary":"primary"===this.variant,"alert--success":"success"===this.variant,"alert--neutral":"neutral"===this.variant,"alert--warning":"warning"===this.variant,"alert--danger":"danger"===this.variant})}
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
        aria-hidden=${this.open?"false":"true"}
        @mousemove=${this.handleMouseMove}
      >
        <span part="icon" class="alert__icon">
          <slot name="icon"></slot>
        </span>

        <span part="message" class="alert__message">
          <slot></slot>
        </span>

        ${this.closable?Di`
              <sl-icon-button
                part="close-button"
                exportparts="base:close-button__base"
                class="alert__close-button"
                name="x"
                library="system"
                @click=${this.handleCloseClick}
              ></sl-icon-button>
            `:""}
      </div>
    `}};fO.styles=hO,ya([Oa('[part="base"]')],fO.prototype,"base",2),ya([wa({type:Boolean,reflect:!0})],fO.prototype,"open",2),ya([wa({type:Boolean,reflect:!0})],fO.prototype,"closable",2),ya([wa({reflect:!0})],fO.prototype,"variant",2),ya([wa({type:Number})],fO.prototype,"duration",2),ya([Ga("open",{waitUntilFirstUpdate:!0})],fO.prototype,"handleOpenChange",1),ya([Ga("duration")],fO.prototype,"handleDurationChange",1),fO=ya([xa("sl-alert")],fO),zr("alert.show",{keyframes:[{opacity:0,transform:"scale(0.8)"},{opacity:1,transform:"scale(1)"}],options:{duration:250,easing:"ease"}}),zr("alert.hide",{keyframes:[{opacity:1,transform:"scale(1)"},{opacity:0,transform:"scale(0.8)"}],options:{duration:250,easing:"ease"}});let vO=class extends(Gc(iA)(Jl)){constructor(){super(...arguments),this.alertas=[]}stateChanged(e){var t;this.alertas=(null===(t=e.elementoReducer.ui)||void 0===t?void 0:t.alertas)||[]}getAlertIcon(e){return"success"===e?Rl`<sl-icon slot="icon" name="check2-circle"></sl-icon>`:"warning"===e?Rl`<sl-icon slot="icon" name="exclamation-triangle"></sl-icon>`:"danger"===e?Rl`<sl-icon slot="icon" name="exclamation-octagon"></sl-icon>`:Rl`<sl-icon slot="icon" name="info-circle"></sl-icon>`}limparAlertas(){iA.dispatch({type:"LIMPAR_ALERTAS"})}removeAlertaById(e){iA.dispatch(su(e))}updated(e){var t,o,i;if(e.has("alertas")){null===(t=this.alertas)||void 0===t||t.forEach((e=>{var t,o;null===(o=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById(e.id))||void 0===o||o.addEventListener("click",(e=>{e.stopImmediatePropagation(),this.removeAlertaById(e.target.id)}))}));const a=document.querySelector("lexml-emenda");a.totalAlertas=this.alertas.length;const r=(null===(o=e.get("alertas"))||void 0===o?void 0:o.length)||0;if(a.totalAlertas>r){const e=null===(i=document.querySelector("#contadorAvisos"))||void 0===i?void 0:i.querySelector("sl-badge");e&&(e.pulse=!0)}}}render(){return Rl`
      ${this.alertas.map((e=>Rl` ${e.podeFechar?Rl`
                <sl-alert variant="${e.tipo}" open>
                  <sl-icon-button name="x" class="alert__close-button" id="${e.id}" label="fechar"></sl-icon-button>
                  ${this.getAlertIcon(e.tipo)} ${e.mensagem}
                </sl-alert>
              `:Rl` <sl-alert variant="${e.tipo}" open> ${this.getAlertIcon(e.tipo)} ${e.mensagem} </sl-alert> `}`))}
    `}};vO.styles=nl`
    sl-alert {
      --box-shadow: var(--sl-shadow-x-large);
      margin: 20px;
    }
    .alert__close-button {
      font-size: 1.25rem;
      float: right;
    }
  `,Mc([zc({type:Array})],vO.prototype,"alertas",void 0),vO=Mc([$c("lexml-eta-alertas")],vO);let gO=class extends(Gc(iA)(Jl)){constructor(){super(...arguments),this.acoesMenu=[]}stateChanged(e){var t,o;(null===(t=e.elementoReducer.ui)||void 0===t?void 0:t.events)&&"AtualizacaoAlertas"!==(null===(o=e.elementoReducer.ui.events[0])||void 0===o?void 0:o.stateType)&&this.processarStateEvents(e.elementoReducer.ui.events)}processarStateEvents(e){null==e||e.forEach((t=>{switch(t.stateType){case nf.ElementoSelecionado:case nf.ElementoMarcado:e[e.length-1]===t&&t.elementos&&this.atualizarAjuda(t.elementos[0])}}))}atualizarAjuda(e){var t;this.elementoSelecionado=e,this.acoesMenu=(null!==(t=e.acoesPossiveis)&&void 0!==t?t:[]).filter((e=>Cf(e)))}render(){return this.elementoSelecionado&&this.acoesMenu.length?Rl`
          <p>O que você pode fazer com o dispositivo selecionado:</p>
          <ul>
            <li>Sugerir uma nova redação para o dispositivo. Para isso basta alterar o texto do dispositivo selecionado.</li>
            <li>
              Adicionar um novo dispositivo após o dispositivo atual. Para isso vá para o final do texto e pressione a tecla
              <span class="badge">enter</span>.
            </li>
          </ul>

          <p>
            Além disso, clicando no menu de ações
            <span class="badge"><strong>⋮</strong></span> que fica à esquerda do dispositivo selecionado você também pode:
          </p>
          <ul>
            ${this.acoesMenu.map((e=>Rl` <li>${e.descricao}</li> `))}
          </ul>
        `:Rl``}};gO.styles=nl`
    :host {
      padding: 0 10px;
      display: block;
      font-family: var(--sl-font-sans);
      font-size: var(--sl-font-size-small);
      font-weight: var(--sl-font-weight-normal);
    }
  `,Mc([Fc()],gO.prototype,"elementoSelecionado",void 0),Mc([Fc()],gO.prototype,"acoesMenu",void 0),gO=Mc([$c("lexml-ajuda")],gO);let bO=class extends Jl{show(){this.slDialog.show()}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
      </style>
      <sl-dialog label="Dicas">
        <lexml-ajuda></lexml-ajuda>
        <sl-button slot="footer" variant="primary" @click=${()=>this.slDialog.hide()}>Fechar</sl-button>
      </sl-dialog>
    `}};Mc([Uc("sl-dialog")],bO.prototype,"slDialog",void 0),bO=Mc([$c("lexml-ajuda-modal")],bO);let yO=class extends Jl{constructor(){super(...arguments),this.step=1}show(){var e;const t=localStorage.getItem("naoMostrarExplicacaoSufixo"),o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#noShowAgain");t&&o&&(o.checked=!0),this.slDialog.show()}handleSwitchChange(e){e.target.checked?localStorage.setItem("naoMostrarExplicacaoSufixo","true"):localStorage.removeItem("naoMostrarExplicacaoSufixo")}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
      </style>
      <sl-dialog>
        <span slot="label">Sufixos de posicionamento</span>

        <div>
          <p>
            Os sufixos na numeração de dispositivos, como -1, -2 e assim por diante, são usados para orientar o posicionamento na redação final. Eles não indicam uma numeração
            definitiva.
          </p>
          <p>Os dispositivos propostos e adjacentes deverão ser devidamente renumerados no momento da consolidação das emendas ao texto da proposição pela Redação Final.</p>
        </div>

        <div slot="footer" class="footer-container">
          <sl-switch id="noShowAgain" @sl-change=${this.handleSwitchChange}> Não mostrar novamente </sl-switch>

          <sl-button variant="default" @click=${()=>this.slDialog.hide()}> Fechar </sl-button>
        </div>
      </sl-dialog>
    `}};yO.styles=nl`
    .footer-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap; /* Quebra de linha no mobile ou quando o espaço for insuficiente */
    }

    .footer-container sl-switch {
      order: 1; /* Garante que o switch sempre venha primeiro */
      margin-right: auto; /* Empurra qualquer conteúdo à sua direita para o canto mais distante */
    }

    .footer-container sl-button {
      order: 2; /* Garante que o botão sempre venha depois do switch */
      margin-left: auto; /* Empurra qualquer conteúdo à sua esquerda para o canto mais distante */
    }
  `,Mc([zc({type:Number})],yO.prototype,"step",void 0),Mc([Uc("sl-dialog")],yO.prototype,"slDialog",void 0),yO=Mc([$c("lexml-sufixos-modal")],yO);let xO=class extends Jl{atualizarComandoEmenda(e){this.lexmlComandoEmenda.emenda=e}show(){this.slDialog.show()}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
      </style>
      <sl-dialog label="Comando">
        <lexml-emenda-comando id="comando-emenda-modal" .emenda=${this.comandoEmenda}></lexml-emenda-comando>
        <sl-button slot="footer" variant="primary" @click=${()=>this.slDialog.hide()}>Fechar</sl-button>
      </sl-dialog>
    `}};Mc([Uc("sl-dialog")],xO.prototype,"slDialog",void 0),Mc([Uc("#comando-emenda-modal")],xO.prototype,"lexmlComandoEmenda",void 0),Mc([zc({type:Object})],xO.prototype,"comandoEmenda",void 0),xO=Mc([$c("lexml-emenda-comando-modal")],xO);let AO=class extends Jl{show(){this.slDialog.show()}render(){return Rl`
      <style>
        :host {
          font-family: var(--sl-font-sans);
        }
      </style>
      <sl-dialog label="Atalhos">
        <lexml-eta-atalhos></lexml-eta-atalhos>
        <sl-button slot="footer" variant="primary" @click=${()=>this.slDialog.hide()}>Fechar</sl-button>
      </sl-dialog>
    `}};Mc([Uc("sl-dialog")],AO.prototype,"slDialog",void 0),AO=Mc([$c("lexml-atalhos-modal")],AO);let wO=class extends Jl{constructor(){super(...arguments),this.timerEmitirEventoOnChange=0}set opcoesImpressao(e){this._opcoesImpressao=e||new dE,this.requestUpdate()}get opcoesImpressao(){return this._opcoesImpressao}firstUpdated(){this.tamanhoFonte.addEventListener("sl-change",(e=>this._atualizarTamanhoFonte(e)))}render(){var e,t,o,i;return Rl`
      <style>
        sl-radio-group::part(base) {
          display: flex;
          flex-direction: column;
          gap: 20px;
          background-color: var(--sl-color-gray-100);
          box-shadow: var(--sl-shadow-x-large);
          flex-wrap: wrap;
          padding: 20px 20px;
        }
        sl-radio-group::part(label) {
          background-color: var(--sl-color-gray-200);
          font-weight: bold;
          border-radius: 5px;
          border: 1px solid var(--sl-color-gray-300);
          padding: 2px 5px;
          box-shadow: var(--sl-shadow-small);
        }

        sl-input::part(form-control) {
        }
        sl-input::part(base) {
        }
        @media (max-width: 480px) {
          sl-input::part(base) {
          }
        }
        sl-select {
          max-width: 400px;
        }
      </style>

      <sl-radio-group label="Opções de impressão" fieldset class="lexml-opcoes-impressao">
        <div>
          <sl-checkbox id="chk-imprimir-brasao" ?checked=${null===(e=this._opcoesImpressao)||void 0===e?void 0:e.imprimirBrasao} @input=${e=>this._atualizarImprimirBrasao(e)}></sl-checkbox>
          <label for="chk-imprimir-brasao">Imprimir brasão</label>
        </div>
        <sl-input
          type="text"
          id="input-cabecalho"
          name="textoCabecalho"
          label="Texto do cabeçalho"
          value=${null===(t=this._opcoesImpressao)||void 0===t?void 0:t.textoCabecalho}
          @input=${e=>this._atualizarTextoCabecalho(e)}
        ></sl-input>
        <div>
          <sl-select id="select-tamanho-fonte" label="Tamanho da letra" size="small" value=${null===(o=this._opcoesImpressao)||void 0===o?void 0:o.tamanhoFonte}>
            <sl-menu-item value="14">14</sl-menu-item>
            <sl-menu-item value="16">16</sl-menu-item>
            <sl-menu-item value="18">18</sl-menu-item>
          </sl-select>
        </div>
        <div>
          <sl-checkbox
            id="chk-reduzir-espaco"
            ?checked=${null===(i=this._opcoesImpressao)||void 0===i?void 0:i.reduzirEspacoEntreLinhas}
            @click=${e=>this._atualizarReduzirEspacoEntreLinhas(e)}
          ></sl-checkbox>
          <label for="chk-reduzir-espaco">Reduzir espaço entre linhas</label>
        </div>
      </sl-radio-group>
    `}_atualizarTextoCabecalho(e){this._opcoesImpressao.textoCabecalho=e.target.value,this.requestUpdate()}_atualizarImprimirBrasao(e){this._opcoesImpressao.imprimirBrasao=e.target.checked,this.requestUpdate()}_atualizarTamanhoFonte(e){const t=parseInt(e.target.value);this._opcoesImpressao.tamanhoFonte=t,this.requestUpdate()}_atualizarReduzirEspacoEntreLinhas(e){this._opcoesImpressao.reduzirEspacoEntreLinhas=e.target.checked,this.requestUpdate()}agendarEmissaoEventoOnChange(e){clearInterval(this.timerEmitirEventoOnChange),this.timerEmitirEventoOnChange=window.setTimeout((()=>this.emitirEventoOnChange(e)),500)}emitirEventoOnChange(e){this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:e}}))}};wO.styles=nl`
    .lexml-opcoes-impressao {
      display: block;
      margin: 20px 0 80px 0;
      font-size: 1em;
      max-width: 700px;
    }
  `,Mc([Uc("#select-tamanho-fonte")],wO.prototype,"tamanhoFonte",void 0),Mc([zc({type:Object,state:!0})],wO.prototype,"opcoesImpressao",null),wO=Mc([$c("lexml-opcoes-impressao")],wO);let _O=class extends(Gc(iA)(Jl)){constructor(){super(),this.quantidadeRevisao=0,this.nomeSwitch="",this.nomeBadgeQuantidadeRevisao="",this.checkedRevisao=!1,this.modo="",this.onChange=new uA,this.atualizaQuantidadeRevisao=()=>{((e=[],t,o)=>{const i=o===kv.EMENDA?tg(e):0;t&&(t.innerHTML=i)})(iA.getState().elementoReducer.revisoes,document.getElementById(this.nomeBadgeQuantidadeRevisao),this.modo)},this.checkedSwitchMarcaAlteracao=()=>{const e=document.getElementById(this.nomeSwitch);ag(e,iA.getState().elementoReducer.emRevisao)}}update(e){super.update(e)}createRenderRoot(){return this}stateChanged(e){var t;e.elementoReducer.ui&&e.elementoReducer.ui.events&&(e.elementoReducer.ui.message&&"AtualizacaoAlertas"===(null===(t=e.elementoReducer.ui.events[0])||void 0===t?void 0:t.stateType)&&Xw(e.elementoReducer.ui.message.descricao),this.processarStateEvents(e.elementoReducer.ui.events))}processarStateEvents(e){null==e||e.forEach((e=>{switch(e.stateType){case nf.RevisaoAtivada:case nf.RevisaoDesativada:this.checkedSwitchMarcaAlteracao()}this.atualizaQuantidadeRevisao()}))}render(){return Rl`
      <style>
        #revisoes-justificativa-icon sl-icon {
          border: 1px solid #ccc !important;
          padding: 0.4rem 0.4rem !important;
          border-radius: 15px !important;
          font-weight: bold;
          background-color: #eee;
          cursor: pointer;
        }

        #revisoes-texto-livre-icon sl-icon {
          border: 1px solid #ccc !important;
          padding: 0.4rem 0.4rem !important;
          border-radius: 15px !important;
          font-weight: bold;
          background-color: #eee;
          cursor: pointer;
        }
        #chk-em-revisao {
          border: 1px solid #ccc !important;
          padding: 5px 10px !important;
          border-radius: 20px !important;
          margin-left: auto;
          margin-right: 5px;
          font-weight: bold;
          background-color: #eee;
        }
        #chk-em-revisao[checked] {
          background-color: var(--sl-color-blue-100);
        }
        .revisao-container {
          margin-left: auto;
        }
        .sl-toast-stack sl-alert::part(base) {
          background-color: var(--sl-color-danger-100);
        }
        @media (max-width: 992px) {
          .mobile-buttons {
            display: inline-block !important;
          }
          #chk-em-revisao span {
            display: none;
          }
        }
      </style>
      <div id="toolbar">
        <sl-switch id="${this.nomeSwitch}" size="small" @sl-change=${()=>this.ativarDesativarMarcaDeRevisao()}>
          <span>Marcas de revisão</span>
          <sl-badge id="${this.nomeBadgeQuantidadeRevisao}" variant="warning" pill>0</sl-badge>
        </sl-switch>
      </div>
    `}ativarDesativarMarcaDeRevisao(e=!0){const t=og(iA.getState().elementoReducer.revisoes);((e,t)=>{e.dispatch(Iv.execute(t))})(iA,e?t:0),this.checkedSwitchMarcaAlteracao()}};Mc([zc({type:Number})],_O.prototype,"quantidadeRevisao",void 0),Mc([zc({type:String})],_O.prototype,"nomeSwitch",void 0),Mc([zc({type:String})],_O.prototype,"nomeBadgeQuantidadeRevisao",void 0),Mc([zc({type:Boolean,reflect:!0})],_O.prototype,"checkedRevisao",void 0),Mc([zc({type:String})],_O.prototype,"modo",void 0),_O=Mc([$c("lexml-switch-revisao")],_O);let EO=class extends Jl{constructor(){super(...arguments),this.timerEmitirEventoOnChange=0}onDadosAlterados(e){const t=null==e?void 0:e.target;t===this.elTermoASerSubstituido&&this.elAlertaTermoASerSubstituido.style.setProperty("visibility",t.value?"hidden":"unset"),t===this.elNovoTermo&&this.elAlertaNovoTermo.style.setProperty("visibility",t.value?"hidden":"unset"),this.agendarEmissaoEventoOnChange()}agendarEmissaoEventoOnChange(e="substituicao-termo"){clearInterval(this.timerEmitirEventoOnChange),this.timerEmitirEventoOnChange=window.setTimeout((()=>this.emitirEventoOnChange(e)),500)}emitirEventoOnChange(e){this.dispatchEvent(new CustomEvent("onchange",{bubbles:!0,composed:!0,detail:{origemEvento:e}}))}getComandoEmenda(e){return new PE(e,this.getSubstituicaoTermo()).getComandoEmenda()}getSubstituicaoTermo(){var e;const t=new pE;return t.tipo=(null===(e=this.elTipoSubstituicaoTermo.querySelector("sl-radio[checked]"))||void 0===e?void 0:e.value)||"Expressão",t.termo=this.elTermoASerSubstituido.value||"(termo a ser substituído)",t.novoTermo=this.elNovoTermo.value||"(novo termo)",t.flexaoGenero=this.elFlexaoGenero.checked,t.flexaoNumero=this.elFlexaoNumero.checked,t}setSubstituicaoTermo(e){var t,o;this.elTermoASerSubstituido.value=e.tipo,this.elTermoASerSubstituido.value=e.termo,this.elNovoTermo.value=e.novoTermo,this.elFlexaoGenero.checked=e.flexaoGenero,this.elFlexaoNumero.checked=e.flexaoNumero,null===(o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(`sl-radio[value="${e.tipo}"]`))||void 0===o||o.click(),this.agendarEmissaoEventoOnChange(),""!==this.elTermoASerSubstituido.value&&this.elAlertaTermoASerSubstituido.style.setProperty("visibility","hidden"),""!==this.elNovoTermo.value&&this.elAlertaNovoTermo.style.setProperty("visibility","hidden")}render(){return Rl`
      <fieldset @input=${this.onDadosAlterados}>
        <legend>Substituição de termo em todo o texto</legend>
        <sl-radio-group id="tipoSubstituicaoTermo" value="Expressão" @sl-change=${this.onDadosAlterados}>
          <sl-radio value="Expressão">Expressão</sl-radio>
          <sl-radio value="Palavra">Palavra</sl-radio>
          <sl-radio value="Número">Número</sl-radio>
        </sl-radio-group>
        <div>
          <sl-input id="termoASerSubstituido" type="text" required label="Termo a ser substituído: *"></sl-input>
          <span id="alertaTermoASerSubstituido" class="alerta">Este campo deve ser preenchido</span>
        </div>
        <div>
          <sl-input id="novoTermo" type="text" required label="Novo termo: *"></sl-input>
          <span id="alertaNovoTermo" class="alerta">Este campo deve ser preenchido</span>
        </div>
        <div>
          <span>Propor fazer flexões de:</span>
          <sl-checkbox id="flexaoGenero">Gênero</sl-checkbox>
          <sl-checkbox id="flexaoNumero">Número</sl-checkbox>
        </div>
      </fieldset>
    `}};EO.styles=nl`
    span.alerta {
      color: red;
    }

    fieldset {
      display: flex;
      flex-direction: column;
      gap: 1em;
      background-color: var(--sl-color-gray-100);
      box-shadow: var(--sl-shadow-x-large);
      flex-wrap: wrap;
      padding: 20px 20px;
      margin: 10px;
      border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
      border-radius: var(--sl-border-radius-medium);
    }

    legend {
      background-color: var(--sl-color-gray-200);
      font-weight: bold;
      border-radius: 5px;
      border: 1px solid var(--sl-color-gray-300);
      padding: 2px 5px;
      box-shadow: var(--sl-shadow-small);
    }

    sl-radio-group::part(base) {
      display: flex;
      flex-direction: row;
      gap: 20px;
    }
    #flexaoGenero {
      margin-left: 20px;
    }
  `,Mc([Uc("#tipoSubstituicaoTermo")],EO.prototype,"elTipoSubstituicaoTermo",void 0),Mc([Uc("#termoASerSubstituido")],EO.prototype,"elTermoASerSubstituido",void 0),Mc([Uc("#novoTermo")],EO.prototype,"elNovoTermo",void 0),Mc([Uc("#alertaTermoASerSubstituido")],EO.prototype,"elAlertaTermoASerSubstituido",void 0),Mc([Uc("#alertaNovoTermo")],EO.prototype,"elAlertaNovoTermo",void 0),Mc([Uc("#flexaoGenero")],EO.prototype,"elFlexaoGenero",void 0),Mc([Uc("#flexaoNumero")],EO.prototype,"elFlexaoNumero",void 0),EO=Mc([$c("lexml-substituicao-termo")],EO),Quill.register("modules/aspasCurvas",class{constructor(e,t){this.enabled=!0,this.quill=e,this.options=t,this.quill.root.addEventListener("keydown",(e=>{var t;const o=null===(t=this.quill)||void 0===t?void 0:t.getSelection(),i=e.key;this.enabled&&o&&['"',"'"].includes(i)&&(this.tratarAspas(o,i),e.preventDefault())}))}tratarAspas(e,t){var o,i,a,r,n,s;if(!this.enabled)return!0;const l='"'===t,c=l?"“":"‘",u=l?"”":"’",d=null===(o=this.quill)||void 0===o?void 0:o.getText().substring(0,e.index),p=!d||(null==d?void 0:d.match(/\s$/g))?c:u,h=null===(i=this.quill)||void 0===i?void 0:i.getFormat(e);let m=(new hs).retain(e.index).delete(e.length).insert(t,h);return null===(a=this.quill)||void 0===a||a.updateContents(m,Quill.sources.USER),null===(r=this.quill)||void 0===r||r.history.cutoff(),m=(new hs).retain(e.index).delete(1).insert(p,h),null===(n=this.quill)||void 0===n||n.updateContents(m,Quill.sources.USER),null===(s=this.quill)||void 0===s||s.setSelection(e.index+1,Quill.sources.SILENT),!1}setEnabled(e){this.enabled=e}},!0),Quill.register("modules/revisao",Os,!0),Quill.register("modules/notaRodape",class extends kc{constructor(e,t){var o;super(e,t),this._isAbrindoTexto=!1,this.quill=e,this.options=t,this.options.numeroInicial=null!==(o=this.options.numeroInicial)&&void 0!==o?o:1,this.quill.notasRodape=this;const i=this.quill.getModule("toolbar");i&&i.addHandler("nota-rodape",this.solicitarTexto.bind(this)),this.addClipboardMatcher(),this.quill.on("text-change",this.onTextChange.bind(this)),this.quill.root.addEventListener("click",this.onClick.bind(this)),this.quill.root.addEventListener("nota-rodape:input",this.tratarRespostaModal.bind(this))}get isAbrindoTexto(){return this._isAbrindoTexto}set isAbrindoTexto(e){this._isAbrindoTexto=e}static register(){Quill.register(Lc),Quill.register(Rc),Quill.register(Dc),Quill.register(Pc)}addClipboardMatcher(){this.quill.clipboard.addMatcher("nota-rodape",((e,t)=>{let o=Tc.query(e);if(null==o||"nota-rodape"!==o.blotName)return t;const i=this.isAbrindoTexto?e.getAttribute("id-nota-rodape"):this.gerarId(),a=e.getAttribute("numero"),r=tl(e.getAttribute("texto")),n=new sc({id:i,numero:a,texto:r});return(new Ic).insert({"nota-rodape":n})}))}onTextChange(e,t,o){const i=this.quill.history.stack.undo[this.quill.history.stack.undo.length-1],a=this.quill.history.stack.redo[this.quill.history.stack.redo.length-1];(this.hasNotaRodape(e)||this.hasNotaRodape(null==i?void 0:i.undo)||this.hasNotaRodape(null==i?void 0:i.redo)||this.hasNotaRodape(null==a?void 0:a.redo))&&(this.renumerarTodasNotas(),this.emitirEventoNotaRodapeAdicionadaOuRemovida(this.hasNotaRodape(e))),this.hasNotaRodape(e)&&this.removerEspacosAoRedorNotaRodape()}removerEspacosAoRedorNotaRodape(){this.findBlotsNotaRodape().forEach((e=>{var t,o,i,a;(null===(o=null===(t=e.blot.next)||void 0===t?void 0:t.text)||void 0===o?void 0:o.match(/^\t/))&&this.quill.deleteText(e.index+1,1,"silent"),(null===(a=null===(i=e.blot.prev)||void 0===i?void 0:i.text)||void 0===a?void 0:a.match(/\s$/))&&this.quill.deleteText(e.index-1,1,"silent")}))}emitirEventoNotaRodapeAdicionadaOuRemovida(e){clearTimeout(this.timerEmitirEventoNotaRodapeChange),this.timerEmitirEventoNotaRodapeChange=setTimeout((()=>{const t=e?"nota-rodape:change":"nota-rodape:remove";this.quill.root.dispatchEvent(new CustomEvent(t,{bubbles:!0}))}),100)}hasNotaRodape(e){var t;return null===(t=null==e?void 0:e.ops)||void 0===t?void 0:t.find((e=>{var t;return null===(t=e.insert)||void 0===t?void 0:t["nota-rodape"]}))}onClick(e){var t;const o=e.target;(null==o?void 0:o.closest("ins, del"))||"NOTA-RODAPE"!==(null==o?void 0:o.tagName)&&"NOTA-RODAPE"!==(null===(t=null==o?void 0:o.parentElement)||void 0===t?void 0:t.tagName)||(e.preventDefault(),e.stopPropagation(),this.solicitarTexto(o.notaRodape||o.parentElement.notaRodape))}tratarRespostaModal(e){e.stopPropagation();const{id:t,texto:o}=e.detail,i=t&&this.findNodeById(t);this.quill.focus(),i?this.atualizarTexto(i.notaRodape,o):this.adicionar(o)}solicitarTexto(e){new Sc({domNodeNotaRodape:this.quill.root,idNotaRodape:null==e?void 0:e.id,textoInicialNotaRodape:null==e?void 0:e.texto,tituloModal:"object"==typeof e?"Editar nota de rodapé":"Adicionar nota de rodapé"}).open()}atualizarTexto(e,t){const o=this.findNodeById(e.id),i=Quill.find(o);return i.format("nota-rodape",{...e,texto:t}),i.domNode.notaRodape}adicionar(e){const t=this.quill,o=t.getSelection();if(!o)return;const i=this.gerarId(),a=new sc({id:i,numero:0,texto:e}),r=(new Ic).retain(o.index).delete(o.length).insert({"nota-rodape":a});return t.updateContents(r,"user"),t.setSelection(o.index+1,0),a}remover(e){const t=this.findNodeById(e),o=Quill.find(t);null==o||o.remove()}editar(e){var t;const o=null===(t=this.findNodeById(e))||void 0===t?void 0:t.notaRodape;o&&this.solicitarTexto(o)}associar(e){e.forEach((e=>{const t=this.findNodeById(e.id);t&&(t.notaRodape=e)}))}getNotasRodape(){return this.findBlotsNotaRodape().map((e=>e.blot.domNode.notaRodape))}gerarId(){return"nr"+(new Date).getTime()}findNodeById(e){return this.quill.root.querySelector(`nota-rodape[id-nota-rodape="${e}"]`)}findBlotsNotaRodape(){return Array.from(this.quill.root.querySelectorAll("nota-rodape")).map((e=>{const t=Quill.find(e);return{index:t.offset(this.quill.scroll),blot:t}}))}renumerarTodasNotas(){const e=this.quill.getSelection();this.findBlotsNotaRodape().forEach(((e,t)=>{var o;const i=t+this.options.numeroInicial,a=e.blot.domNode;a.innerText=i,a.setAttribute("numero",i),(null===(o=a.notaRodape)||void 0===o?void 0:o.id)&&(a.notaRodape.numero=i)})),e&&this.quill.setSelection(e.index,e.length)}ajustarConteudoTagsNotaRodape(e){return e.replace(/<nota-rodape.+?<\/nota-rodape>/g,(e=>e.replace(/>.?<span[^>]*>(\d+)<\/span>.?</g,">$1<")))}},!0);export{gO as AjudaComponent,bO as AjudaModalComponent,vO as AlertasComponent,Q_ as AlterarLarguraImagemModalComponent,G_ as AlterarLarguraTabelaColunaModalComponent,aA as ArticulacaoComponent,AO as AtalhosModalComponent,WE as AutoriaComponent,lA as ComandoEmendaComponent,xO as ComandoEmendaModalComponent,JE as DataComponent,XE as DestinoComponent,Yw as EditorComponent,U_ as EditorTextoRicoComponent,Jw as ElementoComponent,Zw as HelpComponent,YE as LexmlAutocomplete,pO as LexmlEmendaComponent,Qc as LexmlEmendaConfig,dO as LexmlEmendaParametrosEdicao,HE as LexmlEtaComponent,wO as OpcoesImpressaoComponent,EO as SubstituicaoTermoComponent,yO as SufixosModalComponent,_O as SwitchRevisaoComponent,ZE as Usuario};
//# sourceMappingURL=index.min.js.map
