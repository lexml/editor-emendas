{"version":3,"file":"index.min.js","sources":["../node_modules/elix/src/core/internal.js","../node_modules/elix/src/core/dom.js","../node_modules/elix/src/core/htmlLiterals.js","../node_modules/elix/src/core/template.js","../node_modules/elix/src/core/AttributeMarshallingMixin.js","../node_modules/elix/src/core/ReactiveMixin.js","../node_modules/elix/src/core/ShadowTemplateMixin.js","../node_modules/elix/src/core/ReactiveElement.js","../node_modules/elix/src/base/internal.js","../node_modules/elix/src/base/DialogModalityMixin.js","../node_modules/elix/src/base/FocusCaptureMixin.js","../node_modules/elix/src/base/KeyboardMixin.js","../node_modules/elix/src/base/Backdrop.js","../node_modules/elix/src/base/AriaRoleMixin.js","../node_modules/elix/src/base/ModalBackdrop.js","../node_modules/elix/src/base/OpenCloseMixin.js","../node_modules/elix/src/base/OverlayFrame.js","../node_modules/elix/src/base/OverlayMixin.js","../node_modules/elix/src/base/SlotContentMixin.js","../node_modules/elix/src/base/Overlay.js","../node_modules/elix/src/base/Dialog.js","../node_modules/elix/src/base/AlertDialog.js","../node_modules/elix/src/base/ComposedFocusMixin.js","../node_modules/elix/src/base/DelegateInputLabelMixin.js","../node_modules/elix/src/base/FocusVisibleMixin.js","../node_modules/elix/src/base/DelegateFocusMixin.js","../node_modules/elix/src/base/WrappedStandardElement.js","../node_modules/elix/src/base/Button.js","../node_modules/elix/src/plain/PlainButton.js","../node_modules/elix/src/plain/PlainButtonMixin.js","../node_modules/elix/src/plain/PlainBorderButton.js","../node_modules/elix/src/plain/PlainModalBackdrop.js","../node_modules/elix/src/plain/PlainOverlayFrame.js","../node_modules/elix/src/plain/PlainModalOverlayMixin.js","../node_modules/elix/src/plain/PlainAlertDialog.js","../node_modules/elix/define/AlertDialog.js","../node_modules/elix/src/plain/PlainDialog.js","../node_modules/elix/define/Dialog.js","../node_modules/elix/src/base/accessibility.js","../node_modules/elix/src/base/scrolling.js","../node_modules/elix/src/base/ItemsCursorMixin.js","../node_modules/elix/src/base/content.js","../node_modules/elix/src/base/KeyboardPagedCursorMixin.js","../node_modules/elix/src/base/constants.js","../node_modules/elix/src/base/KeyboardPrefixCursorMixin.js","../node_modules/elix/src/base/LanguageDirectionMixin.js","../node_modules/elix/src/base/ContentItemsMixin.js","../node_modules/elix/src/base/Menu.js","../node_modules/elix/src/base/AriaMenuMixin.js","../node_modules/elix/src/base/CursorAPIMixin.js","../node_modules/elix/src/base/CursorInViewMixin.js","../node_modules/elix/src/base/DirectionCursorMixin.js","../node_modules/elix/src/base/ItemsAPIMixin.js","../node_modules/elix/src/base/ItemsTextMixin.js","../node_modules/elix/src/base/KeyboardDirectionMixin.js","../node_modules/elix/src/base/SlotItemsMixin.js","../node_modules/elix/src/base/TapCursorMixin.js","../node_modules/elix/src/base/PopupDragSelectMixin.js","../node_modules/elix/src/base/DisabledMixin.js","../node_modules/elix/src/base/layoutPopup.js","../node_modules/elix/src/base/PopupModalityMixin.js","../node_modules/elix/src/base/Popup.js","../node_modules/elix/src/base/PopupSource.js","../node_modules/elix/src/base/PopupButton.js","../node_modules/elix/src/base/PopupListMixin.js","../node_modules/elix/src/base/MenuButton.js","../node_modules/elix/src/base/UpDownToggle.js","../node_modules/elix/src/base/PopupToggleMixin.js","../node_modules/elix/src/plain/PlainMenu.js","../node_modules/elix/src/plain/PlainOpenCloseToggle.js","../node_modules/elix/src/plain/PlainBackdrop.js","../node_modules/elix/src/plain/PlainPopup.js","../node_modules/elix/src/plain/PlainMenuButton.js","../node_modules/elix/define/MenuButton.js","../node_modules/elix/src/base/MenuItem.js","../node_modules/elix/src/base/CurrentMixin.js","../node_modules/elix/src/base/SelectableMixin.js","../node_modules/elix/src/plain/PlainMenuItem.js","../node_modules/elix/define/MenuItem.js","../node_modules/elix/src/base/MenuSeparator.js","../node_modules/elix/src/plain/PlainMenuSeparator.js","../node_modules/elix/define/MenuSeparator.js","../node_modules/elix/src/base/Toast.js","../node_modules/elix/src/base/TransitionEffectMixin.js","../node_modules/elix/src/plain/PlainToast.js","../node_modules/quill/dist/quill.js","../node_modules/elix/define/Toast.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PEQICPKO.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KNVYX3FQ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.4CV4I4O2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.2JQPDYNA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7BXY5XRG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ICGTMF5Z.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.72DLNKYZ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PC2XE7K3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.EAHCDLY6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DASRUEHT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IVOHDN3H.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BIBTLNIT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.JHRKEMQ3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.LOYEL7IY.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.N2T2IJMA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.3IYPB6RR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.R37SUKY2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PQ5VRVXF.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.CDTZZV7W.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DB75ZXDG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.LAAROFAU.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.H2OTHIKD.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.WVVUWAAN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.O2TDYW3A.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.TZDCDFV4.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.NFF2HMIT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.C7PPQWMA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IDYSXN6R.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.UCCHCS2E.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.RPB53XXV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.P52GZVKG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.NPYVPRSA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DDXYEXJR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.SCUNOITN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BQLXYG6H.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.H262HIXG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.OKBZWQHW.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.YBI4N56R.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6SAGALY4.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IZTO26O3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FE67GRYM.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BN5JWAGI.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PWMZHGCP.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.XTJ7LSDZ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.24E5KUVH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.HBQXYYIH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.GX6HO7XH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.APX6YS4T.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.R2YZVUVK.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7Z6S4O4Z.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DIQYRTQ3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.2BK5N6NV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6RGOUGV6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.CUSQ3RKJ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.AMWHV6KC.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FTWX6OPR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.AAC6N2EB.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.43G6GBOK.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KA5CSU6G.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.RBICTPSA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BN5S5DQC.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PF5KH6E5.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.EPLHZYQM.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.MKDCWXIR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BXPHLFH5.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.VJFXXZSG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7EHHFVMB.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.WVNZTNX2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ZCXSKGAA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.MDVLR3AN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.UZCU23EP.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.HPWFXYUR.js","../../src/components/editor-texto-rico/moduloAspasCurvas.ts","../../src/util/uuid.ts","../../src/components/editor-texto-rico/moduloRevisao.ts","../node_modules/diff/lib/index.mjs","../../src/util/string-util.ts","../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../../src/assets/css/quill.snow.css.ts","../../src/components/editor-texto-rico/estilos-texto.ts","../../src/components/editor-texto-rico/margin-bottom.ts","../../src/components/editor-texto-rico/notaRodape.ts","../../src/components/editor-texto-rico/text-indent.ts","../node_modules/shadow-selection-polyfill/shadow.js","../../src/components/editor-texto-rico/nota-rodape-modal.ts","../../src/components/editor-texto-rico/moduloNotaRodape.ts","../node_modules/tslib/tslib.es6.js","../node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../node_modules/@lit/reactive-element/decorators/base.js","../node_modules/@lit/reactive-element/decorators/query.js","../node_modules/@lit/reactive-element/decorators/query-all.js","../node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","../node_modules/pwa-helpers/connect-mixin.js","../../src/model/lexmlEmendaConfig.ts","../node_modules/redux/es/redux.js","../../src/model/lexml/acao/adicionarAgrupadorArtigoAction.ts","../../src/model/alerta/acao/adicionarAlerta.ts","../../src/model/alerta/acao/removerAlerta.ts","../../src/model/lexml/acao/adicionarAlteracaoComAssistenteAction.ts","../../src/model/lexml/tipo/tipoDispositivo.ts","../../src/model/lexml/acao/adicionarElementoAction.ts","../../src/model/lexml/acao/AdicionarElementosFromClipboardAction.ts","../../src/model/lexml/acao/agruparElementoAction.ts","../../src/model/lexml/acao/aplicarAlteracoesEmenda.ts","../../src/model/lexml/acao/atualizarReferenciaElementoAction.ts","../../src/model/lexml/acao/atualizarTextoElementoAction.ts","../../src/model/lexml/acao/autoFixAction.ts","../../src/model/lexml/acao/elementoSelecionadoAction.ts","../../src/model/lexml/acao/informarDadosAssistenteAction.ts","../../src/model/lexml/acao/informarExistenciaDoElementoNaNormaAction.ts","../../src/model/lexml/acao/informarNormaAction.ts","../../src/model/lexml/acao/moverElementoAbaixoAction.ts","../../src/model/lexml/acao/moverElementoAcimaAction.ts","../../src/model/lexml/acao/openArticulacaoAction.ts","../../src/model/lexml/acao/removerElementoAction.ts","../../src/model/lexml/acao/renumerarElementoAction.ts","../../src/model/lexml/acao/restaurarElemento.ts","../../src/model/lexml/acao/suprimirAgrupador.ts","../../src/model/lexml/acao/suprimirElemento.ts","../../src/model/lexml/acao/transformarElementoAction.ts","../../src/model/lexml/acao/validarArticulacaoAction.ts","../../src/model/lexml/acao/validarElementoAction.ts","../../src/model/lexml/acao/atualizarNotaAlteracaoAction.ts","../../src/model/lexml/acao/removerElementoSemTextoAction.ts","../../src/model/dispositivo/situacao.ts","../../src/model/lexml/conteudo/textoOmissis.ts","../../src/model/dispositivo/tipo.ts","../../src/model/documento/classificacao.ts","../../src/model/lexml/hierarquia/hierarquiaUtil.ts","../../src/util/tag-node.ts","../../src/emenda/dispositivo-comparator.ts","../../src/emenda/dispositivo-emenda-util.ts","../../src/emenda/comando-emenda-util.ts","../../src/model/lexml/util/mensagem.ts","../../src/model/lexml/conteudo/conteudoUtil.ts","../../src/model/lexml/conteudo/conteudoValidator.ts","../../src/model/dispositivo/genero.ts","../../src/model/lexml/documento/vocabulario.ts","../../src/model/lexml/documento/urnUtil.ts","../../src/model/lexml/numeracao/numeracaoUtil.ts","../../src/model/lexml/numeracao/numeracaoValidator.ts","../../src/model/lexml/dispositivo/dispositivoValidator.ts","../../src/model/lexml/hierarquia/hierarquiaValidator.ts","../../src/model/lexml/situacao/dispositivoSuprimido.ts","../../src/model/lexml/util/idUtil.ts","../../src/model/elemento/elementoUtil.ts","../../src/redux/state.ts","../../src/redux/elemento/reducer/loadArticulacao.ts","../../src/redux/elemento/reducer/abreArticulacao.ts","../../src/util/counter.ts","../../src/model/dispositivo/validacao.ts","../../src/model/lexml/acao/blocoAlteracaoAction.ts","../../src/model/lexml/alteracao/blocoAlteracaoNaoPermitido.ts","../../src/model/lexml/conteudo/tipoConteudo.ts","../../src/model/lexml/conteudo/conteudoDispositivo.ts","../../src/model/lexml/hierarquia/hierarquiaAgrupador.ts","../../src/model/lexml/hierarquia/hierarquiaDispositivo.ts","../../src/model/lexml/numeracao/numeracaoAgrupador.ts","../../src/model/lexml/numeracao/numeracaoIndisponivel.ts","../../src/model/lexml/acao/adicionarTextoOmissisAction.ts","../../src/model/lexml/acao/removerTextoOmissisAction.ts","../../src/model/lexml/acao/aceitarRevisaoAction.ts","../../src/model/lexml/acao/rejeitarRevisaoAction.ts","../../src/model/lexml/acao/exibirDiferencaAction.ts","../../src/model/lexml/acao/index.ts","../../src/model/lexml/regras/regrasUtil.ts","../../src/redux/elemento/util/stateReducerUtil.ts","../../src/model/lexml/acao/acaoUtil.ts","../../src/model/lexml/regras/regrasAgrupadores.ts","../../src/model/lexml/situacao/dispositivoNovo.ts","../../src/model/lexml/situacao/dispositivoAdicionado.ts","../../src/model/lexml/situacao/situacaoDispositivo.ts","../../src/model/lexml/tipo/tipoLexml.ts","../../src/model/lexml/dispositivo/dispositivoLexmlUtil.ts","../../src/model/lexml/dispositivo/dispositivoLexmlFactory.ts","../../src/model/lexml/regras/regrasAlinea.ts","../../src/model/lexml/numeracao/numeracaoAlinea.ts","../../src/model/lexml/regras/regrasArtigo.ts","../../src/model/lexml/alteracao/BlocoAlteracaoPermitido.ts","../../src/model/lexml/numeracao/numeracaoArtigo.ts","../../src/model/lexml/hierarquia/hierarquiaArtigo.ts","../../src/model/lexml/tipo/tipoArtigo.ts","../../src/model/lexml/regras/regrasCaput.ts","../../src/model/lexml/numeracao/numeracaoCaput.ts","../../src/model/lexml/regras/regrasDispositivoGenerico.ts","../../src/model/lexml/numeracao/numeracaoGenerico.ts","../../src/model/lexml/regras/regrasInciso.ts","../../src/model/lexml/numeracao/numeracaoInciso.ts","../../src/model/lexml/regras/regrasItem.ts","../../src/model/lexml/numeracao/numeracaoItem.ts","../../src/model/lexml/regras/regrasParagrafo.ts","../../src/model/lexml/numeracao/numeracaoParagrafo.ts","../../src/model/lexml/tipo/tipoArticulacao.ts","../../src/model/lexml/regras/regrasOmissis.ts","../../src/model/lexml/conteudo/conteudoOmissis.ts","../../src/model/lexml/regras/regrasEmenta.ts","../../src/model/lexml/numeracao/parserReferenciaDispositivo.ts","../../src/model/lexml/acao/ativarDesativarRevisaoAction.ts","../../src/redux/elemento/enum/enumUtil.ts","../../src/redux/elemento/util/revisaoUtil.ts","../../src/model/lexml/situacao/dispositivoOriginal.ts","../../src/redux/elemento/util/reducerUtil.ts","../../src/redux/elemento/evento/eventosUtil.ts","../../src/redux/elemento/evento/eventos.ts","../../src/redux/elemento/reducer/adicionaAlteracaoComAssistente.ts","../../src/redux/elemento/reducer/adicionaElemento.ts","../../src/redux/elemento/reducer/agrupaElemento.ts","../../src/model/lexml/situacao/dispositivoModificado.ts","../../src/redux/elemento/reducer/aplicaAlteracoesEmenda.ts","../../src/redux/elemento/reducer/atualizaReferenciaElemento.ts","../../src/redux/elemento/reducer/atualizaTextoElemento.ts","../../src/redux/elemento/reducer/solicitaNorma.ts","../../src/redux/elemento/reducer/informaExistenciaDoElementoNaNorma.ts","../../src/redux/elemento/reducer/transformaTipoElemento.ts","../../src/redux/elemento/reducer/removeElemento.ts","../../src/redux/elemento/util/undoRedoReducerUtil.ts","../../src/redux/elemento/reducer/redo.ts","../../src/redux/elemento/reducer/removeElementoSemTexto.ts","../../src/redux/elemento/reducer/renumeraElemento.ts","../../src/redux/elemento/reducer/restauraElemento.ts","../../src/redux/elemento/reducer/suprimeElemento.ts","../../src/redux/elemento/reducer/undo.ts","../../src/model/lexml/documento/conversor/buildProjetoNormaFromJsonix.ts","../../src/model/lexml/documento/conversor/buildDispositivoFromJsonix.ts","../../src/redux/elemento/util/colarUtil.ts","../../src/redux/elemento/reducer/adicionaElementosNaProposicaoFromClipboard.ts","../../src/redux/elemento/reducer/ativaDesativaRevisao.ts","../../src/model/revisao/revisao.ts","../../src/util/date-util.ts","../../src/model/lexml/acao/atualizarUsuarioAction.ts","../../src/redux/elemento/reducer/atualizaRevisao.ts","../../src/redux/elemento/reducer/aceitaRevisao.ts","../../src/redux/elemento/reducer/rejeitaRevisao.ts","../../src/model/lexml/acao/limparRevisoes.ts","../../src/redux/elemento/reducer/elementoReducer.ts","../../src/model/lexml/acao/redoAction.ts","../../src/redux/store.ts","../../src/redux/app/appReducer.ts","../../src/redux/elemento/reducer/atualizaNotaAlteracao.ts","../../src/model/lexml/acao/atualizarElementoAction.ts","../../src/redux/elemento/reducer/atualizaElemento.ts","../../src/redux/elemento/reducer/autoFixElemento.ts","../../src/redux/elemento/reducer/selecionaElemento.ts","../../src/redux/elemento/reducer/solicitaDadosAssistente.ts","../../src/redux/elemento/reducer/moveElementoAbaixo.ts","../../src/redux/elemento/reducer/moveElementoAcima.ts","../../src/redux/elemento/reducer/suprimeAgrupador.ts","../../src/model/lexml/acao/shiftTabAction.ts","../../src/model/lexml/acao/tabAction.ts","../../src/redux/elemento/reducer/modificaTipoElementoWithTab.ts","../../src/model/lexml/acao/undoAction.ts","../../src/redux/elemento/reducer/validaElemento.ts","../../src/redux/elemento/reducer/validaArticulacao.ts","../../src/redux/elemento/reducer/adicionarAlerta.ts","../../src/redux/elemento/reducer/removeAlerta.ts","../../src/model/alerta/acao/limparAlertas.ts","../../src/redux/elemento/reducer/limparAlertas.ts","../../src/redux/elemento/reducer/atualizaUsuario.ts","../../src/redux/elemento/reducer/limpaRevisao.ts","../../src/redux/elemento/reducer/adicionaDiffMenuOpcoes.ts","../../src/components/articulacao.component.ts","../node_modules/lit-html/directive.js","../node_modules/lit-html/directives/unsafe-html.js","../../src/components/comandoEmenda/comandoEmenda.component.ts","../../src/util/observable.ts","../../src/components/editor/colarTextoArticuladoDialog.ts","../../src/model/elemento/elemento.ts","../../src/util/eta-quill/eta-blot.ts","../../src/util/eta-quill/eta-blot-menu.ts","../../src/util/eta-quill/eta-blot-menu-botao.ts","../../src/util/eta-quill/eta-blot-menu-conteudo.ts","../../src/util/eta-quill/eta-blot-menu-item.ts","../../src/util/eta-quill/eta-blot-rotulo.ts","../../src/util/eta-quill/eta-blot-abre-aspas.ts","../../src/util/eta-quill/eta-blot-conteudo.ts","../../src/util/eta-quill/eta-blot-espaco.ts","../../src/util/eta-quill/eta-blot-existencia.ts","../../src/util/eta-quill/eta-blot-fecha-aspas.ts","../../src/util/eta-quill/eta-blot-nota-alteracao.ts","../../src/util/eta-quill/eta-blot-revisao-recusar.ts","../../src/util/eta-quill/eta-blot-revisao-aceitar.ts","../../src/util/eta-quill/eta-container.ts","../../src/util/eta-quill/eta-blot-revisao.ts","../../src/util/eta-quill/eta-container-revisao.ts","../../src/util/eta-quill/eta-container-table.ts","../../src/util/event-util.ts","../../src/util/eta-quill/eta-keyboard.ts","../../assets/icons/icons.ts","../../src/util/eta-quill/eta-blot-conteudo-omissis.ts","../../src/util/eta-quill/eta-blot-mensagem.ts","../../src/util/eta-quill/eta-blot-mensagens.ts","../../src/util/eta-quill/eta-blot-opcoes-diff.ts","../../src/util/eta-quill/eta-blot-tipo-omissis.ts","../../src/util/eta-quill/eta-clipboard.ts","../../src/util/eta-quill/eta-container-opcoes.ts","../../src/util/eta-quill/eta-container-td-direito.ts","../../src/util/eta-quill/eta-container-td-esquerdo.ts","../../src/util/eta-quill/eta-container-tr.ts","../../src/util/eta-quill/eta-quill-buffer.ts","../../src/util/eta-quill/eta-quill.ts","../../src/util/eta-quill/eta-blot-quebra-linha.ts","../../src/util/eta-quill/eta-quill-util.ts","../../src/model/emenda/norma.ts","../../src/components/editor/autocomplete-async.ts","../../src/components/editor/autocomplete-norma.ts","../../src/components/editor/assistenteAlteracaoDialog.ts","../../src/components/editor/editarNotaAlteracaoDialog.ts","../../src/components/editor/exibirDiferencaDialog.ts","../../src/redux/elemento/util/alertaUtil.ts","../../src/components/editor/editor.component.ts","../../src/components/editor/adicionarAgrupadorArtigoDialog.ts","../../src/model/lexml/acao/transformarAction.ts","../../src/components/editor/informarNormaDialog.ts","../../src/components/elemento/elemento.component.ts","../../src/components/ajuda/atalhos.component.ts","../../src/components/editor-texto-rico/editor-texto-rico.css.ts","../../src/components/editor-texto-rico/quill.table.css.ts","../src/assets/js/quill1-table/js/ContainBlot.js","../src/assets/js/quill1-table/js/TableCellBlot.js","../src/assets/js/quill1-table/js/TableHistory.js","../src/assets/js/quill1-table/js/TableToolbar.js","../src/assets/js/quill1-table/js/TableSelection.js","../src/assets/js/quill1-table/js/TableTrick.js","../src/assets/js/quill1-table/js/TableRowBlot.js","../src/assets/js/quill1-table/js/TableBlot.js","../src/assets/js/quill1-table/index.js","../../src/components/editor-texto-rico/notaRodape.css.ts","../../src/redux/elemento/reducer/atualizaRevisaoJustificativa.ts","../../src/redux/elemento/reducer/atualizaRevisaoTextoLivre.ts","../../src/components/editor-texto-rico/editor-texto-rico.component.ts","../../src/components/editor-texto-rico/menu-imagem.ts","../../src/components/editor-texto-rico/texto-rico-util.ts","../../src/components/editor-texto-rico/uploadAnexoDialog.ts","../../src/components/editor-texto-rico/alterar-largura-tabela-coluna-modal.ts","../../src/components/editor-texto-rico/alterar-largura-imagem-modal.ts","../../src/assets/css/shoelace.theme.light.css.ts","../../src/model/emenda/emenda.ts","../../src/emenda/citacao-cmd-multipla-de-norma-vigente.ts","../../src/emenda/citacao-cmd-de-norma-vigente.ts","../../src/emenda/citacao-cmd-multipla.ts","../../src/emenda/citacao-cmd-disp-prj.ts","../../src/util/objeto-util.ts","../../src/emenda/range-dispositivos.ts","../../src/emenda/sequencia-range-dispositivos.ts","../../src/emenda/agrupador-dispositivos-cmd-emd.ts","../../src/emenda/cmd-emd-combinavel.ts","../../src/emenda/dispositivos-writer-cmd-emd.ts","../../src/emenda/cmd-emd-adicao-a-norma-vigente.ts","../../src/emenda/cmd-emd-modificacao-de-norma-vigente.ts","../../src/emenda/cmd-emd-supressao-norma-vigente.ts","../../src/emenda/cmd-emd-disp-norma-vigente.ts","../../src/emenda/cmd-emd-adicao.ts","../../src/emenda/cmd-emd-adicao-dispositivos-onde-couber.ts","../../src/emenda/cmd-emd-modificacao.ts","../../src/emenda/cmd-emd-supressao.ts","../../src/emenda/cmd-emd-disp-prj.ts","../../src/emenda/cmd-emd-substituicao-termo.ts","../../src/emenda/comando-emenda-builder.ts","../../src/emenda/dispositivos-emenda-builder.ts","../../src/model/lexml/documento/conversor/buildJsonixFromProjetoNorma.ts","../../src/model/lexml/documento/modelo/documentoPadrao.ts","../../src/components/lexml-eta.component.ts","../../src/model/autoria/parlamentarUtil.ts","../../src/assets/css/autoria.css.ts","../../src/components/autoria/autoria.component.ts","../../src/components/destino/destino.component.ts","../../src/components/lexml-autocomplete.ts","../../src/components/data/data.component.ts","../../src/model/revisao/usuario.ts","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7PNSFSF6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6CJ2UUVA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.55G5Z2SG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FDP56HU3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.XGXDQT2J.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KFR7NC2M.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.65B3FMMQ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ETKBJAAO.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.O4OVHSBA.js","../../src/assets/css/editor.css.ts","../../src/components/lexml-emenda.component.ts","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.JXDWJJGV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.Y5PHNPSL.js","../../src/components/alertas/alertas.component.ts","../../src/components/ajuda/ajuda.component.ts","../../src/components/ajuda/ajuda.modal.component.ts","../../src/components/sufixos/sufixos.modal.componet.ts","../../src/components/comandoEmenda/comandoEmenda.modal.component.ts","../../src/components/ajuda/atalhos.modal.component.ts","../../src/components/opcoesImpressao/opcoesImpressao.component.ts","../../src/components/switchRevisao/switch-revisao.component.ts","../../src/components/substituicao-termo/substituicao-termo.component.ts","../../src/index.ts"],"sourcesContent":["/**\n * Collection of shared Symbol objects for internal component communication.\n *\n * The shared `Symbol` objects in this module let mixins and a component\n * internally communicate without exposing these internal properties and methods\n * in the component's public API. They also help avoid unintentional name\n * collisions, as a component developer must specifically import the `internal`\n * module and reference one of its symbols.\n *\n * To use these `Symbol` objects in your own component, include this module and\n * then create a property or method whose key is the desired Symbol. E.g.,\n * [ShadowTemplateMixin](ShadowTemplateMixin) expects a component to define\n * a property called [template](#template):\n *\n *     import { template } from 'elix/src/core/internal.js';\n *     import { templateFrom } from 'elix/src/core/htmlLiterals.js'\n *     import ShadowTemplateMixin from 'elix/src/core/ShadowTemplateMixin.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * The above use of the internal `template` member lets the mixin find the\n * component's template in a way that will not pollute the component's public\n * API or interfere with other component logic. For example, if for some reason\n * the component wants to define a separate property with the plain string name,\n * \"template\", it can do so without affecting the above property setter.\n *\n * @module internal\n */\n\n/**\n * Symbol for the default state for this element.\n */\nexport const defaultState = Symbol(\"defaultState\");\n\n/**\n * Symbol for the `delegatesFocus` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property, returning\n * true to indicate that the focus is being delegated, even in browsers that\n * don't support that natively. Mixins like [KeyboardMixin](KeyboardMixin) use\n * this to accommodate focus delegation.\n */\nexport const delegatesFocus = Symbol(\"delegatesFocus\");\n\n/**\n * Symbol for the `firstRender` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets the property to `true` during the\n * element's first `render` and `rendered` callback, then `false` in subsequent\n * callbacks.\n *\n * You can inspect this property in your own `rendered` callback handler to do\n * work like wiring up events that should only happen once.\n */\nexport const firstRender = Symbol(\"firstRender\");\n\n/**\n * Symbol for the `focusTarget` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property as either:\n * 1) the element itself, in browsers that support native focus delegation or,\n * 2) the shadow root's first focusable element.\n */\nexport const focusTarget = Symbol(\"focusTarget\");\n\n/**\n * Symbol for the `hasDynamicTemplate` property.\n *\n * If your component class does not always use the same template, define a\n * static class property getter with this symbol and have it return `true`.\n * This will disable template caching for your component.\n */\nexport const hasDynamicTemplate = Symbol(\"hasDynamicTemplate\");\n\n/**\n * Symbol for the `ids` property.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) defines a shorthand function\n * `internal.ids` that can be used to obtain a reference to a shadow element with\n * a given ID.\n *\n * Example: if component's template contains a shadow element\n * `<button id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n * the corresponding button in the component instance's shadow tree.\n * The `ids` function is simply a shorthand for `getElementById`, so\n * `this[ids].foo` is the same as `this.shadowRoot.getElementById('foo')`.\n */\nexport const ids = Symbol(\"ids\");\n\n/**\n * Symbol for access to native HTML element internals.\n */\nexport const nativeInternals = Symbol(\"nativeInternals\");\n\n/**\n * Symbol for the `raiseChangeEvents` property.\n *\n * This property is used by mixins to determine whether they should raise\n * property change events. The standard HTML pattern is to only raise such\n * events in response to direct user interactions. For a detailed discussion\n * of this point, see the Gold Standard checklist item for\n * [Propery Change Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n *\n * The above article describes a pattern for using a flag to track whether\n * work is being performed in response to internal component activity, and\n * whether the component should therefore raise property change events.\n * This `raiseChangeEvents` symbol is a shared flag used for that purpose by\n * all Elix mixins and components. Sharing this flag ensures that internal\n * activity (e.g., a UI event listener) in one mixin can signal other mixins\n * handling affected properties to raise change events.\n *\n * All UI event listeners (and other forms of internal handlers, such as\n * timeouts and async network handlers) should set `raiseChangeEvents` to\n * `true` at the start of the event handler, then `false` at the end:\n *\n *     this.addEventListener('click', event => {\n *       this[raiseChangeEvents] = true;\n *       // Do work here, possibly setting properties, like:\n *       this.foo = 'Hello';\n *       this[raiseChangeEvents] = false;\n *     });\n *\n * Elsewhere, property setters that raise change events should only do so it\n * this property is `true`:\n *\n *     set foo(value) {\n *       // Save foo value here, do any other work.\n *       if (this[raiseChangeEvents]) {\n *         export const event = new CustomEvent('foochange');\n *         this.dispatchEvent(event);\n *       }\n *     }\n *\n * In this way, programmatic attempts to set the `foo` property will not trigger\n * the `foochange` event, but UI interactions that update that property will\n * cause those events to be raised.\n */\nexport const raiseChangeEvents = Symbol(\"raiseChangeEvents\");\n\n/**\n * Symbol for the `render` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this `internal.render` method to give\n * the component a chance to render recent changes in component state.\n */\nexport const render = Symbol(\"render\");\n\n/**\n * Symbol for the `renderChanges` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this method in response to a\n * `setState` call; you should generally not invoke this method yourself.\n */\nexport const renderChanges = Symbol(\"renderChanges\");\n\n/**\n * Symbol for the `rendered` method.\n *\n * [ReactiveMixin](ReactiveMixin) will invoke this method after your\n * element has completely finished rendering.\n *\n * If you only want to do work the first time rendering happens (for example, if\n * you want to wire up event handlers), your `internal.rendered` implementation\n * can inspect the `internal.firstRender` flag.\n */\nexport const rendered = Symbol(\"rendered\");\n\n/**\n * Symbol for the `rendering` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets this property to true during rendering,\n * at other times it will be false.\n */\nexport const rendering = Symbol(\"rendering\");\n\n/**\n * Symbol for the `setState` method.\n *\n * A component using [ReactiveMixin](ReactiveMixin) can invoke this method to\n * apply changes to the element's current state.\n */\nexport const setState = Symbol(\"setState\");\n\n/**\n * Symbol for the `shadowRoot` property.\n *\n * This property holds a reference to an element's shadow root, like\n * `this.shadowRoot`. This propery exists because `this.shadowRoot` is not\n * available for components with closed shadow roots.\n * [ShadowTemplateMixin](ShadowTemplateMixin) creates open shadow roots by\n * default, but you can opt into creating closed shadow roots; see\n * [shadowRootMode](internal#internal.shadowRootMode).\n */\nexport const shadowRoot = Symbol(\"shadowRoot\");\n\n/**\n * Symbol for the `shadowRootMode` property.\n *\n * If true (the default), then [ShadowTemplateMixin](ShadowTemplateMixin) will\n * create an open shadow root when the component is instantiated. Set this to\n * false if you want to programmatically hide component internals in a closed\n * shadow root.\n */\nexport const shadowRootMode = Symbol(\"shadowRootMode\");\n\n/**\n * Symbol for the element's current state.\n *\n * This is managed by [ReactiveMixin](ReactiveMixin).\n */\nexport const state = Symbol(\"state\");\n\n/**\n * Symbol for the `stateEffects` method.\n *\n * See [stateEffects](ReactiveMixin#stateEffects).\n */\nexport const stateEffects = Symbol(\"stateEffects\");\n\n/**\n * Symbol for the `template` method.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) uses this property to obtain a\n * component's template, which it will clone into a component's shadow root.\n */\nexport const template = Symbol(\"template\");\n","import { focusTarget, nativeInternals } from \"./internal.js\";\n\n/**\n * Miscellaneous DOM helpers for web components\n *\n * @module dom\n */\n\nconst mousedownListenerKey = Symbol(\"mousedownListener\");\n\n/**\n * Given a string value for a named boolean attribute, return `true` if the\n * value is either: a) the empty string, or b) a case-insensitive match for the\n * name.\n *\n * This is native HTML behavior; see the MDN documentation on [boolean\n * attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes#Boolean_Attributes)\n * for the reasoning.\n *\n * Given a null value, this return `false`.\n * Given a boolean value, this return the value as is.\n *\n * @param {string} name\n * @param {string|boolean|null} value\n */\nexport function booleanAttributeValue(name, value) {\n  return typeof value === \"boolean\"\n    ? value\n    : typeof value === \"string\"\n    ? value === \"\" || name.toLowerCase() === value.toLowerCase()\n    : false;\n}\n\n/**\n * Return the closest focusable node that's either the node itself (if it's\n * focusable), or the closest focusable ancestor in the *composed* tree.\n *\n * If no focusable node is found, this returns null.\n *\n * @param {Node} node\n * @returns {HTMLElement|null}\n */\nexport function closestFocusableNode(node) {\n  for (const current of selfAndComposedAncestors(node)) {\n    // If the current element defines a focusTarget (e.g., via\n    // DelegateFocusMixin), use that, otherwise use the element itself.\n    const target = current[focusTarget] || current;\n    // We want an element that has a tabIndex of 0 or more. We ignore disabled\n    // elements, and slot elements (which oddly have a tabIndex of 0).\n    /** @type {any} */ const cast = target;\n    const focusable =\n      target instanceof HTMLElement &&\n      target.tabIndex >= 0 &&\n      !cast.disabled &&\n      !(target instanceof HTMLSlotElement);\n    if (focusable) {\n      return target;\n    }\n  }\n  return null;\n}\n\n/**\n * Return the ancestors of the given node in the composed tree.\n *\n * In the composed tree, the ancestor of a node assigned to a slot is that slot,\n * not the node's DOM ancestor. The ancestor of a shadow root is its host.\n *\n * @param {Node} node\n * @returns {Iterable<Node>}\n */\nexport function* composedAncestors(node) {\n  /** @type {Node|null} */\n  let current = node;\n  while (true) {\n    current =\n      current instanceof HTMLElement && current.assignedSlot\n        ? current.assignedSlot\n        : current instanceof ShadowRoot\n        ? current.host\n        : current.parentNode;\n    if (current) {\n      yield current;\n    } else {\n      break;\n    }\n  }\n}\n\n/**\n * Returns true if the first node contains the second, even if the second node\n * is in a shadow tree.\n *\n * The standard Node.contains() function does not account for Shadow DOM, and\n * returns false if the supplied target node is sitting inside a shadow tree\n * within the container.\n *\n * @param {Node} container - The container to search within.\n * @param {Node} target - The node that may be inside the container.\n * @returns {boolean} - True if the container contains the target node.\n */\nexport function deepContains(container, target) {\n  /** @type {any} */\n  let current = target;\n  while (current) {\n    const parent = current.assignedSlot || current.parentNode || current.host;\n    if (parent === container) {\n      return true;\n    }\n    current = parent;\n  }\n  return false;\n}\n\n/**\n * Return the first focusable element in the composed tree below the given root.\n * The composed tree includes nodes assigned to slots.\n *\n * This heuristic considers only the document order of the elements below the\n * root and whether a given element is focusable. It currently does not respect\n * the tab sort order defined by tabindex values greater than zero.\n *\n * @param {Node} root - the root of the tree in which to search\n * @returns {HTMLElement|null} - the first focusable element, or null if none\n * was found\n */\nexport function firstFocusableElement(root) {\n  // CSS selectors for focusable elements from\n  // https://stackoverflow.com/a/30753870/76472\n  const focusableQuery =\n    'a[href],area[href],button:not([disabled]),details,iframe,input:not([disabled]),select:not([disabled]),textarea:not([disabled]),[contentEditable=\"true\"],[tabindex]';\n  // Walk the tree looking for nodes that match the above selectors.\n  const walker = walkComposedTree(\n    root,\n    (/** @type {Node} */ node) =>\n      node instanceof HTMLElement &&\n      node.matches(focusableQuery) &&\n      node.tabIndex >= 0\n  );\n  // We only actually need the first matching value.\n  const { value } = walker.next();\n  // value, if defined, will always be an HTMLElement, but we do the following\n  // check to pass static type checking.\n  return value instanceof HTMLElement ? value : null;\n}\n\n/**\n * Trap any `mousedown` events on the `origin` element and prevent the default\n * behavior from setting the focus on that element. Instead, put the focus on\n * the `target` element (or, if the `target` is not focusable, on the target's\n * closest focusable ancestor).\n *\n * If this method is called again with the same `origin` element, the old\n * forwarding is overridden, and focus will now go to the new `target` element.\n *\n * If the `target` parameter is `null`, focus handling will be removed from the\n * indicated `origin`.\n *\n * @param {HTMLElement} origin\n * @param {HTMLElement|null} target\n */\nexport function forwardFocus(origin, target) {\n  if (origin[mousedownListenerKey]) {\n    // Origin was previously forwarding focus, probably to a different target.\n    // Remove the previous event listener.\n    origin.removeEventListener(\"mousedown\", origin[mousedownListenerKey]);\n  }\n  if (target) {\n    origin[mousedownListenerKey] = (/** @type {MouseEvent} */ event) => {\n      // Only process events for the main (usually left) button.\n      if (event.button !== 0) {\n        return;\n      }\n      // What element wants the focus?\n      const desiredTarget = target[focusTarget] || target;\n      // What ancestor can actually take the focus?\n      const focusableTarget = closestFocusableNode(desiredTarget);\n      if (focusableTarget) {\n        focusableTarget.focus();\n        event.preventDefault();\n      }\n    };\n    origin.addEventListener(\"mousedown\", origin[mousedownListenerKey]);\n  }\n}\n\n/**\n * Search a list element for the item that contains the specified target.\n *\n * When dealing with UI events (e.g., mouse clicks) that may occur in\n * subelements inside a list item, you can use this routine to obtain the\n * containing list item.\n *\n * @param {NodeList|Node[]} items - A list element containing a set of items\n * @param {Node} target - A target element that may or may not be an item in the\n * list.\n * @returns {number} - The index of the list child that is or contains the\n * indicated target node. Returns -1 if not found.\n */\nexport function indexOfItemContainingTarget(items, target) {\n  return Array.prototype.findIndex.call(\n    items,\n    (/** @type Node */ item) => item === target || deepContains(item, target)\n  );\n}\n\n/**\n * Return true if the event came from within the node (or from the node itself);\n * false otherwise.\n *\n * @param {Node} node - The node to consider in relation to the event\n * @param {Event} event - The event which may have been raised within/by the\n * node\n * @returns {boolean} - True if the event was raised within or by the node\n */\nexport function ownEvent(node, event) {\n  /** @type {any} */\n  const cast = event;\n  const eventSource = cast.composedPath()[0];\n  return node === eventSource || deepContains(node, eventSource);\n}\n\n/**\n * Returns the set that includes the given node and all of its ancestors in the\n * composed tree. See [composedAncestors](#composedAncestors) for details on the\n * latter.\n *\n * @param {Node} node\n * @returns {Iterable<Node>}\n */\nexport function* selfAndComposedAncestors(node) {\n  if (node) {\n    yield node;\n    yield* composedAncestors(node);\n  }\n}\n\n/**\n * Set an internal state for browsers that support the `:state` selector, as\n * well as an attribute of the same name to permit state-based styling on older\n * browsers.\n *\n * When all browsers support that, we'd like to deprecate use of attributes.\n *\n * @param {Element} element\n * @param {string} name\n * @param {boolean} value\n */\nexport function setInternalState(element, name, value) {\n  element.toggleAttribute(name, value);\n  if (element[nativeInternals] && element[nativeInternals].states) {\n    element[nativeInternals].states.toggle(name, value);\n  }\n}\n\n/** @type {IndexedObject<boolean>} */\nexport const standardBooleanAttributes = {\n  checked: true,\n  defer: true,\n  disabled: true,\n  hidden: true,\n  ismap: true,\n  multiple: true,\n  noresize: true,\n  readonly: true,\n  selected: true,\n};\n\n/**\n * Adds or removes the element's `childNodes` as necessary to match the nodes\n * indicated in the `childNodes` parameter.\n *\n * This operation is useful in cases where you maintain your own set of nodes\n * which should be rendered as the children of some element. When you insert or\n * remove nodes in that set, you can invoke this function to efficiently apply\n * the new set as a delta to the existing children. Only the items in the set\n * that have actually changed will be added or removed.\n *\n * @param {Element} element - the element to update\n * @param {(NodeList|Node[])} childNodes - the set of nodes to apply\n */\nexport function updateChildNodes(element, childNodes) {\n  // If the childNodes parameter is the actual childNodes of an element, then as\n  // we append those nodes to the indicated target element, they'll get removed\n  // from the original set. To keep the list stable, we make a copy.\n  const copy = [...childNodes];\n\n  const oldLength = element.childNodes.length;\n  const newLength = copy.length;\n  const length = Math.max(oldLength, newLength);\n  for (let i = 0; i < length; i++) {\n    const oldChild = element.childNodes[i];\n    const newChild = copy[i];\n    if (i >= oldLength) {\n      // Add new item not in old set.\n      element.append(newChild);\n    } else if (i >= newLength) {\n      // Remove old item past end of new set.\n      element.removeChild(element.childNodes[newLength]);\n    } else if (oldChild !== newChild) {\n      if (copy.indexOf(oldChild, i) >= i) {\n        // Old node comes later in final set. Insert the new node rather than\n        // replacing it so that we don't detach the old node only to have to\n        // reattach it later.\n        element.insertBefore(newChild, oldChild);\n      } else {\n        // Replace old item with new item.\n        element.replaceChild(newChild, oldChild);\n      }\n    }\n  }\n}\n\n/**\n * Walk the composed tree at the root for elements that pass the given filter.\n *\n * Note: the jsDoc types required for the filter function are too complex for\n * the current jsDoc parser to support strong type-checking.\n *\n * @private\n * @param {Node} node\n * @param {function} filter\n * @returns {IterableIterator<Node>}\n */\nfunction* walkComposedTree(node, filter) {\n  if (filter(node)) {\n    yield node;\n  }\n  let children;\n  if (node instanceof HTMLElement && node.shadowRoot) {\n    // Walk the shadow instead of the light DOM.\n    children = node.shadowRoot.children;\n  } else {\n    const assignedNodes =\n      node instanceof HTMLSlotElement\n        ? node.assignedNodes({ flatten: true })\n        : [];\n    children =\n      assignedNodes.length > 0\n        ? // Walk light DOM nodes assigned to this slot.\n          assignedNodes\n        : // Walk light DOM children.\n          node.childNodes;\n  }\n  if (children) {\n    for (let i = 0; i < children.length; i++) {\n      yield* walkComposedTree(children[i], filter);\n    }\n  }\n}\n","/**\n * JavaScript template literals for constructing DOM nodes from HTML\n *\n * @module html\n */\n\n/**\n * A JavaScript template string literal that returns an HTML document fragment.\n *\n * Example:\n *\n *     const fragment = fragmentFrom.html`Hello, <em>world</em>.`\n *\n * returns a `DocumentFragment` whose `innerHTML` is `Hello, <em>world</em>.`\n *\n * This function is called `html` so that it can be easily used with HTML\n * syntax-highlighting extensions for various popular code editors.\n *\n * See also [templateFrom.html](template#html), which returns a similar result but\n * as an HTMLTemplateElement.\n *\n * @param {TemplateStringsArray} strings - the strings passed to the JavaScript template\n * literal\n * @param {string[]} substitutions - the variable values passed to the\n * JavaScript template literal\n * @returns {DocumentFragment}\n */\nexport const fragmentFrom = {\n  html(strings, ...substitutions) {\n    return templateFrom.html(strings, ...substitutions).content;\n  },\n};\n\n/**\n * A JavaScript template string literal that returns an HTML template.\n *\n * Example:\n *\n *     const myTemplate = templateFrom.html`Hello, <em>world</em>.`\n *\n * returns an `HTMLTemplateElement` whose `innerHTML` is `Hello, <em>world</em>.`\n *\n * This function is called `html` so that it can be easily used with HTML\n * syntax-highlighting extensions for various popular code editors.\n *\n * See also [html](html), a helper which returns a similar result but as an\n * DocumentFragment.\n *\n * @param {TemplateStringsArray} strings - the strings passed to the JavaScript template\n * literal\n * @param {string[]} substitutions - the variable values passed to the\n * JavaScript template literal\n * @returns {HTMLTemplateElement}\n */\nexport const templateFrom = {\n  html(strings, ...substitutions) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = String.raw(strings, ...substitutions);\n    return template;\n  },\n};\n","/**\n * Helpers for dynamically creating and patching component templates.\n *\n * The [ShadowTemplateMixin](ShadowTemplateMixin) lets you define a component\n * template that will be used to popuplate the shadow subtree of new component\n * instances. These helpers, especially the [html](#html) function, are intended\n * to simplify the creation of such templates.\n *\n * In particular, these helpers can be useful in [patching\n * templates](customizing#template-patching) inherited from a base class.\n *\n * Some of these functions take _descriptors_ that can either be a class, a tag\n * name, or an HTML template. These are generally used to fill specific roles in\n * an element's template; see [element roles](customizing#element-part-types).\n *\n * @module template\n */\n\nimport { templateFrom } from \"./htmlLiterals.js\";\n\n// Used by registerCustomElement.\nconst mapBaseTagToCount = new Map();\n\n/**\n * Create an element from a role descriptor (a component class constructor or\n * an HTML tag name).\n *\n * If the descriptor is an HTML template, and the resulting document fragment\n * contains a single top-level node, that node is returned directly (instead of\n * the fragment).\n *\n * @param {PartDescriptor} descriptor - the descriptor that will be used to\n * create the element\n * @returns {Element} the new element\n */\nexport function createElement(descriptor) {\n  if (typeof descriptor === \"function\") {\n    // Instantiable component class constructor\n    let element;\n    try {\n      element = new descriptor();\n    } catch (e) {\n      if (e.name === \"TypeError\") {\n        // Most likely this error results from the fact that the indicated\n        // component class hasn't been registered. Register it now with a random\n        // name and try again.\n        registerCustomElement(descriptor);\n        element = new descriptor();\n      } else {\n        // The exception was for some other reason.\n        throw e;\n      }\n    }\n    return element;\n    // @ts-ignore\n  } else {\n    // String tag name: e.g., 'div'\n    return document.createElement(descriptor);\n  }\n}\n\nexport function html(strings, ...substitutions) {\n  /* eslint-disable no-console */\n  console.warn(\n    `The template.html helper has moved to htmlLiterals.js, and is now called \\`templateFrom.html\\`. Please update your imports.`\n  );\n  return templateFrom.html(strings, ...substitutions);\n}\n\n/**\n * Register the indicated constructor as a custom element class.\n *\n * This function generates a suitable string tag for the class. If the\n * constructor is a named function (which is typical for hand-authored code),\n * the function's `name` will be used as the base for the tag. If the\n * constructor is an anonymous function (which often happens in\n * generated/minified code), the tag base will be \"custom-element\".\n *\n * In either case, this function adds a uniquifying number to the end of the\n * base to produce a complete tag.\n *\n * @private\n * @param {Constructor<HTMLElement>} classFn\n */\nfunction registerCustomElement(classFn) {\n  let baseTag;\n  // HTML places more restrictions on the first character in a tag than\n  // JavaScript places on the first character of a class name. We apply this\n  // more restrictive condition to the class names we'll convert to tags. Class\n  // names that fail this check -- often generated class names -- will result in\n  // a base tag name of \"custom-element\".\n  const classNameRegex = /^[A-Za-z][A-Za-z0-9_$]*$/;\n  const classNameMatch = classFn.name && classFn.name.match(classNameRegex);\n  if (classNameMatch) {\n    // Given the class name `FooBar`, calculate the base tag name `foo-bar`.\n    const className = classNameMatch[0];\n    const uppercaseRegEx = /([A-Z])/g;\n    const hyphenated = className.replace(\n      uppercaseRegEx,\n      (match, letter, offset) => (offset > 0 ? `-${letter}` : letter)\n    );\n    baseTag = hyphenated.toLowerCase();\n  } else {\n    baseTag = \"custom-element\";\n  }\n  // Add a uniquifying number to the end of the tag until we find a tag\n  // that hasn't been registered yet.\n  let count = mapBaseTagToCount.get(baseTag) || 0;\n  let tag;\n  for (; ; count++) {\n    tag = `${baseTag}-${count}`;\n    if (!customElements.get(tag)) {\n      // Not in use.\n      break;\n    }\n  }\n  // Register with the generated tag.\n  customElements.define(tag, /** @type {any} */ classFn);\n  // Bump number and remember it. If we see the same base tag again later, we'll\n  // start counting at that number in our search for a uniquifying number.\n  mapBaseTagToCount.set(baseTag, count + 1);\n}\n\n/**\n * Replace an original node in a tree or document fragment with the indicated\n * replacement node. The attributes, classes, styles, and child nodes of the\n * original node will be moved to the replacement.\n *\n * @param {Node} original - an existing node to be replaced\n * @param {Node} replacement - the node to replace the existing node with\n * @returns {Node} the updated replacement node\n */\nexport function replace(original, replacement) {\n  const parent = original.parentNode;\n  if (!parent) {\n    throw \"An element must have a parent before it can be substituted.\";\n  }\n  if (\n    (original instanceof HTMLElement || original instanceof SVGElement) &&\n    (replacement instanceof HTMLElement || replacement instanceof SVGElement)\n  ) {\n    // Merge attributes from original to replacement, letting replacement win\n    // conflicts. Handle classes and styles separately (below).\n    Array.prototype.forEach.call(original.attributes, (\n      /** @type {Attr} */ attribute\n    ) => {\n      if (\n        !replacement.getAttribute(attribute.name) &&\n        attribute.name !== \"class\" &&\n        attribute.name !== \"style\"\n      ) {\n        replacement.setAttribute(attribute.name, attribute.value);\n      }\n    });\n    // Copy classes/styles from original to replacement, letting replacement win\n    // conflicts.\n    Array.prototype.forEach.call(original.classList, (\n      /** @type {string} */ className\n    ) => {\n      replacement.classList.add(className);\n    });\n    Array.prototype.forEach.call(original.style, (\n      /** @type {number} */ key\n    ) => {\n      if (!replacement.style[key]) {\n        replacement.style[key] = original.style[key];\n      }\n    });\n  }\n  // Copy over children.\n  // @ts-ignore\n  replacement.append(...original.childNodes);\n\n  parent.replaceChild(replacement, original);\n  return replacement;\n}\n\n/**\n * Replace a node with a new element, transferring all attributes, classes,\n * styles, and child nodes from the original(s) to the replacement(s).\n *\n * The descriptor used for the replacements can be a 1) component class\n * constructor, 2) an HTML tag name, or 3) an HTML template. For #1 and #2, if\n * the existing elements that match the selector are already of the desired\n * class/tag name, the replacement operation is skipped.\n *\n * @param {Element} original - the node to replace\n * @param {PartDescriptor} descriptor - the descriptor used to generate the\n * replacement element\n * @returns {Element} the replacement node(s)\n */\nexport function transmute(original, descriptor) {\n  if (\n    (typeof descriptor === \"function\" && original.constructor === descriptor) ||\n    (typeof descriptor === \"string\" &&\n      original instanceof Element &&\n      original.localName === descriptor)\n  ) {\n    // Already correct type of element, no transmutation necessary.\n    return original;\n  } else {\n    // Transmute the single node.\n    const replacement = createElement(descriptor);\n    replace(original, replacement);\n    return replacement;\n  }\n}\n","import { booleanAttributeValue, standardBooleanAttributes } from \"./dom.js\";\nimport { rendering } from \"./internal.js\";\n\n// Memoized maps of attribute to property names and vice versa.\n// We initialize this with the special case of the tabindex (lowercase \"i\")\n// attribute, which is mapped to the tabIndex (capital \"I\") property.\n/** @type {IndexedObject<string>} */\nconst attributeToPropertyNames = {\n  tabindex: \"tabIndex\",\n};\n/** @type {IndexedObject<string>} */\nconst propertyNamesToAttributes = {\n  tabIndex: \"tabindex\",\n};\n\n/**\n * Sets properties when the corresponding attributes change\n *\n * If your component exposes a setter for a property, it's generally a good\n * idea to let devs using your component be able to set that property in HTML\n * via an element attribute. You can code that yourself by writing an\n * `attributeChangedCallback`, or you can use this mixin to get a degree of\n * automatic support.\n *\n * This mixin implements an `attributeChangedCallback` that will attempt to\n * convert a change in an element attribute into a call to the corresponding\n * property setter. Attributes typically follow hyphenated names (\"foo-bar\"),\n * whereas properties typically use camelCase names (\"fooBar\"). This mixin\n * respects that convention, automatically mapping the hyphenated attribute\n * name to the corresponding camelCase property name.\n *\n * Example: You define a component using this mixin:\n *\n *     class MyElement extends AttributeMarshallingMixin(HTMLElement) {\n *       get fooBar() { return this._fooBar; }\n *       set fooBar(value) { this._fooBar = value; }\n *     }\n *\n * If someone then instantiates your component in HTML:\n *\n *     <my-element foo-bar=\"Hello\"></my-element>\n *\n * Then, after the element has been upgraded, the `fooBar` setter will\n * automatically be invoked with the initial value \"Hello\".\n *\n * Attributes can only have string values. If you'd like to convert string\n * attributes to other types (numbers, booleans), you must implement parsing\n * yourself.\n *\n * @module AttributeMarshallingMixin\n * @param {Constructor<CustomElement>} Base\n */\nexport default function AttributeMarshallingMixin(Base) {\n  // The class prototype added by the mixin.\n  class AttributeMarshalling extends Base {\n    /**\n     * Handle a change to the attribute with the given name.\n     *\n     * @ignore\n     * @param {string} attributeName\n     * @param {string} oldValue\n     * @param {string} newValue\n     */\n    attributeChangedCallback(attributeName, oldValue, newValue) {\n      if (super.attributeChangedCallback) {\n        super.attributeChangedCallback(attributeName, oldValue, newValue);\n      }\n\n      // Sometimes this callback is invoked when there's not actually any\n      // change, in which we skip invoking the property setter.\n      //\n      // We also skip setting properties if we're rendering. A component may\n      // want to reflect property values to attributes during rendering, but\n      // such attribute changes shouldn't trigger property updates.\n      if (newValue !== oldValue && !this[rendering]) {\n        const propertyName = attributeToPropertyName(attributeName);\n        // If the attribute name corresponds to a property name, set the property.\n        if (propertyName in this) {\n          // Parse standard boolean attributes.\n          const parsed = standardBooleanAttributes[attributeName]\n            ? booleanAttributeValue(attributeName, newValue)\n            : newValue;\n          this[propertyName] = parsed;\n        }\n      }\n    }\n\n    // Because maintaining the mapping of attributes to properties is tedious,\n    // this provides a default implementation for `observedAttributes` that\n    // assumes that your component will want to expose all public properties in\n    // your component's API as properties.\n    //\n    // You can override this default implementation of `observedAttributes`. For\n    // example, if you have a system that can statically analyze which\n    // properties are available to your component, you could hand-author or\n    // programmatically generate a definition for `observedAttributes` that\n    // avoids the minor run-time performance cost of inspecting the component\n    // prototype to determine your component's public properties.\n    static get observedAttributes() {\n      return attributesForClass(this);\n    }\n  }\n\n  return AttributeMarshalling;\n}\n\n/**\n * Return the custom attributes for the given class.\n *\n * E.g., if the supplied class defines a `fooBar` property, then the resulting\n * array of attribute names will include the \"foo-bar\" attribute.\n *\n * @private\n * @param {Constructor<HTMLElement>} classFn\n * @returns {string[]}\n */\nfunction attributesForClass(classFn) {\n  // We treat the HTMLElement base class as if it has no attributes, since we\n  // don't want to receive attributeChangedCallback for it (or anything further\n  // up the protoype chain).\n  if (classFn === HTMLElement) {\n    return [];\n  }\n\n  // Get attributes for parent class.\n  const baseClass = Object.getPrototypeOf(classFn.prototype).constructor;\n\n  // See if parent class defines observedAttributes manually.\n  let baseAttributes = baseClass.observedAttributes;\n  if (!baseAttributes) {\n    // Calculate parent class attributes ourselves.\n    baseAttributes = attributesForClass(baseClass);\n  }\n\n  // Get the properties for this particular class.\n  const propertyNames = Object.getOwnPropertyNames(classFn.prototype);\n  const setterNames = propertyNames.filter((propertyName) => {\n    const descriptor = Object.getOwnPropertyDescriptor(\n      classFn.prototype,\n      propertyName\n    );\n    return descriptor && typeof descriptor.set === \"function\";\n  });\n\n  // Map the property names to attribute names.\n  const attributes = setterNames.map((setterName) =>\n    propertyNameToAttribute(setterName)\n  );\n\n  // Merge the attribute for this class and its base class.\n  const diff = attributes.filter(\n    (attribute) => baseAttributes.indexOf(attribute) < 0\n  );\n  const result = baseAttributes.concat(diff);\n\n  return result;\n}\n\n/**\n * Convert hyphenated foo-bar attribute name to camel case fooBar property name.\n *\n * @private\n * @param {string} attributeName\n */\nfunction attributeToPropertyName(attributeName) {\n  let propertyName = attributeToPropertyNames[attributeName];\n  if (!propertyName) {\n    // Convert and memoize.\n    const hyphenRegEx = /-([a-z])/g;\n    propertyName = attributeName.replace(hyphenRegEx, (match) =>\n      match[1].toUpperCase()\n    );\n    attributeToPropertyNames[attributeName] = propertyName;\n  }\n  return propertyName;\n}\n\n/**\n * Convert a camel case fooBar property name to a hyphenated foo-bar attribute.\n *\n * @private\n * @param {string} propertyName\n */\nfunction propertyNameToAttribute(propertyName) {\n  let attribute = propertyNamesToAttributes[propertyName];\n  if (!attribute) {\n    // Convert and memoize.\n    const uppercaseRegEx = /([A-Z])/g;\n    attribute = propertyName.replace(uppercaseRegEx, \"-$1\").toLowerCase();\n    propertyNamesToAttributes[propertyName] = attribute;\n  }\n  return attribute;\n}\n","import {\n  defaultState,\n  firstRender,\n  raiseChangeEvents,\n  render,\n  renderChanges,\n  rendered,\n  rendering,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst stateKey = Symbol(\"state\");\n/** @type {any} */\nconst raiseChangeEventsInNextRenderKey = Symbol(\n  \"raiseChangeEventsInNextRender\"\n);\n// Tracks total set of changes made to elements since their last render.\n/** @type {any} */\nconst changedSinceLastRenderKey = Symbol(\"changedSinceLastRender\");\n\n/**\n * Manages component state and renders changes in state\n *\n * This is modeled after React/Preact's state management, and is adapted for\n * use with web components. Applying this mixin to a component will give it\n * FRP behavior comparable to React's.\n *\n * This model is very basic. It's key aspects are:\n * * an immutable `state` property updated via `setState` calls.\n * * a `render` method that will be invoked asynchronously when state changes.\n *\n * @module ReactiveMixin\n * @param {Constructor<CustomElement>} Base\n */\nexport default function ReactiveMixin(Base) {\n  class Reactive extends Base {\n    constructor() {\n      super();\n\n      // Components can inspect `firstRender` during rendering to do special\n      // work the first time (like wire up event handlers). Until the first\n      // render actually happens, we set that flag to be undefined so we have a\n      // way of distinguishing between a component that has never rendered and\n      // one that is being rendered for the nth time.\n      this[firstRender] = undefined;\n\n      // We want to support the standard HTML pattern of only raising events in\n      // response to direct user interactions. For a detailed discussion of this\n      // point, see the Gold Standard checklist item for [Propery Change\n      // Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n      //\n      // To support this pattern, we define a flag indicating whether change\n      // events should be raised. By default, we want the flag to be false. In\n      // UI event handlers, a component can temporarily set the flag to true. If\n      // a setState call is made while the flag is true, then that fact will be\n      // remembered and passed the subsequent render/rendered methods. That will\n      // let the methods know whether they should raise property change events.\n      this[raiseChangeEvents] = false;\n\n      // Maintain a change log of all fields which have changed since the\n      // component was last rendered.\n      this[changedSinceLastRenderKey] = null;\n\n      // Set the initial state from the default state defined by the component\n      // and its mixins/base classes.\n      this[setState](this[defaultState]);\n    }\n\n    // When the component is attached to the document (or upgraded), we will\n    // generally render the component for the first time. That operation will\n    // include rendering of the default state and any state changes that\n    // happened between constructor time and this connectedCallback.\n    connectedCallback() {\n      if (super.connectedCallback) {\n        super.connectedCallback();\n      }\n\n      // Render the component.\n      //\n      // If the component was forced to render before this point, and the state\n      // hasn't changed, this call will be a no-op.\n      this[renderChanges]();\n    }\n\n    /**\n     * The default state for the component. This can be extended by mixins and\n     * classes to provide additional default state.\n     *\n     * @type {PlainObject}\n     */\n    // @ts-ignore\n    get [defaultState]() {\n      // Defer to base implementation if defined.\n      return super[defaultState] || {};\n    }\n\n    /**\n     * Render the indicated changes in state to the DOM.\n     *\n     * The default implementation of this method does nothing. Override this\n     * method in your component to update your component's host element and\n     * any shadow elements to reflect the component's new state. See the\n     * [rendering example](ReactiveMixin#rendering).\n     *\n     * Be sure to call `super` in your method implementation so that your\n     * component's base classes and mixins have a chance to perform their own\n     * render work.\n     *\n     * @param {ChangedFlags} changed - dictionary of flags indicating which state\n     * members have changed since the last render\n     */\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n    }\n\n    /**\n     * Render any pending component changes to the DOM.\n     *\n     * This method does nothing if the state has not changed since the last\n     * render call.\n     *\n     * ReactiveMixin will invoke this method following a `setState` call;\n     * you should not need to invoke this method yourself.\n     *\n     * This method invokes the internal `render` method, then invokes the\n     * `rendered` method.\n     */\n    [renderChanges]() {\n      if (this[firstRender] === undefined) {\n        // First render.\n        this[firstRender] = true;\n      }\n\n      // Get the log of which fields have changed since the last render.\n      const changed = this[changedSinceLastRenderKey];\n\n      // We only render if this is the first render, or state has changed since\n      // the last render.\n      if (this[firstRender] || changed) {\n        // If at least one of the[setState] calls was made in response\n        // to user interaction or some other component-internal event, set the\n        // raiseChangeEvents flag so that render/rendered methods know whether\n        // to raise property change events. See the comments in the component\n        // constructor where we initialize this flag for details.\n        const saveRaiseChangeEvents = this[raiseChangeEvents];\n        this[raiseChangeEvents] = this[raiseChangeEventsInNextRenderKey];\n\n        // We set a flag to indicate that rendering is happening. The component\n        // may use this to avoid triggering other updates during the render.\n        this[rendering] = true;\n\n        // Invoke any internal render implementations.\n        this[render](changed);\n\n        this[rendering] = false;\n\n        // Since we've now rendered all changes, clear the change log. If other\n        // async render calls are queued up behind this call, they'll see an\n        // empty change log, and so skip unnecessary render work.\n        this[changedSinceLastRenderKey] = null;\n\n        // Let the component know it was rendered.\n        this[rendered](changed);\n\n        // We've now rendered for the first time.\n        this[firstRender] = false;\n\n        // Restore state of event flags.\n        this[raiseChangeEvents] = saveRaiseChangeEvents;\n        this[raiseChangeEventsInNextRenderKey] = saveRaiseChangeEvents;\n      }\n    }\n\n    /**\n     * Perform any work that must happen after state changes have been rendered\n     * to the DOM.\n     *\n     * The default implementation of this method does nothing. Override this\n     * method in your component to perform work that requires the component to\n     * be fully rendered, such as setting focus on a shadow element or\n     * inspecting the computed style of an element. If such work should result\n     * in a change in component state, you can safely call `setState` during the\n     * `rendered` method.\n     *\n     * Be sure to call `super` in your method implementation so that your\n     * component's base classes and mixins have a chance to perform their own\n     * post-render work.\n     *\n     * @param {ChangedFlags} changed\n     */\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n    }\n\n    /**\n     * Update the component's state by merging the specified changes on\n     * top of the existing state. If the component is connected to the document,\n     * and the new state has changed, this returns a promise to asynchronously\n     * render the component. Otherwise, this returns a resolved promise.\n     *\n     * @param {PlainObject} changes - the changes to apply to the element's state\n     * @returns {Promise} - resolves when the new state has been rendered\n     */\n    async [setState](changes) {\n      // There's no good reason to have a render method update state.\n      if (this[rendering]) {\n        /* eslint-disable no-console */\n        console.warn(\n          `${this.constructor.name} called [setState] during rendering, which you should avoid.\\nSee https://elix.org/documentation/ReactiveMixin.`\n        );\n      }\n\n      // Apply the changes to a copy of the component's current state to produce\n      // a new, updated state and a dictionary of flags indicating which fields\n      // actually changed.\n      const { state, changed } = copyStateWithChanges(this, changes);\n\n      // We only need to apply the changes to the component state if: a) the\n      // current state is undefined (this is the first time setState has been\n      // called), or b) the supplied changes parameter actually contains\n      // substantive changes.\n      if (this[stateKey] && Object.keys(changed).length === 0) {\n        // No need to update state.\n        return;\n      }\n\n      // Freeze the new state so it's immutable. This prevents accidental\n      // attempts to set state without going through setState.\n      Object.freeze(state);\n\n      // Set this as the component's new state.\n      this[stateKey] = state;\n\n      // If setState was called with the raiseChangeEvents flag set, record that\n      // fact for use in rendering. See the comments in the component\n      // constructor for details.\n      if (this[raiseChangeEvents]) {\n        this[raiseChangeEventsInNextRenderKey] = true;\n      }\n\n      // Look to see whether the component is already set up to render.\n      const willRender =\n        this[firstRender] === undefined ||\n        this[changedSinceLastRenderKey] !== null;\n\n      // Add this round of changed fields to the complete log of fields that\n      // have changed since the component was last rendered.\n      this[changedSinceLastRenderKey] = Object.assign(\n        this[changedSinceLastRenderKey] || {},\n        changed\n      );\n\n      // We only need to queue a render if we're in the document and a render\n      // operation hasn't already been queued for this component. If we're not\n      // in the document yet, when the component is eventually added to the\n      // document, the connectedCallback will ensure we render at that point.\n      const needsRender = this.isConnected && !willRender;\n      if (needsRender) {\n        // Yield with promise timing. This lets any *synchronous* setState calls\n        // that happen after this current setState call complete first. Their\n        // effects on the state will be batched up, and accumulate in the change\n        // log stored under this[changedSinceLastRenderKey].\n        await Promise.resolve();\n\n        // Now that the above promise has resolved, render the component. By the\n        // time this line is reached, the complete log of batched changes can be\n        // applied in a single render call.\n        this[renderChanges]();\n      }\n    }\n\n    /**\n     * The component's current state.\n     *\n     * The returned state object is immutable. To update it, invoke\n     * `internal.setState`.\n     *\n     * It's extremely useful to be able to inspect component state while\n     * debugging. If you append `?elixdebug=true` to a page's URL, then\n     * ReactiveMixin will conditionally expose a public `state` property that\n     * returns the component's state. You can then access the state in your\n     * browser's debug console.\n     *\n     * @type {PlainObject}\n     */\n    get [state]() {\n      return this[stateKey];\n    }\n\n    /**\n     * Ask the component whether a state with a set of recently-changed fields\n     * implies that additional second-order changes should be applied to that\n     * state to make it consistent.\n     *\n     * This method is invoked during a call to `internal.setState` to give all\n     * of a component's mixins and classes a chance to respond to changes in\n     * state. If one mixin/class updates state that it controls, another\n     * mixin/class may want to respond by updating some other state member that\n     * *it* controls.\n     *\n     * This method should return a dictionary of changes that should be applied\n     * to the state. If the dictionary object is not empty, the\n     * `internal.setState` method will apply the changes to the state, and\n     * invoke this `stateEffects` method again to determine whether there are\n     * any third-order effects that should be applied. This process repeats\n     * until all mixins/classes report that they have no additional changes to\n     * make.\n     *\n     * See an example of how `ReactiveMixin` invokes the `stateEffects` to\n     * [ensure state consistency](ReactiveMixin#ensuring-state-consistency).\n     *\n     * @param {PlainObject} state - a proposal for a new state\n     * @param {ChangedFlags} changed - the set of fields changed in this\n     * latest proposal for the new state\n     * @returns {PlainObject}\n     */\n    [stateEffects](state, changed) {\n      return super[stateEffects] ? super[stateEffects](state, changed) : {};\n    }\n  }\n\n  // Expose state when debugging; see note for `[state]` getter.\n  const elixdebug = new URLSearchParams(location.search).get(\"elixdebug\");\n  if (elixdebug === \"true\") {\n    Object.defineProperty(Reactive.prototype, \"state\", {\n      get() {\n        return this[state];\n      },\n    });\n  }\n\n  return Reactive;\n}\n\n/**\n * Create a copy of the component's state with the indicated changes applied.\n * Ask the component whether the new state implies any second-order effects. If\n * so, apply those and loop again until the state has stabilized. Return the new\n * state and a dictionary of flags indicating which fields were actually\n * changed.\n *\n * @private\n * @param {Element} element\n * @param {PlainObject} changes\n */\nexport function copyStateWithChanges(element, changes) {\n  // Start with a copy of the current state.\n  /** @type {PlainObject} */\n  const state = Object.assign({}, element[stateKey]);\n  /** @type {ChangedFlags} */\n  const changed = {};\n  // Take the supplied changes as the first round of effects.\n  let effects = changes;\n  // Loop until there are no effects to apply.\n  /* eslint-disable no-constant-condition */\n  while (true) {\n    // See whether the effects actually changed anything in state.\n    const changedByEffects = fieldsChanged(state, effects);\n    if (Object.keys(changedByEffects).length === 0) {\n      // No more effects to apply; we're done.\n      break;\n    }\n    // Apply the effects.\n    Object.assign(state, effects);\n    Object.assign(changed, changedByEffects);\n    // Ask the component if there are any second- (or third-, etc.) order\n    // effects that should be applied.\n    effects = element[stateEffects](state, changedByEffects);\n  }\n  return { state, changed };\n}\n\n/**\n * Return true if the two values are equal.\n *\n * @private\n * @param {any} value1\n * @param {any} value2\n * @returns {boolean}\n */\nfunction equal(value1, value2) {\n  if (value1 instanceof Date && value2 instanceof Date) {\n    return value1.getTime() === value2.getTime();\n  }\n  return value1 === value2;\n}\n\n/**\n * Return a dictionary of flags indicating which of the indicated changes to the\n * state are actually substantive changes.\n *\n * @private\n * @param {PlainObject} state\n * @param {PlainObject} changes\n */\nfunction fieldsChanged(state, changes) {\n  /** @type {ChangedFlags} */\n  const changed = {};\n  for (const field in changes) {\n    if (!equal(changes[field], state[field])) {\n      changed[field] = true;\n    }\n  }\n  return changed;\n}\n","import {\n  delegatesFocus,\n  hasDynamicTemplate,\n  ids,\n  render,\n  shadowRoot,\n  shadowRootMode,\n  template,\n} from \"./internal.js\";\n\n// A cache of processed templates, indexed by element class.\nconst classTemplateMap = new Map();\n\n// A Proxy that maps shadow element IDs to shadow elements.\n// This will be return as the element's `this[ids]` property;\n// see comments in that property below.\n/** @type {any} */\nconst shadowIdProxyKey = Symbol(\"shadowIdProxy\");\n\n// A reference stored on the shadow element proxy target to get to the actual\n// element. We use a Symbol here instead of a string name to avoid naming\n// conflicts with the element's internal shadow element IDs.\nconst proxyElementKey = Symbol(\"proxyElement\");\n\n// A handler used for the shadow element ID proxy.\nconst shadowIdProxyHandler = {\n  get(target, id) {\n    // From this proxy, obtain a reference to the original component.\n    const element = target[proxyElementKey];\n\n    // Get a reference to the component's open or closed shadow root.\n    const root = element[shadowRoot];\n\n    // Look for a shadow element with the indicated ID.\n    return root && typeof id === \"string\" ? root.getElementById(id) : null;\n  },\n};\n\n/**\n * Stamps a template into a component's Shadow DOM when instantiated\n *\n * To use this mixin, define a `template` method that returns a string or HTML\n * `<template>` element:\n *\n *     import { createElement, replace, transmute } from 'elix/src/template.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       get [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * When your component class is instantiated, a shadow root will be created on\n * the instance, and the contents of the template will be cloned into the\n * shadow root. If your component does not define a `template` method, this\n * mixin has no effect.\n *\n * This adds a member on the component called `this[ids]` that can be used to\n * reference shadow elements with IDs. E.g., if component's shadow contains an\n * element `<button id=\"foo\">`, then this mixin will create a member\n * `this[ids].foo` that points to that button.\n *\n * @module ShadowTemplateMixin\n * @param {Constructor<HTMLElement>} Base\n */\nexport default function ShadowTemplateMixin(Base) {\n  // The class prototype added by the mixin.\n  class ShadowTemplate extends Base {\n    /**\n     * A convenient shortcut for looking up an element by ID in the component's\n     * Shadow DOM subtree.\n     *\n     * Example: if component's template contains a shadow element `<button\n     * id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n     * the corresponding button in the component instance's shadow tree. The\n     * `ids` property is simply a shorthand for `getElementById`, so\n     * `this[ids].foo` is the same as\n     * `this[shadowRoot].getElementById('foo')`.\n     *\n     * @type {object} - a dictionary mapping shadow element IDs to elements\n     */\n    get [ids]() {\n      if (!this[shadowIdProxyKey]) {\n        // Construct a proxy that maps to getElementById.\n        const target = {\n          // Give the proxy a means of refering to this element via the target.\n          [proxyElementKey]: this,\n        };\n        this[shadowIdProxyKey] = new Proxy(target, shadowIdProxyHandler);\n      }\n      return this[shadowIdProxyKey];\n    }\n\n    /*\n     * If the component defines a template, a shadow root will be created on the\n     * component instance, and the template stamped into it.\n     */\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      // We populate the shadow root if the component doesn't have a shadow;\n      // i.e., the first time the component is rendered. For this check, we use\n      // an internal reference we maintain for the shadow root; see below.\n      if (!this[shadowRoot]) {\n        // If this type of element defines a template, prepare it for use.\n        const template = getTemplate(this);\n\n        if (template) {\n          // Stamp the template into a new shadow root.\n          const root = this.attachShadow({\n            delegatesFocus: this[delegatesFocus],\n            mode: this[shadowRootMode],\n          });\n          const clone = document.importNode(template.content, true);\n          root.append(clone);\n\n          // After this call, we won't be able to rely on being able to access\n          // the shadow root via `this.shadowRoot`, because the component may\n          // have asked for a closed shadow root. We save a reference to the\n          // shadow root now so that the component always has a consistent means\n          // to reference its own shadow root.\n          this[shadowRoot] = root;\n        } else {\n          // No template. Set shadow root to null (instead of undefined) so we\n          // won't try to render shadow on next render.\n          this[shadowRoot] = null;\n        }\n      }\n    }\n\n    /**\n     * @type {ShadowRootMode}\n     * @default \"open\"\n     */\n    get [shadowRootMode]() {\n      return \"open\";\n    }\n  }\n\n  return ShadowTemplate;\n}\n\n/**\n * Return the template for the element being instantiated.\n *\n * If this is the first time we're creating this type of element, or the\n * component has indicated that its template is dynamic (and should be retrieved\n * each time), ask the component class for the template and cache the result.\n * Otherwise, immediately return the cached template.\n *\n * @private\n * @param {HTMLElement} element\n * @returns {HTMLTemplateElement}\n */\nfunction getTemplate(element) {\n  let t = element[hasDynamicTemplate]\n    ? undefined // Always retrieve template\n    : classTemplateMap.get(element.constructor); // See if we've cached it\n  if (t === undefined) {\n    // Ask the component for its template.\n    t = element[template];\n    // A component using this mixin isn't required to supply a template --\n    // if they don't, they simply won't end up with a shadow root.\n    if (t) {\n      // But if the component does supply a template, it needs to be an\n      // HTMLTemplateElement instance.\n      if (!(t instanceof HTMLTemplateElement)) {\n        throw `Warning: the [template] property for ${element.constructor.name} must return an HTMLTemplateElement.`;\n      }\n    }\n    if (!element[hasDynamicTemplate]) {\n      // Store prepared template for next creation of same type of element.\n      // If the component didn't define a template, store null so that we skip\n      // the template retrieval next time.\n      classTemplateMap.set(element.constructor, t || null);\n    }\n  }\n  return t;\n}\n","import AttributeMarshallingMixin from \"./AttributeMarshallingMixin.js\";\nimport ReactiveMixin from \"./ReactiveMixin.js\";\nimport ShadowTemplateMixin from \"./ShadowTemplateMixin.js\";\n\n/**\n * General-purpose base for writing components in functional-reactive style\n *\n * This base class lets you create web components in a functional-reactive\n * programming (FRP) style. It simply bundles a small set of mixins:\n *\n *     const ReactiveElement =\n *       AttributeMarshallingMixin(\n *       ReactiveMixin(\n *       ShadowTemplateMixin(\n *         HTMLElement\n *       )))));\n *\n * `ReactiveElement` is provided as a convenience. You can achieve the same\n * result by applying the mixins yourself to `HTMLElement`.\n *\n * @inherits HTMLElement\n * @mixes AttributeMarshallingMixin\n * @mixes ReactiveMixin\n * @mixes ShadowTemplateMixin\n */\nconst ReactiveElement = AttributeMarshallingMixin(\n  ReactiveMixin(ShadowTemplateMixin(HTMLElement))\n);\n\nexport default ReactiveElement;\n","/**\n * Collection of shared Symbol objects for internal component communication.\n *\n * The shared `Symbol` objects in this module let mixins and a component\n * internally communicate without exposing these internal properties and methods\n * in the component's public API. They also help avoid unintentional name\n * collisions, as a component developer must specifically import the `internal`\n * module and reference one of its symbols.\n *\n * To use these `Symbol` objects in your own component, include this module and\n * then create a property or method whose key is the desired Symbol. E.g.,\n * [ShadowTemplateMixin](ShadowTemplateMixin) expects a component to define\n * a property called [template](#template):\n *\n *     import { template } from 'elix/src/core/internal.js';\n *     import { templateFrom } from 'elix/src/core/htmlLiterals.js'\n *     import ShadowTemplateMixin from 'elix/src/core/ShadowTemplateMixin.js';\n *\n *     class MyElement extends ShadowTemplateMixin(HTMLElement) {\n *       [template]() {\n *         return templateFrom.html`Hello, <em>world</em>.`;\n *       }\n *     }\n *\n * The above use of the internal `template` member lets the mixin find the\n * component's template in a way that will not pollute the component's public\n * API or interfere with other component logic. For example, if for some reason\n * the component wants to define a separate property with the plain string name,\n * \"template\", it can do so without affecting the above property setter.\n *\n * @module internal\n */\n\nimport * as coreInternal from \"../core/internal.js\";\n\n/**\n * Symbol for the `applyElementData` method.\n *\n * Components that want to be able to apply data from one element to another\n * can support this method. E.g., [DropdownList](DropdownList) uses this to\n * apply data from the selected item to the component's value part.\n */\nexport const applyElementData = Symbol(\"applyElementData\");\n\n/**\n * Symbol for the `checkSize` method.\n *\n * If defined, this method will be invoked by [ResizeMixin](ResizeMixin)\n * when an element's size may have changed. The default implementation of\n * this method compares the element's current `clientHeight` and `clientWidth`\n * properties against the last known values of those properties (saved in\n * `state.clienHeight` and `state.clientWidth`).\n *\n * Components should override this method if they contain elements that may need\n * to know about size changes as well. For example, when an [Overlay](Overlay)\n * mixin opens, it invokes this method on any content elements that define it.\n * This gives the contents a chance to resize in response to being displayed.\n */\nexport const checkSize = Symbol(\"checkSize\");\n\n/**\n * Symbol for the `closestAvailableItemIndex` method.\n *\n * This method is defined by [ItemsCursorMixin](ItemsCursorMixin). You can call\n * this if you want to find an item at a particular location, but may need to\n * account for the fact that the item at that position is not available, and\n * would like to find the closest item that is available.\n */\nexport const closestAvailableItemIndex = Symbol(\"closestAvailableItemIndex\");\n\n/**\n * Symbol for the `contentSlot` property.\n *\n * [SlotContentMixin](SlotContentMixin) uses this to identify which slot\n * element in the component's shadow tree that holds the component's content.\n * By default, this is the first slot element with no \"name\" attribute. You\n * can override this to return a different slot.\n */\nexport const contentSlot = Symbol(\"contentSlot\");\n\n/**\n * The default state for this element.\n */\nexport const defaultState = coreInternal.defaultState;\n\n/**\n * Symbol for the `defaultTabIndex` property.\n *\n * [KeyboardMixin](KeyboardMixin) uses this if it is unable to successfully\n * parse a string tabindex attribute.\n */\nexport const defaultTabIndex = Symbol(\"defaultTabIndex\");\n\n/**\n * Symbol for the `delegatesFocus` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property, returning\n * true to indicate that the focus is being delegated, even in browsers that\n * don't support that natively. Mixins like [KeyboardMixin](KeyboardMixin) use\n * this to accommodate focus delegation.\n */\nexport const delegatesFocus = coreInternal.delegatesFocus;\n\n/**\n * Symbol for the `effectEndTarget` property.\n *\n * [TransitionEffectMixin](TransitionEffectMixin) inspects this property to\n * determine which element's `transitionend` event will signal the end of a\n * transition effect.\n */\nexport const effectEndTarget = Symbol(\"effectEndTarget\");\n\n/**\n * Symbol for the `firstRender` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets the property to `true` during the\n * element's first `connectedCallback`, then `false` in subsequent callbacks.\n *\n * You can inspect this property in your own `connectedCallback` handler\n * to do work like wiring up events that should only happen once.\n */\nexport const firstRender = coreInternal.firstRender;\n\n/**\n * Symbol for the `focusTarget` property.\n *\n * [DelegatesFocusMixin](DelegatesFocusMixin) defines this property as either:\n * 1) the element itself, in browsers that support native focus delegation or,\n * 2) the shadow root's first focusable element.\n */\nexport const focusTarget = coreInternal.focusTarget;\n\n/**\n * Symbol for the `getItemText` method.\n *\n * This method can be applied to an item to return its text.\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin) uses this to\n * obtain the text for each item in a list, then matches keypresses again that\n * text.\n *\n * This method takes a single parameter: the `HTMLElement` of the item from\n * which text should be extracted.\n */\nexport const getItemText = Symbol(\"getItemText\");\n\n/**\n * Symbol for the `goDown` method.\n *\n * This method is invoked when the user wants to go/navigate down.\n */\nexport const goDown = Symbol(\"goDown\");\n\n/**\n * Symbol for the `goEnd` method.\n *\n * This method is invoked when the user wants to go/navigate to the end (e.g.,\n * of a list).\n */\nexport const goEnd = Symbol(\"goEnd\");\n\n/**\n * Symbol for the `goFirst` method.\n *\n * This method is invoked when the user wants to go to the first item in a list.\n */\nexport const goFirst = Symbol(\"goFirst\");\n\n/**\n * Symbol for the `goLast` method.\n *\n * This method is invoked when the user wants to go to the last item in a list.\n */\nexport const goLast = Symbol(\"goLast\");\n\n/**\n * Symbol for the `goLeft` method.\n *\n * This method is invoked when the user wants to go/navigate left. Mixins that\n * make use of this method include\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) and\n * [SwipeDirectionMixin](SwipeDirectionMixin).\n */\nexport const goLeft = Symbol(\"goLeft\");\n\n/**\n * Symbol for the `goNext` method.\n *\n * This method is invoked when the user wants to go/navigate to the next item.\n */\nexport const goNext = Symbol(\"goNext\");\n\n/**\n * Symbol for the `goPrevious` method.\n *\n * This method is invoked when the user wants to go/navigate to the previous item.\n */\nexport const goPrevious = Symbol(\"goPrevious\");\n\n/**\n * Symbol for the `goRight` method.\n *\n * This method is invoked when the user wants to go/navigate right. Mixins\n * that make use of this method include\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) and\n * [SwipeDirectionMixin](SwipeDirectionMixin).\n */\nexport const goRight = Symbol(\"goRight\");\n\n/**\n * Symbol for the `goStart` method.\n *\n * This method is invoked when the user wants to go/navigate to the start\n * (e.g., of a list).\n */\nexport const goStart = Symbol(\"goStart\");\n\n/**\n * Symbol for the `goToItemWithPrefix` method.\n *\n * This method is invoked by\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin) when the user types\n * text characters.\n */\nexport const goToItemWithPrefix = Symbol(\"goToItemWithPrefix\");\n\n/**\n * Symbol for the `goUp` method.\n *\n * This method is invoked when the user wants to go/navigate up.\n */\nexport const goUp = Symbol(\"goUp\");\n\n/**\n * Symbol for the `hasDynamicTemplate` property.\n *\n * If your component class does not always use the same template, define a\n * static class property getter with this symbol and have it return `true`.\n * This will disable template caching for your component.\n */\nexport const hasDynamicTemplate = coreInternal.hasDynamicTemplate;\n\n/**\n * Symbol for the `ids` property.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) defines a shorthand function\n * `internal.ids` that can be used to obtain a reference to a shadow element with\n * a given ID.\n *\n * Example: if component's template contains a shadow element\n * `<button id=\"foo\">`, you can use the reference `this[ids].foo` to obtain\n * the corresponding button in the component instance's shadow tree.\n * The `ids` function is simply a shorthand for `getElementById`, so\n * `this[ids].foo` is the same as `this.shadowRoot.getElementById('foo')`.\n */\nexport const ids = coreInternal.ids;\n\n/**\n * Symbol for the `inputDelegate` property.\n *\n * [DelegateInputSelectionMixin](DelegateInputSelectionMixin) uses this property\n * to indicate which shadow element is the input-type element to which text\n * selection methods and properties should be delegated.\n */\nexport const inputDelegate = Symbol(\"inputDelegate\");\n\n/**\n * Symbol for the `itemsDelegate` property.\n *\n * A component using [DelegateItemsMixin](DelegateItemsMixin) uses this property\n * to indicate which one of its shadow elements is the one whose `items`\n * property will be treated as the component's own `items`.\n */\nexport const itemsDelegate = Symbol(\"itemsDelegate\");\n\n/**\n * Symbol for the `keydown` method.\n *\n * This method is invoked when an element receives a `keydown` event.\n *\n * An implementation of `internal.keydown` should return `true` if it handled\n * the event, and `false` otherwise. If `true` is returned (the event was\n * handled), `KeyboardMixin` invokes the event's `preventDefault` and\n * `stopPropagation` methods to let the browser know the event was handled.\n *\n * The convention for handling `internal.keydown` is that the last mixin\n * applied wins. That is, if an implementation of `internal.keydown` *did*\n * handle the event, it can return immediately. If it did not, it should\n * invoke `super` to let implementations further up the prototype chain have\n * their chance.\n *\n * This method takes a `KeyboardEvent` parameter that contains the event being\n * processed.\n */\nexport const keydown = Symbol(\"keydown\");\n\n/**\n * Symbol for the `matchText` method.\n *\n * [AutoCompleteInput](AutoCompleteInput) invokes this method when trying\n * to find a match for a given input string against its set of texts.\n */\nexport const matchText = Symbol(\"matchText\");\n\n/**\n * Symbol for the `mouseenter` method.\n *\n * [HoverMixin](HoverMixin) invokes this method when the user moves the\n * mouse over a component. That mixin provides a base implementation of this\n * method, but you can extend it to do additional work on `mouseenter`.\n *\n * This method takes a `MouseEvent` parameter that contains the event being\n * processed.\n */\nexport const mouseenter = Symbol(\"mouseenter\");\n\n/**\n * Symbol for the `mouseleave` method.\n *\n * [HoverMixin](HoverMixin) invokes this method when the user moves off a\n * component. That mixin provides a base implementation of this method, but\n * you can extend it to do additional work on `mouseleave`.\n *\n * This method takes a `MouseEvent` parameter that contains the event being\n * processed.\n */\nexport const mouseleave = Symbol(\"mouseleave\");\n\n/**\n * Symbol for access to native HTML element internals.\n */\nexport const nativeInternals = coreInternal.nativeInternals;\n\n/**\n * Symbol for the `raiseChangeEvents` property.\n *\n * This property is used by mixins to determine whether they should raise\n * property change events. The standard HTML pattern is to only raise such\n * events in response to direct user interactions. For a detailed discussion\n * of this point, see the Gold Standard checklist item for\n * [Propery Change Events](https://github.com/webcomponents/gold-standard/wiki/Property%20Change%20Events).\n *\n * The above article describes a pattern for using a flag to track whether\n * work is being performed in response to internal component activity, and\n * whether the component should therefore raise property change events.\n * This `raiseChangeEvents` symbol is a shared flag used for that purpose by\n * all Elix mixins and components. Sharing this flag ensures that internal\n * activity (e.g., a UI event listener) in one mixin can signal other mixins\n * handling affected properties to raise change events.\n *\n * All UI event listeners (and other forms of internal handlers, such as\n * timeouts and async network handlers) should set `raiseChangeEvents` to\n * `true` at the start of the event handler, then `false` at the end:\n *\n *     this.addEventListener('click', event => {\n *       this[raiseChangeEvents] = true;\n *       // Do work here, possibly setting properties, like:\n *       this.foo = 'Hello';\n *       this[raiseChangeEvents] = false;\n *     });\n *\n * Elsewhere, property setters that raise change events should only do so it\n * this property is `true`:\n *\n *     set foo(value) {\n *       // Save foo value here, do any other work.\n *       if (this[raiseChangeEvents]) {\n *         export const event = new CustomEvent('foochange');\n *         this.dispatchEvent(event);\n *       }\n *     }\n *\n * In this way, programmatic attempts to set the `foo` property will not trigger\n * the `foochange` event, but UI interactions that update that property will\n * cause those events to be raised.\n */\nexport const raiseChangeEvents = coreInternal.raiseChangeEvents;\n\n/**\n * Symbol for the `render` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this `internal.render` method to give\n * the component a chance to render recent changes in component state.\n */\nexport const render = coreInternal.render;\n\n/**\n * Symbol for the `renderChanges` method.\n *\n * [ReactiveMixin](ReactiveMixin) invokes this method in response to a\n * `setState` call; you should generally not invoke this method yourself.\n */\nexport const renderChanges = coreInternal.renderChanges;\n\n/**\n * Symbol for the `renderDataToElement` method.\n *\n * [DataItemsMixin](DataItemsMixin) invokes this method to render data to an\n * element being used as an item in a list.\n */\nexport const renderDataToElement = Symbol(\"renderDataToElement\");\n\n/**\n * Symbol for the `rendered` method.\n *\n * [ReactiveMixin](ReactiveMixin) will invoke this method after your\n * element has completely finished rendering.\n */\nexport const rendered = coreInternal.rendered;\n\n/**\n * Symbol for the `rendering` property.\n *\n * [ReactiveMixin](ReactiveMixin) sets this property to true during rendering,\n * at other times it will be false.\n */\nexport const rendering = coreInternal.rendering;\n\n/**\n * Symbol for the `scrollTarget` property.\n *\n * This property indicates which element in a component's shadow subtree\n * should be scrolled. [CursorInViewMixin](CursorInViewMixin) can use\n * this property to determine which element should be scrolled to keep the\n * selected item in view.\n */\nexport const scrollTarget = Symbol(\"scrollTarget\");\n\n/**\n * Symbol for the `setState` method.\n *\n * A component using [ReactiveMixin](ReactiveMixin) can invoke this method to\n * apply changes to the element's current state.\n */\nexport const setState = coreInternal.setState;\n\n/**\n * Symbol for the `shadowRoot` property.\n *\n * This property holds a reference to an element's shadow root, like\n * `this.shadowRoot`. This propery exists because `this.shadowRoot` is not\n * available for components with closed shadow roots.\n * [ShadowTemplateMixin](ShadowTemplateMixin) creates open shadow roots by\n * default, but you can opt into creating closed shadow roots; see\n * [shadowRootMode](internal#internal.shadowRootMode).\n */\nexport const shadowRoot = coreInternal.shadowRoot;\n\n/**\n * Symbol for the `shadowRootMode` property.\n *\n * If true (the default), then [ShadowTemplateMixin](ShadowTemplateMixin) will\n * create an open shadow root when the component is instantiated. Set this to\n * false if you want to programmatically hide component internals in a closed\n * shadow root.\n */\nexport const shadowRootMode = coreInternal.shadowRootMode;\n\n/**\n * Symbol for the `startEffect` method.\n *\n * A component using [TransitionEffectMixin](TransitionEffectMixin) can invoke\n * this method to trigger the application of a named, asynchronous CSS\n * transition effect.\n *\n * This method takes a single `string` parameter giving the name of the effect\n * to start.\n */\nexport const startEffect = Symbol(\"startEffect\");\n\n/**\n * The element's current state.\n *\n * This is managed by [ReactiveMixin](ReactiveMixin).\n */\nexport const state = coreInternal.state;\n\nexport const stateEffects = coreInternal.stateEffects;\n\n/**\n * Symbol for the `swipeDown` method.\n *\n * The swipe mixin [TouchSwipeMixin](TouchSwipeMixin) invokes this method when\n * the user finishes a gesture to swipe down.\n */\nexport const swipeDown = Symbol(\"swipeDown\");\n\n/**\n * Symbol for the `swipeDownComplete` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe down has completed.\n */\nexport const swipeDownComplete = Symbol(\"swipeDownComplete\");\n\n/**\n * Symbol for the `swipeLeft` method.\n *\n * The swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when the user\n * finishes a gesture to swipe left.\n */\nexport const swipeLeft = Symbol(\"swipeLeft\");\n\n/**\n * Symbol for the `swipeLeftTransitionEnd` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe left has completed.\n */\nexport const swipeLeftTransitionEnd = Symbol(\"swipeLeftTransitionEnd\");\n\n/**\n * Symbol for the `swipeRight` method.\n *\n * The swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when the user\n * finishes a gesture to swipe right.\n */\nexport const swipeRight = Symbol(\"swipeRight\");\n\n/**\n * Symbol for the `swipeRightTransitionEnd` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe right has completed.\n */\nexport const swipeRightTransitionEnd = Symbol(\"swipeRightTransitionEnd\");\n\n/**\n * Symbol for the `swipeUp` method.\n *\n * The swipe mixin [TouchSwipeMixin](TouchSwipeMixin) invokes this method when\n * the user finishes a gesture to swipe up.\n */\nexport const swipeUp = Symbol(\"swipeUp\");\n\n/**\n * Symbol for the `swipeUpComplete` method.\n *\n * [SwipeCommandsMixin](SwipeCommandsMixin) invokes this method after any\n * animated transition associated with a swipe up has completed.\n */\nexport const swipeUpComplete = Symbol(\"swipeUpComplete\");\n\n/**\n * Symbol for the `swipeStart` method.\n *\n * [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) invoke this method when a swipe\n * is starting, passing in the starting (x, y) client coordinate.\n */\nexport const swipeStart = Symbol(\"swipeStart\");\n\n/**\n * Symbol for the `swipeTarget` property.\n *\n * By default, the swipe mixins [TouchSwipeMixin](TouchSwipeMixin) and\n * [TrackpadSwipeMixin](TrackpadSwipeMixin) assume that the element the user\n * is swiping the top-level element. In some cases (e.g., [Drawer](Drawer)),\n * the component wants to let the user swipe a shadow element. In such cases,\n * this property should return the element that should be swiped.\n *\n * The swipe target's `offsetWidth` is used by the mixin to calculate the\n * `state.swipeFraction` member when the user drags their finger. The\n * `swipeFraction` is the distance the user has dragged in the current drag\n * operation over that `offsetWidth`.\n */\nexport const swipeTarget = Symbol(\"swipeTarget\");\n\n/**\n * Symbol for the `tap` method.\n *\n * This method is invoked when an element receives an operation that should\n * be interpreted as a tap. [TapCursorMixin](TapCursorMixin)\n * invokes this when the element receives a `mousedown` event, for example.\n */\nexport const tap = Symbol(\"tap\");\n\n/**\n * Symbol for the `template` method.\n *\n * [ShadowTemplateMixin](ShadowTemplateMixin) uses this property to obtain a\n * component's template, which it will clone into a component's shadow root.\n */\nexport const template = coreInternal.template;\n\n/**\n * Symbol for the `toggleSelectedFlag` method.\n *\n * [ItemsMultiSelectMixin](ItemsMultiSelectMixin) exposes this method to let\n * other mixins like [MultiSelectAPIMixin](MultiSelectAPIMixin) toggle the\n * selected state of an individual item.\n */\nexport const toggleSelectedFlag = Symbol(\"toggleSelectedFlag\");\n\n// Expose internals as a global when debugging.\nconst elixdebug = new URLSearchParams(location.search).get(\"elixdebug\");\nif (elixdebug === \"true\") {\n  /** @type {any} */ (window).elix = {\n    internal: {\n      checkSize,\n      closestAvailableItemIndex,\n      contentSlot,\n      defaultState,\n      defaultTabIndex,\n      delegatesFocus,\n      effectEndTarget,\n      firstRender,\n      focusTarget,\n      getItemText,\n      goDown,\n      goEnd,\n      goFirst,\n      goLast,\n      goLeft,\n      goNext,\n      goPrevious,\n      goRight,\n      goStart,\n      goToItemWithPrefix,\n      goUp,\n      hasDynamicTemplate,\n      ids,\n      inputDelegate,\n      itemsDelegate,\n      keydown,\n      mouseenter,\n      mouseleave,\n      nativeInternals,\n      event,\n      raiseChangeEvents,\n      render,\n      renderChanges,\n      renderDataToElement,\n      rendered,\n      rendering,\n      scrollTarget,\n      setState,\n      shadowRoot,\n      shadowRootMode,\n      startEffect,\n      state,\n      stateEffects,\n      swipeDown,\n      swipeDownComplete,\n      swipeLeft,\n      swipeLeftTransitionEnd,\n      swipeRight,\n      swipeRightTransitionEnd,\n      swipeUp,\n      swipeUpComplete,\n      swipeStart,\n      swipeTarget,\n      tap,\n      template,\n      toggleSelectedFlag,\n    },\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  keydown,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n// Symbols for private data members.\n/** @type {any} */\nconst previousBodyOverflowKey = Symbol(\"previousBodyStyleOverflow\");\n/** @type {any} */\nconst previousDocumentMarginRightKey = Symbol(\"previousDocumentMarginRight\");\n\n/**\n * Gives an overlay modal behavior.\n *\n * This blocks various user interactions to make an overlay behave like a modal\n * dialog:\n *\n * * Disables scrolling on the background document. **This is a global\n *   side-effect of opening the component.**\n * * A default ARIA role of `dialog`.\n * * Closes the element if user presses the Esc key.\n *\n * For modeless overlays, see `PopupModalityMixin` instead.\n *\n * @module DialogModalityMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DialogModalityMixin(Base) {\n  return class DialogModality extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        role: \"dialog\",\n      });\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        case \"Escape\":\n          // Close on Esc key.\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n          break;\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.opened) {\n        if (this[state].opened && document.documentElement) {\n          // Disable body scrolling to absorb space bar keypresses and other\n          // means of scrolling the top-level document.\n          const documentWidth = document.documentElement.clientWidth;\n          const scrollBarWidth = window.innerWidth - documentWidth;\n          this[previousBodyOverflowKey] = document.body.style.overflow;\n          this[previousDocumentMarginRightKey] =\n            scrollBarWidth > 0\n              ? document.documentElement.style.marginRight\n              : null;\n          document.body.style.overflow = \"hidden\";\n          if (scrollBarWidth > 0) {\n            document.documentElement.style.marginRight = `${scrollBarWidth}px`;\n          }\n        } else {\n          // Reenable body scrolling.\n          if (this[previousBodyOverflowKey] != null) {\n            document.body.style.overflow = this[previousBodyOverflowKey];\n            this[previousBodyOverflowKey] = null;\n          }\n          if (this[previousDocumentMarginRightKey] != null) {\n            document.documentElement.style.marginRight = this[\n              previousDocumentMarginRightKey\n            ];\n            this[previousDocumentMarginRightKey] = null;\n          }\n        }\n      }\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  };\n}\n","import { deepContains, firstFocusableElement } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { firstRender, ids, keydown, render, shadowRoot } from \"./internal.js\";\n\n// Symbols for private data members on an element.\nconst wrap = Symbol(\"wrap\");\n/** @type {any} */\nconst wrappingFocusKey = Symbol(\"wrappingFocus\");\n\n/**\n * Allows Tab and Shift+Tab operations to cycle the focus within the component.\n *\n * This mixin expects the component to provide:\n *\n * * A template-stamping mechanism compatible with `ShadowTemplateMixin`.\n *\n * The mixin provides these features to the component:\n *\n * * Template elements and event handlers that will cause the keyboard focus to wrap.\n *\n * This mixin [contributes to a component's template](mixins#mixins-that-contribute-to-a-component-s-template).\n * See that discussion for details on how to use such a mixin.\n *\n * @module FocusCaptureMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nfunction FocusCaptureMixin(Base) {\n  class FocusCapture extends Base {\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      const firstElement = firstFocusableElement(this[shadowRoot]);\n      // We need to check both the document active element (to handle case where\n      // the user is tabbing through light DOM nodes assigned to a slot) and the\n      // shadow active element (to handle case where the user is tabbing through\n      // shadow nodes).\n      if (firstElement) {\n        const firstElementIsDocumentActive =\n          document.activeElement &&\n          (document.activeElement === firstElement ||\n            document.activeElement.contains(firstElement));\n        const shadowActiveElement = this[shadowRoot].activeElement;\n        const firstElementIsShadowActive =\n          shadowActiveElement &&\n          (shadowActiveElement === firstElement ||\n            deepContains(shadowActiveElement, firstElement));\n        const firstElementIsActive =\n          firstElementIsDocumentActive || firstElementIsShadowActive;\n        if (firstElementIsActive && event.key === \"Tab\" && event.shiftKey) {\n          // Set focus to focus catcher.\n          // The Shift+Tab keydown event should continue bubbling, and the default\n          // behavior should cause it to end up on the last focusable element.\n          this[wrappingFocusKey] = true;\n          this[ids].focusCatcher.focus();\n          this[wrappingFocusKey] = false;\n          // Don't mark the event as handled, since we want it to keep bubbling up.\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        this[ids].focusCatcher.addEventListener(\"focus\", () => {\n          if (!this[wrappingFocusKey]) {\n            // Wrap focus back to the first focusable element.\n            const focusElement = firstFocusableElement(this[shadowRoot]);\n            if (focusElement) {\n              focusElement.focus();\n            }\n          }\n        });\n      }\n    }\n\n    /**\n     * Destructively wrap a node with elements necessary to capture focus.\n     *\n     * Call this method in a components `internal.template` property.\n     * Invoke this method as `this[FocusCaptureMixin.wrap](element)`.\n     *\n     * @param {Element} target - the element within which focus should wrap\n     */\n    [wrap](target) {\n      const focusCapture = fragmentFrom.html`\n        <style>\n          #focusCapture {\n            display: flex;\n            height: 100%;\n            overflow: hidden;\n            width: 100%;\n          }\n\n          #focusCaptureContainer {\n            align-items: center;\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n            justify-content: center;\n            position: relative;\n          }\n        </style>\n        <div id=\"focusCapture\">\n          <div id=\"focusCaptureContainer\"></div>\n          <div id=\"focusCatcher\" tabindex=\"0\"></div>\n        </div>\n      `;\n\n      // Wrap the target with the focus capture elements.\n      const container = focusCapture.getElementById(\"focusCaptureContainer\");\n      if (container) {\n        target.replaceWith(focusCapture);\n        container.append(target);\n      }\n    }\n  }\n\n  return FocusCapture;\n}\n\nFocusCaptureMixin.wrap = wrap;\n\nexport default FocusCaptureMixin;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  defaultTabIndex,\n  delegatesFocus,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Manages keyboard handling for a component.\n *\n * This mixin handles several keyboard-related features.\n *\n * First, it wires up a single keydown event handler that can be shared by\n * multiple mixins on a component. The event handler will invoke a `keydown`\n * method with the event object, and any mixin along the prototype chain that\n * wants to handle that method can do so.\n *\n * If a mixin wants to indicate that keyboard event has been handled, and that\n * other mixins should *not* handle it, the mixin's `keydown` handler should\n * return a value of true. The convention that seems to work well is that a\n * mixin should see if it wants to handle the event and, if not, then ask the\n * superclass to see if it wants to handle the event. This has the effect of\n * giving the mixin that was applied last the first chance at handling a\n * keyboard event.\n *\n * Example:\n *\n *     [keydown](event) {\n *       let handled;\n *       switch (event.key) {\n *         // Handle the keys you want, setting handled = true if appropriate.\n *       }\n *       // Prefer mixin result if it's defined, otherwise use base result.\n *       return handled || (super[keydown] && super[keydown](event));\n *     }\n *\n * A second feature provided by this mixin is that it implicitly makes the\n * component a tab stop if it isn't already, by setting `tabindex` to 0. This\n * has the effect of adding the component to the tab order in document order.\n *\n * @module KeyboardMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardMixin(Base) {\n  // The class prototype added by the mixin.\n  class Keyboard extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      this.addEventListener(\"keydown\", async (event) => {\n        this[raiseChangeEvents] = true;\n        // For use with FocusVisibleMixin.\n        if (!this[state].focusVisible) {\n          // The user may have begun interacting with this element using the\n          // mouse/touch, but has now begun using the keyboard, so show focus.\n          this[setState]({\n            focusVisible: true,\n          });\n        }\n        const handled = this[keydown](event);\n        if (handled) {\n          event.preventDefault();\n          event.stopImmediatePropagation();\n        }\n        await Promise.resolve();\n        this[raiseChangeEvents] = false;\n      });\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"tabindex\") {\n        // Parse the passed value, which could be a string or null.\n        let parsed;\n        if (newValue === null) {\n          // tabindex attribute was removed.\n          parsed = -1;\n        } else {\n          parsed = Number(newValue);\n          if (isNaN(parsed)) {\n            // Non-numeric tabindex falls back to default value (if defined).\n            parsed = this[defaultTabIndex] ? this[defaultTabIndex] : 0;\n          }\n        }\n        this.tabIndex = parsed;\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      // If we're using DelegateFocusMixin, we don't need or want to set a\n      // tabindex on the host; we'll rely on the inner shadow elements to take\n      // the focus and raise keyboard events. Otherwise, we do set a tabindex on\n      // the host, so that we can get keyboard events.\n      const tabIndex = this[delegatesFocus] ? -1 : 0;\n      const state = Object.assign(super[defaultState] || {}, {\n        tabIndex,\n      });\n\n      return state;\n    }\n\n    /**\n     * See the [symbols](internal#internal.keydown) documentation for details.\n     */\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      if (super[keydown]) {\n        return super[keydown](event);\n      }\n      return false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.tabIndex) {\n        this.tabIndex = this[state].tabIndex;\n      }\n    }\n\n    // Record our own notion of the state of the tabIndex property so we can\n    // rerender if necessary.\n    get tabIndex() {\n      return super.tabIndex;\n    }\n    set tabIndex(tabIndex) {\n      // If value has changed, invoke the super setter.\n      if (super.tabIndex !== tabIndex) {\n        super.tabIndex = tabIndex;\n      }\n\n      // The tabIndex setter can get called during rendering when we render our\n      // own notion of the tabIndex state, in which case we don't need or want\n      // to set state again.\n      if (!this[rendering]) {\n        // Record the new tabIndex in our state.\n        this[setState]({\n          tabIndex,\n        });\n      }\n    }\n  }\n\n  return Keyboard;\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport AriaRoleMixin from \"./AriaRoleMixin.js\";\nimport { defaultState, template } from \"./internal.js\";\n\nconst Base = AriaRoleMixin(ReactiveElement);\n\n/**\n * Background element shown behind an overlay's primary content\n *\n * The backdrop is transparent by default, suggesting to the user that the\n * overlay is modeless, and they can click through it to reach the background\n * elements. For a modal variant, see [ModalBackdrop](ModalBackdrop).\n *\n * @inherits ReactiveElement\n * @mixes AriaRoleMixin\n */\nclass Backdrop extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      role: \"none\",\n    });\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          height: 100%;\n          left: 0;\n          position: fixed;\n          top: 0;\n          touch-action: manipulation;\n          width: 100%;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default Backdrop;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Lets a component define its ARIA role through a `role` state member\n *\n * Among other things, this allows a class or mixin to define a default\n * role through the component's `defaultState`.\n *\n * Some mixins come with identicial support for managing an ARIA role. Those\n * mixins include [AriaListMixin](AriaListMixin),\n * [AriaMenuMixin](AriaMenuMixin), [DialogModalityMixin](DialogModalityMixin),\n * and [PopupModalityMixin](PopupModalityMixin). If you're using one of those\n * mixins, you do *not* need to use this mixin.\n *\n * @module AriaRoleMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function AriaRoleMixin(Base) {\n  // The class prototype added by the mixin.\n  class AriaRole extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        role: null,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        if (role) {\n          this.setAttribute(\"role\", role);\n        } else {\n          this.removeAttribute(\"role\");\n        }\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      const s = String(role);\n      super.role = s;\n      if (!this[rendering]) {\n        this[setState]({ s });\n      }\n    }\n  }\n\n  return AriaRole;\n}\n","import Backdrop from \"./Backdrop.js\";\n\n/**\n * Semi-transparent backdrop for a modal overlay\n *\n * This type of backdrop is used by [Dialog](Dialog) and [Drawer](Drawer). The\n * backdrop slightly obscures the background elements, focusing the user's\n * attention on the overlay.\n *\n * @inherits Backdrop\n */\nclass ModalBackdrop extends Backdrop {\n  constructor() {\n    super();\n\n    // As of Sep 2018, Mobile Safari allows the user to drag on the backdrop to\n    // scroll the page behind it, which violates the modality. To correct this,\n    // we prevent touchmove events with one touch from performing the default\n    // page scrolling.\n    //\n    // Android Chrome already correctly prevents drags from reaching the page,\n    // so we only engage this workaround if we don't see support for pointer\n    // events -- in which case we assume we're in Safari.\n    if (!(\"PointerEvent\" in window)) {\n      this.addEventListener(\"touchmove\", (event) => {\n        if (event.touches.length === 1) {\n          event.preventDefault();\n        }\n      });\n    }\n  }\n}\n\nexport default ModalBackdrop;\n","import { booleanAttributeValue, setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  startEffect,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst closePromiseKey = Symbol(\"closePromise\");\n/** @type {any} */\nconst closeResolveKey = Symbol(\"closeResolve\");\n\n/**\n * Tracks the open/close state of a component.\n *\n * @module OpenCloseMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function OpenCloseMixin(Base) {\n  // The class prototype added by the mixin.\n  class OpenClose extends Base {\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"opened\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.opened !== value) {\n          this.opened = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    /**\n     * Close the component (if not already closed).\n     *\n     * Some components like [AlertDialog](AlertDialog) want to indicate why or\n     * how they were closed. To support such scenarios, you can supply a value\n     * to the optional `closeResult` parameter. This closeResult will be made\n     * available in the `whenClosed` promise and the `state.closeResult` member.\n     *\n     * @param {object} [closeResult] - an indication of how or why the element closed\n     */\n    async close(closeResult) {\n      if (super.close) {\n        await super.close();\n      }\n      this[setState]({ closeResult });\n      await this.toggle(false);\n    }\n\n    /**\n     * True if the element is currently closed.\n     *\n     * This read-only property is provided as a convenient inverse of `opened`.\n     *\n     * @type {boolean}\n     */\n    get closed() {\n      return this[state] && !this[state].opened;\n    }\n\n    /**\n     * True if the element has completely closed.\n     *\n     * For components not using asynchronous open/close effects, this property\n     * returns the same value as the `closed` property. For elements that have a\n     * true value of `state.openCloseEffects` (e.g., elements using\n     * [TransitionEffectMixin](TransitionEffectMixin)), this property returns\n     * true only if `state.effect` is \"close\" and `state.effectPhase` is\n     * \"after\".\n     *\n     * @type {boolean}\n     */\n    get closeFinished() {\n      return this[state].closeFinished;\n    }\n\n    get closeResult() {\n      return this[state].closeResult;\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      const defaults = {\n        closeResult: null,\n        opened: false,\n      };\n      // If this component defines a `startEffect` method (e.g., by using\n      // TransitionEffectMixin), include default state for open/close effects.\n      // Since the component is closed by default, the default effect state is\n      // after the close effect has completed.\n      if (this[startEffect]) {\n        Object.assign(defaults, {\n          closeFinished: true,\n          effect: \"close\",\n          effectPhase: \"after\",\n          openCloseEffects: true,\n        });\n      }\n      return Object.assign(super[defaultState] || {}, defaults);\n    }\n\n    /**\n     * Open the element (if not already opened).\n     */\n    async open() {\n      if (super.open) {\n        await super.open();\n      }\n      this[setState]({ closeResult: undefined });\n      await this.toggle(true);\n    }\n\n    /**\n     * True if the element is currently opened.\n     *\n     * This property can be set as a boolean attribute\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get opened() {\n      return this[state] && this[state].opened;\n    }\n    set opened(opened) {\n      this[setState]({ closeResult: undefined });\n      this.toggle(opened);\n    }\n\n    [render](changed) {\n      super[render](changed);\n\n      // Reflect opened state.\n      if (changed.opened) {\n        const { opened } = this[state];\n        setInternalState(this, \"opened\", opened);\n      }\n\n      // Reflect closed state. To handle asynchronous close effects, we reflect\n      // the inverse of closeFinished instead of reflecting closed.\n      if (changed.closeFinished) {\n        const { closeFinished } = this[state];\n        setInternalState(this, \"closed\", closeFinished);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened && this[raiseChangeEvents]) {\n        const oldEvent = new CustomEvent(\"opened-changed\", {\n          bubbles: true,\n          detail: {\n            closeResult: this[state].closeResult,\n            opened: this[state].opened,\n          },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the opened/closed state of the component changes.\n         *\n         * @event openedchange\n         */\n        const openedChangeEvent = new CustomEvent(\"openedchange\", {\n          bubbles: true,\n          detail: {\n            closeResult: this[state].closeResult,\n            opened: this[state].opened,\n          },\n        });\n        this.dispatchEvent(openedChangeEvent);\n\n        if (this[state].opened) {\n          const oldOpenedEvent = new CustomEvent(\"opened\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(oldOpenedEvent);\n          /**\n           * Raised when the component opens.\n           *\n           * @event open\n           */\n          const openEvent = new CustomEvent(\"open\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(openEvent);\n        } else {\n          const oldClosedEvent = new CustomEvent(\"closed\", {\n            bubbles: true,\n            detail: {\n              closeResult: this[state].closeResult,\n            },\n          });\n          this.dispatchEvent(oldClosedEvent);\n          /**\n           * Raised when the component closes.\n           *\n           * @event close\n           */\n          const closeEvent = new CustomEvent(\"close\", {\n            bubbles: true,\n            detail: {\n              closeResult: this[state].closeResult,\n            },\n          });\n          this.dispatchEvent(closeEvent);\n        }\n      }\n\n      // If someone's waiting for the component to close, and it's completely\n      // finished closing, then resolve the close promise.\n      const closeResolve = this[closeResolveKey];\n      if (this.closeFinished && closeResolve) {\n        this[closeResolveKey] = null;\n        this[closePromiseKey] = null;\n        closeResolve(this[state].closeResult);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Update our notion of closeFinished to track the closed state for\n      // components with synchronous open/close effects and components with\n      // asynchronous open/close effects.\n      if (\n        changed.openCloseEffects ||\n        changed.effect ||\n        changed.effectPhase ||\n        changed.opened\n      ) {\n        const { effect, effectPhase, openCloseEffects, opened } = state;\n        const closeFinished = openCloseEffects\n          ? effect === \"close\" && effectPhase === \"after\"\n          : !opened;\n        Object.assign(effects, { closeFinished });\n      }\n\n      return effects;\n    }\n\n    /**\n     * Toggle the open/close state of the element.\n     *\n     * @param {boolean} [opened] - true if the element should be opened, false\n     * if closed.\n     */\n    async toggle(opened = !this.opened) {\n      if (super.toggle) {\n        await super.toggle(opened);\n      }\n      const changed = opened !== this[state].opened;\n      if (changed) {\n        /** @type {PlainObject} */ const changes = { opened };\n        if (this[state].openCloseEffects) {\n          changes.effect = opened ? \"open\" : \"close\";\n          if (this[state].effectPhase === \"after\") {\n            changes.effectPhase = \"before\";\n          }\n        }\n        await this[setState](changes);\n      }\n    }\n\n    /**\n     * This method can be used as an alternative to listening to the\n     * \"openedchange\" event, particularly in situations where you want to only\n     * handle the next time the component is closed.\n     *\n     * @returns {Promise} A promise that resolves when the element has\n     * completely closed, including the completion of any asynchronous opening\n     * effect.\n     */\n    whenClosed() {\n      if (!this[closePromiseKey]) {\n        this[closePromiseKey] = new Promise((resolve) => {\n          this[closeResolveKey] = resolve;\n        });\n      }\n      return this[closePromiseKey];\n    }\n  }\n\n  return OpenClose;\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { template } from \"./internal.js\";\n\n/**\n * A simple frame for overlay content.\n *\n * The default appearance of `OverlayFrame` uses a simple drop-shadow to let the\n * user see the framed content as being on top of the background page content.\n *\n * @inherits ReactiveElement\n */\nclass OverlayFrame extends ReactiveElement {\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n      </style>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default OverlayFrame;\n","import { deepContains, firstFocusableElement } from \"../core/dom.js\";\nimport { fragmentFrom, templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  render,\n  rendered,\n  setState,\n  state,\n  template,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst appendedToDocumentKey = Symbol(\"appendedToDocument\");\n/** @type {any} */\nconst defaultZIndexKey = Symbol(\"assignedZIndex\");\n/** @type {any} */\nconst restoreFocusToElementKey = Symbol(\"restoreFocusToElement\");\n\n/**\n * Displays an opened element on top of other page elements.\n *\n * This mixin handles showing and hiding an overlay element. It, together with\n * [OpenCloseMixin](OpenCloseMixin), form the core behavior for [Overlay](Overlay),\n * which in turn forms the basis of Elix's overlay components.\n *\n * @module OverlayMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function OverlayMixin(Base) {\n  // The class prototype added by the mixin.\n  class Overlay extends Base {\n    // TODO: Document\n    get autoFocus() {\n      return this[state].autoFocus;\n    }\n    set autoFocus(autoFocus) {\n      this[setState]({ autoFocus });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        autoFocus: true,\n        persistent: false,\n      });\n    }\n\n    async open() {\n      if (!this[state].persistent && !this.isConnected) {\n        // Overlay isn't in document yet.\n        this[appendedToDocumentKey] = true;\n        document.body.append(this);\n      }\n      if (super.open) {\n        await super.open();\n      }\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        this.addEventListener(\"blur\", (event) => {\n          // What has the focus now?\n          const newFocusedElement =\n            event.relatedTarget || document.activeElement;\n          /** @type {any} */\n          const node = this;\n          if (newFocusedElement instanceof HTMLElement) {\n            const focusInside = deepContains(node, newFocusedElement);\n            if (!focusInside) {\n              if (this.opened) {\n                // The user has most likely clicked on something in the background\n                // of a modeless overlay. Remember that element, and restore focus\n                // to it when the overlay finishes closing.\n                this[restoreFocusToElementKey] = newFocusedElement;\n              } else {\n                // A blur event fired, but the overlay closed itself before the blur\n                // event could be processed. In closing, we may have already\n                // restored the focus to the element that originally invoked the\n                // overlay. Since the user has clicked somewhere else to close the\n                // overlay, put the focus where they wanted it.\n                newFocusedElement.focus();\n                this[restoreFocusToElementKey] = null;\n              }\n            }\n          }\n        });\n      }\n\n      if (changed.effectPhase || changed.opened || changed.persistent) {\n        if (!this[state].persistent) {\n          // Temporary overlay\n          const closed =\n            typeof this.closeFinished === \"undefined\"\n              ? this.closed\n              : this.closeFinished;\n\n          if (closed) {\n            if (this[defaultZIndexKey]) {\n              // Remove default z-index.\n              this.style.zIndex = \"\";\n              this[defaultZIndexKey] = null;\n            }\n          } else if (this[defaultZIndexKey]) {\n            this.style.zIndex = this[defaultZIndexKey];\n          } else {\n            if (!hasZIndex(this)) {\n              bringToFront(this);\n            }\n          }\n        }\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Perform one-time check to see if component needs a default z-index.\n        if (this[state].persistent && !hasZIndex(this)) {\n          bringToFront(this);\n        }\n      }\n\n      if (changed.opened) {\n        if (this[state].autoFocus) {\n          if (this[state].opened) {\n            // Opened\n            if (\n              !this[restoreFocusToElementKey] &&\n              document.activeElement !== document.body\n            ) {\n              // Remember which element had the focus before we were opened.\n              this[restoreFocusToElementKey] = document.activeElement;\n            }\n            // Focus on the element itself (if it's focusable), or the first focusable\n            // element inside it.\n            // TODO: We'd prefer to require that overlays (like the Overlay base\n            // class) make use of delegatesFocus via DelegateFocusMixin, which would\n            // let us drop the need for this mixin here to do anything special with\n            // focus. However, an initial trial of this revealed an issue in\n            // MenuButton, where invoking the menu did not put the focus on the first\n            // menu item as expected. Needs more investigation.\n            const focusElement = firstFocusableElement(this);\n            if (focusElement) {\n              focusElement.focus();\n            }\n          } else {\n            // Closed\n            if (this[restoreFocusToElementKey]) {\n              // Restore focus to the element that had the focus before the overlay was\n              // opened.\n              this[restoreFocusToElementKey].focus();\n              this[restoreFocusToElementKey] = null;\n            }\n          }\n        }\n      }\n\n      // If we're finished closing an overlay that was automatically added to the\n      // document, remove it now. Note: we only do this when the component\n      // updates, not when it mounts, because we don't want an automatically-added\n      // element to be immediately removed during its connectedCallback.\n      if (\n        !this[firstRender] &&\n        !this[state].persistent &&\n        this.closeFinished &&\n        this[appendedToDocumentKey]\n      ) {\n        this[appendedToDocumentKey] = false;\n        if (this.parentNode) {\n          this.parentNode.removeChild(this);\n        }\n      }\n    }\n\n    get [template]() {\n      const result = super[template] || templateFrom.html``;\n\n      // We'd like to just use the `hidden` attribute, but a side-effect of\n      // styling with the hidden attribute is that naive styling of the\n      // component from the outside (to change to display: flex, say) will\n      // override the display: none implied by hidden. To work around this\n      // problem, we use display: none when the overlay is closed.\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host([closed]) {\n            display: none;\n          }\n        </style>\n      `);\n\n      return result;\n    }\n  }\n\n  return Overlay;\n}\n\n// Pick a default z-index, remember it, and apply it.\nfunction bringToFront(element) {\n  const defaultZIndex = maxZIndexInUse() + 1;\n  element[defaultZIndexKey] = defaultZIndex;\n  element.style.zIndex = defaultZIndex.toString();\n}\n\n/**\n * If the element has or inherits an explicit numeric z-index, return true.\n * Otherwise, return false.\n *\n * @private\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nfunction hasZIndex(element) {\n  const computedZIndex = getComputedStyle(element).zIndex;\n  const explicitZIndex = element.style.zIndex;\n  const isExplicitZIndexNumeric = !isNaN(parseInt(explicitZIndex));\n  if (computedZIndex === \"auto\") {\n    return isExplicitZIndexNumeric;\n  }\n  if (computedZIndex === \"0\" && !isExplicitZIndexNumeric) {\n    // Might be on Safari, which reports a computed z-index of zero even in\n    // cases where no z-index has been inherited but the element creates a\n    // stacking context. Inspect the composed tree parent to infer whether the\n    // element is really inheriting a z-index.\n    const parent =\n      element.assignedSlot ||\n      (element instanceof ShadowRoot ? element.host : element.parentNode);\n    if (!(parent instanceof HTMLElement)) {\n      // Theoretical edge case, assume zero z-index is real.\n      return true;\n    }\n    if (!hasZIndex(parent)) {\n      // The parent doesn't have a numeric z-index, and the element itself\n      // doesn't have a numeric z-index, so the \"0\" value for the computed\n      // z-index is simulated, not a real assigned numeric z-index.\n      return false;\n    }\n  }\n  // Element has a non-zero numeric z-index.\n  return true;\n}\n\n/*\n * Return the highest z-index currently in use in the document's light DOM.\n *\n * This calculation looks at all light DOM elements, so is theoretically\n * expensive. That said, it only runs when an overlay is opening, and is only used\n * if an overlay doesn't have a z-index already. In cases where performance is\n * an issue, this calculation can be completely circumvented by manually\n * applying a z-index to an overlay.\n */\nfunction maxZIndexInUse() {\n  const elements = document.body.querySelectorAll(\"*\");\n  const zIndices = Array.from(elements, (element) => {\n    const style = getComputedStyle(element);\n    let zIndex = 0;\n    if (style.position !== \"static\" && style.zIndex !== \"auto\") {\n      const parsed = style.zIndex ? parseInt(style.zIndex) : 0;\n      zIndex = !isNaN(parsed) ? parsed : 0;\n    }\n    return zIndex;\n  });\n  return Math.max(...zIndices);\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  contentSlot,\n  defaultState,\n  firstRender,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  shadowRoot,\n} from \"./internal.js\";\n\n/**\n * Defines a component's content as the flattened set of nodes assigned to a\n * slot.\n *\n * This mixin defines a component's `content` state member as the flattened\n * set of nodes assigned to a slot, typically the default slot.\n *\n * If the set of assigned nodes changes, the `content` state will be updated.\n * This helps a component satisfy the Gold Standard checklist item for\n * monitoring\n * [Content Changes](https://github.com/webcomponents/gold-standard/wiki/Content-Changes).\n *\n * By default, the mixin looks in the component's shadow subtree for a default\n * (unnamed) `slot` element. You can specify that a different slot should be\n * used by overriding the `internal.contentSlot` property.\n *\n * Most Elix [elements](elements) use `SlotContentMixin`, including\n * [ListBox](ListBox), [Modes](Modes), and [Tabs](Tabs).\n *\n * @module SlotContentMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SlotContentMixin(Base) {\n  // The class prototype added by the mixin.\n  class SlotContent extends Base {\n    /**\n     * See [contentSlot](internal#internal.contentSlot).\n     */\n    get [contentSlot]() {\n      /** @type {HTMLSlotElement|null} */ const slot =\n        this[shadowRoot] && this[shadowRoot].querySelector(\"slot:not([name])\");\n      if (!this[shadowRoot] || !slot) {\n        /* eslint-disable no-console */\n        console.warn(\n          `SlotContentMixin expects ${this.constructor.name} to define a shadow tree that includes a default (unnamed) slot.\\nSee https://elix.org/documentation/SlotContentMixin.`\n        );\n      }\n      return slot;\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        content: null,\n      });\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Listen to changes on the default slot.\n        const slot = this[contentSlot];\n        if (slot) {\n          slot.addEventListener(\"slotchange\", async () => {\n            // Although slotchange isn't generally a user-driven event, it's\n            // impossible for us to know whether a change in slot content is going\n            // to result in effects that the host of this element can predict.\n            // To be on the safe side, we raise any change events that come up\n            // during the processing of this event.\n            this[raiseChangeEvents] = true;\n\n            // The nodes assigned to the given component have changed.\n            // Update the component's state to reflect the new content.\n            const content = slot.assignedNodes({ flatten: true });\n            Object.freeze(content);\n            this[setState]({ content });\n\n            await Promise.resolve();\n            this[raiseChangeEvents] = false;\n          });\n        }\n      }\n    }\n  }\n\n  return SlotContent;\n}\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { transmute } from \"../core/template.js\";\nimport Backdrop from \"./Backdrop.js\";\nimport {\n  checkSize,\n  defaultState,\n  ids,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\nimport OpenCloseMixin from \"./OpenCloseMixin.js\";\nimport OverlayFrame from \"./OverlayFrame.js\";\nimport OverlayMixin from \"./OverlayMixin.js\";\nimport SlotContentMixin from \"./SlotContentMixin.js\";\n\n// TODO: We'd like to use DelegateFocusMixin in this component, but see the note\n// at OverlayMixin's openedChanged function.\nconst Base = OpenCloseMixin(OverlayMixin(SlotContentMixin(ReactiveElement)));\n\n/**\n * An element that appears over other page elements\n *\n * The main overlay content is presented within a frame on top of an optional\n * backdrop.\n *\n * The overlay logic is provided by [OverlayMixin](OverlayMixin). `Overlay` adds\n * the definition of customizable element tags: [frameTag](#frameTag) for the\n * frame around the overlay content, and [backdropTag](#backdropTag) (if\n * defined) for the optional element covering the page elements behind the\n * overlay.\n *\n * As a convenience, the `open` method of `Overlay` will automatically add the\n * overlay to the end of the document body if the overlay isn't already in the\n * document. If the overlay is automatically attached in this way, then when it\n * closes, it will automatically be removed.\n *\n * See [Dialog](Dialog) and [Popup](Popup) for modal and modeless subclasses,\n * respectively.\n *\n * @inherits ReactiveElement\n * @mixes OpenCloseMixin\n * @mixes OverlayMixin\n * @mixes SlotContentMixin\n * @part {Backdrop} backdrop - the backdrop behind the overlay\n * @part {OverlayFrame} frame - the frame around the overlay\n */\nclass Overlay extends Base {\n  get backdrop() {\n    return this[ids] && this[ids].backdrop;\n  }\n\n  /**\n   * The class or tag used for the `backdrop` part - the optional\n   * element shown behind the overlay.\n   *\n   * This can help focus the user's attention on the overlay content.\n   * Additionally, a backdrop can be used to absorb clicks on background page\n   * elements. For example, [Dialog](Dialog) uses [ModalBackdrop](ModalBackdrop)\n   * as an overlay backdrop in such a way.\n   *\n   * @type {PartDescriptor}\n   * @default Backdrop\n   */\n  get backdropPartType() {\n    return this[state].backdropPartType;\n  }\n  set backdropPartType(backdropPartType) {\n    this[setState]({ backdropPartType });\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: Backdrop,\n      framePartType: OverlayFrame,\n    });\n  }\n\n  get frame() {\n    return this[ids].frame;\n  }\n\n  /**\n   * The class or tag used to create the `frame` part – the overlay's\n   * primary content.\n   *\n   * The frame element can be used to provide a border around the overlay\n   * content, and to provide visual effects such as a drop-shadow to help\n   * distinguish overlay content from background page elements.\n   *\n   * @type {PartDescriptor}\n   * @default OverlayFrame\n   */\n  get framePartType() {\n    return this[state].framePartType;\n  }\n  set framePartType(framePartType) {\n    this[setState]({ framePartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    renderParts(this[shadowRoot], this[state], changed);\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n\n    if (changed.opened && this[state].content) {\n      // If contents know how to size themselves, ask them to check their size.\n      this[state].content.forEach((element) => {\n        if (element[checkSize]) {\n          element[checkSize]();\n        }\n      });\n    }\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    // TODO: Consider moving frameContent div to Drawer.\n    result.content.append(fragmentFrom.html`\n      <style>\n        :host {\n          display: inline-grid;\n          /* Constrain content if overlay's height is constrained. */\n          grid-template: minmax(0, 1fr) / minmax(0, 1fr);\n          max-height: 100vh;\n          max-width: 100vw;\n          outline: none;\n          position: fixed;\n          -webkit-tap-highlight-color: transparent;\n        }\n\n        [part~=\"frame\"] {\n          box-sizing: border-box;\n          display: grid;\n          overscroll-behavior: contain;\n          pointer-events: initial;\n          position: relative;\n        }\n\n        #frameContent {\n          display: grid;\n          grid-template: minmax(0, 1fr) / minmax(0, 1fr);\n          overflow: hidden;\n        }\n      </style>\n      <div id=\"backdrop\" part=\"backdrop\" tabindex=\"-1\"></div>\n      <div id=\"frame\" part=\"frame\" role=\"none\">\n        <div id=\"frameContent\">\n          <slot></slot>\n        </div>\n      </div>\n    `);\n\n    renderParts(result.content, this[state]);\n\n    return result;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.backdropPartType) {\n    const { backdropPartType } = state;\n    const backdrop = root.getElementById(\"backdrop\");\n    if (backdrop) {\n      transmute(backdrop, backdropPartType);\n    }\n  }\n  if (!changed || changed.framePartType) {\n    const { framePartType } = state;\n    const frame = root.getElementById(\"frame\");\n    if (frame) {\n      transmute(frame, framePartType);\n    }\n  }\n}\n\nexport default Overlay;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport DialogModalityMixin from \"./DialogModalityMixin.js\";\nimport FocusCaptureMixin from \"./FocusCaptureMixin.js\";\nimport { defaultState, template } from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport ModalBackdrop from \"./ModalBackdrop.js\";\nimport Overlay from \"./Overlay.js\";\n\nconst Base = DialogModalityMixin(FocusCaptureMixin(KeyboardMixin(Overlay)));\n\n/**\n * Basic modal overlay that the user typically dismisses with an explicit action.\n *\n * This component presents its children as a basic modal dialog which appears on\n * top of the main page content and which the user must interact with before\n * they can return to the page.\n *\n * @inherits Overlay\n * @mixes DialogModalityMixin\n * @mixes FocusCaptureMixin\n * @mixes KeyboardMixin\n * @part {ModalBackdrop} backdrop\n */\nclass Dialog extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: ModalBackdrop,\n      tabIndex: -1,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    const frame = result.content.querySelector(\"#frame\");\n    /** @type {any} */ const cast = this;\n    cast[FocusCaptureMixin.wrap](frame);\n\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            height: 100%;\n            left: 0;\n            pointer-events: initial;\n            top: 0;\n            width: 100%;\n          }\n        </style>\n      `\n    );\n\n    return result;\n  }\n}\n\nexport default Dialog;\n","import { updateChildNodes } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { createElement } from \"../core/template.js\";\nimport Dialog from \"./Dialog.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  keydown,\n  raiseChangeEvents,\n  render,\n  setState,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\n\n/**\n * Asks a single question the user can answer with choice buttons\n *\n * @inherits Dialog\n * @part {button} choice-button - a button representing a choice\n * @part {div} choice-button-container - the container for the choice buttons\n */\nclass AlertDialog extends Dialog {\n  /**\n   * The buttons created by the component to represent the choices in the\n   * [choices](#choices) property.\n   *\n   * @type {HTMLElement[]}\n   */\n  get choiceButtons() {\n    return this[state].choiceButtons;\n  }\n\n  /**\n   * The class or tag used to create the `choice-button` parts —\n   * the set of choices shown to the user.\n   *\n   * @type {PartDescriptor}\n   * @default 'button'\n   */\n  get choiceButtonPartType() {\n    return this[state].choiceButtonPartType;\n  }\n  set choiceButtonPartType(choiceButtonPartType) {\n    this[setState]({ choiceButtonPartType });\n  }\n\n  /**\n   * An array of strings indicating the choices the `AlertDialog` will present\n   * to the user as responses to the alert. For each string in the array, the\n   * `AlertDialog` displays a button labeled with that string.\n   *\n   * By default, this is an array with a single choice, \"OK\".\n   *\n   * @type {string[]}\n   */\n  get choices() {\n    return this[state].choices;\n  }\n  set choices(choices) {\n    this[setState]({ choices });\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      choiceButtonPartType: \"button\",\n      choiceButtons: [],\n      choices: [\"OK\"],\n    });\n  }\n\n  // Let the user select a choice by pressing its initial letter.\n  [keydown](/** @type {KeyboardEvent} */ event) {\n    let handled = false;\n\n    const key = event.key.length === 1 && event.key.toLowerCase();\n    if (key) {\n      // See if one of the choices starts with the key.\n      const choice = this.choices.find(\n        (choice) => choice[0].toLowerCase() === key\n      );\n      if (choice) {\n        this.close({\n          choice,\n        });\n        handled = true;\n      }\n    }\n\n    // Prefer mixin result if it's defined, otherwise use base result.\n    return handled || (super[keydown] && super[keydown](event)) || false;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      this[ids].choiceButtonContainer.addEventListener(\n        \"click\",\n        async (event) => {\n          // TODO: Ignore clicks on choiceButtonContainer background.\n          const button = event.target;\n          if (button instanceof HTMLElement) {\n            const choice = button.textContent;\n            this[raiseChangeEvents] = true;\n            await this.close({ choice });\n            this[raiseChangeEvents] = false;\n          }\n        }\n      );\n    }\n\n    if (changed.choiceButtons) {\n      updateChildNodes(\n        this[ids].choiceButtonContainer,\n        this[state].choiceButtons\n      );\n    }\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When choices or choice button part type changes, regenerate buttons.\n    if (changed.choiceButtonPartType || changed.choices) {\n      /** @type {string[]} */ const choices = state.choices;\n      const choiceButtons = choices.map((choice) => {\n        const button = createElement(state.choiceButtonPartType);\n        if (\"part\" in button) {\n          /** @type {any} */ (button).part = \"choice-button\";\n        }\n        button.textContent = choice;\n        return button;\n      });\n      Object.freeze(choiceButtons);\n      Object.assign(effects, {\n        choiceButtons,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n    // Replace the default slot with a new default slot and a button container.\n    const defaultSlot = result.content.querySelector(\"slot:not([name])\");\n    if (defaultSlot) {\n      defaultSlot.replaceWith(fragmentFrom.html`\n        <div id=\"alertDialogContent\">\n          <slot></slot>\n          <div id=\"choiceButtonContainer\" part=\"choice-button-container\"></div>\n        </div>\n      `);\n    }\n    return result;\n  }\n}\n\nexport default AlertDialog;\n","import { closestFocusableNode } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultState, firstRender, render, state } from \"./internal.js\";\n\n// Quick detection of whether we'll need to handle focus.\n// As of February 2019, we don't need to handle this in Chrome, perhaps because\n// they already support delegatesFocus (which handles related focus issues).\nconst focusTest = document.createElement(\"div\");\nfocusTest.attachShadow({ mode: \"open\", delegatesFocus: true });\n/** @type {any} */\nconst focusTestShadowRoot = focusTest.shadowRoot;\nconst nativeDelegatesFocus = focusTestShadowRoot.delegatesFocus;\n\n/**\n * Normalizes focus treatment for custom elements with Shadow DOM\n *\n * This mixin exists because the default behavior for mousedown should set the\n * focus to the closest ancestor of the clicked element that can take the focus.\n * As of Nov 2018, Chrome and Safari don't handle this as expected when the\n * clicked element is reassigned across more than one slot to end up inside a\n * focusable element. In such cases, the focus will end up on the body. Firefox\n * exhibits the behavior we want. See\n * https://github.com/w3c/webcomponents/issues/773.\n *\n * This mixin normalizes behavior to provide what Firefox does. When the user\n * mouses down inside anywhere inside the component's light DOM or Shadow DOM,\n * we walk up the composed tree to find the first element that can take the\n * focus and put the focus on it.\n *\n * @module ComposedFocusMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ComposedFocusMixin(Base) {\n  // The class prototype added by the mixin.\n  class ComposedFocus extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        composeFocus: !nativeDelegatesFocus,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        this.addEventListener(\"mousedown\", (event) => {\n          if (!this[state].composeFocus) {\n            return;\n          }\n          // Only process events for the main (usually left) button.\n          if (event.button !== 0) {\n            return;\n          }\n          if (event.target instanceof Element) {\n            const target = closestFocusableNode(event.target);\n            if (target) {\n              target.focus();\n              event.preventDefault();\n            }\n          }\n        });\n      }\n    }\n  }\n\n  return ComposedFocus;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  inputDelegate,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Delegates its ARIA label property to an inner input-type element.\n *\n * This helps ensure that elements built around an inner input element provide a\n * proper accessible label for assistive technologies like screen readers.\n *\n * You can identify which inner input element selection should be delegated to\n * by defining an `internal.inputDelegate` property and returning the desired\n * inner input.\n *\n * @module DelegateInputLabelMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DelegateInputLabelMixin(Base) {\n  // The class prototype added by the mixin.\n  class DelegateInputLabel extends Base {\n    // Forward any ARIA label to the input element.\n    get ariaLabel() {\n      return this[state].ariaLabel;\n    }\n    set ariaLabel(ariaLabel) {\n      if (!this[state].removingAriaAttribute) {\n        this[setState]({\n          ariaLabel: String(ariaLabel),\n        });\n      }\n    }\n\n    // Forward ARIA labelledby as an aria-label to the input element.\n    // Note the lowercase \"b\" in the name, necessary to support the actual\n    // attribute name \"aria-labelledby\", which has no hyphen before the \"by\".\n    get ariaLabelledby() {\n      return this[state].ariaLabelledby;\n    }\n    set ariaLabelledby(ariaLabelledby) {\n      if (!this[state].removingAriaAttribute) {\n        this[setState]({\n          ariaLabelledby: String(ariaLabelledby),\n        });\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        ariaLabel: null,\n        ariaLabelledby: null,\n        inputLabel: null,\n        removingAriaAttribute: false,\n      });\n    }\n\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        // Refresh the input label on focus. This refresh appears to happen fast\n        // enough that the screen reader will announce the refreshed label.\n        this.addEventListener(\"focus\", () => {\n          this[raiseChangeEvents] = true;\n          const inputLabel = refreshInputLabel(this, this[state]);\n          this[setState]({ inputLabel });\n          this[raiseChangeEvents] = false;\n        });\n      }\n\n      // Apply the latest input label to the input delegate.\n      if (changed.inputLabel) {\n        const { inputLabel } = this[state];\n        if (inputLabel) {\n          this[inputDelegate].setAttribute(\"aria-label\", inputLabel);\n        } else {\n          this[inputDelegate].removeAttribute(\"aria-label\");\n        }\n      }\n    }\n\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (this[firstRender]) {\n        // Refresh the label on first render. This is not guaranteed to pick up\n        // labels defined by another element, as that element (or elements) may\n        // not be in the DOM yet. For that reason, we'll also refresh the label\n        // on focus. The reason to do it now is to handle the common cases where\n        // the element defining the label does exist so that accessibility\n        // testing tools can confirm that the input delegate does have a label.\n        // Because this refresh can entail multiple searches of the tree, we\n        // defer the refresh to idle time.\n        // @ts-ignore\n        const idleCallback = window.requestIdleCallback || setTimeout;\n        idleCallback(() => {\n          const inputLabel = refreshInputLabel(this, this[state]);\n          this[setState]({ inputLabel });\n        });\n      }\n\n      // Once we've obtained an aria-label or aria-labelledby from the host, we\n      // remove those attirbutes so that the labels don't get announced twice.\n      // We use a flag to distinguish between us removing our own ARIA\n      // attributes (which should not update state), and someone removing\n      // those attributes from the outside (which should update state).\n      const { ariaLabel, ariaLabelledby } = this[state];\n      if (changed.ariaLabel && !this[state].removingAriaAttribute) {\n        if (this.getAttribute(\"aria-label\")) {\n          this.setAttribute(\"delegated-label\", ariaLabel);\n          this[setState]({ removingAriaAttribute: true });\n          this.removeAttribute(\"aria-label\");\n        }\n      }\n      if (changed.ariaLabelledby && !this[state].removingAriaAttribute) {\n        if (this.getAttribute(\"aria-labelledby\")) {\n          this.setAttribute(\"delegated-labelledby\", ariaLabelledby);\n          this[setState]({ removingAriaAttribute: true });\n          this.removeAttribute(\"aria-labelledby\");\n        }\n      }\n\n      if (changed.removingAriaAttribute && this[state].removingAriaAttribute) {\n        // We've done whatever removal we needed, and can now reset our flag.\n        this[setState]({ removingAriaAttribute: false });\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // If the ariaLabel changes, we can update our inputLabel state\n      // immediately. Among other things, this facilitates scenarios where we\n      // have nested elements using DelegateInputLabelMixin: the outermost\n      // element can use whatever label approach it wants, the inner elements\n      // will all use ariaLabel.\n      //\n      // We also update the label if we're focused, using ariaLabelledby, and\n      // the selectedText changes. One pattern with select-like elements is to\n      // have them include their own ID in the IDs specified by aria-labelledby.\n      // This can incorporate the element's own `selectedText` in the announced\n      // label. That `selectedText` can change while the element has focus, in\n      // which case we'll refresh.\n      if (\n        (changed.ariaLabel && state.ariaLabel) ||\n        (changed.selectedText &&\n          state.ariaLabelledby &&\n          this.matches(\":focus-within\"))\n      ) {\n        const inputLabel = refreshInputLabel(this, state);\n        Object.assign(effects, { inputLabel });\n      }\n\n      return effects;\n    }\n  }\n\n  return DelegateInputLabel;\n}\n\n// Given an element that is being used as a label, extract its label text.\nfunction getLabelFromElement(element) {\n  // We use innerText here instead of textContent because we want the rendered\n  // text. If, e.g., a text node includes a span with `display: none`,\n  // textContent would include that hidden text, but innerText would leave it\n  // out -- which is what we want here.\n  if (\"selectedText\" in element) {\n    // Element (most likely Elix) with selectedText property\n    return element.selectedText;\n  } else if (\"value\" in element && \"options\" in element) {\n    // select or select-like element\n    const value = element.value;\n    const option = element.options.find((option) => option.value === value);\n    return option ? option.innerText : \"\";\n  } else if (\"value\" in element) {\n    // Other input element\n    return element.value;\n  } else {\n    // Other\n    return element.innerText;\n  }\n}\n\n/**\n * Calculate an appropriate label for the component's delegated input element.\n * When the element gets the focus, we refresh its label. This is done because\n * three of the labeling strategies (`aria-labelledby` attribute, `for`\n * attribute, and wrapping `label`) reference other elements in the tree -- and\n * the contents of those elements can change dynamically.\n *\n * @private\n * @param {HTMLElement} element\n * @param {PlainObject} state\n */\nfunction refreshInputLabel(element, state) {\n  const { ariaLabel, ariaLabelledby } = state;\n  /** @type {any} */ const rootNode = element.isConnected\n    ? element.getRootNode()\n    : null;\n  let inputLabel = null;\n\n  // Prefer aria-labelledby over aria-label, per\n  // https://developers.google.com/web/fundamentals/accessibility/semantics-aria/aria-labels-and-relationships.\n  // After that, we prefer a `label` element with a `for` attribute, and finally\n  // a wrapping `label` element.\n  //\n  // There do not appear to be consistent cross-browser rules for handling\n  // multiple forms of label assignment on the same component. E.g., if you\n  // place an element in a wrapping label *and* point a `label` element at that\n  // element with a `for` attribute, as of August 2020 Chrome and Firefox will\n  // announce both, but Safari will only announce the `for` label.\n  //\n  // Since people are probably not relying upon specific results for multiple\n  // forms of label assignment, we don't attempt to construct a combined label\n  // in those cases.\n  if (ariaLabelledby && rootNode) {\n    // Collect labels from elements with the indicated IDs.\n    const ids = ariaLabelledby.split(\" \");\n    const labels = ids.map((id) => {\n      const elementWithId = rootNode.getElementById(id);\n      // Get a label from the indicated element.\n      // Special case: if the element is providing its own label, we return its\n      // current `selectedText` state.\n      const label = !elementWithId\n        ? \"\"\n        : elementWithId === element && state.value !== null\n        ? state.selectedText\n        : getLabelFromElement(elementWithId);\n      return label;\n    });\n    inputLabel = labels.join(\" \");\n  } else if (ariaLabel) {\n    // Use ariaLabel property as input label.\n    inputLabel = ariaLabel;\n  } else if (rootNode) {\n    const id = element.id;\n    if (id) {\n      // Look for labelling element with `for` attribute.\n      const elementWithFor = rootNode.querySelector(`[for=\"${id}\"]`);\n      if (elementWithFor instanceof HTMLElement) {\n        // Obtain label from wrapping label element.\n        inputLabel = getLabelFromElement(elementWithFor);\n      }\n    }\n    if (inputLabel === null) {\n      // Last option is to look for closest wrapping label element.\n      const labelElement = element.closest(\"label\");\n      if (labelElement) {\n        inputLabel = getLabelFromElement(labelElement);\n      }\n    }\n  }\n\n  if (inputLabel) {\n    inputLabel = inputLabel.trim();\n  }\n\n  return inputLabel;\n}\n","import { deepContains } from \"../core/dom.js\";\nimport { fragmentFrom, templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultState, render, setState, state, template } from \"./internal.js\";\n\n// We consider the keyboard to be active if the window has received a keydown\n// event since the last mousedown event.\nlet keyboardActive = false;\n\n/** @type {any} */\nconst focusVisibleChangedListenerKey = Symbol(\"focusVisibleChangedListener\");\n\n/**\n * Shows a focus indication if and only if the keyboard is active.\n *\n * The keyboard is considered to be active if a keyboard event has occurred\n * since the last mousedown event.\n *\n * This is loosely modeled after the proposed\n * [focus-visible](https://github.com/WICG/focus-visible) feature for CSS.\n *\n * @module FocusVisibleMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function FocusVisibleMixin(Base) {\n  // The class prototype added by the mixin.\n  return class FocusVisible extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n\n      // We listen to focusin/focusout instead of focus/blur because components\n      // like Menu want to handle focus visiblity for the items they contain,\n      // and those contained items can get the focus. Using focusin/focusout\n      // lets us know whether this element *or any element it contains* has the\n      // focus.\n      //\n      // Focus events are problematic in that they can occur during rendering:\n      // if an element with the focus is updated so that its tabindex is\n      // removed, it will lose focus. Since these focus handlers need to set\n      // state, this could lead to setting state during rendering, which is bad.\n      // To avoid this problem, we use promise timing to defer the setting of\n      // state.\n      this.addEventListener(\"focusout\", (event) => {\n        Promise.resolve().then(() => {\n          // What has the focus now?\n          /** @type {any} */ const cast = event;\n          const newFocusedElement =\n            cast.relatedTarget || document.activeElement;\n          const isFocusedElement = this === newFocusedElement;\n          const containsFocus = deepContains(this, newFocusedElement);\n          const lostFocus = !isFocusedElement && !containsFocus;\n          if (lostFocus) {\n            this[setState]({\n              focusVisible: false,\n            });\n            // No longer need to listen for changes in focus visibility.\n            document.removeEventListener(\n              \"focusvisiblechange\",\n              this[focusVisibleChangedListenerKey]\n            );\n            this[focusVisibleChangedListenerKey] = null;\n          }\n        });\n      });\n      this.addEventListener(\"focusin\", () => {\n        Promise.resolve().then(() => {\n          if (this[state].focusVisible !== keyboardActive) {\n            // Show the element as focused if the keyboard has been used.\n            this[setState]({\n              focusVisible: keyboardActive,\n            });\n          }\n          if (!this[focusVisibleChangedListenerKey]) {\n            // Listen to subsequent changes in focus visibility.\n            this[focusVisibleChangedListenerKey] = () => refreshFocus(this);\n            document.addEventListener(\n              \"focusvisiblechange\",\n              this[focusVisibleChangedListenerKey]\n            );\n          }\n        });\n      });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        focusVisible: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      // Suppress the component's normal `outline` style unless we know the\n      // focus should be visible.\n      if (changed.focusVisible) {\n        const { focusVisible } = this[state];\n        this.toggleAttribute(\"focus-visible\", focusVisible);\n      }\n    }\n\n    get [template]() {\n      const result = super[template] || templateFrom.html``;\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host {\n            outline: none;\n          }\n\n          :host([focus-visible]:focus-within) {\n            outline-color: Highlight; /* Firefox */\n            outline-color: -webkit-focus-ring-color; /* All other browsers */\n            outline-style: auto;\n          }\n        </style>\n      `);\n      return result;\n    }\n  };\n}\n\nfunction refreshFocus(/** @type {ReactiveElement} */ element) {\n  element[setState]({\n    focusVisible: keyboardActive,\n  });\n}\n\nfunction updateKeyboardActive(/** @type {boolean} */ newKeyboardActive) {\n  if (keyboardActive !== newKeyboardActive) {\n    keyboardActive = newKeyboardActive;\n    const oldEvent = new CustomEvent(\"focus-visible-changed\", {\n      detail: {\n        focusVisible: keyboardActive,\n      },\n    });\n    document.dispatchEvent(oldEvent);\n    const event = new CustomEvent(\"focusvisiblechange\", {\n      detail: {\n        focusVisible: keyboardActive,\n      },\n    });\n    document.dispatchEvent(event);\n  }\n}\n\n// Listen for top-level keydown and mousedown events.\n// Use capture phase so we detect events even if they're handled.\nwindow.addEventListener(\n  \"keydown\",\n  () => {\n    updateKeyboardActive(true);\n  },\n  { capture: true }\n);\n\nwindow.addEventListener(\n  \"mousedown\",\n  () => {\n    updateKeyboardActive(false);\n  },\n  { capture: true }\n);\n","import { firstFocusableElement } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { delegatesFocus, focusTarget, shadowRoot } from \"./internal.js\";\n\n/**\n * Delegates a component's focus to its first focusable shadow element.\n *\n * This mixin serves as a polyfill for the standard `delegatesFocus` shadow root\n * property. As of June 2020, that property is still only natively supported in\n * Chrome. The Chrome delegatesFocus implementation has some subtle issues;\n * until additional implementations are available, it's hard to know whether the\n * issues are with the definition of delegatesFocus, with Chrome's\n * implementation, or with Elix component code. Accordingly, for the time being\n * this polyfill is used even on Chrome.\n *\n * @module DelegateFocusMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DelegateFocusMixin(Base) {\n  // The class prototype added by the mixin.\n  class DelegateFocus extends Base {\n    /**\n     * Returns true if the component is delegating its focus.\n     *\n     * A component using `DelegateFocusMixin` will always have this property be\n     * true unless a class takes measures to override it.\n     *\n     * @type {boolean}\n     * @default true\n     */\n    get [delegatesFocus]() {\n      return true;\n    }\n\n    /**\n     * If someone tries to put the focus on us, delegate the focus to the first\n     * focusable element in the composed tree below our shadow root.\n     *\n     * @ignore\n     * @param {FocusOptions=} focusOptions\n     */\n    focus(focusOptions) {\n      // On browsers that support delegatesFocus natively, we should just be\n      // able to let the browser handle the focus method. However, we hit a bug\n      // in June 2020 where the native focus method in Chrome did not always\n      // produce the expected results if delegatesFocus is set.\n      //\n      // Specific bug: a PopupButton would like to delegates focus to its source\n      // button. Tabbing to a PopupButton focused on the source button as\n      // expected. Moreover, programmatically setting focus on the button also\n      // worked. However, when a PopupButton's popup was closed with the Escape\n      // key, OverlayMixin attemped to set programmatically focus to the\n      // PopupButton. This did *not* work as expecte, and focus ended up on the\n      // body. Until we have a second native implementation to compare against,\n      // it's difficult to determine whether this is a bug in the definition of\n      // delegatesFocus, Chrome's implementation, or our code.\n\n      // /** @type {any} */ const cast = this[shadowRoot];\n      // if (cast.delegatesFocus) {\n      //   // Native support for delegatesFocus, so don't need to do anything.\n      //   super.focus(focusOptions);\n      //   return;\n      // }\n      const focusElement = this[focusTarget];\n      if (focusElement) {\n        focusElement.focus(focusOptions);\n      }\n    }\n\n    get [focusTarget]() {\n      // HACK: The commented-out code lets us rely on the browser to indicate\n      // which element should be focused on in browsers that don't support\n      // native delegatesFocus. However, this code creates subtle focus problems\n      // in components like AutoCompleteListBox: if the user clicks the toggle\n      // button, the focus won't be placed on the top-level AutoCompleteComboBox\n      // as expected; that element will be returned as the focus target, but if\n      // it doesn't have a non-negative tabindex, forwardFocus won't think it's\n      // focusable. A more correct solution would be for all components that are\n      // focusable to give themselves a tabIndex of 0 by default or define a new\n      // public `focusable` that components could use to indicate that they're\n      // focusable. Until we have time to fully explore that, we workaround the\n      // bug by providing the polyfill behavior even in browsers that have\n      // delegatesFocus.\n\n      // /** @type {any} */ const cast = this[shadowRoot];\n      // return cast.delegatesFocus\n      //   ? this\n      //   : firstFocusableElement(this[shadowRoot]);\n      return firstFocusableElement(this[shadowRoot]);\n    }\n  }\n\n  return DelegateFocus;\n}\n","import { setInternalState, standardBooleanAttributes } from \"../core/dom.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport {\n  defaultState,\n  defaultTabIndex,\n  firstRender,\n  ids,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\n\nconst extendsKey = Symbol(\"extends\");\n\nconst delegatedPropertySettersKey = Symbol(\"delegatedPropertySetters\");\n\n/* True if a standard element is focusable by default. */\n/** @type {IndexedObject<boolean>} */\nconst focusableByDefault = {\n  a: true,\n  area: true,\n  button: true,\n  details: true,\n  iframe: true,\n  input: true,\n  select: true,\n  textarea: true,\n};\n\n/*\n * A set of events which, if fired by the inner standard element, should be\n * re-raised by the custom element.\n *\n * These are events which are spec'ed to NOT get retargetted across a Shadow DOM\n * boundary, organized by which element(s) raise the events. To properly\n * simulate these, we will need to listen for the real events, then re-raise a\n * simulation of the original event. For more information, see\n * https://www.w3.org/TR/shadow-dom/#h-events-that-are-not-leaked-into-ancestor-trees.\n *\n * It appears that we do *not* need to re-raise the non-bubbling \"focus\" and\n * \"blur\" events. These appear to be automatically re-raised as expected -- but\n * it's not clear why that happens.\n *\n * The list below is reasonably complete. It omits elements that cannot be\n * wrapped (see class notes above). Also, we haven't actually tried wrapping\n * every element in this list; some of the more obscure ones might not actually\n * work as expected, but it was easier to include them for completeness than\n * to actually verify whether or not the element can be wrapped.\n */\n/** @type {IndexedObject<string[]>} */\nconst reraiseEvents = {\n  address: [\"scroll\"],\n  blockquote: [\"scroll\"],\n  caption: [\"scroll\"],\n  center: [\"scroll\"],\n  dd: [\"scroll\"],\n  dir: [\"scroll\"],\n  div: [\"scroll\"],\n  dl: [\"scroll\"],\n  dt: [\"scroll\"],\n  fieldset: [\"scroll\"],\n  form: [\"reset\", \"scroll\"],\n  frame: [\"load\"],\n  h1: [\"scroll\"],\n  h2: [\"scroll\"],\n  h3: [\"scroll\"],\n  h4: [\"scroll\"],\n  h5: [\"scroll\"],\n  h6: [\"scroll\"],\n  iframe: [\"load\"],\n  img: [\"abort\", \"error\", \"load\"],\n  input: [\"abort\", \"change\", \"error\", \"select\", \"load\"],\n  li: [\"scroll\"],\n  link: [\"load\"],\n  menu: [\"scroll\"],\n  object: [\"error\", \"scroll\"],\n  ol: [\"scroll\"],\n  p: [\"scroll\"],\n  script: [\"error\", \"load\"],\n  select: [\"change\", \"scroll\"],\n  tbody: [\"scroll\"],\n  tfoot: [\"scroll\"],\n  thead: [\"scroll\"],\n  textarea: [\"change\", \"select\", \"scroll\"],\n};\n\n/*\n * Mouse events that should be disabled if the inner component is disabled.\n */\nconst mouseEventNames = [\n  \"click\",\n  \"dblclick\",\n  \"mousedown\",\n  \"mouseenter\",\n  \"mouseleave\",\n  \"mousemove\",\n  \"mouseout\",\n  \"mouseover\",\n  \"mouseup\",\n  \"wheel\",\n];\n\n// Keep track of which re-raised events should bubble.\n/** @type {IndexedObject<boolean>} */\nconst eventBubbles = {\n  abort: true,\n  change: true,\n  reset: true,\n};\n\n// Elements which are display: block by default.\n// Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\nconst blockElements = [\n  \"address\",\n  \"article\",\n  \"aside\",\n  \"blockquote\",\n  \"canvas\",\n  \"dd\",\n  \"div\",\n  \"dl\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"li\",\n  \"main\",\n  \"nav\",\n  \"noscript\",\n  \"ol\",\n  \"output\",\n  \"p\",\n  \"pre\",\n  \"section\",\n  \"table\",\n  \"tfoot\",\n  \"ul\",\n  \"video\",\n];\n\n// Standard attributes that don't have corresponding properties.\n// These need to be delegated from the wrapper to the inner element.\nconst attributesWithoutProperties = [\n  \"accept-charset\",\n  \"autoplay\",\n  \"buffered\",\n  \"challenge\",\n  \"codebase\",\n  \"colspan\",\n  \"contenteditable\",\n  \"controls\",\n  \"crossorigin\",\n  \"datetime\",\n  \"dirname\",\n  \"for\",\n  \"formaction\",\n  \"http-equiv\",\n  \"icon\",\n  \"ismap\",\n  \"itemprop\",\n  \"keytype\",\n  \"language\",\n  \"loop\",\n  \"manifest\",\n  \"maxlength\",\n  \"minlength\",\n  \"muted\",\n  \"novalidate\",\n  \"preload\",\n  \"radiogroup\",\n  \"readonly\",\n  \"referrerpolicy\",\n  \"rowspan\",\n  \"scoped\",\n  \"usemap\",\n];\n\nconst Base = DelegateFocusMixin(ReactiveElement);\n\n/**\n * Wraps a standard HTML element so it can be extended\n *\n * The typical way to use this class is via its static `wrap` method.\n *\n * @inherits ReactiveElement\n * @mixes DelegateFocusMixin\n * @part inner - the inner standard HTML element\n */\nclass WrappedStandardElement extends Base {\n  constructor() {\n    super();\n    /** @type {any} */ const cast = this;\n    if (!this[nativeInternals] && cast.attachInternals) {\n      this[nativeInternals] = cast.attachInternals();\n    }\n  }\n\n  /**\n   *\n   * Wrapped standard elements need to forward some attributes to the inner\n   * element in cases where the attribute does not have a corresponding\n   * property. These attributes include those prefixed with \"aria-\", and some\n   * unusual standard attributes like contenteditable. To handle those, this\n   * class defines its own attributeChangedCallback.\n   *\n   * @ignore\n   * @param {string} name\n   * @param {string} oldValue\n   * @param {string} newValue\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    const forwardAttribute = attributesWithoutProperties.indexOf(name) >= 0;\n    if (forwardAttribute) {\n      const innerAttributes = Object.assign({}, this[state].innerAttributes, {\n        [name]: newValue,\n      });\n      this[setState]({ innerAttributes });\n    } else {\n      // Rely on the base attributeChangedCallback provided by\n      // AttributeMarshallingMixin.\n      super.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n\n  // Delegate method defined by HTMLElement.\n  blur() {\n    this.inner.blur();\n  }\n\n  // One HTMLElement we *don't* delegate is `click`. Generally speaking, a click\n  // on the outer wrapper should behave the same as a click on the inner\n  // element. Also, we want to ensure outside event listeners get a click event\n  // when the click method is invoked. But a click on the inner element will\n  // raise a click event that won't be re-raised by default across the shadow\n  // boundary. The precise behavior seems to be slightly different in Safari\n  // than other browsers, but it seems safer to not delegate click.\n  //\n  // click() {}\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      innerAttributes: {},\n    });\n  }\n\n  get [defaultTabIndex]() {\n    return focusableByDefault[this.extends] ? 0 : -1;\n  }\n\n  /**\n   * The tag name of the standard HTML element extended by this class.\n   *\n   * @returns {string}\n   */\n  get extends() {\n    return this.constructor[extendsKey];\n  }\n\n  /**\n   * Returns a reference to the inner standard HTML element.\n   *\n   * @type {HTMLElement}\n   */\n  get inner() {\n    /** @type {any} */\n    const result = this[ids] && this[ids].inner;\n    if (!result) {\n      /* eslint-disable no-console */\n      console.warn(\n        \"Attempted to get an inner standard element before it was instantiated.\"\n      );\n    }\n    return result;\n  }\n\n  static get observedAttributes() {\n    // For our custom attributeChangedCallback to work, we need to observe\n    // the attributes we want to forward.\n    // @ts-ignore\n    return [...super.observedAttributes, ...attributesWithoutProperties];\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    const inner = this.inner;\n    if (this[firstRender]) {\n      // Listen for any events raised by the inner element which will not\n      // automatically be retargetted across the Shadow DOM boundary, and\n      // re-raise those events when they happen.\n      const eventNames = reraiseEvents[this.extends] || [];\n      eventNames.forEach((eventName) => {\n        inner.addEventListener(eventName, () => {\n          const event = new Event(eventName, {\n            bubbles: eventBubbles[eventName] || false,\n          });\n          this.dispatchEvent(event);\n        });\n      });\n\n      // If inner element can be disabled, then listen to mouse events on the\n      // *outer* element and absorb them if the inner element is disabled.\n      // Without this, a mouse event like a click on the inner disabled element\n      // would be treated as a click on the outer element. Someone listening to\n      // clicks on the outer element would get a click event, even though the\n      // overall element is supposed to be disabled.\n      if (\"disabled\" in inner) {\n        mouseEventNames.forEach((eventName) => {\n          this.addEventListener(eventName, (event) => {\n            if (/** @type {any} */ (inner).disabled) {\n              event.stopImmediatePropagation();\n            }\n          });\n        });\n      }\n    }\n\n    if (changed.tabIndex) {\n      inner.tabIndex = this[state].tabIndex;\n    }\n\n    if (changed.innerAttributes) {\n      // Forward attributes to the inner element.\n      // See notes at attributeChangedCallback.\n      const { innerAttributes } = this[state];\n      for (const name in innerAttributes) {\n        applyAttribute(inner, name, innerAttributes[name]);\n      }\n    }\n\n    // Forward delegated properties to the inner element.\n    this.constructor[delegatedPropertySettersKey].forEach((property) => {\n      if (changed[property]) {\n        const value = this[state][property];\n\n        // Inner selection properties needed to be handled specially.\n        // See TrackTextSelectionMixin.\n        const specialCase =\n          (property === \"selectionEnd\" || property === \"selectionStart\") &&\n          value === null;\n        if (!specialCase) {\n          inner[property] = value;\n        }\n      }\n    });\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n\n    // Apply disabled state.\n    if (changed.disabled) {\n      const { disabled } = this[state];\n      if (disabled !== undefined) {\n        setInternalState(this, \"disabled\", disabled);\n      }\n    }\n  }\n\n  /**\n   * The template copied into the shadow tree of new instances of this element.\n   *\n   * The default value of this property is a template that includes an instance\n   * the standard element being wrapped, with a `<slot>` element inside that\n   * to pick up the element's light DOM content. For example, if you wrap an\n   * `<a>` element, then the default template will look like:\n   *\n   *     <template>\n   *       <style>\n   *       :host {\n   *         display: inline-block;\n   *       }\n   *       </style>\n   *       <a id=\"inner\">\n   *         <slot></slot>\n   *       </a>\n   *     </template>\n   *\n   * The `display` styling applied to the host will be `block` for elements that\n   * are block elements by default, and `inline-block` (not `inline`) for other\n   * elements.\n   *\n   * If you'd like the template to include other elements, then override this\n   * property and return a template of your own. The template should include an\n   * instance of the standard HTML element you are wrapping, and the ID of that\n   * element should be \"inner\".\n   *\n   * @type {(string|HTMLTemplateElement)}\n   */\n  get [template]() {\n    const display = blockElements.includes(this.extends)\n      ? \"block\"\n      : \"inline-block\";\n    const tag = this.extends;\n    return templateFrom.html`\n      <style>\n        :host {\n          display: ${display}\n        }\n        \n        [part~=\"inner\"] {\n          box-sizing: border-box;\n          height: 100%;\n          width: 100%;\n        }\n      </style>\n      <${tag} id=\"inner\" part=\"inner ${tag}\">\n        <slot></slot>\n      </${tag}>\n    `;\n  }\n\n  /**\n   * Creates a class that wraps a standard HTML element.\n   *\n   * Note that the resulting class is a subclass of WrappedStandardElement, not\n   * the standard class being wrapped. E.g., if you call\n   * `WrappedStandardElement.wrap('a')`, you will get a class whose shadow tree\n   * will include an anchor element, but the class will *not* inherit from\n   * HTMLAnchorElement.\n   *\n   * @static\n   * @param {string} extendsTag - the standard HTML element tag to extend\n   */\n  static wrap(extendsTag) {\n    // Create the new class.\n    /** @type {Constructor<WrappedStandardElement>} */\n    class Wrapped extends WrappedStandardElement {}\n\n    // Indicate which tag it wraps.\n    /** @type {any} */ (Wrapped)[extendsKey] = extendsTag;\n\n    // Create getter/setters that delegate to the wrapped element.\n    const element = document.createElement(extendsTag);\n    defineDelegates(Wrapped, Object.getPrototypeOf(element));\n\n    return Wrapped;\n  }\n}\n\n/**\n * Update the given attribute on an element.\n *\n * Passing a non-null `value` acts like a call to `setAttribute(name, value)`.\n * If the supplied `value` is nullish, this acts like a call to\n * `removeAttribute(name)`.\n *\n * @private\n * @param {HTMLElement} element\n * @param {string} name\n * @param {string} value\n */\nexport function applyAttribute(element, name, value) {\n  if (standardBooleanAttributes[name]) {\n    // Boolean attribute\n    if (typeof value === \"string\") {\n      element.setAttribute(name, \"\");\n    } else if (value === null) {\n      element.removeAttribute(name);\n    }\n  } else {\n    // Regular string-valued attribute\n    if (value != null) {\n      element.setAttribute(name, value.toString());\n    } else {\n      element.removeAttribute(name);\n    }\n  }\n}\n\n/**\n * Create a delegate for the method or property identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createDelegate(name, descriptor) {\n  if (typeof descriptor.value === \"function\") {\n    if (name !== \"constructor\") {\n      return createMethodDelegate(name, descriptor);\n    }\n  } else if (\n    typeof descriptor.get === \"function\" ||\n    typeof descriptor.set === \"function\"\n  ) {\n    return createPropertyDelegate(name, descriptor);\n  }\n  return null;\n}\n\n/**\n * Create a delegate for the method identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createMethodDelegate(name, descriptor) {\n  const value = function (/** @type {any[]} */ ...args) {\n    // @ts-ignore\n    this.inner[name](...args);\n  };\n  const delegate = {\n    configurable: descriptor.configurable,\n    enumerable: descriptor.enumerable,\n    value,\n    writable: descriptor.writable,\n  };\n  return delegate;\n}\n\n/**\n * Create a delegate for the property identified by the descriptor.\n *\n * @private\n * @param {string} name\n * @param {PropertyDescriptor} descriptor\n */\nfunction createPropertyDelegate(name, descriptor) {\n  /** @type {PlainObject} */\n  const delegate = {\n    configurable: descriptor.configurable,\n    enumerable: descriptor.enumerable,\n  };\n  if (descriptor.get) {\n    delegate.get = function () {\n      return getInnerProperty(/** @type {any} */ (this), name);\n    };\n  }\n  if (descriptor.set) {\n    delegate.set = function (/** @type {any} */ value) {\n      setInnerProperty(/** @type {any} */ (this), name, value);\n    };\n  }\n  if (descriptor.writable) {\n    delegate.writable = descriptor.writable;\n  }\n  return delegate;\n}\n\n/**\n * Define delegates for the given class for each property/method on the\n * indicated prototype.\n *\n * @private\n * @param {Constructor<Object>} cls\n * @param {Object} prototype\n */\nfunction defineDelegates(cls, prototype) {\n  const names = Object.getOwnPropertyNames(prototype);\n  cls[delegatedPropertySettersKey] = [];\n  names.forEach((name) => {\n    const descriptor = Object.getOwnPropertyDescriptor(prototype, name);\n    if (!descriptor) {\n      return;\n    }\n    const delegate = createDelegate(name, descriptor);\n    if (delegate) {\n      Object.defineProperty(cls.prototype, name, delegate);\n      if (delegate.set) {\n        cls[delegatedPropertySettersKey].push(name);\n      }\n    }\n  });\n}\n\n/**\n * Return the value of the named property on the inner standard element.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} name\n */\nfunction getInnerProperty(element, name) {\n  // If we haven't rendered yet, use internal state value. Once we've\n  // rendered, we get the value from the wrapped element itself. Return our\n  // concept of the current property value from state. If the property hasn't\n  // been defined, however, get the current value of the property from the\n  // inner element.\n  //\n  // This is intended to support cases like an anchor element. If someone sets\n  // `href` on a wrapped anchor, we'll know the value of `href` from state,\n  // but we won't know the value of href-dependent calculated properties like\n  // `protocol`. Using two sources of truth (state and the inner element)\n  // seems fragile, but it's unclear how else to handle this without\n  // reimplementing all HTML property interactions ourselves.\n  //\n  // This arrangement also means that, if an inner element property can change\n  // in response to user interaction (e.g., an input element's value changes\n  // as the user types), the component must listen to suitable events on the\n  // inner element and update its state accordingly.\n  const value = element[state][name];\n  return value || (element[shadowRoot] && element.inner[name]);\n}\n\n/**\n * Set the named property on the inner standard element.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} name\n * @param {any} value\n */\nfunction setInnerProperty(element, name, value) {\n  // We normally don't check an existing state value before calling[setState],\n  // relying instead on[setState] to do that check for us. However, we have\n  // dangers in this particular component of creating infinite loops.\n  //\n  // E.g., setting the tabindex attibute will call attributeChangedCallback,\n  // which will set the tabIndex property, which will want to set state, which\n  // will cause a render, which will try to reflect the current value of the\n  // tabIndex property to the tabindex attribute, causing a loop.\n  //\n  // To avoid this, we check the existing value before updating our state.\n  if (element[state][name] !== value) {\n    element[setState]({ [name]: value });\n  }\n}\n\nexport default WrappedStandardElement;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ComposedFocusMixin from \"./ComposedFocusMixin.js\";\nimport DelegateInputLabelMixin from \"./DelegateInputLabelMixin.js\";\nimport FocusVisibleMixin from \"./FocusVisibleMixin.js\";\nimport { defaultState, ids, inputDelegate, tap, template } from \"./internal.js\";\nimport WrappedStandardElement from \"./WrappedStandardElement.js\";\n\nconst Base = ComposedFocusMixin(\n  DelegateInputLabelMixin(\n    FocusVisibleMixin(WrappedStandardElement.wrap(\"button\"))\n  )\n);\n\n/**\n * Base class for custom buttons.\n *\n * `Button` wraps a standard HTML `button` element, allowing for custom styling\n * and behavior while ensuring standard keyboard and focus behavior.\n *\n * @inherits WrappedStandardElement\n * @mixes ComposedFocusMixin\n * @mixes DelegateInputLabelMixin\n * @mixes KeyboardMixin\n * @part button - the inner standard HTML button\n */\nclass Button extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      role: \"button\",\n    });\n  }\n\n  get [inputDelegate]() {\n    return this[ids].inner;\n  }\n\n  // Respond to a simulated click.\n  [tap]() {\n    const clickEvent = new MouseEvent(\"click\", {\n      bubbles: true,\n      cancelable: true,\n    });\n    this.dispatchEvent(clickEvent);\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            display: inline-flex;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n          }\n\n          [part~=\"button\"] {\n            align-items: center;\n            background: none;\n            border: none;\n            color: inherit;\n            flex: 1;\n            font: inherit;\n            outline: none;\n            padding: 0;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default Button;\n","import Button from \"../base/Button.js\";\nimport PlainButtonMixin from \"./PlainButtonMixin.js\";\n\n/**\n * Button component in the Plain reference design system\n *\n * @inherits Button\n */\nclass PlainButton extends PlainButtonMixin(Button) {}\n\nexport default PlainButton;\n","import { template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\n\n/**\n * Button styles in the Plain reference design system\n *\n * @module PlainButtonMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PlainButtonMixin(Base) {\n  return class PlainButton extends Base {\n    get [template]() {\n      const result = super[template];\n      result.content.append(fragmentFrom.html`\n        <style>\n          :host([disabled]) ::slotted(*) {\n            opacity: 0.5;\n          }\n\n          [part~=\"button\"] {\n            display: inline-flex;\n            justify-content: center;\n            margin: 0;\n            position: relative;\n          }\n        </style>\n      `);\n      return result;\n    }\n  };\n}\n","import { template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainButton from \"./PlainButton.js\";\n\n/**\n * Button with a border in the Plain reference design system\n *\n * @inherits PlainButton\n */\nclass PlainBorderButton extends PlainButton {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"button\"] {\n            background: #eee;\n            border: 1px solid #ccc;\n            padding: 0.25em 0.5em;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainBorderButton;\n","import { template } from \"../base/internal.js\";\nimport ModalBackdrop from \"../base/ModalBackdrop.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * ModalBackdrop component in the Plain reference design system\n *\n * @inherits ModalBackdrop\n */\nclass PlainModalBackdrop extends ModalBackdrop {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            background: rgba(0, 0, 0, 0.2);\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainModalBackdrop;\n","import { template } from \"../base/internal.js\";\nimport OverlayFrame from \"../base/OverlayFrame.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * OverlayFrame component in the Plain reference design system\n *\n * The default appearance of `OverlayFrame` uses a simple drop-shadow to let the\n * user see the framed content as being on top of the background page content.\n *\n * @inherits OverlayFrame\n */\nclass PlainOverlayFrame extends OverlayFrame {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            background: white;\n            border: 1px solid rgba(0, 0, 0, 0.2);\n            box-shadow: 0 0px 10px rgba(0, 0, 0, 0.5);\n            box-sizing: border-box;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainOverlayFrame;\n","import { defaultState } from \"../base/internal.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport PlainModalBackdrop from \"./PlainModalBackdrop.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * Modal overlay styles for the Plain reference design system\n *\n * @module PlainModalOverlayMixin\n * @part {PlainModalBackdrop} backdrop\n * @part {PlainOverlayFrame} frame\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PlainModalOverlayMixin(Base) {\n  return class PlainModalOverlay extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        backdropPartType: PlainModalBackdrop,\n        framePartType: PlainOverlayFrame,\n      });\n    }\n  };\n}\n","import AlertDialog from \"../base/AlertDialog.js\";\nimport { defaultState, template } from \"../base/internal.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainBorderButton from \"./PlainBorderButton.js\";\nimport PlainModalOverlayMixin from \"./PlainModalOverlayMixin.js\";\n\n/**\n * AlertDialog component in the Plain reference design system\n *\n * @inherits AlertDialog\n * @mixes PlainModalOverlayMixin\n * @part {PlainBorderButton} choice-button\n */\nclass PlainAlertDialog extends PlainModalOverlayMixin(AlertDialog) {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      choiceButtonPartType: PlainBorderButton,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"frame\"] {\n            padding: 1em;\n          }\n\n          [part~=\"choice-button-container\"] {\n            margin-top: 1em;\n          }\n\n          [part~=\"choice-button\"]:not(:first-child) {\n            margin-left: 0.5em;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainAlertDialog;\n","import PlainAlertDialog from \"../src/plain/PlainAlertDialog.js\";\nexport default class ElixAlertDialog extends PlainAlertDialog {}\ncustomElements.define(\"elix-alert-dialog\", ElixAlertDialog);\n","import Dialog from \"../base/Dialog.js\";\nimport PlainModalOverlayMixin from \"./PlainModalOverlayMixin.js\";\n\n/**\n * Dialog component in the Plain reference design system\n *\n * @inherits Dialog\n * @mixes PlainModalOverlayMixin\n */\nclass PlainDialog extends PlainModalOverlayMixin(Dialog) {}\n\nexport default PlainDialog;\n","import PlainDialog from \"../src/plain/PlainDialog.js\";\nexport default class ElixDialog extends PlainDialog {}\ncustomElements.define(\"elix-dialog\", ElixDialog);\n","/**\n * Helpers related to universal accessibility\n *\n * Universal accessibility is a core goal of the Elix project. These helpers are\n * used by mixins like [AriaListMixin](AriaListMixin) and\n * [AriaMenuMixin](AriaMenuMixin) to support accessibility via ARIA.\n *\n * @module accessibility\n */\n\n// Used by ensureId\nconst generatedIdKey = Symbol(\"generatedId\");\nlet generatedIdCount = 0;\n\n/**\n * A dictionary mapping built-in HTML elements to their default ARIA role.\n *\n * Example: `defaultAriaRole.ol` returns \"list\", since the default ARIA role\n * for an `ol` (ordered list) element is \"list\".\n */\nexport const defaultAriaRole = {\n  a: \"link\",\n  article: \"region\",\n  button: \"button\",\n  h1: \"sectionhead\",\n  h2: \"sectionhead\",\n  h3: \"sectionhead\",\n  h4: \"sectionhead\",\n  h5: \"sectionhead\",\n  h6: \"sectionhead\",\n  hr: \"sectionhead\",\n  iframe: \"region\",\n  link: \"link\",\n  menu: \"menu\",\n  ol: \"list\",\n  option: \"option\",\n  output: \"liveregion\",\n  progress: \"progressbar\",\n  select: \"select\",\n  table: \"table\",\n  td: \"td\",\n  textarea: \"textbox\",\n  th: \"th\",\n  ul: \"list\",\n};\n\n/**\n * If the given element already has an ID, return it. If not, generate a\n * previously unused ID and return that.\n *\n * @param {Element} element\n * @returns {string}\n */\nexport function ensureId(element) {\n  let id = element.id || element[generatedIdKey];\n  if (!id) {\n    id = `_id${generatedIdCount++}`;\n    // Remember that we generated an ID for this element.\n    element[generatedIdKey] = id;\n  }\n  return id;\n}\n","import { selfAndComposedAncestors } from \"../core/dom.js\";\nimport { shadowRoot } from \"./internal.js\";\n\n/**\n * Utilities for working with scrolling.\n *\n * @module defaultScrollTarget\n */\n\n/**\n * Returns true if the given target or any of its ancestors can be scrolled\n * in the indicated direction.\n *\n * This is used, e.g., by gesture event handlers to predict if the default\n * behavior for a given event is likely to result in scrolling.\n *\n * @param {EventTarget} target\n * @param {'horizontal'|'vertical'} orientation\n * @param {boolean} downOrRight\n */\nexport function canScrollInDirection(target, orientation, downOrRight) {\n  if (!(target instanceof Node)) {\n    return false;\n  }\n  for (const ancestor of selfAndComposedAncestors(target)) {\n    if (ancestor instanceof HTMLElement) {\n      const style = getComputedStyle(ancestor);\n      const vertical = orientation === \"vertical\";\n      const scrollAxisMatch =\n        (vertical &&\n          (style.overflowY === \"scroll\" || style.overflowY === \"auto\")) ||\n        (!vertical &&\n          (style.overflowX === \"scroll\" || style.overflowX === \"auto\"));\n      if (scrollAxisMatch) {\n        // Found an ancestor that can potentially scroll in this orientation.\n        const scrollEdge = vertical ? \"scrollTop\" : \"scrollLeft\";\n        if (!downOrRight && ancestor[scrollEdge] > 0) {\n          // Target has room to scroll up or left.\n          return true;\n        }\n        const scrollLength = vertical ? \"scrollHeight\" : \"scrollWidth\";\n        const clientLength = vertical ? \"clientHeight\" : \"clientWidth\";\n        const scrollMax = ancestor[scrollLength] - ancestor[clientLength];\n        if (downOrRight && ancestor[scrollEdge] < scrollMax) {\n          // Target has room to scroll down or right.\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * This helper returns a guess as to what portion of the given element can be\n * scrolled. This is used by [CursorInViewMixin](CursorInViewMixin) to\n * provide a default implementation of [scrollTarget].\n *\n * If the element has a shadow root containing a default (unnamed) slot, this\n * returns the first ancestor of that slot that has either `overflow-x` or\n * `overflow-y` styled as `auto` or `scroll`. If the element has no default\n * slot, or no scrolling ancestor is found, the element itself is returned.\n *\n * @param {Element} element – the component to examine for a scrolling\n * element\n * @returns {Element}\n */\nexport function defaultScrollTarget(element) {\n  const root = element[shadowRoot];\n  const slot = root && root.querySelector(\"slot:not([name])\");\n  const scrollingParent =\n    slot &&\n    slot.parentNode instanceof Element &&\n    getScrollableElement(slot.parentNode);\n  return scrollingParent || element;\n}\n\n/**\n * Return true if the given element can be scrolled.\n *\n * @private\n * @param {HTMLElement} element\n */\nfunction isElementScrollable(element) {\n  const style = getComputedStyle(element);\n  const overflowX = style.overflowX;\n  const overflowY = style.overflowY;\n  return (\n    overflowX === \"scroll\" ||\n    overflowX === \"auto\" ||\n    overflowY === \"scroll\" ||\n    overflowY === \"auto\"\n  );\n}\n\n/**\n * If the given element can be scrolled, return that. If not, return the closest\n * ancestor that can be scrolled. If no such ancestor is found, return null.\n *\n * @param {Element} node\n * @returns {Element|null}\n */\nexport function getScrollableElement(node) {\n  for (const ancestor of selfAndComposedAncestors(node)) {\n    if (ancestor instanceof HTMLElement && isElementScrollable(ancestor)) {\n      return ancestor;\n    }\n  }\n  return null;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  closestAvailableItemIndex,\n  defaultState,\n  goFirst,\n  goLast,\n  goNext,\n  goPrevious,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Tracks and navigates the current item in a set of items\n *\n * @module ItemsCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsCursor extends Base {\n    /**\n     * Look for an item which is available in the given state..\n     *\n     * The `options` parameter can accept options for:\n     *\n     * * `direction`: 1 to move forward, -1 to move backward\n     * * `index`: the index to start at, defaults to `state.currentIndex`\n     * * `wrap`: whether to wrap around the ends of the `items` array, defaults\n     *   to `state.cursorOperationsWrap`.\n     *\n     * If an available item was found, this returns its index. If no item was\n     * found, this returns -1.\n     *\n     * @param {PlainObject} state\n     * @param {PlainObject} options\n     * @returns {number}\n     */\n    [closestAvailableItemIndex](state, options = {}) {\n      const direction = options.direction !== undefined ? options.direction : 1;\n      const index =\n        options.index !== undefined ? options.index : state.currentIndex;\n      const wrap =\n        options.wrap !== undefined ? options.wrap : state.cursorOperationsWrap;\n\n      const { items } = state;\n      const count = items ? items.length : 0;\n\n      if (count === 0) {\n        // No items\n        return -1;\n      }\n\n      if (wrap) {\n        // Search with wrapping.\n\n        // Modulus taking into account negative numbers.\n        let i = ((index % count) + count) % count;\n        const end = (((i - direction) % count) + count) % count;\n        while (i !== end) {\n          const available = state.availableItemFlags\n            ? state.availableItemFlags[i]\n            : true;\n          if (available) {\n            return i;\n          }\n          // See modulus note above.\n          i = (((i + direction) % count) + count) % count;\n        }\n      } else {\n        // Search without wrapping.\n        for (let i = index; i >= 0 && i < count; i += direction) {\n          const available = state.availableItemFlags\n            ? state.availableItemFlags[i]\n            : true;\n          if (available) {\n            return i;\n          }\n        }\n      }\n\n      return -1; // No item found\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        currentIndex: -1,\n        desiredCurrentIndex: null,\n        currentItem: null,\n        currentItemRequired: false,\n        cursorOperationsWrap: false,\n      });\n    }\n\n    /**\n     * Move to the first item in the set.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goFirst]() {\n      if (super[goFirst]) {\n        super[goFirst]();\n      }\n      return moveToIndex(this, 0, 1);\n    }\n\n    /**\n     * Move to the last item in the set.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goLast]() {\n      if (super[goLast]) {\n        super[goLast]();\n      }\n      return moveToIndex(this, this[state].items.length - 1, -1);\n    }\n\n    /**\n     * Move to the next item in the set.\n     *\n     * If no item is current, move to the first item.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goNext]() {\n      if (super[goNext]) {\n        super[goNext]();\n      }\n      const { currentIndex, items } = this[state];\n      const start = currentIndex < 0 && items ? 0 : currentIndex + 1;\n      return moveToIndex(this, start, 1);\n    }\n\n    /**\n     * Move to the previous item in the set.\n     *\n     * If no item is current, move to the last item.\n     *\n     * @protected\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    [goPrevious]() {\n      if (super[goPrevious]) {\n        super[goPrevious]();\n      }\n      const { currentIndex, items } = this[state];\n      const start =\n        currentIndex < 0 && items ? items.length - 1 : currentIndex - 1;\n      return moveToIndex(this, start, -1);\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Ensure currentIndex is valid.\n      if (\n        changed.availableItemFlags ||\n        changed.items ||\n        changed.currentIndex ||\n        changed.currentItemRequired\n      ) {\n        const {\n          currentIndex,\n          desiredCurrentIndex,\n          currentItem,\n          currentItemRequired,\n          items,\n        } = state;\n\n        const count = items ? items.length : 0;\n\n        // Determine the desired index: the one we want irrespective of whether\n        // we have items or their availability.\n        // Assume we'll stick with the same desired index we already have.\n        let newDesiredIndex = desiredCurrentIndex;\n        if (\n          changed.items &&\n          !changed.currentIndex &&\n          currentItem &&\n          count > 0 &&\n          items[currentIndex] !== currentItem\n        ) {\n          // The items changed, and the item at the cursor is no longer the\n          // same. See if we can find that item again in the list of items.\n          const newItemIndex = items.indexOf(currentItem);\n          if (newItemIndex >= 0) {\n            // Found the item again; try to use its index.\n            newDesiredIndex = newItemIndex;\n          }\n        } else if (\n          changed.currentIndex &&\n          ((currentIndex < 0 && currentItem !== null) ||\n            (currentIndex >= 0 &&\n              (count === 0 || items[currentIndex] !== currentItem)) ||\n            desiredCurrentIndex === null)\n        ) {\n          // Someone explicitly moved the cursor, which trumps any previously\n          // desired index.\n          newDesiredIndex = currentIndex;\n        }\n\n        // If an item is required and there's no selection, we'll implicitly try\n        // to get the first available item.\n        if (currentItemRequired && newDesiredIndex < 0) {\n          newDesiredIndex = 0;\n        }\n\n        // Now that we know what index we want, see how close we can get to it.\n        let newIndex;\n        if (newDesiredIndex < 0) {\n          // All negative indices are equivalent to -1.\n          newDesiredIndex = -1;\n          newIndex = -1;\n        } else if (count === 0) {\n          // No items yet.\n          newIndex = -1;\n        } else {\n          // See how close we can get to the desired index.\n          // First clamp index to existing array bounds.\n          newIndex = Math.max(Math.min(count - 1, newDesiredIndex), 0);\n          // Look for an available item going forward.\n          newIndex = this[closestAvailableItemIndex](state, {\n            direction: 1,\n            index: newIndex,\n            wrap: false,\n          });\n          if (newIndex < 0) {\n            // Next best: look for an available item going backward.\n            newIndex = this[closestAvailableItemIndex](state, {\n              direction: -1,\n              index: newIndex - 1,\n              wrap: false,\n            });\n          }\n        }\n\n        const newItem = (items && items[newIndex]) || null;\n        Object.assign(effects, {\n          currentIndex: newIndex,\n          desiredCurrentIndex: newDesiredIndex,\n          currentItem: newItem,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return ItemsCursor;\n}\n\n/**\n * Update currentIndex and return true if it changed.\n *\n * @private\n * @param {Element} element\n * @param {number} index\n * @param {number} direction\n */\nfunction moveToIndex(element, index, direction) {\n  const newIndex = element[closestAvailableItemIndex](element[state], {\n    direction,\n    index,\n  });\n  if (newIndex < 0) {\n    // Couldn't find an item to move to.\n    return false;\n  }\n  // Normally we don't check to see if state is going to change before setting\n  // state, but the methods defined by this mixin want to be able to return true\n  // if the index is actually going to change.\n  const changed = element[state].currentIndex !== newIndex;\n  if (changed) {\n    element[setState]({\n      currentIndex: newIndex,\n    });\n  }\n  return changed;\n}\n","/**\n * Helpers for working with element content.\n *\n * @module content\n */\n\n// These are tags for elements that can appear in the document body, but do not\n// seem to have any user-visible manifestation.\n// See https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst auxiliarycustomTags = [\n  \"applet\", // deprecated\n  \"basefont\", // deprecated\n  \"embed\",\n  \"font\", // deprecated\n  \"frame\", // deprecated\n  \"frameset\", // deprecated\n  \"isindex\", // deprecated\n  \"keygen\", // deprecated\n  \"link\",\n  \"multicol\", // deprecated\n  \"nextid\", // deprecated\n  \"noscript\",\n  \"object\",\n  \"param\",\n  \"script\",\n  \"style\",\n  \"template\",\n  \"noembed\", // deprecated\n];\n\n/**\n * Use a heuristic to extract text from the given item.\n *\n * This looks, in order, at: the `aria-label` attribute, the `alt` attribute,\n * `innerText`, or `textContent`.\n *\n * This function is used as the default implementation of the\n * [getItemText](internal#getItemText) function in several mixins.\n *\n * @param {Element} element\n * @returns {string}\n */\nexport function getDefaultText(element) {\n  return (\n    element.getAttribute(\"aria-label\") ||\n    element.getAttribute(\"alt\") ||\n    /** @type {any} */ (element).innerText ||\n    element.textContent ||\n    \"\"\n  );\n}\n\n/**\n * Return true if the given node is likely to be useful as component content.\n *\n * This will be `true` for nodes that are: a) instances of `Element`\n * (`HTMLElement` or `SVGElement`), and b) not on a blacklist of normally\n * invisible elements (such as `style` or `script`). Among other things, this\n * returns `false` for Text nodes.\n *\n * This is used by [ContentItemsMixin](ContentItemsMixin) to filter out nodes\n * which are unlikely to be interesting as list items. This is intended to\n * satisfy the Gold Standard checklist criteria [Auxiliary\n * Content](https://github.com/webcomponents/gold-standard/wiki/Auxiliary-Content),\n * so that a component does not inadvertently treat `<style>` and other invisible\n * items as element content.\n *\n * @param {Node} node\n * @returns {boolean}\n */\nexport function isSubstantiveElement(node) {\n  return (\n    node instanceof Element &&\n    (!node.localName || auxiliarycustomTags.indexOf(node.localName) < 0)\n  );\n}\n\n/**\n * Return a set of Elements which are likely to be useful as component content.\n *\n * Given a `NodeList` or array of objects, this will return only those array\n * members that are: a) instances of `Element` (`HTMLElement` or `SVGElement`),\n * and b) not on a blacklist of normally invisible elements (such as `style` or\n * `script`). Among other things, this filters out Text nodes.\n *\n * @param {(NodeList|Node[])} nodes - the list of nodes to filter\n * @returns {Element[]} the filtered elements\n */\nexport function substantiveElements(nodes) {\n  return [].filter.call(nodes, (/** @type {Node} */ node) =>\n    isSubstantiveElement(node)\n  );\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  closestAvailableItemIndex,\n  keydown,\n  raiseChangeEvents,\n  scrollTarget,\n  setState,\n  state,\n} from \"./internal.js\";\nimport { defaultScrollTarget } from \"./scrolling.js\";\n\n/**\n * Maps the Page Up and Page Down keys to item cursor operations.\n *\n * The keyboard interaction model generally follows that of Microsoft Windows'\n * list boxes instead of those in OS X:\n *\n * * The Page Up/Down and Home/End keys actually move the item cursor, rather\n *   than just scrolling. The former behavior seems more generally useful for\n *   keyboard users.\n *\n * * Pressing Page Up/Down will first move the cursor to the topmost/bottommost\n *   visible item if the cursor is not already there. Thereafter, the key\n *   will move the cursor up/down by a page, and (per the above point) make\n *   the current item visible.\n *\n * To ensure the current item is in view following use of Page Up/Down, use\n * the related [CursorInViewMixin](CursorInViewMixin).\n *\n * This mixin expects the component to provide:\n *\n * * A `[keydown]` method invoked when a key is pressed. You can use\n *   [KeyboardMixin](KeyboardMixin) for that purpose, or wire up your own\n *   keyboard handling and call `[keydown]` yourself.\n * * A `currentIndex` state member updatable via [setState]`.\n *\n * @module KeyboardPagedCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardPagedCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardPagedCursor extends Base {\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n      const orientation = this.orientation;\n      if (orientation !== \"horizontal\") {\n        switch (event.key) {\n          case \"PageDown\":\n            handled = this.pageDown();\n            break;\n\n          case \"PageUp\":\n            handled = this.pageUp();\n            break;\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event));\n    }\n\n    // Default orientation implementation defers to super,\n    // but if not found, looks in state.\n    get orientation() {\n      return (\n        super.orientation || (this[state] && this[state].orientation) || \"both\"\n      );\n    }\n\n    /**\n     * Scroll down one page.\n     */\n    pageDown() {\n      if (super.pageDown) {\n        super.pageDown();\n      }\n      return scrollOnePage(this, true);\n    }\n\n    /**\n     * Scroll up one page.\n     */\n    pageUp() {\n      if (super.pageUp) {\n        super.pageUp();\n      }\n      return scrollOnePage(this, false);\n    }\n\n    /**\n     * The element that will be scrolled when the user presses Page Up or\n     * Page Down. The default value is calculated by\n     * [defaultScrollTarget](defaultScrollTarget#defaultScrollTarget).\n     *\n     * See [scrollTarget](internal#internal.scrollTarget).\n     *\n     * @type {HTMLElement}\n     */\n    get [scrollTarget]() {\n      /** @type {any} */\n      const element = this;\n      return super[scrollTarget] || defaultScrollTarget(element);\n    }\n  }\n\n  return KeyboardPagedCursor;\n}\n\n/**\n * Return the item whose content spans the given y position (relative to the\n * top of the list's scrolling client area), or null if not found.\n *\n * If downward is true, move down the list of items to find the first item\n * found at the given y position; if downward is false, move up the list of\n * items to find the last item at that position.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {number} y\n * @param {boolean} downward\n */\nfunction getIndexOfItemAtY(element, y, downward) {\n  const items = element[state].items;\n  const start = downward ? 0 : items.length - 1;\n  const end = downward ? items.length : 0;\n  const step = downward ? 1 : -1;\n\n  // Find the item spanning the indicated y coordinate.\n  let index;\n  /** @type {HTMLElement|SVGElement|null} */ let item = null;\n  let itemRect;\n  const { availableItemFlags } = element[state];\n  for (index = start; index !== end; index += step) {\n    // Only consider items available in the element's current state.\n    const available = availableItemFlags ? availableItemFlags[index] : true;\n    if (available) {\n      itemRect = items[index].getBoundingClientRect();\n      if (itemRect.top <= y && y <= itemRect.bottom) {\n        // Item spans the indicated y coordinate.\n        item = items[index];\n        break;\n      }\n    }\n  }\n\n  if (!item || !itemRect) {\n    return null;\n  }\n\n  // We may have found an item whose padding spans the given y coordinate,\n  // but whose content is actually above/below that point.\n  // TODO: If the item has a border, then padding should be included in\n  // considering a hit.\n  const itemStyle = getComputedStyle(item);\n  const itemPaddingTop = itemStyle.paddingTop\n    ? parseFloat(itemStyle.paddingTop)\n    : 0;\n  const itemPaddingBottom = itemStyle.paddingBottom\n    ? parseFloat(itemStyle.paddingBottom)\n    : 0;\n  const contentTop = itemRect.top + itemPaddingTop;\n  const contentBottom =\n    contentTop + item.clientHeight - itemPaddingTop - itemPaddingBottom;\n  if ((downward && contentTop <= y) || (!downward && contentBottom >= y)) {\n    // The indicated coordinate hits the actual item content.\n    return index;\n  } else {\n    // The indicated coordinate falls within the item's padding. Back up to\n    // the item below/above the item we found and return that.\n    return index - step;\n  }\n}\n\n/**\n * Move by one page downward (if downward is true), or upward (if false).\n * Return true if we ended up moving the cursor, false if not.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {boolean} downward\n */\nfunction scrollOnePage(element, downward) {\n  const items = element[state].items;\n  const currentIndex = element[state].currentIndex;\n\n  // Determine the item visible just at the edge of direction we're heading.\n  // We'll move to that item if it's not already current.\n  const targetRect = element[scrollTarget].getBoundingClientRect();\n  const edge = downward ? targetRect.bottom : targetRect.top;\n  const indexOfItemAtEdge = getIndexOfItemAtY(element, edge, downward);\n\n  let newIndex;\n  if (indexOfItemAtEdge && currentIndex === indexOfItemAtEdge) {\n    // The item at the edge was already current, so scroll in the indicated\n    // direction by one page, measuring from the bounds of the current item.\n    // Leave the new item at that edge current.\n    const currentItem = items[currentIndex];\n    const currentRect = currentItem.getBoundingClientRect();\n    const pageHeight = element[scrollTarget].clientHeight;\n    const y = downward\n      ? currentRect.bottom + pageHeight\n      : currentRect.top - pageHeight;\n    newIndex = getIndexOfItemAtY(element, y, downward);\n  } else {\n    // The item at the edge wasn't current yet. Instead of scrolling, we'll just\n    // move to that item. That is, the first attempt to page up/down usually\n    // just moves the cursor to the edge in that direction.\n    newIndex = indexOfItemAtEdge;\n  }\n\n  if (!newIndex) {\n    // We went past the first/last item without finding an item. Move to the\n    // last item (if moving downward) or first item (if moving upward).\n    const index = downward ? items.length - 1 : 0;\n    newIndex = element[closestAvailableItemIndex]\n      ? element[closestAvailableItemIndex](element[state], {\n          direction: downward ? -1 /* Work up */ : 1 /* Work down */,\n          index,\n        })\n      : index;\n  }\n\n  const changed = newIndex !== currentIndex;\n  if (changed) {\n    // If external code causes an operation that scrolls the page, it's\n    // impossible for it to predict where the currentIndex is going to end up.\n    // Accordingly, we raise change events.\n    const saveRaiseChangesEvents = element[raiseChangeEvents];\n    element[raiseChangeEvents] = true;\n    element[setState]({\n      currentIndex: newIndex,\n    });\n    element[raiseChangeEvents] = saveRaiseChangesEvents;\n  }\n  return changed;\n}\n","/**\n * Constants used by Elix mixins and components\n *\n * Sharing these constants allows for greater consistency in things such as user\n * interface timings.\n *\n * @module constants\n */\n\n/**\n * Time in milliseconds after which the user is considered to have stopped\n * typing.\n *\n * This is used by\n * [KeyboardPrefixCursorMixin](KeyboardPrefixCursorMixin).\n *\n * @const {number} TYPING_TIMEOUT_DURATION\n */\nexport const TYPING_TIMEOUT_DURATION = 1000;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { TYPING_TIMEOUT_DURATION } from \"./constants.js\";\nimport { goToItemWithPrefix, keydown, setState, state } from \"./internal.js\";\n\n// Symbols for private data members on an element.\nconst typedPrefixKey = Symbol(\"typedPrefix\");\nconst prefixTimeoutKey = Symbol(\"prefixTimeout\");\n\n/**\n * Lets a user navigate an item cursor by typing the beginning of items\n *\n * Example: suppose a component using this mixin has the following items:\n *\n *     <sample-list-component>\n *       <div>Apple</div>\n *       <div>Apricot</div>\n *       <div>Banana</div>\n *       <div>Blackberry</div>\n *       <div>Blueberry</div>\n *       <div>Cantaloupe</div>\n *       <div>Cherry</div>\n *       <div>Lemon</div>\n *       <div>Lime</div>\n *     </sample-list-component>\n *\n * If this component receives the focus, and the user presses the \"b\" or \"B\"\n * key, the item cursor will move to \"Banana\", because it's the first item that\n * matches the prefix \"b\". (Matching is case-insensitive.) If the user now\n * presses the \"l\" or \"L\" key quickly, the prefix to match becomes \"bl\", so the\n * cursor will move to \"Blackberry\".\n *\n * The prefix typing feature has a one second timeout — the prefix to match will\n * be reset after a second has passed since the user last typed a key. If, in\n * the above example, the user waits a second between typing \"b\" and \"l\", the\n * prefix will become \"l\", so the cursor would move to \"Lemon\".\n *\n * This mixin expects the component to invoke a `keydown` method when a key is\n * pressed. You can use [KeyboardMixin](KeyboardMixin) for that purpose, or wire\n * up your own keyboard handling and call `keydown` yourself.\n *\n * This mixin also expects the component to provide an `items` property. The\n * `textContent` of those items will be used for purposes of prefix matching.\n *\n * @module KeyboardPrefixCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardPrefixCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardPrefixCursor extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      resetTypedPrefix(this);\n    }\n\n    /**\n     * Go to the first item whose text content begins with the given prefix.\n     *\n     * @param {string} prefix - The prefix string to search for\n     * @returns {boolean}\n     */\n    [goToItemWithPrefix](prefix) {\n      if (super[goToItemWithPrefix]) {\n        super[goToItemWithPrefix](prefix);\n      }\n      if (prefix == null || prefix.length === 0) {\n        return false;\n      }\n      // Find item that begins with the prefix. Ignore case.\n      const searchText = prefix.toLowerCase();\n      /** @type {string[]} */ const texts = this[state].texts;\n      const index = texts.findIndex(\n        (text) => text.substr(0, prefix.length).toLowerCase() === searchText\n      );\n      if (index >= 0) {\n        const previousIndex = this[state].currentIndex;\n        this[setState]({ currentIndex: index });\n        return this[state].currentIndex !== previousIndex;\n      } else {\n        return false;\n      }\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled;\n\n      switch (event.key) {\n        case \"Backspace\":\n          handleBackspace(this);\n          handled = true;\n          break;\n\n        case \"Escape\":\n          // Pressing Escape lets user quickly start typing a new prefix.\n          resetTypedPrefix(this);\n          break;\n\n        default:\n          if (\n            !event.ctrlKey &&\n            !event.metaKey &&\n            !event.altKey &&\n            event.key.length === 1\n          ) {\n            handlePlainCharacter(this, event.key);\n          }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event));\n    }\n  }\n\n  return KeyboardPrefixCursor;\n}\n\n/**\n * Handle the Backspace key: remove the last character from the prefix.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction handleBackspace(element) {\n  /** @type {any} */ const cast = element;\n  const length = cast[typedPrefixKey] ? cast[typedPrefixKey].length : 0;\n  if (length > 0) {\n    cast[typedPrefixKey] = cast[typedPrefixKey].substr(0, length - 1);\n  }\n  element[goToItemWithPrefix](cast[typedPrefixKey]);\n  setPrefixTimeout(element);\n}\n\n/**\n * Add a plain character to the prefix.\n *\n * @private\n * @param {ReactiveElement} element\n * @param {string} char\n */\nfunction handlePlainCharacter(element, char) {\n  /** @type {any} */ const cast = element;\n  const prefix = cast[typedPrefixKey] || \"\";\n  cast[typedPrefixKey] = prefix + char;\n  element[goToItemWithPrefix](cast[typedPrefixKey]);\n  setPrefixTimeout(element);\n}\n\n/**\n * Stop listening for typing.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction resetPrefixTimeout(element) {\n  /** @type {any} */ const cast = element;\n  if (cast[prefixTimeoutKey]) {\n    clearTimeout(cast[prefixTimeoutKey]);\n    cast[prefixTimeoutKey] = false;\n  }\n}\n\n/**\n * Clear the prefix under construction.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction resetTypedPrefix(element) {\n  /** @type {any} */ (element)[typedPrefixKey] = \"\";\n  resetPrefixTimeout(element);\n}\n\n/**\n * Wait for the user to stop typing.\n *\n * @private\n * @param {ReactiveElement} element\n */\nfunction setPrefixTimeout(element) {\n  resetPrefixTimeout(element);\n  /** @type {any} */ (element)[prefixTimeoutKey] = setTimeout(() => {\n    resetTypedPrefix(element);\n  }, TYPING_TIMEOUT_DURATION);\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { setState } from \"./internal.js\";\n\n/**\n * Lets an element determine whether it resides in right-to-left text.\n *\n * @module LanguageDirectionMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function LanguageDirectionMixin(Base) {\n  // The class prototype added by the mixin.\n  return class LanguageDirection extends Base {\n    // The only way to get text direction is to wait for the component to\n    // connect and then inspect the computed style on its root element. We set\n    // state before calling super so the new state will be included when\n    // ReactiveMixin calls render.\n    connectedCallback() {\n      /** @type {any} */ const element = this;\n      const languageDirection = getComputedStyle(element).direction;\n      const rightToLeft = languageDirection === \"rtl\";\n      this[setState]({ rightToLeft });\n      super.connectedCallback();\n    }\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { isSubstantiveElement } from \"./content.js\";\nimport { defaultState, stateEffects } from \"./internal.js\";\n\n/**\n * Treats an element's content nodes as list items.\n *\n * Items differ from nodes contents in several ways:\n *\n * * They are often referenced via index.\n * * They may have a selection state.\n * * It's common to do work to initialize the appearance or state of a new\n *   item.\n * * Text nodes are filtered out.\n * * Auxiliary invisible child elements are filtered out and not counted as\n *   items. Auxiliary elements include link, script, style, and template\n *   elements. This filtering ensures that those auxiliary elements can be\n *   used in markup inside of a list without being treated as list items.\n *\n * This mixin expects a component to provide a `content` state member returning\n * a raw set of elements. You can provide that yourself, or use\n * [SlotContentMixin](SlotContentMixin).\n *\n * Most Elix [elements](elements) use `ContentItemsMixin`, including\n * [ListBox](ListBox), [Modes](Modes), and [Tabs](Tabs).\n *\n * @module ContentItemsMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ContentItemsMixin(Base) {\n  return class ContentItems extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        items: null,\n      });\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Regenerate items when content changes.\n      if (changed.content) {\n        /** @type {Node[]} */ const content = state.content;\n        const items = content\n          ? Array.prototype.filter.call(content, (/** @type {Node} */ item) =>\n              isSubstantiveElement(item)\n            )\n          : null;\n        if (items) {\n          Object.freeze(items);\n        }\n        Object.assign(effects, { items });\n      }\n\n      return effects;\n    }\n  };\n}\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport AriaMenuMixin from \"./AriaMenuMixin.js\";\nimport CursorAPIMixin from \"./CursorAPIMixin.js\";\nimport CursorInViewMixin from \"./CursorInViewMixin.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport DirectionCursorMixin from \"./DirectionCursorMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  raiseChangeEvents,\n  render,\n  rendered,\n  scrollTarget,\n  setState,\n  state,\n  stateEffects,\n  tap,\n  template,\n} from \"./internal.js\";\nimport ItemsAPIMixin from \"./ItemsAPIMixin.js\";\nimport ItemsCursorMixin from \"./ItemsCursorMixin.js\";\nimport ItemsTextMixin from \"./ItemsTextMixin.js\";\nimport KeyboardDirectionMixin from \"./KeyboardDirectionMixin.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport KeyboardPagedCursorMixin from \"./KeyboardPagedCursorMixin.js\";\nimport KeyboardPrefixCursorMixin from \"./KeyboardPrefixCursorMixin.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport SlotItemsMixin from \"./SlotItemsMixin.js\";\nimport TapCursorMixin from \"./TapCursorMixin.js\";\n\nconst Base = AriaMenuMixin(\n  CursorAPIMixin(\n    CursorInViewMixin(\n      DelegateFocusMixin(\n        DirectionCursorMixin(\n          ItemsAPIMixin(\n            ItemsCursorMixin(\n              ItemsTextMixin(\n                KeyboardDirectionMixin(\n                  KeyboardMixin(\n                    KeyboardPagedCursorMixin(\n                      KeyboardPrefixCursorMixin(\n                        LanguageDirectionMixin(\n                          SlotItemsMixin(TapCursorMixin(ReactiveElement))\n                        )\n                      )\n                    )\n                  )\n                )\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n);\n\n/**\n * A menu of choices or commands\n *\n * This holds the contents of the menu, not the top-level UI element that invokes\n * a menu. For that, see [MenuButton](MenuButton) or [PopupSource](PopupSource).\n *\n * @inherits ReactiveElement\n * @mixes AriaMenuMixin\n * @mixes CursorInViewMixin\n * @mixes CursorAPIMixin\n * @mixes DelegateFocusMixin\n * @mixes DirectionCursorMixin\n * @mixes ItemsAPIMixin\n * @mixes ItemsCursorMixin\n * @mixes ItemsTextMixin\n * @mixes KeyboardDirectionMixin\n * @mixes KeyboardMixin\n * @mixes KeyboardPagedCursorMixin\n * @mixes KeyboardPrefixCursorMixin\n * @mixes LanguageDirectionMixin\n * @mixes SingleSelectAPIMixin\n * @mixes SlotItemsMixin\n * @mixes TapCursorMixin\n */\nclass Menu extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      availableItemFlags: null,\n      highlightCurrentItem: true,\n      orientation: \"vertical\",\n      currentItemFocused: false,\n    });\n  }\n\n  /**\n   * Flash the current item.\n   *\n   * By default, this uses a heuristic to guess whether the menu was closed by a\n   * keyboard or mouse (on desktop). If so, the menu flashes the current item\n   * off then back on, emulating the menu item selection effect in macOS.\n   * Otherwise, it does nothing.\n   */\n  async flashCurrentItem() {\n    const keyboardActive = this[state].focusVisible;\n    const probablyDesktop = matchMedia(\"(pointer: fine)\").matches;\n    if (keyboardActive || probablyDesktop) {\n      const flashDuration = 75; // milliseconds\n      this[setState]({ highlightCurrentItem: false });\n      await new Promise((resolve) => setTimeout(resolve, flashDuration));\n      this[setState]({ highlightCurrentItem: true });\n      await new Promise((resolve) => setTimeout(resolve, flashDuration));\n    }\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      // Listen to changes in disabled state.\n      this.addEventListener(\"disabledchange\", (event) => {\n        this[raiseChangeEvents] = true;\n        /** @type {any} */ const target = event.target;\n        const { items } = this[state];\n        const index = items === null ? -1 : items.indexOf(target);\n        if (index >= 0) {\n          // Update item availability.\n          const availableItemFlags = this[state].availableItemFlags.slice();\n          availableItemFlags[index] = !target.disabled;\n          this[setState]({ availableItemFlags });\n        }\n        this[raiseChangeEvents] = false;\n      });\n\n      // Treat a pointerdown event as a tap.\n      if (\"PointerEvent\" in window) {\n        // Prefer listening to standard pointer events.\n        this.addEventListener(\"pointerdown\", (event) => this[tap](event));\n      } else {\n        this.addEventListener(\"touchstart\", (event) => this[tap](event));\n      }\n\n      this.removeAttribute(\"tabindex\");\n    }\n\n    const { currentIndex, items } = this[state];\n\n    // Highlight the current item.\n    if (\n      (changed.items || changed.currentIndex || changed.highlightCurrentItem) &&\n      items\n    ) {\n      const { highlightCurrentItem } = this[state];\n      items.forEach((item, index) => {\n        item.toggleAttribute(\n          \"current\",\n          highlightCurrentItem && index === currentIndex\n        );\n      });\n    }\n\n    if (\n      (changed.items ||\n        changed.currentIndex ||\n        changed.currentItemFocused ||\n        changed.focusVisible) &&\n      items\n    ) {\n      // A menu has a complicated focus arrangement in which the current item has\n      // focus, which means it needs a tabindex. However, we don't want any other\n      // item in the menu to have a tabindex, so that if the user presses Tab or\n      // Shift+Tab, they move away from the menu entirely (rather than just moving\n      // to the next or previous item).\n      //\n      // That's already complex, but to make things worse, if we remove the\n      // tabindex from an item that has the focus, the focus gets moved to the\n      // document. In popup menus, the popup will conclude it's lost the focus,\n      // and implicitly close. So we want to move the focus in two phases: 1)\n      // set tabindex on a newly-current item so we can focus on it, 2) after\n      // the new item has been focused, remove the tabindex from any\n      // previous item.\n      items.forEach((item, index) => {\n        const current = index === currentIndex;\n        const isDefaultFocusableItem = currentIndex < 0 && index === 0;\n        if (!this[state].currentItemFocused) {\n          // Phase 1: Add tabindex to newly-current item.\n          if (current || isDefaultFocusableItem) {\n            item.tabIndex = 0;\n          }\n        } else {\n          // Phase 2: Remove tabindex from any previous item.\n          if (!(current || isDefaultFocusableItem)) {\n            item.removeAttribute(\"tabindex\");\n          }\n        }\n      });\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    if (\n      !this[firstRender] &&\n      changed.currentIndex &&\n      !this[state].currentItemFocused\n    ) {\n      // The current item needs the focus, but this is complicated. See notes\n      // in render.\n      const { currentItem } = this[state];\n      const focusElement =\n        currentItem instanceof HTMLElement ? currentItem : this;\n      focusElement.focus();\n\n      // Now that the current item has been focused, we can remove/reset the\n      // tabindex on any item that had previously been current.\n      this[setState]({\n        currentItemFocused: true,\n      });\n    }\n  }\n\n  // @ts-ignore\n  get [scrollTarget]() {\n    return this[ids].content;\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When current item changes, we'll need to focus on it in rendered.\n    if (changed.currentIndex) {\n      Object.assign(effects, {\n        currentItemFocused: false,\n      });\n    }\n\n    // Mark disabled items as unavailable.\n    if (changed.items) {\n      const { items } = state;\n      const availableItemFlags =\n        items === null ? null : items.map((item) => !item.disabled);\n      Object.assign(effects, { availableItemFlags });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          box-sizing: border-box;\n          cursor: default;\n          display: inline-flex;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n        }\n\n        #content {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          max-height: 100%;\n          overflow-x: hidden;\n          overflow-y: auto;\n          -webkit-overflow-scrolling: touch; /* for momentum scrolling */\n        }\n        \n        ::slotted(*) {\n          flex-shrink: 0;\n          outline: none;\n          touch-action: manipulation;\n        }\n\n        ::slotted(option) {\n          font: inherit;\n          min-height: inherit;\n        }\n      </style>\n      <div id=\"content\" role=\"none\">\n        <slot></slot>\n      </div>\n    `;\n  }\n}\n\nexport default Menu;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { defaultAriaRole } from \"./accessibility.js\";\nimport {\n  defaultState,\n  render,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tells assistive technologies to describe a list's items as a menu of choices.\n *\n * @module AriaMenuMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function AriaMenuMixin(Base) {\n  // The class prototype added by the mixin.\n  class AriaMenu extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      const base = super[defaultState];\n      return Object.assign(base, {\n        itemRole: base.itemRole || \"menuitem\",\n        role: base.role || \"menu\",\n      });\n    }\n\n    get itemRole() {\n      return this[state].itemRole;\n    }\n    set itemRole(itemRole) {\n      this[setState]({ itemRole });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      /** @type {ListItemElement[]} */ const items = this[state].items;\n      if ((changed.items || changed.itemRole) && items) {\n        // Give each item a role.\n        const { itemRole } = this[state];\n        items.forEach((item) => {\n          if (itemRole === defaultAriaRole[item.localName]) {\n            item.removeAttribute(\"role\");\n          } else {\n            item.setAttribute(\"role\", itemRole);\n          }\n        });\n      }\n\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  }\n\n  return AriaMenu;\n}\n","import { booleanAttributeValue } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  goFirst,\n  goLast,\n  goNext,\n  goPrevious,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Exposes a public API for navigating a cursor over a set of items\n *\n * This mixin expects a component to provide an `items` Array of all elements in\n * the list. This mixin also expects the component to apply\n * [ItemsCursorMixin](ItemsCursorMixin) or otherwise define a compatible\n * `currentIndex` state and other state members for navigating the current item.\n *\n * Given the above, this mixin exposes a consistent public API for reading and\n * manipulating the cursor.\n *\n * @module CursorAPIMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CursorAPIMixin(Base) {\n  // The class prototype added by the mixin.\n  class CursorAPI extends Base {\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"current-index\") {\n        this.currentIndex = Number(newValue);\n      } else if (name === \"current-item-required\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.currentItemRequired !== value) {\n          this.currentItemRequired = value;\n        }\n      } else if (name === \"cursor-operations-wrap\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.cursorOperationsWrap !== value) {\n          this.cursorOperationsWrap = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    /**\n     * The index of the current item, or -1 if no item is current.\n     *\n     * @type {number}\n     */\n    get currentIndex() {\n      const { items, currentIndex } = this[state];\n      return items && items.length > 0 ? currentIndex : -1;\n    }\n    set currentIndex(currentIndex) {\n      if (!isNaN(currentIndex)) {\n        this[setState]({ currentIndex });\n      }\n    }\n\n    /**\n     * The current item, or null if no item is current.\n     *\n     * @type {Element}\n     */\n    get currentItem() {\n      const { items, currentIndex } = this[state];\n      return items && items[currentIndex];\n    }\n    set currentItem(currentItem) {\n      const { items } = this[state];\n      if (!items) {\n        return;\n      }\n      const currentIndex = items.indexOf(currentItem);\n      this[setState]({ currentIndex });\n    }\n\n    /**\n     * True if the list should always have a current item (if it has items).\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get currentItemRequired() {\n      return this[state].currentItemRequired;\n    }\n    set currentItemRequired(currentItemRequired) {\n      this[setState]({ currentItemRequired });\n    }\n\n    /**\n     * True if cursor operations wrap from last to first, and vice versa.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get cursorOperationsWrap() {\n      return this[state].cursorOperationsWrap;\n    }\n    set cursorOperationsWrap(cursorOperationsWrap) {\n      this[setState]({ cursorOperationsWrap });\n    }\n\n    /**\n     * Moves to the first item in the list.\n     *\n     * @returns {Boolean} True if the current item changed, false if not.\n     */\n    goFirst() {\n      if (super.goFirst) {\n        super.goFirst();\n      }\n      return this[goFirst]();\n    }\n\n    /**\n     * Move to the last item in the list.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goLast() {\n      if (super.goLast) {\n        super.goLast();\n      }\n      return this[goLast]();\n    }\n\n    /**\n     * Move to the next item in the list.\n     *\n     * If the list has no current item, the first item will become current.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goNext() {\n      if (super.goNext) {\n        super.goNext();\n      }\n      return this[goNext]();\n    }\n\n    /**\n     * Moves to the previous item in the list.\n     *\n     * If the list has no current item, the last item will become current.\n     *\n     * @returns {Boolean} True if the current item changed\n     */\n    goPrevious() {\n      if (super.goPrevious) {\n        super.goPrevious();\n      }\n      return this[goPrevious]();\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n      if (changed.currentIndex && this[raiseChangeEvents]) {\n        const { currentIndex } = this[state];\n        const oldEvent = new CustomEvent(\"current-index-changed\", {\n          bubbles: true,\n          detail: { currentIndex },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `currentIndex` property changes.\n         *\n         * @event currentindexchanged\n         */\n        const event = new CustomEvent(\"currentindexchange\", {\n          bubbles: true,\n          detail: { currentIndex },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n  }\n\n  return CursorAPI;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { rendered, scrollTarget, state } from \"./internal.js\";\nimport { defaultScrollTarget } from \"./scrolling.js\";\n\n/**\n * Scrolls to ensure the current item is visible\n *\n * When the current item in a list-like component changes, the current item\n * should be brought into view so that the user can confirm their selection.\n *\n * This mixin expects an `items` collection, such as that provided by\n * [ContentItemsMixin](ContentItemsMixin). It also expects a\n * `state.currentItem` member indicating which item is current. You\n * can supply that yourself, or use\n * [ItemsCursorMixin](ItemsCursorMixin).\n *\n * @module CursorInViewMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CursorInViewMixin(Base) {\n  // The class prototype added by the mixin.\n  class CursorInView extends Base {\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.currentItem) {\n        this.scrollCurrentItemIntoView();\n      }\n    }\n\n    /**\n     * Scroll the current item completely into view, minimizing the degree of\n     * scrolling performed.\n     *\n     * Blink has a `scrollIntoViewIfNeeded()` function that does something\n     * similar, but unfortunately it's non-standard, and in any event often ends\n     * up scrolling more than is absolutely necessary.\n     *\n     * This scrolls the containing element defined by the `scrollTarget`\n     * property. By default, it will scroll the element itself.\n     */\n    scrollCurrentItemIntoView() {\n      if (super.scrollCurrentItemIntoView) {\n        super.scrollCurrentItemIntoView();\n      }\n\n      const { currentItem, items } = this[state];\n      if (!currentItem || !items) {\n        return;\n      }\n\n      // Determine the bounds of the scroll target and item. We use\n      // getBoundingClientRect instead of .offsetTop, etc., because the latter\n      // round values, and we want to handle fractional values.\n      const scrollTargetRect = this[scrollTarget].getBoundingClientRect();\n      const itemRect = currentItem.getBoundingClientRect();\n\n      // Determine how far the item is outside the viewport.\n      const bottomDelta = itemRect.bottom - scrollTargetRect.bottom;\n      const leftDelta = itemRect.left - scrollTargetRect.left;\n      const rightDelta = itemRect.right - scrollTargetRect.right;\n      const topDelta = itemRect.top - scrollTargetRect.top;\n\n      // Scroll the target as necessary to bring the item into view.\n      // If an `orientation` state member is defined, only scroll along that\n      // axis. Otherwise, assume the orientation is \"both\".\n      const orientation = this[state].orientation || \"both\";\n      if (orientation === \"horizontal\" || orientation === \"both\") {\n        if (rightDelta > 0) {\n          this[scrollTarget].scrollLeft += rightDelta; // Scroll right\n        } else if (leftDelta < 0) {\n          this[scrollTarget].scrollLeft += Math.ceil(leftDelta); // Scroll left\n        }\n      }\n      if (orientation === \"vertical\" || orientation === \"both\") {\n        if (bottomDelta > 0) {\n          this[scrollTarget].scrollTop += bottomDelta; // Scroll down\n        } else if (topDelta < 0) {\n          this[scrollTarget].scrollTop += Math.ceil(topDelta); // Scroll up\n        }\n      }\n    }\n\n    /**\n     * The element that should be scrolled to get the selected item into view.\n     *\n     * By default, this uses the [defaultScrollTarget](defaultScrollTarget)\n     * helper to find the most likely candidate for scrolling. You can override\n     * this property to directly identify which element should be scrolled.\n     *\n     * See also [scrollTarget](internal#internal.scrollTarget).\n     */\n    get [scrollTarget]() {\n      const base = super[scrollTarget];\n      /** @type {any} */\n      const element = this;\n      return base || defaultScrollTarget(element);\n    }\n  }\n\n  return CursorInView;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  goDown,\n  goEnd,\n  goFirst,\n  goLast,\n  goLeft,\n  goNext,\n  goPrevious,\n  goRight,\n  goStart,\n  goUp,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\n/**\n * Maps direction semantics to cursor semantics.\n *\n * This turns a movement in a direction (go left, go right) into a cursor\n * operation (go previous, go next).\n *\n * This mixin can be used in conjunction with\n * [KeyboardDirectionMixin](KeyboardDirectionMixin) (which maps keyboard events\n * to directions) and a mixin that handles cursor operations like\n * [ItemsCursorMixin](ItemsCursorMixin).\n *\n * @module DirectionCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DirectionCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  class DirectionCursor extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        canGoDown: null,\n        canGoLeft: null,\n        canGoRight: null,\n        canGoUp: null,\n      });\n    }\n\n    /**\n     * Interprets `goDown` to mean \"move to the next item\".\n     */\n    [goDown]() {\n      if (super[goDown]) {\n        super[goDown]();\n      }\n      return this[goNext]();\n    }\n\n    /**\n     * Interprets `goEnd` to mean \"move to the last item\".\n     */\n    [goEnd]() {\n      if (super[goEnd]) {\n        super[goEnd]();\n      }\n      return this[goLast]();\n    }\n\n    /**\n     * Interprets `goLeft` to mean \"move to the previous item\".\n     *\n     * If the element has a `rightToLeft` property and it is true, then this\n     * moves to the _next_ item.\n     */\n    [goLeft]() {\n      if (super[goLeft]) {\n        super[goLeft]();\n      }\n      return this[state] && this[state].rightToLeft\n        ? this[goNext]()\n        : this[goPrevious]();\n    }\n\n    /**\n     * Interprets `goRight` to mean \"move to the next item\".\n     *\n     * If the element has a `rightToLeft` property and it is true, then this\n     * moves to the _previous_ item.\n     */\n    [goRight]() {\n      if (super[goRight]) {\n        super[goRight]();\n      }\n      return this[state] && this[state].rightToLeft\n        ? this[goPrevious]()\n        : this[goNext]();\n    }\n\n    /**\n     * Interprets `goStart` to mean \"move to the first item\".\n     */\n    [goStart]() {\n      if (super[goStart]) {\n        super[goStart]();\n      }\n      return this[goFirst]();\n    }\n\n    /**\n     * Interprets `goUp` to mean \"move to the previous item\".\n     */\n    [goUp]() {\n      if (super[goUp]) {\n        super[goUp]();\n      }\n      return this[goPrevious]();\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Update computed state members to track whether we can go\n      // down/left/right/up.\n      if (\n        changed.canGoNext ||\n        changed.canGoPrevious ||\n        changed.languageDirection ||\n        changed.orientation ||\n        changed.rightToLeft\n      ) {\n        const { canGoNext, canGoPrevious, orientation, rightToLeft } = state;\n        const horizontal =\n          orientation === \"horizontal\" || orientation === \"both\";\n        const vertical = orientation === \"vertical\" || orientation === \"both\";\n        const canGoDown = vertical && canGoNext;\n        const canGoLeft = !horizontal\n          ? false\n          : rightToLeft\n          ? canGoNext\n          : canGoPrevious;\n        const canGoRight = !horizontal\n          ? false\n          : rightToLeft\n          ? canGoPrevious\n          : canGoNext;\n        const canGoUp = vertical && canGoPrevious;\n        Object.assign(effects, {\n          canGoDown,\n          canGoLeft,\n          canGoRight,\n          canGoUp,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return DirectionCursor;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { firstRender, raiseChangeEvents, rendered, state } from \"./internal.js\";\n\n/**\n * Exposes a public API for the set of items in a list-like element\n *\n * @module ItemsAPIMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsAPIMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsAPI extends Base {\n    /**\n     * The current set of items drawn from the element's current state.\n     *\n     * @type {ListItemElement[]} the element's current items\n     */\n    get items() {\n      return this[state] ? this[state].items : null;\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // Raise items-changed if items changed after the initial render. We'll\n      // see changed.items on initial render, and raiseChangeEvents will be true\n      // if we're using SlotContentMixin, but we don't want to actually raise\n      // the event then because the items didn't change in response to user\n      // activity.\n      if (!this[firstRender] && changed.items && this[raiseChangeEvents]) {\n        const oldEvent = new CustomEvent(\"items-changed\", {\n          bubbles: true,\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `items` property changes.\n         *\n         * @event itemschange\n         */\n        const event = new CustomEvent(\"itemschange\", {\n          bubbles: true,\n        });\n        this.dispatchEvent(event);\n      }\n    }\n  }\n\n  return ItemsAPI;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { getDefaultText } from \"./content.js\";\nimport { defaultState, getItemText, stateEffects } from \"./internal.js\";\n\n/**\n * Exposes the text content of a list's items as an array of strings.\n *\n * @module ItemsTextMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function ItemsTextMixin(Base) {\n  // The class prototype added by the mixin.\n  class ItemsText extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        texts: null,\n      });\n    }\n\n    /**\n     * Extract the text from the given item.\n     *\n     * The default implementation returns an item's `aria-label`, `alt`\n     * attribute, `innerText`, or `textContent`, in that order. You can override\n     * this to return the text that should be used.\n     *\n     * @param {Element} item\n     * @returns {string}\n     */\n    [getItemText](item) {\n      return super[getItemText]\n        ? super[getItemText](item)\n        : getDefaultText(item);\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // Regenerate texts when items change.\n      if (changed.items) {\n        const { items } = state;\n        const texts = getTextsFromItems(items, this[getItemText]);\n        if (texts) {\n          Object.freeze(texts);\n          Object.assign(effects, { texts });\n        }\n      }\n\n      return effects;\n    }\n  }\n\n  return ItemsText;\n}\n\n/**\n * Extract the text from the given items.\n *\n * @private\n * @param {Element[]} items\n */\nexport function getTextsFromItems(items, getText) {\n  return items ? Array.from(items, (item) => getText(item)) : null;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  goDown,\n  goEnd,\n  goLeft,\n  goRight,\n  goStart,\n  goUp,\n  keydown,\n  state,\n} from \"./internal.js\";\n\n/**\n * Maps direction keys to direction semantics.\n *\n * This mixin is useful for components that want to map direction keys (Left,\n * Right, etc.) to movement in the indicated direction (go left, go right,\n * etc.).\n *\n * This mixin expects the component to invoke a `keydown` method when a key is\n * pressed. You can use [KeyboardMixin](KeyboardMixin) for that\n * purpose, or wire up your own keyboard handling and call `keydown` yourself.\n *\n * This mixin calls methods such as `goLeft` and `goRight`. You can define\n * what that means by implementing those methods yourself. If you want to use\n * direction keys to navigate a selection, use this mixin with\n * [DirectionCursorMixin](DirectionCursorMixin).\n *\n * If the component defines a property called `orientation`, the value of that\n * property will constrain navigation to the horizontal or vertical axis.\n *\n * @module KeyboardDirectionMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function KeyboardDirectionMixin(Base) {\n  // The class prototype added by the mixin.\n  class KeyboardDirection extends Base {\n    /**\n     * Invoked when the user wants to go/navigate down.\n     * The default implementation of this method does nothing.\n     */\n    [goDown]() {\n      if (super[goDown]) {\n        return super[goDown]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate to the end (e.g., of a list).\n     * The default implementation of this method does nothing.\n     */\n    [goEnd]() {\n      if (super[goEnd]) {\n        return super[goEnd]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate left.\n     * The default implementation of this method does nothing.\n     */\n    [goLeft]() {\n      if (super[goLeft]) {\n        return super[goLeft]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate right.\n     * The default implementation of this method does nothing.\n     */\n    [goRight]() {\n      if (super[goRight]) {\n        return super[goRight]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate to the start (e.g., of a\n     * list). The default implementation of this method does nothing.\n     */\n    [goStart]() {\n      if (super[goStart]) {\n        return super[goStart]();\n      }\n    }\n\n    /**\n     * Invoked when the user wants to go/navigate up.\n     * The default implementation of this method does nothing.\n     */\n    [goUp]() {\n      if (super[goUp]) {\n        return super[goUp]();\n      }\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      // Direction keys generally are low-priority keys: if a shadow element\n      // like an input has focus, we want to let that focused element handle\n      // direction keys. So we only handle the event if we're the target.\n      //\n      // (We'd really like to be able to provide direction key handling as a\n      // default — i.e., if the focused element doesn't handle a key, then we\n      // would handle it here. Unfortunately, there doesn't seem to be any\n      // general way for us to do that.)\n      if (event.target === this) {\n        // Respect orientation state if defined, otherwise assume \"both\".\n        const orientation = this[state].orientation || \"both\";\n        const horizontal =\n          orientation === \"horizontal\" || orientation === \"both\";\n        const vertical = orientation === \"vertical\" || orientation === \"both\";\n\n        // Ignore Left/Right keys when metaKey or altKey modifier is also pressed,\n        // as the user may be trying to navigate back or forward in the browser.\n        switch (event.key) {\n          case \"ArrowDown\":\n            if (vertical) {\n              handled = event.altKey ? this[goEnd]() : this[goDown]();\n            }\n            break;\n\n          case \"ArrowLeft\":\n            if (horizontal && !event.metaKey && !event.altKey) {\n              handled = this[goLeft]();\n            }\n            break;\n\n          case \"ArrowRight\":\n            if (horizontal && !event.metaKey && !event.altKey) {\n              handled = this[goRight]();\n            }\n            break;\n\n          case \"ArrowUp\":\n            if (vertical) {\n              handled = event.altKey ? this[goStart]() : this[goUp]();\n            }\n            break;\n\n          case \"End\":\n            handled = this[goEnd]();\n            break;\n\n          case \"Home\":\n            handled = this[goStart]();\n            break;\n        }\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n  }\n\n  return KeyboardDirection;\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport ContentItemsMixin from \"./ContentItemsMixin.js\";\nimport SlotContentMixin from \"./SlotContentMixin.js\";\n\n/**\n * Treats the elements assigned to the default slot as list items\n *\n * This is simply a combination of\n * [ContentItemsMixin](ContentItemsMixin) and\n * [SlotContentMixin](SlotContentMixin).\n *\n * @module SlotItemsMixin\n * @mixes ContentItemsMixin\n * @mixes SlotContentMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SlotItemsMixin(Base) {\n  return ContentItemsMixin(SlotContentMixin(Base));\n}\n","import { indexOfItemContainingTarget } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  firstRender,\n  raiseChangeEvents,\n  render,\n  setState,\n  state,\n  tap,\n} from \"./internal.js\";\n\n/**\n * A tap/mousedown on a list item makes that item current.\n *\n * This simple mixin is useful in list-like elements like [ListBox](ListBox),\n * where a tap/mousedown on a list item implicitly selects it.\n *\n * The standard use for this mixin is in list-like elements. Native list\n * boxes don't appear to be consistent with regard to whether they select\n * on mousedown or click/mouseup. This mixin assumes the use of mousedown.\n * On touch devices, that event appears to trigger when the touch is *released*.\n *\n * This mixin only listens to mousedown events for the primary mouse button\n * (typically the left button). Right clicks are ignored so that the browser may\n * display a context menu.\n *\n * This mixin expects the component to provide an `state.items` member. It also\n * expects the component to define a `state.currentIndex` member; you can\n * provide that yourself, or use [ItemsCursorMixin](ItemsCursorMixin).\n *\n * If the component receives an event that doesn't correspond to an item (e.g.,\n * the user taps on the element background visible between items), the cursor\n * will be removed. However, if the component sets `state.currentItemRequired` to\n * true, a background tap will *not* remove the cursor.\n *\n * @module TapCursorMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function TapCursorMixin(Base) {\n  // The class prototype added by the mixin.\n  return class TapCursor extends Base {\n    constructor() {\n      // @ts-ignore\n      super();\n      this.addEventListener(\"mousedown\", (event) => {\n        // Only process events for the main (usually left) button.\n        if (event.button !== 0) {\n          return;\n        }\n        this[raiseChangeEvents] = true;\n        this[tap](event);\n        this[raiseChangeEvents] = false;\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        Object.assign(this.style, {\n          touchAction: \"manipulation\", // for iOS Safari\n          mozUserSelect: \"none\",\n          msUserSelect: \"none\",\n          webkitUserSelect: \"none\",\n          userSelect: \"none\",\n        });\n      }\n    }\n\n    [tap](/** @type {MouseEvent} */ event) {\n      // In some situations, the event target will not be the child which was\n      // originally clicked on. E.g., if the item clicked on is a button, the\n      // event seems to be raised in phase 2 (AT_TARGET) — but the event target\n      // will be the component, not the item that was clicked on. Instead of\n      // using the event target, we get the first node in the event's composed\n      // path.\n      // @ts-ignore\n      const target = event.composedPath\n        ? event.composedPath()[0]\n        : event.target;\n\n      // Find which item was clicked on and, if found, make it current. Ignore\n      // clicks on disabled items.\n      //\n      // For elements which don't require a cursor, a background click will\n      // determine the item was null, in which we case we'll remove the cursor.\n      const { items, currentItemRequired } = this[state];\n      if (items && target instanceof Node) {\n        const targetIndex = indexOfItemContainingTarget(items, target);\n        const item = targetIndex >= 0 ? items[targetIndex] : null;\n        if ((item && !item.disabled) || (!item && !currentItemRequired)) {\n          this[setState]({\n            currentIndex: targetIndex,\n          });\n          event.stopPropagation();\n        }\n      }\n    }\n  };\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  ids,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\nconst documentMouseupListenerKey = Symbol(\"documentMouseupListener\");\n\n/**\n * Add drag-select behavior to an element with a popup.\n *\n * This allows a user to mouse down on a popup source, drag into the resulting\n * popup, and release the mouse to select something in the popup. This can be\n * used in conjunction with [PopupListMixin](PopupListMixin).\n *\n * @module PopupDragSelectMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupDragSelectMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupDragSelect extends Base {\n    connectedCallback() {\n      super.connectedCallback();\n      // Handle edge case where component is opened, removed, then added back.\n      listenIfOpenAndConnected(this);\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        dragSelect: true,\n      });\n    }\n\n    disconnectedCallback() {\n      if (super.disconnectedCallback) {\n        super.disconnectedCallback();\n      }\n      listenIfOpenAndConnected(this);\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      super[rendered](changed);\n\n      if (changed.opened) {\n        listenIfOpenAndConnected(this);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects](state, changed);\n\n      // Set things when opening, or reset things when closing.\n      if (changed.opened) {\n        if (state.opened) {\n          // Opening\n          Object.assign(effects, {\n            // Until we get a mouseup, we're doing a drag-select.\n            dragSelect: true,\n          });\n        }\n      }\n\n      return effects;\n    }\n  }\n\n  return PopupDragSelect;\n}\n\nasync function handleMouseup(/** @type {MouseEvent} */ event) {\n  // @ts-ignore\n  const element = this;\n  const hitTargets = element[shadowRoot].elementsFromPoint(\n    event.clientX,\n    event.clientY\n  );\n  if (element.opened) {\n    // Was mouseup over source part?\n    const overSource = hitTargets.indexOf(element[ids].source) >= 0;\n\n    // Was mouseup over the popup or popup frame?\n    const popup = element[ids].popup;\n    const overPopup = hitTargets.indexOf(popup) >= 0;\n    const overPopupFrame = popup.frame && hitTargets.indexOf(popup.frame) >= 0;\n\n    if (overSource) {\n      // User released the mouse over the source button (behind the\n      // backdrop), so we're no longer doing a drag-select.\n      if (element[state].dragSelect) {\n        element[raiseChangeEvents] = true;\n        element[setState]({\n          dragSelect: false,\n        });\n        element[raiseChangeEvents] = false;\n      }\n    } else if (!(overPopup || overPopupFrame)) {\n      // If we get to this point, the user released over the backdrop with\n      // the popup open, so close.\n      element[raiseChangeEvents] = true;\n      await element.close();\n      element[raiseChangeEvents] = false;\n    }\n  }\n}\n\nfunction listenIfOpenAndConnected(element) {\n  if (element[state].opened && element.isConnected) {\n    // If the popup is open and user releases the mouse over the backdrop, we\n    // want to close the popup. We need to listen to mouseup on the document,\n    // not this element. If the user mouses down on the source, then moves the\n    // mouse off the document before releasing the mouse, the element itself\n    // won't get the mouseup. The document will, however, so it's a more\n    // reliable source of mouse state.\n    //\n    // Coincidentally, we *also* need to listen to mouseup on the document to\n    // tell whether the user released the mouse over the source button. When the\n    // user mouses down, the backdrop will appear and cover the source, so from\n    // that point on the source won't receive a mouseup event. Again, we can\n    // listen to mouseup on the document and do our own hit-testing to see if\n    // the user released the mouse over the source.\n    if (!element[documentMouseupListenerKey]) {\n      // Not listening yet; start.\n      element[documentMouseupListenerKey] = handleMouseup.bind(element);\n      document.addEventListener(\"mouseup\", element[documentMouseupListenerKey]);\n    }\n  } else if (element[documentMouseupListenerKey]) {\n    // Currently listening; stop.\n    document.removeEventListener(\n      \"mouseup\",\n      element[documentMouseupListenerKey]\n    );\n    element[documentMouseupListenerKey] = null;\n  }\n}\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  raiseChangeEvents,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks the disabled state of a component that can be disabled\n *\n * @module DisabledMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function DisabledMixin(Base) {\n  // The class prototype added by the mixin.\n  class Disabled extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        disabled: false,\n      });\n    }\n\n    /**\n     * True if the component is disabled, false (the default) if not.\n     *\n     * The value of this property will be reflected to the `disabled` attribute\n     * so that it can be referenced in CSS. Note that this non-native\n     * implementation of the `disabled` attribute will *not* trigger the\n     * `:disabled` CSS pseudo-class, so your style rules will have to reference\n     * the presence or absence of the `disabled` attribute. That is, instead\n     * of writing\n     *\n     *     my-component:disabled { ... }\n     *\n     * write this instead\n     *\n     *     my-component[disabled] { ... }\n     *\n     * Like the native `disabled` attribute, this attribute is boolean. That\n     * means that it's *existence* in markup sets the attribute, even if set to\n     * an empty string or a string like \"false\".\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get disabled() {\n      return this[state].disabled;\n    }\n    // AttributeMarshallingMixin should parse this as a boolean attribute for us.\n    set disabled(disabled) {\n      this[setState]({ disabled });\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.disabled) {\n        // Reflect value of disabled property to the corresponding attribute.\n        this.toggleAttribute(\"disabled\", this.disabled);\n\n        if (this[raiseChangeEvents]) {\n          const oldEvent = new CustomEvent(\"disabled-changed\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(oldEvent);\n          /**\n           * Raised when the `disabled` property changes.\n           *\n           * @event disabledchange\n           */\n          const event = new CustomEvent(\"disabledchange\", {\n            bubbles: true,\n          });\n          this.dispatchEvent(event);\n        }\n      }\n    }\n  }\n\n  return Disabled;\n}\n","/**\n * Function for positioning a popup relative to a source element.\n *\n * @module positionPopup\n */\n\n/**\n * Given an (x, y) origin point, a bounding rectangle, and a layout, return the\n * height and width of the available space in the quadrant used by that layout.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} boundsRect\n */\nfunction availableSpace(sourceRect, boundsRect, direction, align) {\n  const sourceOrigin = getSourceOrigin(sourceRect, direction, align);\n\n  let height = 0;\n  let width = 0;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      height = sourceOrigin.y - boundsRect.top;\n      break;\n    case \"below\":\n      height = boundsRect.bottom - sourceOrigin.y;\n      break;\n    case \"left\":\n      width = sourceOrigin.x - boundsRect.left;\n      break;\n    case \"right\":\n      width = boundsRect.right - sourceOrigin.x;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      height = sourceOrigin.y - boundsRect.top;\n      break;\n    case \"center\":\n      if (vertical) {\n        width = boundsRect.width;\n      } else {\n        height = boundsRect.height;\n      }\n      break;\n    case \"stretch\":\n      if (vertical) {\n        width = sourceRect.width;\n      } else {\n        height = sourceRect.height;\n      }\n      break;\n    case \"left\":\n      width = boundsRect.right - sourceOrigin.x;\n      break;\n    case \"right\":\n      width = sourceOrigin.x - boundsRect.left;\n      break;\n    case \"top\":\n      height = boundsRect.bottom - sourceOrigin.y;\n      break;\n  }\n  height = Math.max(0, height);\n  width = Math.max(0, width);\n  return { height, width };\n}\n\n/**\n * Given two layouts, return -1 if the first is better, 1 if the second is\n * better, and 0 if they're equally good.\n *\n * Our comparison uses a heuristic that looks to see whether a layout can fit\n * the popup in height, width, or both. A layout is best if it fits both height\n * and width. If each layout only fits one dimension, then the layout that gives\n * the popup more space is preferred.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n */\nfunction compareLayouts(layout1, layout2, sourceRect, popupRect, boundsRect) {\n  const space1 = availableSpace(\n    sourceRect,\n    boundsRect,\n    layout1.direction,\n    layout1.align\n  );\n  const space2 = availableSpace(\n    sourceRect,\n    boundsRect,\n    layout2.direction,\n    layout2.align\n  );\n  const fitsWidth1 = popupRect.width <= space1.width;\n  const fitsHeight1 = popupRect.height <= space1.height;\n  const fitsEither1 = fitsWidth1 || fitsHeight1;\n  const fitsBoth1 = fitsWidth1 && fitsHeight1;\n  const fitsWidth2 = popupRect.width <= space2.width;\n  const fitsHeight2 = popupRect.height <= space2.height;\n  const fitsEither2 = fitsWidth2 || fitsHeight2;\n  const fitsBoth2 = fitsWidth2 && fitsHeight2;\n  const area1 = space1.width * space1.height;\n  const area2 = space2.width * space2.height;\n  if (fitsBoth1 && fitsBoth2) {\n    // Both layouts can fit in both dimensions; they're equally good.\n    return 0;\n  } else if (fitsBoth1) {\n    // Layout 1 has space for popup in both dimensions.\n    return -1;\n  } else if (fitsBoth2) {\n    // Layout 2 has space for popup in both dimensions.\n    return 1;\n  } else if (fitsEither1 && !fitsEither2) {\n    // Layout 1 fits in one dimension, layout 2 doesn't fit either.\n    return -1;\n  } else if (fitsEither2 && !fitsEither1) {\n    // Layout 2 fits in one dimensions, layout 1 doesn't fit either.\n    return 1;\n  } else if (fitsEither1 && area1 > area2) {\n    // Layout 1 fits in one dimension and gives popup more space.\n    return -1;\n  } else if (fitsEither2 && area2 > area1) {\n    // Layout 2 fits in one dimension and gives popup more space.\n    return 1;\n  } else if (area1 > area2) {\n    // Layout 1 gives popup more space.\n    return -1;\n  } else if (area2 > area1) {\n    // Layout 2 gives popup more space.\n    return 1;\n  } else {\n    // Layouts equally good or bad.\n    return 0;\n  }\n}\n\n/**\n * Determine the (x, y) location at which the popup should be positioned to\n * touch the indicated source origin point.\n *\n * @private\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n */\nfunction getPositionedRect(\n  sourceRect,\n  popupRect,\n  boundsRect,\n  direction,\n  align\n) {\n  // With respect to which point on the source will we position the popup?\n  const sourceOrigin = getSourceOrigin(sourceRect, direction, align);\n\n  // We'll adjust our bounds depending upon the layout.\n  let {\n    x: boundsLeft,\n    y: boundsTop,\n    bottom: boundsBottom,\n    right: boundsRight,\n  } = boundsRect;\n\n  let x = 0;\n  let y = 0;\n  let height = popupRect.height;\n  let width = popupRect.width;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      y = sourceOrigin.y - popupRect.height;\n      boundsBottom = sourceOrigin.y;\n      break;\n    case \"below\":\n      y = sourceOrigin.y;\n      boundsTop = sourceOrigin.y;\n      break;\n    case \"left\":\n      x = sourceOrigin.x - popupRect.width;\n      boundsRight = sourceOrigin.x;\n      break;\n    case \"right\":\n      x = sourceOrigin.x;\n      boundsLeft = sourceOrigin.x;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      y = sourceOrigin.y - popupRect.height;\n      boundsBottom = sourceOrigin.y;\n      break;\n    case \"left\":\n      x = sourceOrigin.x;\n      boundsLeft = sourceOrigin.x;\n      break;\n    case \"center\":\n      if (vertical) {\n        x = sourceOrigin.x - popupRect.width / 2;\n      } else {\n        y = sourceOrigin.y - popupRect.height / 2;\n      }\n      break;\n    case \"right\":\n      x = sourceOrigin.x - popupRect.width;\n      boundsRight = sourceOrigin.x;\n      break;\n    case \"stretch\":\n      if (vertical) {\n        x = sourceOrigin.x;\n        width = sourceRect.width;\n      } else {\n        y = sourceOrigin.y;\n        height = sourceRect.height;\n      }\n      break;\n    case \"top\":\n      y = sourceOrigin.y;\n      boundsTop = sourceOrigin.y;\n      break;\n  }\n\n  // Force the desired rectangle to fit within the bounds.\n  x = Math.max(x, boundsLeft);\n  y = Math.max(y, boundsTop);\n  width = Math.min(width, boundsRight - x);\n  height = Math.min(height, boundsBottom - y);\n\n  return new DOMRect(x, y, width, height);\n}\n\n/**\n * For a given layout, we will use a different point on the source element as a\n * reference point to position the popup. Return that (x, y) point.\n *\n * @private\n * @param {DOMRect} sourceRect\n */\nfunction getSourceOrigin(sourceRect, direction, align) {\n  let x = 0;\n  let y = 0;\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      y = sourceRect.top;\n      break;\n    case \"below\":\n      y = sourceRect.bottom;\n      break;\n    case \"left\":\n    case \"right\":\n      x = sourceRect[direction];\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n    case \"top\":\n      y = sourceRect[align];\n      break;\n    case \"left\":\n    case \"right\":\n      x = sourceRect[align];\n      break;\n    case \"center\":\n      if (vertical) {\n        x = sourceRect.left + sourceRect.width / 2;\n      } else {\n        y = sourceRect.top + sourceRect.height / 2;\n      }\n      break;\n    case \"stretch\":\n      if (vertical) {\n        x = sourceRect.left;\n      } else {\n        y = sourceRect.top;\n      }\n      break;\n  }\n  return { x, y };\n}\n\n/**\n * Return the optimum layout for the popup element with respect to a source\n * element that fits in the given bounds.\n *\n * @param {DOMRect} sourceRect\n * @param {DOMRect} popupRect\n * @param {DOMRect} boundsRect\n * @param {any} options\n */\nexport default function layoutPopup(\n  sourceRect,\n  popupRect,\n  boundsRect,\n  options\n) {\n  const normalized = normalizeOptions(options);\n\n  // Given the direction and alignment, which layouts do we want to consider?\n  const layouts = prioritizedLayouts(normalized.direction, normalized.align);\n\n  // Sort layouts by our heuristic.\n  layouts.sort((layout1, layout2) =>\n    compareLayouts(layout1, layout2, sourceRect, popupRect, boundsRect)\n  );\n\n  // Take the best layout.\n  const layout = layouts[0];\n\n  // Find the positioned rect with respect to the source origin.\n  layout.rect = getPositionedRect(\n    sourceRect,\n    popupRect,\n    boundsRect,\n    layout.direction,\n    layout.align\n  );\n\n  return layout;\n}\n\n// Normalize the popup options. Convert any logical layout options (start, end)\n// to physical options (e.g., left, right). Replace any unknown option values\n// with defaults.\nfunction normalizeOptions(options) {\n  const {\n    align: logicalAlign,\n    direction: logicalDirection,\n    rightToLeft,\n  } = options;\n  const defaultDirection = \"below\";\n  const physicalDirection =\n    {\n      above: \"above\",\n      below: \"below\",\n      column: \"below\",\n      \"column-reverse\": \"above\",\n      left: \"left\",\n      right: \"right\",\n      row: rightToLeft ? \"left\" : \"right\",\n      \"row-reverse\": rightToLeft ? \"right\" : \"left\",\n    }[logicalDirection] || defaultDirection;\n  const crossAxis = {\n    above: \"horizontal\",\n    below: \"horizontal\",\n    left: \"vertical\",\n    right: \"vertical\",\n  }[physicalDirection];\n  const defaultAlign = {\n    horizontal: \"left\",\n    vertical: \"top\",\n  }[crossAxis];\n  const physicalAlign =\n    {\n      horizontal: {\n        center: \"center\",\n        end: rightToLeft ? \"left\" : \"right\",\n        left: \"left\",\n        right: \"right\",\n        start: rightToLeft ? \"right\" : \"left\",\n        stretch: \"stretch\",\n      },\n      vertical: {\n        bottom: \"bottom\",\n        center: \"center\",\n        end: \"bottom\",\n        start: \"top\",\n        stretch: \"stretch\",\n        top: \"top\",\n      },\n    }[crossAxis][logicalAlign] || defaultAlign;\n  return {\n    align: physicalAlign,\n    direction: physicalDirection,\n    rightToLeft,\n  };\n}\n\n// Given a preferred direction and alignment, determine the set of 2 or 4 layout\n// alternatives that should be considered, in priority order.\nfunction prioritizedLayouts(preferredDirection, preferredAlign) {\n  const flipDirection = {\n    above: \"below\",\n    below: \"above\",\n    left: \"right\",\n    right: \"left\",\n  };\n  const flipAlign = {\n    top: \"bottom\",\n    bottom: \"top\",\n    left: \"right\",\n    right: \"left\",\n  };\n\n  // Our first choice of layout will be the preferred options.\n  const possibilties = [\n    { align: preferredAlign, direction: preferredDirection },\n  ];\n\n  if (preferredAlign === \"center\" || preferredAlign === \"stretch\") {\n    // Center/stretch align only needs to consider flipping over main axis.\n    possibilties.push({\n      align: preferredAlign,\n      direction: flipDirection[preferredDirection],\n    });\n  } else {\n    // Consider possibilities of flipping on either axis or both.\n    possibilties.push({\n      align: flipAlign[preferredAlign],\n      direction: preferredDirection,\n    });\n    possibilties.push({\n      align: preferredAlign,\n      direction: flipDirection[preferredDirection],\n    });\n    possibilties.push({\n      align: flipAlign[preferredAlign],\n      direction: flipDirection[preferredDirection],\n    });\n  }\n\n  return possibilties;\n}\n","import { deepContains, ownEvent } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  firstRender,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendered,\n  rendering,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/** @type {any} */\nconst implicitCloseListenerKey = Symbol(\"implicitCloseListener\");\n\n/**\n * Gives an overlay lightweight popup-style behavior.\n *\n * This mixin expects the component to provide:\n *\n * * An open/close API compatible with `OpenCloseMixin`.\n *\n * The mixin provides these features to the component:\n *\n * * Event handlers that close the element presses the Esc key, moves the focus\n *   outside the element, scrolls the document, resizes the document, or\n *   switches focus away from the document.\n * * A default ARIA role of `alert`.\n *\n * For modal overlays, use `DialogModalityMixin` instead. See the documentation\n * of that mixin for a comparison of modality behaviors.\n *\n * @module PopupModalityMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupModalityMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupModality extends Base {\n    /**\n     * True if the popup should close if the user resizes the window.\n     *\n     * @type {boolean}\n     * @default true\n     */\n    get closeOnWindowResize() {\n      return this[state].closeOnWindowResize;\n    }\n    set closeOnWindowResize(closeOnWindowResize) {\n      this[setState]({ closeOnWindowResize });\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        closeOnWindowResize: true,\n        role: \"alert\",\n      });\n    }\n\n    // Close on Esc key.\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        case \"Escape\":\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n          break;\n      }\n\n      // Prefer mixin result if it's defined, otherwise use base result.\n      return handled || (super.keydown && super.keydown(event)) || false;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (this[firstRender]) {\n        // If we lose focus, and the new focus isn't inside us, then close.\n        this.addEventListener(\"blur\", blurHandler.bind(this));\n      }\n\n      if (changed.role) {\n        // Apply top-level role.\n        const { role } = this[state];\n        this.setAttribute(\"role\", role);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened) {\n        if (this.opened) {\n          // Wait before wiring up events – if the popup was opened because the\n          // user clicked something, that opening click event may still be\n          // bubbling up, and we only want to start listening after it's been\n          // processed. Alternatively, if the popup caused the page to scroll, we\n          // don't want to immediately close because the page scrolled (only if\n          // the user scrolls).\n          const callback =\n            \"requestIdleCallback\" in window\n              ? window[\"requestIdleCallback\"]\n              : setTimeout;\n          callback(() => {\n            // It's conceivable the popup was closed before the timeout completed,\n            // so double-check that it's still opened before listening to events.\n            if (this.opened) {\n              addEventListeners(this);\n            }\n          });\n        } else {\n          removeEventListeners(this);\n        }\n      }\n    }\n\n    // Setting the standard role attribute will invoke this property setter,\n    // which will allow us to update our state.\n    get role() {\n      return super.role;\n    }\n    set role(role) {\n      super.role = role;\n      if (!this[rendering]) {\n        this[setState]({ role });\n      }\n    }\n  }\n\n  return PopupModality;\n}\n\nfunction addEventListeners(/** @type {ReactiveElement} */ element) {\n  // Close handlers for window events.\n  element[implicitCloseListenerKey] = closeHandler.bind(element);\n\n  // Window blur event tracks loss of focus of *window*, not just element.\n  window.addEventListener(\"blur\", element[implicitCloseListenerKey]);\n  window.addEventListener(\"resize\", element[implicitCloseListenerKey]);\n  window.addEventListener(\"scroll\", element[implicitCloseListenerKey]);\n}\n\nfunction removeEventListeners(/** @type {ReactiveElement} */ element) {\n  if (element[implicitCloseListenerKey]) {\n    window.removeEventListener(\"blur\", element[implicitCloseListenerKey]);\n    window.removeEventListener(\"resize\", element[implicitCloseListenerKey]);\n    window.removeEventListener(\"scroll\", element[implicitCloseListenerKey]);\n    element[implicitCloseListenerKey] = null;\n  }\n}\n\n// Note: This routine also exists in PopupButton, may want to eventually\n// share that. Note that PopupButton handles blur on the *button*; here\n// we're dealing with the popup.\nasync function blurHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  // What has the focus now?\n  const newFocusedElement =\n    /** @type {any} */ (event).relatedTarget || document.activeElement;\n  /** @type {any} */\n  if (\n    newFocusedElement instanceof Element &&\n    !deepContains(element, newFocusedElement)\n  ) {\n    element[raiseChangeEvents] = true;\n    await element.close({ canceled: \"window blur\" });\n    element[raiseChangeEvents] = false;\n  }\n}\n\nasync function closeHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  const handleEvent =\n    event.type !== \"resize\" || element[state].closeOnWindowResize;\n  if (!ownEvent(element, event) && handleEvent) {\n    element[raiseChangeEvents] = true;\n    await element.close({\n      canceled: `window ${event.type}`,\n    });\n    element[raiseChangeEvents] = false;\n  }\n}\n","import { ids, raiseChangeEvents, render } from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport Overlay from \"./Overlay.js\";\nimport PopupModalityMixin from \"./PopupModalityMixin.js\";\n\nconst Base = KeyboardMixin(PopupModalityMixin(Overlay));\n\n/**\n * Lightweight form of modeless overlay that can be easily dismissed\n *\n * When opened, the popup displays its children on top of other page elements.\n *\n * @inherits Overlay\n * @mixes KeyboardMixin\n * @mixes PopupModalityMixin\n */\nclass Popup extends Base {\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (changed.backdropPartType) {\n      this[ids].backdrop.addEventListener(\n        \"mousedown\",\n        mousedownHandler.bind(this)\n      );\n\n      // Mobile Safari doesn't seem to generate a mousedown handler on the\n      // backdrop in some cases that Mobile Chrome handles. For completeness, we\n      // also listen to touchend.\n      if (!(\"PointerEvent\" in window)) {\n        this[ids].backdrop.addEventListener(\"touchend\", mousedownHandler);\n      }\n    }\n  }\n}\n\n/**\n * @private\n * @param {Event} event\n */\nasync function mousedownHandler(event) {\n  // @ts-ignore\n  const element = this;\n  element[raiseChangeEvents] = true;\n  await element.close({\n    canceled: \"mousedown outside\",\n  });\n  element[raiseChangeEvents] = false;\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nexport default Popup;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport { transmute } from \"../core/template.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport FocusVisibleMixin from \"./FocusVisibleMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  inputDelegate,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport layoutPopup from \"./layoutPopup.js\";\nimport OpenCloseMixin from \"./OpenCloseMixin.js\";\nimport Popup from \"./Popup.js\";\n\nconst resizeListenerKey = Symbol(\"resizeListener\");\n\nconst Base = DisabledMixin(\n  FocusVisibleMixin(LanguageDirectionMixin(OpenCloseMixin(ReactiveElement)))\n);\n\n/**\n * Positions a popup with respect to a source element\n *\n * @inherits ReactiveElement\n * @mixes DisabledMixin\n * @mixes FocusVisibleMixin\n * @mixes OpenCloseMixin\n * @part {Popup} popup - the popup element\n * @part {button} source - the element used as the reference point for positioning the popup, generally the element that invokes the popup\n */\nclass PopupSource extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      ariaHasPopup: \"true\",\n      popupAlign: \"start\",\n      popupDirection: \"column\",\n      popupLayout: null,\n      popupPartType: Popup,\n      sourcePartType: \"div\",\n    });\n  }\n\n  // By default, assume that the source part is an input-like element that will\n  // get the foucs.\n  get [inputDelegate]() {\n    return this[ids].source;\n  }\n\n  get frame() {\n    return /** @type {any} */ (this[ids].popup).frame;\n  }\n\n  // TODO: Remove this deprecated property.\n  get horizontalAlign() {\n    return this[state].popupAlign;\n  }\n  set horizontalAlign(horizontalAlign) {\n    console.warn(\n      `The \"horizontalAlign\" property has been renamed to \"popupAlign\"; the \"horizontal-align\" attribute is now \"popup-align\".`\n    );\n    this[setState]({ popupAlign: horizontalAlign });\n  }\n\n  /**\n   * The alignment of the popup with respect to the source button.\n   *\n   * * `bottom`: popup and source are bottom-aligned\n   * * `end`: popup and source are aligned on the trailing edge according to the\n   *   text direction\n   * * `left`: popup and source are left-aligned\n   * * `right`: popup and source are right-aligned\n   * * `start`: popup and source are aligned on the leading edge according to\n   *   the text direction\n   * * `stretch`: both left and right edges are aligned\n   * * `top`: popup and source are top-aligned\n   *\n   * @type {('bottom'|'end'|'left'|'right'|'start'|'stretch'|'top')}\n   * @default 'start'\n   */\n  get popupAlign() {\n    return this[state].popupAlign;\n  }\n  set popupAlign(popupAlign) {\n    this[setState]({ popupAlign });\n  }\n\n  /**\n   * The preferred direction for the popup.\n   *\n   * * `above`: popup appears above the source\n   * * `below`: popup appears below the source\n   * * `column-reverse`: popup appears before the source in the block axis\n   * * `column`: popup appears after the source in the block axis\n   * * `left`: popup appears to the left of the source\n   * * `right`: popup appears to the right of the source\n   * * `row-reverse`: popup appears before the source in the inline axis\n   * * `row`: popup appears after the source in the inline axis\n   *\n   * @type {('above'|'below'|'column-reverse'|'column'|'left'|'right'|'row-reverse'|'row')}\n   * @default 'column'\n   */\n  get popupDirection() {\n    return this[state].popupDirection;\n  }\n  set popupDirection(popupDirection) {\n    this[setState]({ popupDirection });\n  }\n\n  // TODO: Remove this deprecated property.\n  get popupPosition() {\n    return this[state].popupPosition;\n  }\n  set popupPosition(popupPosition) {\n    console.warn(\n      `The \"popupPosition\" property has been renamed to \"popupDirection\"; the \"popup-position\" attribute is now \"popup-direction\".`\n    );\n    this[setState]({ popupPosition });\n  }\n\n  /**\n   * The class or tag used to create the `popup` part – the element\n   * responsible for displaying the popup and handling overlay behavior.\n   *\n   * @type {PartDescriptor}\n   * @default Popup\n   */\n  get popupPartType() {\n    return this[state].popupPartType;\n  }\n  set popupPartType(popupPartType) {\n    this[setState]({ popupPartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    renderParts(this[shadowRoot], this[state], changed);\n\n    if (this[firstRender] || changed.ariaHasPopup) {\n      const { ariaHasPopup } = this[state];\n      if (ariaHasPopup === null) {\n        this[inputDelegate].removeAttribute(\"aria-haspopup\");\n      } else {\n        this[inputDelegate].setAttribute(\n          \"aria-haspopup\",\n          this[state].ariaHasPopup\n        );\n      }\n    }\n\n    if (changed.popupPartType) {\n      // Popup's opened state becomes our own opened state.\n      this[ids].popup.addEventListener(\"open\", () => {\n        if (!this.opened) {\n          this[raiseChangeEvents] = true;\n          this.open();\n          this[raiseChangeEvents] = false;\n        }\n      });\n\n      // Popup's closed state becomes our own closed state.\n      this[ids].popup.addEventListener(\"close\", (event) => {\n        if (!this.closed) {\n          this[raiseChangeEvents] = true;\n          /** @type {any} */\n\n          const cast = event;\n          const closeResult = cast.detail.closeResult;\n          this.close(closeResult);\n          this[raiseChangeEvents] = false;\n        }\n      });\n    }\n\n    if (changed.opened || changed.popupLayout) {\n      const { opened, popupLayout } = this[state];\n\n      if (!opened) {\n        // Popup closed. Reset the styles used to position it.\n        Object.assign(this[ids].popup.style, {\n          bottom: \"\",\n          left: \"\",\n          opacity: \"\",\n          right: \"\",\n          top: \"\",\n        });\n      } else if (!popupLayout) {\n        // Popup opened but not yet laid out.\n        //\n        // Render the component invisibly so we can measure it before showing\n        // it. We hide it by giving it zero opacity. If we use `visibility:\n        // hidden` for this purpose, the popup won't be able to receive the\n        // focus, which would complicate our overlay focus handling.\n        //\n        // In case the popup is being relayed out because a layout-affecting\n        // property changed while the popup is open, we reset the positiong\n        // styles too.\n        Object.assign(this[ids].popup.style, {\n          bottom: \"\",\n          left: \"\",\n          opacity: 0,\n          right: \"\",\n          top: \"\",\n        });\n      } else {\n        // Popup opened and laid out. Position the popup using only the edges\n        // implicated in the layout.\n        const popup = this[ids].popup;\n        const positionStyling = getPositiongStylingForLayout(popupLayout);\n        Object.assign(popup.style, positionStyling, {\n          opacity: \"\",\n        });\n      }\n    }\n\n    if (changed.opened) {\n      const { opened } = this[state];\n      /** @type {any} */ (this[ids].popup).opened = opened;\n    }\n\n    if (changed.disabled) {\n      if (\"disabled\" in this[ids].source) {\n        const { disabled } = this[state];\n        /** @type {any} */ (this[ids].source).disabled = disabled;\n      }\n    }\n\n    // Let the popup know its position relative to the source.\n    if (changed.popupLayout) {\n      const { popupLayout } = this[state];\n      if (popupLayout) {\n        const { align, direction } = popupLayout;\n        /** @type {any} */ const popup = this[ids].popup;\n        if (\"position\" in popup) {\n          popup.position = direction;\n        }\n        if (\"align\" in popup) {\n          popup.align = align;\n        }\n      }\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    const { opened } = this[state];\n    if (changed.opened) {\n      if (opened) {\n        // Worth noting that's possible (but unusual) for a popup to render\n        // opened on first render.\n        waitThenRenderOpened(this);\n      } else {\n        removeEventListeners(this);\n      }\n    } else if (\n      changed.popupLayout &&\n      this[state].opened &&\n      !this[state].popupLayout\n    ) {\n      // A layout-affecting property changed while the popup is open; do layout\n      // again.\n      choosePopupLayout(this);\n    }\n  }\n\n  /**\n   * The class or tag used to create the `source` part - the button\n   * (or other element) the user can tap/click to invoke the popup.\n   *\n   * @type {PartDescriptor}\n   * @default 'button'\n   */\n  get sourcePartType() {\n    return this[state].sourcePartType;\n  }\n  set sourcePartType(sourcePartType) {\n    this[setState]({ sourcePartType });\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // We reset our popup calculations when the popup closes, or if it's open\n    // and state that affects positioning has changed.\n    if (\n      (changed.opened && !state.opened) ||\n      (state.opened &&\n        (changed.popupAlign || changed.popupDirection || changed.rightToLeft))\n    ) {\n      Object.assign(effects, {\n        popupLayout: null,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(fragmentFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n          position: relative;\n        }\n\n        [part~=\"source\"] {\n          height: 100%;\n          -webkit-tap-highlight-color: transparent;\n          touch-action: manipulation;\n          width: 100%;\n        }\n\n        [part~=\"popup\"] {\n          max-height: 100%;\n          max-width: 100%;\n          outline: none;\n          position: fixed;\n        }\n      </style>\n      <div id=\"source\" part=\"source\">\n        <slot name=\"source\"></slot>\n      </div>\n      <div id=\"popup\" part=\"popup\" exportparts=\"backdrop, frame\" role=\"none\">\n        <slot></slot>\n      </div>\n    `);\n\n    renderParts(result.content, this[state]);\n\n    return result;\n  }\n}\n\nfunction addEventListeners(/** @type {PopupSource} */ element) {\n  /** @type {any} */ const cast = element;\n  cast[resizeListenerKey] = () => {\n    // If viewport resizes while the popup is open, we may want to change which\n    // layout we're using for the popup.\n    choosePopupLayout(element);\n  };\n  const viewport = window.visualViewport || window;\n  viewport.addEventListener(\"resize\", cast[resizeListenerKey]);\n}\n\n/**\n * Based on the current size of the source, popup, and viewport, determine which\n * layout we'll use for the popup.\n *\n * @private\n * @param {PopupSource} element\n */\nfunction choosePopupLayout(element) {\n  const { popupAlign, popupDirection, rightToLeft } = element[state];\n  const sourceRect = element[ids].source.getBoundingClientRect();\n  const popupRect = element[ids].popup.getBoundingClientRect();\n  const boundsRect = viewportBounds();\n\n  const popupLayout = layoutPopup(sourceRect, popupRect, boundsRect, {\n    align: popupAlign,\n    direction: popupDirection,\n    rightToLeft,\n  });\n\n  element[setState]({ popupLayout });\n}\n\n// Given a complete layout for a popup (including the rect), determine the\n// styling that should be applied to the popup.\nfunction getPositiongStylingForLayout(layout) {\n  const { align, direction, rect } = layout;\n  const bounds = viewportBounds();\n  const styling = {};\n  const vertical = direction === \"above\" || direction === \"below\";\n  switch (direction) {\n    case \"above\":\n      styling.bottom = `${bounds.bottom - rect.bottom}px`;\n      break;\n    case \"below\":\n      styling.top = `${rect.top}px`;\n      break;\n    case \"left\":\n      styling.right = `${bounds.right - rect.right}px`;\n      break;\n    case \"right\":\n      styling.left = `${rect.left}px`;\n      break;\n  }\n  switch (align) {\n    case \"bottom\":\n      styling.bottom = `${bounds.bottom - rect.bottom}px`;\n      break;\n    case \"center\":\n    case \"stretch\":\n      if (vertical) {\n        styling.left = `${rect.left}px`;\n        styling.right = `${bounds.right - rect.right}px`;\n      } else {\n        styling.bottom = `${bounds.bottom - rect.bottom}px`;\n        styling.top = `${rect.top}px`;\n      }\n      break;\n    case \"left\":\n      styling.left = `${rect.left}px`;\n      break;\n    case \"right\":\n      styling.right = `${bounds.right - rect.right}px`;\n      break;\n    case \"top\":\n      styling.top = `${rect.top}px`;\n      break;\n  }\n  return styling;\n}\n\nfunction removeEventListeners(/** @type {PopupSource} */ element) {\n  /** @type {any} */ const cast = element;\n  if (cast[resizeListenerKey]) {\n    const viewport = window.visualViewport || window;\n    viewport.removeEventListener(\"resize\", cast[resizeListenerKey]);\n    cast[resizeListenerKey] = null;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.popupPartType) {\n    const { popupPartType } = state;\n    const popup = root.getElementById(\"popup\");\n    if (popup) {\n      transmute(popup, popupPartType);\n    }\n  }\n  if (!changed || changed.sourcePartType) {\n    const { sourcePartType } = state;\n    const source = root.getElementById(\"source\");\n    if (source) {\n      transmute(source, sourcePartType);\n    }\n  }\n}\n\n// Determine the bounding rectangle of the viewport. We prefer the\n// VisualViewport API where that's available, as that handles a pinch-zoomed\n// viewport on mobile. If not availble (as of October 2020, Firefox), we fall\n// back to using the window as the viewport.\nfunction viewportBounds() {\n  // @ts-ignore\n  const viewport = window.visualViewport;\n  const boundsRect = viewport\n    ? new DOMRect(\n        viewport.offsetLeft,\n        viewport.offsetTop,\n        viewport.width,\n        viewport.height\n      )\n    : new DOMRect(0, 0, window.innerWidth, window.innerHeight);\n  return boundsRect;\n}\n\n/**\n *\n * When a popup is first rendered, we let it render invisibly so that it doesn't\n * affect the page layout.\n *\n * We then wait, for two reasons:\n *\n * 1) We need to give the popup time to render invisibly. That lets us get the\n *    true size of the popup content.\n *\n * 2) Wire up events that can dismiss the popup. If the popup was opened because\n *    the user clicked something, that opening click event may still be bubbling\n *    up, and we only want to start listening after it's been processed.\n *    Along the same lines, if the popup caused the page to scroll, we don't\n *    want to immediately close because the page scrolled (only if the user\n *    scrolls).\n *\n * After waiting, we can take care of both of the above tasks.\n *\n * @private\n * @param {PopupSource} element\n */\nfunction waitThenRenderOpened(element) {\n  // Wait a tick to let the newly-opened component actually render.\n  setTimeout(() => {\n    // It's conceivable the popup was closed before the timeout completed,\n    // so double-check that it's still opened before listening to events.\n    if (element[state].opened) {\n      choosePopupLayout(element);\n      addEventListeners(element);\n    }\n  });\n}\n\nexport default PopupSource;\n","import { deepContains, ownEvent } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport DelegateFocusMixin from \"./DelegateFocusMixin.js\";\nimport {\n  defaultState,\n  firstRender,\n  ids,\n  keydown,\n  raiseChangeEvents,\n  render,\n  state,\n  template,\n} from \"./internal.js\";\nimport KeyboardMixin from \"./KeyboardMixin.js\";\nimport PopupDragSelectMixin from \"./PopupDragSelectMixin.js\";\nimport PopupSource from \"./PopupSource.js\";\n\nconst Base = DelegateFocusMixin(\n  KeyboardMixin(PopupDragSelectMixin(PopupSource))\n);\n\n/**\n * A button that invokes an attached popup\n *\n * @inherits PopupSource\n * @mixes DelegateFocusMixin\n * @mixes KeyboardMixin\n * @mixes PopupDragSelectMixin\n */\nclass PopupButton extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      sourcePartType: \"button\",\n    });\n  }\n\n  [keydown](/** @type {KeyboardEvent} */ event) {\n    let handled;\n\n    switch (event.key) {\n      // Space or Up/Down arrow keys open the popup.\n      case \" \":\n      case \"ArrowDown\":\n      case \"ArrowUp\":\n        if (this.closed) {\n          this.open();\n          handled = true;\n        }\n        break;\n\n      // Enter opens popup.\n      case \"Enter\":\n        if (!this.opened) {\n          this.open();\n          handled = true;\n        }\n        break;\n\n      // If popup is open, pressing Esc should close popup.\n      // This code exists to handle cases where the popup does not take the\n      // focus (autoFocus is false). In cases where the popup takes focus, it\n      // will be up to the popup to handle closing when Esc is pressed.\n      case \"Escape\":\n        if (this.opened) {\n          this.close({\n            canceled: \"Escape\",\n          });\n          handled = true;\n        }\n        break;\n    }\n\n    // Give superclass a chance to handle.\n    handled = super[keydown] && super[keydown](event);\n\n    if (!handled && this.opened && !event.metaKey && !event.altKey) {\n      // If they haven't already been handled, absorb keys that might cause the\n      // page to scroll in the background, which would in turn cause the popup to\n      // inadvertently close.\n      switch (event.key) {\n        case \"ArrowDown\":\n        case \"ArrowLeft\":\n        case \"ArrowRight\":\n        case \"ArrowUp\":\n        case \"End\":\n        case \"Home\":\n        case \"PageDown\":\n        case \"PageUp\":\n        case \" \":\n          handled = true;\n      }\n    }\n\n    return handled;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (this[firstRender]) {\n      // Close the popup if we're opened and lose focus. A typical popup using\n      // PopupModalityMixin will have its own logic to close on blur -- but in\n      // cases where the popup itself doesn't get focus (e.g., TooltipButton),\n      // that logic won't apply.\n      this.addEventListener(\"blur\", blurHandler.bind(this));\n\n      // If the source element gets the focus while the popup is open, the\n      // most likely expanation is that the user hit Shift+Tab to back up out of\n      // the popup. In that case, we should close.\n      this[ids].source.addEventListener(\"focus\", async (event) => {\n        const popupFocused = ownEvent(this[ids].popup, event);\n        // It's possible to get a focus event in the initial mousedown on the\n        // source button before the popup is even rendered. We don't want to\n        // close in that case, so we check to see if we've already measured the\n        // popup dimensions (which will be true if the popup fully completed\n        // rendering).\n        const measured = this[state].popupHeight !== null;\n        if (!popupFocused && this.opened && measured) {\n          this[raiseChangeEvents] = true;\n          await this.close();\n          this[raiseChangeEvents] = false;\n        }\n      });\n    }\n\n    if (changed.opened) {\n      // Reflect opened state to attribute for styling.\n      const { opened } = this[state];\n      this.toggleAttribute(\"opened\", opened);\n    }\n\n    if (changed.sourcePartType) {\n      // Desktop popups generally open on mousedown, not click/mouseup. On mobile,\n      // mousedown won't fire until the user releases their finger, so it behaves\n      // like a click.\n      const source = this[ids].source;\n      source.addEventListener(\"mousedown\", (event) => {\n        // mousedown events fire even if button is disabled, so we need\n        // to explicitly ignore those.\n        if (this.disabled) {\n          event.preventDefault();\n          return;\n        }\n        // Only handle primary button mouse down to avoid interfering with\n        // right-click behavior.\n        /** @type {any} */\n        const cast = event;\n        if (cast.button && cast.button !== 0) {\n          return;\n        }\n        // We give the default focus behavior time to run before opening the\n        // popup. See note below.\n        setTimeout(() => {\n          if (!this.opened) {\n            this[raiseChangeEvents] = true;\n            this.open();\n            this[raiseChangeEvents] = false;\n          }\n        });\n        event.stopPropagation();\n        // We don't prevent the default behavior for mousedown. Among other\n        // things, it sets the focus to the element the user moused down on.\n        // That's important for us, because OverlayMixin will remember that\n        // focused element (i.e., this element) when opening, and restore focus to\n        // it when the popup closes.\n      });\n    }\n\n    if (changed.popupPartType) {\n      this[ids].popup.removeAttribute(\"tabindex\");\n    }\n  }\n\n  get [template]() {\n    const result = super[template];\n    // When popup is open, it will have focus; don't show focus ring on host.\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"source\"] {\n            cursor: default;\n            outline: none;\n            -webkit-tap-highlight-color: transparent;\n            touch-action: manipulation;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            -webkit-user-select: none;\n            user-select: none;\n          }\n\n          :host([opened][focus-visible]) {\n            outline: none;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\n// Note: This routine also exists in PopupModalityMixin, may want to eventually\n// share that. Note that PopupModalityMixin handles blur on the *popup*; here\n// we're dealing with the source button.\nasync function blurHandler(/** @type {Event} */ event) {\n  // @ts-ignore\n  /** @type {any} */ const element = this;\n  // What has the focus now?\n  const newFocusedElement =\n    /** @type {any} */ (event).relatedTarget || document.activeElement;\n  /** @type {any} */\n  if (\n    newFocusedElement instanceof Element &&\n    !deepContains(element, newFocusedElement)\n  ) {\n    element[raiseChangeEvents] = true;\n    await element.close({ canceled: \"blur\" });\n    element[raiseChangeEvents] = false;\n  }\n}\n\nexport default PopupButton;\n","import { indexOfItemContainingTarget } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  keydown,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  state,\n  stateEffects,\n} from \"./internal.js\";\n\nconst documentMousemoveListenerKey = Symbol(\"documentMousemoveListener\");\n\n/**\n * Syncs the cursor a popup source and a list-like element inside the popup.\n *\n * This includes support for drag-select operations: the user can mouse down on\n * the source to produce the popup, drag into the popup to highlight an item,\n * then release the mouse to select that item.\n *\n * @module PopupListMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupListMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupList extends Base {\n    connectedCallback() {\n      super.connectedCallback();\n      // Handle edge case where component is opened, removed, then added back.\n      listenIfOpenAndConnected(this);\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        currentIndex: -1,\n        hasHoveredOverItemSinceOpened: false,\n        popupList: null,\n      });\n    }\n\n    disconnectedCallback() {\n      if (super.disconnectedCallback) {\n        super.disconnectedCallback();\n      }\n      listenIfOpenAndConnected(this);\n    }\n\n    [keydown](/** @type {KeyboardEvent} */ event) {\n      let handled = false;\n\n      switch (event.key) {\n        // Enter closes popup.\n        case \"Enter\":\n          if (this.opened) {\n            selectCurrentItemAndClose(this);\n            handled = true;\n          }\n      }\n\n      // Prefer our result if it's defined, otherwise use base result.\n      return handled || (super[keydown] && super[keydown](event)) || false;\n    }\n\n    [render](changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n\n      if (changed.popupList) {\n        const { popupList } = this[state];\n        if (popupList) {\n          // If the user mouses up on a list item, close the list with that item as\n          // the close result.\n          popupList.addEventListener(\"mouseup\", async (event) => {\n            // If we're doing a drag-select (user moused down on button, dragged\n            // mouse into list, and released), we close. If we're not doing a\n            // drag-select (the user opened the list with a complete click), and\n            // there's a selection, they clicked on an item, so also close.\n            // Otherwise, the user clicked the list open, then clicked on a list\n            // separator or list padding; stay open.\n            const currentIndex = this[state].currentIndex;\n            if (this[state].dragSelect || currentIndex >= 0) {\n              // We don't want the document mouseup handler in\n              // PopupDragSelectMixin to close the popup before we've asked the\n              // list to highlight the selection. We stop event propagation\n              // here, before we enter any async code, to actually stop\n              // propagation.\n              event.stopPropagation();\n              this[raiseChangeEvents] = true;\n              await selectCurrentItemAndClose(this);\n              this[raiseChangeEvents] = false;\n            } else {\n              event.stopPropagation();\n            }\n          });\n\n          // Track changes in the list's cursor.\n          popupList.addEventListener(\"currentindexchange\", (event) => {\n            this[raiseChangeEvents] = true;\n            /** @type {any} */\n            const cast = event;\n            this[setState]({\n              currentIndex: cast.detail.currentIndex,\n            });\n            this[raiseChangeEvents] = false;\n          });\n        }\n      }\n\n      // The popup's current item is represented in the visible list.\n      if (changed.currentIndex || changed.popupList) {\n        const { currentIndex, popupList } = this[state];\n        if (popupList && \"currentIndex\" in popupList) {\n          popupList.currentIndex = currentIndex;\n        }\n      }\n    }\n\n    [rendered](changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      if (changed.opened) {\n        if (this[state].opened) {\n          // Ensure the list's cursor is visible. If the cursor moved while the\n          // list was closed, the cursor may not be in view yet.\n          const { popupList } = this[state];\n          if (popupList.scrollCurrentItemIntoView) {\n            // Give popup time to render.\n            setTimeout(() => {\n              popupList.scrollCurrentItemIntoView();\n            });\n          }\n        }\n        listenIfOpenAndConnected(this);\n      }\n    }\n\n    [stateEffects](state, changed) {\n      const effects = super[stateEffects]\n        ? super[stateEffects](state, changed)\n        : {};\n\n      // When opening, reset out notion of whether the user has hovered over an\n      // item since the list was opened.\n      if (changed.opened && state.opened) {\n        Object.assign(effects, {\n          hasHoveredOverItemSinceOpened: false,\n        });\n      }\n\n      return effects;\n    }\n  }\n\n  return PopupList;\n}\n\n// Handle a mouse hover select operation.\nfunction handleMousemove(/** @type {MouseEvent} */ event) {\n  // @ts-ignore\n  const element = this;\n  const { hasHoveredOverItemSinceOpened, opened } = element[state];\n  if (opened) {\n    // Treat the deepest element in the composed event path as the target.\n    const target = event.composedPath ? event.composedPath()[0] : event.target;\n    const items = element.items;\n\n    if (target && target instanceof Node && items) {\n      const hoverIndex = indexOfItemContainingTarget(items, target);\n      const item = items[hoverIndex];\n\n      // If the user is hovering over an enabled item, make it current.\n      // If the user is not hovering over an enabled item, but has\n      // hovered over such an item at least once since the list was\n      // opened, then clear cursor.\n      const currentIndex = item && !item.disabled ? hoverIndex : -1;\n\n      if (\n        (hasHoveredOverItemSinceOpened || currentIndex >= 0) &&\n        currentIndex !== element[state].currentIndex\n      ) {\n        element[raiseChangeEvents] = true;\n        element[setState]({ currentIndex });\n        if (currentIndex >= 0 && !hasHoveredOverItemSinceOpened) {\n          element[setState]({ hasHoveredOverItemSinceOpened: true });\n        }\n        element[raiseChangeEvents] = false;\n      }\n    }\n  }\n}\n\nfunction listenIfOpenAndConnected(element) {\n  if (element[state].opened && element.isConnected) {\n    if (!element[documentMousemoveListenerKey]) {\n      // Not listening yet; start.\n      element[documentMousemoveListenerKey] = handleMousemove.bind(element);\n      document.addEventListener(\n        \"mousemove\",\n        element[documentMousemoveListenerKey]\n      );\n    }\n  } else if (element[documentMousemoveListenerKey]) {\n    // Currently listening; stop.\n    document.removeEventListener(\n      \"mousemove\",\n      element[documentMousemoveListenerKey]\n    );\n    element[documentMousemoveListenerKey] = null;\n  }\n}\n\n/**\n * Highlight the current item (if one exists), then close the menu.\n */\nasync function selectCurrentItemAndClose(element) {\n  const originalRaiseChangeEvents = element[raiseChangeEvents];\n  const cursorDefined = element[state].currentIndex >= 0;\n  const items = element.items;\n  if (items) {\n    const closeResult = cursorDefined\n      ? items[element[state].currentIndex]\n      : undefined;\n\n    const list = element[state].popupList;\n    if (cursorDefined && \"flashCurrentItem\" in list) {\n      await list.flashCurrentItem();\n    }\n    const saveRaiseChangeEvents = element[raiseChangeEvents];\n    element[raiseChangeEvents] = originalRaiseChangeEvents;\n    await element.close(closeResult);\n    element[raiseChangeEvents] = saveRaiseChangeEvents;\n  }\n}\n","import { deepContains } from \"../core/dom.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { transmute } from \"../core/template.js\";\nimport {\n  defaultState,\n  ids,\n  raiseChangeEvents,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  state,\n  stateEffects,\n  template,\n} from \"./internal.js\";\nimport Menu from \"./Menu.js\";\nimport PopupButton from \"./PopupButton.js\";\nimport PopupListMixin from \"./PopupListMixin.js\";\n\nconst Base = PopupListMixin(PopupButton);\n\n/**\n * A button that invokes a menu.\n *\n * @inherits PopupButton\n * @mixes PopupListMixin\n * @part {Menu} menu - the menu shown in the popup\n */\nclass MenuButton extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      menuPartType: Menu,\n    });\n  }\n\n  get items() {\n    /** @type {any} */\n    const menu = this[ids] && this[ids].menu;\n    return menu ? menu.items : null;\n  }\n\n  /**\n   * The class or tag used to define the `menu` part – the element\n   * presenting the menu items and handling navigation between them.\n   *\n   * @type {PartDescriptor}\n   * @default Menu\n   */\n  get menuPartType() {\n    return this[state].menuPartType;\n  }\n  set menuPartType(menuPartType) {\n    this[setState]({ menuPartType });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    renderParts(this[shadowRoot], this[state], changed);\n\n    if (changed.menuPartType) {\n      // Close the popup if menu loses focus.\n      this[ids].menu.addEventListener(\"blur\", async (event) => {\n        /** @type {any} */\n        const cast = event;\n        const newFocusedElement = cast.relatedTarget || document.activeElement;\n        if (this.opened && !deepContains(this[ids].menu, newFocusedElement)) {\n          this[raiseChangeEvents] = true;\n          await this.close();\n          this[raiseChangeEvents] = false;\n        }\n      });\n\n      // mousedown events on the menu will propagate up to the top-level element,\n      // which will then steal the focus. We want to keep the focus on the menu,\n      // both to permit keyboard use, and to avoid closing the menu on blur (see\n      // separate blur handler). To keep the focus on the menu, we prevent the\n      // default event behavior.\n      this[ids].menu.addEventListener(\"mousedown\", (event) => {\n        // Only process events for the main (usually left) button.\n        if (/** @type {MouseEvent} */ (event).button !== 0) {\n          return;\n        }\n        if (this.opened) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      });\n    }\n\n    if (changed.opened) {\n      // Reflect opened state to source for ARIA.\n      const { opened } = this[state];\n      this[ids].source.setAttribute(\"aria-expanded\", opened.toString());\n    }\n  }\n\n  [rendered](changed) {\n    super[rendered](changed);\n\n    if (changed.menuPartType) {\n      this[setState]({\n        popupList: this[ids].menu,\n      });\n    }\n  }\n\n  [stateEffects](state, changed) {\n    const effects = super[stateEffects](state, changed);\n\n    // When closing, clear menu selection.\n    if (changed.opened && !state.opened) {\n      Object.assign(effects, {\n        currentIndex: -1,\n      });\n    }\n\n    return effects;\n  }\n\n  get [template]() {\n    const result = super[template];\n\n    // Wrap default slot with a menu.\n    const defaultSlot = result.content.querySelector(\"slot:not([name])\");\n    if (defaultSlot) {\n      defaultSlot.replaceWith(fragmentFrom.html`\n        <div id=\"menu\" part=\"menu\">\n          <slot></slot>\n        </div>\n      `);\n    }\n\n    renderParts(result.content, this[state]);\n\n    result.content.append(fragmentFrom.html`\n      <style>\n        [part~=\"menu\"] {\n          max-height: 100%;\n        }\n      </style>\n    `);\n\n    return result;\n  }\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.menuPartType) {\n    const { menuPartType } = state;\n    const menu = root.getElementById(\"menu\");\n    if (menu) {\n      transmute(menu, menuPartType);\n    }\n  }\n}\n\nexport default MenuButton;\n","import { templateFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport {\n  defaultState,\n  ids,\n  render,\n  setState,\n  state,\n  template,\n} from \"./internal.js\";\n\nconst Base = DisabledMixin(ReactiveElement);\n\n/**\n * An element that can point up or down.\n *\n * @inherits ReactiveElement\n * @mixes DisabledMixin\n * @part down-icon - the icon shown in the toggle if the popup will open or close in the down direction\n * @part toggle-icon - both the up and down icons\n * @part up-icon - the icon shown in the toggle if the popup will open or close in the up direction\n */\nclass UpDownToggle extends Base {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      direction: \"down\",\n    });\n  }\n\n  /**\n   * Indicates which direction the element should point to.\n   *\n   * @type {'down'|'up'}\n   * @default 'down'\n   */\n  get direction() {\n    return this[state].direction;\n  }\n  set direction(direction) {\n    this[setState]({ direction });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n\n    if (changed.direction) {\n      const { direction } = this[state];\n      this[ids].downIcon.style.display =\n        direction === \"down\" ? \"block\" : \"none\";\n      this[ids].upIcon.style.display = direction === \"up\" ? \"block\" : \"none\";\n    }\n  }\n\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          display: inline-block;\n        }\n      </style>\n      <div id=\"downIcon\" part=\"toggle-icon down-icon\">\n        <slot name=\"down-icon\"></slot>\n      </div>\n      <div id=\"upIcon\" part=\"toggle-icon up-icon\">\n        <slot name=\"up-icon\"></slot>\n      </div>\n    `;\n  }\n}\n\nexport default UpDownToggle;\n","import { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport { transmute } from \"../core/template.js\";\nimport {\n  defaultState,\n  ids,\n  render,\n  setState,\n  shadowRoot,\n  state,\n  template,\n} from \"./internal.js\";\nimport UpDownToggle from \"./UpDownToggle.js\";\n\n/**\n * Manages a popup toggle part for a popup source.\n *\n * @module PopupToggleMixin\n * @part {UpDownToggle} popup-toggle - the element that lets the user know they can open the popup\n * @part down-icon - the icon shown in the toggle if the popup will open or close in the down direction\n * @part up-icon - the icon shown in the toggle if the popup will open or close in the up direction\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function PopupToggleMixin(Base) {\n  // The class prototype added by the mixin.\n  class PopupToggle extends Base {\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        popupTogglePartType: UpDownToggle,\n      });\n    }\n\n    /**\n     * The class or tag used to create the `popup-toggle` part – the\n     * element that lets the user know they can open the popup.\n     *\n     * @type {PartDescriptor}\n     * @default UpDownToggle\n     */\n    get popupTogglePartType() {\n      return this[state].popupTogglePartType;\n    }\n    set popupTogglePartType(popupTogglePartType) {\n      this[setState]({ popupTogglePartType });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n\n      renderParts(this[shadowRoot], this[state], changed);\n\n      // Tell the toggle which direction it should point to depending on which\n      // direction the popup will open. Since we assume this is used for up/down\n      // popup directions, we don't handle left/right directions.\n      if (changed.popupDirection || changed.popupTogglePartType) {\n        const { popupDirection } = this[state];\n        const toggleDirection =\n          popupDirection === \"above\" || popupDirection === \"column-reverse\"\n            ? \"up\"\n            : \"down\";\n        /** @type {any} */ const popupToggle = this[ids].popupToggle;\n        if (\"direction\" in popupToggle) {\n          popupToggle.direction = toggleDirection;\n        }\n      }\n\n      if (changed.disabled) {\n        const { disabled } = this[state];\n        /** @type {any} */ (this[ids].popupToggle).disabled = disabled;\n      }\n    }\n\n    get [template]() {\n      const result = super[template];\n\n      // Append a toggle button to the source.\n      const source = result.content.querySelector('[part~=\"source\"]');\n      if (source) {\n        source.append(fragmentFrom.html`\n          <div\n            id=\"popupToggle\"\n            part=\"popup-toggle\"\n            exportparts=\"toggle-icon, down-icon, up-icon\"\n            tabindex=\"-1\"\n          ></div>\n      `);\n      }\n\n      renderParts(result.content, this[state]);\n\n      result.content.append(fragmentFrom.html`\n      <style>\n        [part~=\"popup-toggle\"] {\n          outline: none;\n        }\n\n        [part~=\"source\"] {\n          align-items: center;\n          display: flex;\n        }\n      </style>\n    `);\n\n      return result;\n    }\n  }\n\n  return PopupToggle;\n}\n\n/**\n * Render parts for the template or an instance.\n *\n * @private\n * @param {DocumentFragment} root\n * @param {PlainObject} state\n * @param {ChangedFlags} [changed]\n */\nfunction renderParts(root, state, changed) {\n  if (!changed || changed.popupTogglePartType) {\n    const { popupTogglePartType } = state;\n    const popupToggle = root.getElementById(\"popupToggle\");\n    if (popupToggle) {\n      transmute(popupToggle, popupTogglePartType);\n    }\n  }\n}\n","import { template } from \"../base/internal.js\";\nimport Menu from \"../base/Menu.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * Menu component in the Plain reference design system\n *\n * @inherits Menu\n */\nclass PlainMenu extends Menu {\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host ::slotted(*) {\n            padding: 0.25em 1em;\n          }\n          \n          :host ::slotted([current]) {\n            background: highlight;\n            color: highlighttext;\n          }\n\n          @media (pointer: coarse) {\n            ::slotted(*) {\n              padding: 1em;\n            }\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainMenu;\n","import { template } from \"../base/internal.js\";\nimport UpDownToggle from \"../base/UpDownToggle.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport { replace } from \"../core/template.js\";\n\n/**\n * OpenCloseToggle component in the Plain reference design system\n *\n * @inherits OpenCloseToggle\n */\nclass PlainOpenCloseToggle extends UpDownToggle {\n  get [template]() {\n    const result = super[template];\n\n    // Replace the icons with our up/down glyphs.\n    const downIcon = result.content.getElementById(\"downIcon\");\n    const downIconGlyph = fragmentFrom.html`\n      <svg\n        id=\"downIcon\"\n        part=\"toggle-icon down-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 10 5\"\n      >\n        <path d=\"M 0 0 l5 5 5 -5 z\" />\n      </svg>\n    `.firstElementChild;\n    if (downIcon && downIconGlyph) {\n      replace(downIcon, downIconGlyph);\n    }\n    const upIcon = result.content.getElementById(\"upIcon\");\n    const upIconGlyph = fragmentFrom.html`\n      <svg\n        id=\"upIcon\"\n        part=\"toggle-icon up-icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 10 5\"\n      >\n        <path d=\"M 0 5 l5 -5 5 5 z\" />\n      </svg>\n    `.firstElementChild;\n    if (upIcon && upIconGlyph) {\n      replace(upIcon, upIconGlyph);\n    }\n\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            align-items: center;\n            display: inline-flex;\n            padding: 2px;\n          }\n\n          :host(:not([disabled])):hover {\n            background: #eee;\n          }\n\n          [part~=\"toggle-icon\"] {\n            fill: currentColor;\n            height: 10px;\n            margin: 0.25em;\n            width: 10px;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainOpenCloseToggle;\n","import Backdrop from \"../base/Backdrop.js\";\n\n/**\n * Backdrop component in the Plain reference design system\n *\n * @inherits Backdrop\n */\nclass PlainBackdrop extends Backdrop {}\n\nexport default PlainBackdrop;\n","import { defaultState } from \"../base/internal.js\";\nimport Popup from \"../base/Popup.js\";\nimport PlainBackdrop from \"./PlainBackdrop.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * Popup component in the Plain reference design system\n *\n * @inherits Popup\n * @part {PlainBackdrop} backdrop\n * @part {PlainOverlayFrame} frame\n */\nclass PlainPopup extends Popup {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      backdropPartType: PlainBackdrop,\n      framePartType: PlainOverlayFrame,\n    });\n  }\n}\n\nexport default PlainPopup;\n","import { defaultState, template } from \"../base/internal.js\";\nimport MenuButton from \"../base/MenuButton.js\";\nimport PopupToggleMixin from \"../base/PopupToggleMixin.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainBorderButton from \"./PlainBorderButton.js\";\nimport PlainMenu from \"./PlainMenu.js\";\nimport PlainOpenCloseToggle from \"./PlainOpenCloseToggle.js\";\nimport PlainPopup from \"./PlainPopup.js\";\n\n/**\n * MenuButton component in the Plain reference design system\n *\n * @inherits MenuButton\n * @part {PlainMenu} menu\n * @part {PlainPopup} popup\n * @part {PlainOpenCloseToggle} popup-toggle\n * @part {PlainBorderButton} source\n * @mixes PopupToggleMixin\n */\nclass PlainMenuButton extends PopupToggleMixin(MenuButton) {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      menuPartType: PlainMenu,\n      popupPartType: PlainPopup,\n      popupTogglePartType: PlainOpenCloseToggle,\n      sourcePartType: PlainBorderButton,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          [part~=\"menu\"] {\n            background: window;\n            border: none;\n            padding: 0.5em 0;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainMenuButton;\n","import PlainMenuButton from \"../src/plain/PlainMenuButton.js\";\nexport default class ElixMenuButton extends PlainMenuButton {}\ncustomElements.define(\"elix-menu-button\", ElixMenuButton);\n","import ReactiveElement from \"../core/ReactiveElement.js\";\nimport CurrentMixin from \"./CurrentMixin.js\";\nimport DisabledMixin from \"./DisabledMixin.js\";\nimport SelectableMixin from \"./SelectableMixin.js\";\n\n/**\n * A choice in a menu\n *\n * This class is a convenient way to popuplate a [Menu](Menu) with items that\n * exhibit an appearance roughly consistent with operating system menu items.\n * Use of this class is not required, however -- a `Menu` can contain any type\n * of item you want.\n *\n * @inherits ReactiveElement\n * @mixes CurrentMixin\n * @mixes DisabledMixin\n * @mixes SelectableMixin\n */\nclass MenuItem extends CurrentMixin(\n  DisabledMixin(SelectableMixin(ReactiveElement))\n) {}\n\nexport default MenuItem;\n","import { booleanAttributeValue, setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks whether an item is the current item.\n *\n * @module CurrentMixin\n * @state current\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function CurrentMixin(Base) {\n  // The class prototype added by the mixin.\n  return class Current extends Base {\n    constructor() {\n      super();\n      /** @type {any} */ const cast = this;\n      if (!this[nativeInternals] && cast.attachInternals) {\n        this[nativeInternals] = cast.attachInternals();\n      }\n    }\n\n    attributeChangedCallback(name, oldValue, newValue) {\n      if (name === \"current\") {\n        const value = booleanAttributeValue(name, newValue);\n        if (this.current !== value) {\n          this.current = value;\n        }\n      } else {\n        super.attributeChangedCallback(name, oldValue, newValue);\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        current: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n      if (changed.current) {\n        const { current } = this[state];\n        setInternalState(this, \"current\", current);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // TODO: How do we know whether to raise this if selection is set by Menu? */\n      if (changed.current /* && this[raiseChangeEvents] */) {\n        const { current } = this[state];\n        const oldEvent = new CustomEvent(\"current-changed\", {\n          bubbles: true,\n          detail: { current },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `current` property changes.\n         *\n         * @event currentchange\n         */\n        const event = new CustomEvent(\"currentchange\", {\n          bubbles: true,\n          detail: { current },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n\n    /**\n     * True if the element is currently current.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get current() {\n      return this[state].current;\n    }\n    set current(current) {\n      // Note: AttributeMarshallingMixin will recognize `current` as the name of\n      // attribute that should be parsed as a boolean attribute, and so will\n      // handling parsing it for us.\n      this[setState]({ current });\n    }\n  };\n}\n","import { setInternalState } from \"../core/dom.js\";\nimport ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  defaultState,\n  nativeInternals,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\n\n/**\n * Tracks whether the element is currently selected.\n *\n * @module SelectableMixin\n * @state selected\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function SelectableMixin(Base) {\n  // The class prototype added by the mixin.\n  return class Selectable extends Base {\n    constructor() {\n      super();\n      /** @type {any} */ const cast = this;\n      if (!this[nativeInternals] && cast.attachInternals) {\n        this[nativeInternals] = cast.attachInternals();\n      }\n    }\n\n    // @ts-ignore\n    get [defaultState]() {\n      return Object.assign(super[defaultState] || {}, {\n        selected: false,\n      });\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      super[render](changed);\n      if (changed.selected) {\n        const { selected } = this[state];\n        setInternalState(this, \"selected\", selected);\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n\n      // TODO: How do we know whether to raise this if selection is set by Menu? */\n      if (changed.selected /* && this[raiseChangeEvents] */) {\n        const { selected } = this[state];\n        const oldEvent = new CustomEvent(\"selected-changed\", {\n          bubbles: true,\n          detail: { selected },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when the `selected` property changes.\n         *\n         * @event selectedchange\n         */\n        const event = new CustomEvent(\"selectedchange\", {\n          bubbles: true,\n          detail: { selected },\n        });\n        this.dispatchEvent(event);\n      }\n    }\n\n    /**\n     * True if the element is currently selected.\n     *\n     * @type {boolean}\n     * @default false\n     */\n    get selected() {\n      return this[state].selected;\n    }\n    set selected(selected) {\n      // Note: AttributeMarshallingMixin will recognize `selected` as the name of\n      // attribute that should be parsed as a boolean attribute, and so will\n      // handling parsing it for us.\n      this[setState]({ selected });\n    }\n  };\n}\n","import { template } from \"../base/internal.js\";\nimport MenuItem from \"../base/MenuItem.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * MenuItem component in the Plain reference design system\n *\n * @inherits MenuItem\n */\nclass PlainMenuItem extends MenuItem {\n  get [template]() {\n    // Apply variety of system fonts.\n    // Checkmark icon from Material Design.\n    return templateFrom.html`\n      <style>\n        :host {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n          font-size: 10pt;\n          white-space: nowrap;\n        }\n\n        :host([disabled]) {\n          opacity: 0.5;\n        }\n\n        #checkmark {\n          height: 1em;\n          visibility: hidden;\n          width: 1em;\n        }\n\n        :host([selected]) #checkmark {\n          visibility: visible;\n        }\n      </style>\n      <svg id=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"4 6 18 12\">\n        <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n        <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z\"/>\n      </svg>\n      <slot></slot>\n    `;\n  }\n}\n\nexport default PlainMenuItem;\n","import PlainMenuItem from \"../src/plain/PlainMenuItem.js\";\nexport default class ElixMenuItem extends PlainMenuItem {}\ncustomElements.define(\"elix-menu-item\", ElixMenuItem);\n","import ReactiveElement from \"../core/ReactiveElement.js\";\nimport { firstRender, render } from \"./internal.js\";\n\n/**\n * Inactive item that helps group related menu items\n *\n * See [Menu](Menu) for sample usage.\n *\n * @inherits ReactiveElement\n */\nclass MenuSeparator extends ReactiveElement {\n  get disabled() {\n    return true;\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (this[firstRender]) {\n      this.setAttribute(\"aria-hidden\", \"true\");\n    }\n  }\n}\n\nexport default MenuSeparator;\n","import { template } from \"../base/internal.js\";\nimport MenuSeparator from \"../base/MenuSeparator.js\";\nimport { templateFrom } from \"../core/htmlLiterals.js\";\n\n/**\n * MenuSeparator component in the Plain reference design system\n *\n * @inherits MenuSeparator\n */\nclass PlainMenuSeparator extends MenuSeparator {\n  get [template]() {\n    return templateFrom.html`\n      <style>\n        :host {\n          padding: 0 !important;\n        }\n\n        hr {\n          border-bottom-width: 0px;\n          border-color: #fff; /* Ends up as light gray */\n          border-top-width: 1px;\n          margin: 0.25em 0;\n        }\n      </style>\n      <hr>\n    `;\n  }\n}\n\nexport default PlainMenuSeparator;\n","import PlainMenuSeparator from \"../src/plain/PlainMenuSeparator.js\";\nexport default class ElixMenuSeparator extends PlainMenuSeparator {}\ncustomElements.define(\"elix-menu-separator\", ElixMenuSeparator);\n","import {\n  defaultState,\n  effectEndTarget,\n  ids,\n  render,\n  rendered,\n  setState,\n  state,\n} from \"./internal.js\";\nimport LanguageDirectionMixin from \"./LanguageDirectionMixin.js\";\nimport Popup from \"./Popup.js\";\nimport TransitionEffectMixin from \"./TransitionEffectMixin.js\";\n\nconst timeoutKey = Symbol(\"timeout\");\n\nconst Base = LanguageDirectionMixin(TransitionEffectMixin(Popup));\n\n/**\n * Lightweight popup intended to display a short, non-critical message\n *\n * The message remains until  the user dismisses it or a specified `duration`\n * elapses.\n *\n * @inherits Popup\n * @mixes LanguageDirectionMixin\n * @mixes TransitionEffectMixin\n */\nclass Toast extends Base {\n  constructor() {\n    super();\n    this.addEventListener(\"mouseout\", () => {\n      startTimerIfOpened(this);\n    });\n    this.addEventListener(\"mouseover\", () => {\n      clearTimer(this);\n    });\n  }\n\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === \"duration\") {\n      this.duration = Number(newValue);\n    } else {\n      super.attributeChangedCallback(name, oldValue, newValue);\n    }\n  }\n\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      duration: null,\n      fromEdge: \"bottom\",\n    });\n  }\n\n  /**\n   * The duration, in milliseconds, for which the toast will appear on screen.\n   *\n   * The `duration` value refers to the duration of time in which the toast\n   * will appear on the screen. In other words, this is the time between\n   * the `opened` and `closed` event for the toast.\n   *\n   * @type {number}\n   * @default null\n   */\n  get duration() {\n    return this[state].duration;\n  }\n  set duration(duration) {\n    if (!isNaN(duration)) {\n      this[setState]({ duration });\n    }\n  }\n\n  // @ts-ignore\n  get [effectEndTarget]() {\n    return this[ids].frame;\n  }\n\n  /**\n   * The edge of the viewport from which the toast will appear.\n   *\n   * The `start` and `end` values refer to text direction: in left-to-right\n   * languages such as English, these are equivalent to `left` and `right`,\n   * respectively.\n   *\n   * @type {('bottom'|'end'|'left'|'right'|'start'|'top')}\n   * @default 'bottom'\n   */\n  get fromEdge() {\n    return this[state].fromEdge;\n  }\n  set fromEdge(fromEdge) {\n    this[setState]({ fromEdge });\n  }\n\n  [render](/** @type {ChangedFlags} */ changed) {\n    super[render](changed);\n    if (changed.fromEdge) {\n      // Host\n      /** @type {IndexedObject<any>} */\n      const hostEdgeStyles = {\n        bottom: {\n          alignItems: \"center\",\n          justifyContent: \"flex-end\",\n        },\n        \"bottom-left\": {\n          alignItems: \"flex-start\",\n          justifyContent: \"flex-end\",\n        },\n        \"bottom-right\": {\n          alignItems: \"flex-end\",\n          justifyContent: \"flex-end\",\n        },\n        top: {\n          alignItems: \"center\",\n          justifyContent: null,\n        },\n        \"top-left\": {\n          alignItems: \"flex-start\",\n          justifyContent: null,\n        },\n        \"top-right\": {\n          alignItems: \"flex-end\",\n          justifyContent: null,\n        },\n      };\n      Object.assign(this.style, hostEdgeStyles[this[state].fromEdge]);\n    }\n    if (\n      changed.effect ||\n      changed.effectPhase ||\n      changed.fromEdge ||\n      changed.rightToLeft\n    ) {\n      const { effect, effectPhase, fromEdge, rightToLeft } = this[state];\n      /** @type {IndexedObject<string>} */\n      const oppositeEdge = {\n        \"bottom-left\": \"bottom-right\",\n        \"bottom-right\": \"bottom-left\",\n        \"top-left\": \"top-right\",\n        \"top-right\": \"top-left\",\n      };\n      const languageAdjustedEdge = rightToLeft\n        ? oppositeEdge[fromEdge] || fromEdge\n        : fromEdge;\n\n      /** @type {IndexedObject<string>} */\n      const edgeTransforms = {\n        bottom: \"translateY(100%)\",\n        \"bottom-left\": \"translateX(-100%)\",\n        \"bottom-right\": \"translateX(100%)\",\n        top: \"translateY(-100%)\",\n        \"top-left\": \"translateX(-100%)\",\n        \"top-right\": \"translateX(100%)\",\n      };\n\n      /** @type {IndexedObject<string>} */\n      const openEdgeTransforms = {\n        bottom: \"translateY(0)\",\n        \"bottom-left\": \"translateX(0)\",\n        \"bottom-right\": \"translateX(0)\",\n        top: \"translateY(0)\",\n        \"top-left\": \"translateX(0)\",\n        \"top-right\": \"translateX(0)\",\n      };\n\n      const opened =\n        (effect === \"open\" && effectPhase !== \"before\") ||\n        (effect === \"close\" && effectPhase === \"before\");\n\n      const opacity = opened ? 1 : 0;\n      const transform = opened\n        ? openEdgeTransforms[languageAdjustedEdge]\n        : edgeTransforms[languageAdjustedEdge];\n\n      Object.assign(this[ids].frame.style, {\n        opacity,\n        transform,\n      });\n    }\n  }\n\n  [rendered](/** @type {ChangedFlags} */ changed) {\n    super[rendered](changed);\n    startTimerIfOpened(this);\n  }\n}\n\nfunction clearTimer(/** @type {Toast} */ element) {\n  /** @type {any} */ const cast = element;\n  if (cast[timeoutKey]) {\n    clearTimeout(cast[timeoutKey]);\n    cast[timeoutKey] = null;\n  }\n}\n\nfunction startTimer(/** @type {Toast} */ element) {\n  clearTimer(element);\n  const duration = element[state].duration;\n  if (duration !== null && duration > 0) {\n    /** @type {any} */ (element)[timeoutKey] = setTimeout(() => {\n      element.close();\n    }, duration);\n  }\n}\n\nfunction startTimerIfOpened(/** @type {Toast} */ element) {\n  if (element.opened) {\n    startTimer(element);\n  }\n}\n\nexport default Toast;\n","import ReactiveElement from \"../core/ReactiveElement.js\"; // eslint-disable-line no-unused-vars\nimport {\n  effectEndTarget,\n  firstRender,\n  render,\n  rendered,\n  setState,\n  shadowRoot,\n  startEffect,\n  state,\n} from \"./internal.js\";\n\n/**\n * Update state before, during, and after CSS transitions\n *\n * @module TransitionEffectMixin\n * @param {Constructor<ReactiveElement>} Base\n */\nexport default function TransitionEffectMixin(Base) {\n  // The class prototype added by the mixin.\n  class TransitionEffect extends Base {\n    /**\n     * Return the elements that use CSS transitions to provide visual effects.\n     *\n     * By default, this assumes the host element itself will have a CSS\n     * transition applied to it, and so returns an array containing the element.\n     * If you will be applying CSS transitions to other elements, override this\n     * property and return an array containing the implicated elements.\n     *\n     * See [effectEndTarget](internal#internal.effectEndTarget)\n     * for details.\n     *\n     * @type {HTMLElement}\n     */\n    get [effectEndTarget]() {\n      return super[effectEndTarget] || this;\n    }\n\n    [render](/** @type {ChangedFlags} */ changed) {\n      if (super[render]) {\n        super[render](changed);\n      }\n      if (this[firstRender]) {\n        // Listen for `transitionend` events so we can check to see whether an\n        // effect has completed. If the component defines an `effectEndTarget`\n        // that's the host, listen to events on that. Otherwise, we assume the\n        // target is either in the shadow or an element that will be slotted into\n        // a slot in the shadow, so we'll listen to events that reach the shadow\n        // root.\n        const target = this[effectEndTarget] === this ? this : this[shadowRoot];\n        target.addEventListener(\"transitionend\", (event) => {\n          // See if the event target is our expected `effectEndTarget`. If the\n          // component defines a `effectEndTarget` state, we use that; otherwise,\n          // we use the element identified with `internal.effectEndTarget`.\n          const effectTarget =\n            this[state].effectEndTarget || this[effectEndTarget];\n          if (event.target === effectTarget) {\n            // Advance to the next phase.\n            this[setState]({\n              effectPhase: \"after\",\n            });\n          }\n        });\n      }\n    }\n\n    [rendered](/** @type {ChangedFlags} */ changed) {\n      if (super[rendered]) {\n        super[rendered](changed);\n      }\n      if (changed.effect || changed.effectPhase) {\n        const { effect, effectPhase } = this[state];\n        const oldEvent = new CustomEvent(\"effect-phase-changed\", {\n          bubbles: true,\n          detail: {\n            effect,\n            effectPhase,\n          },\n        });\n        this.dispatchEvent(oldEvent);\n        /**\n         * Raised when [state.effect](TransitionEffectMixin#effect-phases) or\n         * [state.effectPhase](TransitionEffectMixin#effect-phases) changes.\n         *\n         * Note: In general, Elix components do not raise events in response to\n         * outside manipulation. (See\n         * [raiseChangeEvents](internal#internal.raiseChangeEvents).) However, for\n         * a component using `TransitionEffectMixin`, a single invocation of the\n         * `startEffect` method will cause the element to pass through multiple\n         * visual states. This makes it hard for external hosts of this\n         * component to know what visual state the component is in. Accordingly,\n         * the mixin raises the `effectphasechange` event whenever the effect or\n         * phase changes, even if `internal.raiseChangeEvents` is false.\n         *\n         * @event effectphasechange\n         */\n        const event = new CustomEvent(\"effectphasechange\", {\n          bubbles: true,\n          detail: {\n            effect,\n            effectPhase,\n          },\n        });\n        this.dispatchEvent(event);\n\n        if (effect) {\n          if (effectPhase !== \"after\") {\n            // We read a layout property to force the browser to render the component\n            // with its current styles before we move to the next state. This ensures\n            // animated values will actually be applied before we move to the next\n            // state.\n            this.offsetHeight;\n          }\n          if (effectPhase === \"before\") {\n            // Advance to the next phase.\n            this[setState]({\n              effectPhase: \"during\",\n            });\n          }\n        }\n      }\n    }\n\n    /**\n     * See [startEffect](internal#internal.startEffect).\n     *\n     * @param {string} effect\n     */\n    async [startEffect](effect) {\n      await this[setState]({\n        effect,\n        effectPhase: \"before\",\n      });\n    }\n  }\n\n  return TransitionEffect;\n}\n","import { defaultState, template } from \"../base/internal.js\";\nimport Toast from \"../base/Toast.js\";\nimport { fragmentFrom } from \"../core/htmlLiterals.js\";\nimport PlainOverlayFrame from \"./PlainOverlayFrame.js\";\n\n/**\n * @inherits Toast\n * @part {PlainOverlayFrame} frame\n */\nclass PlainToast extends Toast {\n  // @ts-ignore\n  get [defaultState]() {\n    return Object.assign(super[defaultState], {\n      framePartType: PlainOverlayFrame,\n    });\n  }\n\n  get [template]() {\n    const result = super[template];\n    result.content.append(\n      fragmentFrom.html`\n        <style>\n          :host {\n            align-items: initial;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            justify-content: initial;\n            left: 0;\n            outline: none;\n            pointer-events: none;\n            top: 0;\n            -webkit-tap-highlight-color: transparent;\n            width: 100%;\n          }\n\n          [part~=\"frame\"] {\n            margin: 1em;\n            transition-duration: 0.25s;\n            transition-property: opacity, transform;\n            will-change: opacity, transform;\n          }\n        </style>\n      `\n    );\n    return result;\n  }\n}\n\nexport default PlainToast;\n","/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 109);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar format_1 = __webpack_require__(18);\nvar leaf_1 = __webpack_require__(19);\nvar scroll_1 = __webpack_require__(45);\nvar inline_1 = __webpack_require__(46);\nvar block_1 = __webpack_require__(47);\nvar embed_1 = __webpack_require__(48);\nvar text_1 = __webpack_require__(49);\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar store_1 = __webpack_require__(31);\nvar Registry = __webpack_require__(1);\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar diff = __webpack_require__(51);\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\nvar op = __webpack_require__(20);\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var ops = [];\n  var firstOther = otherIter.peek();\n  if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n    var firstLeft = firstOther.retain;\n    while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n      firstLeft -= thisIter.peekLength();\n      ops.push(thisIter.next());\n    }\n    if (firstOther.retain - firstLeft > 0) {\n      otherIter.next(firstOther.retain - firstLeft);\n    }\n  }\n  var delta = new Delta(ops);\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n\n        // Optimization if rest of other is just retain\n        if (!otherIter.hasNext() && equal(delta.ops[delta.ops.length - 1], newOp)) {\n          var rest = new Delta(thisIter.rest());\n          return delta.concat(rest).chop();\n        }\n\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BlockEmbed = exports.bubbleFormats = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NEWLINE_LENGTH = 1;\n\nvar BlockEmbed = function (_Parchment$Embed) {\n  _inherits(BlockEmbed, _Parchment$Embed);\n\n  function BlockEmbed() {\n    _classCallCheck(this, BlockEmbed);\n\n    return _possibleConstructorReturn(this, (BlockEmbed.__proto__ || Object.getPrototypeOf(BlockEmbed)).apply(this, arguments));\n  }\n\n  _createClass(BlockEmbed, [{\n    key: 'attach',\n    value: function attach() {\n      _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'attach', this).call(this);\n      this.attributes = new _parchment2.default.Attributor.Store(this.domNode);\n    }\n  }, {\n    key: 'delta',\n    value: function delta() {\n      return new _quillDelta2.default().insert(this.value(), (0, _extend2.default)(this.formats(), this.attributes.values()));\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var attribute = _parchment2.default.query(name, _parchment2.default.Scope.BLOCK_ATTRIBUTE);\n      if (attribute != null) {\n        this.attributes.attribute(attribute, value);\n      }\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      this.format(name, value);\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (typeof value === 'string' && value.endsWith('\\n')) {\n        var block = _parchment2.default.create(Block.blotName);\n        this.parent.insertBefore(block, index === 0 ? this : this.next);\n        block.insertAt(0, value.slice(0, -1));\n      } else {\n        _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n    }\n  }]);\n\n  return BlockEmbed;\n}(_parchment2.default.Embed);\n\nBlockEmbed.scope = _parchment2.default.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nvar Block = function (_Parchment$Block) {\n  _inherits(Block, _Parchment$Block);\n\n  function Block(domNode) {\n    _classCallCheck(this, Block);\n\n    var _this2 = _possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).call(this, domNode));\n\n    _this2.cache = {};\n    return _this2;\n  }\n\n  _createClass(Block, [{\n    key: 'delta',\n    value: function delta() {\n      if (this.cache.delta == null) {\n        this.cache.delta = this.descendants(_parchment2.default.Leaf).reduce(function (delta, leaf) {\n          if (leaf.length() === 0) {\n            return delta;\n          } else {\n            return delta.insert(leaf.value(), bubbleFormats(leaf));\n          }\n        }, new _quillDelta2.default()).insert('\\n', bubbleFormats(this));\n      }\n      return this.cache.delta;\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'deleteAt', this).call(this, index, length);\n      this.cache = {};\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length <= 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n        if (index + length === this.length()) {\n          this.format(name, value);\n        }\n      } else {\n        _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'formatAt', this).call(this, index, Math.min(length, this.length() - index - 1), name, value);\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, index, value, def);\n      if (value.length === 0) return;\n      var lines = value.split('\\n');\n      var text = lines.shift();\n      if (text.length > 0) {\n        if (index < this.length() - 1 || this.children.tail == null) {\n          _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, Math.min(index, this.length() - 1), text);\n        } else {\n          this.children.tail.insertAt(this.children.tail.length(), text);\n        }\n        this.cache = {};\n      }\n      var block = this;\n      lines.reduce(function (index, line) {\n        block = block.split(index, true);\n        block.insertAt(0, line);\n        return line.length;\n      }, index + text.length);\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      var head = this.children.head;\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertBefore', this).call(this, blot, ref);\n      if (head instanceof _break2.default) {\n        head.remove();\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      if (this.cache.length == null) {\n        this.cache.length = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'length', this).call(this) + NEWLINE_LENGTH;\n      }\n      return this.cache.length;\n    }\n  }, {\n    key: 'moveChildren',\n    value: function moveChildren(target, ref) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'moveChildren', this).call(this, target, ref);\n      this.cache = {};\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'optimize', this).call(this, context);\n      this.cache = {};\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'path', this).call(this, index, true);\n    }\n  }, {\n    key: 'removeChild',\n    value: function removeChild(child) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'removeChild', this).call(this, child);\n      this.cache = {};\n    }\n  }, {\n    key: 'split',\n    value: function split(index) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n        var clone = this.clone();\n        if (index === 0) {\n          this.parent.insertBefore(clone, this);\n          return this;\n        } else {\n          this.parent.insertBefore(clone, this.next);\n          return clone;\n        }\n      } else {\n        var next = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'split', this).call(this, index, force);\n        this.cache = {};\n        return next;\n      }\n    }\n  }]);\n\n  return Block;\n}(_parchment2.default.Block);\n\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [_inline2.default, _parchment2.default.Embed, _text2.default];\n\nfunction bubbleFormats(blot) {\n  var formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = (0, _extend2.default)(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\nexports.bubbleFormats = bubbleFormats;\nexports.BlockEmbed = BlockEmbed;\nexports.default = Block;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.overload = exports.expandConfig = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n__webpack_require__(50);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _editor = __webpack_require__(14);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _selection = __webpack_require__(15);\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill');\n\nvar Quill = function () {\n  _createClass(Quill, null, [{\n    key: 'debug',\n    value: function debug(limit) {\n      if (limit === true) {\n        limit = 'log';\n      }\n      _logger2.default.level(limit);\n    }\n  }, {\n    key: 'find',\n    value: function find(node) {\n      return node.__quill || _parchment2.default.find(node);\n    }\n  }, {\n    key: 'import',\n    value: function _import(name) {\n      if (this.imports[name] == null) {\n        debug.error('Cannot import ' + name + '. Are you sure it was registered?');\n      }\n      return this.imports[name];\n    }\n  }, {\n    key: 'register',\n    value: function register(path, target) {\n      var _this = this;\n\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (typeof path !== 'string') {\n        var name = path.attrName || path.blotName;\n        if (typeof name === 'string') {\n          // register(Blot | Attributor, overwrite)\n          this.register('formats/' + name, path, target);\n        } else {\n          Object.keys(path).forEach(function (key) {\n            _this.register(key, path[key], target);\n          });\n        }\n      } else {\n        if (this.imports[path] != null && !overwrite) {\n          debug.warn('Overwriting ' + path + ' with', target);\n        }\n        this.imports[path] = target;\n        if ((path.startsWith('blots/') || path.startsWith('formats/')) && target.blotName !== 'abstract') {\n          _parchment2.default.register(target);\n        } else if (path.startsWith('modules') && typeof target.register === 'function') {\n          target.register();\n        }\n      }\n    }\n  }]);\n\n  function Quill(container) {\n    var _this2 = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Quill);\n\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    var html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new _emitter4.default();\n    this.scroll = _parchment2.default.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new _editor2.default(this.scroll);\n    this.selection = new _selection2.default(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type) {\n      if (type === _emitter4.default.events.TEXT_CHANGE) {\n        _this2.root.classList.toggle('ql-blank', _this2.editor.isBlank());\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_UPDATE, function (source, mutations) {\n      var range = _this2.selection.lastRange;\n      var index = range && range.length === 0 ? range.index : undefined;\n      modify.call(_this2, function () {\n        return _this2.editor.update(null, mutations, index);\n      }, source);\n    });\n    var contents = this.clipboard.convert('<div class=\\'ql-editor\\' style=\"white-space: normal;\">' + html + '<p><br></p></div>');\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  _createClass(Quill, [{\n    key: 'addContainer',\n    value: function addContainer(container) {\n      var refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (typeof container === 'string') {\n        var className = container;\n        container = document.createElement('div');\n        container.classList.add(className);\n      }\n      this.container.insertBefore(container, refNode);\n      return container;\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.selection.setRange(null);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length, source) {\n      var _this3 = this;\n\n      var _overload = overload(index, length, source);\n\n      var _overload2 = _slicedToArray(_overload, 4);\n\n      index = _overload2[0];\n      length = _overload2[1];\n      source = _overload2[3];\n\n      return modify.call(this, function () {\n        return _this3.editor.deleteText(index, length);\n      }, source, index, -1 * length);\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.enable(false);\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.scroll.enable(enabled);\n      this.container.classList.toggle('ql-disabled', !enabled);\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      var scrollTop = this.scrollingContainer.scrollTop;\n      this.selection.focus();\n      this.scrollingContainer.scrollTop = scrollTop;\n      this.scrollIntoView();\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var _this4 = this;\n\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        var range = _this4.getSelection(true);\n        var change = new _quillDelta2.default();\n        if (range == null) {\n          return change;\n        } else if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n          change = _this4.editor.formatLine(range.index, range.length, _defineProperty({}, name, value));\n        } else if (range.length === 0) {\n          _this4.selection.format(name, value);\n          return change;\n        } else {\n          change = _this4.editor.formatText(range.index, range.length, _defineProperty({}, name, value));\n        }\n        _this4.setSelection(range, _emitter4.default.sources.SILENT);\n        return change;\n      }, source);\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length, name, value, source) {\n      var _this5 = this;\n\n      var formats = void 0;\n\n      var _overload3 = overload(index, length, name, value, source);\n\n      var _overload4 = _slicedToArray(_overload3, 4);\n\n      index = _overload4[0];\n      length = _overload4[1];\n      formats = _overload4[2];\n      source = _overload4[3];\n\n      return modify.call(this, function () {\n        return _this5.editor.formatLine(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length, name, value, source) {\n      var _this6 = this;\n\n      var formats = void 0;\n\n      var _overload5 = overload(index, length, name, value, source);\n\n      var _overload6 = _slicedToArray(_overload5, 4);\n\n      index = _overload6[0];\n      length = _overload6[1];\n      formats = _overload6[2];\n      source = _overload6[3];\n\n      return modify.call(this, function () {\n        return _this6.editor.formatText(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var bounds = void 0;\n      if (typeof index === 'number') {\n        bounds = this.selection.getBounds(index, length);\n      } else {\n        bounds = this.selection.getBounds(index.index, index.length);\n      }\n      var containerBounds = this.container.getBoundingClientRect();\n      return {\n        bottom: bounds.bottom - containerBounds.top,\n        height: bounds.height,\n        left: bounds.left - containerBounds.left,\n        right: bounds.right - containerBounds.left,\n        top: bounds.top - containerBounds.top,\n        width: bounds.width\n      };\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload7 = overload(index, length);\n\n      var _overload8 = _slicedToArray(_overload7, 2);\n\n      index = _overload8[0];\n      length = _overload8[1];\n\n      return this.editor.getContents(index, length);\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (typeof index === 'number') {\n        return this.editor.getFormat(index, length);\n      } else {\n        return this.editor.getFormat(index.index, index.length);\n      }\n    }\n  }, {\n    key: 'getIndex',\n    value: function getIndex(blot) {\n      return blot.offset(this.scroll);\n    }\n  }, {\n    key: 'getLength',\n    value: function getLength() {\n      return this.scroll.length();\n    }\n  }, {\n    key: 'getLeaf',\n    value: function getLeaf(index) {\n      return this.scroll.leaf(index);\n    }\n  }, {\n    key: 'getLine',\n    value: function getLine(index) {\n      return this.scroll.line(index);\n    }\n  }, {\n    key: 'getLines',\n    value: function getLines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      if (typeof index !== 'number') {\n        return this.scroll.lines(index.index, index.length);\n      } else {\n        return this.scroll.lines(index, length);\n      }\n    }\n  }, {\n    key: 'getModule',\n    value: function getModule(name) {\n      return this.theme.modules[name];\n    }\n  }, {\n    key: 'getSelection',\n    value: function getSelection() {\n      var focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (focus) this.focus();\n      this.update(); // Make sure we access getRange with editor in consistent state\n      return this.selection.getRange()[0];\n    }\n  }, {\n    key: 'getText',\n    value: function getText() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload9 = overload(index, length);\n\n      var _overload10 = _slicedToArray(_overload9, 2);\n\n      index = _overload10[0];\n      length = _overload10[1];\n\n      return this.editor.getText(index, length);\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return this.selection.hasFocus();\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      var _this7 = this;\n\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n\n      return modify.call(this, function () {\n        return _this7.editor.insertEmbed(index, embed, value);\n      }, source, index);\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text, name, value, source) {\n      var _this8 = this;\n\n      var formats = void 0;\n\n      var _overload11 = overload(index, 0, name, value, source);\n\n      var _overload12 = _slicedToArray(_overload11, 4);\n\n      index = _overload12[0];\n      formats = _overload12[2];\n      source = _overload12[3];\n\n      return modify.call(this, function () {\n        return _this8.editor.insertText(index, text, formats);\n      }, source, index, text.length);\n    }\n  }, {\n    key: 'isEnabled',\n    value: function isEnabled() {\n      return !this.container.classList.contains('ql-disabled');\n    }\n  }, {\n    key: 'off',\n    value: function off() {\n      return this.emitter.off.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'on',\n    value: function on() {\n      return this.emitter.on.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'once',\n    value: function once() {\n      return this.emitter.once.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'pasteHTML',\n    value: function pasteHTML(index, html, source) {\n      this.clipboard.dangerouslyPasteHTML(index, html, source);\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length, source) {\n      var _this9 = this;\n\n      var _overload13 = overload(index, length, source);\n\n      var _overload14 = _slicedToArray(_overload13, 4);\n\n      index = _overload14[0];\n      length = _overload14[1];\n      source = _overload14[3];\n\n      return modify.call(this, function () {\n        return _this9.editor.removeFormat(index, length);\n      }, source, index);\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView() {\n      this.selection.scrollIntoView(this.scrollingContainer);\n    }\n  }, {\n    key: 'setContents',\n    value: function setContents(delta) {\n      var _this10 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        var length = _this10.getLength();\n        var deleted = _this10.editor.deleteText(0, length);\n        var applied = _this10.editor.applyDelta(delta);\n        var lastOp = applied.ops[applied.ops.length - 1];\n        if (lastOp != null && typeof lastOp.insert === 'string' && lastOp.insert[lastOp.insert.length - 1] === '\\n') {\n          _this10.editor.deleteText(_this10.getLength() - 1, 1);\n          applied.delete(1);\n        }\n        var ret = deleted.compose(applied);\n        return ret;\n      }, source);\n    }\n  }, {\n    key: 'setSelection',\n    value: function setSelection(index, length, source) {\n      if (index == null) {\n        this.selection.setRange(null, length || Quill.sources.API);\n      } else {\n        var _overload15 = overload(index, length, source);\n\n        var _overload16 = _slicedToArray(_overload15, 4);\n\n        index = _overload16[0];\n        length = _overload16[1];\n        source = _overload16[3];\n\n        this.selection.setRange(new _selection.Range(index, length), source);\n        if (source !== _emitter4.default.sources.SILENT) {\n          this.selection.scrollIntoView(this.scrollingContainer);\n        }\n      }\n    }\n  }, {\n    key: 'setText',\n    value: function setText(text) {\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      var delta = new _quillDelta2.default().insert(text);\n      return this.setContents(delta, source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n      this.selection.update(source);\n      return change;\n    }\n  }, {\n    key: 'updateContents',\n    value: function updateContents(delta) {\n      var _this11 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        return _this11.editor.applyDelta(delta, source);\n      }, source, true);\n    }\n  }]);\n\n  return Quill;\n}();\n\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = _emitter4.default.events;\nQuill.sources = _emitter4.default.sources;\n// eslint-disable-next-line no-undef\nQuill.version =  false ? 'dev' : \"1.3.7\";\n\nQuill.imports = {\n  'delta': _quillDelta2.default,\n  'parchment': _parchment2.default,\n  'core/module': _module2.default,\n  'core/theme': _theme2.default\n};\n\nfunction expandConfig(container, userConfig) {\n  userConfig = (0, _extend2.default)(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = _theme2.default;\n  } else {\n    userConfig.theme = Quill.import('themes/' + userConfig.theme);\n    if (userConfig.theme == null) {\n      throw new Error('Invalid theme ' + userConfig.theme + '. Did you register it?');\n    }\n  }\n  var themeConfig = (0, _extend2.default)(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function (config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function (module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  var moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  var moduleConfig = moduleNames.reduce(function (config, name) {\n    var moduleClass = Quill.import('modules/' + name);\n    if (moduleClass == null) {\n      debug.error('Cannot load ' + name + ' module. Are you sure you registered it?');\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar && userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = (0, _extend2.default)(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function (key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function (config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === _emitter4.default.sources.USER) {\n    return new _quillDelta2.default();\n  }\n  var range = index == null ? null : this.getSelection();\n  var oldDelta = this.editor.delta;\n  var change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, _emitter4.default.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    var _emitter;\n\n    var args = [_emitter4.default.events.TEXT_CHANGE, change, oldDelta, source];\n    (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n    if (source !== _emitter4.default.sources.SILENT) {\n      var _emitter2;\n\n      (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  var formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || _emitter4.default.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  var start = void 0,\n      end = void 0;\n  if (index instanceof _quillDelta2.default) {\n    var _map = [range.index, range.index + range.length].map(function (pos) {\n      return index.transformPosition(pos, source !== _emitter4.default.sources.USER);\n    });\n\n    var _map2 = _slicedToArray(_map, 2);\n\n    start = _map2[0];\n    end = _map2[1];\n  } else {\n    var _map3 = [range.index, range.index + range.length].map(function (pos) {\n      if (pos < index || pos === index && source === _emitter4.default.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n\n    var _map4 = _slicedToArray(_map3, 2);\n\n    start = _map4[0];\n    end = _map4[1];\n  }\n  return new _selection.Range(start, end - start);\n}\n\nexports.expandConfig = expandConfig;\nexports.overload = overload;\nexports.default = Quill;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Inline = function (_Parchment$Inline) {\n  _inherits(Inline, _Parchment$Inline);\n\n  function Inline() {\n    _classCallCheck(this, Inline);\n\n    return _possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  _createClass(Inline, [{\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (Inline.compare(this.statics.blotName, name) < 0 && _parchment2.default.query(name, _parchment2.default.Scope.BLOT)) {\n        var blot = this.isolate(index, length);\n        if (value) {\n          blot.wrap(name, value);\n        }\n      } else {\n        _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'formatAt', this).call(this, index, length, name, value);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'optimize', this).call(this, context);\n      if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n        var parent = this.parent.isolate(this.offset(), this.length());\n        this.moveChildren(parent);\n        parent.wrap(this);\n      }\n    }\n  }], [{\n    key: 'compare',\n    value: function compare(self, other) {\n      var selfIndex = Inline.order.indexOf(self);\n      var otherIndex = Inline.order.indexOf(other);\n      if (selfIndex >= 0 || otherIndex >= 0) {\n        return selfIndex - otherIndex;\n      } else if (self === other) {\n        return 0;\n      } else if (self < other) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n  }]);\n\n  return Inline;\n}(_parchment2.default.Inline);\n\nInline.allowedChildren = [Inline, _parchment2.default.Embed, _text2.default];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = ['cursor', 'inline', // Must be lower\n'underline', 'strike', 'italic', 'bold', 'script', 'link', 'code' // Must be higher\n];\n\nexports.default = Inline;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TextBlot = function (_Parchment$Text) {\n  _inherits(TextBlot, _Parchment$Text);\n\n  function TextBlot() {\n    _classCallCheck(this, TextBlot);\n\n    return _possibleConstructorReturn(this, (TextBlot.__proto__ || Object.getPrototypeOf(TextBlot)).apply(this, arguments));\n  }\n\n  return TextBlot;\n}(_parchment2.default.Text);\n\nexports.default = TextBlot;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _eventemitter = __webpack_require__(54);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:events');\n\nvar EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(function (eventName) {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    [].slice.call(document.querySelectorAll('.ql-container')).forEach(function (node) {\n      // TODO use WeakMap\n      if (node.__quill && node.__quill.emitter) {\n        var _node$__quill$emitter;\n\n        (_node$__quill$emitter = node.__quill.emitter).handleDOM.apply(_node$__quill$emitter, args);\n      }\n    });\n  });\n});\n\nvar Emitter = function (_EventEmitter) {\n  _inherits(Emitter, _EventEmitter);\n\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n\n    var _this = _possibleConstructorReturn(this, (Emitter.__proto__ || Object.getPrototypeOf(Emitter)).call(this));\n\n    _this.listeners = {};\n    _this.on('error', debug.error);\n    return _this;\n  }\n\n  _createClass(Emitter, [{\n    key: 'emit',\n    value: function emit() {\n      debug.log.apply(debug, arguments);\n      _get(Emitter.prototype.__proto__ || Object.getPrototypeOf(Emitter.prototype), 'emit', this).apply(this, arguments);\n    }\n  }, {\n    key: 'handleDOM',\n    value: function handleDOM(event) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      (this.listeners[event.type] || []).forEach(function (_ref) {\n        var node = _ref.node,\n            handler = _ref.handler;\n\n        if (event.target === node || node.contains(event.target)) {\n          handler.apply(undefined, [event].concat(args));\n        }\n      });\n    }\n  }, {\n    key: 'listenDOM',\n    value: function listenDOM(eventName, node, handler) {\n      if (!this.listeners[eventName]) {\n        this.listeners[eventName] = [];\n      }\n      this.listeners[eventName].push({ node: node, handler: handler });\n    }\n  }]);\n\n  return Emitter;\n}(_eventemitter2.default);\n\nEmitter.events = {\n  EDITOR_CHANGE: 'editor-change',\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n  SCROLL_OPTIMIZE: 'scroll-optimize',\n  SCROLL_UPDATE: 'scroll-update',\n  SELECTION_CHANGE: 'selection-change',\n  TEXT_CHANGE: 'text-change'\n};\nEmitter.sources = {\n  API: 'api',\n  SILENT: 'silent',\n  USER: 'user'\n};\n\nexports.default = Emitter;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Module = function Module(quill) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  _classCallCheck(this, Module);\n\n  this.quill = quill;\n  this.options = options;\n};\n\nModule.DEFAULTS = {};\n\nexports.default = Module;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar levels = ['error', 'warn', 'log', 'info'];\nvar level = 'warn';\n\nfunction debug(method) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    var _console;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    (_console = console)[method].apply(_console, args); // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function (logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function (newLevel) {\n  level = newLevel;\n};\n\nexports.default = namespace;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pSlice = Array.prototype.slice;\nvar objectKeys = __webpack_require__(52);\nvar isArguments = __webpack_require__(53);\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Code = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Code = function (_Inline) {\n  _inherits(Code, _Inline);\n\n  function Code() {\n    _classCallCheck(this, Code);\n\n    return _possibleConstructorReturn(this, (Code.__proto__ || Object.getPrototypeOf(Code)).apply(this, arguments));\n  }\n\n  return Code;\n}(_inline2.default);\n\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nvar CodeBlock = function (_Block) {\n  _inherits(CodeBlock, _Block);\n\n  function CodeBlock() {\n    _classCallCheck(this, CodeBlock);\n\n    return _possibleConstructorReturn(this, (CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(CodeBlock, [{\n    key: 'delta',\n    value: function delta() {\n      var _this3 = this;\n\n      var text = this.domNode.textContent;\n      if (text.endsWith('\\n')) {\n        // Should always be true\n        text = text.slice(0, -1);\n      }\n      return text.split('\\n').reduce(function (delta, frag) {\n        return delta.insert(frag).insert('\\n', _this3.formats());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (name === this.statics.blotName && value) return;\n\n      var _descendant = this.descendant(_text2.default, this.length() - 1),\n          _descendant2 = _slicedToArray(_descendant, 1),\n          text = _descendant2[0];\n\n      if (text != null) {\n        text.deleteAt(text.length() - 1, 1);\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'format', this).call(this, name, value);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length === 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK) == null || name === this.statics.blotName && value === this.statics.formats(this.domNode)) {\n        return;\n      }\n      var nextNewline = this.newlineIndex(index);\n      if (nextNewline < 0 || nextNewline >= index + length) return;\n      var prevNewline = this.newlineIndex(index, true) + 1;\n      var isolateLength = nextNewline - prevNewline + 1;\n      var blot = this.isolate(prevNewline, isolateLength);\n      var next = blot.next;\n      blot.format(name, value);\n      if (next instanceof CodeBlock) {\n        next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n      }\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return;\n\n      var _descendant3 = this.descendant(_text2.default, index),\n          _descendant4 = _slicedToArray(_descendant3, 2),\n          text = _descendant4[0],\n          offset = _descendant4[1];\n\n      text.insertAt(offset, value);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      var length = this.domNode.textContent.length;\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        return length + 1;\n      }\n      return length;\n    }\n  }, {\n    key: 'newlineIndex',\n    value: function newlineIndex(searchIndex) {\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!reverse) {\n        var offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n        return offset > -1 ? searchIndex + offset : -1;\n      } else {\n        return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        this.appendChild(_parchment2.default.create('text', '\\n'));\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n        next.optimize(context);\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'replace', this).call(this, target);\n      [].slice.call(this.domNode.querySelectorAll('*')).forEach(function (node) {\n        var blot = _parchment2.default.find(node);\n        if (blot == null) {\n          node.parentNode.removeChild(node);\n        } else if (blot instanceof _parchment2.default.Embed) {\n          blot.remove();\n        } else {\n          blot.unwrap();\n        }\n      });\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var domNode = _get(CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock), 'create', this).call(this, value);\n      domNode.setAttribute('spellcheck', false);\n      return domNode;\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return CodeBlock;\n}(_block2.default);\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\nexports.Code = Code;\nexports.default = CodeBlock;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ASCII = /^[ -~]*$/;\n\nvar Editor = function () {\n  function Editor(scroll) {\n    _classCallCheck(this, Editor);\n\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  _createClass(Editor, [{\n    key: 'applyDelta',\n    value: function applyDelta(delta) {\n      var _this = this;\n\n      var consumeNextNewline = false;\n      this.scroll.update();\n      var scrollLength = this.scroll.length();\n      this.scroll.batchStart();\n      delta = normalizeDelta(delta);\n      delta.reduce(function (index, op) {\n        var length = op.retain || op.delete || op.insert.length || 1;\n        var attributes = op.attributes || {};\n        if (op.insert != null) {\n          if (typeof op.insert === 'string') {\n            var text = op.insert;\n            if (text.endsWith('\\n') && consumeNextNewline) {\n              consumeNextNewline = false;\n              text = text.slice(0, -1);\n            }\n            if (index >= scrollLength && !text.endsWith('\\n')) {\n              consumeNextNewline = true;\n            }\n            _this.scroll.insertAt(index, text);\n\n            var _scroll$line = _this.scroll.line(index),\n                _scroll$line2 = _slicedToArray(_scroll$line, 2),\n                line = _scroll$line2[0],\n                offset = _scroll$line2[1];\n\n            var formats = (0, _extend2.default)({}, (0, _block.bubbleFormats)(line));\n            if (line instanceof _block2.default) {\n              var _line$descendant = line.descendant(_parchment2.default.Leaf, offset),\n                  _line$descendant2 = _slicedToArray(_line$descendant, 1),\n                  leaf = _line$descendant2[0];\n\n              formats = (0, _extend2.default)(formats, (0, _block.bubbleFormats)(leaf));\n            }\n            attributes = _op2.default.attributes.diff(formats, attributes) || {};\n          } else if (_typeof(op.insert) === 'object') {\n            var key = Object.keys(op.insert)[0]; // There should only be one key\n            if (key == null) return index;\n            _this.scroll.insertAt(index, key, op.insert[key]);\n          }\n          scrollLength += length;\n        }\n        Object.keys(attributes).forEach(function (name) {\n          _this.scroll.formatAt(index, length, name, attributes[name]);\n        });\n        return index + length;\n      }, 0);\n      delta.reduce(function (index, op) {\n        if (typeof op.delete === 'number') {\n          _this.scroll.deleteAt(index, op.delete);\n          return index;\n        }\n        return index + (op.retain || op.insert.length || 1);\n      }, 0);\n      this.scroll.batchEnd();\n      return this.update(delta);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length) {\n      this.scroll.deleteAt(index, length);\n      return this.update(new _quillDelta2.default().retain(index).delete(length));\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length) {\n      var _this2 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      this.scroll.update();\n      Object.keys(formats).forEach(function (format) {\n        if (_this2.scroll.whitelist != null && !_this2.scroll.whitelist[format]) return;\n        var lines = _this2.scroll.lines(index, Math.max(length, 1));\n        var lengthRemaining = length;\n        lines.forEach(function (line) {\n          var lineLength = line.length();\n          if (!(line instanceof _code2.default)) {\n            line.format(format, formats[format]);\n          } else {\n            var codeIndex = index - line.offset(_this2.scroll);\n            var codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n            line.formatAt(codeIndex, codeLength, format, formats[format]);\n          }\n          lengthRemaining -= lineLength;\n        });\n      });\n      this.scroll.optimize();\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length) {\n      var _this3 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      Object.keys(formats).forEach(function (format) {\n        _this3.scroll.formatAt(index, length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents(index, length) {\n      return this.delta.slice(index, index + length);\n    }\n  }, {\n    key: 'getDelta',\n    value: function getDelta() {\n      return this.scroll.lines().reduce(function (delta, line) {\n        return delta.concat(line.delta());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var lines = [],\n          leaves = [];\n      if (length === 0) {\n        this.scroll.path(index).forEach(function (path) {\n          var _path = _slicedToArray(path, 1),\n              blot = _path[0];\n\n          if (blot instanceof _block2.default) {\n            lines.push(blot);\n          } else if (blot instanceof _parchment2.default.Leaf) {\n            leaves.push(blot);\n          }\n        });\n      } else {\n        lines = this.scroll.lines(index, length);\n        leaves = this.scroll.descendants(_parchment2.default.Leaf, index, length);\n      }\n      var formatsArr = [lines, leaves].map(function (blots) {\n        if (blots.length === 0) return {};\n        var formats = (0, _block.bubbleFormats)(blots.shift());\n        while (Object.keys(formats).length > 0) {\n          var blot = blots.shift();\n          if (blot == null) return formats;\n          formats = combineFormats((0, _block.bubbleFormats)(blot), formats);\n        }\n        return formats;\n      });\n      return _extend2.default.apply(_extend2.default, formatsArr);\n    }\n  }, {\n    key: 'getText',\n    value: function getText(index, length) {\n      return this.getContents(index, length).filter(function (op) {\n        return typeof op.insert === 'string';\n      }).map(function (op) {\n        return op.insert;\n      }).join('');\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      this.scroll.insertAt(index, embed, value);\n      return this.update(new _quillDelta2.default().retain(index).insert(_defineProperty({}, embed, value)));\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text) {\n      var _this4 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      this.scroll.insertAt(index, text);\n      Object.keys(formats).forEach(function (format) {\n        _this4.scroll.formatAt(index, text.length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).insert(text, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'isBlank',\n    value: function isBlank() {\n      if (this.scroll.children.length == 0) return true;\n      if (this.scroll.children.length > 1) return false;\n      var block = this.scroll.children.head;\n      if (block.statics.blotName !== _block2.default.blotName) return false;\n      if (block.children.length > 1) return false;\n      return block.children.head instanceof _break2.default;\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length) {\n      var text = this.getText(index, length);\n\n      var _scroll$line3 = this.scroll.line(index + length),\n          _scroll$line4 = _slicedToArray(_scroll$line3, 2),\n          line = _scroll$line4[0],\n          offset = _scroll$line4[1];\n\n      var suffixLength = 0,\n          suffix = new _quillDelta2.default();\n      if (line != null) {\n        if (!(line instanceof _code2.default)) {\n          suffixLength = line.length() - offset;\n        } else {\n          suffixLength = line.newlineIndex(offset) - offset + 1;\n        }\n        suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n      }\n      var contents = this.getContents(index, length + suffixLength);\n      var diff = contents.diff(new _quillDelta2.default().insert(text).concat(suffix));\n      var delta = new _quillDelta2.default().retain(index).concat(diff);\n      return this.applyDelta(delta);\n    }\n  }, {\n    key: 'update',\n    value: function update(change) {\n      var mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var cursorIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n      var oldDelta = this.delta;\n      if (mutations.length === 1 && mutations[0].type === 'characterData' && mutations[0].target.data.match(ASCII) && _parchment2.default.find(mutations[0].target)) {\n        // Optimization for character changes\n        var textBlot = _parchment2.default.find(mutations[0].target);\n        var formats = (0, _block.bubbleFormats)(textBlot);\n        var index = textBlot.offset(this.scroll);\n        var oldValue = mutations[0].oldValue.replace(_cursor2.default.CONTENTS, '');\n        var oldText = new _quillDelta2.default().insert(oldValue);\n        var newText = new _quillDelta2.default().insert(textBlot.value());\n        var diffDelta = new _quillDelta2.default().retain(index).concat(oldText.diff(newText, cursorIndex));\n        change = diffDelta.reduce(function (delta, op) {\n          if (op.insert) {\n            return delta.insert(op.insert, formats);\n          } else {\n            return delta.push(op);\n          }\n        }, new _quillDelta2.default());\n        this.delta = oldDelta.compose(change);\n      } else {\n        this.delta = this.getDelta();\n        if (!change || !(0, _deepEqual2.default)(oldDelta.compose(change), this.delta)) {\n          change = oldDelta.diff(this.delta, cursorIndex);\n        }\n      }\n      return change;\n    }\n  }]);\n\n  return Editor;\n}();\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function (merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function (delta, op) {\n    if (op.insert === 1) {\n      var attributes = (0, _clone2.default)(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = (0, _clone2.default)(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      var text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new _quillDelta2.default());\n}\n\nexports.default = Editor;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Range = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill:selection');\n\nvar Range = function Range(index) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  _classCallCheck(this, Range);\n\n  this.index = index;\n  this.length = length;\n};\n\nvar Selection = function () {\n  function Selection(scroll, emitter) {\n    var _this = this;\n\n    _classCallCheck(this, Selection);\n\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = _parchment2.default.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, function () {\n      if (!_this.mouseDown) {\n        setTimeout(_this.update.bind(_this, _emitter4.default.sources.USER), 1);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type, delta) {\n      if (type === _emitter4.default.events.TEXT_CHANGE && delta.length() > 0) {\n        _this.update(_emitter4.default.sources.SILENT);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_BEFORE_UPDATE, function () {\n      if (!_this.hasFocus()) return;\n      var native = _this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === _this.cursor.textNode) return; // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      _this.emitter.once(_emitter4.default.events.SCROLL_UPDATE, function () {\n        try {\n          _this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_OPTIMIZE, function (mutations, context) {\n      if (context.range) {\n        var _context$range = context.range,\n            startNode = _context$range.startNode,\n            startOffset = _context$range.startOffset,\n            endNode = _context$range.endNode,\n            endOffset = _context$range.endOffset;\n\n        _this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(_emitter4.default.sources.SILENT);\n  }\n\n  _createClass(Selection, [{\n    key: 'handleComposition',\n    value: function handleComposition() {\n      var _this2 = this;\n\n      this.root.addEventListener('compositionstart', function () {\n        _this2.composing = true;\n      });\n      this.root.addEventListener('compositionend', function () {\n        _this2.composing = false;\n        if (_this2.cursor.parent) {\n          var range = _this2.cursor.restore();\n          if (!range) return;\n          setTimeout(function () {\n            _this2.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n          }, 1);\n        }\n      });\n    }\n  }, {\n    key: 'handleDragging',\n    value: function handleDragging() {\n      var _this3 = this;\n\n      this.emitter.listenDOM('mousedown', document.body, function () {\n        _this3.mouseDown = true;\n      });\n      this.emitter.listenDOM('mouseup', document.body, function () {\n        _this3.mouseDown = false;\n        _this3.update(_emitter4.default.sources.USER);\n      });\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      if (this.hasFocus()) return;\n      this.root.focus();\n      this.setRange(this.savedRange);\n    }\n  }, {\n    key: 'format',\n    value: function format(_format, value) {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[_format]) return;\n      this.scroll.update();\n      var nativeRange = this.getNativeRange();\n      if (nativeRange == null || !nativeRange.native.collapsed || _parchment2.default.query(_format, _parchment2.default.Scope.BLOCK)) return;\n      if (nativeRange.start.node !== this.cursor.textNode) {\n        var blot = _parchment2.default.find(nativeRange.start.node, false);\n        if (blot == null) return;\n        // TODO Give blot ability to not split\n        if (blot instanceof _parchment2.default.Leaf) {\n          var after = blot.split(nativeRange.start.offset);\n          blot.parent.insertBefore(this.cursor, after);\n        } else {\n          blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n        }\n        this.cursor.attach();\n      }\n      this.cursor.format(_format, value);\n      this.scroll.optimize();\n      this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n      this.update();\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var scrollLength = this.scroll.length();\n      index = Math.min(index, scrollLength - 1);\n      length = Math.min(index + length, scrollLength - 1) - index;\n      var node = void 0,\n          _scroll$leaf = this.scroll.leaf(index),\n          _scroll$leaf2 = _slicedToArray(_scroll$leaf, 2),\n          leaf = _scroll$leaf2[0],\n          offset = _scroll$leaf2[1];\n      if (leaf == null) return null;\n\n      var _leaf$position = leaf.position(offset, true);\n\n      var _leaf$position2 = _slicedToArray(_leaf$position, 2);\n\n      node = _leaf$position2[0];\n      offset = _leaf$position2[1];\n\n      var range = document.createRange();\n      if (length > 0) {\n        range.setStart(node, offset);\n\n        var _scroll$leaf3 = this.scroll.leaf(index + length);\n\n        var _scroll$leaf4 = _slicedToArray(_scroll$leaf3, 2);\n\n        leaf = _scroll$leaf4[0];\n        offset = _scroll$leaf4[1];\n\n        if (leaf == null) return null;\n\n        var _leaf$position3 = leaf.position(offset, true);\n\n        var _leaf$position4 = _slicedToArray(_leaf$position3, 2);\n\n        node = _leaf$position4[0];\n        offset = _leaf$position4[1];\n\n        range.setEnd(node, offset);\n        return range.getBoundingClientRect();\n      } else {\n        var side = 'left';\n        var rect = void 0;\n        if (node instanceof Text) {\n          if (offset < node.data.length) {\n            range.setStart(node, offset);\n            range.setEnd(node, offset + 1);\n          } else {\n            range.setStart(node, offset - 1);\n            range.setEnd(node, offset);\n            side = 'right';\n          }\n          rect = range.getBoundingClientRect();\n        } else {\n          rect = leaf.domNode.getBoundingClientRect();\n          if (offset > 0) side = 'right';\n        }\n        return {\n          bottom: rect.top + rect.height,\n          height: rect.height,\n          left: rect[side],\n          right: rect[side],\n          top: rect.top,\n          width: 0\n        };\n      }\n    }\n  }, {\n    key: 'getNativeRange',\n    value: function getNativeRange() {\n      var selection = document.getSelection();\n      if (selection == null || selection.rangeCount <= 0) return null;\n      var nativeRange = selection.getRangeAt(0);\n      if (nativeRange == null) return null;\n      var range = this.normalizeNative(nativeRange);\n      debug.info('getNativeRange', range);\n      return range;\n    }\n  }, {\n    key: 'getRange',\n    value: function getRange() {\n      var normalized = this.getNativeRange();\n      if (normalized == null) return [null, null];\n      var range = this.normalizedToRange(normalized);\n      return [range, normalized];\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return document.activeElement === this.root;\n    }\n  }, {\n    key: 'normalizedToRange',\n    value: function normalizedToRange(range) {\n      var _this4 = this;\n\n      var positions = [[range.start.node, range.start.offset]];\n      if (!range.native.collapsed) {\n        positions.push([range.end.node, range.end.offset]);\n      }\n      var indexes = positions.map(function (position) {\n        var _position = _slicedToArray(position, 2),\n            node = _position[0],\n            offset = _position[1];\n\n        var blot = _parchment2.default.find(node, true);\n        var index = blot.offset(_this4.scroll);\n        if (offset === 0) {\n          return index;\n        } else if (blot instanceof _parchment2.default.Container) {\n          return index + blot.length();\n        } else {\n          return index + blot.index(node, offset);\n        }\n      });\n      var end = Math.min(Math.max.apply(Math, _toConsumableArray(indexes)), this.scroll.length() - 1);\n      var start = Math.min.apply(Math, [end].concat(_toConsumableArray(indexes)));\n      return new Range(start, end - start);\n    }\n  }, {\n    key: 'normalizeNative',\n    value: function normalizeNative(nativeRange) {\n      if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n        return null;\n      }\n      var range = {\n        start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n        end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n        native: nativeRange\n      };\n      [range.start, range.end].forEach(function (position) {\n        var node = position.node,\n            offset = position.offset;\n        while (!(node instanceof Text) && node.childNodes.length > 0) {\n          if (node.childNodes.length > offset) {\n            node = node.childNodes[offset];\n            offset = 0;\n          } else if (node.childNodes.length === offset) {\n            node = node.lastChild;\n            offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n          } else {\n            break;\n          }\n        }\n        position.node = node, position.offset = offset;\n      });\n      return range;\n    }\n  }, {\n    key: 'rangeToNative',\n    value: function rangeToNative(range) {\n      var _this5 = this;\n\n      var indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n      var args = [];\n      var scrollLength = this.scroll.length();\n      indexes.forEach(function (index, i) {\n        index = Math.min(scrollLength - 1, index);\n        var node = void 0,\n            _scroll$leaf5 = _this5.scroll.leaf(index),\n            _scroll$leaf6 = _slicedToArray(_scroll$leaf5, 2),\n            leaf = _scroll$leaf6[0],\n            offset = _scroll$leaf6[1];\n        var _leaf$position5 = leaf.position(offset, i !== 0);\n\n        var _leaf$position6 = _slicedToArray(_leaf$position5, 2);\n\n        node = _leaf$position6[0];\n        offset = _leaf$position6[1];\n\n        args.push(node, offset);\n      });\n      if (args.length < 2) {\n        args = args.concat(args);\n      }\n      return args;\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView(scrollingContainer) {\n      var range = this.lastRange;\n      if (range == null) return;\n      var bounds = this.getBounds(range.index, range.length);\n      if (bounds == null) return;\n      var limit = this.scroll.length() - 1;\n\n      var _scroll$line = this.scroll.line(Math.min(range.index, limit)),\n          _scroll$line2 = _slicedToArray(_scroll$line, 1),\n          first = _scroll$line2[0];\n\n      var last = first;\n      if (range.length > 0) {\n        var _scroll$line3 = this.scroll.line(Math.min(range.index + range.length, limit));\n\n        var _scroll$line4 = _slicedToArray(_scroll$line3, 1);\n\n        last = _scroll$line4[0];\n      }\n      if (first == null || last == null) return;\n      var scrollBounds = scrollingContainer.getBoundingClientRect();\n      if (bounds.top < scrollBounds.top) {\n        scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\n      } else if (bounds.bottom > scrollBounds.bottom) {\n        scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\n      }\n    }\n  }, {\n    key: 'setNativeRange',\n    value: function setNativeRange(startNode, startOffset) {\n      var endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n      var endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n      var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n      if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n        return;\n      }\n      var selection = document.getSelection();\n      if (selection == null) return;\n      if (startNode != null) {\n        if (!this.hasFocus()) this.root.focus();\n        var native = (this.getNativeRange() || {}).native;\n        if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n\n          if (startNode.tagName == \"BR\") {\n            startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n            startNode = startNode.parentNode;\n          }\n          if (endNode.tagName == \"BR\") {\n            endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n            endNode = endNode.parentNode;\n          }\n          var range = document.createRange();\n          range.setStart(startNode, startOffset);\n          range.setEnd(endNode, endOffset);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      } else {\n        selection.removeAllRanges();\n        this.root.blur();\n        document.body.focus(); // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n      }\n    }\n  }, {\n    key: 'setRange',\n    value: function setRange(range) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      if (typeof force === 'string') {\n        source = force;\n        force = false;\n      }\n      debug.info('setRange', range);\n      if (range != null) {\n        var args = this.rangeToNative(range);\n        this.setNativeRange.apply(this, _toConsumableArray(args).concat([force]));\n      } else {\n        this.setNativeRange(null);\n      }\n      this.update(source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var oldRange = this.lastRange;\n\n      var _getRange = this.getRange(),\n          _getRange2 = _slicedToArray(_getRange, 2),\n          lastRange = _getRange2[0],\n          nativeRange = _getRange2[1];\n\n      this.lastRange = lastRange;\n      if (this.lastRange != null) {\n        this.savedRange = this.lastRange;\n      }\n      if (!(0, _deepEqual2.default)(oldRange, this.lastRange)) {\n        var _emitter;\n\n        if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n          this.cursor.restore();\n        }\n        var args = [_emitter4.default.events.SELECTION_CHANGE, (0, _clone2.default)(this.lastRange), (0, _clone2.default)(oldRange), source];\n        (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n        if (source !== _emitter4.default.sources.SILENT) {\n          var _emitter2;\n\n          (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n        }\n      }\n    }\n  }]);\n\n  return Selection;\n}();\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\nexports.Range = Range;\nexports.default = Selection;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Break = function (_Parchment$Embed) {\n  _inherits(Break, _Parchment$Embed);\n\n  function Break() {\n    _classCallCheck(this, Break);\n\n    return _possibleConstructorReturn(this, (Break.__proto__ || Object.getPrototypeOf(Break)).apply(this, arguments));\n  }\n\n  _createClass(Break, [{\n    key: 'insertInto',\n    value: function insertInto(parent, ref) {\n      if (parent.children.length === 0) {\n        _get(Break.prototype.__proto__ || Object.getPrototypeOf(Break.prototype), 'insertInto', this).call(this, parent, ref);\n      } else {\n        this.remove();\n      }\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return 0;\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }], [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  return Break;\n}(_parchment2.default.Embed);\n\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexports.default = Break;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = __webpack_require__(44);\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar store_1 = __webpack_require__(31);\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        var _a;\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\nIterator.prototype.rest = function () {\n  if (!this.hasNext()) {\n    return [];\n  } else if (this.offset === 0) {\n    return this.ops.slice(this.index);\n  } else {\n    var offset = this.offset;\n    var index = this.index;\n    var next = this.next();\n    var rest = this.ops.slice(this.index);\n    this.offset = offset;\n    this.index = index;\n    return [next].concat(rest);\n  }\n};\n\n\nmodule.exports = lib;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nvar clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction isLine(blot) {\n  return blot instanceof _block2.default || blot instanceof _block.BlockEmbed;\n}\n\nvar Scroll = function (_Parchment$Scroll) {\n  _inherits(Scroll, _Parchment$Scroll);\n\n  function Scroll(domNode, config) {\n    _classCallCheck(this, Scroll);\n\n    var _this = _possibleConstructorReturn(this, (Scroll.__proto__ || Object.getPrototypeOf(Scroll)).call(this, domNode));\n\n    _this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      _this.whitelist = config.whitelist.reduce(function (whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    _this.domNode.addEventListener('DOMNodeInserted', function () {});\n    _this.optimize();\n    _this.enable();\n    return _this;\n  }\n\n  _createClass(Scroll, [{\n    key: 'batchStart',\n    value: function batchStart() {\n      this.batch = true;\n    }\n  }, {\n    key: 'batchEnd',\n    value: function batchEnd() {\n      this.batch = false;\n      this.optimize();\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      var _line = this.line(index),\n          _line2 = _slicedToArray(_line, 2),\n          first = _line2[0],\n          offset = _line2[1];\n\n      var _line3 = this.line(index + length),\n          _line4 = _slicedToArray(_line3, 1),\n          last = _line4[0];\n\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'deleteAt', this).call(this, index, length);\n      if (last != null && first !== last && offset > 0) {\n        if (first instanceof _block.BlockEmbed || last instanceof _block.BlockEmbed) {\n          this.optimize();\n          return;\n        }\n        if (first instanceof _code2.default) {\n          var newlineIndex = first.newlineIndex(first.length(), true);\n          if (newlineIndex > -1) {\n            first = first.split(newlineIndex + 1);\n            if (first === last) {\n              this.optimize();\n              return;\n            }\n          }\n        } else if (last instanceof _code2.default) {\n          var _newlineIndex = last.newlineIndex(0);\n          if (_newlineIndex > -1) {\n            last.split(_newlineIndex + 1);\n          }\n        }\n        var ref = last.children.head instanceof _break2.default ? null : last.children.head;\n        first.moveChildren(last, ref);\n        first.remove();\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.domNode.setAttribute('contenteditable', enabled);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, format, value) {\n      if (this.whitelist != null && !this.whitelist[format]) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'formatAt', this).call(this, index, length, format, value);\n      this.optimize();\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n      if (index >= this.length()) {\n        if (def == null || _parchment2.default.query(value, _parchment2.default.Scope.BLOCK) == null) {\n          var blot = _parchment2.default.create(this.statics.defaultChild);\n          this.appendChild(blot);\n          if (def == null && value.endsWith('\\n')) {\n            value = value.slice(0, -1);\n          }\n          blot.insertAt(0, value, def);\n        } else {\n          var embed = _parchment2.default.create(value, def);\n          this.appendChild(embed);\n        }\n      } else {\n        _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot.statics.scope === _parchment2.default.Scope.INLINE_BLOT) {\n        var wrapper = _parchment2.default.create(this.statics.defaultChild);\n        wrapper.appendChild(blot);\n        blot = wrapper;\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertBefore', this).call(this, blot, ref);\n    }\n  }, {\n    key: 'leaf',\n    value: function leaf(index) {\n      return this.path(index).pop() || [null, -1];\n    }\n  }, {\n    key: 'line',\n    value: function line(index) {\n      if (index === this.length()) {\n        return this.line(index - 1);\n      }\n      return this.descendant(isLine, index);\n    }\n  }, {\n    key: 'lines',\n    value: function lines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      var getLines = function getLines(blot, index, length) {\n        var lines = [],\n            lengthLeft = length;\n        blot.children.forEachAt(index, length, function (child, index, length) {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof _parchment2.default.Container) {\n            lines = lines.concat(getLines(child, index, lengthLeft));\n          }\n          lengthLeft -= length;\n        });\n        return lines;\n      };\n      return getLines(this, index, length);\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize() {\n      var mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.batch === true) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'optimize', this).call(this, mutations, context);\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_OPTIMIZE, mutations, context);\n      }\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'path', this).call(this, index).slice(1); // Exclude self\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations) {\n      if (this.batch === true) return;\n      var source = _emitter2.default.sources.USER;\n      if (typeof mutations === 'string') {\n        source = mutations;\n      }\n      if (!Array.isArray(mutations)) {\n        mutations = this.observer.takeRecords();\n      }\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_BEFORE_UPDATE, source, mutations);\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'update', this).call(this, mutations.concat([])); // pass copy\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_UPDATE, source, mutations);\n      }\n    }\n  }]);\n\n  return Scroll;\n}(_parchment2.default.Scroll);\n\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [_block2.default, _block.BlockEmbed, _container2.default];\n\nexports.default = Scroll;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SHORTKEY = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:keyboard');\n\nvar SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nvar Keyboard = function (_Module) {\n  _inherits(Keyboard, _Module);\n\n  _createClass(Keyboard, null, [{\n    key: 'match',\n    value: function match(evt, binding) {\n      binding = normalize(binding);\n      if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function (key) {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })) {\n        return false;\n      }\n      return binding.key === (evt.which || evt.keyCode);\n    }\n  }]);\n\n  function Keyboard(quill, options) {\n    _classCallCheck(this, Keyboard);\n\n    var _this = _possibleConstructorReturn(this, (Keyboard.__proto__ || Object.getPrototypeOf(Keyboard)).call(this, quill, options));\n\n    _this.bindings = {};\n    Object.keys(_this.options.bindings).forEach(function (name) {\n      if (name === 'list autofill' && quill.scroll.whitelist != null && !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (_this.options.bindings[name]) {\n        _this.addBinding(_this.options.bindings[name]);\n      }\n    });\n    _this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    _this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function () {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null }, { collapsed: true, offset: 0 }, handleBackspace);\n    _this.listen();\n    return _this;\n  }\n\n  _createClass(Keyboard, [{\n    key: 'addBinding',\n    value: function addBinding(key) {\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var binding = normalize(key);\n      if (binding == null || binding.key == null) {\n        return debug.warn('Attempted to add invalid keyboard binding', binding);\n      }\n      if (typeof context === 'function') {\n        context = { handler: context };\n      }\n      if (typeof handler === 'function') {\n        handler = { handler: handler };\n      }\n      binding = (0, _extend2.default)(binding, context, handler);\n      this.bindings[binding.key] = this.bindings[binding.key] || [];\n      this.bindings[binding.key].push(binding);\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      var _this2 = this;\n\n      this.quill.root.addEventListener('keydown', function (evt) {\n        if (evt.defaultPrevented) return;\n        var which = evt.which || evt.keyCode;\n        var bindings = (_this2.bindings[which] || []).filter(function (binding) {\n          return Keyboard.match(evt, binding);\n        });\n        if (bindings.length === 0) return;\n        var range = _this2.quill.getSelection();\n        if (range == null || !_this2.quill.hasFocus()) return;\n\n        var _quill$getLine = _this2.quill.getLine(range.index),\n            _quill$getLine2 = _slicedToArray(_quill$getLine, 2),\n            line = _quill$getLine2[0],\n            offset = _quill$getLine2[1];\n\n        var _quill$getLeaf = _this2.quill.getLeaf(range.index),\n            _quill$getLeaf2 = _slicedToArray(_quill$getLeaf, 2),\n            leafStart = _quill$getLeaf2[0],\n            offsetStart = _quill$getLeaf2[1];\n\n        var _ref = range.length === 0 ? [leafStart, offsetStart] : _this2.quill.getLeaf(range.index + range.length),\n            _ref2 = _slicedToArray(_ref, 2),\n            leafEnd = _ref2[0],\n            offsetEnd = _ref2[1];\n\n        var prefixText = leafStart instanceof _parchment2.default.Text ? leafStart.value().slice(0, offsetStart) : '';\n        var suffixText = leafEnd instanceof _parchment2.default.Text ? leafEnd.value().slice(offsetEnd) : '';\n        var curContext = {\n          collapsed: range.length === 0,\n          empty: range.length === 0 && line.length() <= 1,\n          format: _this2.quill.getFormat(range),\n          offset: offset,\n          prefix: prefixText,\n          suffix: suffixText\n        };\n        var prevented = bindings.some(function (binding) {\n          if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n          if (binding.empty != null && binding.empty !== curContext.empty) return false;\n          if (binding.offset != null && binding.offset !== curContext.offset) return false;\n          if (Array.isArray(binding.format)) {\n            // any format is present\n            if (binding.format.every(function (name) {\n              return curContext.format[name] == null;\n            })) {\n              return false;\n            }\n          } else if (_typeof(binding.format) === 'object') {\n            // all formats must match\n            if (!Object.keys(binding.format).every(function (name) {\n              if (binding.format[name] === true) return curContext.format[name] != null;\n              if (binding.format[name] === false) return curContext.format[name] == null;\n              return (0, _deepEqual2.default)(binding.format[name], curContext.format[name]);\n            })) {\n              return false;\n            }\n          }\n          if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n          if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n          return binding.handler.call(_this2, range, curContext) !== true;\n        });\n        if (prevented) {\n          evt.preventDefault();\n        }\n      });\n    }\n  }]);\n\n  return Keyboard;\n}(_module2.default);\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold': makeFormatHandler('bold'),\n    'italic': makeFormatHandler('italic'),\n    'underline': makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', _quill2.default.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function handler(range) {\n        this.quill.deleteText(range.index - 1, 1, _quill2.default.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function handler(range) {\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function handler(range, context) {\n        this.quill.format('list', false, _quill2.default.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function handler(range) {\n        var _quill$getLine3 = this.quill.getLine(range.index),\n            _quill$getLine4 = _slicedToArray(_quill$getLine3, 2),\n            line = _quill$getLine4[0],\n            offset = _quill$getLine4[1];\n\n        var formats = (0, _extend2.default)({}, line.formats(), { list: 'checked' });\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', formats).retain(line.length() - offset - 1).retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function handler(range, context) {\n        var _quill$getLine5 = this.quill.getLine(range.index),\n            _quill$getLine6 = _slicedToArray(_quill$getLine5, 2),\n            line = _quill$getLine6[0],\n            offset = _quill$getLine6[1];\n\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', context.format).retain(line.length() - offset - 1).retain(1, { header: null });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function handler(range, context) {\n        var length = context.prefix.length;\n\n        var _quill$getLine7 = this.quill.getLine(range.index),\n            _quill$getLine8 = _slicedToArray(_quill$getLine7, 2),\n            line = _quill$getLine8[0],\n            offset = _quill$getLine8[1];\n\n        if (offset > length) return true;\n        var value = void 0;\n        switch (context.prefix.trim()) {\n          case '[]':case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index - offset).delete(length + 1).retain(line.length() - 2 - offset).retain(1, { list: value });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, _quill2.default.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function handler(range) {\n        var _quill$getLine9 = this.quill.getLine(range.index),\n            _quill$getLine10 = _slicedToArray(_quill$getLine9, 2),\n            line = _quill$getLine10[0],\n            offset = _quill$getLine10[1];\n\n        var delta = new _quillDelta2.default().retain(range.index + line.length() - offset - 2).retain(1, { 'code-block': null }).delete(1);\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  var _ref3;\n\n  var where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return _ref3 = {\n    key: key,\n    shiftKey: shiftKey,\n    altKey: null\n  }, _defineProperty(_ref3, where, /^$/), _defineProperty(_ref3, 'handler', function handler(range) {\n    var index = range.index;\n    if (key === Keyboard.keys.RIGHT) {\n      index += range.length + 1;\n    }\n\n    var _quill$getLeaf3 = this.quill.getLeaf(index),\n        _quill$getLeaf4 = _slicedToArray(_quill$getLeaf3, 1),\n        leaf = _quill$getLeaf4[0];\n\n    if (!(leaf instanceof _parchment2.default.Embed)) return true;\n    if (key === Keyboard.keys.LEFT) {\n      if (shiftKey) {\n        this.quill.setSelection(range.index - 1, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index - 1, _quill2.default.sources.USER);\n      }\n    } else {\n      if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, _quill2.default.sources.USER);\n      }\n    }\n    return false;\n  }), _ref3;\n}\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n\n  var _quill$getLine11 = this.quill.getLine(range.index),\n      _quill$getLine12 = _slicedToArray(_quill$getLine11, 1),\n      line = _quill$getLine12[0];\n\n  var formats = {};\n  if (context.offset === 0) {\n    var _quill$getLine13 = this.quill.getLine(range.index - 1),\n        _quill$getLine14 = _slicedToArray(_quill$getLine13, 1),\n        prev = _quill$getLine14[0];\n\n    if (prev != null && prev.length() > 1) {\n      var curFormats = line.formats();\n      var prevFormats = this.quill.getFormat(range.index - 1, 1);\n      formats = _op2.default.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  var length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index - length, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index - length, length, formats, _quill2.default.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  var length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  var formats = {},\n      nextLength = 0;\n\n  var _quill$getLine15 = this.quill.getLine(range.index),\n      _quill$getLine16 = _slicedToArray(_quill$getLine15, 1),\n      line = _quill$getLine16[0];\n\n  if (context.offset >= line.length() - 1) {\n    var _quill$getLine17 = this.quill.getLine(range.index + 1),\n        _quill$getLine18 = _slicedToArray(_quill$getLine17, 1),\n        next = _quill$getLine18[0];\n\n    if (next) {\n      var curFormats = line.formats();\n      var nextFormats = this.quill.getFormat(range.index, 1);\n      formats = _op2.default.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, _quill2.default.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  var lines = this.quill.getLines(range);\n  var formats = {};\n  if (lines.length > 1) {\n    var firstFormats = lines[0].formats();\n    var lastFormats = lines[lines.length - 1].formats();\n    formats = _op2.default.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, _quill2.default.sources.USER);\n  }\n  this.quill.setSelection(range.index, _quill2.default.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  var _this3 = this;\n\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length); // So we do not trigger text-change\n  }\n  var lineFormats = Object.keys(context.format).reduce(function (lineFormats, format) {\n    if (_parchment2.default.query(format, _parchment2.default.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, _quill2.default.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach(function (name) {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    _this3.quill.format(name, context.format[name], _quill2.default.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler: function handler(range) {\n      var CodeBlock = _parchment2.default.query('code-block');\n      var index = range.index,\n          length = range.length;\n\n      var _quill$scroll$descend = this.quill.scroll.descendant(CodeBlock, index),\n          _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n          block = _quill$scroll$descend2[0],\n          offset = _quill$scroll$descend2[1];\n\n      if (block == null) return;\n      var scrollIndex = this.quill.getIndex(block);\n      var start = block.newlineIndex(offset, true) + 1;\n      var end = block.newlineIndex(scrollIndex + offset + length);\n      var lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach(function (line, i) {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(_quill2.default.sources.USER);\n      this.quill.setSelection(index, length, _quill2.default.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function handler(range, context) {\n      this.quill.format(format, !context.format[format], _quill2.default.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if ((typeof binding === 'undefined' ? 'undefined' : _typeof(binding)) === 'object') {\n    binding = (0, _clone2.default)(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\nexports.default = Keyboard;\nexports.SHORTKEY = SHORTKEY;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Cursor = function (_Parchment$Embed) {\n  _inherits(Cursor, _Parchment$Embed);\n\n  _createClass(Cursor, null, [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  function Cursor(domNode, selection) {\n    _classCallCheck(this, Cursor);\n\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this, domNode));\n\n    _this.selection = selection;\n    _this.textNode = document.createTextNode(Cursor.CONTENTS);\n    _this.domNode.appendChild(_this.textNode);\n    _this._length = 0;\n    return _this;\n  }\n\n  _createClass(Cursor, [{\n    key: 'detach',\n    value: function detach() {\n      // super.detach() will also clear domNode.__blot\n      if (this.parent != null) this.parent.removeChild(this);\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (this._length !== 0) {\n        return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'format', this).call(this, name, value);\n      }\n      var target = this,\n          index = 0;\n      while (target != null && target.statics.scope !== _parchment2.default.Scope.BLOCK_BLOT) {\n        index += target.offset(target.parent);\n        target = target.parent;\n      }\n      if (target != null) {\n        this._length = Cursor.CONTENTS.length;\n        target.optimize();\n        target.formatAt(index, Cursor.CONTENTS.length, name, value);\n        this._length = 0;\n      }\n    }\n  }, {\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.textNode) return 0;\n      return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return this._length;\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      return [this.textNode, this.textNode.data.length];\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'remove', this).call(this);\n      this.parent = null;\n    }\n  }, {\n    key: 'restore',\n    value: function restore() {\n      if (this.selection.composing || this.parent == null) return;\n      var textNode = this.textNode;\n      var range = this.selection.getNativeRange();\n      var restoreText = void 0,\n          start = void 0,\n          end = void 0;\n      if (range != null && range.start.node === textNode && range.end.node === textNode) {\n        var _ref = [textNode, range.start.offset, range.end.offset];\n        restoreText = _ref[0];\n        start = _ref[1];\n        end = _ref[2];\n      }\n      // Link format will insert text outside of anchor tag\n      while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n        this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n      }\n      if (this.textNode.data !== Cursor.CONTENTS) {\n        var text = this.textNode.data.split(Cursor.CONTENTS).join('');\n        if (this.next instanceof _text2.default) {\n          restoreText = this.next.domNode;\n          this.next.insertAt(0, text);\n          this.textNode.data = Cursor.CONTENTS;\n        } else {\n          this.textNode.data = text;\n          this.parent.insertBefore(_parchment2.default.create(this.textNode), this);\n          this.textNode = document.createTextNode(Cursor.CONTENTS);\n          this.domNode.appendChild(this.textNode);\n        }\n      }\n      this.remove();\n      if (start != null) {\n        var _map = [start, end].map(function (offset) {\n          return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n        });\n\n        var _map2 = _slicedToArray(_map, 2);\n\n        start = _map2[0];\n        end = _map2[1];\n\n        return {\n          startNode: restoreText,\n          startOffset: start,\n          endNode: restoreText,\n          endOffset: end\n        };\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      if (mutations.some(function (mutation) {\n        return mutation.type === 'characterData' && mutation.target === _this2.textNode;\n      })) {\n        var range = this.restore();\n        if (range) context.range = range;\n      }\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }]);\n\n  return Cursor;\n}(_parchment2.default.Embed);\n\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\n\n\nexports.default = Cursor;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Container = function (_Parchment$Container) {\n  _inherits(Container, _Parchment$Container);\n\n  function Container() {\n    _classCallCheck(this, Container);\n\n    return _possibleConstructorReturn(this, (Container.__proto__ || Object.getPrototypeOf(Container)).apply(this, arguments));\n  }\n\n  return Container;\n}(_parchment2.default.Container);\n\nContainer.allowedChildren = [_block2.default, _block.BlockEmbed, Container];\n\nexports.default = Container;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorStyle = exports.ColorClass = exports.ColorAttributor = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorAttributor = function (_Parchment$Attributor) {\n  _inherits(ColorAttributor, _Parchment$Attributor);\n\n  function ColorAttributor() {\n    _classCallCheck(this, ColorAttributor);\n\n    return _possibleConstructorReturn(this, (ColorAttributor.__proto__ || Object.getPrototypeOf(ColorAttributor)).apply(this, arguments));\n  }\n\n  _createClass(ColorAttributor, [{\n    key: 'value',\n    value: function value(domNode) {\n      var value = _get(ColorAttributor.prototype.__proto__ || Object.getPrototypeOf(ColorAttributor.prototype), 'value', this).call(this, domNode);\n      if (!value.startsWith('rgb(')) return value;\n      value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n      return '#' + value.split(',').map(function (component) {\n        return ('00' + parseInt(component).toString(16)).slice(-2);\n      }).join('');\n    }\n  }]);\n\n  return ColorAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar ColorClass = new _parchment2.default.Attributor.Class('color', 'ql-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar ColorStyle = new ColorAttributor('color', 'color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.ColorAttributor = ColorAttributor;\nexports.ColorClass = ColorClass;\nexports.ColorStyle = ColorStyle;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitize = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Link = function (_Inline) {\n  _inherits(Link, _Inline);\n\n  function Link() {\n    _classCallCheck(this, Link);\n\n    return _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).apply(this, arguments));\n  }\n\n  _createClass(Link, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name !== this.statics.blotName || !value) return _get(Link.prototype.__proto__ || Object.getPrototypeOf(Link.prototype), 'format', this).call(this, name, value);\n      value = this.constructor.sanitize(value);\n      this.domNode.setAttribute('href', value);\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Link.__proto__ || Object.getPrototypeOf(Link), 'create', this).call(this, value);\n      value = this.sanitize(value);\n      node.setAttribute('href', value);\n      node.setAttribute('rel', 'noopener noreferrer');\n      node.setAttribute('target', '_blank');\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.getAttribute('href');\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n    }\n  }]);\n\n  return Link;\n}(_inline2.default);\n\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\nfunction _sanitize(url, protocols) {\n  var anchor = document.createElement('a');\n  anchor.href = url;\n  var protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexports.default = Link;\nexports.sanitize = _sanitize;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _dropdown = __webpack_require__(107);\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, !(element.getAttribute(attribute) === 'true'));\n}\n\nvar Picker = function () {\n  function Picker(select) {\n    var _this = this;\n\n    _classCallCheck(this, Picker);\n\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', function () {\n      _this.togglePicker();\n    });\n    this.label.addEventListener('keydown', function (event) {\n      switch (event.keyCode) {\n        // Allows the \"Enter\" key to open the picker\n        case _keyboard2.default.keys.ENTER:\n          _this.togglePicker();\n          break;\n\n        // Allows the \"Escape\" key to close the picker\n        case _keyboard2.default.keys.ESCAPE:\n          _this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  _createClass(Picker, [{\n    key: 'togglePicker',\n    value: function togglePicker() {\n      this.container.classList.toggle('ql-expanded');\n      // Toggle aria-expanded and aria-hidden to make the picker accessible\n      toggleAriaAttribute(this.label, 'aria-expanded');\n      toggleAriaAttribute(this.options, 'aria-hidden');\n    }\n  }, {\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var _this2 = this;\n\n      var item = document.createElement('span');\n      item.tabIndex = '0';\n      item.setAttribute('role', 'button');\n\n      item.classList.add('ql-picker-item');\n      if (option.hasAttribute('value')) {\n        item.setAttribute('data-value', option.getAttribute('value'));\n      }\n      if (option.textContent) {\n        item.setAttribute('data-label', option.textContent);\n      }\n      item.addEventListener('click', function () {\n        _this2.selectItem(item, true);\n      });\n      item.addEventListener('keydown', function (event) {\n        switch (event.keyCode) {\n          // Allows the \"Enter\" key to select an item\n          case _keyboard2.default.keys.ENTER:\n            _this2.selectItem(item, true);\n            event.preventDefault();\n            break;\n\n          // Allows the \"Escape\" key to close the picker\n          case _keyboard2.default.keys.ESCAPE:\n            _this2.escape();\n            event.preventDefault();\n            break;\n          default:\n        }\n      });\n\n      return item;\n    }\n  }, {\n    key: 'buildLabel',\n    value: function buildLabel() {\n      var label = document.createElement('span');\n      label.classList.add('ql-picker-label');\n      label.innerHTML = _dropdown2.default;\n      label.tabIndex = '0';\n      label.setAttribute('role', 'button');\n      label.setAttribute('aria-expanded', 'false');\n      this.container.appendChild(label);\n      return label;\n    }\n  }, {\n    key: 'buildOptions',\n    value: function buildOptions() {\n      var _this3 = this;\n\n      var options = document.createElement('span');\n      options.classList.add('ql-picker-options');\n\n      // Don't want screen readers to read this until options are visible\n      options.setAttribute('aria-hidden', 'true');\n      options.tabIndex = '-1';\n\n      // Need a unique id for aria-controls\n      options.id = 'ql-picker-options-' + optionsCounter;\n      optionsCounter += 1;\n      this.label.setAttribute('aria-controls', options.id);\n\n      this.options = options;\n\n      [].slice.call(this.select.options).forEach(function (option) {\n        var item = _this3.buildItem(option);\n        options.appendChild(item);\n        if (option.selected === true) {\n          _this3.selectItem(item);\n        }\n      });\n      this.container.appendChild(options);\n    }\n  }, {\n    key: 'buildPicker',\n    value: function buildPicker() {\n      var _this4 = this;\n\n      [].slice.call(this.select.attributes).forEach(function (item) {\n        _this4.container.setAttribute(item.name, item.value);\n      });\n      this.container.classList.add('ql-picker');\n      this.label = this.buildLabel();\n      this.buildOptions();\n    }\n  }, {\n    key: 'escape',\n    value: function escape() {\n      var _this5 = this;\n\n      // Close menu and return focus to trigger label\n      this.close();\n      // Need setTimeout for accessibility to ensure that the browser executes\n      // focus on the next process thread and after any DOM content changes\n      setTimeout(function () {\n        return _this5.label.focus();\n      }, 1);\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      this.container.classList.remove('ql-expanded');\n      this.label.setAttribute('aria-expanded', 'false');\n      this.options.setAttribute('aria-hidden', 'true');\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item) {\n      var trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var selected = this.container.querySelector('.ql-selected');\n      if (item === selected) return;\n      if (selected != null) {\n        selected.classList.remove('ql-selected');\n      }\n      if (item == null) return;\n      item.classList.add('ql-selected');\n      this.select.selectedIndex = [].indexOf.call(item.parentNode.children, item);\n      if (item.hasAttribute('data-value')) {\n        this.label.setAttribute('data-value', item.getAttribute('data-value'));\n      } else {\n        this.label.removeAttribute('data-value');\n      }\n      if (item.hasAttribute('data-label')) {\n        this.label.setAttribute('data-label', item.getAttribute('data-label'));\n      } else {\n        this.label.removeAttribute('data-label');\n      }\n      if (trigger) {\n        if (typeof Event === 'function') {\n          this.select.dispatchEvent(new Event('change'));\n        } else if ((typeof Event === 'undefined' ? 'undefined' : _typeof(Event)) === 'object') {\n          // IE11\n          var event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n          this.select.dispatchEvent(event);\n        }\n        this.close();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var option = void 0;\n      if (this.select.selectedIndex > -1) {\n        var item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n        option = this.select.options[this.select.selectedIndex];\n        this.selectItem(item);\n      } else {\n        this.selectItem(null);\n      }\n      var isActive = option != null && option !== this.select.querySelector('option[selected]');\n      this.label.classList.toggle('ql-active', isActive);\n    }\n  }]);\n\n  return Picker;\n}();\n\nexports.default = Picker;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _scroll = __webpack_require__(22);\n\nvar _scroll2 = _interopRequireDefault(_scroll);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _clipboard = __webpack_require__(55);\n\nvar _clipboard2 = _interopRequireDefault(_clipboard);\n\nvar _history = __webpack_require__(42);\n\nvar _history2 = _interopRequireDefault(_history);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_quill2.default.register({\n  'blots/block': _block2.default,\n  'blots/block/embed': _block.BlockEmbed,\n  'blots/break': _break2.default,\n  'blots/container': _container2.default,\n  'blots/cursor': _cursor2.default,\n  'blots/embed': _embed2.default,\n  'blots/inline': _inline2.default,\n  'blots/scroll': _scroll2.default,\n  'blots/text': _text2.default,\n\n  'modules/clipboard': _clipboard2.default,\n  'modules/history': _history2.default,\n  'modules/keyboard': _keyboard2.default\n});\n\n_parchment2.default.register(_block2.default, _break2.default, _cursor2.default, _inline2.default, _scroll2.default, _text2.default);\n\nexports.default = _quill2.default;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent = Registry.create(this.statics.scope);\n            blot.wrap(parent);\n            parent.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar Registry = __webpack_require__(1);\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Theme = function () {\n  function Theme(quill, options) {\n    _classCallCheck(this, Theme);\n\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  _createClass(Theme, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      Object.keys(this.options.modules).forEach(function (name) {\n        if (_this.modules[name] == null) {\n          _this.addModule(name);\n        }\n      });\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(name) {\n      var moduleClass = this.quill.constructor.import('modules/' + name);\n      this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n      return this.modules[name];\n    }\n  }]);\n\n  return Theme;\n}();\n\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\nexports.default = Theme;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GUARD_TEXT = '\\uFEFF';\n\nvar Embed = function (_Parchment$Embed) {\n  _inherits(Embed, _Parchment$Embed);\n\n  function Embed(node) {\n    _classCallCheck(this, Embed);\n\n    var _this = _possibleConstructorReturn(this, (Embed.__proto__ || Object.getPrototypeOf(Embed)).call(this, node));\n\n    _this.contentNode = document.createElement('span');\n    _this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(_this.domNode.childNodes).forEach(function (childNode) {\n      _this.contentNode.appendChild(childNode);\n    });\n    _this.leftGuard = document.createTextNode(GUARD_TEXT);\n    _this.rightGuard = document.createTextNode(GUARD_TEXT);\n    _this.domNode.appendChild(_this.leftGuard);\n    _this.domNode.appendChild(_this.contentNode);\n    _this.domNode.appendChild(_this.rightGuard);\n    return _this;\n  }\n\n  _createClass(Embed, [{\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.leftGuard) return 0;\n      if (node === this.rightGuard) return 1;\n      return _get(Embed.prototype.__proto__ || Object.getPrototypeOf(Embed.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'restore',\n    value: function restore(node) {\n      var range = void 0,\n          textNode = void 0;\n      var text = node.data.split(GUARD_TEXT).join('');\n      if (node === this.leftGuard) {\n        if (this.prev instanceof _text2.default) {\n          var prevLength = this.prev.length();\n          this.prev.insertAt(prevLength, text);\n          range = {\n            startNode: this.prev.domNode,\n            startOffset: prevLength + text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      } else if (node === this.rightGuard) {\n        if (this.next instanceof _text2.default) {\n          this.next.insertAt(0, text);\n          range = {\n            startNode: this.next.domNode,\n            startOffset: text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this.next);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      }\n      node.data = GUARD_TEXT;\n      return range;\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'characterData' && (mutation.target === _this2.leftGuard || mutation.target === _this2.rightGuard)) {\n          var range = _this2.restore(mutation.target);\n          if (range) context.range = range;\n        }\n      });\n    }\n  }]);\n\n  return Embed;\n}(_parchment2.default.Embed);\n\nexports.default = Embed;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlignStyle = exports.AlignClass = exports.AlignAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nvar AlignAttribute = new _parchment2.default.Attributor.Attribute('align', 'align', config);\nvar AlignClass = new _parchment2.default.Attributor.Class('align', 'ql-align', config);\nvar AlignStyle = new _parchment2.default.Attributor.Style('align', 'text-align', config);\n\nexports.AlignAttribute = AlignAttribute;\nexports.AlignClass = AlignClass;\nexports.AlignStyle = AlignStyle;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BackgroundStyle = exports.BackgroundClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _color = __webpack_require__(26);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BackgroundClass = new _parchment2.default.Attributor.Class('background', 'ql-bg', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar BackgroundStyle = new _color.ColorAttributor('background', 'background-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.BackgroundClass = BackgroundClass;\nexports.BackgroundStyle = BackgroundStyle;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DirectionStyle = exports.DirectionClass = exports.DirectionAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nvar DirectionAttribute = new _parchment2.default.Attributor.Attribute('direction', 'dir', config);\nvar DirectionClass = new _parchment2.default.Attributor.Class('direction', 'ql-direction', config);\nvar DirectionStyle = new _parchment2.default.Attributor.Style('direction', 'direction', config);\n\nexports.DirectionAttribute = DirectionAttribute;\nexports.DirectionClass = DirectionClass;\nexports.DirectionStyle = DirectionStyle;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontClass = exports.FontStyle = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar config = {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nvar FontClass = new _parchment2.default.Attributor.Class('font', 'ql-font', config);\n\nvar FontStyleAttributor = function (_Parchment$Attributor) {\n  _inherits(FontStyleAttributor, _Parchment$Attributor);\n\n  function FontStyleAttributor() {\n    _classCallCheck(this, FontStyleAttributor);\n\n    return _possibleConstructorReturn(this, (FontStyleAttributor.__proto__ || Object.getPrototypeOf(FontStyleAttributor)).apply(this, arguments));\n  }\n\n  _createClass(FontStyleAttributor, [{\n    key: 'value',\n    value: function value(node) {\n      return _get(FontStyleAttributor.prototype.__proto__ || Object.getPrototypeOf(FontStyleAttributor.prototype), 'value', this).call(this, node).replace(/[\"']/g, '');\n    }\n  }]);\n\n  return FontStyleAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexports.FontStyle = FontStyle;\nexports.FontClass = FontClass;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SizeStyle = exports.SizeClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SizeClass = new _parchment2.default.Attributor.Class('size', 'ql-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nvar SizeStyle = new _parchment2.default.Attributor.Style('size', 'font-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexports.SizeClass = SizeClass;\nexports.SizeStyle = SizeStyle;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  'align': {\n    '': __webpack_require__(76),\n    'center': __webpack_require__(77),\n    'right': __webpack_require__(78),\n    'justify': __webpack_require__(79)\n  },\n  'background': __webpack_require__(80),\n  'blockquote': __webpack_require__(81),\n  'bold': __webpack_require__(82),\n  'clean': __webpack_require__(83),\n  'code': __webpack_require__(58),\n  'code-block': __webpack_require__(58),\n  'color': __webpack_require__(84),\n  'direction': {\n    '': __webpack_require__(85),\n    'rtl': __webpack_require__(86)\n  },\n  'float': {\n    'center': __webpack_require__(87),\n    'full': __webpack_require__(88),\n    'left': __webpack_require__(89),\n    'right': __webpack_require__(90)\n  },\n  'formula': __webpack_require__(91),\n  'header': {\n    '1': __webpack_require__(92),\n    '2': __webpack_require__(93)\n  },\n  'italic': __webpack_require__(94),\n  'image': __webpack_require__(95),\n  'indent': {\n    '+1': __webpack_require__(96),\n    '-1': __webpack_require__(97)\n  },\n  'link': __webpack_require__(98),\n  'list': {\n    'ordered': __webpack_require__(99),\n    'bullet': __webpack_require__(100),\n    'check': __webpack_require__(101)\n  },\n  'script': {\n    'sub': __webpack_require__(102),\n    'super': __webpack_require__(103)\n  },\n  'strike': __webpack_require__(104),\n  'underline': __webpack_require__(105),\n  'video': __webpack_require__(106)\n};\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLastChangeIndex = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar History = function (_Module) {\n  _inherits(History, _Module);\n\n  function History(quill, options) {\n    _classCallCheck(this, History);\n\n    var _this = _possibleConstructorReturn(this, (History.__proto__ || Object.getPrototypeOf(History)).call(this, quill, options));\n\n    _this.lastRecorded = 0;\n    _this.ignoreChange = false;\n    _this.clear();\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (eventName, delta, oldDelta, source) {\n      if (eventName !== _quill2.default.events.TEXT_CHANGE || _this.ignoreChange) return;\n      if (!_this.options.userOnly || source === _quill2.default.sources.USER) {\n        _this.record(delta, oldDelta);\n      } else {\n        _this.transform(delta);\n      }\n    });\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, _this.undo.bind(_this));\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, _this.redo.bind(_this));\n    if (/Win/i.test(navigator.platform)) {\n      _this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, _this.redo.bind(_this));\n    }\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: 'change',\n    value: function change(source, dest) {\n      if (this.stack[source].length === 0) return;\n      var delta = this.stack[source].pop();\n      this.stack[dest].push(delta);\n      this.lastRecorded = 0;\n      this.ignoreChange = true;\n      this.quill.updateContents(delta[source], _quill2.default.sources.USER);\n      this.ignoreChange = false;\n      var index = getLastChangeIndex(delta[source]);\n      this.quill.setSelection(index);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.stack = { undo: [], redo: [] };\n    }\n  }, {\n    key: 'cutoff',\n    value: function cutoff() {\n      this.lastRecorded = 0;\n    }\n  }, {\n    key: 'record',\n    value: function record(changeDelta, oldDelta) {\n      if (changeDelta.ops.length === 0) return;\n      this.stack.redo = [];\n      var undoDelta = this.quill.getContents().diff(oldDelta);\n      var timestamp = Date.now();\n      if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n        var delta = this.stack.undo.pop();\n        undoDelta = undoDelta.compose(delta.undo);\n        changeDelta = delta.redo.compose(changeDelta);\n      } else {\n        this.lastRecorded = timestamp;\n      }\n      this.stack.undo.push({\n        redo: changeDelta,\n        undo: undoDelta\n      });\n      if (this.stack.undo.length > this.options.maxStack) {\n        this.stack.undo.shift();\n      }\n    }\n  }, {\n    key: 'redo',\n    value: function redo() {\n      this.change('redo', 'undo');\n    }\n  }, {\n    key: 'transform',\n    value: function transform(delta) {\n      this.stack.undo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n      this.stack.redo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.change('undo', 'redo');\n    }\n  }]);\n\n  return History;\n}(_module2.default);\n\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  var lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function (attr) {\n      return _parchment2.default.query(attr, _parchment2.default.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  var deleteLength = delta.reduce(function (length, op) {\n    length += op.delete || 0;\n    return length;\n  }, 0);\n  var changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nexports.default = History;\nexports.getLastChangeIndex = getLastChangeIndex;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BaseTooltip = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ALIGNS = [false, 'center', 'right', 'justify'];\n\nvar COLORS = [\"#000000\", \"#e60000\", \"#ff9900\", \"#ffff00\", \"#008a00\", \"#0066cc\", \"#9933ff\", \"#ffffff\", \"#facccc\", \"#ffebcc\", \"#ffffcc\", \"#cce8cc\", \"#cce0f5\", \"#ebd6ff\", \"#bbbbbb\", \"#f06666\", \"#ffc266\", \"#ffff66\", \"#66b966\", \"#66a3e0\", \"#c285ff\", \"#888888\", \"#a10000\", \"#b26b00\", \"#b2b200\", \"#006100\", \"#0047b2\", \"#6b24b2\", \"#444444\", \"#5c0000\", \"#663d00\", \"#666600\", \"#003700\", \"#002966\", \"#3d1466\"];\n\nvar FONTS = [false, 'serif', 'monospace'];\n\nvar HEADERS = ['1', '2', '3', false];\n\nvar SIZES = ['small', false, 'large', 'huge'];\n\nvar BaseTheme = function (_Theme) {\n  _inherits(BaseTheme, _Theme);\n\n  function BaseTheme(quill, options) {\n    _classCallCheck(this, BaseTheme);\n\n    var _this = _possibleConstructorReturn(this, (BaseTheme.__proto__ || Object.getPrototypeOf(BaseTheme)).call(this, quill, options));\n\n    var listener = function listener(e) {\n      if (!document.body.contains(quill.root)) {\n        return document.body.removeEventListener('click', listener);\n      }\n      if (_this.tooltip != null && !_this.tooltip.root.contains(e.target) && document.activeElement !== _this.tooltip.textbox && !_this.quill.hasFocus()) {\n        _this.tooltip.hide();\n      }\n      if (_this.pickers != null) {\n        _this.pickers.forEach(function (picker) {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n    return _this;\n  }\n\n  _createClass(BaseTheme, [{\n    key: 'addModule',\n    value: function addModule(name) {\n      var module = _get(BaseTheme.prototype.__proto__ || Object.getPrototypeOf(BaseTheme.prototype), 'addModule', this).call(this, name);\n      if (name === 'toolbar') {\n        this.extendToolbar(module);\n      }\n      return module;\n    }\n  }, {\n    key: 'buildButtons',\n    value: function buildButtons(buttons, icons) {\n      buttons.forEach(function (button) {\n        var className = button.getAttribute('class') || '';\n        className.split(/\\s+/).forEach(function (name) {\n          if (!name.startsWith('ql-')) return;\n          name = name.slice('ql-'.length);\n          if (icons[name] == null) return;\n          if (name === 'direction') {\n            button.innerHTML = icons[name][''] + icons[name]['rtl'];\n          } else if (typeof icons[name] === 'string') {\n            button.innerHTML = icons[name];\n          } else {\n            var value = button.value || '';\n            if (value != null && icons[name][value]) {\n              button.innerHTML = icons[name][value];\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: 'buildPickers',\n    value: function buildPickers(selects, icons) {\n      var _this2 = this;\n\n      this.pickers = selects.map(function (select) {\n        if (select.classList.contains('ql-align')) {\n          if (select.querySelector('option') == null) {\n            fillSelect(select, ALIGNS);\n          }\n          return new _iconPicker2.default(select, icons.align);\n        } else if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n          var format = select.classList.contains('ql-background') ? 'background' : 'color';\n          if (select.querySelector('option') == null) {\n            fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n          }\n          return new _colorPicker2.default(select, icons[format]);\n        } else {\n          if (select.querySelector('option') == null) {\n            if (select.classList.contains('ql-font')) {\n              fillSelect(select, FONTS);\n            } else if (select.classList.contains('ql-header')) {\n              fillSelect(select, HEADERS);\n            } else if (select.classList.contains('ql-size')) {\n              fillSelect(select, SIZES);\n            }\n          }\n          return new _picker2.default(select);\n        }\n      });\n      var update = function update() {\n        _this2.pickers.forEach(function (picker) {\n          picker.update();\n        });\n      };\n      this.quill.on(_emitter2.default.events.EDITOR_CHANGE, update);\n    }\n  }]);\n\n  return BaseTheme;\n}(_theme2.default);\n\nBaseTheme.DEFAULTS = (0, _extend2.default)(true, {}, _theme2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula: function formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image: function image() {\n          var _this3 = this;\n\n          var fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', function () {\n              if (fileInput.files != null && fileInput.files[0] != null) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                  var range = _this3.quill.getSelection(true);\n                  _this3.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert({ image: e.target.result }), _emitter2.default.sources.USER);\n                  _this3.quill.setSelection(range.index + 1, _emitter2.default.sources.SILENT);\n                  fileInput.value = \"\";\n                };\n                reader.readAsDataURL(fileInput.files[0]);\n              }\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video: function video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\n\nvar BaseTooltip = function (_Tooltip) {\n  _inherits(BaseTooltip, _Tooltip);\n\n  function BaseTooltip(quill, boundsContainer) {\n    _classCallCheck(this, BaseTooltip);\n\n    var _this4 = _possibleConstructorReturn(this, (BaseTooltip.__proto__ || Object.getPrototypeOf(BaseTooltip)).call(this, quill, boundsContainer));\n\n    _this4.textbox = _this4.root.querySelector('input[type=\"text\"]');\n    _this4.listen();\n    return _this4;\n  }\n\n  _createClass(BaseTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this5 = this;\n\n      this.textbox.addEventListener('keydown', function (event) {\n        if (_keyboard2.default.match(event, 'enter')) {\n          _this5.save();\n          event.preventDefault();\n        } else if (_keyboard2.default.match(event, 'escape')) {\n          _this5.cancel();\n          event.preventDefault();\n        }\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.hide();\n    }\n  }, {\n    key: 'edit',\n    value: function edit() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n      var preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      this.root.classList.remove('ql-hidden');\n      this.root.classList.add('ql-editing');\n      if (preview != null) {\n        this.textbox.value = preview;\n      } else if (mode !== this.root.getAttribute('data-mode')) {\n        this.textbox.value = '';\n      }\n      this.position(this.quill.getBounds(this.quill.selection.savedRange));\n      this.textbox.select();\n      this.textbox.setAttribute('placeholder', this.textbox.getAttribute('data-' + mode) || '');\n      this.root.setAttribute('data-mode', mode);\n    }\n  }, {\n    key: 'restoreFocus',\n    value: function restoreFocus() {\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.quill.focus();\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n    }\n  }, {\n    key: 'save',\n    value: function save() {\n      var value = this.textbox.value;\n      switch (this.root.getAttribute('data-mode')) {\n        case 'link':\n          {\n            var scrollTop = this.quill.root.scrollTop;\n            if (this.linkRange) {\n              this.quill.formatText(this.linkRange, 'link', value, _emitter2.default.sources.USER);\n              delete this.linkRange;\n            } else {\n              this.restoreFocus();\n              this.quill.format('link', value, _emitter2.default.sources.USER);\n            }\n            this.quill.root.scrollTop = scrollTop;\n            break;\n          }\n        case 'video':\n          {\n            value = extractVideoUrl(value);\n          } // eslint-disable-next-line no-fallthrough\n        case 'formula':\n          {\n            if (!value) break;\n            var range = this.quill.getSelection(true);\n            if (range != null) {\n              var index = range.index + range.length;\n              this.quill.insertEmbed(index, this.root.getAttribute('data-mode'), value, _emitter2.default.sources.USER);\n              if (this.root.getAttribute('data-mode') === 'formula') {\n                this.quill.insertText(index + 1, ' ', _emitter2.default.sources.USER);\n              }\n              this.quill.setSelection(index + 2, _emitter2.default.sources.USER);\n            }\n            break;\n          }\n        default:\n      }\n      this.textbox.value = '';\n      this.hide();\n    }\n  }]);\n\n  return BaseTooltip;\n}(_tooltip2.default);\n\nfunction extractVideoUrl(url) {\n  var match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return (match[1] || 'https') + '://www.youtube.com/embed/' + match[2] + '?showinfo=0';\n  }\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    // eslint-disable-line no-cond-assign\n    return (match[1] || 'https') + '://player.vimeo.com/video/' + match[2] + '/';\n  }\n  return url;\n}\n\nfunction fillSelect(select, values) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n    select.appendChild(option);\n  });\n}\n\nexports.BaseTooltip = BaseTooltip;\nexports.default = BaseTheme;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length = cur.length();\n            if (index < length ||\n                (inclusive && index === length && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar Registry = __webpack_require__(1);\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  var _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function (token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function value(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '🐶', '\\uD83D\\uDC2F' === '🐯'\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nexports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\nvar supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchText = exports.matchSpacing = exports.matchNewline = exports.matchBlot = exports.matchAttributor = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend2 = __webpack_require__(3);\n\nvar _extend3 = _interopRequireDefault(_extend2);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _align = __webpack_require__(36);\n\nvar _background = __webpack_require__(37);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _color = __webpack_require__(26);\n\nvar _direction = __webpack_require__(38);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:clipboard');\n\nvar DOM_KEY = '__ql-matcher';\n\nvar CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchSpacing], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['b', matchAlias.bind(matchAlias, 'bold')], ['i', matchAlias.bind(matchAlias, 'italic')], ['style', matchIgnore]];\n\nvar ATTRIBUTE_ATTRIBUTORS = [_align.AlignAttribute, _direction.DirectionAttribute].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar STYLE_ATTRIBUTORS = [_align.AlignStyle, _background.BackgroundStyle, _color.ColorStyle, _direction.DirectionStyle, _font.FontStyle, _size.SizeStyle].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar Clipboard = function (_Module) {\n  _inherits(Clipboard, _Module);\n\n  function Clipboard(quill, options) {\n    _classCallCheck(this, Clipboard);\n\n    var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this, quill, options));\n\n    _this.quill.root.addEventListener('paste', _this.onPaste.bind(_this));\n    _this.container = _this.quill.addContainer('ql-clipboard');\n    _this.container.setAttribute('contenteditable', true);\n    _this.container.setAttribute('tabindex', -1);\n    _this.matchers = [];\n    CLIPBOARD_CONFIG.concat(_this.options.matchers).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          selector = _ref2[0],\n          matcher = _ref2[1];\n\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      _this.addMatcher(selector, matcher);\n    });\n    return _this;\n  }\n\n  _createClass(Clipboard, [{\n    key: 'addMatcher',\n    value: function addMatcher(selector, matcher) {\n      this.matchers.push([selector, matcher]);\n    }\n  }, {\n    key: 'convert',\n    value: function convert(html) {\n      if (typeof html === 'string') {\n        this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n        return this.convert();\n      }\n      var formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n      if (formats[_code2.default.blotName]) {\n        var text = this.container.innerText;\n        this.container.innerHTML = '';\n        return new _quillDelta2.default().insert(text, _defineProperty({}, _code2.default.blotName, formats[_code2.default.blotName]));\n      }\n\n      var _prepareMatching = this.prepareMatching(),\n          _prepareMatching2 = _slicedToArray(_prepareMatching, 2),\n          elementMatchers = _prepareMatching2[0],\n          textMatchers = _prepareMatching2[1];\n\n      var delta = traverse(this.container, elementMatchers, textMatchers);\n      // Remove trailing newline\n      if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n        delta = delta.compose(new _quillDelta2.default().retain(delta.length() - 1).delete(1));\n      }\n      debug.log('convert', this.container.innerHTML, delta);\n      this.container.innerHTML = '';\n      return delta;\n    }\n  }, {\n    key: 'dangerouslyPasteHTML',\n    value: function dangerouslyPasteHTML(index, html) {\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _quill2.default.sources.API;\n\n      if (typeof index === 'string') {\n        this.quill.setContents(this.convert(index), html);\n        this.quill.setSelection(0, _quill2.default.sources.SILENT);\n      } else {\n        var paste = this.convert(html);\n        this.quill.updateContents(new _quillDelta2.default().retain(index).concat(paste), source);\n        this.quill.setSelection(index + paste.length(), _quill2.default.sources.SILENT);\n      }\n    }\n  }, {\n    key: 'onPaste',\n    value: function onPaste(e) {\n      var _this2 = this;\n\n      if (e.defaultPrevented || !this.quill.isEnabled()) return;\n      var range = this.quill.getSelection();\n      var delta = new _quillDelta2.default().retain(range.index);\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.container.focus();\n      this.quill.selection.update(_quill2.default.sources.SILENT);\n      setTimeout(function () {\n        delta = delta.concat(_this2.convert()).delete(range.length);\n        _this2.quill.updateContents(delta, _quill2.default.sources.USER);\n        // range.length contributes to delta.length()\n        _this2.quill.setSelection(delta.length() - range.length, _quill2.default.sources.SILENT);\n        _this2.quill.scrollingContainer.scrollTop = scrollTop;\n        _this2.quill.focus();\n      }, 1);\n    }\n  }, {\n    key: 'prepareMatching',\n    value: function prepareMatching() {\n      var _this3 = this;\n\n      var elementMatchers = [],\n          textMatchers = [];\n      this.matchers.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            selector = _pair[0],\n            matcher = _pair[1];\n\n        switch (selector) {\n          case Node.TEXT_NODE:\n            textMatchers.push(matcher);\n            break;\n          case Node.ELEMENT_NODE:\n            elementMatchers.push(matcher);\n            break;\n          default:\n            [].forEach.call(_this3.container.querySelectorAll(selector), function (node) {\n              // TODO use weakmap\n              node[DOM_KEY] = node[DOM_KEY] || [];\n              node[DOM_KEY].push(matcher);\n            });\n            break;\n        }\n      });\n      return [elementMatchers, textMatchers];\n    }\n  }]);\n\n  return Clipboard;\n}(_module2.default);\n\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\nfunction applyFormat(delta, format, value) {\n  if ((typeof format === 'undefined' ? 'undefined' : _typeof(format)) === 'object') {\n    return Object.keys(format).reduce(function (delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function (delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, (0, _extend3.default)({}, _defineProperty({}, format, value), op.attributes));\n      }\n    }, new _quillDelta2.default());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  var DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  var endText = \"\";\n  for (var i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    var op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\n  var style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function (delta, matcher) {\n      return matcher(node, delta);\n    }, new _quillDelta2.default());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], function (delta, childNode) {\n      var childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new _quillDelta2.default());\n  } else {\n    return new _quillDelta2.default();\n  }\n}\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  var attributes = _parchment2.default.Attributor.Attribute.keys(node);\n  var classes = _parchment2.default.Attributor.Class.keys(node);\n  var styles = _parchment2.default.Attributor.Style.keys(node);\n  var formats = {};\n  attributes.concat(classes).concat(styles).forEach(function (name) {\n    var attr = _parchment2.default.query(name, _parchment2.default.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof _parchment2.default.Embed) {\n    var embed = {};\n    var value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new _quillDelta2.default().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new _quillDelta2.default();\n}\n\nfunction matchIndent(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  var indent = -1,\n      parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((_parchment2.default.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new _quillDelta2.default().retain(delta.length() - 1).retain(1, { indent: indent }));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || delta.length() > 0 && node.nextSibling && isLine(node.nextSibling)) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    var nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight * 1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  var formats = {};\n  var style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') || parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    delta = new _quillDelta2.default().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  var text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    var replacer = function replacer(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (node.previousSibling == null && isLine(node.parentNode) || node.previousSibling != null && isLine(node.previousSibling)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (node.nextSibling == null && isLine(node.parentNode) || node.nextSibling != null && isLine(node.nextSibling)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexports.default = Clipboard;\nexports.matchAttributor = matchAttributor;\nexports.matchBlot = matchBlot;\nexports.matchNewline = matchNewline;\nexports.matchSpacing = matchSpacing;\nexports.matchText = matchText;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Bold = function (_Inline) {\n  _inherits(Bold, _Inline);\n\n  function Bold() {\n    _classCallCheck(this, Bold);\n\n    return _possibleConstructorReturn(this, (Bold.__proto__ || Object.getPrototypeOf(Bold)).apply(this, arguments));\n  }\n\n  _createClass(Bold, [{\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Bold.prototype.__proto__ || Object.getPrototypeOf(Bold.prototype), 'optimize', this).call(this, context);\n      if (this.domNode.tagName !== this.statics.tagName[0]) {\n        this.replaceWith(this.statics.blotName);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create() {\n      return _get(Bold.__proto__ || Object.getPrototypeOf(Bold), 'create', this).call(this);\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return Bold;\n}(_inline2.default);\n\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexports.default = Bold;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addControls = exports.default = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:toolbar');\n\nvar Toolbar = function (_Module) {\n  _inherits(Toolbar, _Module);\n\n  function Toolbar(quill, options) {\n    _classCallCheck(this, Toolbar);\n\n    var _this = _possibleConstructorReturn(this, (Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).call(this, quill, options));\n\n    if (Array.isArray(_this.options.container)) {\n      var container = document.createElement('div');\n      addControls(container, _this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      _this.container = container;\n    } else if (typeof _this.options.container === 'string') {\n      _this.container = document.querySelector(_this.options.container);\n    } else {\n      _this.container = _this.options.container;\n    }\n    if (!(_this.container instanceof HTMLElement)) {\n      var _ret;\n\n      return _ret = debug.error('Container required for toolbar', _this.options), _possibleConstructorReturn(_this, _ret);\n    }\n    _this.container.classList.add('ql-toolbar');\n    _this.controls = [];\n    _this.handlers = {};\n    Object.keys(_this.options.handlers).forEach(function (format) {\n      _this.addHandler(format, _this.options.handlers[format]);\n    });\n    [].forEach.call(_this.container.querySelectorAll('button, select'), function (input) {\n      _this.attach(input);\n    });\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (type, range) {\n      if (type === _quill2.default.events.SELECTION_CHANGE) {\n        _this.update(range);\n      }\n    });\n    _this.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      var _this$quill$selection = _this.quill.selection.getRange(),\n          _this$quill$selection2 = _slicedToArray(_this$quill$selection, 1),\n          range = _this$quill$selection2[0]; // quill.getSelection triggers update\n\n\n      _this.update(range);\n    });\n    return _this;\n  }\n\n  _createClass(Toolbar, [{\n    key: 'addHandler',\n    value: function addHandler(format, handler) {\n      this.handlers[format] = handler;\n    }\n  }, {\n    key: 'attach',\n    value: function attach(input) {\n      var _this2 = this;\n\n      var format = [].find.call(input.classList, function (className) {\n        return className.indexOf('ql-') === 0;\n      });\n      if (!format) return;\n      format = format.slice('ql-'.length);\n      if (input.tagName === 'BUTTON') {\n        input.setAttribute('type', 'button');\n      }\n      if (this.handlers[format] == null) {\n        if (this.quill.scroll.whitelist != null && this.quill.scroll.whitelist[format] == null) {\n          debug.warn('ignoring attaching to disabled format', format, input);\n          return;\n        }\n        if (_parchment2.default.query(format) == null) {\n          debug.warn('ignoring attaching to nonexistent format', format, input);\n          return;\n        }\n      }\n      var eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n      input.addEventListener(eventName, function (e) {\n        var value = void 0;\n        if (input.tagName === 'SELECT') {\n          if (input.selectedIndex < 0) return;\n          var selected = input.options[input.selectedIndex];\n          if (selected.hasAttribute('selected')) {\n            value = false;\n          } else {\n            value = selected.value || false;\n          }\n        } else {\n          if (input.classList.contains('ql-active')) {\n            value = false;\n          } else {\n            value = input.value || !input.hasAttribute('value');\n          }\n          e.preventDefault();\n        }\n        _this2.quill.focus();\n\n        var _quill$selection$getR = _this2.quill.selection.getRange(),\n            _quill$selection$getR2 = _slicedToArray(_quill$selection$getR, 1),\n            range = _quill$selection$getR2[0];\n\n        if (_this2.handlers[format] != null) {\n          _this2.handlers[format].call(_this2, value);\n        } else if (_parchment2.default.query(format).prototype instanceof _parchment2.default.Embed) {\n          value = prompt('Enter ' + format);\n          if (!value) return;\n          _this2.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert(_defineProperty({}, format, value)), _quill2.default.sources.USER);\n        } else {\n          _this2.quill.format(format, value, _quill2.default.sources.USER);\n        }\n        _this2.update(range);\n      });\n      // TODO use weakmap\n      this.controls.push([format, input]);\n    }\n  }, {\n    key: 'update',\n    value: function update(range) {\n      var formats = range == null ? {} : this.quill.getFormat(range);\n      this.controls.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            format = _pair[0],\n            input = _pair[1];\n\n        if (input.tagName === 'SELECT') {\n          var option = void 0;\n          if (range == null) {\n            option = null;\n          } else if (formats[format] == null) {\n            option = input.querySelector('option[selected]');\n          } else if (!Array.isArray(formats[format])) {\n            var value = formats[format];\n            if (typeof value === 'string') {\n              value = value.replace(/\\\"/g, '\\\\\"');\n            }\n            option = input.querySelector('option[value=\"' + value + '\"]');\n          }\n          if (option == null) {\n            input.value = ''; // TODO make configurable?\n            input.selectedIndex = -1;\n          } else {\n            option.selected = true;\n          }\n        } else {\n          if (range == null) {\n            input.classList.remove('ql-active');\n          } else if (input.hasAttribute('value')) {\n            // both being null should match (default values)\n            // '1' should match with 1 (headers)\n            var isActive = formats[format] === input.getAttribute('value') || formats[format] != null && formats[format].toString() === input.getAttribute('value') || formats[format] == null && !input.getAttribute('value');\n            input.classList.toggle('ql-active', isActive);\n          } else {\n            input.classList.toggle('ql-active', formats[format] != null);\n          }\n        }\n      });\n    }\n  }]);\n\n  return Toolbar;\n}(_module2.default);\n\nToolbar.DEFAULTS = {};\n\nfunction addButton(container, format, value) {\n  var input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add('ql-' + format);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(function (controls) {\n    var group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(function (control) {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        var format = Object.keys(control)[0];\n        var value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  var input = document.createElement('select');\n  input.classList.add('ql-' + format);\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean: function clean() {\n      var _this3 = this;\n\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length == 0) {\n        var formats = this.quill.getFormat();\n        Object.keys(formats).forEach(function (name) {\n          // Clean functionality in existing apps only clean inline formats\n          if (_parchment2.default.query(name, _parchment2.default.Scope.INLINE) != null) {\n            _this3.quill.format(name, false);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, _quill2.default.sources.USER);\n      }\n    },\n    direction: function direction(value) {\n      var align = this.quill.getFormat()['align'];\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', _quill2.default.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, _quill2.default.sources.USER);\n      }\n      this.quill.format('direction', value, _quill2.default.sources.USER);\n    },\n    indent: function indent(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      var indent = parseInt(formats.indent || 0);\n      if (value === '+1' || value === '-1') {\n        var modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, _quill2.default.sources.USER);\n      }\n    },\n    link: function link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:');\n      }\n      this.quill.format('link', value, _quill2.default.sources.USER);\n    },\n    list: function list(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats['list'] === 'checked' || formats['list'] === 'unchecked') {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', _quill2.default.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, _quill2.default.sources.USER);\n      }\n    }\n  }\n};\n\nexports.default = Toolbar;\nexports.addControls = addControls;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorPicker = function (_Picker) {\n  _inherits(ColorPicker, _Picker);\n\n  function ColorPicker(select, label) {\n    _classCallCheck(this, ColorPicker);\n\n    var _this = _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).call(this, select));\n\n    _this.label.innerHTML = label;\n    _this.container.classList.add('ql-color-picker');\n    [].slice.call(_this.container.querySelectorAll('.ql-picker-item'), 0, 7).forEach(function (item) {\n      item.classList.add('ql-primary');\n    });\n    return _this;\n  }\n\n  _createClass(ColorPicker, [{\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var item = _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'buildItem', this).call(this, option);\n      item.style.backgroundColor = option.getAttribute('value') || '';\n      return item;\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      var colorLabel = this.label.querySelector('.ql-color-label');\n      var value = item ? item.getAttribute('data-value') || '' : '';\n      if (colorLabel) {\n        if (colorLabel.tagName === 'line') {\n          colorLabel.style.stroke = value;\n        } else {\n          colorLabel.style.fill = value;\n        }\n      }\n    }\n  }]);\n\n  return ColorPicker;\n}(_picker2.default);\n\nexports.default = ColorPicker;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IconPicker = function (_Picker) {\n  _inherits(IconPicker, _Picker);\n\n  function IconPicker(select, icons) {\n    _classCallCheck(this, IconPicker);\n\n    var _this = _possibleConstructorReturn(this, (IconPicker.__proto__ || Object.getPrototypeOf(IconPicker)).call(this, select));\n\n    _this.container.classList.add('ql-icon-picker');\n    [].forEach.call(_this.container.querySelectorAll('.ql-picker-item'), function (item) {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    _this.defaultItem = _this.container.querySelector('.ql-selected');\n    _this.selectItem(_this.defaultItem);\n    return _this;\n  }\n\n  _createClass(IconPicker, [{\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(IconPicker.prototype.__proto__ || Object.getPrototypeOf(IconPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      item = item || this.defaultItem;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }]);\n\n  return IconPicker;\n}(_picker2.default);\n\nexports.default = IconPicker;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tooltip = function () {\n  function Tooltip(quill, boundsContainer) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener('scroll', function () {\n        _this.root.style.marginTop = -1 * _this.quill.root.scrollTop + 'px';\n      });\n    }\n    this.hide();\n  }\n\n  _createClass(Tooltip, [{\n    key: 'hide',\n    value: function hide() {\n      this.root.classList.add('ql-hidden');\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n      // root.scrollTop should be 0 if scrollContainer !== root\n      var top = reference.bottom + this.quill.root.scrollTop;\n      this.root.style.left = left + 'px';\n      this.root.style.top = top + 'px';\n      this.root.classList.remove('ql-flip');\n      var containerBounds = this.boundsContainer.getBoundingClientRect();\n      var rootBounds = this.root.getBoundingClientRect();\n      var shift = 0;\n      if (rootBounds.right > containerBounds.right) {\n        shift = containerBounds.right - rootBounds.right;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.left < containerBounds.left) {\n        shift = containerBounds.left - rootBounds.left;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.bottom > containerBounds.bottom) {\n        var height = rootBounds.bottom - rootBounds.top;\n        var verticalShift = reference.bottom - reference.top + height;\n        this.root.style.top = top - verticalShift + 'px';\n        this.root.classList.add('ql-flip');\n      }\n      return shift;\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.root.classList.remove('ql-editing');\n      this.root.classList.remove('ql-hidden');\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexports.default = Tooltip;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [[{ header: ['1', '2', '3', false] }], ['bold', 'italic', 'underline', 'link'], [{ list: 'ordered' }, { list: 'bullet' }], ['clean']];\n\nvar SnowTheme = function (_BaseTheme) {\n  _inherits(SnowTheme, _BaseTheme);\n\n  function SnowTheme(quill, options) {\n    _classCallCheck(this, SnowTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (SnowTheme.__proto__ || Object.getPrototypeOf(SnowTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-snow');\n    return _this;\n  }\n\n  _createClass(SnowTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({ key: 'K', shortKey: true }, function (range, context) {\n          toolbar.handlers['link'].call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }]);\n\n  return SnowTheme;\n}(_base2.default);\n\nSnowTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (value) {\n            var range = this.quill.getSelection();\n            if (range == null || range.length == 0) return;\n            var preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = 'mailto:' + preview;\n            }\n            var tooltip = this.quill.theme.tooltip;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n      }\n    }\n  }\n});\n\nvar SnowTooltip = function (_BaseTooltip) {\n  _inherits(SnowTooltip, _BaseTooltip);\n\n  function SnowTooltip(quill, bounds) {\n    _classCallCheck(this, SnowTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (SnowTooltip.__proto__ || Object.getPrototypeOf(SnowTooltip)).call(this, quill, bounds));\n\n    _this2.preview = _this2.root.querySelector('a.ql-preview');\n    return _this2;\n  }\n\n  _createClass(SnowTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('a.ql-action').addEventListener('click', function (event) {\n        if (_this3.root.classList.contains('ql-editing')) {\n          _this3.save();\n        } else {\n          _this3.edit('link', _this3.preview.textContent);\n        }\n        event.preventDefault();\n      });\n      this.root.querySelector('a.ql-remove').addEventListener('click', function (event) {\n        if (_this3.linkRange != null) {\n          var range = _this3.linkRange;\n          _this3.restoreFocus();\n          _this3.quill.formatText(range, 'link', false, _emitter2.default.sources.USER);\n          delete _this3.linkRange;\n        }\n        event.preventDefault();\n        _this3.hide();\n      });\n      this.quill.on(_emitter2.default.events.SELECTION_CHANGE, function (range, oldRange, source) {\n        if (range == null) return;\n        if (range.length === 0 && source === _emitter2.default.sources.USER) {\n          var _quill$scroll$descend = _this3.quill.scroll.descendant(_link2.default, range.index),\n              _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n              link = _quill$scroll$descend2[0],\n              offset = _quill$scroll$descend2[1];\n\n          if (link != null) {\n            _this3.linkRange = new _selection.Range(range.index - offset, link.length());\n            var preview = _link2.default.formats(link.domNode);\n            _this3.preview.textContent = preview;\n            _this3.preview.setAttribute('href', preview);\n            _this3.show();\n            _this3.position(_this3.quill.getBounds(_this3.linkRange));\n            return;\n          }\n        } else {\n          delete _this3.linkRange;\n        }\n        _this3.hide();\n      });\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'show', this).call(this);\n      this.root.removeAttribute('data-mode');\n    }\n  }]);\n\n  return SnowTooltip;\n}(_base.BaseTooltip);\n\nSnowTooltip.TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n\nexports.default = SnowTheme;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _core = __webpack_require__(29);\n\nvar _core2 = _interopRequireDefault(_core);\n\nvar _align = __webpack_require__(36);\n\nvar _direction = __webpack_require__(38);\n\nvar _indent = __webpack_require__(64);\n\nvar _blockquote = __webpack_require__(65);\n\nvar _blockquote2 = _interopRequireDefault(_blockquote);\n\nvar _header = __webpack_require__(66);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _list = __webpack_require__(67);\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _background = __webpack_require__(37);\n\nvar _color = __webpack_require__(26);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nvar _italic = __webpack_require__(68);\n\nvar _italic2 = _interopRequireDefault(_italic);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _script = __webpack_require__(69);\n\nvar _script2 = _interopRequireDefault(_script);\n\nvar _strike = __webpack_require__(70);\n\nvar _strike2 = _interopRequireDefault(_strike);\n\nvar _underline = __webpack_require__(71);\n\nvar _underline2 = _interopRequireDefault(_underline);\n\nvar _image = __webpack_require__(72);\n\nvar _image2 = _interopRequireDefault(_image);\n\nvar _video = __webpack_require__(73);\n\nvar _video2 = _interopRequireDefault(_video);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _formula = __webpack_require__(74);\n\nvar _formula2 = _interopRequireDefault(_formula);\n\nvar _syntax = __webpack_require__(75);\n\nvar _syntax2 = _interopRequireDefault(_syntax);\n\nvar _toolbar = __webpack_require__(57);\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _bubble = __webpack_require__(108);\n\nvar _bubble2 = _interopRequireDefault(_bubble);\n\nvar _snow = __webpack_require__(62);\n\nvar _snow2 = _interopRequireDefault(_snow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_core2.default.register({\n  'attributors/attribute/direction': _direction.DirectionAttribute,\n\n  'attributors/class/align': _align.AlignClass,\n  'attributors/class/background': _background.BackgroundClass,\n  'attributors/class/color': _color.ColorClass,\n  'attributors/class/direction': _direction.DirectionClass,\n  'attributors/class/font': _font.FontClass,\n  'attributors/class/size': _size.SizeClass,\n\n  'attributors/style/align': _align.AlignStyle,\n  'attributors/style/background': _background.BackgroundStyle,\n  'attributors/style/color': _color.ColorStyle,\n  'attributors/style/direction': _direction.DirectionStyle,\n  'attributors/style/font': _font.FontStyle,\n  'attributors/style/size': _size.SizeStyle\n}, true);\n\n_core2.default.register({\n  'formats/align': _align.AlignClass,\n  'formats/direction': _direction.DirectionClass,\n  'formats/indent': _indent.IndentClass,\n\n  'formats/background': _background.BackgroundStyle,\n  'formats/color': _color.ColorStyle,\n  'formats/font': _font.FontClass,\n  'formats/size': _size.SizeClass,\n\n  'formats/blockquote': _blockquote2.default,\n  'formats/code-block': _code2.default,\n  'formats/header': _header2.default,\n  'formats/list': _list2.default,\n\n  'formats/bold': _bold2.default,\n  'formats/code': _code.Code,\n  'formats/italic': _italic2.default,\n  'formats/link': _link2.default,\n  'formats/script': _script2.default,\n  'formats/strike': _strike2.default,\n  'formats/underline': _underline2.default,\n\n  'formats/image': _image2.default,\n  'formats/video': _video2.default,\n\n  'formats/list/item': _list.ListItem,\n\n  'modules/formula': _formula2.default,\n  'modules/syntax': _syntax2.default,\n  'modules/toolbar': _toolbar2.default,\n\n  'themes/bubble': _bubble2.default,\n  'themes/snow': _snow2.default,\n\n  'ui/icons': _icons2.default,\n  'ui/picker': _picker2.default,\n  'ui/icon-picker': _iconPicker2.default,\n  'ui/color-picker': _colorPicker2.default,\n  'ui/tooltip': _tooltip2.default\n}, true);\n\nexports.default = _core2.default;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndentClass = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IdentAttributor = function (_Parchment$Attributor) {\n  _inherits(IdentAttributor, _Parchment$Attributor);\n\n  function IdentAttributor() {\n    _classCallCheck(this, IdentAttributor);\n\n    return _possibleConstructorReturn(this, (IdentAttributor.__proto__ || Object.getPrototypeOf(IdentAttributor)).apply(this, arguments));\n  }\n\n  _createClass(IdentAttributor, [{\n    key: 'add',\n    value: function add(node, value) {\n      if (value === '+1' || value === '-1') {\n        var indent = this.value(node) || 0;\n        value = value === '+1' ? indent + 1 : indent - 1;\n      }\n      if (value === 0) {\n        this.remove(node);\n        return true;\n      } else {\n        return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'add', this).call(this, node, value);\n      }\n    }\n  }, {\n    key: 'canAdd',\n    value: function canAdd(node, value) {\n      return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, value) || _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, parseInt(value));\n    }\n  }, {\n    key: 'value',\n    value: function value(node) {\n      return parseInt(_get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'value', this).call(this, node)) || undefined; // Don't return NaN\n    }\n  }]);\n\n  return IdentAttributor;\n}(_parchment2.default.Attributor.Class);\n\nvar IndentClass = new IdentAttributor('indent', 'ql-indent', {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\n\nexports.IndentClass = IndentClass;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Blockquote = function (_Block) {\n  _inherits(Blockquote, _Block);\n\n  function Blockquote() {\n    _classCallCheck(this, Blockquote);\n\n    return _possibleConstructorReturn(this, (Blockquote.__proto__ || Object.getPrototypeOf(Blockquote)).apply(this, arguments));\n  }\n\n  return Blockquote;\n}(_block2.default);\n\nBlockquote.blotName = 'blockquote';\nBlockquote.tagName = 'blockquote';\n\nexports.default = Blockquote;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Header = function (_Block) {\n  _inherits(Header, _Block);\n\n  function Header() {\n    _classCallCheck(this, Header);\n\n    return _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).apply(this, arguments));\n  }\n\n  _createClass(Header, null, [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return this.tagName.indexOf(domNode.tagName) + 1;\n    }\n  }]);\n\n  return Header;\n}(_block2.default);\n\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\nexports.default = Header;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ListItem = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ListItem = function (_Block) {\n  _inherits(ListItem, _Block);\n\n  function ListItem() {\n    _classCallCheck(this, ListItem);\n\n    return _possibleConstructorReturn(this, (ListItem.__proto__ || Object.getPrototypeOf(ListItem)).apply(this, arguments));\n  }\n\n  _createClass(ListItem, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name === List.blotName && !value) {\n        this.replaceWith(_parchment2.default.create(this.statics.scope));\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      if (this.prev == null && this.next == null) {\n        this.parent.remove();\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'remove', this).call(this);\n      }\n    }\n  }, {\n    key: 'replaceWith',\n    value: function replaceWith(name, value) {\n      this.parent.isolate(this.offset(this.parent), this.length());\n      if (name === this.parent.statics.blotName) {\n        this.parent.replaceWith(name, value);\n        return this;\n      } else {\n        this.parent.unwrap();\n        return _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'replaceWith', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.tagName === this.tagName ? undefined : _get(ListItem.__proto__ || Object.getPrototypeOf(ListItem), 'formats', this).call(this, domNode);\n    }\n  }]);\n\n  return ListItem;\n}(_block2.default);\n\nListItem.blotName = 'list-item';\nListItem.tagName = 'LI';\n\nvar List = function (_Container) {\n  _inherits(List, _Container);\n\n  _createClass(List, null, [{\n    key: 'create',\n    value: function create(value) {\n      var tagName = value === 'ordered' ? 'OL' : 'UL';\n      var node = _get(List.__proto__ || Object.getPrototypeOf(List), 'create', this).call(this, tagName);\n      if (value === 'checked' || value === 'unchecked') {\n        node.setAttribute('data-checked', value === 'checked');\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'OL') return 'ordered';\n      if (domNode.tagName === 'UL') {\n        if (domNode.hasAttribute('data-checked')) {\n          return domNode.getAttribute('data-checked') === 'true' ? 'checked' : 'unchecked';\n        } else {\n          return 'bullet';\n        }\n      }\n      return undefined;\n    }\n  }]);\n\n  function List(domNode) {\n    _classCallCheck(this, List);\n\n    var _this2 = _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).call(this, domNode));\n\n    var listEventHandler = function listEventHandler(e) {\n      if (e.target.parentNode !== domNode) return;\n      var format = _this2.statics.formats(domNode);\n      var blot = _parchment2.default.find(e.target);\n      if (format === 'checked') {\n        blot.format('list', 'unchecked');\n      } else if (format === 'unchecked') {\n        blot.format('list', 'checked');\n      }\n    };\n\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n    return _this2;\n  }\n\n  _createClass(List, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (this.children.length > 0) {\n        this.children.tail.format(name, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      // We don't inherit from FormatBlot\n      return _defineProperty({}, this.statics.blotName, this.statics.formats(this.domNode));\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot instanceof ListItem) {\n        _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'insertBefore', this).call(this, blot, ref);\n      } else {\n        var index = ref == null ? this.length() : ref.offset(this);\n        var after = this.split(index);\n        after.parent.insertBefore(blot, after);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && next.domNode.tagName === this.domNode.tagName && next.domNode.getAttribute('data-checked') === this.domNode.getAttribute('data-checked')) {\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      if (target.statics.blotName !== this.statics.blotName) {\n        var item = _parchment2.default.create(this.statics.defaultChild);\n        target.moveChildren(item);\n        this.appendChild(item);\n      }\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'replace', this).call(this, target);\n    }\n  }]);\n\n  return List;\n}(_container2.default);\n\nList.blotName = 'list';\nList.scope = _parchment2.default.Scope.BLOCK_BLOT;\nList.tagName = ['OL', 'UL'];\nList.defaultChild = 'list-item';\nList.allowedChildren = [ListItem];\n\nexports.ListItem = ListItem;\nexports.default = List;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Italic = function (_Bold) {\n  _inherits(Italic, _Bold);\n\n  function Italic() {\n    _classCallCheck(this, Italic);\n\n    return _possibleConstructorReturn(this, (Italic.__proto__ || Object.getPrototypeOf(Italic)).apply(this, arguments));\n  }\n\n  return Italic;\n}(_bold2.default);\n\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexports.default = Italic;\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Script = function (_Inline) {\n  _inherits(Script, _Inline);\n\n  function Script() {\n    _classCallCheck(this, Script);\n\n    return _possibleConstructorReturn(this, (Script.__proto__ || Object.getPrototypeOf(Script)).apply(this, arguments));\n  }\n\n  _createClass(Script, null, [{\n    key: 'create',\n    value: function create(value) {\n      if (value === 'super') {\n        return document.createElement('sup');\n      } else if (value === 'sub') {\n        return document.createElement('sub');\n      } else {\n        return _get(Script.__proto__ || Object.getPrototypeOf(Script), 'create', this).call(this, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'SUB') return 'sub';\n      if (domNode.tagName === 'SUP') return 'super';\n      return undefined;\n    }\n  }]);\n\n  return Script;\n}(_inline2.default);\n\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n\nexports.default = Script;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Strike = function (_Inline) {\n  _inherits(Strike, _Inline);\n\n  function Strike() {\n    _classCallCheck(this, Strike);\n\n    return _possibleConstructorReturn(this, (Strike.__proto__ || Object.getPrototypeOf(Strike)).apply(this, arguments));\n  }\n\n  return Strike;\n}(_inline2.default);\n\nStrike.blotName = 'strike';\nStrike.tagName = 'S';\n\nexports.default = Strike;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Underline = function (_Inline) {\n  _inherits(Underline, _Inline);\n\n  function Underline() {\n    _classCallCheck(this, Underline);\n\n    return _possibleConstructorReturn(this, (Underline.__proto__ || Object.getPrototypeOf(Underline)).apply(this, arguments));\n  }\n\n  return Underline;\n}(_inline2.default);\n\nUnderline.blotName = 'underline';\nUnderline.tagName = 'U';\n\nexports.default = Underline;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _link = __webpack_require__(27);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['alt', 'height', 'width'];\n\nvar Image = function (_Parchment$Embed) {\n  _inherits(Image, _Parchment$Embed);\n\n  function Image() {\n    _classCallCheck(this, Image);\n\n    return _possibleConstructorReturn(this, (Image.__proto__ || Object.getPrototypeOf(Image)).apply(this, arguments));\n  }\n\n  _createClass(Image, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Image.prototype.__proto__ || Object.getPrototypeOf(Image.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Image.__proto__ || Object.getPrototypeOf(Image), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        node.setAttribute('src', this.sanitize(value));\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'match',\n    value: function match(url) {\n      return (/\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url)\n      );\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return (0, _link.sanitize)(url, ['http', 'https', 'data']) ? url : '//:0';\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Image;\n}(_parchment2.default.Embed);\n\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n\nexports.default = Image;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _block = __webpack_require__(4);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['height', 'width'];\n\nvar Video = function (_BlockEmbed) {\n  _inherits(Video, _BlockEmbed);\n\n  function Video() {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, (Video.__proto__ || Object.getPrototypeOf(Video)).apply(this, arguments));\n  }\n\n  _createClass(Video, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Video.prototype.__proto__ || Object.getPrototypeOf(Video.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Video.__proto__ || Object.getPrototypeOf(Video), 'create', this).call(this, value);\n      node.setAttribute('frameborder', '0');\n      node.setAttribute('allowfullscreen', true);\n      node.setAttribute('src', this.sanitize(value));\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _link2.default.sanitize(url);\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Video;\n}(_block.BlockEmbed);\n\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n\nexports.default = Video;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.FormulaBlot = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FormulaBlot = function (_Embed) {\n  _inherits(FormulaBlot, _Embed);\n\n  function FormulaBlot() {\n    _classCallCheck(this, FormulaBlot);\n\n    return _possibleConstructorReturn(this, (FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot)).apply(this, arguments));\n  }\n\n  _createClass(FormulaBlot, null, [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        window.katex.render(value, node, {\n          throwOnError: false,\n          errorColor: '#f00'\n        });\n        node.setAttribute('data-value', value);\n      }\n      return node;\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('data-value');\n    }\n  }]);\n\n  return FormulaBlot;\n}(_embed2.default);\n\nFormulaBlot.blotName = 'formula';\nFormulaBlot.className = 'ql-formula';\nFormulaBlot.tagName = 'SPAN';\n\nvar Formula = function (_Module) {\n  _inherits(Formula, _Module);\n\n  _createClass(Formula, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(FormulaBlot, true);\n    }\n  }]);\n\n  function Formula() {\n    _classCallCheck(this, Formula);\n\n    var _this2 = _possibleConstructorReturn(this, (Formula.__proto__ || Object.getPrototypeOf(Formula)).call(this));\n\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    return _this2;\n  }\n\n  return Formula;\n}(_module2.default);\n\nexports.FormulaBlot = FormulaBlot;\nexports.default = Formula;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.CodeToken = exports.CodeBlock = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SyntaxCodeBlock = function (_CodeBlock) {\n  _inherits(SyntaxCodeBlock, _CodeBlock);\n\n  function SyntaxCodeBlock() {\n    _classCallCheck(this, SyntaxCodeBlock);\n\n    return _possibleConstructorReturn(this, (SyntaxCodeBlock.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(SyntaxCodeBlock, [{\n    key: 'replaceWith',\n    value: function replaceWith(block) {\n      this.domNode.textContent = this.domNode.textContent;\n      this.attach();\n      _get(SyntaxCodeBlock.prototype.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock.prototype), 'replaceWith', this).call(this, block);\n    }\n  }, {\n    key: 'highlight',\n    value: function highlight(_highlight) {\n      var text = this.domNode.textContent;\n      if (this.cachedText !== text) {\n        if (text.trim().length > 0 || this.cachedText == null) {\n          this.domNode.innerHTML = _highlight(text);\n          this.domNode.normalize();\n          this.attach();\n        }\n        this.cachedText = text;\n      }\n    }\n  }]);\n\n  return SyntaxCodeBlock;\n}(_code2.default);\n\nSyntaxCodeBlock.className = 'ql-syntax';\n\nvar CodeToken = new _parchment2.default.Attributor.Class('token', 'hljs', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nvar Syntax = function (_Module) {\n  _inherits(Syntax, _Module);\n\n  _createClass(Syntax, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(CodeToken, true);\n      _quill2.default.register(SyntaxCodeBlock, true);\n    }\n  }]);\n\n  function Syntax(quill, options) {\n    _classCallCheck(this, Syntax);\n\n    var _this2 = _possibleConstructorReturn(this, (Syntax.__proto__ || Object.getPrototypeOf(Syntax)).call(this, quill, options));\n\n    if (typeof _this2.options.highlight !== 'function') {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    var timer = null;\n    _this2.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        _this2.highlight();\n        timer = null;\n      }, _this2.options.interval);\n    });\n    _this2.highlight();\n    return _this2;\n  }\n\n  _createClass(Syntax, [{\n    key: 'highlight',\n    value: function highlight() {\n      var _this3 = this;\n\n      if (this.quill.selection.composing) return;\n      this.quill.update(_quill2.default.sources.USER);\n      var range = this.quill.getSelection();\n      this.quill.scroll.descendants(SyntaxCodeBlock).forEach(function (code) {\n        code.highlight(_this3.options.highlight);\n      });\n      this.quill.update(_quill2.default.sources.SILENT);\n      if (range != null) {\n        this.quill.setSelection(range, _quill2.default.sources.SILENT);\n      }\n    }\n  }]);\n\n  return Syntax;\n}(_module2.default);\n\nSyntax.DEFAULTS = {\n  highlight: function () {\n    if (window.hljs == null) return null;\n    return function (text) {\n      var result = window.hljs.highlightAuto(text);\n      return result.value;\n    };\n  }(),\n  interval: 1000\n};\n\nexports.CodeBlock = SyntaxCodeBlock;\nexports.CodeToken = CodeToken;\nexports.default = Syntax;\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform=\\\"translate(24 18) rotate(-180)\\\"/> </svg>\";\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BubbleTooltip = undefined;\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{ header: 1 }, { header: 2 }, 'blockquote']];\n\nvar BubbleTheme = function (_BaseTheme) {\n  _inherits(BubbleTheme, _BaseTheme);\n\n  function BubbleTheme(quill, options) {\n    _classCallCheck(this, BubbleTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (BubbleTheme.__proto__ || Object.getPrototypeOf(BubbleTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-bubble');\n    return _this;\n  }\n\n  _createClass(BubbleTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n    }\n  }]);\n\n  return BubbleTheme;\n}(_base2.default);\n\nBubbleTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\n\nvar BubbleTooltip = function (_BaseTooltip) {\n  _inherits(BubbleTooltip, _BaseTooltip);\n\n  function BubbleTooltip(quill, bounds) {\n    _classCallCheck(this, BubbleTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (BubbleTooltip.__proto__ || Object.getPrototypeOf(BubbleTooltip)).call(this, quill, bounds));\n\n    _this2.quill.on(_emitter2.default.events.EDITOR_CHANGE, function (type, range, oldRange, source) {\n      if (type !== _emitter2.default.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === _emitter2.default.sources.USER) {\n        _this2.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        _this2.root.style.left = '0px';\n        _this2.root.style.width = '';\n        _this2.root.style.width = _this2.root.offsetWidth + 'px';\n        var lines = _this2.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          _this2.position(_this2.quill.getBounds(range));\n        } else {\n          var lastLine = lines[lines.length - 1];\n          var index = _this2.quill.getIndex(lastLine);\n          var length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          var _bounds = _this2.quill.getBounds(new _selection.Range(index, length));\n          _this2.position(_bounds);\n        }\n      } else if (document.activeElement !== _this2.textbox && _this2.quill.hasFocus()) {\n        _this2.hide();\n      }\n    });\n    return _this2;\n  }\n\n  _createClass(BubbleTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('.ql-close').addEventListener('click', function () {\n        _this3.root.classList.remove('ql-editing');\n      });\n      this.quill.on(_emitter2.default.events.SCROLL_OPTIMIZE, function () {\n        // Let selection be restored by toolbar handlers before repositioning\n        setTimeout(function () {\n          if (_this3.root.classList.contains('ql-hidden')) return;\n          var range = _this3.quill.getSelection();\n          if (range != null) {\n            _this3.position(_this3.quill.getBounds(range));\n          }\n        }, 1);\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.show();\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var shift = _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'position', this).call(this, reference);\n      var arrow = this.root.querySelector('.ql-tooltip-arrow');\n      arrow.style.marginLeft = '';\n      if (shift === 0) return shift;\n      arrow.style.marginLeft = -1 * shift - arrow.offsetWidth / 2 + 'px';\n    }\n  }]);\n\n  return BubbleTooltip;\n}(_base.BaseTooltip);\n\nBubbleTooltip.TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n\nexports.BubbleTooltip = BubbleTooltip;\nexports.default = BubbleTheme;\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(63);\n\n\n/***/ })\n/******/ ])[\"default\"];\n});","import PlainToast from \"../src/plain/PlainToast.js\";\nexport default class ElixToast extends PlainToast {}\ncustomElements.define(\"elix-toast\", ElixToast);\n","// node_modules/@lit/reactive-element/css-tag.js\nvar t = window.ShadowRoot && (window.ShadyCSS === void 0 || window.ShadyCSS.nativeShadow) && \"adoptedStyleSheets\" in Document.prototype && \"replace\" in CSSStyleSheet.prototype;\nvar e = Symbol();\nvar n = /* @__PURE__ */ new Map();\nvar s = class {\n  constructor(t3, n5) {\n    if (this._$cssResult$ = true, n5 !== e)\n      throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");\n    this.cssText = t3;\n  }\n  get styleSheet() {\n    let e4 = n.get(this.cssText);\n    return t && e4 === void 0 && (n.set(this.cssText, e4 = new CSSStyleSheet()), e4.replaceSync(this.cssText)), e4;\n  }\n  toString() {\n    return this.cssText;\n  }\n};\nvar o = (t3) => new s(typeof t3 == \"string\" ? t3 : t3 + \"\", e);\nvar r = (t3, ...n5) => {\n  const o5 = t3.length === 1 ? t3[0] : n5.reduce((e4, n6, s5) => e4 + ((t4) => {\n    if (t4._$cssResult$ === true)\n      return t4.cssText;\n    if (typeof t4 == \"number\")\n      return t4;\n    throw Error(\"Value passed to 'css' function must be a 'css' function result: \" + t4 + \". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\");\n  })(n6) + t3[s5 + 1], t3[0]);\n  return new s(o5, e);\n};\nvar i = (e4, n5) => {\n  t ? e4.adoptedStyleSheets = n5.map((t3) => t3 instanceof CSSStyleSheet ? t3 : t3.styleSheet) : n5.forEach((t3) => {\n    const n6 = document.createElement(\"style\"), s5 = window.litNonce;\n    s5 !== void 0 && n6.setAttribute(\"nonce\", s5), n6.textContent = t3.cssText, e4.appendChild(n6);\n  });\n};\nvar S = t ? (t3) => t3 : (t3) => t3 instanceof CSSStyleSheet ? ((t4) => {\n  let e4 = \"\";\n  for (const n5 of t4.cssRules)\n    e4 += n5.cssText;\n  return o(e4);\n})(t3) : t3;\n\n// node_modules/@lit/reactive-element/reactive-element.js\nvar s2;\nvar e2 = window.trustedTypes;\nvar r2 = e2 ? e2.emptyScript : \"\";\nvar h = window.reactiveElementPolyfillSupport;\nvar o2 = { toAttribute(t3, i3) {\n  switch (i3) {\n    case Boolean:\n      t3 = t3 ? r2 : null;\n      break;\n    case Object:\n    case Array:\n      t3 = t3 == null ? t3 : JSON.stringify(t3);\n  }\n  return t3;\n}, fromAttribute(t3, i3) {\n  let s5 = t3;\n  switch (i3) {\n    case Boolean:\n      s5 = t3 !== null;\n      break;\n    case Number:\n      s5 = t3 === null ? null : Number(t3);\n      break;\n    case Object:\n    case Array:\n      try {\n        s5 = JSON.parse(t3);\n      } catch (t4) {\n        s5 = null;\n      }\n  }\n  return s5;\n} };\nvar n2 = (t3, i3) => i3 !== t3 && (i3 == i3 || t3 == t3);\nvar l = { attribute: true, type: String, converter: o2, reflect: false, hasChanged: n2 };\nvar a = class extends HTMLElement {\n  constructor() {\n    super(), this._$Et = /* @__PURE__ */ new Map(), this.isUpdatePending = false, this.hasUpdated = false, this._$Ei = null, this.o();\n  }\n  static addInitializer(t3) {\n    var i3;\n    (i3 = this.l) !== null && i3 !== void 0 || (this.l = []), this.l.push(t3);\n  }\n  static get observedAttributes() {\n    this.finalize();\n    const t3 = [];\n    return this.elementProperties.forEach((i3, s5) => {\n      const e4 = this._$Eh(s5, i3);\n      e4 !== void 0 && (this._$Eu.set(e4, s5), t3.push(e4));\n    }), t3;\n  }\n  static createProperty(t3, i3 = l) {\n    if (i3.state && (i3.attribute = false), this.finalize(), this.elementProperties.set(t3, i3), !i3.noAccessor && !this.prototype.hasOwnProperty(t3)) {\n      const s5 = typeof t3 == \"symbol\" ? Symbol() : \"__\" + t3, e4 = this.getPropertyDescriptor(t3, s5, i3);\n      e4 !== void 0 && Object.defineProperty(this.prototype, t3, e4);\n    }\n  }\n  static getPropertyDescriptor(t3, i3, s5) {\n    return { get() {\n      return this[i3];\n    }, set(e4) {\n      const r4 = this[t3];\n      this[i3] = e4, this.requestUpdate(t3, r4, s5);\n    }, configurable: true, enumerable: true };\n  }\n  static getPropertyOptions(t3) {\n    return this.elementProperties.get(t3) || l;\n  }\n  static finalize() {\n    if (this.hasOwnProperty(\"finalized\"))\n      return false;\n    this.finalized = true;\n    const t3 = Object.getPrototypeOf(this);\n    if (t3.finalize(), this.elementProperties = new Map(t3.elementProperties), this._$Eu = /* @__PURE__ */ new Map(), this.hasOwnProperty(\"properties\")) {\n      const t4 = this.properties, i3 = [...Object.getOwnPropertyNames(t4), ...Object.getOwnPropertySymbols(t4)];\n      for (const s5 of i3)\n        this.createProperty(s5, t4[s5]);\n    }\n    return this.elementStyles = this.finalizeStyles(this.styles), true;\n  }\n  static finalizeStyles(i3) {\n    const s5 = [];\n    if (Array.isArray(i3)) {\n      const e4 = new Set(i3.flat(1 / 0).reverse());\n      for (const i4 of e4)\n        s5.unshift(S(i4));\n    } else\n      i3 !== void 0 && s5.push(S(i3));\n    return s5;\n  }\n  static _$Eh(t3, i3) {\n    const s5 = i3.attribute;\n    return s5 === false ? void 0 : typeof s5 == \"string\" ? s5 : typeof t3 == \"string\" ? t3.toLowerCase() : void 0;\n  }\n  o() {\n    var t3;\n    this._$Ep = new Promise((t4) => this.enableUpdating = t4), this._$AL = /* @__PURE__ */ new Map(), this._$Em(), this.requestUpdate(), (t3 = this.constructor.l) === null || t3 === void 0 || t3.forEach((t4) => t4(this));\n  }\n  addController(t3) {\n    var i3, s5;\n    ((i3 = this._$Eg) !== null && i3 !== void 0 ? i3 : this._$Eg = []).push(t3), this.renderRoot !== void 0 && this.isConnected && ((s5 = t3.hostConnected) === null || s5 === void 0 || s5.call(t3));\n  }\n  removeController(t3) {\n    var i3;\n    (i3 = this._$Eg) === null || i3 === void 0 || i3.splice(this._$Eg.indexOf(t3) >>> 0, 1);\n  }\n  _$Em() {\n    this.constructor.elementProperties.forEach((t3, i3) => {\n      this.hasOwnProperty(i3) && (this._$Et.set(i3, this[i3]), delete this[i3]);\n    });\n  }\n  createRenderRoot() {\n    var t3;\n    const s5 = (t3 = this.shadowRoot) !== null && t3 !== void 0 ? t3 : this.attachShadow(this.constructor.shadowRootOptions);\n    return i(s5, this.constructor.elementStyles), s5;\n  }\n  connectedCallback() {\n    var t3;\n    this.renderRoot === void 0 && (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n      var i3;\n      return (i3 = t4.hostConnected) === null || i3 === void 0 ? void 0 : i3.call(t4);\n    });\n  }\n  enableUpdating(t3) {\n  }\n  disconnectedCallback() {\n    var t3;\n    (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n      var i3;\n      return (i3 = t4.hostDisconnected) === null || i3 === void 0 ? void 0 : i3.call(t4);\n    });\n  }\n  attributeChangedCallback(t3, i3, s5) {\n    this._$AK(t3, s5);\n  }\n  _$ES(t3, i3, s5 = l) {\n    var e4, r4;\n    const h3 = this.constructor._$Eh(t3, s5);\n    if (h3 !== void 0 && s5.reflect === true) {\n      const n5 = ((r4 = (e4 = s5.converter) === null || e4 === void 0 ? void 0 : e4.toAttribute) !== null && r4 !== void 0 ? r4 : o2.toAttribute)(i3, s5.type);\n      this._$Ei = t3, n5 == null ? this.removeAttribute(h3) : this.setAttribute(h3, n5), this._$Ei = null;\n    }\n  }\n  _$AK(t3, i3) {\n    var s5, e4, r4;\n    const h3 = this.constructor, n5 = h3._$Eu.get(t3);\n    if (n5 !== void 0 && this._$Ei !== n5) {\n      const t4 = h3.getPropertyOptions(n5), l4 = t4.converter, a3 = (r4 = (e4 = (s5 = l4) === null || s5 === void 0 ? void 0 : s5.fromAttribute) !== null && e4 !== void 0 ? e4 : typeof l4 == \"function\" ? l4 : null) !== null && r4 !== void 0 ? r4 : o2.fromAttribute;\n      this._$Ei = n5, this[n5] = a3(i3, t4.type), this._$Ei = null;\n    }\n  }\n  requestUpdate(t3, i3, s5) {\n    let e4 = true;\n    t3 !== void 0 && (((s5 = s5 || this.constructor.getPropertyOptions(t3)).hasChanged || n2)(this[t3], i3) ? (this._$AL.has(t3) || this._$AL.set(t3, i3), s5.reflect === true && this._$Ei !== t3 && (this._$E_ === void 0 && (this._$E_ = /* @__PURE__ */ new Map()), this._$E_.set(t3, s5))) : e4 = false), !this.isUpdatePending && e4 && (this._$Ep = this._$EC());\n  }\n  async _$EC() {\n    this.isUpdatePending = true;\n    try {\n      await this._$Ep;\n    } catch (t4) {\n      Promise.reject(t4);\n    }\n    const t3 = this.scheduleUpdate();\n    return t3 != null && await t3, !this.isUpdatePending;\n  }\n  scheduleUpdate() {\n    return this.performUpdate();\n  }\n  performUpdate() {\n    var t3;\n    if (!this.isUpdatePending)\n      return;\n    this.hasUpdated, this._$Et && (this._$Et.forEach((t4, i4) => this[i4] = t4), this._$Et = void 0);\n    let i3 = false;\n    const s5 = this._$AL;\n    try {\n      i3 = this.shouldUpdate(s5), i3 ? (this.willUpdate(s5), (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n        var i4;\n        return (i4 = t4.hostUpdate) === null || i4 === void 0 ? void 0 : i4.call(t4);\n      }), this.update(s5)) : this._$EU();\n    } catch (t4) {\n      throw i3 = false, this._$EU(), t4;\n    }\n    i3 && this._$AE(s5);\n  }\n  willUpdate(t3) {\n  }\n  _$AE(t3) {\n    var i3;\n    (i3 = this._$Eg) === null || i3 === void 0 || i3.forEach((t4) => {\n      var i4;\n      return (i4 = t4.hostUpdated) === null || i4 === void 0 ? void 0 : i4.call(t4);\n    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(t3)), this.updated(t3);\n  }\n  _$EU() {\n    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;\n  }\n  get updateComplete() {\n    return this.getUpdateComplete();\n  }\n  getUpdateComplete() {\n    return this._$Ep;\n  }\n  shouldUpdate(t3) {\n    return true;\n  }\n  update(t3) {\n    this._$E_ !== void 0 && (this._$E_.forEach((t4, i3) => this._$ES(i3, this[i3], t4)), this._$E_ = void 0), this._$EU();\n  }\n  updated(t3) {\n  }\n  firstUpdated(t3) {\n  }\n};\na.finalized = true, a.elementProperties = /* @__PURE__ */ new Map(), a.elementStyles = [], a.shadowRootOptions = { mode: \"open\" }, h == null || h({ ReactiveElement: a }), ((s2 = globalThis.reactiveElementVersions) !== null && s2 !== void 0 ? s2 : globalThis.reactiveElementVersions = []).push(\"1.2.3\");\n\n// node_modules/lit-html/lit-html.js\nvar t2;\nvar i2 = globalThis.trustedTypes;\nvar s3 = i2 ? i2.createPolicy(\"lit-html\", { createHTML: (t3) => t3 }) : void 0;\nvar e3 = `lit$${(Math.random() + \"\").slice(9)}$`;\nvar o3 = \"?\" + e3;\nvar n3 = `<${o3}>`;\nvar l2 = document;\nvar h2 = (t3 = \"\") => l2.createComment(t3);\nvar r3 = (t3) => t3 === null || typeof t3 != \"object\" && typeof t3 != \"function\";\nvar d = Array.isArray;\nvar u = (t3) => {\n  var i3;\n  return d(t3) || typeof ((i3 = t3) === null || i3 === void 0 ? void 0 : i3[Symbol.iterator]) == \"function\";\n};\nvar c = /<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g;\nvar v = /-->/g;\nvar a2 = />/g;\nvar f = />|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g;\nvar _ = /'/g;\nvar m = /\"/g;\nvar g = /^(?:script|style|textarea|title)$/i;\nvar p = (t3) => (i3, ...s5) => ({ _$litType$: t3, strings: i3, values: s5 });\nvar $ = p(1);\nvar y = p(2);\nvar b = Symbol.for(\"lit-noChange\");\nvar w = Symbol.for(\"lit-nothing\");\nvar T = /* @__PURE__ */ new WeakMap();\nvar x = (t3, i3, s5) => {\n  var e4, o5;\n  const n5 = (e4 = s5 == null ? void 0 : s5.renderBefore) !== null && e4 !== void 0 ? e4 : i3;\n  let l4 = n5._$litPart$;\n  if (l4 === void 0) {\n    const t4 = (o5 = s5 == null ? void 0 : s5.renderBefore) !== null && o5 !== void 0 ? o5 : null;\n    n5._$litPart$ = l4 = new N(i3.insertBefore(h2(), t4), t4, void 0, s5 != null ? s5 : {});\n  }\n  return l4._$AI(t3), l4;\n};\nvar A = l2.createTreeWalker(l2, 129, null, false);\nvar C = (t3, i3) => {\n  const o5 = t3.length - 1, l4 = [];\n  let h3, r4 = i3 === 2 ? \"<svg>\" : \"\", d2 = c;\n  for (let i4 = 0; i4 < o5; i4++) {\n    const s5 = t3[i4];\n    let o6, u3, p2 = -1, $2 = 0;\n    for (; $2 < s5.length && (d2.lastIndex = $2, u3 = d2.exec(s5), u3 !== null); )\n      $2 = d2.lastIndex, d2 === c ? u3[1] === \"!--\" ? d2 = v : u3[1] !== void 0 ? d2 = a2 : u3[2] !== void 0 ? (g.test(u3[2]) && (h3 = RegExp(\"</\" + u3[2], \"g\")), d2 = f) : u3[3] !== void 0 && (d2 = f) : d2 === f ? u3[0] === \">\" ? (d2 = h3 != null ? h3 : c, p2 = -1) : u3[1] === void 0 ? p2 = -2 : (p2 = d2.lastIndex - u3[2].length, o6 = u3[1], d2 = u3[3] === void 0 ? f : u3[3] === '\"' ? m : _) : d2 === m || d2 === _ ? d2 = f : d2 === v || d2 === a2 ? d2 = c : (d2 = f, h3 = void 0);\n    const y2 = d2 === f && t3[i4 + 1].startsWith(\"/>\") ? \" \" : \"\";\n    r4 += d2 === c ? s5 + n3 : p2 >= 0 ? (l4.push(o6), s5.slice(0, p2) + \"$lit$\" + s5.slice(p2) + e3 + y2) : s5 + e3 + (p2 === -2 ? (l4.push(void 0), i4) : y2);\n  }\n  const u2 = r4 + (t3[o5] || \"<?>\") + (i3 === 2 ? \"</svg>\" : \"\");\n  if (!Array.isArray(t3) || !t3.hasOwnProperty(\"raw\"))\n    throw Error(\"invalid template strings array\");\n  return [s3 !== void 0 ? s3.createHTML(u2) : u2, l4];\n};\nvar E = class {\n  constructor({ strings: t3, _$litType$: s5 }, n5) {\n    let l4;\n    this.parts = [];\n    let r4 = 0, d2 = 0;\n    const u2 = t3.length - 1, c2 = this.parts, [v2, a3] = C(t3, s5);\n    if (this.el = E.createElement(v2, n5), A.currentNode = this.el.content, s5 === 2) {\n      const t4 = this.el.content, i3 = t4.firstChild;\n      i3.remove(), t4.append(...i3.childNodes);\n    }\n    for (; (l4 = A.nextNode()) !== null && c2.length < u2; ) {\n      if (l4.nodeType === 1) {\n        if (l4.hasAttributes()) {\n          const t4 = [];\n          for (const i3 of l4.getAttributeNames())\n            if (i3.endsWith(\"$lit$\") || i3.startsWith(e3)) {\n              const s6 = a3[d2++];\n              if (t4.push(i3), s6 !== void 0) {\n                const t5 = l4.getAttribute(s6.toLowerCase() + \"$lit$\").split(e3), i4 = /([.?@])?(.*)/.exec(s6);\n                c2.push({ type: 1, index: r4, name: i4[2], strings: t5, ctor: i4[1] === \".\" ? M : i4[1] === \"?\" ? H : i4[1] === \"@\" ? I : S2 });\n              } else\n                c2.push({ type: 6, index: r4 });\n            }\n          for (const i3 of t4)\n            l4.removeAttribute(i3);\n        }\n        if (g.test(l4.tagName)) {\n          const t4 = l4.textContent.split(e3), s6 = t4.length - 1;\n          if (s6 > 0) {\n            l4.textContent = i2 ? i2.emptyScript : \"\";\n            for (let i3 = 0; i3 < s6; i3++)\n              l4.append(t4[i3], h2()), A.nextNode(), c2.push({ type: 2, index: ++r4 });\n            l4.append(t4[s6], h2());\n          }\n        }\n      } else if (l4.nodeType === 8)\n        if (l4.data === o3)\n          c2.push({ type: 2, index: r4 });\n        else {\n          let t4 = -1;\n          for (; (t4 = l4.data.indexOf(e3, t4 + 1)) !== -1; )\n            c2.push({ type: 7, index: r4 }), t4 += e3.length - 1;\n        }\n      r4++;\n    }\n  }\n  static createElement(t3, i3) {\n    const s5 = l2.createElement(\"template\");\n    return s5.innerHTML = t3, s5;\n  }\n};\nfunction P(t3, i3, s5 = t3, e4) {\n  var o5, n5, l4, h3;\n  if (i3 === b)\n    return i3;\n  let d2 = e4 !== void 0 ? (o5 = s5._$Cl) === null || o5 === void 0 ? void 0 : o5[e4] : s5._$Cu;\n  const u2 = r3(i3) ? void 0 : i3._$litDirective$;\n  return (d2 == null ? void 0 : d2.constructor) !== u2 && ((n5 = d2 == null ? void 0 : d2._$AO) === null || n5 === void 0 || n5.call(d2, false), u2 === void 0 ? d2 = void 0 : (d2 = new u2(t3), d2._$AT(t3, s5, e4)), e4 !== void 0 ? ((l4 = (h3 = s5)._$Cl) !== null && l4 !== void 0 ? l4 : h3._$Cl = [])[e4] = d2 : s5._$Cu = d2), d2 !== void 0 && (i3 = P(t3, d2._$AS(t3, i3.values), d2, e4)), i3;\n}\nvar V = class {\n  constructor(t3, i3) {\n    this.v = [], this._$AN = void 0, this._$AD = t3, this._$AM = i3;\n  }\n  get parentNode() {\n    return this._$AM.parentNode;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  p(t3) {\n    var i3;\n    const { el: { content: s5 }, parts: e4 } = this._$AD, o5 = ((i3 = t3 == null ? void 0 : t3.creationScope) !== null && i3 !== void 0 ? i3 : l2).importNode(s5, true);\n    A.currentNode = o5;\n    let n5 = A.nextNode(), h3 = 0, r4 = 0, d2 = e4[0];\n    for (; d2 !== void 0; ) {\n      if (h3 === d2.index) {\n        let i4;\n        d2.type === 2 ? i4 = new N(n5, n5.nextSibling, this, t3) : d2.type === 1 ? i4 = new d2.ctor(n5, d2.name, d2.strings, this, t3) : d2.type === 6 && (i4 = new L(n5, this, t3)), this.v.push(i4), d2 = e4[++r4];\n      }\n      h3 !== (d2 == null ? void 0 : d2.index) && (n5 = A.nextNode(), h3++);\n    }\n    return o5;\n  }\n  m(t3) {\n    let i3 = 0;\n    for (const s5 of this.v)\n      s5 !== void 0 && (s5.strings !== void 0 ? (s5._$AI(t3, s5, i3), i3 += s5.strings.length - 2) : s5._$AI(t3[i3])), i3++;\n  }\n};\nvar N = class {\n  constructor(t3, i3, s5, e4) {\n    var o5;\n    this.type = 2, this._$AH = w, this._$AN = void 0, this._$AA = t3, this._$AB = i3, this._$AM = s5, this.options = e4, this._$Cg = (o5 = e4 == null ? void 0 : e4.isConnected) === null || o5 === void 0 || o5;\n  }\n  get _$AU() {\n    var t3, i3;\n    return (i3 = (t3 = this._$AM) === null || t3 === void 0 ? void 0 : t3._$AU) !== null && i3 !== void 0 ? i3 : this._$Cg;\n  }\n  get parentNode() {\n    let t3 = this._$AA.parentNode;\n    const i3 = this._$AM;\n    return i3 !== void 0 && t3.nodeType === 11 && (t3 = i3.parentNode), t3;\n  }\n  get startNode() {\n    return this._$AA;\n  }\n  get endNode() {\n    return this._$AB;\n  }\n  _$AI(t3, i3 = this) {\n    t3 = P(this, t3, i3), r3(t3) ? t3 === w || t3 == null || t3 === \"\" ? (this._$AH !== w && this._$AR(), this._$AH = w) : t3 !== this._$AH && t3 !== b && this.$(t3) : t3._$litType$ !== void 0 ? this.T(t3) : t3.nodeType !== void 0 ? this.S(t3) : u(t3) ? this.A(t3) : this.$(t3);\n  }\n  M(t3, i3 = this._$AB) {\n    return this._$AA.parentNode.insertBefore(t3, i3);\n  }\n  S(t3) {\n    this._$AH !== t3 && (this._$AR(), this._$AH = this.M(t3));\n  }\n  $(t3) {\n    this._$AH !== w && r3(this._$AH) ? this._$AA.nextSibling.data = t3 : this.S(l2.createTextNode(t3)), this._$AH = t3;\n  }\n  T(t3) {\n    var i3;\n    const { values: s5, _$litType$: e4 } = t3, o5 = typeof e4 == \"number\" ? this._$AC(t3) : (e4.el === void 0 && (e4.el = E.createElement(e4.h, this.options)), e4);\n    if (((i3 = this._$AH) === null || i3 === void 0 ? void 0 : i3._$AD) === o5)\n      this._$AH.m(s5);\n    else {\n      const t4 = new V(o5, this), i4 = t4.p(this.options);\n      t4.m(s5), this.S(i4), this._$AH = t4;\n    }\n  }\n  _$AC(t3) {\n    let i3 = T.get(t3.strings);\n    return i3 === void 0 && T.set(t3.strings, i3 = new E(t3)), i3;\n  }\n  A(t3) {\n    d(this._$AH) || (this._$AH = [], this._$AR());\n    const i3 = this._$AH;\n    let s5, e4 = 0;\n    for (const o5 of t3)\n      e4 === i3.length ? i3.push(s5 = new N(this.M(h2()), this.M(h2()), this, this.options)) : s5 = i3[e4], s5._$AI(o5), e4++;\n    e4 < i3.length && (this._$AR(s5 && s5._$AB.nextSibling, e4), i3.length = e4);\n  }\n  _$AR(t3 = this._$AA.nextSibling, i3) {\n    var s5;\n    for ((s5 = this._$AP) === null || s5 === void 0 || s5.call(this, false, true, i3); t3 && t3 !== this._$AB; ) {\n      const i4 = t3.nextSibling;\n      t3.remove(), t3 = i4;\n    }\n  }\n  setConnected(t3) {\n    var i3;\n    this._$AM === void 0 && (this._$Cg = t3, (i3 = this._$AP) === null || i3 === void 0 || i3.call(this, t3));\n  }\n};\nvar S2 = class {\n  constructor(t3, i3, s5, e4, o5) {\n    this.type = 1, this._$AH = w, this._$AN = void 0, this.element = t3, this.name = i3, this._$AM = e4, this.options = o5, s5.length > 2 || s5[0] !== \"\" || s5[1] !== \"\" ? (this._$AH = Array(s5.length - 1).fill(new String()), this.strings = s5) : this._$AH = w;\n  }\n  get tagName() {\n    return this.element.tagName;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AI(t3, i3 = this, s5, e4) {\n    const o5 = this.strings;\n    let n5 = false;\n    if (o5 === void 0)\n      t3 = P(this, t3, i3, 0), n5 = !r3(t3) || t3 !== this._$AH && t3 !== b, n5 && (this._$AH = t3);\n    else {\n      const e5 = t3;\n      let l4, h3;\n      for (t3 = o5[0], l4 = 0; l4 < o5.length - 1; l4++)\n        h3 = P(this, e5[s5 + l4], i3, l4), h3 === b && (h3 = this._$AH[l4]), n5 || (n5 = !r3(h3) || h3 !== this._$AH[l4]), h3 === w ? t3 = w : t3 !== w && (t3 += (h3 != null ? h3 : \"\") + o5[l4 + 1]), this._$AH[l4] = h3;\n    }\n    n5 && !e4 && this.k(t3);\n  }\n  k(t3) {\n    t3 === w ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t3 != null ? t3 : \"\");\n  }\n};\nvar M = class extends S2 {\n  constructor() {\n    super(...arguments), this.type = 3;\n  }\n  k(t3) {\n    this.element[this.name] = t3 === w ? void 0 : t3;\n  }\n};\nvar k = i2 ? i2.emptyScript : \"\";\nvar H = class extends S2 {\n  constructor() {\n    super(...arguments), this.type = 4;\n  }\n  k(t3) {\n    t3 && t3 !== w ? this.element.setAttribute(this.name, k) : this.element.removeAttribute(this.name);\n  }\n};\nvar I = class extends S2 {\n  constructor(t3, i3, s5, e4, o5) {\n    super(t3, i3, s5, e4, o5), this.type = 5;\n  }\n  _$AI(t3, i3 = this) {\n    var s5;\n    if ((t3 = (s5 = P(this, t3, i3, 0)) !== null && s5 !== void 0 ? s5 : w) === b)\n      return;\n    const e4 = this._$AH, o5 = t3 === w && e4 !== w || t3.capture !== e4.capture || t3.once !== e4.once || t3.passive !== e4.passive, n5 = t3 !== w && (e4 === w || o5);\n    o5 && this.element.removeEventListener(this.name, this, e4), n5 && this.element.addEventListener(this.name, this, t3), this._$AH = t3;\n  }\n  handleEvent(t3) {\n    var i3, s5;\n    typeof this._$AH == \"function\" ? this._$AH.call((s5 = (i3 = this.options) === null || i3 === void 0 ? void 0 : i3.host) !== null && s5 !== void 0 ? s5 : this.element, t3) : this._$AH.handleEvent(t3);\n  }\n};\nvar L = class {\n  constructor(t3, i3, s5) {\n    this.element = t3, this.type = 6, this._$AN = void 0, this._$AM = i3, this.options = s5;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AI(t3) {\n    P(this, t3);\n  }\n};\nvar z = window.litHtmlPolyfillSupport;\nz == null || z(E, N), ((t2 = globalThis.litHtmlVersions) !== null && t2 !== void 0 ? t2 : globalThis.litHtmlVersions = []).push(\"2.1.3\");\n\n// node_modules/lit-element/lit-element.js\nvar l3;\nvar o4;\nvar s4 = class extends a {\n  constructor() {\n    super(...arguments), this.renderOptions = { host: this }, this._$Dt = void 0;\n  }\n  createRenderRoot() {\n    var t3, e4;\n    const i3 = super.createRenderRoot();\n    return (t3 = (e4 = this.renderOptions).renderBefore) !== null && t3 !== void 0 || (e4.renderBefore = i3.firstChild), i3;\n  }\n  update(t3) {\n    const i3 = this.render();\n    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t3), this._$Dt = x(i3, this.renderRoot, this.renderOptions);\n  }\n  connectedCallback() {\n    var t3;\n    super.connectedCallback(), (t3 = this._$Dt) === null || t3 === void 0 || t3.setConnected(true);\n  }\n  disconnectedCallback() {\n    var t3;\n    super.disconnectedCallback(), (t3 = this._$Dt) === null || t3 === void 0 || t3.setConnected(false);\n  }\n  render() {\n    return b;\n  }\n};\ns4.finalized = true, s4._$litElement$ = true, (l3 = globalThis.litElementHydrateSupport) === null || l3 === void 0 || l3.call(globalThis, { LitElement: s4 });\nvar n4 = globalThis.litElementPolyfillSupport;\nn4 == null || n4({ LitElement: s4 });\n((o4 = globalThis.litElementVersions) !== null && o4 !== void 0 ? o4 : globalThis.litElementVersions = []).push(\"3.1.2\");\n\nexport {\n  o,\n  r,\n  $,\n  y,\n  b,\n  w,\n  s4 as s\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/styles/component.styles.ts\nvar component_styles_default = r`\n  :host {\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  [hidden] {\n    display: none !important;\n  }\n`;\n\nexport {\n  component_styles_default\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio-group/radio-group.styles.ts\nvar radio_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .radio-group {\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-radius: var(--sl-border-radius-medium);\n    padding: var(--sl-spacing-large);\n    padding-top: var(--sl-spacing-x-small);\n  }\n\n  .radio-group .radio-group__label {\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    padding: 0 var(--sl-spacing-2x-small);\n  }\n\n  ::slotted(sl-radio:not(:last-of-type)) {\n    display: block;\n    margin-bottom: var(--sl-spacing-2x-small);\n  }\n\n  .radio-group:not(.radio-group--has-fieldset) {\n    border: none;\n    padding: 0;\n    margin: 0;\n    min-width: 0;\n  }\n\n  .radio-group:not(.radio-group--has-fieldset) .radio-group__label {\n    position: absolute;\n    width: 0;\n    height: 0;\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    overflow: hidden;\n    white-space: nowrap;\n  }\n`;\n\nexport {\n  radio_group_styles_default\n};\n","// node_modules/lit-html/directive.js\nvar t = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };\nvar e = (t2) => (...e2) => ({ _$litDirective$: t2, values: e2 });\nvar i = class {\n  constructor(t2) {\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AT(t2, e2, i2) {\n    this._$Ct = t2, this._$AM = e2, this._$Ci = i2;\n  }\n  _$AS(t2, e2) {\n    return this.update(t2, e2);\n  }\n  update(t2, e2) {\n    return this.render(...e2);\n  }\n};\n\nexport {\n  t,\n  e,\n  i\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  e,\n  i,\n  t\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  b\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directives/class-map.js\nvar o = e(class extends i {\n  constructor(t2) {\n    var i2;\n    if (super(t2), t2.type !== t.ATTRIBUTE || t2.name !== \"class\" || ((i2 = t2.strings) === null || i2 === void 0 ? void 0 : i2.length) > 2)\n      throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\");\n  }\n  render(t2) {\n    return \" \" + Object.keys(t2).filter((i2) => t2[i2]).join(\" \") + \" \";\n  }\n  update(i2, [s]) {\n    var r, o2;\n    if (this.st === void 0) {\n      this.st = /* @__PURE__ */ new Set(), i2.strings !== void 0 && (this.et = new Set(i2.strings.join(\" \").split(/\\s/).filter((t2) => t2 !== \"\")));\n      for (const t2 in s)\n        s[t2] && !((r = this.et) === null || r === void 0 ? void 0 : r.has(t2)) && this.st.add(t2);\n      return this.render(s);\n    }\n    const e2 = i2.element.classList;\n    this.st.forEach((t2) => {\n      t2 in s || (e2.remove(t2), this.st.delete(t2));\n    });\n    for (const t2 in s) {\n      const i3 = !!s[t2];\n      i3 === this.st.has(t2) || ((o2 = this.et) === null || o2 === void 0 ? void 0 : o2.has(t2)) || (i3 ? (e2.add(t2), this.st.add(t2)) : (e2.remove(t2), this.st.delete(t2)));\n    }\n    return b;\n  }\n});\n\nexport {\n  o\n};\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toESM = (module, isNodeMode) => {\n  return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, \"default\", !isNodeMode && module && module.__esModule ? { get: () => module.default, enumerable: true } : { value: module, enumerable: true })), module);\n};\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\nexport {\n  __spreadValues,\n  __spreadProps,\n  __objRest,\n  __commonJS,\n  __export,\n  __toESM,\n  __decorateClass\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/@lit/reactive-element/decorators/custom-element.js\nvar n = (n3) => (e4) => typeof e4 == \"function\" ? ((n4, e5) => (window.customElements.define(n4, e5), e5))(n3, e4) : ((n4, e5) => {\n  const { kind: t2, elements: i3 } = e5;\n  return { kind: t2, elements: i3, finisher(e6) {\n    window.customElements.define(n4, e6);\n  } };\n})(n3, e4);\n\n// node_modules/@lit/reactive-element/decorators/property.js\nvar i = (i3, e4) => e4.kind === \"method\" && e4.descriptor && !(\"value\" in e4.descriptor) ? __spreadProps(__spreadValues({}, e4), { finisher(n3) {\n  n3.createProperty(e4.key, i3);\n} }) : { kind: \"field\", key: Symbol(), placement: \"own\", descriptor: {}, originalKey: e4.key, initializer() {\n  typeof e4.initializer == \"function\" && (this[e4.key] = e4.initializer.call(this));\n}, finisher(n3) {\n  n3.createProperty(e4.key, i3);\n} };\nfunction e(e4) {\n  return (n3, t2) => t2 !== void 0 ? ((i3, e5, n4) => {\n    e5.constructor.createProperty(n4, i3);\n  })(e4, n3, t2) : i(e4, n3);\n}\n\n// node_modules/@lit/reactive-element/decorators/state.js\nfunction t(t2) {\n  return e(__spreadProps(__spreadValues({}, t2), { state: true }));\n}\n\n// node_modules/@lit/reactive-element/decorators/base.js\nvar o = ({ finisher: e4, descriptor: t2 }) => (o2, n3) => {\n  var r;\n  if (n3 === void 0) {\n    const n4 = (r = o2.originalKey) !== null && r !== void 0 ? r : o2.key, i3 = t2 != null ? { kind: \"method\", placement: \"prototype\", key: n4, descriptor: t2(o2.key) } : __spreadProps(__spreadValues({}, o2), { key: n4 });\n    return e4 != null && (i3.finisher = function(t3) {\n      e4(t3, n4);\n    }), i3;\n  }\n  {\n    const r2 = o2.constructor;\n    t2 !== void 0 && Object.defineProperty(o2, n3, t2(n3)), e4 == null || e4(r2, n3);\n  }\n};\n\n// node_modules/@lit/reactive-element/decorators/query.js\nfunction i2(i3, n3) {\n  return o({ descriptor: (o2) => {\n    const t2 = { get() {\n      var o3, n4;\n      return (n4 = (o3 = this.renderRoot) === null || o3 === void 0 ? void 0 : o3.querySelector(i3)) !== null && n4 !== void 0 ? n4 : null;\n    }, enumerable: true, configurable: true };\n    if (n3) {\n      const n4 = typeof o2 == \"symbol\" ? Symbol() : \"__\" + o2;\n      t2.get = function() {\n        var o3, t3;\n        return this[n4] === void 0 && (this[n4] = (t3 = (o3 = this.renderRoot) === null || o3 === void 0 ? void 0 : o3.querySelector(i3)) !== null && t3 !== void 0 ? t3 : null), this[n4];\n      };\n    }\n    return t2;\n  } });\n}\n\n// node_modules/@lit/reactive-element/decorators/query-async.js\nfunction e2(e4) {\n  return o({ descriptor: (r) => ({ async get() {\n    var r2;\n    return await this.updateComplete, (r2 = this.renderRoot) === null || r2 === void 0 ? void 0 : r2.querySelector(e4);\n  }, enumerable: true, configurable: true }) });\n}\n\n// node_modules/@lit/reactive-element/decorators/query-assigned-elements.js\nvar n2;\nvar e3 = ((n2 = window.HTMLSlotElement) === null || n2 === void 0 ? void 0 : n2.prototype.assignedElements) != null ? (o2, n3) => o2.assignedElements(n3) : (o2, n3) => o2.assignedNodes(n3).filter((o3) => o3.nodeType === Node.ELEMENT_NODE);\n\nexport {\n  n,\n  e,\n  t,\n  i2 as i,\n  e2\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  radio_group_styles_default\n} from \"./chunk.4CV4I4O2.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio-group/radio-group.ts\nvar RADIO_CHILDREN = [\"sl-radio\", \"sl-radio-button\"];\nvar SlRadioGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasButtonGroup = false;\n    this.label = \"\";\n    this.fieldset = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radiogroup\");\n  }\n  getAllRadios() {\n    return [...this.querySelectorAll(RADIO_CHILDREN.join(\",\"))].filter((el) => RADIO_CHILDREN.includes(el.tagName.toLowerCase()));\n  }\n  handleRadioClick(event) {\n    const target = event.target;\n    const checkedRadio = target.closest(RADIO_CHILDREN.map((selector) => `${selector}:not([disabled])`).join(\",\"));\n    if (checkedRadio) {\n      const radios = this.getAllRadios();\n      radios.forEach((radio) => {\n        radio.checked = radio === checkedRadio;\n        radio.input.tabIndex = radio === checkedRadio ? 0 : -1;\n      });\n    }\n  }\n  handleKeyDown(event) {\n    var _a;\n    if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(event.key)) {\n      const radios = this.getAllRadios().filter((radio) => !radio.disabled);\n      const checkedRadio = (_a = radios.find((radio) => radio.checked)) != null ? _a : radios[0];\n      const incr = [\"ArrowUp\", \"ArrowLeft\"].includes(event.key) ? -1 : 1;\n      let index = radios.indexOf(checkedRadio) + incr;\n      if (index < 0) {\n        index = radios.length - 1;\n      }\n      if (index > radios.length - 1) {\n        index = 0;\n      }\n      this.getAllRadios().forEach((radio) => {\n        radio.checked = false;\n        radio.input.tabIndex = -1;\n      });\n      radios[index].focus();\n      radios[index].checked = true;\n      radios[index].input.tabIndex = 0;\n      event.preventDefault();\n    }\n  }\n  handleSlotChange() {\n    const radios = this.getAllRadios();\n    const checkedRadio = radios.find((radio) => radio.checked);\n    this.hasButtonGroup = !!radios.find((radio) => radio.tagName.toLowerCase() === \"sl-radio-button\");\n    radios.forEach((radio) => {\n      radio.setAttribute(\"role\", \"radio\");\n      radio.input.tabIndex = -1;\n    });\n    if (checkedRadio) {\n      checkedRadio.input.tabIndex = 0;\n    } else if (radios.length > 0) {\n      radios[0].input.tabIndex = 0;\n    }\n  }\n  render() {\n    const defaultSlot = $`\n      <slot @click=${this.handleRadioClick} @keydown=${this.handleKeyDown} @slotchange=${this.handleSlotChange}></slot>\n    `;\n    return $`\n      <fieldset\n        part=\"base\"\n        class=${o({\n      \"radio-group\": true,\n      \"radio-group--has-fieldset\": this.fieldset\n    })}\n      >\n        <legend part=\"label\" class=\"radio-group__label\">\n          <slot name=\"label\">${this.label}</slot>\n        </legend>\n        ${this.hasButtonGroup ? $`<sl-button-group part=\"button-group\">${defaultSlot}</sl-button-group>` : defaultSlot}\n      </fieldset>\n    `;\n  }\n};\nSlRadioGroup.styles = radio_group_styles_default;\n__decorateClass([\n  i(\"slot:not([name])\")\n], SlRadioGroup.prototype, \"defaultSlot\", 2);\n__decorateClass([\n  t()\n], SlRadioGroup.prototype, \"hasButtonGroup\", 2);\n__decorateClass([\n  e()\n], SlRadioGroup.prototype, \"label\", 2);\n__decorateClass([\n  e({ type: Boolean, attribute: \"fieldset\" })\n], SlRadioGroup.prototype, \"fieldset\", 2);\nSlRadioGroup = __decorateClass([\n  n(\"sl-radio-group\")\n], SlRadioGroup);\n\nexport {\n  SlRadioGroup\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/button-group/button-group.styles.ts\nvar button_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .button-group {\n    display: flex;\n    flex-wrap: nowrap;\n  }\n`;\n\nexport {\n  button_group_styles_default\n};\n","import {\n  button_group_styles_default\n} from \"./chunk.EAHCDLY6.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/button-group/button-group.ts\nvar BUTTON_CHILDREN = [\"sl-button\", \"sl-radio-button\"];\nvar SlButtonGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n  }\n  handleFocus(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.add(\"sl-button-group__button--focus\");\n  }\n  handleBlur(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.remove(\"sl-button-group__button--focus\");\n  }\n  handleMouseOver(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.add(\"sl-button-group__button--hover\");\n  }\n  handleMouseOut(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.remove(\"sl-button-group__button--hover\");\n  }\n  handleSlotChange() {\n    const slottedElements = [...this.defaultSlot.assignedElements({ flatten: true })];\n    slottedElements.forEach((el) => {\n      const index = slottedElements.indexOf(el);\n      const button = findButton(el);\n      if (button !== null) {\n        button.classList.add(\"sl-button-group__button\");\n        button.classList.toggle(\"sl-button-group__button--first\", index === 0);\n        button.classList.toggle(\"sl-button-group__button--inner\", index > 0 && index < slottedElements.length - 1);\n        button.classList.toggle(\"sl-button-group__button--last\", index === slottedElements.length - 1);\n      }\n    });\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=\"button-group\"\n        role=\"group\"\n        aria-label=${this.label}\n        @focusout=${this.handleBlur}\n        @focusin=${this.handleFocus}\n        @mouseover=${this.handleMouseOver}\n        @mouseout=${this.handleMouseOut}\n      >\n        <slot @slotchange=${this.handleSlotChange}></slot>\n      </div>\n    `;\n  }\n};\nSlButtonGroup.styles = button_group_styles_default;\n__decorateClass([\n  i(\"slot\")\n], SlButtonGroup.prototype, \"defaultSlot\", 2);\n__decorateClass([\n  e()\n], SlButtonGroup.prototype, \"label\", 2);\nSlButtonGroup = __decorateClass([\n  n(\"sl-button-group\")\n], SlButtonGroup);\nfunction findButton(el) {\n  return BUTTON_CHILDREN.includes(el.tagName.toLowerCase()) ? el : el.querySelector(BUTTON_CHILDREN.join(\",\"));\n}\n\nexport {\n  SlButtonGroup\n};\n","import {\n  o\n} from \"./chunk.PEQICPKO.js\";\n\n// src/internal/focus-visible.ts\nvar hasFocusVisible = (() => {\n  const style = document.createElement(\"style\");\n  let isSupported;\n  try {\n    document.head.appendChild(style);\n    style.sheet.insertRule(\":focus-visible { color: inherit }\");\n    isSupported = true;\n  } catch (e) {\n    isSupported = false;\n  } finally {\n    style.remove();\n  }\n  return isSupported;\n})();\nvar focusVisibleSelector = o(hasFocusVisible ? \":focus-visible\" : \":focus\");\n\nexport {\n  hasFocusVisible,\n  focusVisibleSelector\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/button/button.styles.ts\nvar button_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n    position: relative;\n    width: auto;\n    cursor: pointer;\n  }\n\n  .button {\n    display: inline-flex;\n    align-items: stretch;\n    justify-content: center;\n    width: 100%;\n    border-style: solid;\n    border-width: var(--sl-input-border-width);\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-font-weight-semibold);\n    text-decoration: none;\n    user-select: none;\n    white-space: nowrap;\n    vertical-align: middle;\n    padding: 0;\n    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,\n      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;\n    cursor: inherit;\n  }\n\n  .button::-moz-focus-inner {\n    border: 0;\n  }\n\n  .button:focus {\n    outline: none;\n  }\n\n  .button--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* When disabled, prevent mouse events from bubbling up */\n  .button--disabled * {\n    pointer-events: none;\n  }\n\n  .button__prefix,\n  .button__suffix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    pointer-events: none;\n  }\n\n  .button__label ::slotted(sl-icon) {\n    vertical-align: -2px;\n  }\n\n  /*\n   * Standard buttons\n   */\n\n  /* Default */\n  .button--standard.button--default {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-neutral-300);\n    color: var(--sl-color-neutral-700);\n  }\n\n  .button--standard.button--default:hover:not(.button--disabled) {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-300);\n    color: var(--sl-color-primary-700);\n  }\n\n  .button--standard.button--default${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-400);\n    color: var(--sl-color-primary-700);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--default:active:not(.button--disabled) {\n    background-color: var(--sl-color-primary-100);\n    border-color: var(--sl-color-primary-400);\n    color: var(--sl-color-primary-700);\n  }\n\n  /* Primary */\n  .button--standard.button--primary {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--primary:hover:not(.button--disabled) {\n    background-color: var(--sl-color-primary-500);\n    border-color: var(--sl-color-primary-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--primary${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-primary-500);\n    border-color: var(--sl-color-primary-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--primary:active:not(.button--disabled) {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Success */\n  .button--standard.button--success {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--success:hover:not(.button--disabled) {\n    background-color: var(--sl-color-success-500);\n    border-color: var(--sl-color-success-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--success${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--success:active:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Neutral */\n  .button--standard.button--neutral {\n    background-color: var(--sl-color-neutral-600);\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--neutral:hover:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-500);\n    border-color: var(--sl-color-neutral-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--neutral${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-500);\n    border-color: var(--sl-color-neutral-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--neutral:active:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-600);\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Warning */\n  .button--standard.button--warning {\n    background-color: var(--sl-color-warning-600);\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n  .button--standard.button--warning:hover:not(.button--disabled) {\n    background-color: var(--sl-color-warning-500);\n    border-color: var(--sl-color-warning-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--warning${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-warning-500);\n    border-color: var(--sl-color-warning-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--warning:active:not(.button--disabled) {\n    background-color: var(--sl-color-warning-600);\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Danger */\n  .button--standard.button--danger {\n    background-color: var(--sl-color-danger-600);\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--danger:hover:not(.button--disabled) {\n    background-color: var(--sl-color-danger-500);\n    border-color: var(--sl-color-danger-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--danger${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-danger-500);\n    border-color: var(--sl-color-danger-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--danger:active:not(.button--disabled) {\n    background-color: var(--sl-color-danger-600);\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /*\n   * Outline buttons\n   */\n\n  .button--outline {\n    background: none;\n    border: solid 1px;\n  }\n\n  /* Default */\n  .button--outline.button--default {\n    border-color: var(--sl-color-neutral-300);\n    color: var(--sl-color-neutral-700);\n  }\n\n  .button--outline.button--default:hover:not(.button--disabled),\n  .button--outline.button--default.button--checked:not(.button--disabled) {\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--default${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--default:active:not(.button--disabled) {\n    border-color: var(--sl-color-primary-700);\n    background-color: var(--sl-color-primary-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Primary */\n  .button--outline.button--primary {\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-primary-600);\n  }\n\n  .button--outline.button--primary:hover:not(.button--disabled),\n  .button--outline.button--primary.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--primary${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--primary:active:not(.button--disabled) {\n    border-color: var(--sl-color-primary-700);\n    background-color: var(--sl-color-primary-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Success */\n  .button--outline.button--success {\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-success-600);\n  }\n\n  .button--outline.button--success:hover:not(.button--disabled),\n  .button--outline.button--success.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--success${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-success-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--success:active:not(.button--disabled) {\n    border-color: var(--sl-color-success-700);\n    background-color: var(--sl-color-success-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Neutral */\n  .button--outline.button--neutral {\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-600);\n  }\n\n  .button--outline.button--neutral:hover:not(.button--disabled),\n  .button--outline.button--neutral.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--neutral${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-neutral-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--neutral:active:not(.button--disabled) {\n    border-color: var(--sl-color-neutral-700);\n    background-color: var(--sl-color-neutral-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Warning */\n  .button--outline.button--warning {\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-warning-600);\n  }\n\n  .button--outline.button--warning:hover:not(.button--disabled),\n  .button--outline.button--warning.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--warning${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-warning-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--warning:active:not(.button--disabled) {\n    border-color: var(--sl-color-warning-700);\n    background-color: var(--sl-color-warning-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Danger */\n  .button--outline.button--danger {\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-danger-600);\n  }\n\n  .button--outline.button--danger:hover:not(.button--disabled),\n  .button--outline.button--danger.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--danger${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-danger-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--danger:active:not(.button--disabled) {\n    border-color: var(--sl-color-danger-700);\n    background-color: var(--sl-color-danger-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /*\n   * Text buttons\n   */\n\n  .button--text {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-600);\n  }\n\n  .button--text:hover:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-500);\n  }\n\n  .button--text${focusVisibleSelector}:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--text:active:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-700);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .button--small {\n    font-size: var(--sl-button-font-size-small);\n    height: var(--sl-input-height-small);\n    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-small);\n  }\n\n  .button--medium {\n    font-size: var(--sl-button-font-size-medium);\n    height: var(--sl-input-height-medium);\n    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-medium);\n  }\n\n  .button--large {\n    font-size: var(--sl-button-font-size-large);\n    height: var(--sl-input-height-large);\n    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-large);\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .button--pill.button--small {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .button--pill.button--medium {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .button--pill.button--large {\n    border-radius: var(--sl-input-height-large);\n  }\n\n  /*\n   * Circle modifier\n   */\n\n  .button--circle {\n    padding-left: 0;\n    padding-right: 0;\n  }\n\n  .button--circle.button--small {\n    width: var(--sl-input-height-small);\n    border-radius: 50%;\n  }\n\n  .button--circle.button--medium {\n    width: var(--sl-input-height-medium);\n    border-radius: 50%;\n  }\n\n  .button--circle.button--large {\n    width: var(--sl-input-height-large);\n    border-radius: 50%;\n  }\n\n  .button--circle .button__prefix,\n  .button--circle .button__suffix,\n  .button--circle .button__caret {\n    display: none;\n  }\n\n  /*\n   * Caret modifier\n   */\n\n  .button--caret .button__suffix {\n    display: none;\n  }\n\n  .button--caret .button__caret {\n    display: flex;\n    align-items: center;\n  }\n\n  .button--caret .button__caret svg {\n    width: 1em;\n    height: 1em;\n  }\n\n  /*\n   * Loading modifier\n   */\n\n  .button--loading {\n    position: relative;\n    cursor: wait;\n  }\n\n  .button--loading .button__prefix,\n  .button--loading .button__label,\n  .button--loading .button__suffix,\n  .button--loading .button__caret {\n    visibility: hidden;\n  }\n\n  .button--loading sl-spinner {\n    --indicator-color: currentColor;\n    position: absolute;\n    font-size: 1em;\n    height: 1em;\n    width: 1em;\n    top: calc(50% - 0.5em);\n    left: calc(50% - 0.5em);\n  }\n\n  /*\n   * Badges\n   */\n\n  .button ::slotted(sl-badge) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translateY(-50%) translateX(50%);\n    pointer-events: none;\n  }\n\n  /*\n   * Button spacing\n   */\n\n  .button--has-label.button--small .button__label {\n    padding: 0 var(--sl-spacing-small);\n  }\n\n  .button--has-label.button--medium .button__label {\n    padding: 0 var(--sl-spacing-medium);\n  }\n\n  .button--has-label.button--large .button__label {\n    padding: 0 var(--sl-spacing-large);\n  }\n\n  .button--has-prefix.button--small {\n    padding-left: var(--sl-spacing-x-small);\n  }\n\n  .button--has-prefix.button--small .button__label {\n    padding-left: var(--sl-spacing-x-small);\n  }\n\n  .button--has-prefix.button--medium {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--medium .button__label {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--large {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--large .button__label {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--small,\n  .button--caret.button--small {\n    padding-right: var(--sl-spacing-x-small);\n  }\n\n  .button--has-suffix.button--small .button__label,\n  .button--caret.button--small .button__label {\n    padding-right: var(--sl-spacing-x-small);\n  }\n\n  .button--has-suffix.button--medium,\n  .button--caret.button--medium {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--medium .button__label,\n  .button--caret.button--medium .button__label {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--large,\n  .button--caret.button--large {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--large .button__label,\n  .button--caret.button--large .button__label {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  /*\n   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).\n   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the\n   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to\n   * buttons and we style them here instead.\n   */\n\n  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  :host(.sl-button-group__button--inner) .button {\n    border-radius: 0;\n  }\n\n  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  /* All except the first */\n  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {\n    margin-left: calc(-1 * var(--sl-input-border-width));\n  }\n\n  /* Add a visual separator between solid buttons */\n  :host(.sl-button-group__button:not(.sl-button-group__button--focus, .sl-button-group__button--first, [variant='default']):not(:hover, :active, :focus))\n    .button:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: solid 1px rgb(128 128 128 / 33%);\n    mix-blend-mode: multiply;\n  }\n\n  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */\n  :host(.sl-button-group__button--hover) {\n    z-index: 1;\n  }\n\n  :host(.sl-button-group__button--focus),\n  :host(.sl-button-group__button[checked]) {\n    z-index: 2;\n  }\n`;\n\nexport {\n  button_styles_default\n};\n","import {\n  button_styles_default\n} from \"./chunk.BIBTLNIT.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio-button/radio-button.styles.ts\nvar radio_button_styles_default = r`\n  ${button_styles_default}\n  label {\n    display: inline-block;\n    position: relative;\n  }\n  /* We use a hidden input so constraint validation errors work, since they don't appear to show when used with buttons.\n    We can't actually hide it, though, otherwise the messages will be suppressed by the browser. */\n  .hidden-input {\n    all: unset;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    outline: dotted 1px red;\n    opacity: 0;\n    z-index: -1;\n  }\n`;\n\nexport {\n  radio_button_styles_default\n};\n","import {\n  $,\n  y\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/static.js\nvar r = (t, ...e) => ({ _$litStatic$: e.reduce((e2, o, r2) => e2 + ((t2) => {\n  if (t2._$litStatic$ !== void 0)\n    return t2._$litStatic$;\n  throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t2}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`);\n})(o) + t[r2 + 1], t[0]) });\nvar i = /* @__PURE__ */ new Map();\nvar a = (t) => (e, ...o) => {\n  var r2;\n  const a2 = o.length;\n  let l2, s2;\n  const n = [], u = [];\n  let c, $2 = 0, v = false;\n  for (; $2 < a2; ) {\n    for (c = e[$2]; $2 < a2 && (s2 = o[$2], l2 = (r2 = s2) === null || r2 === void 0 ? void 0 : r2._$litStatic$) !== void 0; )\n      c += l2 + e[++$2], v = true;\n    u.push(s2), n.push(c), $2++;\n  }\n  if ($2 === a2 && n.push(e[a2]), v) {\n    const t2 = n.join(\"$$lit$$\");\n    (e = i.get(t2)) === void 0 && (n.raw = n, i.set(t2, e = n)), o = u;\n  }\n  return t(e, ...o);\n};\nvar l = a($);\nvar s = a(y);\n\nexport {\n  r,\n  l\n};\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/formdata-event-polyfill.ts\nvar FormDataEventPolyfill = class extends Event {\n  constructor(formData) {\n    super(\"formdata\");\n    this.formData = formData;\n  }\n};\nvar FormDataPolyfill = class extends FormData {\n  constructor(form) {\n    super(form);\n    this.form = form;\n    form.dispatchEvent(new FormDataEventPolyfill(this));\n  }\n  append(name, value) {\n    let input = this.form.elements[name];\n    if (!input) {\n      input = document.createElement(\"input\");\n      input.type = \"hidden\";\n      input.name = name;\n      this.form.appendChild(input);\n    }\n    if (this.has(name)) {\n      const entries = this.getAll(name);\n      const index = entries.indexOf(input.value);\n      if (index !== -1) {\n        entries.splice(index, 1);\n      }\n      entries.push(value);\n      this.set(name, entries);\n    } else {\n      super.append(name, value);\n    }\n    input.value = value;\n  }\n};\nfunction supportsFormDataEvent() {\n  const form = document.createElement(\"form\");\n  let isSupported = false;\n  document.body.append(form);\n  form.addEventListener(\"submit\", (event) => {\n    new FormData(event.target);\n    event.preventDefault();\n  });\n  form.addEventListener(\"formdata\", () => isSupported = true);\n  form.dispatchEvent(new Event(\"submit\", { cancelable: true }));\n  form.remove();\n  return isSupported;\n}\nfunction polyfillFormData() {\n  if (!window.FormData || supportsFormDataEvent()) {\n    return;\n  }\n  window.FormData = FormDataPolyfill;\n  window.addEventListener(\"submit\", (event) => {\n    if (!event.defaultPrevented) {\n      new FormData(event.target);\n    }\n  });\n}\nif (document.readyState === \"complete\") {\n  polyfillFormData();\n} else {\n  window.addEventListener(\"DOMContentLoaded\", () => polyfillFormData());\n}\n\n// src/internal/form.ts\nvar FormSubmitController = class {\n  constructor(host, options) {\n    (this.host = host).addController(this);\n    this.options = __spreadValues({\n      form: (input) => input.closest(\"form\"),\n      name: (input) => input.name,\n      value: (input) => input.value,\n      disabled: (input) => input.disabled,\n      reportValidity: (input) => {\n        return typeof input.reportValidity === \"function\" ? input.reportValidity() : true;\n      }\n    }, options);\n    this.handleFormData = this.handleFormData.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n  hostConnected() {\n    document.addEventListener(\"formdata\", this.handleFormData, { capture: true });\n    document.addEventListener(\"submit\", this.handleFormSubmit, { capture: true });\n  }\n  hostDisconnected() {\n    document.removeEventListener(\"formdata\", this.handleFormData, { capture: true });\n    document.removeEventListener(\"submit\", this.handleFormSubmit, { capture: true });\n  }\n  handleFormData(event) {\n    const disabled = this.options.disabled(this.host);\n    const name = this.options.name(this.host);\n    const value = this.options.value(this.host);\n    if (!disabled && typeof name === \"string\" && typeof value !== \"undefined\") {\n      if (Array.isArray(value)) {\n        value.forEach((val) => {\n          event.formData.append(name, val.toString());\n        });\n      } else {\n        event.formData.append(name, value.toString());\n      }\n    }\n  }\n  handleFormSubmit(event) {\n    const form = this.options.form(this.host);\n    const disabled = this.options.disabled(this.host);\n    const reportValidity = this.options.reportValidity;\n    if (event.target === form && !disabled && !(form == null ? void 0 : form.noValidate) && !reportValidity(this.host)) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n  submit(submitter) {\n    const form = this.options.form(this.host);\n    if (form) {\n      const button = document.createElement(\"button\");\n      button.type = \"submit\";\n      button.style.position = \"absolute\";\n      button.style.width = \"0\";\n      button.style.height = \"0\";\n      button.style.clipPath = \"inset(50%)\";\n      button.style.overflow = \"hidden\";\n      button.style.whiteSpace = \"nowrap\";\n      if (submitter) {\n        [\"formaction\", \"formmethod\", \"formnovalidate\", \"formtarget\"].forEach((attr) => {\n          if (submitter.hasAttribute(attr)) {\n            button.setAttribute(attr, submitter.getAttribute(attr));\n          }\n        });\n      }\n      form.append(button);\n      button.click();\n      button.remove();\n    }\n  }\n};\n\nexport {\n  FormSubmitController\n};\n","// src/internal/slot.ts\nvar HasSlotController = class {\n  constructor(host, ...slotNames) {\n    this.slotNames = [];\n    (this.host = host).addController(this);\n    this.slotNames = slotNames;\n    this.handleSlotChange = this.handleSlotChange.bind(this);\n  }\n  hasDefaultSlot() {\n    return [...this.host.childNodes].some((node) => {\n      if (node.nodeType === node.TEXT_NODE && node.textContent.trim() !== \"\") {\n        return true;\n      }\n      if (node.nodeType === node.ELEMENT_NODE) {\n        const el = node;\n        const tagName = el.tagName.toLowerCase();\n        if (tagName === \"sl-visually-hidden\") {\n          return false;\n        }\n        if (!el.hasAttribute(\"slot\")) {\n          return true;\n        }\n      }\n      return false;\n    });\n  }\n  hasNamedSlot(name) {\n    return this.host.querySelector(`:scope > [slot=\"${name}\"]`) !== null;\n  }\n  test(slotName) {\n    return slotName === \"[default]\" ? this.hasDefaultSlot() : this.hasNamedSlot(slotName);\n  }\n  hostConnected() {\n    this.host.shadowRoot.addEventListener(\"slotchange\", this.handleSlotChange);\n  }\n  hostDisconnected() {\n    this.host.shadowRoot.removeEventListener(\"slotchange\", this.handleSlotChange);\n  }\n  handleSlotChange(event) {\n    const slot = event.target;\n    if (this.slotNames.includes(\"[default]\") && !slot.name || slot.name && this.slotNames.includes(slot.name)) {\n      this.host.requestUpdate();\n    }\n  }\n};\nfunction getTextContent(slot) {\n  if (!slot) {\n    return \"\";\n  }\n  const nodes = slot.assignedNodes({ flatten: true });\n  let text = \"\";\n  [...nodes].forEach((node) => {\n    if (node.nodeType === Node.TEXT_NODE) {\n      text += node.textContent;\n    }\n  });\n  return text;\n}\n\nexport {\n  HasSlotController,\n  getTextContent\n};\n","import {\n  w\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directives/if-defined.js\nvar l = (l2) => l2 != null ? l2 : w;\n\nexport {\n  l\n};\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/watch.ts\nfunction watch(propName, options) {\n  const resolvedOptions = __spreadValues({\n    waitUntilFirstUpdate: false\n  }, options);\n  return (proto, decoratedFnName) => {\n    const { update } = proto;\n    if (propName in proto) {\n      const propNameKey = propName;\n      proto.update = function(changedProps) {\n        if (changedProps.has(propNameKey)) {\n          const oldValue = changedProps.get(propNameKey);\n          const newValue = this[propNameKey];\n          if (oldValue !== newValue) {\n            if (!resolvedOptions.waitUntilFirstUpdate || this.hasUpdated) {\n              this[decoratedFnName](oldValue, newValue);\n            }\n          }\n        }\n        update.call(this, changedProps);\n      };\n    }\n  };\n}\n\nexport {\n  watch\n};\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/event.ts\nfunction emit(el, name, options) {\n  const event = new CustomEvent(name, __spreadValues({\n    bubbles: true,\n    cancelable: false,\n    composed: true,\n    detail: {}\n  }, options));\n  el.dispatchEvent(event);\n  return event;\n}\nfunction waitForEvent(el, eventName) {\n  return new Promise((resolve) => {\n    function done(event) {\n      if (event.target === el) {\n        el.removeEventListener(eventName, done);\n        resolve();\n      }\n    }\n    el.addEventListener(eventName, done);\n  });\n}\n\nexport {\n  emit,\n  waitForEvent\n};\n","import {\n  radio_button_styles_default\n} from \"./chunk.JHRKEMQ3.js\";\nimport {\n  l as l2\n} from \"./chunk.LOYEL7IY.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio-button/radio-button.ts\nvar SlRadioButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasSlotController = new HasSlotController(this, \"[default]\", \"prefix\", \"suffix\");\n    this.hasFocus = false;\n    this.disabled = false;\n    this.checked = false;\n    this.invalid = false;\n    this.variant = \"default\";\n    this.size = \"medium\";\n    this.pill = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radio\");\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.hiddenInput.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.hiddenInput.setCustomValidity(message);\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleClick() {\n    if (!this.disabled) {\n      this.checked = true;\n    }\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      emit(this, \"sl-change\");\n    }\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      this.input.disabled = this.disabled;\n      this.invalid = !this.input.checkValidity();\n    }\n  }\n  render() {\n    return l2`\n      <div part=\"base\">\n        <input class=\"hidden-input\" type=\"radio\" aria-hidden=\"true\" tabindex=\"-1\" />\n        <button\n          part=\"button\"\n          class=${o({\n      button: true,\n      \"button--default\": this.variant === \"default\",\n      \"button--primary\": this.variant === \"primary\",\n      \"button--success\": this.variant === \"success\",\n      \"button--neutral\": this.variant === \"neutral\",\n      \"button--warning\": this.variant === \"warning\",\n      \"button--danger\": this.variant === \"danger\",\n      \"button--small\": this.size === \"small\",\n      \"button--medium\": this.size === \"medium\",\n      \"button--large\": this.size === \"large\",\n      \"button--checked\": this.checked,\n      \"button--disabled\": this.disabled,\n      \"button--focused\": this.hasFocus,\n      \"button--outline\": true,\n      \"button--pill\": this.pill,\n      \"button--has-label\": this.hasSlotController.test(\"[default]\"),\n      \"button--has-prefix\": this.hasSlotController.test(\"prefix\"),\n      \"button--has-suffix\": this.hasSlotController.test(\"suffix\")\n    })}\n          ?disabled=${this.disabled}\n          type=\"button\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n          @click=${this.handleClick}\n        >\n          <span part=\"prefix\" class=\"button__prefix\">\n            <slot name=\"prefix\"></slot>\n          </span>\n          <span part=\"label\" class=\"button__label\">\n            <slot></slot>\n          </span>\n          <span part=\"suffix\" class=\"button__suffix\">\n            <slot name=\"suffix\"></slot>\n          </span>\n        </button>\n      </div>\n    `;\n  }\n};\nSlRadioButton.styles = radio_button_styles_default;\n__decorateClass([\n  i(\".button\")\n], SlRadioButton.prototype, \"input\", 2);\n__decorateClass([\n  i(\".hidden-input\")\n], SlRadioButton.prototype, \"hiddenInput\", 2);\n__decorateClass([\n  t()\n], SlRadioButton.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlRadioButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlRadioButton.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlRadioButton.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlRadioButton.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  e({ reflect: true })\n], SlRadioButton.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlRadioButton.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"pill\", 2);\nSlRadioButton = __decorateClass([\n  n(\"sl-radio-button\")\n], SlRadioButton);\n\nexport {\n  SlRadioButton\n};\n","import {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/styles/form-control.styles.ts\nvar form_control_styles_default = r`\n  .form-control .form-control__label {\n    display: none;\n  }\n\n  .form-control .form-control__help-text {\n    display: none;\n  }\n\n  /* Label */\n  .form-control--has-label .form-control__label {\n    display: inline-block;\n    color: var(--sl-input-label-color);\n    margin-bottom: var(--sl-spacing-3x-small);\n  }\n\n  .form-control--has-label.form-control--small .form-control__label {\n    font-size: var(--sl-input-label-font-size-small);\n  }\n\n  .form-control--has-label.form-control--medium .form-control__label {\n    font-size: var(--sl-input-label-font-size-medium);\n  }\n\n  .form-control--has-label.form-control--large .form-control_label {\n    font-size: var(--sl-input-label-font-size-large);\n  }\n\n  /* Help text */\n  .form-control--has-help-text .form-control__help-text {\n    display: block;\n    color: var(--sl-input-help-text-color);\n  }\n\n  .form-control--has-help-text .form-control__help-text ::slotted(*) {\n    margin-top: var(--sl-spacing-3x-small);\n  }\n\n  .form-control--has-help-text.form-control--small .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-small);\n  }\n\n  .form-control--has-help-text.form-control--medium .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-medium);\n  }\n\n  .form-control--has-help-text.form-control--large .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-large);\n  }\n`;\n\nexport {\n  form_control_styles_default\n};\n","// node_modules/@shoelace-style/localize/dist/index.js\nvar connectedElements = /* @__PURE__ */ new Set();\nvar documentElementObserver = new MutationObserver(update);\nvar translations = /* @__PURE__ */ new Map();\nvar documentLanguage = document.documentElement.lang || navigator.language;\nvar fallback;\ndocumentElementObserver.observe(document.documentElement, {\n  attributes: true,\n  attributeFilter: [\"lang\"]\n});\nfunction registerTranslation(...translation2) {\n  translation2.map((t) => {\n    const code = t.$code.toLowerCase();\n    translations.set(code, t);\n    if (!fallback) {\n      fallback = t;\n    }\n  });\n  update();\n}\nfunction term(lang, key, ...args) {\n  const code = lang.toLowerCase().slice(0, 2);\n  const subcode = lang.length > 2 ? lang.toLowerCase() : \"\";\n  const primary = translations.get(subcode);\n  const secondary = translations.get(code);\n  let term2;\n  if (primary && primary[key]) {\n    term2 = primary[key];\n  } else if (secondary && secondary[key]) {\n    term2 = secondary[key];\n  } else if (fallback && fallback[key]) {\n    term2 = fallback[key];\n  } else {\n    console.error(`No translation found for: ${key}`);\n    return key;\n  }\n  if (typeof term2 === \"function\") {\n    return term2(...args);\n  }\n  return term2;\n}\nfunction date(lang, dateToFormat, options) {\n  dateToFormat = new Date(dateToFormat);\n  return new Intl.DateTimeFormat(lang, options).format(dateToFormat);\n}\nfunction number(lang, numberToFormat, options) {\n  numberToFormat = Number(numberToFormat);\n  return isNaN(numberToFormat) ? \"\" : new Intl.NumberFormat(lang, options).format(numberToFormat);\n}\nfunction relativeTime(lang, value, unit, options) {\n  return new Intl.RelativeTimeFormat(lang, options).format(value, unit);\n}\nfunction update() {\n  documentLanguage = document.documentElement.lang || navigator.language;\n  [...connectedElements.keys()].map((el) => {\n    if (typeof el.requestUpdate === \"function\") {\n      el.requestUpdate();\n    }\n  });\n}\nvar LocalizeController = class {\n  constructor(host) {\n    this.host = host;\n    this.host.addController(this);\n  }\n  hostConnected() {\n    connectedElements.add(this.host);\n  }\n  hostDisconnected() {\n    connectedElements.delete(this.host);\n  }\n  term(key, ...args) {\n    return term(this.host.lang || documentLanguage, key, ...args);\n  }\n  date(dateToFormat, options) {\n    return date(this.host.lang || documentLanguage, dateToFormat, options);\n  }\n  number(numberToFormat, options) {\n    return number(this.host.lang || documentLanguage, numberToFormat, options);\n  }\n  relativeTime(value, unit, options) {\n    return relativeTime(this.host.lang || documentLanguage, value, unit, options);\n  }\n};\n\n// src/translations/en.ts\nvar translation = {\n  $code: \"en\",\n  $name: \"English\",\n  $dir: \"ltr\",\n  clearEntry: \"Clear entry\",\n  close: \"Close\",\n  copy: \"Copy\",\n  currentValue: \"Current value\",\n  hidePassword: \"Hide password\",\n  progress: \"Progress\",\n  remove: \"Remove\",\n  resize: \"Resize\",\n  scrollToEnd: \"Scroll to end\",\n  scrollToStart: \"Scroll to start\",\n  selectAColorFromTheScreen: \"Select a color from the screen\",\n  showPassword: \"Show password\",\n  toggleColorFormat: \"Toggle color format\"\n};\nregisterTranslation(translation);\nvar en_default = translation;\n\nexport {\n  en_default,\n  registerTranslation,\n  term,\n  date,\n  number,\n  relativeTime,\n  update,\n  LocalizeController\n};\n","import {\n  form_control_styles_default\n} from \"./chunk.LAAROFAU.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/input/input.styles.ts\nvar input_styles_default = r`\n  ${component_styles_default}\n  ${form_control_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .input {\n    flex: 1 1 auto;\n    display: inline-flex;\n    align-items: stretch;\n    justify-content: start;\n    position: relative;\n    width: 100%;\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-input-font-weight);\n    letter-spacing: var(--sl-input-letter-spacing);\n    vertical-align: middle;\n    overflow: hidden;\n    cursor: text;\n    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,\n      var(--sl-transition-fast) background-color;\n  }\n\n  /* Standard inputs */\n  .input--standard {\n    background-color: var(--sl-input-background-color);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n  }\n\n  .input--standard:hover:not(.input--disabled) {\n    background-color: var(--sl-input-background-color-hover);\n    border-color: var(--sl-input-border-color-hover);\n  }\n\n  .input--standard.input--focused:not(.input--disabled) {\n    background-color: var(--sl-input-background-color-focus);\n    border-color: var(--sl-input-border-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .input--standard.input--focused:not(.input--disabled) .input__control {\n    color: var(--sl-input-color-focus);\n  }\n\n  .input--standard.input--disabled {\n    background-color: var(--sl-input-background-color-disabled);\n    border-color: var(--sl-input-border-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .input--standard.input--disabled .input__control {\n    color: var(--sl-input-color-disabled);\n  }\n\n  .input--standard.input--disabled .input__control::placeholder {\n    color: var(--sl-input-placeholder-color-disabled);\n  }\n\n  /* Filled inputs */\n  .input--filled {\n    border: none;\n    background-color: var(--sl-input-filled-background-color);\n    color: var(--sl-input-color);\n  }\n\n  .input--filled:hover:not(.input--disabled) {\n    background-color: var(--sl-input-filled-background-color-hover);\n  }\n\n  .input--filled.input--focused:not(.input--disabled) {\n    background-color: var(--sl-input-filled-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .input--filled.input--disabled {\n    background-color: var(--sl-input-filled-background-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .input__control {\n    flex: 1 1 auto;\n    font-family: inherit;\n    font-size: inherit;\n    font-weight: inherit;\n    min-width: 0;\n    height: 100%;\n    color: var(--sl-input-color);\n    border: none;\n    background: none;\n    box-shadow: none;\n    padding: 0;\n    margin: 0;\n    cursor: inherit;\n    -webkit-appearance: none;\n  }\n\n  .input__control::-webkit-search-decoration,\n  .input__control::-webkit-search-cancel-button,\n  .input__control::-webkit-search-results-button,\n  .input__control::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  .input__control:-webkit-autofill,\n  .input__control:-webkit-autofill:hover,\n  .input__control:-webkit-autofill:focus,\n  .input__control:-webkit-autofill:active {\n    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;\n    -webkit-text-fill-color: var(--sl-color-primary-500);\n    caret-color: var(--sl-input-color);\n  }\n\n  .input--filled .input__control:-webkit-autofill,\n  .input--filled .input__control:-webkit-autofill:hover,\n  .input--filled .input__control:-webkit-autofill:focus,\n  .input--filled .input__control:-webkit-autofill:active {\n    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;\n  }\n\n  .input__control::placeholder {\n    color: var(--sl-input-placeholder-color);\n    user-select: none;\n  }\n\n  .input:hover:not(.input--disabled) .input__control {\n    color: var(--sl-input-color-hover);\n  }\n\n  .input__control:focus {\n    outline: none;\n  }\n\n  .input__prefix,\n  .input__suffix {\n    display: inline-flex;\n    flex: 0 0 auto;\n    align-items: center;\n    cursor: default;\n  }\n\n  .input__prefix ::slotted(sl-icon),\n  .input__suffix ::slotted(sl-icon) {\n    color: var(--sl-input-icon-color);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .input--small {\n    border-radius: var(--sl-input-border-radius-small);\n    font-size: var(--sl-input-font-size-small);\n    height: var(--sl-input-height-small);\n  }\n\n  .input--small .input__control {\n    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-small);\n  }\n\n  .input--small .input__clear,\n  .input--small .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-small) * 2);\n  }\n\n  .input--small .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-small);\n  }\n\n  .input--small .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-small);\n  }\n\n  .input--medium {\n    border-radius: var(--sl-input-border-radius-medium);\n    font-size: var(--sl-input-font-size-medium);\n    height: var(--sl-input-height-medium);\n  }\n\n  .input--medium .input__control {\n    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-medium);\n  }\n\n  .input--medium .input__clear,\n  .input--medium .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-medium) * 2);\n  }\n\n  .input--medium .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-medium);\n  }\n\n  .input--medium .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-medium);\n  }\n\n  .input--large {\n    border-radius: var(--sl-input-border-radius-large);\n    font-size: var(--sl-input-font-size-large);\n    height: var(--sl-input-height-large);\n  }\n\n  .input--large .input__control {\n    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-large);\n  }\n\n  .input--large .input__clear,\n  .input--large .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-large) * 2);\n  }\n\n  .input--large .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-large);\n  }\n\n  .input--large .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-large);\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .input--pill.input--small {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .input--pill.input--medium {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .input--pill.input--large {\n    border-radius: var(--sl-input-height-large);\n  }\n\n  /*\n   * Clearable + Password Toggle\n   */\n\n  .input__clear,\n  .input__password-toggle {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: inherit;\n    color: var(--sl-input-icon-color);\n    border: none;\n    background: none;\n    padding: 0;\n    transition: var(--sl-transition-fast) color;\n    cursor: pointer;\n  }\n\n  .input__clear:hover,\n  .input__password-toggle:hover {\n    color: var(--sl-input-icon-color-hover);\n  }\n\n  .input__clear:focus,\n  .input__password-toggle:focus {\n    outline: none;\n  }\n\n  .input--empty .input__clear {\n    visibility: hidden;\n  }\n\n  /* Don't show the browser's password toggle in Edge */\n  ::-ms-reveal {\n    display: none;\n  }\n`;\n\nexport {\n  input_styles_default\n};\n","import {\n  e,\n  i,\n  t\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  b,\n  w\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directive-helpers.js\nvar r = (o) => o.strings === void 0;\nvar f = {};\nvar s = (o, i2 = f) => o._$AH = i2;\n\n// node_modules/lit-html/directives/live.js\nvar l = e(class extends i {\n  constructor(r2) {\n    if (super(r2), r2.type !== t.PROPERTY && r2.type !== t.ATTRIBUTE && r2.type !== t.BOOLEAN_ATTRIBUTE)\n      throw Error(\"The `live` directive is not allowed on child or event bindings\");\n    if (!r(r2))\n      throw Error(\"`live` bindings can only contain a single expression\");\n  }\n  render(r2) {\n    return r2;\n  }\n  update(i2, [t2]) {\n    if (t2 === b || t2 === w)\n      return t2;\n    const o = i2.element, l2 = i2.name;\n    if (i2.type === t.PROPERTY) {\n      if (t2 === o[l2])\n        return b;\n    } else if (i2.type === t.BOOLEAN_ATTRIBUTE) {\n      if (!!t2 === o.hasAttribute(l2))\n        return b;\n    } else if (i2.type === t.ATTRIBUTE && o.getAttribute(l2) === t2 + \"\")\n      return b;\n    return s(i2), t2;\n  }\n});\n\nexport {\n  l\n};\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  input_styles_default\n} from \"./chunk.WVVUWAAN.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/input/input.ts\nvar SlInput = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this);\n    this.hasSlotController = new HasSlotController(this, \"help-text\", \"label\");\n    this.localize = new LocalizeController(this);\n    this.hasFocus = false;\n    this.isPasswordVisible = false;\n    this.type = \"text\";\n    this.size = \"medium\";\n    this.value = \"\";\n    this.filled = false;\n    this.pill = false;\n    this.label = \"\";\n    this.helpText = \"\";\n    this.clearable = false;\n    this.togglePassword = false;\n    this.disabled = false;\n    this.readonly = false;\n    this.required = false;\n    this.invalid = false;\n  }\n  get valueAsDate() {\n    var _a, _b;\n    return (_b = (_a = this.input) == null ? void 0 : _a.valueAsDate) != null ? _b : null;\n  }\n  set valueAsDate(newValue) {\n    this.updateComplete.then(() => {\n      this.input.valueAsDate = newValue;\n      this.value = this.input.value;\n    });\n  }\n  get valueAsNumber() {\n    var _a, _b;\n    return (_b = (_a = this.input) == null ? void 0 : _a.valueAsNumber) != null ? _b : parseFloat(this.value);\n  }\n  set valueAsNumber(newValue) {\n    this.updateComplete.then(() => {\n      this.input.valueAsNumber = newValue;\n      this.value = this.input.value;\n    });\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  select() {\n    this.input.select();\n  }\n  setSelectionRange(selectionStart, selectionEnd, selectionDirection = \"none\") {\n    this.input.setSelectionRange(selectionStart, selectionEnd, selectionDirection);\n  }\n  setRangeText(replacement, start, end, selectMode = \"preserve\") {\n    this.input.setRangeText(replacement, start, end, selectMode);\n    if (this.value !== this.input.value) {\n      this.value = this.input.value;\n      emit(this, \"sl-input\");\n      emit(this, \"sl-change\");\n    }\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleChange() {\n    this.value = this.input.value;\n    emit(this, \"sl-change\");\n  }\n  handleClearClick(event) {\n    this.value = \"\";\n    emit(this, \"sl-clear\");\n    emit(this, \"sl-input\");\n    emit(this, \"sl-change\");\n    this.input.focus();\n    event.stopPropagation();\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleInput() {\n    this.value = this.input.value;\n    emit(this, \"sl-input\");\n  }\n  handleInvalid() {\n    this.invalid = true;\n  }\n  handleKeyDown(event) {\n    const hasModifier = event.metaKey || event.ctrlKey || event.shiftKey || event.altKey;\n    if (event.key === \"Enter\" && !hasModifier) {\n      this.formSubmitController.submit();\n    }\n  }\n  handlePasswordToggle() {\n    this.isPasswordVisible = !this.isPasswordVisible;\n  }\n  handleValueChange() {\n    this.invalid = !this.input.checkValidity();\n  }\n  render() {\n    const hasLabelSlot = this.hasSlotController.test(\"label\");\n    const hasHelpTextSlot = this.hasSlotController.test(\"help-text\");\n    const hasLabel = this.label ? true : !!hasLabelSlot;\n    const hasHelpText = this.helpText ? true : !!hasHelpTextSlot;\n    return $`\n      <div\n        part=\"form-control\"\n        class=${o({\n      \"form-control\": true,\n      \"form-control--small\": this.size === \"small\",\n      \"form-control--medium\": this.size === \"medium\",\n      \"form-control--large\": this.size === \"large\",\n      \"form-control--has-label\": hasLabel,\n      \"form-control--has-help-text\": hasHelpText\n    })}\n      >\n        <label\n          part=\"form-control-label\"\n          class=\"form-control__label\"\n          for=\"input\"\n          aria-hidden=${hasLabel ? \"false\" : \"true\"}\n        >\n          <slot name=\"label\">${this.label}</slot>\n        </label>\n\n        <div part=\"form-control-input\" class=\"form-control-input\">\n          <div\n            part=\"base\"\n            class=${o({\n      input: true,\n      \"input--small\": this.size === \"small\",\n      \"input--medium\": this.size === \"medium\",\n      \"input--large\": this.size === \"large\",\n      \"input--pill\": this.pill,\n      \"input--standard\": !this.filled,\n      \"input--filled\": this.filled,\n      \"input--disabled\": this.disabled,\n      \"input--focused\": this.hasFocus,\n      \"input--empty\": this.value.length === 0,\n      \"input--invalid\": this.invalid\n    })}\n          >\n            <span part=\"prefix\" class=\"input__prefix\">\n              <slot name=\"prefix\"></slot>\n            </span>\n\n            <input\n              part=\"input\"\n              id=\"input\"\n              class=\"input__control\"\n              type=${this.type === \"password\" && this.isPasswordVisible ? \"text\" : this.type}\n              name=${l(this.name)}\n              ?disabled=${this.disabled}\n              ?readonly=${this.readonly}\n              ?required=${this.required}\n              placeholder=${l(this.placeholder)}\n              minlength=${l(this.minlength)}\n              maxlength=${l(this.maxlength)}\n              min=${l(this.min)}\n              max=${l(this.max)}\n              step=${l(this.step)}\n              .value=${l2(this.value)}\n              autocapitalize=${l(this.autocapitalize)}\n              autocomplete=${l(this.autocomplete)}\n              autocorrect=${l(this.autocorrect)}\n              ?autofocus=${this.autofocus}\n              spellcheck=${l(this.spellcheck)}\n              pattern=${l(this.pattern)}\n              enterkeyhint=${l(this.enterkeyhint)}\n              inputmode=${l(this.inputmode)}\n              aria-describedby=\"help-text\"\n              aria-invalid=${this.invalid ? \"true\" : \"false\"}\n              @change=${this.handleChange}\n              @input=${this.handleInput}\n              @invalid=${this.handleInvalid}\n              @keydown=${this.handleKeyDown}\n              @focus=${this.handleFocus}\n              @blur=${this.handleBlur}\n            />\n\n            ${this.clearable && this.value.length > 0 ? $`\n                  <button\n                    part=\"clear-button\"\n                    class=\"input__clear\"\n                    type=\"button\"\n                    aria-label=${this.localize.term(\"clearEntry\")}\n                    @click=${this.handleClearClick}\n                    tabindex=\"-1\"\n                  >\n                    <slot name=\"clear-icon\">\n                      <sl-icon name=\"x-circle-fill\" library=\"system\"></sl-icon>\n                    </slot>\n                  </button>\n                ` : \"\"}\n            ${this.togglePassword ? $`\n                  <button\n                    part=\"password-toggle-button\"\n                    class=\"input__password-toggle\"\n                    type=\"button\"\n                    aria-label=${this.localize.term(this.isPasswordVisible ? \"hidePassword\" : \"showPassword\")}\n                    @click=${this.handlePasswordToggle}\n                    tabindex=\"-1\"\n                  >\n                    ${this.isPasswordVisible ? $`\n                          <slot name=\"show-password-icon\">\n                            <sl-icon name=\"eye-slash\" library=\"system\"></sl-icon>\n                          </slot>\n                        ` : $`\n                          <slot name=\"hide-password-icon\">\n                            <sl-icon name=\"eye\" library=\"system\"></sl-icon>\n                          </slot>\n                        `}\n                  </button>\n                ` : \"\"}\n\n            <span part=\"suffix\" class=\"input__suffix\">\n              <slot name=\"suffix\"></slot>\n            </span>\n          </div>\n        </div>\n\n        <div\n          part=\"form-control-help-text\"\n          id=\"help-text\"\n          class=\"form-control__help-text\"\n          aria-hidden=${hasHelpText ? \"false\" : \"true\"}\n        >\n          <slot name=\"help-text\">${this.helpText}</slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlInput.styles = input_styles_default;\n__decorateClass([\n  i(\".input__control\")\n], SlInput.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlInput.prototype, \"hasFocus\", 2);\n__decorateClass([\n  t()\n], SlInput.prototype, \"isPasswordVisible\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlInput.prototype, \"type\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlInput.prototype, \"size\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"filled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"pill\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"label\", 2);\n__decorateClass([\n  e({ attribute: \"help-text\" })\n], SlInput.prototype, \"helpText\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"clearable\", 2);\n__decorateClass([\n  e({ attribute: \"toggle-password\", type: Boolean })\n], SlInput.prototype, \"togglePassword\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"placeholder\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"readonly\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"minlength\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"maxlength\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"min\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"max\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"step\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"pattern\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"invalid\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocapitalize\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocorrect\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocomplete\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"autofocus\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"enterkeyhint\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"spellcheck\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"inputmode\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlInput.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"value\", { waitUntilFirstUpdate: true })\n], SlInput.prototype, \"handleValueChange\", 1);\nSlInput = __decorateClass([\n  n(\"sl-input\")\n], SlInput);\n\nexport {\n  SlInput\n};\n","// src/utilities/base-path.ts\nvar basePath = \"\";\nfunction setBasePath(path) {\n  basePath = path;\n}\nfunction getBasePath() {\n  return basePath.replace(/\\/$/, \"\");\n}\nvar scripts = [...document.getElementsByTagName(\"script\")];\nvar configScript = scripts.find((script) => script.hasAttribute(\"data-shoelace\"));\nif (configScript) {\n  setBasePath(configScript.getAttribute(\"data-shoelace\"));\n} else {\n  const fallbackScript = scripts.find((s) => /shoelace(\\.min)?\\.js($|\\?)/.test(s.src));\n  let path = \"\";\n  if (fallbackScript) {\n    path = fallbackScript.getAttribute(\"src\");\n  }\n  setBasePath(path.split(\"/\").slice(0, -1).join(\"/\"));\n}\n\nexport {\n  setBasePath,\n  getBasePath\n};\n","import {\n  getBasePath\n} from \"./chunk.NFF2HMIT.js\";\n\n// src/components/icon/library.default.ts\nvar library = {\n  name: \"default\",\n  resolver: (name) => `${getBasePath()}/assets/icons/${name}.svg`\n};\nvar library_default_default = library;\n\nexport {\n  library_default_default\n};\n","// src/components/icon/library.system.ts\nvar icons = {\n  \"check-lg\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n      <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"></path>\n    </svg>\n  `,\n  \"chevron-down\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  \"chevron-left\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-left\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z\"/>\n    </svg>\n  `,\n  \"chevron-right\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-right\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  eye: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\n      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\n    </svg>\n  `,\n  \"eye-slash\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eye-slash\" viewBox=\"0 0 16 16\">\n      <path d=\"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"/>\n      <path d=\"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"/>\n      <path d=\"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z\"/>\n    </svg>\n  `,\n  eyedropper: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eyedropper\" viewBox=\"0 0 16 16\">\n      <path d=\"M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z\"></path>\n    </svg>\n  `,\n  \"grip-vertical\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-grip-vertical\" viewBox=\"0 0 16 16\">\n      <path d=\"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n    </svg>\n  `,\n  \"person-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-person-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>\n    </svg>\n  `,\n  \"play-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-play-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z\"></path>\n    </svg>\n  `,\n  \"pause-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-pause-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z\"></path>\n    </svg>\n  `,\n  \"star-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n    </svg>\n  `,\n  x: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x\" viewBox=\"0 0 16 16\">\n      <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  \"x-circle-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-circle-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"></path>\n    </svg>\n  `\n};\nvar systemLibrary = {\n  name: \"system\",\n  resolver: (name) => {\n    if (name in icons) {\n      return `data:image/svg+xml,${encodeURIComponent(icons[name])}`;\n    }\n    return \"\";\n  }\n};\nvar library_system_default = systemLibrary;\n\nexport {\n  library_system_default\n};\n","import {\n  library_default_default\n} from \"./chunk.C7PPQWMA.js\";\nimport {\n  library_system_default\n} from \"./chunk.IDYSXN6R.js\";\n\n// src/components/icon/library.ts\nvar registry = [library_default_default, library_system_default];\nvar watchedIcons = [];\nfunction watchIcon(icon) {\n  watchedIcons.push(icon);\n}\nfunction unwatchIcon(icon) {\n  watchedIcons = watchedIcons.filter((el) => el !== icon);\n}\nfunction getIconLibrary(name) {\n  return registry.find((lib) => lib.name === name);\n}\nfunction registerIconLibrary(name, options) {\n  unregisterIconLibrary(name);\n  registry.push({\n    name,\n    resolver: options.resolver,\n    mutator: options.mutator\n  });\n  watchedIcons.forEach((icon) => {\n    if (icon.library === name) {\n      icon.redraw();\n    }\n  });\n}\nfunction unregisterIconLibrary(name) {\n  registry = registry.filter((lib) => lib.name !== name);\n}\n\nexport {\n  watchIcon,\n  unwatchIcon,\n  getIconLibrary,\n  registerIconLibrary,\n  unregisterIconLibrary\n};\n","// src/components/include/request.ts\nvar includeFiles = /* @__PURE__ */ new Map();\nfunction requestInclude(src, mode = \"cors\") {\n  if (includeFiles.has(src)) {\n    return includeFiles.get(src);\n  }\n  const fileDataPromise = fetch(src, { mode }).then(async (response) => {\n    return {\n      ok: response.ok,\n      status: response.status,\n      html: await response.text()\n    };\n  });\n  includeFiles.set(src, fileDataPromise);\n  return fileDataPromise;\n}\n\nexport {\n  requestInclude\n};\n","import {\n  requestInclude\n} from \"./chunk.RPB53XXV.js\";\n\n// src/components/icon/request.ts\nvar iconFiles = /* @__PURE__ */ new Map();\nasync function requestIcon(url) {\n  if (iconFiles.has(url)) {\n    return iconFiles.get(url);\n  }\n  const fileData = await requestInclude(url);\n  const iconFileData = {\n    ok: fileData.ok,\n    status: fileData.status,\n    svg: null\n  };\n  if (fileData.ok) {\n    const div = document.createElement(\"div\");\n    div.innerHTML = fileData.html;\n    const svg = div.firstElementChild;\n    iconFileData.svg = (svg == null ? void 0 : svg.tagName.toLowerCase()) === \"svg\" ? svg.outerHTML : \"\";\n  }\n  iconFiles.set(url, iconFileData);\n  return iconFileData;\n}\n\nexport {\n  requestIcon\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/icon/icon.styles.ts\nvar icon_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    contain: strict;\n    box-sizing: content-box !important;\n  }\n\n  .icon,\n  svg {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nexport {\n  icon_styles_default\n};\n","import {\n  getIconLibrary,\n  unwatchIcon,\n  watchIcon\n} from \"./chunk.UCCHCS2E.js\";\nimport {\n  requestIcon\n} from \"./chunk.P52GZVKG.js\";\nimport {\n  icon_styles_default\n} from \"./chunk.NPYVPRSA.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  e as e2,\n  i,\n  t as t2\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  b,\n  s,\n  w\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/lit-html/directives/unsafe-html.js\nvar e3 = class extends i {\n  constructor(i2) {\n    if (super(i2), this.it = w, i2.type !== t2.CHILD)\n      throw Error(this.constructor.directiveName + \"() can only be used in child bindings\");\n  }\n  render(r) {\n    if (r === w || r == null)\n      return this.vt = void 0, this.it = r;\n    if (r === b)\n      return r;\n    if (typeof r != \"string\")\n      throw Error(this.constructor.directiveName + \"() called with a non-string value\");\n    if (r === this.it)\n      return this.vt;\n    this.it = r;\n    const s2 = [r];\n    return s2.raw = s2, this.vt = { _$litType$: this.constructor.resultType, strings: s2, values: [] };\n  }\n};\ne3.directiveName = \"unsafeHTML\", e3.resultType = 1;\nvar o = e2(e3);\n\n// node_modules/lit-html/directives/unsafe-svg.js\nvar t3 = class extends e3 {\n};\nt3.directiveName = \"unsafeSVG\", t3.resultType = 2;\nvar o2 = e2(t3);\n\n// src/components/icon/icon.ts\nvar parser = new DOMParser();\nvar SlIcon = class extends s {\n  constructor() {\n    super(...arguments);\n    this.svg = \"\";\n    this.label = \"\";\n    this.library = \"default\";\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    watchIcon(this);\n  }\n  firstUpdated() {\n    this.setIcon();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    unwatchIcon(this);\n  }\n  getUrl() {\n    const library = getIconLibrary(this.library);\n    if (this.name && library) {\n      return library.resolver(this.name);\n    }\n    return this.src;\n  }\n  redraw() {\n    this.setIcon();\n  }\n  async setIcon() {\n    var _a;\n    const library = getIconLibrary(this.library);\n    const url = this.getUrl();\n    if (url) {\n      try {\n        const file = await requestIcon(url);\n        if (url !== this.getUrl()) {\n          return;\n        } else if (file.ok) {\n          const doc = parser.parseFromString(file.svg, \"text/html\");\n          const svgEl = doc.body.querySelector(\"svg\");\n          if (svgEl !== null) {\n            (_a = library == null ? void 0 : library.mutator) == null ? void 0 : _a.call(library, svgEl);\n            this.svg = svgEl.outerHTML;\n            emit(this, \"sl-load\");\n          } else {\n            this.svg = \"\";\n            emit(this, \"sl-error\");\n          }\n        } else {\n          this.svg = \"\";\n          emit(this, \"sl-error\");\n        }\n      } catch (e4) {\n        emit(this, \"sl-error\");\n      }\n    } else if (this.svg.length > 0) {\n      this.svg = \"\";\n    }\n  }\n  handleChange() {\n    this.setIcon();\n  }\n  render() {\n    const hasLabel = typeof this.label === \"string\" && this.label.length > 0;\n    return $` <div\n      part=\"base\"\n      class=\"icon\"\n      role=${l(hasLabel ? \"img\" : void 0)}\n      aria-label=${l(hasLabel ? this.label : void 0)}\n      aria-hidden=${l(hasLabel ? void 0 : \"true\")}\n    >\n      ${o2(this.svg)}\n    </div>`;\n  }\n};\nSlIcon.styles = icon_styles_default;\n__decorateClass([\n  t()\n], SlIcon.prototype, \"svg\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"src\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"label\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"library\", 2);\n__decorateClass([\n  watch(\"name\"),\n  watch(\"src\"),\n  watch(\"library\")\n], SlIcon.prototype, \"setIcon\", 1);\nSlIcon = __decorateClass([\n  n(\"sl-icon\")\n], SlIcon);\n\nexport {\n  o,\n  SlIcon\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","// src/internal/tabbable.ts\nfunction isTabbable(el) {\n  const tag = el.tagName.toLowerCase();\n  if (el.getAttribute(\"tabindex\") === \"-1\") {\n    return false;\n  }\n  if (el.hasAttribute(\"disabled\")) {\n    return false;\n  }\n  if (el.hasAttribute(\"aria-disabled\") && el.getAttribute(\"aria-disabled\") !== \"false\") {\n    return false;\n  }\n  if (tag === \"input\" && el.getAttribute(\"type\") === \"radio\" && !el.hasAttribute(\"checked\")) {\n    return false;\n  }\n  if (el.offsetParent === null) {\n    return false;\n  }\n  if (window.getComputedStyle(el).visibility === \"hidden\") {\n    return false;\n  }\n  if ((tag === \"audio\" || tag === \"video\") && el.hasAttribute(\"controls\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"tabindex\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"contenteditable\") && el.getAttribute(\"contenteditable\") !== \"false\") {\n    return true;\n  }\n  return [\"button\", \"input\", \"select\", \"textarea\", \"a\", \"audio\", \"video\", \"summary\"].includes(tag);\n}\nfunction getTabbableBoundary(root) {\n  var _a, _b;\n  const allElements = [];\n  function walk(el) {\n    if (el instanceof HTMLElement) {\n      allElements.push(el);\n      if (el.shadowRoot !== null && el.shadowRoot.mode === \"open\") {\n        walk(el.shadowRoot);\n      }\n    }\n    [...el.querySelectorAll(\"*\")].forEach((e) => walk(e));\n  }\n  walk(root);\n  const start = (_a = allElements.find((el) => isTabbable(el))) != null ? _a : null;\n  const end = (_b = allElements.reverse().find((el) => isTabbable(el))) != null ? _b : null;\n  return { start, end };\n}\n\nexport {\n  getTabbableBoundary\n};\n","import {\n  getTabbableBoundary\n} from \"./chunk.SCUNOITN.js\";\n\n// src/internal/modal.ts\nvar activeModals = [];\nvar Modal = class {\n  constructor(element) {\n    this.tabDirection = \"forward\";\n    this.element = element;\n    this.handleFocusIn = this.handleFocusIn.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n  }\n  activate() {\n    activeModals.push(this.element);\n    document.addEventListener(\"focusin\", this.handleFocusIn);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"keyup\", this.handleKeyUp);\n  }\n  deactivate() {\n    activeModals = activeModals.filter((modal) => modal !== this.element);\n    document.removeEventListener(\"focusin\", this.handleFocusIn);\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"keyup\", this.handleKeyUp);\n  }\n  isActive() {\n    return activeModals[activeModals.length - 1] === this.element;\n  }\n  checkFocus() {\n    if (this.isActive()) {\n      if (!this.element.matches(\":focus-within\")) {\n        const { start, end } = getTabbableBoundary(this.element);\n        const target = this.tabDirection === \"forward\" ? start : end;\n        if (typeof (target == null ? void 0 : target.focus) === \"function\") {\n          target.focus({ preventScroll: true });\n        }\n      }\n    }\n  }\n  handleFocusIn() {\n    this.checkFocus();\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Tab\" && event.shiftKey) {\n      this.tabDirection = \"backward\";\n    }\n    requestAnimationFrame(() => this.checkFocus());\n  }\n  handleKeyUp() {\n    this.tabDirection = \"forward\";\n  }\n};\n\nexport {\n  Modal\n};\n","// src/internal/offset.ts\nfunction getOffset(element, parent) {\n  return {\n    top: Math.round(element.getBoundingClientRect().top - parent.getBoundingClientRect().top),\n    left: Math.round(element.getBoundingClientRect().left - parent.getBoundingClientRect().left)\n  };\n}\n\n// src/internal/scroll.ts\nvar locks = /* @__PURE__ */ new Set();\nfunction lockBodyScrolling(lockingEl) {\n  locks.add(lockingEl);\n  document.body.classList.add(\"sl-scroll-lock\");\n}\nfunction unlockBodyScrolling(lockingEl) {\n  locks.delete(lockingEl);\n  if (locks.size === 0) {\n    document.body.classList.remove(\"sl-scroll-lock\");\n  }\n}\nfunction scrollIntoView(element, container, direction = \"vertical\", behavior = \"smooth\") {\n  const offset = getOffset(element, container);\n  const offsetTop = offset.top + container.scrollTop;\n  const offsetLeft = offset.left + container.scrollLeft;\n  const minX = container.scrollLeft;\n  const maxX = container.scrollLeft + container.offsetWidth;\n  const minY = container.scrollTop;\n  const maxY = container.scrollTop + container.offsetHeight;\n  if (direction === \"horizontal\" || direction === \"both\") {\n    if (offsetLeft < minX) {\n      container.scrollTo({ left: offsetLeft, behavior });\n    } else if (offsetLeft + element.clientWidth > maxX) {\n      container.scrollTo({ left: offsetLeft - container.offsetWidth + element.clientWidth, behavior });\n    }\n  }\n  if (direction === \"vertical\" || direction === \"both\") {\n    if (offsetTop < minY) {\n      container.scrollTo({ top: offsetTop, behavior });\n    } else if (offsetTop + element.clientHeight > maxY) {\n      container.scrollTo({ top: offsetTop - container.offsetHeight + element.clientHeight, behavior });\n    }\n  }\n}\n\nexport {\n  lockBodyScrolling,\n  unlockBodyScrolling,\n  scrollIntoView\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/dialog/dialog.styles.ts\nvar dialog_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --width: 31rem;\n    --header-spacing: var(--sl-spacing-large);\n    --body-spacing: var(--sl-spacing-large);\n    --footer-spacing: var(--sl-spacing-large);\n\n    display: contents;\n  }\n\n  .dialog {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: var(--sl-z-index-dialog);\n  }\n\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    z-index: 2;\n    width: var(--width);\n    max-width: calc(100% - var(--sl-spacing-2x-large));\n    max-height: calc(100% - var(--sl-spacing-2x-large));\n    background-color: var(--sl-panel-background-color);\n    border-radius: var(--sl-border-radius-medium);\n    box-shadow: var(--sl-shadow-x-large);\n  }\n\n  .dialog__panel:focus {\n    outline: none;\n  }\n\n  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */\n  @media screen and (max-width: 420px) {\n    .dialog__panel {\n      max-height: 80vh;\n    }\n  }\n\n  .dialog--open .dialog__panel {\n    display: flex;\n    opacity: 1;\n    transform: none;\n  }\n\n  .dialog__header {\n    flex: 0 0 auto;\n    display: flex;\n  }\n\n  .dialog__title {\n    flex: 1 1 auto;\n    font: inherit;\n    font-size: var(--sl-font-size-large);\n    line-height: var(--sl-line-height-dense);\n    padding: var(--header-spacing);\n    margin: 0;\n  }\n\n  .dialog__close {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-x-large);\n    padding: 0 var(--header-spacing);\n  }\n\n  .dialog__body {\n    flex: 1 1 auto;\n    padding: var(--body-spacing);\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: right;\n    padding: var(--footer-spacing);\n  }\n\n  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {\n    margin-left: var(--sl-spacing-x-small);\n  }\n\n  .dialog:not(.dialog--has-footer) .dialog__footer {\n    display: none;\n  }\n\n  .dialog__overlay {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: var(--sl-overlay-background-color);\n  }\n`;\n\nexport {\n  dialog_styles_default\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/animate.ts\nfunction animateTo(el, keyframes, options) {\n  return new Promise((resolve) => {\n    if ((options == null ? void 0 : options.duration) === Infinity) {\n      throw new Error(\"Promise-based animations must be finite.\");\n    }\n    const animation = el.animate(keyframes, __spreadProps(__spreadValues({}, options), {\n      duration: prefersReducedMotion() ? 0 : options.duration\n    }));\n    animation.addEventListener(\"cancel\", resolve, { once: true });\n    animation.addEventListener(\"finish\", resolve, { once: true });\n  });\n}\nfunction parseDuration(delay) {\n  delay = delay.toString().toLowerCase();\n  if (delay.indexOf(\"ms\") > -1) {\n    return parseFloat(delay);\n  }\n  if (delay.indexOf(\"s\") > -1) {\n    return parseFloat(delay) * 1e3;\n  }\n  return parseFloat(delay);\n}\nfunction prefersReducedMotion() {\n  const query = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n  return query.matches;\n}\nfunction stopAnimations(el) {\n  return Promise.all(el.getAnimations().map((animation) => {\n    return new Promise((resolve) => {\n      const handleAnimationEvent = requestAnimationFrame(resolve);\n      animation.addEventListener(\"cancel\", () => handleAnimationEvent, { once: true });\n      animation.addEventListener(\"finish\", () => handleAnimationEvent, { once: true });\n      animation.cancel();\n    });\n  }));\n}\nfunction shimKeyframesHeightAuto(keyframes, calculatedHeight) {\n  return keyframes.map((keyframe) => __spreadProps(__spreadValues({}, keyframe), {\n    height: keyframe.height === \"auto\" ? `${calculatedHeight}px` : keyframe.height\n  }));\n}\n\nexport {\n  animateTo,\n  parseDuration,\n  stopAnimations,\n  shimKeyframesHeightAuto\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/utilities/animation-registry.ts\nvar defaultAnimationRegistry = /* @__PURE__ */ new Map();\nvar customAnimationRegistry = /* @__PURE__ */ new WeakMap();\nfunction ensureAnimation(animation) {\n  return animation != null ? animation : { keyframes: [], options: { duration: 0 } };\n}\nfunction setDefaultAnimation(animationName, animation) {\n  defaultAnimationRegistry.set(animationName, ensureAnimation(animation));\n}\nfunction setAnimation(el, animationName, animation) {\n  customAnimationRegistry.set(el, __spreadProps(__spreadValues({}, customAnimationRegistry.get(el)), { [animationName]: ensureAnimation(animation) }));\n}\nfunction getAnimation(el, animationName) {\n  const customAnimation = customAnimationRegistry.get(el);\n  if (customAnimation == null ? void 0 : customAnimation[animationName]) {\n    return customAnimation[animationName];\n  }\n  const defaultAnimation = defaultAnimationRegistry.get(animationName);\n  if (defaultAnimation) {\n    return defaultAnimation;\n  }\n  return {\n    keyframes: [],\n    options: { duration: 0 }\n  };\n}\n\nexport {\n  setDefaultAnimation,\n  setAnimation,\n  getAnimation\n};\n","import {\n  Modal\n} from \"./chunk.BQLXYG6H.js\";\nimport {\n  lockBodyScrolling,\n  unlockBodyScrolling\n} from \"./chunk.H262HIXG.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  dialog_styles_default\n} from \"./chunk.OKBZWQHW.js\";\nimport {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/dialog/dialog.ts\nvar SlDialog = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"footer\");\n    this.localize = new LocalizeController(this);\n    this.open = false;\n    this.label = \"\";\n    this.noHeader = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.modal = new Modal(this);\n  }\n  firstUpdated() {\n    this.dialog.hidden = !this.open;\n    if (this.open) {\n      this.modal.activate();\n      lockBodyScrolling(this);\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    unlockBodyScrolling(this);\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  requestClose(source) {\n    const slRequestClose = emit(this, \"sl-request-close\", {\n      cancelable: true,\n      detail: { source }\n    });\n    if (slRequestClose.defaultPrevented) {\n      const animation = getAnimation(this, \"dialog.denyClose\");\n      animateTo(this.panel, animation.keyframes, animation.options);\n      return;\n    }\n    this.hide();\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Escape\") {\n      event.stopPropagation();\n      this.requestClose(\"keyboard\");\n    }\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      this.originalTrigger = document.activeElement;\n      this.modal.activate();\n      lockBodyScrolling(this);\n      const autoFocusTarget = this.querySelector(\"[autofocus]\");\n      if (autoFocusTarget) {\n        autoFocusTarget.removeAttribute(\"autofocus\");\n      }\n      await Promise.all([stopAnimations(this.dialog), stopAnimations(this.overlay)]);\n      this.dialog.hidden = false;\n      requestAnimationFrame(() => {\n        const slInitialFocus = emit(this, \"sl-initial-focus\", { cancelable: true });\n        if (!slInitialFocus.defaultPrevented) {\n          if (autoFocusTarget) {\n            autoFocusTarget.focus({ preventScroll: true });\n          } else {\n            this.panel.focus({ preventScroll: true });\n          }\n        }\n        if (autoFocusTarget) {\n          autoFocusTarget.setAttribute(\"autofocus\", \"\");\n        }\n      });\n      const panelAnimation = getAnimation(this, \"dialog.show\");\n      const overlayAnimation = getAnimation(this, \"dialog.overlay.show\");\n      await Promise.all([\n        animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\n        animateTo(this.overlay, overlayAnimation.keyframes, overlayAnimation.options)\n      ]);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      this.modal.deactivate();\n      await Promise.all([stopAnimations(this.dialog), stopAnimations(this.overlay)]);\n      const panelAnimation = getAnimation(this, \"dialog.hide\");\n      const overlayAnimation = getAnimation(this, \"dialog.overlay.hide\");\n      await Promise.all([\n        animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\n        animateTo(this.overlay, overlayAnimation.keyframes, overlayAnimation.options)\n      ]);\n      this.dialog.hidden = true;\n      unlockBodyScrolling(this);\n      const trigger = this.originalTrigger;\n      if (typeof (trigger == null ? void 0 : trigger.focus) === \"function\") {\n        setTimeout(() => trigger.focus());\n      }\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      dialog: true,\n      \"dialog--open\": this.open,\n      \"dialog--has-footer\": this.hasSlotController.test(\"footer\")\n    })}\n        @keydown=${this.handleKeyDown}\n      >\n        <div part=\"overlay\" class=\"dialog__overlay\" @click=${() => this.requestClose(\"overlay\")} tabindex=\"-1\"></div>\n\n        <div\n          part=\"panel\"\n          class=\"dialog__panel\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-hidden=${this.open ? \"false\" : \"true\"}\n          aria-label=${l(this.noHeader ? this.label : void 0)}\n          aria-labelledby=${l(!this.noHeader ? \"title\" : void 0)}\n          tabindex=\"0\"\n        >\n          ${!this.noHeader ? $`\n                <header part=\"header\" class=\"dialog__header\">\n                  <h2 part=\"title\" class=\"dialog__title\" id=\"title\">\n                    <slot name=\"label\"> ${this.label.length > 0 ? this.label : String.fromCharCode(65279)} </slot>\n                  </h2>\n                  <sl-icon-button\n                    part=\"close-button\"\n                    exportparts=\"base:close-button__base\"\n                    class=\"dialog__close\"\n                    name=\"x\"\n                    label=${this.localize.term(\"close\")}\n                    library=\"system\"\n                    @click=\"${() => this.requestClose(\"close-button\")}\"\n                  ></sl-icon-button>\n                </header>\n              ` : \"\"}\n\n          <div part=\"body\" class=\"dialog__body\">\n            <slot></slot>\n          </div>\n\n          <footer part=\"footer\" class=\"dialog__footer\">\n            <slot name=\"footer\"></slot>\n          </footer>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDialog.styles = dialog_styles_default;\n__decorateClass([\n  i(\".dialog\")\n], SlDialog.prototype, \"dialog\", 2);\n__decorateClass([\n  i(\".dialog__panel\")\n], SlDialog.prototype, \"panel\", 2);\n__decorateClass([\n  i(\".dialog__overlay\")\n], SlDialog.prototype, \"overlay\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDialog.prototype, \"open\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlDialog.prototype, \"label\", 2);\n__decorateClass([\n  e({ attribute: \"no-header\", type: Boolean, reflect: true })\n], SlDialog.prototype, \"noHeader\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDialog.prototype, \"handleOpenChange\", 1);\nSlDialog = __decorateClass([\n  n(\"sl-dialog\")\n], SlDialog);\nsetDefaultAnimation(\"dialog.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dialog.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dialog.denyClose\", {\n  keyframes: [{ transform: \"scale(1)\" }, { transform: \"scale(1.02)\" }, { transform: \"scale(1)\" }],\n  options: { duration: 250 }\n});\nsetDefaultAnimation(\"dialog.overlay.show\", {\n  keyframes: [{ opacity: 0 }, { opacity: 1 }],\n  options: { duration: 250 }\n});\nsetDefaultAnimation(\"dialog.overlay.hide\", {\n  keyframes: [{ opacity: 1 }, { opacity: 0 }],\n  options: { duration: 250 }\n});\n\nexport {\n  SlDialog\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/icon-button/icon-button.styles.ts\nvar icon_button_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .icon-button {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    background: none;\n    border: none;\n    border-radius: var(--sl-border-radius-medium);\n    font-size: inherit;\n    color: var(--sl-color-neutral-600);\n    padding: var(--sl-spacing-x-small);\n    cursor: pointer;\n    transition: var(--sl-transition-medium) color;\n    -webkit-appearance: none;\n  }\n\n  .icon-button:hover:not(.icon-button--disabled),\n  .icon-button:focus:not(.icon-button--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .icon-button:active:not(.icon-button--disabled) {\n    color: var(--sl-color-primary-700);\n  }\n\n  .icon-button:focus {\n    outline: none;\n  }\n\n  .icon-button--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .icon-button${focusVisibleSelector} {\n    box-shadow: var(--sl-focus-ring);\n  }\n`;\n\nexport {\n  icon_button_styles_default\n};\n","import {\n  icon_button_styles_default\n} from \"./chunk.FE67GRYM.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/icon-button/icon-button.ts\nvar SlIconButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n    this.disabled = false;\n  }\n  render() {\n    const isLink = this.href ? true : false;\n    const interior = $`\n      <sl-icon\n        name=${l(this.name)}\n        library=${l(this.library)}\n        src=${l(this.src)}\n        aria-hidden=\"true\"\n      ></sl-icon>\n    `;\n    return isLink ? $`\n          <a\n            part=\"base\"\n            class=\"icon-button\"\n            href=${l(this.href)}\n            target=${l(this.target)}\n            download=${l(this.download)}\n            rel=${l(this.target ? \"noreferrer noopener\" : void 0)}\n            role=\"button\"\n            aria-disabled=${this.disabled ? \"true\" : \"false\"}\n            aria-label=\"${this.label}\"\n            tabindex=${this.disabled ? \"-1\" : \"0\"}\n          >\n            ${interior}\n          </a>\n        ` : $`\n          <button\n            part=\"base\"\n            class=${o({\n      \"icon-button\": true,\n      \"icon-button--disabled\": this.disabled\n    })}\n            ?disabled=${this.disabled}\n            type=\"button\"\n            aria-label=${this.label}\n          >\n            ${interior}\n          </button>\n        `;\n  }\n};\nSlIconButton.styles = icon_button_styles_default;\n__decorateClass([\n  i(\".icon-button\")\n], SlIconButton.prototype, \"button\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"library\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"src\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"href\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"target\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"download\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"label\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlIconButton.prototype, \"disabled\", 2);\nSlIconButton = __decorateClass([\n  n(\"sl-icon-button\")\n], SlIconButton);\n\nexport {\n  SlIconButton\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/menu-item/menu-item.styles.ts\nvar menu_item_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .menu-item {\n    position: relative;\n    display: flex;\n    align-items: stretch;\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-medium);\n    font-weight: var(--sl-font-weight-normal);\n    line-height: var(--sl-line-height-normal);\n    letter-spacing: var(--sl-letter-spacing-normal);\n    text-align: left;\n    color: var(--sl-color-neutral-700);\n    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);\n    transition: var(--sl-transition-fast) fill;\n    user-select: none;\n    white-space: nowrap;\n    cursor: pointer;\n  }\n\n  .menu-item.menu-item--disabled {\n    outline: none;\n    color: var(--sl-color-neutral-400);\n    cursor: not-allowed;\n  }\n\n  .menu-item .menu-item__label {\n    flex: 1 1 auto;\n  }\n\n  .menu-item .menu-item__prefix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .menu-item .menu-item__prefix ::slotted(*) {\n    margin-right: var(--sl-spacing-x-small);\n  }\n\n  .menu-item .menu-item__suffix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .menu-item .menu-item__suffix ::slotted(*) {\n    margin-left: var(--sl-spacing-x-small);\n  }\n\n  :host(:focus) {\n    outline: none;\n  }\n\n  :host(:hover:not([aria-disabled='true'])) .menu-item,\n  :host(${focusVisibleSelector}:not(.sl-focus-invisible):not([aria-disabled='true'])) .menu-item {\n    outline: none;\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .menu-item .menu-item__check,\n  .menu-item .menu-item__chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 1.5em;\n    visibility: hidden;\n  }\n\n  .menu-item--checked .menu-item__check,\n  .menu-item--has-submenu .menu-item__chevron {\n    visibility: visible;\n  }\n`;\n\nexport {\n  menu_item_styles_default\n};\n","import {\n  menu_item_styles_default\n} from \"./chunk.PWMZHGCP.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/menu-item/menu-item.ts\nvar SlMenuItem = class extends s {\n  constructor() {\n    super(...arguments);\n    this.checked = false;\n    this.value = \"\";\n    this.disabled = false;\n  }\n  firstUpdated() {\n    this.setAttribute(\"role\", \"menuitem\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      \"menu-item\": true,\n      \"menu-item--checked\": this.checked,\n      \"menu-item--disabled\": this.disabled,\n      \"menu-item--has-submenu\": false\n    })}\n      >\n        <span class=\"menu-item__check\">\n          <sl-icon name=\"check-lg\" library=\"default\" aria-hidden=\"true\"></sl-icon>\n        </span>\n\n        <span part=\"prefix\" class=\"menu-item__prefix\">\n          <slot name=\"prefix\"></slot>\n        </span>\n\n        <span part=\"label\" class=\"menu-item__label\">\n          <slot></slot>\n        </span>\n\n        <span part=\"suffix\" class=\"menu-item__suffix\">\n          <slot name=\"suffix\"></slot>\n        </span>\n\n        <span class=\"menu-item__chevron\">\n          <sl-icon name=\"chevron-right\" library=\"default\" aria-hidden=\"true\"></sl-icon>\n        </span>\n      </div>\n    `;\n  }\n};\nSlMenuItem.styles = menu_item_styles_default;\n__decorateClass([\n  i(\".menu-item\")\n], SlMenuItem.prototype, \"menuItem\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlMenuItem.prototype, \"checked\", 2);\n__decorateClass([\n  e()\n], SlMenuItem.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlMenuItem.prototype, \"disabled\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlMenuItem.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\")\n], SlMenuItem.prototype, \"handleDisabledChange\", 1);\nSlMenuItem = __decorateClass([\n  n(\"sl-menu-item\")\n], SlMenuItem);\n\nexport {\n  SlMenuItem\n};\n","import {\n  form_control_styles_default\n} from \"./chunk.LAAROFAU.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/select/select.styles.ts\nvar select_styles_default = r`\n  ${component_styles_default}\n  ${form_control_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .select {\n    display: block;\n  }\n\n  .select__control {\n    display: inline-flex;\n    align-items: center;\n    justify-content: start;\n    position: relative;\n    width: 100%;\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-input-font-weight);\n    letter-spacing: var(--sl-input-letter-spacing);\n    vertical-align: middle;\n    overflow: hidden;\n    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow;\n    cursor: pointer;\n  }\n\n  .select__menu {\n    max-height: 50vh;\n    overflow: auto;\n  }\n\n  /* Standard selects */\n  .select--standard .select__control {\n    background-color: var(--sl-input-background-color);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    color: var(--sl-input-color);\n  }\n\n  .select--standard:not(.select--disabled) .select__control:hover {\n    background-color: var(--sl-input-background-color-hover);\n    border-color: var(--sl-input-border-color-hover);\n    color: var(--sl-input-color-hover);\n  }\n\n  .select--standard.select--focused:not(.select--disabled) .select__control {\n    background-color: var(--sl-input-background-color-focus);\n    border-color: var(--sl-input-border-color-focus);\n    box-shadow: var(--sl-focus-ring);\n    outline: none;\n    color: var(--sl-input-color-focus);\n  }\n\n  .select--standard.select--disabled .select__control {\n    background-color: var(--sl-input-background-color-disabled);\n    border-color: var(--sl-input-border-color-disabled);\n    color: var(--sl-input-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n    outline: none;\n  }\n\n  /* Filled selects */\n  .select--filled .select__control {\n    border: none;\n    background-color: var(--sl-input-filled-background-color);\n    color: var(--sl-input-color);\n  }\n\n  .select--filled:hover:not(.select--disabled) .select__control {\n    background-color: var(--sl-input-filled-background-color-hover);\n  }\n\n  .select--filled.select--focused:not(.select--disabled) .select__control {\n    outline: none;\n    background-color: var(--sl-input-filled-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .select--filled.select--disabled .select__control {\n    background-color: var(--sl-input-filled-background-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .select--disabled .select__tags,\n  .select--disabled .select__clear {\n    pointer-events: none;\n  }\n\n  .select__prefix {\n    display: inline-flex;\n    align-items: center;\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select__label {\n    flex: 1 1 auto;\n    display: flex;\n    align-items: center;\n    user-select: none;\n    overflow-x: auto;\n    overflow-y: hidden;\n    white-space: nowrap;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .select__label::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .select__clear {\n    flex: 0 0 auto;\n    display: inline-flex;\n    align-items: center;\n    width: 1.25em;\n    font-size: inherit;\n    color: var(--sl-input-icon-color);\n    border: none;\n    background: none;\n    padding: 0;\n    transition: var(--sl-transition-fast) color;\n    cursor: pointer;\n  }\n\n  .select__clear:hover {\n    color: var(--sl-input-icon-color-hover);\n  }\n\n  .select__suffix {\n    display: inline-flex;\n    align-items: center;\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select__icon {\n    flex: 0 0 auto;\n    display: inline-flex;\n    transition: var(--sl-transition-medium) transform ease;\n  }\n\n  .select--open .select__icon {\n    transform: rotate(-180deg);\n  }\n\n  /* Placeholder */\n  .select--placeholder-visible .select__label {\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select--disabled.select--placeholder-visible .select__label {\n    color: var(--sl-input-placeholder-color-disabled);\n  }\n\n  /* Tags */\n  .select__tags {\n    display: inline-flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: left;\n    margin-left: var(--sl-spacing-2x-small);\n  }\n\n  /* Hidden input (for form control validation to show) */\n  .select__hidden-select {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    overflow: hidden;\n    white-space: nowrap;\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  /* Small */\n  .select--small .select__control {\n    border-radius: var(--sl-input-border-radius-small);\n    font-size: var(--sl-input-font-size-small);\n    min-height: var(--sl-input-height-small);\n  }\n\n  .select--small .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__label {\n    margin: 0 var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__clear {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__icon {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__tags {\n    padding-bottom: 2px;\n  }\n\n  .select--small .select__tags sl-tag {\n    padding-top: 2px;\n  }\n\n  .select--small .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--small.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /* Medium */\n  .select--medium .select__control {\n    border-radius: var(--sl-input-border-radius-medium);\n    font-size: var(--sl-input-font-size-medium);\n    min-height: var(--sl-input-height-medium);\n  }\n\n  .select--medium .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__label {\n    margin: 0 var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__clear {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__icon {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__tags {\n    padding-bottom: 3px;\n  }\n\n  .select--medium .select__tags sl-tag {\n    padding-top: 3px;\n  }\n\n  .select--medium .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--medium.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /* Large */\n  .select--large .select__control {\n    border-radius: var(--sl-input-border-radius-large);\n    font-size: var(--sl-input-font-size-large);\n    min-height: var(--sl-input-height-large);\n  }\n\n  .select--large .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__label {\n    margin: 0 var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__clear {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__icon {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__tags {\n    padding-bottom: 4px;\n  }\n  .select--large .select__tags sl-tag {\n    padding-top: 4px;\n  }\n\n  .select--large .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--large.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /*\n   * Pill modifier\n   */\n  .select--pill.select--small .select__control {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .select--pill.select--medium .select__control {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .select--pill.select--large .select__control {\n    border-radius: var(--sl-input-height-large);\n  }\n`;\n\nexport {\n  select_styles_default\n};\n","import {\n  select_styles_default\n} from \"./chunk.24E5KUVH.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController,\n  getTextContent\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/select/select.ts\nvar SlSelect = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this);\n    this.hasSlotController = new HasSlotController(this, \"help-text\", \"label\");\n    this.localize = new LocalizeController(this);\n    this.hasFocus = false;\n    this.isOpen = false;\n    this.displayLabel = \"\";\n    this.displayTags = [];\n    this.multiple = false;\n    this.maxTagsVisible = 3;\n    this.disabled = false;\n    this.name = \"\";\n    this.placeholder = \"\";\n    this.size = \"medium\";\n    this.hoist = false;\n    this.value = \"\";\n    this.filled = false;\n    this.pill = false;\n    this.label = \"\";\n    this.placement = \"bottom\";\n    this.helpText = \"\";\n    this.required = false;\n    this.clearable = false;\n    this.invalid = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleMenuSlotChange = this.handleMenuSlotChange.bind(this);\n    this.resizeObserver = new ResizeObserver(() => this.resizeMenu());\n    this.updateComplete.then(() => {\n      this.resizeObserver.observe(this);\n      this.syncItemsFromValue();\n    });\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.resizeObserver.unobserve(this);\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  getItemLabel(item) {\n    const slot = item.shadowRoot.querySelector(\"slot:not([name])\");\n    return getTextContent(slot);\n  }\n  getItems() {\n    return [...this.querySelectorAll(\"sl-menu-item\")];\n  }\n  getValueAsArray() {\n    if (this.multiple && this.value === \"\") {\n      return [];\n    }\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  focus(options) {\n    this.control.focus(options);\n  }\n  blur() {\n    this.control.blur();\n  }\n  handleBlur() {\n    if (!this.isOpen) {\n      this.hasFocus = false;\n      emit(this, \"sl-blur\");\n    }\n  }\n  handleClearClick(event) {\n    event.stopPropagation();\n    this.value = this.multiple ? [] : \"\";\n    emit(this, \"sl-clear\");\n    this.syncItemsFromValue();\n  }\n  handleDisabledChange() {\n    if (this.disabled && this.isOpen) {\n      this.dropdown.hide();\n    }\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    if (!this.hasFocus) {\n      this.hasFocus = true;\n      emit(this, \"sl-focus\");\n    }\n  }\n  handleKeyDown(event) {\n    const target = event.target;\n    const items = this.getItems();\n    const firstItem = items[0];\n    const lastItem = items[items.length - 1];\n    if (target.tagName.toLowerCase() === \"sl-tag\") {\n      return;\n    }\n    if (event.key === \"Tab\") {\n      if (this.isOpen) {\n        this.dropdown.hide();\n      }\n      return;\n    }\n    if ([\"ArrowDown\", \"ArrowUp\"].includes(event.key)) {\n      event.preventDefault();\n      if (!this.isOpen) {\n        this.dropdown.show();\n      }\n      if (event.key === \"ArrowDown\") {\n        this.menu.setCurrentItem(firstItem);\n        firstItem.focus();\n        return;\n      }\n      if (event.key === \"ArrowUp\") {\n        this.menu.setCurrentItem(lastItem);\n        lastItem.focus();\n        return;\n      }\n    }\n    if (event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (!this.isOpen && event.key.length === 1) {\n      event.stopPropagation();\n      event.preventDefault();\n      this.dropdown.show();\n      this.menu.typeToSelect(event);\n    }\n  }\n  handleLabelClick() {\n    this.focus();\n  }\n  handleMenuSelect(event) {\n    const item = event.detail.item;\n    if (this.multiple) {\n      this.value = this.value.includes(item.value) ? this.value.filter((v) => v !== item.value) : [...this.value, item.value];\n    } else {\n      this.value = item.value;\n    }\n    this.syncItemsFromValue();\n  }\n  handleMenuShow() {\n    this.resizeMenu();\n    this.isOpen = true;\n  }\n  handleMenuHide() {\n    this.isOpen = false;\n    this.control.focus();\n  }\n  handleMultipleChange() {\n    var _a;\n    const value = this.getValueAsArray();\n    this.value = this.multiple ? value : (_a = value[0]) != null ? _a : \"\";\n    this.syncItemsFromValue();\n  }\n  async handleMenuSlotChange() {\n    const items = this.getItems();\n    const values = [];\n    items.forEach((item) => {\n      if (values.includes(item.value)) {\n        console.error(`Duplicate value found in <sl-select> menu item: '${item.value}'`, item);\n      }\n      values.push(item.value);\n    });\n    await Promise.all(items.map((item) => item.render)).then(() => this.syncItemsFromValue());\n  }\n  handleTagInteraction(event) {\n    const path = event.composedPath();\n    const clearButton = path.find((el) => {\n      if (el instanceof HTMLElement) {\n        const element = el;\n        return element.classList.contains(\"tag__remove\");\n      }\n      return false;\n    });\n    if (clearButton) {\n      event.stopPropagation();\n    }\n  }\n  async handleValueChange() {\n    this.syncItemsFromValue();\n    await this.updateComplete;\n    this.invalid = !this.input.checkValidity();\n    emit(this, \"sl-change\");\n  }\n  resizeMenu() {\n    this.menu.style.width = `${this.control.clientWidth}px`;\n    this.dropdown.reposition();\n  }\n  syncItemsFromValue() {\n    const items = this.getItems();\n    const value = this.getValueAsArray();\n    items.map((item) => item.checked = value.includes(item.value));\n    if (this.multiple) {\n      const checkedItems = items.filter((item) => value.includes(item.value));\n      this.displayLabel = checkedItems.length > 0 ? this.getItemLabel(checkedItems[0]) : \"\";\n      this.displayTags = checkedItems.map((item) => {\n        return $`\n          <sl-tag\n            part=\"tag\"\n            exportparts=\"\n              base:tag__base,\n              content:tag__content,\n              remove-button:tag__remove-button\n            \"\n            variant=\"neutral\"\n            size=${this.size}\n            ?pill=${this.pill}\n            removable\n            @click=${this.handleTagInteraction}\n            @keydown=${this.handleTagInteraction}\n            @sl-remove=${(event) => {\n          event.stopPropagation();\n          if (!this.disabled) {\n            item.checked = false;\n            this.syncValueFromItems();\n          }\n        }}\n          >\n            ${this.getItemLabel(item)}\n          </sl-tag>\n        `;\n      });\n      if (this.maxTagsVisible > 0 && this.displayTags.length > this.maxTagsVisible) {\n        const total = this.displayTags.length;\n        this.displayLabel = \"\";\n        this.displayTags = this.displayTags.slice(0, this.maxTagsVisible);\n        this.displayTags.push($`\n          <sl-tag\n            part=\"tag\"\n            exportparts=\"\n              base:tag__base,\n              content:tag__content,\n              remove-button:tag__remove-button\n            \"\n            variant=\"neutral\"\n            size=${this.size}\n          >\n            +${total - this.maxTagsVisible}\n          </sl-tag>\n        `);\n      }\n    } else {\n      const checkedItem = items.find((item) => item.value === value[0]);\n      this.displayLabel = checkedItem ? this.getItemLabel(checkedItem) : \"\";\n      this.displayTags = [];\n    }\n  }\n  syncValueFromItems() {\n    const items = this.getItems();\n    const checkedItems = items.filter((item) => item.checked);\n    const checkedValues = checkedItems.map((item) => item.value);\n    if (this.multiple) {\n      this.value = this.value.filter((val) => checkedValues.includes(val));\n    } else {\n      this.value = checkedValues.length > 0 ? checkedValues[0] : \"\";\n    }\n  }\n  render() {\n    const hasLabelSlot = this.hasSlotController.test(\"label\");\n    const hasHelpTextSlot = this.hasSlotController.test(\"help-text\");\n    const hasSelection = this.multiple ? this.value.length > 0 : this.value !== \"\";\n    const hasLabel = this.label ? true : !!hasLabelSlot;\n    const hasHelpText = this.helpText ? true : !!hasHelpTextSlot;\n    return $`\n      <div\n        part=\"form-control\"\n        class=${o({\n      \"form-control\": true,\n      \"form-control--small\": this.size === \"small\",\n      \"form-control--medium\": this.size === \"medium\",\n      \"form-control--large\": this.size === \"large\",\n      \"form-control--has-label\": hasLabel,\n      \"form-control--has-help-text\": hasHelpText\n    })}\n      >\n        <label\n          part=\"form-control-label\"\n          class=\"form-control__label\"\n          for=\"input\"\n          aria-hidden=${hasLabel ? \"false\" : \"true\"}\n          @click=${this.handleLabelClick}\n        >\n          <slot name=\"label\">${this.label}</slot>\n        </label>\n\n        <div part=\"form-control-input\" class=\"form-control-input\">\n          <sl-dropdown\n            part=\"base\"\n            .hoist=${this.hoist}\n            .placement=${this.placement}\n            .stayOpenOnSelect=${this.multiple}\n            .containingElement=${this}\n            ?disabled=${this.disabled}\n            class=${o({\n      select: true,\n      \"select--open\": this.isOpen,\n      \"select--empty\": this.value.length === 0,\n      \"select--focused\": this.hasFocus,\n      \"select--clearable\": this.clearable,\n      \"select--disabled\": this.disabled,\n      \"select--multiple\": this.multiple,\n      \"select--standard\": !this.filled,\n      \"select--filled\": this.filled,\n      \"select--has-tags\": this.multiple && this.displayTags.length > 0,\n      \"select--placeholder-visible\": this.displayLabel === \"\",\n      \"select--small\": this.size === \"small\",\n      \"select--medium\": this.size === \"medium\",\n      \"select--large\": this.size === \"large\",\n      \"select--pill\": this.pill,\n      \"select--invalid\": this.invalid\n    })}\n            @sl-show=${this.handleMenuShow}\n            @sl-hide=${this.handleMenuHide}\n          >\n            <div\n              part=\"control\"\n              slot=\"trigger\"\n              id=\"input\"\n              class=\"select__control\"\n              role=\"combobox\"\n              aria-describedby=\"help-text\"\n              aria-haspopup=\"true\"\n              aria-disabled=${this.disabled ? \"true\" : \"false\"}\n              aria-expanded=${this.isOpen ? \"true\" : \"false\"}\n              aria-controls=\"menu\"\n              tabindex=${this.disabled ? \"-1\" : \"0\"}\n              @blur=${this.handleBlur}\n              @focus=${this.handleFocus}\n              @keydown=${this.handleKeyDown}\n            >\n              <span part=\"prefix\" class=\"select__prefix\">\n                <slot name=\"prefix\"></slot>\n              </span>\n\n              <div part=\"display-label\" class=\"select__label\">\n                ${this.displayTags.length > 0 ? $` <span part=\"tags\" class=\"select__tags\"> ${this.displayTags} </span> ` : this.displayLabel.length > 0 ? this.displayLabel : this.placeholder}\n              </div>\n\n              ${this.clearable && hasSelection ? $`\n                    <button\n                      part=\"clear-button\"\n                      class=\"select__clear\"\n                      @click=${this.handleClearClick}\n                      aria-label=${this.localize.term(\"clearEntry\")}\n                      tabindex=\"-1\"\n                    >\n                      <slot name=\"clear-icon\">\n                        <sl-icon name=\"x-circle-fill\" library=\"system\"></sl-icon>\n                      </slot>\n                    </button>\n                  ` : \"\"}\n\n              <span part=\"suffix\" class=\"select__suffix\">\n                <slot name=\"suffix\"></slot>\n              </span>\n\n              <span part=\"icon\" class=\"select__icon\" aria-hidden=\"true\">\n                <sl-icon name=\"chevron-down\" library=\"system\"></sl-icon>\n              </span>\n\n              <!-- The hidden input tricks the browser's built-in validation so it works as expected. We use an input\n              instead of a select because, otherwise, iOS will show a list of options during validation. The focus\n              handler is used to move focus to the primary control when it's marked invalid.  -->\n              <input\n                class=\"select__hidden-select\"\n                aria-hidden=\"true\"\n                ?required=${this.required}\n                .value=${hasSelection ? \"1\" : \"\"}\n                tabindex=\"-1\"\n                @focus=${() => this.control.focus()}\n              />\n            </div>\n\n            <sl-menu part=\"menu\" id=\"menu\" class=\"select__menu\" @sl-select=${this.handleMenuSelect}>\n              <slot @slotchange=${this.handleMenuSlotChange}></slot>\n            </sl-menu>\n          </sl-dropdown>\n        </div>\n\n        <div\n          part=\"form-control-help-text\"\n          id=\"help-text\"\n          class=\"form-control__help-text\"\n          aria-hidden=${hasHelpText ? \"false\" : \"true\"}\n        >\n          <slot name=\"help-text\">${this.helpText}</slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlSelect.styles = select_styles_default;\n__decorateClass([\n  i(\".select\")\n], SlSelect.prototype, \"dropdown\", 2);\n__decorateClass([\n  i(\".select__control\")\n], SlSelect.prototype, \"control\", 2);\n__decorateClass([\n  i(\".select__hidden-select\")\n], SlSelect.prototype, \"input\", 2);\n__decorateClass([\n  i(\".select__menu\")\n], SlSelect.prototype, \"menu\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"hasFocus\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"isOpen\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"displayLabel\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"displayTags\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"multiple\", 2);\n__decorateClass([\n  e({ attribute: \"max-tags-visible\", type: Number })\n], SlSelect.prototype, \"maxTagsVisible\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"placeholder\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlSelect.prototype, \"hoist\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"filled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"pill\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"label\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"placement\", 2);\n__decorateClass([\n  e({ attribute: \"help-text\" })\n], SlSelect.prototype, \"helpText\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlSelect.prototype, \"clearable\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlSelect.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"multiple\")\n], SlSelect.prototype, \"handleMultipleChange\", 1);\n__decorateClass([\n  watch(\"value\", { waitUntilFirstUpdate: true })\n], SlSelect.prototype, \"handleValueChange\", 1);\nSlSelect = __decorateClass([\n  n(\"sl-select\")\n], SlSelect);\n\nexport {\n  SlSelect\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tag/tag.styles.ts\nvar tag_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .tag {\n    display: flex;\n    align-items: center;\n    border: solid 1px;\n    line-height: 1;\n    white-space: nowrap;\n    user-select: none;\n    cursor: default;\n  }\n\n  .tag__remove::part(base) {\n    color: inherit;\n    padding: 0;\n  }\n\n  /*\n   * Variant modifiers\n   */\n\n  .tag--primary {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-200);\n    color: var(--sl-color-primary-800);\n  }\n\n  .tag--success {\n    background-color: var(--sl-color-success-50);\n    border-color: var(--sl-color-success-200);\n    color: var(--sl-color-success-800);\n  }\n\n  .tag--neutral {\n    background-color: var(--sl-color-neutral-50);\n    border-color: var(--sl-color-neutral-200);\n    color: var(--sl-color-neutral-800);\n  }\n\n  .tag--warning {\n    background-color: var(--sl-color-warning-50);\n    border-color: var(--sl-color-warning-200);\n    color: var(--sl-color-warning-800);\n  }\n\n  .tag--danger {\n    background-color: var(--sl-color-danger-50);\n    border-color: var(--sl-color-danger-200);\n    color: var(--sl-color-danger-800);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .tag--small {\n    font-size: var(--sl-button-font-size-small);\n    height: calc(var(--sl-input-height-small) * 0.8);\n    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-small);\n    padding: 0 var(--sl-spacing-x-small);\n  }\n\n  .tag--small .tag__remove {\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-3x-small));\n  }\n\n  .tag--medium {\n    font-size: var(--sl-button-font-size-medium);\n    height: calc(var(--sl-input-height-medium) * 0.8);\n    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-medium);\n    padding: 0 var(--sl-spacing-small);\n  }\n\n  .tag__remove {\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-2x-small));\n  }\n\n  .tag--large {\n    font-size: var(--sl-button-font-size-large);\n    height: calc(var(--sl-input-height-large) * 0.8);\n    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-large);\n    padding: 0 var(--sl-spacing-medium);\n  }\n\n  .tag__remove {\n    font-size: 1.4em;\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-x-small));\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .tag--pill {\n    border-radius: var(--sl-border-radius-pill);\n  }\n`;\n\nexport {\n  tag_styles_default\n};\n","import {\n  tag_styles_default\n} from \"./chunk.GX6HO7XH.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tag/tag.ts\nvar SlTag = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.variant = \"neutral\";\n    this.size = \"medium\";\n    this.pill = false;\n    this.removable = false;\n  }\n  handleRemoveClick() {\n    emit(this, \"sl-remove\");\n  }\n  render() {\n    return $`\n      <span\n        part=\"base\"\n        class=${o({\n      tag: true,\n      \"tag--primary\": this.variant === \"primary\",\n      \"tag--success\": this.variant === \"success\",\n      \"tag--neutral\": this.variant === \"neutral\",\n      \"tag--warning\": this.variant === \"warning\",\n      \"tag--danger\": this.variant === \"danger\",\n      \"tag--text\": this.variant === \"text\",\n      \"tag--small\": this.size === \"small\",\n      \"tag--medium\": this.size === \"medium\",\n      \"tag--large\": this.size === \"large\",\n      \"tag--pill\": this.pill,\n      \"tag--removable\": this.removable\n    })}\n      >\n        <span part=\"content\" class=\"tag__content\">\n          <slot></slot>\n        </span>\n\n        ${this.removable ? $`\n              <sl-icon-button\n                part=\"remove-button\"\n                exportparts=\"base:remove-button__base\"\n                name=\"x\"\n                library=\"system\"\n                label=${this.localize.term(\"remove\")}\n                class=\"tag__remove\"\n                @click=${this.handleRemoveClick}\n              ></sl-icon-button>\n            ` : \"\"}\n      </span>\n    `;\n  }\n};\nSlTag.styles = tag_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlTag.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlTag.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTag.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTag.prototype, \"removable\", 2);\nSlTag = __decorateClass([\n  n(\"sl-tag\")\n], SlTag);\n\nexport {\n  SlTag\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/menu/menu.styles.ts\nvar menu_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .menu {\n    background: var(--sl-panel-background-color);\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-radius: var(--sl-border-radius-medium);\n    background: var(--sl-panel-background-color);\n    padding: var(--sl-spacing-x-small) 0;\n  }\n\n  ::slotted(sl-divider) {\n    --spacing: var(--sl-spacing-x-small);\n  }\n`;\n\nexport {\n  menu_styles_default\n};\n","import {\n  menu_styles_default\n} from \"./chunk.R2YZVUVK.js\";\nimport {\n  getTextContent\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  hasFocusVisible\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/menu/menu.ts\nvar SlMenu = class extends s {\n  constructor() {\n    super(...arguments);\n    this.typeToSelectString = \"\";\n  }\n  firstUpdated() {\n    this.setAttribute(\"role\", \"menu\");\n  }\n  getAllItems(options = { includeDisabled: true }) {\n    return [...this.defaultSlot.assignedElements({ flatten: true })].filter((el) => {\n      if (el.getAttribute(\"role\") !== \"menuitem\") {\n        return false;\n      }\n      if (!options.includeDisabled && el.disabled) {\n        return false;\n      }\n      return true;\n    });\n  }\n  getCurrentItem() {\n    return this.getAllItems({ includeDisabled: false }).find((i2) => i2.getAttribute(\"tabindex\") === \"0\");\n  }\n  setCurrentItem(item) {\n    const items = this.getAllItems({ includeDisabled: false });\n    const activeItem = item.disabled ? items[0] : item;\n    items.forEach((i2) => {\n      i2.setAttribute(\"tabindex\", i2 === activeItem ? \"0\" : \"-1\");\n    });\n  }\n  typeToSelect(event) {\n    var _a;\n    const items = this.getAllItems({ includeDisabled: false });\n    clearTimeout(this.typeToSelectTimeout);\n    this.typeToSelectTimeout = window.setTimeout(() => this.typeToSelectString = \"\", 1e3);\n    if (event.key === \"Backspace\") {\n      if (event.metaKey || event.ctrlKey) {\n        this.typeToSelectString = \"\";\n      } else {\n        this.typeToSelectString = this.typeToSelectString.slice(0, -1);\n      }\n    } else {\n      this.typeToSelectString += event.key.toLowerCase();\n    }\n    if (!hasFocusVisible) {\n      items.forEach((item) => item.classList.remove(\"sl-focus-invisible\"));\n    }\n    for (const item of items) {\n      const slot = (_a = item.shadowRoot) == null ? void 0 : _a.querySelector(\"slot:not([name])\");\n      const label = getTextContent(slot).toLowerCase().trim();\n      if (label.startsWith(this.typeToSelectString)) {\n        this.setCurrentItem(item);\n        item.focus();\n        break;\n      }\n    }\n  }\n  handleClick(event) {\n    const target = event.target;\n    const item = target.closest(\"sl-menu-item\");\n    if ((item == null ? void 0 : item.disabled) === false) {\n      emit(this, \"sl-select\", { detail: { item } });\n    }\n  }\n  handleKeyUp() {\n    if (!hasFocusVisible) {\n      const items = this.getAllItems();\n      items.forEach((item) => {\n        item.classList.remove(\"sl-focus-invisible\");\n      });\n    }\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Enter\") {\n      const item = this.getCurrentItem();\n      event.preventDefault();\n      item == null ? void 0 : item.click();\n    }\n    if (event.key === \" \") {\n      event.preventDefault();\n    }\n    if ([\"ArrowDown\", \"ArrowUp\", \"Home\", \"End\"].includes(event.key)) {\n      const items = this.getAllItems({ includeDisabled: false });\n      const activeItem = this.getCurrentItem();\n      let index = activeItem ? items.indexOf(activeItem) : 0;\n      if (items.length > 0) {\n        event.preventDefault();\n        if (event.key === \"ArrowDown\") {\n          index++;\n        } else if (event.key === \"ArrowUp\") {\n          index--;\n        } else if (event.key === \"Home\") {\n          index = 0;\n        } else if (event.key === \"End\") {\n          index = items.length - 1;\n        }\n        if (index < 0) {\n          index = items.length - 1;\n        }\n        if (index > items.length - 1) {\n          index = 0;\n        }\n        this.setCurrentItem(items[index]);\n        items[index].focus();\n        return;\n      }\n    }\n    this.typeToSelect(event);\n  }\n  handleMouseDown(event) {\n    const target = event.target;\n    if (target.getAttribute(\"role\") === \"menuitem\") {\n      this.setCurrentItem(target);\n      if (!hasFocusVisible) {\n        target.classList.add(\"sl-focus-invisible\");\n      }\n    }\n  }\n  handleSlotChange() {\n    const items = this.getAllItems({ includeDisabled: false });\n    if (items.length > 0) {\n      this.setCurrentItem(items[0]);\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=\"menu\"\n        @click=${this.handleClick}\n        @keydown=${this.handleKeyDown}\n        @keyup=${this.handleKeyUp}\n        @mousedown=${this.handleMouseDown}\n      >\n        <slot @slotchange=${this.handleSlotChange}></slot>\n      </div>\n    `;\n  }\n};\nSlMenu.styles = menu_styles_default;\n__decorateClass([\n  i(\".menu\")\n], SlMenu.prototype, \"menu\", 2);\n__decorateClass([\n  i(\"slot\")\n], SlMenu.prototype, \"defaultSlot\", 2);\nSlMenu = __decorateClass([\n  n(\"sl-menu\")\n], SlMenu);\n\nexport {\n  SlMenu\n};\n","import {\n  __objRest,\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/@floating-ui/core/dist/floating-ui.core.esm.js\nfunction getSide(placement) {\n  return placement.split(\"-\")[0];\n}\nfunction getAlignment(placement) {\n  return placement.split(\"-\")[1];\n}\nfunction getMainAxisFromPlacement(placement) {\n  return [\"top\", \"bottom\"].includes(getSide(placement)) ? \"x\" : \"y\";\n}\nfunction getLengthFromAxis(axis) {\n  return axis === \"y\" ? \"height\" : \"width\";\n}\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  const commonAlign = reference[length] / 2 - floating[length] / 2;\n  const side = getSide(placement);\n  const isVertical = mainAxis === \"x\";\n  let coords;\n  switch (side) {\n    case \"top\":\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case \"bottom\":\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case \"right\":\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case \"left\":\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case \"start\":\n      coords[mainAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case \"end\":\n      coords[mainAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\nvar computePosition = async (reference, floating, config) => {\n  const {\n    placement = \"bottom\",\n    strategy = \"absolute\",\n    middleware = [],\n    platform: platform2\n  } = config;\n  const rtl = await (platform2.isRTL == null ? void 0 : platform2.isRTL(floating));\n  if (false) {\n    if (platform2 == null) {\n      console.error([\"Floating UI: `platform` property was not passed to config. If you\", \"want to use Floating UI on the web, install @floating-ui/dom\", \"instead of the /core package. Otherwise, you can create your own\", \"`platform`: https://floating-ui.com/docs/platform\"].join(\" \"));\n    }\n    if (middleware.filter((_ref) => {\n      let {\n        name\n      } = _ref;\n      return name === \"autoPlacement\" || name === \"flip\";\n    }).length > 1) {\n      throw new Error([\"Floating UI: duplicate `flip` and/or `autoPlacement`\", \"middleware detected. This will lead to an infinite loop. Ensure only\", \"one of either has been passed to the `middleware` array.\"].join(\" \"));\n    }\n  }\n  let rects = await platform2.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  const skippedMiddlewareNames = /* @__PURE__ */ new Set();\n  let _debug_loop_count_ = 0;\n  for (let i = 0; i < middleware.length; i++) {\n    if (false) {\n      _debug_loop_count_++;\n      if (_debug_loop_count_ > 100) {\n        throw new Error([\"Floating UI: The middleware lifecycle appears to be\", \"running in an infinite loop. This is usually caused by a `reset`\", \"continually being returned without a break condition.\"].join(\" \"));\n      }\n    }\n    const {\n      name,\n      fn\n    } = middleware[i];\n    if (skippedMiddlewareNames.has(name)) {\n      continue;\n    }\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform: platform2,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = __spreadProps(__spreadValues({}, middlewareData), {\n      [name]: __spreadValues(__spreadValues({}, middlewareData[name]), data)\n    });\n    if (reset) {\n      if (typeof reset === \"object\") {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform2.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n        if (reset.skip !== false) {\n          skippedMiddlewareNames.add(name);\n        }\n      }\n      i = -1;\n      continue;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\nfunction expandPaddingObject(padding) {\n  return __spreadValues({\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }, padding);\n}\nfunction getSideObjectFromPadding(padding) {\n  return typeof padding !== \"number\" ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  return __spreadProps(__spreadValues({}, rect), {\n    top: rect.y,\n    left: rect.x,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}\nasync function detectOverflow(middlewareArguments, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform: platform2,\n    rects,\n    elements,\n    strategy\n  } = middlewareArguments;\n  const {\n    boundary = \"clippingAncestors\",\n    rootBoundary = \"viewport\",\n    elementContext = \"floating\",\n    altBoundary = false,\n    padding = 0\n  } = options;\n  const paddingObject = getSideObjectFromPadding(padding);\n  const altContext = elementContext === \"floating\" ? \"reference\" : \"floating\";\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform2.getClippingRect({\n    element: ((_await$platform$isEle = await (platform2.isElement == null ? void 0 : platform2.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || await (platform2.getDocumentElement == null ? void 0 : platform2.getDocumentElement(elements.floating)),\n    boundary,\n    rootBoundary\n  }));\n  const elementClientRect = rectToClientRect(platform2.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform2.convertOffsetParentRelativeRectToViewportRelativeRect({\n    rect: elementContext === \"floating\" ? __spreadProps(__spreadValues({}, rects.floating), {\n      x,\n      y\n    }) : rects.reference,\n    offsetParent: await (platform2.getOffsetParent == null ? void 0 : platform2.getOffsetParent(elements.floating)),\n    strategy\n  }) : rects[elementContext]);\n  return {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n}\nvar min = Math.min;\nvar max = Math.max;\nfunction within(min$1, value, max$1) {\n  return max(min$1, min(value, max$1));\n}\nvar arrow = (options) => ({\n  name: \"arrow\",\n  options,\n  async fn(middlewareArguments) {\n    const {\n      element,\n      padding = 0\n    } = options != null ? options : {};\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform: platform2\n    } = middlewareArguments;\n    if (element == null) {\n      if (false) {\n        console.warn(\"Floating UI: No `element` was passed to the `arrow` middleware.\");\n      }\n      return {};\n    }\n    const paddingObject = getSideObjectFromPadding(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getMainAxisFromPlacement(placement);\n    const length = getLengthFromAxis(axis);\n    const arrowDimensions = await platform2.getDimensions(element);\n    const minProp = axis === \"y\" ? \"top\" : \"left\";\n    const maxProp = axis === \"y\" ? \"bottom\" : \"right\";\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform2.getOffsetParent == null ? void 0 : platform2.getOffsetParent(element));\n    const clientSize = arrowOffsetParent ? axis === \"y\" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n    const centerToReference = endDiff / 2 - startDiff / 2;\n    const min3 = paddingObject[minProp];\n    const max3 = clientSize - arrowDimensions[length] - paddingObject[maxProp];\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset2 = within(min3, center, max3);\n    return {\n      data: {\n        [axis]: offset2,\n        centerOffset: center - offset2\n      }\n    };\n  }\n});\nvar hash$1 = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n};\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, (matched) => hash$1[matched]);\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  let mainAlignmentSide = mainAxis === \"x\" ? alignment === (rtl ? \"end\" : \"start\") ? \"right\" : \"left\" : alignment === \"start\" ? \"bottom\" : \"top\";\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return {\n    main: mainAlignmentSide,\n    cross: getOppositePlacement(mainAlignmentSide)\n  };\n}\nvar hash = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, (matched) => hash[matched]);\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nvar flip = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"flip\",\n    options,\n    async fn(middlewareArguments) {\n      var _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const _a = options, {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = \"bestFit\",\n        flipAlignment = true\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"mainAxis\",\n        \"crossAxis\",\n        \"fallbackPlacements\",\n        \"fallbackStrategy\",\n        \"flipAlignment\"\n      ]);\n      const side = getSide(placement);\n      const isBasePlacement = side === initialPlacement;\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const {\n          main,\n          cross\n        } = getAlignmentSides(placement, rects, await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)));\n        overflows.push(overflow[main], overflow[cross]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n      if (!overflows.every((side2) => side2 <= 0)) {\n        var _middlewareData$flip$, _middlewareData$flip2;\n        const nextIndex = ((_middlewareData$flip$ = (_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) != null ? _middlewareData$flip$ : 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              skip: false,\n              placement: nextPlacement\n            }\n          };\n        }\n        let resetPlacement = \"bottom\";\n        switch (fallbackStrategy) {\n          case \"bestFit\": {\n            var _overflowsData$slice$;\n            const placement2 = (_overflowsData$slice$ = overflowsData.slice().sort((a, b) => a.overflows.filter((overflow2) => overflow2 > 0).reduce((acc, overflow2) => acc + overflow2, 0) - b.overflows.filter((overflow2) => overflow2 > 0).reduce((acc, overflow2) => acc + overflow2, 0))[0]) == null ? void 0 : _overflowsData$slice$.placement;\n            if (placement2) {\n              resetPlacement = placement2;\n            }\n            break;\n          }\n          case \"initialPlacement\":\n            resetPlacement = initialPlacement;\n            break;\n        }\n        return {\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\nfunction convertValueToCoords(placement, rects, value, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getMainAxisFromPlacement(placement) === \"x\";\n  const mainAxisMulti = [\"left\", \"top\"].includes(side) ? -1 : 1;\n  let crossAxisMulti = 1;\n  if (alignment === \"end\") {\n    crossAxisMulti = -1;\n  }\n  if (rtl && isVertical) {\n    crossAxisMulti *= -1;\n  }\n  const rawValue = typeof value === \"function\" ? value(__spreadProps(__spreadValues({}, rects), {\n    placement\n  })) : value;\n  const {\n    mainAxis,\n    crossAxis\n  } = typeof rawValue === \"number\" ? {\n    mainAxis: rawValue,\n    crossAxis: 0\n  } : __spreadValues({\n    mainAxis: 0,\n    crossAxis: 0\n  }, rawValue);\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\nvar offset = function(value) {\n  if (value === void 0) {\n    value = 0;\n  }\n  return {\n    name: \"offset\",\n    options: value,\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const diffCoords = convertValueToCoords(placement, rects, value, await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)));\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: diffCoords\n      };\n    }\n  };\n};\nfunction getCrossAxis(axis) {\n  return axis === \"x\" ? \"y\" : \"x\";\n}\nvar shift = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"shift\",\n    options,\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement\n      } = middlewareArguments;\n      const _a = options, {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: (_ref) => {\n            let {\n              x: x2,\n              y: y2\n            } = _ref;\n            return {\n              x: x2,\n              y: y2\n            };\n          }\n        }\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"mainAxis\",\n        \"crossAxis\",\n        \"limiter\"\n      ]);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const mainAxis = getMainAxisFromPlacement(getSide(placement));\n      const crossAxis = getCrossAxis(mainAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === \"y\" ? \"top\" : \"left\";\n        const maxSide = mainAxis === \"y\" ? \"bottom\" : \"right\";\n        const min3 = mainAxisCoord + overflow[minSide];\n        const max3 = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = within(min3, mainAxisCoord, max3);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === \"y\" ? \"top\" : \"left\";\n        const maxSide = crossAxis === \"y\" ? \"bottom\" : \"right\";\n        const min3 = crossAxisCoord + overflow[minSide];\n        const max3 = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = within(min3, crossAxisCoord, max3);\n      }\n      const limitedCoords = limiter.fn(__spreadProps(__spreadValues({}, middlewareArguments), {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      }));\n      return __spreadProps(__spreadValues({}, limitedCoords), {\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      });\n    }\n  };\n};\nvar size = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"size\",\n    options,\n    async fn(middlewareArguments) {\n      const {\n        placement,\n        rects,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const _a = options, {\n        apply\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"apply\"\n      ]);\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      let heightSide;\n      let widthSide;\n      if (side === \"top\" || side === \"bottom\") {\n        heightSide = side;\n        widthSide = alignment === (await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)) ? \"start\" : \"end\") ? \"left\" : \"right\";\n      } else {\n        widthSide = side;\n        heightSide = alignment === \"end\" ? \"top\" : \"bottom\";\n      }\n      const xMin = max(overflow.left, 0);\n      const xMax = max(overflow.right, 0);\n      const yMin = max(overflow.top, 0);\n      const yMax = max(overflow.bottom, 0);\n      const dimensions = {\n        height: rects.floating.height - ([\"left\", \"right\"].includes(placement) ? 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom)) : overflow[heightSide]),\n        width: rects.floating.width - ([\"top\", \"bottom\"].includes(placement) ? 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right)) : overflow[widthSide])\n      };\n      apply == null ? void 0 : apply(__spreadValues(__spreadValues({}, dimensions), rects));\n      return {\n        reset: {\n          rects: true\n        }\n      };\n    }\n  };\n};\n\n// node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.js\nfunction isWindow(value) {\n  return (value == null ? void 0 : value.toString()) === \"[object Window]\";\n}\nfunction getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n  if (!isWindow(node)) {\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n  return node;\n}\nfunction getComputedStyle$1(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeName(node) {\n  return isWindow(node) ? \"\" : node ? (node.nodeName || \"\").toLowerCase() : \"\";\n}\nfunction isHTMLElement(value) {\n  return value instanceof getWindow(value).HTMLElement;\n}\nfunction isElement(value) {\n  return value instanceof getWindow(value).Element;\n}\nfunction isNode(value) {\n  return value instanceof getWindow(value).Node;\n}\nfunction isShadowRoot(node) {\n  const OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = getComputedStyle$1(element);\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\nfunction isTableElement(element) {\n  return [\"table\", \"td\", \"th\"].includes(getNodeName(element));\n}\nfunction isContainingBlock(element) {\n  const isFirefox = navigator.userAgent.toLowerCase().includes(\"firefox\");\n  const css = getComputedStyle$1(element);\n  return css.transform !== \"none\" || css.perspective !== \"none\" || css.contain === \"paint\" || [\"transform\", \"perspective\"].includes(css.willChange) || isFirefox && css.willChange === \"filter\" || isFirefox && (css.filter ? css.filter !== \"none\" : false);\n}\nvar min2 = Math.min;\nvar max2 = Math.max;\nvar round = Math.round;\nfunction getBoundingClientRect(element, includeScale) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  let scaleX = 1;\n  let scaleY = 1;\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n  return {\n    width: clientRect.width / scaleX,\n    height: clientRect.height / scaleY,\n    top: clientRect.top / scaleY,\n    right: clientRect.right / scaleX,\n    bottom: clientRect.bottom / scaleY,\n    left: clientRect.left / scaleX,\n    x: clientRect.left / scaleX,\n    y: clientRect.top / scaleY\n  };\n}\nfunction getDocumentElement(node) {\n  return ((isNode(node) ? node.ownerDocument : node.document) || window.document).documentElement;\n}\nfunction getNodeScroll(element) {\n  if (isWindow(element)) {\n    return {\n      scrollLeft: element.pageXOffset,\n      scrollTop: element.pageYOffset\n    };\n  }\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}\nfunction getWindowScrollBarX(element) {\n  return getBoundingClientRect(getDocumentElement(element)).left + getNodeScroll(element).scrollLeft;\n}\nfunction isScaled(element) {\n  const rect = getBoundingClientRect(element);\n  return round(rect.width) !== element.offsetWidth || round(rect.height) !== element.offsetHeight;\n}\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const rect = getBoundingClientRect(element, isOffsetParentAnElement && isScaled(offsetParent));\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== \"fixed\") {\n    if (getNodeName(offsetParent) !== \"body\" || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === \"html\") {\n    return node;\n  }\n  return node.assignedSlot || node.parentNode || (isShadowRoot(node) ? node.host : null) || getDocumentElement(node);\n}\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === \"fixed\") {\n    return null;\n  }\n  return element.offsetParent;\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n  while (isHTMLElement(currentNode) && ![\"html\", \"body\"].includes(getNodeName(currentNode))) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n  return null;\n}\nfunction getOffsetParent(element) {\n  const window2 = getWindow(element);\n  let offsetParent = getTrueOffsetParent(element);\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === \"static\") {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n  if (offsetParent && (getNodeName(offsetParent) === \"html\" || getNodeName(offsetParent) === \"body\" && getComputedStyle(offsetParent).position === \"static\" && !isContainingBlock(offsetParent))) {\n    return window2;\n  }\n  return offsetParent || getContainingBlock(element) || window2;\n}\nfunction getDimensions(element) {\n  if (isHTMLElement(element)) {\n    return {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n  }\n  const rect = getBoundingClientRect(element);\n  return {\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  if (offsetParent === documentElement) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== \"fixed\") {\n    if (getNodeName(offsetParent) !== \"body\" || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return __spreadProps(__spreadValues({}, rect), {\n    x: rect.x - scroll.scrollLeft + offsets.x,\n    y: rect.y - scroll.scrollTop + offsets.y\n  });\n}\nfunction getViewportRect(element) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    if (Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) < 0.01) {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getDocumentRect(element) {\n  var _element$ownerDocumen;\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  const width = max2(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  const height = max2(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body || html).direction === \"rtl\") {\n    x += max2(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getNearestOverflowAncestor(node) {\n  if ([\"html\", \"body\", \"#document\"].includes(getNodeName(node))) {\n    return node.ownerDocument.body;\n  }\n  if (isHTMLElement(node) && isOverflowElement(node)) {\n    return node;\n  }\n  return getNearestOverflowAncestor(getParentNode(node));\n}\nfunction getOverflowAncestors(node, list) {\n  var _node$ownerDocument;\n  if (list === void 0) {\n    list = [];\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.body);\n  const win = getWindow(scrollableAncestor);\n  const target = isBody ? [win].concat(win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : []) : scrollableAncestor;\n  const updatedList = list.concat(target);\n  return isBody ? updatedList : updatedList.concat(getOverflowAncestors(getParentNode(target)));\n}\nfunction contains(parent, child) {\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n  if (parent.contains(child)) {\n    return true;\n  } else if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    do {\n      if (next && parent === next) {\n        return true;\n      }\n      next = next.parentNode || next.host;\n    } while (next);\n  }\n  return false;\n}\nfunction getInnerBoundingClientRect(element) {\n  const clientRect = getBoundingClientRect(element);\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  return {\n    top,\n    left,\n    x: left,\n    y: top,\n    right: left + element.clientWidth,\n    bottom: top + element.clientHeight,\n    width: element.clientWidth,\n    height: element.clientHeight\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingParent) {\n  if (clippingParent === \"viewport\") {\n    return rectToClientRect(getViewportRect(element));\n  }\n  if (isElement(clippingParent)) {\n    return getInnerBoundingClientRect(clippingParent);\n  }\n  return rectToClientRect(getDocumentRect(getDocumentElement(element)));\n}\nfunction getClippingAncestors(element) {\n  const clippingAncestors = getOverflowAncestors(getParentNode(element));\n  const canEscapeClipping = [\"absolute\", \"fixed\"].includes(getComputedStyle$1(element).position);\n  const clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n  if (!isElement(clipperElement)) {\n    return [];\n  }\n  return clippingAncestors.filter((clippingAncestors2) => isElement(clippingAncestors2) && contains(clippingAncestors2, clipperElement) && getNodeName(clippingAncestors2) !== \"body\");\n}\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary\n  } = _ref;\n  const mainClippingAncestors = boundary === \"clippingAncestors\" ? getClippingAncestors(element) : [].concat(boundary);\n  const clippingAncestors = [...mainClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor);\n    accRect.top = max2(rect.top, accRect.top);\n    accRect.right = min2(rect.right, accRect.right);\n    accRect.bottom = min2(rect.bottom, accRect.bottom);\n    accRect.left = max2(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\nvar platform = {\n  getClippingRect,\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  isElement,\n  getDimensions,\n  getOffsetParent,\n  getDocumentElement,\n  getElementRects: (_ref) => {\n    let {\n      reference,\n      floating,\n      strategy\n    } = _ref;\n    return {\n      reference: getRectRelativeToOffsetParent(reference, getOffsetParent(floating), strategy),\n      floating: __spreadProps(__spreadValues({}, getDimensions(floating)), {\n        x: 0,\n        y: 0\n      })\n    };\n  },\n  getClientRects: (element) => Array.from(element.getClientRects()),\n  isRTL: (element) => getComputedStyle$1(element).direction === \"rtl\"\n};\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll: _ancestorScroll = true,\n    ancestorResize: _ancestorResize = true,\n    elementResize: _elementResize = true,\n    animationFrame = false\n  } = options;\n  let cleanedUp = false;\n  const ancestorScroll = _ancestorScroll && !animationFrame;\n  const ancestorResize = _ancestorResize && !animationFrame;\n  const elementResize = _elementResize && !animationFrame;\n  const ancestors = ancestorScroll || ancestorResize ? [...isElement(reference) ? getOverflowAncestors(reference) : [], ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach((ancestor) => {\n    ancestorScroll && ancestor.addEventListener(\"scroll\", update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener(\"resize\", update);\n  });\n  let observer = null;\n  if (elementResize) {\n    observer = new ResizeObserver(update);\n    isElement(reference) && observer.observe(reference);\n    observer.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    if (cleanedUp) {\n      return;\n    }\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  return () => {\n    var _observer;\n    cleanedUp = true;\n    ancestors.forEach((ancestor) => {\n      ancestorScroll && ancestor.removeEventListener(\"scroll\", update);\n      ancestorResize && ancestor.removeEventListener(\"resize\", update);\n    });\n    (_observer = observer) == null ? void 0 : _observer.disconnect();\n    observer = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\nvar computePosition2 = (reference, floating, options) => computePosition(reference, floating, __spreadValues({\n  platform\n}, options));\n\nexport {\n  arrow,\n  flip,\n  offset,\n  shift,\n  size,\n  autoUpdate,\n  computePosition2 as computePosition\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/dropdown/dropdown.styles.ts\nvar dropdown_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .dropdown {\n    position: relative;\n  }\n\n  .dropdown__trigger {\n    display: block;\n  }\n\n  .dropdown__positioner {\n    position: absolute;\n    z-index: var(--sl-z-index-dropdown);\n  }\n\n  .dropdown__panel {\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-medium);\n    font-weight: var(--sl-font-weight-normal);\n    color: var(--color);\n    box-shadow: var(--sl-shadow-large);\n    overflow: auto;\n    overscroll-behavior: none;\n    pointer-events: none;\n  }\n\n  .dropdown--open .dropdown__panel {\n    pointer-events: all;\n  }\n\n  .dropdown__positioner[data-placement^='top'] .dropdown__panel {\n    transform-origin: bottom;\n  }\n\n  .dropdown__positioner[data-placement^='bottom'] .dropdown__panel {\n    transform-origin: top;\n  }\n\n  .dropdown__positioner[data-placement^='left'] .dropdown__panel {\n    transform-origin: right;\n  }\n\n  .dropdown__positioner[data-placement^='right'] .dropdown__panel {\n    transform-origin: left;\n  }\n`;\n\nexport {\n  dropdown_styles_default\n};\n","import {\n  autoUpdate,\n  computePosition,\n  flip,\n  offset,\n  shift,\n  size\n} from \"./chunk.DIQYRTQ3.js\";\nimport {\n  dropdown_styles_default\n} from \"./chunk.2BK5N6NV.js\";\nimport {\n  getTabbableBoundary\n} from \"./chunk.SCUNOITN.js\";\nimport {\n  scrollIntoView\n} from \"./chunk.H262HIXG.js\";\nimport {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/dropdown/dropdown.ts\nvar SlDropdown = class extends s {\n  constructor() {\n    super(...arguments);\n    this.open = false;\n    this.placement = \"bottom-start\";\n    this.disabled = false;\n    this.stayOpenOnSelect = false;\n    this.distance = 0;\n    this.skidding = 0;\n    this.hoist = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleMenuItemActivate = this.handleMenuItemActivate.bind(this);\n    this.handlePanelSelect = this.handlePanelSelect.bind(this);\n    this.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this);\n    this.handleDocumentMouseDown = this.handleDocumentMouseDown.bind(this);\n    if (!this.containingElement) {\n      this.containingElement = this;\n    }\n  }\n  async firstUpdated() {\n    this.panel.hidden = !this.open;\n    if (this.open) {\n      await this.updateComplete;\n      this.addOpenListeners();\n      this.startPositioner();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeOpenListeners();\n    this.hide();\n    this.stopPositioner();\n  }\n  focusOnTrigger() {\n    const slot = this.trigger.querySelector(\"slot\");\n    const trigger = slot.assignedElements({ flatten: true })[0];\n    if (typeof (trigger == null ? void 0 : trigger.focus) === \"function\") {\n      trigger.focus();\n    }\n  }\n  getMenu() {\n    const slot = this.panel.querySelector(\"slot\");\n    return slot.assignedElements({ flatten: true }).find((el) => el.tagName.toLowerCase() === \"sl-menu\");\n  }\n  handleDocumentKeyDown(event) {\n    var _a;\n    if (event.key === \"Escape\") {\n      this.hide();\n      this.focusOnTrigger();\n      return;\n    }\n    if (event.key === \"Tab\") {\n      if (this.open && ((_a = document.activeElement) == null ? void 0 : _a.tagName.toLowerCase()) === \"sl-menu-item\") {\n        event.preventDefault();\n        this.hide();\n        this.focusOnTrigger();\n        return;\n      }\n      setTimeout(() => {\n        var _a2, _b, _c;\n        const activeElement = ((_a2 = this.containingElement) == null ? void 0 : _a2.getRootNode()) instanceof ShadowRoot ? (_c = (_b = document.activeElement) == null ? void 0 : _b.shadowRoot) == null ? void 0 : _c.activeElement : document.activeElement;\n        if (!this.containingElement || (activeElement == null ? void 0 : activeElement.closest(this.containingElement.tagName.toLowerCase())) !== this.containingElement) {\n          this.hide();\n        }\n      });\n    }\n  }\n  handleDocumentMouseDown(event) {\n    const path = event.composedPath();\n    if (this.containingElement && !path.includes(this.containingElement)) {\n      this.hide();\n    }\n  }\n  handleMenuItemActivate(event) {\n    const item = event.target;\n    scrollIntoView(item, this.panel);\n  }\n  handlePanelSelect(event) {\n    const target = event.target;\n    if (!this.stayOpenOnSelect && target.tagName.toLowerCase() === \"sl-menu\") {\n      this.hide();\n      this.focusOnTrigger();\n    }\n  }\n  handlePopoverOptionsChange() {\n    this.updatePositioner();\n  }\n  handleTriggerClick() {\n    if (this.open) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  handleTriggerKeyDown(event) {\n    if (event.key === \"Escape\") {\n      this.focusOnTrigger();\n      this.hide();\n      return;\n    }\n    if ([\" \", \"Enter\"].includes(event.key)) {\n      event.preventDefault();\n      this.handleTriggerClick();\n      return;\n    }\n    const menu = this.getMenu();\n    if (menu) {\n      const menuItems = menu.defaultSlot.assignedElements({ flatten: true });\n      const firstMenuItem = menuItems[0];\n      const lastMenuItem = menuItems[menuItems.length - 1];\n      if ([\"ArrowDown\", \"ArrowUp\", \"Home\", \"End\"].includes(event.key)) {\n        event.preventDefault();\n        if (!this.open) {\n          this.show();\n        }\n        if (menuItems.length > 0) {\n          requestAnimationFrame(() => {\n            if (event.key === \"ArrowDown\" || event.key === \"Home\") {\n              menu.setCurrentItem(firstMenuItem);\n              firstMenuItem.focus();\n            }\n            if (event.key === \"ArrowUp\" || event.key === \"End\") {\n              menu.setCurrentItem(lastMenuItem);\n              lastMenuItem.focus();\n            }\n          });\n        }\n      }\n      const ignoredKeys = [\"Tab\", \"Shift\", \"Meta\", \"Ctrl\", \"Alt\"];\n      if (this.open && !ignoredKeys.includes(event.key)) {\n        menu.typeToSelect(event);\n      }\n    }\n  }\n  handleTriggerKeyUp(event) {\n    if (event.key === \" \") {\n      event.preventDefault();\n    }\n  }\n  handleTriggerSlotChange() {\n    this.updateAccessibleTrigger();\n  }\n  updateAccessibleTrigger() {\n    const slot = this.trigger.querySelector(\"slot\");\n    const assignedElements = slot.assignedElements({ flatten: true });\n    const accessibleTrigger = assignedElements.find((el) => getTabbableBoundary(el).start);\n    let target;\n    if (accessibleTrigger) {\n      switch (accessibleTrigger.tagName.toLowerCase()) {\n        case \"sl-button\":\n        case \"sl-icon-button\":\n          target = accessibleTrigger.button;\n          break;\n        default:\n          target = accessibleTrigger;\n      }\n      target.setAttribute(\"aria-haspopup\", \"true\");\n      target.setAttribute(\"aria-expanded\", this.open ? \"true\" : \"false\");\n    }\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  reposition() {\n    this.updatePositioner();\n  }\n  addOpenListeners() {\n    this.panel.addEventListener(\"sl-activate\", this.handleMenuItemActivate);\n    this.panel.addEventListener(\"sl-select\", this.handlePanelSelect);\n    document.addEventListener(\"keydown\", this.handleDocumentKeyDown);\n    document.addEventListener(\"mousedown\", this.handleDocumentMouseDown);\n  }\n  removeOpenListeners() {\n    this.panel.removeEventListener(\"sl-activate\", this.handleMenuItemActivate);\n    this.panel.removeEventListener(\"sl-select\", this.handlePanelSelect);\n    document.removeEventListener(\"keydown\", this.handleDocumentKeyDown);\n    document.removeEventListener(\"mousedown\", this.handleDocumentMouseDown);\n  }\n  async handleOpenChange() {\n    if (this.disabled) {\n      this.open = false;\n      return;\n    }\n    this.updateAccessibleTrigger();\n    if (this.open) {\n      emit(this, \"sl-show\");\n      this.addOpenListeners();\n      await stopAnimations(this);\n      this.startPositioner();\n      this.panel.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"dropdown.show\");\n      await animateTo(this.panel, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      this.removeOpenListeners();\n      await stopAnimations(this);\n      const { keyframes, options } = getAnimation(this, \"dropdown.hide\");\n      await animateTo(this.panel, keyframes, options);\n      this.panel.hidden = true;\n      this.stopPositioner();\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  startPositioner() {\n    this.stopPositioner();\n    this.updatePositioner();\n    this.positionerCleanup = autoUpdate(this.trigger, this.positioner, this.updatePositioner.bind(this));\n  }\n  updatePositioner() {\n    if (!this.open || !this.trigger || !this.positioner) {\n      return;\n    }\n    computePosition(this.trigger, this.positioner, {\n      placement: this.placement,\n      middleware: [\n        offset({ mainAxis: this.distance, crossAxis: this.skidding }),\n        flip(),\n        shift(),\n        size({\n          apply: ({ width, height }) => {\n            Object.assign(this.panel.style, {\n              maxWidth: `${width}px`,\n              maxHeight: `${height}px`\n            });\n          },\n          padding: 8\n        })\n      ],\n      strategy: this.hoist ? \"fixed\" : \"absolute\"\n    }).then(({ x, y, placement }) => {\n      this.positioner.setAttribute(\"data-placement\", placement);\n      Object.assign(this.positioner.style, {\n        position: this.hoist ? \"fixed\" : \"absolute\",\n        left: `${x}px`,\n        top: `${y}px`\n      });\n    });\n  }\n  stopPositioner() {\n    if (this.positionerCleanup) {\n      this.positionerCleanup();\n      this.positionerCleanup = void 0;\n      this.positioner.removeAttribute(\"data-placement\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        id=\"dropdown\"\n        class=${o({\n      dropdown: true,\n      \"dropdown--open\": this.open\n    })}\n      >\n        <span\n          part=\"trigger\"\n          class=\"dropdown__trigger\"\n          @click=${this.handleTriggerClick}\n          @keydown=${this.handleTriggerKeyDown}\n          @keyup=${this.handleTriggerKeyUp}\n        >\n          <slot name=\"trigger\" @slotchange=${this.handleTriggerSlotChange}></slot>\n        </span>\n\n        <!-- Position the panel with a wrapper since the popover makes use of translate. This let's us add animations\n        on the panel without interfering with the position. -->\n        <div class=\"dropdown__positioner\">\n          <div\n            part=\"panel\"\n            class=\"dropdown__panel\"\n            aria-hidden=${this.open ? \"false\" : \"true\"}\n            aria-labelledby=\"dropdown\"\n          >\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDropdown.styles = dropdown_styles_default;\n__decorateClass([\n  i(\".dropdown__trigger\")\n], SlDropdown.prototype, \"trigger\", 2);\n__decorateClass([\n  i(\".dropdown__panel\")\n], SlDropdown.prototype, \"panel\", 2);\n__decorateClass([\n  i(\".dropdown__positioner\")\n], SlDropdown.prototype, \"positioner\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDropdown.prototype, \"open\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlDropdown.prototype, \"placement\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlDropdown.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ attribute: \"stay-open-on-select\", type: Boolean, reflect: true })\n], SlDropdown.prototype, \"stayOpenOnSelect\", 2);\n__decorateClass([\n  e({ attribute: false })\n], SlDropdown.prototype, \"containingElement\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlDropdown.prototype, \"distance\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlDropdown.prototype, \"skidding\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlDropdown.prototype, \"hoist\", 2);\n__decorateClass([\n  watch(\"distance\"),\n  watch(\"hoist\"),\n  watch(\"placement\"),\n  watch(\"skidding\")\n], SlDropdown.prototype, \"handlePopoverOptionsChange\", 1);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDropdown.prototype, \"handleOpenChange\", 1);\nSlDropdown = __decorateClass([\n  n(\"sl-dropdown\")\n], SlDropdown);\nsetDefaultAnimation(\"dropdown.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.9)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 100, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dropdown.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.9)\" }\n  ],\n  options: { duration: 100, easing: \"ease\" }\n});\n\nexport {\n  SlDropdown\n};\n","import {\n  l as l2,\n  r\n} from \"./chunk.LOYEL7IY.js\";\nimport {\n  button_styles_default\n} from \"./chunk.BIBTLNIT.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/button/button.ts\nvar SlButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      form: (input) => {\n        if (input.hasAttribute(\"form\")) {\n          const doc = input.getRootNode();\n          const formId = input.getAttribute(\"form\");\n          return doc.getElementById(formId);\n        }\n        return input.closest(\"form\");\n      }\n    });\n    this.hasSlotController = new HasSlotController(this, \"[default]\", \"prefix\", \"suffix\");\n    this.hasFocus = false;\n    this.variant = \"default\";\n    this.size = \"medium\";\n    this.caret = false;\n    this.disabled = false;\n    this.loading = false;\n    this.outline = false;\n    this.pill = false;\n    this.circle = false;\n    this.type = \"button\";\n  }\n  click() {\n    this.button.click();\n  }\n  focus(options) {\n    this.button.focus(options);\n  }\n  blur() {\n    this.button.blur();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleClick(event) {\n    if (this.disabled || this.loading) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n    if (this.type === \"submit\") {\n      this.formSubmitController.submit(this);\n    }\n  }\n  render() {\n    const isLink = this.href ? true : false;\n    const tag = isLink ? r`a` : r`button`;\n    return l2`\n      <${tag}\n        part=\"base\"\n        class=${o({\n      button: true,\n      \"button--default\": this.variant === \"default\",\n      \"button--primary\": this.variant === \"primary\",\n      \"button--success\": this.variant === \"success\",\n      \"button--neutral\": this.variant === \"neutral\",\n      \"button--warning\": this.variant === \"warning\",\n      \"button--danger\": this.variant === \"danger\",\n      \"button--text\": this.variant === \"text\",\n      \"button--small\": this.size === \"small\",\n      \"button--medium\": this.size === \"medium\",\n      \"button--large\": this.size === \"large\",\n      \"button--caret\": this.caret,\n      \"button--circle\": this.circle,\n      \"button--disabled\": this.disabled,\n      \"button--focused\": this.hasFocus,\n      \"button--loading\": this.loading,\n      \"button--standard\": !this.outline,\n      \"button--outline\": this.outline,\n      \"button--pill\": this.pill,\n      \"button--has-label\": this.hasSlotController.test(\"[default]\"),\n      \"button--has-prefix\": this.hasSlotController.test(\"prefix\"),\n      \"button--has-suffix\": this.hasSlotController.test(\"suffix\")\n    })}\n        ?disabled=${l(isLink ? void 0 : this.disabled)}\n        type=${this.type}\n        name=${l(isLink ? void 0 : this.name)}\n        value=${l(isLink ? void 0 : this.value)}\n        href=${l(this.href)}\n        target=${l(this.target)}\n        download=${l(this.download)}\n        rel=${l(this.target ? \"noreferrer noopener\" : void 0)}\n        role=\"button\"\n        aria-disabled=${this.disabled ? \"true\" : \"false\"}\n        tabindex=${this.disabled ? \"-1\" : \"0\"}\n        @blur=${this.handleBlur}\n        @focus=${this.handleFocus}\n        @click=${this.handleClick}\n      >\n        <span part=\"prefix\" class=\"button__prefix\">\n          <slot name=\"prefix\"></slot>\n        </span>\n        <span part=\"label\" class=\"button__label\">\n          <slot></slot>\n        </span>\n        <span part=\"suffix\" class=\"button__suffix\">\n          <slot name=\"suffix\"></slot>\n        </span>\n        ${this.caret ? l2`\n                <span part=\"caret\" class=\"button__caret\">\n                  <svg\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  >\n                    <polyline points=\"6 9 12 15 18 9\"></polyline>\n                  </svg>\n                </span>\n              ` : \"\"}\n        ${this.loading ? l2`<sl-spinner></sl-spinner>` : \"\"}\n      </${tag}>\n    `;\n  }\n};\nSlButton.styles = button_styles_default;\n__decorateClass([\n  i(\".button\")\n], SlButton.prototype, \"button\", 2);\n__decorateClass([\n  t()\n], SlButton.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlButton.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlButton.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"caret\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"loading\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"outline\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"circle\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"type\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"value\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"href\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"target\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"download\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"form\", 2);\n__decorateClass([\n  e({ attribute: \"formaction\" })\n], SlButton.prototype, \"formAction\", 2);\n__decorateClass([\n  e({ attribute: \"formmethod\" })\n], SlButton.prototype, \"formMethod\", 2);\n__decorateClass([\n  e({ attribute: \"formnovalidate\", type: Boolean })\n], SlButton.prototype, \"formNoValidate\", 2);\n__decorateClass([\n  e({ attribute: \"formtarget\" })\n], SlButton.prototype, \"formTarget\", 2);\nSlButton = __decorateClass([\n  n(\"sl-button\")\n], SlButton);\n\nexport {\n  SlButton\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/spinner/spinner.styles.ts\nvar spinner_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --track-width: 2px;\n    --track-color: rgb(128 128 128 / 25%);\n    --indicator-color: var(--sl-color-primary-600);\n    --speed: 2s;\n\n    display: inline-flex;\n    width: 1em;\n    height: 1em;\n  }\n\n  .spinner {\n    flex: 1 1 auto;\n    height: 100%;\n    width: 100%;\n  }\n\n  .spinner__track,\n  .spinner__indicator {\n    fill: none;\n    stroke-width: var(--track-width);\n    r: calc(0.5em - var(--track-width) / 2);\n    cx: 0.5em;\n    cy: 0.5em;\n    transform-origin: 50% 50%;\n  }\n\n  .spinner__track {\n    stroke: var(--track-color);\n    transform-origin: 0% 0%;\n    mix-blend-mode: multiply;\n  }\n\n  .spinner__indicator {\n    stroke: var(--indicator-color);\n    stroke-linecap: round;\n    stroke-dasharray: 150% 75%;\n    animation: spin var(--speed) linear infinite;\n  }\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n      stroke-dasharray: 0.01em, 2.75em;\n    }\n\n    50% {\n      transform: rotate(450deg);\n      stroke-dasharray: 1.375em, 1.375em;\n    }\n\n    100% {\n      transform: rotate(1080deg);\n      stroke-dasharray: 0.01em, 2.75em;\n    }\n  }\n`;\n\nexport {\n  spinner_styles_default\n};\n","import {\n  spinner_styles_default\n} from \"./chunk.AMWHV6KC.js\";\nimport {\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/spinner/spinner.ts\nvar SlSpinner = class extends s {\n  render() {\n    return $`\n      <svg part=\"base\" class=\"spinner\" role=\"status\">\n        <circle class=\"spinner__track\"></circle>\n        <circle class=\"spinner__indicator\"></circle>\n      </svg>\n    `;\n  }\n};\nSlSpinner.styles = spinner_styles_default;\nSlSpinner = __decorateClass([\n  n(\"sl-spinner\")\n], SlSpinner);\n\nexport {\n  SlSpinner\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/split-panel/split-panel.styles.ts\nvar split_panel_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --divider-width: 4px;\n    --divider-hit-area: 12px;\n    --min: 0%;\n    --max: 100%;\n\n    display: grid;\n  }\n\n  .start,\n  .end {\n    overflow: hidden;\n  }\n\n  .divider {\n    flex: 0 0 var(--divider-width);\n    display: flex;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--sl-color-neutral-200);\n    color: var(--sl-color-neutral-900);\n    z-index: 1;\n  }\n\n  .divider:focus {\n    outline: none;\n  }\n\n  :host(:not([disabled])) .divider${focusVisibleSelector} {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  :host([disabled]) .divider {\n    cursor: not-allowed;\n  }\n\n  /* Horizontal */\n  :host(:not([vertical], [disabled])) .divider {\n    cursor: col-resize;\n  }\n\n  :host(:not([vertical])) .divider::after {\n    display: flex;\n    content: '';\n    position: absolute;\n    height: 100%;\n    left: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);\n    width: var(--divider-hit-area);\n  }\n\n  /* Vertical */\n  :host([vertical]) {\n    flex-direction: column;\n  }\n\n  :host([vertical]:not([disabled])) .divider {\n    cursor: row-resize;\n  }\n\n  :host([vertical]) .divider::after {\n    content: '';\n    position: absolute;\n    width: 100%;\n    top: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);\n    height: var(--divider-hit-area);\n  }\n`;\n\nexport {\n  split_panel_styles_default\n};\n","// src/internal/math.ts\nfunction clamp(value, min, max) {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n}\n\nexport {\n  clamp\n};\n","import {\n  split_panel_styles_default\n} from \"./chunk.AAC6N2EB.js\";\nimport {\n  drag\n} from \"./chunk.RBICTPSA.js\";\nimport {\n  clamp\n} from \"./chunk.43G6GBOK.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/split-panel/split-panel.ts\nvar SlSplitPanel = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.position = 50;\n    this.vertical = false;\n    this.disabled = false;\n    this.snapThreshold = 12;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.resizeObserver = new ResizeObserver((entries) => this.handleResize(entries));\n    this.updateComplete.then(() => this.resizeObserver.observe(this));\n    this.detectSize();\n    this.cachedPositionInPixels = this.percentageToPixels(this.position);\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.resizeObserver.unobserve(this);\n  }\n  detectSize() {\n    const { width, height } = this.getBoundingClientRect();\n    this.size = this.vertical ? height : width;\n  }\n  percentageToPixels(value) {\n    return this.size * (value / 100);\n  }\n  pixelsToPercentage(value) {\n    return value / this.size * 100;\n  }\n  handleDrag(event) {\n    if (this.disabled) {\n      return;\n    }\n    event.preventDefault();\n    drag(this, (x, y) => {\n      let newPositionInPixels = this.vertical ? y : x;\n      if (this.primary === \"end\") {\n        newPositionInPixels = this.size - newPositionInPixels;\n      }\n      if (this.snap) {\n        const snaps = this.snap.split(\" \");\n        snaps.forEach((value) => {\n          let snapPoint;\n          if (value.endsWith(\"%\")) {\n            snapPoint = this.size * (parseFloat(value) / 100);\n          } else {\n            snapPoint = parseFloat(value);\n          }\n          if (newPositionInPixels >= snapPoint - this.snapThreshold && newPositionInPixels <= snapPoint + this.snapThreshold) {\n            newPositionInPixels = snapPoint;\n          }\n        });\n      }\n      this.position = clamp(this.pixelsToPercentage(newPositionInPixels), 0, 100);\n    });\n  }\n  handleKeyDown(event) {\n    if (this.disabled) {\n      return;\n    }\n    if ([\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n      let newPosition = this.position;\n      const incr = (event.shiftKey ? 10 : 1) * (this.primary === \"end\" ? -1 : 1);\n      event.preventDefault();\n      if (event.key === \"ArrowLeft\" && !this.vertical || event.key === \"ArrowUp\" && this.vertical) {\n        newPosition -= incr;\n      }\n      if (event.key === \"ArrowRight\" && !this.vertical || event.key === \"ArrowDown\" && this.vertical) {\n        newPosition += incr;\n      }\n      if (event.key === \"Home\") {\n        newPosition = this.primary === \"end\" ? 100 : 0;\n      }\n      if (event.key === \"End\") {\n        newPosition = this.primary === \"end\" ? 0 : 100;\n      }\n      this.position = clamp(newPosition, 0, 100);\n    }\n  }\n  handlePositionChange() {\n    this.cachedPositionInPixels = this.percentageToPixels(this.position);\n    this.positionInPixels = this.percentageToPixels(this.position);\n    emit(this, \"sl-reposition\");\n  }\n  handlePositionInPixelsChange() {\n    this.position = this.pixelsToPercentage(this.positionInPixels);\n  }\n  handleVerticalChange() {\n    this.detectSize();\n  }\n  handleResize(entries) {\n    const { width, height } = entries[0].contentRect;\n    this.size = this.vertical ? height : width;\n    if (this.primary) {\n      this.position = this.pixelsToPercentage(this.cachedPositionInPixels);\n    }\n  }\n  render() {\n    const gridTemplate = this.vertical ? \"gridTemplateRows\" : \"gridTemplateColumns\";\n    const gridTemplateAlt = this.vertical ? \"gridTemplateColumns\" : \"gridTemplateRows\";\n    const primary = `\n      clamp(\n        0%,\n        clamp(\n          var(--min),\n          ${this.position}% - var(--divider-width) / 2,\n          var(--max)\n        ),\n        calc(100% - var(--divider-width))\n      )\n    `;\n    const secondary = \"auto\";\n    if (this.primary === \"end\") {\n      this.style[gridTemplate] = `${secondary} var(--divider-width) ${primary}`;\n    } else {\n      this.style[gridTemplate] = `${primary} var(--divider-width) ${secondary}`;\n    }\n    this.style[gridTemplateAlt] = \"\";\n    return $`\n      <div part=\"panel start\" class=\"start\">\n        <slot name=\"start\"></slot>\n      </div>\n\n      <div\n        part=\"divider\"\n        class=\"divider\"\n        tabindex=${l(this.disabled ? void 0 : \"0\")}\n        role=\"separator\"\n        aria-label=${this.localize.term(\"resize\")}\n        @keydown=${this.handleKeyDown}\n        @mousedown=${this.handleDrag}\n        @touchstart=${this.handleDrag}\n      >\n        <slot name=\"handle\"></slot>\n      </div>\n\n      <div part=\"panel end\" class=\"end\">\n        <slot name=\"end\"></slot>\n      </div>\n    `;\n  }\n};\nSlSplitPanel.styles = split_panel_styles_default;\n__decorateClass([\n  i(\".divider\")\n], SlSplitPanel.prototype, \"divider\", 2);\n__decorateClass([\n  e({ type: Number, reflect: true })\n], SlSplitPanel.prototype, \"position\", 2);\n__decorateClass([\n  e({ attribute: \"position-in-pixels\", type: Number })\n], SlSplitPanel.prototype, \"positionInPixels\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSplitPanel.prototype, \"vertical\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSplitPanel.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlSplitPanel.prototype, \"primary\", 2);\n__decorateClass([\n  e()\n], SlSplitPanel.prototype, \"snap\", 2);\n__decorateClass([\n  e({ type: Number, attribute: \"snap-threshold\" })\n], SlSplitPanel.prototype, \"snapThreshold\", 2);\n__decorateClass([\n  watch(\"position\")\n], SlSplitPanel.prototype, \"handlePositionChange\", 1);\n__decorateClass([\n  watch(\"positionInPixels\")\n], SlSplitPanel.prototype, \"handlePositionInPixelsChange\", 1);\n__decorateClass([\n  watch(\"vertical\")\n], SlSplitPanel.prototype, \"handleVerticalChange\", 1);\nSlSplitPanel = __decorateClass([\n  n(\"sl-split-panel\")\n], SlSplitPanel);\n\nexport {\n  SlSplitPanel\n};\n","// src/internal/drag.ts\nfunction drag(container, onMove) {\n  function move(pointerEvent) {\n    const dims = container.getBoundingClientRect();\n    const defaultView = container.ownerDocument.defaultView;\n    const offsetX = dims.left + defaultView.pageXOffset;\n    const offsetY = dims.top + defaultView.pageYOffset;\n    const x = pointerEvent.pageX - offsetX;\n    const y = pointerEvent.pageY - offsetY;\n    onMove(x, y);\n  }\n  function stop() {\n    document.removeEventListener(\"pointermove\", move);\n    document.removeEventListener(\"pointerup\", stop);\n  }\n  document.addEventListener(\"pointermove\", move, { passive: true });\n  document.addEventListener(\"pointerup\", stop);\n}\n\nexport {\n  drag\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio/radio.styles.ts\nvar radio_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .radio {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .radio__icon {\n    display: inline-flex;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n  }\n\n  .radio__icon svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .radio__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    border-radius: 50%;\n    background-color: var(--sl-input-background-color);\n    color: transparent;\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .radio__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  /* Hover */\n  .radio:not(.radio--checked):not(.radio--disabled) .radio__control:hover {\n    border-color: var(--sl-input-border-color-hover);\n    background-color: var(--sl-input-background-color-hover);\n  }\n\n  /* Focus */\n  .radio:not(.radio--checked):not(.radio--disabled) .radio__input${focusVisibleSelector} ~ .radio__control {\n    border-color: var(--sl-input-border-color-focus);\n    background-color: var(--sl-input-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked */\n  .radio--checked .radio__control {\n    color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked + hover */\n  .radio.radio--checked:not(.radio--disabled) .radio__control:hover {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n  }\n\n  /* Checked + focus */\n  .radio.radio--checked:not(.radio--disabled) .radio__input${focusVisibleSelector} ~ .radio__control {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .radio--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* When the control isn't checked, hide the circle for Windows High Contrast mode a11y */\n  .radio:not(.radio--checked) svg circle {\n    opacity: 0;\n  }\n\n  .radio__label {\n    line-height: var(--sl-toggle-size);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  radio_styles_default\n};\n","import {\n  radio_styles_default\n} from \"./chunk.BN5S5DQC.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio/radio.ts\nvar SlRadio = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.checked = false;\n    this.invalid = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radio\");\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleClick() {\n    if (!this.disabled) {\n      this.checked = true;\n    }\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      emit(this, \"sl-change\");\n    }\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      this.input.disabled = this.disabled;\n      this.invalid = !this.input.checkValidity();\n    }\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      radio: true,\n      \"radio--checked\": this.checked,\n      \"radio--disabled\": this.disabled,\n      \"radio--focused\": this.hasFocus\n    })}\n      >\n        <input\n          class=\"radio__input\"\n          type=\"radio\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n        />\n        <span part=\"control\" class=\"radio__control\">\n          <span part=\"checked-icon\" class=\"radio__icon\">\n            <svg viewBox=\"0 0 16 16\">\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g fill=\"currentColor\">\n                  <circle cx=\"8\" cy=\"8\" r=\"3.42857143\"></circle>\n                </g>\n              </g>\n            </svg>\n          </span>\n        </span>\n\n        <span part=\"label\" class=\"radio__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlRadio.styles = radio_styles_default;\n__decorateClass([\n  i(\".radio__input\")\n], SlRadio.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlRadio.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlRadio.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlRadio.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlRadio.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlRadio.prototype, \"handleDisabledChange\", 1);\nSlRadio = __decorateClass([\n  n(\"sl-radio\")\n], SlRadio);\n\nexport {\n  SlRadio\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/details/details.styles.ts\nvar details_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .details {\n    border: solid 1px var(--sl-color-neutral-200);\n    border-radius: var(--sl-border-radius-medium);\n    background-color: var(--sl-color-neutral-0);\n    overflow-anchor: none;\n  }\n\n  .details--disabled {\n    opacity: 0.5;\n  }\n\n  .details__header {\n    display: flex;\n    align-items: center;\n    border-radius: inherit;\n    padding: var(--sl-spacing-medium);\n    user-select: none;\n    cursor: pointer;\n  }\n\n  .details__header:focus {\n    outline: none;\n  }\n\n  .details__header${focusVisibleSelector} {\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .details--disabled .details__header {\n    cursor: not-allowed;\n  }\n\n  .details--disabled .details__header${focusVisibleSelector} {\n    outline: none;\n    box-shadow: none;\n  }\n\n  .details__summary {\n    flex: 1 1 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .details__summary-icon {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    transition: var(--sl-transition-medium) transform ease;\n  }\n\n  .details--open .details__summary-icon {\n    transform: rotate(90deg);\n  }\n\n  .details__body {\n    overflow: hidden;\n  }\n\n  .details__content {\n    padding: var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  details_styles_default\n};\n","import {\n  details_styles_default\n} from \"./chunk.EPLHZYQM.js\";\nimport {\n  animateTo,\n  shimKeyframesHeightAuto,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/details/details.ts\nvar SlDetails = class extends s {\n  constructor() {\n    super(...arguments);\n    this.open = false;\n    this.disabled = false;\n  }\n  firstUpdated() {\n    this.body.hidden = !this.open;\n    this.body.style.height = this.open ? \"auto\" : \"0\";\n  }\n  async show() {\n    if (this.open || this.disabled) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open || this.disabled) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  handleSummaryClick() {\n    if (!this.disabled) {\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n      this.header.focus();\n    }\n  }\n  handleSummaryKeyDown(event) {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n    if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n      event.preventDefault();\n      this.hide();\n    }\n    if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n      event.preventDefault();\n      this.show();\n    }\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      await stopAnimations(this.body);\n      this.body.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"details.show\");\n      await animateTo(this.body, shimKeyframesHeightAuto(keyframes, this.body.scrollHeight), options);\n      this.body.style.height = \"auto\";\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      await stopAnimations(this.body);\n      const { keyframes, options } = getAnimation(this, \"details.hide\");\n      await animateTo(this.body, shimKeyframesHeightAuto(keyframes, this.body.scrollHeight), options);\n      this.body.hidden = true;\n      this.body.style.height = \"auto\";\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      details: true,\n      \"details--open\": this.open,\n      \"details--disabled\": this.disabled\n    })}\n      >\n        <header\n          part=\"header\"\n          id=\"header\"\n          class=\"details__header\"\n          role=\"button\"\n          aria-expanded=${this.open ? \"true\" : \"false\"}\n          aria-controls=\"content\"\n          aria-disabled=${this.disabled ? \"true\" : \"false\"}\n          tabindex=${this.disabled ? \"-1\" : \"0\"}\n          @click=${this.handleSummaryClick}\n          @keydown=${this.handleSummaryKeyDown}\n        >\n          <div part=\"summary\" class=\"details__summary\">\n            <slot name=\"summary\">${this.summary}</slot>\n          </div>\n\n          <span part=\"summary-icon\" class=\"details__summary-icon\">\n            <sl-icon name=\"chevron-right\" library=\"system\"></sl-icon>\n          </span>\n        </header>\n\n        <div class=\"details__body\">\n          <div part=\"content\" id=\"content\" class=\"details__content\" role=\"region\" aria-labelledby=\"header\">\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDetails.styles = details_styles_default;\n__decorateClass([\n  i(\".details\")\n], SlDetails.prototype, \"details\", 2);\n__decorateClass([\n  i(\".details__header\")\n], SlDetails.prototype, \"header\", 2);\n__decorateClass([\n  i(\".details__body\")\n], SlDetails.prototype, \"body\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDetails.prototype, \"open\", 2);\n__decorateClass([\n  e()\n], SlDetails.prototype, \"summary\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDetails.prototype, \"disabled\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDetails.prototype, \"handleOpenChange\", 1);\nSlDetails = __decorateClass([\n  n(\"sl-details\")\n], SlDetails);\nsetDefaultAnimation(\"details.show\", {\n  keyframes: [\n    { height: \"0\", opacity: \"0\" },\n    { height: \"auto\", opacity: \"1\" }\n  ],\n  options: { duration: 250, easing: \"linear\" }\n});\nsetDefaultAnimation(\"details.hide\", {\n  keyframes: [\n    { height: \"auto\", opacity: \"1\" },\n    { height: \"0\", opacity: \"0\" }\n  ],\n  options: { duration: 250, easing: \"linear\" }\n});\n\nexport {\n  SlDetails\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/checkbox/checkbox.styles.ts\nvar checkbox_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .checkbox {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .checkbox__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    border-radius: 2px;\n    background-color: var(--sl-input-background-color);\n    color: var(--sl-color-neutral-0);\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .checkbox__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  .checkbox__control .checkbox__icon {\n    display: inline-flex;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n  }\n\n  .checkbox__control .checkbox__icon svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  /* Hover */\n  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover {\n    border-color: var(--sl-input-border-color-hover);\n    background-color: var(--sl-input-background-color-hover);\n  }\n\n  /* Focus */\n  .checkbox:not(.checkbox--checked):not(.checkbox--disabled)\n    .checkbox__input${focusVisibleSelector}\n    ~ .checkbox__control {\n    border-color: var(--sl-input-border-color-focus);\n    background-color: var(--sl-input-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked/indeterminate */\n  .checkbox--checked .checkbox__control,\n  .checkbox--indeterminate .checkbox__control {\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked/indeterminate + hover */\n  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,\n  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n  }\n\n  /* Checked/indeterminate + focus */\n  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__input${focusVisibleSelector} ~ .checkbox__control,\n  .checkbox.checkbox--indeterminate:not(.checkbox--disabled)\n    .checkbox__input${focusVisibleSelector}\n    ~ .checkbox__control {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .checkbox--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .checkbox__label {\n    line-height: var(--sl-toggle-size);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  checkbox_styles_default\n};\n","import {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  checkbox_styles_default\n} from \"./chunk.BXPHLFH5.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/checkbox/checkbox.ts\nvar SlCheckbox = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.required = false;\n    this.checked = false;\n    this.indeterminate = false;\n    this.invalid = false;\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleClick() {\n    this.checked = !this.checked;\n    this.indeterminate = false;\n    emit(this, \"sl-change\");\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleStateChange() {\n    this.invalid = !this.input.checkValidity();\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      checkbox: true,\n      \"checkbox--checked\": this.checked,\n      \"checkbox--disabled\": this.disabled,\n      \"checkbox--focused\": this.hasFocus,\n      \"checkbox--indeterminate\": this.indeterminate\n    })}\n      >\n        <input\n          class=\"checkbox__input\"\n          type=\"checkbox\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .indeterminate=${l2(this.indeterminate)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          .required=${this.required}\n          aria-checked=${this.checked ? \"true\" : \"false\"}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n        />\n\n        <span part=\"control\" class=\"checkbox__control\">\n          ${this.checked ? $`\n                <span part=\"checked-icon\" class=\"checkbox__icon\">\n                  <svg viewBox=\"0 0 16 16\">\n                    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\">\n                      <g stroke=\"currentColor\" stroke-width=\"2\">\n                        <g transform=\"translate(3.428571, 3.428571)\">\n                          <path d=\"M0,5.71428571 L3.42857143,9.14285714\"></path>\n                          <path d=\"M9.14285714,0 L3.42857143,9.14285714\"></path>\n                        </g>\n                      </g>\n                    </g>\n                  </svg>\n                </span>\n              ` : \"\"}\n          ${!this.checked && this.indeterminate ? $`\n                <span part=\"indeterminate-icon\" class=\"checkbox__icon\">\n                  <svg viewBox=\"0 0 16 16\">\n                    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\">\n                      <g stroke=\"currentColor\" stroke-width=\"2\">\n                        <g transform=\"translate(2.285714, 6.857143)\">\n                          <path d=\"M10.2857143,1.14285714 L1.14285714,1.14285714\"></path>\n                        </g>\n                      </g>\n                    </g>\n                  </svg>\n                </span>\n              ` : \"\"}\n        </span>\n\n        <span part=\"label\" class=\"checkbox__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlCheckbox.styles = checkbox_styles_default;\n__decorateClass([\n  i('input[type=\"checkbox\"]')\n], SlCheckbox.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlCheckbox.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlCheckbox.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlCheckbox.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"indeterminate\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlCheckbox.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"checked\", { waitUntilFirstUpdate: true }),\n  watch(\"indeterminate\", { waitUntilFirstUpdate: true })\n], SlCheckbox.prototype, \"handleStateChange\", 1);\nSlCheckbox = __decorateClass([\n  n(\"sl-checkbox\")\n], SlCheckbox);\n\nexport {\n  SlCheckbox\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/switch/switch.styles.ts\nvar switch_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --height: var(--sl-toggle-size);\n    --thumb-size: calc(var(--sl-toggle-size) + 4px);\n    --width: calc(var(--height) * 2);\n\n    display: inline-block;\n  }\n\n  .switch {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .switch__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--width);\n    height: var(--height);\n    background-color: var(--sl-color-neutral-400);\n    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);\n    border-radius: var(--height);\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color;\n  }\n\n  .switch__control .switch__thumb {\n    width: var(--thumb-size);\n    height: var(--thumb-size);\n    background-color: var(--sl-color-neutral-0);\n    border-radius: 50%;\n    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);\n    transform: translateX(calc((var(--width) - var(--height)) / -2));\n    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) border-color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .switch__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  /* Hover */\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover {\n    background-color: var(--sl-color-neutral-400);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  /* Focus */\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__input${focusVisibleSelector} ~ .switch__control {\n    background-color: var(--sl-color-neutral-400);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  .switch:not(.switch--checked):not(.switch--disabled)\n    .switch__input${focusVisibleSelector}\n    ~ .switch__control\n    .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked */\n  .switch--checked .switch__control {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch--checked .switch__control .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    transform: translateX(calc((var(--width) - var(--height)) / 2));\n  }\n\n  /* Checked + hover */\n  .switch.switch--checked:not(.switch--disabled) .switch__control:hover {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked + focus */\n  .switch.switch--checked:not(.switch--disabled) .switch__input${focusVisibleSelector} ~ .switch__control {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch.switch--checked:not(.switch--disabled)\n    .switch__input${focusVisibleSelector}\n    ~ .switch__control\n    .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .switch--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .switch__label {\n    line-height: var(--height);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  switch_styles_default\n};\n","import {\n  switch_styles_default\n} from \"./chunk.7EHHFVMB.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/switch/switch.ts\nvar SlSwitch = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.required = false;\n    this.checked = false;\n    this.invalid = false;\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleCheckedChange() {\n    this.input.checked = this.checked;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleClick() {\n    this.checked = !this.checked;\n    emit(this, \"sl-change\");\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleKeyDown(event) {\n    if (event.key === \"ArrowLeft\") {\n      event.preventDefault();\n      this.checked = false;\n      emit(this, \"sl-change\");\n    }\n    if (event.key === \"ArrowRight\") {\n      event.preventDefault();\n      this.checked = true;\n      emit(this, \"sl-change\");\n    }\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      switch: true,\n      \"switch--checked\": this.checked,\n      \"switch--disabled\": this.disabled,\n      \"switch--focused\": this.hasFocus\n    })}\n      >\n        <input\n          class=\"switch__input\"\n          type=\"checkbox\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          .required=${this.required}\n          role=\"switch\"\n          aria-checked=${this.checked ? \"true\" : \"false\"}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n          @keydown=${this.handleKeyDown}\n        />\n\n        <span part=\"control\" class=\"switch__control\">\n          <span part=\"thumb\" class=\"switch__thumb\"></span>\n        </span>\n\n        <span part=\"label\" class=\"switch__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlSwitch.styles = switch_styles_default;\n__decorateClass([\n  i('input[type=\"checkbox\"]')\n], SlSwitch.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlSwitch.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlSwitch.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlSwitch.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\", { waitUntilFirstUpdate: true })\n], SlSwitch.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlSwitch.prototype, \"handleDisabledChange\", 1);\nSlSwitch = __decorateClass([\n  n(\"sl-switch\")\n], SlSwitch);\n\nexport {\n  SlSwitch\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tooltip/tooltip.styles.ts\nvar tooltip_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --max-width: 20rem;\n    --hide-delay: 0ms;\n    --show-delay: 150ms;\n\n    display: contents;\n  }\n\n  .tooltip-target {\n    display: contents;\n  }\n\n  .tooltip-positioner {\n    position: absolute;\n    z-index: var(--sl-z-index-tooltip);\n    pointer-events: none;\n  }\n\n  .tooltip-positioner[data-placement^='top'] .tooltip {\n    transform-origin: bottom;\n  }\n\n  .tooltip-positioner[data-placement^='bottom'] .tooltip {\n    transform-origin: top;\n  }\n\n  .tooltip-positioner[data-placement^='left'] .tooltip {\n    transform-origin: right;\n  }\n\n  .tooltip-positioner[data-placement^='right'] .tooltip {\n    transform-origin: left;\n  }\n\n  .tooltip__content {\n    max-width: var(--max-width);\n    border-radius: var(--sl-tooltip-border-radius);\n    background-color: var(--sl-tooltip-background-color);\n    font-family: var(--sl-tooltip-font-family);\n    font-size: var(--sl-tooltip-font-size);\n    font-weight: var(--sl-tooltip-font-weight);\n    line-height: var(--sl-tooltip-line-height);\n    color: var(--sl-tooltip-color);\n    padding: var(--sl-tooltip-padding);\n  }\n\n  .tooltip__arrow {\n    position: absolute;\n    background: var(--sl-tooltip-background-color);\n    width: calc(var(--sl-tooltip-arrow-size) * 2);\n    height: calc(var(--sl-tooltip-arrow-size) * 2);\n    transform: rotate(45deg);\n    z-index: -1;\n  }\n`;\n\nexport {\n  tooltip_styles_default\n};\n","import {\n  tooltip_styles_default\n} from \"./chunk.ZCXSKGAA.js\";\nimport {\n  arrow,\n  autoUpdate,\n  computePosition,\n  flip,\n  offset,\n  shift\n} from \"./chunk.DIQYRTQ3.js\";\nimport {\n  animateTo,\n  parseDuration,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tooltip/tooltip.ts\nvar SlTooltip = class extends s {\n  constructor() {\n    super(...arguments);\n    this.content = \"\";\n    this.placement = \"top\";\n    this.disabled = false;\n    this.distance = 10;\n    this.open = false;\n    this.skidding = 0;\n    this.trigger = \"hover focus\";\n    this.hoist = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleMouseOver = this.handleMouseOver.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.updateComplete.then(() => {\n      this.addEventListener(\"blur\", this.handleBlur, true);\n      this.addEventListener(\"focus\", this.handleFocus, true);\n      this.addEventListener(\"click\", this.handleClick);\n      this.addEventListener(\"keydown\", this.handleKeyDown);\n      this.addEventListener(\"mouseover\", this.handleMouseOver);\n      this.addEventListener(\"mouseout\", this.handleMouseOut);\n      this.target = this.getTarget();\n    });\n  }\n  async firstUpdated() {\n    this.tooltip.hidden = !this.open;\n    if (this.open) {\n      await this.updateComplete;\n      this.updatePositioner();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener(\"blur\", this.handleBlur, true);\n    this.removeEventListener(\"focus\", this.handleFocus, true);\n    this.removeEventListener(\"click\", this.handleClick);\n    this.removeEventListener(\"keydown\", this.handleKeyDown);\n    this.removeEventListener(\"mouseover\", this.handleMouseOver);\n    this.removeEventListener(\"mouseout\", this.handleMouseOut);\n    this.stopPositioner();\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  getTarget() {\n    const target = [...this.children].find((el) => el.tagName.toLowerCase() !== \"style\" && el.getAttribute(\"slot\") !== \"content\");\n    if (!target) {\n      throw new Error(\"Invalid tooltip target: no child element was found.\");\n    }\n    return target;\n  }\n  handleBlur() {\n    if (this.hasTrigger(\"focus\")) {\n      this.hide();\n    }\n  }\n  handleClick() {\n    if (this.hasTrigger(\"click\")) {\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n  }\n  handleFocus() {\n    if (this.hasTrigger(\"focus\")) {\n      this.show();\n    }\n  }\n  handleKeyDown(event) {\n    if (this.open && event.key === \"Escape\") {\n      event.stopPropagation();\n      this.hide();\n    }\n  }\n  handleMouseOver() {\n    if (this.hasTrigger(\"hover\")) {\n      const delay = parseDuration(getComputedStyle(this).getPropertyValue(\"--show-delay\"));\n      clearTimeout(this.hoverTimeout);\n      this.hoverTimeout = window.setTimeout(() => void this.show(), delay);\n    }\n  }\n  handleMouseOut() {\n    if (this.hasTrigger(\"hover\")) {\n      const delay = parseDuration(getComputedStyle(this).getPropertyValue(\"--hide-delay\"));\n      clearTimeout(this.hoverTimeout);\n      this.hoverTimeout = window.setTimeout(() => void this.hide(), delay);\n    }\n  }\n  async handleOpenChange() {\n    if (this.disabled) {\n      return;\n    }\n    if (this.open) {\n      emit(this, \"sl-show\");\n      await stopAnimations(this.tooltip);\n      this.startPositioner();\n      this.tooltip.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"tooltip.show\");\n      await animateTo(this.tooltip, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      await stopAnimations(this.tooltip);\n      const { keyframes, options } = getAnimation(this, \"tooltip.hide\");\n      await animateTo(this.tooltip, keyframes, options);\n      this.tooltip.hidden = true;\n      this.stopPositioner();\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  handleOptionsChange() {\n    this.updatePositioner();\n  }\n  handleDisabledChange() {\n    if (this.disabled && this.open) {\n      this.hide();\n    }\n  }\n  hasTrigger(triggerType) {\n    const triggers = this.trigger.split(\" \");\n    return triggers.includes(triggerType);\n  }\n  startPositioner() {\n    this.stopPositioner();\n    this.updatePositioner();\n    this.positionerCleanup = autoUpdate(this.target, this.positioner, this.updatePositioner.bind(this));\n  }\n  updatePositioner() {\n    if (!this.open || !this.target || !this.positioner) {\n      return;\n    }\n    computePosition(this.target, this.positioner, {\n      placement: this.placement,\n      middleware: [\n        offset({ mainAxis: this.distance, crossAxis: this.skidding }),\n        flip(),\n        shift(),\n        arrow({\n          element: this.arrow,\n          padding: 10\n        })\n      ],\n      strategy: this.hoist ? \"fixed\" : \"absolute\"\n    }).then(({ x, y, middlewareData, placement }) => {\n      const arrowX = middlewareData.arrow.x;\n      const arrowY = middlewareData.arrow.y;\n      const staticSide = { top: \"bottom\", right: \"left\", bottom: \"top\", left: \"right\" }[placement.split(\"-\")[0]];\n      this.positioner.setAttribute(\"data-placement\", placement);\n      Object.assign(this.positioner.style, {\n        position: this.hoist ? \"fixed\" : \"absolute\",\n        left: `${x}px`,\n        top: `${y}px`\n      });\n      Object.assign(this.arrow.style, {\n        left: typeof arrowX === \"number\" ? `${arrowX}px` : \"\",\n        top: typeof arrowY === \"number\" ? `${arrowY}px` : \"\",\n        right: \"\",\n        bottom: \"\",\n        [staticSide]: \"calc(var(--sl-tooltip-arrow-size) * -1)\"\n      });\n    });\n  }\n  stopPositioner() {\n    if (this.positionerCleanup) {\n      this.positionerCleanup();\n      this.positionerCleanup = void 0;\n      this.positioner.removeAttribute(\"data-placement\");\n    }\n  }\n  render() {\n    return $`\n      <div class=\"tooltip-target\" aria-describedby=\"tooltip\">\n        <slot></slot>\n      </div>\n\n      <div class=\"tooltip-positioner\">\n        <div\n          part=\"base\"\n          id=\"tooltip\"\n          class=${o({\n      tooltip: true,\n      \"tooltip--open\": this.open\n    })}\n          role=\"tooltip\"\n          aria-hidden=${this.open ? \"false\" : \"true\"}\n        >\n          <div class=\"tooltip__arrow\"></div>\n          <div class=\"tooltip__content\" aria-live=${this.open ? \"polite\" : \"off\"}>\n            <slot name=\"content\"> ${this.content} </slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlTooltip.styles = tooltip_styles_default;\n__decorateClass([\n  i(\".tooltip-positioner\")\n], SlTooltip.prototype, \"positioner\", 2);\n__decorateClass([\n  i(\".tooltip\")\n], SlTooltip.prototype, \"tooltip\", 2);\n__decorateClass([\n  i(\".tooltip__arrow\")\n], SlTooltip.prototype, \"arrow\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"content\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"placement\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTooltip.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlTooltip.prototype, \"distance\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTooltip.prototype, \"open\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlTooltip.prototype, \"skidding\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"trigger\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTooltip.prototype, \"hoist\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlTooltip.prototype, \"handleOpenChange\", 1);\n__decorateClass([\n  watch(\"content\"),\n  watch(\"distance\"),\n  watch(\"hoist\"),\n  watch(\"placement\"),\n  watch(\"skidding\")\n], SlTooltip.prototype, \"handleOptionsChange\", 1);\n__decorateClass([\n  watch(\"disabled\")\n], SlTooltip.prototype, \"handleDisabledChange\", 1);\nSlTooltip = __decorateClass([\n  n(\"sl-tooltip\")\n], SlTooltip);\nsetDefaultAnimation(\"tooltip.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 150, easing: \"ease\" }\n});\nsetDefaultAnimation(\"tooltip.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 150, easing: \"ease\" }\n});\n\nexport {\n  SlTooltip\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/card/card.styles.ts\nvar card_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --border-color: var(--sl-color-neutral-200);\n    --border-radius: var(--sl-border-radius-medium);\n    --border-width: 1px;\n    --padding: var(--sl-spacing-large);\n\n    display: inline-block;\n  }\n\n  .card {\n    display: flex;\n    flex-direction: column;\n    background-color: var(--sl-panel-background-color);\n    box-shadow: var(--sl-shadow-x-small);\n    border: solid var(--border-width) var(--border-color);\n    border-radius: var(--border-radius);\n  }\n\n  .card__image {\n    border-top-left-radius: var(--border-radius);\n    border-top-right-radius: var(--border-radius);\n    margin: calc(-1 * var(--border-width));\n    overflow: hidden;\n  }\n\n  .card__image ::slotted(img) {\n    display: block;\n    width: 100%;\n  }\n\n  .card:not(.card--has-image) .card__image {\n    display: none;\n  }\n\n  .card__header {\n    border-bottom: solid var(--border-width) var(--border-color);\n    padding: calc(var(--padding) / 2) var(--padding);\n  }\n\n  .card:not(.card--has-header) .card__header {\n    display: none;\n  }\n\n  .card__body {\n    padding: var(--padding);\n  }\n\n  .card--has-footer .card__footer {\n    border-top: solid var(--border-width) var(--border-color);\n    padding: var(--padding);\n  }\n\n  .card:not(.card--has-footer) .card__footer {\n    display: none;\n  }\n`;\n\nexport {\n  card_styles_default\n};\n","import {\n  card_styles_default\n} from \"./chunk.UZCU23EP.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/card/card.ts\nvar SlCard = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"footer\", \"header\", \"image\");\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      card: true,\n      \"card--has-footer\": this.hasSlotController.test(\"footer\"),\n      \"card--has-image\": this.hasSlotController.test(\"image\"),\n      \"card--has-header\": this.hasSlotController.test(\"header\")\n    })}\n      >\n        <div part=\"image\" class=\"card__image\">\n          <slot name=\"image\"></slot>\n        </div>\n\n        <div part=\"header\" class=\"card__header\">\n          <slot name=\"header\"></slot>\n        </div>\n\n        <div part=\"body\" class=\"card__body\">\n          <slot></slot>\n        </div>\n\n        <div part=\"footer\" class=\"card__footer\">\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlCard.styles = card_styles_default;\nSlCard = __decorateClass([\n  n(\"sl-card\")\n], SlCard);\n\nexport {\n  SlCard\n};\n","const Delta = Quill.import('delta');\n\nclass ModuloAspasCurvas {\n  quill: Quill;\n  options: any;\n  enabled = true;\n\n  constructor(quill: any, options: any) {\n    this.quill = quill;\n    this.options = options;\n\n    this.quill.root.addEventListener('keydown', (event: any): any => {\n      const range = this.quill?.getSelection();\n      const key = event.key;\n      if (!this.enabled || !range || !['\"', \"'\"].includes(key)) return;\n\n      this.tratarAspas(range, key);\n      event.preventDefault();\n    });\n\n    // O código abaixo é uma outra forma de fazer a mesma coisa.\n    // Se o código abaixo for usado, o código acima (addEventListener e todo o seu conteúdo) deve ser comentado.\n\n    // this.quill.keyboard.addBinding({ key: 192 }, { shiftKey: true }, (range: any, context: any): boolean => this.tratarAspas(range, '\"'));\n    // this.quill.keyboard.addBinding({ key: 192 }, { shiftKey: false }, (range: any, context: any): boolean => this.tratarAspas(range, \"'\"));\n  }\n\n  // Imita autoformação de aspas curvas do Word\n  tratarAspas(range: any, caracter: string): boolean {\n    if (!this.enabled) return true;\n\n    const isAspasDuplas = caracter === '\"';\n    const abreAspas = isAspasDuplas ? '“' : '‘';\n    const fechaAspas = isAspasDuplas ? '”' : '’';\n\n    const texto = this.quill?.getText().substring(0, range.index);\n\n    const aspasTransformada = !texto || texto?.match(/\\s$/g) ? abreAspas : fechaAspas;\n\n    const format = this.quill?.getFormat(range);\n\n    // Insere o caracter normalmente\n    let delta = new Delta().retain(range.index).delete(range.length).insert(caracter, format);\n    this.quill?.updateContents(delta as any, Quill.sources.USER);\n    this.quill?.history.cutoff();\n\n    // Troca por aspas curvas\n    delta = new Delta().retain(range.index).delete(1).insert(aspasTransformada, format);\n    this.quill?.updateContents(delta as any, Quill.sources.USER);\n\n    this.quill?.setSelection(range.index + 1, Quill.sources.SILENT);\n\n    return false;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n}\n\nexport { ModuloAspasCurvas };\n","export const generateUUID = (): string => {\n  let uuid = '';\n\n  for (let i = 0; i < 32; i++) {\n    const randomNumber = (Math.random() * 16) | 0;\n    const value = (i === 12 ? 4 : i === 16 ? (randomNumber & 3) | 8 : randomNumber).toString(16);\n\n    uuid += (i === 8 || i === 12 || i === 16 || i === 20 ? '-' : '') + value;\n  }\n\n  return uuid;\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable eqeqeq */\n\nimport { Modo } from '../../redux/elemento/enum/enumUtil';\nimport { generateUUID } from '../../util/uuid';\n\n/* eslint-disable prefer-const */\nconst Delta = Quill.import('delta');\nconst Parchment = Quill.import('parchment');\nconst Module = Quill.import('core/module');\nconst Inline = Quill.import('blots/inline');\n// const clipboard = Quill.import(\"modules/clipboard\");\nconst Keyboard = Quill.import('modules/keyboard');\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\nclass RevisaoUtil {\n  static valueToAttributes(value, domNode) {\n    if (!value) return;\n    const partes = value.split('|');\n    domNode.setAttribute('usuario', partes[0]);\n    domNode.setAttribute('date', partes[1]);\n    domNode.setAttribute('title', 'Revisão de ' + partes[0] + ' em ' + this.formatDDMMYYYYAndTime(new Date(partes[1])));\n    domNode.setAttribute('id-revisao', partes[2]);\n  }\n\n  static formats(domNode) {\n    if (domNode?.hasAttribute('usuario') && domNode?.hasAttribute('date')) {\n      return [domNode.getAttribute('usuario'), domNode.getAttribute('date'), domNode.getAttribute('id-revisao')].join('|');\n    }\n  }\n\n  static padTo2Digits(num) {\n    return num.toString().padStart(2, '0');\n  }\n\n  static formatDate(date) {\n    return (\n      [date.getFullYear(), RevisaoUtil.padTo2Digits(date.getMonth() + 1), RevisaoUtil.padTo2Digits(date.getDate())].join('-') +\n      ' ' +\n      [\n        RevisaoUtil.padTo2Digits(date.getHours()),\n        RevisaoUtil.padTo2Digits(date.getMinutes()),\n        // RevisaoUtil.padTo2Digits(date.getSeconds()),\n        '00',\n      ].join(':')\n    );\n  }\n\n  static formatDDMMYYYYAndTime(date: Date): string {\n    const data = [this.padTo2Digits(date.getDate()), this.padTo2Digits(date.getMonth() + 1), date.getFullYear()].join('/');\n    const hora = [this.padTo2Digits(date.getHours()), this.padTo2Digits(date.getMinutes())].join(':');\n    return `${data} ${hora}`;\n  }\n}\n\n// --------------------------------------------------------------------------------------------------------------------\n// Fornatos de revisão inline\n\nclass InlineRevisionBaseFormat extends Inline {\n  static blotName = 'revisionBaseFormat';\n  static tagName = '';\n\n  static create(value) {\n    let node = super.create();\n    RevisaoUtil.valueToAttributes(value, node);\n    return node;\n  }\n\n  static formats(domNode) {\n    return RevisaoUtil.formats(domNode);\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) return super.format(name, value);\n    RevisaoUtil.valueToAttributes(value, this.domNode);\n  }\n}\n\nclass InsBlot extends InlineRevisionBaseFormat {}\nInsBlot.blotName = 'added';\nInsBlot.tagName = 'ins';\n\nclass DelBlot extends InlineRevisionBaseFormat {}\nDelBlot.blotName = 'removed';\nDelBlot.tagName = 'del';\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\n// --------------------------------------------------------------------------------------------------------------------\n// Módulo de revisão\n\n// A classe abaixo adiciona um listener para o evento keydown para ser executado antes do listener padrão do Quill\nclass CustomKeyboard extends Keyboard {\n  listen() {\n    this.quill.root.addEventListener('keydown', this.onKeyDown.bind(this));\n    super.listen();\n  }\n\n  onKeyDown(e) {\n    if (this.quill?.revisao?.gerenciarKeydown && this.quill?.revisao?.emRevisao) {\n      this.quill.revisao.handleKeyDown(e);\n    }\n  }\n}\n\nclass ModuloRevisao extends Module {\n  quill;\n  options;\n  ignorarEventoTextChange = false;\n  emRevisao = false;\n  gerenciarKeydown = true;\n  usuario;\n  tableModule;\n  tableTrick;\n  isAbrindoTexto = false;\n\n  static register() {\n    Quill.register('modules/keyboard', CustomKeyboard, true);\n    Quill.register(InsBlot, true);\n    Quill.register(DelBlot, true);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill = quill;\n    this.options = options;\n\n    if (!options || !Object.keys(options).length) return;\n\n    // this.quill.options.formats.push(...['added', 'removed']);\n\n    this.usuario = options.usuario;\n    this.emRevisao = options.emRevisao ?? false;\n    this.gerenciarKeydown = options.gerenciarKeydown ?? true;\n    this.tableModule = options.tableModule;\n    this.tableTrick = options.tableTrick;\n\n    this.quill.revisao = this;\n\n    this.addClipboardMatcher();\n    this.addKeyboardBindings(this.quill);\n\n    this.quill.on('text-change', this.onTextChange.bind(this));\n\n    this.quill.root.addEventListener('click', this.tratarClick.bind(this));\n\n    if (this.tableModule) {\n      const toolbar = this.quill?.getModule('toolbar');\n\n      toolbar.addHandler('table', (value: any): any => {\n        const quill = this.quill as any;\n        const isInsertTable = (value = ''): any => value.includes('newtable_');\n        const isInTable = (quill: any): any => quill && quill.getSelection(true) && quill.getFormat(quill.getSelection(true)).td;\n\n        if (isInsertTable(value) && isInTable(quill)) {\n          return false;\n        }\n        quill?.revisao?.setIgnorarEventoTextChange(true);\n        return this.tableTrick.table_handler(value, quill);\n      });\n    }\n  }\n\n  isTagRevisao(param: HTMLElement | string) {\n    const tagName = typeof param === 'string' ? param : param?.tagName;\n    return ['INS', 'DEL'].includes(tagName);\n  }\n\n  getTagRevisaoMaisProxima(elemento: any) {\n    if (!elemento || ['BODY', 'HTML'].includes(elemento.tagName)) return null;\n    if (this.isTagRevisao(elemento)) return elemento;\n    return this.getTagRevisaoMaisProxima(elemento.parentNode);\n  }\n\n  tratarClick(event: any) {\n    const elRevisao = this.getTagRevisaoMaisProxima(event.target);\n    elRevisao && this.mostrarTooltipRevisao(elRevisao);\n  }\n\n  revisarTodos(aceitar: boolean) {\n    this.revisar(this.getRevisoes(), aceitar, true);\n  }\n\n  revisar(elementosRevisao: HTMLElement[], aceitar: boolean, todos = false) {\n    if (!this.emRevisao) return;\n\n    elementosRevisao\n      .filter(el => this.isTagRevisao(el))\n      .forEach(elRevisao => {\n        const isTagIns = elRevisao.tagName === 'INS';\n        const blot = Quill.find(elRevisao);\n        this.ignorarEventoTextChange = true;\n\n        if (blot !== null) {\n          if ((aceitar && !isTagIns) || (!aceitar && isTagIns)) {\n            const index = this.quill.getIndex(blot);\n            const length = blot.length();\n            this.quill.updateContents(new Delta().retain(index).delete(length), 'user');\n          } else {\n            blot.format(isTagIns ? 'added' : 'removed', false, 'user');\n          }\n        }\n      });\n\n    //força o revisar quando é \"todos\" e ainda sobrou revisões no quill\n    if (todos && this.getRevisoes().length > 0) {\n      this.revisar(this.getRevisoes(), aceitar);\n    }\n  }\n\n  padTo2Digits(num: number): string {\n    return num.toString().padStart(2, '0');\n  }\n\n  private mostrarTooltipRevisao(elRevisao: HTMLElement): void {\n    if (!elRevisao) return;\n\n    const tooltip = document.createElement('div');\n    tooltip.classList.add('tooltip-revisao');\n\n    const data = new Date(elRevisao.getAttribute('date') || '');\n\n    tooltip.innerHTML = `\n        <style>\n        .tooltip-revisao {\n          position: absolute;\n          border: 1px solid black;\n          background-color: white;\n          padding: 10px;\n          border-radius: 4px;\n          z-index: 9999;\n          font-size: 0.9rem;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          max-width: 300px;\n          transition: all 0.3s ease-in-out;\n        }\n        .tooltip-revisao__actions {\n          display: flex;\n          flex-direction: row;\n          gap: 0.5rem;\n          align-items: center;\n          justify-content: center;\n        }\n        .tooltip-revisao__actions button {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border: 1px solid #ccc;\n          border-radius: 15px;\n          background-color: #eee;\n          cursor: pointer;\n          padding: 0;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao__actions svg {\n          fill: currentColor;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao button:hover {\n          background-color: #ddd;\n        }\n        .tooltip-revisao button:active {\n          background-color: #ccc;\n        }\n        .tooltip-revisao__body {\n          display: flex;\n          flex-direction: row;\n          gap: 1rem;\n        }\n        .tooltip-revisao__autor {\n          font-weight: bold;\n        }\n        .tooltip-revisao__data {\n          font-size: 0.8rem;\n          color: #666;\n        }\n      </style>\n      <div class=\"tooltip-revisao__body\" role=\"tooltip\">\n        <div>\n          <div class=\"tooltip-revisao__autor\">${elRevisao.getAttribute('usuario')}</div>\n          <div class=\"tooltip-revisao__data\">${RevisaoUtil.formatDDMMYYYYAndTime(data)}</div>\n        </div>\n        <div class=\"tooltip-revisao__actions\">\n          <button id=\"button-rejeitar-revisao\" aria-label=\"Rejeitar revisão\" title=\"Rejeitar revisão\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x\" viewBox=\"0 0 16 16\">\n              <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\n            </svg>\n          </button>\n          <button id=\"button-aceitar-revisao\" aria-label=\"Aceitar revisão\" title=\"Aceitar revisão\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check\" viewBox=\"0 0 16 16\">\n              <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n      `;\n\n    tooltip.style.opacity = '0';\n    document.body.appendChild(tooltip);\n\n    const fnActionRevisao = (event: any, aceitar: boolean) => {\n      const elementos = [...this.quill.root.querySelectorAll(`${elRevisao.tagName}[id-revisao=\"${elRevisao.getAttribute('id-revisao')}\"]`)];\n      this.revisar(elementos, aceitar);\n      closeTooltip(event);\n    };\n\n    tooltip.querySelector('#button-rejeitar-revisao')!.addEventListener('click', (event: any) => fnActionRevisao(event, false));\n    tooltip.querySelector('#button-aceitar-revisao')!.addEventListener('click', (event: any) => fnActionRevisao(event, true));\n\n    this.ajustaPosicaoTooltip(tooltip, elRevisao);\n\n    const closeTooltip = (e: Event) => {\n      if (e.type === 'click') {\n        limpaTooltip();\n      } else if (e.type === 'keydown' && (e as KeyboardEvent).key === 'Escape') {\n        limpaTooltip();\n      }\n      setTimeout(() => this.quill.root.focus(), 0);\n    };\n\n    const limpaTooltip = () => {\n      tooltip.style.opacity = '0';\n      setTimeout(() => {\n        tooltip.remove();\n        document.removeEventListener('click', closeTooltip);\n        document.removeEventListener('keydown', closeTooltip);\n      }, 300);\n    };\n\n    setTimeout(() => {\n      document.addEventListener('click', closeTooltip);\n      document.addEventListener('keydown', closeTooltip);\n      tooltip.style.opacity = '1';\n    }, 0);\n\n    window.addEventListener('resize', () => this.ajustaPosicaoTooltip(tooltip, elRevisao));\n  }\n\n  private ajustaPosicaoTooltip(tooltip: HTMLElement, button: HTMLElement): void {\n    const rect = button.getBoundingClientRect();\n    const offset = 10;\n\n    // Abrir para cima por padrão, a menos que não haja espaço suficiente\n    let topOffset = rect.top - tooltip.clientHeight - offset;\n    if (topOffset < window.scrollY) {\n      topOffset = rect.bottom + offset;\n    }\n    tooltip.style.top = `${topOffset + window.scrollY}px`;\n\n    // Ajustar horizontalmente se estiver muito próximo à borda direita\n    let leftOffset = rect.left + rect.width / 2 - tooltip.clientWidth / 2;\n    if (leftOffset + tooltip.clientWidth > window.innerWidth) {\n      leftOffset = window.innerWidth - tooltip.clientWidth - offset;\n    } else if (leftOffset < 0) {\n      leftOffset = offset;\n    }\n    tooltip.style.left = `${leftOffset + window.scrollX}px`;\n  }\n\n  createTooltip() {\n    Array.from(this.querySelectorAll('#tooltipAcceptRefuse')).forEach(el => this.removeChild(el));\n\n    const tooltipElem = document.createElement('tooltip');\n    tooltipElem.id = 'tooltipAcceptRefuse';\n\n    document.body.appendChild(tooltipElem);\n\n    const content = document.createRange().createContextualFragment(`\n    <style>\n    .tooltip {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n    }\n\n    .tooltip .tooltiptext {\n      display: none;\n      width: 120px;\n      background-color: #333;\n      color: #fff;\n      text-align: center;\n      border-radius: 6px;\n      padding: 5px;\n      position: absolute;\n      z-index: 1;\n      top: calc(100% + 5px);\n      left: 50%;\n      margin-left: -60px;\n    }\n\n    </style>\n    <div class=\"tooltip\" id=\"tooltip\">\n      Hover sobre mim\n      <span class=\"tooltiptext\" id=\"tooltipContent\">\n        <button onclick=\"botaoClicado(1)\">Botão 1</button>\n        <button onclick=\"botaoClicado(2)\">Botão 2</button>\n      </span>\n    </div>\n\n    <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n  `);\n  }\n\n  handleKeyDown(e) {\n    // Não implementado\n  }\n\n  addClipboardMatcher() {\n    // Handle para tratar colagem de trechos com tag <del>\n    this.quill.clipboard.addMatcher('DEL', (node, delta) => {\n      if (this.isAbrindoTexto) {\n        console.log('abrindo texto');\n        return delta;\n      } else {\n        let match = Parchment.query(node);\n        if (match == null || match.blotName !== 'removed') {\n          return delta;\n        }\n\n        const id = generateUUID();\n        const ops = delta.ops.reduce((acc, op) => {\n          if (op.insert) {\n            delete op.attributes.background;\n            delete op.attributes.removed;\n            if (this.emRevisao) {\n              op.attributes.added = this.buildAttributes(id);\n            }\n            acc.push(op);\n          }\n          return acc;\n        }, []);\n\n        return new Delta(ops);\n      }\n    });\n  }\n\n  addKeyboardBindings(quill) {\n    function addBindingOnTop(keyBinding, context, handler) {\n      quill.keyboard.addBinding(keyBinding, context, handler);\n      const key = Object.keys(quill.keyboard.bindings)\n        .map(k => quill.keyboard.bindings[k])\n        .flat()\n        .find(binding => binding.handler === handler).key;\n      const newBinding = (quill.keyboard.bindings[key] || []).pop();\n      quill.keyboard.bindings[key].unshift(newBinding);\n    }\n\n    addBindingOnTop({ key: 'Backspace' }, null, (range, context) => this.handleRemove(range, context, 'Backspace'));\n    addBindingOnTop({ key: 'Delete' }, null, (range, context) => this.handleRemove(range, context, 'Delete'));\n\n    // Undo\n    addBindingOnTop({ key: 'z', shortKey: true }, null, (range, context) => this.handleUndo(range, context));\n\n    // Redo\n    addBindingOnTop({ key: 'z', shortKey: true, shiftKey: true }, null, (range, context) => this.handleRedo(range, context));\n    addBindingOnTop({ key: 'y', shortKey: true }, null, (range, context) => this.handleRedo(range, context));\n  }\n\n  handleUndo(range, context) {\n    const hasModuloTabela = this.quill.getModule('table') && this.tableModule;\n\n    if (this.emRevisao) {\n      this.ignorarEventoTextChange = true;\n    }\n\n    if (hasModuloTabela) {\n      return this.tableModule.keyboardHandler(this.quill, 'undo', range, context);\n    } else {\n      this.quill.history.undo();\n    }\n  }\n\n  handleRedo(range, context) {\n    const hasModuloTabela = this.quill.getModule('table') && this.tableModule;\n\n    if (this.emRevisao) {\n      this.ignorarEventoTextChange = true;\n    }\n\n    // console.log(11111, 'REDO', this.quill.history.stack.redo[this.quill.history.stack.redo.length - 1]);\n    if (hasModuloTabela) {\n      return this.tableModule.keyboardHandler(this.quill, 'redo', range, context);\n    } else {\n      this.quill.history.redo();\n    }\n  }\n\n  buildAttributes(id = '') {\n    return this.usuario + '|' + RevisaoUtil.formatDate(new Date()) + ' |' + id;\n  }\n\n  handleRemove(range, context, key) {\n    const deslocamento = key === 'Delete' ? 1 : -1;\n    const quill = this.quill;\n    if (this.emRevisao) {\n      const blot = quill.getLeaf(range.index)[0];\n      const isEmbedBlot = ['image'].includes(blot.statics.blotName);\n      const index = (blot.text || isEmbedBlot) && deslocamento === -1 && !range.length ? range.index - 1 : range.index;\n      let posicao = index;\n\n      if (index < 0 || index >= quill.getLength()) return true;\n      const delta = quill.getContents(index, range.length || 1);\n      const id = generateUUID();\n      const ops = delta.ops.reduce((acc, op) => {\n        const numChars = typeof op.insert === 'string' ? op.insert.length : 1;\n        if (op.attributes?.added) {\n          acc.push({ delete: numChars });\n        } else {\n          if (op.attributes?.list && !blot.text) {\n            acc.push({ retain: numChars, attributes: { list: false } });\n          } else if (!blot.text && !isEmbedBlot) {\n            acc.push({ delete: numChars });\n          } else {\n            acc.push({\n              retain: numChars,\n              attributes: { ...(op.attributes || {}), removed: this.buildAttributes(id) },\n            });\n\n            if (deslocamento === 1) {\n              posicao += numChars;\n            }\n          }\n        }\n        return acc;\n      }, []);\n      index && ops.unshift({ retain: index });\n\n      this.ignorarEventoTextChange = true;\n      quill.updateContents({ ops }, 'user');\n      // quill.setSelection(deslocamento === 1 ? index + length : index);\n      quill.setSelection(posicao);\n\n      return false;\n    }\n\n    return true;\n  }\n\n  onTextChange(delta, oldContent, source) {\n    const isInsertJaFormatadoEmModoDeRevisao = delta.ops.find(op => op.insert)?.attributes?.added;\n    const apenasNovaLinha = delta.ops.length === 2 && delta.ops[0].retain && delta.ops[1].insert === '\\n';\n    if (this.ignorarEventoTextChange || !this.emRevisao || isInsertJaFormatadoEmModoDeRevisao || !delta.ops.length || apenasNovaLinha) {\n      this.ignorarEventoTextChange = false;\n      return;\n    }\n\n    const quill = this.quill;\n\n    if (quill.history.stack.undo.length === 0) return;\n\n    let numCaracteresRemovidos = 0;\n\n    this.ignorarEventoTextChange = true;\n\n    let itemUndo = quill.history.stack.undo.pop();\n\n    const redo = JSON.parse(JSON.stringify(itemUndo.redo));\n\n    quill.history.cutoff();\n    quill.history.ignoreChange = true;\n    quill.updateContents(itemUndo.undo, 'silent');\n    quill.history.ignoreChange = false;\n\n    if (!quill.history.options?.userOnly) quill.history.stack.undo.pop();\n\n    this.ignorarEventoTextChange = true;\n\n    let rev = { ops: [] };\n    let idx = 0;\n    const id = generateUUID();\n    rev = redo.ops.reduce((acc, op) => {\n      const length = op.retain || op.delete || (typeof op.insert === 'string' ? op.insert.length : 1);\n      if (op.retain && op.attributes?.list) {\n        // idx += 1;\n        acc.ops.push({ retain: op.retain, attributes: { ...(op.attributes || {}) } });\n        idx += op.retain;\n      } else if (op.retain) {\n        acc.ops.push({ retain: op.retain, attributes: { ...(op.attributes || {}) } });\n        idx += op.retain;\n      } else if (op.delete) {\n        // Para refazer trechos removidos em modo de revisão é preciso identificar o que está sendo removido\n        const contentDeletedRange = quill.getContents(idx, op.delete);\n        contentDeletedRange.ops.forEach(op2 => {\n          if (op2.insert && op2.attributes?.added) {\n            // Deixa remover conteúdo adicionado em modo de revisão\n            acc.ops.push({ delete: op2.insert.length });\n          } else if (op2.insert && !op2.attributes?.added) {\n            // Não deixa remover conteúdo adicionado FORA modo de revisão\n            // Formata como removido em modo de revisão\n            acc.ops.push({ retain: op2.insert.length, attributes: { removed: this.buildAttributes(id) } });\n            idx += op2.insert.length;\n            numCaracteresRemovidos += op2.insert.length;\n          } else {\n            acc.ops.push({ retain: op2.retain || op2.delete, attributes: { removed: this.buildAttributes(id) } });\n            idx += op2.retain || op2.delete;\n          }\n        });\n      } else if (op.insert && !op.attributes?.added) {\n        op.attributes = { ...(op.attributes || {}), added: this.buildAttributes(id), removed: false };\n        acc.ops.push(op);\n        idx += length;\n      }\n      return acc;\n    }, rev);\n\n    quill.history.cutoff();\n    quill.updateContents(rev, 'user');\n\n    setTimeout(() => {\n      // TODO: Corrigir setSelection (falhando em vários casos)\n      quill.setSelection(idx - numCaracteresRemovidos, 0);\n      // quill.format('added', true, 'silent');\n      quill.format('added', this.buildAttributes(id), 'silent');\n      quill.format('removed', false, 'silent');\n      this.ignorarEventoTextChange = false;\n    }, 0);\n  }\n\n  setUsuario(usuario) {\n    this.usuario = usuario;\n  }\n\n  setEmRevisao(emRevisao) {\n    this.emRevisao = emRevisao;\n  }\n\n  setIgnorarEventoTextChange(ignorarEventoTextChange) {\n    this.ignorarEventoTextChange = ignorarEventoTextChange;\n  }\n\n  getQuantidadeRevisoes() {\n    return this.getRevisoesSemDuplicidade(this.getRevisoes()).length;\n  }\n\n  getRevisoes() {\n    const cursorCode = 65279;\n    return [...this.quill.root.querySelectorAll('ins, del')].filter(el => el.innerText?.charCodeAt(0) !== cursorCode);\n  }\n\n  private getRevisoesSemDuplicidade(listElements: any[]) {\n    const revisoesSemDuplicidade = [] as any;\n\n    listElements.forEach(element => {\n      if (!revisoesSemDuplicidade.find(r => r.getAttribute('id-revisao') === element.getAttribute('id-revisao'))) {\n        revisoesSemDuplicidade.push(element);\n      }\n    });\n\n    return revisoesSemDuplicidade;\n  }\n}\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\nQuill.register('modules/revisao', ModuloRevisao, true);\n\n// --------------------------------------------------------------------------------------------------------------------\n\nexport { ModuloRevisao };\n","function Diff() {}\nDiff.prototype = {\n  diff: function diff(oldString, newString) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = options;\n    var self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function () {\n          callback(undefined, value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    } // Allow subclasses to massage the input prior to running\n\n\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n    var newLen = newString.length,\n        oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n\n    if (options.maxEditLength) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{\n        value: this.join(newString),\n        count: newString.length\n      }]);\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath = void 0;\n\n        var addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n\n\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  pushComponent: function pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n    var newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n        commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n  equals: function equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n\n    return ret;\n  },\n  castInput: function castInput(value) {\n    return value;\n  },\n  tokenize: function tokenize(value) {\n    return value.split('');\n  },\n  join: function join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  var componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n\n      if (componentPos && components[componentPos - 1].added) {\n        var tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  } // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n\n\n  var lastComponent = components[componentLen - 1];\n\n  if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\nvar characterDiff = new Diff();\nfunction diffChars(oldStr, newStr, options) {\n  return characterDiff.diff(oldStr, newStr, options);\n}\n\nfunction generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (var name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n\n  return defaults;\n}\n\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 0080–00FF\n//  - U+00D7  × Multiplication sign\n//  - U+00F7  ÷ Division sign\n// Latin Extended-A, 0100–017F\n// Latin Extended-B, 0180–024F\n// IPA Extensions, 0250–02AF\n// Spacing Modifier Letters, 02B0–02FF\n//  - U+02C7  ˇ &#711;  Caron\n//  - U+02D8  ˘ &#728;  Breve\n//  - U+02D9  ˙ &#729;  Dot Above\n//  - U+02DA  ˚ &#730;  Ring Above\n//  - U+02DB  ˛ &#731;  Ogonek\n//  - U+02DC  ˜ &#732;  Small Tilde\n//  - U+02DD  ˝ &#733;  Double Acute Accent\n// Latin Extended Additional, 1E00–1EFF\n\nvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\nvar reWhitespace = /\\S/;\nvar wordDiff = new Diff();\n\nwordDiff.equals = function (left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n\n  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n};\n\nwordDiff.tokenize = function (value) {\n  // All whitespace symbols except newline group into one token, each newline - in separate token\n  var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n  for (var i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nfunction diffWords(oldStr, newStr, options) {\n  options = generateOptions(options, {\n    ignoreWhitespace: true\n  });\n  return wordDiff.diff(oldStr, newStr, options);\n}\nfunction diffWordsWithSpace(oldStr, newStr, options) {\n  return wordDiff.diff(oldStr, newStr, options);\n}\n\nvar lineDiff = new Diff();\n\nlineDiff.tokenize = function (value) {\n  var retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  } // Merge the content and line separators into single tokens\n\n\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\nfunction diffTrimmedLines(oldStr, newStr, callback) {\n  var options = generateOptions(callback, {\n    ignoreWhitespace: true\n  });\n  return lineDiff.diff(oldStr, newStr, options);\n}\n\nvar sentenceDiff = new Diff();\n\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nfunction diffSentences(oldStr, newStr, callback) {\n  return sentenceDiff.diff(oldStr, newStr, callback);\n}\n\nvar cssDiff = new Diff();\n\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nfunction diffCss(oldStr, newStr, callback) {\n  return cssDiff.diff(oldStr, newStr, callback);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar objectPrototypeToString = Object.prototype.toString;\nvar jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\njsonDiff.useLongestToken = true;\njsonDiff.tokenize = lineDiff.tokenize;\n\njsonDiff.castInput = function (value) {\n  var _this$options = this.options,\n      undefinedReplacement = _this$options.undefinedReplacement,\n      _this$options$stringi = _this$options.stringifyReplacer,\n      stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n    return typeof v === 'undefined' ? undefinedReplacement : v;\n  } : _this$options$stringi;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\n\njsonDiff.equals = function (left, right) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n};\n\nfunction diffJson(oldObj, newObj, options) {\n  return jsonDiff.diff(oldObj, newObj, options);\n} // This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  var i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  var canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (_typeof(obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n\n    var sortedKeys = [],\n        _key;\n\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(_key)) {\n        sortedKeys.push(_key);\n      }\n    }\n\n    sortedKeys.sort();\n\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n\n  return canonicalizedObj;\n}\n\nvar arrayDiff = new Diff();\n\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\n\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\n\nfunction diffArrays(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nfunction parsePatch(uniDiff) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      list = [],\n      i = 0;\n\n  function parseIndex() {\n    var index = {};\n    list.push(index); // Parse diff metadata\n\n    while (i < diffstr.length) {\n      var line = diffstr[i]; // File header found, end parsing diff metadata\n\n      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n        break;\n      } // Diff index\n\n\n      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n      if (header) {\n        index.index = header[1];\n      }\n\n      i++;\n    } // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n\n\n    parseFileHeader(index);\n    parseFileHeader(index); // Parse hunks\n\n    index.hunks = [];\n\n    while (i < diffstr.length) {\n      var _line = diffstr[i];\n\n      if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n        break;\n      } else if (/^@@/.test(_line)) {\n        index.hunks.push(parseHunk());\n      } else if (_line && options.strict) {\n        // Ignore unexpected content unless in strict mode\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n      } else {\n        i++;\n      }\n    }\n  } // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n\n\n  function parseFileHeader(index) {\n    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n    if (fileHeader) {\n      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      var data = fileHeader[2].split('\\t', 2);\n      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n      if (/^\".*\"$/.test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n      i++;\n    }\n  } // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n\n\n  function parseHunk() {\n    var chunkHeaderIndex = i,\n        chunkHeaderLine = diffstr[i++],\n        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n    var hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: [],\n      linedelimiters: []\n    }; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n\n    var addCount = 0,\n        removeCount = 0;\n\n    for (; i < diffstr.length; i++) {\n      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n      // But they could be the header for the next file. Therefore prune such cases out.\n      if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n        break;\n      }\n\n      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        break;\n      }\n    } // Handle the empty block count case\n\n\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    } // Perform optional sanity checking\n\n\n    if (options.strict) {\n      if (addCount !== hunk.newLines) {\n        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n\n      if (removeCount !== hunk.oldLines) {\n        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n    }\n\n    return hunk;\n  }\n\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n\n  return list;\n}\n\n// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nfunction distanceIterator (start, minLine, maxLine) {\n  var wantForward = true,\n      backwardExhausted = false,\n      forwardExhausted = false,\n      localOffset = 1;\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      } // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n\n\n      if (start + localOffset <= maxLine) {\n        return localOffset;\n      }\n\n      forwardExhausted = true;\n    }\n\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      } // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n\n\n      if (minLine <= start - localOffset) {\n        return -localOffset++;\n      }\n\n      backwardExhausted = true;\n      return iterator();\n    } // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n\n  };\n}\n\nfunction applyPatch(source, uniDiff) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n\n    uniDiff = uniDiff[0];\n  } // Apply the diff to the input\n\n\n  var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      hunks = uniDiff.hunks,\n      compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n    return line === patchContent;\n  },\n      errorCount = 0,\n      fuzzFactor = options.fuzzFactor || 0,\n      minLine = 0,\n      offset = 0,\n      removeEOFNL,\n      addEOFNL;\n  /**\n   * Checks if the hunk exactly fits on the provided location\n   */\n\n\n  function hunkFits(hunk, toPos) {\n    for (var j = 0; j < hunk.lines.length; j++) {\n      var line = hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line;\n\n      if (operation === ' ' || operation === '-') {\n        // Context sanity check\n        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n          errorCount++;\n\n          if (errorCount > fuzzFactor) {\n            return false;\n          }\n        }\n\n        toPos++;\n      }\n    }\n\n    return true;\n  } // Search best fit offsets for each hunk based on the previous ones\n\n\n  for (var i = 0; i < hunks.length; i++) {\n    var hunk = hunks[i],\n        maxLine = lines.length - hunk.oldLines,\n        localOffset = 0,\n        toPos = offset + hunk.oldStart - 1;\n    var iterator = distanceIterator(toPos, minLine, maxLine);\n\n    for (; localOffset !== undefined; localOffset = iterator()) {\n      if (hunkFits(hunk, toPos + localOffset)) {\n        hunk.offset = offset += localOffset;\n        break;\n      }\n    }\n\n    if (localOffset === undefined) {\n      return false;\n    } // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n\n\n    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n  } // Apply patch hunks\n\n\n  var diffOffset = 0;\n\n  for (var _i = 0; _i < hunks.length; _i++) {\n    var _hunk = hunks[_i],\n        _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n    diffOffset += _hunk.newLines - _hunk.oldLines;\n\n    for (var j = 0; j < _hunk.lines.length; j++) {\n      var line = _hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line,\n          delimiter = _hunk.linedelimiters[j];\n\n      if (operation === ' ') {\n        _toPos++;\n      } else if (operation === '-') {\n        lines.splice(_toPos, 1);\n        delimiters.splice(_toPos, 1);\n        /* istanbul ignore else */\n      } else if (operation === '+') {\n        lines.splice(_toPos, 0, content);\n        delimiters.splice(_toPos, 0, delimiter);\n        _toPos++;\n      } else if (operation === '\\\\') {\n        var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n        if (previousOperation === '+') {\n          removeEOFNL = true;\n        } else if (previousOperation === '-') {\n          addEOFNL = true;\n        }\n      }\n    }\n  } // Handle EOFNL insertion/removal\n\n\n  if (removeEOFNL) {\n    while (!lines[lines.length - 1]) {\n      lines.pop();\n      delimiters.pop();\n    }\n  } else if (addEOFNL) {\n    lines.push('');\n    delimiters.push('\\n');\n  }\n\n  for (var _k = 0; _k < lines.length - 1; _k++) {\n    lines[_k] = lines[_k] + delimiters[_k];\n  }\n\n  return lines.join('');\n} // Wrapper that supports multiple file patches via callbacks.\n\nfunction applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  var currentIndex = 0;\n\n  function processIndex() {\n    var index = uniDiff[currentIndex++];\n\n    if (!index) {\n      return options.complete();\n    }\n\n    options.loadFile(index, function (err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n\n      var updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function (err) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        processIndex();\n      });\n    });\n  }\n\n  processIndex();\n}\n\nfunction structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n\n  var diff = diffLines(oldStr, newStr, options);\n\n  if (!diff) {\n    return;\n  }\n\n  diff.push({\n    value: '',\n    lines: []\n  }); // Append an empty value to make cleanup easier\n\n  function contextLines(lines) {\n    return lines.map(function (entry) {\n      return ' ' + entry;\n    });\n  }\n\n  var hunks = [];\n  var oldRangeStart = 0,\n      newRangeStart = 0,\n      curRange = [],\n      oldLine = 1,\n      newLine = 1;\n\n  var _loop = function _loop(i) {\n    var current = diff[i],\n        lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n    current.lines = lines;\n\n    if (current.added || current.removed) {\n      var _curRange;\n\n      // If we have previous context, start with that\n      if (!oldRangeStart) {\n        var prev = diff[i - 1];\n        oldRangeStart = oldLine;\n        newRangeStart = newLine;\n\n        if (prev) {\n          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n          oldRangeStart -= curRange.length;\n          newRangeStart -= curRange.length;\n        }\n      } // Output our changes\n\n\n      (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n        return (current.added ? '+' : '-') + entry;\n      }))); // Track the updated file position\n\n\n      if (current.added) {\n        newLine += lines.length;\n      } else {\n        oldLine += lines.length;\n      }\n    } else {\n      // Identical context lines. Track line changes\n      if (oldRangeStart) {\n        // Close out any changes that have been output (or join overlapping)\n        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n          var _curRange2;\n\n          // Overlapping\n          (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n        } else {\n          var _curRange3;\n\n          // end the range and output\n          var contextSize = Math.min(lines.length, options.context);\n\n          (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n\n          var hunk = {\n            oldStart: oldRangeStart,\n            oldLines: oldLine - oldRangeStart + contextSize,\n            newStart: newRangeStart,\n            newLines: newLine - newRangeStart + contextSize,\n            lines: curRange\n          };\n\n          if (i >= diff.length - 2 && lines.length <= options.context) {\n            // EOF is inside this hunk\n            var oldEOFNewline = /\\n$/.test(oldStr);\n            var newEOFNewline = /\\n$/.test(newStr);\n            var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n            if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n              // special case: old has no eol and no trailing context; no-nl can end up before adds\n              // however, if the old file is empty, do not output the no-nl line\n              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n            }\n\n            if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n              curRange.push('\\\\ No newline at end of file');\n            }\n          }\n\n          hunks.push(hunk);\n          oldRangeStart = 0;\n          newRangeStart = 0;\n          curRange = [];\n        }\n      }\n\n      oldLine += lines.length;\n      newLine += lines.length;\n    }\n  };\n\n  for (var i = 0; i < diff.length; i++) {\n    _loop(i);\n  }\n\n  return {\n    oldFileName: oldFileName,\n    newFileName: newFileName,\n    oldHeader: oldHeader,\n    newHeader: newHeader,\n    hunks: hunks\n  };\n}\nfunction formatPatch(diff) {\n  var ret = [];\n\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n  for (var i = 0; i < diff.hunks.length; i++) {\n    var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n\n    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n    ret.push.apply(ret, hunk.lines);\n  }\n\n  return ret.join('\\n') + '\\n';\n}\nfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n}\nfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n\nfunction arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  return arrayStartsWith(a, b);\n}\nfunction arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n\n  for (var i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction calcLineCount(hunk) {\n  var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n      oldLines = _calcOldNewLineCount.oldLines,\n      newLines = _calcOldNewLineCount.newLines;\n\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\nfunction merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n  var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n\n  ret.hunks = [];\n  var mineIndex = 0,\n      theirsIndex = 0,\n      mineOffset = 0,\n      theirsOffset = 0;\n\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    var mineCurrent = mine.hunks[mineIndex] || {\n      oldStart: Infinity\n    },\n        theirsCurrent = theirs.hunks[theirsIndex] || {\n      oldStart: Infinity\n    };\n\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      var mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n      ret.hunks.push(mergedHunk);\n    }\n  }\n\n  return ret;\n}\n\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n      return parsePatch(param)[0];\n    }\n\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n\n    return structuredPatch(undefined, undefined, base, param);\n  }\n\n  return param;\n}\n\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\n\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {\n      mine: mine,\n      theirs: theirs\n    };\n  }\n}\n\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n}\n\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart,\n    oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset,\n    newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\n\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  var mine = {\n    offset: mineOffset,\n    lines: mineLines,\n    index: 0\n  },\n      their = {\n    offset: theirOffset,\n    lines: theirLines,\n    index: 0\n  }; // Handle any leading content\n\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    var mineCurrent = mine.lines[mine.index],\n        theirCurrent = their.lines[their.index];\n\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      var _hunk$lines;\n\n      // Mine inserted\n      (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      var _hunk$lines2;\n\n      // Theirs inserted\n      (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  } // Now push anything that may be remaining\n\n\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n  calcLineCount(hunk);\n}\n\nfunction mutualChange(hunk, mine, their) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectChange(their);\n\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      var _hunk$lines3;\n\n      (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n\n      return;\n    } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      var _hunk$lines4;\n\n      (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n\n      return;\n    }\n  } else if (arrayEqual(myChanges, theirChanges)) {\n    var _hunk$lines5;\n\n    (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n\n    return;\n  }\n\n  conflict(hunk, myChanges, theirChanges);\n}\n\nfunction removal(hunk, mine, their, swap) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectContext(their, myChanges);\n\n  if (theirChanges.merged) {\n    var _hunk$lines6;\n\n    (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\n\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\n\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\n\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\n\nfunction collectChange(state) {\n  var ret = [],\n      operation = state.lines[state.index][0];\n\n  while (state.index < state.lines.length) {\n    var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction collectContext(state, matchChanges) {\n  var changes = [],\n      merged = [],\n      matchIndex = 0,\n      contextChanges = false,\n      conflicted = false;\n\n  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n    var change = state.lines[state.index],\n        match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n    if (match[0] === '+') {\n      break;\n    }\n\n    contextChanges = contextChanges || change[0] !== ' ';\n    merged.push(match);\n    matchIndex++; // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n\n    if (change[0] === '+') {\n      conflicted = true;\n\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n\n  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n    conflicted = true;\n  }\n\n  if (conflicted) {\n    return changes;\n  }\n\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n\n  return {\n    merged: merged,\n    changes: changes\n  };\n}\n\nfunction allRemoves(changes) {\n  return changes.reduce(function (prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\n\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (var i = 0; i < delta; i++) {\n    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n\n  state.index += delta;\n  return true;\n}\n\nfunction calcOldNewLineCount(lines) {\n  var oldLines = 0;\n  var newLines = 0;\n  lines.forEach(function (line) {\n    if (typeof line !== 'string') {\n      var myCount = calcOldNewLineCount(line.mine);\n      var theirCount = calcOldNewLineCount(line.theirs);\n\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n  return {\n    oldLines: oldLines,\n    newLines: newLines\n  };\n}\n\n// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nfunction convertChangesToDMP(changes) {\n  var ret = [],\n      change,\n      operation;\n\n  for (var i = 0; i < changes.length; i++) {\n    change = changes[i];\n\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n\n    ret.push([operation, change.value]);\n  }\n\n  return ret;\n}\n\nfunction convertChangesToXML(changes) {\n  var ret = [];\n\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  var n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n  return n;\n}\n\nexport { Diff, applyPatch, applyPatches, canonicalize, convertChangesToDMP, convertChangesToXML, createPatch, createTwoFilesPatch, diffArrays, diffChars, diffCss, diffJson, diffLines, diffSentences, diffTrimmedLines, diffWords, diffWordsWithSpace, merge, parsePatch, structuredPatch };\n","import { diffChars, diffWords } from 'diff';\n\nexport function containsTags(text: string): boolean {\n  return /<.+>/g.test(text?.trim());\n}\n\nexport function endsWithPunctuation(texto: string): boolean {\n  return /[.,:]\\s*$/.test(texto);\n}\n\nexport function isValidHTML(html: string): boolean {\n  const doc = document.createElement('div');\n  doc.innerHTML = html;\n  return doc.innerHTML === html;\n}\n\nexport function isHTMLParagraph(html: string): boolean {\n  return html.trim() !== '' && html.trim().startsWith('<p>') && html.trim().endsWith('</p>');\n}\n\nexport function isValidHtmlParagraph(html: string): boolean {\n  return isHTMLParagraph(html) && isValidHTML(html);\n}\n\nexport function getTextoSemHtml(html: string): string {\n  return removeEspacosDuplicados(html.replace(/(<([^>]+)>)/gi, '').trim());\n}\n\nexport function getLastCharacter(texto: string): string {\n  const soTexto = texto.replace(/(<([^>]+)>)/gi, '').trim();\n  return soTexto.length > 0 ? soTexto.charAt(soTexto.length - 1) : '';\n}\n\nexport function endsWithWord(texto: string, indicadores: string[]): boolean {\n  return indicadores.map(word => new RegExp(addSpaceRegex(escapeRegex(word)) + '\\\\s*$').test(texto)).filter(r => r)[0] === true;\n}\n\nexport function converteIndicadorParaTexto(indicadores: string[]): string {\n  switch (indicadores[0].trim()) {\n    case '.':\n      return 'ponto';\n    case ':':\n      return 'dois pontos';\n    case ';':\n      return 'ponto e vírgula';\n    case ',':\n      return 'vírgula';\n    default:\n      return indicadores[0].trim();\n  }\n}\n\nexport function escapeRegex(str: string): string {\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nexport function addSpaceRegex(str: string): string {\n  return str.replace(/\\s+/g, '\\\\s+');\n}\n\nexport function primeiraLetraMaiuscula(str: string): string {\n  if (!str) {\n    return '';\n  }\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}\n\nexport function join(list: string[]): string {\n  let str = '';\n  list.forEach(s => {\n    str += s;\n  });\n  return str;\n}\n\nexport function removeEspacosDuplicados(str: string): string {\n  return str.replace(/\\s{2,}/g, ' ');\n}\n\nexport function removeAllHtmlTags(texto: string): string {\n  return texto.replace(/(<([^>]+)>)/gi, '');\n}\n\nexport const removeAllHtmlTagsExcept = (texto: string, tags: string[]): string => {\n  // const regex = new RegExp(`(<(?!${tags.join('|')})[^>]+>)`, 'gi');\n  const regex = new RegExp(`<(?!(?:/?(${tags.join('|')})\\\\b))[^>]*>`, 'gi');\n  return texto.replace(regex, '');\n};\n\nexport class StringBuilder {\n  private strs = new Array<string>();\n\n  constructor(str?: string) {\n    if (str) {\n      this.append(str);\n    }\n  }\n\n  append(str: string | undefined): void {\n    if (str) {\n      this.strs.push(str);\n    }\n  }\n\n  toString(): string {\n    return join(this.strs);\n  }\n}\n\nexport const REGEX_ACCENTS = /[\\u0300-\\u036f]/g;\n\nexport const removeTagEConteudo = (texto: string, tag: string): string => {\n  return texto.replace(new RegExp(`<${tag}[^<]*(?:(?!</${tag}>)<[^<]*)*</${tag}>`, 'gi'), '');\n};\n\nexport const removeTagStyle = (texto: string): string => removeTagEConteudo(texto, 'style');\n\nexport const removeTagScript = (texto: string): string => removeTagEConteudo(texto, 'script');\n\nexport const removeTagHead = (texto: string): string => removeTagEConteudo(texto, 'head');\n\nexport const getIniciais = (texto = ''): string => {\n  return (\n    texto\n      .match(/\\b[A-Z][a-z]*\\b/g)\n      ?.map(word => word.charAt(0))\n      .filter((_, i, arr) => i === 0 || i === arr.length - 1)\n      .join('') || ''\n  );\n};\n\nexport const textoDiffAsHtml = (texto1: string, texto2: string, typeDiff: 'diffChars' | 'diffWords'): string => {\n  const fn = typeDiff === 'diffChars' ? diffChars : diffWords;\n  const buildPartAdded = (str: string): string => `<ins>${str}</ins>`; //`<span class=\"texto-inserido\">${str}</span>`;\n  const buildPartRemoved = (str: string): string => `<del>${str}</del>`; //`<span classs=\"texto-removido\">${str}</span>`;\n\n  const diff = fn(texto1, texto2);\n  return diff.map(part => (part.added ? buildPartAdded(part.value) : part.removed ? buildPartRemoved(part.value) : part.value)).join('');\n};\n\nexport const substituiEspacosEntreTagsPorNbsp = (texto: string, tags?: string[]): string => {\n  if (tags) {\n    const regex = new RegExp(`(?<=<(${tags.join('|')})>) +(?=</\\\\1>)`, 'gi');\n    return texto.replace(regex, texto => texto.replace(/ /g, '&nbsp;'));\n  } else {\n    return texto.replace(/ /g, '&nbsp;');\n  }\n};\n\nexport const substituiMultiplosEspacosPorNbsp = (texto: string): string => {\n  return texto.replace(/ +/g, texto => texto.replace(/ /g, '&nbsp;'));\n};\n\n/**\n * Faz escape de caracteres especiais do html\n *\n * @param texto\n */\nexport const encodeHtml = (texto: string): string => {\n  const p = document.createElement('p');\n  p.textContent = texto;\n  return p.innerHTML || '';\n};\n\n/**\n * Desfaz escape de caracteres especiais do html\n *\n * @param texto\n */\nexport const decodeHtml = (texto: string): string => {\n  const txt = document.createElement('textarea');\n  txt.innerHTML = texto;\n  return txt.value;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,e=Symbol(),n=new Map;class s{constructor(t,n){if(this._$cssResult$=!0,n!==e)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t}get styleSheet(){let e=n.get(this.cssText);return t&&void 0===e&&(n.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o=t=>new s(\"string\"==typeof t?t:t+\"\",e),r=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(n)+t[s+1]),t[0]);return new s(o,e)},i=(e,n)=>{t?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement(\"style\"),s=window.litNonce;void 0!==s&&n.setAttribute(\"nonce\",s),n.textContent=t.cssText,e.appendChild(n)}))},S=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t;export{s as CSSResult,i as adoptStyles,r as css,S as getCompatibleStyle,t as supportsAdoptingStyleSheets,o as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window.trustedTypes,r=e?e.emptyScript:\"\",h=window.reactiveElementPolyfillSupport,o={toAttribute(t,i){switch(i){case Boolean:t=t?r:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:o,reflect:!1,hasChanged:n};class a extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var i;null!==(i=this.l)&&void 0!==i||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Eh(s,i);void 0!==e&&(this._$Eu.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Eh(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$Eg)&&void 0!==i?i:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$Eg)||void 0===i||i.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Et.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$ES(t,i,s=l){var e,r;const h=this.constructor._$Eh(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o.toAttribute)(i,s.type);this._$Ei=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$Ei=null}}_$AK(t,i){var s,e,r;const h=this.constructor,n=h._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=h.getPropertyOptions(n),l=t.converter,a=null!==(r=null!==(e=null===(s=l)||void 0===s?void 0:s.fromAttribute)&&void 0!==e?e:\"function\"==typeof l?l:null)&&void 0!==r?r:o.fromAttribute;this._$Ei=n,this[n]=a(i,t.type),this._$Ei=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,i)=>this[i]=t)),this._$Et=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$EU()}catch(t){throw i=!1,this._$EU(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$Eg)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$ES(i,this[i],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}a.finalized=!0,a.elementProperties=new Map,a.elementStyles=[],a.shadowRootOptions={mode:\"open\"},null==h||h({ReactiveElement:a}),(null!==(s=globalThis.reactiveElementVersions)&&void 0!==s?s:globalThis.reactiveElementVersions=[]).push(\"1.3.1\");export{a as ReactiveElement,o as defaultConverter,n as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=globalThis.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=`lit$${(Math.random()+\"\").slice(9)}$`,o=\"?\"+e,n=`<${o}>`,l=document,h=(t=\"\")=>l.createComment(t),r=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||\"function\"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,_=/'/g,m=/\"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),y=p(2),b=Symbol.for(\"lit-noChange\"),w=Symbol.for(\"lit-nothing\"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},A=l.createTreeWalker(l,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?\"<svg>\":\"\",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?\"!--\"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=f):void 0!==u[3]&&(d=f):d===f?\">\"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'\"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===c?s+n:p>=0?(l.push(o),s.slice(0,p)+\"$lit$\"+s.slice(p)+e+y):s+e+(-2===p?(l.push(void 0),i):y)}const u=r+(t[o]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==s?s.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(e)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(e),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?H:\"@\"===i[1]?I:S})}else c.push({type:6,index:r})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(e),s=t.length-1;if(s>0){l.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h())}}}else if(8===l.nodeType)if(l.data===o)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(e,t+1));)c.push({type:7,index:r}),t+=e.length-1}r++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||\"\"===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t)}M(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.M(h()),this.M(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.C(t)}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w?void 0:t}}const k=i?i.emptyScript:\"\";class H extends S{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const R={L:\"$lit$\",P:e,V:o,I:1,N:C,R:V,j:u,D:P,H:N,F:S,O:H,W:I,B:M,Z:L},z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push(\"2.2.2\");export{R as _$LH,$ as html,b as noChange,w as nothing,x as render,y as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.0\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","import { html } from 'lit';\n// Foi utilizado TemplateResult porque o editor.component.ts não usa ShadowDom\nexport const quillSnowStyles = html`\n  <style>\n    /*!\n    * Quill Editor v1.3.7\n    * https://quilljs.com/\n    * Copyright (c) 2014, Jason Chen\n    * Copyright (c) 2013, salesforce.com\n    */\n    .ql-container {\n      box-sizing: border-box;\n      /* font-family: Helvetica, Arial, sans-serif; */\n      font-family: var(--eta-font-serif);\n      font-size: 13px;\n      height: 100%;\n      margin: 0px;\n      position: relative;\n    }\n    .ql-container.ql-disabled .ql-tooltip {\n      visibility: hidden;\n    }\n    .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n      pointer-events: none;\n    }\n    .ql-clipboard {\n      left: -100000px;\n      height: 1px;\n      overflow-y: hidden;\n      position: absolute;\n      top: 50%;\n    }\n    .ql-clipboard p {\n      margin: 0;\n      padding: 0;\n    }\n    .ql-editor {\n      box-sizing: border-box;\n      line-height: 1.42;\n      height: 100%;\n      outline: none;\n      overflow-y: auto;\n      padding: 12px 15px;\n      tab-size: 4;\n      -moz-tab-size: 4;\n      text-align: left;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n    }\n    .ql-editor > * {\n      cursor: text;\n    }\n    .ql-editor p,\n    .ql-editor ol,\n    .ql-editor ul,\n    .ql-editor pre,\n    .ql-editor blockquote,\n    .ql-editor h1,\n    .ql-editor h2,\n    .ql-editor h3,\n    .ql-editor h4,\n    .ql-editor h5,\n    .ql-editor h6 {\n      margin: 0;\n      padding: 0;\n      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor p {\n      line-height: 1.42;\n      font-size: 18px;\n    }\n    .ql-editor ol,\n    .ql-editor ul {\n      padding-left: 1.5em;\n    }\n    .ql-editor ol > li,\n    .ql-editor ul > li {\n      list-style-type: none;\n    }\n    .ql-editor ul > li::before {\n      content: '\\\\2022';\n    }\n    .ql-editor ul[data-checked='true'],\n    .ql-editor ul[data-checked='false'] {\n      pointer-events: none;\n    }\n    .ql-editor ul[data-checked='true'] > li *,\n    .ql-editor ul[data-checked='false'] > li * {\n      pointer-events: all;\n    }\n    .ql-editor ul[data-checked='true'] > li::before,\n    .ql-editor ul[data-checked='false'] > li::before {\n      color: #777;\n      cursor: pointer;\n      pointer-events: all;\n    }\n    .ql-editor ul[data-checked='true'] > li::before {\n      content: '\\\\2611';\n    }\n    .ql-editor ul[data-checked='false'] > li::before {\n      content: '\\\\2610';\n    }\n    .ql-editor li::before {\n      display: inline-block;\n      white-space: nowrap;\n      width: 1.2em;\n    }\n    .ql-editor li:not(.ql-direction-rtl)::before {\n      margin-left: -1.5em;\n      margin-right: 0.3em;\n      text-align: right;\n    }\n    .ql-editor li.ql-direction-rtl::before {\n      margin-left: 0.3em;\n      margin-right: -1.5em;\n    }\n    .ql-editor ol li:not(.ql-direction-rtl),\n    .ql-editor ul li:not(.ql-direction-rtl) {\n      padding-left: 1.5em;\n    }\n    .ql-editor ol li.ql-direction-rtl,\n    .ql-editor ul li.ql-direction-rtl {\n      padding-right: 1.5em;\n    }\n    .ql-editor ol li {\n      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n      counter-increment: list-0;\n    }\n    .ql-editor ol li:before {\n      content: counter(list-0, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-1 {\n      counter-increment: list-1;\n    }\n    .ql-editor ol li.ql-indent-1:before {\n      content: counter(list-1, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-1 {\n      counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-2 {\n      counter-increment: list-2;\n    }\n    .ql-editor ol li.ql-indent-2:before {\n      content: counter(list-2, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-2 {\n      counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-3 {\n      counter-increment: list-3;\n    }\n    .ql-editor ol li.ql-indent-3:before {\n      content: counter(list-3, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-3 {\n      counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-4 {\n      counter-increment: list-4;\n    }\n    .ql-editor ol li.ql-indent-4:before {\n      content: counter(list-4, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-4 {\n      counter-reset: list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-5 {\n      counter-increment: list-5;\n    }\n    .ql-editor ol li.ql-indent-5:before {\n      content: counter(list-5, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-5 {\n      counter-reset: list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-6 {\n      counter-increment: list-6;\n    }\n    .ql-editor ol li.ql-indent-6:before {\n      content: counter(list-6, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-6 {\n      counter-reset: list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-7 {\n      counter-increment: list-7;\n    }\n    .ql-editor ol li.ql-indent-7:before {\n      content: counter(list-7, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-7 {\n      counter-reset: list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-8 {\n      counter-increment: list-8;\n    }\n    .ql-editor ol li.ql-indent-8:before {\n      content: counter(list-8, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-8 {\n      counter-reset: list-9;\n    }\n    .ql-editor ol li.ql-indent-9 {\n      counter-increment: list-9;\n    }\n    .ql-editor ol li.ql-indent-9:before {\n      content: counter(list-9, decimal) '. ';\n    }\n    .ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n      padding-left: 3em;\n    }\n    .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n      padding-left: 4.5em;\n    }\n    .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n      padding-right: 3em;\n    }\n    .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n      padding-right: 4.5em;\n    }\n    .ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n      padding-left: 6em;\n    }\n    .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n      padding-left: 7.5em;\n    }\n    .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n      padding-right: 6em;\n    }\n    .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n      padding-right: 7.5em;\n    }\n    .ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n      padding-left: 9em;\n    }\n    .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n      padding-left: 10.5em;\n    }\n    .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n      padding-right: 9em;\n    }\n    .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n      padding-right: 10.5em;\n    }\n    .ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n      padding-left: 12em;\n    }\n    .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n      padding-left: 13.5em;\n    }\n    .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n      padding-right: 12em;\n    }\n    .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n      padding-right: 13.5em;\n    }\n    .ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n      padding-left: 15em;\n    }\n    .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n      padding-left: 16.5em;\n    }\n    .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n      padding-right: 15em;\n    }\n    .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n      padding-right: 16.5em;\n    }\n    .ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n      padding-left: 18em;\n    }\n    .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n      padding-left: 19.5em;\n    }\n    .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n      padding-right: 18em;\n    }\n    .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n      padding-right: 19.5em;\n    }\n    .ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n      padding-left: 21em;\n    }\n    .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n      padding-left: 22.5em;\n    }\n    .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n      padding-right: 21em;\n    }\n    .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n      padding-right: 22.5em;\n    }\n    .ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n      padding-left: 24em;\n    }\n    .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n      padding-left: 25.5em;\n    }\n    .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n      padding-right: 24em;\n    }\n    .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n      padding-right: 25.5em;\n    }\n    .ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n      padding-left: 27em;\n    }\n    .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n      padding-left: 28.5em;\n    }\n    .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n      padding-right: 27em;\n    }\n    .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n      padding-right: 28.5em;\n    }\n    .ql-editor .ql-video {\n      display: block;\n      max-width: 100%;\n    }\n    .ql-editor .ql-video.ql-align-center {\n      margin: 0 auto;\n    }\n    .ql-editor .ql-video.ql-align-right {\n      margin: 0 0 0 auto;\n    }\n    .ql-editor .ql-bg-black {\n      background-color: #000;\n    }\n    .ql-editor .ql-bg-red {\n      background-color: #e60000;\n    }\n    .ql-editor .ql-bg-orange {\n      background-color: #f90;\n    }\n    .ql-editor .ql-bg-yellow {\n      background-color: #ff0;\n    }\n    .ql-editor .ql-bg-green {\n      background-color: #008a00;\n    }\n    .ql-editor .ql-bg-blue {\n      background-color: #06c;\n    }\n    .ql-editor .ql-bg-purple {\n      background-color: #93f;\n    }\n    .ql-editor .ql-color-white {\n      color: #fff;\n    }\n    .ql-editor .ql-color-red {\n      color: #e60000;\n    }\n    .ql-editor .ql-color-orange {\n      color: #f90;\n    }\n    .ql-editor .ql-color-yellow {\n      color: #ff0;\n    }\n    .ql-editor .ql-color-green {\n      color: #008a00;\n    }\n    .ql-editor .ql-color-blue {\n      color: #06c;\n    }\n    .ql-editor .ql-color-purple {\n      color: #93f;\n    }\n    .ql-editor .ql-font-serif {\n      font-family: Georgia, Times New Roman, serif;\n    }\n    .ql-editor .ql-font-monospace {\n      font-family: Monaco, Courier New, monospace;\n    }\n    .ql-editor .ql-size-small {\n      font-size: 0.75em;\n    }\n    .ql-editor .ql-size-large {\n      font-size: 1.5em;\n    }\n    .ql-editor .ql-size-huge {\n      font-size: 2.5em;\n    }\n    .ql-editor .ql-direction-rtl {\n      direction: rtl;\n      text-align: inherit;\n    }\n    .ql-editor .ql-align-center {\n      text-align: center;\n    }\n    .ql-editor .ql-align-justify {\n      text-align: justify;\n    }\n    .ql-editor .ql-align-right {\n      text-align: right;\n    }\n    .ql-editor.ql-blank::before {\n      color: rgba(0, 0, 0, 0.6);\n      content: attr(data-placeholder);\n      font-style: italic;\n      left: 15px;\n      pointer-events: none;\n      position: absolute;\n      right: 15px;\n    }\n    .ql-snow.ql-toolbar:after,\n    .ql-snow .ql-toolbar:after {\n      clear: both;\n      content: '';\n      display: table;\n    }\n    .ql-snow.ql-toolbar button,\n    .ql-snow .ql-toolbar button {\n      background: none;\n      border: none;\n      cursor: pointer;\n      display: inline-block;\n      float: left;\n      height: 24px;\n      padding: 3px 5px;\n      width: 28px;\n    }\n    .ql-snow.ql-toolbar button svg,\n    .ql-snow .ql-toolbar button svg {\n      float: left;\n      height: 100%;\n    }\n    .ql-snow.ql-toolbar button:active:hover,\n    .ql-snow .ql-toolbar button:active:hover {\n      outline: none;\n    }\n    .ql-snow.ql-toolbar input.ql-image[type='file'],\n    .ql-snow .ql-toolbar input.ql-image[type='file'] {\n      display: none;\n    }\n    .ql-snow.ql-toolbar button:hover,\n    .ql-snow .ql-toolbar button:hover,\n    .ql-snow.ql-toolbar button:focus,\n    .ql-snow .ql-toolbar button:focus,\n    .ql-snow.ql-toolbar button.ql-active,\n    .ql-snow .ql-toolbar button.ql-active,\n    .ql-snow.ql-toolbar .ql-picker-label:hover,\n    .ql-snow .ql-toolbar .ql-picker-label:hover,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active,\n    .ql-snow.ql-toolbar .ql-picker-item:hover,\n    .ql-snow .ql-toolbar .ql-picker-item:hover,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected {\n      color: #06c;\n    }\n    .ql-snow.ql-toolbar button:hover .ql-fill,\n    .ql-snow .ql-toolbar button:hover .ql-fill,\n    .ql-snow.ql-toolbar button:focus .ql-fill,\n    .ql-snow .ql-toolbar button:focus .ql-fill,\n    .ql-snow.ql-toolbar button.ql-active .ql-fill,\n    .ql-snow .ql-toolbar button.ql-active .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n    .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n      fill: #06c;\n    }\n    .ql-snow.ql-toolbar button:hover .ql-stroke,\n    .ql-snow .ql-toolbar button:hover .ql-stroke,\n    .ql-snow.ql-toolbar button:focus .ql-stroke,\n    .ql-snow .ql-toolbar button:focus .ql-stroke,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n    .ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n    .ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n      stroke: #06c;\n    }\n    @media (pointer: coarse) {\n      .ql-snow.ql-toolbar button:hover:not(.ql-active),\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) {\n        color: #444;\n      }\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n        fill: #444;\n      }\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n        stroke: #444;\n      }\n    }\n    .ql-snow {\n      box-sizing: border-box;\n    }\n    .ql-snow * {\n      box-sizing: border-box;\n    }\n    .ql-snow .ql-hidden {\n      display: none;\n    }\n    .ql-snow .ql-out-bottom,\n    .ql-snow .ql-out-top {\n      visibility: hidden;\n    }\n    .ql-snow .ql-tooltip {\n      position: absolute;\n      transform: translateY(10px);\n    }\n    .ql-snow .ql-tooltip a {\n      cursor: pointer;\n      text-decoration: none;\n    }\n    .ql-snow .ql-tooltip.ql-flip {\n      transform: translateY(-10px);\n    }\n    .ql-snow .ql-formats {\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .ql-snow .ql-formats:after {\n      clear: both;\n      content: '';\n      display: table;\n    }\n    .ql-snow .ql-stroke {\n      fill: none;\n      stroke: #444;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-width: 2;\n    }\n    .ql-snow .ql-stroke-miter {\n      fill: none;\n      stroke: #444;\n      stroke-miterlimit: 10;\n      stroke-width: 2;\n    }\n    .ql-snow .ql-fill,\n    .ql-snow .ql-stroke.ql-fill {\n      fill: #444;\n    }\n    .ql-snow .ql-empty {\n      fill: none;\n    }\n    .ql-snow .ql-even {\n      fill-rule: evenodd;\n    }\n    .ql-snow .ql-thin,\n    .ql-snow .ql-stroke.ql-thin {\n      stroke-width: 1;\n    }\n    .ql-snow .ql-transparent {\n      opacity: 0.4;\n    }\n    .ql-snow .ql-direction svg:last-child {\n      display: none;\n    }\n    .ql-snow .ql-direction.ql-active svg:last-child {\n      display: inline;\n    }\n    .ql-snow .ql-direction.ql-active svg:first-child {\n      display: none;\n    }\n    .ql-snow .ql-editor h1 {\n      font-size: 2em;\n    }\n    .ql-snow .ql-editor h2 {\n      font-size: 1.5em;\n    }\n    .ql-snow .ql-editor h3 {\n      font-size: 1.17em;\n    }\n    .ql-snow .ql-editor h4 {\n      font-size: 1em;\n    }\n    .ql-snow .ql-editor h5 {\n      font-size: 0.83em;\n    }\n    .ql-snow .ql-editor h6 {\n      font-size: 0.67em;\n    }\n    .ql-snow .ql-editor a {\n      text-decoration: underline;\n    }\n    .ql-snow .ql-editor blockquote {\n      border-left: 4px solid #ccc;\n      margin-bottom: 5px;\n      margin-top: 5px;\n      padding-left: 16px;\n    }\n    .ql-snow .ql-editor code,\n    .ql-snow .ql-editor pre {\n      background-color: #f0f0f0;\n      border-radius: 3px;\n    }\n    .ql-snow .ql-editor pre {\n      white-space: pre-wrap;\n      margin-bottom: 5px;\n      margin-top: 5px;\n      padding: 5px 10px;\n    }\n    .ql-snow .ql-editor code {\n      font-size: 85%;\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-editor pre.ql-syntax {\n      background-color: #23241f;\n      color: #f8f8f2;\n      overflow: visible;\n    }\n    .ql-snow .ql-editor img {\n      max-width: 100%;\n    }\n    .ql-snow .ql-picker {\n      color: #444;\n      display: inline-block;\n      float: left;\n      font-size: 14px;\n      font-weight: 500;\n      height: 24px;\n      position: relative;\n      vertical-align: middle;\n    }\n    .ql-snow .ql-picker-label {\n      cursor: pointer;\n      display: inline-block;\n      height: 100%;\n      padding-left: 8px;\n      padding-right: 2px;\n      position: relative;\n      width: 100%;\n    }\n    .ql-snow .ql-picker-label::before {\n      display: inline-block;\n      line-height: 22px;\n    }\n    .ql-snow .ql-picker-options {\n      background-color: #fff;\n      display: none;\n      min-width: 100%;\n      padding: 4px 8px;\n      position: absolute;\n      white-space: nowrap;\n    }\n    .ql-snow .ql-picker-options .ql-picker-item {\n      cursor: pointer;\n      display: block;\n      padding-bottom: 5px;\n      padding-top: 5px;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label {\n      color: #ccc;\n      z-index: 2;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n      fill: #ccc;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n      stroke: #ccc;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-options {\n      display: block;\n      margin-top: -1px;\n      top: 100%;\n      z-index: 1;\n    }\n    .ql-snow .ql-color-picker,\n    .ql-snow .ql-icon-picker {\n      width: 28px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-label,\n    .ql-snow .ql-icon-picker .ql-picker-label {\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-label svg,\n    .ql-snow .ql-icon-picker .ql-picker-label svg {\n      right: 4px;\n    }\n    .ql-snow .ql-icon-picker .ql-picker-options {\n      padding: 4px 0px;\n    }\n    .ql-snow .ql-icon-picker .ql-picker-item {\n      height: 24px;\n      width: 24px;\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-options {\n      padding: 3px 5px;\n      width: 152px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-item {\n      border: 1px solid transparent;\n      float: left;\n      height: 16px;\n      margin: 2px;\n      padding: 0px;\n      width: 16px;\n    }\n    .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n      position: absolute;\n      margin-top: -9px;\n      right: 0;\n      top: 50%;\n      width: 18px;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n      content: attr(data-label);\n    }\n    .ql-snow .ql-picker.ql-header {\n      width: 98px;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item::before {\n      content: 'Normal';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n      content: 'Heading 1';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n      content: 'Heading 2';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n      content: 'Heading 3';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n      content: 'Heading 4';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n      content: 'Heading 5';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n      content: 'Heading 6';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n      font-size: 2em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n      font-size: 1.5em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n      font-size: 1.17em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n      font-size: 1em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n      font-size: 0.83em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n      font-size: 0.67em;\n    }\n    .ql-snow .ql-picker.ql-font {\n      width: 108px;\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item::before {\n      content: 'Sans Serif';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n      content: 'Serif';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n      content: 'Monospace';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n      font-family: Georgia, Times New Roman, serif;\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n      font-family: Monaco, Courier New, monospace;\n    }\n    .ql-snow .ql-picker.ql-size {\n      width: 98px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item::before {\n      content: 'Normal';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n      content: 'Small';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n      content: 'Large';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n      content: 'Huge';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n      font-size: 10px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n      font-size: 18px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n      font-size: 32px;\n    }\n    .ql-snow .ql-color-picker.ql-background .ql-picker-item {\n      background-color: #fff;\n    }\n    .ql-snow .ql-color-picker.ql-color .ql-picker-item {\n      background-color: #000;\n    }\n    .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n      padding: 8px;\n    }\n    .ql-toolbar.ql-snow .ql-formats {\n      margin-right: 15px;\n    }\n    .ql-toolbar.ql-snow .ql-picker-label {\n      border: 1px solid transparent;\n    }\n    .ql-toolbar.ql-snow .ql-picker-options {\n      border: 1px solid transparent;\n      box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;\n    }\n    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n      border-color: #ccc;\n    }\n    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n      border-color: #ccc;\n    }\n    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {\n      border-color: #000;\n    }\n    .ql-toolbar.ql-snow + .ql-container.ql-snow {\n      border-top: 0px;\n    }\n    .ql-snow .ql-tooltip {\n      background-color: #fff;\n      border: 1px solid #ccc;\n      box-shadow: 0px 0px 5px #ddd;\n      color: #444;\n      padding: 5px 12px;\n      white-space: nowrap;\n    }\n    .ql-snow .ql-tooltip::before {\n      content: 'Visit URL:';\n      line-height: 26px;\n      margin-right: 8px;\n    }\n    .ql-snow .ql-tooltip input[type='text'] {\n      display: none;\n      border: 1px solid #ccc;\n      font-size: 13px;\n      height: 26px;\n      margin: 0px;\n      padding: 3px 5px;\n      width: 170px;\n    }\n    .ql-snow .ql-tooltip a.ql-preview {\n      display: inline-block;\n      max-width: 200px;\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n      vertical-align: top;\n    }\n    .ql-snow .ql-tooltip a.ql-action::after {\n      border-right: 1px solid #ccc;\n      content: 'Edit';\n      margin-left: 16px;\n      padding-right: 8px;\n    }\n    .ql-snow .ql-tooltip a.ql-remove::before {\n      content: 'Remove';\n      margin-left: 8px;\n    }\n    .ql-snow .ql-tooltip a {\n      line-height: 26px;\n    }\n    .ql-snow .ql-tooltip.ql-editing a.ql-preview,\n    .ql-snow .ql-tooltip.ql-editing a.ql-remove {\n      display: none;\n    }\n    .ql-snow .ql-tooltip.ql-editing input[type='text'] {\n      display: inline-block;\n    }\n    .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n      border-right: 0px;\n      content: 'Save';\n      padding-right: 0px;\n    }\n    .ql-snow .ql-tooltip[data-mode='link']::before {\n      content: 'Enter link:';\n    }\n    .ql-snow .ql-tooltip[data-mode='formula']::before {\n      content: 'Enter formula:';\n    }\n    .ql-snow .ql-tooltip[data-mode='video']::before {\n      content: 'Enter video:';\n    }\n    .ql-snow a {\n      color: #06c;\n    }\n    .ql-container.ql-snow {\n      border: 1px solid #ccc;\n    }\n  </style>\n`;\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['ementa', 'norma-alterada'],\n};\n\nconst EstiloTextoClass = new Parchment.Attributor.Class('estilo', 'estilo', config);\nexport { EstiloTextoClass };\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['0px'],\n};\n\n// const MarginBottomStyle = new Parchment.Attributor.Style('margin-bottom', 'margin-bottom', config);\nconst MarginBottomClass = new Parchment.Attributor.Class('margin-bottom', 'ql-margin-bottom', config);\nexport { MarginBottomClass };\n","class NotaRodape {\n  id;\n  numero;\n  texto;\n\n  constructor({ id, numero, texto }) {\n    this.id = id;\n    this.numero = numero;\n    this.texto = texto;\n  }\n}\n\nconst NOTA_RODAPE_INPUT_EVENT = 'nota-rodape:input';\nconst NOTA_RODAPE_CHANGE_EVENT = 'nota-rodape:change';\nconst NOTA_RODAPE_REMOVE_EVENT = 'nota-rodape:remove';\n\nexport { NotaRodape, NOTA_RODAPE_INPUT_EVENT, NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT };\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['0px'],\n};\n\n// const NoIndentStyle = new Parchment.Attributor.Style('text-indent', 'text-indent', config);\nconst NoIndentClass = new Parchment.Attributor.Class('text-indent', 'ql-text-indent', config);\nexport { NoIndentClass };\n","/**\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\nconst debug = false;\n\nconst hasShadow = 'attachShadow' in Element.prototype && 'getRootNode' in Element.prototype;\nconst hasSelection = !!(hasShadow && document.createElement('div').attachShadow({ mode: 'open' }).getSelection);\nconst hasShady = window.ShadyDOM && window.ShadyDOM.inUse;\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent) ||\n  /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nconst useDocument = !hasShadow || hasShady || (!hasSelection && !isSafari);\n\nconst invalidPartialElements = /^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/;\n\nexport const eventName = '-shadow-selectionchange';\n\n\nconst validNodeTypes = [Node.ELEMENT_NODE, Node.TEXT_NODE, Node.DOCUMENT_FRAGMENT_NODE];\nfunction isValidNode(node) {\n  return validNodeTypes.includes(node.nodeType);\n}\n\n\n/**\n * @param {!Selection} s selection to use\n * @param {!Node} node to find caret position within a shadow root\n * @return {!Node|!ShadowRoot}\n */\nexport function findCaretFocus(s, node) {\n  const pending = [];\n  const pushAll = (nodeList) => {\n    for (let i = 0; i < nodeList.length; ++i) {\n      if (nodeList[i].shadowRoot) {\n        pending.push(nodeList[i].shadowRoot);\n      }\n    }\n  };\n\n  // We're told by Safari that a node containing a child with a Shadow Root is selected, but check\n  // the node directly too (just in case they change their mind later).\n  if (node.shadowRoot) {\n    pending.push(node.shadowRoot);\n  }\n  pushAll(node.childNodes);\n\n  while (pending.length) {\n    const root = pending.shift();\n\n    for (let i = 0; i < root.childNodes.length; ++i) {\n      if (s.containsNode(root.childNodes[i], true)) {\n        return root;\n      }\n    }\n\n    // The selection must be inside a further Shadow Root, but there's no good way to get a list of\n    // them. Safari won't tell you what regular node contains the root which has a selection. So,\n    // unfortunately if you stack them this will be slow(-ish).\n    pushAll(root.querySelectorAll('*'));\n  }\n\n  return null;\n}\n\n\nfunction findNode(s, parentNode, isLeft) {\n  const nodes = parentNode.childNodes || parentNode.children;\n  if (!nodes) {\n    return parentNode;  // found it, probably text\n  }\n\n  for (let i = 0; i < nodes.length; ++i) {\n    const j = isLeft ? i : (nodes.length - 1 - i);\n    const childNode = nodes[j];\n    if (!isValidNode(childNode)) {\n      continue;\n    }\n\n    debug && console.debug('checking child', childNode, 'IsLeft', isLeft);\n    if (s.containsNode(childNode, true)) {\n      if (s.containsNode(childNode, false)) {\n        debug && console.info('found child', childNode);\n        return childNode;\n      }\n      // Special-case elements that cannot have feasible children.\n      if (!invalidPartialElements.exec(childNode.localName || '')) {\n        debug && console.info('descending child', childNode);\n        return findNode(s, childNode, isLeft);\n      }\n    }\n    debug && console.info(parentNode, 'does NOT contain', childNode);\n  }\n  return parentNode;\n}\n\n\nlet recentCaretRange = {node: null, offset: -1};\n\n\n(function() {\n  if (hasSelection || useDocument) {\n    // getSelection exists or document API can be used\n    document.addEventListener('selectionchange', (ev) => {\n      document.dispatchEvent(new CustomEvent(eventName));\n    });\n    return () => {};\n  }\n\n  let withinInternals = false;\n\n  document.addEventListener('selectionchange', (ev) => {\n    if (withinInternals) {\n      return;\n    }\n\n    withinInternals = true;\n\n    const s = window.getSelection();\n    if (s.type === 'Caret') {\n      const root = findCaretFocus(s, s.anchorNode);\n      if (root instanceof window.ShadowRoot) {\n        const range = getRange(root);\n        if (range) {\n          const node = range.startContainer;\n          const offset = range.startOffset;\n          recentCaretRange = {node, offset};\n        }\n      }\n    }\n\n    document.dispatchEvent(new CustomEvent('-shadow-selectionchange'));\n    window.requestAnimationFrame(() => {\n      withinInternals = false;\n    });\n  });\n})();\n\n\n/**\n * @param {!Selection} s the window selection to use\n * @param {!Node} node the node to walk from\n * @param {boolean} walkForward should this walk in natural direction\n * @return {boolean} whether the selection contains the following node (even partially)\n */\nfunction containsNextElement(s, node, walkForward) {\n  const start = node;\n  while (node = walkFromNode(node, walkForward)) {\n    // walking (left) can contain our own parent, which we don't want\n    if (!node.contains(start)) {\n      break;\n    }\n  }\n  if (!node) {\n    return false;\n  }\n  // we look for Element as .containsNode says true for _every_ text node, and we only care about\n  // elements themselves\n  return node instanceof Element && s.containsNode(node, true);\n}\n\n\n/**\n * @param {!Selection} s the window selection to use\n * @param {!Node} leftNode the left node\n * @param {!Node} rightNode the right node\n * @return {boolean|undefined} whether this has natural direction\n */\nfunction getSelectionDirection(s, leftNode, rightNode) {\n  if (s.type !== 'Range') {\n    return undefined;  // no direction\n  }\n  const measure = () => s.toString().length;\n\n  const initialSize = measure();\n  debug && console.info(`initial selection: \"${s.toString()}\"`)\n\n  let updatedSize;\n\n  // Try extending forward and seeing what happens.\n  s.modify('extend', 'forward', 'character');\n  updatedSize = measure();\n  debug && console.info(`forward selection: \"${s.toString()}\"`)\n\n  if (updatedSize > initialSize || containsNextElement(s, rightNode, true)) {\n    debug && console.info('got forward >, moving right')\n    s.modify('extend', 'backward', 'character');\n    return true;\n  } else if (updatedSize < initialSize || !s.containsNode(leftNode)) {\n    debug && console.info('got forward <, moving left')\n    s.modify('extend', 'backward', 'character');\n    return false;\n  }\n\n  // Maybe we were at the end of something. Extend backwards instead.\n  s.modify('extend', 'backward', 'character');\n  updatedSize = measure();\n  debug && console.info(`backward selection: \"${s.toString()}\"`)\n\n  if (updatedSize > initialSize || containsNextElement(s, leftNode, false)) {\n    debug && console.info('got backwards >, moving left')\n    s.modify('extend', 'forward', 'character');\n    return false;\n  } else if (updatedSize < initialSize || !s.containsNode(rightNode)) {\n    debug && console.info('got backwards <, moving right')\n    s.modify('extend', 'forward', 'character');\n    return true;\n  }\n\n  // This is likely a select-all.\n  return undefined;\n}\n\n/**\n * Returns the next valid node (element or text). This is needed as Safari doesn't support\n * TreeWalker inside Shadow DOM. Don't escape shadow roots.\n *\n * @param {!Node} node to start from\n * @param {boolean} walkForward should this walk in natural direction\n * @return {Node} node found, if any\n */\nfunction walkFromNode(node, walkForward) {\n  if (!walkForward) {\n    return node.previousSibling || node.parentNode || null;\n  }\n  while (node) {\n    if (node.nextSibling) {\n      return node.nextSibling;\n    }\n    node = node.parentNode;\n  }\n  return null;\n}\n\n\nconst cachedRange = new Map();\nexport function getRange(root) {\n  if (useDocument) {\n    // Document pierces Shadow Root for selection, so actively filter it down to the right node.\n    // This is only for Firefox, which does not allow selection across Shadow Root boundaries.\n    const s = document.getSelection();\n    if (s.containsNode(root, true)) {\n      return s.getRangeAt(0);\n    }\n    return null;\n  } else if (hasSelection) {\n    const s = root.getSelection();\n    return s.rangeCount ? s.getRangeAt(0) : null;\n  }\n\n  const thisFrame = cachedRange.get(root);\n  if (thisFrame) {\n    return thisFrame;\n  }\n\n  const result = internalGetShadowSelection(root);\n\n  cachedRange.set(root, result.range);\n  window.setTimeout(() => {\n    cachedRange.delete(root);\n  }, 0);\n  debug && console.debug('getRange got', result);\n  return result.range;\n}\n\n\nfunction internalGetShadowSelection(root) {\n  // nb. We used to check whether the selection contained the host, but this broke in Safari 13.\n  // This is \"nicely formatted\" whitespace as per the browser's renderer. This is fine, and we only\n  // provide selection information at this granularity.\n  const s = window.getSelection();\n\n  if (s.type === 'None') {\n    return {range: null, type: 'none'};\n  } else if (!(s.type === 'Caret' || s.type === 'Range')) {\n    throw new TypeError('unexpected type: ' + s.type);\n  }\n\n  const leftNode = findNode(s, root, true);\n  if (leftNode === root) {\n    return {range: null, mode: 'none'};\n  }\n\n  const range = document.createRange();\n\n  let rightNode = null;\n  let isNaturalDirection = undefined;\n  if (s.type === 'Range') {\n    rightNode = findNode(s, root, false);  // get right node here _before_ getSelectionDirection\n    isNaturalDirection = getSelectionDirection(s, leftNode, rightNode);\n\n    // isNaturalDirection means \"going right\"\n\n    if (isNaturalDirection === undefined) {\n      // This occurs when we can't move because we can't extend left or right to measure the\n      // direction we're moving in... because it's the entire range. Hooray!\n      range.setStart(leftNode, 0);\n      range.setEnd(rightNode, rightNode.length);\n      return {range, mode: 'all'};\n    }\n  }\n\n  const initialSize = s.toString().length;\n\n  // Dumbest possible approach: remove characters from left side until no more selection,\n  // re-add.\n\n  // Try right side first, as we can trim characters until selection gets shorter.\n\n  let leftOffset = 0;\n  let rightOffset = 0;\n\n  if (rightNode === null) {\n    // This is a caret selection, do nothing.\n  } else if (rightNode.nodeType === Node.TEXT_NODE) {\n    const rightText = rightNode.textContent;\n    const existingNextSibling = rightNode.nextSibling;\n\n    for (let i = rightText.length - 1; i >= 0; --i) {\n      rightNode.splitText(i);\n      const updatedSize = s.toString().length;\n      if (updatedSize !== initialSize) {\n        rightOffset = i + 1;\n        break;\n      }\n    }\n\n    // We don't use .normalize() here, as the user might already have a weird node arrangement\n    // they need to maintain.\n    rightNode.insertData(rightNode.length, rightText.substr(rightNode.length));\n    while (rightNode.nextSibling !== existingNextSibling) {\n      rightNode.nextSibling.remove();\n    }\n  }\n\n  if (leftNode.nodeType === Node.TEXT_NODE) {\n    if (leftNode !== rightNode) {\n      // If we're at the end of a text node, it's impossible to extend the selection, so add an\n      // extra character to select (that we delete later).\n      leftNode.appendData('?');\n      s.collapseToStart();\n      s.modify('extend', 'right', 'character');\n    }\n\n    const leftText = leftNode.textContent;\n    const existingNextSibling = leftNode.nextSibling;\n\n    const start = (leftNode === rightNode ? rightOffset : leftText.length - 1);\n\n    for (let i = start; i >= 0; --i) {\n      leftNode.splitText(i);\n      if (s.toString() === '') {\n        leftOffset = i;\n        break;\n      }\n    }\n\n    // As above, we don't want to use .normalize().\n    leftNode.insertData(leftNode.length, leftText.substr(leftNode.length));\n    while (leftNode.nextSibling !== existingNextSibling) {\n      leftNode.nextSibling.remove();\n    }\n\n    if (leftNode !== rightNode) {\n      leftNode.deleteData(leftNode.length - 1, 1);\n    }\n\n    if (rightNode === null) {\n      rightNode = leftNode;\n      rightOffset = leftOffset;\n    }\n\n  } else if (rightNode === null) {\n    rightNode = leftNode;\n  }\n\n  // Work around common browser bug. Single character selction is always seen as 'forward'. Check\n  // if it's actually supposed to be backward.\n  if (initialSize === 1 && recentCaretRange && recentCaretRange.node === leftNode) {\n    if (recentCaretRange.offset > leftOffset && isNaturalDirection) {\n      isNaturalDirection = false;\n    }\n  }\n\n  if (isNaturalDirection === true) {\n    s.collapse(leftNode, leftOffset);\n    s.extend(rightNode, rightOffset);\n  } else if (isNaturalDirection === false) {\n    s.collapse(rightNode, rightOffset);\n    s.extend(leftNode, leftOffset);\n  } else {\n    s.setPosition(leftNode, leftOffset);\n  }\n\n  range.setStart(leftNode, leftOffset);\n  range.setEnd(rightNode, rightOffset);\n  return {range, mode: 'normal'};\n}\n","import { quillSnowStyles } from '../../assets/css/quill.snow.css';\nimport { EstiloTextoClass } from './estilos-texto';\nimport { MarginBottomClass } from './margin-bottom';\nimport { NOTA_RODAPE_INPUT_EVENT } from './notaRodape';\nimport { NoIndentClass } from './text-indent';\nimport { getRange } from 'shadow-selection-polyfill';\n\nconst DefaultKeyboardModule = Quill.import('modules/keyboard');\nconst DefaultClipboardModule = Quill.import('modules/clipboard');\n\nexport class NotaRodapeModal {\n  private modalElement: HTMLElement;\n  private overlayElement: HTMLElement;\n  private shadowRoot: ShadowRoot;\n  private keydownListener: (event: KeyboardEvent) => void;\n\n  quill: any;\n  idNotaRodape?: string;\n  textoInicialNotaRodape: string;\n  domNodeNotaRodape: HTMLElement;\n  tituloModal?: string;\n\n  constructor(options: { domNodeNotaRodape: HTMLElement; idNotaRodape?: string; textoInicialNotaRodape?: string; tituloModal?: string }) {\n    this.idNotaRodape = options.idNotaRodape;\n    this.textoInicialNotaRodape = options.textoInicialNotaRodape ?? '';\n    this.domNodeNotaRodape = options.domNodeNotaRodape;\n    this.tituloModal = options.tituloModal;\n\n    this.modalElement = document.createElement('div');\n    this.modalElement.classList.add('modal');\n    this.shadowRoot = this.modalElement.attachShadow({ mode: 'open' });\n\n    this.shadowRoot.innerHTML = `\n      ${quillSnowStyles.strings.join('')}\n      <style>\n\n        :host {\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          min-width: 400px;\n          max-width: 640px;\n          background-color: white;\n          padding: 20px;\n          border-radius: 10px;\n          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n          z-index: 1010;\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n          opacity: 0;\n          transform: translate(-50%, -50%) scale(0.95);\n          transition: opacity 0.3s, transform 0.3s;\n        }\n\n        .modal-body .ql-editor {\n          min-height: 400px;\n        }\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-title {\n          margin: 0;\n          font-size: 20px;\n        }\n\n        .modal-footer {\n          display: flex;\n          gap: 10px;\n          justify-content: flex-end;\n        }\n\n        .modal-textarea {\n          width: 100%;\n          height: 100px;\n          margin-bottom: 15px;\n          font-family: inherit;\n          font-size: inherit;\n          padding: 10px;\n          box-sizing: border-box;\n        }\n\n        .modal-close-button {\n          cursor: pointer;\n          background-color: #eee;\n          padding: 5px 10px;\n          border-radius: 5px;\n          transition: background-color 0.3s;\n          border: none;\n        }\n\n        .header-close-button {\n          background-color: transparent;\n          font-size: 30px;\n        }\n\n        .modal-save-button {\n          cursor: pointer;\n          background-color: #0284c7;\n          color: white;\n          padding: 9px 14px;\n          border-radius: 5px;\n          border: none;\n        }\n\n        .modal-save-button:hover {\n          background-color: #0ea5e9;\n        }\n\n        .modal-close-button: hover {\n          background-color: #ddd;\n        }\n\n        @media (max-width: 600px) {\n          :host {\n            width: 80%;\n            min-width: 0;\n          }\n        }\n        .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n          content: 'Salvar';\n        }\n        .ql-snow .ql-tooltip a.ql-action::after {\n          display: inline;\n          content: 'Editar';\n        }\n\n        .ql-snow .ql-tooltip a.ql-remove::before {\n          display: inline;\n          content: 'Remover';\n        }\n\n        .ql-snow .ql-tooltip[data-mode='link']::before  {\n          content: 'Insira o link:';\n        }\n\n        .ql-snow .ql-tooltip::before {\n          content: 'Visite a URL:';\n        }\n      </style>\n      <div class=\"modal-header\">\n        <h1 id=\"modalTitle\" class=\"modal-title\">Editar nota de rodapé</h1>\n        <button class=\"modal-close-button header-close-button\" aria-label=\"Fechar\" title=\"Fechar\">&times;</button>\n      </div>\n      <div class=\"modal-body\">\n        <div id=\"editor-nota-rodape-container\"></div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"modal-save-button\" aria-label=\"Salvar\">Salvar</button>\n        <button class=\"modal-close-button\" aria-label=\"Fechar\">Fechar</button>\n      </div>\n    `;\n\n    this.overlayElement = document.createElement('div');\n    this.overlayElement.classList.add('overlay');\n    this.overlayElement.style.opacity = '0';\n    this.overlayElement.style.transition = 'opacity 0.3s';\n    this.overlayElement.style.position = 'fixed';\n    this.overlayElement.style.top = '0';\n    this.overlayElement.style.left = '0';\n    this.overlayElement.style.width = '100%';\n    this.overlayElement.style.height = '100%';\n    this.overlayElement.style.backgroundColor = 'rgba(0, 0, 0, 0.2)';\n    this.overlayElement.style.zIndex = '1000';\n\n    document.body.appendChild(this.overlayElement);\n    document.body.appendChild(this.modalElement);\n\n    this.keydownListener = (event: KeyboardEvent): void => {\n      if (event.key === 'Escape') {\n        this.close();\n      }\n    };\n\n    document.addEventListener('keydown', this.keydownListener);\n\n    Array.from(this.shadowRoot.querySelectorAll('.modal-close-button')).forEach(element => element.addEventListener('click', () => this.close()));\n\n    this.shadowRoot.querySelector('.modal-save-button')?.addEventListener('click', this.save.bind(this));\n\n    const quillContainer = this.shadowRoot.querySelector('#editor-nota-rodape-container') as HTMLElement;\n    Quill.register('modules/keyboard', DefaultKeyboardModule, true);\n    Quill.register('modules/clipboard', DefaultClipboardModule, true);\n    Quill.register('formats/estilo-texto', EstiloTextoClass, true);\n    Quill.register('formats/text-indent', NoIndentClass, true);\n    Quill.register('formats/margin-bottom', MarginBottomClass, true);\n\n    this.quill = new Quill(quillContainer, {\n      formats: ['bold', 'italic', 'underline', 'link'],\n      modules: {\n        toolbar: {\n          container: [['bold', 'italic', 'underline'], ['link']],\n        },\n      },\n      placeholder: 'Digite a nota de rodapé aqui...',\n      theme: 'snow',\n    });\n\n    const normalizeNative = nativeRange => {\n      // document.getSelection model has properties startContainer and endContainer\n      // shadow.getSelection model has baseNode and focusNode\n      // Unify formats to always look like document.getSelection\n\n      if (nativeRange) {\n        const range = nativeRange;\n\n        if (range.baseNode) {\n          range.startContainer = nativeRange.baseNode;\n          range.endContainer = nativeRange.focusNode;\n          range.startOffset = nativeRange.baseOffset;\n          range.endOffset = nativeRange.focusOffset;\n\n          if (range.endOffset < range.startOffset) {\n            range.startContainer = nativeRange.focusNode;\n            range.endContainer = nativeRange.baseNode;\n            range.startOffset = nativeRange.focusOffset;\n            range.endOffset = nativeRange.baseOffset;\n          }\n        }\n\n        if (range.startContainer) {\n          return {\n            start: { node: range.startContainer, offset: range.startOffset },\n            end: { node: range.endContainer, offset: range.endOffset },\n            native: range,\n          };\n        }\n      }\n      // console.log('asd', nativeRange);\n      return null;\n    };\n\n    // Hack Quill and replace document.getSelection with shadow.getSelection\n    this.quill.selection.getNativeRange = () => {\n      const dom = this.quill.root.getRootNode();\n      // const selection = dom.getSelection instanceof Function ? dom.getSelection() : document.getSelection();\n      const selection = getRange(dom);\n      const range = normalizeNative(selection);\n\n      return range;\n    };\n\n    // Subscribe to selection change separately,\n    // because emitter in Quill doesn't catch this event in Shadow DOM\n\n    document.addEventListener('selectionchange', () => {\n      // Update selection and some other properties\n      this.quill.selection.update();\n    });\n  }\n\n  ajustaHtml = (html = ''): string => {\n    return html\n      .replace(/ql-indent/g, 'indent')\n      .replace(/ql-align-justify/g, 'align-justify')\n      .replace(/ql-align-center/g, 'align-center')\n      .replace(/ql-align-right/g, 'align-right');\n  };\n\n  open(): void {\n    this.overlayElement.style.display = 'block';\n    setTimeout(() => {\n      this.overlayElement.style.opacity = '1';\n      this.modalElement.style.opacity = '1';\n      this.modalElement.style.transform = 'translate(-50%, -50%) scale(1)';\n    }, 10);\n\n    this.quill.root.innerHTML = this.textoInicialNotaRodape ?? '';\n\n    const modalTitle = this.shadowRoot.querySelector('.modal-title');\n    if (modalTitle) {\n      modalTitle.innerHTML = this.tituloModal ?? modalTitle.innerHTML;\n    }\n  }\n\n  close(fromSave = false): void {\n    if (fromSave || this.shouldClose()) {\n      this.modalElement.style.opacity = '0';\n      this.overlayElement.style.opacity = '0';\n      setTimeout(() => this.removeModal(), 300); // Tempo de transição\n    }\n  }\n\n  private shouldClose(): boolean {\n    const texto = this.quill.root.innerHTML;\n    console.log(texto, this.textoInicialNotaRodape);\n    if (texto !== this.textoInicialNotaRodape) {\n      return confirm('Tem certeza que deseja fechar? As alterações não salvas serão perdidas.');\n    }\n    return true;\n  }\n\n  private removeModal(): void {\n    document.removeEventListener('keydown', this.keydownListener);\n    this.modalElement.remove();\n    this.overlayElement.remove();\n  }\n\n  save(): void {\n    const texto = this.quill.root.innerHTML;\n    if (texto === this.textoInicialNotaRodape || !texto) {\n      this.close(true);\n      return;\n    }\n\n    this.domNodeNotaRodape.dispatchEvent(new CustomEvent(NOTA_RODAPE_INPUT_EVENT, { detail: { id: this.idNotaRodape, texto: this.quill.root.innerHTML } }));\n    this.close(true);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable eqeqeq */\n/* eslint-disable prefer-const */\nimport { decodeHtml, encodeHtml } from '../../util/string-util';\nimport { NotaRodapeModal } from './nota-rodape-modal';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_INPUT_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './notaRodape';\n\nconst PREFIXO_ID = 'nr';\n\nconst Delta = Quill.import('delta');\nconst Module = Quill.import('core/module');\nconst Embed = Quill.import('blots/embed'); // Inline Embed\nconst Text = Quill.import('blots/text'); // Inline Text\nconst Parchment = Quill.import('parchment');\n\nconst cfgInline = {\n  scope: Parchment.Scope.INLINE_ATTRIBUTE,\n};\n\nconst IdNotaRodapeAttribute = new Parchment.Attributor.Attribute('id-nota-rodape', 'id-nota-rodape', cfgInline);\nconst NumeroAttribute = new Parchment.Attributor.Attribute('numero', 'numero', cfgInline);\nconst TextoAttribute = new Parchment.Attributor.Attribute('texto', 'texto', cfgInline);\n\nclass NotaRodapeBlot extends Embed {\n  static create(value) {\n    let node = super.create(value);\n    node.setAttribute('class', 'nota-rodape');\n    node.setAttribute('contenteditable', 'false');\n    NotaRodapeBlot.valueToAttributes(value, node);\n    return node;\n  }\n\n  static value(domNode) {\n    return domNode.notaRodape || NotaRodapeBlot.buildNotaRodape(domNode);\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) return super.format(name, value);\n    NotaRodapeBlot.valueToAttributes(value, this.domNode);\n  }\n\n  // static formats(domNode) {\n  //   return { 'nota-rodape': domNode.notaRodape || NotaRodapeBlot.buildNotaRodape(domNode) };\n  // }\n\n  static buildNotaRodape(domNode) {\n    return {\n      // id: domNode.getAttribute('id'),\n      id: domNode.getAttribute('id-nota-rodape'),\n      numero: domNode.getAttribute('numero'),\n      texto: decodeHtml(domNode.getAttribute('texto')),\n    };\n  }\n\n  static valueToAttributes(value, domNode) {\n    if (!value || typeof value === 'boolean') return;\n    // value.id && domNode.setAttribute('id', value.id);\n    value.id && domNode.setAttribute('id-nota-rodape', value.id);\n    value.numero && domNode.setAttribute('numero', value.numero);\n    domNode.notaRodape = value;\n\n    domNode.innerText = value.numero;\n    domNode.setAttribute('texto', encodeHtml(value.texto));\n  }\n}\n\nNotaRodapeBlot.blotName = 'nota-rodape';\nNotaRodapeBlot.tagName = 'nota-rodape';\nNotaRodapeBlot.allowedChildren = [Text];\n\nclass ModuloNotaRodape extends Module {\n  quill;\n  options;\n\n  _isAbrindoTexto = false;\n  get isAbrindoTexto() {\n    return this._isAbrindoTexto;\n  }\n  set isAbrindoTexto(value) {\n    this._isAbrindoTexto = value;\n    // if (!value) {\n    //   setTimeout(() => {\n    //     this.quill.root.innerHTML = this.ajustarConteudoTagsNotaRodape(this.quill.root.innerHTML);\n    //   }, 0);\n    // }\n  }\n\n  static register() {\n    Quill.register(NotaRodapeBlot);\n    Quill.register(IdNotaRodapeAttribute);\n    Quill.register(NumeroAttribute);\n    Quill.register(TextoAttribute);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill = quill;\n    this.options = options;\n\n    this.options.numeroInicial = this.options.numeroInicial ?? 1;\n\n    this.quill.notasRodape = this;\n\n    const toolbar = this.quill.getModule('toolbar');\n    if (toolbar) {\n      toolbar.addHandler('nota-rodape', this.solicitarTexto.bind(this));\n    }\n\n    this.addClipboardMatcher();\n    this.quill.on('text-change', this.onTextChange.bind(this));\n\n    this.quill.root.addEventListener('click', this.onClick.bind(this));\n    this.quill.root.addEventListener(NOTA_RODAPE_INPUT_EVENT, this.tratarRespostaModal.bind(this));\n  }\n\n  addClipboardMatcher() {\n    this.quill.clipboard.addMatcher('nota-rodape', (node, delta) => {\n      let match = Parchment.query(node);\n      if (match == null || match.blotName !== 'nota-rodape') {\n        return delta;\n      }\n\n      const id = this.isAbrindoTexto ? node.getAttribute('id-nota-rodape') : this.gerarId();\n      const numero = node.getAttribute('numero');\n      const texto = decodeHtml(node.getAttribute('texto'));\n      const notaRodape = new NotaRodape({ id, numero, texto });\n\n      return new Delta().insert({ 'nota-rodape': notaRodape });\n\n      // const ops = delta.ops.reduce((acc, op) => {\n      //   if (op.insert && op.attributes?.['id-nota-rodape']) {\n      //     const { 'id-nota-rodape': id, numero, texto } = op.attributes || {};\n      //     const notaRodape = new NotaRodape({ id, numero: +numero, texto });\n      //     acc.push({ insert: { 'nota-rodape': notaRodape } });\n      //   }\n      //   return acc;\n      // }, []);\n\n      // return new Delta(ops);\n    });\n  }\n\n  onTextChange(delta, oldContent, source) {\n    const undo = this.quill.history.stack.undo[this.quill.history.stack.undo.length - 1];\n    const redo = this.quill.history.stack.redo[this.quill.history.stack.redo.length - 1];\n    if (this.hasNotaRodape(delta) || this.hasNotaRodape(undo?.undo) || this.hasNotaRodape(undo?.redo) || this.hasNotaRodape(redo?.redo)) {\n      this.renumerarTodasNotas();\n      this.emitirEventoNotaRodapeAdicionadaOuRemovida(this.hasNotaRodape(delta));\n    }\n\n    if (this.hasNotaRodape(delta)) {\n      this.removerEspacosAoRedorNotaRodape();\n    }\n  }\n\n  removerEspacosAoRedorNotaRodape() {\n    // A operação de colar texto que possua nota de rodapé está adicionando \\t antes e depois do número da nota\n    // O código abaixo remove esses espaços\n\n    const notas = this.findBlotsNotaRodape();\n    notas.forEach(item => {\n      item.blot.next?.text?.match(/^\\t/) && this.quill.deleteText(item.index + 1, 1, 'silent');\n      item.blot.prev?.text?.match(/\\s$/) && this.quill.deleteText(item.index - 1, 1, 'silent');\n    });\n  }\n\n  timerEmitirEventoNotaRodapeChange;\n  emitirEventoNotaRodapeAdicionadaOuRemovida(isAdicionadaOuAtualizada) {\n    clearTimeout(this.timerEmitirEventoNotaRodapeChange);\n    this.timerEmitirEventoNotaRodapeChange = setTimeout(() => {\n      const eventName = isAdicionadaOuAtualizada ? NOTA_RODAPE_CHANGE_EVENT : NOTA_RODAPE_REMOVE_EVENT;\n      this.quill.root.dispatchEvent(new CustomEvent(eventName, { bubbles: true }));\n    }, 100);\n  }\n\n  hasNotaRodape(delta) {\n    return delta?.ops?.find(op => op.insert?.['nota-rodape']);\n  }\n\n  onClick(e) {\n    const el = e.target;\n    if (el?.tagName === 'NOTA-RODAPE' || el?.parentElement?.tagName === 'NOTA-RODAPE') {\n      e.preventDefault();\n      e.stopPropagation();\n      this.solicitarTexto(el.notaRodape || el.parentElement.notaRodape);\n    }\n  }\n\n  tratarRespostaModal(event) {\n    event.stopPropagation();\n    const { id, texto } = event.detail;\n    const el = id && this.findNodeById(id);\n    this.quill.focus();\n    el ? this.atualizarTexto(el.notaRodape, texto) : this.adicionar(texto);\n  }\n\n  solicitarTexto(notaRodape) {\n    // const texto = prompt('Texto da nota', notaRodape?.texto);\n    // if (!texto) return;\n    // typeof notaRodape === 'object' ? this.atualizarTexto(notaRodape, texto) : this.adicionar(texto);\n\n    const notaRodapeModal = new NotaRodapeModal({\n      domNodeNotaRodape: this.quill.root,\n      idNotaRodape: notaRodape?.id,\n      textoInicialNotaRodape: notaRodape?.texto,\n      tituloModal: typeof notaRodape === 'object' ? 'Editar nota de rodapé' : 'Adicionar nota de rodapé',\n    });\n    notaRodapeModal.open();\n  }\n\n  atualizarTexto(notaRodape, novoTexto) {\n    const elemento = this.findNodeById(notaRodape.id);\n    const blot = Quill.find(elemento);\n    blot.format('nota-rodape', { ...notaRodape, texto: novoTexto });\n    return blot.domNode.notaRodape;\n  }\n\n  adicionar(texto) {\n    const quill = this.quill;\n    const range = quill.getSelection();\n    if (!range) return;\n\n    const id = this.gerarId();\n    const notaRodape = new NotaRodape({ id, numero: 0, texto });\n\n    const delta = new Delta().retain(range.index).delete(range.length).insert({ 'nota-rodape': notaRodape });\n\n    quill.updateContents(delta, 'user');\n    quill.setSelection(range.index + 1, 0);\n\n    return notaRodape;\n  }\n\n  remover(idNotaRodape) {\n    const elemento = this.findNodeById(idNotaRodape);\n    const blot = Quill.find(elemento);\n    blot?.remove();\n  }\n\n  editar(idNotaRodape) {\n    const notaRodape = this.findNodeById(idNotaRodape)?.notaRodape;\n    notaRodape && this.solicitarTexto(notaRodape);\n  }\n\n  associar(notasRodape) {\n    notasRodape.forEach(nota => {\n      const elemento = this.findNodeById(nota.id);\n      if (elemento) {\n        elemento.notaRodape = nota;\n      }\n    });\n  }\n\n  getNotasRodape() {\n    return this.findBlotsNotaRodape().map(item => item.blot.domNode.notaRodape);\n  }\n\n  gerarId() {\n    return PREFIXO_ID + new Date().getTime();\n  }\n\n  findNodeById(id) {\n    return this.quill.root.querySelector(`nota-rodape[id-nota-rodape=\"${id}\"]`);\n  }\n\n  findBlotsNotaRodape() {\n    return Array.from(this.quill.root.querySelectorAll('nota-rodape')).map(domNode => {\n      const blot = Quill.find(domNode as any);\n      const index = blot.offset(this.quill.scroll);\n      return {\n        index,\n        blot,\n      };\n    });\n  }\n\n  renumerarTodasNotas() {\n    const range = this.quill.getSelection();\n    const notas = this.findBlotsNotaRodape();\n    notas.forEach((item, idx) => {\n      const numero = idx + this.options.numeroInicial;\n      const node = item.blot.domNode;\n      node.innerText = numero;\n      node.setAttribute('numero', numero);\n      if (node.notaRodape?.id) {\n        node.notaRodape.numero = numero;\n      }\n    });\n    range && this.quill.setSelection(range.index, range.length);\n  }\n\n  ajustarConteudoTagsNotaRodape(html) {\n    // Ajusta o conteúdo das tags <nota-rodape> para que o número da nota fique dentro da tag <nota-rodape>\n    return html.replace(/<nota-rodape.+?<\\/nota-rodape>/g, (texto: string) => texto.replace(/>.?<span[^>]*>(\\d+)<\\/span>.?</g, '>$1<'));\n  }\n}\n\nexport { ModuloNotaRodape };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst n=n=>e=>\"function\"==typeof e?((n,e)=>(window.customElements.define(n,e),e))(n,e):((n,e)=>{const{kind:t,elements:i}=e;return{kind:t,elements:i,finisher(e){window.customElements.define(n,e)}}})(n,e);export{n as customElement};\n//# sourceMappingURL=custom-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst i=(i,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}};function e(e){return(n,t)=>void 0!==t?((i,e,n)=>{e.constructor.createProperty(n,i)})(e,n,t):i(e,n)}export{e as property};\n//# sourceMappingURL=property.js.map\n","import{property as r}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function t(t){return r({...t,state:!0})}export{t as state};\n//# sourceMappingURL=state.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=(e,t,o)=>{Object.defineProperty(t,o,e)},t=(e,t)=>({kind:\"method\",placement:\"prototype\",key:t.key,descriptor:e}),o=({finisher:e,descriptor:t})=>(o,n)=>{var r;if(void 0===n){const n=null!==(r=o.originalKey)&&void 0!==r?r:o.key,i=null!=t?{kind:\"method\",placement:\"prototype\",key:n,descriptor:t(o.key)}:{...o,key:n};return null!=e&&(i.finisher=function(t){e(t,n)}),i}{const r=o.constructor;void 0!==t&&Object.defineProperty(o,n,t(n)),null==e||e(r,n)}};export{o as decorateProperty,e as legacyPrototypeMethod,t as standardPrototypeMethod};\n//# sourceMappingURL=base.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function i(i,n){return o({descriptor:o=>{const t={get(){var o,n;return null!==(n=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(n){const n=\"symbol\"==typeof o?Symbol():\"__\"+o;t.get=function(){var o,t;return void 0===this[n]&&(this[n]=null!==(t=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==t?t:null),this[n]}}return t}})}export{i as query};\n//# sourceMappingURL=query.js.map\n","import{decorateProperty as r}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function e(e){return r({descriptor:r=>({get(){var r,o;return null!==(o=null===(r=this.renderRoot)||void 0===r?void 0:r.querySelectorAll(e))&&void 0!==o?o:[]},enumerable:!0,configurable:!0})})}export{e as queryAll};\n//# sourceMappingURL=query-all.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var n;const e=null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));function l(n){const{slot:l,selector:t}=null!=n?n:{};return o({descriptor:o=>({get(){var o;const r=\"slot\"+(l?`[name=${l}]`:\":not([name])\"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(r),s=null!=i?e(i,n):[];return t?s.filter((o=>o.matches(t))):s},enumerable:!0,configurable:!0})})}export{l as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","/**\n@license\nCopyright (c) 2018 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n  This is a JavaScript mixin that you can use to connect a Custom Element base\n  class to a Redux store. The `stateChanged(state)` method will be called when\n  the state is updated.\n\n  Example:\n\n      import { connect } from 'pwa-helpers/connect-mixin.js';\n\n      class MyElement extends connect(store)(HTMLElement) {\n        stateChanged(state) {\n          this.textContent = state.data.count.toString();\n        }\n      }\n*/\nexport const connect = (store) => (baseElement) => class extends baseElement {\n    connectedCallback() {\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n        this._storeUnsubscribe = store.subscribe(() => this.stateChanged(store.getState()));\n        this.stateChanged(store.getState());\n    }\n    disconnectedCallback() {\n        this._storeUnsubscribe();\n        if (super.disconnectedCallback) {\n            super.disconnectedCallback();\n        }\n    }\n    /**\n     * The `stateChanged(state)` method will be called when the state is updated.\n     */\n    stateChanged(_state) { }\n};\n//# sourceMappingURL=connect-mixin.js.map","export class LexmlEmendaConfig {\n  urlConsultaParlamentares = 'api/parlamentares';\n  urlAutocomplete = 'api/autocomplete-norma';\n  urlComissoes?: string;\n  tamanhoMaximoAnexo = 5120; //5MB\n  tamanhoMaximoImagem = 2048; //2MB\n}\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","import { Referencia } from '../../elemento';\nimport { ElementoAction } from './index';\n\nexport const ADICIONAR_AGRUPADOR_ARTIGO = 'ADICIONAR_AGRUPADOR_ARTIGO';\n\nexport class AdicionarAgrupadorArtigo implements ElementoAction {\n  descricao: string;\n  posicao?: string;\n  hotkey = '(Ctrl+Alt+G)';\n\n  constructor(posicao?: string) {\n    this.descricao = 'Adicionar Título, Capítulo, Seção e outros' + (posicao ? ' ' + posicao : '');\n    this.posicao = posicao;\n  }\n\n  execute(atual: Referencia, tipo: string, refAux: any, posicao: string, manterNoMesmoGrupoDeAspas: boolean): any {\n    return {\n      type: ADICIONAR_AGRUPADOR_ARTIGO,\n      atual,\n      novo: {\n        tipo,\n        posicao,\n        manterNoMesmoGrupoDeAspas,\n      },\n    };\n  }\n}\n\nexport const adicionarAgrupadorArtigoAction = new AdicionarAgrupadorArtigo();\nexport const adicionarAgrupadorArtigoAntesAction = new AdicionarAgrupadorArtigo('antes');\n","import { Alerta } from '../alerta';\n\nexport const ADICIONAR_ALERTA = 'ADICIONAR_ALERTA';\n\nexport function adicionarAlerta(alerta: Alerta): any {\n  return {\n    type: ADICIONAR_ALERTA,\n    alerta: {\n      id: alerta.id,\n      tipo: alerta.tipo,\n      mensagem: alerta.mensagem,\n      podeFechar: alerta.podeFechar,\n      exibirComandoEmenda: alerta.exibirComandoEmenda,\n    },\n  };\n}\n","export const REMOVER_ALERTA = 'REMOVER_ALERTA';\n\nexport function removerAlerta(id: string): any {\n  return {\n    type: 'REMOVER_ALERTA',\n    id,\n  };\n}\n","import { Referencia } from '../../elemento';\n\nexport const ASSISTENTE_ALTERACAO = 'ASSISTENTE_ALTERACAO';\n\nexport class AdicionarAlteracaoComAssistenteAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Alteração com Assistente';\n  }\n\n  execute(atual: Referencia, norma?: string, dispositivos?: string): any {\n    return {\n      type: ASSISTENTE_ALTERACAO,\n      atual,\n      norma,\n      dispositivos,\n    };\n  }\n}\n\nexport const adicionarAlteracaoComAssistenteAction = new AdicionarAlteracaoComAssistenteAction();\n","import { Tipo } from '../../dispositivo/tipo';\n\nexport const TipoDispositivo: Record<string, Tipo> = {\n  agrupadorGenerico: {\n    tipo: 'DispositivoAgrupadorGenerico',\n    name: undefined,\n    tagId: 'dg',\n    descricao: undefined,\n    descricaoPlural: undefined,\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  alinea: {\n    tipo: 'Alinea',\n    name: 'Alinea',\n    tagId: 'ali',\n    descricao: 'Alínea',\n    descricaoPlural: 'Alíneas',\n    tiposPermitidosPai: ['Inciso'],\n    tiposPermitidosFilhos: ['Item'],\n    tipoProvavelFilho: 'Item',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  articulacao: {\n    tipo: 'Articulacao',\n    name: 'Articulacao',\n    tagId: '',\n    descricao: 'Articulação',\n    descricaoPlural: 'Articulações',\n    tiposPermitidosPai: [],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  artigo: {\n    tipo: 'Artigo',\n    name: 'Artigo',\n    tagId: 'art',\n    descricao: 'Artigo',\n    descricaoPlural: 'Artigos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  capitulo: {\n    tipo: 'Capitulo',\n    name: 'Capitulo',\n    tagId: 'cap',\n    descricao: 'Capítulo',\n    descricaoPlural: 'Capítulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo'],\n    tiposPermitidosFilhos: ['Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  caput: {\n    tipo: 'Caput',\n    name: 'Caput',\n    tagId: 'cpt',\n    descricao: 'Caput',\n    descricaoPlural: 'Capita',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  generico: {\n    tipo: 'DispositivoGenerico',\n    name: undefined,\n    tagId: 'gen',\n    descricao: 'Dispositivo genérico',\n    descricaoPlural: 'Dispositivos genéricos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso', 'Alinea', 'Item'],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  inciso: {\n    tipo: 'Inciso',\n    name: 'Inciso',\n    tagId: 'inc',\n    descricao: 'Inciso',\n    descricaoPlural: 'Incisos',\n    tiposPermitidosPai: ['Artigo', 'Caput', 'Paragrafo'],\n    tiposPermitidosFilhos: ['Alinea'],\n    tipoProvavelFilho: 'Alinea',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  item: {\n    tipo: 'Item',\n    name: 'Item',\n    tagId: 'ite',\n    descricao: 'Item',\n    descricaoPlural: 'Itens',\n    tiposPermitidosPai: ['Alinea'],\n    tiposPermitidosFilhos: [],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  livro: {\n    tipo: 'Livro',\n    name: 'Livro',\n    tagId: 'liv',\n    descricao: 'Livro',\n    descricaoPlural: 'Livros',\n    tiposPermitidosPai: ['Articulacao', 'Parte'],\n    tiposPermitidosFilhos: ['Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  omissis: {\n    tipo: 'Omissis',\n    name: 'Omissis',\n    tagId: 'omi',\n    descricao: 'Linha pontilhada (omissis)',\n    descricaoPlural: 'Linhas pontilhadas (omissis)',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Caput', 'Paragrafo', 'Alinea', 'Inciso'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Paragrafo', 'Alinea', 'Inciso', 'Item'],\n    tipoProvavelFilho: undefined,\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  paragrafo: {\n    tipo: 'Paragrafo',\n    name: 'Paragrafo',\n    tagId: 'par',\n    descricao: 'Parágrafo',\n    descricaoPlural: 'Parágrafos',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  parte: {\n    tipo: 'Parte',\n    name: 'Parte',\n    tagId: 'prt',\n    descricao: 'Parte',\n    descricaoPlural: 'Partes',\n    tiposPermitidosPai: ['Articulacao'],\n    tiposPermitidosFilhos: ['Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  secao: {\n    tipo: 'Secao',\n    name: 'Secao',\n    tagId: 'sec',\n    descricao: 'Seção',\n    descricaoPlural: 'Seções',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo'],\n    tiposPermitidosFilhos: ['Subsecao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  subsecao: {\n    tipo: 'Subsecao',\n    name: 'Subsecao',\n    tagId: 'sub',\n    descricao: 'Subseção',\n    descricaoPlural: 'Subseções',\n    tiposPermitidosPai: ['Secao'],\n    tiposPermitidosFilhos: ['Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  titulo: {\n    tipo: 'Titulo',\n    name: 'Titulo',\n    tagId: 'tit',\n    descricao: 'Título',\n    descricaoPlural: 'Títulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro'],\n    tiposPermitidosFilhos: ['Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  ementa: {\n    tipo: 'Ementa',\n    name: 'Ementa',\n    tagId: 'eme',\n    descricao: 'Ementa',\n    descricaoPlural: 'Ementas',\n    tiposPermitidosPai: ['Articulacao'],\n    tiposPermitidosFilhos: [],\n    tipoProvavelFilho: undefined,\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n};\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const ADICIONAR_ELEMENTO = 'ADICIONAR_ELEMENTO';\n\nexport class AdicionarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  isDispositivoAlteracao = false;\n  posicao?: string;\n  constructor(tipo?: Tipo, posicao?: string) {\n    this.descricao = `Adicionar ${tipo?.descricao?.toLowerCase() ?? ''} ${posicao && posicao !== 'filho' ? posicao : ''}`;\n    this.tipo = tipo?.tipo;\n    this.posicao = posicao;\n  }\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo: tipo ?? this.tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n      posicao: this.posicao,\n    };\n  }\n}\n\nexport const adicionarElementoAction = new AdicionarElemento();\n\nexport const adicionarArtigo = new AdicionarElemento(TipoDispositivo.artigo);\nexport const adicionarArtigoAntes = new AdicionarElemento(TipoDispositivo.artigo, 'antes');\nexport const adicionarArtigoDepois = new AdicionarElemento(TipoDispositivo.artigo, 'depois');\nexport const adicionarArtigoFilho = new AdicionarElemento(TipoDispositivo.artigo, 'filho');\n\nexport const adicionarAlinea = new AdicionarElemento(TipoDispositivo.alinea);\nexport const adicionarAlineaAntes = new AdicionarElemento(TipoDispositivo.alinea, 'antes');\nexport const adicionarAlineaDepois = new AdicionarElemento(TipoDispositivo.alinea, 'depois');\nexport const adicionarAlineaFilho = new AdicionarElemento(TipoDispositivo.alinea, 'filho');\n\nexport const adicionarInciso = new AdicionarElemento(TipoDispositivo.inciso);\nexport const adicionarIncisoAntes = new AdicionarElemento(TipoDispositivo.inciso, 'antes');\nexport const adicionarIncisoDepois = new AdicionarElemento(TipoDispositivo.inciso, 'depois');\nexport const adicionarIncisoFilho = new AdicionarElemento(TipoDispositivo.inciso, 'filho');\n\nexport const adicionarItem = new AdicionarElemento(TipoDispositivo.item);\nexport const adicionarItemAntes = new AdicionarElemento(TipoDispositivo.item, 'antes');\nexport const adicionarItemDepois = new AdicionarElemento(TipoDispositivo.item, 'depois');\nexport const adicionarItemFilho = new AdicionarElemento(TipoDispositivo.item, 'filho');\n\nexport const omissis = new AdicionarElemento(TipoDispositivo.omissis);\n\nexport const adicionarParagrafo = new AdicionarElemento(TipoDispositivo.paragrafo);\nexport const adicionarParagrafoAntes = new AdicionarElemento(TipoDispositivo.paragrafo, 'antes');\nexport const adicionarParagrafoDepois = new AdicionarElemento(TipoDispositivo.paragrafo, 'depois');\nexport const adicionarParagrafoFilho = new AdicionarElemento(TipoDispositivo.paragrafo, 'filho');\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ADICIONAR_ELEMENTOS_FROM_CLIPBOARD = 'ADICIONAR_ELEMENTOS_FROM_CLIPBOARD';\n\nexport class AdicionarElementosFromClipboardAction implements ElementoAction {\n  descricao: string;\n  constructor() {\n    this.descricao = `Adicionar Elemento from Clipboard`;\n  }\n  execute(atual: Referencia, conteudo?: string, _?: Referencia, isDispositivoAlteracao = false, isColarSubstituindo = true, posicao = 'depois'): any {\n    return {\n      type: ADICIONAR_ELEMENTOS_FROM_CLIPBOARD,\n      atual,\n      novo: {\n        isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      isColarSubstituindo,\n      posicao,\n    };\n  }\n}\n\nexport const adicionarElementoFromClipboardAction = new AdicionarElementosFromClipboardAction();\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const AGRUPAR_ELEMENTO = 'AGRUPAR_ELEMENTO';\n\nexport class AgruparElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n\n  constructor(tipo: Tipo) {\n    this.descricao = 'Adicionar ' + tipo.descricao;\n    this.tipo = tipo.tipo;\n  }\n\n  execute(atual: Referencia, uuid: string): any {\n    return {\n      type: AGRUPAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo: this.tipo,\n        uuid: +uuid,\n      },\n    };\n  }\n}\nexport const adicionarParte = new AgruparElemento(TipoDispositivo.parte);\nexport const adicionarLivro = new AgruparElemento(TipoDispositivo.livro);\nexport const adicionarTitulo = new AgruparElemento(TipoDispositivo.titulo);\nexport const adicionarCapitulo = new AgruparElemento(TipoDispositivo.capitulo);\nexport const adicionarSecao = new AgruparElemento(TipoDispositivo.secao);\nexport const adicionarSubsecao = new AgruparElemento(TipoDispositivo.subsecao);\n","import { Revisao } from '../../revisao/revisao';\nimport { DispositivosEmenda } from './../../emenda/emenda';\n\nexport const APLICAR_ALTERACOES_EMENDA = 'APLICAR_ALTERACOES_EMENDA';\n\nexport class AplicarAlteracoesEmenda {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar';\n  }\n\n  execute(alteracoesEmenda: DispositivosEmenda, revisoes: Revisao[] = []): any {\n    return {\n      type: APLICAR_ALTERACOES_EMENDA,\n      alteracoesEmenda,\n      revisoes,\n    };\n  }\n}\n\nexport const aplicarAlteracoesEmendaAction = new AplicarAlteracoesEmenda();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_REFERENCIA_ELEMENTO = 'ATUALIZAR_REFERENCIA_ELEMENTO';\n\nexport class AtualizarReferenciaElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar Norma Referenciada';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_REFERENCIA_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarReferenciaElementoAction = new AtualizarReferenciaElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_TEXTO_ELEMENTO = 'ATUALIZAR_TEXTO_ELEMENTO';\n\nexport class AtualizarTextoElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_TEXTO_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarTextoElementoAction = new AtualizarTextoElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const AUTO_FIX = 'AUTO_FIX';\n\nexport class AutoFixAction implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Corrigir automaticamente';\n  }\n\n  execute(atual: Referencia, mensagem: string): any {\n    return {\n      type: AUTO_FIX,\n      atual,\n      mensagem,\n    };\n  }\n}\nexport const autofixAction = new AutoFixAction();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ELEMENTO_SELECIONADO = 'ELEMENTO_SELECIONADO';\n\nclass ElementoSelecionado implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento selecionado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: ELEMENTO_SELECIONADO,\n      atual,\n    };\n  }\n}\nexport const elementoSelecionadoAction = new ElementoSelecionado();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nexport const INFORMAR_DADOS_ASSISTENTE = 'INFORMAR_DADOS_ASSISTENTE';\n\nexport class InformarDadosAssistente implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Adicionar artigo para alterar outra norma';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_DADOS_ASSISTENTE,\n      atual,\n    };\n  }\n}\nexport const InformarDadosAssistenteAction = new InformarDadosAssistente();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const INFORMAR_EXISTENCIA_NA_NORMA = 'INFORMAR_EXISTENCIA_NA_NORMA';\n\nexport class InformarExistenciaDoElementoNaNorma implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  nomeAcao?: string;\n  hotkey?: string;\n  existeNaNormaAlterada: boolean;\n\n  constructor(descricao: string, nomeAcao: string, hotkey: string, existeNaNormaAlterada: boolean) {\n    this.descricao = descricao;\n    this.nomeAcao = nomeAcao;\n    this.hotkey = hotkey;\n    this.existeNaNormaAlterada = existeNaNormaAlterada;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_EXISTENCIA_NA_NORMA,\n      subType: this.nomeAcao,\n      atual,\n      existeNaNormaAlterada: this.existeNaNormaAlterada,\n    };\n  }\n}\n\nexport const considerarElementoExistenteNaNorma = new InformarExistenciaDoElementoNaNorma('Considerar existente na norma', 'considerarExistenteNaNorma', '(Ctrl+Alt+X)', true);\nexport const considerarElementoNovoNaNorma = new InformarExistenciaDoElementoNaNorma('Considerar novo na norma', 'considerarNovoNaNorma', '(Ctrl+Alt+X)', false);\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nexport const INFORMAR_NORMA = 'INFORMAR_NORMA';\n\nexport class InformarNorma implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Informar norma alterada';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_NORMA,\n      atual,\n    };\n  }\n}\nexport const informarNormaAction = new InformarNorma();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ABAIXO = 'Mover para baixo';\n\nexport class MoverElementoAbaixo implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Alt+⇣)';\n\n  constructor() {\n    this.descricao = 'Mover para baixo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ABAIXO,\n      atual,\n    };\n  }\n}\nexport const moverElementoAbaixoAction = new MoverElementoAbaixo();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ACIMA = 'Mover para cima';\n\nexport class MoverElementoAcima implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Alt+⇡)';\n\n  constructor() {\n    this.descricao = 'Mover para cima';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ACIMA,\n      atual,\n    };\n  }\n}\nexport const moverElementoAcimaAction = new MoverElementoAcima();\n","export const ABRIR_ARTICULACAO = 'ABRIR_ARTICULACAO';\n\nexport const openArticulacaoAction = (articulacao: any, classificacao?: string): any => {\n  return {\n    type: ABRIR_ARTICULACAO,\n    classificacao,\n    articulacao,\n  };\n};\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const REMOVER_ELEMENTO = 'REMOVER_ELEMENTO';\n\nexport class RemoverElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Ctrl+D)';\n\n  constructor() {\n    this.descricao = 'Remover';\n  }\n\n  execute(atual: Referencia, elementoLinhaAnterior: any): any {\n    return {\n      type: REMOVER_ELEMENTO,\n      atual,\n      elementoLinhaAnterior,\n    };\n  }\n}\nexport const removerElementoAction = new RemoverElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RENUMERAR_ELEMENTO = 'RENUMERAR_ELEMENTO';\n\nexport class RenumerarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Ctrl+Alt+N)';\n\n  constructor() {\n    this.descricao = 'Numerar dispositivo';\n  }\n\n  execute(atual: Referencia, numero: string): any {\n    this.tipo = atual.tipo;\n    return {\n      type: RENUMERAR_ELEMENTO,\n      atual,\n      novo: {\n        numero,\n      },\n    };\n  }\n}\nexport const renumerarElementoAction = new RenumerarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RESTAURAR_ELEMENTO = 'RESTAURAR_ELEMENTO';\n\nexport class RestaurarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Abandonar modificações';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: RESTAURAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const restaurarElementoAction = new RestaurarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const SUPRIMIR_AGRUPADOR = 'SUPRIMIR_AGRUPADOR';\n\nclass SuprimirAgrupador implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Suprimir apenas o Agrupador';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: SUPRIMIR_AGRUPADOR,\n      atual,\n    };\n  }\n}\nexport const suprimirAgrupadorAction = new SuprimirAgrupador();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const SUPRIMIR_ELEMENTO = 'SUPRIMIR_ELEMENTO';\n\nclass SuprimirElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Suprimir';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: SUPRIMIR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const suprimirElementoAction = new SuprimirElemento();\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const TRANSFORMAR_TIPO_ELEMENTO = 'TRANSFORMAR_TIPO_ELEMENTO';\n\nexport class TransformarElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n  nomeAcao?: string;\n  hotkey?: string;\n\n  constructor(tipo: Tipo, descricao: string, nomeAcao: string, hotkey?: string) {\n    this.descricao = descricao;\n    this.tipo = tipo.tipo;\n    this.nomeAcao = nomeAcao;\n    this.hotkey = hotkey;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: TRANSFORMAR_TIPO_ELEMENTO,\n      subType: this.nomeAcao,\n      atual,\n      novo: {\n        tipo: this.tipo,\n      },\n    };\n  }\n}\nexport const transformarEmOmissisAlinea = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Alíneas', 'transformarAlineaEmOmissisAlinea', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisIncisoCaput = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Incisos', 'transformarIncisoCaputEmOmissisIncisoCaput', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisItem = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Itens', 'transformarItemEmOmissisItem', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisParagrafo = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Parágrafos', 'transformarParagrafoEmOmissisParagrafo', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisIncisoParagrafo = new TransformarElemento(\n  TipoDispositivo.omissis,\n  'Omitir Incisos',\n  'transformarIncisoParagrafoEmOmissisIncisoParagrafo',\n  '(Ctrl+Alt+O)'\n);\n\nexport const transformarAlineaEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarAlineaEmIncisoCaput', '(Shift+Tab)');\nexport const transformarAlineaEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarAlineaEmIncisoParagrafo', '(Shift+Tab)');\nexport const transformaAlineaEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarAlineaEmItem', '(Tab)');\nexport const transformarArtigoEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Parágrafo', 'transformarArtigoEmParagrafo', '(Tab)');\nexport const transformarGenericoEmInciso = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarDispositivoGenericoEmInciso');\nexport const transformarGenericoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alínea', 'transformarDispositivoGenericoEmAlinea');\nexport const transformarGenericoEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarDispositivoGenericoEmItem');\nexport const transformarIncisoParagrafoEmParagrafo = new TransformarElemento(\n  TipoDispositivo.paragrafo,\n  'Transformar em Parágrafo',\n  'transformarIncisoParagrafoEmParagrafo',\n  '(Shift+Tab)'\n);\nexport const transformarIncisoCaputEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Parágrafo', 'transformarIncisoCaputEmParagrafo', '(Shift+Tab)');\nexport const transformarIncisoCaputEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alínea', 'transformarIncisoCaputEmAlinea', '(Tab)');\nexport const transformarIncisoParagrafoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alínea', 'transformarIncisoParagrafoEmAlinea', '(Tab)');\n\nexport const transformarOmissisEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alínea', 'transformarOmissisEmAlinea');\nexport const transformarOmissisEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar em Artigo', 'transformarOmissisEmArtigo');\nexport const transformarOmissisEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarOmissisEmIncisoCaput');\nexport const transformarOmissisEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarOmissisEmIncisoParagrafo');\nexport const transformarOmissisEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarOmissisEmItem');\nexport const transformarOmissisEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Parágrafo', 'transformarOmissisEmParagrafo');\n\nexport const transformarItemEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alínea', 'transformarItemEmAlinea', '(Shift+Tab)');\nexport const transformarParagrafoEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar em Artigo', 'transformarParagrafoEmArtigo', '(Shift+Tab)');\nexport const transformarParagrafoEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarParagrafoEmIncisoParagrafo', '(Tab)');\nexport const transformarParagrafoEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarParagrafoEmIncisoCaput', '(Tab)');\n","import { ElementoAction } from '.';\n\nexport const VALIDAR_ARTICULACAO = 'VALIDAR_ARTICULACAO';\n\nclass ValidarArticulacao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Articulação validada';\n  }\n\n  execute(): any {\n    return {\n      type: VALIDAR_ARTICULACAO,\n    };\n  }\n}\nexport const validarArticulacaAction = new ValidarArticulacao();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const VALIDAR_ELEMENTO = 'VALIDAR_ELEMENTO';\n\nclass ValidarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento validado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: VALIDAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const validarElementoAction = new ValidarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_NOTA_ALTERACAO = 'ATUALIZAR_NOTA_ALTERACAO';\n\nexport class AtualizarNotaAlteracao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar nota de alteração';\n  }\n\n  execute(atual: Referencia, notaAlteracao: string): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_NOTA_ALTERACAO,\n      atual,\n      notaAlteracao,\n    };\n  }\n}\n\nexport const atualizarNotaAlteracaoAction = new AtualizarNotaAlteracao();\n","import { Referencia } from '../../elemento';\n\nexport const REMOVER_ELEMENTO_SEM_TEXTO = 'REMOVER_ELEMENTO_SEM_TEXTO';\n\nexport class RemoverElementoSemTexto {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Remover dispositivo sem texto';\n  }\n\n  execute(atual: Referencia, key: string): any {\n    return {\n      type: REMOVER_ELEMENTO_SEM_TEXTO,\n      atual,\n      key,\n    };\n  }\n}\nexport const removerElementoSemTextoAction = new RemoverElementoSemTexto();\n","import { Elemento } from '../elemento';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Situacao {\n  situacao: TipoSituacao;\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[];\n}\n\nexport interface TipoSituacao {\n  descricaoSituacao: string;\n  dispositivoOriginal?: Partial<Elemento>;\n}\n\nexport enum DescricaoSituacao {\n  DISPOSITIVO_ADICIONADO = 'Dispositivo Adicionado',\n  DISPOSITIVO_NOVO = 'Dispositivo Novo',\n  DISPOSITIVO_MODIFICADO = 'Dispositivo Modificado',\n  DISPOSITIVO_ORIGINAL = 'Dispositivo Original',\n  DISPOSITIVO_SUPRIMIDO = 'Dispositivo Suprimido',\n}\n\nexport const isSituacaoExclusivaDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  return [DescricaoSituacao.DISPOSITIVO_ADICIONADO.toString(), DescricaoSituacao.DISPOSITIVO_MODIFICADO.toString(), DescricaoSituacao.DISPOSITIVO_SUPRIMIDO.toString()].includes(\n    dispositivo.situacao.descricaoSituacao\n  );\n};\n\nexport const isDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  if (isSituacaoExclusivaDispositivoEmenda(dispositivo)) {\n    return true;\n  }\n\n  if (dispositivo.pai === undefined) {\n    return false;\n  }\n\n  return isDispositivoEmenda(dispositivo.pai!);\n};\n\nexport const isAlteracaoIntegral = (dispositivo: Dispositivo): boolean => {\n  if (dispositivo.tipo !== TipoDispositivo.artigo.tipo && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return false;\n  }\n  if (dispositivo.filhos.length) {\n    for (const filho of dispositivo.filhos) {\n      if (!isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (dispositivo.tipo === TipoDispositivo.caput.tipo && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return true;\n  }\n  return false;\n};\n","// export const TEXTO_OMISSIS = '...........................................................................................';\nexport const TEXTO_OMISSIS =\n  '.................................................................................................................................................................................................................................................................................';\n","import { TEXTO_OMISSIS } from '../lexml/conteudo/textoOmissis';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Tipo {\n  tipo: string;\n  name?: string;\n  tagId?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n}\n\nexport const isArticulacao = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const isDispositivoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.generico.tipo;\n};\n\nexport const isArtigo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.artigo.tipo;\n};\n\nexport const isCaput = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.caput.tipo;\n};\n\nexport const isParagrafo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.paragrafo.tipo;\n};\n\nexport const isInciso = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.inciso.tipo;\n};\n\nexport const isIncisoCaput = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isCaput(dispositivo.pai!);\n};\n\nexport const isIncisoParagrafo = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isParagrafo(dispositivo.pai!);\n};\n\nexport const isAlinea = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.alinea.tipo;\n};\n\nexport const isItem = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.item.tipo;\n};\n\nexport const isOmissis = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.omissis.tipo;\n};\n\nexport const isLivro = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.livro.tipo;\n};\n\nexport const isTitulo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.titulo.tipo;\n};\n\nexport const isParte = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.parte.tipo;\n};\n\nexport const isCapitulo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.capitulo.tipo;\n};\n\nexport const isAgrupador = (dispositivo: Dispositivo): boolean => {\n  return [\n    TipoDispositivo.articulacao.tipo,\n    TipoDispositivo.agrupadorGenerico.tipo,\n    TipoDispositivo.capitulo.tipo,\n    TipoDispositivo.livro.tipo,\n    TipoDispositivo.parte.tipo,\n    TipoDispositivo.secao.tipo,\n    TipoDispositivo.subsecao.tipo,\n    TipoDispositivo.titulo.tipo,\n  ].includes(dispositivo.tipo);\n};\n\nexport const isAgrupadorNaoArticulacao = (dispositivo: Dispositivo): boolean => {\n  return isAgrupador(dispositivo) && !isArticulacao(dispositivo);\n};\n\nexport const isAgrupadorGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.agrupadorGenerico.tipo;\n};\n\nexport const isDispositivoDeArtigo = (dispositivo: Dispositivo): boolean => {\n  return [TipoDispositivo.paragrafo.tipo, TipoDispositivo.inciso.tipo, TipoDispositivo.alinea.tipo, TipoDispositivo.item.tipo].includes(dispositivo.tipo);\n};\n\nexport const isEmenta = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.ementa.tipo;\n};\n\nexport const isTextoMaiusculo = (dispositivo?: Dispositivo): boolean => {\n  if (dispositivo === undefined) {\n    return false;\n  }\n  return isCapitulo(dispositivo) || isParte(dispositivo) || isLivro(dispositivo) || isTitulo(dispositivo);\n};\n\nexport const isTextoOmitido = (d: Dispositivo): boolean => {\n  return isOmissis(d) || d.texto.startsWith(TEXTO_OMISSIS) || d.texto.indexOf(TEXTO_OMISSIS) > -1;\n};\n","export enum ClassificacaoDocumento {\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n  NORMA = 'norma',\n  PROJETO = 'projeto',\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoDeArtigo, isDispositivoGenerico, isEmenta, isIncisoCaput, isParagrafo, Tipo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { omissis } from '../acao/adicionarElementoAction';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao, isCaput, isOmissis } from './../../dispositivo/tipo';\nimport { TipoDispositivo } from './../tipo/tipoDispositivo';\n\nexport function getArticulacao(dispositivo: Dispositivo): Articulacao {\n  if (!dispositivo) {\n    return dispositivo as Articulacao;\n  }\n  if (isArticulacao(dispositivo)) {\n    return dispositivo as Articulacao;\n  }\n  if (dispositivo.pai === undefined) {\n    throw new Error('Não foi encontrada a articulação');\n  }\n  return getArticulacao(dispositivo.pai);\n}\n\nexport function getDispositivo(uuid: number, dispositivo: Dispositivo | Articulacao): Dispositivo | Articulacao | null {\n  if (dispositivo.uuid === uuid) {\n    return dispositivo;\n  } else if (dispositivo.filhos !== null) {\n    let result: any = null;\n\n    const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n\n    for (let i = 0; result === null && i < filhos.length; i++) {\n      result = getDispositivo(uuid, filhos[i]);\n    }\n    return result;\n  }\n  return null;\n}\n\nexport const findDispositivoByUuid = (dispositivo: Dispositivo, uuid: number): Dispositivo | null => {\n  if (uuid === undefined) {\n    throw new Error('uuid não foi informado');\n  }\n  return getDispositivo(uuid, dispositivo);\n};\n\nexport const getUltimoFilho = (dispositivo: Dispositivo): Dispositivo => {\n  if (hasFilhos(dispositivo)) {\n    return getUltimoFilho(dispositivo.filhos[dispositivo.filhos.length - 1]);\n  } else if (dispositivo?.hasAlteracao() && dispositivo.alteracoes?.filhos.length) {\n    return getUltimoFilho(dispositivo.alteracoes.filhos[dispositivo.alteracoes.filhos.length - 1]);\n  } else {\n    return dispositivo;\n  }\n};\n\nexport const getFilhosEstiloLexML = (d: Dispositivo): Dispositivo[] => {\n  if (isArtigo(d)) {\n    const artigo = d as Artigo;\n    return [artigo.caput as Dispositivo, ...artigo.filhos.filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))];\n  }\n  return [...d.filhos];\n};\n\nexport const irmaosMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  return isArtigo(dispositivo)\n    ? getArticulacao(dispositivo).artigos.filter(f => f.tipo === dispositivo.tipo)\n    : dispositivo.pai\n    ? dispositivo.pai!.filhos.filter(f => f.tipo === dispositivo.tipo)\n    : [dispositivo];\n};\n\nexport const getAgrupadoresPosterioresTipoAcima = (dispositivo: Dispositivo, tipo: Tipo): Dispositivo[] => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d) && dispositivo.tiposPermitidosPai!.indexOf(tipo.tipo) > 0);\n};\n\nexport const getAgrupadoresAcima = (pai: Dispositivo, referencia: Dispositivo, agrupadores: Dispositivo[]): Dispositivo[] => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia); i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isAgrupador(d)) {\n        agrupadores.push(d);\n      }\n    }\n    if (pai?.pai) {\n      return getAgrupadoresAcima(pai.pai, referencia.pai!, agrupadores);\n    }\n  }\n  return agrupadores;\n};\n\nexport const hasAgrupador = (pai: Dispositivo): boolean => {\n  return pai.filhos.filter(a => isAgrupador(a)).length > 0;\n};\n\nexport const hasAgrupadoresAcima = (dispositivo: Dispositivo): boolean => {\n  const agrupadores: Dispositivo[] = [];\n  if (dispositivo.pai?.pai === undefined) {\n    return false;\n  }\n\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai, agrupadores).length > 0;\n};\n\nexport const getAgrupadorAcimaByTipo = (referencia: Dispositivo, tipo: string): Dispositivo | undefined => {\n  return [...new Set(getAgrupadoresAcima(referencia.pai!, referencia, []))].filter(a => a.tipo === tipo).reverse()[0];\n};\n\nexport const hasAgrupadoresAnterioresByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).filter(d => d.tipo === tipo).length > 0;\n};\n\nexport const getAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): Dispositivo | undefined => {\n  if (!dispositivo || !dispositivo.pai) {\n    return undefined;\n  }\n  if (dispositivo.pai && dispositivo.pai.tipo === tipo) {\n    return dispositivo.pai;\n  }\n  return getAgrupadoresAcimaByTipo(dispositivo.pai!, tipo);\n};\n\nexport const hasAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcimaByTipo(dispositivo, tipo) !== undefined;\n};\n\nexport const getArtigo = (dispositivo: Dispositivo): Dispositivo => {\n  if (isArtigo(dispositivo.pai!)) {\n    return dispositivo.pai!;\n  }\n  return getArtigo(dispositivo.pai!);\n};\n\nexport const getArtigoDoProjeto = (dispositivo: Dispositivo): Dispositivo => {\n  const pai = dispositivo.pai!;\n  if (isArtigo(pai) && !isDispositivoAlteracao(pai)) {\n    return dispositivo.pai!;\n  }\n  return getArtigoDoProjeto(dispositivo.pai!);\n};\n\nexport const getArtigosAnterioresIndependenteAgrupador = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo);\n\n  if (pos < 1) {\n    return [];\n  }\n  return getArticulacao(dispositivo).artigos.filter((artigo, index) => index < pos);\n};\n\nexport const getArtigosPosterioresIndependenteAgrupador = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo);\n\n  if (pos === -1 || getArticulacao(dispositivo).artigos.length === pos + 1) {\n    return [];\n  }\n  return getArticulacao(dispositivo).artigos.filter((artigo, index) => index > pos);\n};\n\n// Retorna o dispositivo imediatamente anterior na sequência de leitura ou primeiro dispositivo anterior aceito por \"accept\" na sequência de leitura\n// Considera caput. Não considera incisos de caput como filhos de artigo.\nexport const getDispositivoAnteriorNaSequenciaDeLeitura = (disp: Dispositivo, accept?: (d: Dispositivo) => boolean): Dispositivo | undefined => {\n  if (!disp.pai) {\n    return undefined;\n  }\n  if (isArticulacaoAlteracao(disp)) {\n    const anterior = (disp.pai! as Artigo).caput!;\n    return !accept || accept(anterior) ? anterior : getDispositivoAnteriorNaSequenciaDeLeitura(anterior, accept);\n  }\n  const irmaos = isArtigo(disp.pai) ? getFilhosArtigoEstiloLexML(disp.pai as Artigo) : disp.pai.filhos;\n  const pos = irmaos.indexOf(disp);\n  // Busca dispositivo mais à direita na árvore do irmão anterior ou o pai se não houver irmão anterior\n  const anterior = pos ? getUltimoFilho(irmaos[pos - 1]) : disp.pai;\n  return !accept || accept(anterior) ? anterior : getDispositivoAnteriorNaSequenciaDeLeitura(anterior, accept);\n};\n\n// Retorna o dispositivo imediatamente posterior na sequência de leitura ou primeiro dispositivo posterior aceito por \"accept\" na sequência de leitura\n// Considera caput. Não considera incisos de caput como filhos de artigo.\nexport const getDispositivoPosteriorNaSequenciaDeLeitura = (disp: Dispositivo, accept?: (d: Dispositivo) => boolean, aPartirDe?: Dispositivo): Dispositivo | undefined => {\n  if (!disp) {\n    return undefined;\n  }\n  let proximo: Dispositivo | undefined = undefined;\n  if (aPartirDe) {\n    proximo = getIrmaoPosteriorIndependenteDeTipo(aPartirDe);\n  } else {\n    const filhos = isArtigo(disp) ? getFilhosArtigoEstiloLexML(disp as Artigo) : disp.filhos;\n    if (filhos.length) {\n      proximo = filhos[0];\n    }\n  }\n  if (!proximo && !isDispositivoRaiz(disp)) {\n    return getDispositivoPosteriorNaSequenciaDeLeitura(disp.pai!, accept, disp);\n  }\n  return proximo ? (!accept || accept(proximo) ? proximo : getDispositivoPosteriorNaSequenciaDeLeitura(proximo, accept)) : undefined;\n};\n\nexport const getFilhosArtigoEstiloLexML = (art: Artigo): Dispositivo[] => {\n  // Adiciona o caput e remove os incisos do caput\n  return [art.caput!, ...getParagrafosEOmissis(art)];\n};\n\nexport const getProximoArtigoAnterior = (pai: Dispositivo, referencia: Dispositivo): Dispositivo | undefined => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia) - 1; i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n    if (pai?.pai) {\n      return getProximoArtigoAnterior(pai.pai, referencia.pai!);\n    }\n  }\n  return undefined;\n};\n\nconst buscaArtigoAnteriorAbaixo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (dispositivo === undefined) {\n    return undefined;\n  }\n\n  if (dispositivo.filhos) {\n    for (let i = dispositivo.filhos.length - 1; i >= 0; i--) {\n      const d = dispositivo.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n  }\n  return undefined;\n};\n\nexport const getAgrupadorPosterior = (dispositivo: Dispositivo): Dispositivo => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d))[0];\n};\n\nexport const hasAgrupadoresPosteriores = (dispositivo: Dispositivo): boolean => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d)).length > 0;\n};\n\nexport const hasFilhoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos?.filter(d => isDispositivoGenerico(d)).length > 0;\n};\n\nexport const isUnicoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length === 1;\n};\n\nexport const isUltimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[f.length - 1] === dispositivo;\n};\n\nexport const isPenultimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length > 1 && f[f.length - 2] === dispositivo;\n};\n\nexport const isPrimeiroMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[0] === dispositivo;\n};\n\nexport const hasFilhos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos && dispositivo.filhos.length > 0;\n};\n\nexport const getDispositivoAnterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return pos && pos > 0 ? dispositivo.pai!.filhos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos > 0 ? irmaos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === 0) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index < pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos.pop();\n};\n\n// Diferencia do getDispositivoAnteriorMesmoTipoInclusiveOmissis por identificar dispositivo irmão anterior de omissis\n// [FRAGO] Provavelmente o ideal seria alterar o outro método mas não tive confiança nem tempo para verificar as implicações.\nexport const getIrmaoAnteriorIndependenteDeTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === 0) {\n    return undefined;\n  }\n\n  // A restrição pelo mesmo pai diferencia incisos de caput (e omissis) de parágrafos (e omissis).\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index < pos && f.pai === dispositivo.pai);\n  return irmaos.pop();\n};\n\n// Retorna dispositivo imediatamente anterior na sequência de leitura.\nexport const getDispositivoAnteriorDireto = (d: Dispositivo): Dispositivo => {\n  const pai = d.pai as Dispositivo;\n  const irmaos = getFilhosEstiloLexML(pai);\n  const i = irmaos.indexOf(d);\n  if (i > 0) {\n    d = irmaos[i - 1];\n  } else {\n    return pai;\n  }\n  let filhos = getFilhosEstiloLexML(d);\n  while (filhos.length) {\n    d = filhos[filhos.length - 1];\n    filhos = getFilhosEstiloLexML(d);\n  }\n  return d;\n};\n\nexport const getDispositivoPosterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (!dispositivo.pai) {\n    return undefined;\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return pos < dispositivo.pai!.filhos.length - 1 ? dispositivo.pai!.filhos[pos + 1] : undefined;\n};\n\nexport const getDispositivoPosteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos < irmaos.length - 1 ? irmaos[pos + 1] : undefined;\n};\n\nexport const getDispositivosAnterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index < pos! && f.tipo === dispositivo.tipo && f.pai === dispositivo.pai) ?? [];\n};\n\nexport const getDispositivosPosterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index > pos! && f.tipo === dispositivo.tipo) ?? [];\n};\n\nexport const getDispositivoPosteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === dispositivo.pai!.filhos.length - 1) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index > pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos[0];\n};\n\n// Diferencia do getDispositivoPosteriorMesmoTipoInclusiveOmissis por identificar dispositivo irmão posterior de omissis\n// [FRAGO] Provavelmente o ideal seria alterar o outro método mas não tive confiança nem tempo para verificar as implicações.\nexport const getIrmaoPosteriorIndependenteDeTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === dispositivo.pai!.filhos.length - 1) {\n    return undefined;\n  }\n\n  // A restrição pelo mesmo pai diferencia incisos de caput (e omissis) de parágrafos (e omissis).\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index > pos && f.pai === dispositivo.pai);\n  return irmaos[0];\n};\n\nexport const getDispositivosAnteriores = (dispositivo: Dispositivo, isExclusao = false): Dispositivo[] => {\n  if (isArtigo(dispositivo)) {\n    const articulacao = getArticulacao(dispositivo);\n    const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo);\n    return articulacao.artigos.filter((artigo, index) => index < pos);\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((disp, index) => (isExclusao ? index > pos : index >= pos)).filter(d => dispositivo.tipo === d.tipo);\n};\n\nexport const getDispositivosPosteriores = (dispositivo: Dispositivo, isExclusao = false): Dispositivo[] => {\n  if (isArtigo(dispositivo)) {\n    const articulacao = getArticulacao(dispositivo);\n    const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo);\n    return articulacao.artigos.filter((artigo, index) => index > pos);\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((disp, index) => (isExclusao ? index > pos : index >= pos)).filter(d => dispositivo.tipo === d.tipo);\n};\n\nexport const isArtigoUnico = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const isParagrafoUnico = (dispositivo: Dispositivo): boolean => {\n  return isParagrafo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const getDispositivoCabecaAlteracao = (dispositivo: Dispositivo): Dispositivo => {\n  return dispositivo.cabecaAlteracao || isDispositivoCabecaAlteracao(dispositivo) ? dispositivo : getDispositivoCabecaAlteracao(dispositivo.pai!);\n};\n\nexport const isDispositivoCabecaAlteracao = (dispositivo: Dispositivo): boolean => {\n  return !!dispositivo.pai && isArticulacaoAlteracao(dispositivo.pai);\n};\n\nexport const isAntesDoPrimeiroDispositivoOriginal = (dispositivo: Dispositivo): boolean => {\n  return getDispositivosPosterioresMesmoTipo(dispositivo).filter(d => isOriginal(d) && d.numero === '1').length > 0;\n};\n\nexport const isUltimaAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getDispositivoCabecaAlteracao(dispositivo);\n\n  const lista = getDispositivoAndFilhosAsLista(atual);\n\n  const ultimoLista = lista[lista.length - 1];\n  const dispTeste = isCaput(dispositivo) ? dispositivo.pai! : dispositivo;\n  if (ultimoLista === dispTeste) {\n    if (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !isArticulacaoAlteracao(atual.pai!)) {\n      const proximo = getDispositivoPosteriorNaSequenciaDeLeitura(atual, d => {\n        return isArtigo(d) || isAgrupadorNaoArticulacao(d) || !isDispositivoAlteracao(d);\n      });\n      return !(\n        proximo &&\n        isDispositivoAlteracao(proximo) &&\n        !isArticulacaoAlteracao(proximo.pai!) &&\n        proximo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n      );\n    }\n    return true;\n  }\n\n  return false;\n};\n\nconst buscaDispositivoDeArtigoPosterior = (pai: Dispositivo, index: number): Dispositivo | undefined => {\n  if (pai === undefined || isArtigo(pai)) {\n    return undefined;\n  }\n\n  for (let i = index + 1; i < pai.filhos.length; i++) {\n    const d = pai.filhos[i];\n    if (isDispositivoDeArtigo(d)) {\n      return d;\n    }\n  }\n\n  return buscaDispositivoDeArtigoPosterior(pai.pai!, pai.pai!.indexOf(pai!));\n};\n\nexport const isUltimaEnumeracao = (dispositivo: Dispositivo): boolean => {\n  if (getDispositivoPosterior(dispositivo)) {\n    return false;\n  }\n\n  if (isParagrafo(dispositivo) || !isDispositivoDeArtigo(dispositivo)) {\n    return false;\n  }\n\n  const proximoDispositivoDeArtigo = buscaDispositivoDeArtigoPosterior(dispositivo.pai!, dispositivo.pai!.indexOf(dispositivo));\n\n  if (!proximoDispositivoDeArtigo || isParagrafo(proximoDispositivoDeArtigo)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const hasDispositivosPosterioresAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getArticulacao(dispositivo).pai;\n\n  if (!atual) {\n    return false;\n  }\n\n  const articulacao = getArticulacao(atual!);\n\n  return isUnicoMesmoTipo(atual) || articulacao.indexOfArtigo(atual) < articulacao.artigos.length - 1;\n};\n\n// Verifica se todos os filhos dos tipos (inciso, alínea ou item) estão suprimidos.\nexport const isTodosFilhosTipoEnumeracaoSuprimidos = (dispositivo: Dispositivo): boolean => {\n  if (isAgrupador(dispositivo)) {\n    // Não deveria ser chamado para agrupadores\n    return false;\n  }\n  if (isArtigo(dispositivo)) {\n    // Evita listar parágrafos\n    dispositivo = (dispositivo as Artigo).caput!;\n  }\n  return !getSomenteFilhosDispositivoAsLista([], dispositivo.filhos).some(d => !isSuprimido(d));\n};\n\nexport const isArticulacaoAlteracao = (articulacao: Dispositivo): boolean => {\n  return isArticulacao(articulacao) && articulacao.pai !== undefined;\n};\n\nexport const isDispositivoAlteracao = (dispositivo: Dispositivo): boolean => {\n  const r = !!dispositivo.isDispositivoAlteracao;\n\n  if (r) {\n    return true;\n  }\n\n  try {\n    return getArticulacao(dispositivo).pai !== undefined;\n  } catch (error) {\n    return false;\n  }\n};\n\nexport const podemSerRenumerados = (dispositivos: Dispositivo[]): boolean => {\n  return (\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO).length === dispositivos.length ||\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === dispositivos.length\n  );\n};\n\nexport const getDispositivosAdicionados = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n};\n\nexport const hasDispositivosBySituacao = (dispositivos: Dispositivo[], descricaoSituacao: string): boolean => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === descricaoSituacao).length > 0;\n};\n\nexport const isOriginal = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const isAdicionado = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO;\n};\n\nexport const isModificado = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO;\n};\n\nexport const isSuprimido = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n};\n\nexport const isModificadoOuSuprimido = (dispositivo: Dispositivo): boolean => {\n  return isModificado(dispositivo) || isSuprimido(dispositivo);\n};\n\nexport const getSomenteFilhosDispositivoAsLista = (dispositivos: Dispositivo[], filhos: Dispositivo[]): Dispositivo[] => {\n  filhos?.forEach(f => {\n    dispositivos.push(f);\n    if (hasFilhos(f)) {\n      getSomenteFilhosDispositivoAsLista(dispositivos, f.filhos);\n    }\n  });\n\n  return dispositivos;\n};\n\nexport const getDispositivoAndFilhosAsLista = (dispositivo: Dispositivo): Dispositivo[] => {\n  return buildListaDispositivos(dispositivo, []);\n};\n\nexport const buildListaDispositivos = (dispositivo: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  dispositivos.push(dispositivo);\n  const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n  filhos.length ? filhos.forEach(d => buildListaDispositivos(d, dispositivos)) : undefined;\n  return dispositivos;\n};\n\nexport const percorreHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => void): void => {\n  if (!d) return;\n  visit(d);\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      percorreHierarquiaDispositivos(artigo.caput, visit);\n      if (d.alteracoes) {\n        percorreHierarquiaDispositivos(d.alteracoes, visit);\n      }\n      d.filhos\n        .filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))\n        .forEach(f => {\n          percorreHierarquiaDispositivos(f, visit);\n        });\n    }\n  } else {\n    if (d.alteracoes) {\n      percorreHierarquiaDispositivos(d.alteracoes, visit);\n    }\n    d.filhos.forEach(f => {\n      percorreHierarquiaDispositivos(f, visit);\n    });\n  }\n};\n\nexport const buscaNaHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => any): any => {\n  if (!d) return undefined;\n  let ret = visit(d);\n  if (ret) return ret;\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      ret = buscaNaHierarquiaDispositivos(artigo.caput, visit);\n      if (ret) return ret;\n      if (d.alteracoes) {\n        ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n        if (ret) return ret;\n      }\n      for (const f of d.filhos.filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))) {\n        ret = buscaNaHierarquiaDispositivos(f, visit);\n        if (ret) return ret;\n      }\n    }\n  } else {\n    if (d.alteracoes) {\n      ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n      if (ret) return ret;\n    }\n    for (const f of d.filhos) {\n      ret = buscaNaHierarquiaDispositivos(f, visit);\n      if (ret) return ret;\n    }\n  }\n};\n\nexport const isDispositivoRaiz = (d: Dispositivo): boolean => {\n  return d && !d.pai && d.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const buscaDispositivoById = (articulacao: Articulacao, id: string): Dispositivo | undefined => {\n  if (id === 'ementa') {\n    return articulacao.projetoNorma?.ementa;\n  }\n\n  const idArtigo = extraiIdArtigo(id);\n  let raiz: Dispositivo = articulacao;\n  if (idArtigo) {\n    const artigo = articulacao.artigos.find(a => idArtigo === a.id);\n    if (artigo) {\n      if (id === idArtigo || id === idArtigo + '_cpt') {\n        return artigo;\n      } else {\n        raiz = artigo;\n      }\n    }\n  }\n  return buscaNaHierarquiaDispositivos(raiz, d => {\n    return id === d.id ? d : undefined;\n  });\n};\n\nexport const extraiIdArtigo = (id: string): string | undefined => {\n  const l = /^art\\d+(-\\d+)*/.exec(id);\n  return l?.length ? l[0] : undefined;\n};\n\nexport const isAscendente = (d: Dispositivo, dAscendente: Dispositivo): boolean => {\n  if (!d || !dAscendente) {\n    return false;\n  }\n  let pai = d.pai;\n  while (pai) {\n    if (pai === dAscendente) {\n      return true;\n    }\n    pai = pai.pai;\n  }\n  return false;\n};\n\nexport const isDescendenteDeSuprimido = (d: Dispositivo): boolean => {\n  if (!d) {\n    return false;\n  }\n  let pai = d.pai;\n  while (pai) {\n    if (pai.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return true;\n    }\n    pai = pai.pai;\n  }\n  return false;\n};\n\nexport const verificaNaoPrecisaInformarSituacaoNormaVigente = (d: Dispositivo): boolean => {\n  const parent = isIncisoCaput(d) ? d.pai!.pai : d.pai;\n\n  if (parent === undefined || !isDispositivoAlteracao(d) || d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return true;\n  }\n\n  if (parent.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return false;\n  }\n\n  const paiExisteNaNormaAlterada = (parent.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  if (paiExisteNaNormaAlterada !== undefined && !paiExisteNaNormaAlterada) {\n    return true;\n  }\n\n  return verificaNaoPrecisaInformarSituacaoNormaVigente(parent);\n};\n\n// export const validaOrdemDispositivo = (anterior: Dispositivo, atual: Dispositivo): boolean => {\n//   if (anterior.numero!.indexOf('-') === -1 && atual.numero!.indexOf('-') === -1) {\n//     return +anterior.numero! + 1 === +atual.numero!;\n//   }\n//   const partesA = anterior.numero!.split('-');\n//   const partesB = atual.numero!.split('-');\n\n//   const [numA, ...remainingA] = partesA!;\n//   const [numB, ...remainingB] = partesB!;\n\n//   if (+numA + 1 === +numB) {\n//     return true;\n//   }\n\n//   for (let i = 0; i < 3; i++) {\n//     const rA = i >= remainingA?.length ? 0 : remainingA[i];\n//     for (let j = 0; i < 3; i++) {\n//       const rB = j >= remainingB?.length ? 0 : remainingB[j];\n//       if (+rA === +rB) {\n//         continue;\n//       }\n//       if (+rA + 1 === +rB) {\n//         return true;\n//       }\n//       return false;\n//     }\n//   }\n//   return true;\n// };\n\nexport const validaOrdemDispositivo = (anterior: Dispositivo, atual: Dispositivo): boolean => {\n  if (anterior.numero!.indexOf('-') === -1 && atual.numero!.indexOf('-') === -1) {\n    return +anterior.numero! + 1 === +atual.numero!;\n  }\n\n  const partesA = anterior.numero!.split('-');\n  const partesB = atual.numero!.split('-');\n\n  if (partesB.length > partesA.length) {\n    // dispositivo atual possui mais um nível de sufixo de encaixe\n    const numB = partesB.pop();\n    return partesA.join('-') === partesB.join('-') && numB === '1';\n  } else {\n    if (partesA.length > partesB.length) {\n      // dispositivo atual possui menos um nível de sufixo de encaixe\n      partesA.pop();\n    }\n    const numA = partesA.pop()!;\n    const numB = partesB.pop()!;\n    return partesA.join('-') === partesB.join('-') && +numA + 1 === +numB;\n  }\n};\n\nexport const buscaProximoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (!dispositivo || !dispositivo.pai || isAgrupador(dispositivo.pai!)) {\n    return undefined;\n  }\n\n  const posterior = getDispositivoPosterior(dispositivo);\n\n  if (posterior && isOmissis(posterior)) {\n    return posterior;\n  }\n\n  if (isCaput(dispositivo)) {\n    const p = dispositivo.pai.filhos.filter(f => isParagrafo(f) || isOmissis(f));\n    if (p.length > 0 && isOmissis(p[0])) {\n      return p[0];\n    }\n    return undefined;\n  }\n\n  return dispositivo.pai ? buscaProximoOmissis(dispositivo.pai!) : undefined;\n};\n\nexport const isDispositivoNaNormaAlterada = (dispositivo: Dispositivo): boolean | undefined => {\n  return (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n};\n\nexport const isDispositivoNovoNaNormaAlterada = (dispositivo: Dispositivo): boolean | undefined => {\n  const value = (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  if (!isDispositivoAlteracao(dispositivo) || value === undefined) {\n    return;\n  }\n  const situacoes = [DescricaoSituacao.DISPOSITIVO_ADICIONADO + ''];\n  return situacoes.includes(dispositivo.situacao?.descricaoSituacao) && !value;\n};\n\nexport const podeRenumerarFilhosAutomaticamente = (dispositivo: Dispositivo): boolean => {\n  const d = dispositivo.tipo === 'Caput' ? dispositivo.pai! : dispositivo;\n  return !isDispositivoAlteracao(d) || (isDispositivoNovoNaNormaAlterada(d) ?? false);\n};\n\nexport const podeEditarNotaAlteracao = (dispositivo: Dispositivo): boolean => {\n  const isUltAlteracao = dispositivo.tipo !== 'Articulacao' && isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo);\n  if (!isUltAlteracao) {\n    return false;\n  } else {\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n    return cabecaAlteracao.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  }\n};\n\nexport const isDispositivosSequenciais = (dispositivo1: Dispositivo, dispositivo2: Dispositivo): boolean => {\n  const pos1 = dispositivo1.pai!.indexOf(dispositivo1);\n  const pos2 = dispositivo2.pai!.indexOf(dispositivo2);\n  return pos1 + 1 === pos2;\n};\n\nexport const isDispositivosSequenciaisMesmoPai = (dispositivo1: Dispositivo, dispositivo2: Dispositivo): boolean => {\n  return dispositivo1.pai === dispositivo2.pai && isDispositivosSequenciais(dispositivo1, dispositivo2);\n};\n\n// Retorna o primeiro agrupador de artigo (não articulação) que segue um agrupador de artigo na sequência de leitura\nexport const getProximoAgrupadorAposAgrupador = (d: Dispositivo, ignorarFilhos = false): Dispositivo | undefined => {\n  if (!isAgrupador(d)) {\n    return undefined;\n  }\n  if (!ignorarFilhos) {\n    const filhoAgrupador = d.filhos.find(f => isAgrupadorNaoArticulacao(f));\n    if (filhoAgrupador) {\n      return filhoAgrupador;\n    }\n  }\n  if (d.pai) {\n    const proximoIrmao = getDispositivoPosteriorMesmoTipo(d);\n    if (proximoIrmao) {\n      return proximoIrmao;\n    }\n    return getProximoAgrupadorAposAgrupador(d.pai!, true);\n  }\n  return undefined;\n};\n\n// Retorna o primeiro agrupador de artigo (não articulação) que segue um artigo na sequência contrária de leitura\nexport const getProximoAgrupadorAposArtigo = (art: Artigo): Dispositivo | undefined => {\n  return getProximoAgrupadorAposAgrupador(art.pai!);\n};\n\nexport const getAnteriorAgrupadorAntesAgrupador = (d: Dispositivo, ignorarFilhos = false): Dispositivo | undefined => {\n  if (!isAgrupador(d)) {\n    return undefined;\n  }\n  if (!ignorarFilhos) {\n    const filhoAgrupador = d.filhos.reverse().find(f => isAgrupadorNaoArticulacao(f));\n    if (filhoAgrupador) {\n      return filhoAgrupador;\n    }\n  }\n  if (d.pai) {\n    const anteriorIrmao = getDispositivoAnteriorMesmoTipo(d);\n    if (anteriorIrmao) {\n      return anteriorIrmao;\n    }\n    return getAnteriorAgrupadorAntesAgrupador(d.pai!, true);\n  }\n  return undefined;\n};\n\n// Retorna o primeiro agrupador de artigo (não articulação) que segue um artigo na sequência contrária de leitura\nexport const getAnteriorAgrupadorAntesArtigo = (art: Artigo): Dispositivo | undefined => {\n  return getAnteriorAgrupadorAntesAgrupador(art.pai!);\n};\n\nexport const getTiposAgrupadorArtigoOrdenados = (): string[] => ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'];\n\nexport const getTiposAgrupadorArtigoPermitidosNaArticulacao = (): string[] => ['Parte', 'Livro', 'Titulo', 'Capitulo'];\n\nexport const getTiposAgrupadoresQuePodemSerInseridosDepois = (dispositivo: Dispositivo): string[] => {\n  if (!isAgrupador(dispositivo) && !isArtigo(dispositivo) && !isEmenta(dispositivo)) {\n    return [];\n  }\n\n  if (isDispositivoAlteracao(dispositivo)) {\n    return getTiposAgrupadorArtigoOrdenados();\n  }\n\n  const primeiroAgrupador = getPrimeiroAgrupadorNaArticulacao(dispositivo);\n\n  if (!primeiroAgrupador) {\n    return getTiposAgrupadorArtigoPermitidosNaArticulacao();\n  }\n\n  const agrupadorDepois = getPrimeiroAgrupadorDepois(dispositivo);\n\n  if (!isAgrupador(dispositivo) && agrupadorDepois === primeiroAgrupador) {\n    return [primeiroAgrupador.tipo, getTipoAgrupadorNivelAcima(primeiroAgrupador.tipo)!].filter(Boolean);\n  }\n\n  const agrupadorRef = isAgrupador(dispositivo) ? dispositivo : dispositivo.pai!;\n\n  if (!agrupadorDepois) {\n    return getRangeTiposAgrupador(primeiroAgrupador.tipo, getTipoAgrupadorNivelAbaixo(agrupadorRef.tipo) ?? agrupadorRef.tipo);\n  }\n\n  const tipos = getRangeTiposAgrupador(getTipoAgrupadorNivelAcima(agrupadorDepois.tipo), getTipoAgrupadorNivelAbaixo(agrupadorRef.tipo) ?? agrupadorRef.tipo);\n  const indexPrimeiroAgrupador = getIndexTipoAgrupador(primeiroAgrupador.tipo);\n  return tipos.filter(t => t && getIndexTipoAgrupador(t) >= indexPrimeiroAgrupador);\n};\n\nexport const getTiposAgrupadoresQuePodemSerInseridosAntes = (dispositivo: Dispositivo): string[] => {\n  const result: (string | undefined)[] = [];\n\n  if (isEmenta(dispositivo)) {\n    return [];\n  }\n\n  if (!isAgrupador(dispositivo)) {\n    return getTiposAgrupadoresQuePodemSerInseridosDepois(dispositivo);\n  }\n\n  if (isDispositivoAlteracao(dispositivo)) {\n    return getTiposAgrupadorArtigoOrdenados();\n  }\n\n  result.push(dispositivo.tipo);\n\n  const primeiroAgrupador = getPrimeiroAgrupadorNaArticulacao(dispositivo)!;\n  const tipoAgrupadorNivelAcima = getTipoAgrupadorNivelAcima(dispositivo.tipo);\n  if (!primeiroAgrupador || dispositivo === primeiroAgrupador || getIndexTipoAgrupador(tipoAgrupadorNivelAcima ?? '') >= getIndexTipoAgrupador(primeiroAgrupador.tipo)) {\n    result.push(tipoAgrupadorNivelAcima);\n  }\n\n  const getAgrupadorAntes = (d: Dispositivo): Dispositivo | undefined => {\n    const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d)).filter(isAgrupador);\n    return dispositivos[dispositivos.indexOf(d) - 1];\n  };\n\n  const agrupadorAntes = getAgrupadorAntes(dispositivo);\n  if (agrupadorAntes) {\n    result.push(...getTiposAgrupadoresQuePodemSerInseridosDepois(agrupadorAntes));\n  }\n\n  return [...new Set(result)] as string[];\n};\n\nconst getRangeTiposAgrupador = (tipoInicial = '', tipoFinal = ''): string[] => {\n  return getTiposAgrupadorArtigoOrdenados().slice(getIndexTipoAgrupador(tipoInicial), getIndexTipoAgrupador(tipoFinal) + 1);\n};\n\nconst getIndexTipoAgrupador = (tipo: string): number => {\n  return getTiposAgrupadorArtigoOrdenados().indexOf(tipo);\n};\n\nconst getTipoAgrupadorNivelAcima = (tipoAgrupador: string): string | undefined => {\n  const tiposAgrupadorArtigoOrdenados = getTiposAgrupadorArtigoOrdenados();\n  return tiposAgrupadorArtigoOrdenados[tiposAgrupadorArtigoOrdenados.indexOf(tipoAgrupador) - 1];\n};\n\nconst getTipoAgrupadorNivelAbaixo = (tipoAgrupador: string): string | undefined => {\n  const tiposAgrupadorArtigoOrdenados = getTiposAgrupadorArtigoOrdenados();\n  const index = tiposAgrupadorArtigoOrdenados.indexOf(tipoAgrupador);\n  return index === -1 ? undefined : tiposAgrupadorArtigoOrdenados[index + 1];\n};\n\nexport const getPrimeiroAgrupadorDepois = (d: Dispositivo): Dispositivo | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d));\n  const indexRef = dispositivos.indexOf(d);\n  return dispositivos.filter((d, index) => index > indexRef && isAgrupador(d) && !isArticulacao(d))[0];\n};\n\nexport const getAgrupadorAntes = (d: Dispositivo): Dispositivo | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d));\n  const indexRef = dispositivos.indexOf(d);\n  return dispositivos.filter((d, index) => index < indexRef && isAgrupador(d) && !isArticulacao(d)).reverse()[0];\n};\n\nexport const getPrimeiroAgrupadorNaArticulacao = (d: Dispositivo): Dispositivo | undefined => {\n  return getArticulacao(d).filhos.filter(isAgrupador)[0];\n};\n\nexport const getParagrafosEOmissis = (art: Artigo): Dispositivo[] => {\n  // Os incisos e omissis de incisos de caput são filhos do caput\n  return art.filhos.filter(d => d.pai === art);\n};\n\nexport const hasEmenta = (referencia: Dispositivo): boolean => {\n  return !!getArticulacao(referencia).projetoNorma?.ementa?.texto;\n};\n\nexport const isEmendaArtigoOndeCouber = (referencia: Dispositivo): boolean => {\n  return getDispositivoAndFilhosAsLista(getArticulacao(referencia)).some(\n    d => (d.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER\n  );\n};\n\nexport const findDispositivoByUuid2 = (dispositivo: Dispositivo, uuid2: string): Dispositivo | null => {\n  if (!uuid2) {\n    throw new Error('uuid não foi informado');\n  }\n  return getDispositivoByUuid2(dispositivo, uuid2);\n};\n\nexport function getDispositivoByUuid2(dispositivo: Dispositivo, uuid2: string): Dispositivo | Articulacao | null {\n  if (dispositivo.uuid2 === uuid2) {\n    return dispositivo;\n  } else if (dispositivo.filhos !== null) {\n    let result: any = null;\n\n    const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n\n    for (let i = 0; result === null && i < filhos.length; i++) {\n      result = getDispositivoByUuid2(filhos[i], uuid2);\n    }\n    return result;\n  }\n  return null;\n}\n","import { StringBuilder } from './string-util';\n/**\n * Utilitário para montar uma tag usando o pattern composite. Essa classe foi retirada do livro\n * Refactoring to Patterns\n */\nexport class TagNode {\n  private valores = new Array<any>();\n\n  private atributos = new StringBuilder();\n\n  public constructor(private nome: string) {}\n\n  toString(): string {\n    if (!this.valores.length) {\n      return '<' + this.nome + this.atributos + '/>';\n    }\n    const resultado = new StringBuilder('<' + this.nome + this.atributos + '>');\n    this.valores.forEach(valor => {\n      resultado.append(valor);\n    });\n    resultado.append('</' + this.nome + '>');\n    return resultado.toString();\n  }\n\n  add(valor?: any): TagNode {\n    if (valor) {\n      this.valores.push(valor);\n    }\n    return this;\n  }\n\n  addAtributo(atributo: string, valor?: string): TagNode {\n    this.atributos.append(' ');\n    this.atributos.append(atributo);\n    if (valor) {\n      this.atributos.append('=\"');\n      this.atributos.append(valor);\n      this.atributos.append('\"');\n    }\n    return this;\n  }\n}\n","import { Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo, isOmissis } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\n\nexport class DispositivoComparator {\n  static compare(d1: Dispositivo, d2: Dispositivo): number {\n    if (!d1 || !d2) {\n      throw new Error('Tentativa de comparação de dispositivo nulo.');\n    }\n\n    if (!d1.pai) {\n      return -1;\n    }\n\n    if (!d2.pai) {\n      return 1;\n    }\n\n    const i1 = DispositivoComparator.getIndices(d1);\n    const i2 = DispositivoComparator.getIndices(d2);\n    return DispositivoComparator.comparaIndices(i1, i2);\n  }\n\n  private static getIndices(d: Dispositivo): number[] {\n    const indices: number[] = [];\n\n    // Considera alteração como filha do caput\n    let pai = this.getPaiParaComparacao(d);\n    while (pai) {\n      indices.push(this.getIndexDoFilho(pai, d));\n      d = pai;\n      pai = this.getPaiParaComparacao(d);\n    }\n    indices.reverse();\n\n    return indices;\n  }\n\n  // Considera alteração em artigo como filha do caput\n  private static getPaiParaComparacao(d: Dispositivo): Dispositivo | undefined {\n    if (!d.pai) {\n      return undefined;\n    }\n    if (isArtigo(d.pai!) && isArticulacaoAlteracao(d)) {\n      return (d.pai! as Artigo).caput!;\n    }\n    return d.pai!;\n  }\n\n  private static getIndexDoFilho(pai: Dispositivo, d: Dispositivo): number {\n    if (isCaput(d)) {\n      return 0;\n    }\n    if (isParagrafo(d) || (isOmissis(d) && isArtigo(pai))) {\n      // Após o caput\n      return pai.filhos.indexOf(d) + 1;\n    }\n    if (isArticulacaoAlteracao(d)) {\n      // Antes dos filhos\n      return -1;\n    }\n    return pai.filhos.indexOf(d);\n  }\n\n  private static comparaIndices(indices1: number[], indices2: number[]): number {\n    let ret = 0;\n    const size1 = indices1.length;\n    const size2 = indices2.length;\n    for (let i = 0; i < size1 && i < size2 && ret === 0; i++) {\n      ret = indices1[i] - indices2[i];\n    }\n    if (ret === 0) {\n      ret = size1 - size2;\n    }\n    return ret;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isDispositivoAlteracao } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\n\nexport class DispositivoEmendaUtil {\n  static getAlteracao(dispositivo: Dispositivo): Dispositivo | undefined {\n    let d: Dispositivo | undefined = dispositivo;\n\n    if (d.tipo === TipoDispositivo.alteracao.tipo) {\n      return d;\n    }\n\n    if (!isDispositivoAlteracao(d)) {\n      return undefined;\n    }\n\n    while (d && d.tipo !== TipoDispositivo.alteracao.tipo) {\n      d = d.pai;\n    }\n    return d;\n  }\n\n  static existeNaNormaAlterada(dispositivo: Dispositivo): boolean {\n    return (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  }\n}\n","import { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { TEXTO_OMISSIS } from '../model/lexml/conteudo/textoOmissis';\nimport {\n  getDispositivoAnteriorDireto,\n  getDispositivoPosterior,\n  getFilhosEstiloLexML,\n  isDispositivoNaNormaAlterada,\n  isUltimaAlteracao,\n  percorreHierarquiaDispositivos,\n} from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { removeEspacosDuplicados, StringBuilder } from '../util/string-util';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isAgrupador, isAgrupadorNaoArticulacao, isArtigo, isCaput, isOmissis, isParagrafo } from './../model/dispositivo/tipo';\nimport {\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n  isDispositivoRaiz,\n  buscaNaHierarquiaDispositivos,\n  getIrmaoPosteriorIndependenteDeTipo,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TagNode } from './../util/tag-node';\nimport { DispositivoComparator } from './dispositivo-comparator';\nimport { DispositivoEmendaUtil } from './dispositivo-emenda-util';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class CmdEmdUtil {\n  static getDispositivosNaoOriginais(articulacao: Articulacao): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n\n    if (articulacao.projetoNorma?.ementa?.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n      ret.push(articulacao.projetoNorma.ementa);\n    }\n\n    percorreHierarquiaDispositivos(articulacao, d => {\n      if (d.pai && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        ret.push(d);\n      }\n    });\n    return ret;\n  }\n\n  static getDispositivosAdicionados(articulacao: Articulacao): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n    percorreHierarquiaDispositivos(articulacao, d => {\n      if (d.pai && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        ret.push(d);\n      }\n    });\n    return ret;\n  }\n\n  static getDispositivosComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const dispositivos = new Array<Dispositivo>();\n\n    for (const d of dispositivosEmenda) {\n      if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL || isDispositivoAlteracao(d) || isArticulacaoAlteracao(d)) {\n        continue;\n      }\n      const dispositivoAfetado = CmdEmdUtil.getDispositivoAfetado(d);\n      if (dispositivoAfetado && !dispositivos.includes(dispositivoAfetado)) {\n        dispositivos.push(dispositivoAfetado);\n      }\n    }\n\n    return dispositivos;\n  }\n\n  private static getDispositivoAfetado(d: Dispositivo): Dispositivo {\n    const pai = d.pai!;\n\n    if (isDispositivoRaiz(pai)) {\n      return d;\n    }\n\n    // Verifica alteração integral de caput\n    if (isCaput(pai) && pai.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      if (pai.filhos.find(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL)) {\n        // Não é alteração integral de caput\n        return d;\n      }\n      // É alteração integral de caput\n      return CmdEmdUtil.getDispositivoAfetado(pai.pai!);\n    }\n\n    // O caso de artigos adicionados junto com seu agrupador já foi tratado antes. Ver uso de retiraPrimeirosFilhosAdicionadosAgrupador\n    if (isArtigo(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return d;\n    }\n\n    // Se o pai for uma alteração integral\n    if (CmdEmdUtil.isAlteracaoIntegral(pai)) {\n      // Chama recursivamente para o pai\n      return CmdEmdUtil.getDispositivoAfetado(pai);\n    }\n\n    return d;\n  }\n\n  // Retira da lista de dispositivos os primeiros artigos e agrupadores adicionados, filhos de um agrupador adicionado.\n  // Considera que os dispositivos estejam ordenados\n  static retiraPrimeirosFilhosAdicionadosAgrupador(dispositivos: Dispositivo[]): Dispositivo[] {\n    const primeiro = dispositivos[0];\n    if (isDispositivoAlteracao(primeiro) || primeiro.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return dispositivos;\n    }\n    if (!dispositivos.find(d => isAgrupadorNaoArticulacao(d))) {\n      return dispositivos;\n    }\n    const ret: Dispositivo[] = [];\n    let filhosAdicionadosComAgrupador: Dispositivo[] = [];\n    dispositivos.forEach(d => {\n      if (filhosAdicionadosComAgrupador.indexOf(d) < 0) {\n        ret.push(d);\n        if (isAgrupadorNaoArticulacao(d)) {\n          filhosAdicionadosComAgrupador = this.listaFilhosAdicionadosComAgrupador(d);\n        }\n      }\n    });\n    return ret;\n  }\n\n  private static listaFilhosAdicionadosComAgrupador(d: Dispositivo): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n    buscaNaHierarquiaDispositivos(d, f => {\n      if (f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || isCaput(f) || isArticulacaoAlteracao(f)) {\n        ret.push(f);\n        return false;\n      }\n      return true;\n    });\n    return ret;\n  }\n\n  static getDispositivoAfetadoEmAlteracao(d: Dispositivo): Dispositivo | undefined {\n    if (isOmissis(d)) {\n      if (CmdEmdUtil.isOmissisAdjacenteADispositivoDeEmenda(d)) {\n        return undefined;\n      }\n    } else if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && CmdEmdUtil.isTextoOmitido(d)) {\n      return undefined;\n    }\n\n    const pai = isCaput(d.pai!) ? d.pai!.pai! : d.pai!;\n    // Se o pai for uma alteração integral\n    if (CmdEmdUtil.isAlteracaoIntegralEmAlteracao(pai)) {\n      // Chama recursivamente para o pai\n      return CmdEmdUtil.getDispositivoAfetadoEmAlteracao(pai);\n    }\n\n    return d;\n  }\n\n  // Considero texto omitido do Artigo se o seu caput tiver o texto omitido.\n  static isTextoOmitido(d: Dispositivo): boolean {\n    return isOmissis(d) || d.texto.startsWith(TEXTO_OMISSIS) || (isAgrupador(d) && !!(d as Artigo).caput?.texto.startsWith(TEXTO_OMISSIS));\n  }\n\n  static getDescricaoSituacaoParaComandoEmenda(d: Dispositivo): string {\n    // Trata dispositivo já existente na norma adicionado em bloco de alteração como dispositivo modificado\n    return d.isDispositivoAlteracao && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && DispositivoEmendaUtil.existeNaNormaAlterada(d) && !isOmissis(d)\n      ? DescricaoSituacao.DISPOSITIVO_MODIFICADO\n      : d.situacao.descricaoSituacao;\n  }\n\n  static isMesmaSituacaoParaComandoEmenda(d1: Dispositivo, d2: Dispositivo): boolean {\n    return this.getDescricaoSituacaoParaComandoEmenda(d1) === this.getDescricaoSituacaoParaComandoEmenda(d2);\n  }\n\n  static isAlteracaoIntegral(d: Dispositivo): boolean {\n    const descricaoSituacao = this.getDescricaoSituacaoParaComandoEmenda(d);\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return false;\n    }\n\n    if (isDispositivoAlteracao(d) && isAgrupadorNaoArticulacao(d) && descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return false;\n    }\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return true;\n    }\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return !isAgrupadorNaoArticulacao(d);\n    }\n\n    if (!d.filhos.length) {\n      if (isArtigo(d)) {\n        return descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n      }\n      return true;\n    }\n\n    for (const filho of d.filhos) {\n      if (!CmdEmdUtil.isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static isAlteracaoIntegralEmAlteracao(d: Dispositivo): boolean {\n    if (isArticulacaoAlteracao(d)) {\n      return false;\n    }\n\n    if (isAgrupadorNaoArticulacao(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return false;\n    }\n\n    return (\n      (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !CmdEmdUtil.isTextoOmitido(d)) ||\n      d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n    );\n  }\n\n  static getArvoreDispositivos(dispositivos: Dispositivo[]): Map<Dispositivo, any> {\n    const mapa = new Map<Dispositivo, any>();\n\n    if (!dispositivos.length) {\n      return mapa;\n    }\n\n    dispositivos.forEach(dispositivo => {\n      this.atualizaMapa(dispositivo, mapa);\n    });\n\n    return mapa;\n  }\n\n  private static atualizaMapa(dispositivo: Dispositivo, mapa: Map<Dispositivo, any>): void {\n    const hierarquia = this.getHierarquiaDispositivosDeUmDispositivo(dispositivo);\n    let mapaAtual = mapa;\n\n    hierarquia.forEach(dispositivoAtual => {\n      const mapaFilho = mapaAtual.get(dispositivoAtual) as Map<Dispositivo, any>;\n      if (mapaFilho) {\n        mapaAtual = mapaFilho;\n      } else {\n        const novoMapa = new Map<Dispositivo, any>();\n        mapaAtual.set(dispositivoAtual, novoMapa);\n        mapaAtual = novoMapa;\n      }\n    });\n  }\n\n  private static getHierarquiaDispositivosDeUmDispositivo(dispositivo: Dispositivo): Dispositivo[] {\n    const hierarquia = new Array<Dispositivo>();\n    hierarquia.push(dispositivo);\n\n    let pai = dispositivo.pai;\n    while (pai && !isDispositivoRaiz(pai) && (!isAgrupadorNaoArticulacao(pai) || isDispositivoNaNormaAlterada(pai))) {\n      hierarquia.push(pai);\n      pai = pai.pai;\n    }\n    hierarquia.reverse();\n\n    return hierarquia;\n  }\n\n  static getArvoreDispositivosDeAlteracaoDeNorma(dispositivos: Dispositivo[]): Map<Dispositivo, any> {\n    const mapa = new Map<Dispositivo, any>();\n\n    if (!dispositivos.length) {\n      return mapa;\n    }\n\n    for (const dispositivo of dispositivos) {\n      this.atualizaMapaDeAlteracaoDeNorma(dispositivo, mapa);\n    }\n\n    return mapa;\n  }\n\n  static atualizaMapaDeAlteracaoDeNorma(dispositivo: Dispositivo, mapa: Map<Dispositivo, any>): void {\n    const hierarquia = this.getHierarquiaDispositivosDeUmDispositivo(dispositivo);\n    let mapaAtual = mapa;\n\n    for (const dispositivoAtual of hierarquia) {\n      if (!isDispositivoAlteracao(dispositivoAtual) || isArticulacaoAlteracao(dispositivoAtual)) {\n        continue;\n      }\n\n      if (mapaAtual.has(dispositivoAtual)) {\n        mapaAtual = mapaAtual.get(dispositivoAtual);\n      } else {\n        const novoMapa = new Map<Dispositivo, any>();\n        mapaAtual.set(dispositivoAtual, novoMapa);\n        mapaAtual = novoMapa;\n      }\n    }\n    mapa = mapaAtual;\n  }\n\n  // public static List<Dispositivo> filtraDispositivosModificados(final List<Dispositivo> dispositivos) {\n\n  //     List<Dispositivo> ret = new ArrayList<Dispositivo>();\n\n  //     // No caso de dispositivo modificado pode ocorrer o caso de alteração integral de artigo,\n  //     // onde o próprio artigo não está marcado como modificado.\n  //     for (Dispositivo d : dispositivos) {\n  //         if (d.isSituacao(DispositivoModificado.class) || d.isSituacao(DispositivoOriginal.class)\n  //             && CmdEmdUtil.isAlteracaoIntegral(d)) {\n  //             ret.add(d);\n  //         }\n  //     }\n\n  //     return ret;\n  // }\n\n  static isSequenciasPlural(sequencias: SequenciaRangeDispositivos[]): boolean {\n    const qtdSequencias = sequencias.length;\n    if (qtdSequencias === 0) {\n      return false;\n    }\n    return qtdSequencias > 1 || CmdEmdUtil.isSequenciaPlural(sequencias[0]);\n  }\n\n  static isSequenciaPlural(sequencia: SequenciaRangeDispositivos): boolean {\n    const qtdRanges = sequencia.getQuantidadeRanges();\n    if (qtdRanges === 0) {\n      return false;\n    }\n    return qtdRanges > 1 || sequencia.getPrimeiroRange().getQuantidadeDispositivos() > 1;\n  }\n\n  static getProximoAgrupador(disp: Dispositivo): Dispositivo | undefined {\n    let ret: Dispositivo | undefined = disp;\n    do {\n      ret = getDispositivoPosterior(ret as Dispositivo);\n    } while (ret && !isAgrupador(ret));\n    return ret;\n  }\n\n  static getDispositivoIrmaoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    if (isArtigo(dispositivo) || isAgrupador(dispositivo)) {\n      return this.getArtigoPosterior(dispositivo);\n    }\n    if (!this.isUltimoDispositivoDoMesmoTipo(dispositivo)) {\n      const pai = dispositivo.pai as Dispositivo;\n      const index = pai.filhos.indexOf(dispositivo) + 1;\n      return pai.filhos[index];\n    }\n    return undefined;\n  }\n\n  private static getArtigoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    const pai = dispositivo.pai as Dispositivo;\n    if (pai.filhos.length) {\n      const iFilho = pai.filhos.indexOf(dispositivo);\n      for (let i = iFilho + 1; i < pai.filhos.length; i++) {\n        const d = pai.filhos[i];\n        if (isArtigo(d)) {\n          return d;\n        } else if (isAgrupador(d)) {\n          const atual = this.buscaProximoArtigo(d);\n          if (atual) {\n            return atual;\n          }\n        }\n      }\n      if (pai.pai) {\n        return this.getArtigoPosterior(pai);\n      }\n    }\n\n    return undefined;\n  }\n\n  private static buscaProximoArtigo(dispositivo: Dispositivo): Dispositivo | undefined {\n    const filhos = dispositivo.filhos;\n    for (const d of filhos) {\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return this.buscaProximoArtigo(d);\n      }\n    }\n    return undefined;\n  }\n\n  public static isUltimoDispositivoDoMesmoTipo(dispositivo: Dispositivo): boolean {\n    if (!dispositivo.pai) {\n      return true;\n    }\n    const pai = dispositivo.pai as Dispositivo;\n    const index = pai.filhos.indexOf(dispositivo);\n    if (pai.filhos.length === index + 1) {\n      return true;\n    }\n    if (pai.filhos[index + 1].tipo === dispositivo.tipo) {\n      return false;\n    }\n    return true;\n  }\n\n  // TODO Alterar referências a este método para função na hierarquiaUtil e excluir o método\n  static getFilhosEstiloLexML(d: Dispositivo): Dispositivo[] {\n    return getFilhosEstiloLexML(d);\n  }\n\n  // TODO Alterar referências a este método para função na hierarquiaUtil e excluir o método\n  static getDispositivoAnteriorDireto(d: Dispositivo): Dispositivo {\n    return getDispositivoAnteriorDireto(d);\n  }\n\n  static getDispositivoPosteriorDireto(d: Dispositivo): Dispositivo | undefined {\n    // primeiro o primeiro filho ou o primeiro irmão do pai (recursivamente)\n    const filhos = this.getFilhosEstiloLexML(d);\n    if (filhos.length) {\n      return filhos[0];\n    } else {\n      return this.getProximoIrmaoRecursivo(d);\n    }\n  }\n\n  private static getProximoIrmaoRecursivo(d: Dispositivo | undefined): Dispositivo | undefined {\n    if (!d) return;\n\n    const irmao = getDispositivoPosterior(d);\n\n    if (irmao) {\n      return irmao;\n    } else {\n      const pai = d.pai;\n      return pai ? undefined : this.getProximoIrmaoRecursivo(pai);\n    }\n  }\n\n  // /**\n  //  * Retorna rótulo do dispositivo gerado pelo numerador. Não confia no rótulo informado pelo\n  //  * dispositivo original.\n  //  */\n  // public static String getRotulo(final Dispositivo d) {\n  //     return d.getNumeradorDispositivo().getRotulo(d);\n  // }\n\n  static getRotuloPais(disp: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    let pai: Dispositivo;\n    while (disp && !isArtigo(disp)) {\n      pai = disp.pai!;\n      sb.append(pai.pronomePossessivoSingular);\n      sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(disp));\n      disp = pai;\n    }\n\n    return sb.toString();\n  }\n\n  static getDispositivosNaAlteracaoParaComando(alteracao: Dispositivo): Dispositivo[] {\n    const dispositivosAlterados = new Array<Dispositivo>();\n    percorreHierarquiaDispositivos(alteracao, d => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        dispositivosAlterados.push(d);\n      }\n    });\n\n    const dispositivos = new Array<Dispositivo>();\n    dispositivosAlterados.forEach(d => {\n      const dispositivoAfetado = CmdEmdUtil.getDispositivoAfetadoEmAlteracao(d);\n      if (dispositivoAfetado && !dispositivos.includes(dispositivoAfetado)) {\n        dispositivos.push(dispositivoAfetado);\n      }\n    });\n\n    dispositivos.sort(DispositivoComparator.compare);\n\n    return dispositivos;\n  }\n\n  static isOmissisAdjacenteADispositivoDeEmenda(d: Dispositivo): boolean {\n    if (!isOmissis(d)) {\n      return false;\n    }\n    let anterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n    if (isCaput(anterior)) {\n      anterior = anterior.pai!;\n    }\n    if (anterior && anterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return true;\n    }\n    const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n    if (posterior && posterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return true;\n    }\n    return false;\n  }\n\n  static isMesmoTipoParaComandoEmenda(d1: Dispositivo, d2: Dispositivo): boolean {\n    if (d1.tipo !== d2.tipo) {\n      return false;\n    }\n    if (isArtigo(d1) && CmdEmdUtil.isAlteracaoIntegral(d1) !== CmdEmdUtil.isAlteracaoIntegral(d2)) {\n      return false;\n    }\n    return true;\n  }\n\n  static getTextoDoDispositivoOuOmissis(d: Dispositivo, alteracaoNormaVigente = false): string {\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO || isCaput(d)) {\n      return ' ' + CmdEmdUtil.trataTextoParaCitacao(d, alteracaoNormaVigente);\n    } else if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return isOmissis(d) ? ' (Suprimir linha pontilhada)' : ' (Suprimir)';\n    } else {\n      return ' ' + new TagNode('Omissis');\n    }\n  }\n\n  static trataTextoParaCitacao(d: Dispositivo, alteracaoNormaVigente = false): string {\n    let texto = isArtigo(d) ? (d as Artigo).caput!.texto : d.texto ?? '';\n    if (texto.includes(TEXTO_OMISSIS)) {\n      texto = texto.replace(TEXTO_OMISSIS, new TagNode('Omissis').toString());\n    }\n    if (alteracaoNormaVigente) {\n      texto = texto.replace(/”( *(?:\\(NR\\)) *)?/, '');\n    } else {\n      texto = texto.replace(/”( *(?:\\(NR\\)) *)?/, '’$1 ');\n    }\n    return texto\n      .trim()\n      .replace(/\\s{2,}/g, ' ')\n      .replace(/^<p>\\s?/i, '')\n      .replace(/\\s?<\\/p>$/i, '')\n      .replace(/<\\/?a.*?>/gi, '')\n      .replace(/\\s([\\\\.,:?!])/g, '$1');\n  }\n\n  static isFechaAspas(d: Dispositivo): boolean {\n    return isUltimaAlteracao(d);\n  }\n\n  // Considera que dispositivosAdicionadosProposicao é uma lista de dispositivos adicionados à proposição\n  // e que não contém dispositivos adicionados em bloco de alteração.\n  // Podem ser utilizados apenas os dispositivos raiz em um grupo de dispositivos adicionados.\n  static verificaNecessidadeRenumeracaoRedacaoFinal(dispositivosAdicionadosProposicao: Dispositivo[]): boolean {\n    for (const d of dispositivosAdicionadosProposicao) {\n      if (CmdEmdUtil.implicaEmRenumeracaoRedacaoFinal(d)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Testa características do dispositivo (considerado fora de bloco de alteração) que implicam\n  // em necessidade de renumeração na redação final.\n  static implicaEmRenumeracaoRedacaoFinal(d: Dispositivo): boolean {\n    // rótulo 0 (zero) ou possui sufixo de encaixe (-A, -B...)\n    if (d.rotulo && (d.numero === '0' || /.*(?:-\\d).*/i.test(d.rotulo))) {\n      return true;\n    }\n    // adjacente a parágrafo ou artigo único\n    if (isArtigo(d) || isParagrafo(d)) {\n      // Se o dispositivo tiver sido adicionado antes do único cairá no caso anterior de rótulo com 0 (zero)\n      // Não é possível testar pelo rótulo porque o parágrafo único está sendo renumerado.\n      if (irmaosMesmoTipo(d).filter(i => i.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL).length === 1) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static normalizaCabecalhoComandoEmenda(texto: string): string {\n    return removeEspacosDuplicados(texto.replace(/caput/g, '<i>caput</i>'));\n  }\n\n  /*\n  Dados dois agrupadores adicionados, verifica se são sequenciais e não existe artigo ou agrupador não adicionado entre eles.\n  */\n  static verificaAgrupadoresAdicionadosEmSequencia(a1: Dispositivo, a2: Dispositivo): boolean {\n    if (!isAgrupadorNaoArticulacao(a1) && !isAgrupadorNaoArticulacao(a2)) {\n      return false;\n    }\n    const filhoNaoAdicionado = this.getFilhoNaoAdicionadoDeAgrupadorAdicionado(a1);\n    return !filhoNaoAdicionado && getIrmaoPosteriorIndependenteDeTipo(a1) === a2;\n  }\n\n  /*\n  Dado um agrupador adicionado retorna o primeiro artigo ou agrupador em sua hierarquia que não seja adicionado.\n  Retorna undefined se todos forem adicionados.\n  */\n  static getFilhoNaoAdicionadoDeAgrupadorAdicionado(agrupador: Dispositivo): Dispositivo | undefined {\n    return buscaNaHierarquiaDispositivos(agrupador, f => {\n      return (isArtigo(f) || isAgrupadorNaoArticulacao(f)) && f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO ? f : undefined;\n    });\n  }\n}\n","// Tipo string para salvar o nome em vez do índice\nexport enum TipoMensagem {\n  INFO = 'INFO',\n  WARNING = 'WARNING',\n  ERROR = 'ERROR',\n}\n\nexport enum AutoFix {\n  INFORMAR_NORMA = 'É necessário informar a norma a ser alterada',\n  OMISSIS_ANTES = `É necessário uma linha pontilhada antes deste dispositivo`,\n  OMISSIS_SEQUENCIAIS = `Não pode haver mais de uma linha pontilhada sequencialmente`,\n  RENUMERAR_DISPOSITIVO = 'Numere o dispositivo',\n}\n\nexport interface Mensagem {\n  tipo: TipoMensagem;\n  descricao?: string;\n  detalhe?: any;\n  fix?: any;\n  nomeEvento?: string;\n}\n\nexport interface MensagemErro extends Mensagem {\n  tipo: TipoMensagem.ERROR;\n}\n","import { addSpaceRegex, endsWithWord, escapeRegex } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nexport const hasIndicativoDesdobramento = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_DESDOBRAMENTO ?? []);\n};\n\nexport const hasIndicativoFinalSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_FIM_SEQUENCIA ?? []);\n};\n\nexport const hasIndicativoContinuacaoSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_SEQUENCIA ?? []);\n};\n\nexport const TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO = TEXTO_OMISSIS; // + '.” (NR)';\n\nexport const hasIndicativoInicioAlteracao = (texto: string): boolean => {\n  return (\n    new RegExp(addSpaceRegex(escapeRegex('o seguinte acréscimo:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('os seguintes acréscimos:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com a seguinte alteração:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com as seguintes alterações:')) + '\\\\s*$').test(texto)\n  );\n};\n\nexport const normalizaSeForOmissis = (texto: string): string => {\n  if (/^[.]*(?:\\s*)[\"”“]?(\\s*)?\\(NR\\)\\s*$/.test(texto)) {\n    return TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO;\n  }\n\n  if (/[\"”]?(\\s*)?\\(NR\\)?\\s*$/.test(texto)) {\n    return texto.replace(/[\"“](?!.*[\"”])/, '”');\n  }\n\n  if (texto === TEXTO_OMISSIS || texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || !new RegExp('^[.]+$').test(texto)) {\n    return texto;\n  }\n\n  return TEXTO_OMISSIS;\n};\n\nexport const hasIndicativoFimAlteracao = (texto: string): boolean => {\n  return /\\.[\"”](?:\\s*\\(NR\\))\\s*$/.test(texto);\n};\n","import { CmdEmdUtil } from '../../../emenda/comando-emenda-util';\nimport { containsTags, converteIndicadorParaTexto, endsWithPunctuation, getTextoSemHtml, isValidHTML } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoDeArtigo, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport {\n  getDispositivoCabecaAlteracao,\n  getDispositivoPosterior,\n  getDispositivoPosteriorNaSequenciaDeLeitura,\n  hasFilhoGenerico,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isTodosFilhosTipoEnumeracaoSuprimidos,\n  isUltimaEnumeracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport {\n  hasIndicativoContinuacaoSequencia,\n  hasIndicativoDesdobramento,\n  hasIndicativoFinalSequencia,\n  hasIndicativoInicioAlteracao,\n  TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO,\n} from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nconst hasCitacaoAoFinalFrase = (texto: string): boolean => {\n  return texto !== undefined && /.*:[\\s]{1,2}[\"”“].*[.][\"”“]$/.test(texto);\n};\n\nexport const validaTextoAgrupador = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (!isArticulacao(dispositivo) && (!dispositivo.texto || dispositivo.texto.trim().length === 0)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Não foi informado um texto para ${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && endsWithPunctuation(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Não pode haver sinal de pontuação ao final do texto d${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && containsTags(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Texto d${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()} não pode possuir formatação.`);\n  }\n  return mensagens;\n};\n\nexport const validaTextoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  //\n  // validações comuns a dispositivos de texto\n  //\n  if ((!isArticulacao(dispositivo) && !dispositivo.texto) || dispositivo.texto.trim().length === 0) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Não foi informado um texto para ${dispositivo.artigoDefinido + ' ' + dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && !isValidHTML(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, 'O conteúdo do dispositivo não é um HTML válido.');\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && dispositivo.texto.trim().length > 500) {\n    addMensagem(mensagens, TipoMensagem.WARNING, `Pelo princípio da concisão, o texto dos dispositivos não deve ser extenso, devendo ser utilizadas frases curtas e concisas.`);\n  }\n\n  // Verifica se o texto tem r$ (com letra minuscula)\n  if (dispositivo.texto && dispositivo.texto.indexOf('r$') !== -1) {\n    addMensagem(mensagens, TipoMensagem.WARNING, `O texto do dispositivo possui r$ (real brasileiro) com letra minúscula. Deveria ser R$ com letra maiúscula.`);\n  }\n\n  //\n  // validações comuns a dispositivos de artigo\n  //\n  if (\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    /^[A-ZÀ-Ú]/.test(getTextoSemHtml(dispositivo.texto)) &&\n    dispositivo.texto.indexOf('R$') !== 0\n  ) {\n    addMensagem(\n      mensagens,\n      TipoMensagem.WARNING,\n      `${dispositivo.descricao} deveria iniciar com letra minúscula, a não ser que se trate de uma situação especial, como nome próprio.`\n    );\n  }\n\n  if (\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !isUltimaEnumeracao(dispositivo) &&\n    dispositivo.INDICADOR_SEQUENCIA !== undefined &&\n    !hasIndicativoContinuacaoSequencia(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ponto e vírgula.`);\n  }\n\n  //\n  // validações comuns a Artigo e Parágrafo\n  //\n  if (\n    (isArtigo(dispositivo) || isParagrafo(dispositivo)) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !/^[...]{3,}/.test(dispositivo.texto) &&\n    !/^[A-ZÀ-Ú]/.test(getTextoSemHtml(dispositivo.texto))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria iniciar com letra maiúscula.`);\n  }\n\n  //\n  // validações de dispositivos que não sejam de alteração\n  //\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    ((!isArtigo(dispositivo) && hasFilhos(dispositivo)) || (isArtigo(dispositivo) && hasFilhos((dispositivo as Artigo).caput!))) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  // dispositivos de artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    isUltimaEnumeracao(dispositivo) &&\n    !hasIndicativoFinalSequencia(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Último dispositivo de uma sequência deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}.`);\n  }\n\n  // Artigo e Parágrafo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigo(dispositivo) || isParagrafo(dispositivo)) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !dispositivo.alteracoes &&\n    !hasIndicativoContinuacaoSequencia(dispositivo) &&\n    !hasCitacaoAoFinalFrase(dispositivo.texto)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  // Artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    dispositivo.hasAlteracao() &&\n    !hasIndicativoDesdobramento(dispositivo) &&\n    !hasIndicativoInicioAlteracao(dispositivo.texto)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !dispositivo.alteracoes &&\n    (!hasFilhos(dispositivo) || !hasFilhos((dispositivo as Artigo).caput!)) &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  if (\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || !hasFilhos((dispositivo as Artigo).caput!)) &&\n    dispositivo.alteracoes &&\n    !dispositivo.hasAlteracao() &&\n    hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria informar alterações propostas.`);\n  }\n\n  if (!isDispositivoAlteracao(dispositivo) && isArtigo(dispositivo) && dispositivo.hasAlteracao() && !dispositivo.alteracoes?.base) {\n    addMensagem(mensagens, TipoMensagem.ERROR, AutoFix.INFORMAR_NORMA, true);\n  }\n\n  //\n  // Validações de dispositivos de alteração\n  //\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !isArtigo(dispositivo) &&\n    hasFilhos(dispositivo) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    isArtigo(dispositivo) &&\n    hasFilhos((dispositivo as Artigo).caput!) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    hasIndicativoDesdobramento(dispositivo) &&\n    ((isArtigo(dispositivo) && !hasFilhos((dispositivo as Artigo).caput!)) || !hasFilhos(dispositivo))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} não deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !hasFilhos(dispositivo) &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    !isUltimoMesmoTipo(dispositivo) &&\n    !hasIndicativoContinuacaoSequencia(dispositivo) &&\n    (!getDispositivoPosterior(dispositivo) || !isOmissis(getDispositivoPosterior(dispositivo)!))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo === getDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.filhos.length === 0 &&\n    (dispositivo.texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || dispositivo.texto.indexOf(TEXTO_OMISSIS) >= 0)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Não foi informada nenhuma alteração.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !hasIndicativoFinalSequencia(dispositivo) &&\n    //isUltimaAlteracao(dispositivo) &&\n    isUltimaEnumeracao(dispositivo) &&\n    !isSeguidoDeOmissis(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Último dispositivo de uma sequência deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}.`);\n  }\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    (dispositivo.situacao as DispositivoAdicionado).tipoEmenda !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n    dispositivo.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    const dispositivos = [] as any;\n    dispositivos.push(dispositivo);\n\n    if (CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(dispositivos)) {\n      if (localStorage.getItem('naoMostrarExplicacaoSufixo') === null) {\n        addMensagem(mensagens, TipoMensagem.WARNING, `Como interpretar sufixos (-1, -2,...)?`, undefined, 'onmodalsufixos');\n      }\n    }\n  }\n\n  return [...new Set(mensagens)];\n};\n\nconst isSeguidoDeOmissis = (dispositivo: Dispositivo): boolean => {\n  const proximo = getDispositivoPosteriorNaSequenciaDeLeitura(dispositivo);\n\n  if (proximo !== undefined) {\n    return proximo.tipo === TipoDispositivo.omissis.name;\n  }\n\n  return false;\n};\n\nconst addMensagem = (mensagens: Mensagem[], tipo: TipoMensagem, descricao: string | AutoFix, fix?: boolean, nomeEvento = ''): void => {\n  const existe = mensagens.filter(m => m.descricao === descricao).length > 0;\n  if (!existe) {\n    if (fix === undefined) {\n      mensagens.push({ tipo, descricao, nomeEvento });\n    } else {\n      mensagens.push({ tipo, descricao, fix });\n    }\n  }\n};\n\nexport const validaTexto = (dispositivo: Dispositivo): Mensagem[] => {\n  return isAgrupador(dispositivo) ? validaTextoAgrupador(dispositivo) : validaTextoDispositivo(dispositivo);\n};\n","export enum TipoGenero {\n  MASCULINO = 'masculino',\n  FEMININO = 'feminino',\n  INDEFINIDO = 'indefinido',\n}\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nexport interface Genero {\n  tipoGenero: string;\n  artigoDefinido: string;\n  pronomePossessivoSingular: string;\n  pronomePossessivoPlural: string;\n  artigoDefinidoSingular: string;\n  artigoDefinidoPlural: string;\n  artigoIndefinidoSingular: string;\n  artigoDefinidoPrecedidoPreposicaoASingular: string;\n  artigoDefinidoPrecedidoPreposicaoAPlural: string;\n  contracaoEmArtigoDefinidoSingular: string;\n}\n\nexport function GeneroFeminino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'feminino';\n    artigoDefinido = 'a';\n    pronomePossessivoSingular = ' da ';\n    pronomePossessivoPlural = ' das ';\n    artigoDefinidoSingular = ' a ';\n    artigoDefinidoPlural = ' as ';\n    artigoIndefinidoSingular = ' uma ';\n    artigoDefinidoPrecedidoPreposicaoASingular = ' à ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' às ';\n    contracaoEmArtigoDefinidoSingular = ' na ';\n  };\n}\n\nexport function GeneroIndefinido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'indefinido';\n    artigoDefinido = '';\n    pronomePossessivoSingular = '';\n    pronomePossessivoPlural = '';\n    artigoDefinidoSingular = '';\n    artigoDefinidoPlural = '';\n    artigoIndefinidoSingular = '';\n    artigoDefinidoPrecedidoPreposicaoASingular = '';\n    artigoDefinidoPrecedidoPreposicaoAPlural = '';\n    contracaoEmArtigoDefinidoSingular = '';\n  };\n}\n\nexport function GeneroMasculino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'masculino';\n    artigoDefinido = 'o';\n    pronomePossessivoSingular = ' do ';\n    pronomePossessivoPlural = ' dos ';\n    artigoDefinidoSingular = ' o ';\n    artigoDefinidoPlural = ' os ';\n    artigoIndefinidoSingular = ' um ';\n    artigoDefinidoPrecedidoPreposicaoASingular = ' ao ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' aos ';\n    contracaoEmArtigoDefinidoSingular = ' no ';\n  };\n}\n\nexport const generoFeminino = new (GeneroFeminino(Object))();\nexport const generoMasculino = new (GeneroMasculino(Object))();\nexport const generoIndefinido = new (GeneroIndefinido(Object))();\n\nexport const generoFromLetra = (letraGenero: string): Genero => {\n  return letraGenero === 'F' ? generoFeminino : letraGenero === 'M' ? generoMasculino : generoIndefinido;\n};\n\nexport class NomeComGenero {\n  genero: Genero;\n\n  constructor(public nome: string, genero: string | Genero) {\n    this.genero = typeof genero === 'string' ? generoFromLetra(genero as string) : (genero as Genero);\n  }\n}\n","export const VOCABULARIO = {\n  autoridades: [\n    {\n      urn: 'federal',\n      descricao: 'Federal',\n    },\n    {\n      urn: 'senado.federal',\n      descricao: 'Senado Federal',\n    },\n    {\n      urn: 'congresso.nacional',\n      descricao: 'Congresso Nacional',\n    },\n  ],\n  tiposDocumento: [\n    {\n      urn: 'lei',\n      descricao: 'Lei',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.complementar',\n      descricao: 'Lei Complementar',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.delegada',\n      descricao: 'Lei Delegada',\n      genero: 'F',\n    },\n    {\n      urn: 'decreto.legislativo',\n      descricao: 'Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto.lei',\n      descricao: 'Decreto-Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto',\n      descricao: 'Decreto',\n      genero: 'M',\n    },\n    {\n      urn: 'consolidacao.leis.trabalho',\n      descricao: 'Consolidação das Leis do Trabalho',\n      genero: 'F',\n    },\n    {\n      urn: 'resolucao',\n      descricao: 'Resolução',\n      genero: 'F',\n    },\n    {\n      urn: 'regimento.interno',\n      descricao: 'Regimento Interno',\n      genero: 'M',\n    },\n    {\n      urn: 'constituicao',\n      descricao: 'Constituição',\n      genero: 'F',\n    },\n    {\n      urn: 'ato.disposicoes.constitucionais.transitorias',\n      descricao: 'Ato das Disposições Constitucionais Transitórias',\n      genero: 'M',\n    },\n    {\n      urn: 'medida.provisoria',\n      descricao: 'Medida Provisória',\n      genero: 'F',\n    },\n    {\n      urn: 'medida.provisoria;mpv',\n      descricao: 'Medida Provisória',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional',\n      descricao: 'Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional.revisao',\n      descricao: 'Emenda Constitucional de Revisão',\n      genero: 'F',\n    },\n    {\n      urn: 'proposta.emenda.constitucional;pec',\n      descricao: 'Proposta de Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'projeto.lei;pl',\n      descricao: 'Projeto de Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;pls',\n      descricao: 'Projeto de Lei do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plp',\n      descricao: 'Projeto de Lei Complementar',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;pls',\n      descricao: 'Projeto de Lei Complementar do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;plc',\n      descricao: 'Projeto de Lei da Câmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plc',\n      descricao: 'Projeto de Lei Complementar da Câmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.conversao;plv',\n      descricao: 'Projeto de Lei de Conversão',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.resolucao;prs',\n      descricao: 'Projeto de Resolução do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pds',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pdl',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'substitutivo.projeto.lei.senado;scd',\n      descricao: 'Substitutivo da Câmara dos Deputados',\n      genero: 'M',\n    },\n    {\n      urn: 'emenda.projeto.lei.senado;ecd',\n      descricao: 'Emenda(s) da Câmara dos Deputados',\n      genero: 'F',\n    },\n  ],\n  fakeUrns: [\n    {\n      sigla: 'PEC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'proposta.emenda.constitucional;pec',\n    },\n    {\n      sigla: 'PL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pl',\n    },\n    {\n      sigla: 'PLS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pls',\n    },\n    {\n      sigla: 'PLP',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.complementar;plp',\n    },\n    {\n      sigla: 'PLC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;plc',\n    },\n    {\n      sigla: 'PLV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.conversao;plv',\n    },\n    {\n      sigla: 'PRS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.resolucao;prs',\n    },\n    {\n      sigla: 'PDS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pds',\n    },\n    {\n      sigla: 'PDL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pdl',\n    },\n    {\n      sigla: 'SCD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'substitutivo.projeto.lei.senado;scd',\n    },\n    {\n      sigla: 'ECD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'emenda.projeto.lei.senado;ecd',\n    },\n    {\n      sigla: 'MPV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'medida.provisoria;mpv',\n    },\n  ],\n  siglas: [\n    {\n      urnAutoridade: 'federal',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLN',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.senado.federal',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'camara.deputados',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLC',\n    },\n  ],\n  atalhosUrn: [\n    {\n      urnTipoDocumento: 'constituicao',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:constituicao:1988-10-05;1988',\n      nome: 'Constituição Federal',\n    },\n    {\n      urnTipoDocumento: 'ato.disposicoes.constitucionais.transitorias',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988',\n      nome: 'Ato das Disposições Constitucionais Transitórias - ADCT',\n    },\n    {\n      urnTipoDocumento: 'consolidacao.leis.trabalho',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:decreto.lei:1943-05-01;5452',\n      nome: 'Consolidação das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei nº 5.452, de 1º de maio de 1943',\n      genero: 'F',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'senado.federal',\n      urn: 'urn:lex:br:senado.federal:resolucao:1970-11-27;93',\n      nome: 'Regimento Interno do Senado Federal',\n      genero: 'M',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'congresso.nacional',\n      urn: 'urn:lex:br:congresso.nacional:resolucao:1970-08-11;1',\n      nome: 'Regimento Comum do Congresso Nacional',\n      genero: 'M',\n    },\n  ],\n  eventos: [\n    {\n      urn: 'leitura',\n      tipoTextoProcessoLegislativo: 'Texto inicial',\n      genero: 'M',\n    },\n    {\n      urn: 'aprovacao.substitutivo.decisao.terminativa',\n      tipoTextoProcessoLegislativo: 'Redação do vencido em turno suplementar na Comissão',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'aprovacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Redação do vencido em turno suplementar no Plenário',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'apresentacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Texto do substitutivo',\n      substitutivo: 's',\n      genero: 'M',\n    },\n  ],\n};\n","import { generoFromLetra } from '../../dispositivo/genero';\nimport { Autoridade } from '../../documento/autoridade';\nimport { Genero, generoFeminino, generoMasculino, NomeComGenero } from './../../dispositivo/genero';\nimport { VOCABULARIO } from './vocabulario';\n\nexport const getAutoridade = (urn: string): Autoridade | undefined => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.autoridades.filter(t => t.urn === partes[0])[0];\n};\n\nexport const getSigla = (urn: string): string => {\n  const tipo = getTipo(urn) ?? {};\n  const fnProcurarPorUrnTipoDocumento = (item: any): any => item.urnTipoDocumento === tipo.urn;\n  return VOCABULARIO.siglas.find(fnProcurarPorUrnTipoDocumento)?.sigla ?? VOCABULARIO.fakeUrns.find(fnProcurarPorUrnTipoDocumento)?.sigla ?? '';\n};\n\nexport const getTipo = (urn: string): any => {\n  const tipo = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.tiposDocumento.filter(t => t.urn === tipo[1])[0];\n};\n\nexport const getNumero = (urn: string): string => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  return partes[2]?.indexOf(';') > -1 ? partes[2]?.substring(partes[2].indexOf(';') + 1) : '';\n};\n\nexport const formataNumero = (numero: string): string => {\n  return new Intl.NumberFormat('pt-BR', { style: 'decimal' }).format(+numero);\n};\n\nexport const getData = (urn: string): string => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n\n  if (partes.length < 3) {\n    return '';\n  }\n\n  // Sem identificação (nem data nem número)\n  // Ex: federal:lei:LEXML_URN_ID\n  if (partes[2] === 'LEXML_URN_ID') {\n    return '';\n  }\n\n  // Apenas ano\n  // Ex: federal:lei:2020;123\n  if (/^\\d{4};$/.test(partes[2])) {\n    return partes[2].split(';')[0];\n  }\n\n  // Data completa\n  // Ex: federal:lei:2020-10-22;123\n  const d = partes[2]?.substring(0, partes[2].indexOf(';'))?.split('-')?.reverse();\n  return d ? d.join('/') : '';\n};\n\nexport const getDataPorExtenso = (urn: string): string => {\n  const mes = ['janeiro', 'fevereiro', 'março', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];\n\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n\n  const dataInformada = partes[2]?.substring(0, partes[2].indexOf(';'));\n\n  if (/^\\d{4}$/.test(dataInformada) || /\\d{4}$/.test(dataInformada)) {\n    return dataInformada;\n  }\n  const d = partes[2]?.substring(0, partes[2].indexOf(';'))?.split('-')?.reverse();\n\n  if (d) {\n    d[1] = mes[+d[1] - 1];\n    return d.join(' de ');\n  }\n  return '';\n};\n\nexport const getAno = (urn: string): string => (/^\\d{4}$/.test(getData(urn)) ? getData(urn) : getData(urn).split('/').slice(-1)[0]);\n\nconst retiraFragmento = (urn: string): string => {\n  const i = urn.indexOf('!');\n\n  if (i !== -1) {\n    return urn.substring(0, i);\n  }\n  return urn;\n};\n\nexport const converteDataFormatoBrasileiroParaUrn = (data: string): string => {\n  const dataRegex = data.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\\d{4})$/);\n  return dataRegex ? `${dataRegex[3]}-${dataRegex[2]}-${dataRegex[1]}` : '';\n};\n\nexport const buildUrn = (autoridade: string, tipo: string, numero: string, data: string): string => {\n  const dataPadrao = /\\d{4}[-]/.test(data) || /^\\d{4}$/.test(data) ? data : converteDataFormatoBrasileiroParaUrn(data);\n  return `urn:lex:br:${autoridade}:${tipo}:${dataPadrao};${numero}`;\n};\n\n// Para inicialização de edição de emenda sem texto lexml\nexport const buildFakeUrn = (sigla: string, numero: string, ano: string): string => {\n  const fake = VOCABULARIO.fakeUrns.find(f => f.sigla === sigla.toUpperCase());\n  if (fake) {\n    return buildUrn(fake.urnAutoridade, fake.urnTipoDocumento, numero, ano);\n  }\n  throw `Sigla '${sigla}' não encontrada no vocabulário para montagem da urn.`;\n};\n\nexport const validaUrn = (urn: string): boolean => {\n  const autoridade = getAutoridade(urn)?.urn;\n  const tipo = getTipo(urn)?.urn;\n  const numero = /^\\d{1,5}$/.test(getNumero(urn));\n  const data = /\\d{4}[-]/.test(getData(urn)) || /^\\d{4}$/.test(getData(urn)) ? getData(urn) : converteDataFormatoBrasileiroParaUrn(getData(urn));\n  return urn?.startsWith('urn:lex:br:') && autoridade && tipo && numero && data;\n};\n\nexport const getNomeExtenso = (urn: string): string => {\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const data = getData(u);\n  return (tipo ? tipo : '') + (numero ? ' nº ' + numero : '') + (data.length > 7 ? ' de ' + data : '');\n};\n\nexport const getNomeExtensoComDataExtenso = (urn: string): string => {\n  const atalho = VOCABULARIO.atalhosUrn.find(a => a.urn === urn);\n  if (atalho) {\n    return atalho.nome;\n  }\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const dataString = getData(u);\n  const [diaOuApenasAno, mes, ano] = dataString.split('/').map(p => parseInt(p));\n  const dataExtenso = dataString.includes('/') ? getDataExtenso(new Date(ano, mes - 1, diaOuApenasAno)) : diaOuApenasAno;\n  return (tipo ? tipo : '') + (numero ? ' nº ' + parseInt(numero).toLocaleString('pt-BR') : '') + ', de ' + dataExtenso;\n};\n\nexport const buildHtmlLink = (urn: string): string => {\n  const nomeExtenso = getNomeExtensoComDataExtenso(urn);\n  return `<a href=\"${urn}\">${nomeExtenso}</a>`;\n};\n\nconst getDataExtenso = (data: Date) => {\n  return data ? data.getDate() + ' de ' + data.toLocaleDateString('pt-BR', { month: 'long' }) + ' de ' + data.getFullYear() : undefined;\n};\n\nexport const getRefGenericaProjeto = (urn: string): NomeComGenero => {\n  const tipo = getTipo(urn);\n  let genero = generoFromLetra(tipo.genero);\n  // TODO - Implementar UrnService.isSubstitutivo\n  const substitutivo = false;\n\n  let nome = 'Projeto';\n  if (genero === generoFeminino) {\n    if (tipo.urn.startsWith('medida.provisoria')) {\n      nome = 'Medida Provisória';\n    } else {\n      nome = 'Proposta';\n    }\n  }\n\n  if (substitutivo) {\n    if (genero === generoFeminino) {\n      nome = 'Substitutivo à ' + nome;\n    } else {\n      nome = 'Substitutivo ao ' + nome;\n    }\n    genero = generoMasculino;\n  }\n\n  return new NomeComGenero(nome, genero);\n};\n\nexport const getGeneroUrnNorma = (urn: string): Genero => {\n  const tipo = getTipo(urn);\n  return generoFromLetra(tipo.genero);\n};\n","import { Articulacao, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo, isOmissis } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport { getDispositivoFromElemento } from '../../elemento/elementoUtil';\nimport {\n  getArtigosAnterioresIndependenteAgrupador,\n  getArtigosPosterioresIndependenteAgrupador,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosterioresMesmoTipo,\n  getProximoArtigoAnterior,\n  isDispositivoAlteracao,\n  isModificadoOuSuprimido,\n  isOriginal,\n} from '../hierarquia/hierarquiaUtil';\n\nconst I = 1,\n  V = 5,\n  X = 10,\n  L = 50,\n  C = 100,\n  D = 500,\n  M = 1000;\n\nconst ALGARISMOS_ROMANOS: { [key: string]: number } = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XL: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1,\n};\n\nexport const isNumeracaoZero = (numero: string): boolean => {\n  return /^0(-[a-z]+)?$/i.test(numero);\n};\n\nexport const isNumero = (numero: string): boolean => {\n  return /^\\d+$/.test(numero);\n};\n\nexport const isNumeracaoValida = (numero: string): boolean => {\n  return /^\\d{1,}(([-]?[1-9]+){0,2})$/.test(numero);\n};\n\nexport const isLetra = (letra: string): boolean => {\n  return /[a-zA-Z]+/.test(letra);\n};\n\nexport const isRomano = (numero: string): boolean => {\n  return /^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(numero);\n};\n\nexport const converteLetraParaNumeroArabico = (s: string): string => {\n  if (!isLetra(s)) {\n    return s;\n  }\n\n  s = s.toLowerCase();\n\n  let acumulador = 0;\n\n  [...s].forEach(atual => (acumulador = atual.toLowerCase().charCodeAt(0) - 97 + 1 + acumulador * 26));\n\n  return acumulador.toString();\n};\n\nexport const converteNumeroArabicoParaLetra = (strNumero: string): string => {\n  const number = parseInt(strNumero);\n  return number ? intToAlpha(number) : strNumero;\n};\n\nexport const intToAlpha = (numero: number): string => {\n  let str = '';\n\n  let d = 0;\n  while (numero > 0) {\n    d = (numero - 1) % 26;\n    numero = (numero - d - 1) / 26;\n    str = str.replace(/^/, String.fromCharCode(97 + d));\n  }\n  return str;\n};\n\nexport const converteNumeroRomanoParaArabico = (numeroRomano: string): string => {\n  if (numeroRomano.startsWith('0')) {\n    return '0';\n  }\n  if (!isRomano(numeroRomano)) {\n    throw new Error(\"O valor '\" + numeroRomano + \"' não é um número em algarismo romano válido.\");\n  }\n\n  numeroRomano = numeroRomano.toLowerCase();\n\n  let tot = 0;\n  let mode = I;\n  for (let i = numeroRomano.length - 1; i >= 0; i--) {\n    const value = numberCharToInt(numeroRomano.charAt(i));\n\n    if (value > mode) {\n      mode = value;\n    }\n    if (value < mode) {\n      tot -= value;\n    } else {\n      tot += value;\n    }\n  }\n\n  return tot.toString();\n};\n\nconst numberCharToInt = (numeroRomano: string): number => {\n  switch (numeroRomano.toLowerCase()) {\n    case 'i':\n      return I;\n    case 'v':\n      return V;\n    case 'x':\n      return X;\n    case 'l':\n      return L;\n    case 'c':\n      return C;\n    case 'd':\n      return D;\n    case 'm':\n      return M;\n    default:\n      return 0;\n  }\n};\n\nexport const converteNumeroArabicoParaRomano = (numero: string): string => {\n  let resultado = '';\n  let temp;\n  let num = numero.search(/-/) === -1 ? parseInt(numero) : parseInt(numero.substring(0, numero.search(/-/)));\n  const resto = numero.search(/-/) === -1 ? '' : numero.substring(numero.search(/-/));\n\n  for (const key in ALGARISMOS_ROMANOS) {\n    temp = Math.floor(num / ALGARISMOS_ROMANOS[key]);\n    if (temp >= 0) {\n      for (let i = 0; i < temp; i++) {\n        resultado += key;\n      }\n    }\n    num = num % ALGARISMOS_ROMANOS[key];\n  }\n  return resultado + resto;\n};\n\nexport const trataNumeroAndComplemento = (numero: string, funcNumero?: any, funcComplemento?: any): string => {\n  const num = numero.search(/-/) === -1 ? numero.replace('º', '') : numero.substring(0, numero.search(/-/)).replace('º', '');\n  const resto = numero.search(/-/) === -1 ? '' : numero.substring(numero.search(/-/));\n\n  const converted = num === '0' ? '0' : funcNumero ? funcNumero(num) : num;\n\n  return converted + (resto ? (funcComplemento ? funcComplemento(resto) : resto) : '');\n};\n\nexport const converteNumerosComplementoParaLetra = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  const novo = partes?.map(r => r && (isNumero(r) ? converteNumeroArabicoParaLetra(r)?.toUpperCase() : r));\n\n  return novo?.length > 0 ? novo?.join('-') : '';\n};\n\nexport const converteLetrasComplementoParaNumero = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  const novo = partes?.map(r => r && (isLetra(r) ? converteLetraParaNumeroArabico(r) : r));\n\n  return novo?.length > 0 ? novo?.join('-') : '';\n};\n\nexport const comparaNumeracao = (a?: string, b?: string): number => {\n  if (a === b) {\n    return 0;\n  }\n  const partesA = a?.split('-');\n  const partesB = b?.split('-');\n\n  const [numA, ...remainingA] = partesA!;\n  const [numB, ...remainingB] = partesB!;\n\n  if (!numA || (numB && parseInt(numA) < parseInt(numB))) {\n    return 1;\n  }\n  if (!numB || (numA && parseInt(numA) > parseInt(numB))) {\n    return -1;\n  }\n\n  if (a && b && b.includes(a)) {\n    return 1;\n  }\n\n  for (let i = 0; i < 3; i++) {\n    const rA = i >= remainingA?.length ? 0 : remainingA[i];\n    const rB = i >= remainingB?.length ? 0 : remainingB[i];\n\n    if (+rA > +rB) {\n      return -1;\n    }\n    if (+rA < +rB) {\n      return 1;\n    }\n  }\n\n  return 0;\n};\n\nexport const rotuloParaEdicao = (texto: string): string => {\n  return texto\n    .replace(/\\./g, '')\n    .replace(/[\"“]/g, '')\n    .replace(/^Parte/i, '')\n    .replace(/^Livro/i, '')\n    .replace(/^T[ií]tulo/i, '')\n    .replace(/^Cap[iíÍ]tulo/i, '')\n    .replace(/^Se[cçÇ][aãÃ]o/i, '')\n    .replace(/^Subse[cçÇ][aãÃ]o/i, '')\n    .replace(/^Artigo$/i, '')\n    .replace(/^Par[aáÁ]grafo$/i, '')\n    .replace(/^Inciso$/i, '')\n    .replace(/^Al[iíÍ]nea$/i, '')\n    .replace(/^Item$/i, '')\n    .replace(/Art/i, '')\n    .replace(/§/i, '')\n    .replace(/§/i, '')\n    .replace(/[º]/i, '')\n    .replace(/[–-][/s]*$/, '')\n    .replace(/[)][/s]*$/, '')\n    .trim();\n};\n\nexport const podeRenumerar = (articulacao: Articulacao, elemento: Elemento): boolean => {\n  const dispositivo = getDispositivoFromElemento(articulacao, elemento);\n\n  if (dispositivo === undefined) {\n    return false;\n  }\n\n  if (isOmissis(dispositivo)) {\n    return false;\n  }\n\n  return (\n    elemento.hierarquia?.pai?.uuidAlteracao !== undefined &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO &&\n    !(\n      isDispositivoAlteracao(dispositivo) &&\n      dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    )\n  );\n};\n\nexport const calculaSeqOrdem = (d: Dispositivo): SeqOrdem => {\n  const seqOriginal = contaIrmaosOriginaisAte(d);\n\n  if (isOriginal(d)) {\n    return new SeqOrdem(seqOriginal);\n  }\n\n  const seqDispEmenda = contaIrmaosNaoOriginaisConsecutivosAte(d);\n\n  const temOriginalAntes = seqOriginal > 0;\n  const temOriginalDepois = hasIrmaoOriginalDepois(d);\n\n  if (!temOriginalAntes && !temOriginalDepois) {\n    return new SeqOrdem(seqDispEmenda);\n  }\n\n  if (!temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(0);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  if (temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(seqOriginal);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  // if(temOriginalAntes && !temOriginalDepois)\n  return new SeqOrdem(seqOriginal + seqDispEmenda);\n};\n\nexport const hasIrmaoOriginalDepois = (d: Dispositivo): boolean => {\n  const lista = isArtigo(d) ? getArtigosPosterioresIndependenteAgrupador(d) ?? [] : getDispositivosPosterioresMesmoTipo(d);\n  return lista.filter((dispositivo: Dispositivo) => isOriginal(dispositivo)).length > 0;\n};\n\nexport const contaIrmaosOriginaisAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  do {\n    if ((isOriginal(d) || isModificadoOuSuprimido(d)) && d.tipo === tipo) {\n      i++;\n    }\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  } while (d !== undefined);\n  return i;\n};\n\nexport const contaIrmaosNaoOriginaisConsecutivosAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  while (d !== undefined && !isOriginal(d) && !isModificadoOuSuprimido(d) && d.tipo === tipo) {\n    i++;\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  }\n  return i;\n};\n\nexport const calculaNumeracao = (d: Dispositivo): string => {\n  return getNumeracao(d);\n};\n\nconst mapValidacaoNumeracao = {\n  Artigo: (numero: string): boolean => isNumero(numero.replace('º', '')) || /^(artigo )?[uúÚ]nico$/i.test(numero),\n  Paragrafo: (numero: string): boolean => isNumero(numero.replace('º', '')) || /^(par[aáÁ]grafo )?[uúÚ]nico$/i.test(numero),\n  Inciso: isRomano,\n  Alinea: isLetra,\n  Item: isNumero,\n};\n\nexport const isNumeracaoValidaPorTipo = (numero: string, tipo: string): boolean => {\n  const partes = numero.split('-');\n  const partePrincipal = partes[0];\n  const parteSufixo = '-' + partes.slice(1, partes.length).join('-');\n  const fnValidacao = mapValidacaoNumeracao[tipo] || isRomano;\n  const resultPartePrincipal = fnValidacao(partePrincipal) && partePrincipal !== '0';\n\n  const regexSufixoEncaixeComAteDuasLetrasEAteDoisNiveis = /^(-[a-z]{1,2}){1,2}$/i;\n  return partes.length === 1 ? resultPartePrincipal : resultPartePrincipal && regexSufixoEncaixeComAteDuasLetrasEAteDoisNiveis.test(parteSufixo);\n};\n\nclass SeqOrdem {\n  seq: number;\n  letras?: string;\n\n  constructor(seq: number) {\n    this.seq = seq;\n  }\n\n  addNovoSeqOrdem(seq2: number): void {\n    if (this.seq > 0) {\n      this.letras = '' + seq2;\n    } else if (seq2 > 1) {\n      this.letras = '' + --seq2;\n    }\n  }\n  getNumeracao(isDispositivoEmenda: boolean): string {\n    return '' + this.seq + (isDispositivoEmenda && this.letras ? '-' : '') + (this.letras ?? '');\n  }\n}\n\n//\n//\n//\n\nexport const getProximoNumero = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  if (numero && isNumero(partes[0]) && partes.length === 1) {\n    partes[0] = '' + (+partes[0] + 1);\n    return partes.join('-');\n  }\n  if (numero && isNumero(partes[partes.length - 1])) {\n    partes[partes.length - 1] = '' + (+partes[partes.length - 1] + 1);\n    return partes.join('-');\n  }\n  return numero;\n};\n\nexport const getNumeroAbaixo = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  if (numero && isNumero(partes[partes.length - 1])) {\n    partes[partes.length - 1] = '' + partes[partes.length - 1] + '-1';\n    return partes.join('-');\n  }\n  return numero;\n};\n\nconst getNumeracao = (d: Dispositivo): string => {\n  const dispositivosAnteriores = isArtigo(d) ? getArtigosAnterioresIndependenteAgrupador(d) : getDispositivosAnterioresMesmoTipo(d);\n  const dispositivoPosteriores = isArtigo(d) ? getArtigosPosterioresIndependenteAgrupador(d) : getDispositivosPosterioresMesmoTipo(d);\n\n  const dispositivoOriginalAnterior = dispositivosAnteriores && dispositivosAnteriores.filter(f => isOriginal(f) || isModificadoOuSuprimido(f)).reverse()[0];\n  const dispositivoOriginalPosterior = dispositivoPosteriores && dispositivoPosteriores.filter(f => isOriginal(f) || isModificadoOuSuprimido(f))[0];\n\n  const dispositivoAnteriorAdicionado = dispositivosAnteriores?.filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO).reverse()[0];\n\n  if (!getDispositivoAnteriorMesmoTipo(d) && !dispositivoOriginalPosterior) {\n    return '1';\n  }\n\n  if (!dispositivoOriginalAnterior && dispositivoOriginalPosterior) {\n    return dispositivoAnteriorAdicionado ? (dispositivoAnteriorAdicionado.numero! === '0' ? getNumeroAbaixo('0') : getProximoNumero(dispositivoAnteriorAdicionado.numero!)) : '0';\n  }\n\n  if (dispositivoOriginalAnterior && !dispositivoOriginalPosterior) {\n    return getProximoNumero(getDispositivoAnteriorMesmoTipo(d)!.numero!);\n  }\n\n  if (dispositivoOriginalAnterior && dispositivoOriginalPosterior) {\n    if (dispositivoOriginalAnterior === getDispositivoAnteriorMesmoTipo(d)) {\n      return getNumeroAbaixo(dispositivoOriginalAnterior.numero!);\n    }\n    return getProximoNumero(getDispositivoAnteriorMesmoTipo(d)!.numero!);\n  }\n\n  const seqDispEmenda = contaIrmaosNaoOriginaisConsecutivosAte(d);\n\n  return '' + seqDispEmenda;\n};\n","import { TipoDispositivo } from './../tipo/tipoDispositivo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isDispositivoGenerico, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosteriores,\n  getUltimoFilho,\n  irmaosMesmoTipo,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isPrimeiroMesmoTipo,\n  isUnicoMesmoTipo,\n  validaOrdemDispositivo,\n} from '../hierarquia/hierarquiaUtil';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport { comparaNumeracao } from './numeracaoUtil';\n\nexport const getDispositivoAnteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoAnteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoAnteriorIgnorandoOmissis(d);\n};\n\nexport const getDispositivoPosteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoPosteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoPosteriorIgnorandoOmissis(d);\n};\n\nexport const validaNumeracaoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não contém numeração',\n    });\n  }\n  if (dispositivo !== null && !isOmissis(dispositivo) && dispositivo.rotulo && dispositivo.rotulo.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não contém rótulo',\n    });\n  }\n  return mensagens;\n};\n\nexport const validaNumeracaoDispositivoAlteracao = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero !== undefined && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não contém numeração',\n    });\n  }\n  if (dispositivo !== null && !isOmissis(dispositivo) && dispositivo.rotulo?.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não contém rótulo',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoGenerico(dispositivo) &&\n    (dispositivo.rotulo?.endsWith(dispositivo.tipo) || dispositivo.rotulo?.toLowerCase() === TipoDispositivo[dispositivo.tipo.toLowerCase()].descricao?.toLowerCase()) &&\n    !(\n      dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    )\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.RENUMERAR_DISPOSITIVO,\n      fix: true,\n    });\n  }\n  if (dispositivo !== null && isDispositivoAlteracao(dispositivo) && isParagrafo(dispositivo) && !isUnicoMesmoTipo(dispositivo) && dispositivo.rotulo?.endsWith('único.')) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Quando houver mais de um ${dispositivo.descricao}, não pode se tratar de '${dispositivo.descricao} único'`,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    isPrimeiroMesmoTipo(dispositivo) &&\n    !isAgrupador(dispositivo.pai!) &&\n    !isOmissis(dispositivo) &&\n    (!getDispositivoAnterior(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getUltimoFilho(getDispositivoAnterior(dispositivo)!)))) &&\n    dispositivo.numero !== '1' &&\n    dispositivo.numero !== '1u'\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_ANTES,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivoAnteriorMesmoTipo(dispositivo) &&\n    dispositivo.tipo !== getDispositivoAnteriorMesmoTipo(dispositivo)?.rotulo &&\n    !isOmissis(getDispositivoAnterior(dispositivo)!) &&\n    !validaOrdemDispositivo(getDispositivoAnterior(dispositivo)!, dispositivo) &&\n    dispositivo.numero !== getDispositivoAnteriorMesmoTipo(dispositivo)?.numero\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_ANTES,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivosAnterioresMesmoTipo(dispositivo)\n      .filter(d => d.numero !== undefined)\n      .filter(d => d !== dispositivo)\n      .filter(anterior => dispositivo.numero !== anterior.numero && comparaNumeracao(dispositivo.numero, anterior.numero) === 1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem número menor ao de algum dispositivo anterior',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    !dispositivo.pai!.isLastFilho(dispositivo) &&\n    getDispositivosPosteriores(dispositivo)\n      .filter(d => d !== dispositivo && dispositivo.pai === d.pai && d.numero !== undefined)\n      .filter(posterior => comparaNumeracao(posterior.numero, dispositivo.numero) === 1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem número maior do que algum dispositivo posterior',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero !== undefined && irmaosMesmoTipo(dispositivo).filter(d => d.numero && d.numero === dispositivo.numero).length > 1) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem número igual ao de outro dispositivo',\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaNumeracao = (dispositivo: Dispositivo): Mensagem[] => {\n  return isDispositivoAlteracao(dispositivo) ? validaNumeracaoDispositivoAlteracao(dispositivo) : validaNumeracaoDispositivo(dispositivo);\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArticulacao } from '../../dispositivo/tipo';\nimport { validaTexto } from '../conteudo/conteudoValidator';\nimport { validaUrn } from '../documento/urnUtil';\nimport { isOriginal } from '../hierarquia/hierarquiaUtil';\nimport { validaHierarquia } from '../hierarquia/hierarquiaValidator';\nimport { validaNumeracao } from '../numeracao/numeracaoValidator';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\n\nconst validaReferencia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  if (!dispositivo.alteracoes || !dispositivo.alteracoes.base) {\n    return [];\n  }\n\n  if (!validaUrn(dispositivo.alteracoes.base)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Não foi informada uma norma alterada válida`,\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  if (\n    (isArticulacao(dispositivo) && dispositivo.pai === undefined) ||\n    isOriginal(dispositivo) ||\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n  ) {\n    return [];\n  }\n  return validaHierarquia(dispositivo).concat(validaTexto(dispositivo), validaNumeracao(dispositivo), validaReferencia(dispositivo));\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupadorGenerico, isCaput, isDispositivoGenerico, isOmissis } from '../../dispositivo/tipo';\nimport { comparaNumeracao } from '../numeracao/numeracaoUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport {\n  getDispositivoAnterior,\n  getDispositivoPosterior,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  getUltimoFilho,\n  isDispositivoAlteracao,\n  isDispositivosSequenciaisMesmoPai,\n  isOriginal,\n} from './hierarquiaUtil';\n\nexport const validaHierarquia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo não foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.filhos.length > 0 && dispositivo.tiposPermitidosFilhos!.length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislação vigente, ${dispositivo.descricao} não poderia possuir filhos`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    (getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' || getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1u') &&\n    getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Não é permitido um dispositivo de alteração da norma antes do primeiro dispositivo`,\n    });\n  }\n  if (dispositivo !== null && (isDispositivoGenerico(dispositivo) || isAgrupadorGenerico(dispositivo))) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Não foi possível validar a natureza deste dispositivo com base na legislação vigente`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    dispositivo.pai &&\n    !isAgrupadorGenerico(dispositivo.pai) &&\n    !isOmissis(dispositivo) &&\n    !isDispositivoGenerico(dispositivo) &&\n    !dispositivo.tiposPermitidosPai!.includes(dispositivo.pai.tipo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislação vigente, ${dispositivo.descricao} somente poderia pertencer a ${dispositivo.tiposPermitidosPai!.join(', ')}`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    !isDispositivoGenerico &&\n    dispositivo.filhos.length > 0 &&\n    (dispositivo.tiposPermitidosFilhos!.length === 0 || dispositivo.filhos.filter(filho => !dispositivo.tiposPermitidosFilhos!.includes(filho.tipo)).length > 0)\n  ) {\n    const relacaoFilhos =\n      dispositivo.tiposPermitidosFilhos!.length === 0 ? 'não poderia possuir filhos' : `somente poderia possuir ${dispositivo.tiposPermitidosFilhos!.join(', ')}`;\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislação vigente, ${dispositivo.descricao} ${relacaoFilhos}`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    getDispositivoAnterior(dispositivo) !== undefined &&\n    isOmissis(getUltimoFilho(getDispositivoAnterior(dispositivo)!) || isOmissis(getDispositivoAnterior(dispositivo)!))\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não pode haver mais de uma linha pontilhada sequencialmente',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.pai! &&\n    isOmissis(dispositivo) &&\n    isCaput(dispositivo.pai!) &&\n    getDispositivoPosterior(dispositivo) === undefined &&\n    TipoDispositivo.omissis.tipo === dispositivo.pai!.pai!.filhos.filter(f => !isCaput(f.pai!))[0]?.tipo\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    dispositivo.pai! &&\n    !getDispositivoPosterior(dispositivo) &&\n    dispositivo.pai &&\n    getDispositivoPosterior(isCaput(dispositivo.pai) ? dispositivo.pai.pai! : dispositivo.pai) !== undefined &&\n    isOmissis(getDispositivoPosterior(isCaput(dispositivo.pai) ? dispositivo.pai.pai! : dispositivo.pai)!)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    dispositivo.pai &&\n    getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined &&\n    isOmissis(getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo)!) &&\n    isDispositivosSequenciaisMesmoPai(dispositivo, getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo)!)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    getDispositivoAnterior(dispositivo) !== undefined &&\n    isOriginal(getDispositivoAnterior(dispositivo)!) &&\n    getDispositivoAnterior(dispositivo)!.numero !== undefined &&\n    getDispositivoPosterior(dispositivo) !== undefined &&\n    isOriginal(getDispositivoPosterior(dispositivo)!) &&\n    getDispositivoPosterior(dispositivo)!.numero !== undefined &&\n    comparaNumeracao('' + (+getDispositivoAnterior(dispositivo)!.numero! + 1), getDispositivoPosterior(dispositivo)!.numero) === 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não pode haver linha pontilhada entre dispositivos originais sequenciais',\n    });\n  }\n\n  return mensagens;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { isIncisoCaput } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\n\nexport class DispositivoSuprimido implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const a: ElementoAction[] = [];\n\n    if ((isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!).situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      a.push(restaurarElementoAction);\n      a.push(...acoes.filter(acao => acao.descricao.startsWith('Adicionar') && dispositivo.tipo === acao.tipo));\n    }\n\n    return a;\n  }\n}\n","import { DescricaoSituacao } from './../../dispositivo/situacao';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArticulacao, isCaput, isOmissis } from '../../dispositivo/tipo';\nimport { getDispositivosAnterioresMesmoTipo, isUnicoMesmoTipo } from '../hierarquia/hierarquiaUtil';\nimport { isArtigo, isParagrafo } from './../../dispositivo/tipo';\nimport { getArticulacao, isDispositivoAlteracao, irmaosMesmoTipo } from './../hierarquia/hierarquiaUtil';\n\nexport const buildHref = (dispositivo: Dispositivo): string | undefined => {\n  if (isArticulacao(dispositivo)) {\n    return 'cpt_alt1';\n  }\n\n  if (dispositivo.tagId) {\n    return (\n      dispositivo.tagId +\n      (isCaput(dispositivo)\n        ? ''\n        : isOmissis(dispositivo)\n        ? calculaSequencialOmissis(dispositivo)\n        : dispositivo.numero\n        ? (isArtigo(dispositivo) || isParagrafo(dispositivo)) && dispositivo.numero === '1' && isUnicoMesmoTipo(dispositivo)\n          ? '1u'\n          : dispositivo.numero!\n        : `[sn:${dispositivo.uuid}]`)\n    );\n  }\n\n  return undefined;\n};\n\nfunction calculaSequencialOmissis(dispositivo: Dispositivo): number {\n  if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    // Diferencia omissis de incisos de caput de omissis de parágrafo\n    const irmaos = irmaosMesmoTipo(dispositivo).filter(d => d.pai === dispositivo.pai);\n    // Dispositivos não adicionados primeiro.\n    irmaos.sort((d1, d2) => {\n      const s1 = d1.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ? 1 : 0;\n      const s2 = d2.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ? 1 : 0;\n      const order = s1 - s2;\n      return order ? order : dispositivo.pai!.indexOf(d1) - dispositivo.pai!.indexOf(d2);\n    });\n    return irmaos.indexOf(dispositivo) + 1;\n  }\n  return getDispositivosAnterioresMesmoTipo(dispositivo).length + 1;\n}\n\nconst buildHierarquia = (dispositivo: Dispositivo, idArray: string[] = []): void => {\n  if (isArticulacao(dispositivo) && dispositivo.pai === undefined) {\n    return;\n  }\n\n  const href = buildHref(dispositivo);\n\n  if (href) {\n    idArray.unshift(href);\n  }\n\n  // ID de artigo e de dispositivos de artigo não incluem ids de agrupadores de artigo.\n  if (isArtigo(dispositivo)) {\n    if (isDispositivoAlteracao(dispositivo)) {\n      // Pula agrupadores de artigo dentro do bloco de alteração\n      const alteracao = getArticulacao(dispositivo);\n      buildHierarquia(alteracao, idArray);\n    }\n    return;\n  }\n\n  buildHierarquia(dispositivo.pai!, idArray);\n};\n\nexport const buildId = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_');\n};\n\nexport const buildIdAlteracao = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_') + '_alt1';\n};\n\n/* export const gHref = (dispositivo: Dispositivo): string => {\n  if (!dispositivo.numero && dispositivo.rotulo) {\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n  }\n  return dispositivo.numero ?? '';\n}; */\n","import { isEmendaArtigoOndeCouber, isAdicionado, getDispositivoAnteriorNaSequenciaDeLeitura } from './../lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isCaput, isDispositivoDeArtigo, isDispositivoGenerico, isIncisoCaput, isOmissis, isParagrafo } from '../dispositivo/tipo';\nimport { validaDispositivo } from '../lexml/dispositivo/dispositivoValidator';\nimport {\n  buildListaDispositivos,\n  findDispositivoByUuid,\n  getArticulacao,\n  getDispositivoAnterior,\n  getDispositivosPosteriores,\n  hasFilhos,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isOriginal,\n  verificaNaoPrecisaInformarSituacaoNormaVigente,\n  getDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n  getTiposAgrupadoresQuePodemSerInseridosAntes,\n  getTiposAgrupadoresQuePodemSerInseridosDepois,\n  hasEmenta,\n} from '../lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../lexml/situacao/dispositivoAdicionado';\nimport { DispositivoSuprimido } from '../lexml/situacao/dispositivoSuprimido';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { buildId } from '../lexml/util/idUtil';\nimport { Elemento, Referencia } from './elemento';\n\nexport const isValid = (elemento?: Referencia): void => {\n  if (elemento === undefined || elemento.uuid === undefined) {\n    throw new Error('Não foi informado um elemento válido');\n  }\n};\n\nexport const isElementoDispositivoAlteracao = (elemento: Partial<Elemento>): boolean => {\n  return elemento.hierarquia?.pai?.uuidAlteracao !== undefined || elemento.uuidAlteracao !== undefined;\n};\n\nconst getNivel = (dispositivo: Dispositivo, atual = 0): number => {\n  if (dispositivo?.pai === undefined || isAgrupador(dispositivo)) {\n    return atual;\n  }\n\n  if (isArtigo(dispositivo)) {\n    return isDispositivoAlteracao(dispositivo) ? ++atual : atual;\n  }\n\n  atual = isDispositivoCabecaAlteracao(dispositivo?.pai) ? atual + 2 : ++atual;\n  return isArtigo(dispositivo?.pai) ? atual : getNivel(dispositivo.pai, atual);\n};\n\nconst buildElementoPai = (dispositivo: Dispositivo): Referencia | undefined => {\n  const pai = dispositivo.pai ? (isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai) : undefined;\n  const articulacaoAlteracao = pai && isDispositivoAlteracao(dispositivo) ? getArticulacao(dispositivo).pai : undefined;\n  return {\n    tipo: pai?.tipo,\n    uuid: pai?.uuid,\n    uuid2: pai?.uuid2,\n    lexmlId: pai?.id,\n    uuidAlteracao: articulacaoAlteracao?.uuid,\n    uuid2Alteracao: articulacaoAlteracao?.uuid2,\n    existeNaNormaAlterada: pai && isAdicionado(pai) ? (pai.situacao as DispositivoAdicionado).existeNaNormaAlterada : undefined,\n    descricaoSituacao: pai?.situacao?.descricaoSituacao,\n  };\n};\n\nexport const createElemento = (dispositivo: Dispositivo, acoes = true, procurarElementoAnterior = false): Elemento => {\n  const pai = dispositivo.pai!;\n  const fechaAspas = dispositivo.tipo !== 'Articulacao' && isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo);\n  let notaAlteracao: string | undefined;\n  let podeEditarNotaAlteracao: boolean | undefined;\n\n  if (fechaAspas) {\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n    notaAlteracao = cabecaAlteracao.notaAlteracao;\n    podeEditarNotaAlteracao = cabecaAlteracao.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  }\n\n  let elementoAnteriorNaSequenciaDeLeitura: Elemento | undefined;\n\n  if (procurarElementoAnterior) {\n    let dispositivoAnteriorNaSequenciaDeLeitura = getDispositivoAnteriorNaSequenciaDeLeitura(dispositivo);\n    if (dispositivoAnteriorNaSequenciaDeLeitura) {\n      if (\n        isArticulacao(dispositivoAnteriorNaSequenciaDeLeitura) &&\n        !isArticulacaoAlteracao(dispositivoAnteriorNaSequenciaDeLeitura) &&\n        hasEmenta(dispositivoAnteriorNaSequenciaDeLeitura)\n      ) {\n        dispositivoAnteriorNaSequenciaDeLeitura = (dispositivoAnteriorNaSequenciaDeLeitura as Articulacao).projetoNorma!.ementa!;\n      }\n\n      elementoAnteriorNaSequenciaDeLeitura = createElemento(\n        isCaput(dispositivoAnteriorNaSequenciaDeLeitura) || isArticulacaoAlteracao(dispositivoAnteriorNaSequenciaDeLeitura)\n          ? dispositivoAnteriorNaSequenciaDeLeitura.pai!\n          : dispositivoAnteriorNaSequenciaDeLeitura\n      );\n    }\n  }\n\n  return {\n    tipo: dispositivo.tipo,\n    nivel: getNivel(dispositivo),\n    agrupador: isAgrupador(dispositivo),\n    hierarquia: {\n      pai: pai ? buildElementoPai(dispositivo) : undefined,\n      posicao: pai ? pai.indexOf(dispositivo) : undefined,\n      numero: dispositivo.numero,\n    },\n    editavel: isArticulacao(dispositivo) || dispositivo.situacao instanceof DispositivoSuprimido ? false : true,\n    sendoEditado: false,\n    uuid: dispositivo.uuid,\n    uuid2: dispositivo.uuid2,\n    lexmlId: (dispositivo.numero && buildId(dispositivo)) || dispositivo.id,\n    numero: dispositivo.numero,\n    rotulo: dispositivo.rotulo ?? '',\n    conteudo: {\n      texto: dispositivo.texto,\n    },\n    norma: dispositivo.alteracoes?.base,\n    existeNaNormaAlterada: isAdicionado(dispositivo) ? (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada : undefined,\n    index: 0,\n    acoesPossiveis: acoes ? dispositivo.getAcoesPossiveis(dispositivo) : [],\n    descricaoSituacao: dispositivo.situacao?.descricaoSituacao,\n    mensagens: isOriginal(dispositivo) ? [] : dispositivo.mensagens,\n    abreAspas: isDispositivoCabecaAlteracao(dispositivo),\n    fechaAspas,\n    notaAlteracao,\n    dispositivoAlteracao: isDispositivoAlteracao(dispositivo),\n    tipoOmissis: dispositivo.tipo === 'Omissis' ? tipoOmissis(pai) : undefined,\n    podeEditarNotaAlteracao,\n    tiposAgrupadoresQuePodemSerInseridosAntes: getTiposAgrupadoresQuePodemSerInseridosAntes(dispositivo),\n    tiposAgrupadoresQuePodemSerInseridosDepois: getTiposAgrupadoresQuePodemSerInseridosDepois(dispositivo),\n    artigoDefinido: dispositivo.artigoDefinido,\n    elementoAnteriorNaSequenciaDeLeitura,\n  };\n};\n\nexport const createElementoValidado = (dispositivo: Dispositivo, procurarElementoAnterior = false): Elemento => {\n  const el = createElemento(dispositivo, true, procurarElementoAnterior);\n  el.mensagens = validaDispositivo(dispositivo);\n\n  return el;\n};\n\nexport const createElementos = (elementos: Elemento[], dispositivo: Dispositivo, validados = false, procurarElementoAnterior = false): void => {\n  const fnCreateElemento = validados ? createElementoValidado : createElemento;\n\n  if (dispositivo.filhos === undefined) {\n    return;\n  }\n  dispositivo.filhos.forEach(d => {\n    const el = fnCreateElemento(d, true, procurarElementoAnterior);\n\n    if (isArtigo(d)) {\n      el.conteudo!.texto = (d as Artigo).caput!.texto;\n    }\n    elementos.push(el);\n\n    if (isArtigo(d) && (d as Artigo).hasAlteracao()) {\n      (d as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(fnCreateElemento(f, true, procurarElementoAnterior));\n        createElementos(elementos, f, validados, procurarElementoAnterior);\n      });\n    }\n    createElementos(elementos, d, validados, procurarElementoAnterior);\n  });\n};\n\nexport const getElementos = (dispositivo: Dispositivo, validados = false, procurarElementoAnterior = false): Elemento[] => {\n  const fnCreateElemento = validados ? createElementoValidado : createElemento;\n\n  const elementos: Elemento[] = [];\n  elementos.push(fnCreateElemento(dispositivo, true, procurarElementoAnterior));\n\n  if (isArticulacao(dispositivo) && !isDispositivoAlteracao(dispositivo) && hasEmenta(dispositivo) && !isEmendaArtigoOndeCouber(dispositivo)) {\n    elementos.push(fnCreateElemento((dispositivo as Articulacao).projetoNorma!.ementa!, true));\n  }\n\n  if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n    if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n      (dispositivo as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(fnCreateElemento(f, true, procurarElementoAnterior));\n        createElementos(elementos, f, validados, procurarElementoAnterior);\n      });\n    }\n  }\n\n  createElementos(elementos, dispositivo, validados, procurarElementoAnterior);\n\n  return elementos;\n};\n\nexport const getArticulacaoFromElemento = (articulacao: Articulacao, elemento: Elemento | Referencia): Articulacao => {\n  if (!isElementoDispositivoAlteracao(elemento) || isArticulacaoAlteracao(articulacao)) {\n    return articulacao;\n  }\n\n  return (\n    getDispositivoFromElemento(articulacao!, {\n      uuid: (elemento as Elemento).hierarquia ? (elemento as Elemento).hierarquia!.pai!.uuidAlteracao : elemento.uuidAlteracao,\n    })?.alteracoes ?? articulacao\n  );\n};\n\nexport const getDispositivoFromElemento = (art: Articulacao, referencia: Partial<Elemento>, ignorarElementoAlteracao = false): Dispositivo | undefined => {\n  if (referencia.tipo === 'Ementa') {\n    return art.projetoNorma?.ementa;\n  }\n\n  const articulacao = getArticulacaoFromElemento(art, referencia);\n\n  if (!ignorarElementoAlteracao && isElementoDispositivoAlteracao(referencia)) {\n    const ref = articulacao.pai\n      ? articulacao.pai\n      : getDispositivoFromElemento(articulacao, {\n          uuid: referencia.hierarquia ? referencia.hierarquia!.pai!.uuidAlteracao : referencia.uuidAlteracao,\n        });\n\n    if (!ref?.alteracoes) {\n      return undefined;\n    }\n\n    return ref.alteracoes?.filhos\n      .flatMap(f => {\n        const lista: Dispositivo[] = [];\n        buildListaDispositivos(f, lista);\n        return lista;\n      })\n      .filter((el: Referencia) => el.uuid === referencia.uuid)[0];\n  }\n\n  if (referencia?.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = articulacao.filhos!.find(a => a.uuid === referencia.uuid);\n    if (artigo) {\n      return artigo;\n    }\n  }\n\n  const dispositivo = referencia?.tipo === TipoDispositivo.articulacao.tipo || referencia?.uuid === undefined ? articulacao : findDispositivoByUuid(articulacao, referencia.uuid!);\n\n  if (dispositivo === null) {\n    return undefined;\n  }\n  return dispositivo;\n};\n\nconst criaElementoValidadoSeNecessario = (validados: Elemento[], dispositivo: Dispositivo, incluiAcoes?: boolean): void => {\n  const mensagens = validaDispositivo(dispositivo);\n\n  if (mensagens.length > 0 || (dispositivo.mensagens && dispositivo.mensagens?.length > 0)) {\n    dispositivo.mensagens = mensagens;\n    const elemento = createElemento(dispositivo, incluiAcoes);\n    elemento.mensagens = validaDispositivo(dispositivo);\n    validados.push(elemento);\n  }\n};\n\nexport const criaListaElementosAfinsValidados = (dispositivo: Dispositivo | undefined, incluiDispositivo = true): Elemento[] => {\n  const validados: Elemento[] = [];\n\n  if (!dispositivo) {\n    return [];\n  }\n  if (isDispositivoAlteracao(dispositivo) && hasFilhos(dispositivo) && dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).length > 0) {\n    criaElementoValidadoSeNecessario(validados, dispositivo);\n    dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).forEach(o => criaElementoValidadoSeNecessario(validados, o));\n  }\n\n  if (isDispositivoDeArtigo(dispositivo) || isDispositivoGenerico(dispositivo)) {\n    const parent = isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!;\n    criaElementoValidadoSeNecessario(validados, parent);\n    if (isAgrupador(parent)) {\n      criaElementoValidadoSeNecessario(validados, isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!);\n    }\n    irmaosMesmoTipo(dispositivo).forEach(filho => {\n      !incluiDispositivo && filho === dispositivo ? undefined : criaElementoValidadoSeNecessario(validados, filho, true);\n    });\n  } else if (incluiDispositivo && !isArticulacao(dispositivo) && !isAgrupador(dispositivo)) {\n    criaElementoValidadoSeNecessario(validados, dispositivo, true);\n  }\n\n  const anterior = getDispositivoAnterior(dispositivo);\n  if (anterior !== undefined && isOmissis(anterior)) {\n    criaElementoValidadoSeNecessario(validados, anterior, false);\n  }\n\n  return validados;\n};\n\nexport const listaDispositivosRenumerados = (dispositivo: Dispositivo): Dispositivo[] => {\n  return (isArtigo(dispositivo) || isParagrafo(dispositivo)) && irmaosMesmoTipo(dispositivo).length <= 2\n    ? irmaosMesmoTipo(dispositivo).filter(d => dispositivo.uuid !== d.uuid)\n    : getDispositivosPosteriores(dispositivo, true).filter(d => d.tipo === dispositivo.tipo);\n};\n\nexport const buildListaElementosRenumerados = (dispositivo: Dispositivo): Elemento[] => {\n  return listaDispositivosRenumerados(dispositivo).map(d => {\n    d.mensagens = validaDispositivo(d);\n    const el = createElemento(d);\n    return el;\n  });\n};\n\nexport const validaFilhos = (validados: Elemento[], filhos: Dispositivo[]): void => {\n  filhos.forEach(filho => {\n    criaElementoValidadoSeNecessario(validados, filho);\n    filhos ? validaFilhos(validados, filho.filhos) : undefined;\n  });\n};\n\nexport const hasElementoAscendenteAdicionado = (articulacao: Articulacao, referencia: Partial<Elemento>): boolean => {\n  const d = getDispositivoFromElemento(articulacao, referencia);\n\n  return d ? verificaNaoPrecisaInformarSituacaoNormaVigente(d) : false;\n};\n\nexport const tipoOmissis = (pai: Dispositivo | undefined): string => {\n  switch (pai?.tipo) {\n    case 'Caput':\n      return 'inciso-caput';\n    case 'Inciso':\n      return 'alinea';\n    case 'Alinea':\n      return 'item';\n    case 'Artigo':\n      return 'paragrafo';\n    case 'Paragrafo':\n      return 'inciso-paragrafo';\n    default:\n      return '';\n  }\n};\n\nexport const podeAdicionarAtributoDeExistencia = (elemento: Elemento): boolean => {\n  if (\n    !elemento.dispositivoAlteracao ||\n    elemento.existeNaNormaAlterada === undefined ||\n    elemento.tipo === 'Omissis' ||\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    return false;\n  } else if (elemento.tipo === 'Artigo') {\n    return true;\n  } else {\n    return elemento.hierarquia?.pai?.existeNaNormaAlterada ?? true;\n  }\n};\n","import { Alerta } from '../model/alerta/alerta';\nimport { Articulacao } from '../model/dispositivo/dispositivo';\nimport { Elemento } from '../model/elemento';\nimport { Mensagem } from '../model/lexml/util/mensagem';\nimport { Revisao } from '../model/revisao/revisao';\nimport { Usuario } from '../model/revisao/usuario';\n\nexport enum StateType {\n  ArticulacaoAtualizada = 'ArticulacaoAtualizada',\n  ComandoEmendaGerado = 'ComandoEmendaGerado',\n  DocumentoCarregado = 'DocumentoCarregado',\n  InformarDadosAssistente = 'InformarDadosAssistente',\n  InformarNorma = 'InformarNorma',\n  ElementoModificado = 'ElementoModificado',\n  ElementoIncluido = 'ElementoIncluido',\n  ElementoRemovido = 'ElementoRemovido',\n  ElementoRenumerado = 'ElementoRenumerado',\n  ElementoRestaurado = 'ElementoRestaurado',\n  ElementoSuprimido = 'ElementoSuprimido',\n  ElementoValidado = 'ElementoValidado',\n  ElementoSelecionado = 'ElementoSelecionado',\n  ElementoMarcado = 'ElementoMarcado',\n  SituacaoElementoModificada = 'SituacaoElementoModificada',\n  AtualizacaoAlertas = 'AtualizacaoAlertas',\n  ElementoReferenciado = 'ElementoReferenciado',\n  RevisaoAtivada = 'RevisaoAtivada',\n  RevisaoDesativada = 'RevisaoDesativada',\n  AtualizaUsuario = 'AtualizaUsuario',\n  RevisaoAceita = 'RevisaoAceita',\n  RevisaoRejeitada = 'RevisaoRejeitada',\n  RevisaoAdicionalRejeitada = 'RevisaoAdicionalRejeitada',\n  AdicionarAnexoEmendaTextoLivre = 'AdicionarAnexoEmendaTextoLivre',\n  RemoverAnexoEmendaTextoLivre = 'RemoverAnexoEmendaTextoLivre',\n}\nexport interface StateEvent {\n  stateType: StateType;\n  referencia?: Elemento;\n  pai?: Elemento;\n  moverParaFimLinha?: boolean;\n  elementos?: Elemento[];\n}\n\nexport interface State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n    alertas?: Alerta[];\n  };\n  emRevisao?: boolean;\n  usuario?: Usuario;\n  revisoes?: Revisao[];\n  numEventosPassadosAntesDaRevisao?: number;\n}\n\nexport const createState = (state: any, events: StateEvent[], past: StateEvent[], present: StateEvent[], future: StateEvent[]): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: undefined,\n    past: past,\n    present: present,\n    future: future,\n    ui: {\n      events,\n    },\n  };\n};\n\nexport class DefaultState implements State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[] = [];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n    alertas?: Alerta[];\n  };\n}\n","import { Articulacao } from '../../../model/dispositivo/dispositivo';\nimport { getElementos } from '../../../model/elemento/elementoUtil';\nimport { State, StateType } from '../../state';\n\nexport const load = (articulacao: Articulacao, modo?: string): State => {\n  const elementos = getElementos(articulacao);\n  return {\n    articulacao,\n    modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [\n        {\n          stateType: StateType.DocumentoCarregado,\n          elementos: elementos,\n        },\n      ],\n      alertas: [],\n    },\n    revisoes: [],\n    numEventosPassadosAntesDaRevisao: 0,\n  };\n};\n","import { State } from '../../state';\nimport { load } from './loadArticulacao';\n\nexport const abreArticulacao = (state: any, action: any): State => {\n  return load(action.articulacao!, action.classificacao);\n};\n","export interface Counter {\n  next(): number;\n}\n\nexport function generateId(init = 0): Counter {\n  return {\n    next: (): number => ++init,\n  };\n}\n\nexport const Counter = generateId();\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Mensagem } from '../lexml/util/mensagem';\n\nexport interface Validacao {\n  mensagens?: Mensagem[];\n}\n\nexport function ValidacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Validacao {\n    mensagens: Mensagem[] = [];\n  };\n}\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nimport { ADICIONAR_ELEMENTO } from './adicionarElementoAction';\n\nexport const INICIAR_BLOCO = 'INICIAR_BLOCO';\nexport const FINALIZAR_BLOCO = 'FINALIZAR_BLOCO';\n\nclass BlocoAlteracao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  isDispositivoAlteracao = true;\n  constructor(private tipoAcao: string) {\n    this.descricao = tipoAcao === INICIAR_BLOCO ? `Adicionar alteração de norma` : `Finalizar alteração de norma`;\n  }\n\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      subType: this.tipoAcao,\n      atual,\n      novo: {\n        tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n    };\n  }\n}\nexport const iniciarBlocoAlteracao = new BlocoAlteracao(INICIAR_BLOCO);\nexport const finalizarBlocoAlteracao = new BlocoAlteracao(FINALIZAR_BLOCO);\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoNaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    get alteracoes(): Alteracoes | undefined {\n      return undefined;\n    }\n    hasAlteracao(): boolean {\n      return false;\n    }\n  };\n}\n","export enum TipoConteudo {\n  ConteudoTexto = 'Conteúdo de Texto',\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    texto = '';\n  };\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport {\n  getArticulacao,\n  getDispositivoAnterior,\n  getProximoArtigoAnterior,\n  isAntesDoPrimeiroDispositivoOriginal,\n  isDispositivoAlteracao,\n  podeRenumerarFilhosAutomaticamente,\n} from './hierarquiaUtil';\n\nexport function HierarquiaAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia && this.filhos.indexOf(referencia) >= 0) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n      isArtigo(filho) ? getArticulacao(filho).addArtigo(filho, referencia) : null;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      filho.pai = this as unknown as Dispositivo;\n      this.filhos.splice(posicao, 0, filho);\n      if (isArtigo(filho)) {\n        const anterior = getDispositivoAnterior(filho) ?? getProximoArtigoAnterior(filho.pai!.pai!, filho.pai!);\n        const articulacao = getArticulacao(filho);\n        const pos = anterior ? articulacao.indexOfArtigo(anterior as Artigo) + 1 : 0;\n        articulacao.addArtigoOnPosition(filho, pos);\n      }\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n      isArtigo(filho) ? (getArticulacao(filho) as Articulacao).removeArtigo(filho as Artigo) : null;\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        return;\n      }\n      this.filhos\n        .filter(\n          f =>\n            (isDispositivoAlteracao(f) && isAntesDoPrimeiroDispositivoOriginal(f)) ||\n            f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n            f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        )\n        .filter(f => !isArtigo(f))\n        .forEach(filho => {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        });\n      (getArticulacao(this.filhos[0]) as Articulacao)?.renumeraArtigos();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { getDispositivoAndFilhosAsLista, isAntesDoPrimeiroDispositivoOriginal, isDispositivoAlteracao, podeRenumerarFilhosAutomaticamente } from './hierarquiaUtil';\n\nexport function HierarquiaDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      filho.pai = this as unknown as Dispositivo;\n      this.filhos.splice(posicao, 0, filho);\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        return;\n      }\n      this.filhos.forEach(filho => {\n        if (\n          (isDispositivoAlteracao(filho) && isAntesDoPrimeiroDispositivoOriginal(filho)) ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        ) {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          const novoId = buildId(filho);\n          if (filho.id !== novoId) {\n            getDispositivoAndFilhosAsLista(filho).forEach(d => (d.id = buildId(d)));\n          }\n        } else {\n          //filho.createRotulo(filho);\n        }\n      });\n    }\n  };\n}\n","// import { TipoDispositivo } from './../tipo/tipoDispositivo';\nimport { addSpaceRegex, primeiraLetraMaiuscula, StringBuilder } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { irmaosMesmoTipo, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport {\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaRomano,\n  converteNumeroRomanoParaArabico,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoValida,\n  isNumeracaoZero,\n  isRomano,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAgrupadorLcp95';\n    numero?: string;\n    rotulo?: string;\n    informouAgrupadorUnico = false;\n    private getNomeAgrupadorUnico(dispositivo: Dispositivo): string {\n      const label = `${dispositivo.descricao} Únic${dispositivo.artigoDefinido}`;\n      return !['Secao', 'Subsecao'].includes(dispositivo.tipo) ? label.toUpperCase() : label;\n    }\n\n    private normalizaNumeracao(numero: string): string {\n      const numeracao = numero.split(' ')[1] ?? numero;\n      const num = /[CDILMVX]+(-[a-zA-Z]+)*/.exec(numeracao);\n      return num ? num[0] : addSpaceRegex(numeracao).trim().replace(/-$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      if (!rotulo || ['parte', 'livro', 'título', 'capítulo', 'seção', 'subseção'].some(s => s === rotulo.toLowerCase())) {\n        return;\n      }\n      this.informouAgrupadorUnico = /.*[uú]nic[ao]/i.test(rotulo);\n      if (this.informouAgrupadorUnico) {\n        this.numero = '1';\n      } else {\n        const numAux = this.normalizaNumeracao(rotulo!);\n        if (!numAux) {\n          this.numero = undefined;\n          return;\n        }\n        const temp = trataNumeroAndComplemento(numAux, isNumeracaoZero(rotulo) ? null : converteNumeroRomanoParaArabico, converteLetrasComplementoParaNumero);\n        this.numero = isNumeracaoValida(temp) ? temp : undefined;\n      }\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      // const prefixo = dispositivo.descricao === undefined ? dispositivo.name ?? '' : dispositivo.descricao.toLocaleUpperCase();\n      const prefixo =\n        dispositivo.descricao === undefined\n          ? dispositivo.name ?? ''\n          : ['Secao', 'Subsecao'].includes(dispositivo.tipo)\n          ? dispositivo.descricao\n          : dispositivo.descricao.toLocaleUpperCase();\n\n      if (\n        this.numero === undefined ||\n        (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          (dispositivo.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n          dispositivo.pai?.tipo === 'Articulacao')\n      ) {\n        this.rotulo = prefixo; //TipoDispositivo[dispositivo.tipo.toLowerCase()].descricao?.toUpperCase() ?? dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = prefixo + ' ' + this.numero;\n      } else if (dispositivo.isDispositivoAlteracao && isDispositivoCabecaAlteracao(dispositivo)) {\n        this.rotulo = this.informouAgrupadorUnico\n          ? this.getNomeAgrupadorUnico(dispositivo)\n          : prefixo +\n            ' ' +\n            trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined);\n      } else {\n        irmaosMesmoTipo(dispositivo).length === 1 && !(dispositivo.pai?.situacao as DispositivoAdicionado).existeNaNormaAlterada\n          ? (this.rotulo = this.getNomeAgrupadorUnico(dispositivo))\n          : (this.rotulo =\n              prefixo +\n              ' ' +\n              trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined));\n      }\n    }\n\n    setMaiusculaPrimeiraLetraDaDescricao(s: string): string {\n      const partes = s.split('-');\n      const [main, ...remaining] = partes!;\n      const palavras = main.toLocaleLowerCase().split(' ');\n\n      for (let i = 0; i < palavras.length; i++) {\n        palavras[i] = isRomano(palavras[i]) ? palavras[1].toUpperCase() : primeiraLetraMaiuscula(palavras[i]);\n      }\n\n      return palavras.join(' ') + (remaining.length > 0 ? '-' + remaining.join('') : '');\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerado]';\n      }\n      const numeracao = this.rotulo!.trim().replace(/^.+? +/, '');\n      return numeracao.toLowerCase().startsWith('únic') ? this.setMaiusculaPrimeiraLetraDaDescricao(numeracao) : numeracao;\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      const sb = new StringBuilder();\n\n      sb.append(this.setMaiusculaPrimeiraLetraDaDescricao(this.rotulo!));\n\n      return sb.toString();\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoIndisponivel<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return '';\n    }\n  };\n}\n","import { Referencia } from '../../elemento';\nimport { TEXTO_OMISSIS } from '../conteudo/textoOmissis';\nimport { atualizarTextoElementoAction } from './atualizarTextoElementoAction';\nimport { ElementoAction } from './index';\n\nexport const ADICIONAR_TEXTO_OMISSIS = 'ADICIONAR_TEXTO_OMISSIS';\n\nexport class AdicionarTextoOmissisAction implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Linha pontilhada';\n  }\n\n  execute(atual: Referencia): any {\n    atual.conteudo!.texto = TEXTO_OMISSIS;\n    return atualizarTextoElementoAction.execute(atual);\n  }\n}\n\nexport const adicionarTextoOmissisAction = new AdicionarTextoOmissisAction();\n","import { Referencia } from '../../elemento';\nimport { atualizarTextoElementoAction } from './atualizarTextoElementoAction';\nimport { ElementoAction } from './index';\n\nexport const REMOVER_TEXTO_OMISSIS = 'REMOVER_TEXTO_OMISSIS';\n\nexport class RemoverTextoOmissisAction implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Remover linha pontilhada';\n  }\n\n  execute(atual: Referencia): any {\n    atual.conteudo!.texto = '';\n    return atualizarTextoElementoAction.execute(atual);\n  }\n}\n\nexport const removerTextoOmissisAction = new RemoverTextoOmissisAction();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const ACEITAR_REVISAO = 'ACEITAR_REVISAO';\n\nexport class AceitarRevisao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Aceitar revisão';\n  }\n\n  execute(elemento: Elemento, revisao: any): any {\n    return {\n      type: ACEITAR_REVISAO,\n      elemento,\n      revisao,\n    };\n  }\n}\n\nexport const aceitarRevisaoAction = new AceitarRevisao();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const REJEITAR_REVISAO = 'REJEITAR_REVISAO';\n\nexport class RejeitarRevisao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Rejeitar revisão';\n  }\n\n  execute(elemento: Elemento, revisao: any): any {\n    return {\n      type: REJEITAR_REVISAO,\n      elemento,\n      revisao,\n    };\n  }\n}\n\nexport const rejeitarRevisaoAction = new RejeitarRevisao();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const EXIBIR_DIFERENCA = 'EXIBIR_DIFERENCA';\n\nexport class ExibirDiferenca implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Exibir diferenças';\n  }\n\n  execute(elemento: Elemento): any {\n    return {\n      type: EXIBIR_DIFERENCA,\n      elemento,\n    };\n  }\n}\n\nexport const exibirDiferencaAction = new ExibirDiferenca();\n","import { adicionarAgrupadorArtigoAction, adicionarAgrupadorArtigoAntesAction } from './adicionarAgrupadorArtigoAction';\nimport { atualizarNotaAlteracaoAction } from './atualizarNotaAlteracaoAction';\nimport { Referencia } from '../../elemento';\nimport {\n  adicionarAlinea,\n  adicionarAlineaAntes,\n  adicionarAlineaDepois,\n  adicionarAlineaFilho,\n  adicionarArtigo,\n  adicionarArtigoAntes,\n  adicionarArtigoDepois,\n  adicionarElementoAction,\n  adicionarInciso,\n  adicionarIncisoAntes,\n  adicionarIncisoDepois,\n  adicionarIncisoFilho,\n  adicionarItem,\n  adicionarItemAntes,\n  adicionarItemDepois,\n  adicionarItemFilho,\n  adicionarParagrafo,\n  adicionarParagrafoAntes,\n  adicionarParagrafoDepois,\n  adicionarParagrafoFilho,\n} from './adicionarElementoAction';\nimport { adicionarCapitulo, adicionarLivro, adicionarParte, adicionarSecao, adicionarSubsecao, adicionarTitulo, AgruparElemento } from './agruparElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from './blocoAlteracaoAction';\nimport { InformarDadosAssistenteAction } from './informarDadosAssistenteAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from './informarExistenciaDoElementoNaNormaAction';\nimport { informarNormaAction } from './informarNormaAction';\nimport { moverElementoAbaixoAction } from './moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from './moverElementoAcimaAction';\nimport { removerElementoAction } from './removerElementoAction';\nimport { renumerarElementoAction } from './renumerarElementoAction';\nimport { restaurarElementoAction } from './restaurarElemento';\nimport { suprimirAgrupadorAction } from './suprimirAgrupador';\nimport { suprimirElementoAction } from './suprimirElemento';\nimport {\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  transformarEmOmissisAlinea,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarEmOmissisItem,\n  transformarEmOmissisParagrafo,\n  transformarGenericoEmAlinea,\n  transformarGenericoEmInciso,\n  transformarGenericoEmItem,\n  transformarIncisoCaputEmAlinea,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmAlinea,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarItemEmAlinea,\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from './transformarElementoAction';\nimport { validarArticulacaAction } from './validarArticulacaoAction';\nimport { validarElementoAction } from './validarElementoAction';\nimport { adicionarTextoOmissisAction } from './adicionarTextoOmissisAction';\nimport { removerTextoOmissisAction } from './removerTextoOmissisAction';\nimport { aceitarRevisaoAction } from './aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from './rejeitarRevisaoAction';\nimport { exibirDiferencaAction } from './exibirDiferencaAction';\n\nexport interface ElementoAction {\n  descricao?: string;\n  tipo?: string;\n  hotkey?: string;\n  execute(atual: Referencia, conteudo?: string, novo?: Referencia, ...outros: any): any;\n}\n\nexport const acoesMenu: ElementoAction[] = [];\n\nacoesMenu.push(informarNormaAction);\nacoesMenu.push(InformarDadosAssistenteAction);\nacoesMenu.push(considerarElementoExistenteNaNorma);\nacoesMenu.push(considerarElementoNovoNaNorma);\nacoesMenu.push(atualizarNotaAlteracaoAction);\nacoesMenu.push(moverElementoAbaixoAction);\nacoesMenu.push(moverElementoAcimaAction);\nacoesMenu.push(renumerarElementoAction);\nacoesMenu.push(iniciarBlocoAlteracao);\nacoesMenu.push(finalizarBlocoAlteracao);\nacoesMenu.push(transformarEmOmissisAlinea);\nacoesMenu.push(transformarEmOmissisIncisoCaput);\nacoesMenu.push(transformarEmOmissisItem);\nacoesMenu.push(transformarEmOmissisParagrafo);\nacoesMenu.push(transformarEmOmissisIncisoParagrafo);\n\nacoesMenu.push(transformarAlineaEmIncisoCaput);\nacoesMenu.push(transformarAlineaEmIncisoParagrafo);\nacoesMenu.push(transformaAlineaEmItem);\nacoesMenu.push(transformarArtigoEmParagrafo);\nacoesMenu.push(transformarGenericoEmInciso);\nacoesMenu.push(transformarGenericoEmAlinea);\nacoesMenu.push(transformarGenericoEmItem);\nacoesMenu.push(transformarIncisoParagrafoEmAlinea);\nacoesMenu.push(transformarIncisoParagrafoEmParagrafo);\nacoesMenu.push(transformarItemEmAlinea);\nacoesMenu.push(transformarIncisoCaputEmParagrafo);\nacoesMenu.push(transformarIncisoCaputEmAlinea);\n\nacoesMenu.push(transformarOmissisEmAlinea);\nacoesMenu.push(transformarOmissisEmArtigo);\nacoesMenu.push(transformarOmissisEmIncisoCaput);\nacoesMenu.push(transformarOmissisEmIncisoParagrafo);\nacoesMenu.push(transformarOmissisEmItem);\nacoesMenu.push(transformarOmissisEmParagrafo);\nacoesMenu.push(transformarParagrafoEmArtigo);\nacoesMenu.push(transformarParagrafoEmIncisoParagrafo);\nacoesMenu.push(transformarParagrafoEmIncisoCaput);\nacoesMenu.push(removerElementoAction);\nacoesMenu.push(restaurarElementoAction);\nacoesMenu.push(suprimirElementoAction);\nacoesMenu.push(suprimirAgrupadorAction);\nacoesMenu.push(validarElementoAction);\nacoesMenu.push(adicionarParte);\nacoesMenu.push(adicionarLivro);\nacoesMenu.push(adicionarTitulo);\nacoesMenu.push(adicionarCapitulo);\nacoesMenu.push(adicionarSecao);\nacoesMenu.push(adicionarSubsecao);\n\nacoesMenu.push(adicionarArtigoAntes);\nacoesMenu.push(adicionarArtigoDepois);\nacoesMenu.push(adicionarIncisoAntes);\nacoesMenu.push(adicionarIncisoDepois);\nacoesMenu.push(adicionarIncisoFilho);\nacoesMenu.push(adicionarAlineaAntes);\nacoesMenu.push(adicionarAlineaDepois);\nacoesMenu.push(adicionarAlineaFilho);\nacoesMenu.push(adicionarItemAntes);\nacoesMenu.push(adicionarItemDepois);\nacoesMenu.push(adicionarItemFilho);\nacoesMenu.push(adicionarParagrafoAntes);\nacoesMenu.push(adicionarParagrafoDepois);\nacoesMenu.push(adicionarParagrafoFilho);\n\nacoesMenu.push(adicionarAgrupadorArtigoAction);\nacoesMenu.push(adicionarAgrupadorArtigoAntesAction);\nacoesMenu.push(adicionarTextoOmissisAction);\nacoesMenu.push(removerTextoOmissisAction);\n\nacoesMenu.push(aceitarRevisaoAction);\nacoesMenu.push(rejeitarRevisaoAction);\n\nacoesMenu.push(exibirDiferencaAction);\n\nexport const acoesExclusivasEdicao: ElementoAction[] = [];\nacoesExclusivasEdicao.push(adicionarElementoAction);\nacoesExclusivasEdicao.push(adicionarArtigo);\nacoesExclusivasEdicao.push(adicionarInciso);\nacoesExclusivasEdicao.push(adicionarParagrafo);\nacoesExclusivasEdicao.push(adicionarItem);\nacoesExclusivasEdicao.push(adicionarAlinea);\n\nexport const isAcaoMenu = (acao: ElementoAction): boolean => {\n  return acoesMenu.includes(acao);\n};\n\nexport const acoesDisponiveis = [...acoesMenu, ...acoesExclusivasEdicao, validarArticulacaAction];\n\nexport const getAcao = (descricao: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao.descricao === descricao.trim())[0];\n};\n\nexport const getAcaoAgrupamento = (tipo: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao instanceof AgruparElemento && acao.tipo === tipo)[0];\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\nimport { getDispositivoAnterior, getDispositivoPosterior, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const podeConverterEmOmissis = (dispositivo: Dispositivo): boolean => {\n  return (\n    isDispositivoAlteracao(dispositivo.pai!) &&\n    dispositivo.filhos.length === 0 &&\n    dispositivo.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoAnterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoPosterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name\n  );\n};\n\nexport const removeAcaoExclusaoDispositivo = (acoes: any[]): void => {\n  const i: number = acoes.findIndex((acao: ElementoAction) => acao.descricao === 'Remover dispositivo');\n  if (i > -1) {\n    acoes = acoes.slice(i, 1);\n  }\n};\n\nexport const hasApenasDispositivosIrmaosNovos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.pai!.filhos?.filter(f => f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === 0;\n};\n\nexport enum MotivosOperacaoNaoPermitida {\n  AGRUPADOR = 'Não é possível mover agrupadores de artigo.',\n  ORIGINAL = 'Não é possível mover um dispositivo original.',\n  PROXIMO_DIFERENTE_PARAGRAFO = 'O próximo dispositivo não é um parágrafo.',\n  PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA = 'O tipo do próximo dispositivo não corresponde ao tipo do dispositivo atual (alteração de norma).',\n  PROXIMO_DIFERENTE_ALINEA = 'O próximo dispositivo não é uma alínea.',\n  PROXIMO_DIFERENTE_INCISO = 'O próximo dispositivo não é um inciso.',\n}\n","import { Mensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent } from '../../state';\n\nconst count = 0;\n\nexport const buildPast = (state: any, events: any): StateEvent[] => {\n  const past = state.past ? state.past : [];\n  past.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? past.shift() : past;\n};\n\nexport const buildFuture = (state: any, events: any): StateEvent[] => {\n  const future = state.future ? state.future : [];\n  future.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? future.shift() : future;\n};\n\nexport const retornaEstadoAtualComMensagem = (state: any, mensagem: Mensagem): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: state.ui?.events,\n      message: mensagem,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\nimport { retornaEstadoAtualComMensagem } from '../../../redux/elemento/util/stateReducerUtil';\nimport { State } from '../../../redux/state';\nimport { TipoMensagem } from '../util/mensagem';\nimport { MotivosOperacaoNaoPermitida } from '../regras/regrasUtil';\n\nexport const normalizaNomeAcaoTransformacao = (dispositivo: Dispositivo, tipo: string): any => {\n  let t: string;\n\n  if (tipo.endsWith('EmOmissis')) {\n    const tipoDispositivo = tipo.replace('transformar', '').replace('EmOmissis', '');\n    t = 'transformar' + tipoDispositivo + 'EmOmissis' + tipoDispositivo;\n  } else {\n    t = tipo;\n  }\n\n  const acoes: any = dispositivo\n    .getAcoesPossiveis(dispositivo)\n    .filter(a => a instanceof TransformarElemento)\n    .filter((a: any) => a.nomeAcao === tipo || a.nomeAcao.replaceAll('IncisoCaput', 'Inciso').replaceAll('IncisoParagrafo', 'Inciso') === t);\n\n  return acoes[0]?.nomeAcao;\n};\n\nexport const isAcaoPermitida = (dispositivo: Dispositivo, tipo: any): boolean => {\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof tipo).length > 0;\n};\n\nexport const isAcaoTransformacaoPermitida = (dispositivo: Dispositivo, action: any): boolean => {\n  const nomeAcao = normalizaNomeAcaoTransformacao(dispositivo, action.subType);\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof TransformarElemento && a.nomeAcao && a.nomeAcao === nomeAcao).length > 0;\n};\n\nexport const montaEMostraMensagensErro = (dispositivo: Dispositivo, state: any): State => {\n  if (dispositivo.situacao.descricaoSituacao === 'Dispositivo Original') {\n    verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.ORIGINAL);\n  }\n  return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Operação não permitida. <br>' + buildMessages(dispositivo.motivosOperacaoNaoPermitida!) });\n};\n\nexport const buildMessages = (mensagens: string[]): string => (mensagens !== undefined ? mensagens.join('<br>') : '');\n\nexport const verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida = (dispositivo: Dispositivo, motivo: string) => {\n  if (dispositivo.motivosOperacaoNaoPermitida !== undefined) {\n    if (!dispositivo.motivosOperacaoNaoPermitida.includes(motivo)) {\n      dispositivo.motivosOperacaoNaoPermitida.push(motivo);\n    }\n  } else {\n    dispositivo.motivosOperacaoNaoPermitida = [];\n    dispositivo.motivosOperacaoNaoPermitida.push(motivo);\n  }\n};\n","import { DescricaoSituacao } from './../../dispositivo/situacao';\n// import { adicionarAgrupadorArtigoAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isArticulacao } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { adicionarAgrupadorArtigoAction } from '../acao/adicionarAgrupadorArtigoAction';\nimport { adicionarArtigoAntes, adicionarArtigoDepois } from '../acao/adicionarElementoAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosterioresMesmoTipo,\n  hasAgrupador,\n  isDispositivoAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { MotivosOperacaoNaoPermitida } from './regrasUtil';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\n\nexport function RegrasAgrupadores<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n      if (!isAgrupador(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarArtigoAntes);\n      acoes.push(adicionarArtigoDepois);\n\n      if (\n        getDispositivosAnterioresMesmoTipo(dispositivo).length === 0 &&\n        getDispositivosPosterioresMesmoTipo(dispositivo).length > 0 &&\n        hasAgrupador(dispositivo) &&\n        dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n      ) {\n        //\n      } else {\n        acoes.push(removerElementoAction);\n      }\n\n      if (dispositivo.pai && isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && getDispositivoAnteriorMesmoTipo(dispositivo) === undefined) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (dispositivo.pai && !isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && dispositivo.pai!.indexOf(dispositivo) === 0) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      /*       if (dispositivo.pai && dispositivo.pai!.indexOf(dispositivo) > 0 && isAgrupador(dispositivo.pai!) && !isArticulacao(dispositivo.pai)) {\n        acoes.push(getAcaoAgrupamento(dispositivo.pai!.tipo));\n      } */\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n\n      acoes.push(adicionarAgrupadorArtigoAction);\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.AGRUPADOR);\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\n\nexport class DispositivoNovo implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_NOVO;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from './../acao/agruparElementoAction';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport class DispositivoAdicionado extends DispositivoNovo {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  tipoEmenda = ClassificacaoDocumento.EMENDA;\n  existeNaNormaAlterada?;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Situacao } from '../../dispositivo/situacao';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport function SituacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Situacao {\n    situacao = new DispositivoNovo();\n\n    getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n      return this.situacao?.getAcoesPermitidas(dispositivo, acoes);\n    }\n  };\n}\n","import { Genero } from '../../dispositivo/genero';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from './tipoDispositivo';\n\nexport class TipoLexml implements Tipo {\n  tipo: string;\n  name?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n  genero?: Genero;\n\n  tagId?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n\n  constructor(tipo: string) {\n    this.tipo = TipoDispositivo[tipo].tipo;\n    this.tagId = TipoDispositivo[tipo].tagId;\n    this.name = TipoDispositivo[tipo].name;\n    this.descricao = TipoDispositivo[tipo].descricao;\n    this.descricaoPlural = TipoDispositivo[tipo].descricaoPlural;\n\n    this.tiposPermitidosPai = TipoDispositivo[tipo].tiposPermitidosPai;\n    this.tiposPermitidosFilhos = TipoDispositivo[tipo].tiposPermitidosFilhos;\n\n    this.tipoProvavelFilho = TipoDispositivo[tipo].tipoProvavelFilho;\n\n    this.INDICADOR_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_SEQUENCIA;\n    this.INDICADOR_FIM_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_FIM_SEQUENCIA;\n    this.INDICADOR_DESDOBRAMENTO = TipoDispositivo[tipo].INDICADOR_DESDOBRAMENTO;\n  }\n}\n","import { isDispositivoCabecaAlteracao } from './../hierarquia/hierarquiaUtil';\n/* eslint-disable indent */\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo } from '../../dispositivo/tipo';\nimport { hasIndicativoFimAlteracao, normalizaSeForOmissis } from '../conteudo/conteudoUtil';\nimport {\n  getArtigo,\n  getDispositivoAnterior,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { criaDispositivo } from './dispositivoLexmlFactory';\nimport { validaDispositivo } from './dispositivoValidator';\n\nconst converteFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (destino.tipoProvavelFilho! === undefined) {\n    return;\n  }\n  atual.filhos.forEach((filho, index) => {\n    const novo = criaDispositivo(\n      isArtigo(destino) && TipoDispositivo.inciso.name === destino.tipoProvavelFilho! ? (destino as Artigo).caput! : destino,\n      destino.tipoProvavelFilho!\n    );\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    novo.mensagens = validaDispositivo(novo);\n    novo.createRotulo(novo);\n    filho.filhos ? converteFilhos(filho, novo) : undefined;\n    index === atual.filhos.length - 1 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const converteDispositivo = (atual: Dispositivo, action: any): Dispositivo => {\n  const paiAtual = atual.pai;\n  let novo: Dispositivo;\n  let paiNovo: Dispositivo;\n\n  switch (action.subType) {\n    case 'transformarAlineaEmItem':\n    case 'transformarIncisoCaputEmAlinea':\n    case 'transformarIncisoParagrafoEmAlinea':\n    case 'transformarParagrafoEmIncisoParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarDispositivoGenericoEmInciso':\n    case 'transformarDispositivoGenericoEmAlinea':\n    case 'transformarDispositivoGenericoEmItem':\n    case 'transformarOmissisEmAlinea':\n    case 'transformarOmissisEmArtigo':\n    case 'transformarOmissisEmIncisoCaput':\n    case 'transformarOmissisEmIncisoParagrafo':\n    case 'transformarOmissisEmItem':\n    case 'transformarOmissisEmParagrafo':\n    case 'transformarAlineaEmOmissisAlinea':\n    case 'transformarItemEmOmissisItem':\n    case 'transformarParagrafoEmOmissisParagrafo':\n    case 'transformarIncisoCaputEmOmissisIncisoCaput':\n    case 'transformarIncisoParagrafoEmOmissisIncisoParagrafo':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo(paiAtual!, action.novo.tipo, undefined, paiAtual?.indexOf(atual));\n      break;\n    case 'transformarParagrafoEmInciso':\n      if (isParagrafo(atual) && (isPrimeiroMesmoTipo(atual) || isUnicoMesmoTipo(atual))) {\n        paiNovo = paiAtual!;\n        novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n        break;\n      }\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarParagrafoEmIncisoCaput':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n      break;\n    case 'transformarArtigoEmParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    default:\n      paiNovo = atual.pai!.pai!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo, atual.pai!);\n      break;\n  }\n  novo!.texto = action.atual.conteudo?.texto ?? atual.texto;\n  novo.createRotulo(novo);\n  novo.situacao = atual.situacao;\n  if (isDispositivoCabecaAlteracao(novo)) {\n    novo.notaAlteracao = 'NR';\n  }\n  novo.mensagens = validaDispositivo(novo);\n  paiAtual?.removeFilho(atual);\n  paiAtual?.renumeraFilhos();\n  paiNovo?.renumeraFilhos();\n  converteFilhos(atual, novo!);\n\n  return novo!;\n};\n\nexport const copiaFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (atual.tipo !== destino.tipo) {\n    return;\n  }\n  atual.filhos.forEach(filho => {\n    const novo = criaDispositivo(isArtigo(destino) && isCaput(filho.pai!) ? (destino as Artigo).caput! : destino, filho.tipo);\n    filho.rotulo ? (novo.rotulo = filho.rotulo) : novo.createRotulo(novo);\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    atual.removeFilho(filho);\n    novo.mensagens = validaDispositivo(filho);\n\n    filho.filhos ? (atual.tipo === destino.tipo ? copiaFilhos(filho, novo) : converteFilhos(filho, novo)) : undefined;\n\n    atual.filhos.length === 0 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const podeSerUltimaalteracao = (dispositivo: Dispositivo, action: any): boolean => {\n  if (!isDispositivoAlteracao(dispositivo)) {\n    return false;\n  }\n  const artigo = getArtigo(dispositivo);\n  return isUltimoMesmoTipo(artigo) && hasIndicativoFimAlteracao(normalizaSeForOmissis(action.atual?.conteudo?.texto ?? '')) && isUltimaAlteracao(dispositivo);\n};\n","import { Counter } from '../../../util/counter';\nimport { generateUUID } from '../../../util/uuid';\nimport { Alteracoes } from '../../dispositivo/blocoAlteracao';\nimport { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { GeneroFeminino, GeneroIndefinido, GeneroMasculino } from '../../dispositivo/genero';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArtigo, isEmenta, isInciso, isIncisoCaput, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ValidacaoDispositivo } from '../../dispositivo/validacao';\nimport { FINALIZAR_BLOCO, INICIAR_BLOCO } from '../acao/blocoAlteracaoAction';\nimport { BlocoAlteracaoNaoPermitido } from '../alteracao/blocoAlteracaoNaoPermitido';\nimport { BlocoAlteracaoPermitido } from '../alteracao/BlocoAlteracaoPermitido';\nimport { ConteudoDispositivo } from '../conteudo/conteudoDispositivo';\nimport { ConteudoOmissis } from '../conteudo/conteudoOmissis';\nimport {\n  hasIndicativoContinuacaoSequencia,\n  hasIndicativoDesdobramento,\n  hasIndicativoFinalSequencia,\n  hasIndicativoInicioAlteracao,\n  normalizaSeForOmissis,\n} from '../conteudo/conteudoUtil';\nimport { HierarquiaAgrupador } from '../hierarquia/hierarquiaAgrupador';\nimport { HierarquiaArtigo } from '../hierarquia/hierarquiaArtigo';\nimport { HierarquiaDispositivo } from '../hierarquia/hierarquiaDispositivo';\nimport { getArticulacao, hasFilhos, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { NumeracaoAgrupador } from '../numeracao/numeracaoAgrupador';\nimport { NumeracaoAlinea } from '../numeracao/numeracaoAlinea';\nimport { NumeracaoArtigo } from '../numeracao/numeracaoArtigo';\nimport { NumeracaoCaput } from '../numeracao/numeracaoCaput';\nimport { NumeracaoGenerico } from '../numeracao/numeracaoGenerico';\nimport { NumeracaoInciso } from '../numeracao/numeracaoInciso';\nimport { NumeracaoIndisponivel } from '../numeracao/numeracaoIndisponivel';\nimport { NumeracaoItem } from '../numeracao/numeracaoItem';\nimport { NumeracaoParagrafo } from '../numeracao/numeracaoParagrafo';\nimport { RegrasAgrupadores } from '../regras/regrasAgrupadores';\nimport { RegrasAlinea } from '../regras/regrasAlinea';\nimport { RegrasArtigo } from '../regras/regrasArtigo';\nimport { RegrasCaput } from '../regras/regrasCaput';\nimport { RegrasDispositivoGenerico } from '../regras/regrasDispositivoGenerico';\nimport { RegrasEmenta } from '../regras/regrasEmenta';\nimport { RegrasInciso } from '../regras/regrasInciso';\nimport { RegrasItem } from '../regras/regrasItem';\nimport { RegrasOmissis } from '../regras/regrasOmissis';\nimport { RegrasParagrafo } from '../regras/regrasParagrafo';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { SituacaoDispositivo } from '../situacao/situacaoDispositivo';\nimport { TipoArticulacao } from '../tipo/tipoArticulacao';\nimport { TipoArtigo } from '../tipo/tipoArtigo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TipoLexml } from '../tipo/tipoLexml';\nimport { TipoMensagem } from '../util/mensagem';\nimport { podeSerUltimaalteracao } from './dispositivoLexmlUtil';\n\nconst AlineaLexml = SituacaoDispositivo(\n  RegrasAlinea(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAlinea(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArtigoLexml = SituacaoDispositivo(RegrasArtigo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoPermitido(NumeracaoArtigo(HierarquiaArtigo(TipoArtigo)))))));\nconst CaputLexml = SituacaoDispositivo(\n  RegrasCaput(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoCaput(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst DispositivoGenericoLexml = SituacaoDispositivo(\n  RegrasDispositivoGenerico(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoGenerico(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst IncisoLexml = SituacaoDispositivo(\n  RegrasInciso(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoInciso(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ItemLexml = SituacaoDispositivo(\n  RegrasItem(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoItem(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ParagrafoLexml = SituacaoDispositivo(\n  RegrasParagrafo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoParagrafo(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArticulacaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoArticulacao)))))))\n);\nconst CapituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst DispositivoAgrupadorGenericoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst LivroLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst ParteLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SubsecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst TituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\n\nconst OmissisLexml = SituacaoDispositivo(RegrasOmissis(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoOmissis(NumeracaoIndisponivel(HierarquiaDispositivo(TipoLexml)))))));\n\nconst EmentaLexml = SituacaoDispositivo(RegrasEmenta(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoIndisponivel(HierarquiaDispositivo(TipoLexml)))))));\n\nexport const criaDispositivo = (parent: Dispositivo, tipo: string, referencia?: Dispositivo, posicao?: number): Dispositivo => {\n  const dispositivo = create(tipo, parent);\n  posicao !== undefined && posicao >= 0 ? parent!.addFilhoOnPosition(dispositivo, posicao) : referencia ? parent!.addFilho(dispositivo, referencia) : parent!.addFilho(dispositivo);\n\n  return dispositivo;\n};\n\nconst create = (name: string, parent: Dispositivo): Dispositivo => {\n  let dispositivo: Dispositivo;\n\n  switch (name.toLowerCase()) {\n    case 'alinea':\n      dispositivo = new AlineaLexml(name.toLowerCase());\n      break;\n    case 'artigo':\n      dispositivo = new ArtigoLexml();\n      (dispositivo as Artigo).caput = create(TipoDispositivo.caput.tipo, dispositivo);\n      break;\n    case 'capitulo':\n      dispositivo = new CapituloLexml(name.toLowerCase());\n      break;\n    case 'caput':\n      dispositivo = new CaputLexml(name.toLowerCase());\n      break;\n    case 'inciso':\n      dispositivo = new IncisoLexml(name.toLowerCase());\n      break;\n    case 'item':\n      dispositivo = new ItemLexml(name.toLowerCase());\n      break;\n    case 'livro':\n      dispositivo = new LivroLexml(name.toLowerCase());\n      break;\n    case 'omissis':\n      dispositivo = new OmissisLexml(name.toLowerCase());\n      break;\n    case 'paragrafo':\n      dispositivo = new ParagrafoLexml(name.toLowerCase());\n      break;\n    case 'parte':\n      dispositivo = new ParteLexml(name.toLowerCase());\n      break;\n    case 'secao':\n      dispositivo = new SecaoLexml(name.toLowerCase());\n      break;\n    case 'subsecao':\n      dispositivo = new SubsecaoLexml(name.toLowerCase());\n      break;\n    case 'titulo':\n      dispositivo = new TituloLexml(name.toLowerCase());\n      break;\n    case 'ementa':\n      dispositivo = new EmentaLexml(name.toLowerCase());\n      break;\n    default: {\n      dispositivo = parent && isAgrupador(parent) ? new DispositivoAgrupadorGenericoLexml('agrupadorGenerico') : new DispositivoGenericoLexml('generico');\n      dispositivo.mensagens = [];\n      dispositivo.mensagens.push({ tipo: TipoMensagem.WARNING, descricao: 'Não foi possível validar a natureza deste dispositivo com base na legislação vigente' });\n    }\n  }\n\n  dispositivo.uuid = Counter.next();\n  dispositivo.uuid2 = generateUUID();\n  dispositivo.name = name;\n  dispositivo.pai = isInciso(dispositivo) && isArtigo(parent) ? (parent as Artigo).caput : parent;\n  dispositivo.isDispositivoAlteracao = isDispositivoAlteracao(dispositivo);\n\n  desativaRotuloAutomaticoSeDispositivoAlteracao(dispositivo);\n\n  return dispositivo;\n};\n\nexport const createArticulacao = (): Articulacao => {\n  const articulacao = new ArticulacaoLexml();\n  articulacao.uuid = Counter.next();\n  articulacao.uuid2 = generateUUID();\n  return articulacao;\n};\n\nexport const createAlteracao = (atual: Artigo): void => {\n  atual.alteracoes = createArticulacao();\n  atual.alteracoes.pai = atual;\n};\n\nexport const createByInferencia = (referencia: Dispositivo, action: any): Dispositivo => {\n  let novo;\n\n  if (isDispositivoAlteracao(referencia)) {\n    if (action.subType === INICIAR_BLOCO) {\n      novo = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, getArticulacao(referencia));\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else if (action.subType === FINALIZAR_BLOCO) {\n      const ref = getArticulacao(referencia);\n      novo = createFromReferencia(ref.pai!);\n      novo!.texto = normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else if (podeSerUltimaalteracao(referencia, action)) {\n      const ref = getArticulacao(referencia);\n      novo = action.subType === INICIAR_BLOCO ? criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, ref!) : createFromReferencia(ref.pai!);\n      novo!.texto = action.subType === INICIAR_BLOCO ? '' : normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else {\n      novo = createFromReferencia(referencia);\n      novo.createRotulo();\n      novo!.texto = action.novo?.conteudo?.texto?.length > 0 ? normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '') : '';\n    }\n  } else {\n    if (referencia.alteracoes || hasIndicativoInicioAlteracao(action.atual?.conteudo?.texto) || action.novo?.isDispositivoAlteracao) {\n      if (!referencia.hasAlteracao()) {\n        createAlteracao(referencia);\n      }\n      novo = criaDispositivoCabecaAlteracao(referencia.tipo, referencia.alteracoes!);\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else {\n      novo = createFromReferencia(referencia);\n      novo!.texto = action.novo?.conteudo?.texto ?? '';\n    }\n  }\n  return novo;\n};\n\nexport const createFromReferencia = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.hasAlteracao()) {\n    return createWhenReferenciaBlocoAlteracao(referencia);\n  }\n\n  if (isArtigo(referencia)) {\n    if (!isDispositivoAlteracao(referencia)) {\n      return createWhenReferenciaIsArtigo(referencia);\n    }\n    return criaDispositivo((referencia as Artigo).caput!, TipoDispositivo.inciso.tipo, undefined, 0);\n  }\n\n  if (isAgrupador(referencia)) {\n    return createWhenReferenciaIsAgrupador(referencia);\n  }\n\n  if (isDispositivoAlteracao(referencia)) {\n    if (isOmissis(referencia)) {\n      return criaDispositivo(referencia.pai!, isArtigo(referencia.pai!) ? TipoDispositivo.paragrafo.tipo : referencia.pai!.tipoProvavelFilho!, referencia);\n    }\n    return hasFilhos(referencia) || hasIndicativoDesdobramento(referencia)\n      ? criaDispositivo(referencia, referencia.tipoProvavelFilho!, referencia)\n      : criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n  }\n\n  if (isEmenta(referencia)) {\n    return criaDispositivo(referencia.pai!, TipoDispositivo.artigo.tipo, undefined, 0);\n  }\n\n  return createFromReferenciaDefault(referencia);\n};\n\nconst createWhenReferenciaBlocoAlteracao = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.pai!.isLastFilho(referencia) && referencia?.pai?.pai) {\n    return criaDispositivo(referencia.pai.pai, referencia.pai.tipo, referencia.pai);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createFromReferenciaDefault = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n  if (referencia.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL && hasIndicativoFinalSequencia(referencia) && referencia.pai!.isLastFilho(referencia)) {\n    if (isIncisoCaput(referencia)) {\n      const artigo: Artigo = referencia.pai!.pai! as Artigo;\n      return artigo!.filhos!.filter(filho => isParagrafo(filho)).length > 0\n        ? criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo, undefined, 0)\n        : criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo);\n    } else {\n      return criaDispositivo(referencia!.pai!.pai!, referencia.pai!.tipo, referencia!.pai!);\n    }\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsArtigo = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n\n    if (type === TipoDispositivo.inciso.tipo) {\n      const parent = (referencia as Artigo).caput;\n      return parent!.filhos!.length > 0 ? criaDispositivo(parent!, type, undefined, 0) : criaDispositivo(parent!, type);\n    }\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n\n  if (hasIndicativoContinuacaoSequencia(referencia) && referencia.filhos.length > 0 && isParagrafo(referencia.filhos[0])) {\n    return criaDispositivo(referencia!, TipoDispositivo.paragrafo.tipo, undefined, 0);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsAgrupador = (referencia: Dispositivo): Dispositivo => {\n  return criaDispositivo(referencia, TipoDispositivo.artigo.tipo, undefined, 0);\n};\n\nexport const criaDispositivoCabecaAlteracao = (tipo: string, alteracoes: Alteracoes, referencia?: Dispositivo, posicao?: number): Dispositivo => {\n  const dispositivo = criaDispositivo(alteracoes!, tipo, referencia, posicao);\n\n  dispositivo.situacao = new DispositivoAdicionado();\n  dispositivo.isDispositivoAlteracao = true;\n  dispositivo.notaAlteracao = 'NR';\n  dispositivo.createRotulo(dispositivo);\n\n  return dispositivo;\n};\n\nconst desativaRotuloAutomaticoSeDispositivoAlteracao = (dispositivo: Dispositivo): void => {\n  if (isDispositivoAlteracao(dispositivo)) {\n    // dispositivo.renumeraFilhos = (): void => undefined;\n    // if (isArtigo(dispositivo)) {\n    //   (dispositivo as Artigo).caput!.renumeraFilhos = (): void => undefined;\n    // }\n    getArticulacao(dispositivo).renumeraFilhos = (): void => undefined;\n    getArticulacao(dispositivo).renumeraArtigos = (): void => undefined;\n  }\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAlinea, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarAlineaAntes, adicionarAlineaDepois, adicionarItemFilho } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarEmOmissisAlinea,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { atualizarNotaAlteracaoAction } from './../acao/atualizarNotaAlteracaoAction';\nimport { podeEditarNotaAlteracao } from './../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isAlinea(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarAlineaAntes);\n      }\n\n      acoes.push(adicionarAlineaDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ALINEA);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ALINEA);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarItemFilho);\n      }\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput);\n      }\n      if (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getDispositivoAnterior(dispositivo)!))) {\n        acoes.push(transformaAlineaEmItem);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisAlinea);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport {\n  converteLetraParaNumeroArabico,\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaLetra,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoZero,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAlineaLcp95';\n    private SUFIXO = ')';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[a-z]+(-[a-zA-Z0-9]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\)$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      this.numero = trataNumeroAndComplemento(\n        this.normalizaNumeracao(rotulo!),\n        isNumeracaoZero(rotulo) ? null : converteLetraParaNumeroArabico,\n        converteLetrasComplementoParaNumero\n      );\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.alinea.name\n          : trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaLetra, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) +\n            this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerada]'; // TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + '';\n      }\n      return '“' + this.rotulo!.trim().replace(this.SUFIXO, '') + '”';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + ' [ainda não numerada]';\n      }\n      return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isAlinea, isArticulacao, isArtigo, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport {\n  adicionarArtigo,\n  adicionarArtigoAntes,\n  adicionarArtigoDepois,\n  adicionarElementoAction,\n  adicionarIncisoFilho,\n  adicionarParagrafoFilho,\n} from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { adicionarCapitulo } from '../acao/agruparElementoAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { InformarDadosAssistenteAction } from '../acao/informarDadosAssistenteAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { informarNormaAction } from '../acao/informarNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoDesdobramento } from '../conteudo/conteudoUtil';\nimport {\n  getAgrupadorPosterior,\n  getAgrupadoresAcima,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasAgrupadoresAcima,\n  hasAgrupadoresPosteriores,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isSuprimido,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao } from './../../dispositivo/tipo';\nimport { adicionarAgrupadorArtigoAntesAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { getProximoAgrupadorAposArtigo } from './../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida } from './regrasUtil';\n\nexport function RegrasArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isArtigo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarElementoAction);\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) || getProximoAgrupadorAposArtigo(dispositivo)) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) || isAgrupadorNaoArticulacao(dispositivo.pai!)) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA);\n      }\n\n      if (\n        !isDispositivoCabecaAlteracao(dispositivo) ||\n        !isDispositivoAlteracao(dispositivo) ||\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ||\n        dispositivo.numero !== '1'\n      ) {\n        acoes.push(adicionarArtigoAntes);\n      }\n      acoes.push(adicionarArtigoDepois);\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarParagrafoFilho);\n        acoes.push(adicionarIncisoFilho);\n      }\n\n      if (!isDispositivoAlteracao(dispositivo)) {\n        acoes.push(InformarDadosAssistenteAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (dispositivo.alteracoes && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n        acoes.push(informarNormaAction);\n      }\n      if (!dispositivo.hasAlteracao() && !isDispositivoAlteracao(dispositivo) && (dispositivo.texto.length === 0 || !hasIndicativoDesdobramento(dispositivo))) {\n        acoes.push(adicionarArtigo);\n      }\n      if (\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        !dispositivo.hasAlteracao() &&\n        !isDispositivoAlteracao(dispositivo) &&\n        !hasFilhos(dispositivo)\n      ) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n      if (\n        dispositivo.pai!.indexOf(dispositivo) > 0 &&\n        getDispositivoAnterior(dispositivo) !== undefined &&\n        !getDispositivoAnterior(dispositivo)?.hasAlteracao() &&\n        !isOmissis(getDispositivoAnterior(dispositivo)!) &&\n        (!isDispositivoAlteracao(dispositivo) || !getDispositivoAnterior(dispositivo) || !isAgrupador(getDispositivoAnterior(dispositivo)!))\n      ) {\n        acoes.push(transformarArtigoEmParagrafo);\n      }\n      if (dispositivo.pai && !isDispositivoAlteracao(dispositivo) && isArticulacao(dispositivo.pai) && dispositivo.pai!.filhos.filter(d => isAgrupador(d)).length === 0) {\n        acoes.push(adicionarCapitulo);\n      }\n      if (dispositivo.pai && isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai)) {\n        acoes.push(adicionarCapitulo);\n      }\n      if (!isDispositivoAlteracao(dispositivo) && dispositivo.pai && hasAgrupadoresPosteriores(dispositivo)) {\n        acoes.push(getAcaoAgrupamento(getAgrupadorPosterior(dispositivo).tipo));\n      }\n      if (!isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!)) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter((tipo, index) => (dispositivo.pai!.indexOf(dispositivo) > 0 ? index >= pos! : index > pos!))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (\n        !isDispositivoAlteracao(dispositivo) &&\n        isAgrupador(dispositivo.pai!) &&\n        !isArticulacao(dispositivo.pai!) &&\n        dispositivo.pai!.indexOf(dispositivo) > 0 &&\n        hasAgrupadoresAcima(dispositivo)\n      ) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n\n        const tiposExistentes = getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).reduce(\n          (lista: string[], dispositivo: Dispositivo) =>\n            lista.includes(dispositivo.tipo) && getAgrupadorPosterior(dispositivo) !== undefined ? lista : lista.concat(dispositivo.tipo),\n          []\n        );\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter(t => tiposExistentes.includes(t))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      acoes.push(adicionarAgrupadorArtigoAntesAction);\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isArtigo(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    alteracoes?: Alteracoes;\n\n    hasAlteracao(): boolean {\n      return this.alteracoes ? this.alteracoes.filhos?.length > 0 : false;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { getArticulacao, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isDispositivoAlteracao } from './../hierarquia/hierarquiaUtil';\nimport { converteLetrasComplementoParaNumero, converteNumeroArabicoParaLetra, isNumeracaoValida, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoArtigoLcp95';\n    PREFIXO = 'Art. ';\n    SUFIXO = 'º';\n    private ARTIGO_UNICO = 'Artigo único.';\n    numero?: string;\n    rotulo?: string;\n    informouArtigoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .replace(/[\"”“]/g, '')\n        .replace(/\\./g, '')\n        .replace(/artigo [uú]nico/i, '1')\n        .replace(/(art[.]{0,1})/i, '')\n        .replace(/[º]/i, '')\n        .trim();\n    }\n\n    private isNumeracaoComComplementoAlfabetico(numero: string): boolean {\n      return /^\\d{1,}[º]?(([-]?[a-zA-Z]+){0,2})$/.test(numero);\n    }\n\n    private isNumeracaoComComplementoNumerico(numero: string): boolean {\n      return /^\\d{1,}[º]?(([-]?[1-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouArtigoUnico = /.*[uú]nico/i.test(rotulo);\n      this.numero = this.informouArtigoUnico\n        ? '1'\n        : this.isNumeracaoComComplementoAlfabetico(temp)\n        ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero)\n        : this.isNumeracaoComComplementoNumerico(temp)\n        ? temp\n        : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (dispositivo === undefined) {\n        this.rotulo = TipoDispositivo.artigo.descricao;\n      } else if (\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        (dispositivo.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n        !isDispositivoAlteracao(dispositivo)\n      ) {\n        this.rotulo = 'Art.';\n      } else if (this.numero === undefined) {\n        this.rotulo = dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = this.PREFIXO + this.numero + this.SUFIXO;\n      } else if (isDispositivoCabecaAlteracao(dispositivo) || (isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!) && dispositivo.pai!.filhos.length === 1)) {\n        this.rotulo = this.informouArtigoUnico ? this.ARTIGO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo);\n      } else {\n        getArticulacao(dispositivo).artigos.length === 1\n          ? (this.rotulo = this.ARTIGO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(dispositivo: Dispositivo, paraComandoEmenda = false): string {\n      const partes = this.numero?.split('-');\n      const [num, ...remaining] = partes!;\n      const ordinal = +(num ?? '1') > 0 && parseInt(num ?? '1', 10) < 10;\n      return (\n        (ordinal ? num + this.SUFIXO : num) +\n        (remaining.length > 0\n          ? '-' +\n            remaining\n              ?.map(str => (dispositivo.isDispositivoAlteracao ? converteNumeroArabicoParaLetra(str) : str))\n              .join('-')\n              .toUpperCase()\n          : '') +\n        (!paraComandoEmenda && (!ordinal || remaining.length) ? '.' : '')\n      );\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerado]'; //TipoDispositivo.artigo.descricao?.toLowerCase() + '';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo único';\n      }\n      return this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.artigo.descricao?.toLowerCase() + ' [ainda não numerado]';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo único';\n      }\n      return 'art. ' + this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n  };\n}\n","import { isOmissis } from './../../dispositivo/tipo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isCaput, isInciso } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { isAntesDoPrimeiroDispositivoOriginal, isDispositivoAlteracao, podeRenumerarFilhosAutomaticamente } from './hierarquiaUtil';\n\nexport function HierarquiaArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _paragrafos?: Dispositivo[];\n\n    caput?: Dispositivo;\n\n    get filhos(): Dispositivo[] {\n      const incisos = this.getIncisosCaput();\n      const paragrafos = this.paragrafos;\n\n      return incisos.concat(paragrafos);\n    }\n\n    private getIncisosCaput(): Dispositivo[] {\n      return this.caput?.filhos ?? [];\n    }\n\n    get paragrafos(): Dispositivo[] {\n      this._paragrafos = this._paragrafos ?? [];\n      return this._paragrafos;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      if (isInciso(filho)) {\n        this.caput!.addFilhoOnPosition(filho, posicao);\n      } else {\n        filho.pai = this as unknown as Dispositivo;\n        this.paragrafos.splice(posicao - this.getIncisosCaput().length, 0, filho);\n      }\n    }\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      isCaput(filho) ? (this.caput = filho) : isInciso(filho) ? this.addIncisoCaput(filho, referencia) : this.addParagrafo(filho, referencia);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      isInciso(filho) ? this.caput?.removeFilho(filho) : this.removeParagrafo(filho);\n    }\n\n    private addIncisoCaput(filho: Dispositivo, referencia?: Dispositivo): void {\n      this.caput!.addFilho(filho, referencia);\n    }\n\n    private addParagrafo(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.paragrafos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.paragrafos.push(filho) : this.paragrafos.splice(posicao, 0, filho);\n      } else {\n        this.paragrafos.push(filho);\n      }\n    }\n\n    private removeParagrafo(filho: Dispositivo): void {\n      this._paragrafos = this._paragrafos?.filter(f => (f.uuid !== filho.uuid ? f : (f.pai = undefined)));\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.paragrafos.indexOf(filho) === this.paragrafos.length - 1;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return isInciso(filho) ? this.caput!.indexOf(filho) : this.filhos.indexOf(filho);\n    }\n\n    private renumeraIncisos(): void {\n      this.caput?.renumeraFilhos();\n    }\n\n    private renumeraParagrafos(): void {\n      this.paragrafos.forEach(filho => {\n        if (\n          (isDispositivoAlteracao(filho) && isAntesDoPrimeiroDispositivoOriginal(filho)) ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        ) {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        } else {\n          filho.createRotulo(filho);\n        }\n      });\n    }\n\n    isParagrafoUnico(): boolean {\n      return this.paragrafos.length === 1;\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        this.ajustaRotuloParagrafoUnicoSeNecessario();\n        return;\n      }\n      this.renumeraIncisos();\n      this.renumeraParagrafos();\n    }\n\n    ajustaRotuloParagrafoUnicoSeNecessario(): void {\n      const nParagrafos = this.paragrafos.filter(p => !isOmissis(p)).length;\n      const paragrafoUnico = this.paragrafos.filter(p => !isOmissis(p)).find(p => p.id?.endsWith('par1u'));\n      if (paragrafoUnico) {\n        paragrafoUnico.rotulo = nParagrafos === 1 ? 'Parágrafo único.' : '§ 1º';\n      }\n    }\n  };\n}\n","import { Articulacao, Dispositivo } from '../../dispositivo/dispositivo';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArtigo extends TipoLexml {\n  _blocoAlteracao?: Articulacao;\n\n  constructor() {\n    super('artigo');\n  }\n\n  caput?: Dispositivo;\n\n  get texto(): string {\n    return this.caput?.texto ?? '';\n  }\n\n  set texto(texto: string) {\n    this.caput!.texto = texto;\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { ElementoAction } from '../acao';\nimport { Regras } from './regras';\n\nexport function RegrasCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      return [];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return 'caput';\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isCaput, isDispositivoGenerico, isInciso, isParagrafo } from '../../dispositivo/tipo';\nimport { acoesDisponiveis, ElementoAction } from '../acao';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { isDispositivoAlteracao, isUltimaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasDispositivoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isDispositivoGenerico(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (\n        (isParagrafo(dispositivo.pai!) || isCaput(dispositivo.pai!) || isInciso(dispositivo.pai!) || isAlinea(dispositivo.pai!)) &&\n        dispositivo.pai!.tipoProvavelFilho!.length > 0\n      ) {\n        acoes.push(acoesDisponiveis.filter(a => a instanceof TransformarElemento && a.nomeAcao === 'transformarDispositivoGenericoEm' + dispositivo.pai!.tipoProvavelFilho)[0]);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoDispositivoGenericoLcp95';\n    private SUFIXO = ' -';\n\n    numero?: string;\n    rotulo?: string;\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? 'dg' : this.numero + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return this.numero === undefined ? 'dg' : this.numero;\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isInciso, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarAlineaFilho, adicionarElementoAction, adicionarIncisoAntes, adicionarIncisoDepois, adicionarParagrafo } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarIncisoCaputEmAlinea,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmAlinea,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoFinalSequencia } from '../conteudo/conteudoUtil';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isInciso(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarElementoAction);\n      acoes.push(removerElementoAction);\n\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarIncisoAntes);\n      }\n      acoes.push(adicionarIncisoDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_INCISO);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_INCISO);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarAlineaFilho);\n      }\n      if (hasIndicativoFinalSequencia(dispositivo) && isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(adicionarParagrafo);\n      }\n\n      if (\n        isIncisoCaput(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoCaputEmAlinea);\n      }\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoCaputEmParagrafo);\n      }\n      if (isIncisoCaput(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoCaput);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isPrimeiroMesmoTipo(dispositivo))) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (\n        isIncisoParagrafo(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoParagrafoEmAlinea);\n      }\n      if (isIncisoParagrafo(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoParagrafoEmParagrafo);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmAlinea;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmAlinea;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const complemento = isInciso(dispositivo) ? dispositivo.pai!.tipo : '';\n\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + complemento + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport {\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaRomano,\n  converteNumeroRomanoParaArabico,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoValida,\n  isNumeracaoZero,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIncisoLcp95';\n    private SUFIXO = ' –';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[CDILMVX]+(-[a-zA-Z0-9]+)*/.exec(numero);\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/-$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = trataNumeroAndComplemento(\n        this.normalizaNumeracao(rotulo!),\n        isNumeracaoZero(rotulo) ? null : converteNumeroRomanoParaArabico,\n        converteLetrasComplementoParaNumero\n      );\n      this.numero = isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.inciso.name\n          : trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) +\n            this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerado]'; // TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + '';\n      }\n      return trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + ' [ainda não numerado]';\n      }\n      return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda(dispositivo);\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isItem, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarItemAntes, adicionarItemDepois } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport { TransformarElemento, transformarEmOmissisItem, transformarItemEmAlinea } from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isItem(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarItemAntes);\n      }\n      acoes.push(adicionarItemDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(transformarItemEmAlinea);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisItem);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isItem) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { converteLetrasComplementoParaNumero, converteNumerosComplementoParaLetra, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoItemLcp95';\n    private SUFIXO = '.';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /\\d+(-[a-zA-Z0-9]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\.$/, '').trim();\n    }\n\n    private isNumeracaoValidaParaRotulo(numero: string): boolean {\n      return /^\\d{1,}(([-]?[a-zA-Z0-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.numero = this.isNumeracaoValidaParaRotulo(temp) ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero) : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.item.name\n          : trataNumeroAndComplemento(this.numero, undefined, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerado]'; // TipoDispositivo.item.descricao?.toLowerCase() + '';\n      }\n      return this.rotulo!.trim().replace('.', '');\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.item.descricao?.toLocaleLowerCase() + ' [ainda não numerado]';\n      }\n      return TipoDispositivo.item.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAlinea, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarIncisoFilho, adicionarParagrafoAntes, adicionarParagrafoDepois } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  TransformarElemento,\n  transformarEmOmissisParagrafo,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isParagrafo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarParagrafoAntes);\n      }\n      acoes.push(adicionarParagrafoDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_PARAGRAFO);\n      }\n\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_PARAGRAFO);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarIncisoFilho);\n      }\n      if ((isPrimeiroMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) && (!getDispositivoAnterior(dispositivo) || !isOmissis(getDispositivoAnterior(dispositivo)!))) {\n        acoes.push(transformarParagrafoEmIncisoCaput);\n      }\n      if (!isPrimeiroMesmoTipo(dispositivo) && isParagrafo(getDispositivoAnterior(dispositivo)!)) {\n        acoes.push(transformarParagrafoEmIncisoParagrafo);\n      }\n      if (isUltimoMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) {\n        acoes.push(transformarParagrafoEmArtigo);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisParagrafo);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isParagrafo(dispositivo)) {\n        return undefined;\n      }\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && !isUnicoMesmoTipo(dispositivo) && !isPrimeiroMesmoTipo(dispositivo) && isParagrafo(getDispositivoAnterior(dispositivo)!)\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { isParagrafo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isDispositivoNovoNaNormaAlterada } from './../hierarquia/hierarquiaUtil';\nimport { converteLetrasComplementoParaNumero, converteNumeroArabicoParaLetra, isNumeracaoValida, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoParagrafoLcp95';\n    private PREFIXO = '§ ';\n    private SUFIXO = 'º';\n    private PARAGRAFO_UNICO = 'Parágrafo único.';\n    numero?: string;\n    rotulo?: string;\n    informouParagrafoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .trim()\n        .replace(/\\./g, '')\n        .replace(/§/i, '')\n        .replace(/par[aá]grafo [uú]nico/i, '1')\n        .replace(/[º]/i, '')\n        .trim();\n    }\n\n    private isNumeracaoComComplementoAlfabetico(numero: string): boolean {\n      return /^\\d{1,}[º]?(([-]?[a-zA-Z]+){0,2})$/.test(numero);\n    }\n\n    private isNumeracaoComComplementoNumerico(numero: string): boolean {\n      return /^\\d{1,}[º]?(([-]?[1-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouParagrafoUnico = /.*[uú]nico/i.test(rotulo);\n      this.numero = this.informouParagrafoUnico\n        ? '1'\n        : this.isNumeracaoComComplementoAlfabetico(temp)\n        ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero)\n        : this.isNumeracaoComComplementoNumerico(temp)\n        ? temp\n        : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (this.numero === undefined || !dispositivo) {\n        this.rotulo = TipoDispositivo.paragrafo.name;\n      } else if (!isNumeracaoValida(this.numero)) {\n        this.rotulo = this.getNumeroAndSufixoNumeracao(dispositivo);\n      } else if (dispositivo.isDispositivoAlteracao) {\n        if (isDispositivoNovoNaNormaAlterada(dispositivo)) {\n          dispositivo.pai?.filhos.filter(f => isParagrafo(f)).length === 1\n            ? (this.rotulo = this.PARAGRAFO_UNICO)\n            : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n        } else {\n          this.rotulo = this.informouParagrafoUnico ? this.PARAGRAFO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo);\n        }\n      } else {\n        dispositivo.pai?.filhos.filter(f => isParagrafo(f)).length === 1\n          ? (this.rotulo = this.PARAGRAFO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(dispositivo: Dispositivo, paraComandoEmenda = false): string {\n      const partes = this.numero?.split('-');\n      const [num, ...remaining] = partes!;\n      const ordinal = parseInt(num ?? '1', 10) < 10;\n      return (\n        (ordinal ? num + this.SUFIXO : num) +\n        (remaining.length > 0\n          ? '-' +\n            remaining\n              ?.map(str => (dispositivo.isDispositivoAlteracao ? converteNumeroArabicoParaLetra(str) : str))\n              .join('-')\n              .toUpperCase()\n          : '') +\n        (!paraComandoEmenda && (!ordinal || remaining.length) ? '.' : '')\n      );\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda não numerado]'; // TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + '';\n      }\n      return this.isParagrafoUnico() ? 'parágrafo único' : this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + ' [ainda não numerado]';\n      }\n      return this.isParagrafoUnico() ? 'parágrafo único' : '§ ' + this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    private isParagrafoUnico(): boolean {\n      return (this.isDispositivoAlteracao && this.rotulo?.includes('único')) || (!this.isDispositivoAlteracao && this.pai?.filhos.filter(f => isParagrafo(f)).length === 1);\n    }\n  };\n}\n","import { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArticulacao extends TipoLexml {\n  _artigos?: Artigo[];\n\n  constructor() {\n    super('articulacao');\n  }\n\n  get artigos(): Artigo[] {\n    return this._artigos ?? [];\n  }\n\n  addArtigo(artigo: Artigo, referencia?: Dispositivo): void {\n    this._artigos = this._artigos ?? [];\n    referencia !== undefined ? this._artigos.splice(this._artigos.indexOf(referencia as Artigo) + 1, 0, artigo) : this._artigos.push(artigo);\n  }\n\n  addArtigoOnPosition(filho: Dispositivo, posicao: number): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos.splice(posicao, 0, filho as Artigo);\n  }\n\n  removeArtigo(artigo: Artigo): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos = this._artigos.filter(f => f.uuid !== artigo.uuid);\n  }\n\n  renumeraArtigos(): void {\n    this.artigos\n      .filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n      .forEach(filho => {\n        if (!isDispositivoAlteracao(filho)) {\n          filho.numero = calculaNumeracao(filho);\n        }\n        filho.createRotulo(filho);\n        filho.id = buildId(filho);\n        const caput = (filho as Artigo).caput;\n        if (caput) {\n          caput.id = buildId(caput);\n        }\n      });\n  }\n\n  indexOfArtigo(artigo: Artigo): number {\n    return this.artigos.indexOf(artigo);\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isArticulacao, isArtigo, isCaput, isInciso, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport {\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isUltimaAlteracao,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isOmissis(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isArticulacao(dispositivo.pai!) && getDispositivoAnterior(dispositivo) !== undefined) {\n        acoes.push(transformarOmissisEmArtigo);\n      }\n      if (isCaput(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoCaput);\n      }\n      if (isArtigo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmParagrafo);\n      }\n      if (isParagrafo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoParagrafo);\n      }\n      if (isInciso(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmAlinea);\n      }\n      if (isAlinea(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmItem);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { normalizaSeForOmissis, TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO } from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    _texto = TEXTO_OMISSIS;\n\n    get texto(): string {\n      return this._texto;\n    }\n\n    set texto(texto: string) {\n      const t = normalizaSeForOmissis(texto);\n      this._texto = t === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO ? TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO : TEXTO_OMISSIS;\n    }\n  };\n}\n","// import { adicionarAgrupadorArtigoAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isEmenta } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarAgrupadorArtigoAction } from '../acao/adicionarAgrupadorArtigoAction';\nimport { adicionarArtigoDepois } from '../acao/adicionarElementoAction';\nimport { Regras } from './regras';\n\nexport function RegrasEmenta<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isEmenta(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarArtigoDepois);\n      acoes.push(adicionarAgrupadorArtigoAction);\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Artigo } from './../../dispositivo/dispositivo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isArtigo, Tipo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { createAlteracao, createArticulacao, criaDispositivo, criaDispositivoCabecaAlteracao } from '../dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../dispositivo/dispositivoValidator';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { buildId } from '../util/idUtil';\n\nexport interface ReferenciaDispositivo {\n  tipo: Tipo;\n  numero?: string;\n}\n\nconst regex = new Map();\nregex.set('Alinea', /(al[ií]nea|ali.?\\s)\\s*([uú]nica|[a-z]+[)]?(?:-[a-z])?).*/i);\nregex.set('Artigo', /(art\\.?|artigo)\\s*([uú]nico\\s*|\\d+(?:-[a-z])?).*/i);\nregex.set('Inciso', /(inciso|inc.?\\s)\\s*([uú]nico|[MDCLXVI]+[)]?(?:-[a-z])?).*/i);\nregex.set('Item', /(item)\\s*([uú]nico\\s*|\\d+(?:-[a-z])?).*/i);\nregex.set('Paragrafo', /(§|par[aá]grafo|par.?\\s)\\s*([uú]nico\\s*|\\d+(?:-[a-z])?).*/i);\n\nconst processaFilhos = (dispositivo: Dispositivo, referencias: ReferenciaDispositivo[], modo?: ClassificacaoDocumento): void => {\n  let parent = dispositivo;\n  referencias?.forEach(referencia => {\n    if (!parent.tiposPermitidosFilhos?.includes(referencia.tipo?.tipo)) {\n      if (referencia.numero && referencia.numero.match(/\\d.*/)) {\n        parent = criaDispositivo(parent, isArtigo(parent) ? TipoDispositivo.paragrafo.tipo : isAlinea(parent) ? TipoDispositivo.item.tipo : TipoDispositivo.generico.tipo);\n        referencia.numero && parent.createNumeroFromRotulo(referencia.numero);\n        parent.createRotulo(parent);\n      } else {\n        parent = criaDispositivo(parent, TipoDispositivo.generico.tipo);\n        parent.rotulo = referencia.numero!;\n      }\n    } else {\n      parent = criaDispositivo(parent, referencia.tipo.tipo);\n      referencia.numero && parent.createNumeroFromRotulo(referencia.numero);\n      parent.createRotulo(parent);\n    }\n    if (modo) {\n      (parent.situacao as DispositivoAdicionado).tipoEmenda = modo;\n    }\n    parent.isDispositivoAlteracao = true;\n    parent.situacao = new DispositivoAdicionado();\n    (parent.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n    parent.id = buildId(parent);\n\n    if (isArtigo(parent)) {\n      (parent as Artigo).caput!.situacao = new DispositivoAdicionado();\n      if (modo) {\n        ((parent as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n      }\n    }\n    parent.mensagens = validaDispositivo(parent);\n  });\n};\n\nconst buildCabecaAlteracao = (dispositivo: Dispositivo, referencia: ReferenciaDispositivo, modo): Dispositivo => {\n  if (!dispositivo.hasAlteracao()) {\n    createAlteracao(dispositivo);\n    dispositivo.alteracoes!.situacao = new DispositivoAdicionado();\n    (dispositivo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  }\n  const cabeca = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, dispositivo.alteracoes!, undefined, 0);\n  cabeca.isDispositivoAlteracao = true;\n  cabeca.situacao = new DispositivoAdicionado();\n  (cabeca.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  (cabeca.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n  referencia.numero && cabeca.createNumeroFromRotulo(referencia.numero);\n  cabeca.createRotulo(cabeca);\n  cabeca.id = buildId(cabeca);\n\n  if (isArtigo(cabeca)) {\n    (cabeca as Artigo).caput!.situacao = new DispositivoAdicionado();\n    ((cabeca as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  }\n\n  return cabeca;\n};\n\nexport const buildDispositivosAssistente = (texto: string, dispositivo: Dispositivo, modo = ClassificacaoDocumento.EMENDA): Dispositivo => {\n  const referencias = identificaReferencias(texto);\n  let artigoInformado = true;\n\n  if (!referencias || referencias.length === 0) {\n    throw new Error('Não foi possível informado o dispositivo');\n  }\n\n  if (referencias[0].tipo !== TipoDispositivo.artigo) {\n    if (referencias.reverse()[0].tipo !== TipoDispositivo.artigo) {\n      artigoInformado = false;\n    }\n  }\n  const c = artigoInformado ? referencias.shift() : undefined;\n  const cabeca = buildCabecaAlteracao(dispositivo, c ?? { tipo: TipoDispositivo.artigo }, modo);\n\n  processaFilhos(cabeca, referencias, modo);\n\n  return cabeca;\n};\n\nexport const validaDispositivoAssistente = (texto: string): Dispositivo => {\n  return buildDispositivosAssistente(texto, criaDispositivo(createArticulacao(), TipoDispositivo.artigo.tipo));\n};\n\nconst identificaTipo = (texto: string): Tipo | undefined => {\n  if (texto.trim().match(/ali|al[ií]nea.*/i)) {\n    return TipoDispositivo.alinea;\n  }\n  if (texto.trim().match(/art[igo]?.*/i)) {\n    return TipoDispositivo.artigo;\n  }\n\n  if (texto.trim().match(/inc|inciso.*/i)) {\n    return TipoDispositivo.inciso;\n  }\n\n  if (texto.trim().match(/item.*/i)) {\n    return TipoDispositivo.item;\n  }\n\n  if (texto.trim().match(/§|par[ágrafo]?.*/i)) {\n    return TipoDispositivo.paragrafo;\n  }\n\n  return;\n};\n\nexport const buildReferencia = (texto: string, tipoDispositivo?: Tipo): ReferenciaDispositivo => {\n  const tipo = tipoDispositivo ?? identificaTipo(texto);\n\n  if (!tipo) {\n    throw new Error(`Não pude identificar o tipo em ${texto}`);\n  }\n\n  const r = regex.get(tipo.tipo);\n\n  if (!r) {\n    throw new Error(`Tipo não suportado: ${tipo.descricao}`);\n  }\n\n  const matches = texto?.trim().match(r);\n\n  if (matches && matches.length === 3) {\n    return { tipo, numero: matches[2] };\n  }\n\n  return { tipo, numero: undefined };\n};\n\n// const normaliza = (p: string[]): string[] => {\n//   for (let i = 0; i < p.length - 1; i += 2) {\n//     const tipo = identificaTipo(p[i]);\n\n//     if (tipo === TipoDispositivo.generico) {\n//       if (isRomano(p[i][0].trim())) {\n//         p.splice(i, 0, 'inciso');\n//       } else if (isLetra(p[i][0].trim())) {\n//         p.splice(i, 0, 'alinea');\n//       } else {\n//         p.splice(i, 0, 'generico');\n//       }\n//       continue;\n//     }\n//   }\n//   return p;\n// };\n\nexport const identificaReferencias = (texto: string): ReferenciaDispositivo[] | undefined => {\n  const resultParser = new ReferenciaDispositivoParser(texto);\n  if (resultParser.valido) {\n    return resultParser.referencias;\n  }\n  return undefined;\n  // let p = texto\n  //   .replace(',', '')\n  //   .replace('º', '')\n  //   .replace(/\\s+d[ao]+\\s+/gi, ' ')\n  //   .replace(/\\s*caput\\s*/, ' ')\n  //   .split(' ')\n  //   .filter(e => e.length !== 0);\n\n  // p = normaliza(p);\n\n  // const resultado: ReferenciaDispositivo[] = [];\n\n  // for (let i = 0, j = 1; i < p.length - 1, j <= p.length - 1; i += 2, j += 2) {\n  //   const tipo = identificaTipo(p[i]);\n\n  //   if (!tipo) {\n  //     throw new Error(`Não pude identificar o tipo no texto informado: ${p[i]}`);\n  //   }\n  //   const r = regex.get(tipo.tipo);\n\n  //   if (!r) {\n  //     resultado.push({ tipo, numero: p[j] });\n  //     continue;\n  //   }\n\n  //   const matches = `${p[i]} ${p[j]}`.match(r);\n\n  //   if (matches && matches.length === 3) {\n  //     resultado.push({ tipo, numero: matches[2] });\n  //   } else {\n  //     resultado.push({ tipo, numero: undefined });\n  //   }\n  // }\n\n  // return resultado;\n};\n\nexport class ReferenciaDispositivoParser {\n  valido = false;\n\n  referencias: ReferenciaDispositivo[] = [];\n\n  private regexEncaixe = '(?:-[a-z]+){0,3}';\n  private regexArtigo = `(art|artigo)\\\\s([uú]nico|\\\\d+${this.regexEncaixe})`;\n  private regexParagrafo = `(§|par[aá]grafo|par)\\\\s([uú]nico|\\\\d+${this.regexEncaixe})`;\n  private regexInciso = `(inciso|inc)\\\\s([uú]nico|X{0,3}(?:IX|IV|[XV]?I{0,3})${this.regexEncaixe})`;\n  private regexAlinea = `(al[ií]nea|al[ií])\\\\s([a-z]+${this.regexEncaixe})`;\n  private regexItem = `(item)\\\\s(\\\\d+${this.regexEncaixe})`;\n\n  private regex = `^(?:(?:(?:(?:${this.regexItem}\\\\s)?(?:${this.regexAlinea}\\\\s))?(?:${this.regexInciso}\\\\s))?(?:${this.regexParagrafo}\\\\s)?)?(?:${this.regexArtigo})$`;\n\n  constructor(private texto) {\n    this.parse();\n  }\n\n  private parse(): void {\n    this.preparaTexto();\n\n    const execArray = new RegExp(this.regex, 'gi').exec(this.texto);\n\n    if (execArray) {\n      this.valido = true;\n      const p = execArray.slice(1).filter(s => s !== undefined);\n\n      for (let i = 0, j = 1; i < p.length - 1, j <= p.length - 1; i += 2, j += 2) {\n        const tipo = identificaTipo(p[i]);\n\n        if (!tipo) {\n          throw new Error(`Não pude identificar o tipo no texto informado: ${p[i]}`);\n        }\n        this.referencias.push({ tipo, numero: p[j] });\n      }\n    }\n  }\n\n  private preparaTexto(): void {\n    this.texto = this.texto\n      .toLowerCase()\n      .replace(/[º°\\\\.]/g, '')\n      .replace(/[,;]/g, ' ')\n      .replace(/\\sd[ao]\\s/g, ' ')\n      .replace(/\\scaput\\s/g, ' ')\n      .replace(/\\s+/g, ' ')\n      .trim();\n  }\n}\n","export const ATIVAR_DESATIVAR_REVISAO = 'ATIVAR_DESATIVAR_REVISAO';\n\nexport class AtivarDesativarRevisao {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Ativar/Desativar revisão';\n  }\n\n  execute(quantidade = 0): any {\n    return {\n      type: ATIVAR_DESATIVAR_REVISAO,\n      quantidade: quantidade,\n    };\n  }\n}\n\nexport const ativarDesativarRevisaoAction = new AtivarDesativarRevisao();\n","export enum Modo {\n  JUSTIFICATIVA = 'justificativa',\n  TEXTO_LIVRE = 'textoLivre',\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n}\n","import { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isCaput } from '../../../model/dispositivo/tipo';\nimport { Elemento, Referencia } from '../../../model/elemento';\nimport { getDispositivoFromElemento, createElemento } from '../../../model/elemento/elementoUtil';\nimport { ADICIONAR_ELEMENTO } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { ADICIONAR_ELEMENTOS_FROM_CLIPBOARD } from '../../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { ativarDesativarRevisaoAction } from '../../../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { ATUALIZAR_TEXTO_ELEMENTO } from '../../../model/lexml/acao/atualizarTextoElementoAction';\nimport { MOVER_ELEMENTO_ABAIXO } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { MOVER_ELEMENTO_ACIMA } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { REMOVER_ELEMENTO } from '../../../model/lexml/acao/removerElementoAction';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { SUPRIMIR_ELEMENTO } from '../../../model/lexml/acao/suprimirElemento';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { getDispositivoAndFilhosAsLista, getUltimoFilho, isArticulacaoAlteracao, isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Modo } from '../enum/enumUtil';\nimport { unificarEvento } from '../evento/eventosUtil';\nimport { buildPast } from './stateReducerUtil';\n\nexport const getRevisoesElemento = (revisoes: Revisao[] = []): RevisaoElemento[] => {\n  return revisoes.filter(isRevisaoElemento).map(r => r as RevisaoElemento);\n};\n\nexport const findRevisaoById = (revisoes: Revisao[] = [], idRevisao: string): Revisao | undefined => {\n  return revisoes?.find(r => r.id === idRevisao);\n};\n\nexport const findRevisaoByElementoUuid = (revisoes: Revisao[] = [], uuid = 0): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid === uuid)\n    .slice(-1)[0];\n};\n\nexport const findRevisaoByElementoUuidAndStateType = (revisoes: Revisao[] = [], uuid = 0, stateType: StateType): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid === uuid && r.stateType === stateType)\n    .slice(-1)[0];\n};\n\nexport const findRevisaoByElementoUuid2 = (revisoes: Revisao[] = [], uuid2 = ''): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid2 === uuid2)\n    .slice(-1)[0];\n};\n\nexport const findRevisoesByElementoUuid = (revisoes: Revisao[] = [], uuid = 0): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.uuid === uuid);\n};\n\nexport const findRevisoesByElementoUuid2 = (revisoes: Revisao[] = [], uuid2 = ''): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.uuid2 === uuid2);\n};\n\nexport const findRevisoesByElementoLexmlId = (revisoes: Revisao[] = [], lexmlId = ''): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.lexmlId === lexmlId);\n};\n\nexport const findRevisaoByElementoLexmlId = (revisoes: Revisao[] = [], lexmlId = '?'): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.lexmlId === lexmlId)\n    .slice(-1)[0];\n};\n\nexport const existeRevisaoParaElementos = (revisoes: Revisao[] = [], elementos: Elemento[]): boolean => {\n  const revisoesElemento = getRevisoesElemento(revisoes);\n  return elementos.some(e => revisoesElemento.some(r => r.elementoAposRevisao.uuid === e.uuid));\n};\n\nexport const identificarRevisaoElementoPai = (state: State, revisoes: Revisao[]): Revisao[] => {\n  const result: Revisao[] = [];\n\n  revisoes?.forEach(r => {\n    if (isRevisaoElemento(r)) {\n      const rAux = r as RevisaoElemento;\n      const uuidPai = rAux.stateType === StateType.ElementoIncluido ? getUuidPaiElementoRevisado(state, rAux) : rAux.elementoAntesRevisao?.hierarquia?.pai?.uuid;\n      const rPai = uuidPai ? findRevisaoByElementoUuid(rAux.actionType === ADICIONAR_ELEMENTO ? state.revisoes : revisoes, uuidPai) : undefined;\n      if (rPai && isRevisaoMesmaSituacao(rAux, rPai)) {\n        rAux.idRevisaoElementoPai = rPai.id;\n        rAux.idRevisaoElementoPrincipal = findRevisaoElementoPrincipal(state, revisoes!, rPai)?.id;\n      }\n    }\n    result.push(r);\n  });\n\n  return result;\n};\n\nexport const findRevisaoElementoPrincipal = (state: State, revisoes: Revisao[], rPai: RevisaoElemento): RevisaoElemento | undefined => {\n  const uuid = rPai.stateType === StateType.ElementoIncluido ? getUuidPaiElementoRevisado(state, rPai) : rPai.elementoAntesRevisao?.hierarquia?.pai?.uuid;\n  const rAux = rPai && findRevisaoByElementoUuid(revisoes, uuid);\n  return rAux ? findRevisaoElementoPrincipal(state, revisoes, rAux) : rPai;\n};\n\nexport const buildDescricaoRevisao = (revisao: Revisao): string => {\n  return isRevisaoElemento(revisao) ? buildDescricaoRevisaoElemento(revisao as RevisaoElemento) : buildDescricaoRevisaoTexto(revisao);\n};\n\nconst mapperActionTypeToDescricao = {\n  [ADICIONAR_ELEMENTO]: (): string => 'Dispositivo adicionado',\n  [REMOVER_ELEMENTO]: (): string => 'Dispositivo removido',\n  [SUPRIMIR_ELEMENTO]: (): string => 'Dispositivo suprimido',\n  [ATUALIZAR_TEXTO_ELEMENTO]: (): string => 'Texto do dispositivo foi alterado',\n  [MOVER_ELEMENTO_ABAIXO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromMovimentacaoElemento(revisao),\n  [MOVER_ELEMENTO_ACIMA]: (): string => 'Dispositivo movido',\n  [RESTAURAR_ELEMENTO]: (): string => 'Dispositivo restaurado',\n  [ADICIONAR_ELEMENTOS_FROM_CLIPBOARD]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n  [UNDO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n  [REDO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n};\n\nconst mapperStateTypeToDescricao = {\n  [StateType.ElementoIncluido]: (): string => 'Dispositivo adicionado',\n  [StateType.ElementoRemovido]: (): string => 'Dispositivo removido',\n  [StateType.ElementoRestaurado]: (): string => 'Dispositivo restaurado',\n  [StateType.ElementoModificado]: (): string => 'Texto do dispositivo foi alterado',\n  [StateType.ElementoSuprimido]: (): string => 'Dispositivo suprimido',\n  // [StateType.ElementoMovido]: (): string => 'Dispositivo movido',\n};\n\nexport const buildDescricaoRevisaoElemento = (revisao: RevisaoElemento): string => {\n  const fn = mapperActionTypeToDescricao[revisao.actionType];\n  return fn ? mapperActionTypeToDescricao[revisao.actionType](revisao) : buildDescricaoRevisaoFromStateType(revisao);\n};\n\nexport const buildDescricaoRevisaoTexto = (revisao: Revisao): string => {\n  return revisao.descricao ?? '';\n};\n\nexport const buildDescricaoRevisaoFromMovimentacaoElemento = (revisao: RevisaoElemento): string => {\n  const { tipo, rotulo } = revisao.elementoAntesRevisao || { tipo: '', numero: 0 };\n  return `Dispositivo movido${tipo ? ` (antes era \"${tipo} ${rotulo}\")` : ''}`;\n};\n\nexport const buildDescricaoRevisaoFromStateType = (revisao: RevisaoElemento, elementoAposRevisao?: Elemento): string => {\n  const isUndoRedoDeMovimentacao = revisao.elementoAntesRevisao && elementoAposRevisao && revisao.elementoAntesRevisao.numero !== elementoAposRevisao.numero;\n  return isUndoRedoDeMovimentacao ? buildDescricaoRevisaoFromMovimentacaoElemento(revisao) : mapperStateTypeToDescricao[revisao.stateType]();\n};\n\nconst getUuidPaiElementoRevisado = (state: State, revisao: RevisaoElemento): number => {\n  // return revisao.elementoAposRevisao.hierarquia?.pai?.uuid || 0;\n  return getUuidPai(state, revisao.elementoAposRevisao) || 0;\n};\n\nconst getUuidPai = (state: State, elemento?: Partial<Elemento>): number | undefined => {\n  const d = getDispositivoFromElemento(state.articulacao!, elemento!)!;\n  if (!d) {\n    return undefined;\n  } else if (isDispositivoAlteracao(d)) {\n    return isArticulacaoAlteracao(d.pai!) || isCaput(d.pai!) ? d.pai?.pai?.uuid : d.pai?.uuid;\n  } else {\n    return isCaput(d.pai!) ? d.pai?.pai?.uuid : d.pai?.uuid;\n  }\n};\n\nconst isRevisaoMesmaSituacao = (r: RevisaoElemento, rPai: RevisaoElemento): boolean => {\n  // return r.stateType !== StateType.ElementoModificado && rPai.elementoAntesRevisao?.descricaoSituacao === r.elementoAntesRevisao?.descricaoSituacao;\n  return (\n    r.stateType !== StateType.ElementoModificado && rPai.elementoAntesRevisao?.descricaoSituacao === r.elementoAntesRevisao?.descricaoSituacao && r.stateType === rPai.stateType\n  );\n};\n\nexport const getRevisoesElementoAssociadas = (revisoes: Revisao[] = [], revisao: RevisaoElemento): RevisaoElemento[] => {\n  return [revisao, ...getRevisoesElemento(revisoes).filter(r => r.idRevisaoElementoPrincipal === revisao.id)];\n};\n\nexport const getElementosFromRevisoes = (revisoes: Revisao[] = [], state?: State): Elemento[] => {\n  return revisoes.filter(isRevisaoElemento).map(r => {\n    const e = (r as RevisaoElemento).elementoAposRevisao! as Elemento;\n    return state ? createElemento(getDispositivoFromElemento(state.articulacao!, e)!) : e;\n  });\n};\n\nexport const getRevisoesFromElementos = (elementos: Elemento[] = []): RevisaoElemento[] => elementos!.map(e => e.revisao! as RevisaoElemento);\n\nexport const isRevisaoElemento = (revisao: Revisao): boolean => 'elementoAposRevisao' in revisao;\n\nexport const isRevisaoJustificativa = (revisao: Revisao): boolean => !isRevisaoElemento(revisao);\n\nexport const existeFilhoExcluidoDuranteRevisao = (state: State, dispositivo: Dispositivo): boolean => {\n  if (!state.revisoes?.length) {\n    return false;\n  }\n  const uuids = getDispositivoAndFilhosAsLista(dispositivo).map(d => d.uuid);\n  return state.revisoes\n    .filter(r => isRevisaoElemento(r) && isRevisaoDeExclusao(r as RevisaoElemento))\n    .map(r => r as RevisaoElemento)\n    .some(r => uuids.includes(r.elementoAntesRevisao?.uuid) || uuids.includes(r.elementoAntesRevisao?.hierarquia?.pai?.uuid));\n};\n\nexport const existeFilhoExcluidoOuAlteradoDuranteRevisao = (state: State, dispositivo: Dispositivo): boolean => {\n  if (!state.revisoes?.length) {\n    return false;\n  }\n  const uuids = getDispositivoAndFilhosAsLista(dispositivo).map(d => d.uuid);\n  return state.revisoes\n    .filter(isRevisaoElemento)\n    .map(r => r as RevisaoElemento)\n    .some(r => uuids.includes(r.elementoAntesRevisao?.uuid) || uuids.includes(r.elementoAntesRevisao?.hierarquia?.pai?.uuid));\n};\n\nexport const isRevisaoPrincipal = (revisao: Revisao): boolean => isRevisaoElemento(revisao) && !(revisao as RevisaoElemento).idRevisaoElementoPrincipal;\n\nexport const existeRevisaoCriadaPorExclusao = (revisoes: Revisao[] = []): boolean => revisoes.some(r => isRevisaoDeExclusao(r as RevisaoElemento));\n\nexport enum RevisaoJustificativaEnum {\n  JustificativaAlterada = 'Justificação Alterada',\n}\n\nexport enum RevisaoTextoLivreEnum {\n  TextoLivreAlterado = 'Texto Livre Alterado',\n}\n\nexport const ordernarRevisoes = (revisoes: Revisao[] = []): Revisao[] => {\n  const result: Revisao[] = revisoes.filter(r => isRevisaoElemento(r) && !isRevisaoDeExclusao(r as RevisaoElemento));\n  result.push(...getRevisoesDeExclusaoOrdenadasPorUuid(revisoes));\n  result.push(...revisoes.filter(isRevisaoJustificativa));\n  return result;\n};\n\nconst getRevisoesDeExclusaoOrdenadasPorUuid = (revisoes: Revisao[] = []): Revisao[] => {\n  return revisoes\n    .filter(r => isRevisaoElemento(r) && isRevisaoDeExclusao(r as RevisaoElemento))\n    .sort((r1, r2) => (r1 as RevisaoElemento).elementoAposRevisao.uuid! - (r2 as RevisaoElemento).elementoAposRevisao.uuid!);\n};\n\nexport const isRevisaoDeExclusao = (revisao: RevisaoElemento): boolean => revisao.stateType === StateType.ElementoRemovido;\n\nexport const removeAtributosDoElemento = (elemento: Partial<Elemento> | undefined): void => {\n  if (!elemento) {\n    return;\n  }\n\n  delete elemento.acoesPossiveis;\n  delete elemento.tiposAgrupadoresQuePodemSerInseridosAntes;\n  delete elemento.tiposAgrupadoresQuePodemSerInseridosDepois;\n\n  if (elemento.revisao) {\n    elemento.revisao;\n  }\n\n  removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elemento.elementoAnteriorNaSequenciaDeLeitura);\n};\n\nconst atributosPermitidos = ['tipo', 'uuid', 'uuid2', 'lexmlId', 'conteudo', 'descricaoSituacao', 'uuidAlteracao', 'uuid2Alteracao', 'existeNaNormaAlterada'];\n\nexport const removeAtributosDoElementoAnteriorNaSequenciaDeLeitura = (elemento: Partial<Elemento> | undefined): void => {\n  if (!elemento) {\n    return;\n  }\n\n  for (const key in elemento) {\n    if (!atributosPermitidos.includes(key)) {\n      delete elemento[key];\n    }\n  }\n};\n\nexport const getQuantidadeRevisoes = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(isRevisaoPrincipal).length;\n};\n\nexport const getQuantidadeRevisoesJustificativa = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(e => e.descricao === RevisaoJustificativaEnum.JustificativaAlterada).length;\n};\n\nexport const mostrarDialogDisclaimerRevisao = (): void => {\n  if (localStorage.getItem('naoMostrarNovamenteDisclaimerMarcaAlteracao') !== 'true') {\n    const dialog = document.createElement('sl-dialog');\n    dialog.label = 'Marcas de revisão';\n    const botoesHtml = ` <sl-button slot=\"footer\" variant=\"primary\" id=\"closeButton\">Fechar</sl-button>`;\n    dialog.innerHTML = `\n      Todas as alterações realizadas no texto serão registradas e ficarão disponíveis para consulta.\n      Esta é uma versão inicial da funcionalidade de controle de alterações/marcas de revisão.\n      <br><br>\n      <sl-switch id=\"chk-nao-mostrar-modal-novamente\">Não mostrar mais essa mensagem</sl-switch>\n    `.concat(botoesHtml);\n    document.body.appendChild(dialog);\n    dialog.show();\n\n    dialog.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const chkNaoMostrarNovamente = dialog.querySelector('#chk-nao-mostrar-modal-novamente') as any;\n    chkNaoMostrarNovamente?.addEventListener('sl-change', () => {\n      salvaNoNavegadorOpcaoNaoMostrarNovamente();\n    });\n\n    const closeButton = dialog.querySelector('#closeButton[slot=\"footer\"]');\n    closeButton?.addEventListener('click', () => {\n      dialog.hide();\n      dialog.remove();\n    });\n  }\n};\n\nexport const getQuantidadeRevisoesTextoLivre = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(e => e.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado).length;\n};\n\nexport const getQuantidadeRevisoesAll = (revisoesDispositivos: Revisao[] = []): number => {\n  const cursorCode = 65279;\n\n  const listaRevisoes = document.querySelectorAll('ins, del') || [];\n  const revisoes = [] as any;\n\n  for (let index = 0; index < listaRevisoes.length; index++) {\n    const revisao = listaRevisoes[index] as any;\n    if (revisao.innerText?.charCodeAt(0) !== cursorCode) {\n      revisoes.push(revisao);\n    }\n  }\n\n  return revisoes.length + getQuantidadeRevisoes(revisoesDispositivos);\n};\n\nconst salvaNoNavegadorOpcaoNaoMostrarNovamente = (): void => {\n  const checkbox = document.getElementById('chk-nao-mostrar-modal-novamente') as any;\n  if (checkbox) {\n    localStorage.setItem('naoMostrarNovamenteDisclaimerMarcaAlteracao', checkbox.checked ? 'true' : 'false');\n  }\n};\n\nexport const ativarDesativarMarcaDeRevisao = (rootStore: any, quantidade: number): void => {\n  rootStore.dispatch(ativarDesativarRevisaoAction.execute(quantidade));\n};\n\nexport const atualizaQuantidadeRevisao = (revisoes: Revisao[] = [], element: any, modo: string): void => {\n  const quantidade = modo === Modo.EMENDA ? getQuantidadeRevisoes(revisoes) : 0;\n  if (element) {\n    element.innerHTML = quantidade;\n  }\n};\n\nexport const atualizaQuantidadeRevisaoTextoRico = (quantidade: number, element: any): void => {\n  if (element) {\n    element.innerHTML = quantidade;\n  }\n};\n\nexport const setCheckedElement = (element: any, checked: boolean): void => {\n  if (element) {\n    if (checked) {\n      element.setAttribute('checked', '');\n    } else {\n      element.removeAttribute('checked');\n    }\n  }\n};\n\nexport const atualizaReferenciaElementoAnteriorSeNecessario = (articulacao: Articulacao, revisoes: Revisao[] = [], elemento: Elemento, tipoProcessamento: string): void => {\n  // Procura o elemento anterior ao excluído/incluído nos elementos anteriores das outras revisões.\n  const rAux = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(revisoes, elemento.elementoAnteriorNaSequenciaDeLeitura!);\n  if (rAux) {\n    if (tipoProcessamento === 'exclusao') {\n      // Pega a última revisão do grupo da revisão principal (rAux) e utiliza o \"elementoAposRevisao\" como elemento anterior do atual elemento removido\n      elemento.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(findUltimaRevisaoDoGrupo(revisoes, rAux).elementoAposRevisao));\n      removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elemento.elementoAnteriorNaSequenciaDeLeitura!);\n    } else {\n      // Pega o último filho do elemento incluído e utiliza como elemento anterior da revisão principal (rAux)\n      const dPrimeiroElementoIncluido = getDispositivoFromElemento(articulacao, elemento)!;\n      const ultimoFilho = createElemento(getUltimoFilho(dPrimeiroElementoIncluido));\n      removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(ultimoFilho);\n      rAux.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = ultimoFilho;\n      rAux.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = ultimoFilho;\n\n      const ePrimeiroElementoIncluido = createElemento(dPrimeiroElementoIncluido);\n      if (isAtualizarPosicaoDeElementoExcluido(ePrimeiroElementoIncluido, rAux.elementoAposRevisao)) {\n        rAux.elementoAposRevisao.hierarquia!.posicao = ePrimeiroElementoIncluido.hierarquia!.posicao! + 1;\n        rAux.elementoAntesRevisao!.hierarquia!.posicao = ePrimeiroElementoIncluido.hierarquia!.posicao! + 1;\n      }\n    }\n  }\n};\n\nexport const findRevisaoDeExclusaoComElementoAnteriorApontandoPara = (revisoes: Revisao[] = [], elementoAnteriorNaSequenciaDeLeitura: Referencia): RevisaoElemento | undefined => {\n  return revisoes\n    .filter(isRevisaoElemento)\n    .map(r => r as RevisaoElemento)\n    .filter(isRevisaoDeExclusao)\n    .find(r => r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.uuid === elementoAnteriorNaSequenciaDeLeitura.uuid);\n};\n\nexport const findUltimaRevisaoDoGrupo = (revisoes: Revisao[] = [], revisao: RevisaoElemento): RevisaoElemento => {\n  return (\n    revisoes\n      .map(r => r as RevisaoElemento)\n      .filter(r => r.idRevisaoElementoPrincipal === revisao.id)\n      .slice(-1)[0] || revisao\n  );\n};\n\nexport const isRevisaoDeMovimentacao = (revisao: Revisao): boolean => {\n  const r = revisao as RevisaoElemento;\n  return !!(\n    isRevisaoElemento(revisao) &&\n    r.stateType === StateType.ElementoIncluido &&\n    r.elementoAntesRevisao &&\n    r.elementoAposRevisao &&\n    r.elementoAntesRevisao.tipo === r.elementoAposRevisao.tipo\n  );\n};\n\nexport const isRevisaoDeTransformacao = (revisao: Revisao): boolean => {\n  const r = revisao as RevisaoElemento;\n  return !!(isRevisaoElemento(revisao) && r.elementoAntesRevisao && r.elementoAposRevisao && r.elementoAntesRevisao.tipo !== r.elementoAposRevisao.tipo);\n};\n\nexport const isRevisaoDeModificacao = (revisao: Revisao): boolean => {\n  return isRevisaoElemento(revisao) && (revisao as RevisaoElemento).stateType === StateType.ElementoModificado;\n};\n\nexport const isRevisaoDeRestauracao = (revisao: Revisao): boolean => {\n  return isRevisaoElemento(revisao) && (revisao as RevisaoElemento).stateType === StateType.ElementoRestaurado;\n};\n\nexport const isAtualizarPosicaoDeElementoExcluido = (elementoIncluido: Elemento, elementoExcluido: Partial<Elemento>): boolean => {\n  return elementoIncluido.hierarquia?.pai?.lexmlId === elementoExcluido.hierarquia?.pai?.lexmlId && elementoIncluido.uuid! < elementoExcluido.uuid!;\n};\n\nexport const findRevisaoDeRestauracaoByUuid = (revisoes: Revisao[] = [], uuid: number): RevisaoElemento | undefined => {\n  return revisoes.map(r => r as RevisaoElemento).find(r => isRevisaoElemento(r) && r.stateType === StateType.ElementoRestaurado && r.elementoAposRevisao.uuid === uuid);\n};\n\nexport const associarRevisoesAosElementosDosEventos = (state: State): void => {\n  state.ui?.events\n    .filter(se => se.stateType !== StateType.RevisaoRejeitada)\n    .filter(se => se.stateType !== StateType.RevisaoAdicionalRejeitada)\n    .forEach(se => associarRevisoesAosElementos(state.revisoes, se.elementos));\n};\n\nexport const associarRevisoesAosElementos = (revisoes: Revisao[] = [], elementos: Elemento[] = []): void => {\n  elementos.filter(Boolean).forEach(e => {\n    const r = findRevisaoByElementoUuid(revisoes, e.uuid);\n    e.revisao = r ? JSON.parse(JSON.stringify(r)) : undefined;\n  });\n};\n\nexport const mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes = (state: State, tempStates: State[], revisoes: Revisao[], operacao: 'aceitar' | 'rejeitar'): State => {\n  const eventosParaUnificar = {\n    aceitar: [StateType.ElementoValidado],\n    rejeitar: [\n      StateType.ElementoIncluido,\n      StateType.ElementoRemovido,\n      StateType.ElementoSuprimido,\n      StateType.ElementoRenumerado,\n      StateType.ElementoValidado,\n      StateType.ElementoSelecionado,\n      StateType.ElementoMarcado,\n      StateType.SituacaoElementoModificada,\n    ],\n  };\n\n  let eventosPast: StateEvent[] = [];\n  let eventos: StateEvent[] = [];\n\n  tempStates.forEach(tempState => {\n    eventosPast.push(...(tempState.past![0] as any as StateEvent[]));\n    eventos.push(...tempState.ui!.events);\n  });\n\n  const tempState: State = { ...state };\n\n  eventosParaUnificar[operacao].forEach(stateType => {\n    eventosPast = unificarEvento(tempState, eventosPast, stateType);\n    eventos = unificarEvento(tempState, eventos, stateType);\n  });\n\n  const idsRevisoes = revisoes.map(r => r.id);\n\n  tempState.past = buildPast(tempState, eventosPast);\n  tempState.present = eventos;\n  tempState.future = [];\n  tempState.ui = {\n    events: eventos,\n    alertas: state.ui?.alertas,\n  };\n  tempState.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoes.includes(r.id));\n\n  return tempState;\n};\n\nexport const countRevisoesByType = (revisoes: Revisao[] = [], type: string): number => {\n  return revisoes.filter(r => r.type === type).length;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda, TipoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isEmenta } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { InformarNorma } from '../acao/informarNormaAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { suprimirAgrupadorAction } from '../acao/suprimirAgrupador';\nimport { suprimirElementoAction } from '../acao/suprimirElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { getDispositivoAndFilhosAsLista, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\n\nexport class DispositivoOriginal implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento))\n      .filter((a: ElementoAction) => !(a instanceof InformarNorma));\n\n    if (\n      !isEmenta(dispositivo) &&\n      (!isAgrupador(dispositivo) || !isDispositivoAlteracao(dispositivo)) &&\n      getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length === 0\n    ) {\n      acoesFiltradas.push(suprimirElementoAction);\n    }\n\n    if (isAgrupador(dispositivo) && isDispositivoAlteracao(dispositivo)) {\n      acoesFiltradas.push(suprimirAgrupadorAction);\n    }\n\n    return acoesFiltradas;\n  }\n}\n","import { getParagrafosEOmissis, hasEmenta, isArticulacaoAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo, isCaput, isDispositivoGenerico } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, getDispositivoFromElemento, getElementos } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { AdicionarElemento } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { hasIndicativoDesdobramento } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  isDispositivoAlteracao,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Counter } from '../../../util/counter';\nimport { StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\n\nexport const textoFoiModificado = (atual: Dispositivo, action: any, state?: any): boolean => {\n  if (state && state.ui?.events) {\n    const ev = getEvento(state.ui.events, StateType.ElementoModificado);\n    if (ev && ev.elementos && ev.elementos[0]?.conteudo?.texto === atual.texto) {\n      return true;\n    }\n  }\n  return (atual.texto !== '' && action.atual?.conteudo?.texto === '') || (action.atual?.conteudo?.texto && atual.texto.localeCompare(action.atual?.conteudo?.texto) !== 0);\n};\n\nexport const resetUuidTodaArvore = (dispositivo: Dispositivo): void => {\n  dispositivo.uuid = Counter.next();\n  dispositivo.filhos?.forEach(f => resetUuidTodaArvore(f));\n};\n\nexport const copiaDispositivosParaOutroPai = (pai: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos.map(d => {\n    const posicaoAtualArtigo = isArtigo(d) ? getArticulacao(d).indexOfArtigo(d) : -1;\n    const paiAtual = d.pai;\n    const anterior = isArtigo(d) ? getDispositivoAnteriorMesmoTipo(d) : undefined;\n    paiAtual?.removeFilho(d);\n    d.pai = pai;\n\n    pai.addFilho(d, anterior);\n\n    if (isArtigo(d) && !anterior) {\n      const articulacao = getArticulacao(d);\n      articulacao.removeArtigo(d);\n      articulacao.addArtigoOnPosition(d, posicaoAtualArtigo);\n    }\n\n    return d;\n  });\n};\n\nconst isPrimeiroArtigo = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo) === 0;\n};\n\nexport const isDesdobramentoAgrupadorAtual = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return dispositivo.pai!.tipo === tipo;\n};\n\nexport const ajustaReferencia = (referencia: Dispositivo, dispositivo: Dispositivo): Dispositivo => {\n  if (isArticulacao(referencia) && !isArticulacaoAlteracao(referencia) && hasEmenta(referencia)) {\n    return (referencia as Articulacao).projetoNorma!.ementa!;\n  }\n\n  return isArticulacao(referencia) || (isPrimeiroArtigo(dispositivo) && !isDispositivoAlteracao(dispositivo)) || dispositivo.pai!.indexOf(dispositivo) === 0\n    ? referencia\n    : isPrimeiroParagrafo(dispositivo)\n    ? getUltimoFilho((dispositivo.pai! as Artigo).caput!)\n    : getUltimoFilho(referencia);\n};\n\nfunction isPrimeiroParagrafo(dispositivo: Dispositivo): boolean {\n  return isArtigo(dispositivo.pai!) && getParagrafosEOmissis(dispositivo.pai! as Artigo).indexOf(dispositivo) === 0;\n}\n\nexport const naoPodeCriarFilho = (pDispositivo: Dispositivo, action: any): boolean => {\n  const dispositivo = isCaput(pDispositivo) ? pDispositivo.pai! : pDispositivo;\n\n  return (\n    isDispositivoGenerico(dispositivo) ||\n    (hasIndicativoDesdobramento(dispositivo) && !isAcaoPermitida(dispositivo, AdicionarElemento)) ||\n    (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto))\n  );\n};\n\nexport const isNovoDispositivoDesmembrandoAtual = (texto: string): boolean => {\n  return texto !== undefined && texto !== '';\n};\n\nexport const getElementosDoDispositivo = (dispositivo: Dispositivo, valida = false): Elemento[] => {\n  const lista: Elemento[] = [];\n\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => {\n    if (valida) {\n      const mensagens = validaDispositivo(d);\n      if (mensagens) {\n        d.mensagens = mensagens;\n        lista.push(createElemento(d, true, true));\n      }\n    } else {\n      lista.push(createElemento(d, true, true));\n    }\n  });\n  return lista;\n};\n\nexport const getElementosAlteracaoASeremAtualizados = (articulacao: Articulacao, elementos: Elemento[]): Elemento[] => {\n  const result: Elemento[] = [];\n  getDispositivosCabecaAlteracaoFromElementos(articulacao, elementos).forEach(d => result.push(...getElementos(d, true)));\n  return result;\n};\n\nconst getDispositivosCabecaAlteracaoFromElementos = (articulacao: Articulacao, elementos: Elemento[]): Dispositivo[] => {\n  const map = new Map();\n  elementos.forEach(elemento => {\n    const d = getDispositivoFromElemento(articulacao, elemento) || (elemento.hierarquia?.pai && getDispositivoFromElemento(articulacao, elemento.hierarquia.pai));\n    if (d && isDispositivoAlteracao(d)) {\n      const ca = getDispositivoCabecaAlteracao(d);\n      map.set(ca.id, ca);\n    }\n  });\n  return Array.from(map.values());\n};\n","import { createElementoValidado } from './../../../model/elemento/elementoUtil';\nimport { findRevisaoByElementoUuid, isRevisaoDeExclusao } from './../util/revisaoUtil';\nimport { Artigo } from './../../../model/dispositivo/dispositivo';\nimport { hasFilhos, getAgrupadorAntes } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isCaput } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport {\n  buildListaElementosRenumerados,\n  createElemento,\n  criaListaElementosAfinsValidados,\n  getDispositivoFromElemento,\n  getElementos,\n  listaDispositivosRenumerados,\n} from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getUltimoFilho,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isArtigoUnico,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isParagrafoUnico,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateEvent, StateType } from '../../state';\nimport { ajustaReferencia, getElementosDoDispositivo } from '../util/reducerUtil';\nimport { Eventos } from './eventos';\n\nexport const buildEventoAdicionarElemento = (atual: Dispositivo, novo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementosDoDispositivo(novo));\n  eventos.add(StateType.ElementoRenumerado, buildListaElementosRenumerados(novo));\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(novo, false));\n\n  if (isDispositivoAlteracao(atual)) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(atual)]);\n  }\n\n  return eventos;\n};\n\nexport const buildEventoAtualizacaoElemento = (dispositivo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n\n  const elemento = createElemento(dispositivo);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventos.add(StateType.ElementoModificado, [elemento]);\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  return eventos;\n};\n\nexport const buildUpdateEvent = (dispositivo: Dispositivo, original?: Elemento): StateEvent[] => {\n  dispositivo.mensagens = validaDispositivo(dispositivo);\n  const elemento = createElemento(dispositivo);\n\n  const elementos = original ? [original] : [];\n  elementos.push(elemento);\n\n  return [\n    {\n      stateType: StateType.ElementoModificado,\n      elementos: elementos,\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: criaListaElementosAfinsValidados(dispositivo, true),\n    },\n  ];\n};\n\nexport const buildEventoExclusaoElemento = (elementosRemovidos: Elemento[], dispositivosRenumerados: Dispositivo[], elementosValidados: Elemento[]): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    dispositivosRenumerados.map(d => createElemento(d))\n  );\n  eventos.add(StateType.ElementoValidado, elementosValidados);\n\n  return eventos;\n};\n\nexport const buildEventoTransformacaooElemento = (\n  atual: Dispositivo,\n  novo: Dispositivo,\n  elementosRemovidos: Elemento[],\n  elementosRenumerados: Elemento[],\n  elementosValidados: Elemento[]\n): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementos(novo));\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(StateType.ElementoRenumerado, elementosRenumerados);\n  eventos.add(StateType.ElementoValidado, elementosValidados);\n\n  return eventos;\n};\n\nexport const removeAndBuildEvents = (state: State, dispositivo: Dispositivo): StateEvent[] => {\n  const articulacao = state.articulacao!;\n  const removidos = getElementos(dispositivo, false, true);\n  const dispositivosRenumerados = listaDispositivosRenumerados(dispositivo);\n  const dispositivoAnterior = getDispositivoAnterior(dispositivo);\n\n  const ehDispositivoAlteracao = isDispositivoAlteracao(dispositivo);\n\n  const pai = dispositivo.pai!;\n  pai.removeFilho(dispositivo);\n  pai.renumeraFilhos();\n\n  if (isArticulacaoAlteracao(pai) && pai.filhos.length === 0) {\n    pai.pai!.alteracoes = undefined;\n  }\n\n  const dispositivoValidado =\n    dispositivoAnterior && (isArtigoUnico(dispositivoAnterior) || isParagrafoUnico(dispositivoAnterior)) ? dispositivoAnterior : isCaput(pai!) ? pai!.pai! : pai!;\n\n  if (articulacao.artigos.length === 1) {\n    dispositivosRenumerados.push(articulacao.artigos[0]);\n  }\n\n  const eventos = buildEventoExclusaoElemento(removidos, dispositivosRenumerados, criaListaElementosAfinsValidados(dispositivoValidado, false));\n\n  if (ehDispositivoAlteracao) {\n    eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(pai, true));\n\n    if (dispositivoAnterior || pai) {\n      try {\n        const dispositivoParaAtualizar = dispositivoAnterior || (pai.tipo === 'Caput' ? pai.pai! : pai);\n        eventos.add(StateType.SituacaoElementoModificada, getElementos(dispositivoParaAtualizar));\n      } catch (error) {\n        eventos.add(StateType.SituacaoElementoModificada, []);\n      }\n    }\n  }\n\n  return eventos.build();\n};\n\nexport const removeAgrupadorAndBuildEvents = (articulacao: Articulacao, atual: Dispositivo): StateEvent[] => {\n  let pos = atual.pai!.indexOf(atual);\n  const agrupadoresAnteriorMesmoTipo = atual.pai!.filhos.filter((d, i) => i < pos && isAgrupador(d));\n  const paiOriginal = atual.pai;\n  const removido = createElemento(atual, false, true);\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(atual);\n\n  const agrupadorAntes = getAgrupadorAntes(atual);\n\n  const pai = agrupadoresAnteriorMesmoTipo?.length > 0 ? agrupadoresAnteriorMesmoTipo.reverse()[0] : atual.pai!;\n\n  const dispositivoAnterior = agrupadoresAnteriorMesmoTipo?.length > 0 ? agrupadoresAnteriorMesmoTipo.reverse()[0] : pos > 0 ? getUltimoFilho(pai.filhos[pos - 1]) : pai;\n\n  const referencia = isArticulacao(dispositivoAnterior) || (hasFilhos(pai) && pai.filhos[0].id === atual.id) ? pai : getUltimoFilho(dispositivoAnterior);\n\n  const transferidosParaOutroPai: Elemento[] = [];\n  let posNoPaiNovo = pai.filhos.length;\n  atual.filhos.forEach(d => {\n    let novoPai: Dispositivo;\n    if (isArtigo(d)) {\n      novoPai = agrupadorAntes ?? articulacao;\n    } else if (pai.tiposPermitidosFilhos?.includes(d.tipo)) {\n      novoPai = pai;\n    } else if (dispositivoAnterior.tiposPermitidosFilhos?.includes(d.tipo)) {\n      novoPai = dispositivoAnterior;\n    } else {\n      novoPai = getPaiQuePodeReceberFilhoDoTipo(atual.pai!, d.tipo, [])!;\n    }\n\n    d.pai = novoPai;\n    atual.removeFilho(d);\n\n    if (agrupadoresAnteriorMesmoTipo?.length > 0) {\n      // TODO: revisar valor de \"posNoPaiNovo\" e \"pos\" (novoPai pode variar, como fica a posição???)\n      novoPai!.addFilhoOnPosition(d, posNoPaiNovo++);\n    } else {\n      novoPai!.addFilhoOnPosition(d, pos++);\n    }\n\n    transferidosParaOutroPai.push(createElemento(d));\n    return d;\n  });\n\n  atual.pai!.removeFilho(atual);\n  pai?.renumeraFilhos();\n  paiOriginal!.renumeraFilhos();\n\n  const renumerados = pai!.filhos\n    .filter((f, index) => index >= pos && (isAgrupador(f) || isDispositivoCabecaAlteracao(f)))\n    .map(d => createElemento(d))\n    .flat();\n\n  const renumeradosPaiOriginal =\n    paiOriginal?.filhos\n      .filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO)\n      .map(d => createElemento(d)) || [];\n\n  if (irmaoAnterior && irmaosMesmoTipo(irmaoAnterior).length === 1) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  eventos.setReferencia(isArticulacao(referencia) && isArticulacaoAlteracao(referencia as Articulacao) ? createElemento(referencia.pai!) : createElemento(referencia));\n\n  eventos.add(StateType.ElementoRemovido, [removido]);\n  eventos.add(StateType.SituacaoElementoModificada, transferidosParaOutroPai);\n  eventos.add(StateType.ElementoRenumerado, [...renumerados, ...renumeradosPaiOriginal]);\n  return eventos.build();\n};\n\nexport const getPaiQuePodeReceberFilhoDoTipo = (dispositivo: Dispositivo, tipoFilho: string, dispositivosPermitidos: Dispositivo[]): Dispositivo | undefined => {\n  if (!dispositivo) {\n    return undefined;\n  }\n  return dispositivo.tiposPermitidosFilhos?.includes(tipoFilho)\n    ? dispositivosPermitidos.length === 0 || dispositivosPermitidos.includes(dispositivo)\n      ? dispositivo\n      : undefined\n    : getPaiQuePodeReceberFilhoDoTipo(dispositivo.pai!, tipoFilho, dispositivosPermitidos);\n};\n\nconst restaura = (d: Dispositivo): void => {\n  d.numero = d.situacao.dispositivoOriginal?.numero ?? '';\n  d.rotulo = d.situacao.dispositivoOriginal?.rotulo ?? '';\n  d.id = d.situacao.dispositivoOriginal?.lexmlId ?? '';\n  d.texto = d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ? d.situacao.dispositivoOriginal?.conteudo?.texto ?? '' : d.texto;\n  d.situacao = new DispositivoOriginal();\n  if (isArtigo(d)) {\n    (d as Artigo).caput!.situacao = new DispositivoOriginal();\n  }\n};\n\nexport const restauraAndBuildEvents = (dispositivo: Dispositivo): StateEvent[] => {\n  const result: StateEvent[] = [];\n\n  const addRestauracao = (d: Dispositivo): void => {\n    const elementoAntesRestauracao = createElemento(d);\n    restaura(d);\n    result.push({ stateType: StateType.ElementoRestaurado, elementos: [elementoAntesRestauracao, createElemento(d)] });\n  };\n\n  if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    const aRestaurar = getDispositivoAndFilhosAsLista(dispositivo).filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    aRestaurar.forEach(addRestauracao);\n\n    const elementoPai = getElementoPaiDeEnumerodos(dispositivo);\n    if (elementoPai) {\n      result.push({ stateType: StateType.ElementoValidado, elementos: [elementoPai] });\n    }\n  } else {\n    addRestauracao(dispositivo);\n  }\n\n  result.push({ stateType: StateType.ElementoSelecionado, elementos: [createElemento(dispositivo, true)] });\n  return result;\n};\n\nexport const suprimeAndBuildEvents = (articulacao: Articulacao, dispositivo: Dispositivo): StateEvent[] => {\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d))));\n\n  if (dispositivo.alteracoes && dispositivo.alteracoes.filhos.length > 0) {\n    dispositivo.alteracoes.filhos.forEach(f => getDispositivoAndFilhosAsLista(f).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d)))));\n  }\n  const eventos = new Eventos();\n  eventos.add(StateType.ElementoSuprimido, getElementos(dispositivo));\n\n  const elementoPai = getElementoPaiDeEnumerodos(dispositivo);\n  if (elementoPai) {\n    eventos.add(StateType.ElementoValidado, [elementoPai]);\n  }\n\n  eventos.add(StateType.ElementoSelecionado, [createElemento(dispositivo, true)]);\n  return eventos.build();\n};\n\nexport const getElementoPaiDeEnumerodos = (dispositivo: Dispositivo): Elemento | null => {\n  const dipositivoPai = dispositivo.pai && !isAgrupador(dispositivo.pai) ? (isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai) : null;\n\n  if (dipositivoPai) {\n    dipositivoPai.mensagens = validaDispositivo(dipositivoPai);\n    return createElemento(dipositivoPai, true);\n  }\n\n  return null;\n};\n\nexport const getEvento = (eventos: StateEvent[], stateType: StateType): StateEvent => {\n  return eventos?.filter(ev => ev.stateType === stateType)[0];\n};\n\nexport const getEventosQuePossuemElementos = (eventos: StateEvent[]): StateEvent[] => {\n  return eventos?.filter(ev => ev?.elementos && ev.elementos?.length > 0);\n};\n\nexport const addElementosAoEvento = (evento: StateEvent, elementos: Elemento[]): void => {\n  elementos.forEach(elemento => (evento.elementos?.filter(atual => atual.uuid === elemento.uuid).length === 0 ? evento.elementos.push(elemento) : undefined));\n};\n\nexport const eventoContem = (stateEvents: StateEvent, elemento: Elemento): boolean => {\n  return (\n    stateEvents?.elementos!.map(ev => ev.uuid === elemento!.uuid && ev.rotulo === elemento!.rotulo && ev.conteudo?.texto === elemento.conteudo?.texto).filter(value => value)\n      .length > 0\n  );\n};\n\nexport const createEventos = (): StateEvent[] => {\n  return [\n    {\n      stateType: StateType.ElementoIncluido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRemovido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoModificado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRenumerado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRestaurado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSuprimido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSelecionado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoMarcado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.SituacaoElementoModificada,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoReferenciado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.RevisaoAceita,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.RevisaoRejeitada,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n  ];\n};\n\nexport const getElementosRemovidosEIncluidos = (eventos: StateEvent[]): Elemento[] => {\n  const map = new Map();\n  eventos.filter(ev => [StateType.ElementoRemovido, StateType.ElementoIncluido].includes(ev.stateType)).forEach(ev => ev.elementos?.forEach(el => map.set(el.uuid!, el)));\n  return Array.from(map.values());\n};\n\nexport const unificarEvento = (state: State, eventos: StateEvent[], stateType: StateType): StateEvent[] => {\n  const result = eventos.filter(ev => ev.stateType !== stateType);\n\n  if (stateType === StateType.ElementoRemovido) {\n    const elementos = eventos\n      .filter(ev => ev.stateType === StateType.ElementoRemovido)\n      .map(ev => ev.elementos || [])\n      .flat();\n    elementos.length && result.push({ stateType: stateType, elementos });\n  } else {\n    const elementos: Elemento[] = [];\n    const mapDispositivos: Map<number, Dispositivo> = new Map();\n\n    eventos\n      .filter(ev => ev.stateType === stateType)\n      .forEach(ev => {\n        ev.elementos?.forEach(e => {\n          const r = [StateType.ElementoIncluido, StateType.ElementoMarcado, StateType.SituacaoElementoModificada, StateType.ElementoRenumerado].includes(stateType)\n            ? findRevisaoByElementoUuid(state.revisoes, e.uuid!)\n            : undefined;\n          if (r && isRevisaoDeExclusao(r)) {\n            elementos.push(e);\n          } else if (!mapDispositivos.has(e.uuid!)) {\n            const dispositivo = getDispositivoFromElemento(state.articulacao!, e)!;\n            if (dispositivo) {\n              mapDispositivos.set(e.uuid!, dispositivo);\n              elementos.push(createElementoValidado(dispositivo, stateType === StateType.ElementoIncluido));\n            }\n          }\n        });\n      });\n\n    elementos.length && result.push({ stateType: stateType, elementos });\n  }\n  return result;\n};\n","import { Elemento } from '../../../model/elemento';\nimport { StateEvent, StateType } from '../../state';\nimport { createEventos, eventoContem } from './eventosUtil';\n\nexport class Eventos {\n  eventos: StateEvent[] = [];\n\n  constructor() {\n    this.eventos = createEventos();\n  }\n\n  add(stateType: StateType, elementos: Elemento[]): void {\n    const evento = this.get(stateType);\n    elementos.forEach(el => (!eventoContem(evento, el) ? evento.elementos?.push(el) : undefined));\n  }\n\n  build(): StateEvent[] {\n    return this.eventos.filter(ev => ev.elementos && ev.elementos.length > 0);\n  }\n\n  get(stateType: StateType): StateEvent {\n    return this.eventos.filter(ev => ev.stateType === stateType)[0];\n  }\n\n  setReferencia(referencia: Elemento): void {\n    this.get(StateType.ElementoIncluido).referencia = referencia;\n  }\n}\n","import { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isArtigo } from '../../../model/dispositivo/tipo';\nimport { createElemento, criaListaElementosAfinsValidados, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\nimport { createAlteracao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { formataNumero, getDataPorExtenso, getNumero, getTipo, validaUrn } from '../../../model/lexml/documento/urnUtil';\nimport { getUltimoFilho, buildListaDispositivos, getDispositivoAnterior } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { buildDispositivosAssistente } from '../../../model/lexml/numeracao/parserReferenciaDispositivo';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, getElementosDoDispositivo } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const adicionaAlteracaoComAssistente = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined || !isArtigo(atual)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const novo = criaDispositivo(atual.pai!, atual.tipo, atual);\n  novo.situacao = new DispositivoAdicionado();\n  (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n  novo.isDispositivoAlteracao = false;\n  (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = undefined;\n  novo.pai?.renumeraFilhos();\n  novo.id = buildId(novo);\n\n  (novo as Artigo).caput!.situacao = novo.situacao = new DispositivoAdicionado();\n  ((novo as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n\n  createAlteracao(novo);\n\n  novo.alteracoes!.situacao = new DispositivoAdicionado();\n  (novo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n\n  if (action.dispositivos) {\n    try {\n      buildDispositivosAssistente(action.dispositivos, novo, state.modo);\n    } catch (e) {\n      return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: (e as Error).message });\n    }\n  }\n\n  if (action.norma) {\n    novo.alteracoes!.base = action.norma;\n\n    const genero = getTipo(action.norma)?.genero;\n\n    if (action.norma && validaUrn(action.norma)) {\n      const textoUrn = `${getTipo(action.norma).descricao} nº ${formataNumero(getNumero(action.norma))}, de ${getDataPorExtenso(action.norma)}`;\n      novo.texto = `${genero && genero === 'M' ? 'O' : 'A'} <a href=\"${action.norma}\">${textoUrn}</a>, passa a vigorar com as seguintes alterações:`;\n    }\n  }\n\n  const novosDispositivos = buildListaDispositivos(novo, []);\n  novosDispositivos.forEach((d, i: number) => {\n    if (i > 0 && i < novosDispositivos.length - 1) {\n      d.texto = TEXTO_OMISSIS;\n    }\n    if (i > 1) {\n      adicionarOmissisObrigatorios(d);\n    }\n  });\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementosDoDispositivo(novo, true));\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(novo, false));\n  eventos.add(StateType.ElementoMarcado, [createElemento(getUltimoFilho(novo)), createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst adicionarOmissisObrigatorios = (atual: Dispositivo): void => {\n  if (parseInt(atual.numero!) > 1) {\n    const anterior = getDispositivoAnterior(atual);\n    const novo = criaDispositivo(atual.pai!, TipoDispositivo.omissis.tipo, anterior, anterior ? undefined : 0);\n    novo.situacao = new DispositivoAdicionado();\n    atual.pai?.addFilhoOnPosition(novo, 0);\n  }\n};\n","import { isArtigo, isCaput, isEmenta } from './../../../model/dispositivo/tipo';\nimport { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isIncisoCaput, isOmissis, isParagrafo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, createElementos, createElementoValidado, getDispositivoFromElemento, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { hasIndicativoDesdobramento, normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { createByInferencia, criaDispositivo, criaDispositivoCabecaAlteracao } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { copiaFilhos } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport {\n  hasFilhos,\n  irmaosMesmoTipo,\n  isArtigoUnico,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isOriginal,\n  isParagrafoUnico,\n  podeRenumerarFilhosAutomaticamente,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { buildEventoAdicionarElemento } from '../evento/eventosUtil';\nimport { isNovoDispositivoDesmembrandoAtual, naoPodeCriarFilho, textoFoiModificado } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { isArticulacaoAlteracao, getDispositivoAnteriorNaSequenciaDeLeitura, getArtigo } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoArtigo } from '../../../model/lexml/tipo/tipoArtigo';\n\nconst calculaPosicao = (atual: Dispositivo, posicao: string): number | undefined => {\n  const posicaoAtual = atual.pai!.indexOf(atual);\n  if (posicao === 'antes') {\n    return posicaoAtual;\n  }\n  return posicaoAtual === atual.pai!.filhos.length - 1 ? undefined : posicaoAtual + 1;\n};\n\nexport const adicionaElemento = (state: any, action: any): State => {\n  let textoModificado = false;\n\n  const refAtual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const atualCaputPosicaoFilho = refAtual && isArtigo(refAtual) && action.novo.tipo === TipoDispositivo.inciso.tipo ? (refAtual as TipoArtigo).caput : undefined;\n  const atual = action.posicao === 'filho' && atualCaputPosicaoFilho ? atualCaputPosicaoFilho : refAtual;\n  const refUltimoFilho = atual && action.posicao === 'filho' ? (hasFilhos(atual) ? atual.filhos[atual.filhos.length - 1] : undefined) : undefined;\n\n  if (atual === undefined || (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && hasIndicativoDesdobramento(atual))) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (\n    atual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_NOVO &&\n    atual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    hasIndicativoDesdobramento(atual) &&\n    !isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)\n  ) {\n    if (\n      atual.hasAlteracao() &&\n      atual.alteracoes?.filhos &&\n      isOriginal(atual.alteracoes.filhos[0]) &&\n      !isOmissis(atual.alteracoes.filhos[0]) &&\n      atual.alteracoes.filhos[0].numero === '1' &&\n      action.posicao !== 'antes' &&\n      atual.tipo !== action.novo.tipo\n    ) {\n      state.ui.events = [];\n      return state;\n    }\n    if (\n      action.posicao === undefined &&\n      isDispositivoAlteracao(atual) &&\n      hasFilhos(atual) &&\n      isOriginal(atual.filhos[0]) &&\n      !isOmissis(atual.filhos[0]) &&\n      !isParagrafo(atual.filhos[0]) &&\n      atual.filhos[0].numero === '1'\n    ) {\n      state.ui.events = [];\n      return state;\n    }\n  }\n\n  let ref =\n    atual.pai!.indexOf(atual) === 0\n      ? !action.posicao && atual.hasAlteracao()\n        ? atual\n        : isIncisoCaput(atual!) || isDispositivoCabecaAlteracao(atual!)\n        ? atual.pai!.pai!\n        : atual.pai\n      : atual.pai!.filhos[atual.pai!.indexOf(atual) - 1];\n\n  if (atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    action.atual.conteudo.texto = atual.texto;\n    action.novo.conteudo.texto = undefined;\n  }\n\n  const originalmenteUnico = isArtigoUnico(atual) || isParagrafoUnico(atual);\n\n  const elementoAtualOriginal = createElementoValidado(atual);\n\n  const elementosRemovidos: Elemento[] = [];\n\n  createElementos(elementosRemovidos, atual);\n\n  if (textoFoiModificado(atual, action, state)) {\n    atual.texto = !isDispositivoAlteracao(atual) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n    textoModificado = true;\n  }\n\n  if (naoPodeCriarFilho(atual, action)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Não é possível criar dispositivos nessa situação' });\n  }\n\n  let novo;\n\n  if (action.posicao && action.posicao !== 'filho' && !isEmenta(atual)) {\n    if (atual.tipo === action.novo.tipo) {\n      novo =\n        action.posicao === 'antes'\n          ? criaDispositivo(atual.pai!, action.novo.tipo, undefined, calculaPosicao(atual, action.posicao))\n          : criaDispositivo(atual.pai!, action.novo.tipo, atual); // depois\n    } else if (isAgrupador(atual) && action.novo.tipo === TipoDispositivo.artigo.tipo) {\n      if (action.posicao === 'antes') {\n        const anterior = getDispositivoAnteriorNaSequenciaDeLeitura(atual);\n        ref = anterior;\n        const paiDoNovo = !anterior ? atual.pai! : isAgrupador(anterior!) ? anterior : isArtigo(anterior) ? anterior.pai! : getArtigo(anterior).pai!;\n        const posicao = anterior && isAgrupador(anterior) ? 0 : undefined;\n        const referencia = !anterior || isAgrupador(anterior) ? undefined : isArtigo(anterior) ? anterior : getArtigo(anterior);\n        novo = criaDispositivo(paiDoNovo, action.novo.tipo, referencia, posicao);\n      } else {\n        novo = criaDispositivo(atual, action.novo.tipo, undefined, 0);\n      }\n    }\n  } else if (atual.hasAlteracao()) {\n    novo = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, atual.alteracoes!, undefined, 0);\n  } else if (isEmenta(atual) && action.novo.tipo) {\n    novo = criaDispositivo(state.articulacao, action.novo.tipo, undefined, 0);\n  } else if (action.novo.tipo && atual.tipo !== action.novo.tipo) {\n    novo = criaDispositivo(atual, action.novo.tipo, refUltimoFilho);\n  } else {\n    novo = createByInferencia(atual, action);\n  }\n\n  if (isDispositivoCabecaAlteracao(novo)) {\n    // novo.cabecaAlteracao = isDispositivoCabecaAlteracao(novo);\n    novo.notaAlteracao = 'NR';\n  }\n\n  if (isDispositivoCabecaAlteracao(novo)) {\n    novo.notaAlteracao = 'NR';\n  }\n\n  if (\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL ||\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO ||\n    atual.situacao instanceof DispositivoAdicionado\n  ) {\n    novo.situacao = new DispositivoAdicionado();\n    if (isArtigo(novo)) {\n      (novo as Artigo).caput!.situacao = new DispositivoAdicionado();\n    }\n    (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n    const pai = novo.pai!;\n    if (isArticulacaoAlteracao(pai) && pai.filhos.length === 1) {\n      pai.situacao = new DispositivoAdicionado();\n    }\n  }\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && hasFilhos(atual)) {\n    copiaFilhos(atual, novo);\n  }\n\n  if (isDispositivoAlteracao(novo)) {\n    novo.createRotulo(novo);\n    novo.id = buildId(novo);\n    novo.mensagens?.push({ tipo: TipoMensagem.WARNING, descricao: `É necessário informar o rótulo do dispositivo` });\n  }\n\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai);\n  }\n\n  novo.pai!.renumeraFilhos();\n\n  if (novo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    novo.id = buildId(novo);\n  }\n\n  const eventos =\n    action.posicao && action.posicao === 'antes'\n      ? buildEventoAdicionarElemento(ref!, novo)\n      : action.posicao === 'filho' && refUltimoFilho\n      ? buildEventoAdicionarElemento(refUltimoFilho, novo)\n      : action.posicao === 'filho' && !refUltimoFilho && isCaput(atual)\n      ? buildEventoAdicionarElemento(atual.pai!, novo)\n      : buildEventoAdicionarElemento(atual, novo);\n\n  const elementoAtualAtualizado = createElementoValidado(atual);\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && elementosRemovidos && elementosRemovidos.length > 0) {\n    eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  }\n\n  if (isAgrupador(novo) && irmaosMesmoTipo(novo).length === 2) {\n    const irmao = irmaosMesmoTipo(novo).filter(a => a !== novo);\n    eventos.add(StateType.ElementoModificado, [createElemento(irmao[0]!)]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    eventos.add(StateType.ElementoModificado, [elementoAtualOriginal, elementoAtualAtualizado]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) || isOmissis(atual)) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n  }\n\n  if (isArtigoUnico(atual) || originalmenteUnico) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n    eventos.add(StateType.ElementoRenumerado, [elementoAtualAtualizado]);\n  }\n\n  if (action.posicao && action.posicao === 'antes') {\n    eventos.add(\n      StateType.ElementoRenumerado,\n      listaDispositivosRenumerados(novo).map(d => createElemento(d))\n    );\n  }\n\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo), createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { TipoDispositivo } from './../../../model/lexml/tipo/tipoDispositivo';\nimport { retornaEstadoAtualComMensagem } from './../util/stateReducerUtil';\nimport {\n  getUltimoFilho,\n  isDispositivoAlteracao,\n  // isUltimaAlteracao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoCabecaAlteracao,\n  getArticulacao,\n  podeRenumerarFilhosAutomaticamente,\n  getTiposAgrupadoresQuePodemSerInseridosAntes,\n  getTiposAgrupadoresQuePodemSerInseridosDepois,\n  getPrimeiroAgrupadorNaArticulacao,\n  hasEmenta,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { getElementos } from './../../../model/elemento/elementoUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { getPaiQuePodeReceberFilhoDoTipo } from './../evento/eventosUtil';\nimport { isAgrupador, isArticulacao, isArtigo, isEmenta } from './../../../model/dispositivo/tipo';\nimport { Alteracoes } from '../../../model/dispositivo/blocoAlteracao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { criaDispositivo, criaDispositivoCabecaAlteracao } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { getDispositivoAnteriorMesmoTipo, irmaosMesmoTipo, isDispositivoCabecaAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { copiaDispositivosParaOutroPai, isDesdobramentoAgrupadorAtual } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { Dispositivo } from '../../../model/dispositivo/dispositivo';\n\nexport const agrupaElemento = (state: any, action: any): State => {\n  let atual = getDispositivoFromElemento(state.articulacao, action.atual, true)!;\n\n  if (atual === undefined) {\n    return state;\n  }\n\n  if (!isArtigo(atual) && !isAgrupador(atual) && !isEmenta(atual)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Não é permitido adicionar agrupador de artigo a partir da seleção atual' });\n  }\n\n  if ((isArticulacao(atual) || isEmenta(atual)) && action.novo.posicao === 'antes') {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Não é permitido adicionar agrupador de artigo antes da ementa' });\n  }\n\n  // if (isArtigo(atual) && action.novo.posicao !== 'antes') {\n  //   return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Operação não permitida.' });\n  // }\n\n  const descricaoTipo = TipoDispositivo[action.novo.tipo.toLowerCase()].descricao;\n\n  if (!action.isAbrindoEmenda && action.novo.posicao === 'antes' && !getTiposAgrupadoresQuePodemSerInseridosAntes(atual).includes(action.novo.tipo)) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\" antes do dispositivo selecionado [${atual.rotulo}]`,\n    });\n  }\n\n  if (!action.isAbrindoEmenda && action.novo.posicao === 'depois' && !getTiposAgrupadoresQuePodemSerInseridosDepois(atual).includes(action.novo.tipo)) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\" após o dispositivo selecionado [${atual.rotulo}]`,\n    });\n  }\n\n  if (isEmenta(atual)) {\n    atual = state.articulacao;\n  }\n\n  const posicaoDoNovoAgrupador: string = action.novo.posicao;\n  const manterNovoNoMesmoGrupoDeAspas: boolean = action.novo.manterNoMesmoGrupoDeAspas;\n\n  const cabecaAlteracao = isDispositivoAlteracao(atual) ? getDispositivoCabecaAlteracao(atual) : undefined;\n  const dispositivosAlteracao = cabecaAlteracao ? getDispositivoAndFilhosAsLista(cabecaAlteracao) : [];\n  const dispositivosArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n\n  if (isDispositivoAlteracao(atual)) {\n    if (isDispositivoCabecaAlteracao(atual) && manterNovoNoMesmoGrupoDeAspas && posicaoDoNovoAgrupador === 'antes' && !atual.tiposPermitidosPai?.includes(action.novo.tipo)) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\", no mesmo grupo de aspas, antes do dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (!isDispositivoCabecaAlteracao(atual) && manterNovoNoMesmoGrupoDeAspas && !dispositivosAlteracao.some(d => d.tiposPermitidosFilhos?.includes(action.novo.tipo))) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\", no mesmo grupo de aspas, após o dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (isArtigo(atual) && !isDispositivoCabecaAlteracao(atual) && !manterNovoNoMesmoGrupoDeAspas) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\", na alteração de norma, a partir do atual dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (!manterNovoNoMesmoGrupoDeAspas) {\n      return criarNovaCabecaDeAlteracao(state, atual, posicaoDoNovoAgrupador, action.novo.tipo, false, { rotulo: action.novo.rotulo, uuid: action.novo.uuid });\n    }\n\n    if (isDispositivoCabecaAlteracao(atual) && posicaoDoNovoAgrupador === 'antes') {\n      return criarNovaCabecaDeAlteracao(state, atual, posicaoDoNovoAgrupador, action.novo.tipo, true, { rotulo: action.novo.rotulo, uuid: action.novo.uuid });\n    }\n  }\n\n  let novo: Dispositivo;\n  // const ref = dispositivosArticulacao[dispositivosArticulacao.indexOf(atual) - (posicaoDoNovoAgrupador === 'antes' ? 1 : 0)];\n  const ref = getReferencia(atual, posicaoDoNovoAgrupador, dispositivosArticulacao);\n\n  if (!isArticulacao(atual) && isDesdobramentoAgrupadorAtual(atual, action.novo.tipo)) {\n    novo = criaDispositivo(atual.pai!.pai!, action.novo.tipo, undefined, atual.pai!.pai!.indexOf(atual.pai!) + 1);\n  } else {\n    const paiQuePodeReceberNovoAgrupador = getPaiQuePodeReceberFilhoDoTipo(ref, action.novo.tipo, dispositivosAlteracao)!;\n    if (!paiQuePodeReceberNovoAgrupador) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `Não é permitido adicionar agrupador \"${descricaoTipo}\" a partir do atual dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    const posNovoAgrupador =\n      atual.pai === paiQuePodeReceberNovoAgrupador\n        ? atual.pai!.indexOf(atual) + (posicaoDoNovoAgrupador === 'antes' ? 0 : 1)\n        : calculaPosNovoAgrupador(atual, paiQuePodeReceberNovoAgrupador, dispositivosArticulacao, dispositivosAlteracao);\n    novo = criaDispositivo(paiQuePodeReceberNovoAgrupador, action.novo.tipo, undefined, posNovoAgrupador);\n  }\n\n  // Reutiliza \"uuid\" quando o agrupador é criado por ação de undo ou redo\n  novo.uuid = action.novo.uuid ?? novo.uuid;\n\n  novo.situacao = new DispositivoAdicionado();\n  (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n  novo.texto = action.novo.texto ?? '';\n  novo.createRotulo(novo);\n  novo.rotulo = action.novo.rotulo ?? novo.rotulo;\n  novo.id = buildId(novo);\n\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai!);\n  }\n\n  const dispositivos = getDispositivosASeremCopiadosParaOutroPai(atual, novo, posicaoDoNovoAgrupador, dispositivosAlteracao);\n  copiaDispositivosParaOutroPai(novo, dispositivos);\n\n  novo.pai!.renumeraFilhos();\n  novo.pai!.filhos.forEach(f => f.renumeraFilhos());\n  // novo.renumeraFilhos();\n\n  const dispositivosAux = getDispositivoAndFilhosAsLista(novo.pai!);\n\n  dispositivosAux.filter(d => isAgrupador(d) && !(d.tipo === 'Articulacao' && d.pai === undefined)).forEach(d => (d.id = buildId(d)));\n\n  const renumerados = dispositivosAux.filter(fnFilterAgrupadorAdicionado).map((d: Dispositivo) => createElemento(d));\n\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(novo);\n\n  if (irmaoAnterior && irmaosMesmoTipo(novo).length === 2) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  if (isArticulacao(ref) && hasEmenta(ref)) {\n    eventos.setReferencia(createElemento(state.articulacao.projetoNorma.ementa));\n  } else if (isArtigo(atual) && posicaoDoNovoAgrupador === 'depois') {\n    eventos.setReferencia(createElemento(getUltimoFilho(ref)));\n  } else if (isArtigo(ref) && posicaoDoNovoAgrupador === 'antes') {\n    eventos.setReferencia(createElemento(getUltimoFilho(ref)));\n  } else {\n    eventos.setReferencia(createElemento(ref));\n  }\n\n  const transferidosParaOutroPai = novo.filhos.map((d: Dispositivo) => createElemento(d));\n\n  // eventos.add(StateType.ElementoIncluido, [createElemento(novo)]);\n  const elementoIncluido = createElemento(novo);\n  elementoIncluido.manterNoMesmoGrupoDeAspas = manterNovoNoMesmoGrupoDeAspas;\n  eventos.add(StateType.ElementoIncluido, [elementoIncluido]);\n\n  eventos.add(StateType.SituacaoElementoModificada, [createElemento(atual), ...transferidosParaOutroPai]);\n  eventos.add(StateType.ElementoRenumerado, renumerados);\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo)]);\n\n  const dArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n  const dReferenciado = dArticulacao[dArticulacao.indexOf(novo) + 1];\n  eventos.add(StateType.ElementoReferenciado, dReferenciado ? [createElemento(dReferenciado)] : []);\n\n  if (novo === getPrimeiroAgrupadorNaArticulacao(novo) && hasEmenta(novo)) {\n    eventos.get(StateType.SituacaoElementoModificada).elementos!.push(createElemento(state.articulacao.projetoNorma.ementa));\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst calculaPosNovoAgrupador = (\n  dispositivo: Dispositivo,\n  paiQuePodeReceberFilho: Dispositivo,\n  dispositivosArticulacao: Dispositivo[],\n  dispositivosAlteracao: Dispositivo[]\n): number | undefined => {\n  const ds = dispositivosArticulacao.filter(d => isDispositivoValidoNoConjunto(d, dispositivosAlteracao) && (d === dispositivo || paiQuePodeReceberFilho.filhos.includes(d)));\n  return ds.indexOf(dispositivo);\n};\n\n// const isUltimoArtigoOuAgrupadorDaAlteracao = (dispositivo: Dispositivo): boolean => {\n//   return isUltimaAlteracao(dispositivo) || isUltimaAlteracao(getUltimoFilho(dispositivo));\n// };\n\nconst fnFilterAgrupadorAdicionado = (d: Dispositivo): boolean => !isArtigo(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n\nconst criarNovaCabecaDeAlteracao = (state: any, atual: Dispositivo, posicao: string, tipo: string, manterNovoNoMesmoGrupoDeAspas = false, dadosComplementares: any = {}): State => {\n  const cabecaAlteracao = getDispositivoCabecaAlteracao(atual);\n  const pos = cabecaAlteracao.pai!.indexOf(cabecaAlteracao) + (posicao === 'antes' ? 0 : 1);\n  const novo = criaDispositivoCabecaAlteracao(tipo, cabecaAlteracao.pai! as Alteracoes, undefined, pos);\n  novo.rotulo = dadosComplementares.rotulo ?? novo.rotulo;\n  novo.uuid = dadosComplementares.uuid ?? novo.uuid;\n  novo.texto = dadosComplementares.texto ?? novo.texto ?? '';\n  novo.id = buildId(novo);\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai!);\n  }\n\n  const ref = pos === 0 ? novo.pai!.pai! : getUltimoFilho(novo.pai!.filhos[pos - 1]);\n\n  const eventos = new Eventos();\n\n  if (manterNovoNoMesmoGrupoDeAspas) {\n    atual.cabecaAlteracao = false;\n    copiaDispositivosParaOutroPai(novo, [atual]);\n\n    novo.pai!.renumeraFilhos();\n    novo.renumeraFilhos();\n\n    const renumerados = [\n      ...novo.pai!.filhos.filter(fnFilterAgrupadorAdicionado).map(d => createElemento(d)),\n      ...novo.filhos.filter(fnFilterAgrupadorAdicionado).map(d => createElemento(d)),\n    ];\n\n    eventos.add(StateType.ElementoRenumerado, renumerados);\n  }\n\n  eventos.setReferencia(createElemento(ref));\n\n  // eventos.add(StateType.ElementoIncluido, [createElemento(novo)]);\n  const elementoIncluido = createElemento(novo);\n  elementoIncluido.manterNoMesmoGrupoDeAspas = manterNovoNoMesmoGrupoDeAspas;\n  eventos.add(StateType.ElementoIncluido, [elementoIncluido]);\n\n  eventos.add(StateType.SituacaoElementoModificada, getElementos(novo));\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo)]);\n\n  const dArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n  const dReferenciado = dArticulacao[dArticulacao.indexOf(novo) + 1];\n  eventos.add(StateType.ElementoReferenciado, dReferenciado ? [createElemento(dReferenciado)] : []);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst isDispositivoValidoNoConjunto = (d: Dispositivo, dispositivosAlteracao: Dispositivo[]): boolean => dispositivosAlteracao.length === 0 || dispositivosAlteracao.includes(d);\n\nconst getDispositivosASeremCopiadosParaOutroPai = (atual: Dispositivo, novo: Dispositivo, posicaoDoNovoAgrupador: string, dispositivosAlteracao: Dispositivo[]): Dispositivo[] => {\n  const dArticulacao = getDispositivoAndFilhosAsLista(getArticulacao(atual));\n  const pais = getPais(atual, novo.tipo);\n  if (isAgrupador(atual) && posicaoDoNovoAgrupador === 'depois') {\n    pais.push(atual);\n  }\n  const indexAtual = dArticulacao.indexOf(atual) + (posicaoDoNovoAgrupador === 'antes' ? 0 : 1);\n  const podeCopiar = (d: Dispositivo, index: number): boolean =>\n    index >= indexAtual && d !== novo && !!novo.tiposPermitidosFilhos?.includes(d.tipo) && pais.includes(d.pai!) && isDispositivoValidoNoConjunto(d, dispositivosAlteracao);\n  return dArticulacao.filter(podeCopiar);\n};\n\nconst getPais = (dispositivo: Dispositivo, tipo: string, result: Dispositivo[] = []): Dispositivo[] => {\n  const tiposAgrupadorArtigo = ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo'];\n  if (dispositivo && tiposAgrupadorArtigo.indexOf(dispositivo.tipo) >= tiposAgrupadorArtigo.indexOf(tipo)) {\n    result.push(dispositivo.pai!);\n    return getPais(dispositivo.pai!, tipo, result);\n  }\n  return result;\n};\n\nconst getReferencia = (atual: Dispositivo, posicaoDoNovoAgrupador: string, dispositivosArticulacao: Dispositivo[]): Dispositivo => {\n  const atuaEhDispositivoDeAlteracao = isDispositivoAlteracao(atual);\n  const dispositivos = dispositivosArticulacao.filter(d => isDispositivoAlteracao(d) === atuaEhDispositivoDeAlteracao);\n  return dispositivos[dispositivos.indexOf(atual) - (posicaoDoNovoAgrupador === 'antes' ? 1 : 0)];\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\n\nexport class DispositivoModificado implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_MODIFICADO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento));\n\n    acoesFiltradas.push(restaurarElementoAction);\n\n    return acoesFiltradas.filter(a => a !== undefined).sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { isRevisaoDeMovimentacao, isRevisaoDeTransformacao } from './../util/revisaoUtil';\nimport { isAgrupador, isArticulacao, isCaput, isOmissis } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { createAlteracao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport {\n  buscaDispositivoById,\n  findDispositivoByUuid2,\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoCabecaAlteracao,\n  getTiposAgrupadorArtigoOrdenados,\n  hasEmenta,\n  isAdicionado,\n  isDispositivoAlteracao,\n  isModificado,\n  isSuprimido,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { Counter } from '../../../util/counter';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { findRevisaoById, identificarRevisaoElementoPai, isRevisaoDeExclusao, isRevisaoElemento, isRevisaoPrincipal } from '../util/revisaoUtil';\nimport { Articulacao, Artigo, Dispositivo } from './../../../model/dispositivo/dispositivo';\nimport { ClassificacaoDocumento } from './../../../model/documento/classificacao';\nimport { getDispositivoFromElemento } from './../../../model/elemento/elementoUtil';\nimport { DispositivoEmendaAdicionado, DispositivosEmenda } from './../../../model/emenda/emenda';\nimport { isArticulacaoAlteracao, percorreHierarquiaDispositivos, getIrmaoAnteriorIndependenteDeTipo } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { agrupaElemento } from './agrupaElemento';\n\nexport const aplicaAlteracoesEmenda = (state: any, action: any): State => {\n  let alertas = [];\n  if (state && state.ui && state.ui.alertas.length > 0) {\n    alertas = state.ui.alertas;\n  }\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [],\n      alertas: alertas,\n    },\n    revisoes: [],\n    emRevisao: state.emRevisao,\n    numEventosPassadosAntesDaRevisao: 0,\n  };\n\n  const eventos = new Eventos();\n\n  if (action.alteracoesEmenda.dispositivosSuprimidos) {\n    eventos.add(StateType.ElementoSuprimido, []);\n\n    action.alteracoesEmenda.dispositivosSuprimidos.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.id);\n\n      if (d) {\n        percorreHierarquiaDispositivos(d, d => {\n          d.situacao = new DispositivoSuprimido(createElemento(d));\n          eventos.get(StateType.ElementoSuprimido).elementos?.push(createElemento(d));\n        });\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosModificados) {\n    eventos.add(StateType.ElementoModificado, []);\n\n    action.alteracoesEmenda.dispositivosModificados.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.tipo === 'Caput' ? idSemCpt(dispositivo.id) : dispositivo.id);\n\n      if (d) {\n        d.situacao = new DispositivoModificado(createElemento(d));\n        d.texto = dispositivo.texto;\n        eventos.get(StateType.ElementoModificado).elementos?.push(createElemento(d));\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosAdicionados) {\n    eventos.eventos.push(...processaDispositivosAdicionados(state, action.alteracoesEmenda));\n  }\n\n  if (action.revisoes?.length) {\n    eventos.eventos.push(...processaRevisoes(retorno, action.revisoes));\n    retorno.emRevisao = true;\n  }\n\n  retorno.ui!.events = eventos.build();\n\n  const elementosInseridos: Elemento[] = [];\n  retorno.ui!.events.filter(stateEvent => stateEvent.stateType === StateType.ElementoIncluido).forEach(se => elementosInseridos.push(...se.elementos!));\n\n  retorno.ui!.events.push({\n    stateType: StateType.SituacaoElementoModificada,\n    elementos: getElementosAlteracaoASeremAtualizados(state.articulacao, elementosInseridos),\n  });\n\n  if (retorno.emRevisao) {\n    retorno.ui!.events.push({ stateType: StateType.RevisaoAtivada });\n  }\n\n  if (state.articulacao) {\n    const d = getDispositivoAndFilhosAsLista(state.articulacao).find(d => !isArticulacao(d) && (isAdicionado(d) || isSuprimido(d) || isModificado(d)));\n    if (d) {\n      retorno.ui!.events.push({ stateType: StateType.ElementoMarcado, elementos: [createElemento(d)] });\n    }\n  }\n\n  return retorno;\n};\n\nconst processaDispositivosAdicionados = (state: any, alteracoesEmenda: DispositivosEmenda): StateEvent[] => {\n  const tiposAgrupadorArtigo = getTiposAgrupadorArtigoOrdenados();\n  const eventos: StateEvent[] = [];\n\n  for (const da of alteracoesEmenda.dispositivosAdicionados) {\n    if (tiposAgrupadorArtigo.includes(da.tipo)) {\n      eventos.push(...criaEventosParaDispositivoAgrupador(state, da));\n    } else {\n      eventos.push(criaEventoElementosIncluidos(state, da));\n    }\n  }\n\n  return eventos;\n};\n\nconst isPrimeiroDispositivoEmAlteracaoDeNorma = (ref: Dispositivo, dea: DispositivoEmendaAdicionado): boolean => {\n  return !isDispositivoAlteracao(ref) && isEmendaEmAlteracaoDeNorma(dea);\n};\n\nconst isEmendaEmAlteracaoDeNorma = (dea: DispositivoEmendaAdicionado): boolean => {\n  return dea.id.split('_').some(p => p.startsWith('alt'));\n};\n\nconst criaEventosParaDispositivoAgrupador = (state: any, dea: DispositivoEmendaAdicionado): StateEvent[] => {\n  const articulacao = state.articulacao;\n  let ref = buscaDispositivoById(state.articulacao, dea.idPosicaoAgrupador!)!;\n  let posicao = 'depois';\n\n  // Solução de contorno para emendas com adição de artigo que altera norma vigente e com agrupadores adicionados na alteração.\n  if (buscaDispositivoById(state.articulacao, dea.id)) {\n    return [];\n  }\n  // ---------------------------------------------------------------------------\n\n  if (ref) {\n    if (isArticulacao(ref) && !isArticulacaoAlteracao(ref) && hasEmenta(ref)) {\n      ref = (ref as Articulacao).projetoNorma!.ementa!;\n    } else if (isPrimeiroDispositivoEmAlteracaoDeNorma(ref, dea)) {\n      ref = ref.alteracoes!.filhos[0];\n      posicao = 'antes';\n    }\n\n    const atual = createElemento(ref);\n\n    const manterNoMesmoGrupoDeAspas = dea.abreAspas ? false : !dea.fechaAspas;\n    const tempState = agrupaElemento(state, { atual, novo: { tipo: dea.tipo, posicao, manterNoMesmoGrupoDeAspas, rotulo: dea.rotulo }, isAbrindoEmenda: true });\n    const events = tempState.ui!.events.filter(ev => ev.stateType !== StateType.ElementoMarcado);\n\n    const elementosIncluidos = events.find(e => e.stateType === StateType.ElementoIncluido)!.elementos!;\n    const novoAgrupador = elementosIncluidos[0];\n\n    const novo = getDispositivoFromElemento(articulacao, novoAgrupador)!;\n\n    ajustaAtributosDispositivoAdicionado(novo, dea, ClassificacaoDocumento.EMENDA);\n\n    elementosIncluidos.length = 0;\n    elementosIncluidos.push(createElemento(novo));\n\n    return events;\n  }\n\n  return [];\n};\n\nconst criaEventoElementosIncluidos = (state: any, dispositivo: DispositivoEmendaAdicionado): StateEvent => {\n  const evento: StateEvent = {\n    stateType: StateType.ElementoIncluido,\n    referencia: undefined,\n    pai: undefined,\n    elementos: [],\n  };\n\n  const novo = criaArvoreDispositivos(state.articulacao, dispositivo, state.modo);\n\n  if (novo) {\n    if (novo.rotulo) {\n      novo.createNumeroFromRotulo(novo.rotulo);\n    }\n\n    if (!evento.referencia) {\n      const dispositivoAnterior = getIrmaoAnteriorIndependenteDeTipo(novo);\n      let pai = isCaput(novo!.pai!) ? novo!.pai!.pai : novo.pai;\n      pai = isArticulacaoAlteracao(pai!) ? buscaDispositivoById(state.articulacao, pai!.pai!.id!) : pai;\n      if (dispositivo.idPai && isAgrupador(pai!)) {\n        evento.referencia = createElemento(pai!);\n      } else {\n        evento.referencia = createElemento(referenciaAjustada(dispositivoAnterior || pai!, novo));\n      }\n    }\n\n    percorreHierarquiaDispositivos(novo, d => {\n      if (!isCaput(d) && !isArticulacaoAlteracao(d)) {\n        const novoEl = createElemento(d);\n        novoEl.lexmlId = buildId(d);\n        evento.elementos?.push(novoEl);\n      }\n    });\n  }\n\n  return evento;\n};\n\nconst referenciaAjustada = (referencia: Dispositivo, dispositivo: Dispositivo): Dispositivo => {\n  const ref = ajustaReferencia(referencia, dispositivo);\n  return ref.id !== dispositivo.id ? ref : dispositivo.pai!.filhos[dispositivo.pai!.filhos.length - 2];\n};\n\nconst criaArvoreDispositivos = (articulacao: Articulacao, da: DispositivoEmendaAdicionado, modo: ClassificacaoDocumento): Dispositivo | undefined => {\n  let novo: Dispositivo | undefined;\n\n  const ehCaput = da.tipo === 'Caput';\n\n  if (da.idIrmaoAnterior) {\n    const d = buscaDispositivoById(articulacao, idSemCpt(da.idIrmaoAnterior));\n\n    if (d) {\n      if (d.id === da.idIrmaoAnterior) {\n        novo = criaDispositivo(d.pai!, da.tipo, d);\n      } else {\n        // Entra aqui quando dispositivo é do tipo \"Paragrafo\" e irmão anterior procurado é o \"Caput\" do artigo\n        // Nesse caso, \"d\" já é o \"Artigo\" que será \"pai\" do novo dispositivo\n        // Em outras palavras: quando o idIrmaoAnterior é de \"caput\" a função \"buscaDispositivoById\" traz o artigo\n        novo = criaDispositivo(d, da.tipo, undefined, 0);\n      }\n    }\n  } else if (da.idPai) {\n    const d = buscaDispositivoById(articulacao, idSemCpt(da.idPai));\n\n    if (d) {\n      if ((da.tipo === 'Inciso' || da.tipo === 'Omissis') && d.tipo === 'Artigo') {\n        novo = criaDispositivo((d as Artigo).caput!, da.tipo, undefined, 0);\n      } else if (ehCaput) {\n        d.texto = da.texto ?? '';\n        novo = (d as Artigo).caput!;\n      } else if (da.tipo === 'Alteracao') {\n        createAlteracao(d);\n        novo = d.alteracoes!;\n        d.alteracoes!.id = da.id;\n        d.alteracoes!.base = da.urnNormaAlterada;\n      } else {\n        novo = criaDispositivo(d, da.tipo, undefined, 0);\n        novo.texto = da.texto ?? '';\n      }\n    }\n  } else {\n    novo = criaDispositivo(articulacao, da.tipo, undefined, 0);\n  }\n\n  if (novo) {\n    ajustaAtributosDispositivoAdicionado(novo, da, modo);\n  }\n\n  if (novo && da.filhos) {\n    da.filhos.forEach((f, i) => {\n      if (i === 0) {\n        f.idPai = da.id;\n        f.id = corrigeIdDispositivoSeNecessario(f.id, da.id);\n      } else {\n        f.idIrmaoAnterior = da.filhos![i - 1].id;\n      }\n      criaArvoreDispositivos(articulacao, f, modo);\n    });\n  }\n\n  return novo;\n};\n\n// O código abaixo é necessário para permitir abertura de emendas que foram salvas com o id incorreto (no caput de artigos em alteração de norma).\n// Novas emendas não terão esse problema.\nconst corrigeIdDispositivoSeNecessario = (id: string, idPai: string): string => {\n  return id.startsWith(idPai) ? id : idPai.split('_').slice(0, -1).join('_') + '_' + id;\n};\n\nconst ajustaAtributosDispositivoAdicionado = (dispositivo: Dispositivo, da: DispositivoEmendaAdicionado, modo: ClassificacaoDocumento): void => {\n  dispositivo.texto = da.texto ?? '';\n  dispositivo.id = da.id;\n  const situacao = new DispositivoAdicionado();\n  situacao.tipoEmenda = modo;\n  dispositivo.situacao = situacao;\n  if (dispositivo.isDispositivoAlteracao) {\n    situacao.existeNaNormaAlterada = !!da.existeNaNormaAlterada;\n  }\n\n  if (!isCaput(dispositivo) && !isOmissis(dispositivo) && !isArticulacao(dispositivo)) {\n    dispositivo.createNumeroFromRotulo(da.rotulo!);\n    dispositivo.rotulo = da.rotulo;\n    if (da.abreAspas) {\n      dispositivo.cabecaAlteracao = true;\n    }\n  }\n\n  if (!isArticulacao(dispositivo)) {\n    dispositivo.texto = da.texto ?? '';\n    if (da.fechaAspas) {\n      const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n      cabecaAlteracao.notaAlteracao = da.notaAlteracao;\n    }\n  }\n};\n\nconst idSemCpt = (id: string): string => id.replace(/(_cpt)$/, '');\n\nconst processaRevisoes = (state: State, revisoes: Revisao[]): StateEvent[] => {\n  const elementosExcluidosEmModoDeRevisao: Elemento[] = [];\n  let elementoAnterior: Partial<Elemento>;\n\n  revisoes.forEach(r => {\n    try {\n      if (isRevisaoElemento(r)) {\n        const rAux = r as RevisaoElemento;\n        processarElementoDaRevisao(state, rAux, elementoAnterior, elementosExcluidosEmModoDeRevisao);\n        if (isRevisaoDeExclusao(rAux)) {\n          elementoAnterior = rAux.elementoAposRevisao;\n        }\n      }\n      state.revisoes?.push(r);\n    } catch (error) {\n      // TODO: tratar erro\n    }\n  });\n\n  state.revisoes = identificarRevisaoElementoPai(state, state.revisoes!);\n\n  return [...buildEventoRevisaoDispositivoRestaurado(state, revisoes), { stateType: StateType.ElementoIncluido, elementos: elementosExcluidosEmModoDeRevisao }];\n};\n\nconst buildEventoRevisaoDispositivoRestaurado = (state: State, revisoes: Revisao[]): StateEvent[] => {\n  const result: StateEvent[] = [];\n  const revisoesRestauracao = revisoes.map(r => r as RevisaoElemento).filter(r => r.actionType === RESTAURAR_ELEMENTO) || [];\n\n  if (revisoesRestauracao.length) {\n    const elementos = revisoesRestauracao.map(r => buscaDispositivoById(state.articulacao!, r.elementoAposRevisao.lexmlId!)!).map(d => createElemento(d));\n    result.push({ stateType: StateType.ElementoRestaurado, elementos });\n  }\n\n  return result;\n};\n\nconst processarElementoDaRevisao = (state: State, revisao: RevisaoElemento, elementoAnterior: Partial<Elemento>, elementosExcluidosEmModoDeRevisao: Elemento[]): void => {\n  if (isRevisaoDeExclusao(revisao)) {\n    let e: Partial<Elemento> | undefined;\n\n    if (isRevisaoPrincipal(revisao)) {\n      let d = findDispositivoByUuid2(state.articulacao!, revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.uuid2!);\n      d = d || buscaDispositivoById(state.articulacao!, idSemCpt(revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.lexmlId!)) || null;\n      e = d ? createElemento(d) : elementoAnterior;\n    } else {\n      e = elementoAnterior;\n    }\n\n    revisao.elementoAposRevisao.uuid = Counter.next();\n    revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e));\n\n    revisao.elementoAntesRevisao!.uuid = revisao.elementoAposRevisao.uuid;\n    revisao.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e));\n\n    atualizarUuidDoPaiDoElementoRemovido(state, revisao);\n\n    elementosExcluidosEmModoDeRevisao.push(revisao.elementoAposRevisao as Elemento);\n    elementoAnterior = revisao.elementoAposRevisao as Elemento;\n  } else {\n    const e = createElemento(buscaDispositivoById(state.articulacao!, revisao.elementoAposRevisao.lexmlId!)!);\n    revisao.elementoAposRevisao.uuid = e.uuid;\n    revisao.elementoAposRevisao.uuid2 = e.uuid2;\n    revisao.elementoAposRevisao.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n    revisao.elementoAposRevisao.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n\n    if (isRevisaoDeMovimentacao(revisao) || isRevisaoDeTransformacao(revisao)) {\n      revisao.elementoAntesRevisao!.uuid = Counter.next();\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n    } else if (revisao.stateType !== StateType.ElementoIncluido) {\n      revisao.elementoAntesRevisao!.uuid = e.uuid;\n      revisao.elementoAntesRevisao!.uuid2 = e.uuid2;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n    }\n\n    if (e.dispositivoAlteracao) {\n      revisao.elementoAposRevisao.hierarquia!.pai!.uuidAlteracao = e.hierarquia?.pai?.uuidAlteracao;\n      revisao.elementoAposRevisao.hierarquia!.pai!.uuid2Alteracao = e.hierarquia?.pai?.uuid2Alteracao;\n    }\n  }\n};\n\nconst atualizarUuidDoPaiDoElementoRemovido = (state: State, revisao: RevisaoElemento): void => {\n  let uuid: number | undefined = 0;\n  let uuid2: string | undefined = '';\n  let uuidAlteracao: number | undefined = undefined;\n  let uuid2Alteracao: string | undefined = undefined;\n\n  if (isRevisaoPrincipal(revisao)) {\n    const pai = buscaDispositivoById(state.articulacao!, revisao.elementoAposRevisao.hierarquia!.pai!.lexmlId!);\n    uuid = pai?.uuid;\n    uuid2 = pai?.uuid2;\n    if (pai && isDispositivoAlteracao(pai)) {\n      const articulacaoAlteracao = getArticulacao(pai);\n      uuidAlteracao = articulacaoAlteracao?.uuid;\n      uuid2Alteracao = articulacaoAlteracao?.uuid2;\n    }\n  } else {\n    const revisaoPai = findRevisaoById(state.revisoes!, revisao.idRevisaoElementoPai!) as RevisaoElemento;\n    uuid = revisaoPai!.elementoAposRevisao.uuid;\n    uuid2 = revisaoPai!.elementoAposRevisao.uuid2;\n  }\n\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid = uuid;\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid2 = uuid2;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = uuid;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = uuid2;\n\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuidAlteracao = uuidAlteracao;\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid2Alteracao = uuid2Alteracao;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuidAlteracao = uuidAlteracao;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2Alteracao = uuid2Alteracao;\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildHtmlLink, formataNumero, getDataPorExtenso, getNomeExtensoComDataExtenso, getNumero, getTipo, validaUrn } from '../../../model/lexml/documento/urnUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaReferenciaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  const urnNova = action.atual.norma;\n  const urnAnterior = dispositivo?.alteracoes!.base || '';\n  const regex = new RegExp(`<a.+href=.${urnAnterior}.*?>.*?</a>`, 'ig');\n  const normaExtenso = getNomeExtensoComDataExtenso(urnNova);\n\n  if (dispositivo === undefined || !dispositivo.alteracoes || (urnAnterior === urnNova && dispositivo.texto.match(regex))) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const normaLink = buildHtmlLink(urnNova);\n  const textoDispositivo = dispositivo.texto;\n\n  if (dispositivo.texto.match(regex)) {\n    dispositivo.texto = textoDispositivo.replace(regex, normaLink);\n  } else if (dispositivo.texto.includes(normaExtenso)) {\n    dispositivo.texto = textoDispositivo.replace(normaExtenso, normaLink);\n  } else if (urnNova && validaUrn(urnNova) && (dispositivo.texto === undefined || dispositivo.texto?.trim() === '')) {\n    const genero = getTipo(urnNova)?.genero;\n\n    const textoUrn = `${getTipo(urnNova).descricao} nº ${formataNumero(getNumero(urnNova))}, de ${getDataPorExtenso(urnNova)}`;\n    dispositivo.texto = `${genero && genero === 'M' ? 'O' : 'A'} <a href=\"${urnNova}\">${textoUrn}</a>, passa a vigorar com as seguintes alterações:`;\n  } else {\n    const index = parseInt(localStorage.indexCursor);\n    dispositivo.texto = [textoDispositivo.slice(0, index), normaLink, textoDispositivo.slice(index)].join(' ');\n    localStorage.removeItem('indexCursor');\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.alteracoes!.base = urnNova;\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventosUi.add(StateType.ElementoValidado, [elemento]);\n  eventosUi.add(StateType.ElementoModificado, [elemento]);\n  eventosUi.add(StateType.SituacaoElementoModificada, [elemento]);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventosUi.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isTextoMaiusculo } from '../../../model/dispositivo/tipo';\nimport { createElemento, criaListaElementosAfinsValidados, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\n// const houveAlteracaoNoTextoAposAcao = (dispositivo: Dispositivo, action: any): boolean => {\n//   const textoAtual = action.atual?.conteudo?.texto;\n//   const textoOriginal = dispositivo.situacao.dispositivoOriginal?.conteudo?.texto;\n//   return textoAtual !== dispositivo.texto && textoAtual !== textoOriginal;\n// };\n\nexport const atualizaTextoElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const textoOriginal = dispositivo?.situacao.dispositivoOriginal?.conteudo?.texto;\n  const textoAtual = action.atual?.conteudo?.texto;\n  const dispositivoOriginalNovamente = dispositivo && textoOriginal === textoAtual;\n\n  if (dispositivo === undefined || dispositivo.texto === textoAtual) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? textoAtual : normalizaSeForOmissis(textoAtual ?? '');\n\n  if (dispositivoOriginalNovamente) {\n    dispositivo.situacao = new DispositivoOriginal();\n  } else if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  // if (houveAlteracaoNoTextoAposAcao(dispositivo, action)) {\n  //   eventosUi.add(StateType.ElementoModificado, [elemento]);\n  // }\n\n  if (isTextoMaiusculo(dispositivo)) {\n    dispositivo.texto = dispositivo.texto.toUpperCase();\n  }\n\n  eventosUi.add(StateType.ElementoModificado, [elemento]);\n  eventosUi.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  if (textoAtual === '') {\n    eventosUi.add(StateType.ElementoMarcado, [elemento]);\n  }\n\n  eventosUi.eventos.push({ stateType: StateType.ElementoSelecionado, elementos: [elemento] });\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventosUi.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const solicitaNorma = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.InformarNorma,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isAgrupador, isArtigo, isOmissis } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { InformarExistenciaDoElementoNaNorma } from '../../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\nimport { getDispositivoAndFilhosAsLista, isDispositivoCabecaAlteracao, isDispositivoNovoNaNormaAlterada } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { Mensagem, TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { createElemento, getElementos } from './../../../model/elemento/elementoUtil';\nimport { StateEvent } from './../../state';\n\nexport const informaExistenciaDoElementoNaNorma = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, InformarExistenciaDoElementoNaNorma)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situação, não é possível alterar esse dado do dispositivo' });\n  }\n\n  const currentValueExisteNaNormaAlterada = !isDispositivoNovoNaNormaAlterada(dispositivo);\n  const newValueExisteNaNormaAlterada = action.existeNaNormaAlterada;\n\n  if (currentValueExisteNaNormaAlterada === newValueExisteNaNormaAlterada) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const mensagemValidacao = validaAlteracaoExistenciaDispositivo(dispositivo, newValueExisteNaNormaAlterada);\n  if (mensagemValidacao) {\n    return retornaEstadoAtualComMensagem(state, mensagemValidacao);\n  }\n\n  const mudouIndicacaoDeExistenteParaNovo = currentValueExisteNaNormaAlterada && !action.existeNaNormaAlterada;\n\n  const eventos: StateEvent[] = [];\n\n  if (mudouIndicacaoDeExistenteParaNovo) {\n    const dispositivos = getDispositivoAndFilhosAsLista(dispositivo).filter(d => !isAgrupador(dispositivo) || isAgrupador(d));\n\n    dispositivos.forEach(d => {\n      const original = createElemento(d);\n      (d.situacao as DispositivoAdicionado).existeNaNormaAlterada = action.existeNaNormaAlterada;\n      const alterado = createElemento(d);\n      eventos.push({\n        stateType: StateType.ElementoModificado,\n        elementos: [original, alterado],\n      });\n    });\n  } else {\n    const original = createElemento(dispositivo);\n    (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada = action.existeNaNormaAlterada;\n    const alterado = createElemento(dispositivo);\n    eventos.push({\n      stateType: StateType.ElementoModificado,\n      elementos: [original, alterado],\n    });\n\n    eventos.push({\n      stateType: StateType.SituacaoElementoModificada,\n      elementos: getElementos(dispositivo),\n    });\n  }\n\n  eventos.push({\n    stateType: StateType.ElementoSelecionado,\n    elementos: [createElemento(dispositivo)],\n  });\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [], //state.future,\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nexport const validaAlteracaoExistenciaDispositivo = (dispositivo: Dispositivo, newValueExisteNaNormaAlterada: boolean): Mensagem | undefined => {\n  const currentValueExisteNaNormaAlterada = !isDispositivoNovoNaNormaAlterada(dispositivo);\n  if (currentValueExisteNaNormaAlterada === newValueExisteNaNormaAlterada) {\n    return;\n  }\n\n  const mudouIndicacaoDeExistenteParaNovo = currentValueExisteNaNormaAlterada && !newValueExisteNaNormaAlterada;\n  return mudouIndicacaoDeExistenteParaNovo ? validaAlteracaoExistenteParaNovo(dispositivo) : validaAlteracaoNovoParaExistente(dispositivo);\n};\n\nconst validaAlteracaoNovoParaExistente = (dispositivo: Dispositivo): Mensagem | undefined => {\n  if (isDispositivoPossuiPaiNovoNaNormaAlterada(dispositivo)) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'Não é permitido mudar a indicação de dispositivo \"Novo\" para \"Existente\" quando dispositivo hierarquicamente superior é novo na norma alteradao.',\n    };\n  }\n};\n\nconst validaAlteracaoExistenteParaNovo = (dispositivo: Dispositivo): Mensagem | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(dispositivo).filter(d => !isAgrupador(dispositivo) || !isArtigo(d));\n  if (existeDispositivoSemNumeroNaoOmissis(dispositivos.slice(1))) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'Não é permitido mudar a indicação de dispositivo \"Existente\" para \"Novo\" quando existe dispositivo subordinado sem numeração.',\n    };\n  }\n\n  if (existeOmissis(dispositivo)) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'Não é permitido mudar a indicação de dispositivo \"Existente\" para \"Novo\" quando existe texto omitido na estrutura do dispositivo.',\n    };\n  }\n\n  if (existeNecessidadeDeOmissis(dispositivos.slice(1))) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'Não é permitido mudar a indicação de dispositivo \"Existente\" para \"Novo\" quando existe numeração não sequencial nos dispositivos subordinados.',\n    };\n  }\n};\n\nconst isDispositivoPossuiPaiNovoNaNormaAlterada = (dispositivo: Dispositivo): boolean => {\n  const existe = (dispositivo.pai?.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  return !isArtigo(dispositivo) && !isDispositivoCabecaAlteracao(dispositivo) && !(existe ?? true);\n};\n\nconst existeDispositivoSemNumeroNaoOmissis = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => (d.mensagens?.some(m => m.descricao?.toLowerCase().includes('numere o dispositivo')) || d.numero === undefined) && !isOmissis(d));\n};\n\nconst existeOmissis = (dispositivo: Dispositivo): boolean => {\n  const dispositivos = getDispositivoAndFilhosAsLista(dispositivo);\n  return dispositivos.some(d => d.tipo === 'Omissis' || d.texto?.includes(TEXTO_OMISSIS));\n};\n\nconst existeNecessidadeDeOmissis = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => d.mensagens?.some(m => m.descricao?.includes('omissis antes')));\n};\n","import {\n  isDispositivoAlteracao,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  isDispositivoNovoNaNormaAlterada,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoTransformacaoPermitida, normalizaNomeAcaoTransformacao } from '../../../model/lexml/acao/acaoUtil';\nimport { converteDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { getDispositivoAnterior, isParagrafoUnico } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { buildEventoTransformacaooElemento } from '../evento/eventosUtil';\nimport { getElementosDoDispositivo } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\n\nexport const transformaTipoElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const cabecaAlteracao = atual && isDispositivoAlteracao(atual) && getDispositivoCabecaAlteracao(atual);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoTransformacaoPermitida(atual, action)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situação, não é possível transformar o dispositivo' });\n  }\n\n  const dispositivoAnteriorAtual = getDispositivoAnterior(atual);\n\n  if (dispositivoAnteriorAtual && isDispositivoNovoNaNormaAlterada(dispositivoAnteriorAtual) && !isDispositivoNovoNaNormaAlterada(atual)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Dispositivo existente não pode ser transformado em filho de dispositivo novo' });\n  }\n\n  const ultimoFilhoDispositivoAnteriorAtual = cabecaAlteracao && dispositivoAnteriorAtual && getUltimoFilho(dispositivoAnteriorAtual);\n\n  action.subType = normalizaNomeAcaoTransformacao(atual, action.subType);\n\n  const removidos = [...getElementos(atual, false, true)];\n\n  const atualRenumerados = listaDispositivosRenumerados(atual);\n\n  const novo = converteDispositivo(atual, action);\n\n  const novoRenumerados = listaDispositivosRenumerados(novo);\n\n  const renumerados = novoRenumerados.concat(atualRenumerados);\n\n  const validados = getElementosDoDispositivo(novo, true);\n\n  const paiNovo = isCaput(novo.pai!) ? novo.pai!.pai! : novo.pai!;\n\n  if (dispositivoAnteriorAtual && isParagrafoUnico(dispositivoAnteriorAtual)) {\n    dispositivoAnteriorAtual.pai!.renumeraFilhos();\n    renumerados.unshift(dispositivoAnteriorAtual);\n  }\n\n  const dispositivoAnterior = getDispositivoAnterior(novo);\n\n  if (dispositivoAnterior) {\n    const mensagens = validaDispositivo(dispositivoAnterior);\n    if (dispositivoAnterior.mensagens !== mensagens) {\n      validados.unshift(createElemento(dispositivoAnterior));\n    }\n  }\n\n  const parent = validados.filter(v => v.uuid === paiNovo.uuid).length > 0 ? atual.pai : paiNovo;\n\n  if (parent) {\n    getDispositivoAndFilhosAsLista(parent).forEach(d => {\n      d.mensagens = validaDispositivo(d);\n      validados.unshift(createElemento(d));\n    });\n  }\n\n  const referencia = dispositivoAnterior ?? novo.pai!;\n  const eventos = buildEventoTransformacaooElemento(\n    isCaput(referencia) ? referencia.pai! : referencia,\n    novo,\n    removidos,\n    renumerados.map(d => {\n      d.mensagens = validaDispositivo(d);\n      const el = createElemento(d);\n      return el;\n    }),\n    validados\n  );\n\n  if (novo.tipo === 'Artigo' && cabecaAlteracao) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(getUltimoFilho(cabecaAlteracao))]);\n  } else if (novo.tipo === 'Paragrafo' && ultimoFilhoDispositivoAnteriorAtual) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(ultimoFilhoDispositivoAnteriorAtual)]);\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { StateType } from './../../state';\nimport {\n  getDispositivoPosterior,\n  getDispositivoAnterior,\n  getPrimeiroAgrupadorNaArticulacao,\n  hasEmenta,\n  getTiposAgrupadorArtigoPermitidosNaArticulacao,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isArticulacao, isArtigo } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RemoverElemento } from '../../../model/lexml/acao/removerElementoAction';\nimport { hasFilhos, isArtigoUnico, isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { getPaiQuePodeReceberFilhoDoTipo, removeAgrupadorAndBuildEvents, removeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { existeFilhoExcluidoOuAlteradoDuranteRevisao, findRevisaoByElementoUuid2, isRevisaoDeMovimentacao, isRevisaoPrincipal } from '../util/revisaoUtil';\n\nexport const removeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (isAgrupador(dispositivo) && !isDispositivoAlteracao(dispositivo)) {\n    // Só deixa remover agrupador se articulação permenecer consistente\n    if (isArticulacao(dispositivo.pai!)) {\n      const tipos = getTiposAgrupadorArtigoPermitidosNaArticulacao();\n      if (!dispositivo.filhos.every(f => isArtigo(f) || tipos.includes(f.tipo))) {\n        return retornaEstadoAtualComMensagem(state, {\n          tipo: TipoMensagem.ERROR,\n          descricao: `Operação não permitida (se houver seções abaixo do \"${dispositivo.rotulo}\", elas devem ser removidas antes)`,\n        });\n      }\n    } else if (dispositivo.filhos.filter(f => !isArtigo(f)).length) {\n      const dispositivos = getDispositivoAndFilhosAsLista(dispositivo.pai!).filter(isAgrupador);\n      const agrupadorAntes = dispositivos[dispositivos.indexOf(dispositivo) - 1] || {};\n      const agrupadorDepois = dispositivos[dispositivos.indexOf(dispositivo) + 1] || {};\n      if (agrupadorAntes.tipo !== agrupadorDepois.tipo && !getPaiQuePodeReceberFilhoDoTipo(dispositivo.pai!, agrupadorDepois.tipo, [])) {\n        return retornaEstadoAtualComMensagem(state, {\n          tipo: TipoMensagem.ERROR,\n          descricao: `Operação não permitida (o agrupador \"${agrupadorDepois.rotulo}\" não poder estar diretamente subordinado ao agrupador \"${agrupadorAntes.rotulo}\")`,\n        });\n      }\n    }\n  }\n\n  if (!isAcaoPermitida(dispositivo, RemoverElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Não é possível excluir um dispositivo original mas apenas suprimi-lo.' });\n  }\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigoUnico(dispositivo) || (state.articulacao.filhos.length === 1 && state.articulacao.filhos[0] === dispositivo && !hasFilhos(dispositivo)))\n  ) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Não é possível excluir o único dispositivo disponível.' });\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoOuAlteradoDuranteRevisao(state, dispositivo) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não é possível remover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão.',\n    });\n  }\n\n  const revisao = findRevisaoByElementoUuid2(state.revisoes, dispositivo.uuid2);\n  if (state.emRevisao && revisao && isRevisaoPrincipal(revisao) && isRevisaoDeMovimentacao(revisao) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não é possível remover dispositivo movido em modo de revisão.',\n    });\n  }\n\n  const primeiroFilhoDoAgrupador = isAgrupador(dispositivo) ? dispositivo.filhos[0] || getDispositivoPosterior(dispositivo) || getDispositivoAnterior(dispositivo) : undefined;\n  const elPrimeiroFilhoDoAgrupador = primeiroFilhoDoAgrupador ? createElemento(primeiroFilhoDoAgrupador) : undefined;\n  const isAtualizarElementoEmenta = hasEmenta(dispositivo) && dispositivo === getPrimeiroAgrupadorNaArticulacao(dispositivo);\n\n  const events = isAgrupador(dispositivo) ? removeAgrupadorAndBuildEvents(state.articulacao, dispositivo) : removeAndBuildEvents(state, dispositivo);\n\n  if (elPrimeiroFilhoDoAgrupador) {\n    events.push({ stateType: StateType.ElementoMarcado, elementos: [elPrimeiroFilhoDoAgrupador] });\n    events.push({ stateType: StateType.ElementoReferenciado, elementos: [elPrimeiroFilhoDoAgrupador] });\n  }\n\n  if (isAtualizarElementoEmenta) {\n    events.push({ stateType: StateType.SituacaoElementoModificada, elementos: [createElemento(state.articulacao.projetoNorma.ementa)] });\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, getDispositivoFromElemento, isElementoDispositivoAlteracao } from '../../../model/elemento/elementoUtil';\nimport { createAlteracao, createArticulacao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buscaDispositivoById,\n  findDispositivoByUuid,\n  getDispositivoAnterior,\n  getTiposAgrupadorArtigoOrdenados,\n  getUltimoFilho,\n  isArticulacaoAlteracao,\n  isSuprimido,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoNovo } from '../../../model/lexml/situacao/dispositivoNovo';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\nimport { getDispositivoCabecaAlteracao, isDispositivoAlteracao, isUltimaAlteracao, hasEmenta } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport {\n  associarRevisoesAosElementos,\n  existeRevisaoCriadaPorExclusao,\n  findRevisaoDeExclusaoComElementoAnteriorApontandoPara,\n  findRevisaoDeRestauracaoByUuid,\n  findUltimaRevisaoDoGrupo,\n  getElementosFromRevisoes,\n  isRevisaoPrincipal,\n  removeAtributosDoElementoAnteriorNaSequenciaDeLeitura,\n} from './revisaoUtil';\nimport { retornaEstadoAtualComMensagem } from './stateReducerUtil';\nimport { removeElemento } from '../reducer/removeElemento';\n\nconst getTipoSituacaoByDescricao = (descricao: string): TipoSituacao => {\n  switch (descricao) {\n    case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n      return new DispositivoAdicionado();\n    case DescricaoSituacao.DISPOSITIVO_NOVO:\n      return new DispositivoNovo();\n    default:\n      return new DispositivoOriginal();\n  }\n};\n\nconst getDispositivoPaiFromElemento = (articulacao: Articulacao, elemento: Partial<Elemento>): Dispositivo | null => {\n  if (isElementoDispositivoAlteracao(elemento)) {\n    const artigo = isArticulacaoAlteracao(articulacao)\n      ? articulacao.pai!\n      : findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuidAlteracao!) || buscaDispositivoById(articulacao, elemento.hierarquia!.pai!.lexmlId!);\n\n    if (artigo) {\n      if (!artigo.alteracoes) {\n        artigo!.alteracoes = createArticulacao();\n        artigo.alteracoes.pai = artigo;\n      }\n      if (elemento.hierarquia!.pai!.tipo! === TipoDispositivo.articulacao.tipo) {\n        return artigo.alteracoes;\n      }\n      return findDispositivoByUuid(artigo.alteracoes, elemento.hierarquia!.pai!.uuid!) || buscaDispositivoById(artigo.alteracoes, elemento.hierarquia!.pai!.lexmlId!) || null;\n    }\n  }\n  return findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuid!) || buscaDispositivoById(articulacao, elemento.hierarquia!.pai!.lexmlId!) || null;\n};\n\nconst isOmissisCaput = (elemento: Elemento): boolean => {\n  return elemento.tipo === TipoDispositivo.omissis.tipo && elemento.tipoOmissis === 'inciso-caput';\n};\n\nconst redodDispositivoExcluido = (elemento: Elemento, pai: Dispositivo, modo: string | undefined): Dispositivo => {\n  const novo = criaDispositivo(\n    isArtigo(pai) && (elemento.tipo === TipoDispositivo.inciso.name || isOmissisCaput(elemento)) ? (pai as Artigo).caput! : pai,\n    elemento.tipo!,\n    undefined,\n    elemento.hierarquia!.posicao\n  );\n  novo.uuid = elemento.uuid;\n  novo.uuid2 = elemento.uuid2;\n  novo.id = elemento.lexmlId;\n  novo!.texto = elemento?.conteudo?.texto ?? '';\n  novo!.numero = elemento?.hierarquia?.numero;\n  novo.rotulo = elemento?.rotulo;\n  novo.mensagens = elemento?.mensagens;\n  novo.situacao = getTipoSituacaoByDescricao(elemento!.descricaoSituacao!);\n  if (elemento.descricaoSituacao === 'Dispositivo Adicionado') {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n    if (modo) {\n      (novo.situacao as DispositivoAdicionado).tipoEmenda = modo as any;\n    }\n  }\n  if (isArtigo(novo)) {\n    (novo as Artigo).caput!.situacao = getTipoSituacaoByDescricao(elemento!.descricaoSituacao!);\n    if (elemento.norma) {\n      createAlteracao(novo);\n      (novo as Artigo).alteracoes!.base = elemento.norma;\n      novo.alteracoes!.situacao = new DispositivoAdicionado();\n      (novo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = modo as any;\n    }\n  }\n  return novo;\n};\n\nconst redoDispositivosExcluidos = (articulacao: any, elementos: Elemento[], modo: string | undefined): Dispositivo[] => {\n  const primeiroElemento = elementos.shift();\n\n  const pai = getDispositivoPaiFromElemento(articulacao, primeiroElemento!) || buscaDispositivoById(articulacao, primeiroElemento!.hierarquia!.pai!.lexmlId!);\n  const primeiro = redodDispositivoExcluido(primeiroElemento!, pai!, modo);\n  const idPrimeiroDispositivo = primeiro.id!;\n\n  const novos: Dispositivo[] = [primeiro];\n  elementos?.forEach(filho => {\n    const parent =\n      filho.hierarquia?.pai === primeiroElemento?.hierarquia?.pai\n        ? primeiro.pai!\n        : getDispositivoPaiFromElemento(articulacao, filho) || buscaDispositivoById(articulacao, idPrimeiroDispositivo);\n\n    const novo = redodDispositivoExcluido(filho, parent!, modo);\n    novos.push(novo);\n  });\n\n  return novos;\n};\n\nexport const incluir = (state: State, evento: StateEvent, novosEvento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const elemento = evento.elementos[0];\n    const procurarElementoAnterior = evento.elementos.some(e => e.elementoAnteriorNaSequenciaDeLeitura);\n\n    const pai = getDispositivoPaiFromElemento(state.articulacao!, elemento!);\n\n    const novos = redoDispositivosExcluidos(state.articulacao, evento.elementos, state.modo);\n    pai?.renumeraFilhos();\n\n    if (novosEvento) {\n      const posicao = elemento!.hierarquia!.posicao;\n\n      let referencia = posicao === 0 ? (isArticulacao(pai!) && isArticulacaoAlteracao(pai as Articulacao) ? pai!.pai! : pai) : getUltimoFilho(getDispositivoAnterior(novos[0])!);\n\n      if (referencia) {\n        referencia = isArticulacao(referencia) && hasEmenta(referencia) ? (referencia as Articulacao).projetoNorma!.ementa! : referencia;\n        const dispositivo = getDispositivoFromElemento(state.articulacao!, referencia);\n        dispositivo ? (novosEvento.referencia = createElemento(dispositivo!)) : retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Erro inesperado' });\n      }\n    }\n\n    if (evento.stateType === StateType.ElementoIncluido) {\n      novosEvento.referencia = evento.referencia;\n    }\n\n    return novos.map(n => createElemento(n, true, procurarElementoAnterior));\n  }\n  return [];\n};\n\nexport const remover = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, el, true);\n      if (dispositivo) {\n        const pai = dispositivo.pai!;\n        pai.removeFilho(dispositivo);\n        pai.renumeraFilhos();\n      }\n    });\n    return evento.elementos;\n  }\n  return [];\n};\n\nexport const restaurarSituacao = (state: State, evento: StateEvent, eventoRestaurados: StateEvent, Situacao: any): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const d = getDispositivoFromElemento(state.articulacao!, el, true);\n\n      if (Situacao instanceof DispositivoOriginal) {\n        d!.numero = d!.situacao.dispositivoOriginal?.numero ?? '';\n        d!.rotulo = d!.situacao.dispositivoOriginal?.rotulo ?? '';\n        d!.texto = d!.situacao.dispositivoOriginal?.conteudo?.texto ?? '';\n        d!.situacao = new DispositivoOriginal();\n      } else {\n        d!.situacao = new Situacao(createElemento(d!));\n      }\n      eventoRestaurados.elementos!.push(createElemento(d!));\n    });\n    return eventoRestaurados.elementos!;\n  }\n  return [];\n};\n\nexport const processarModificados = (state: State, evento: StateEvent, operacao: 'UNDO' | 'REDO', revisoes: RevisaoElemento[] = []): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    let anterior = 0;\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        const permiteAtualizar = anterior !== dispositivo.uuid || (operacao === 'REDO' && anterior === dispositivo.uuid);\n        if (permiteAtualizar) {\n          if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n            if (findRevisaoDeRestauracaoByUuid(revisoes, dispositivo.uuid!) || dispositivo.situacao.dispositivoOriginal!.conteudo!.texto === e.conteudo?.texto) {\n              dispositivo.texto = dispositivo.situacao.dispositivoOriginal!.conteudo?.texto ?? '';\n              dispositivo.situacao = new DispositivoOriginal();\n            } else {\n              dispositivo.texto = e.conteudo?.texto ?? '';\n            }\n          } else {\n            if (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n              dispositivo.situacao = new DispositivoModificado(createElemento(dispositivo));\n            }\n            dispositivo.texto = e.conteudo?.texto ?? '';\n          }\n          if (dispositivo.alteracoes) {\n            dispositivo.alteracoes.base = e.norma;\n          }\n\n          if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n            (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada = e.existeNaNormaAlterada;\n            if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n              const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n              cabecaAlteracao.notaAlteracao = e.notaAlteracao;\n            }\n          }\n\n          dispositivo.mensagens = validaDispositivo(dispositivo);\n          novosElementos.push(createElemento(dispositivo));\n          anterior = dispositivo.uuid!;\n        }\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaRenumerados = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        novosElementos.push(createElemento(dispositivo!));\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaValidados = (state: State, eventos: StateEvent[]): Elemento[] => {\n  const evento = getEvento(eventos, StateType.ElementoValidado);\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const validados: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        dispositivo.mensagens = validaDispositivo(dispositivo);\n        validados.push(createElemento(dispositivo));\n      }\n    });\n    return validados;\n  }\n  return [];\n};\n\nexport const processaSituacoesAlteradas = (state: State, eventos: StateEvent[]): Elemento[] => {\n  const elementos: Elemento[] = [];\n  eventos\n    .filter(ev => ev.stateType === StateType.SituacaoElementoModificada)\n    .forEach(ev => {\n      ev.elementos?.forEach((el: Elemento) => {\n        const dispositivo = getDispositivoFromElemento(state.articulacao!, el, true);\n        if (dispositivo) {\n          elementos.push(createElemento(dispositivo));\n        }\n      });\n    });\n  return elementos;\n};\n\nexport const isUndoRedoInclusaoExclusaoAgrupador = (eventos: StateEvent[]): boolean => {\n  const tiposAgrupadorArtigo = getTiposAgrupadorArtigoOrdenados();\n  const eventosFiltrados = eventos.filter(ev => ![StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(ev.stateType));\n  return (\n    eventosFiltrados.length > 0 &&\n    [StateType.ElementoIncluido, StateType.ElementoRemovido].includes(eventosFiltrados[0].stateType) &&\n    eventosFiltrados[0].elementos!.length > 0 &&\n    tiposAgrupadorArtigo.includes(eventosFiltrados[0].elementos![0].tipo!)\n  );\n};\n\nexport const ajustarAtributosAgrupadorIncluidoPorUndoRedo = (articulacao: Articulacao, eventosFonte: StateEvent[], eventosResultantes: StateEvent[]): void => {\n  const refFonteAgrupadorIncluido = eventosFonte[0].elementos![0];\n  const agrupadorIncluido = eventosResultantes[0].elementos![0];\n  const dispositivo = getDispositivoFromElemento(articulacao, agrupadorIncluido)!;\n  dispositivo.texto = refFonteAgrupadorIncluido.conteudo!.texto ?? '';\n  dispositivo.numero = refFonteAgrupadorIncluido.numero;\n  dispositivo.id = refFonteAgrupadorIncluido.lexmlId;\n  dispositivo.rotulo = refFonteAgrupadorIncluido.rotulo;\n  eventosResultantes[0].elementos!.length = 0;\n  eventosResultantes[0].elementos!.push(createElemento(dispositivo));\n};\n\nexport const processarRestaurados = (state: State, evento: StateEvent, acao: string): StateEvent => {\n  const elementoDeReferencia = evento.elementos![acao === 'UNDO' ? 0 : 1];\n  const d = getDispositivoFromElemento(state.articulacao!, elementoDeReferencia, true)!;\n\n  const elementoAntesDeRestaurarSituacao = createElemento(d);\n  let stateType: StateType;\n\n  if (elementoDeReferencia.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    d.situacao = new DispositivoModificado(createElemento(d));\n    stateType = StateType.ElementoRestaurado;\n  } else if (elementoDeReferencia.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    d.situacao = new DispositivoSuprimido(createElemento(d));\n    stateType = StateType.ElementoRestaurado;\n  } else {\n    d.situacao = new DispositivoOriginal();\n    stateType = StateType.ElementoRestaurado;\n  }\n\n  d.numero = elementoDeReferencia.numero ?? '';\n  d.rotulo = elementoDeReferencia.rotulo ?? '';\n  d.texto = elementoDeReferencia.conteudo?.texto ?? '';\n\n  const elementos = isSuprimido(d) ? [createElemento(d)] : [elementoAntesDeRestaurarSituacao, createElemento(d)];\n\n  return { stateType, elementos };\n};\n\nexport const processarSuprimidos = (state: State, evento: StateEvent): StateEvent[] => {\n  const result: StateEvent[] = [];\n\n  evento.elementos?.forEach(e => {\n    const d = getDispositivoFromElemento(state.articulacao!, e, true)!;\n    const elementoAntesRestauracao = createElemento(d);\n    d.situacao = new DispositivoOriginal();\n    result.push({ stateType: StateType.ElementoRestaurado, elementos: [elementoAntesRestauracao, createElemento(d!)] });\n  });\n\n  return result;\n};\n\nexport const processarRevisoesAceitasOuRejeitadas = (state: State, eventos: StateEvent[], stateType: StateType): StateEvent[] => {\n  const atualizaReferenciaElementoAnteriorSeNecessario = (revisoesRetornadasParaState: RevisaoElemento[]): void => {\n    revisoesRetornadasParaState.filter(isRevisaoPrincipal).forEach(r => {\n      const e = r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!;\n      const revisaoASerAtualizada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(state.revisoes!, e);\n      if (revisaoASerAtualizada && revisaoASerAtualizada.id !== r.id) {\n        const revisaoRetornada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(revisoesRetornadasParaState, e);\n        const ultimaRevisaoDoGrupo = findUltimaRevisaoDoGrupo(revisoesRetornadasParaState, revisaoRetornada!);\n\n        const elementoAnterior = JSON.parse(JSON.stringify(ultimaRevisaoDoGrupo.elementoAposRevisao));\n        removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elementoAnterior);\n        revisaoASerAtualizada.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = elementoAnterior;\n        revisaoASerAtualizada.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = elementoAnterior;\n      }\n    });\n  };\n\n  const result: StateEvent[] = [];\n  const eventosFiltrados = eventos.filter((se: StateEvent) => se.stateType === stateType);\n  if (eventosFiltrados.length) {\n    eventosFiltrados.forEach((ev: StateEvent) => {\n      const revisoesRetornadasParaState = ev.elementos!.map(e => e.revisao! as RevisaoElemento);\n      state.revisoes!.push(...revisoesRetornadasParaState);\n\n      result.push({ stateType: ev.stateType, elementos: ev.elementos });\n\n      if (existeRevisaoCriadaPorExclusao(revisoesRetornadasParaState)) {\n        const elementos = revisoesRetornadasParaState.map(r => r.elementoAntesRevisao as Elemento);\n        if (stateType === StateType.RevisaoAdicionalRejeitada) {\n          elementos.forEach(e => removeElemento({ ...state, emRevisao: false }, { atual: e }));\n        }\n\n        // Reapresenta, no editor, os dispositivos removidos em modo de revisão\n        if (stateType === StateType.RevisaoAceita) {\n          result.push({ stateType: StateType.ElementoIncluido, elementos: elementos });\n          result.push({ stateType: StateType.ElementoMarcado, elementos: [elementos[0]] });\n        }\n\n        atualizaReferenciaElementoAnteriorSeNecessario(revisoesRetornadasParaState);\n      } else {\n        const elementos = getElementosFromRevisoes(revisoesRetornadasParaState, state).map(e => JSON.parse(JSON.stringify(e)));\n        associarRevisoesAosElementos(state.revisoes, elementos);\n        result.push({ stateType: StateType.SituacaoElementoModificada, elementos: elementos });\n\n        if (stateType === StateType.RevisaoAceita) {\n          result.push({ stateType: StateType.ElementoMarcado, elementos: [elementos[0]] });\n        }\n      }\n    });\n  }\n  return result;\n};\n","import { ajustarAtributosAgrupadorIncluidoPorUndoRedo, isUndoRedoInclusaoExclusaoAgrupador, processarRestaurados } from './../util/undoRedoReducerUtil';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getElementosRemovidosEIncluidos, getEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaSituacoesAlteradas, processaValidados, remover, restaurarSituacao } from '../util/undoRedoReducerUtil';\nimport { agrupaElemento } from './agrupaElemento';\nimport { removeElemento } from './removeElemento';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport { Revisao } from '../../../model/revisao/revisao';\nimport { findRevisoesByElementoUuid } from '../util/revisaoUtil';\n\nexport const redo = (state: any): State => {\n  if (state.future === undefined || state.future.length === 0) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = state.future.pop();\n  const past = buildPast(state, eventos);\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past,\n    present: [],\n    future: state.future,\n    ui: {\n      events: [],\n      alertas: state.ui?.alertas,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n\n  if (isUndoRedoInclusaoExclusaoAgrupador(eventos)) {\n    let tempState: State;\n    tempState = { ...retorno };\n    tempState.past = [];\n    tempState.present = [];\n    tempState.future = [];\n\n    if (eventos[0].stateType === StateType.ElementoIncluido) {\n      const ref = eventos.find((ev: StateEvent) => ev.stateType === StateType.ElementoReferenciado)!.elementos[0];\n      const elementoASerIncluido = eventos[0].elementos[0];\n      tempState = agrupaElemento(tempState, {\n        atual: ref,\n        novo: { tipo: elementoASerIncluido.tipo, uuid: elementoASerIncluido.uuid, posicao: 'antes', manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas },\n      });\n      ajustarAtributosAgrupadorIncluidoPorUndoRedo(state.articulacao, eventos, tempState.ui!.events);\n    } else {\n      tempState = removeElemento(tempState, { atual: eventos[0].elementos[0] });\n    }\n\n    const eventosRevisao = getEventosDeRevisao(eventos);\n    if (eventosRevisao.length) {\n      const idsRevisoesAssociadas = eventosRevisao\n        .map((se: StateEvent) => se.elementos || [])\n        .flat()\n        .map((e: Elemento) => findRevisoesByElementoUuid(retorno.revisoes, e.uuid))\n        .flat()\n        .map(r => r.id)\n        .filter(Boolean);\n\n      retorno.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n    }\n\n    retorno.ui!.events = [...eventosRevisao, ...tempState.ui!.events];\n    retorno.present = [...eventosRevisao, ...tempState.ui!.events];\n\n    return retorno;\n  }\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoRemovido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoIncluido), getEvento(events.eventos, StateType.ElementoIncluido)));\n\n  eventos\n    .filter((ev: StateEvent) => ev.stateType === StateType.ElementoModificado)\n    .forEach((ev: StateEvent) => events.eventos.push({ stateType: StateType.ElementoModificado, elementos: processarModificados(state, ev, 'REDO') }));\n\n  events.add(\n    StateType.ElementoSuprimido,\n    restaurarSituacao(state, getEvento(eventos, StateType.ElementoSuprimido), getEvento(events.eventos, StateType.ElementoSuprimido), DispositivoSuprimido)\n  );\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoRestaurado).forEach((ev: StateEvent) => events.eventos.push(processarRestaurados(state, ev, 'REDO')));\n\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos;\n  if (elementosParaMarcar) {\n    events.add(StateType.ElementoMarcado, elementosParaMarcar);\n    events.add(StateType.ElementoSelecionado, [elementosParaMarcar[0]]);\n  }\n\n  events.add(StateType.SituacaoElementoModificada, getElementosAlteracaoASeremAtualizados(state.articulacao, getElementosRemovidosEIncluidos(events.eventos)));\n  events.eventos.push({ stateType: StateType.SituacaoElementoModificada, elementos: processaSituacoesAlteradas(state, eventos) });\n\n  const eventosRevisao = getEventosDeRevisao(eventos);\n  if (eventosRevisao.length) {\n    const idsRevisoesAssociadas = eventosRevisao\n      .map((se: StateEvent) => se.elementos || [])\n      .flat()\n      .map((e: Elemento) => findRevisoesByElementoUuid(retorno.revisoes, e.uuid))\n      .flat()\n      .map(r => r.id)\n      .filter(Boolean);\n\n    retorno.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n  }\n\n  retorno.ui!.events = [...eventosRevisao, ...events.build()];\n  retorno.present = [...eventosRevisao, ...events.build()];\n\n  return retorno;\n};\n\nconst getEventosDeRevisao = (eventos: StateEvent[]): StateEvent[] => {\n  return eventos.filter((se: StateEvent) => [StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(se.stateType));\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { getDispositivoAnterior } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { removeElemento } from './removeElemento';\n// import { isAgrupador } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { hasFilhos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Dispositivo } from '../../../model/dispositivo/dispositivo';\n\nexport const removeElementoSemTexto = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || !podeRemoverDispositivo(state, dispositivo)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const dispositivoAnterior = getDispositivoAnterior(dispositivo);\n\n  const retorno = removeElemento(state, action);\n  if (action.key === 'Backspace' && dispositivoAnterior) {\n    retorno.ui?.events.push(getEventoMarcacaoElemento(dispositivoAnterior));\n  }\n  return retorno;\n};\n\nconst getEventoMarcacaoElemento = (dispositivo: Dispositivo): StateEvent => {\n  return {\n    stateType: StateType.ElementoMarcado,\n    elementos: [createElemento(dispositivo)],\n    moverParaFimLinha: true,\n  };\n};\n\nconst podeRemoverDispositivo = (state: any, dispositivo: Dispositivo): boolean => {\n  if (state.modo.startsWith('emenda') && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return false;\n  }\n  return !hasFilhos(dispositivo);\n};\n","import { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RenumerarElemento } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nconst ajustarNumero = (dispositivo: Dispositivo, numero: string | undefined): string => {\n  if (!numero) {\n    return '';\n  }\n\n  if (dispositivo.tipo !== 'Alinea') {\n    return numero.toUpperCase();\n  }\n\n  const partes = numero.split('-');\n  return partes.map((parte, index) => (index > 0 ? parte.toUpperCase() : parte)).join('-');\n};\n\nexport const renumeraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, RenumerarElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situação, não é possível renumerar o dispositivo' });\n  }\n\n  if (isDispositivoAlteracao(dispositivo) && ajustarNumero(dispositivo, action.novo?.numero)?.startsWith('0')) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Não pode haver um dispositivo com esse rótulo em alteração de norma' });\n  }\n\n  const past = buildPast(state, buildUpdateEvent(dispositivo));\n\n  try {\n    const numero = ajustarNumero(dispositivo, action.novo?.numero);\n    dispositivo.createNumeroFromRotulo(numero);\n    dispositivo.id = buildId(dispositivo);\n    if (dispositivo.tipo === 'Artigo') {\n      (dispositivo as Artigo).caput!.id = buildId((dispositivo as Artigo).caput!);\n    }\n  } catch (error) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'O rótulo informado é inválido', detalhe: error });\n  }\n\n  dispositivo.createRotulo(dispositivo);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past,\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAndFilhosAsLista } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State } from '../../state';\nimport { restauraAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const restauraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const possuiFilhosModificados = getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length > 0;\n\n  if (\n    !possuiFilhosModificados &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n  ) {\n    return state;\n  }\n\n  const events = restauraAndBuildEvents(dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { suprimeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nconst getSituacoesFilhos = (dispositivos: Dispositivo[], situacoes: Set<string>): void => {\n  if (dispositivos.length === 0) {\n    return;\n  }\n  dispositivos?.forEach(d => {\n    situacoes.add(d.situacao.descricaoSituacao);\n    getSituacoesFilhos(d.filhos, situacoes);\n  });\n};\n\nexport const podeSuprimir = (dispositivo: Dispositivo): boolean => {\n  const situacoes = new Set<string>();\n  situacoes.add(dispositivo.situacao.descricaoSituacao);\n  getSituacoesFilhos(dispositivo.filhos, situacoes);\n\n  if (dispositivo.alteracoes) {\n    getSituacoesFilhos(dispositivo.alteracoes?.filhos, situacoes);\n  }\n  return situacoes.size === 1 && [...situacoes][0] === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const suprimeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!podeSuprimir(dispositivo)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Só é possível suprimir dispositivos que não tenham sofrido modificação.' });\n  }\n\n  const events = suprimeAndBuildEvents(state.articulacao, dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { agrupaElemento } from './agrupaElemento';\nimport { removeElemento } from './removeElemento';\nimport {\n  ajustarAtributosAgrupadorIncluidoPorUndoRedo,\n  isUndoRedoInclusaoExclusaoAgrupador,\n  processaSituacoesAlteradas,\n  processarRestaurados,\n  processarSuprimidos,\n  processarRevisoesAceitasOuRejeitadas,\n} from './../util/undoRedoReducerUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getElementosRemovidosEIncluidos, getEvento, unificarEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { buildFuture } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaValidados, remover } from '../util/undoRedoReducerUtil';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getRevisoesFromElementos } from '../util/revisaoUtil';\n\nexport const undo = (state: any): State => {\n  if (state.past === undefined || state.past.length === 0) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = state.past.pop();\n  const future = buildFuture(state, eventos);\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: [],\n    future,\n    ui: {\n      events: [],\n      alertas: state.ui?.alertas,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n\n  if (isUndoRedoInclusaoExclusaoAgrupador(eventos)) {\n    let tempState: State;\n    tempState = { ...retorno };\n    tempState.past = [];\n    tempState.present = [];\n    tempState.future = [];\n\n    const eventosFiltrados = eventos.filter((ev: StateEvent) => ![StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(ev.stateType));\n\n    if (eventosFiltrados[0].stateType === StateType.ElementoIncluido) {\n      tempState = removeElemento(tempState, { atual: eventosFiltrados[0].elementos[0] });\n    } else {\n      const ref = eventosFiltrados.find((ev: StateEvent) => ev.stateType === StateType.ElementoReferenciado)!.elementos[0];\n      const elementoASerIncluido = eventosFiltrados[0].elementos[0];\n      tempState = agrupaElemento(tempState, {\n        atual: ref,\n        novo: { tipo: elementoASerIncluido.tipo, uuid: elementoASerIncluido.uuid, posicao: 'antes', manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas },\n      });\n      ajustarAtributosAgrupadorIncluidoPorUndoRedo(state.articulacao, eventosFiltrados, tempState.ui!.events);\n    }\n\n    const eventosRevisao = [\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAceita),\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoRejeitada),\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAdicionalRejeitada),\n    ].filter(ev => ev.elementos?.length);\n\n    retorno.ui!.events = [...eventosRevisao, ...tempState.ui!.events];\n    retorno.present = [...eventosRevisao, ...tempState.ui!.events];\n\n    return retorno;\n  }\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoIncluido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoRemovido), getEvento(events.eventos, StateType.ElementoIncluido)));\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoSuprimido).forEach((ev: StateEvent) => events.eventos.push(...processarSuprimidos(state, ev)));\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoRestaurado).forEach((ev: StateEvent) => events.eventos.push(processarRestaurados(state, ev, 'UNDO')));\n\n  const revisoesDeRejeicaoDeRestauracaoASeremRetornadas = getRevisoesFromElementos(\n    eventos\n      .filter((ev: StateEvent) => ev.stateType === StateType.RevisaoRejeitada)\n      .map((ev: StateEvent) => ev.elementos || [])\n      .flat()\n  );\n\n  eventos\n    .filter((ev: StateEvent) => ev.stateType === StateType.ElementoModificado)\n    .forEach((ev: StateEvent) =>\n      events.eventos.push({ stateType: StateType.ElementoModificado, elementos: processarModificados(state, ev, 'UNDO', revisoesDeRejeicaoDeRestauracaoASeremRetornadas) })\n    );\n\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const incluidos = events.get(StateType.ElementoIncluido);\n  const primeiroElementoIncluidoEhAgrupador = !incluidos.elementos || !incluidos.elementos.length ? false : incluidos.elementos[0].agrupador;\n  if (primeiroElementoIncluidoEhAgrupador) {\n    events.add(StateType.ElementoMarcado, [incluidos.elementos![0]]);\n    events.add(StateType.ElementoSelecionado, [incluidos.elementos![0]]);\n  } else {\n    const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos?.filter(e => getDispositivoFromElemento(state.articulacao, e, true));\n    if (elementosParaMarcar) {\n      events.add(StateType.ElementoMarcado, [elementosParaMarcar[1], elementosParaMarcar[0]].filter(Boolean));\n      events.add(StateType.ElementoSelecionado, [elementosParaMarcar[1]].filter(Boolean));\n    }\n  }\n\n  events.add(StateType.SituacaoElementoModificada, events.get(StateType.ElementoIncluido).elementos || []);\n  events.add(StateType.SituacaoElementoModificada, getElementosAlteracaoASeremAtualizados(state.articulacao, getElementosRemovidosEIncluidos(events.eventos)));\n  events.add(StateType.SituacaoElementoModificada, processaSituacoesAlteradas(state, eventos));\n\n  let eventosRevisao = [\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAceita),\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoRejeitada),\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAdicionalRejeitada),\n  ].filter(ev => ev.elementos?.length);\n\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.ElementoIncluido);\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.SituacaoElementoModificada);\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.ElementoMarcado);\n\n  retorno.ui!.events = [...eventosRevisao, ...events.build()];\n  retorno.present = [...eventosRevisao, ...events.build()];\n\n  return retorno;\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isOmissis } from '../../../dispositivo/tipo';\nimport { Metadado, ParteInicial, TextoArticulado } from '../../../documento';\nimport { ClassificacaoDocumento } from '../../../documento/classificacao';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { createAlteracao, createArticulacao, criaDispositivo } from '../../dispositivo/dispositivoLexmlFactory';\nimport { getDispositivoAndFilhosAsLista } from '../../hierarquia/hierarquiaUtil';\nimport { DispositivoOriginal } from '../../situacao/dispositivoOriginal';\nimport { ProjetoNorma } from '../projetoNorma';\nimport { getTipo } from '../urnUtil';\nimport { isArtigo } from './../../../dispositivo/tipo';\n\nexport let isEmendamento = false;\nlet ultimoDispositivoCriado: Dispositivo;\n\n// Workaround para o problema de textos que possuam tags <b> ou <i> contendo <a> no meio\n// O Quill faz um tratamento para que as tags <b> e <i> fiquem dentro da tag <a>\n// Nesse caso, é necessário fazer esse ajuste antecipadamente para que o editor não trate a transformação como uma alteração\nconst ajustarTextosParaQuill = (projetoNorma: ProjetoNorma): void => {\n  if (window.process.env.testMode) return;\n\n  const fnAjustaFormatoQuill = (texto: string, container: any, quill: Quill): string => {\n    const regexMatchTagsBoldOuItalicContendoTagAnchorDentro = /<(b|i)>(?:(?!(<\\/\\1>)).)*<a[^>]*>.*<\\/a>.*<\\/\\1>/gi;\n    if (texto?.match(regexMatchTagsBoldOuItalicContendoTagAnchorDentro)) {\n      quill.setContents(quill.clipboard.convert(texto));\n      return container.querySelector('.ql-editor p')!.innerHTML;\n    }\n    return texto;\n  };\n\n  const tempContainer = document.createElement('div');\n  const tempQuill = new Quill(tempContainer, {});\n\n  if (projetoNorma.ementa) {\n    projetoNorma.ementa.texto = fnAjustaFormatoQuill(projetoNorma.ementa.texto, tempContainer, tempQuill);\n  }\n\n  if (projetoNorma.articulacao) {\n    getDispositivoAndFilhosAsLista(projetoNorma.articulacao).forEach(d => {\n      d.texto = fnAjustaFormatoQuill(d.texto, tempContainer, tempQuill);\n    });\n  }\n};\n\nexport const buildProjetoNormaFromJsonix = (documentoLexml: any, emendamento = false): ProjetoNorma => {\n  isEmendamento = emendamento;\n\n  if (!documentoLexml?.value?.projetoNorma) {\n    throw new Error('Não se trata de um documento lexml válido');\n  }\n\n  const projetoNorma: ProjetoNorma = {\n    classificacao: documentoLexml.value?.projetoNorma.norma ? ClassificacaoDocumento.NORMA : ClassificacaoDocumento.PROJETO,\n    tipo: getTipo(getUrn(documentoLexml)),\n    ...getMetadado(documentoLexml),\n    ...getParteInicial(documentoLexml),\n    ...getTextoArticulado(documentoLexml.value.projetoNorma.norma || documentoLexml.value.projetoNorma.projeto),\n  };\n\n  if (projetoNorma.articulacao) {\n    projetoNorma.articulacao.projetoNorma = projetoNorma;\n    if (projetoNorma.ementa) {\n      projetoNorma.ementa.pai = projetoNorma.articulacao;\n    }\n  }\n\n  ajustarTextosParaQuill(projetoNorma);\n\n  return projetoNorma;\n};\n\nconst retiraCaracteresDesnecessarios = (texto: string): any => {\n  return texto?.replace(/[\\n]/g, '').trim();\n};\n\nexport const getUrn = (documento: any): string => {\n  return documento?.value?.metadado?.identificacao?.urn;\n};\n\nconst getMetadado = (documento: any): Metadado => {\n  return {\n    urn: getUrn(documento),\n  };\n};\n\nconst getParteInicial = (documento: any): ParteInicial => {\n  const epigrafe = documento?.value?.projetoNorma?.norma?.parteInicial?.epigrafe?.content[0] ?? '';\n  const ementa = buildContent(documento?.value?.projetoNorma?.norma?.parteInicial?.ementa.content);\n  const preambulo = documento?.value?.projetoNorma?.norma?.parteInicial?.preambulo?.p[0].content[0] ?? '';\n\n  return {\n    epigrafe: retiraCaracteresDesnecessarios(epigrafe),\n    ementa: buildDispositivoEmenta(retiraCaracteresDesnecessarios(ementa)),\n    preambulo: retiraCaracteresDesnecessarios(preambulo),\n  };\n};\n\nexport const getTextoArticulado = (norma: any): TextoArticulado => {\n  return {\n    articulacao: buildArticulacao(norma.articulacao),\n  };\n};\n\nconst buildDispositivoEmenta = (texto?: string): Dispositivo | undefined => {\n  if (!texto) {\n    return;\n  }\n\n  const dispositivo = criaDispositivo(createArticulacao(), 'Ementa');\n  dispositivo.pai = undefined;\n  dispositivo.texto = substituiAspasRetasPorCurvas(texto);\n  dispositivo.rotulo = '';\n  dispositivo.id = 'ementa';\n  if (isEmendamento) {\n    dispositivo.situacao = new DispositivoOriginal();\n  }\n\n  return dispositivo;\n};\n\nconst buildArticulacao = (tree: any): Articulacao => {\n  const articulacao = createArticulacao();\n\n  buildTree(articulacao, tree.lXhier, []);\n\n  return articulacao;\n};\n\nconst buildTree = (pai: Dispositivo, filhos: any, cabecasAlteracao: Dispositivo[]): void => {\n  if (!pai || !filhos) {\n    return;\n  }\n\n  filhos?.forEach((el: any) => {\n    let dispositivo;\n    const notaAlteracao = el.value?.notaAlteracao;\n\n    if (el.value?.fechaAspas) {\n      const cabecaAlteracao = cabecasAlteracao.pop();\n      if (cabecaAlteracao) {\n        cabecaAlteracao.notaAlteracao = el.value?.notaAlteracao;\n      }\n    }\n\n    if (el.name?.localPart === 'Caput') {\n      if (el.value?.abreAspas === 's') {\n        cabecasAlteracao.push(dispositivo);\n        dispositivo.rotulo = el.value?.rotulo;\n        dispositivo.cabecaAlteracao = true;\n        dispositivo.notaAlteracao = notaAlteracao;\n      } else if (el.value?.rotulo) {\n        dispositivo.rotulo = el.value.rotulo;\n        dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n      }\n\n      pai.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el));\n\n      (pai as Artigo).caput!.href = el.value?.href;\n      (pai as Artigo).caput!.id = el.value?.id;\n      buildAlteracao(pai, el.value?.alteracao, cabecasAlteracao);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis, cabecasAlteracao);\n    } else if (el.name?.localPart === 'alteracao') {\n      buildAlteracao(pai, el, cabecasAlteracao);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis, cabecasAlteracao);\n    } else {\n      if (el.name?.localPart === 'p') {\n        adicionaTextoAoUltimoDispositivoCriado(el);\n      } else {\n        // Impede que sejam criados filhos em artigos que já possuam alterações\n        if (!pai.alteracoes) {\n          dispositivo = buildDispositivo(pai, el, cabecasAlteracao);\n          buildTree(dispositivo, el.value?.lXhier ?? el.value?.lXcontainersOmissis, cabecasAlteracao);\n        }\n      }\n    }\n  });\n};\n\nconst buildAlteracao = (pai: Dispositivo, el: any, cabecasAlteracao: Dispositivo[]): void => {\n  if (el) {\n    createAlteracao(pai);\n    pai.alteracoes!.id = el.id;\n    pai.alteracoes!.base = el.base;\n    if (isEmendamento) {\n      pai.alteracoes!.situacao = new DispositivoOriginal();\n    }\n    el.content?.forEach((c: any) => {\n      if (c.name?.localPart === 'p') {\n        adicionaTextoAoUltimoDispositivoCriado(c);\n      } else {\n        const d = buildDispositivo(pai.alteracoes!, c, cabecasAlteracao);\n        d.isDispositivoAlteracao = true;\n        d.rotulo = c.value?.rotulo;\n        buildTree(d!, c.value?.lXhier ?? c.value?.lXcontainersOmissis, cabecasAlteracao);\n      }\n    });\n  }\n};\n\nconst adicionaTextoAoUltimoDispositivoCriado = (el: any): void => {\n  ultimoDispositivoCriado.texto = (ultimoDispositivoCriado.texto + ' ' + retiraCaracteresDesnecessarios(buildContent(el.value?.content))).replace(/\\s+/g, ' ');\n};\n\nconst buildDispositivo = (pai: Dispositivo, el: any, cabecasAlteracao: Dispositivo[]): Dispositivo => {\n  const dispositivo = criaDispositivo(pai, el.name?.localPart);\n\n  const notaAlteracao = el.value?.notaAlteracao;\n\n  if (el.value?.fechaAspas) {\n    const cabecaAlteracao = cabecasAlteracao.pop();\n    if (cabecaAlteracao) {\n      cabecaAlteracao.notaAlteracao = el.value?.notaAlteracao;\n    }\n  }\n\n  if (!isOmissis(dispositivo)) {\n    if (el.value?.abreAspas === 's') {\n      cabecasAlteracao.push(dispositivo);\n      dispositivo.rotulo = el.value?.rotulo;\n      dispositivo.cabecaAlteracao = true;\n      dispositivo.notaAlteracao = notaAlteracao;\n    } else {\n      dispositivo.rotulo = el.value?.rotulo;\n    }\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo!);\n  }\n\n  dispositivo.href = el.value?.href;\n  dispositivo.id = el.value?.id;\n  if (isEmendamento) {\n    dispositivo.situacao = new DispositivoOriginal();\n    if (isArtigo(dispositivo)) {\n      (dispositivo as Artigo).caput!.situacao = new DispositivoOriginal();\n    }\n  }\n  dispositivo.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el));\n\n  ultimoDispositivoCriado = dispositivo;\n  return dispositivo;\n};\n\n// const montaReferencia = (value: any): string => {\n//   return `<a href=\"${value.href}\"> ${value.content[0]} </a>`;\n// };\n\nconst buildContentDispositivo = (el: any): string => {\n  let texto = '';\n  if (el.value?.nomeAgrupador) {\n    return el.value.nomeAgrupador.content[0] ?? '';\n  } else {\n    el.value?.p\n      ?.map((p: any) => p)\n      ?.map((a: any) => a.content)\n      .forEach((content: any) => (texto += buildContent(content)));\n  }\n  return substituiAspasRetasPorCurvas(texto);\n};\n\nconst substituiAspasRetasPorCurvas = (html: string): string => {\n  const div = document.createElement('div');\n  div.innerHTML = html;\n  const elements = div.getElementsByTagName('*');\n  for (let i = 0; i < elements.length; i++) {\n    const innerHTML = elements[i].innerHTML;\n    if (innerHTML.indexOf('\"') !== -1) {\n      const newInnerHTML = innerHTML.replace(/\"(?=\\w|$)/g, '&#8220;').replace(/(?=[\\w,.?!\\-\")]|^)\"/g, '&#8221;');\n      elements[i].innerHTML = newInnerHTML;\n    }\n  }\n  return div.innerHTML.replace(/&nbsp;/g, ' ');\n};\n\nexport const buildContent = (content: any): string => {\n  let texto = '';\n  content?.forEach((element: any) => {\n    if (element.value) {\n      texto += montaTag(element.name, element.value);\n    } else {\n      let elementTexto = element;\n      elementTexto = elementTexto.replace(/\"(?=\\w|$)/g, '&#8220;');\n      elementTexto = elementTexto.replace(/(?=[\\w,.?!\\-\")]|^)\"/g, '&#8221;');\n      texto += elementTexto;\n    }\n  });\n  return texto;\n};\n\nconst montaTag = (name: any, value: any): string => {\n  const localPart = name.localPart;\n  if (localPart === 'span' && value.href) {\n    return `<a href=\"${value.href}\">${buildContent(value.content)}</a>`;\n  }\n  if (localPart === 'b' || localPart === 'i' || localPart === 'sub' || localPart === 'sup') {\n    return `<${localPart}>${buildContent(value.content)}</${localPart}>`;\n  }\n  return '';\n};\n","import { TextoArticulado } from '../../../documento';\nimport { getTextoArticulado } from './buildProjetoNormaFromJsonix';\n\nexport const buildDispositivoFromJsonix = (documentoLexml: any): TextoArticulado => {\n  if (!documentoLexml?.value?.projetoNorma) {\n    throw new Error('Não se trata de um documento lexml válido');\n  }\n\n  return {\n    ...getTextoArticulado(documentoLexml.value.projetoNorma.norma ? documentoLexml.value.projetoNorma.norma : documentoLexml.value.projetoNorma.projeto),\n  };\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { isAgrupador, isArticulacao, isCaput, isItem, Tipo, isAlinea, isAgrupadorGenerico } from './../../../model/dispositivo/tipo';\nimport { buildDispositivoFromJsonix } from './../../../model/lexml/documento/conversor/buildDispositivoFromJsonix';\nimport { Elemento } from './../../../model/elemento/elemento';\nimport { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArtigo, isInciso, isOmissis } from '../../../model/dispositivo/tipo';\nimport {\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  isDispositivoAlteracao,\n  irmaosMesmoTipo,\n  isModificadoOuSuprimido,\n  isOriginal,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { escapeRegex, removeAllHtmlTags, removeAllHtmlTagsExcept } from '../../../util/string-util';\n\nexport interface MensageInfoTextoColado {\n  oQueEstaSendoColado: string;\n  proibidoColarAnaliseInicial: string[];\n  proibidoColarAnaliseContextualizada: string[];\n}\n\nexport interface InfoDispositivos {\n  tiposColados: string[];\n  atual: Dispositivo;\n  referencia?: Dispositivo;\n  existentes: Dispositivo[];\n  novos: Dispositivo[];\n}\n\nexport interface InfoElementos {\n  tiposColados: string[];\n  atual: Elemento;\n  referencia?: Elemento;\n  existentes: Elemento[];\n  novos: Elemento[];\n}\n\nexport enum TipoRestricaoEnum {\n  ARTICULACAO_SEM_FILHOS,\n  AGRUPADOR_GENERICO_NA_ARTICULACAO,\n  AGRUPADORES_DE_ARTIGO,\n  DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n  DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n  ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO,\n  ALTERACAO_DENTRO_DE_ALTERACAO,\n  FILHOS_EM_DISPOSITIVO_SUPRIMIDO,\n  DISPOSITIVO_JA_MODIFICADO,\n  DISPOSITIVO_EM_POSICAO_INVALIDA,\n  DISPOSITIVO_ANTES_DO_ATUAL,\n  ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES,\n  ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS,\n  ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA,\n  ARTICULACAO_INCONSISTENTE, // Exemplo: alínea debaixo de artigo, item debaixo de artigo, etc\n}\n\nexport interface Restricao {\n  tipo: TipoRestricaoEnum;\n  titulo?: string;\n  mensagens: string[];\n  isPermitidoColarAdicionando?: boolean;\n}\n\nexport class InfoTextoColado {\n  textoColadoOriginal: string; // texto como está no clipboard\n  textoColadoAjustado: string; // pode conter alguns ajustes se texto no clipboard for html\n  textoColadoAjustadoParaParser: string; // texto a ser enviado para o parser (derivado de textoColadoAjustado. exemplo: contém números \"fake\" em artigos originalmente sem numeração)\n  isColandoArtigoSemNumeracao: boolean;\n  jsonix: any;\n  articulacaoProposicao: Articulacao;\n  articulacaoColada: Articulacao;\n  posicao: string;\n  isColarSubstituindo = true;\n  podeColarAntes: boolean;\n  private infoDispositivos: InfoDispositivos;\n  infoElementos: InfoElementos;\n  tipoColado: Tipo;\n  restricoes: Restricao[];\n\n  private constructor(\n    articulacaoProposicao: Articulacao,\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    textoColadoAjustadoParaParser: string,\n    jsonix: any,\n    articulacaoColada: Articulacao,\n    atual: Elemento,\n    isColarSubstituindo = true,\n    posicao = 'depois'\n  ) {\n    this.textoColadoOriginal = textoColadoOriginal;\n    this.textoColadoAjustado = textoColadoAjustado;\n    this.textoColadoAjustadoParaParser = textoColadoAjustadoParaParser;\n    this.isColandoArtigoSemNumeracao = hasArtigoOndeCouber(textoColadoAjustado);\n    this.jsonix = jsonix;\n    this.articulacaoProposicao = articulacaoProposicao;\n    this.articulacaoColada = articulacaoColada;\n\n    this.isColarSubstituindo = isColarSubstituindo;\n    this.posicao = posicao;\n\n    this.infoDispositivos = {\n      tiposColados: montarListaTiposDispositivosColados(this.articulacaoColada),\n      atual: getDispositivoFromElemento(this.articulacaoProposicao, atual)!,\n      existentes: [],\n      novos: [],\n    };\n\n    this.tipoColado = getTipoColadoFromArticulacao(this.articulacaoColada);\n\n    this.infoDispositivos.referencia = getDispositivoReferencia(articulacaoColada.filhos[0].tipo, this.infoDispositivos.atual);\n    this.infoDispositivos.existentes = montarListaDispositivosExistentes(this.articulacaoProposicao, this.articulacaoColada, this.infoDispositivos.referencia);\n    this.infoDispositivos.novos = montarListaDispositivosNovos(this.articulacaoProposicao, this.articulacaoColada, this.infoDispositivos.referencia);\n\n    this.infoElementos = {\n      tiposColados: this.infoDispositivos.tiposColados,\n      atual: createElemento(this.infoDispositivos.atual),\n      existentes: this.infoDispositivos.existentes.map(d => createElemento(d)),\n      novos: this.getElementos(this.infoDispositivos.novos),\n      referencia: this.infoDispositivos.referencia ? createElemento(this.infoDispositivos.referencia) : undefined,\n    };\n\n    this.podeColarAntes = this.infoDispositivos.referencia?.tipo === this.infoDispositivos.tiposColados[0];\n\n    this.restricoes = this.montarRestricoes();\n  }\n\n  private getElementos(dispositivos: Dispositivo[]): Elemento[] {\n    try {\n      return dispositivos.map(d => createElemento(d));\n    } catch (error) {\n      return [];\n    }\n  }\n\n  public static async newInstanceFromTexto(\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    articulacaoProposicao: Articulacao,\n    atual: Elemento\n  ): Promise<InfoTextoColado> {\n    let textoColadoAjustadoParaParser = removeAspasENRSeNecessario(hasArtigoOndeCouber(textoColadoAjustado) ? numerarArtigosOndeCouber(textoColadoAjustado) : textoColadoAjustado);\n    let jsonix = await getJsonixFromTexto(textoColadoAjustadoParaParser);\n    let projetoNorma = buildDispositivoFromJsonix(jsonix);\n\n    const dispositivos = getDispositivoAndFilhosAsLista(projetoNorma.articulacao!);\n    if (existeItemSemPaiAlinea(dispositivos)) {\n      textoColadoAjustadoParaParser = ajustaFalsosItensParaParser(textoColadoAjustadoParaParser, dispositivos);\n      jsonix = await getJsonixFromTexto(textoColadoAjustadoParaParser);\n      projetoNorma = buildDispositivoFromJsonix(jsonix);\n    }\n\n    return new InfoTextoColado(articulacaoProposicao, textoColadoOriginal, textoColadoAjustado, textoColadoAjustadoParaParser, jsonix, projetoNorma.articulacao!, atual);\n  }\n\n  public static newInstanceFromJsonix(jsonix: any, articulacaoProposicao: Articulacao, atual: Elemento, isColarSubstituindo = true, posicao = 'depois'): InfoTextoColado {\n    const projetoNorma = buildDispositivoFromJsonix(jsonix);\n    return new InfoTextoColado(articulacaoProposicao, '', '', '', jsonix, projetoNorma.articulacao!, atual, isColarSubstituindo, posicao);\n  }\n\n  public static newInstanceFromTextoEJsonix(\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    jsonix: any,\n    articulacaoProposicao: Articulacao,\n    atual: Elemento\n  ): InfoTextoColado {\n    const projetoNorma = buildDispositivoFromJsonix(jsonix);\n    return new InfoTextoColado(articulacaoProposicao, textoColadoOriginal, textoColadoAjustado, textoColadoAjustado, jsonix, projetoNorma.articulacao!, atual);\n  }\n\n  public static newInstanceFromArticulacao(articulacaoColada: Articulacao, articulacaoProposicao: Articulacao, atual: Elemento): InfoTextoColado {\n    return new InfoTextoColado(articulacaoProposicao, '', '', '', undefined, articulacaoColada, atual);\n  }\n\n  private montarRestricoes = (): Restricao[] => {\n    return [...validarArticulacaoColadaAnaliseInicial(this.articulacaoColada), ...validarArticulacaoColadaAnaliseContextualizada(this, this.infoDispositivos)];\n  };\n\n  public atualizarAtributosEAnaliseContextualizada(isColarSubstituindo: boolean, posicao: string): void {\n    const tiposRestricoesAnaliseInicial = [\n      TipoRestricaoEnum.ARTICULACAO_SEM_FILHOS,\n      TipoRestricaoEnum.AGRUPADORES_DE_ARTIGO,\n      TipoRestricaoEnum.DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n      TipoRestricaoEnum.DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n    ];\n\n    this.posicao = posicao;\n    this.isColarSubstituindo = isColarSubstituindo;\n\n    this.restricoes = this.restricoes.filter(r => tiposRestricoesAnaliseInicial.includes(r.tipo));\n\n    this.restricoes.push(...validarArticulacaoColadaAnaliseContextualizada(this, this.infoDispositivos));\n  }\n}\n\n// Retira a quebra de linha anterior ao texto que foi identificado como item (sem que houvesse um alínea antes)\nconst ajustaFalsosItensParaParser = (texto: string, dispositivos: Dispositivo[]): string => {\n  let textoAux = texto;\n  const lista = dispositivos.filter(d => isItem(d) && !isAlinea(d.pai!));\n  lista.forEach(d => {\n    const textoItemAjustadoParaPesquisa = escapeRegex(d.texto).split(' ').join('[\\\\s\\\\n]?');\n    const regex = new RegExp(`(\\\\n)(.*${d.numero}.*${textoItemAjustadoParaPesquisa})`, 'i');\n    textoAux = textoAux.replace(regex, ' $2');\n  });\n  return textoAux;\n};\n\nexport const existeItemSemPaiAlinea = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => isItem(d) && !isAlinea(d.pai!) && !isArticulacao(d.pai!));\n};\n\nexport const removeAspasENRSeNecessario = (texto: string): string => {\n  const textoAux = texto\n    .replace(/\\r/g, '')\n    .replace(/\\n\\s*\\(NR\\)/gi, ' (NR)')\n    .replace(/(\\(NR\\))\\./gi, '$1');\n\n  if (!comecaComAspas(textoAux)) {\n    return textoAux;\n  }\n\n  const regexMatchTextoArtigoEntreAspasOuNao = /(?<=\\n|^)[\"“‘']?art(?:\\.|\\s|\\d)(?:.|\\n)+?(?:(?=\\n[\"“‘']?art(?:\\.|\\s|\\d))|$)/gi;\n  if (!textoAux.match(regexMatchTextoArtigoEntreAspasOuNao)) {\n    return textoAux;\n  }\n\n  // Grupo 1 do regex abaixo corresponde ao texto do artigo sem aspas iniciais e finais e sem o (NR)\n  const regexMatchTextoArtigoEntreAspasOuNaoComCapturaDeGrupo = /(?<=\\n|^)\\s*[\"“‘']?(art(?:\\.|\\s|\\d)(?:.|\\n)+?)([\"”’]\\s*(?:\\(NR\\))?[\\s]*)?(?:(?=\\n\\s*[\"“‘']?art(?:\\.|\\s|\\d))|$)/gi;\n  return textoAux.replace(regexMatchTextoArtigoEntreAspasOuNaoComCapturaDeGrupo, '\\n$1').trim();\n};\n\nexport const comecaComAspas = (texto: string): boolean => !!texto.match(/^[\"“‘']/);\n\nexport const getJsonixFromTexto = async (texto: string): Promise<any> => {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': 'text/plain' },\n    body: texto,\n  };\n\n  try {\n    const response = await fetch('https://www6ghml.senado.leg.br/editor-emendas/api/parser/jsonix', options);\n    return await response.json();\n  } catch (err) {\n    return console.error(err);\n  }\n};\n\nexport const montarListaTiposDispositivosColados = (articulacao: Articulacao): string[] => {\n  return [...new Set(articulacao.filhos.filter(f => f.tipo !== 'Omissis').map(f => f.tipo))];\n};\n\nconst getTipoColadoFromArticulacao = (articulacao: Articulacao): Tipo => getTipoColadoFromDispositipo(articulacao.filhos[0]);\n\nconst getTipoColadoFromDispositipo = (dispositivo: Dispositivo): Tipo => getTipo(dispositivo.tipo);\n\nconst getTipo = (nomeTipo: string): Tipo => TipoDispositivo[nomeTipo?.toLowerCase()];\n\nexport const montarListaDispositivosExistentes = (articulacao: Articulacao, articulacaoColada: Articulacao, referencia?: Dispositivo): Dispositivo[] => {\n  if (referencia && (!isArtigo(articulacaoColada.filhos[0]) || isDispositivoAlteracao(referencia))) {\n    ajustaIdsNaArticulacaoColada(articulacaoColada.filhos, referencia);\n  }\n\n  const idsColados = getDispositivoAndFilhosAsLista(articulacaoColada)\n    .filter(d => d.tipo !== 'Articulacao')\n    .map(d => d.id)\n    .reduce((acc, cur) => {\n      if (cur) {\n        acc.push(cur);\n        if (cur.endsWith('_par1')) {\n          acc.push(cur.replace('_par1', '_par1u'));\n        }\n      }\n      return acc;\n    }, [] as string[]);\n  return getDispositivoAndFilhosAsLista(articulacao).filter(d => isOriginal(d) && idsColados.includes(d.id!));\n};\n\nexport const montarListaDispositivosNovos = (articulacao: Articulacao, articulacaoColada: Articulacao, referencia?: Dispositivo): Dispositivo[] => {\n  const idsExistentes = montarListaDispositivosExistentes(articulacao, articulacaoColada, referencia).map(d => d.id);\n  return getDispositivoAndFilhosAsLista(articulacaoColada).filter(d => !isArticulacao(d) && !idsExistentes.includes(d.id));\n};\n\nexport const validarArticulacaoColadaAnaliseInicial = (articulacaoColada: Articulacao): Restricao[] => {\n  const result: Restricao[] = [];\n\n  if (!articulacaoColada || !articulacaoColada.filhos.length) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTICULACAO_SEM_FILHOS,\n      mensagens: ['Não foi possível identificar dispositivos no texto informado'],\n    });\n    return result;\n  }\n\n  if (getDispositivoAndFilhosAsLista(articulacaoColada).some(isAgrupadorGenerico)) {\n    result.push({\n      tipo: TipoRestricaoEnum.AGRUPADOR_GENERICO_NA_ARTICULACAO,\n      mensagens: ['Não foi possível identificar, corretamente, os dispositivos no texto a ser colado.'],\n    });\n  }\n\n  if (hasAgrupador(articulacaoColada)) {\n    result.push({\n      tipo: TipoRestricaoEnum.AGRUPADORES_DE_ARTIGO,\n      mensagens: ['Não é permitido colar texto com agrupadores de artigo.', 'Por favor, adicione-os manualmente no editor e depois cole os artigos, se houverem.'],\n    });\n  }\n\n  if (articulacaoColada.filhos.filter(f => !isOmissis(f)).length !== irmaosMesmoTipo(articulacaoColada.filhos.filter(f => !isOmissis(f))[0]).length) {\n    const tipos = [...new Set(articulacaoColada.filhos.map(f => TipoDispositivo[f.tipo.toLowerCase()].descricaoPlural?.toLocaleLowerCase()))];\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n      mensagens: [`Não é permitido colar texto com dispositivos de tipos diferentes: ${tipos.join(', ')}.`, 'Por favor, cole-os separadamente.'],\n    });\n  }\n\n  if (existeDispositivoComRotuloDuplicado(articulacaoColada)) {\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n      mensagens: ['Não é permitido colar dispositivos com rótulos duplicados.'],\n    });\n  }\n\n  if (isArticulacaoInconsistente(articulacaoColada)) {\n    const mensagens = [\n      'Não foi possível identificar, corretamente, os dispositivos no texto a ser colado.',\n      getTextoInconsistencia(getDispositivoAndFilhosAsLista(articulacaoColada)),\n      'Por favor, verifique se o texto está correto e tente novamente.',\n    ].filter(Boolean);\n\n    result.push({\n      tipo: TipoRestricaoEnum.ARTICULACAO_INCONSISTENTE,\n      mensagens,\n    });\n  }\n\n  return result;\n};\n\nconst hasAgrupador = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos.filter(a => isAgrupador(a) && a.tipo !== 'DispositivoAgrupadorGenerico').length > 0;\n};\n\nconst isArticulacaoInconsistente = (articulacao: Articulacao): boolean => {\n  const dispositivos = getDispositivoAndFilhosAsLista(articulacao).slice(1);\n  return dispositivos.some(d => isDispositivoInconsistente(d));\n};\n\nconst isDispositivoInconsistente = (dispositivo: Dispositivo): boolean => {\n  return !dispositivo.pai?.tiposPermitidosFilhos?.includes(dispositivo.tipo) && !isOmissis(dispositivo) && !!dispositivo.pai && !isArticulacao(dispositivo.pai!);\n};\n\nconst getTextoInconsistencia = (dispositivos: Dispositivo[]): string => {\n  const dispositivo = dispositivos.find(d => isDispositivoInconsistente(d));\n  if (dispositivo && dispositivo.pai) {\n    const pai = isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai;\n    const tiposPermitidos = pai?.tiposPermitidosFilhos?.map(t => TipoDispositivo[t.toLowerCase()].descricao?.toLowerCase());\n    return `O dispositivo \"${dispositivo.rotulo}\" não pode ser colado como filho de \"${pai?.rotulo}\" pois o tipo do dispositivo é ${TipoDispositivo[\n      dispositivo.tipo.toLowerCase()\n    ].descricao?.toLowerCase()} e o tipo permitido é ${tiposPermitidos?.join(' ou ')}.`;\n  }\n  return '';\n};\n\nconst existeDispositivoComRotuloDuplicado = (articulacaoColada: Articulacao): boolean => {\n  const rotulos = articulacaoColada.filhos.map(f => f.rotulo);\n  return rotulos.length > new Set(rotulos).size;\n};\n\nconst validarArticulacaoColadaAnaliseContextualizada = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): Restricao[] => {\n  const result: Restricao[] = [];\n\n  const { textoColadoAjustado, articulacaoColada, articulacaoProposicao, tipoColado, isColarSubstituindo, posicao } = infoTextoColado;\n  const { atual, referencia, existentes: dispositivosExistentes } = infoDispositivos;\n\n  if (infoTextoColado.infoElementos.tiposColados.includes('DispositivoAgrupadorGenerico')) {\n    return result;\n  }\n\n  if (!articulacaoColada.filhos.length) {\n    return result;\n  }\n\n  const pluralTipoColado = tipoColado.descricaoPlural;\n\n  if (isDispositivoAlteracao(atual) && hasArtigoOndeCouber(textoColadoAjustado)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO,\n      mensagens: [`Não é permitido colar artigo sem numeração dentro de alteração de norma.`],\n    });\n  }\n\n  if (isDispositivoAlteracao(atual) && articulacaoColada.filhos.some(f => isArtigo(f) && f.alteracoes?.filhos.length)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ALTERACAO_DENTRO_DE_ALTERACAO,\n      mensagens: ['Não é permitido colar alteração de norma dentro de alteração de norma'],\n    });\n  }\n\n  const dispositivosExistentesAux = dispositivosExistentes || montarListaDispositivosExistentes(getArticulacao(atual), articulacaoColada, referencia);\n\n  if (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && articulacaoColada.filhos && isColandoFilhos(articulacaoColada.filhos, atual)) {\n    result.push({\n      tipo: TipoRestricaoEnum.FILHOS_EM_DISPOSITIVO_SUPRIMIDO,\n      mensagens: ['Não é permitido colar filhos em dispositivo suprimido'],\n    });\n  }\n\n  if (isColarSubstituindo && dispositivosExistentesAux.some(isModificadoOuSuprimido)) {\n    const ids = dispositivosExistentesAux.filter(isModificadoOuSuprimido).map(d => d.id!);\n    const dispositivos = getDispositivoAndFilhosAsLista(articulacaoProposicao)\n      .filter(d => tipoColado.name === d.tipo && ids.includes(d.id!))\n      .map(d => d.rotulo?.replace(/ [-–)]/, ''))\n      .join(', ');\n\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_JA_MODIFICADO,\n      titulo: 'Atenção, dispositivo já modificado encontrado',\n      mensagens: [`Não é permitido colar dispositivos que já foram alterados na emenda${dispositivos ? ` (veja ${pluralTipoColado}: ${dispositivos})` : ''}.`],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  const referenciaAux = referencia || getDispositivoReferencia(articulacaoColada.filhos[0].tipo, atual);\n\n  if (!referenciaAux) {\n    const pluralTipoAtual = getTipo(atual.tipo).descricaoPlural;\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_EM_POSICAO_INVALIDA,\n      mensagens: [`Não é permitido colar ${pluralTipoColado?.toLowerCase()} sobre ${pluralTipoAtual?.toLowerCase()}`],\n    });\n    return result;\n  }\n\n  if (posicao === 'antes' && referenciaAux.tipo !== articulacaoColada.filhos[0].tipo) {\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_ANTES_DO_ATUAL,\n      mensagens: [`Não é permitido colar ${pluralTipoColado} antes do atual dispositivo selecionado`],\n    });\n  }\n\n  if (isColandoArtigosComFilhosSobreArtigosComAlteracoes(infoTextoColado, infoDispositivos)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES,\n      mensagens: ['Não é permitido adicionar incisos ou parágrafos a artigo que já possua alterações de norma'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  if (isColandoArtigosComAlteracoesSobreArtigosComFilhos(infoTextoColado, infoDispositivos)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS,\n      mensagens: ['Não é permitido adicionar alterações de norma a artigo que já possua incisos ou parágrafos'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  if (isColandoArtigoExistenteComMudancaDaNormaAlterada(infoTextoColado)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA,\n      mensagens: ['Não é permitido colar artigo com mudança na identificação da norma alterada'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  return result;\n};\n\nconst isColandoArtigosComFilhosSobreArtigosComAlteracoes = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): boolean => {\n  return infoTextoColado.isColarSubstituindo && hasArtigosComAlteracoes(infoDispositivos.existentes) && hasArtigosComFilhos(infoTextoColado.articulacaoColada.filhos);\n};\n\nconst isColandoArtigosComAlteracoesSobreArtigosComFilhos = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): boolean => {\n  return infoTextoColado.isColarSubstituindo && hasArtigosComFilhos(infoDispositivos.existentes) && hasArtigosComAlteracoes(infoTextoColado.articulacaoColada.filhos);\n};\n\nconst isColandoArtigoExistenteComMudancaDaNormaAlterada = (infoTextoColado: InfoTextoColado): boolean => {\n  // TODO: Implementar quando parser estiver rodando o linker\n  return !infoTextoColado;\n};\n\nconst hasArtigosComAlteracoes = (dispositivos: Dispositivo[]): boolean => dispositivos.some(d => isArtigo(d) && !isDispositivoAlteracao(d) && d.alteracoes?.filhos.length);\n\nconst hasArtigosComFilhos = (dispositivos: Dispositivo[]): boolean => dispositivos.some(d => isArtigo(d) && !isDispositivoAlteracao(d) && d.filhos?.length);\n\nconst getDispositivoReferencia = (tipoASerColado: string, ref?: Dispositivo): Dispositivo | undefined => {\n  if (!ref) {\n    return;\n  } else if (ref.tipo === tipoASerColado || (ref.tiposPermitidosFilhos || []).includes(tipoASerColado)) {\n    return ref;\n  } else {\n    return getDispositivoReferencia(tipoASerColado, ref.pai);\n  }\n};\n\nconst isColandoFilhos = (filhos: Dispositivo[], atual: Dispositivo): boolean => {\n  return filhos[0].tipo !== atual.tipo && !!atual.tiposPermitidosFilhos?.includes(filhos[0].tipo);\n};\n\nexport const ajustaIdsNaArticulacaoColada = (filhos: Dispositivo[], referencia: Dispositivo): void => {\n  let prefixo: string;\n  if (referencia.tipo === filhos[0].tipo) {\n    prefixo = referencia.pai!.id!;\n  } else {\n    prefixo = referencia.id!;\n  }\n\n  if (isArtigo(referencia) && isInciso(filhos[0])) {\n    prefixo += '_cpt';\n  }\n\n  filhos.forEach(f => getDispositivoAndFilhosAsLista(f).forEach(f2 => ajustaIdSeNecessario(f2, prefixo)));\n};\n\nconst ajustaIdSeNecessario = (dispositivo: Dispositivo, prefixo: string): void => {\n  !dispositivo.id?.startsWith(prefixo) && ajustarId(dispositivo, prefixo);\n};\n\nconst ajustarId = (dispositivo: Dispositivo, prefixo: string): void => {\n  dispositivo.id = prefixo + '_' + dispositivo.id;\n  if (isArtigo(dispositivo) && (dispositivo as Artigo).caput) {\n    (dispositivo as Artigo).caput!.id = prefixo + '_' + (dispositivo as Artigo).caput!.id;\n  }\n};\n\nexport const getRegexRotuloArtigoOndeCouber = (): RegExp => /^([\"“‘'])?(art\\.\\s+(?!\\d+)[x. ]*[º0]?)/gim;\n\nconst hasArtigoOndeCouber = (texto: string): boolean => {\n  const t = removeAllHtmlTags(texto)\n    ?.replace(/&nbsp;/g, ' ')\n    .replace(/[\"“']/g, '')\n    .trim();\n\n  return getRegexRotuloArtigoOndeCouber().test(t);\n};\n\nconst numerarArtigosOndeCouber = (texto: string): string => {\n  if (hasArtigoOndeCouber(texto)) {\n    let contador = 5000;\n    let novoTexto = texto.replaceAll(getRegexRotuloArtigoOndeCouber(), '$1ArtigoANumerar');\n\n    //numera artigos\n    while (novoTexto.indexOf('ArtigoANumerar') !== -1) {\n      novoTexto = novoTexto.replace('ArtigoANumerar', 'Art. ' + contador++ + '. ');\n    }\n\n    return novoTexto;\n  }\n  return texto;\n};\n\nexport const ajustaHtmlParaColagem = (htmlInicial: string): string => {\n  let html = htmlInicial\n    .replace(/\\xA0/g, ' ') // &nbsp; (non breaking space to space) (\\xA0 = 160)\n    .replace(/<![^>]*>/g, '')\n    .replace(/<p/g, '\\n<p')\n    .replace(/<br\\b[^>]*>/gi, '\\n')\n    .replace(/&nbsp;/g, ' ')\n    .replace(/(<br\\s*\\/?>)/gi, ' ')\n    .replace(/<([a-z]+) .*?=\".*?( *\\/?>)/gi, '<$1$2')\n    .replace(/;[/s]?[e][/s]?$/, '; ')\n    .replace(';', '; ')\n    .replace(/^[\"“']/g, '')\n    .replace(/<\\/?body[^>]*>/gi, '')\n    .replace(/\\r/g, '')\n    .replace(/\\n+/g, '\\n')\n    .replace(/&ldquo; |&ldquo;/g, '“')\n    .replace(/&rdquo;/g, '”');\n\n  const allowedTags = ['B', 'STRONG', 'I', 'EM', 'SUP', 'SUB', 'P'];\n\n  allowedTags.map(tag => tag.toLowerCase()).forEach(tag => (html = html.replace(new RegExp(`<${tag}[^>]*>`, 'gi'), `<${tag}>`)));\n\n  // Substitui tags \"strong\" por \"b\" e \"em\" por \"i\"\n  html = html.replace(/<(\\/?)strong>/gi, '<$1b>').replace(/<(\\/?)em(>)/gi, '<$1i>');\n\n  // Remove quebras de linha dentro de parágrafos\n  html = html.replace(/<p[^>]*>(?:.|\\n)*?<\\/p>/gi, s => s.replace(/\\n/g, ' ')).replace(/[\\t ]+/g, ' ');\n\n  html = html.replace(/&gt;/g, '>').replace(/&lt;/g, '<');\n\n  html = removeAllHtmlTagsExcept(html, allowedTags)\n    .replace(/<p[^>]*>/gi, '\\n<p>') // Garante que cada parágrafo comece em uma nova linha\n    .replace(/(?<=<\\/p>).*/gi, '') // Remove tudo que vem depois do fim do parágrafo, na mesma linha (remove o que não estiver dentro de um parágrafo)\n    .replace(/<\\/?p[^>]*>/g, '\\n')\n    .replace(/\\n+/g, '\\n')\n    .replace(/ +/g, ' ')\n    .replace(/\\n\\s+/g, '\\n')\n    .replace(/\\n *<i>(Parágrafo único\\. *)<\\/i>/gi, '\\n$1') // Remove itálico de rótulo de parágrafo único\n    .trim();\n\n  return html;\n};\n","import { validaDispositivo } from './../../../model/lexml/dispositivo/dispositivoValidator';\nimport { InfoTextoColado } from './../util/colarUtil';\nimport { DispositivoSuprimido } from './../../../model/lexml/situacao/dispositivoSuprimido';\nimport { DispositivoModificado } from './../../../model/lexml/situacao/dispositivoModificado';\nimport { Artigo } from './../../../model/dispositivo/dispositivo';\nimport { ClassificacaoDocumento } from './../../../model/documento/classificacao';\nimport { isArtigo, isOmissis, isInciso, isParagrafo, isCaput } from './../../../model/dispositivo/tipo';\nimport {\n  buscaDispositivoById,\n  getArticulacao,\n  isModificado,\n  isAdicionado,\n  isSuprimido,\n  isDispositivoAlteracao,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  getDispositivoAnteriorNaSequenciaDeLeitura,\n  isArticulacaoAlteracao,\n  isDispositivoCabecaAlteracao,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { createElemento, createElementoValidado, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAndFilhosAsLista } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent, StateType } from '../../state';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { ajustaIdsNaArticulacaoColada } from '../util/colarUtil';\nimport { removeAllHtmlTags } from '../../../util/string-util';\nimport { Elemento } from '../../../model/elemento/elemento';\n\nconst REGEX_OMISSIS = /^\\.{2,}/;\n\ninterface InfoOmissis {\n  omissis: Dispositivo;\n  anterior: Dispositivo;\n  posterior: Dispositivo;\n  omitidos: Dispositivo[];\n}\n\nexport const adicionaElementosNaProposicaoFromClipboard = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const infoTextoColado: InfoTextoColado =\n    action.infoTextoColado ?? InfoTextoColado.newInstanceFromJsonix(action.novo?.conteudo?.texto, state.articulacao, action.atual, action.isColarSubstituindo, action.posicao);\n\n  if (infoTextoColado.restricoes.length) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: infoTextoColado.restricoes[0].mensagens[0] });\n  }\n\n  const articulacaoColada = infoTextoColado.articulacaoColada;\n  const ref = getDispositivoFromElemento(state.articulacao, infoTextoColado.infoElementos.referencia!)!;\n\n  if (!isArtigo(articulacaoColada.filhos[0]) || isDispositivoAlteracao(atual)) {\n    ajustaIdsNaArticulacaoColada(articulacaoColada.filhos, ref);\n  }\n\n  const eventos = colarDispositivos(\n    state.articulacao,\n    articulacaoColada,\n    atual,\n    ref,\n    action.posicao,\n    action.isColarSubstituindo,\n    action.isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao,\n    state.modo,\n    infoTextoColado.infoElementos.tiposColados[0]\n  );\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [],\n\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst colarDispositivos = (\n  articulacao: Articulacao,\n  articulacaoColada: Articulacao,\n  atual: Dispositivo,\n  referencia: Dispositivo,\n  posicao: string,\n  isColarSubstituindo: boolean,\n  isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao: boolean,\n  modo: ClassificacaoDocumento,\n  tipoColado: string\n): StateEvent[] => {\n  const isColandoEmAlteracaoDeNorma = isDispositivoAlteracao(atual);\n  let refAux = referencia;\n\n  const adicionados: Dispositivo[] = [];\n  const modificados: Dispositivo[] = [];\n  const suprimidos: Dispositivo[] = [];\n\n  articulacaoColada.filhos.forEach(f => {\n    if (isColandoEmAlteracaoDeNorma || !isOmissis(f)) {\n      const d = buscarDispositivoByIdTratandoParagrafoUnico(articulacao, f.id!);\n      if (d && isColarSubstituindo) {\n        const d2 = colarDispositivoSubstituindo(d, f, modo, isColandoEmAlteracaoDeNorma);\n        modificados.push(...getDispositivoAndFilhosAsLista(d2).filter(isModificado));\n        adicionados.push(...getDispositivoAndFilhosAsLista(d2).filter(isAdicionado));\n        suprimidos.push(...getDispositivoAndFilhosAsLista(d2).filter(isSuprimido));\n        refAux = d2;\n      } else {\n        refAux = d && isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao ? d : refAux;\n        const d2 = colarDispositivoAdicionando(refAux, f, isColandoEmAlteracaoDeNorma, false, modo, posicao === 'antes' && refAux === referencia ? posicao : undefined);\n        adicionados.push(...getDispositivoAndFilhosAsLista(d2));\n        suprimidos.push(...getDispositivoAndFilhosAsLista(d2).filter(isSuprimido));\n        refAux = d2;\n      }\n    }\n  });\n\n  const eventos: StateEvent[] = [];\n  let eventoElementoRemovido: StateEvent | undefined;\n\n  if (isAdicionarNaPosicaoAtual(articulacaoColada, atual, referencia)) {\n    eventoElementoRemovido = buildEventoElementoRemovido(referencia);\n\n    referencia.pai!.removeFilho(referencia);\n    referencia.pai!.renumeraFilhos();\n    adicionados.forEach(d => (d.id = buildId(d)));\n  }\n\n  eventos.push(buildEventoElementoIncluido(adicionados, referencia));\n  eventoElementoRemovido && eventos.push(eventoElementoRemovido);\n  eventos.push(...buildEventosElementoModificado(modificados));\n  eventos.push(buildEventoElementosRenumerados(adicionados, referencia, tipoColado));\n  processaEventosSuprimidos(eventos, modificados, suprimidos);\n  eventos.push(buildEventoSituacaoElementoModificada(adicionados, isColandoEmAlteracaoDeNorma));\n  adicionados[0] && eventos.push(buildEventoElementoMarcado([adicionados[0], atual]));\n\n  return eventos.filter(ev => ev.elementos?.length);\n};\n\nconst buildEventoElementosRenumerados = (adicionados: Dispositivo[], referencia: Dispositivo, tipoColado: string): StateEvent => {\n  const refAux = referencia.tipo === tipoColado ? referencia.pai! : referencia;\n  const filhosASeremRenumerados = refAux.filhos.filter(f => isAdicionado(f) && !adicionados.includes(f));\n\n  return {\n    stateType: StateType.ElementoRenumerado,\n    elementos: filhosASeremRenumerados.map(f => createElemento(f)),\n  };\n};\n\nconst isAdicionarNaPosicaoAtual = (articulacaoColada: Articulacao, atual: Dispositivo, referencia: Dispositivo): boolean => {\n  const primeiroDispositivoColado = getDispositivoAndFilhosAsLista(articulacaoColada).filter(d => !['Articulacao', 'Omissis'].includes(d.tipo))[0];\n  return atual === referencia && primeiroDispositivoColado.tipo === referencia.tipo && !referencia.texto && isAdicionado(referencia);\n};\n\nconst buildEventoElementoRemovido = (dispositivo: Dispositivo): StateEvent => {\n  return {\n    stateType: StateType.ElementoRemovido,\n    elementos: [createElementoValidado(dispositivo)],\n  };\n};\n\nconst buildEventoElementoIncluido = (adicionados: Dispositivo[], referencia: Dispositivo): StateEvent => {\n  const elementoAdicionados: Elemento[] = [];\n  const paiRef = referencia.pai!;\n  let referenciaUI: Elemento | undefined;\n\n  if (adicionados.length) {\n    let dispositivos = getDispositivoAndFilhosAsLista(paiRef);\n    let index = dispositivos.indexOf(adicionados[0]);\n    if (index === -1) {\n      dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(paiRef));\n      index = dispositivos.indexOf(adicionados[0]);\n    }\n\n    adicionados.forEach(d => {\n      const elemento = createElemento(d, true, true);\n      elemento.mensagens = validaDispositivo(d);\n      elementoAdicionados.push(elemento);\n    });\n\n    referenciaUI = createElemento(dispositivos[index - 1]);\n  }\n\n  return {\n    stateType: StateType.ElementoIncluido,\n    elementos: elementoAdicionados,\n    referencia: referenciaUI,\n  };\n};\n\nconst buildEventosElementoModificado = (modificados: Dispositivo[]): StateEvent[] => {\n  const eventos: StateEvent[] = [];\n  modificados.forEach(d => {\n    eventos.push({\n      stateType: StateType.ElementoModificado,\n      elementos: [(d.situacao as DispositivoModificado).dispositivoOriginal, createElementoValidado(d)],\n    });\n  });\n  return eventos;\n};\n\nconst processaEventosSuprimidos = (eventos: StateEvent[], modificados: Dispositivo[], suprimidos: Dispositivo[]): void => {\n  const dispositivosProcessar = [] as any;\n\n  // if(modificados.length > 0){\n  //   modificados.forEach(m => {\n  //     dispositivosProcessar.push(m);\n  //   });\n  // }\n\n  if (suprimidos.length > 0) {\n    suprimidos.forEach(s => {\n      dispositivosProcessar.push(s);\n    });\n  }\n\n  if (dispositivosProcessar.length > 0) {\n    const suprimidos: Dispositivo[] = [];\n    dispositivosProcessar.forEach(d => {\n      getDispositivosToElementoSuprimido(d).forEach(d => {\n        if (suprimidos.filter(s => s.id === d.id).length === 0) {\n          suprimidos.push(d);\n        }\n      });\n    });\n    eventos.push({ stateType: StateType.ElementoSuprimido, elementos: suprimidos.map(d => createElementoValidado(d)) });\n  }\n};\n\nconst getDispositivosToElementoSuprimido = (referencia: Dispositivo): Dispositivo[] => {\n  const suprimidos = getDispositivoAndFilhosAsLista(referencia.pai!)\n    .filter(isSuprimido)\n    .map(d => getDispositivoAndFilhosAsLista(d))\n    .flat();\n\n  return suprimidos;\n};\n\nconst buildEventoSituacaoElementoModificada = (dispositivos: Dispositivo[], isColandoEmAlteracaoDeNorma: boolean): StateEvent => {\n  const elementosComSituacaoModificada: Elemento[] = []; // elementos a serem atualizados na UI\n  if (isColandoEmAlteracaoDeNorma) {\n    elementosComSituacaoModificada.push(...getDispositivosEmAlteracaoDeNormaASeremAtualizados(dispositivos).map(d => createElementoValidado(d)));\n  }\n  elementosComSituacaoModificada.push(...getParagrafosDeNumero1(dispositivos).map(d => createElementoValidado(d)));\n  elementosComSituacaoModificada.push(...getArtigosComAlteracaoDeNorma(dispositivos).map(d => createElementoValidado(d)));\n  return {\n    stateType: StateType.SituacaoElementoModificada,\n    elementos: elementosComSituacaoModificada,\n  };\n};\n\nconst buildEventoElementoMarcado = (dispositivos: Dispositivo[]): StateEvent => {\n  return {\n    stateType: StateType.ElementoMarcado,\n    elementos: dispositivos.map(d => createElementoValidado(d)),\n  };\n};\n\nconst getParagrafosDeNumero1 = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return [...new Set(dispositivos.filter(isParagrafo).map(d => d.pai!))].map(art => art.filhos.filter(f => isParagrafo(f) && f.numero === '1')).flat();\n};\n\nconst getArtigosComAlteracaoDeNorma = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos.filter(d => isArtigo(d) && !isArticulacaoAlteracao(d) && d.alteracoes?.filhos.length);\n};\n\nconst colarDispositivoSubstituindo = (\n  dOriginal: Dispositivo,\n  dColado: Dispositivo,\n  modo: ClassificacaoDocumento,\n  isColandoEmAlteracaoDeNorma: boolean,\n  colecaoInfoOmissis: InfoOmissis[] = []\n): Dispositivo => {\n  let refAux = dOriginal;\n\n  if (removeAllHtmlTags(dOriginal.texto) !== removeAllHtmlTags(dColado.texto) && !dColado.texto.match(REGEX_OMISSIS) && dColado.texto.trim()) {\n    dOriginal.situacao = new DispositivoModificado(createElementoValidado(dOriginal));\n    // dOriginal.isDispositivoAlteracao = false;\n    dOriginal.texto = dColado.texto;\n  }\n\n  let omissisImediatamenteAnterior: Dispositivo | undefined;\n\n  const filhosColados = dColado.alteracoes?.filhos || dColado.filhos;\n\n  filhosColados.forEach(fColado => {\n    if (isOmissis(fColado)) {\n      colecaoInfoOmissis.push(montarInfoOmissis(dOriginal, fColado));\n    }\n\n    if (!isOmissis(fColado) || isColandoEmAlteracaoDeNorma) {\n      const fOriginal = buscarDispositivoByIdTratandoParagrafoUnico(getArticulacao(dOriginal), fColado.id!);\n      if (fOriginal) {\n        refAux = fOriginal;\n        colarDispositivoSubstituindo(fOriginal, fColado, modo, isColandoEmAlteracaoDeNorma || isDispositivoAlteracao(fColado), colecaoInfoOmissis);\n      } else {\n        refAux = (omissisImediatamenteAnterior && getUltimoDispositivoDoIntervaloOmitido(omissisImediatamenteAnterior, colecaoInfoOmissis, fColado)) || refAux;\n        colarDispositivoAdicionando(refAux, fColado, isColandoEmAlteracaoDeNorma || isDispositivoAlteracao(fColado), !!omissisImediatamenteAnterior, modo, 'depois');\n        refAux = fColado;\n      }\n    }\n    omissisImediatamenteAnterior = isOmissis(fColado) ? fColado : undefined;\n  });\n\n  if (!isColandoEmAlteracaoDeNorma) {\n    suprimirDispositivosForaDosIntervalosOmitidos(dOriginal, dColado, colecaoInfoOmissis);\n  }\n\n  return dOriginal;\n};\n\nconst getUltimoDispositivoDoIntervaloOmitido = (omissis: Dispositivo, colecaoInfoOmissis: InfoOmissis[], dColado: Dispositivo): Dispositivo | undefined => {\n  return colecaoInfoOmissis\n    .find(i => i.omissis === omissis)\n    ?.omitidos.filter(o => o.tipo === dColado.tipo)\n    .slice(-1)[0];\n};\n\nconst suprimirDispositivosForaDosIntervalosOmitidos = (dOriginal: Dispositivo, dColado: Dispositivo, colecaoInfoOmissis: InfoOmissis[]): void => {\n  const articulacaoColada = getArticulacao(dColado);\n  const dispositivosOriginaisOmitidosNaArticulacaoColada = colecaoInfoOmissis.map(i => i.omitidos).flat();\n\n  dOriginal.filhos.forEach(fOriginal => {\n    const fColado =\n      buscarDispositivoByIdTratandoParagrafoUnico(articulacaoColada, fOriginal.id!) || buscaDispositivoById(articulacaoColada, fOriginal.id!.replace('par1u', 'par1'));\n\n    if (!fColado && !dispositivosOriginaisOmitidosNaArticulacaoColada.find(d => d.id === fOriginal.id)) {\n      getDispositivoAndFilhosAsLista(fOriginal).forEach(d => (d.situacao = new DispositivoSuprimido(createElementoValidado(d))));\n    }\n  });\n};\n\nconst buscarDispositivoByIdTratandoParagrafoUnico = (articulacao: Articulacao, id: string): Dispositivo | undefined => {\n  const d = buscaDispositivoById(articulacao, id);\n  if (d) {\n    return d;\n  } else {\n    if (id.endsWith('par1') || id.split('_').includes('par1')) {\n      return buscaDispositivoById(articulacao, id.replace('_par1_', '_par1u_').replace(/par1$/, 'par1u'));\n    } else {\n      return;\n    }\n  }\n};\n\nconst colarDispositivoAdicionando = (\n  referencia: Dispositivo,\n  dColado: Dispositivo,\n  isColandoEmAlteracaoDeNorma: boolean,\n  isPrecedidoPorOmissis: boolean,\n  modo: ClassificacaoDocumento,\n  posicao?: string\n): Dispositivo => {\n  if (!isOmissis(referencia) && referencia.tiposPermitidosFilhos?.includes(dColado.tipo)) {\n    if (isArtigo(referencia) && isInciso(dColado)) {\n      dColado.pai = (referencia as Artigo).caput;\n      if (isPrecedidoPorOmissis) {\n        (referencia as Artigo).caput!.addFilho(dColado);\n      } else {\n        (referencia as Artigo).caput!.addFilhoOnPosition(dColado, 0);\n      }\n    } else {\n      dColado.pai = referencia;\n      if (isPrecedidoPorOmissis) {\n        referencia.addFilho(dColado);\n      } else {\n        referencia.addFilhoOnPosition(dColado, 0);\n      }\n    }\n  } else if (!isDispositivoAlteracao(referencia) && isDispositivoAlteracao(dColado)) {\n    dColado.pai = referencia.alteracoes;\n    referencia.alteracoes!.addFilhoOnPosition(dColado, 0);\n  } else {\n    dColado.pai = referencia.pai;\n    referencia.pai?.addFilhoOnPosition(dColado, referencia.pai!.indexOf(referencia) + (posicao === 'antes' ? 0 : 1));\n  }\n\n  if (dColado.texto.match(REGEX_OMISSIS) && !isColandoEmAlteracaoDeNorma) {\n    dColado.texto = '';\n  }\n\n  ajustaSituacaoDispositivoAdicionado(dColado, modo);\n\n  if (isColandoEmAlteracaoDeNorma) {\n    dColado.notaAlteracao = isDispositivoCabecaAlteracao(dColado) ? 'NR' : undefined;\n  } else {\n    removeOmissis(dColado);\n  }\n\n  if (!dColado.pai?.tiposPermitidosFilhos?.includes(dColado.tipo) && !isOmissis(dColado)) {\n    throw new Error('Erro ao colar dispositivo adicionado');\n  }\n\n  renumerarEAjustarIds(dColado);\n  return dColado;\n};\n\nconst renumerarEAjustarIds = (dispositivo: Dispositivo): void => {\n  dispositivo.pai?.renumeraFilhos();\n\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => {\n    d.id = buildId(d);\n    if (isArtigo(d)) {\n      (d as Artigo).caput!.id = buildId((d as Artigo).caput!);\n    }\n  });\n};\n\nconst criaAtributosComunsAdicionado = (filho: Dispositivo, modo: ClassificacaoDocumento): void => {\n  filho.situacao = new DispositivoAdicionado();\n  filho.isDispositivoAlteracao = isDispositivoAlteracao(filho);\n  (filho.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  if (filho.isDispositivoAlteracao && !isOmissis(filho)) {\n    (filho.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n  }\n};\n\nconst removeOmissis = (atual: Dispositivo): void => {\n  const omissis = atual.filhos.filter(isOmissis);\n  omissis.forEach(o => o.pai!.removeFilho(o));\n  atual.filhos.forEach(removeOmissis);\n  atual.id = buildId(atual);\n  atual.renumeraFilhos();\n};\n\nconst ajustaSituacaoDispositivoAdicionado = (atual: Dispositivo, modo: ClassificacaoDocumento): void => {\n  criaAtributosComunsAdicionado(atual, modo);\n  atual.filhos.forEach(filho => {\n    criaAtributosComunsAdicionado(filho, modo);\n    filho.filhos && ajustaSituacaoDispositivoAdicionado(filho, modo);\n  });\n\n  if (atual.alteracoes) {\n    criaAtributosComunsAdicionado(atual.alteracoes, modo);\n    atual.alteracoes.filhos.forEach(filho => {\n      criaAtributosComunsAdicionado(filho, modo);\n      filho.filhos && ajustaSituacaoDispositivoAdicionado(filho, modo);\n    });\n  }\n};\n\nconst montarInfoOmissis = (dOriginal: Dispositivo, omissisColado: Dispositivo): InfoOmissis => {\n  const dispositivosDaArvoreDoOmisses = getDispositivoAndFilhosAsLista(isCaput(omissisColado.pai!) ? omissisColado.pai!.pai! : omissisColado.pai!);\n  const dispositivosDaArvoreDoOriginal = getDispositivoAndFilhosAsLista(isArtigo(dOriginal) ? dOriginal : dOriginal.pai!);\n\n  const indexOmissis = dispositivosDaArvoreDoOmisses.indexOf(omissisColado);\n  const anteriorOmissis = dispositivosDaArvoreDoOmisses[indexOmissis - 1];\n  const posteriorOmissis = dispositivosDaArvoreDoOmisses[indexOmissis + 1];\n\n  const anteriorOmissisNaArvoreDoOriginal = dispositivosDaArvoreDoOriginal.find(d => d.id === anteriorOmissis.id)!;\n  const posteriorOmissisNaArvoreDoOriginal = posteriorOmissis && dispositivosDaArvoreDoOriginal.find(d => d.id === posteriorOmissis.id);\n\n  const omitidos = getDispositivosOriginais(dispositivosDaArvoreDoOriginal, anteriorOmissisNaArvoreDoOriginal, posteriorOmissisNaArvoreDoOriginal, posteriorOmissis);\n\n  const prefixos = [...new Set(omitidos.map(d => d.id!.split('_')[0]))];\n  if (prefixos.length > 1) {\n    throw new Error('Erro ao montar lista de dispositivos omitidos');\n  }\n\n  return {\n    omissis: omissisColado,\n    anterior: anteriorOmissis,\n    posterior: posteriorOmissis,\n    omitidos,\n  };\n};\n\nconst getDispositivosOriginais = (\n  dispositivosDaArvoreDoOriginal: Dispositivo[],\n  anteriorOmissisNaArvoreDoOriginal: Dispositivo,\n  posteriorOmissisNaArvoreDoOriginal: Dispositivo | undefined,\n  posteriorOmissisNaArvoreDoOmissis: Dispositivo | undefined\n): Dispositivo[] => {\n  const result: Dispositivo[] = [];\n\n  if (posteriorOmissisNaArvoreDoOriginal) {\n    const indexAnteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === anteriorOmissisNaArvoreDoOriginal.id);\n    const indexPosteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === posteriorOmissisNaArvoreDoOriginal.id);\n    result.push(...dispositivosDaArvoreDoOriginal.filter((_, index) => index > indexAnteriorNaListaOriginal && index < indexPosteriorNaListaOriginal));\n  } else {\n    const indexAnteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === anteriorOmissisNaArvoreDoOriginal.id);\n    result.push(\n      ...dispositivosDaArvoreDoOriginal.filter(\n        (d, index) => index > indexAnteriorNaListaOriginal && (!posteriorOmissisNaArvoreDoOmissis || d.id!.startsWith(posteriorOmissisNaArvoreDoOmissis.pai!.id!))\n      )\n    );\n  }\n\n  return result;\n};\n\nconst getDispositivosEmAlteracaoDeNormaASeremAtualizados = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  const mapa = new Map();\n  dispositivos.forEach(d => {\n    const cabeca = getDispositivoCabecaAlteracao(d);\n    mapa.set(cabeca.id, cabeca);\n  });\n  const cabecas = [...mapa.values()];\n  return cabecas\n    .map(d => {\n      const ultimoFilho = getUltimoFilho(d);\n      const irmaoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(ultimoFilho, d1 => !!(d1.pai && d1.pai === ultimoFilho.pai));\n      return irmaoAnterior ? [irmaoAnterior, ultimoFilho] : [ultimoFilho];\n    })\n    .flat()\n    .filter(d => d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n};\n","import { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { RevisaoJustificativaEnum } from '../util/revisaoUtil';\nimport { retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const ativaDesativaRevisao = (state: any, action: any): State => {\n  const isActive = !state.emRevisao;\n  if (!isActive && action.quantidade > 0) {\n    return {\n      ...retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.INFO,\n        descricao: 'É necessário resolver todas as marcas de revisão' + getMensagemTipoRevisoes(state) + 'para desativar o modo de controle de alterações',\n      }),\n      emRevisao: true,\n    };\n  }\n\n  return {\n    ...state,\n    emRevisao: isActive,\n    ui: {\n      events: [{ stateType: isActive ? StateType.RevisaoAtivada : StateType.RevisaoDesativada }],\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst getMensagemTipoRevisoes = (state: State): string => {\n  const contemRevisoesDispositivos = state.revisoes!.filter(e => e.descricao !== RevisaoJustificativaEnum.JustificativaAlterada).length > 0;\n  const contemRevisoesJustificativa = state.revisoes!.filter(e => e.descricao === RevisaoJustificativaEnum.JustificativaAlterada).length > 0;\n\n  return contemRevisoesDispositivos && contemRevisoesJustificativa\n    ? ' das abas texto e justificação '\n    : contemRevisoesDispositivos\n    ? ' da aba texto '\n    : contemRevisoesJustificativa\n    ? ' da aba justificação '\n    : ' ';\n};\n","import { generateUUID } from './../../util/uuid';\nimport { StateType } from '../../redux/state';\nimport { Elemento } from '../elemento';\nimport { Usuario } from './usuario';\nimport { removeAtributosDoElemento, buildDescricaoRevisao } from '../../redux/elemento/util/revisaoUtil';\n\nexport abstract class Revisao {\n  abstract type: string; // Necessário para identificação da classe no Java\n  id: string;\n  usuario: Usuario;\n  dataHora: string;\n  descricao?: string;\n\n  constructor(usuario: Usuario, dataHora: string, descricao?: string) {\n    this.id = generateUUID();\n    this.usuario = usuario;\n    this.dataHora = dataHora;\n    this.descricao = descricao;\n  }\n}\n\nexport class RevisaoJustificativa extends Revisao {\n  type = 'RevisaoJustificativa';\n  constructor(usuario: Usuario, dataHora: string, descricao: string) {\n    super(usuario, dataHora, descricao);\n  }\n}\n\nexport class RevisaoTextoLivre extends Revisao {\n  type = 'RevisaoTextoLivre';\n  constructor(usuario: Usuario, dataHora: string, descricao: string) {\n    super(usuario, dataHora, descricao);\n  }\n}\n\nexport class RevisaoElemento extends Revisao {\n  type = 'RevisaoElemento';\n  actionType: string;\n  stateType: StateType;\n  elementoAntesRevisao: Partial<Elemento> | undefined;\n  elementoAposRevisao: Partial<Elemento>; // No caso de exclusão de elemento, o elementoAposRevisao terá o mesmo valor que o elementoAntesRevisao\n  idRevisaoElementoPai?: string;\n  idRevisaoElementoPrincipal?: string;\n\n  constructor(\n    actionType: string,\n    stateType: StateType,\n    descricao: string,\n    usuario: Usuario,\n    dataHora: string,\n    elementoAntesRevisao: Partial<Elemento> | undefined,\n    elementoAposRevisao: Partial<Elemento>\n  ) {\n    super(usuario, dataHora, descricao);\n    this.actionType = actionType;\n    this.stateType = stateType;\n    this.elementoAntesRevisao = elementoAntesRevisao;\n    this.elementoAposRevisao = elementoAposRevisao;\n    this.descricao = descricao || buildDescricaoRevisao(this);\n\n    removeAtributosDoElemento(this.elementoAntesRevisao);\n    removeAtributosDoElemento(this.elementoAposRevisao);\n  }\n}\n","export const padTo2Digits = (num: number): string => {\n  return num.toString().padStart(2, '0');\n};\n\nexport const formatDDMMYYYY = (date: Date): string => {\n  return [padTo2Digits(date.getDate()), padTo2Digits(date.getMonth() + 1), date.getFullYear()].join('/');\n};\n\nexport const formatDateTime = (date: Date): string => {\n  const data = [date.getFullYear(), padTo2Digits(date.getMonth() + 1), padTo2Digits(date.getDate())].join('-');\n  const hora = [padTo2Digits(date.getHours()), padTo2Digits(date.getMinutes()), padTo2Digits(date.getSeconds())].join(':');\n  return `${data} ${hora}`;\n};\n","import { ElementoAction } from '.';\n\nexport const ATUALIZAR_USUARIO = 'ATUALIZAR_USUARIO';\n\nexport class AtualizarUsuario implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Atualizar o usuário da revisão.';\n  }\n\n  execute(usuario: any): any {\n    return {\n      type: ATUALIZAR_USUARIO,\n      usuario: usuario,\n    };\n  }\n}\n\nexport const atualizarUsuarioAction = new AtualizarUsuario();\n","import { getRevisoesElemento, isRevisaoDeExclusao, isRevisaoDeRestauracao } from './../util/revisaoUtil';\nimport { createElemento } from './../../../model/elemento/elementoUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { Elemento } from '../../../model/elemento';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport {\n  // findRevisaoByElementoUuid2,\n  findRevisaoByElementoUuid,\n  isRevisaoDeTransformacao,\n  identificarRevisaoElementoPai,\n  existeRevisaoParaElementos,\n  buildDescricaoRevisaoFromStateType,\n  removeAtributosDoElemento,\n  atualizaReferenciaElementoAnteriorSeNecessario,\n  isRevisaoPrincipal,\n  isRevisaoDeMovimentacao,\n  findRevisoesByElementoUuid2,\n  findRevisoesByElementoLexmlId,\n  isRevisaoDeModificacao,\n  associarRevisoesAosElementosDosEventos,\n} from '../util/revisaoUtil';\nimport { aceitarRevisaoAction } from '../../../model/lexml/acao/aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from '../../../model/lexml/acao/rejeitarRevisaoAction';\nimport { APLICAR_ALTERACOES_EMENDA } from '../../../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { ATUALIZAR_USUARIO } from '../../../model/lexml/acao/atualizarUsuarioAction';\nimport { ABRIR_ARTICULACAO } from '../../../model/lexml/acao/openArticulacaoAction';\nimport { VALIDAR_ARTICULACAO } from '../../../model/lexml/acao/validarArticulacaoAction';\nimport { getEvento } from '../evento/eventosUtil';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\n\nexport const atualizaRevisao = (state: State, actionType: any): State => {\n  const numElementos = state.ui?.events.map(se => se.elementos).flat().length;\n  if ([ABRIR_ARTICULACAO, ATUALIZAR_USUARIO, VALIDAR_ARTICULACAO].includes(actionType) || !state.emRevisao || !actionType || !numElementos) {\n    return state;\n  } else if (actionType === APLICAR_ALTERACOES_EMENDA) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (UNDO === actionType && (state.past?.length || 0) < state.numEventosPassadosAntesDaRevisao!) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (REDO === actionType && (state.past?.length || 0) <= state.numEventosPassadosAntesDaRevisao!) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (state.ui?.message?.tipo === TipoMensagem.ERROR) {\n    return state;\n  }\n\n  let revisoes: Revisao[] = [];\n  if ((UNDO !== actionType || !isUndoDeRevisaoAceitaOuRejeitada(state)) && !isAcaoDeRevisaoRejeitada(state)) {\n    revisoes.push(...processaEventosDeSupressao(state, actionType));\n    revisoes.push(...processaEventosDeModificacao(state, actionType));\n    revisoes.push(...processaEventosDeRestauracao(state, actionType));\n    // revisoes.push(...processaEventosDeRenumeracao(state, actionType, elementoAntesAcao));\n\n    if (isAcaoMoverOuTransformar(state)) {\n      revisoes.push(...processaEventosDeMoverOuTransformar(state, actionType));\n    } else {\n      revisoes.push(...processaEventosDeInclusao(state, actionType));\n      revisoes.push(...processaEventosDeRemocao(state, actionType));\n    }\n  }\n  revisoes = identificarRevisaoElementoPai(state, revisoes);\n\n  if (existeEventoDeInclusaoOuExclusao(state)) {\n    atualizarLexmlIdEmElementosDeRevisoes(state);\n    atualizarPosicaoDeElementosEmRevisoes(state);\n  }\n\n  state.revisoes!.push(...revisoes);\n\n  associarRevisoesAosElementosDosEventos(state);\n\n  adicionarOpcoesAoMenu(state);\n\n  return state;\n};\n\nconst isUndoDeRevisaoAceitaOuRejeitada = (state: State): boolean => {\n  return !!state.future?.length && [StateType.RevisaoAceita, StateType.RevisaoRejeitada].includes(state.future[state.future.length - 1][0].stateType);\n};\n\nconst isAcaoDeRevisaoRejeitada = (state: State): boolean => !!state.ui?.events.some(ev => ev.stateType === StateType.RevisaoRejeitada);\n\nconst processaEventosDeSupressao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoSuprimido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao && revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      const d = getDispositivoFromElemento(state.articulacao!, e)!;\n      const eAux = revisao?.elementoAntesRevisao || (JSON.parse(JSON.stringify(d.situacao.dispositivoOriginal)) as Elemento);\n      result.push(new RevisaoElemento(actionType, StateType.ElementoSuprimido, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      if (revisao) {\n        revisoesParaRemover.push(revisao);\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeModificacao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoModificado);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao) {\n      if ((isRevisaoDeModificacao(revisao) || isRevisaoDeRestauracao(revisao)) && revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, e)) {\n        revisoesParaRemover.push(revisao);\n      }\n      revisao.elementoAposRevisao = JSON.parse(JSON.stringify(e));\n      state.usuario && (revisao.usuario = state.usuario);\n      revisao.dataHora = formatDateTime(new Date());\n    } else {\n      const eAux = getElementoAntesModificacao(state, e);\n      // result.push(new RevisaoElemento(actionType, StateType.ElementoModificado, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      if (!isAjusteTextoOmitido(eAux, e)) {\n        result.push(new RevisaoElemento(actionType, StateType.ElementoModificado, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst isAjusteTextoOmitido = (eAntesRevisao: Elemento | undefined, eAposRevisao: Elemento): boolean => {\n  // O texto omitido do dispositivo original pode possuir um span com a classe texto__omissis, que não deve ser considerado para fins de comparação de modificação.\n  return !!(\n    eAposRevisao.tipo === eAntesRevisao?.tipo &&\n    eAposRevisao.conteudo?.texto?.includes(TEXTO_OMISSIS) &&\n    eAntesRevisao?.conteudo?.texto?.includes(TEXTO_OMISSIS) &&\n    eAposRevisao.conteudo?.texto?.replace('<span class=\"texto__omissis\">', '').replace('</span>', '') === eAntesRevisao?.conteudo?.texto\n  );\n};\n\nconst processaEventosDeMoverOuTransformar = (state: State, actionType: any): Revisao[] => {\n  const incluidos = getElementosFromEventos(getEventos(state, StateType.ElementoIncluido));\n  const removidos = getElementosFromEventos(getEventos(state, StateType.ElementoRemovido));\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  const montarNovaRevisao = (eAntesRevisao: Elemento, eAposRevisao: Elemento): RevisaoElemento => {\n    const revInclusao = new RevisaoElemento(\n      actionType,\n      StateType.ElementoIncluido,\n      '',\n      state.usuario!,\n      formatDateTime(new Date()),\n      eAntesRevisao ? JSON.parse(JSON.stringify(eAntesRevisao)) : undefined,\n      JSON.parse(JSON.stringify(eAposRevisao))\n    );\n\n    revInclusao.descricao = buildDescricaoRevisaoFromStateType(revInclusao, eAposRevisao);\n    // revExclusao.idRevisaoAssociada = revInclusao.id;\n    // revInclusao.idRevisaoAssociada = revExclusao.id;\n    // result.push(revExclusao);\n    return revInclusao;\n  };\n\n  if (existeRevisaoParaElementos(state.revisoes, removidos)) {\n    removidos.forEach((e, index) => {\n      const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid)!;\n      // A revisão pode não existir se houver dispositivo removido após a movimentação em modo de revisão\n      // Exemplo: moveu inciso com alíneas, removeu alínea e depois moveu novamente o inciso\n      if (!revisao) {\n        result.push(montarNovaRevisao(e, incluidos[index]));\n      } else if (isRevisaoDeTransformacao(revisao) && revisaoDeElementoComMesmoLexmlIdRotuloEConteudo(revisao, incluidos[index])) {\n        revisoesParaRemover.push(...findRevisoesByElementoLexmlId(state.revisoes, e.lexmlId));\n      } else if (revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, incluidos[index]) && revisao.elementoAntesRevisao!.uuid !== e.uuid) {\n        revisoesParaRemover.push(...findRevisoesByElementoUuid2(state.revisoes, incluidos[index].uuid2));\n      } else {\n        state.revisoes = state.revisoes?.filter(r => r.id !== revisao.id);\n\n        // result.push(montarNovaRevisao(revisao.elementoAntesRevisao! as Elemento, incluidos[index]));\n\n        revisao.stateType = StateType.ElementoIncluido;\n        revisao.actionType = actionType;\n        revisao.dataHora = formatDateTime(new Date());\n        revisao.elementoAposRevisao = JSON.parse(JSON.stringify(incluidos[index]));\n        removeAtributosDoElemento(revisao.elementoAposRevisao);\n        revisao.usuario = state.usuario!;\n        revisao.descricao = buildDescricaoRevisaoFromStateType(revisao, incluidos[index]);\n\n        revisao.idRevisaoElementoPai = revisoesParaRemover.find(r => r.id === revisao.idRevisaoElementoPai) ? undefined : revisao.idRevisaoElementoPai;\n        revisao.idRevisaoElementoPrincipal = revisoesParaRemover.find(r => r.id === revisao.idRevisaoElementoPrincipal) ? undefined : revisao.idRevisaoElementoPrincipal;\n\n        result.push(revisao);\n      }\n    });\n  } else {\n    removidos.forEach((e, index) => result.push(montarNovaRevisao(e, incluidos[index])));\n  }\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeInclusao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoIncluido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n  const elementosIncluidos = getElementosFromEventos(eventos);\n  const uuidsElementosIncluidos = elementosIncluidos.map(e => e.uuid);\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      if (!uuidsElementosIncluidos.includes(e.hierarquia?.pai?.uuid)) {\n        atualizaReferenciaElementoAnteriorSeNecessario(state.articulacao!, state.revisoes, e, 'inclusao');\n      }\n      result.push(new RevisaoElemento(actionType, StateType.ElementoIncluido, '', state.usuario!, formatDateTime(new Date()), undefined, JSON.parse(JSON.stringify(e))));\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeRemocao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoRemovido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n  const elementosRemovidos = getElementosFromEventos(eventos);\n  const uuidsElementosRemovidos = elementosRemovidos.map(e => e.uuid);\n\n  elementosRemovidos.forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao && (isRevisaoPrincipal(revisao) || !isRevisaoDeMovimentacao(revisao))) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      if (!uuidsElementosRemovidos.includes(e.hierarquia?.pai?.uuid)) {\n        atualizaReferenciaElementoAnteriorSeNecessario(state.articulacao!, state.revisoes, e, 'exclusao');\n      }\n      const eAux = JSON.parse(JSON.stringify(e)) as Elemento;\n      result.push(new RevisaoElemento(actionType, StateType.ElementoRemovido, '', state.usuario!, formatDateTime(new Date()), eAux, { ...eAux, acoesPossiveis: [] }));\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeRestauracao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoRestaurado);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  eventos.forEach(se => {\n    const elementoAtual = se.elementos![1];\n    const elementoAnterior = se.elementos![0];\n    const eAux = elementoAtual || elementoAnterior;\n\n    const revisao = findRevisaoByElementoUuid(state.revisoes, elementoAnterior.uuid);\n    if (revisao && revisao.elementoAntesRevisao?.descricaoSituacao === eAux.descricaoSituacao && revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, eAux)) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      const d = getDispositivoFromElemento(state.articulacao!, elementoAnterior)!;\n      const eAntesRevisao = !elementoAtual ? d.situacao.dispositivoOriginal : elementoAnterior;\n      const eAposRevisao = createElemento(d);\n      result.push(\n        new RevisaoElemento(\n          actionType,\n          StateType.ElementoRestaurado,\n          '',\n          state.usuario!,\n          formatDateTime(new Date()),\n          JSON.parse(JSON.stringify(eAntesRevisao)),\n          JSON.parse(JSON.stringify(eAposRevisao))\n        )\n      );\n      if (revisao) {\n        revisoesParaRemover.push(revisao);\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst getEventos = (state: State, stateType: StateType): StateEvent[] => {\n  return state.ui?.events.filter(se => se.stateType === stateType) || [];\n};\n\nconst getElementosFromEventos = (eventos: StateEvent[]): Elemento[] => {\n  return removeDuplicidades(eventos.map(se => se.elementos || []).flat());\n};\n\nconst removeDuplicidades = (elementos: Elemento[]): Elemento[] => {\n  const map = new Map<number, Elemento>();\n  const result: Elemento[] = [];\n  elementos.reverse().forEach(e => {\n    if (!map.has(e.uuid!)) {\n      map.set(e.uuid!, e);\n      result.unshift(e);\n    }\n  });\n  return result;\n};\n\nconst revisaoDeElementoComMesmoLexmlIdRotuloEConteudo = (r: RevisaoElemento, e: Elemento): boolean => {\n  return r.elementoAntesRevisao?.lexmlId === e.lexmlId && r.elementoAntesRevisao?.rotulo === e.rotulo && r.elementoAntesRevisao?.conteudo?.texto === e.conteudo?.texto;\n};\n\nconst revisaoDeElementoComMesmoUuid2RotuloEConteudo = (r: RevisaoElemento, e: Elemento): boolean => {\n  return (\n    r.elementoAntesRevisao?.uuid2 === e.uuid2 &&\n    r.elementoAntesRevisao?.rotulo === e.rotulo &&\n    r.elementoAntesRevisao?.conteudo?.texto === e.conteudo?.texto &&\n    r.elementoAntesRevisao?.hierarquia?.pai?.lexmlId === e.hierarquia?.pai?.lexmlId // Checa se elementos estão na mesma hierarquia\n  );\n};\n\nconst isAcaoMoverOuTransformar = (state: State): boolean => {\n  const incluidos = getEventos(state, StateType.ElementoIncluido);\n  const removidos = getEventos(state, StateType.ElementoRemovido);\n  return !!incluidos.length && incluidos.length === removidos.length;\n};\n\nconst getElementoAntesModificacao = (state: State, elemento: Elemento): Elemento | undefined => {\n  const eventos = [...state.past!].pop() as any as StateEvent[];\n  const modificacoes = eventos.filter(se => se.stateType === StateType.ElementoModificado && se.elementos?.some(e => e.uuid === elemento.uuid));\n  const modificacao = modificacoes.pop();\n  return modificacao ? JSON.parse(JSON.stringify(modificacao.elementos![0])) : undefined;\n};\n\nconst adicionarOpcoesAoMenu = (state: State): void => {\n  state.ui?.events.forEach(se =>\n    se.elementos?.filter(Boolean).forEach(e => {\n      if (e.revisao && !(e.revisao as RevisaoElemento).idRevisaoElementoPrincipal) {\n        e.acoesPossiveis = se.stateType === StateType.ElementoRemovido ? [] : [...(e.acoesPossiveis || [])];\n        !e.acoesPossiveis.includes(aceitarRevisaoAction) && e.acoesPossiveis.push(aceitarRevisaoAction);\n        !e.acoesPossiveis.includes(rejeitarRevisaoAction) && e.acoesPossiveis.push(rejeitarRevisaoAction);\n      }\n    })\n  );\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst existeEventoDeInclusaoOuExclusao = (state: State): boolean => {\n  const eventos = state.ui?.events || [];\n  return eventos.some(se => se.stateType === StateType.ElementoIncluido || se.stateType === StateType.ElementoRemovido);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst atualizarLexmlIdEmElementosDeRevisoes = (state: State): void => {\n  let revisoes = getRevisoesElemento(state.revisoes || [])\n    .filter(r => r.elementoAposRevisao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n    .filter(r => !isRevisaoDeExclusao(r));\n\n  revisoes.forEach(r => {\n    const d = getDispositivoFromElemento(state.articulacao!, r.elementoAposRevisao);\n    if (d) {\n      const e = createElemento(d, false, true);\n      r.elementoAposRevisao.lexmlId = d.id;\n      r.elementoAposRevisao.hierarquia!.pai!.lexmlId = d.pai!.id;\n      r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura));\n\n      if (r.elementoAntesRevisao) {\n        r.elementoAntesRevisao.lexmlId = d.id;\n        r.elementoAntesRevisao.hierarquia!.pai!.lexmlId = d.pai!.id;\n        r.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura));\n      }\n    }\n  });\n\n  revisoes = getRevisoesElemento(state.revisoes || []).filter(r => isRevisaoPrincipal(r) && isRevisaoDeExclusao(r));\n  revisoes.forEach(r => {\n    const d = getDispositivoFromElemento(state.articulacao!, r.elementoAposRevisao.hierarquia!.pai!)!;\n    r.elementoAposRevisao.hierarquia!.pai!.lexmlId = d.id;\n  });\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst atualizarPosicaoDeElementosEmRevisoes = (state: State): void => {\n  const revisoes = getRevisoesElemento(state.revisoes || []).filter(r => isRevisaoPrincipal(r) && isRevisaoDeExclusao(r));\n  atualizarPosicaoDeElementosEmRevisoesByEvento(revisoes, getEvento(state.ui!.events, StateType.ElementoIncluido));\n  atualizarPosicaoDeElementosEmRevisoesByEvento(revisoes, getEvento(state.ui!.events, StateType.ElementoRemovido));\n};\n\nconst atualizarPosicaoDeElementosEmRevisoesByEvento = (revisoes: RevisaoElemento[] = [], evento: StateEvent | undefined): void => {\n  if (!evento) {\n    return;\n  }\n  const fator = evento.stateType === StateType.ElementoIncluido ? 1 : -1;\n  const fnCondicaoInclusao = (e: Elemento, posicaoAtual: number): boolean => e.hierarquia!.posicao! <= posicaoAtual;\n  const fnCondicaoExclusao = (e: Elemento, posicaoAtual: number): boolean => e.hierarquia!.posicao! < posicaoAtual;\n  const fnCondicao2 = evento.stateType === StateType.ElementoIncluido ? fnCondicaoInclusao : fnCondicaoExclusao;\n  revisoes.forEach(r => {\n    const lexmlIdPai = r.elementoAposRevisao.hierarquia!.pai!.lexmlId;\n    const posicaoAtual = r.elementoAposRevisao.hierarquia!.posicao!;\n    const deslocamento = evento.elementos!.filter(e => e.hierarquia?.pai?.lexmlId === lexmlIdPai && fnCondicao2(e, posicaoAtual)).length * fator;\n    r.elementoAposRevisao.hierarquia!.posicao! += deslocamento;\n  });\n};\n","import { isRevisaoPrincipal, mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes } from './../util/revisaoUtil';\nimport { createElementoValidado, getDispositivoFromElemento } from './../../../model/elemento/elementoUtil';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { findRevisaoByElementoUuid, getRevisoesElementoAssociadas, isRevisaoDeExclusao } from '../util/revisaoUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const aceitaRevisao = (state: any, action: any): State => {\n  if (action.revisao || action.elemento) {\n    return aceitarRevisao(state, action);\n  } else {\n    return aceitarRevisaoEmLote(state, state.revisoes);\n  }\n};\n\nexport const aceitarRevisaoEmLote = (state: State, revisoes: Revisao[] = []): State => {\n  const tempStates: State[] = [];\n  revisoes.filter(isRevisaoPrincipal).forEach((revisao: Revisao) => {\n    const tempState = { ...state, past: [], present: [], future: [], ui: { ...state.ui, events: [] } };\n    tempStates.push(aceitarRevisao(tempState, { revisao }));\n  });\n\n  const tempState = mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes(state, tempStates, revisoes, 'aceitar');\n  tempState.revisoes = state.revisoes?.filter(r => !isRevisaoPrincipal(r));\n  return tempState;\n};\n\nconst aceitarRevisao = (state: any, action: any): State => {\n  const revisao = (action.revisao || findRevisaoByElementoUuid(state.revisoes, action.elemento.uuid)) as RevisaoElemento;\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const idsRevisoesAssociadas = revisoesAssociadas.map(r => r.id);\n\n  const elementos = revisoesAssociadas.map(r => {\n    const e = isRevisaoDeExclusao(r) ? r.elementoAposRevisao : createElementoValidado(getDispositivoFromElemento(state.articulacao, r.elementoAposRevisao)!);\n    e.revisao = JSON.parse(JSON.stringify(r));\n    return e as Elemento;\n  });\n\n  const elementosValidados = elementos\n    .map(e => getDispositivoFromElemento(state.articulacao, e))\n    .filter(Boolean)\n    .map(d => createElementoValidado(d!));\n\n  const events: StateEvent[] = [{ stateType: StateType.RevisaoAceita, elementos }];\n\n  if (elementosValidados.length) {\n    events.push({ stateType: StateType.ElementoValidado, elementos: elementosValidados });\n  }\n\n  const revisoes = state.revisoes.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n  if (isRevisaoDeExclusao(revisao)) {\n    // Se está aceitando uma revisão de exclusão, é preciso atualizar os elementos de outras revisões de exclusão que referenciam o elemento REALMENTE excluído durante a aceitação\n    atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao(revisoes, revisoesAssociadas);\n  }\n\n  return {\n    ...state,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n    revisoes: state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id)),\n  };\n};\n\nconst atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao = (revisoes: Revisao[], revisoesAssociadas: RevisaoElemento[]): void => {\n  const revisaoPrincipal = revisoesAssociadas[0];\n  const ultimaRevisao = revisoesAssociadas[revisoesAssociadas.length - 1];\n\n  const revisao = revisoes.find(r => (r as RevisaoElemento).elementoAposRevisao?.elementoAnteriorNaSequenciaDeLeitura?.uuid === ultimaRevisao.elementoAposRevisao.uuid);\n  if (revisao) {\n    (revisao as RevisaoElemento).elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = revisaoPrincipal.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura;\n    (revisao as RevisaoElemento).elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = revisaoPrincipal.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura;\n  }\n};\n","import { isRevisaoDeModificacao, mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes } from './../util/revisaoUtil';\nimport { isCaput } from './../../../model/dispositivo/tipo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport {\n  createElemento,\n  createElementoValidado,\n  criaListaElementosAfinsValidados,\n  getDispositivoFromElemento,\n  listaDispositivosRenumerados,\n} from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAnteriorNaSequenciaDeLeitura, getUltimoFilho, isAdicionado } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getElementosRemovidosEIncluidos, unificarEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport {\n  findRevisaoByElementoUuid,\n  findRevisaoDeExclusaoComElementoAnteriorApontandoPara,\n  findUltimaRevisaoDoGrupo,\n  getRevisoesElementoAssociadas,\n  isRevisaoDeMovimentacao,\n  isRevisaoPrincipal,\n} from '../util/revisaoUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { incluir } from '../util/undoRedoReducerUtil';\nimport { agrupaElemento } from './agrupaElemento';\nimport { atualizaTextoElemento } from './atualizaTextoElemento';\nimport { removeElemento } from './removeElemento';\nimport { restauraElemento } from './restauraElemento';\nimport { suprimeElemento } from './suprimeElemento';\n\nexport const rejeitaRevisao = (state: any, action: any): State => {\n  if (action.revisao || action.elemento) {\n    return rejeitarRevisao(state, action);\n  } else {\n    return rejeitarRevisaoEmLote(state, state.revisoes);\n  }\n};\n\nexport const rejeitarRevisaoEmLote = (state: State, revisoes: Revisao[] = []): State => {\n  const tempStates: State[] = [];\n  revisoes.filter(isRevisaoPrincipal).forEach((revisao: Revisao) => {\n    const tempState = { ...state, past: [], present: [], future: [], ui: { ...state.ui, events: [] } };\n    tempStates.push(rejeitarRevisao(tempState, { revisao }));\n  });\n  const tempState = mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes(state, tempStates, revisoes, 'rejeitar');\n  tempState.revisoes = state.revisoes?.filter(r => !isRevisaoPrincipal(r));\n  return tempState;\n};\n\nexport const rejeitarRevisao = (state: any, action: any): State => {\n  const revisao = (action.revisao || findRevisaoByElementoUuid(state.revisoes, action.elemento.uuid)) as RevisaoElemento;\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const idsRevisoesAssociadas = revisoesAssociadas.map(r => r.id);\n\n  const elementos = revisoesAssociadas.map(r => {\n    r.elementoAposRevisao.revisao = JSON.parse(JSON.stringify(r));\n    return r.elementoAposRevisao as Elemento;\n  });\n\n  const eventos: StateEvent[] = [{ stateType: StateType.RevisaoRejeitada, elementos }];\n\n  if (isRevisaoDeMovimentacao(revisao)) {\n    // Elementos com revisão de movimentação também podem ter revisão de exclusão (desde que não seja o elemento principal)\n    // Nesse caso, a revisão de exclusão deve ser removida do state (não precisa ser rejeitada)\n    const uuid2Elementos = elementos.map(e => e.uuid2);\n    const outrasRevisoes = state.revisoes\n      .filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id))\n      .filter((r: Revisao) => uuid2Elementos.includes((r as RevisaoElemento).elementoAposRevisao.uuid2)) as RevisaoElemento[];\n    idsRevisoesAssociadas.push(...outrasRevisoes.map(r => r.id));\n\n    // Desfaz as ações feitas após a movimentação do dispositivo e que geraram revisões adicionais\n    processaRevisoes(state, outrasRevisoes.filter(isRevisaoPrincipal));\n\n    const elementosDeOutrasRevisoes = outrasRevisoes.map(r => {\n      r.elementoAposRevisao.revisao = JSON.parse(JSON.stringify(r));\n      return r.elementoAposRevisao as Elemento;\n    });\n\n    eventos.push({ stateType: StateType.RevisaoAdicionalRejeitada, elementos: elementosDeOutrasRevisoes });\n  }\n\n  const tempState = { ...state, past: [] };\n\n  eventos.push(...processaRevisoes(tempState, revisoesAssociadas.filter(isRevisaoPrincipal)));\n  const eventosPast = isRevisaoDeModificacao(revisao) ? montarEventosDeModificacaoParaHistorico(eventos, revisao, state) : eventos;\n\n  return {\n    ...state,\n    past: buildPast(state, eventosPast),\n    present: eventos,\n    future: [],\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n    revisoes: state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id)),\n  };\n};\n\nconst montarEventosDeModificacaoParaHistorico = (eventos: StateEvent[], revisao: RevisaoElemento, state: State): StateEvent[] => {\n  // O PASSADO de evento de modificação (StateType.ElementoModificado) deve possuir 2 itens no array elemento:\n  // Item 0: valor a ser retornado para a articulação em caso de UNDO\n  // Item 1: valor a ser retornado para a articulação em caso de REDO\n  const eventosPast = eventos.filter(ev => ev.stateType !== StateType.ElementoModificado) as StateEvent[];\n  const dispositivo = getDispositivoFromElemento(state.articulacao!, revisao.elementoAposRevisao)!;\n  eventosPast.push({ stateType: StateType.ElementoModificado, elementos: [revisao.elementoAposRevisao! as Elemento, revisao.elementoAntesRevisao as Elemento] });\n  eventosPast.push({ stateType: StateType.ElementoValidado, elementos: criaListaElementosAfinsValidados(dispositivo, true) });\n  return eventosPast;\n};\n\nconst processaRevisoes = (state: State, revisoes: RevisaoElemento[]): StateEvent[] => {\n  const eventos: StateEvent[] = [];\n\n  revisoes.forEach(r => {\n    r.stateType === StateType.ElementoSuprimido && eventos.push(...rejeitaSupressao(state, r));\n    r.stateType === StateType.ElementoModificado && eventos.push(...rejeitaModificacao(state, r));\n    r.stateType === StateType.ElementoRestaurado && eventos.push(...rejeitaRestauracao(state, r));\n    r.stateType === StateType.ElementoIncluido && eventos.push(...rejeitaInclusao(state, r));\n    r.stateType === StateType.ElementoRemovido && eventos.push(...rejeitaExclusao(state, r));\n  });\n\n  return unificarEvento(state, eventos, StateType.ElementoRenumerado);\n};\n\nconst rejeitaSupressao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  return restauraElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n};\n\nconst rejeitaModificacao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  return atualizaTextoElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n};\n\nconst rejeitaRestauracao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  if (revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    return suprimeElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n  } else if (revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return atualizaTextoElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n  }\n  return [];\n};\n\nconst rejeitaInclusao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  const dispositivoASerRemovido = getDispositivoFromElemento(state.articulacao!, revisao.elementoAposRevisao)!;\n  const dispositivoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(dispositivoASerRemovido, d => !isCaput(d));\n\n  const result = removeElemento(state, { atual: revisao.elementoAposRevisao, isRejeitandoRevisao: true }).ui?.events || [];\n\n  // Se existe elemento antes da revisão, então reinclui elemento (havia sido excluído por se tratar de uma movimentação)\n  if (revisao.elementoAntesRevisao) {\n    result.push(...rejeitaExclusao(state, revisao));\n  }\n\n  const ultimaRevisaoDoGrupo = findUltimaRevisaoDoGrupo(state.revisoes, revisao);\n  const rAux2 = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(state.revisoes, ultimaRevisaoDoGrupo.elementoAposRevisao);\n\n  if (rAux2) {\n    const e = dispositivoAnterior ? createElemento(dispositivoAnterior) : undefined;\n    rAux2.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = e ? JSON.parse(JSON.stringify(e)) : undefined;\n    rAux2.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = e ? JSON.parse(JSON.stringify(e)) : undefined;\n  }\n\n  return result;\n};\n\nconst rejeitaExclusao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const evento: StateEvent = { stateType: StateType.ElementoRemovido, elementos: revisoesAssociadas.map(r => r.elementoAntesRevisao as Elemento) };\n  const eventoAux: StateEvent = { stateType: StateType.ElementoIncluido, elementos: [] };\n\n  const result: StateEvent[] = [];\n\n  const elementoASerIncluido = revisao.elementoAposRevisao;\n\n  if (elementoASerIncluido.agrupador) {\n    let tempState: State = { ...state, past: [], present: [], future: [], ui: { events: [] } };\n    tempState = agrupaElemento(tempState, {\n      atual: elementoASerIncluido.elementoAnteriorNaSequenciaDeLeitura,\n      novo: {\n        tipo: elementoASerIncluido.tipo,\n        uuid: elementoASerIncluido.uuid,\n        posicao: 'depois',\n        manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas,\n      },\n    });\n\n    result.push(...tempState.ui!.events!);\n  } else {\n    result.push({ stateType: StateType.ElementoIncluido, elementos: incluir(state, evento, eventoAux) });\n  }\n\n  atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao(state, revisao, result[0].elementos![0]);\n\n  const dispositivosRenumerados = listaDispositivosRenumerados(getDispositivoFromElemento(state.articulacao!, result[0].elementos![0])!).filter(isAdicionado);\n  result.push({ stateType: StateType.ElementoRenumerado, elementos: dispositivosRenumerados.map(d => createElemento(d)) });\n\n  result.push({ stateType: StateType.SituacaoElementoModificada, elementos: getElementosAlteracaoASeremAtualizados(state.articulacao!, getElementosRemovidosEIncluidos(result)) });\n  result.push({ stateType: StateType.ElementoValidado, elementos: montarListaElementosValidados(state, result) });\n\n  return result.filter(ev => ev.elementos?.length);\n};\n\nconst atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao = (state: State, revisao: RevisaoElemento, primeiroElementoReincluido: Elemento): void => {\n  // Atualizar referência\n  const dUltimoFilho = getUltimoFilho(getDispositivoFromElemento(state.articulacao!, primeiroElementoReincluido)!);\n  const eUltimoFilho = createElemento(dUltimoFilho, false, true);\n  const revisaoASerAtualizada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(\n    state.revisoes?.filter(r => r.id !== revisao.id),\n    eUltimoFilho\n  );\n\n  if (revisaoASerAtualizada && revisaoASerAtualizada.id !== revisao.id) {\n    // Atualiza referência\n    revisaoASerAtualizada.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(eUltimoFilho));\n    revisaoASerAtualizada.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(eUltimoFilho));\n\n    // // Atualiza posição\n    // if (isAtualizarPosicaoDeElementoExcluido(primeiroElementoReincluido, revisaoASerAtualizada.elementoAposRevisao)) {\n    //   revisaoASerAtualizada.elementoAposRevisao.hierarquia!.posicao = primeiroElementoReincluido.hierarquia!.posicao! + 1;\n    //   revisaoASerAtualizada.elementoAntesRevisao!.hierarquia!.posicao = primeiroElementoReincluido.hierarquia!.posicao! + 1;\n    // }\n  }\n};\n\nconst montarListaElementosValidados = (state: State, result: StateEvent[]): Elemento[] => {\n  return result\n    .filter(ev => ev.stateType === StateType.ElementoIncluido)\n    .map(ev => ev.elementos || [])\n    .flat()\n    .map(e => getDispositivoFromElemento(state.articulacao!, e)!)\n    .map(d => createElementoValidado(d));\n};\n","import { ElementoAction } from '.';\nimport { Revisao } from '../../revisao/revisao';\n\nexport const LIMPAR_REVISAO = 'LIMPAR_REVISAO';\n\nexport class LimparRevisao implements ElementoAction {\n  tipo?: string;\n\n  execute(): any {\n    const revisoes: Revisao[] = [];\n    return {\n      type: LIMPAR_REVISAO,\n      revisoes,\n    };\n  }\n}\n\nexport const limparRevisaoAction = new LimparRevisao();\n","import { ADICIONAR_AGRUPADOR_ARTIGO } from './../../../model/lexml/acao/adicionarAgrupadorArtigoAction';\nimport { ADICIONAR_ALERTA } from '../../../model/alerta/acao/adicionarAlerta';\nimport { LIMPAR_ALERTAS } from '../../../model/alerta/acao/limparAlertas';\nimport { REMOVER_ALERTA } from '../../../model/alerta/acao/removerAlerta';\nimport { ASSISTENTE_ALTERACAO } from '../../../model/lexml/acao/adicionarAlteracaoComAssistenteAction';\nimport { ADICIONAR_ELEMENTO } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { ADICIONAR_ELEMENTOS_FROM_CLIPBOARD } from '../../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { AGRUPAR_ELEMENTO } from '../../../model/lexml/acao/agruparElementoAction';\nimport { APLICAR_ALTERACOES_EMENDA } from '../../../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { ATUALIZAR_ELEMENTO } from '../../../model/lexml/acao/atualizarElementoAction';\nimport { ATUALIZAR_REFERENCIA_ELEMENTO } from '../../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { ATUALIZAR_TEXTO_ELEMENTO } from '../../../model/lexml/acao/atualizarTextoElementoAction';\nimport { AUTO_FIX } from '../../../model/lexml/acao/autoFixAction';\nimport { ELEMENTO_SELECIONADO } from '../../../model/lexml/acao/elementoSelecionadoAction';\nimport { INFORMAR_DADOS_ASSISTENTE } from '../../../model/lexml/acao/informarDadosAssistenteAction';\nimport { INFORMAR_EXISTENCIA_NA_NORMA } from '../../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { INFORMAR_NORMA } from '../../../model/lexml/acao/informarNormaAction';\nimport { MOVER_ELEMENTO_ABAIXO } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { MOVER_ELEMENTO_ACIMA } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { ABRIR_ARTICULACAO } from '../../../model/lexml/acao/openArticulacaoAction';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { REMOVER_ELEMENTO } from '../../../model/lexml/acao/removerElementoAction';\nimport { RENUMERAR_ELEMENTO } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { SHIFT_TAB } from '../../../model/lexml/acao/shiftTabAction';\nimport { SUPRIMIR_AGRUPADOR } from '../../../model/lexml/acao/suprimirAgrupador';\nimport { SUPRIMIR_ELEMENTO } from '../../../model/lexml/acao/suprimirElemento';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { VALIDAR_ARTICULACAO } from '../../../model/lexml/acao/validarArticulacaoAction';\nimport { VALIDAR_ELEMENTO } from '../../../model/lexml/acao/validarElementoAction';\nimport { ATUALIZAR_NOTA_ALTERACAO } from './../../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { REMOVER_ELEMENTO_SEM_TEXTO } from './../../../model/lexml/acao/removerElementoSemTextoAction';\nimport { abreArticulacao } from './abreArticulacao';\nimport { adicionaAlteracaoComAssistente } from './adicionaAlteracaoComAssistente';\nimport { adicionaElemento } from './adicionaElemento';\nimport { adicionarAlerta as adicionaAlerta } from './adicionarAlerta';\nimport { agrupaElemento } from './agrupaElemento';\nimport { aplicaAlteracoesEmenda } from './aplicaAlteracoesEmenda';\nimport { atualizaElemento } from './atualizaElemento';\nimport { atualizaNotaAlteracao } from './atualizaNotaAlteracao';\nimport { atualizaReferenciaElemento } from './atualizaReferenciaElemento';\nimport { atualizaTextoElemento } from './atualizaTextoElemento';\nimport { autoFixElemento } from './autoFixElemento';\nimport { informaExistenciaDoElementoNaNorma } from './informaExistenciaDoElementoNaNorma';\nimport { limparAlertas } from './limparAlertas';\nimport { modificaTipoElementoWithTab } from './modificaTipoElementoWithTab';\nimport { moveElementoAbaixo } from './moveElementoAbaixo';\nimport { moveElementoAcima } from './moveElementoAcima';\nimport { redo } from './redo';\nimport { removeAlerta } from './removeAlerta';\nimport { removeElemento } from './removeElemento';\nimport { removeElementoSemTexto } from './removeElementoSemTexto';\nimport { renumeraElemento } from './renumeraElemento';\nimport { restauraElemento } from './restauraElemento';\nimport { selecionaElemento } from './selecionaElemento';\nimport { solicitaDadosAssistente } from './solicitaDadosAssistente';\nimport { solicitaNorma } from './solicitaNorma';\nimport { suprimeAgrupador } from './suprimeAgrupador';\nimport { suprimeElemento } from './suprimeElemento';\nimport { transformaTipoElemento } from './transformaTipoElemento';\nimport { undo } from './undo';\nimport { validaArticulacao } from './validaArticulacao';\nimport { validaElemento } from './validaElemento';\nimport { adicionaElementosNaProposicaoFromClipboard } from './adicionaElementosNaProposicaoFromClipboard';\nimport { ATIVAR_DESATIVAR_REVISAO } from '../../../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { ativaDesativaRevisao } from './ativaDesativaRevisao';\nimport { atualizaRevisao } from './atualizaRevisao';\nimport { State, StateType } from '../../state';\nimport { ATUALIZAR_USUARIO } from '../../../model/lexml/acao/atualizarUsuarioAction';\nimport { atualizaUsuario } from './atualizaUsuario';\nimport { ACEITAR_REVISAO } from '../../../model/lexml/acao/aceitarRevisaoAction';\nimport { REJEITAR_REVISAO } from '../../../model/lexml/acao/rejeitarRevisaoAction';\nimport { aceitaRevisao } from './aceitaRevisao';\nimport { rejeitaRevisao } from './rejeitaRevisao';\nimport { adicionaDiffMenuOpcoes } from './adicionaDiffMenuOpcoes';\nimport { LIMPAR_REVISAO } from '../../../model/lexml/acao/limparRevisoes';\nimport { limpaRevisao } from './limpaRevisao';\n\nexport const elementoReducer = (state = {}, action: any): any => {\n  let tempState: State;\n\n  let usuario = (state as State).usuario;\n  let actionType = action.type;\n  let emRevisao = (state as State).emRevisao;\n  let revisoes = (state as State).revisoes || [];\n  let numEventosPassadosAntesDaRevisao = (state as State).numEventosPassadosAntesDaRevisao || 0;\n\n  switch (action.type) {\n    case ADICIONAR_AGRUPADOR_ARTIGO:\n      tempState = agrupaElemento(state, action);\n      break;\n    case INFORMAR_EXISTENCIA_NA_NORMA:\n      tempState = informaExistenciaDoElementoNaNorma(state, action);\n      break;\n    case ATUALIZAR_NOTA_ALTERACAO:\n      tempState = atualizaNotaAlteracao(state, action);\n      break;\n    case APLICAR_ALTERACOES_EMENDA:\n      tempState = aplicaAlteracoesEmenda(state, action);\n      emRevisao = tempState.emRevisao;\n      break;\n    case ASSISTENTE_ALTERACAO:\n      tempState = adicionaAlteracaoComAssistente(state, action);\n      break;\n    case ATUALIZAR_ELEMENTO:\n      tempState = atualizaElemento(state, action);\n      break;\n    case ATUALIZAR_REFERENCIA_ELEMENTO:\n      tempState = atualizaReferenciaElemento(state, action);\n      break;\n    case ATUALIZAR_TEXTO_ELEMENTO:\n      tempState = atualizaTextoElemento(state, action);\n      break;\n    case AUTO_FIX:\n      tempState = autoFixElemento(state, action);\n      break;\n    case ADICIONAR_ELEMENTO:\n      tempState = adicionaElemento(state, action);\n      break;\n    case ADICIONAR_ELEMENTOS_FROM_CLIPBOARD:\n      tempState = adicionaElementosNaProposicaoFromClipboard(state, action);\n      break;\n    case AGRUPAR_ELEMENTO:\n      tempState = agrupaElemento(state, action);\n      break;\n    case TRANSFORMAR_TIPO_ELEMENTO:\n      tempState = transformaTipoElemento(state, action);\n      break;\n    case ELEMENTO_SELECIONADO:\n      tempState = selecionaElemento(state, action);\n      break;\n    case INFORMAR_DADOS_ASSISTENTE:\n      tempState = solicitaDadosAssistente(state, action);\n      break;\n    case INFORMAR_NORMA:\n      tempState = solicitaNorma(state, action);\n      break;\n    case MOVER_ELEMENTO_ABAIXO:\n      tempState = moveElementoAbaixo(state, action);\n      break;\n    case MOVER_ELEMENTO_ACIMA:\n      tempState = moveElementoAcima(state, action);\n      break;\n    case RENUMERAR_ELEMENTO:\n      tempState = renumeraElemento(state, action);\n      break;\n    case RESTAURAR_ELEMENTO:\n      tempState = restauraElemento(state, action);\n      break;\n    case SUPRIMIR_AGRUPADOR:\n      tempState = suprimeAgrupador(state, action);\n      break;\n    case SUPRIMIR_ELEMENTO:\n      tempState = suprimeElemento(state, action);\n      break;\n    case ABRIR_ARTICULACAO:\n      tempState = abreArticulacao(state, action);\n      break;\n    case REDO:\n      tempState = redo(state);\n      break;\n    case REMOVER_ELEMENTO:\n      tempState = removeElemento(state, action);\n      break;\n    case REMOVER_ELEMENTO_SEM_TEXTO:\n      tempState = removeElementoSemTexto(state, action);\n      break;\n    case SHIFT_TAB:\n    case TAB:\n      tempState = modificaTipoElementoWithTab(state, action);\n      break;\n    case UNDO:\n      tempState = undo(state);\n      break;\n    case VALIDAR_ELEMENTO:\n      tempState = validaElemento(state, action);\n      break;\n    case VALIDAR_ARTICULACAO:\n      tempState = validaArticulacao(state);\n      break;\n    case ADICIONAR_ALERTA:\n      tempState = adicionaAlerta(state, action);\n      break;\n    case REMOVER_ALERTA:\n      tempState = removeAlerta(state, action);\n      break;\n    case LIMPAR_ALERTAS:\n      tempState = limparAlertas(state);\n      break;\n    case ATIVAR_DESATIVAR_REVISAO:\n      tempState = ativaDesativaRevisao(state, action);\n      emRevisao = tempState.emRevisao;\n      numEventosPassadosAntesDaRevisao = tempState.past?.length || 0;\n      break;\n    case ATUALIZAR_USUARIO:\n      tempState = atualizaUsuario(state, action);\n      usuario = tempState.usuario;\n      break;\n    case ACEITAR_REVISAO:\n      tempState = aceitaRevisao(state, action);\n      break;\n    case REJEITAR_REVISAO:\n      tempState = rejeitaRevisao(state, action);\n      break;\n    case LIMPAR_REVISAO:\n      tempState = limpaRevisao(state);\n      break;\n    default:\n      actionType = undefined;\n      tempState = state as State;\n      break;\n  }\n\n  if ([LIMPAR_REVISAO].includes(actionType)) {\n    //tempState.revisoes = [];\n    revisoes = [];\n  }\n\n  if (\n    ![ABRIR_ARTICULACAO, APLICAR_ALTERACOES_EMENDA, ACEITAR_REVISAO, REJEITAR_REVISAO].includes(actionType) &&\n    !isRedoDeRevisaoAceita(actionType, tempState) &&\n    !isRedoDeRevisaoRejeitada(actionType, tempState)\n  ) {\n    tempState.revisoes = revisoes;\n    tempState.numEventosPassadosAntesDaRevisao = emRevisao ? numEventosPassadosAntesDaRevisao : tempState.past?.length || 0;\n  }\n\n  tempState.emRevisao = emRevisao;\n  tempState.usuario = usuario;\n\n  tempState = atualizaRevisao(tempState, actionType);\n  return adicionaDiffMenuOpcoes(tempState);\n};\n\nconst isRedoDeRevisaoAceita = (actionType: string | undefined, state: State): boolean => {\n  return actionType === REDO && !!state.ui?.events.some(event => event.stateType === StateType.RevisaoAceita);\n};\n\nconst isRedoDeRevisaoRejeitada = (actionType: string | undefined, state: State): boolean => {\n  return actionType === REDO && !!state.ui?.events.some(event => event.stateType === StateType.RevisaoRejeitada);\n};\n","export const REDO = 'REDO';\n\nexport const redoAction = (): any => {\n  return {\n    type: REDO,\n  };\n};\n","import { combineReducers, createStore } from 'redux';\nimport { appReducer } from './app/appReducer';\nimport { elementoReducer } from './elemento/reducer/elementoReducer';\n\nconst combinedReducer = combineReducers({\n  appReducer: appReducer,\n  elementoReducer: elementoReducer,\n});\n\nexport const rootStore = createStore(combinedReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\n","export const appReducer = (state = {}, action: any): any => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n","import { getDispositivoCabecaAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { AtualizarNotaAlteracao } from './../../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\n\nexport const atualizaNotaAlteracao = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, AtualizarNotaAlteracao)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situação, não é possível alterar esse dado do dispositivo' });\n  }\n\n  const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n\n  if (cabecaAlteracao === undefined) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situação, não é possível alterar esse dado do dispositivo' });\n  }\n\n  if (cabecaAlteracao.notaAlteracao === action.notaAlteracao) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n  cabecaAlteracao.notaAlteracao = action.notaAlteracao || undefined;\n  const alterado = createElemento(dispositivo);\n\n  const eventos: StateEvent[] = [];\n  eventos.push({\n    stateType: StateType.ElementoModificado,\n    elementos: [original, alterado],\n  });\n  eventos.push({\n    stateType: StateType.ElementoValidado,\n    elementos: [alterado],\n  });\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [],\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_ELEMENTO = 'ATUALIZAR_ELEMENTO';\n\nexport class AtualizarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarElementoAction = new AtualizarElemento();\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.texto === action.atual.conteudo.texto) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isArtigo, isIncisoCaput, isOmissis } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buscaProximoOmissis as buscaProximoOmissisSequencial,\n  getDispositivoAnterior,\n  getDispositivoPosterior,\n  getUltimoFilho,\n  hasFilhos,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { AutoFix } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { solicitaNorma } from './solicitaNorma';\n\nconst hasFix = (dispositivo: Dispositivo): boolean => {\n  return (dispositivo.mensagens?.filter(m => m.fix) ?? []).length > 0;\n};\n\nexport const autoFixElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined || !hasFix(atual)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = new Eventos();\n\n  switch (action.mensagem?.descricao) {\n    case AutoFix.INFORMAR_NORMA: {\n      return solicitaNorma(state, action);\n    }\n    case AutoFix.OMISSIS_ANTES: {\n      const anterior = getDispositivoAnterior(atual);\n\n      const novo = criaDispositivo(atual.pai!, TipoDispositivo.omissis.tipo, anterior, anterior ? undefined : 0);\n      novo.situacao = new DispositivoAdicionado();\n      novo.mensagens = validaDispositivo(novo);\n      const elementoNovo = createElemento(novo, true);\n\n      atual.mensagens = validaDispositivo(atual);\n      const elementoAtual = createElemento(atual);\n      eventos.add(StateType.ElementoIncluido, [elementoNovo]);\n      eventos.add(StateType.ElementoValidado, [elementoAtual]);\n\n      let ref;\n\n      if (anterior) {\n        ref = isArtigo(anterior) && hasFilhos(anterior) ? getUltimoFilho(anterior) : anterior;\n      } else {\n        ref = isIncisoCaput(atual) ? atual.pai!.pai! : atual.pai!;\n      }\n\n      eventos.setReferencia(createElemento(ref));\n      break;\n    }\n    case AutoFix.OMISSIS_SEQUENCIAIS: {\n      const removido = createElemento(atual);\n      let proximo = getDispositivoPosterior(atual);\n\n      if (!proximo || !isOmissis(proximo)) {\n        proximo = buscaProximoOmissisSequencial(atual.pai!);\n      }\n\n      const pai = atual.pai!;\n      pai.removeFilho(atual);\n      pai.renumeraFilhos();\n\n      eventos.add(StateType.ElementoRemovido, [removido]);\n      proximo && eventos.add(StateType.ElementoValidado, [createElemento(proximo)]);\n\n      break;\n    }\n    default:\n      state.ui = [];\n      return state;\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\nimport { findRevisaoByElementoUuid } from '../util/revisaoUtil';\n\nexport const selecionaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  if (atual === undefined) {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, action.atual.uuid);\n    if (!revisao) {\n      state.ui.events = [];\n    } else {\n      const e = { ...revisao.elementoAntesRevisao!, acoesPossiveis: [] };\n      state.ui.events = [{ stateType: StateType.ElementoSelecionado, elementos: [e] }];\n    }\n    return state;\n  }\n\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoSelecionado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const solicitaDadosAssistente = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.InformarDadosAssistente,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { isAgrupadorNaoArticulacao } from './../../../model/dispositivo/tipo';\nimport { getDispositivoAndFilhosAsLista, getIrmaoPosteriorIndependenteDeTipo, getUltimoFilho } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isArtigo } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida, montaEMostraMensagensErro } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAbaixo } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos, getProximoAgrupadorAposArtigo } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { existeFilhoExcluidoDuranteRevisao } from '../util/revisaoUtil';\n\nexport const moveElementoAbaixo = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAbaixo)) {\n    return montaEMostraMensagensErro(atual, state);\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoDuranteRevisao(state, atual) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não é possível mover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão.',\n    });\n  }\n\n  // Dispositivo cuja posição será trocada com o atual\n  let proximo = getIrmaoPosteriorIndependenteDeTipo(atual);\n  if (!proximo && isArtigo(atual)) {\n    proximo = getProximoAgrupadorAposArtigo(atual);\n  }\n\n  if (!proximo) {\n    return state;\n  }\n\n  const movendoArtigoParaAgrupador = isAgrupadorNaoArticulacao(proximo);\n\n  const removidos = [...getElementos(atual, false, true)];\n  const renumerados = listaDispositivosRenumerados(atual);\n\n  const paiAntigo = atual.pai!;\n  const novoPai = movendoArtigoParaAgrupador ? proximo : proximo.pai!;\n  const pos = movendoArtigoParaAgrupador ? 0 : novoPai.indexOf(atual) + 1;\n\n  resetUuidTodaArvore(atual);\n\n  atual.pai!.removeFilho(atual);\n  novoPai.addFilhoOnPosition(atual, pos);\n\n  novoPai.renumeraFilhos();\n  if (paiAntigo !== novoPai) {\n    paiAntigo.renumeraFilhos();\n  }\n\n  getDispositivoAndFilhosAsLista(atual).forEach(d => (d.id = buildId(d)));\n  const dAnterior = atual.pai!.filhos[atual.pai!.indexOf(atual) - 1];\n  dAnterior && getDispositivoAndFilhosAsLista(dAnterior).forEach(d => (d.id = buildId(d)));\n\n  const referencia = movendoArtigoParaAgrupador ? proximo : getUltimoFilho(proximo);\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia!, atual)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(atual, []).map(v => {\n      v.mensagens = validaDispositivo(v);\n      return createElemento(v);\n    })\n  );\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento será usado para marcar o elemento no editor\n  // Segundo elemento será usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { ajustaReferencia } from './../util/reducerUtil';\nimport {\n  getDispositivoAnteriorNaSequenciaDeLeitura,\n  isDispositivoRaiz,\n  getIrmaoAnteriorIndependenteDeTipo,\n  isArticulacaoAlteracao,\n  irmaosMesmoTipo,\n  isDispositivoAlteracao,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isEmenta } from './../../../model/dispositivo/tipo';\nimport { isArtigo, isCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida, montaEMostraMensagensErro } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAcima } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { existeFilhoExcluidoDuranteRevisao } from '../util/revisaoUtil';\n\nexport const moveElementoAcima = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAcima)) {\n    return montaEMostraMensagensErro(atual, state);\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoDuranteRevisao(state, atual) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'Não é possível mover dispositivo que possua dispositivo subordinado já removido ou alterado em modo de revisão.',\n    });\n  }\n\n  // Dispositivo cuja posição será trocada com o atual\n  const emAlteracao = isDispositivoAlteracao(atual);\n  const anterior = isArtigo(atual)\n    ? getDispositivoAnteriorNaSequenciaDeLeitura(atual, d => (isArtigo(d) || isAgrupador(d)) && isDispositivoAlteracao(d) === emAlteracao)\n    : getIrmaoAnteriorIndependenteDeTipo(atual);\n\n  if (anterior === undefined || isDispositivoRaiz(anterior) || isEmenta(anterior)) {\n    return state;\n  }\n\n  const removidos = getElementos(atual, false, true);\n  const renumerados = irmaosMesmoTipo(atual).filter(d => d !== atual && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL);\n\n  resetUuidTodaArvore(atual);\n\n  // Partindo do caso feliz (movendo entre irmãos)\n  const paiAntigo = atual.pai!;\n  let novoPai = anterior.pai!;\n  let pos = novoPai.indexOf(anterior);\n  /*\n    Verifica casos de artigo pulando agrupador.\n\n    Agrupador\n      Agrupador\n    Agrupador\n      Art <movendo este para cima>\n    ---\n    Agrupador\n      Art\n    Agrupador\n      Art <movendo este para cima>\n  */\n  // Artigo pulando agrupador\n  if (isAgrupador(anterior)) {\n    const anteriorAoAgrupador = getDispositivoAnteriorNaSequenciaDeLeitura(anterior, d => (isArtigo(d) || isAgrupador(d)) && isDispositivoAlteracao(d) === emAlteracao)!;\n    if (isAgrupador(anteriorAoAgrupador)) {\n      novoPai = anteriorAoAgrupador;\n      pos = 0;\n    } else {\n      // Artigo\n      novoPai = anteriorAoAgrupador.pai!;\n      pos = novoPai.indexOf(anteriorAoAgrupador) + 1;\n    }\n  }\n\n  atual.pai!.removeFilho(atual);\n  novoPai.addFilhoOnPosition(atual, pos);\n  novoPai.renumeraFilhos();\n  if (paiAntigo !== novoPai) {\n    paiAntigo.renumeraFilhos();\n  }\n\n  getDispositivoAndFilhosAsLista(atual).forEach(d => (d.id = buildId(d)));\n  const dPosterior = atual.pai!.filhos[atual.pai!.indexOf(atual) + 1];\n  dPosterior && getDispositivoAndFilhosAsLista(dPosterior).forEach(d => (d.id = buildId(d)));\n\n  const referencia = getDispositivoAnteriorNaSequenciaDeLeitura(atual, d => !isCaput(d) && !isArticulacaoAlteracao(d))!;\n\n  const eventos = new Eventos();\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia, atual)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(atual, []).map(v => {\n      v.mensagens = validaDispositivo(v);\n      return createElemento(v);\n    })\n  );\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento será usado para marcar o elemento no editor\n  // Segundo elemento será usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const suprimeAgrupador = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    state.ui.events = [];\n    return state;\n  }\n\n  dispositivo.situacao = new DispositivoSuprimido(createElemento(dispositivo));\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoSuprimido, [createElemento(dispositivo)]);\n\n  const events = eventos.build();\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Referencia } from '../../elemento';\nexport const SHIFT_TAB = 'SHIFT_TAB';\n\nexport const shiftTabAction = (atual: Referencia): any => {\n  return {\n    type: SHIFT_TAB,\n    atual,\n  };\n};\n","import { Referencia } from '../../elemento';\nexport const TAB = 'TAB';\n\nexport const tabAction = (atual: Referencia): any => {\n  return {\n    type: TAB,\n    atual,\n  };\n};\n","import { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TransformarElemento, TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { State } from '../../state';\nimport { transformaTipoElemento } from './transformaTipoElemento';\n\nexport const modificaTipoElementoWithTab = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  const acao = action.type === TAB ? atual.getAcaoPossivelTab(atual) : atual.getAcaoPossivelShiftTab(atual);\n\n  if (!acao) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const newAction = {\n    type: TRANSFORMAR_TIPO_ELEMENTO,\n    subType: (acao as TransformarElemento).nomeAcao,\n    atual: action.atual,\n    novo: {\n      tipo: acao.tipo,\n    },\n  };\n\n  return transformaTipoElemento(state, newAction);\n};\n","export const UNDO = 'UNDO';\n\nexport const UndoAction = (): any => {\n  return {\n    type: UNDO,\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const validaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\n\nexport const validaArticulacao = (state: any): State => {\n  const elementos: Elemento[] = [];\n  buildListaDispositivos(state.articulacao, []).forEach(d => {\n    const mensagens = validaDispositivo(d);\n\n    if (mensagens?.length > 0) {\n      d.mensagens = mensagens;\n      elementos.push(createElemento(d));\n    }\n  });\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: elementos,\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Alerta } from '../../../model/alerta/alerta';\nimport { State, StateType } from '../../state';\n\nexport const adicionarAlerta = (state: any, action: any): State => {\n  let alertas: Alerta[] = state.ui?.alertas || [];\n  if (state.ui?.alertas?.filter(({ id }) => id === action.alerta.id).length > 0) {\n    alertas = [...alertas];\n  } else {\n    alertas = [...alertas, action.alerta];\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: alertas,\n    },\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const removeAlerta = (state: any, action: any): State => {\n  const alertas = state.ui?.alertas?.filter(({ id }) => id !== action.id);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: alertas,\n    },\n  };\n};\n","export const LIMPAR_ALERTAS = 'LIMPAR_ALERTAS';\n\nexport function limparAlertas(): any {\n  return {\n    type: 'LIMPAR_ALERTAS',\n  };\n}\n","import { State, StateType } from '../../state';\n\nexport const limparAlertas = (state: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: [],\n    },\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const atualizaUsuario = (state: any, action: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizaUsuario }],\n      message: state.ui?.mensagem,\n      alertas: state.ui?.alertas,\n    },\n    usuario: action.usuario,\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const limpaRevisao = (state: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: state.alertas,\n    },\n    revisoes: [],\n    emRevisao: false,\n    usuario: state.usuario,\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { exibirDiferencaAction } from '../../../model/lexml/acao/exibirDiferencaAction';\nimport { RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State } from '../../state';\n\nexport const adicionaDiffMenuOpcoes = (state: State): State => {\n  state.ui?.events.forEach(se =>\n    se.elementos?.filter(Boolean).forEach(e => {\n      if (\n        e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n        (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && e.revisao && e.revisao.descricao === 'Texto do dispositivo foi alterado') ||\n        (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && e.revisao && (e.revisao as RevisaoElemento).elementoAntesRevisao?.conteudo?.texto !== e.conteudo?.texto)\n      ) {\n        !e.acoesPossiveis!.includes(exibirDiferencaAction) && e.acoesPossiveis!.push(exibirDiferencaAction);\n      }\n    })\n  );\n\n  return state;\n};\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { connect } from 'pwa-helpers';\n\nimport { Elemento } from '../model/elemento';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { rootStore } from '../redux/store';\n\n@customElement('lexml-eta-articulacao')\nexport class ArticulacaoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Array }) elementos: Elemento[] = [];\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        lexml-eta-editor {\n          display: block;\n          height: 100%;\n        }\n\n        lexml-eta-editor:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n      <lexml-eta-editor .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-editor>\n    `;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this.ft=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this.ft;this.it=r;const s=[r];return s.raw=s,this.ft={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { Alerta } from '../../model/alerta/alerta';\nimport { rootStore } from '../../redux/store';\nimport { connect } from 'pwa-helpers';\n@customElement('lexml-emenda-comando')\nexport class ComandoEmendaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) emenda;\n  @property({ type: Array }) alertas: Alerta[] = [];\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  stateChanged(state: any): void {\n    this.alertas = state.elementoReducer.ui?.alertas || [];\n  }\n\n  buildTemplateComando(comandos: any[]): TemplateResult {\n    const res = comandos?.reduce((acumulador, comando) => acumulador + `<p> ${comando.cabecalho} </p>`, '');\n    return html`${res}`;\n  }\n\n  buildTemplateCitacao(citacao: any): string {\n    // eslint-disable-next-line prettier/prettier\n    const corpo = citacao\n      .replaceAll('<Rotulo>', '<b>')\n      .replaceAll('</Rotulo>', '</b> ')\n      .replaceAll('<Alteracao>', '<div class=\"alteracao\">')\n      .replaceAll('</Alteracao>', '</div> ')\n      .replaceAll('<Omissis/>', '<span class=\"texto__omissis\">...............................................</span>');\n\n    return corpo;\n  }\n\n  render(): TemplateResult {\n    const cabecalhoComum = this.emenda?.cabecalhoComum;\n    const comandos = this.emenda?.comandos;\n    return html`\n      <style>\n        :host {\n          --lexml-emenda-comando-height: 100%;\n          --lexml-emenda-comando-overflow: hidden;\n          --lexml-emenda-comando-border: 1px solid #ccc;\n        }\n        .lexml-emenda-comando {\n          display: block;\n          height: var(--lexml-emenda-comando-height);\n          overflow: var(--lexml-emenda-comando-overflow);\n          overflow-y: auto;\n          padding: 0px 10px;\n          font-size: 18px;\n          font-family: 'Times New Roman', Times, serif;\n          text-align: justify;\n        }\n        .lexml-emenda-comando:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n\n        .lexml-emenda-cabecalhoComando {\n          display: block;\n          margin-top: 1em;\n          text-indent: 3em;\n        }\n\n        .lexml-emenda-citacaoComando {\n          display: block;\n          margin-top: 1em;\n        }\n\n        .lexml-emenda-complementoComando {\n          margin-top: 1em;\n        }\n\n        .lexml-emenda-citacaoComando p {\n          /* text-align: justify; */\n          text-indent: 3em;\n          margin: 0;\n        }\n\n        .lexml-emenda-citacaoComando p.ementa {\n          text-indent: 0;\n          margin-left: 30%;\n        }\n\n        .lexml-emenda-citacaoComando p.agrupador {\n          text-indent: 0;\n          text-align: center;\n        }\n\n        .lexml-emenda-citacaoComando p.secao,\n        .lexml-emenda-citacaoComando p.subsecao {\n          font-weight: bold;\n        }\n\n        .lexml-emenda-citacaoComando div.alteracao {\n          margin-left: 4em;\n        }\n\n        .lexml-emenda-citacaoComando div.alteracao p {\n          text-indent: 2em;\n        }\n        .mensagem {\n          font-size: 0.8em;\n          font-weight: normal;\n          text-align: left;\n          border: 1px solid;\n          padding: 4px 10px;\n          margin: 10px 0;\n          display: inline-block;\n          border-radius: 2px;\n          font-family: var(--sl-font-sans);\n        }\n        .mensagem--warning {\n          color: #856404;\n          background-color: #fff3cd;\n          border-color: #ffeeba;\n        }\n        .mensagem--danger {\n          color: #721c24;\n          background-color: #f8d7da;\n          border-color: #f5c6cb;\n        }\n      </style>\n\n      <div class=\"lexml-emenda-comando\">\n        ${(this.alertas || [])\n          .filter(alerta => alerta.exibirComandoEmenda)\n          .map(alerta => html`<div class=\"lexml-emenda-complementoComando mensagem mensagem--danger\">${alerta.mensagem}</div>`)}\n        ${cabecalhoComum ? unsafeHTML(`<p class=\"lexml-emenda-cabecalhoComando\">${cabecalhoComum}</p>`) : ''}\n        ${comandos?.map(comando => {\n          return unsafeHTML(\n            '<div class=\"lexml-emenda-cabecalhoComando\">' +\n              (comando.rotulo ? `<strong>${comando.rotulo}</strong> ` : '') +\n              comando.cabecalho +\n              '</div>' +\n              '<div class=\"lexml-emenda-citacaoComando\">' +\n              this.buildTemplateCitacao(comando.citacao) +\n              '</div>' +\n              (comando.complemento ? '<div class=\"lexml-emenda-complementoComando mensagem mensagem--warning\">' + comando.complemento + '</div>' : '')\n          );\n        })}\n      </div>\n    `;\n  }\n}\n","export class Subscription {\n  private canceled?: boolean;\n\n  constructor(public callback: any, canceled?: boolean) {\n    this.canceled = canceled;\n  }\n\n  isCanceled(): boolean {\n    return this.canceled ?? false;\n  }\n\n  cancel(): void {\n    this.canceled = true;\n  }\n}\n\nexport class Observable<T = void> {\n  private subscriptions: Subscription[];\n\n  constructor() {\n    this.subscriptions = [];\n  }\n\n  subscribe(callback: any): Subscription {\n    const inscricao: Subscription = new Subscription(callback);\n    this.subscriptions.push(inscricao);\n    return inscricao;\n  }\n\n  notify(data: T): void {\n    this.subscriptions.forEach((subscription: Subscription) => {\n      if (!subscription.isCanceled()) {\n        setTimeout(() => {\n          subscription.callback(data);\n        }, 1);\n      }\n    });\n  }\n\n  clean(): void {\n    this.subscriptions = [];\n  }\n}\n","import { Observable } from '../../util/observable';\nimport { InfoTextoColado } from '../../redux/elemento/util/colarUtil';\nimport { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { SlDialog } from '@shoelace-style/shoelace';\nimport { adicionarElementoFromClipboardAction } from '../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\n\nconst ID_DIALOGO_TIPO_COLAGEM = 'slDialogoTipoColagem';\nconst ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO = 'slDialogoModificarExistenteAdicionarNovo';\nconst ID_DIALOGO_MODIFICAR_DISPOSITIVOS_EXISTENTES = 'slDialogoModificarDispositivosExistentes';\nconst ID_DIALOGO_ADICIONAR_APOS_ATUAL = 'slDialogoAdicionarAposAtual';\nconst ID_DIALOGO_AVISO = 'slDialogoAviso';\n\nconst RODAPE_CONFIRMAR = 'RODAPE_CONFIRMAR';\nconst RODAPE_FECHAR = 'RODAPE_FECHAR';\n\nconst ANTES_DE_PROSSEGUIR = 'Antes de prosseguir';\nconst OPERACAO_NAO_PERMITIDA = 'Operação não permitida';\nconst DISPOSITIVO_JA_EXISTE = 'Atenção, dispositivo já existe no texto';\nconst IMPORTANTE = 'Importante!';\nconst DANGER = 'danger';\nconst INFO = 'primary';\nconst SVG_DANGER = `<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40041 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987\n10.8231 16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627 13.2\n16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736 13.8235\n12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235 10.8\n13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6 12.6235\n6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z\" fill=\"#CA3A31\"/>\n</svg>`;\nconst SVG_INFO = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n<path d=\"M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40042 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0V0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987 10.8231\n16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627\n13.2 16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736\n13.8235 12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235\n10.8 13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6\n12.6235 6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z\" fill=\"#3982C1\"/>\n</svg>`;\n\nexport const onChangeColarDialog: Observable<string> = new Observable<string>();\n\nexport class DialogColagem {\n  quill!: EtaQuill;\n  rootStore?: any;\n  infoTextoColado!: InfoTextoColado;\n  idDialog!: string;\n  labelDialog!: string;\n  tipoRodape!: string;\n  mensagens: string[] = [];\n  variante?: string;\n  range?: any;\n  nomeDispositivoSingular = '';\n  nomeDispositivoPlural = '';\n  isPrimeiroDialogoTipoColagem = true;\n  exibeDialogAviso = true;\n}\n\nconst montaDialogoTipoColagem = (dialogColagem: DialogColagem): void => {\n  const mensagens = ['Selecione abaixo o formato com o qual gostaria de colar seu texto.'];\n  dialogColagem.mensagens = mensagens;\n  dialogColagem.idDialog = ID_DIALOGO_TIPO_COLAGEM;\n  dialogColagem.labelDialog = ANTES_DE_PROSSEGUIR;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialagoNaoPermitidoPadrao = (dialogColagem: DialogColagem): void => {\n  dialogColagem.mensagens = dialogColagem.infoTextoColado.restricoes[0].mensagens;\n  dialogColagem.idDialog = 'slDialogoNaoPermitido';\n  dialogColagem.labelDialog = OPERACAO_NAO_PERMITIDA;\n  dialogColagem.tipoRodape = RODAPE_FECHAR;\n  dialogColagem.variante = DANGER;\n  dialogColagem.exibeDialogAviso = false;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoAdicionarAposAtual = (dialogColagem: DialogColagem): void => {\n  const mensagens = [\n    ...dialogColagem.infoTextoColado.restricoes[0].mensagens,\n    'Você deseja adicionar ' +\n      getConcordanciaTodosTodas(dialogColagem.nomeDispositivoSingular) +\n      getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n      dialogColagem.nomeDispositivoPlural +\n      ' após a posição atual?',\n  ];\n  dialogColagem.mensagens = mensagens;\n  dialogColagem.idDialog = ID_DIALOGO_ADICIONAR_APOS_ATUAL;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoModificarExistenteAdicionarNovo = (dialogColagem: DialogColagem): void => {\n  dialogColagem.idDialog = ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO;\n  dialogColagem.labelDialog = DISPOSITIVO_JA_EXISTE;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n  const mensagens = [\n    'Você gostaria de modificar ' +\n      getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n      dialogColagem.nomeDispositivoPlural +\n      ' existentes ou adicionar novos após o atual?',\n  ];\n  dialogColagem.mensagens = mensagens;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoAviso = (dialogColagem: DialogColagem): void => {\n  if (dialogColagem.exibeDialogAviso) {\n    dialogColagem.idDialog = ID_DIALOGO_AVISO;\n    dialogColagem.labelDialog = IMPORTANTE;\n    dialogColagem.tipoRodape = RODAPE_FECHAR;\n    dialogColagem.variante = INFO;\n    const mensagens = ['Por favor, verifique se o texto e a estrutura de dispositivos colados está de acordo com o esperado. ', 'Podem ser necessários ajustes.'];\n    dialogColagem.mensagens = mensagens;\n    montaDialogo(dialogColagem);\n  }\n};\n\n/**\n * Inicializa caixas de diálogo\n */\nexport const colarTextoArticuladoDialog = (quill: EtaQuill, rootStore: any, infoTextoColado: InfoTextoColado, range: any, isPrimeiroDialogoTipoColagem = true): void => {\n  const dialogColagem: DialogColagem = new DialogColagem();\n  dialogColagem.quill = quill;\n  dialogColagem.rootStore = rootStore;\n  dialogColagem.infoTextoColado = infoTextoColado;\n  dialogColagem.range = range;\n  dialogColagem.nomeDispositivoSingular = getNomeDispositivo(TipoSubstantivoEnum.SINGULAR, dialogColagem.infoTextoColado);\n  dialogColagem.nomeDispositivoPlural = getNomeDispositivo(TipoSubstantivoEnum.PLURAL, dialogColagem.infoTextoColado);\n  dialogColagem.isPrimeiroDialogoTipoColagem = isPrimeiroDialogoTipoColagem;\n\n  if (infoTextoColado.infoElementos.novos.length > 1 || infoTextoColado.infoElementos.existentes.length > 1) {\n    executarValidacaoRestricao(dialogColagem);\n    dialogColagem.isPrimeiroDialogoTipoColagem = false;\n    montaDialogoAviso(dialogColagem);\n  } else {\n    montaDialogoTipoColagem(dialogColagem);\n    dialogColagem.isPrimeiroDialogoTipoColagem = false;\n  }\n};\n\n/**\n * Método utilizado para criar caixas de diálogo conforme restrições encontradas\n *\n * @param dialogColagem\n */\nconst executarValidacaoRestricao = (dialogColagem: DialogColagem): void => {\n  if (dialogColagem.infoTextoColado.restricoes.length) {\n    const restricao = dialogColagem.infoTextoColado.restricoes[0];\n    dialogColagem.labelDialog = restricao.titulo || OPERACAO_NAO_PERMITIDA;\n    restricao.isPermitidoColarAdicionando ? montaDialogoAdicionarAposAtual(dialogColagem) : montaDialagoNaoPermitidoPadrao(dialogColagem);\n    dialogColagem.exibeDialogAviso = false;\n  } else if (dialogColagem.infoTextoColado.restricoes.length === 0 && dialogColagem.infoTextoColado.infoElementos.existentes.length === 0) {\n    adicionaElemento(dialogColagem, false);\n  } else {\n    dialogColagem.exibeDialogAviso = false;\n    montaDialogoModificarExistenteAdicionarNovo(dialogColagem);\n  }\n};\n\n/**\n * Constrói dinamicamente html e ações de cada caixa de diálogo\n */\nconst montaDialogo = (dialogColagem: DialogColagem): void => {\n  Array.from(document.querySelectorAll('.dialogo-colagem')).forEach(el => document.body.removeChild(el));\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.classList.add('dialogo-colagem');\n  dialogElem.id = dialogColagem.idDialog;\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = dialogColagem.labelDialog as string;\n\n  const content = document.createRange().createContextualFragment(`\n    <style>\n      .rodape-confirmar {\n        float: right;\n      }\n      .tiposColagem {\n        font-weight: normal;\n      }\n      sl-dialog::part(title) {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n      }\n    </style>\n      <div class=\"tiposColagem\">\n        ${buildMessages(dialogColagem.mensagens)}\n        <br><br>\n        ${getRadioGroup(dialogColagem)}\n        <div class=\"rodape-confirmar\">\n        ${getTipoRodape(dialogColagem)}\n        <div/>\n      </div>\n  `);\n\n  buildButtons(content, dialogElem, dialogColagem);\n\n  buildRadioClick(content);\n\n  dialogColagem.quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n\n  setTimeout(() => addIconBeforeTitle(dialogColagem), 0);\n\n  if (dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    setTimeout(() => setFocusButtonConfirmar(), 0);\n  }\n};\n\nconst setFocusButtonConfirmar = (): void => {\n  document.getElementById('btnConfirmar')!.focus();\n};\n\nconst addIconBeforeTitle = (dialogColagem: DialogColagem): void => {\n  const elDialogTitle = document.querySelector('#' + dialogColagem.idDialog)!.shadowRoot!.querySelector('#title');\n  elDialogTitle?.insertAdjacentHTML('afterbegin', getIcon(dialogColagem));\n};\n\nconst getIcon = (dialogColagem: DialogColagem): string => {\n  if (dialogColagem.variante === DANGER) {\n    return SVG_DANGER;\n  }\n  return SVG_INFO;\n};\n\n/**\n * Define os botões da caixa de diálogo\n */\nconst buildButtons = (content: DocumentFragment, dialogElem: SlDialog, dialogColagem: DialogColagem): void => {\n  const botoes = content.querySelectorAll('sl-button');\n\n  if (botoes.length === 1) {\n    const fechar = botoes[0];\n    fechar.onclick = (): void => {\n      fecharDialog(dialogElem, dialogColagem);\n    };\n  } else if (botoes.length > 1) {\n    const confirma = botoes[0];\n    const fechar = botoes[1];\n\n    fechar.onclick = (): void => {\n      fecharDialog(dialogElem, dialogColagem);\n    };\n\n    confirma.onclick = (): void => {\n      executeByIdDialog(dialogColagem, dialogElem);\n    };\n  }\n};\n\nconst buildRadioClick = (content: DocumentFragment): void => {\n  const radio = content.querySelectorAll('sl-radio');\n\n  if (radio.length > 0) {\n    const opt1 = radio[0];\n    const opt2 = radio[1];\n\n    opt1.onclick = (): void => {\n      habilitaBotaoConfirmar();\n    };\n    opt2.onclick = (): void => {\n      habilitaBotaoConfirmar();\n    };\n  }\n};\n\nconst getValueFromRadioGroup = (idRadioGroup: string): string => {\n  return (document.getElementById(idRadioGroup)!.querySelector('sl-radio[checked]') as any).value;\n};\n\n/**\n * Realiza validação e constrói ação de cada situação de cada caixa de diálogo de acordo com o texto colado\n */\nconst executeByIdDialog = (dialogColagem: DialogColagem, dialogElem: SlDialog): void => {\n  const { idDialog } = dialogColagem;\n  let valor = '';\n  let colarSubstituindo = false;\n\n  if (idDialog === ID_DIALOGO_ADICIONAR_APOS_ATUAL) {\n    valor = getValueFromRadioGroup('rdgSimNao') === '1' ? '1' : '';\n  } else if (idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    valor = getValueFromRadioGroup('rdgTipoColagem');\n    if (valor === '1') {\n      colarComoTextoSimples(dialogColagem);\n      valor = ''; // para não executar adicionarElementoFromClipboardAction\n    } else if (valor === '2' && dialogColagem.isPrimeiroDialogoTipoColagem) {\n      dialogColagem.isPrimeiroDialogoTipoColagem = false;\n      valor = '';\n      colarTextoArticuladoDialog(dialogColagem.quill, dialogColagem.rootStore, dialogColagem.infoTextoColado, dialogColagem.range, false);\n    } else if (valor === '2' && !dialogColagem.isPrimeiroDialogoTipoColagem) {\n      executarValidacaoRestricao(dialogColagem);\n      valor = '';\n    }\n  } else if (idDialog === ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO) {\n    valor = getValueFromRadioGroup('rdgModificarExistenteAdicionarNovo');\n    colarSubstituindo = valor === '1';\n  }\n\n  if (valor) {\n    adicionaElemento(dialogColagem, colarSubstituindo);\n  }\n\n  fecharDialog(dialogElem, dialogColagem);\n  montaDialogoAviso(dialogColagem);\n};\n\nconst adicionaElemento = (dialogColagem: DialogColagem, colarSubstituindo: boolean): void => {\n  const { infoTextoColado, rootStore } = dialogColagem;\n  rootStore.dispatch(\n    adicionarElementoFromClipboardAction.execute(\n      infoTextoColado.infoElementos.atual,\n      infoTextoColado.jsonix,\n      undefined,\n      infoTextoColado.infoElementos.atual.dispositivoAlteracao,\n      colarSubstituindo,\n      'depois'\n    )\n  );\n};\n\nconst colarComoTextoSimples = (dialogColagem: DialogColagem): void => {\n  const { quill, range, infoTextoColado } = dialogColagem;\n  quill.clipboard.dangerouslyPasteHTML(range.index, infoTextoColado.textoColadoOriginal);\n  onChangeColarDialog.notify('clipboard');\n};\n\nconst fecharDialog = (dialogElem: SlDialog, dialogColagem: DialogColagem): void => {\n  dialogElem?.hide();\n  if (document.body.contains(dialogElem)) {\n    document.body.removeChild(dialogElem);\n  }\n  setTimeout(() => dialogColagem.quill.focus(), 0);\n};\n\nconst buildMessages = (mensagens: string[]): string => mensagens.join('<br><br>');\n\nconst getRadioGroup = (dialogColagem: DialogColagem): string => {\n  if (dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    return getRadioGroupTipoColagem();\n  } else if (dialogColagem.idDialog === ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO) {\n    return getRadioGroupModificarExistenteAdicionarNovo(dialogColagem);\n  } else if (dialogColagem.idDialog === ID_DIALOGO_MODIFICAR_DISPOSITIVOS_EXISTENTES || dialogColagem.idDialog === ID_DIALOGO_ADICIONAR_APOS_ATUAL) {\n    return getRadioGroupSimNao();\n  }\n  return '';\n};\n\nconst getRadioGroupTipoColagem = (): string => {\n  return `\n  <sl-radio-group id=\"rdgTipoColagem\">\n    <sl-radio class=\"tipo-colagem\" id=\"colarSimples\" value=\"1\">Colar como texto simples</sl-radio>\n    <sl-radio class=\"tipo-colagem\" id=\"colarEstruturado\" value=\"2\" checked>Colar como dispositivo</sl-radio>\n  </sl-radio-group>\n  `;\n};\n\nconst getRadioGroupModificarExistenteAdicionarNovo = (dialogColagem: DialogColagem): string => {\n  return (\n    `\n  <sl-radio-group id=\"rdgModificarExistenteAdicionarNovo\">\n    <sl-radio id=\"modificarExistente\" value=\"1\">Modificar ` +\n    dialogColagem.nomeDispositivoPlural +\n    ` existentes</sl-radio>\n    <sl-radio id=\"adicionarNovo\" value=\"2\">Adicionar nov` +\n    getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n    dialogColagem.nomeDispositivoPlural +\n    `</sl-radio>\n  </sl-radio-group>\n  `\n  );\n};\n\nconst getRadioGroupSimNao = (): string => {\n  return `\n  <sl-radio-group id=\"rdgSimNao\">\n    <sl-radio id=\"sim\" value=\"1\">Sim</sl-radio>\n    <sl-radio id=\"nao\" value=\"2\">Não</sl-radio>\n  </sl-radio-group>\n  `;\n};\n\nconst getTipoRodape = (dialogColagem: DialogColagem): string => (dialogColagem.tipoRodape === RODAPE_CONFIRMAR ? getRodapeConfirmar(dialogColagem) : getRodapeFechar());\n\nconst getRodapeFechar = (): string => {\n  return `\n    <div class=\"rodape-confirmar\">\n      <br/>\n      <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n    </div>\n  `;\n};\n\nconst getRodapeConfirmar = (dialogColagem: DialogColagem): string => {\n  const disabled = dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM ? '' : 'disabled';\n  return `\n    <div class=\"rodape-confirmar\" id=\"rodapeConfirmar\">\n      <br/>\n      <sl-button id=\"btnConfirmar\" slot=\"footer\" variant=\"primary\" ${disabled}>Confirmar</sl-button>\n      <sl-button slot=\"footer\" variant=\"default\">Fechar</sl-button>\n    </div>\n  `;\n};\n\nconst habilitaBotaoConfirmar = (): void => {\n  (document.getElementById('btnConfirmar') as any).disabled = false;\n  setFocusButtonConfirmar();\n};\n\nenum TipoSubstantivoEnum {\n  PLURAL,\n  SINGULAR,\n}\n\n/**\n * Retorna o nome do dispositivo no singular ou plural\n */\nconst getNomeDispositivo = (tipoSubstantivo: TipoSubstantivoEnum, infoTextoColado: InfoTextoColado): string => {\n  if (infoTextoColado.infoElementos.tiposColados.includes('DispositivoAgrupadorGenerico')) {\n    return '';\n  }\n  const dispositivo = infoTextoColado.infoElementos.tiposColados[0].toLowerCase();\n  return tipoSubstantivo === TipoSubstantivoEnum.PLURAL ? TipoDispositivo[dispositivo].descricaoPlural!.toLowerCase() : TipoDispositivo[dispositivo].descricao!.toLowerCase();\n};\n\n// /**\n//  * Retorna a concordância de início de frase\n//  */\n// const getConcordanciaInicialMensagem = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'A ' : 'O ');\n\nconst isGeneroFeminino = (nomeDispositivo: string): boolean => ['parte', 'seção', 'subseção', 'alínea'].includes(nomeDispositivo);\n\n/**\n * retorna concordância de meio de frase 'todos' e 'todas'\n */\nconst getConcordanciaTodosTodas = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'todas ' : 'todos ');\n\n/**\n * retorna concordância de meio de frase 'as' e 'os'\n */\nconst getConcordanciaAsOs = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'as ' : 'os ');\n","import { Conteudo } from '../dispositivo/conteudo';\nimport { ElementoAction } from '../lexml/acao';\nimport { Mensagem } from '../lexml/util/mensagem';\nimport { Revisao } from '../revisao/revisao';\n\nexport class Referencia {\n  tipo?: string;\n  uuid?: number;\n  uuid2?: string;\n  lexmlId?: string;\n  conteudo?: Partial<Conteudo>;\n  descricaoSituacao?: string;\n  uuidAlteracao?: number;\n  uuid2Alteracao?: string;\n  existeNaNormaAlterada?: boolean;\n}\nexport class Elemento extends Referencia {\n  nivel = 0;\n  numero?: string;\n  rotulo = '';\n  agrupador = false;\n  editavel = true;\n  mensagens?: Mensagem[];\n  hierarquia?: {\n    pai?: Referencia;\n    posicao?: number;\n    numero?: string;\n  };\n  sendoEditado = false;\n  index = 0;\n  acoesPossiveis?: ElementoAction[];\n  norma?: string;\n  existeNaNormaAlterada?: boolean;\n  abreAspas?: boolean;\n  fechaAspas?: boolean;\n  notaAlteracao?: string;\n  dispositivoAlteracao?: boolean;\n  tipoOmissis?: string;\n  podeEditarNotaAlteracao?: boolean;\n  manterNoMesmoGrupoDeAspas?: boolean;\n  tiposAgrupadoresQuePodemSerInseridosAntes?: string[];\n  tiposAgrupadoresQuePodemSerInseridosDepois?: string[];\n  artigoDefinido?: string;\n  elementoAnteriorNaSequenciaDeLeitura?: Referencia;\n  revisao?: Revisao;\n}\n","import { EtaContainerTable } from './eta-container-table';\n\nconst Block = Quill.import('blots/block');\n\nexport class EtaBlot extends Block {\n  [key: string]: any;\n  static blotName = 'EtaBlot';\n\n  get instanceBlotName(): string {\n    return EtaBlot.blotName;\n  }\n\n  get linha(): EtaContainerTable {\n    return this.parent.parent.parent;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get tagName(): string {\n    return this.domNode.tagName;\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML.replace('&nbsp;', '') : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  constructor(domNode: HTMLElement) {\n    super(domNode);\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { SlDropdown } from '@shoelace-style/shoelace';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotMenu extends EtaBlot {\n  // Site https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_dropdown_right\n  static blotName = 'EtaBlotMenu';\n  static tagName = 'sl-dropdown';\n  static className = 'lx-eta-dropdown';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenu.blotName;\n  }\n\n  static create(): any {\n    const node: SlDropdown = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenu.className);\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenu.create());\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { SlButton } from '@shoelace-style/shoelace';\n\nexport class EtaBlotMenuBotao extends EtaBlot {\n  static blotName = 'EtaBlotMenuBotao';\n  static tagName = 'sl-button';\n  static className = 'lx-eta-dropbtn';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuBotao.blotName;\n  }\n\n  static create(): any {\n    const node: SlButton = super.create();\n\n    node.setAttribute('variant', 'text');\n    node.setAttribute('size', 'small');\n    node.setAttribute('slot', 'trigger');\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuBotao.className);\n    node.innerHTML = '&vellip;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenuBotao.create());\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaBlot } from './eta-blot';\nimport { SlMenu } from '@shoelace-style/shoelace';\n\nexport class EtaBlotMenuConteudo extends EtaBlot {\n  static blotName = 'EtaBlotMenuConteudo';\n  static tagName = 'sl-menu';\n  static className = 'lx-eta-dropdown-content';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuConteudo.blotName;\n  }\n\n  static create(alinhamentoMenu: AlinhamentoMenu): any {\n    const node: SlMenu = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? '' : ' lx-eta-dropdown-content-right';\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuConteudo.className + classeAdicional);\n    return node;\n  }\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaBlotMenuConteudo.create(alinhamentoMenu));\n  }\n}\n","import { SlMenuItem } from '@shoelace-style/shoelace';\nimport { ElementoAction } from '../../model/lexml/acao';\nimport { InformarDadosAssistenteAction } from '../../model/lexml/acao/informarDadosAssistenteAction';\nimport { informarNormaAction } from '../../model/lexml/acao/informarNormaAction';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMenuItem extends EtaBlot {\n  static blotName = 'EtaBlotMenuItem';\n  static tagName = 'sl-menu-item';\n  static className = 'lx-eta-dropdown-content-item';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuItem.blotName;\n  }\n\n  static create(acao: ElementoAction, callback: any): any {\n    const node: SlMenuItem = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuItem.className);\n    node.innerHTML = (acao.descricao ?? '') + (acao.hotkey ? `<span slot=\"suffix\"> ${acao.hotkey} </span>` : '');\n\n    node.addEventListener('mousedown', () => {\n      if (acao.descricao === informarNormaAction.descricao || acao.descricao === InformarDadosAssistenteAction.descricao) {\n        const index = document.getSelection()?.focusOffset;\n        localStorage.setItem('indexCursor', JSON.stringify(index));\n      }\n\n      callback(acao);\n    });\n    return node;\n  }\n\n  constructor(acao: ElementoAction, callback: any) {\n    super(EtaBlotMenuItem.create(acao, callback));\n  }\n}\n","import { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { isRevisaoDeExclusao, isRevisaoPrincipal } from '../../redux/elemento/util/revisaoUtil';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotRotulo extends EtaBlot {\n  static blotName = 'EtaBlotRotulo';\n  static tagName = 'LABEL';\n\n  static formatoStyle = 'STYLE';\n\n  get instanceBlotName(): string {\n    return EtaBlotRotulo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRotulo.getClasseCSS(elemento));\n    node.setAttribute('data-rotulo', elemento.rotulo);\n\n    if (elemento.abreAspas) {\n      node.setAttribute('abre-aspas', 'true');\n    }\n\n    if (podeInformarNumeracao(elemento)) {\n      node.setAttribute('pode-informar-numeracao', 'true');\n    }\n\n    if (elemento.tipo) {\n      node.setAttribute('tipo-dispositivo', elemento.tipo);\n    }\n\n    node.innerHTML = EtaBlotRotulo.montarRotulo(elemento);\n    if (elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && elemento.dispositivoAlteracao) {\n      node.title = elemento.existeNaNormaAlterada ? 'Dispositivo existente na norma alterada' : 'Dispositivo a ser adicionado à norma';\n    }\n    // node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('rotulo', { bubbles: true, cancelable: true, detail: { elemento } }));\n    node.onclick = onclick(node, elemento);\n    return node;\n  }\n\n  get rotulo(): string {\n    return this.domNode.getAttribute('data-rotulo');\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRotulo.create(elemento));\n  }\n\n  format(name: string, value: any, abreAspas?: boolean): void {\n    if (name === EtaBlotRotulo.blotName) {\n      this.domNode.setAttribute('data-rotulo', (abreAspas ? '\\u201C' : '') + value);\n      if (abreAspas) {\n        this.domNode.setAttribute('abre-aspas', 'true');\n      }\n      this.domNode.innerHTML = value;\n    } else if (name === EtaBlotRotulo.formatoStyle) {\n      this.domNode.setAttribute('style', EtaBlotRotulo.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style = elemento.tipo === 'Articulacao' ? 'color: #373634; font-weight: 600; line-height: 0.42;' : 'color: #373634; font-weight: 600; line-height: 1.42;';\n\n    if (elemento.agrupador) {\n      style = `${style} display: block; font-size: 1rem; text-align: center;`;\n    } else {\n      style = `${style} float: left; margin-right: 10px;`;\n    }\n    return style;\n  }\n\n  public static getClasseCSS(elemento: Elemento): string {\n    const classeSituacao = {\n      [DescricaoSituacao.DISPOSITIVO_ADICIONADO]: 'dispositivo--adicionado',\n      [DescricaoSituacao.DISPOSITIVO_MODIFICADO]: 'dispositivo--modificado',\n      [DescricaoSituacao.DISPOSITIVO_SUPRIMIDO]: 'dispositivo--suprimido',\n    };\n\n    const isAdicionado = elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n    return (\n      'texto__rotulo' +\n      (elemento.agrupador ? ' texto__rotulo--agrupador' : ' texto__rotulo--padrao') +\n      (isAdicionado && elemento.dispositivoAlteracao ? ' rotulo' : '') +\n      (' texto__rotulo--' + elemento.tipo?.toLowerCase()) +\n      (' ' + (classeSituacao[elemento.descricaoSituacao ?? ''] ?? ''))\n    );\n  }\n\n  public setEstilo(elemento: Elemento): void {\n    this.domNode.setAttribute('class', `${EtaBlotRotulo.getClasseCSS(elemento)}`);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.setEstilo(elemento);\n\n    this.domNode.setAttribute('data-rotulo', elemento.rotulo);\n\n    if (elemento.abreAspas) {\n      this.domNode.setAttribute('abre-aspas', 'true');\n    } else {\n      this.domNode.removeAttribute('abre-aspas');\n    }\n\n    if (podeInformarNumeracao(elemento)) {\n      this.domNode.setAttribute('pode-informar-numeracao', 'true');\n    } else {\n      this.domNode.removeAttribute('pode-informar-numeracao');\n    }\n\n    this.domNode.onclick = onclick(this.domNode, elemento);\n    this.domNode.innerHTML = EtaBlotRotulo.montarRotulo(elemento);\n  }\n\n  private static montarRotulo(elemento: Elemento): string {\n    const descricaoTipo = TipoDispositivo[elemento.tipo!.toLowerCase()].descricao;\n    return elemento.revisao && EtaBlotRotulo.isRevisaoPrincipalDeExclusaoDeDispositivo(elemento) ? descricaoTipo ?? '' : elemento.rotulo;\n  }\n\n  private static isRevisaoPrincipalDeExclusaoDeDispositivo(elemento: Elemento): boolean {\n    const r = elemento.revisao as RevisaoElemento;\n    return isRevisaoPrincipal(r) && isRevisaoDeExclusao(r);\n  }\n}\n\nconst podeInformarNumeracao = (elemento: Elemento): boolean => {\n  return !!(\n    elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    elemento.dispositivoAlteracao &&\n    (elemento.abreAspas || elemento.tipo === 'Artigo' || (elemento.hierarquia?.pai?.existeNaNormaAlterada ?? true))\n  );\n};\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (podeInformarNumeracao(elemento)) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('rotulo', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotAbreAspas extends EtaBlot {\n  static blotName = 'EtaBlotAbreAspas';\n  static tagName = 'abre-aspas';\n  static className = 'abre-aspas';\n\n  private elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaBlotAbreAspas.create(elemento));\n    this.elemento = elemento;\n  }\n\n  get instanceBlotName(): string {\n    return EtaBlotAbreAspas.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotAbreAspas.className);\n\n    node.innerHTML = EtaBlotAbreAspas.montarHTML(elemento);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.elemento = elemento;\n    this.domNode.innerHTML = EtaBlotAbreAspas.montarHTML(elemento);\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    return elemento.abreAspas ? '“' : '';\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\n\nexport class EtaBlotConteudo extends EtaBlot {\n  static blotName = 'EtaBlotConteudo';\n  static tagName = 'P';\n  static className = 'texto__dispositivo';\n\n  get instanceBlotName(): string {\n    return EtaBlotConteudo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    const conteudo: string = normalizaSeForOmissis(elemento.conteudo?.texto ?? '').trim();\n\n    node.setAttribute('class', EtaBlotConteudo.getClasseCSS(elemento));\n    node.setAttribute('contenteditable', elemento?.editavel ? 'true' : 'false');\n    node.setAttribute('id', 'texto__dispositivo' + elemento.uuid);\n\n    if (elemento.notaAlteracao) {\n      node.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n    }\n\n    if (elemento.fechaAspas) {\n      node.setAttribute('fecha-aspas', 'true');\n    }\n\n    if (elemento.tipo === 'Omissis' || conteudo.indexOf(TEXTO_OMISSIS) >= 0) {\n      node.innerHTML = '<span class=\"texto__omissis\">' + TEXTO_OMISSIS + '</span>';\n    } else {\n      node.innerHTML = conteudo !== '' ? conteudo : '<br>';\n    }\n\n    return node;\n  }\n\n  private _htmlAnt: string;\n  set htmlAnt(htmlAnt: string) {\n    this._htmlAnt = htmlAnt;\n  }\n\n  get htmlAnt(): string {\n    return this._htmlAnt;\n  }\n\n  get alterado(): boolean {\n    return this._htmlAnt !== this.html;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotConteudo.create(elemento));\n    this._htmlAnt = '';\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static getClasseCSS(elemento: Elemento): string {\n    return 'texto__dispositivo';\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.htmlAnt = this.html;\n    if (elemento.notaAlteracao) {\n      this.domNode.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n    } else {\n      this.domNode.removeAttribute('nota-alteracao');\n    }\n\n    if (elemento.fechaAspas) {\n      this.domNode.setAttribute('fecha-aspas', 'true');\n    } else {\n      this.domNode.removeAttribute('fecha-aspas');\n    }\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotEspaco extends EtaBlot {\n  static blotName = 'EtaBlotEspaco';\n  static tagName = 'ESPACO';\n  static className = 'espaco';\n\n  get instanceBlotName(): string {\n    return EtaBlotEspaco.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.innerHTML = '&nbsp;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotEspaco.create());\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { podeAdicionarAtributoDeExistencia } from '../../model/elemento/elementoUtil';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotExistencia extends EtaBlot {\n  static blotName = 'EtaBlotExistencia';\n  static tagName = 'blot-existencia';\n  static className = 'blot-existencia';\n\n  get instanceBlotName(): string {\n    return EtaBlotExistencia.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotExistencia.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('id', 'blot-existencia' + elemento.uuid);\n    node.classList.add(EtaBlotExistencia.className);\n    EtaBlotExistencia._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarElemento(elemento: Elemento): void {\n    this.atualizarAtributos(elemento);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotExistencia._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotExistencia.montarHTML(elemento);\n    node.onclick = onclick(node, elemento);\n\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      node.classList.add('existencia');\n      node.title = elemento.existeNaNormaAlterada ? 'Dispositivo existente na norma alterada' : 'Dispositivo a ser adicionado à norma';\n    } else {\n      node.classList.remove('existencia');\n    }\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      return elemento.existeNaNormaAlterada ? 'Existente' : 'Novo';\n    } else {\n      return '';\n    }\n  }\n}\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (podeAdicionarAtributoDeExistencia(elemento)) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('toggle-existencia', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotFechaAspas extends EtaBlot {\n  static blotName = 'EtaBlotFechaAspas';\n  static tagName = 'fecha-aspas';\n  static className = 'fecha-aspas';\n\n  get instanceBlotName(): string {\n    return EtaBlotFechaAspas.blotName;\n  }\n\n  private elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaBlotFechaAspas.create(elemento));\n    this.elemento = elemento;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotFechaAspas.className);\n\n    node.innerHTML = EtaBlotFechaAspas.montarHTML(elemento);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.elemento = elemento;\n    this.domNode.innerHTML = EtaBlotFechaAspas.montarHTML(elemento);\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    return elemento.fechaAspas ? '” ' : ' ';\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotNotaAlteracao extends EtaBlot {\n  static blotName = 'EtaBlotNotaAlteracao';\n  static tagName = 'nota-alteracao';\n  static className = 'nota-alteracao';\n\n  get instanceBlotName(): string {\n    return EtaBlotNotaAlteracao.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotNotaAlteracao.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotNotaAlteracao.className);\n    EtaBlotNotaAlteracao._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotNotaAlteracao._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotNotaAlteracao.montarHTML(elemento);\n    node.onclick = onclick(node, elemento);\n\n    if (elemento.notaAlteracao) {\n      node.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n    } else {\n      node.removeAttribute('nota-alteracao');\n    }\n\n    if (elemento.podeEditarNotaAlteracao) {\n      node.classList.add('nota-alteracao-editavel');\n    } else {\n      node.classList.remove('nota-alteracao-editavel');\n    }\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    return elemento.notaAlteracao ? '(' + elemento.notaAlteracao + ')' : ' ';\n    // if (!elemento.notaAlteracao) {\n    //   return '';\n    // } else {\n    //   if (elemento.podeEditarNotaAlteracao) {\n    //     return '” <span class=\"nota-alteracao-editavel\">(' + elemento.notaAlteracao + ')</span>';\n    //   } else {\n    //     return '” (' + elemento.notaAlteracao + ')';\n    //   }\n    // }\n  }\n}\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (elemento.podeEditarNotaAlteracao) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('nota-alteracao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisaoRecusar extends EtaBlot {\n  static blotName = 'EtaBlotRevisaoRecusar';\n  static className = 'blot__revisao_recusar';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisaoRecusar.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisaoRecusar.className);\n    node.setAttribute('title', 'Recusar revisão');\n    EtaBlotRevisaoRecusar.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisaoRecusar.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisaoRecusar.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonRevisaoRecusar' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('rejeitar-revisao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisaoAceitar extends EtaBlot {\n  static blotName = 'EtaBlotRevisaoAceitar';\n  static className = 'blot__revisao_aceitar';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisaoAceitar.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisaoAceitar.className);\n    node.setAttribute('title', 'Aceitar revisão');\n    EtaBlotRevisaoAceitar.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisaoAceitar.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisaoAceitar.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonRevisaoAceitar' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('aceitar-revisao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nconst Container = Quill.import('blots/container');\n\nexport interface IContainerEta {\n  get instanceBlotName(): string;\n}\n\nexport abstract class EtaContainer extends Container implements IContainerEta {\n  abstract get instanceBlotName(): string;\n\n  constructor(node: any) {\n    super(node);\n  }\n\n  private get firstBlot(): EtaBlot | undefined {\n    return this.children.head;\n  }\n\n  protected findBlot(blotName: string): EtaBlot | undefined {\n    if (!this.firstBlot) {\n      return undefined;\n    }\n    return this.findBlotByBlotName(this.firstBlot, blotName);\n  }\n\n  protected findBlotByBlotName(node: any, blotName: string): any | undefined {\n    if (node?.instanceBlotName === blotName) {\n      return node;\n    }\n\n    // Verifica se o nó atual é um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.findBlotByBlotName(node[key], blotName);\n\n          if (result?.instanceBlotName === blotName) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  protected findBlotByClass<T>(node: any, clazz: { new (...args: any[]): T }): T | undefined {\n    // Verifica se o nó atual é do tipo T\n    if (node instanceof clazz) {\n      return node;\n    }\n\n    // Verifica se o nó atual é um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.findBlotByClass(node[key], clazz);\n\n          // Se um nó do tipo T for encontrado, retorna o resultado\n          if (result instanceof clazz) {\n            return result;\n          }\n        }\n      }\n    }\n\n    // Caso nenhum nó do tipo T seja encontrado, retorna undefined\n    return undefined;\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\nimport { getIniciais } from '../string-util';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisao extends EtaBlot {\n  static blotName = 'EtaBlotRevisao';\n  static className = 'blot__revisao';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisao.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisao.className);\n    EtaBlotRevisao.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisao.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisao.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonInfoRevisao' + elemento.uuid);\n    node.setAttribute('title', EtaBlotRevisao.montarMensagem(elemento));\n\n    node.innerHTML = elemento.revisao!.usuario.sigla || getIniciais(elemento.revisao!.usuario.nome).charAt(0) || 'R';\n    // node.onclick =\n    //   isRevisaoDeModificacao(elemento.revisao!) || isRevisaoDeRestauracao(elemento.revisao!)\n    //     ? (): boolean => node.dispatchEvent(new CustomEvent('exibir-diferencas', { bubbles: true, cancelable: true, detail: { elemento } }))\n    //     : (): boolean => false;\n  }\n\n  static montarMensagem(elemento: Elemento): string {\n    const revisao = elemento.revisao!;\n    const pipe = ' | ';\n    return 'Ação: ' + revisao.descricao + pipe + 'Usuário: ' + revisao.usuario.nome + pipe + 'Data/Hora: ' + revisao.dataHora;\n  }\n}\n","import { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\n\nexport class EtaContainerRevisao extends EtaContainer {\n  static blotName = 'EtaContainerRevisao';\n  static tagName = 'DIV';\n  static className = 'container__revisao';\n\n  get instanceBlotName(): string {\n    return EtaContainerRevisao.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerRevisao.className);\n    EtaContainerRevisao.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerRevisao.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaContainerRevisao.atualizarAtributos(elemento, this.domNode);\n    this.atualizarBlots(elemento);\n  }\n\n  atualizarBlots(elemento: Elemento): void {\n    this.blotBotaoAceitarRevisao?.atualizarElemento(elemento);\n    this.blotBotaoRejeitarRevisao?.atualizarElemento(elemento);\n    this.blotInfoRevisao?.atualizarElemento(elemento);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', EtaContainerRevisao.className + elemento.uuid);\n  }\n\n  get blotBotaoAceitarRevisao(): EtaBlotRevisaoAceitar | undefined {\n    return this.findBlot(EtaBlotRevisaoAceitar.blotName) as EtaBlotRevisaoAceitar;\n  }\n\n  get blotBotaoRejeitarRevisao(): EtaBlotRevisaoRecusar | undefined {\n    return this.findBlot(EtaBlotRevisaoRecusar.blotName) as EtaBlotRevisaoRecusar;\n  }\n\n  get blotInfoRevisao(): EtaBlotRevisao | undefined {\n    return this.findBlot(EtaBlotRevisao.blotName) as EtaBlotRevisao;\n  }\n}\n","import { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { podeAdicionarAtributoDeExistencia } from '../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { EtaBlot } from './eta-blot';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotMenu } from './eta-blot-menu';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { EtaContainerRevisao } from './eta-container-revisao';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTable extends EtaContainer {\n  static blotName = 'EtaContainerTable';\n  static tagName = 'DIV';\n  static className = 'container__elemento';\n\n  get instanceBlotName(): string {\n    return EtaContainerTable.blotName;\n  }\n\n  static criarId(uuid?: number): string {\n    return `lxEtaId${uuid ?? 0}`;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    const conteudo: string = normalizaSeForOmissis(elemento.conteudo?.texto ?? '').trim();\n\n    // node.setAttribute('contenteditable', 'false'); //elemento?.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTable.className + ' ' + EtaContainerTable.getClasseCSS(elemento));\n    node.setAttribute('id', EtaContainerTable.criarId(elemento.uuid));\n\n    EtaContainerTable.atualizarAtributoRevisao(elemento, node);\n    EtaContainerTable.atualizarAtributoExistenciaNormaAlterada(elemento, node);\n\n    if (elemento.tipo === 'Omissis' || conteudo.indexOf(TEXTO_OMISSIS) >= 0) {\n      node.classList.add('container_elemento--omissis');\n    }\n    return node;\n  }\n\n  [key: string]: any;\n\n  protected findBlot(blotName: string): EtaBlot | undefined {\n    if (!this.blotRotulo) {\n      return undefined;\n    }\n    return this.findBlotRef(this.blotRotulo.next, blotName);\n  }\n\n  protected findBlotRef(blotRef: EtaBlot, blotName: string): EtaBlot | undefined {\n    if (!blotRef) {\n      return;\n    }\n    return blotRef.instanceBlotName === blotName ? blotRef : this.findBlotRef(blotRef.next, blotName);\n  }\n\n  private searchBlotRotuloNode(node: any): EtaBlotRotulo | undefined {\n    // Verifica se o nó atual é do tipo BlotRotulo\n    if (node instanceof EtaBlotRotulo) {\n      return node;\n    }\n\n    // Verifica se o nó atual é um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.searchBlotRotuloNode(node[key]);\n\n          // Se um nó EtaBlotRotulo for encontrado, retorna o resultado\n          if (result instanceof EtaBlotRotulo) {\n            return result;\n          }\n        }\n      }\n    }\n\n    // Caso nenhum nó EtaBlotRotulo seja encontrado, retorna undefined\n    return undefined;\n  }\n\n  get blotRotulo(): EtaBlotRotulo | undefined {\n    // const node = this.children.head?.children?.head.children.head || this.children.head.children.head.next.children.head;\n    // return node instanceof EtaBlotRotulo ? node : node?.next;\n    return this.searchBlotRotuloNode(this.children.head);\n  }\n\n  get blotExistencia(): EtaBlotExistencia {\n    return this.findBlot(EtaBlotExistencia.blotName) as EtaBlotExistencia;\n  }\n\n  get blotConteudo(): EtaBlotConteudo {\n    return this.findBlot(EtaBlotConteudo.blotName) as EtaBlotConteudo;\n  }\n\n  get blotAbreAspas(): EtaBlotAbreAspas {\n    return this.findBlot(EtaBlotAbreAspas.blotName) as EtaBlotAbreAspas;\n  }\n\n  get blotFechaAspas(): EtaBlotFechaAspas {\n    return this.findBlot(EtaBlotFechaAspas.blotName) as EtaBlotFechaAspas;\n  }\n\n  get blotNotaAlteracao(): EtaBlotNotaAlteracao {\n    return this.findBlot(EtaBlotNotaAlteracao.blotName) as EtaBlotNotaAlteracao;\n  }\n\n  get containerRevisao(): EtaContainerRevisao | undefined {\n    return this.findBlotByBlotName(this.children, EtaContainerRevisao.blotName);\n  }\n\n  get containerDireito(): EtaContainerTdDireito {\n    return this.children.head.children.tail;\n  }\n\n  get blotInsideContainerDireito(): EtaBlot {\n    return this.containerDireito.children.head;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get id(): string {\n    return this.domNode.getAttribute('id') ?? '';\n  }\n\n  private _agrupador: boolean;\n  set agrupador(agrupador: boolean) {\n    this._agrupador = agrupador;\n  }\n\n  get agrupador(): boolean {\n    return this._agrupador;\n  }\n\n  private _editavel: boolean;\n  set editavel(editavel: boolean) {\n    this._editavel = editavel;\n    // this.blotConteudo.domNode.contentEditable = this._editavel;\n  }\n\n  get editavel(): boolean {\n    return this._editavel;\n  }\n\n  private _hierarquia: any;\n  set hierarquia(hierarquia: any) {\n    this._hierarquia = hierarquia;\n  }\n\n  get hierarquia(): any {\n    return this._hierarquia;\n  }\n\n  private _nivel: number;\n  set nivel(nivel: number) {\n    this._nivel = nivel;\n  }\n\n  get nivel(): number {\n    return this._nivel;\n  }\n\n  private _numero: string;\n  set numero(numero: string) {\n    this._numero = numero;\n  }\n\n  get numero(): string {\n    return this._numero;\n  }\n\n  private _tipo: string;\n  set tipo(tipo: string) {\n    this._tipo = tipo;\n  }\n\n  get tipo(): string {\n    return this._tipo;\n  }\n\n  private _descricaoSituacao: any;\n  set descricaoSituacao(situacao: any) {\n    this._descricaoSituacao = situacao;\n  }\n\n  get descricaoSituacao(): any {\n    return this._descricaoSituacao;\n  }\n\n  private _existeNaNormaAlterada: any;\n  set existeNaNormaAlterada(existeNaNormaAlterada: any) {\n    this._existeNaNormaAlterada = existeNaNormaAlterada;\n  }\n\n  get existeNaNormaAlterada(): any {\n    return this._existeNaNormaAlterada;\n  }\n\n  get uuid(): number {\n    return parseInt(this.id.substr(7), 0);\n  }\n\n  private _uuid2: string;\n  set uuid2(uuid2: string) {\n    this._uuid2 = uuid2;\n  }\n\n  get uuid2(): string {\n    return this._uuid2;\n  }\n\n  private _lexmlId: string;\n  set lexmlId(lexmlId: string) {\n    this._lexmlId = lexmlId;\n  }\n\n  get lexmlId(): string {\n    return this._lexmlId ?? '';\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  private resetClasses(): void {\n    this.domNode.classList.remove('dispositivo--adicionado');\n    this.domNode.classList.remove('dispositivo--modificado');\n    this.domNode.classList.remove('dispositivo--suprimido');\n  }\n\n  // TODO Rever a forma atual de se atribuir estilos\n  setEstilo(elemento: Elemento): void {\n    let classeCSS = '';\n\n    this.resetClasses();\n\n    switch (elemento.descricaoSituacao) {\n      case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n        classeCSS = 'dispositivo--adicionado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_MODIFICADO:\n        classeCSS = 'dispositivo--modificado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_SUPRIMIDO:\n        classeCSS = 'dispositivo--suprimido';\n        break;\n    }\n\n    if (classeCSS) {\n      this.domNode.classList.add(classeCSS);\n    }\n\n    this.blotRotulo!.setEstilo(elemento);\n  }\n\n  static atualizarAtributoRevisao(elemento: Elemento, node: HTMLElement): void {\n    if (elemento.revisao) {\n      node.setAttribute('em-revisao', 'true');\n      if ((elemento.revisao as RevisaoElemento).stateType === 'ElementoRemovido') {\n        node.setAttribute('excluido', 'true');\n      } else {\n        node.removeAttribute('excluido');\n      }\n    } else {\n      node.removeAttribute('em-revisao');\n      node.removeAttribute('excluido');\n    }\n  }\n\n  static atualizarAtributoExistenciaNormaAlterada(elemento: Elemento, node: HTMLElement): void {\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      node.setAttribute('existenanormaalterada', (!!elemento.existeNaNormaAlterada).toString());\n    } else {\n      node.removeAttribute('existenanormaalterada');\n    }\n  }\n\n  atualizarAtributos(elemento: Elemento): void {\n    EtaContainerTable.atualizarAtributoRevisao(elemento, this.domNode);\n    EtaContainerTable.atualizarAtributoExistenciaNormaAlterada(elemento, this.domNode);\n\n    this.blotAbreAspas?.atualizarAtributos(elemento);\n    this.blotRotulo?.atualizarAtributos(elemento);\n    this.blotExistencia?.atualizarAtributos(elemento);\n    this.blotConteudo.atualizarAtributos(elemento);\n    this.blotFechaAspas?.atualizarAtributos(elemento);\n    this.blotNotaAlteracao?.atualizarAtributos(elemento);\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    this.elemento = elemento;\n\n    this._lexmlId = elemento.lexmlId ?? '';\n    this._uuid2 = elemento.uuid2 ?? '';\n    this._editavel = elemento.editavel;\n    this._nivel = elemento.nivel;\n    this._numero = elemento.numero ?? '';\n    this._tipo = elemento.tipo ?? '';\n    this._agrupador = elemento.agrupador;\n    this._hierarquia = elemento.hierarquia;\n    this._descricaoSituacao = elemento.descricaoSituacao ? elemento.descricaoSituacao : undefined;\n    this._existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n\n    this.setEstilo(elemento);\n    this.atualizarAtributos(elemento);\n  }\n\n  elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaContainerTable.create(elemento));\n    this.elemento = elemento;\n    this._lexmlId = elemento.lexmlId ?? '';\n    this._uuid2 = elemento.uuid2 ?? '';\n    this._editavel = elemento.editavel;\n    this._nivel = elemento.nivel;\n    this._numero = elemento.numero ?? '';\n    this._tipo = elemento.tipo ?? '';\n    this._agrupador = elemento.agrupador;\n    this._hierarquia = elemento.hierarquia;\n    this._descricaoSituacao = elemento.descricaoSituacao ? elemento.descricaoSituacao : undefined;\n    this._existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n  }\n\n  format(name: string, value: any): void {\n    if (name === EtaContainerTable.blotName) {\n      this.domNode.setAttribute('style', EtaContainerTable.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  ativarBorda(): void {\n    this.domNode.classList.add('container__elemento--ativo');\n  }\n\n  desativarBorda(): void {\n    this.domNode.classList.remove('container__elemento--ativo');\n    this.limparContainerDireito();\n  }\n\n  limparContainerDireito(): void {\n    if (this.blotInsideContainerDireito instanceof EtaBlotMenu) {\n      this.blotInsideContainerDireito.remove();\n      new EtaBlotEspaco().insertInto(this.containerDireito);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style =\n      elemento.tipo === 'Articulacao'\n        ? `width: 100%; min-height: 1px; line-height: 0.42; margin: 1px`\n        : `width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;`;\n\n    if (elemento.agrupador) {\n      style = `${style} text-align: center;`;\n    }\n\n    return style;\n  }\n  private static getClasseCSS(elemento: Elemento): string {\n    let classe = elemento.tipo === 'Articulacao' ? 'container__elemento--articulacao' : 'container__elemento--padrao';\n    classe = `${classe} elemento-tipo-${elemento.tipo?.toLowerCase()}`;\n\n    if (elemento.agrupador) {\n      classe = `${classe} agrupador`;\n    } else if (elemento.tipo === 'Ementa') {\n      classe = `${classe} ementa`;\n    } else {\n      classe = `${classe} h-artigo`;\n    }\n    if (elemento.dispositivoAlteracao) {\n      classe = `${classe} dispositivo-alteracao`;\n    }\n    return classe;\n  }\n\n  public isLinhaComMarcacaoDeExclusao(): boolean {\n    return this.domNode.hasAttribute('excluido');\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n// Baseado no tutorial \"Using Event Decorators with lit-element and Web Components\"\n//   https://coryrylan.com/blog/using-event-decorators-with-lit-element-and-web-components\n\nexport interface EventOptions {\n  bubbles?: boolean;\n  cancelable?: boolean;\n  composed?: boolean;\n}\n\nexport class EventEmitter<T> {\n  constructor(private target: HTMLElement, private eventName: string) {}\n\n  emit(value: T, options?: EventOptions): void {\n    this.target.dispatchEvent(new CustomEvent<T>(this.eventName, { detail: value, ...options }));\n  }\n}\n\nexport function event() {\n  return (protoOrDescriptor: any, name: string): any => {\n    const descriptor = {\n      get(this: HTMLElement): EventEmitter<unknown> {\n        return new EventEmitter(this, name !== undefined ? name : protoOrDescriptor.key);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n\n    return name !== undefined ? Object.defineProperty(protoOrDescriptor, name, descriptor) : { kind: 'method', placement: 'prototype', key: protoOrDescriptor.key, descriptor };\n  };\n}\n\nexport function cancelarPropagacaoDoEvento(ev: MouseEvent | KeyboardEvent | ClipboardEvent): void {\n  ev.stopPropagation();\n  ev.preventDefault();\n}\n","import { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { cancelarPropagacaoDoEvento } from '../event-util';\nimport { Observable } from '../observable';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaQuill, TextoSelecionado } from './eta-quill';\n\nconst strCaracteresValidos = \"a-z0-9áéíóúÁÉÍÓÚãẽĩõũÃẼĨÕŨàèìòùÀÈÌÒÙäëïöüÄËÏÖÜâêîôûÂÊÎÔÛçÇýÝỹỸỳỲÿŸŶŷñÑ\\\\s'!@#$%&\\\\*\\\\(\\\\)_\\\\-+=`{}\\\\[\\\\]\\\\^~<,>.:;?/|\\\\ªº¹²³£¢¬§¿¡“”\";\nexport const CaracteresValidos = new RegExp(`[${strCaracteresValidos}]`, 'i');\nexport const CaracteresNaoValidos = new RegExp(`[^${strCaracteresValidos}]`, 'gi');\n\nexport const Keyboard = Quill.import('modules/keyboard');\n\nexport class EtaKeyboard extends Keyboard {\n  operacaoTecladoInvalida: Observable<void> = new Observable<void>();\n  adicionaElementoTeclaEnter: Observable<RangeStatic> = new Observable<RangeStatic>();\n  removeElemento: Observable<void> = new Observable<void>();\n  removeElementoSemTexto: Observable<string> = new Observable<string>();\n  renumeraElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  transformaElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  moveElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  onChange: Observable<string> = new Observable<string>();\n  toggleExistencia: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  adicionaAgrupador: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n\n  private altGraphPressionado = false;\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n  }\n\n  listen(): void {\n    this.quill.root.addEventListener('keyup', (ev: KeyboardEvent): void => {\n      // Trata atalhos de formatação (negrito, itálico, ...)\n      if (ev.ctrlKey && !ev.altKey && !ev.shiftKey && 'biBI'.includes(ev.key)) {\n        this.onHotKeyToolbar();\n        return;\n      }\n    });\n\n    this.quill.root.addEventListener('keydown', (ev: KeyboardEvent): void => {\n      this.altGraphPressionado = ev.altKey && ev.location === 2;\n      const elementoLinhaAtual = this.quill.linhaAtual?.elemento;\n      if (!(this.quill.cursorDeTextoEstaSobreLink() || (ev.key === 'Backspace' && this.quill.cursorDeTextoEstaSobreLink(-1))) && this.isTeclaQueAlteraTexto(ev)) {\n        this.onChange.notify('keyboard');\n      }\n\n      if (this.quill.cursorDeTextoEstaSobreLink() && this.quill.cursorDeTextoEstaSobreLink(-1) && !['Delete', 'Backspace'].includes(ev.key)) {\n        if ((!ev.ctrlKey && ev.key.length === 1) || (ev.ctrlKey && 'xvXV'.includes(ev.key)) || (ev.altKey && '0123456789'.includes(ev.key)) || ev.key === 'Enter') {\n          cancelarPropagacaoDoEvento(ev);\n          return;\n        }\n      } else if (this.verificaSelecaoComLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (\n        this.quill.linhaAtual.tipo === 'Omissis' &&\n        !['ArrowUp', 'ArrowDown'].includes(ev.key) &&\n        (this.isTeclaQueAlteraTexto(ev) || ev.key === 'Enter' || ev.altKey || ev.metaKey) &&\n        !ev.ctrlKey\n      ) {\n        if (ev.key === 'Enter') {\n          this.enterEmOmissis();\n        }\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (\n        this.quill.cursorDeTextoEstaSobreOmissis() &&\n        !['Delete', 'Backspace'].includes(ev.key) &&\n        (this.isTeclaQueAlteraTexto(ev) || ev.key === 'Enter' || ev.altKey) &&\n        !ev.ctrlKey\n      ) {\n        if (ev.key === 'Enter') {\n          this.enterEmOmissis();\n        }\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (elementoLinhaAtual?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && this.isNotTeclasDeNavegacao(ev)) {\n        cancelarPropagacaoDoEvento(ev);\n      } else if (ev.ctrlKey) {\n        if (!ev.altKey && !ev.metaKey) {\n          if (['Delete', 'Backspace'].includes(ev.key)) {\n            cancelarPropagacaoDoEvento(ev);\n          } else if (ev.key === 'Home') {\n            this.onTeclaHome(ev);\n          } else if (ev.key === 'End') {\n            this.onTeclaEnd(ev);\n          } else if (ev.key.toLowerCase() === 'a' && !ev.shiftKey) {\n            this.onTeclaCtrlA(ev);\n          } else if (ev.key.toLowerCase() === 'd') {\n            this.onTeclaCtrlD(ev);\n          } else if (ev.key.toLowerCase() === 'z') {\n            this.onTeclaCtrlZ(ev);\n          } else if (ev.key.toLowerCase() === 'y') {\n            this.onTeclaCtrlY(ev);\n          } else if (ev.ctrlKey && ev.shiftKey && ev.key.toLowerCase() === 'a') {\n            this.onTeclaCtrlShiftA(ev);\n          } else if (ev.key === 'b' || ev.key === 'i' || ev.key === 'x' || ev.key === 'v') {\n            this.onValidarTecla(ev);\n          }\n        }\n        if (ev.altKey || ev.metaKey) {\n          if (['o'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyTransformacaoTipo(ev);\n          } else if (['n', '®'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyRenumeraDispositivo(ev);\n          } else if (['x', '≈'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyToggleExistencia(ev);\n          } else if (['g'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyAdicionaAgrupador(ev);\n          }\n          // Trata caracteres especiais da tecla Alt mo MacOS/Chrome\n          // para os atalhos a, l, n, o, p, t\n          if (['229', '172', '68', '248', '960', '8224'].includes(ev.key.charCodeAt(0).toString())) {\n            let keyFake = '';\n            switch (ev.key.charCodeAt(0).toString()) {\n              case '229':\n                keyFake = 'a';\n                break;\n              case '172':\n                keyFake = 'l';\n                break;\n              case '68':\n                keyFake = 'n';\n                break;\n              case '248':\n                keyFake = 'o';\n                break;\n              case '960':\n                keyFake = 'p';\n                break;\n              case '8224':\n                keyFake = 't';\n                break;\n            }\n            if (keyFake) {\n              // Cria um evento para manipular a tecla pressionada\n              const keyDownFake = new KeyboardEvent('keydown', {\n                key: keyFake,\n              });\n              this.onHotKeyTransformacaoTipo(keyDownFake);\n            }\n          }\n        }\n      } else if (ev.altKey) {\n        if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n          this.onHotKeyMover(ev);\n        }\n      } else if (ev.key === 'ArrowRight') {\n        this.onTeclaArrowRight(ev);\n      } else if (ev.key === 'ArrowLeft') {\n        this.onTeclaArrowLeft(ev);\n      } else if (ev.key === 'ArrowDown') {\n        this.onTeclaArrowDown(ev);\n      } else if (ev.key === 'ArrowUp') {\n        this.onTeclaArrowUp(ev);\n      } else if (ev.key === 'Enter') {\n        this.onTeclaEnter(ev);\n      } else if (ev.key === 'Escape') {\n        this.onTeclaEscape(ev);\n      } else if (ev.key === 'Delete') {\n        this.onTeclaDelete(ev);\n      } else if (ev.key === 'Backspace') {\n        this.onTeclaBackspace(ev);\n      } else if (ev.key === 'Tab') {\n        this.onTeclaTab(ev);\n      } else if (ev.key.length === 1 && CaracteresValidos.test(ev.key)) {\n        this.onValidarTecla(ev);\n      }\n    });\n\n    super.listen();\n  }\n\n  private isNotTeclasDeNavegacao(ev: KeyboardEvent): boolean {\n    return (\n      !ev.ctrlKey && ev.key !== 'ArrowUp' && ev.key !== 'ArrowDown' && ev.key !== 'ArrowRight' && ev.key !== 'ArrowLeft' && ev.key !== 'Home' && ev.key !== 'End' && !ev.shiftKey\n    );\n  }\n\n  private isTeclaComCaracterGrafico(ev: KeyboardEvent): boolean {\n    const teclasComCaracterGrafico = '123456=[]/';\n    const DOM_KEY_LOCATION_NUMPAD = 3; //\n    return ev.location !== DOM_KEY_LOCATION_NUMPAD && teclasComCaracterGrafico.includes(ev.key);\n  }\n\n  private isTeclaQueAlteraTexto(ev: KeyboardEvent): boolean {\n    // Se teclas Ctrl, Alt ou Meta(?) estiverem pressionadas não faz nada\n    // Atalhos para recortar e colar serão tratados em outro lugar\n    if (ev.ctrlKey || ev.altKey || ev.metaKey) {\n      return false;\n    }\n\n    if (this.altGraphPressionado && !this.isTeclaComCaracterGrafico(ev)) {\n      return false;\n    }\n\n    // Verifica se é um caracter que altera texto\n    // OBS: 'Enter' não será tratado porque essa tecla cria um novo elemento e esta ação irá disparar\n    //      um evento onchange por conta própria.\n    if (['Delete', 'Backspace'].includes(ev.key) || ev.key.length === 1) {\n      return true;\n    }\n\n    return false;\n  }\n\n  verificarOperacaoTecladoPermitida(): boolean {\n    const textoSelec: TextoSelecionado = this.quill.textoSelecionado;\n    if (textoSelec.conteudo) {\n      if (textoSelec.quantidadeCR > 0) {\n        if (textoSelec.quantidadeCR === 1 && /\\n$/gi.test(textoSelec.conteudo)) {\n          const range = this.quill.getSelection();\n          range && this.quill.setSelection(range.index, range.length - 1, Quill.sources.API);\n          return true;\n        } else {\n          this.operacaoTecladoInvalida.notify();\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  private onTeclaArrowRight(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === blotCursor.tamanho) {\n      if (blotCursor.linha.next) {\n        this.quill.setIndex(this.quill.getIndex(blotCursor.linha.next.blotConteudo), Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowLeft(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === 0) {\n      if (blotCursor.linha.prev) {\n        const linhaAnt: EtaContainerTable = blotCursor.linha.prev;\n        const index: number = this.quill.getIndex(linhaAnt.blotConteudo) + linhaAnt.blotConteudo.tamanho;\n        this.quill.setIndex(index, Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowUp(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === 0 || this.quill.cursorDeTextoEstaSobreOmissis()) {\n      if (blotCursor.linha.prev) {\n        const linhaAnt: EtaContainerTable = blotCursor.linha.prev;\n        const index: number = this.quill.getIndex(linhaAnt.blotConteudo) + linhaAnt.blotConteudo.tamanho;\n        this.quill.setIndex(index, Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n\n    if (this.quill.isProcessandoMudancaLinha) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowDown(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === blotCursor.tamanho || this.quill.cursorDeTextoEstaSobreOmissis()) {\n      if (blotCursor.linha.next) {\n        this.quill.setIndex(this.quill.getIndex(blotCursor.linha.next.blotConteudo), Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n\n    if (this.quill.isProcessandoMudancaLinha) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaEnter(ev: KeyboardEvent): void {\n    if (this.verificarOperacaoTecladoPermitida() && !this.quill.cursorDeTextoEstaSobreLink(-1)) {\n      const range: RangeStatic = this.quill.getSelection(true);\n      this.quill.setSelection(range.index, 0, Quill.sources.SILENT);\n      this.adicionaElementoTeclaEnter.notify(range);\n    }\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEscape(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    this.quill.setIndex(range.index, Quill.sources.SILENT);\n    this.quill.setSelection(this.quill.inicioConteudoAtual, 0, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaDelete(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.quill.linhaAtual.blotConteudo.html) {\n      cancelarPropagacaoDoEvento(ev);\n      this.removeElementoSemTexto.notify(ev.key);\n    } else if (!this.verificarOperacaoTecladoPermitida() || range.index === this.quill.fimConteudoAtual) {\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreLink()) {\n      let posicao = this.quill.getSelection().index;\n      if (!this.quill.cursorDeTextoEstaSobreLink(-1)) {\n        posicao += 1;\n      }\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreOmissis()) {\n      this.quill.linhaAtual.domNode.classList.remove('container_elemento--omissis');\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaBackspace(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.quill.linhaAtual.blotConteudo.html) {\n      cancelarPropagacaoDoEvento(ev);\n      this.removeElementoSemTexto.notify(ev.key);\n    } else if (!this.verificarOperacaoTecladoPermitida() || (range.index === this.quill.inicioConteudoAtual && range.length === 0)) {\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreLink(-1)) {\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreOmissis()) {\n      this.quill.linhaAtual.domNode.classList.remove('container_elemento--omissis');\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onValidarTecla(ev: KeyboardEvent): void {\n    if (!this.verificarOperacaoTecladoPermitida()) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaHome(ev: KeyboardEvent): void {\n    const articulacao = this.quill.getPrimeiraLinha();\n    const index: number = this.quill.getIndex(articulacao.next.blotConteudo);\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, 0);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEnd(ev: KeyboardEvent): void {\n    const index: number = this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo) + this.quill.getUltimaLinha().blotConteudo?.tamanho ?? 0;\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, this.quill.scroll.domNode.scrollHeight);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlD(ev: KeyboardEvent): void {\n    this.removeElemento.notify();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaTab(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlZ(ev: KeyboardEvent): void {\n    this.quill.undo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlY(ev: KeyboardEvent): void {\n    this.quill.redo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlA(ev: KeyboardEvent): void {\n    // const index: number = this.quill.getIndex(this.quill.scroll.children.head.blotConteudo);\n    // this.quill.setSelection(index, this.quill.getLength(), Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlShiftA(ev: KeyboardEvent): void {\n    this.quill.setSelection(this.quill.inicioConteudoAtual, this.quill.linhaAtual.blotConteudo.tamanho, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyRenumeraDispositivo(ev: KeyboardEvent): void {\n    this.renumeraElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyMover(ev: KeyboardEvent): void {\n    this.moveElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyTransformacaoTipo(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyToolbar(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.onChange.notify('toolbar(hotkey)');\n    }\n  }\n\n  private onHotKeyToggleExistencia(ev: KeyboardEvent): void {\n    this.toggleExistencia.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyAdicionaAgrupador(ev: KeyboardEvent): void {\n    this.adicionaAgrupador.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private verificaSelecaoComLink(): boolean {\n    const range = this.quill.getSelection();\n    if (!range) {\n      return false;\n    }\n\n    let iniciaOuTerminaComLink = false;\n    const ops = this.quill.getContents(range).ops;\n    if (ops[0]?.attributes?.link || ops[ops.length - 1]?.attributes?.link) {\n      iniciaOuTerminaComLink = true;\n    }\n    return iniciaOuTerminaComLink;\n  }\n\n  private apagaTextoNaPosicao(posicao: number): void {\n    const [leaf, offset] = this.quill.getLeaf(posicao);\n    this.quill.deleteText(posicao - offset, leaf.text.length);\n  }\n\n  private enterEmOmissis(): void {\n    if (this.verificarOperacaoTecladoPermitida()) {\n      const range: RangeStatic = this.quill.getSelection(true);\n      const inicioLinha = this.quill.getIndex(this.quill.linhaAtual.blotConteudo);\n      const tamanho = this.quill.linhaAtual.blotConteudo.length();\n\n      if (range.index !== inicioLinha) {\n        range.index = inicioLinha + tamanho - 1;\n      }\n      this.adicionaElementoTeclaEnter.notify(range);\n    }\n  }\n}\n","export const negrito = `\n<svg class=\"icon-negrito\" id=\"negrito\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M10.7,13.5c-0.1,0-0.4,0-0.6-0.2L6,7.8C6,7.7,5.8,7.7,5.8,7.8l0,5.1c0,0.3-0.2,0.5-0.5,0.5H3.7\n\tc-0.3,0-0.5-0.2-0.5-0.5l0-9.5c-0.1-0.2,0-0.4,0.1-0.5c0.1-0.2,0.4-0.4,0.7-0.4h1c0.1,0,0.4,0,0.6,0.2l4.4,5.9\n\tc0.1,0.1,0.2,0,0.2-0.1V3c0-0.3,0.2-0.5,0.5-0.5h1.5c0.3,0,0.5,0.2,0.5,0.5V13c0,0.3-0.2,0.5-0.5,0.5H10.7z\"/>\n</svg>\n`;\n\nexport const sublinhado = `\n<svg class=\"icon-sublinhado\" id=\"sublinhado\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M4.3,9.4c0-0.2,0.1-0.3,0.4-0.3h0.7c0.2,0,0.4,0.1,0.4,0.3C5.8,10.4,6.7,11,8.1,11c1.3,0,2.2-0.5,2.2-1.4\n\tc0-1.1-1.2-1.4-2.5-1.9C6.3,7.3,4.5,6.8,4.5,5c0-1.6,1.5-2.7,3.5-2.7c1.9,0,3.3,1.1,3.4,2.6c0,0.2-0.1,0.3-0.4,0.3h-0.7\n\tc-0.2,0-0.3-0.1-0.4-0.3C9.9,4.1,9.2,3.7,8.1,3.7C6.8,3.7,6,4.2,6,5c0,0.9,0.9,1.2,2.2,1.6c1.6,0.5,3.5,1.1,3.5,3.1\n\tc0,1.6-1.5,2.7-3.6,2.7C5.9,12.3,4.3,11.2,4.3,9.4z\"/>\n<rect x=\"3\" y=\"12.9\" class=\"ql-fill\" width=\"9.9\" height=\"0.8\"/>\n</svg>\n`;\n\nexport const controleDropdown =\n  '<svg viewBox=\"0 0 18 18\"> <polygon class=\"ql-stroke\" points=\"7 11 9 13 11 11 7 11\"></polygon> <polygon class=\"ql-stroke\" points=\"7 7 9 5 11 7 7 7\"></polygon> </svg>';\n\nexport const anexo =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"15px\" height=\"15px\" viewBox=\"0 0 35 35\" data-name=\"Layer 2\" id=\"Layer_2\"><path d=\"M18,34.75A11.32,11.32,0,0,1,6.69,23.45V8A7.78,7.78,0,0,1,22.25,8V22.49a4.58,4.58,0,1,1-9.15,0V9.29a1.25,1.25,0,0,1,2.5,0v13.2a2.08,2.08,0,1,0,4.15,0V8A5.28,5.28,0,0,0,9.19,8V23.45A8.82,8.82,0,0,0,18,32.25c4.6,0,7.81-3.62,7.81-8.8V9.66a1.25,1.25,0,0,1,2.5,0V23.45C28.31,30,24,34.75,18,34.75Z\"/></svg>';\nexport const lixeiro =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"15\" height=\"15\" viewBox=\"0 0 256 256\" xml:space=\"preserve\"><defs></defs><g style=\"stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;\" transform=\"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)\"><path d=\"M 76.777 2.881 H 57.333 V 2.412 C 57.333 1.08 56.253 0 54.921 0 H 35.079 c -1.332 0 -2.412 1.08 -2.412 2.412 v 0.469 H 13.223 c -1.332 0 -2.412 1.08 -2.412 2.412 v 9.526 c 0 1.332 1.08 2.412 2.412 2.412 h 63.554 c 1.332 0 2.412 -1.08 2.412 -2.412 V 5.293 C 79.189 3.961 78.109 2.881 76.777 2.881 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\"/><path d=\"M 73.153 22.119 H 16.847 c -1.332 0 -2.412 1.08 -2.412 2.412 v 63.057 c 0 1.332 1.08 2.412 2.412 2.412 h 56.306 c 1.332 0 2.412 -1.08 2.412 -2.412 V 24.531 C 75.565 23.199 74.485 22.119 73.153 22.119 z M 33.543 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z M 48.535 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z M 63.526 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\"/></g></svg>';\n\nexport const iconeMarginBottom = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M 13.55 8.55 L 13.55 7.4 1.8 7.4 1.8 8.55 13.55 8.55 M 13.05 2.55 L 13.05 1.4 1.8 1.4 1.8 2.55 13.05 2.55 M 10.55 5.55 L 10.55 4.4 1.8 4.4 1.8 5.55 10.55 5.55 M 10.3 14.65 L 10.3 10.4 1.8 10.4 1.8 14.65 10.3 14.65 M 2.8 11.4 L 9.3 11.4 9.3 13.55 2.8 13.55 2.8 11.4 M 14.6 10.55 L 13.85 9.8 11.3 12.55 13.85 15.2 14.6 14.45 12.8 12.55 14.6 10.55 Z\"/>\n</svg>\n`;\n\nexport const iconeTextIndent = `\n<svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n<path class=\"ql-fill\" d=\"M 1.65,2.3 0.9,3.05 2.65,4.95 0.9,6.9 1.65,7.65 4.15,4.95 1.65,2.3 M 2.5,12.45 v 1.1 h 11.25 v -1.1 H 2.5 m 11.25,-2.1 V 9.25 H 2.5 v 1.1 h 11.25 m 0,-4.3 H 6.25 V 7.1 h 7.5 V 6.05 m 0,-3.25 h -7.5 v 1.1 h 7.5 z\"></path>\n</svg>\n`;\n\nexport const iconeNotaDeRodape = `\n<svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path class=\"ql-fill\" d=\"M 5,12.5 C 5,12.223858 5.2238576,12 5.5,12 h 2 c 0.6666664,0 0.6666664,1 0,1 h -2 C 5.2238576,13 5,12.776142 5,12.5 m 0,-2 C 5,10.223858 5.2238576,10 5.5,10 h 5 c 0.666666,0 0.666666,1 0,1 h -5 C 5.2238576,11 5,10.776142 5,10.5\" />\n  <path class=\"ql-fill\" d=\"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2\" />\n  <path class=\"ql-fill\" d=\"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z\" />\n</svg>\n`;\n","const Inline = Quill.import('blots/inline');\n\nexport class EtaBlotConteudoOmissis extends Inline {\n  static blotName = 'EtaBlotConteudoOmissis';\n  static tagName = 'span';\n  static className = 'texto__omissis';\n\n  get instanceBlotName(): string {\n    return EtaBlotConteudoOmissis.blotName;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n}\n","import { Mensagem, TipoMensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagem extends EtaBlot {\n  static blotName = 'EtaBlotMensagem';\n  static tagName = 'div';\n  static className = 'mensagem';\n\n  get instanceBlotName(): string {\n    return EtaBlotMensagem.blotName;\n  }\n\n  static create(mensagem: Mensagem): any {\n    const node: HTMLElement = super.create();\n    let classe = '';\n\n    if (mensagem.nomeEvento !== '') {\n      node.setAttribute('id', mensagem.nomeEvento!);\n    }\n\n    if (mensagem.tipo === TipoMensagem.INFO) {\n      classe = 'mensagem--info';\n    } else if (mensagem.tipo === TipoMensagem.WARNING) {\n      classe = 'mensagem--warning';\n    } else {\n      classe = 'mensagem--danger';\n    }\n\n    node.setAttribute('contenteditable', 'false');\n\n    node.classList.add(classe);\n    node.innerHTML = mensagem.descricao ? mensagem.descricao : '';\n    if (mensagem.fix) {\n      node.innerHTML += `. <span class=\"mensagem__fix\">Corrigir agora.</span>`;\n      node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('mensagem', { bubbles: true, cancelable: true, detail: { mensagem } }));\n    }\n\n    if (mensagem.nomeEvento && mensagem.nomeEvento !== '') {\n      node.innerHTML += `. <span class=\"mensagem__fix\">Saiba mais</span>`;\n      node.onclick = (): boolean => node.dispatchEvent(new CustomEvent(mensagem.nomeEvento!, { bubbles: true, cancelable: true, detail: { mensagem } }));\n    }\n    return node;\n  }\n\n  constructor(mensagem: Mensagem) {\n    super(EtaBlotMensagem.create(mensagem));\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagens extends EtaBlot {\n  static blotName = 'mensagens';\n  static tagName = 'MENSAGENS';\n\n  get instanceBlotName(): string {\n    return EtaBlotMensagens.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('style', 'font-size: 0.8em;');\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMensagens.create());\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotOpcoesDiff extends EtaBlot {\n  static blotName = 'EtaBlotOpcoesDiff';\n  static className = 'blot__opcoes_diff';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotOpcoesDiff.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotOpcoesDiff.className);\n    node.setAttribute('title', 'Exibir diferenças');\n    EtaBlotOpcoesDiff.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotOpcoesDiff.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotOpcoesDiff.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonExibirDiferencas' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('exibir-diferencas', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotTipoOmissis extends EtaBlot {\n  static blotName = 'EtaBlotTipoOmissis';\n  static tagName = 'blot-tipo-omissis';\n  static className = 'blot-tipo-omissis';\n\n  get instanceBlotName(): string {\n    return EtaBlotTipoOmissis.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotTipoOmissis.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.classList.add(EtaBlotTipoOmissis.className);\n    EtaBlotTipoOmissis._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarElemento(elemento: Elemento): void {\n    this.atualizarAtributos(elemento);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotTipoOmissis._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotTipoOmissis.getDescricaoTipoOmissis(elemento);\n    if (elemento.tipo === 'Omissis') {\n      node.classList.add('tipo-omissis');\n    } else {\n      node.classList.remove('tipo-omissis');\n    }\n  }\n\n  private static getDescricaoTipoOmissis(elemento: Elemento): string {\n    switch (elemento.tipoOmissis) {\n      case 'inciso-caput':\n      case 'inciso-paragrafo':\n        return ' Incisos omitidos ';\n      case 'paragrafo':\n        return ' Parágrafos omitidos ';\n      case 'alinea':\n        return ' Alíneas omitidas ';\n      case 'item':\n        return ' Itens omitidos ';\n      default:\n        return '';\n    }\n  }\n}\n","import { removeTagScript, removeTagStyle, removeTagHead } from './../string-util';\nimport { connect } from 'pwa-helpers';\nimport { rootStore } from '../../redux/store';\nimport { cancelarPropagacaoDoEvento } from '../event-util';\nimport { Observable } from '../observable';\nimport { removeAllHtmlTags } from '../string-util';\nimport { CaracteresNaoValidos } from './eta-keyboard';\nimport { EtaQuill } from './eta-quill';\nimport { ajustaHtmlParaColagem } from '../../redux/elemento/util/colarUtil';\n\nconst Clipboard = Quill.import('modules/clipboard');\n\nexport class EtaClipboard extends connect(rootStore)(Clipboard) {\n  onChange: Observable<string> = new Observable<string>();\n  onPasteTextoArticulado: Observable<any> = new Observable<any>();\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n\n    this.quill.root.addEventListener('cut', (ev: ClipboardEvent) => {\n      if (this.quill.cursorDeTextoEstaSobreLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      }\n      const text = document.getSelection()?.toString();\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    });\n  }\n\n  convert(html?: any): DeltaStatic {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html;\n      return super.convert();\n    }\n\n    this.container.innerHTML = this.container.innerHTML\n      .replace(CaracteresNaoValidos, '')\n      .replace(/(<p\\s*)/gi, ' <p')\n      .replace(/(<br\\s*\\/>)/gi, ' ')\n      .replace(/<(?!strong)(?!\\/strong)(?!em)(?!\\/em)(?!sub)(?!\\/sub)(?!sup)(?!\\/sup)(.*?)>/gi, '')\n      .replace(/<([a-z]+) .*?=\".*?( *\\/?>)/gi, '<$1$2');\n\n    const delta: DeltaStatic = super.convert();\n    this.container.innerHTML = '';\n    return delta;\n  }\n\n  onPaste(e: ClipboardEvent): void {\n    if (this.quill.cursorDeTextoEstaSobreLink()) {\n      cancelarPropagacaoDoEvento(e);\n      return;\n    }\n\n    e.preventDefault();\n\n    let html = e?.clipboardData?.getData('text/html');\n    const textoClipboard = e?.clipboardData?.getData('text/plain');\n\n    const range = this.quill.getSelection();\n    if (html) {\n      html = removeTagHead(removeTagScript(removeTagStyle(html)));\n    }\n\n    if (html && html.length > 0 && removeAllHtmlTags(html).length > 0) {\n      const text = ajustaHtmlParaColagem(html);\n\n      if (text !== undefined && this.hasRotulo(text)) {\n        this.adicionaDispositivos(textoClipboard!, text, range);\n        return;\n      }\n      this.quill.deleteText(range.index, range.length);\n      this.quill.clipboard.dangerouslyPasteHTML(range.index, text);\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    } else if (textoClipboard) {\n      if (textoClipboard.trim() !== '' && this.hasRotulo(textoClipboard)) {\n        this.adicionaDispositivos(textoClipboard, textoClipboard, range);\n        return;\n      }\n      this.quill.clipboard.dangerouslyPasteHTML(range.index, textoClipboard);\n      if (textoClipboard) {\n        this.onChange.notify('clipboard');\n      }\n    }\n  }\n\n  private hasRotulo(texto: string): boolean {\n    const t = removeAllHtmlTags(texto)\n      ?.replace(/&nbsp;/g, ' ')\n      .replace(/[\"“']/g, '')\n      .trim();\n\n    const regexRotulo = /^(parte|livro|t[ií]tulo|cap[ií]tulo|se[cç][aã]o|subse[cç][aã]o|art\\.|art|§|par[aá]grafo [uú]nico|[IVXMDC]{1,3}\\s*[-–]{1}|[az]{1,2}\\)|\\d{1,3}[\\t .]+).*/i;\n\n    if (t && t.length > 0 && regexRotulo.test(t)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private adicionaDispositivos(textoColadoOriginal: string, textoColadoAjustado: string, range: any): void {\n    this.onPasteTextoArticulado.notify({ textoColadoOriginal, textoColadoAjustado, range });\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\n\nexport class EtaContainerOpcoes extends EtaContainer {\n  static blotName = 'EtaContainerOpcoes';\n  static tagName = 'DIV';\n  static className = 'container__opcoes';\n\n  get instanceBlotName(): string {\n    return EtaContainerOpcoes.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerOpcoes.className);\n    EtaContainerOpcoes.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerOpcoes.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaContainerOpcoes.atualizarAtributos(elemento, this.domNode);\n    this.atualizarBlots(elemento);\n  }\n\n  atualizarBlots(elemento: Elemento): void {\n    this.blotBotaoExibirDiferencas?.atualizarElemento(elemento);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', EtaContainerOpcoes.className + elemento.uuid);\n  }\n\n  get blotBotaoExibirDiferencas(): EtaBlotOpcoesDiff | undefined {\n    return this.findBlot(EtaBlotOpcoesDiff.blotName) as EtaBlotOpcoesDiff;\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTdDireito extends EtaContainer {\n  static blotName = 'EtaContainerTdDireito';\n  static tagName = 'DIV';\n  static className = 'container__menu';\n\n  alinhamentoMenu: AlinhamentoMenu;\n\n  get instanceBlotName(): string {\n    return EtaContainerTdDireito.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerTdDireito.className);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTdDireito.create());\n    this.alinhamentoMenu = alinhamentoMenu;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTdEsquerdo extends EtaContainer {\n  static blotName = 'EtaContainerTdEsquerdo';\n  static tagName = 'DIV';\n  static className = 'container__texto';\n  static classLevel = 'level';\n\n  get instanceBlotName(): string {\n    return EtaContainerTdEsquerdo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    // node.setAttribute('contenteditable', 'false');\n    // node.setAttribute('contenteditable', elemento.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTdEsquerdo.className + ' container__texto--nivel' + elemento.nivel);\n\n    const fator = Number(getComputedStyle(document.documentElement).getPropertyValue('--elemento-padding-factor'));\n    if (fator) {\n      const padding: number = (elemento.agrupador || elemento.tipo === 'Ementa' ? 0 : elemento.nivel) * fator + 5;\n      node.setAttribute('style', `padding-left: ${padding}px;`);\n    }\n    if (elemento.tipoOmissis) {\n      node.setAttribute('tipo-omissis', elemento.tipoOmissis);\n    }\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerTdEsquerdo.create(elemento));\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTr extends EtaContainer {\n  static blotName = 'EtaContainerTr';\n  static tagName = 'DIV';\n  static className = 'container__linha';\n\n  get instanceBlotName(): string {\n    return EtaContainerTr.blotName;\n  }\n\n  static create(editavel: boolean, alinhamentoMenu: AlinhamentoMenu): any {\n    const node: HTMLElement = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? ' container__linha--reverse' : '';\n\n    // node.setAttribute('contenteditable', editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTr.className + classeAdicional);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(editavel: boolean, alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTr.create(editavel, alinhamentoMenu));\n  }\n}\n","export class EtaQuillBuffer extends Quill {\n  constructor(editorHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n  }\n\n  getConteudoHtml(html: string, offset: number, tamanho: number): string {\n    const blotBuffer: any = this.scroll.children.head;\n\n    this.setConteudo(this.converterHtmlParaDelta(html), Quill.sources.SILENT);\n    this.deleteText(offset + tamanho, blotBuffer.length() - tamanho - 1, Quill.sources.SILENT);\n\n    if (offset > 0) {\n      this.deleteText(0, offset, Quill.sources.SILENT);\n    }\n    return blotBuffer.domNode.innerHTML;\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.clipboard!.convert(html ?? '');\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    this.setConteudo(delta, Quill.sources.SILENT);\n    return this.scroll.children.head.domNode.innerHTML;\n  }\n\n  private setConteudo(delta: DeltaStatic, source?: Sources): void {\n    const blotBuffer: any = this.scroll.children.head;\n    let index = 0;\n\n    if (blotBuffer.length() > 1) {\n      this.deleteText(index, blotBuffer.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n}\n","import { negrito } from '../../../assets/icons/icons';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { Observable } from '../observable';\nimport { EtaBlot } from './eta-blot';\nimport { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotConteudoOmissis } from './eta-blot-conteudo-omissis';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotMensagens } from './eta-blot-mensagens';\nimport { EtaBlotMenu } from './eta-blot-menu';\nimport { EtaBlotMenuBotao } from './eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from './eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from './eta-blot-menu-item';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaBlotTipoOmissis } from './eta-blot-tipo-omissis';\nimport { EtaClipboard } from './eta-clipboard';\nimport { EtaContainerOpcoes } from './eta-container-opcoes';\nimport { EtaContainerRevisao } from './eta-container-revisao';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { EtaKeyboard } from './eta-keyboard';\nimport { EtaQuillBuffer } from './eta-quill-buffer';\n\nexport interface TextoSelecionado {\n  conteudo: string;\n  quantidadeCR: number;\n}\n\nexport class EtaQuill extends Quill {\n  static readonly UNDO: string = 'undo';\n  static readonly REDO: string = 'redo';\n\n  private _mudouDeLinha?: boolean;\n  get mudouDeLinha(): boolean {\n    return this._mudouDeLinha ?? false;\n  }\n\n  private _linhaAnterior?: EtaContainerTable;\n  get linhaAnterior(): EtaContainerTable {\n    return this._linhaAnterior as EtaContainerTable;\n  }\n\n  private _linhaAtual?: EtaContainerTable;\n  get linhaAtual(): EtaContainerTable {\n    return this._linhaAtual as EtaContainerTable;\n  }\n\n  get inicioConteudoAtual(): number {\n    return this.linhaAtual.blotConteudo ? this.getIndex(this.linhaAtual.blotConteudo) : 0;\n  }\n\n  get fimConteudoAtual(): number {\n    return this.inicioConteudoAtual + this.linhaAtual.blotConteudo.tamanho;\n  }\n\n  get textoSelecionado(): TextoSelecionado {\n    const range = this.getSelection() ?? { index: 0, length: 0 };\n    const texto: string = this.getText().substr(range.index, range.length);\n    return {\n      conteudo: texto,\n      quantidadeCR: texto.match(/(\\n)/gi)?.length ?? 0,\n    };\n  }\n\n  private _undoEstruturaVazio = true;\n  get isUndoEstruturaVazio(): boolean {\n    return this._undoEstruturaVazio;\n  }\n\n  set undoEstruturaVazio(undoVazio: boolean) {\n    this._undoEstruturaVazio = undoVazio;\n  }\n\n  private _redoEstruturaVazio = true;\n  get isRedoEstruturaVazio(): boolean {\n    return this._redoEstruturaVazio;\n  }\n\n  set redoEstruturaVazio(redoVazio: boolean) {\n    this._redoEstruturaVazio = redoVazio;\n  }\n\n  // Utilizado no modulo keyboard para anular eventos subrepostos durante o\n  // processamento da mudança de elemento atual. Isso acontece quando o usuário\n  // aperta as teclas que provocam a mudança de elemento muito rápido\n  // (ArrowDown e ArrowUp).\n  private _processandoMudancaLinha = false;\n  get isProcessandoMudancaLinha(): boolean {\n    return this._processandoMudancaLinha;\n  }\n\n  set processandoMudancaLinha(processando: boolean) {\n    this._processandoMudancaLinha = processando;\n  }\n\n  undoRedoEstrutura: Observable<string> = new Observable<string>();\n  elementoSelecionado: Observable<number> = new Observable<number>();\n\n  private buffer: EtaQuillBuffer;\n\n  static configurar(): void {\n    const Parchment: any = EtaQuill.import('parchment');\n    const id = new Parchment.Attributor.Attribute('id', 'id', { scope: Parchment.Scope.BLOCK });\n    const paddingLeft = new Parchment.Attributor.Style('paddingLeft', 'padding-left', { scope: Parchment.Scope.BLOCK });\n    const border = new Parchment.Attributor.Style('border', 'border', { scope: Parchment.Scope.BLOCK });\n    const borderColor = new Parchment.Attributor.Style('borderColor', 'border-color', { scope: Parchment.Scope.BLOCK });\n    const display = new Parchment.Attributor.Style('display', 'display', { scope: Parchment.Scope.BLOCK });\n    const ariaLabel = new Parchment.Attributor.Style('aria-label', 'aria-label', { scope: Parchment.Scope.BLOCK });\n    const DataRotulo = new Parchment.Attributor.Attribute('dataRotulo', 'data-rotulo', { scope: Parchment.Scope.BLOCK });\n\n    const icons = Quill.import('ui/icons');\n    icons['bold'] = negrito;\n\n    // set Quill to use <b> and <i>, not <strong> and <em>\n\n    const bold = Quill.import('formats/bold');\n    bold.tagName = 'b'; // Quill uses <strong> by default\n    Quill.register(bold, true);\n\n    const italic = Quill.import('formats/italic');\n    italic.tagName = 'i'; // Quill uses <em> by default\n    Quill.register(italic, true);\n\n    EtaQuill.register('modules/clipboard', EtaClipboard, true);\n    EtaQuill.register('modules/keyboard', EtaKeyboard, true);\n    EtaQuill.register(EtaBlotConteudoOmissis, true);\n    EtaQuill.register(EtaBlotAbreAspas, true);\n    EtaQuill.register(EtaBlotFechaAspas, true);\n    EtaQuill.register(EtaBlotNotaAlteracao, true);\n    EtaQuill.register(EtaBlotExistencia, true);\n    EtaQuill.register(EtaBlotTipoOmissis, true);\n    EtaQuill.register(EtaBlotConteudo, true);\n    EtaQuill.register(EtaBlotEspaco, true);\n    EtaQuill.register(EtaBlotMensagem, true);\n    EtaQuill.register(EtaBlotMensagens, true);\n    EtaQuill.register(EtaBlotMenuBotao, true);\n    EtaQuill.register(EtaBlotMenuConteudo, true);\n    EtaQuill.register(EtaBlotMenuItem, true);\n    EtaQuill.register(EtaBlotMenu, true);\n    EtaQuill.register(EtaBlotRotulo, true);\n    EtaQuill.register(EtaContainerTable, true);\n    EtaQuill.register(EtaContainerTdEsquerdo, true);\n    EtaQuill.register(EtaContainerTdDireito, true);\n    EtaQuill.register(EtaContainerTr, true);\n    EtaQuill.register(EtaContainerRevisao, true);\n    EtaQuill.register(EtaBlotRevisao, true);\n    EtaQuill.register(EtaBlotRevisaoAceitar, true);\n    EtaQuill.register(EtaBlotRevisaoRecusar, true);\n    EtaQuill.register(EtaContainerOpcoes, true);\n    EtaQuill.register(EtaBlotOpcoesDiff, true);\n    EtaQuill.register(id, true);\n    EtaQuill.register(paddingLeft, true);\n    EtaQuill.register(border, true);\n    EtaQuill.register(borderColor, true);\n    EtaQuill.register(display, true);\n    EtaQuill.register(ariaLabel, true);\n    EtaQuill.register(DataRotulo, true);\n  }\n\n  constructor(editorHtml: HTMLElement, bufferHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n    this.on('text-change', this.onTextChange);\n    this.on('selection-change', this.onSelectionChange);\n    this.buffer = new EtaQuillBuffer(bufferHtml, {});\n    this.root.addEventListener('dragstart', (e: Event) => {\n      e.preventDefault();\n    });\n    this.root.addEventListener('drop', (e: Event) => {\n      e.preventDefault();\n    });\n    this.root.addEventListener('click', this.customClickHandler);\n  }\n\n  customClickHandler = (ev: MouseEvent): void => {\n    try {\n      let blot = EtaQuill.find(ev.target as HTMLElement);\n      if (['EtaBlotOpcoesDiff'].includes(blot.instanceBlotName)) {\n        return;\n      }\n      while (blot && blot.instanceBlotName !== 'EtaContainerTable') {\n        blot = blot.parent;\n      }\n      blot && blot === this.linhaAtual && blot.blotConteudo.domNode.focus();\n    } catch (error) {\n      // não faz nada\n    }\n  };\n\n  destroi(): void {\n    this.root?.removeEventListener('click', this.customClickHandler);\n    this.off('text-change', this.onTextChange);\n    this.off('selection-change', this.onSelectionChange);\n    this.keyboard?.operacaoTecladoInvalida.clean();\n    this.keyboard?.adicionaElementoTeclaEnter.clean();\n  }\n\n  getConteudoHtmlParteLinha(blotConteudo: EtaBlotConteudo, offset: number, tamanho: number): string {\n    return this.buffer.getConteudoHtml(blotConteudo.html, offset, tamanho);\n  }\n\n  getPrimeiraLinha(): EtaContainerTable {\n    return this.scroll.children.head;\n  }\n\n  getUltimaLinha(): EtaContainerTable {\n    return this.scroll.children.tail;\n  }\n\n  getLinhaByUuid2(uuid2: string, linha: EtaContainerTable = this.getPrimeiraLinha()): EtaContainerTable | undefined {\n    if (linha.uuid2 === uuid2) {\n      return linha;\n    }\n    if (linha.next) {\n      return this.getLinhaByUuid2(uuid2, linha.next);\n    } else {\n      return undefined;\n    }\n  }\n\n  getLinha(uuid: number, linha: EtaContainerTable = this.getPrimeiraLinha()): EtaContainerTable | undefined {\n    if (linha.uuid === uuid) {\n      return linha;\n    }\n    if (linha.next) {\n      return this.getLinha(uuid, linha.next);\n    } else {\n      return undefined;\n    }\n  }\n\n  getLinhaPorId(uuid: number): EtaContainerTable {\n    return Quill.find(this.getHtmlElement(EtaContainerTable.criarId(uuid)), false);\n  }\n\n  setIndex(index: number, source: Sources = Quill.sources.USER): void {\n    const range: RangeStatic = this.getSelection(true) ?? { index: 0, length: 0 };\n    if (index !== range.index || range.length !== 0) {\n      try {\n        this.setSelection(index, 0, source);\n      } catch (error) {\n        this.setSelection(index - 1, 0, source);\n      }\n    }\n  }\n\n  setConteudoLinha(blotConteudo: EtaBlotConteudo, delta: DeltaStatic, source?: Sources): void {\n    let index = this.getIndex(blotConteudo);\n\n    if (blotConteudo.length() > 1) {\n      this.deleteText(index, blotConteudo.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.buffer.converterHtmlParaDelta(html);\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    return this.buffer.converterDeltaParaHtml(delta);\n  }\n\n  irProximaLinha(): void {\n    const index: number = this.getIndex(this._linhaAtual?.next.blotConteudo);\n    this.setSelection(index, 0);\n  }\n\n  desmarcarLinhaAtual(linhaCursorAnt: EtaContainerTable): void {\n    this._linhaAnterior = linhaCursorAnt;\n    linhaCursorAnt?.desativarBorda();\n  }\n\n  marcarLinhaAtual(linhaCursor: EtaContainerTable): void {\n    if (linhaCursor && linhaCursor.tipo !== 'Articulacao') {\n      this.atualizarLinhaCorrente(linhaCursor);\n      this.elementoSelecionado.notify(linhaCursor.uuid);\n    }\n  }\n\n  undo(): void {\n    if (this.history.stack.undo.length === 0) {\n      if (!this.isUndoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.UNDO);\n      }\n    } else {\n      this.history.undo();\n      this.focus();\n    }\n  }\n\n  redo(): void {\n    if (this.history.stack.redo.length === 0) {\n      if (!this.isRedoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.REDO);\n      }\n    } else {\n      this.history.redo();\n      this.focus();\n    }\n  }\n\n  limparHistory(): void {\n    setTimeout(() => {\n      this.history.clear();\n    }, 0);\n  }\n\n  private desmarcarLinhas(): void {\n    document.querySelectorAll('.container__elemento--ativo').forEach(elemento => {\n      const linha = this.getLinhaPorId(parseInt(elemento.id.substr(7), 0));\n      linha.desativarBorda();\n    });\n  }\n\n  private verificarMudouLinha(range: RangeStatic, oldRange?: RangeStatic): boolean {\n    // correção bug: cursor se perde ao teclar ↑ na primeira linha\n    if (oldRange && range?.index === 0 && range?.length === 0) {\n      this.setSelection(oldRange.index, 0);\n      return false;\n    }\n\n    if (range) {\n      const blotCursor: EtaBlot = this.getLine(range.index)[0];\n      const linhaCursor: EtaContainerTable = blotCursor.linha;\n\n      if (\n        blotCursor.tagName === EtaBlotRotulo.tagName ||\n        blotCursor.tagName === EtaBlotEspaco.tagName ||\n        blotCursor.tagName === EtaBlotMenu.tagName ||\n        blotCursor.tagName === EtaBlotMensagens.tagName ||\n        blotCursor.tagName === EtaBlotAbreAspas.tagName ||\n        blotCursor.tagName === EtaBlotTipoOmissis.tagName ||\n        blotCursor.tagName === EtaBlotExistencia.tagName\n      ) {\n        this.setSelection(this.getIndex(blotCursor.linha.blotConteudo), 0, Quill.sources.SILENT);\n      } else if (blotCursor.tagName === EtaBlotFechaAspas.tagName || blotCursor.tagName === EtaBlotNotaAlteracao.tagName) {\n        this.setSelection(this.getIndex(blotCursor.linha.blotFechaAspas) - 1, 0, Quill.sources.SILENT);\n      }\n\n      if (oldRange) {\n        const blotCursorAnt: EtaBlot = this.getLine(oldRange.index)[0];\n\n        if (blotCursorAnt) {\n          const linhaCursorAnt: EtaContainerTable = blotCursorAnt.linha;\n\n          if (linhaCursor === linhaCursorAnt) {\n            return false;\n          }\n        }\n      }\n\n      this.desmarcarLinhas();\n      this.marcarLinhaAtual(linhaCursor);\n      return true;\n    }\n    return false;\n  }\n\n  observableSelectionChange = new Observable<EtaContainerTable>();\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic): void => {\n    // Guarda a linhaAtual corrente\n    // OBS: o valor de \"this.linhaAtual\" será alterado dentro de \"this.verificarMudouLinha\" de acordo com alguns critérios.\n    const linhaAtualAux = this.linhaAtual;\n\n    this._mudouDeLinha = this.verificarMudouLinha(range, oldRange);\n\n    if (this._mudouDeLinha) {\n      this.observableSelectionChange.notify(linhaAtualAux);\n      this.limparHistory();\n    }\n  };\n\n  private onTextChange: TextChangeHandler = (): void => {\n    if (this._linhaAtual) {\n      setTimeout(() => {\n        this.linhaAtual?.blotConteudo && this.acertarAspas();\n      }, 0);\n    }\n  };\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.root.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private acertarAspas(): void {\n    if (this._linhaAtual) {\n      const index: number = this.inicioConteudoAtual;\n      const texto: string = this.getText(index, this.linhaAtual?.blotConteudo.tamanho) ?? '';\n      let posicaoTexto = index;\n\n      if (texto.indexOf('\"') > -1) {\n        for (let i = 0; i < texto.length; i++) {\n          if (texto[i] === '\"') {\n            const novaAspas = i === 0 || texto[i - 1].match(/\\s/) ? '“' : '”';\n            posicaoTexto += i;\n            this.deleteText(posicaoTexto, 1, Quill.sources.SILENT);\n            this.insertText(posicaoTexto, novaAspas, Quill.sources.SILENT);\n            posicaoTexto = index;\n          }\n        }\n      }\n    }\n  }\n\n  atualizarLinhaCorrente(linha: EtaContainerTable): void {\n    this.processandoMudancaLinha = true;\n\n    this._linhaAtual = linha;\n    this._linhaAtual.blotConteudo.htmlAnt = this._linhaAtual.blotConteudo.html;\n    linha.ativarBorda();\n    this.scrollToElemento(linha.uuid);\n  }\n\n  private scrollToElemento(uuid: number): void {\n    const el = this.getHtmlElement(EtaContainerTable.criarId(uuid));\n    setTimeout(() => {\n      if (!this.isInEtaBoxViewport(el)) {\n        this.scrollIntoEtaBox(el);\n        // el.scrollIntoView({behavior: 'smooth', block: 'center'});\n      }\n    }, 0);\n  }\n\n  private scrollIntoEtaBox(el: HTMLElement): void {\n    const offsetTopElement = el.offsetTop;\n    el.closest('.ql-editor')?.scrollTo(0, offsetTopElement);\n  }\n\n  private isInEtaBoxViewport(el: HTMLElement): boolean {\n    const rect = el.getBoundingClientRect();\n\n    const lxEtaBox = el.closest('#lx-eta-box');\n    const etaBoxHeight = lxEtaBox?.getBoundingClientRect().bottom || 0;\n\n    return rect.top >= 0 && rect.bottom <= etaBoxHeight;\n  }\n\n  cursorDeTextoEstaSobreLink(deslocamento = 0): boolean {\n    const range = this.getSelection();\n    if (range) {\n      const ops = this.getContents(range.index + deslocamento, 1).ops;\n      return !ops || !ops[0] ? false : ops[0].attributes?.link;\n    }\n    return false;\n  }\n\n  cursorDeTextoEstaSobreOmissis(): boolean {\n    const range = this.getSelection();\n    if (range) {\n      const textBlot = this.getLeaf(range.index);\n      return textBlot[0].text === TEXTO_OMISSIS;\n    }\n    return false;\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotQuebraLinha extends EtaBlot {\n  static blotName = 'EtaBlotQuebraLinha';\n  static tagName = 'BR';\n  // static className = 'espaco';\n\n  get instanceBlotName(): string {\n    return EtaBlotQuebraLinha.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    //node.setAttribute('contenteditable', 'false');\n    //node.innerHTML = '&nbsp;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotQuebraLinha.create());\n  }\n}\n","import { EtaContainerRevisao } from './eta-container-revisao';\nimport { DescricaoSituacao } from './../../model/dispositivo/situacao';\nimport { EtaBlotQuebraLinha } from './eta-blot-quebra-linha';\nimport { EtaBlotTipoOmissis } from './eta-blot-tipo-omissis';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { Elemento } from '../../model/elemento';\nimport { Mensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { isRevisaoPrincipal } from '../../redux/elemento/util/revisaoUtil';\nimport { EtaContainerOpcoes } from './eta-container-opcoes';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\n\nexport class EtaQuillUtil {\n  static alinhamentoMenu = AlinhamentoMenu.Esquerda;\n\n  static criarContainerLinha(elemento: Elemento): EtaContainerTable {\n    const etaTable: EtaContainerTable = new EtaContainerTable(elemento);\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(elemento.editavel, this.alinhamentoMenu);\n    const etaTdTexto: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    if (elemento.abreAspas) {\n      new EtaBlotAbreAspas(elemento).insertInto(etaTdTexto);\n    }\n\n    new EtaBlotRotulo(elemento).insertInto(etaTdTexto);\n\n    if (elemento.dispositivoAlteracao === true && elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      new EtaBlotExistencia(elemento).insertInto(etaTdTexto);\n    }\n\n    if (elemento.tipo === 'Omissis') {\n      new EtaBlotTipoOmissis(elemento).insertInto(etaTdTexto);\n    }\n\n    if (elemento.agrupador) {\n      new EtaBlotQuebraLinha().insertInto(etaTdTexto);\n    }\n\n    new EtaBlotConteudo(elemento).insertInto(etaTdTexto);\n\n    // new EtaBlotFechaAspas(elemento).insertInto(etaTdTexto);\n    // new EtaBlotNotaAlteracao(elemento).insertInto(etaTdTexto);\n    if (elemento.fechaAspas !== undefined && elemento.fechaAspas) {\n      new EtaBlotFechaAspas(elemento).insertInto(etaTdTexto);\n      new EtaBlotNotaAlteracao(elemento).insertInto(etaTdTexto);\n    }\n\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n\n    if (\n      elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n      (elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && elemento.revisao && elemento.revisao.descricao === 'Texto do dispositivo foi alterado')\n    ) {\n      EtaQuillUtil.criarContainerOpcoes(elemento).insertInto(etaTrContainer);\n    }\n\n    if (elemento.revisao && isRevisaoPrincipal(elemento.revisao)) {\n      EtaQuillUtil.criarContainerRevisao(elemento).insertInto(etaTrContainer);\n    }\n\n    etaTdTexto.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    etaTrContainer.insertInto(etaTable);\n\n    return etaTable;\n  }\n\n  static criarContainerRevisao(elemento: Elemento): EtaContainerRevisao {\n    const etaContainerRevisao: EtaContainerRevisao = new EtaContainerRevisao(elemento);\n    new EtaBlotRevisaoAceitar(elemento).insertInto(etaContainerRevisao);\n    new EtaBlotRevisaoRecusar(elemento).insertInto(etaContainerRevisao);\n    new EtaBlotRevisao(elemento).insertInto(etaContainerRevisao);\n    return etaContainerRevisao;\n  }\n\n  static criarContainerOpcoes(elemento: Elemento): EtaContainerOpcoes {\n    const etaContainerOpcoes: EtaContainerOpcoes = new EtaContainerOpcoes(elemento);\n    new EtaBlotOpcoesDiff(elemento).insertInto(etaContainerOpcoes);\n    return etaContainerOpcoes;\n  }\n\n  static criarContainerMensagens(elemento: Elemento): EtaContainerTr {\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(false, this.alinhamentoMenu);\n    const etaTdMensagens: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    if (elemento.mensagens && elemento.mensagens.length > 0) {\n      elemento.mensagens.forEach((mensagem: Mensagem): void => {\n        if (!mensagem.nomeEvento || mensagem.nomeEvento === '') {\n          new EtaBlotMensagem(mensagem).insertInto(etaTdMensagens);\n        } else {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n          if (mensagem.nomeEvento && mensagem.nomeEvento !== '' && !avisoJaExiste) {\n            new EtaBlotMensagem(mensagem).insertInto(etaTdMensagens);\n          }\n        }\n      });\n    }\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n    etaTdMensagens.domNode.classList.add('container__texto--mensagem');\n    etaTdMensagens.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    return etaTrContainer;\n  }\n}\n","import { formatDDMMYYYY } from '../../util/date-util';\n\nexport class Norma {\n  urn = '';\n  nomePreferido = '';\n  nomesAlternativos = [];\n  nomes = [];\n  ementa = '';\n  nomePorExtenso = '';\n\n  constructor(urn = '', nomePreferido = '', nomePorExtenso = '', nomes = [], nomesAlternativos = [], ementa = '') {\n    this.urn = urn;\n    this.nomePreferido = nomePreferido;\n    this.nomesAlternativos = nomesAlternativos;\n    this.nomes = nomes;\n    this.ementa = ementa;\n    this.nomePorExtenso = nomePorExtenso;\n  }\n\n  public numero(): string {\n    return this.urn.split(';')[1];\n  }\n\n  public tipo(): string {\n    return this.urn.split(':')[4];\n  }\n\n  public sData(): string {\n    return this.urn.split(':')[5].split(';')[0];\n  }\n\n  public data(): Date {\n    const stringData = this.sData();\n    return new Date(stringData);\n  }\n\n  public dataDDMMYYYY(): string {\n    return formatDDMMYYYY(this.data());\n  }\n}\n","import { LitElement, html, TemplateResult, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('autocomplete-async')\nexport class AutocompleteAsync extends LitElement {\n  @property({ type: String })\n  placeholder = '';\n  @property({ type: String })\n  label = '';\n  @property({ type: Array, reflect: true })\n  items: Option[] = [];\n\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  @property({ type: Boolean, reflect: true })\n  opened = false;\n\n  @property({ type: Boolean, reflect: true })\n  async = true;\n\n  @property({ type: Number })\n  maxSuggestions = 10;\n\n  @property({ type: Function })\n  onSearch = (value: string): void => console.log('Texto da pesquisa', value);\n\n  @property({ type: Function })\n  onSelect = (value: Option): void => console.log('Item selecionado:', value);\n\n  @property({ type: Function })\n  onChange = (value: string): void => console.log('Mudança texto:', value);\n\n  _interval = 1000;\n\n  _timer: any;\n\n  _bound: any = {};\n\n  _inputEl: any;\n\n  _suggestionEl: any;\n\n  _highlightedEl: any;\n\n  _blur = false;\n\n  _mouseEnter = false;\n\n  _search = (): void => {\n    const { value } = this.contentElement;\n    if (this.async) {\n      clearTimeout(this._timer);\n      if (value.length >= 5 || !this.async) {\n        this._timer = setTimeout(\n          () => {\n            this.onSearch(value);\n          },\n          this.async ? this._interval : 0\n        );\n      }\n    } else {\n      this.onSearch(value);\n    }\n  };\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        .suggest-container {\n          position: relative;\n        }\n\n        ul {\n          position: absolute;\n          display: block;\n          list-style-type: none;\n          margin: 0;\n          padding: 0;\n          z-index: 10000;\n          border: 1px solid grey;\n          background: white;\n        }\n        li {\n          padding: 4px;\n          cursor: pointer;\n        }\n        li.active {\n          background: whitesmoke;\n        }\n        [hidden] {\n          display: none;\n        }\n\n        .lexml-autocomplete-input {\n          width: 100%;\n        }\n\n        @media (max-width: 576px) {\n          .lexml-autocomplete-label {\n            width: calc(100% - 2px);\n            display: block;\n          }\n          .lexml-autocomplete-input {\n            width: calc(100% - 2px);\n          }\n        }\n      </style>\n      <slot id=\"dropdown-input\">\n        <sl-input\n          id=\"defaultInput\"\n          class=\"lexml-autocomplete-input\"\n          type=\"text\"\n          label=${this.label}\n          placeholder=${this.placeholder}\n          .value=${this.value?.description || ''}\n          @change=${e => this._handleChange(e.target.value)}\n          ?disabled=${this.disabled}\n        ></sl-input>\n      </slot>\n      <div class=\"suggest-container\">\n        <ul id=\"suggestions\" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>\n          ${this.items.map((item: Option) => html`<li @click=${(): void => this.autocomplete(item)}>${item.description}</li>`)}\n        </ul>\n      </div>\n    `;\n  }\n\n  /**\n   * Input element getter\n   */\n  get contentElement(): any {\n    if (this._inputEl) return this._inputEl; // Cache\n    if (!this.hasUpdated) return undefined; // No shadow root, no element to use\n\n    const slotElement = this.shadowRoot!.getElementById('dropdown-input') as HTMLSlotElement;\n    const slotInputList = slotElement.assignedElements();\n    this._inputEl = slotInputList.length ? slotInputList[0] : this.shadowRoot!.getElementById('defaultInput');\n    return this._inputEl;\n  }\n\n  private _tempValue?: Option;\n  /**\n   * Value getter from input element.\n   */\n  get value(): any {\n    return this.contentElement && this.contentElement.value;\n  }\n\n  /**\n   * Value setter to input element.\n   */\n  @property({ type: String })\n  set value(value) {\n    if (!this.contentElement) {\n      this._tempValue = value;\n      return;\n    }\n\n    this.contentElement.value = value;\n  }\n\n  firstUpdated(): void {\n    this._suggestionEl = this.shadowRoot!.getElementById('suggestions');\n    this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n\n    this._bound.onKeyDown = this._handleKeyDown.bind(this);\n    this._bound.onKeyUp = this._handleKeyUp.bind(this);\n    this._bound.onFocus = this._handleFocus.bind(this);\n    this._bound.onBlur = this._handleBlur.bind(this);\n    this._bound.onChange = this._handleChange.bind(this);\n\n    this.contentElement.addEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.addEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.addEventListener('focus', this._bound.onFocus);\n    this.contentElement.addEventListener('blur', this._bound.onBlur);\n    this.contentElement.addEventListener('sl-input', this._bound.onChange);\n\n    if (this._tempValue !== undefined) {\n      this.contentElement.value = this._tempValue;\n    }\n  }\n\n  disconnectedCallback(): void {\n    if (!this.contentElement) return; // no events to remove\n    this.contentElement.removeEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.removeEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.removeEventListener('focus', this._bound.onFocus);\n    this.contentElement.removeEventListener('blur', this._bound.onBlur);\n    this.contentElement.removeEventListener('sl-input', this._bound.onChange);\n  }\n\n  focus(options?: FocusOptions): void {\n    if (this.contentElement) {\n      this.contentElement.focus(options);\n    }\n  }\n\n  updated(changed: PropertyValues): void {\n    if (changed.has('items')) {\n      this.items.length > 1 || (this.items.length === 1 && this.items[0] !== this.contentElement.value) ? this.open() : this.close();\n    }\n\n    if (changed.has('opened') && this.opened && this._suggestionEl.childElementCount) {\n      // Highlight the first when there are suggestions\n      // eslint-disable-next-line prefer-destructuring\n      this._highlightedEl = this._suggestionEl.children[0];\n      this._highlightedEl.classList.add('active');\n    }\n  }\n\n  /**\n   * Open suggestions.\n   */\n  open(): void {\n    if (this._suggestionEl.style.width === '0px') {\n      this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n    }\n\n    if (this.items.length) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Close suggestions.\n   */\n  close(): void {\n    this.opened = false;\n    this._highlightedEl = null;\n  }\n\n  /**\n   * Autocomplete input with `value`.\n   * @param {String} value\n   */\n  autocomplete(value: Option): void {\n    this.contentElement.value = value;\n    this.onSelect(value);\n    this.close();\n  }\n\n  _highlightPrev(): void {\n    if (!this._highlightedEl || !this._highlightedEl.previousElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.previousElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  _highlightNext(): void {\n    if (!this._highlightedEl || !this._highlightedEl.nextElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.nextElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _handleChange(value: string): void {\n    this.onChange(value);\n  }\n\n  _handleKeyDown(ev: KeyboardEvent): void {\n    // Prevent up and down from behaving as home and end on some browsers\n    if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  _handleKeyUp(ev: KeyboardEvent): void {\n    switch (ev.key) {\n      case 'ArrowUp':\n        if (this._highlightedEl?.previousElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightPrev();\n        }\n        break;\n      case 'ArrowDown':\n        if (this._highlightedEl?.nextElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightNext();\n        }\n        break;\n      case 'Enter':\n        // eslint-disable-next-line no-unused-expressions\n        this._highlightedEl && this._highlightedEl.click();\n        this.contentElement.blur();\n        break;\n      default:\n        this._search();\n    }\n  }\n\n  _handleFocus(): void {\n    this._blur = false;\n    // eslint-disable-next-line no-unused-expressions\n    this.items.length > 1 && this.open();\n  }\n\n  _handleBlur(): void {\n    this._blur = true;\n    // eslint-disable-next-line no-unused-expressions\n    setTimeout(() => this.close(), 200);\n    //this.items = [];\n  }\n\n  // Handle mouse change focus to suggestions\n  _handleItemMouseEnter(): void {\n    this._mouseEnter = true;\n  }\n\n  _handleItemMouseLeave(): void {\n    this._mouseEnter = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._blur && setTimeout(() => this.close(), 500); // Give user some slack before closing\n  }\n}\n\nexport class Option {\n  description: string;\n  value: string;\n\n  constructor(value, description) {\n    this.description = description;\n    this.value = value;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'autocomplete-async': AutocompleteAsync;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, state, query } from 'lit/decorators.js';\nimport { Option, AutocompleteAsync } from './autocomplete-async';\nimport { Norma } from '../../model/emenda/norma';\n\n@customElement('autocomplete-norma')\nexport class AutocompleteNorma extends LitElement {\n  @property({ type: String })\n  urnInicial = '';\n\n  @property({ type: String })\n  urlAutocomplete;\n\n  @property({ type: Function })\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function\n  onSelect = (value: Norma): void => {};\n  //onSelect = (value: Norma): void => console.log('Norma selecionado:', value);\n\n  @state()\n  _selectedNorma: Norma = new Norma();\n\n  @state()\n  _optionsNorma: Option[] = [];\n\n  _normas: Norma[] = [];\n\n  @query('#auto-complete-async')\n  _autoCompleteAsync!: AutocompleteAsync;\n\n  async _searchNormas(query: string): Promise<Norma[]> {\n    try {\n      const _response = await fetch(`${this.urlAutocomplete}?query=${query}`);\n      const _normas = await _response.json();\n      return _normas.map(n => new Norma(n.urn, n.nomePreferido, n.nomePorExtenso, n.nomes, n.nomesAlternativos, n.ementa));\n    } catch (err) {\n      console.log('Erro inesperado ao consultar as normas');\n      console.log(err);\n    }\n    return Promise.resolve([]);\n  }\n\n  _updateNormas(paramQuery: string): void {\n    const query = paramQuery\n      .replace(/[,;]| nº /gi, ' ')\n      .replaceAll('.', '')\n      .toLowerCase();\n    this._searchNormas(query).then(normas => {\n      this._normas = normas;\n      this._optionsNorma = normas.map(n => new Option(n.urn, n.nomePreferido));\n    });\n  }\n\n  _handleSearch(value: string): void {\n    this._updateNormas(value);\n  }\n\n  _handleSelect(option: Option): void {\n    const norma = this._normas.find(norma => norma.urn === option.value);\n    if (norma) {\n      this._selectedNorma = norma as Norma;\n      this.onSelect(this._selectedNorma);\n    }\n  }\n\n  _getNormaByURN(urn: string): void {\n    const norma = new Norma(urn);\n    const query = `${norma.sData()} ${norma.numero()}`;\n    this._searchNormas(query).then(normas => {\n      this._selectedNorma = normas.find(n => n.urn === urn) as Norma;\n      this.onSelect(this._selectedNorma);\n      this._autoCompleteAsync.value = this._selectedNorma.nomePreferido;\n    });\n  }\n\n  firstUpdated(): void {\n    if (this.urnInicial) {\n      this._getNormaByURN(this.urnInicial);\n    }\n    this.focusAutoComplete();\n  }\n\n  focusAutoComplete(): void {\n    setTimeout(() => {\n      this._autoCompleteAsync.focus();\n    }, 100);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _handleChange(value: string): void {\n    // console.log('_handleChange', value);\n    this._selectedNorma = new Norma();\n    this.onSelect(this._selectedNorma);\n  }\n\n  render(): TemplateResult {\n    return html`<style>\n        .ajuda,\n        .sp-ementa {\n          font-size: var(--sl-font-size-small);\n          font-weight: normal;\n        }\n        .wp-ementa {\n          height: 85px;\n          margin-top: 10px;\n          overflow-y: auto;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 5px;\n          border-radius: var(--sl-border-radius-small);\n          background-color: var(--sl-color-gray-100);\n        }\n        .wp-ementa p {\n          margin: 0;\n        }\n        .lb-ementa {\n          display: block;\n          margin-top: 10px;\n        }\n      </style>\n      <div>\n        <autocomplete-async\n          id=\"auto-complete-async\"\n          label=\"Identificação da norma\"\n          placeholder=\"ex: Lei 10406 ou Código Civil\"\n          .items=${this._optionsNorma}\n          .onSearch=${value => this._handleSearch(value)}\n          .onSelect=${value => this._handleSelect(value)}\n          .onChange=${value => this._handleChange(value)}\n        ></autocomplete-async>\n        <span class=\"ajuda\">Informar a identificação da norma com tipo e número ou o apelido da norma. São aceitas abreviações como LCP e MPV.</span>\n        <label class=\"lb-ementa\">Ementa:</label>\n        <div class=\"wp-ementa\"><span class=\"sp-ementa\">${(this._selectedNorma.ementa || '').slice(0, 450)}</span></div>\n      </div>`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'autocomplete-norma': AutocompleteNorma;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { Norma } from '../../model/emenda/norma';\nimport { validaDispositivoAssistente } from '../../model/lexml/numeracao/parserReferenciaDispositivo';\nimport './autocomplete-norma';\n\nexport async function assistenteAlteracaoDialog(elemento: Elemento, quill: any, store: any, action: any, urlAutocomplete: string): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Assistente de alteração de norma';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n    .ajuda {\n      font-size: var(--sl-font-size-small);\n      font-weight: normal;\n    }\n\n    sl-radio-group::part(base) {\n      display: grid;\n      grid-template-columns: 230px 1fr;\n      grid-gap: 0px;\n      flex-wrap: wrap;\n    }\n\n    sl-radio::part(base) {\n      display: flex;\n      flex-direction: row;\n    }\n\n    sl-radio-group sl-input::part(form-control) {\n      display: flex;\n      flex-direction: row;\n      gap: 10px;\n      align-items: center;\n      flex-wrap: wrap;\n    }\n\n    #dataNorma::part(form-control-input){\n      max-width: 160px;\n    }\n    #anoNorma::part(form-control-input){\n      max-width: 90px;\n    }\n\n    @media (max-width: 520px) {\n      sl-radio-group::part(base) {\n        display: flex;\n        grid-template-columns: column;\n        gap: 10px;\n        flex-wrap: wrap;\n      }\n    }\n  </style>\n  <autocomplete-norma id=\"auto-norma\" urlAutocomplete=\"${urlAutocomplete}\"></autocomplete-norma>\n  <br />\n    <sl-input name=\"dispositivos\" id=\"dispositivos\" placeholder=\"ex: inciso I do § 3º do Art.1º\" label=\"Dispositivo da norma\" clearable></sl-input>\n    <span class=\"ajuda\">Informar apenas um dispositivo. Depois poderão ser adicionados outros.</span>\n    <p class=\"ajuda\" style=\"margin-block-end: 0;\">\n      Terminar sempre com o artigo, por exemplo:\n    </p>\n    <ul class=\"ajuda\" style=\"margin-block-start: .3em; margin-block-end: 0;\">\n      <li>item 9 da alínea b do inciso V do parágrafo 4º do artigo 12-B</li>\n      <li>ali c, inc X, par 6, art 1</li>\n      <li>§ 8 art 32</li>\n      <li>parágrafo único do art 7º</li>\n    </ul>\n  </div>\n  <br/>\n  <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n    <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n    <strong>Dados inválidos.</strong><br/>\n    <span>Revise os dados informados.</span>\n  </sl-alert>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  let normaAlteracao: Norma = new Norma();\n  const autocompleteNorma = content.querySelector('#auto-norma');\n  const dispositivos = content.querySelector('#dispositivos');\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const alerta = content.querySelector('sl-alert');\n  const alertaMensagem = alerta!.querySelector('strong');\n  const alertaComplemento = alerta!.querySelector('span');\n\n  const preencheAlerta = (mensagem = 'Dados inválidos.', complemento = 'Revise os dados informados.'): void => {\n    alertaMensagem!['innerHTML'] = mensagem;\n    alertaComplemento!['innerHTML'] = complemento;\n  };\n\n  autocompleteNorma!['onSelect'] = (norma): void => {\n    normaAlteracao = norma;\n  };\n\n  ok.onclick = (): void => {\n    let temErro = false;\n    const textoDispositivo = (dispositivos as HTMLInputElement)?.value;\n\n    preencheAlerta();\n\n    if (!normaAlteracao.urn) {\n      preencheAlerta('Dados inválidos', 'Identifique uma norma a ser alterada.');\n      temErro = true;\n    } else if (textoDispositivo && textoDispositivo.length > 0) {\n      try {\n        validaDispositivoAssistente(textoDispositivo);\n      } catch (err) {\n        preencheAlerta('Dispositivo da norma não identificado.', 'Informe apenas um dispositivo em um dos formatos acima. Depois será possível alterar outros dispositivos.');\n        temErro = true;\n      }\n    } else {\n      preencheAlerta('Informe o dispositivo da norma a ser alterada.', 'Informe apenas um dispositivo em um dos formatos acima. Depois será possível alterar outros dispositivos.');\n      temErro = true;\n    }\n\n    if (!temErro) {\n      quill.focus();\n      alerta?.hide();\n      dialogElem?.hide();\n      dialogElem?.remove();\n      elemento.norma = normaAlteracao.urn;\n      store.dispatch(action.execute(elemento, normaAlteracao.urn, textoDispositivo));\n    } else {\n      alerta?.show();\n    }\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    dialogElem?.remove();\n  };\n  quill.blur();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  const elementoFocavel = document\n    .querySelector('#auto-norma')\n    ?.shadowRoot?.querySelector('#auto-complete-async')\n    ?.shadowRoot?.querySelector('#defaultInput')\n    ?.shadowRoot?.querySelector('#input') as HTMLInputElement;\n  elementoFocavel?.focus();\n}\n","import { atualizarNotaAlteracaoAction } from './../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { Elemento } from '../../model/elemento';\n\nexport const editarNotaAlteracaoDialog = (elemento: Elemento, quill: any, store: any): void => {\n  if (podeMostrarDialog(elemento)) {\n    const dialogElem = document.createElement('sl-dialog');\n    document.body.appendChild(dialogElem);\n    dialogElem.label = 'Nota de alteração';\n    dialogElem.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const content = document.createRange().createContextualFragment(`\n    <sl-radio-group fieldset label=\"Selecione o tipo de nota de alteração:\">\n      <sl-radio class=\"nota\" id=\"nota-nr\" value=\"NR\">Nova redação '(NR)'</sl-radio>\n      <sl-radio class=\"nota\" id=\"nota-vazia\" value=\"\">Sem nota de alteração</sl-radio>\n    </sl-radio-group>\n    <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n    <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n    `);\n\n    const opcoes = {\n      NR: content.querySelector('#nota-nr'),\n      VZ: content.querySelector('#nota-vazia'),\n    };\n\n    const notaAlteracao = elemento.notaAlteracao === 'AC' ? undefined : elemento.notaAlteracao;\n    opcoes[notaAlteracao || 'VZ'].checked = true;\n\n    const botoes = content.querySelectorAll('sl-button');\n    const cancelar = botoes[0];\n    const ok = botoes[1];\n\n    ok.onclick = (): void => {\n      const newValue = (document.querySelector('sl-radio.nota[aria-checked=\"true\"]') as any).value;\n      if (elemento.notaAlteracao !== newValue) {\n        store.dispatch(atualizarNotaAlteracaoAction.execute(elemento, newValue));\n      }\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    cancelar.onclick = (): void => {\n      quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    quill.blur();\n    dialogElem.appendChild(content);\n    dialogElem.show();\n    setTimeout(() => {\n      opcoes[elemento.notaAlteracao || 'VZ'].focus();\n    }, 0);\n  }\n};\n\nconst podeMostrarDialog = (elemento: Elemento): boolean => {\n  if (elemento.revisao) {\n    if (elemento.revisao.descricao === 'Dispositivo removido') {\n      return false;\n    }\n  }\n  return true;\n};\n","import { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { substituiEspacosEntreTagsPorNbsp, substituiMultiplosEspacosPorNbsp, textoDiffAsHtml } from '../../util/string-util';\n\nexport class TextoDiff {\n  quill!: EtaQuill;\n  textoOriginal!: string;\n  textoAntesRevisao!: string;\n  textoAtual!: string;\n  adicionado = false;\n}\n\nconst OMISSIS = '....................';\n\nexport const exibirDiferencasDialog = (diff: TextoDiff): void => {\n  Array.from(document.querySelectorAll('#slDialogExibirDiferencas')).forEach(el => document.body.removeChild(el));\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.id = 'slDialogExibirDiferencas';\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Exibir diferenças do texto atual com';\n\n  const fnDestroy = (): void => {\n    try {\n      diff.quill && diff.quill.focus();\n      dialogElem?.hide();\n      document.body.removeChild(dialogElem);\n    } catch (error) {\n      // console.log(error);\n    }\n  };\n\n  dialogElem.addEventListener('sl-after-hide', () => {\n    setTimeout(() => fnDestroy(), 0);\n  });\n\n  diff = trataOmissisDiff(diff);\n\n  const contemRevisao = !!diff.textoAntesRevisao;\n\n  let diferencaModificado = textoDiffAsHtml(diff.textoOriginal, diff.textoAtual, 'diffWords');\n  let diferencaSemEspacosDuplicados = diferencaModificado.replace(/\\s+/g, ' ');\n  diferencaModificado = substituiEspacosEntreTagsPorNbsp(textoDiffAsHtml(diferencaSemEspacosDuplicados, diferencaModificado, 'diffChars'), ['ins', 'del']);\n\n  const tabModificado = !diff.adicionado && diferencaModificado !== diff.textoOriginal ? `<sl-tab slot=\"nav\" panel=\"modificado\"> Texto original </sl-tab>` : '';\n  const tabModificadoRevisao = contemRevisao ? `<sl-tab slot=\"nav\" panel=\"modificadoRevisao\">Texto antes da revisão</sl-tab>` : '';\n\n  let diferencaEntreTextoAtualETextoAntesRevisao = contemRevisao ? textoDiffAsHtml(diff.textoAntesRevisao, diff.textoAtual, 'diffWords') : undefined;\n  if (contemRevisao) {\n    diferencaSemEspacosDuplicados = diferencaEntreTextoAtualETextoAntesRevisao!.replace(/\\s+/g, ' ');\n    diferencaEntreTextoAtualETextoAntesRevisao = substituiEspacosEntreTagsPorNbsp(\n      textoDiffAsHtml(diferencaSemEspacosDuplicados, diferencaEntreTextoAtualETextoAntesRevisao!, 'diffChars'),\n      ['ins', 'del']\n    );\n  }\n\n  diff.textoOriginal = substituiMultiplosEspacosPorNbsp(diff.textoOriginal);\n  diff.textoAtual = substituiMultiplosEspacosPorNbsp(diff.textoAtual);\n  if (contemRevisao) {\n    diff.textoAntesRevisao = substituiMultiplosEspacosPorNbsp(diff.textoAntesRevisao);\n  }\n  const tabPanelModificado =\n    !diff.adicionado && diferencaModificado !== diff.textoOriginal\n      ? `<sl-tab-panel name=\"modificado\">\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n            Texto original\n          </div>\n          <p class=\"texto-quill\">\n            ${diff.textoOriginal}\n          </p>\n        </sl-card>\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n            Diferença\n          </div>\n          <p class=\"texto-quill\">\n            ${diferencaModificado}\n          </p>\n        </sl-card>\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n          Texto atual\n          </div>\n          <p class=\"texto-quill\">\n            ${diff.textoAtual}\n          </p>\n        </sl-card>\n\n      </sl-tab-panel>`\n      : '';\n\n  const tabPanelModificadoRevisao = contemRevisao\n    ? `<sl-tab-panel name=\"modificadoRevisao\">\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Texto antes da revisão\n            </div>\n            <p class=\"texto-quill\">\n              ${diff.textoAntesRevisao}\n            </p>\n          </sl-card>\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Diferença\n            </div>\n            <p class=\"texto-quill\">\n              ${diferencaEntreTextoAtualETextoAntesRevisao!}\n            </p>\n          </sl-card>\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Texto atual\n            </div>\n            <p class=\"texto-quill\">\n              ${diff.textoAtual}\n            </p>\n          </sl-card>\n\n        </sl-tab-panel>`\n    : '';\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n\n    sl-dialog {\n      --width: 90vw;\n    }\n    sl-dialog::part(base) {\n      max-width: 1200px;\n      margin: 0 auto;\n    }\n\n    .texto-alterado ins {\n      background-color: #c6ffc6;\n      text-decoration: none;\n    }\n\n    .texto-alterado del {\n      background-color: #ffc6c6;\n    }\n\n    p .texto-quill {\n      white-space: pre-wrap;\n      text-align: justify;\n      text-indent: 0 !important;\n    }\n\n    sl-tab-panel::part(base) {\n      padding-top: 1rem;\n      display: flex;\n      flex-direction: row;\n      gap: 1rem;\n      align-items: stretch;\n      justify-content: center;\n    }\n\n    sl-card {\n      box-shadow: var(--sl-shadow-x-large) !important;\n      width: 33%;\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n    }\n\n    @media (max-width: 768px) {\n      sl-card {\n        width: 100%;\n      }\n    }\n\n    sl-card::part(base){\n      height: 100%;\n    }\n\n    sl-card::part(header) {\n      background-color: var(--sl-color-neutral-200);\n    }\n\n\n    @media (max-width: 768px) {\n      sl-tab-panel::part(base) {\n        flex-direction: column;\n      }\n      sl-dialog {\n        --width: 100vw !important;\n      }\n    }\n\n  </style>\n  <div class=\"texto-alterado\">\n    <sl-tab-group>\n      ${tabModificado}\n      ${tabModificadoRevisao}\n\n      ${tabPanelModificado}\n      ${tabPanelModificadoRevisao}\n    </sl-tab-group>\n  </div>\n\n\n  <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n  `);\n\n  const fechar = content.querySelectorAll('sl-button')[0];\n\n  fechar.onclick = (): Promise<void> => dialogElem?.hide();\n\n  diff.quill && diff.quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n};\n\nconst trataOmissisDiff = (diff: TextoDiff): TextoDiff => {\n  if (diff.textoAtual.includes('....')) {\n    diff.textoAtual = OMISSIS;\n  }\n  return diff;\n};\n","export const alertarInfo = (mensagem: string): void => {\n  const idAlert = 'alertaInfo';\n  const currentAlert = document.getElementById(idAlert);\n\n  if (!currentAlert) {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n          <sl-icon name=\"exclamation-octagon\" slot=\"icon\" id=\"${idAlert}\"></sl-icon>\n          ${mensagem}\n        `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n};\n","import { isRevisaoPrincipal, getQuantidadeRevisoes } from './../../redux/elemento/util/revisaoUtil';\nimport { colarTextoArticuladoDialog, onChangeColarDialog } from './colarTextoArticuladoDialog';\nimport { InfoTextoColado } from './../../redux/elemento/util/colarUtil';\nimport { AdicionarAgrupadorArtigo } from './../../model/lexml/acao/adicionarAgrupadorArtigoAction';\nimport { adicionarAgrupadorArtigoDialog } from './adicionarAgrupadorArtigoDialog';\nimport { SlButton, SlInput } from '@shoelace-style/shoelace';\nimport { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\nimport { CmdEmdUtil } from '../../emenda/comando-emenda-util';\nimport { adicionarAlerta } from '../../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\nimport { ClassificacaoDocumento } from '../../model/documento/classificacao';\nimport { Elemento } from '../../model/elemento';\nimport { ElementoAction, isAcaoMenu } from '../../model/lexml/acao';\nimport { adicionarAlteracaoComAssistenteAction } from '../../model/lexml/acao/adicionarAlteracaoComAssistenteAction';\nimport { adicionarElementoAction } from '../../model/lexml/acao/adicionarElementoAction';\nimport { atualizarReferenciaElementoAction } from '../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { atualizarTextoElementoAction } from '../../model/lexml/acao/atualizarTextoElementoAction';\nimport { autofixAction } from '../../model/lexml/acao/autoFixAction';\nimport { elementoSelecionadoAction } from '../../model/lexml/acao/elementoSelecionadoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../../model/lexml/acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../../model/lexml/acao/moverElementoAcimaAction';\nimport { redoAction } from '../../model/lexml/acao/redoAction';\nimport { removerElementoAction } from '../../model/lexml/acao/removerElementoAction';\nimport { removerElementoSemTextoAction } from '../../model/lexml/acao/removerElementoSemTextoAction';\nimport { renumerarElementoAction } from '../../model/lexml/acao/renumerarElementoAction';\nimport { shiftTabAction } from '../../model/lexml/acao/shiftTabAction';\nimport { tabAction } from '../../model/lexml/acao/tabAction';\nimport { UndoAction } from '../../model/lexml/acao/undoAction';\nimport { validarArticulacaAction } from '../../model/lexml/acao/validarArticulacaoAction';\nimport { validarElementoAction } from '../../model/lexml/acao/validarElementoAction';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { getNomeExtenso } from '../../model/lexml/documento/urnUtil';\nimport { podeRenumerar, rotuloParaEdicao } from '../../model/lexml/numeracao/numeracaoUtil';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\nimport { AutoFix } from '../../model/lexml/util/mensagem';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { rootStore } from '../../redux/store';\nimport { EtaBlotConteudo } from '../../util/eta-quill/eta-blot-conteudo';\nimport { EtaBlotMenu } from '../../util/eta-quill/eta-blot-menu';\nimport { EtaBlotMenuBotao } from '../../util/eta-quill/eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from '../../util/eta-quill/eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from '../../util/eta-quill/eta-blot-menu-item';\nimport { EtaBlotRotulo } from '../../util/eta-quill/eta-blot-rotulo';\nimport { EtaContainerTable } from '../../util/eta-quill/eta-container-table';\nimport { Keyboard } from '../../util/eta-quill/eta-keyboard';\nimport { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { EtaQuillUtil } from '../../util/eta-quill/eta-quill-util';\nimport { Subscription } from '../../util/observable';\nimport { AjudaModalComponent } from '../ajuda/ajuda.modal.component';\nimport { AtalhosModalComponent } from '../ajuda/atalhos.modal.component';\nimport { LexmlEtaComponent } from '../lexml-eta.component';\nimport { atualizarNotaAlteracaoAction } from './../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { isNumeracaoValidaPorTipo } from './../../model/lexml/numeracao/numeracaoUtil';\nimport { ComandoEmendaModalComponent } from './../comandoEmenda/comandoEmenda.modal.component';\nimport { assistenteAlteracaoDialog } from './assistenteAlteracaoDialog';\nimport { editarNotaAlteracaoDialog } from './editarNotaAlteracaoDialog';\nimport { informarNormaDialog } from './informarNormaDialog';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { transformarAction } from '../../model/lexml/acao/transformarAction';\nimport { LexmlEmendaConfig } from '../../model/lexmlEmendaConfig';\nimport { isRevisaoDeExclusao, setCheckedElement } from '../../redux/elemento/util/revisaoUtil';\nimport { aceitarRevisaoAction } from '../../model/lexml/acao/aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from '../../model/lexml/acao/rejeitarRevisaoAction';\nimport { TextoDiff, exibirDiferencasDialog } from './exibirDiferencaDialog';\nimport { EtaContainerRevisao } from '../../util/eta-quill/eta-container-revisao';\nimport { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { EtaContainerOpcoes } from '../../util/eta-quill/eta-container-opcoes';\nimport { buscaDispositivoById } from '../../model/lexml/hierarquia/hierarquiaUtil';\nimport { exibirDiferencaAction } from '../../model/lexml/acao/exibirDiferencaAction';\nimport { alertarInfo } from '../../redux/elemento/util/alertaUtil';\n\n@customElement('lexml-eta-editor')\nexport class EditorComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  @query('lexml-ajuda-modal')\n  private ajudaModal!: AjudaModalComponent;\n\n  @query('lexml-atalhos-modal')\n  private atalhosModal!: AtalhosModalComponent;\n\n  @query('lexml-emenda-comando-modal')\n  private comandoEmendaModal!: ComandoEmendaModalComponent;\n\n  @query('#btnAceitarTodasRevisoes')\n  private btnAceitarTodasRevisoes!: HTMLButtonElement;\n\n  @query('#btnRejeitarTodasRevisoes')\n  private btnRejeitarTodasRevisoes!: HTMLButtonElement;\n\n  private modo = ClassificacaoDocumento.EMENDA;\n\n  private _quill?: EtaQuill;\n  private get quill(): EtaQuill {\n    return this._quill as EtaQuill;\n  }\n\n  private eventosOnChange: StateType[] = [];\n\n  private inscricoes: Subscription[] = [];\n  private timerOnChange?: any;\n\n  private _idSwitchRevisao = 'chk-em-revisao';\n  private _idBadgeQuantidadeRevisao = 'badge-marca-alteracao';\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  async firstUpdated(): Promise<void> {\n    this.inicializar(this.configEditor());\n    this.querySelectorAll('.ql-bold, .ql-italic, .ql-script').forEach(tool => {\n      tool.addEventListener('click', (event: any) => {\n        event.stopImmediatePropagation();\n      });\n    });\n  }\n\n  stateChanged(state: any): void {\n    if (!this.quill) {\n      this.quillNaoInicializado(state);\n      return;\n    }\n    this.quill!.undoEstruturaVazio = (state.elementoReducer.past ?? []).length === 0;\n    this.quill!.redoEstruturaVazio = (state.elementoReducer.future ?? []).length === 0;\n\n    if (state.elementoReducer.ui) {\n      if (state.elementoReducer.ui.message) {\n        //this.alertar(state.elementoReducer.ui.message.descricao);\n        alertarInfo(state.elementoReducer.ui.message.descricao);\n      } else if (state.elementoReducer.ui.events[0]?.stateType !== 'AtualizacaoAlertas') {\n        this.processarStateEvents(state.elementoReducer.ui.events);\n      }\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.inscricoes.forEach((i: Subscription) => i.cancel());\n    this.destroiQuill();\n    super.disconnectedCallback();\n  }\n\n  @property({ type: Boolean })\n  exibirBotoesParaTratarTodas = false;\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          --lx-eta-editor-height: 100%;\n          --lx-eta-editor-overflow: display;\n        }\n\n        lexml-eta-editor .ql-editor {\n          white-space: normal;\n        }\n\n        #lx-eta-editor {\n          overflow: var(--lx-eta-editor-overflow);\n          display: block;\n          height: var(--heightEmenda);\n        }\n        .sl-toast-stack sl-alert::part(base) {\n          background-color: var(--sl-color-danger-100);\n        }\n        .checkBoxRevisao {\n          padding: 3px 5px;\n          margin: 5px 5px 5px 4px;\n        }\n      </style>\n      <div id=\"lx-eta-box\">\n        <div id=\"lx-eta-barra-ferramenta\">\n          <button class=\"ql-bold\" title=\"Negrito (Ctrl+b)\"></button>\n          <button class=\"ql-italic\" title=\"Itálico (Ctrl+i)\"></button>\n          <button class=\"ql-script\" value=\"sub\" title=\"Subscrito\"></button>\n          <button class=\"ql-script\" value=\"super\" title=\"Sobrescrito\"></button>\n\n          <button @click=${this.onClickUndo} class=\"lx-eta-ql-button lx-eta-btn-desfazer\" title=\"Desfazer (Ctrl+Z)\">\n            <svg class=\"icon-undo-redo\" id=\"undo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n          <button @click=${this.onClickRedo} class=\"lx-eta-ql-button\" title=\"Refazer (Ctrl+y)\">\n            <svg class=\"icon-undo-redo lx-eta-rebate-180-graus\" id=\"redo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n          <button type=\"button\" class=\"ql-clean\" title=\"Remover formatação\">\n            <svg class=\"\" viewBox=\"0 0 18 18\">\n              <line class=\"ql-stroke\" x1=\"5\" x2=\"13\" y1=\"3\" y2=\"3\"></line>\n              <line class=\"ql-stroke\" x1=\"6\" x2=\"9.35\" y1=\"12\" y2=\"3\"></line>\n              <line class=\"ql-stroke\" x1=\"11\" x2=\"15\" y1=\"11\" y2=\"15\"></line>\n              <line class=\"ql-stroke\" x1=\"15\" x2=\"11\" y1=\"11\" y2=\"15\"></line>\n              <rect class=\"ql-fill\" height=\"1\" rx=\"0.5\" ry=\"0.5\" width=\"7\" x=\"2\" y=\"14\"></rect>\n            </svg>\n          </button>\n\n          <lexml-switch-revisao\n          class=\"revisao-container\"\n          .nomeSwitch=\"${this._idSwitchRevisao}\"\n          .nomeBadgeQuantidadeRevisao=\"${this._idBadgeQuantidadeRevisao}\"\n          modo=\"${this.modo}\"\n          >\n          </lexml-switch-revisao>\n\n          <sl-button class=\"button-navegacao-marca\" variant=\"default\" size=\"small\" circle @click=${(): void => this.navegarEntreMarcasRevisao('abaixo')}>\n            <sl-icon-button name=\"arrow-down\"></sl-icon-button>\n          </sl-button>\n\n          <sl-button class=\"button-navegacao-marca\" variant=\"default\" size=\"small\" circle @click=${(): void => this.navegarEntreMarcasRevisao('acima')}>\n            <sl-icon-button name=\"arrow-up\"></sl-icon-button>\n          </sl-button>\n\n          ${this.exibirBotoesParaTratarTodas ? this.renderBotoesParaTratarTodasRevisoes() : ''}\n\n          <input type=\"button\" @click=${this.artigoOndeCouber} class=\"${'ql-hidden'} btn--artigoOndeCouber\" value=\"Propor artigo onde couber\" title=\"Artigo onde couber\"></input>\n          <div class=\"mobile-buttons\">\n            <button class=\"mobile-button btn-comando\" title=\"Comando\" @click=${this.showComandoEmendaModal}>\n              <sl-icon name=\"code\"></sl-icon>\n              <span>Comando</span>\n            </button>\n            <button class=\"mobile-button btn-dicas\" title=\"Dicas\" @click=${this.showAjudaModal}>\n              <sl-icon name=\"lightbulb\"></sl-icon>\n              <span>Dicas</span>\n            </button>\n            <button class=\"mobile-button\" title=\"Atalhos\" @click=${this.showAtalhosModal}>\n              <sl-icon name=\"keyboard\"></sl-icon>\n              <span>Atalhos</span>\n            </button>\n          </div>\n        </div>\n        <div id=\"lx-eta-editor\"></div>\n      </div>\n      <elix-toast id=\"toast-alerta\" duration=\"3000\">\n        <div id=\"toast-msg\"></div>\n      </elix-toast>\n      <div id=\"lx-eta-buffer\"><p></p></div>\n      <lexml-ajuda-modal></lexml-ajuda-modal>\n      <lexml-emenda-comando-modal></lexml-emenda-comando-modal>\n      <lexml-atalhos-modal></lexml-atalhos-modal>\n      <!-- <lexml-sufixos-modal></lexml-sufixos-modal> -->\n    `;\n  }\n\n  private renderBotoesParaTratarTodasRevisoes(): TemplateResult {\n    return html`\n      <sl-icon-button id=\"btnRejeitarTodasRevisoes\" name=\"x\" label=\"\" title=\"Rejeitar Revisões\" ?disabled=${true} @click=${(): void => this.rejeitarTodasRevisoes()}>\n        Rejeitar Revisões\n      </sl-icon-button>\n\n      <sl-icon-button id=\"btnAceitarTodasRevisoes\" name=\"check-lg\" label=\"\" title=\"Aceitar Revisões\" ?disabled=${true} @click=${(): void => this.aceitarTodasRevisoes()}>\n        Aceitar Revisões\n      </sl-icon-button>\n    `;\n  }\n\n  private showAjudaModal(): void {\n    this.ajudaModal.show();\n  }\n\n  private showAtalhosModal(): void {\n    this.atalhosModal.show();\n  }\n\n  private showComandoEmendaModal(): void {\n    this.comandoEmendaModal.show();\n  }\n\n  private formatacaoAlterada(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.agendarEmissaoEventoOnChange('toolbar');\n    }\n  }\n\n  private onClickUndo(): void {\n    this.quill.undo();\n  }\n\n  private onClickRedo(): void {\n    this.quill.redo();\n  }\n\n  private artigoOndeCouber(): void {\n    //rootStore.dispatch(validarArticulacaAction.execute());\n  }\n\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic, source: Sources): void => {\n    if (range?.length === 0 && source === Quill.sources.USER) {\n      this.ajustarLinkParaNorma();\n    }\n  };\n\n  private ajustarLinkParaNorma(): void {\n    const linkTooltip = document.querySelector('a.ql-preview');\n    const href = linkTooltip?.getAttribute('href');\n    if (href?.startsWith('urn')) {\n      const url = 'https://normas.leg.br/?urn=' + href;\n      linkTooltip!.setAttribute('href', url);\n      linkTooltip!.innerHTML = getNomeExtenso(href);\n    }\n  }\n\n  private onBold(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('bold', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onItalic(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('italic', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onScript(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('script', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onOperacaoInvalida(): void {\n    this.alertar('Operação não permitida.');\n  }\n\n  private isDesmembramento(textoAnterior: string, textoLinhaAtual: string, textoNovaLinha: string): boolean {\n    return (textoLinhaAtual + textoNovaLinha).localeCompare(textoAnterior) !== 0;\n  }\n\n  private adicionarElemento(range: RangeStatic): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n\n    const indexInicio: number = this.quill.inicioConteudoAtual ?? 0;\n    const indexFim: number = indexInicio + blotConteudo!.tamanho ?? 0;\n    let textoLinha = '';\n    let textoNovaLinha = '';\n\n    if (range.index === indexInicio) {\n      textoLinha = '';\n      textoNovaLinha = blotConteudo.html;\n    } else if (range.index === indexFim) {\n      textoLinha = blotConteudo.html;\n      textoNovaLinha = '';\n    } else {\n      const tamanhoNovaLinha: number = indexFim - range.index;\n      textoLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, 0, blotConteudo.tamanho - tamanhoNovaLinha);\n      textoNovaLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, range.index - indexInicio, tamanhoNovaLinha);\n    }\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (this.isDesmembramento(blotConteudo.htmlAnt, textoLinha, textoNovaLinha)) {\n      const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha + textoNovaLinha, linha.numero, linha.hierarquia);\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n    rootStore.dispatch(adicionarElementoAction.execute(elemento, textoNovaLinha));\n  }\n\n  private editarNotaAlteracao(elemento: Elemento): void {\n    editarNotaAlteracaoDialog(elemento, this.quill, rootStore);\n  }\n\n  private async renumerarElemento(): Promise<any> {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(\n      linha!.uuid ?? 0,\n      linha!.uuid2 ?? '',\n      linha.lexmlId,\n      linha!.tipo ?? '',\n      '',\n      linha.numero,\n      linha.hierarquia,\n      linha.descricaoSituacao,\n      linha.existeNaNormaAlterada\n    );\n\n    if (!podeRenumerar(rootStore.getState().elementoReducer.articulacao, elemento)) {\n      this.alertar('Nessa situação, não é possível renumerar o dispositivo');\n      return;\n    }\n\n    const dialogElem = document.createElement('sl-dialog');\n    document.body.appendChild(dialogElem);\n\n    dialogElem.label = 'Informar numeração';\n    dialogElem.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const getMsgPlaceholder = (tipo: string): string => {\n      const tp = tipo.toLowerCase();\n      const descricao = TipoDispositivo[tp].descricao?.toLowerCase();\n      if (!tp) {\n        return '';\n      } else if (['artigo', 'paragrafo', 'item'].includes(tp)) {\n        return 'Digite o número do ' + descricao + '. Ex: 5, 6-A' + (tp === 'paragrafo' ? ', único' : '');\n      } else if (tp === 'alinea') {\n        return 'Digite a letra da ' + descricao + '. Ex: b, c-A';\n      } else {\n        const genero = ['parte', 'secao', 'subsecao'].includes(tp) ? 'a' : 'o';\n        return `Digite o número romano d${genero} ${descricao}. Ex: II, III-A'`;\n      }\n    };\n\n    const content = document.createRange().createContextualFragment(`\n      <div class=\"input-validation-required\">\n        <sl-input type=\"text\" help-text=\"${getMsgPlaceholder(elemento.tipo ?? '')}\" label=\"Numeração do dispositivo:\" clearable></sl-input>\n        <br/>\n      </div>\n      <br/>\n      <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n        <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n        <div class=\"erro\"></div>\n      </sl-alert>\n      <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n      <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n    `);\n\n    const input = <SlInput>content.querySelector('sl-input');\n    const rotuloAtual = `${rotuloParaEdicao(linha.blotRotulo!.rotulo)}`;\n    input.value = rotuloAtual;\n\n    const botoes = content.querySelectorAll('sl-button');\n    const cancelar = botoes[0];\n    const ok = botoes[1];\n\n    const erro = <HTMLDivElement>content.querySelector('.erro');\n    const alerta = content.querySelector('sl-alert');\n\n    ok.onclick = (): void => {\n      this.quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n\n      if (input.value?.trim().toLowerCase() !== rotuloAtual?.toLowerCase()) {\n        rootStore.dispatch(renumerarElementoAction.execute(elemento, input.value.trim()));\n      }\n    };\n\n    cancelar.onclick = (): void => {\n      this.quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    const validar = (): string => {\n      const numeracao = input.value;\n      if (/^\\s*$/.test(numeracao)) {\n        return 'A numeração não pode ser vazia.';\n      }\n      return '';\n    };\n\n    const validarInput = (evt: any): void => {\n      let msgErro = validar();\n      if (!msgErro && elemento.tipo && !isNumeracaoValidaPorTipo(input.value, elemento.tipo)) {\n        msgErro = 'Numeração inválida.';\n      }\n      erro.innerText = msgErro;\n      msgErro ? alerta?.show() : alerta?.hide();\n      ok.disabled = Boolean(msgErro);\n      if (!ok.disabled) {\n        if (evt.key === 'Enter') {\n          ok.click();\n        }\n      }\n    };\n\n    input.addEventListener('keyup', validarInput);\n    input.addEventListener('sl-clear', validarInput);\n\n    dialogElem.appendChild(content);\n    dialogElem?.show();\n    ok.disabled = Boolean(validar());\n    setTimeout(() => (input as SlInput).focus(), 0);\n  }\n\n  private toggleExistencia(): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(\n      linha!.uuid ?? 0,\n      linha!.uuid2 ?? '',\n      linha.lexmlId,\n      linha!.tipo ?? '',\n      '',\n      linha.numero,\n      linha.hierarquia,\n      linha.descricaoSituacao,\n      linha.existeNaNormaAlterada\n    );\n    this.toggleExistenciaElemento(elemento);\n  }\n\n  private adicionaAgrupador(): void {\n    this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento);\n  }\n\n  private adicionarAgrupadorArtigo(elemento: Elemento): void {\n    adicionarAgrupadorArtigoDialog(elemento, this.quill, rootStore);\n  }\n\n  private toggleExistenciaElemento(elemento: Elemento): void {\n    const action = elemento.existeNaNormaAlterada ? considerarElementoNovoNaNorma : considerarElementoExistenteNaNorma;\n    rootStore.dispatch(action.execute(elemento));\n  }\n\n  private removerElementoSemTexto(key: string): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n    rootStore.dispatch(removerElementoSemTextoAction.execute(elemento, key));\n  }\n\n  private removerElemento(): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elementoLinhaAnterior = this.quill.linhaAtual.prev?.elemento;\n    const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n    rootStore.dispatch(removerElementoAction.execute(elemento, elementoLinhaAnterior));\n  }\n\n  private moverElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    if (linha) {\n      const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n      const textoLinha = blotConteudo.html;\n\n      const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n      if (ev.key === 'ArrowUp') {\n        rootStore.dispatch(moverElementoAcimaAction.execute(elemento));\n      } else if (ev.key === 'ArrowDown') {\n        rootStore.dispatch(moverElementoAbaixoAction.execute(elemento));\n      }\n    }\n  }\n\n  private transformarElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n    const textoLinha = blotConteudo.html;\n\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (ev.key.toLowerCase() === 'o') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.omissis.name!));\n    } else if (Keyboard.keys.TAB) {\n      rootStore.dispatch(ev.shiftKey ? shiftTabAction(elemento) : tabAction(elemento));\n    }\n  }\n\n  private elementoSelecionado(uuid: number): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    if (linha) {\n      const elemento: Elemento = this.criarElemento(uuid, linha!.uuid2, linha.lexmlId, linha.tipo ?? '', '', linha.numero, linha.hierarquia);\n      rootStore.dispatch(elementoSelecionadoAction.execute(elemento));\n      this.quill.processandoMudancaLinha = false;\n    }\n  }\n\n  private undoRedoEstrutura(tipo: string): void {\n    //\n    // TODO: Chamar action para undo ou redo - estrutura.\n    //\n    if (tipo === 'undo') {\n      rootStore.dispatch(UndoAction());\n    } else {\n      rootStore.dispatch(redoAction());\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    const ultimoEventoElementoSelecionado = events.filter((ev: StateEvent) => ev.stateType === StateType.ElementoSelecionado).slice(-1)[0];\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.DocumentoCarregado:\n          this.destroiQuill();\n          this.inicializar(this.configEditor());\n          this.carregarArticulacao(event.elementos ?? []);\n          break;\n\n        case StateType.InformarDadosAssistente:\n          assistenteAlteracaoDialog(event.elementos![0], this.quill, rootStore, adicionarAlteracaoComAssistenteAction, this.lexmlEtaConfig.urlAutocomplete);\n          break;\n\n        case StateType.InformarNorma:\n          informarNormaDialog(event.elementos![0], this.quill, rootStore, atualizarReferenciaElementoAction, this.lexmlEtaConfig.urlAutocomplete);\n          break;\n\n        case StateType.ElementoIncluido:\n          this.inserirNovoElementoNoQuill(event.elementos![0], event.referencia as Elemento, true);\n          this.inserirNovosElementosNoQuill(event, true);\n          // this.atualizarReferenciaEmRevisoesDeExclusaoSeNecessario(events, event);\n          break;\n\n        case StateType.ElementoModificado:\n        case StateType.ElementoRestaurado:\n          this.atualizarQuill(event);\n          this.atualizarOmissis(event);\n          if (events[events.length - 1] === event) {\n            this.marcarLinha(event);\n          }\n          break;\n\n        case StateType.ElementoSuprimido:\n          this.atualizarSituacao(event);\n          if (events[events.length - 1] === event) {\n            this.marcarLinha(event);\n          }\n          break;\n\n        case StateType.ElementoRemovido:\n          this.removerLinhaQuill(event);\n          break;\n\n        case StateType.ElementoRenumerado:\n          this.renumerarQuill(event);\n          break;\n\n        case StateType.ElementoValidado:\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoSelecionado:\n          this.atualizarAtributos(event);\n          if (ultimoEventoElementoSelecionado === event) {\n            this.montarMenuContexto(event);\n          }\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoMarcado:\n          setTimeout(() => this.marcarLinha(event), 100);\n          break;\n\n        case StateType.SituacaoElementoModificada:\n          this.atualizarQuill(event);\n          this.atualizarSituacao(event);\n          this.atualizarAtributos(event);\n          this.atualizarMensagemQuill(event);\n          this.atualizarOmissis(event);\n          break;\n\n        case StateType.RevisaoAtivada:\n          this.checkedSwitchMarcaAlteracao();\n          break;\n        case StateType.RevisaoDesativada:\n          this.checkedSwitchMarcaAlteracao();\n          this.atualizarEstiloBotaoRevisao();\n          break;\n        case StateType.RevisaoAceita:\n          this.processaRevisoesAceitas(events, event);\n          break;\n        case StateType.RevisaoAdicionalRejeitada:\n          this.removerLinhaQuill(event);\n          break;\n      }\n\n      this.disabledParagrafoElementoRemovido(event);\n      this.quill.limparHistory();\n    });\n\n    this.indicadorMarcaRevisao(events);\n    this.indicadorTextoModificado(events);\n    //this.atualizaQuantidadeRevisao();\n    this.atualizarStatusBotoesRevisao();\n\n    // Os eventos que estão no array abaixo devem emitir um custom event \"ontextchange\"\n    const eventosQueDevemEmitirTextChange = [\n      StateType.ElementoModificado,\n      StateType.ElementoSuprimido,\n      StateType.ElementoRestaurado,\n      StateType.ElementoIncluido,\n      StateType.ElementoRemovido,\n      StateType.ElementoRenumerado,\n    ];\n\n    const eventosFiltrados = events?.filter(ev => eventosQueDevemEmitirTextChange.includes(ev.stateType)).map(ev => ev.stateType);\n\n    if (eventosFiltrados?.length) {\n      // TODO: Implementar lógica do atributo eventosFiltrados, sem repetir os itens\n      this.eventosOnChange.push(...eventosFiltrados);\n\n      this.agendarEmissaoEventoOnChange('stateEvents', eventosFiltrados);\n    }\n  }\n\n  private processaRevisoesAceitas(events: StateEvent[], event: StateEvent): void {\n    if (this.isAceitandoRevisoesDeExclusao(event)) {\n      this.removerLinhaQuill(event);\n    } else {\n      this.atualizarAtributos(event);\n      if (events[events.length - 1] === event) {\n        this.montarMenuContexto(event);\n      }\n      this.atualizarMensagemQuill(event);\n    }\n  }\n\n  private isAceitandoRevisoesDeExclusao(event: StateEvent): boolean {\n    return event.elementos?.some(e => (this.quill.getLinha(e.uuid!)?.elemento.revisao as RevisaoElemento)?.stateType === StateType.ElementoRemovido) ?? false;\n  }\n\n  private existeReinclusaoDoElemento(elementosIncluidos: Elemento[], elemento: Elemento): boolean {\n    return elementosIncluidos.some(elementoIncluido => elementoIncluido.uuid === elemento.uuid);\n  }\n\n  private marcarLinha(event: StateEvent): void {\n    try {\n      this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n      const elemento = event.elementos![0];\n      const linha = this.quill.getLinha(elemento.uuid!)!;\n      this.quill.atualizarLinhaCorrente(linha);\n      this.elementoSelecionado(linha.uuid);\n      const index = this.quill.getIndex(linha.blotConteudo);\n      try {\n        this.quill.setIndex(index, Quill.sources.SILENT);\n        // eslint-disable-next-line no-empty\n      } catch (error) {}\n      if (event.moverParaFimLinha) {\n        setTimeout(() => {\n          const posicao = this.quill.getSelection()!.index + this.quill.linhaAtual.blotConteudo.html.length;\n          this.quill.setSelection(posicao, 0, Quill.sources.USER);\n        }, 0);\n      }\n    } catch (error) {\n      // linha, provavelmente, foi removida do Quill\n    }\n  }\n\n  private processarEscolhaMenu(itemMenu: any): void {\n    if (itemMenu === renumerarElementoAction) {\n      this.renumerarElemento();\n    } else if (itemMenu === atualizarNotaAlteracaoAction) {\n      this.editarNotaAlteracao(this.quill.linhaAtual.elemento);\n    } else if (itemMenu instanceof AdicionarAgrupadorArtigo) {\n      this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento);\n    } else if (itemMenu === removerElementoAction) {\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n      const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n      elemento.conteudo!.texto = linha.blotConteudo.html ?? '';\n\n      const elementoLinhaAnterior = this.quill.linhaAtual.prev?.elemento;\n      rootStore.dispatch(itemMenu.execute(elemento, elementoLinhaAnterior));\n    } else if (itemMenu === exibirDiferencaAction) {\n      this.exibirDiferencas(this.quill.linhaAtual.elemento);\n    } else {\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n      const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n      elemento.conteudo!.texto = linha.blotConteudo.html ?? '';\n      rootStore.dispatch(itemMenu.execute(elemento));\n    }\n  }\n\n  private inserirNovoElementoNoQuill(elemento: Elemento, referencia: Elemento, selecionarLinha?: boolean): void {\n    const fnSelecionarNovaLinha = (linha: EtaContainerTable, linhaAtual: EtaContainerTable): void => {\n      this.quill.desmarcarLinhaAtual(linhaAtual);\n      this.quill.marcarLinhaAtual(linha);\n      try {\n        this.quill.setIndex(this.quill.getIndex(linha.blotConteudo), Quill.sources.SILENT);\n      } catch (e) {\n        // console.log(e);\n      }\n    };\n\n    const linhaASerReinserida = this.quill.getLinha(elemento.uuid!);\n\n    if (linhaASerReinserida) {\n      linhaASerReinserida.atualizarElemento(elemento);\n      selecionarLinha && fnSelecionarNovaLinha(linhaASerReinserida, this.quill.linhaAtual);\n      return;\n    }\n\n    const linhaRef: EtaContainerTable | undefined = this.quill.getLinha(elemento.elementoAnteriorNaSequenciaDeLeitura?.uuid || referencia.uuid!);\n\n    if (linhaRef) {\n      const novaLinha: EtaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n\n      if (linhaRef.next) {\n        novaLinha.insertInto(this.quill.scroll, linhaRef.next);\n      } else {\n        novaLinha.insertInto(this.quill.scroll);\n      }\n\n      const isEmendaArtigoOndeCouber = rootStore.getState().elementoReducer.modo === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n      if (this.quill.linhaAtual?.blotConteudo.html !== '' || novaLinha.blotConteudo.html === '' || isEmendaArtigoOndeCouber || elemento.tipo === 'Omissis') {\n        selecionarLinha && !this.timerOnChange && fnSelecionarNovaLinha(novaLinha, this.quill.linhaAtual);\n      } else {\n        this.quill.linhaAtual.blotConteudo.htmlAnt = this.quill.linhaAtual.blotConteudo.html;\n      }\n\n      novaLinha.descricaoSituacao = elemento.descricaoSituacao;\n      novaLinha.existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n      novaLinha.setEstilo(elemento!);\n    }\n  }\n\n  private inserirNovosElementosNoQuill(event: StateEvent, selecionarLinha?: boolean): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n\n    for (let i = 1; i < elementos.length; i++) {\n      this.inserirNovoElementoNoQuill(elementos[i], elementos[i - 1], selecionarLinha);\n    }\n  }\n\n  private atualizarSituacao(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento);\n          linha.atualizarElemento(elemento);\n        }\n      }\n    });\n  }\n\n  private atualizarAtributos(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        linha.atualizarElemento(elemento);\n      }\n    });\n  }\n\n  private atualizarOmissis(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      if (elemento.dispositivoAlteracao) {\n        linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n        if (linha && normalizaSeForOmissis(linha.blotConteudo?.html).indexOf(TEXTO_OMISSIS) >= 0) {\n          linha.blotConteudo.html = '';\n          const index = this.quill.getIndex(linha.blotConteudo);\n          this.quill.insertText(index, TEXTO_OMISSIS, { EtaBlotConteudoOmissis: true });\n        }\n        if (elemento.conteudo?.texto !== linha?.blotConteudo.html) {\n          const texto = normalizaSeForOmissis(elemento.conteudo?.texto ?? '');\n          if (texto.indexOf(TEXTO_OMISSIS) >= 0) {\n            linha?.domNode.classList.add('container_elemento--omissis');\n          }\n        }\n      }\n    });\n  }\n\n  private atualizarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        let nivelAlerado = false;\n\n        if (elemento.editavel !== linha.editavel) {\n          linha.editavel = elemento.editavel;\n        }\n\n        if (elemento.rotulo !== linha.blotRotulo?.html) {\n          linha.numero = elemento.numero ?? '';\n          linha.blotRotulo?.format(EtaBlotRotulo.blotName, elemento.rotulo);\n        }\n\n        if (elemento.nivel !== linha.nivel) {\n          linha.nivel = elemento.nivel;\n          linha.format(EtaContainerTable.blotName, elemento);\n          nivelAlerado = true;\n        }\n\n        if (elemento.agrupador !== linha.agrupador) {\n          linha.agrupador = elemento.agrupador;\n          linha.blotRotulo?.format(EtaBlotRotulo.formatoStyle, elemento);\n          if (!nivelAlerado) {\n            linha.format(EtaContainerTable.blotName, elemento);\n          }\n        }\n\n        // Substituir o texto apenas quando precisa evita retorno do cursor para o início da linha.\n        const novoTexto = elemento.conteudo?.texto ?? '';\n        if (linha.blotConteudo.html !== novoTexto) {\n          linha.blotConteudo.html = novoTexto;\n        }\n\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento);\n        }\n\n        linha.atualizarElemento(elemento);\n\n        if (linha.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0 && !this.elementoRemovidoEmRevisao(elemento)) {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n\n          if (this.isMensagemSufixos(elemento)) {\n            if (avisoJaExiste === null) {\n              EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n            }\n          } else {\n            EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n          }\n        }\n      }\n    });\n  }\n\n  private elementoRemovidoEmRevisao(elemento: Elemento): boolean {\n    if (elemento.revisao && (elemento.revisao as RevisaoElemento).stateType === StateType.ElementoRemovido) {\n      return true;\n    }\n    return false;\n  }\n\n  private removerLinhaQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento, index) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha) || this.quill.getLinha(elemento.uuid ?? 0);\n      if (linha) {\n        if (elemento.revisao && (!linha.elemento.revisao || !isRevisaoDeExclusao(linha.elemento.revisao as RevisaoElemento))) {\n          linha.atualizarElemento(elemento);\n          index === 0 && this.montarMenuContexto(event);\n        } else {\n          linha.remove();\n        }\n      }\n    });\n\n    const range = this.quill.getSelection();\n    if (range) {\n      const linhaCursor: EtaContainerTable = this.quill.getLine(range.index - 1)[0].linha;\n\n      const index: number = this.quill.getIndex(linhaCursor.blotConteudo);\n\n      this.quill.setSelection(index, 0, Quill.sources.SILENT);\n      this.quill.marcarLinhaAtual(linhaCursor);\n    }\n  }\n\n  private renumerarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha) || this.quill.getLinha(elemento.uuid ?? 0);\n      if (linha) {\n        linha.blotRotulo?.format(EtaBlotRotulo.blotName, elemento.rotulo);\n      }\n    });\n  }\n\n  private atualizarMensagemQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n\n      if (linha) {\n        if (linha?.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0 && !this.elementoRemovidoEmRevisao(elemento)) {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n\n          if (this.isMensagemSufixos(elemento)) {\n            if (avisoJaExiste === null) {\n              EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n            }\n          } else {\n            EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n          }\n        }\n      }\n    });\n  }\n\n  private isMensagemSufixos(elemento: Elemento): boolean | undefined {\n    return elemento.mensagens && elemento.mensagens.length === 1 && elemento.mensagens[0].nomeEvento === 'onmodalsufixos';\n  }\n\n  private montarMenuContexto(event: StateEvent): void {\n    const elemento: Elemento = event.elementos ? event.elementos[0] : new Elemento();\n    const acoesMenu: ElementoAction[] = (elemento?.acoesPossiveis ?? []).filter((acao: ElementoAction) => isAcaoMenu(acao));\n\n    if (acoesMenu.length > 0) {\n      const blotMenu: EtaBlotMenu = new EtaBlotMenu();\n      const blotMenuConteudo: EtaBlotMenuConteudo = new EtaBlotMenuConteudo(this.quill.linhaAtual.containerDireito.alinhamentoMenu);\n      const callback: any = (itemMenu: string) => {\n        this.processarEscolhaMenu(itemMenu);\n        this.quill.focus();\n      };\n\n      new EtaBlotMenuBotao().insertInto(blotMenu);\n\n      acoesMenu.forEach((acao: ElementoAction) => {\n        new EtaBlotMenuItem(acao, callback).insertInto(blotMenuConteudo);\n      });\n      blotMenuConteudo.insertInto(blotMenu);\n\n      this.quill.linhaAtual.blotInsideContainerDireito?.remove();\n      blotMenu.insertInto(this.quill.linhaAtual.containerDireito);\n    }\n  }\n\n  private criarElemento(\n    uuid: number,\n    uuid2: string,\n    lexmlId: string,\n    tipo: string,\n    html: string,\n    numero: string,\n    hierarquia: any,\n    descricaoSituacao?: string,\n    existeNaNormaAlterada?: boolean\n  ): Elemento {\n    const elemento: Elemento = new Elemento();\n    elemento.uuid = uuid;\n    elemento.uuid2 = uuid2;\n    elemento.lexmlId = lexmlId;\n    elemento.tipo = tipo;\n    elemento.numero = numero;\n    elemento.conteudo = { texto: html };\n    elemento.hierarquia = hierarquia;\n    elemento.descricaoSituacao = descricaoSituacao;\n    elemento.existeNaNormaAlterada = existeNaNormaAlterada;\n    return elemento;\n  }\n\n  private inicializar(op: QuillOptionsStatic): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    const bufferHtml: HTMLElement = this.getHtmlElement('lx-eta-buffer');\n\n    EtaQuill.configurar();\n    this._quill = new EtaQuill(editorHtml, bufferHtml, op);\n    this.quill.on('selection-change', this.onSelectionChange);\n    this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.removeElementoSemTexto.subscribe(this.removerElementoSemTexto.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.toggleExistencia.subscribe(this.toggleExistencia.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.adicionaAgrupador.subscribe(this.adicionaAgrupador.bind(this)));\n    this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this)));\n    this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this)));\n\n    this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(onChangeColarDialog.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(this.quill.clipboard.onPasteTextoArticulado.subscribe(this.onPasteTextoArticulado.bind(this)));\n\n    editorHtml.addEventListener('rotulo', (event: any) => {\n      event.stopImmediatePropagation();\n      this.renumerarElemento();\n    });\n\n    editorHtml.addEventListener('nota-alteracao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.editarNotaAlteracao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('toggle-existencia', (event: any) => {\n      event.stopImmediatePropagation();\n      this.toggleExistenciaElemento(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('mensagem', (event: any) => {\n      event.stopImmediatePropagation();\n\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n\n      if (linha) {\n        if (AutoFix.RENUMERAR_DISPOSITIVO === event.detail?.mensagem?.descricao) {\n          this.renumerarElemento();\n        } else {\n          const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n          const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, blotConteudo.html, linha.numero, linha.hierarquia);\n          rootStore.dispatch(autofixAction.execute(elemento, event.detail.mensagem));\n        }\n      }\n    });\n\n    editorHtml.addEventListener('aceitar-revisao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.aceitarRevisao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('rejeitar-revisao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.rejeitarRevisao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('exibir-diferencas', (event: any) => {\n      event.stopImmediatePropagation();\n      this.exibirDiferencas(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('onmodalsufixos', (event: any) => {\n      event.stopImmediatePropagation();\n      this.exibirModalSufixos();\n    });\n    this.configListenersEta();\n  }\n\n  exibirModalSufixos(): void {\n    this.dispatchEvent(\n      new CustomEvent('onexibirsufixos', {\n        bubbles: true,\n        composed: true,\n        detail: {},\n      })\n    );\n  }\n\n  exibirDiferencas(elemento: Elemento): void {\n    const diff: TextoDiff = new TextoDiff();\n    diff.textoAtual = elemento.conteudo!.texto!;\n    diff.quill = this.quill;\n\n    const revisao = elemento.revisao as RevisaoElemento;\n    const d = buscaDispositivoById(rootStore.getState().elementoReducer.articulacao, elemento.lexmlId!);\n\n    if (revisao) {\n      diff.textoAntesRevisao = revisao.elementoAntesRevisao!.conteudo!.texto!;\n\n      if (d && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        diff.textoOriginal = d!.situacao.dispositivoOriginal!.conteudo!.texto!;\n      } else {\n        diff.textoOriginal = elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL ? diff.textoAtual : diff.textoAntesRevisao;\n        diff.adicionado = true;\n      }\n\n      exibirDiferencasDialog(diff);\n    } else {\n      if (d && d!.situacao.dispositivoOriginal?.conteudo !== undefined) {\n        diff.textoOriginal = d!.situacao.dispositivoOriginal!.conteudo!.texto!;\n      }\n      exibirDiferencasDialog(diff);\n    }\n  }\n\n  aceitarRevisao(elemento: Elemento): void {\n    rootStore.dispatch(aceitarRevisaoAction.execute(elemento, undefined));\n    this.alertaGlobalRevisao();\n    this.setCursorCurrentLine();\n  }\n\n  setCursorCurrentLine(): void {\n    this.quill.focus();\n  }\n\n  rejeitarRevisao(elemento: Elemento): void {\n    rootStore.dispatch(rejeitarRevisaoAction.execute(elemento, undefined));\n    this.setCursorCurrentLine();\n  }\n\n  aceitarTodasRevisoes(): void {\n    rootStore.dispatch(aceitarRevisaoAction.execute(undefined as any, undefined));\n  }\n\n  rejeitarTodasRevisoes(): void {\n    rootStore.dispatch(rejeitarRevisaoAction.execute(undefined as any, undefined));\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string, statesType: StateType[] = []): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = setTimeout(() => this.emitirEventoOnChange(origemEvento, statesType), 1000);\n  }\n\n  private atualizarTextoElemento(linhaAtual: EtaContainerTable): void {\n    if (linhaAtual?.blotConteudo?.alterado) {\n      const elemento: Elemento = this.criarElemento(\n        linhaAtual.uuid,\n        linhaAtual.uuid2,\n        linhaAtual.lexmlId,\n        linhaAtual.tipo,\n        linhaAtual.blotConteudo?.html ?? '',\n        linhaAtual.numero,\n        linhaAtual.hierarquia\n      );\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n  }\n\n  private alertaGlobalVerificaRenumeracao(): void {\n    const idAlerta = 'alerta-global-renumeracao';\n    const dispositivos = CmdEmdUtil.getDispositivosAdicionados(rootStore.getState().elementoReducer.articulacao);\n\n    if (dispositivos.length && CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(dispositivos)) {\n      const alerta = {\n        id: idAlerta,\n        tipo: 'warning',\n        mensagem:\n          'Os rótulos apresentados servem apenas para o posicionamento correto do novo dispositivo no texto. Serão feitas as renumerações necessárias no momento da consolidação das emendas.',\n        podeFechar: true,\n      };\n\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else {\n      rootStore.dispatch(removerAlerta(idAlerta));\n    }\n  }\n\n  private alertaGlobalVerificaCorrelacao(): void {\n    const dispositivosEmenda = (document.querySelector('lexml-eta') as LexmlEtaComponent).getDispositivosEmenda() || [];\n    const listaLexmlIds = Object.values(dispositivosEmenda)\n      .flat(1)\n      .map(obj => obj.id);\n    const artigos = [...new Set(listaLexmlIds.map(lexmlId => lexmlId.split('_').filter(dispositivo => dispositivo.startsWith('art'))[0]))];\n\n    if (artigos.length > 1) {\n      const alerta = {\n        id: 'alerta-global-correlacao',\n        tipo: 'info',\n        mensagem:\n          'Cada emenda pode referir-se a apenas um dispositivo, salvo se houver correlação entre dispositivos. Verifique se há correlação entre os dispositivos emendados antes de submetê-la.',\n        podeFechar: true,\n        exibirComandoEmenda: true,\n      };\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === 'alerta-global-correlacao')) {\n      rootStore.dispatch(removerAlerta('alerta-global-correlacao'));\n    }\n  }\n\n  private alertaGlobalRevisao(): void {\n    const id = 'alerta-global-revisao';\n    const revisoesElementos = document.getElementsByClassName('blot__revisao');\n\n    if (revisoesElementos.length > 0) {\n      const alerta = {\n        id: id,\n        tipo: 'info',\n        mensagem: 'Este documento contém marcas de revisão e não deve ser protocolado até que estas sejam removidas.',\n        podeFechar: true,\n        exibirComandoEmenda: true,\n      };\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === id)) {\n      rootStore.dispatch(removerAlerta(id));\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitirEventoOnChange(origemEvento: string, statesType: StateType[] = []): void {\n    this.atualizarTextoElemento(this.quill.linhaAtual);\n\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n\n    if (this.eventosOnChange?.length && (this.eventosOnChange.includes(StateType.ElementoIncluido) || this.eventosOnChange.includes(StateType.ElementoRemovido))) {\n      this.alertaGlobalVerificaRenumeracao();\n    }\n\n    this.alertaGlobalVerificaCorrelacao();\n    this.alertaGlobalRevisao();\n    this.eventosOnChange = [];\n    this.timerOnChange = null;\n  }\n\n  private carregarArticulacao(elementos: Elemento[]): void {\n    setTimeout(() => {\n      this.quill.getLine(0)[0].remove();\n      elementos.forEach((elemento: Elemento) => {\n        const etaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n        etaContainerTable.insertInto(this.quill.scroll);\n        etaContainerTable.setEstilo(elemento);\n\n        elemento.tipo === TipoDispositivo.generico.tipo && rootStore.dispatch(validarElementoAction.execute(elemento));\n      });\n      this.quill.limparHistory();\n      if (elementos.length > 1) {\n        setTimeout(() => {\n          const el = this.quill.getLinha(elementos[1].uuid!);\n          if (el?.blotConteudo) {\n            this.quill.setSelection(this.quill.getIndex(el?.blotConteudo), 0, Quill.sources.USER);\n          }\n        }, 0);\n      }\n      rootStore.dispatch(validarArticulacaAction.execute());\n    }, 0);\n  }\n\n  private configEditor(): QuillOptionsStatic {\n    return {\n      formats: ['bold', 'italic', 'link', 'script', 'EtaBlotConteudoOmissis'],\n      modules: {\n        toolbar: {\n          container: '#lx-eta-barra-ferramenta',\n          handlers: {\n            bold: this.onBold.bind(this),\n            italic: this.onItalic.bind(this),\n            script: this.onScript.bind(this),\n          },\n        },\n        history: {\n          delay: 0,\n          maxStack: 500,\n          userOnly: true,\n        },\n      },\n      theme: 'snow',\n    };\n  }\n\n  private async confirmar(mensagem: string, botoes: string[], callback: any): Promise<void> {\n    let choice = '';\n    const dialog = document.createElement('sl-dialog');\n    dialog.label = 'Confirmação';\n    const botoesHtml = `\n      <sl-button slot=\"footer\" variant=\"default\">Não</sl-button>\n      <sl-button slot=\"footer\" variant=\"primary\">Sim</sl-button>\n    `;\n    dialog.innerHTML = mensagem + botoesHtml;\n    document.body.appendChild(dialog);\n    await dialog.show();\n    const botoesDialog = dialog.querySelectorAll('sl-button');\n    const nao = botoesDialog[0] as SlButton;\n    const sim = botoesDialog[1] as SlButton;\n    sim.focus();\n\n    nao.onclick = (): void => {\n      choice = 'Não';\n      dialog?.hide();\n      dialog?.remove();\n    };\n\n    sim.onclick = (): void => {\n      choice = 'Sim';\n      dialog?.hide();\n      dialog?.remove();\n    };\n\n    dialog.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    dialog.addEventListener('sl-hide', (event: any) => {\n      event.detail.closeResult = choice;\n      callback(event);\n    });\n  }\n  private alertar(mensagem: string): void {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n        <sl-icon name=\"exclamation-octagon\" slot=\"icon\"></sl-icon>\n        ${mensagem}\n      `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n\n  private quillNaoInicializado(state: any): void {\n    let elementos: Elemento[] = [];\n    const verificarQuillInicializado: any = (elementos: Elemento[]): void => {\n      setTimeout(() => {\n        if (!this.quill) {\n          verificarQuillInicializado(elementos);\n        } else if (elementos.length > 0) {\n          this.carregarArticulacao(elementos);\n        }\n      }, 70);\n    };\n\n    if (state.elementoReducer.ui) {\n      const event: StateEvent | undefined = state.elementoReducer.ui.events.find((event: StateEvent): boolean => event.stateType === StateType.DocumentoCarregado);\n      elementos = event?.elementos ?? [];\n    }\n    verificarQuillInicializado(elementos);\n  }\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private destroiQuill(): void {\n    this.removeListenersEta();\n\n    this.getHtmlElement('lx-eta-editor')!.innerHTML = '';\n    this.getHtmlElement('lx-eta-buffer')!.innerHTML = '';\n    if (this.quill) {\n      this.quill.off('selection-change', this.onSelectionChange);\n      this.quill.destroi();\n    }\n    this._quill = undefined;\n  }\n\n  private listenerRotulo = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.renumerarElemento();\n  };\n\n  private listenerNotaAlteracao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.editarNotaAlteracao(event.detail.elemento);\n  };\n\n  private listenerToggleExistencia = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.toggleExistenciaElemento(event.detail.elemento);\n  };\n\n  private listenerMensagem = (event: any): void => {\n    event.stopImmediatePropagation();\n\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n\n    if (linha) {\n      if (AutoFix.RENUMERAR_DISPOSITIVO === event.detail?.mensagem?.descricao) {\n        this.renumerarElemento();\n      } else {\n        const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n        const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, blotConteudo.html, linha.numero, linha.hierarquia);\n        rootStore.dispatch(autofixAction.execute(elemento, event.detail.mensagem));\n      }\n    }\n  };\n\n  private listenerAceitarRevisao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.aceitarRevisao(event.detail.elemento);\n  };\n\n  private listenerRejeitarRevisao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.rejeitarRevisao(event.detail.elemento);\n  };\n\n  private configListenersEta(): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    editorHtml.addEventListener('rotulo', this.listenerRotulo);\n    editorHtml.addEventListener('nota-alteracao', this.listenerNotaAlteracao);\n    editorHtml.addEventListener('toggle-existencia', this.listenerToggleExistencia);\n    editorHtml.addEventListener('mensagem', this.listenerMensagem);\n    editorHtml.addEventListener('aceitar-revisao', this.listenerAceitarRevisao);\n    editorHtml.addEventListener('rejeitar-revisao', this.listenerRejeitarRevisao);\n  }\n\n  private removeListenersEta(): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    editorHtml.removeEventListener('rotulo', this.listenerRotulo);\n    editorHtml.removeEventListener('nota-alteracao', this.listenerNotaAlteracao);\n    editorHtml.removeEventListener('toggle-existencia', this.listenerToggleExistencia);\n    editorHtml.removeEventListener('mensagem', this.listenerMensagem);\n    editorHtml.removeEventListener('aceitar-revisao', this.listenerAceitarRevisao);\n    editorHtml.removeEventListener('rejeitar-revisao', this.listenerRejeitarRevisao);\n  }\n\n  private async onPasteTextoArticulado(payload: any): Promise<void> {\n    const linha = this.quill.linhaAtual;\n    const elemento: Elemento = new Elemento();\n    elemento.uuid = linha.uuid;\n    elemento.tipo = linha.tipo;\n\n    const infoTextoColado = await InfoTextoColado.newInstanceFromTexto(\n      payload.textoColadoOriginal,\n      payload.textoColadoAjustado,\n      rootStore.getState().elementoReducer.articulacao,\n      linha.elemento\n    );\n    colarTextoArticuladoDialog(this.quill, rootStore, infoTextoColado, payload.range);\n  }\n\n  private atualizarEstiloBotaoRevisao(): void {\n    const botaoRevisao = this.getHtmlElement('lx-eta-btn-revisao');\n    if (botaoRevisao) {\n      botaoRevisao.classList.toggle('revisao-ativa', rootStore.getState().elementoReducer.emRevisao);\n    }\n  }\n\n  private indicadorTextoModificado(events: StateEvent[]): void {\n    const ignorarStateTypes: StateType[] = [\n      StateType.DocumentoCarregado,\n      StateType.ElementoIncluido,\n      StateType.ElementoValidado,\n      StateType.AtualizaUsuario,\n      StateType.AtualizacaoAlertas,\n    ];\n    const mapElementos: Map<number, Elemento> = new Map();\n\n    events\n      .filter(ev => !ignorarStateTypes.includes(ev.stateType))\n      .map(ev => ev.elementos || [])\n      .flat()\n      .forEach(e => mapElementos.set(e.uuid!, e));\n\n    const elementos: Elemento[] = [...mapElementos.values()];\n    const uuidsElementosSemModificacao = elementos.filter(e => e.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO).map(e => e.uuid!);\n    const uuidsElementosComModificacao = elementos\n      .filter(\n        e =>\n          e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n          (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && e.revisao && e.revisao.descricao === 'Texto do dispositivo foi alterado') ||\n          (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL &&\n            e.revisao &&\n            (e.revisao as RevisaoElemento).elementoAntesRevisao?.conteudo?.texto !== e.conteudo?.texto)\n        // || (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && e.revisao\n        //   && (e.revisao.descricao === 'Dispositivo restaurado' || e.revisao.descricao === 'Texto do dispositivo foi alterado'))\n      )\n      .map(e => e.uuid!);\n\n    uuidsElementosSemModificacao.forEach(uuid => {\n      const containerOpcoes = document.getElementById(EtaContainerOpcoes.className + uuid);\n      if (containerOpcoes) {\n        const linha = this.quill.getLinha(uuid);\n        linha?.containerOpcoes?.remove();\n        containerOpcoes.remove();\n      }\n    });\n\n    uuidsElementosComModificacao.forEach(uuid => {\n      const linha = this.quill.getLinha(uuid);\n      if (linha) {\n        this.adicionaRemoveOpcaoDiffMenu(linha.elemento, uuidsElementosComModificacao);\n\n        if (linha.containerOpcoes?.blotBotaoExibirDiferencas) {\n          linha.containerOpcoes.atualizarElemento(mapElementos.get(uuid)!);\n        } else {\n          const containerOpcoes = document.getElementById(EtaContainerOpcoes.className + uuid);\n          if (containerOpcoes) {\n            containerOpcoes.remove();\n          }\n          const containerTr = linha.children.head;\n          containerTr.insertBefore(EtaQuillUtil.criarContainerOpcoes(mapElementos.get(uuid)!), linha.containerDireito.prev);\n        }\n      }\n    });\n  }\n\n  private adicionaRemoveOpcaoDiffMenu(elemento: Elemento, uuidsElementosComModificacao: any): void {\n    if (uuidsElementosComModificacao.includes(elemento.uuid)) {\n      elemento.acoesPossiveis?.push(exibirDiferencaAction);\n    }\n  }\n\n  private indicadorMarcaRevisao(events: StateEvent[]): void {\n    const ignorarStateTypes: StateType[] = [\n      StateType.DocumentoCarregado,\n      StateType.ElementoIncluido,\n      StateType.ElementoValidado,\n      StateType.AtualizaUsuario,\n      StateType.AtualizacaoAlertas,\n    ];\n    const mapElementos: Map<number, Elemento> = new Map();\n    events\n      .filter(ev => !ignorarStateTypes.includes(ev.stateType))\n      .map(ev => ev.elementos || [])\n      .flat()\n      .forEach(e => mapElementos.set(e.uuid!, e));\n\n    const elementos: Elemento[] = [...mapElementos.values()];\n    const uuidsElementosSemRevisao = elementos.filter(e => !e.revisao).map(e => e.uuid!);\n    const uuidsElementosComRevisao = elementos.filter(e => e.revisao && isRevisaoPrincipal(e.revisao)).map(e => e.uuid!);\n\n    // Remove container de revisão de elementos que não estão mais em revisão\n    uuidsElementosSemRevisao.forEach(uuid => {\n      const containerRevisao = document.getElementById(EtaContainerRevisao.className + uuid);\n      if (containerRevisao) {\n        const linha = this.quill.getLinha(uuid);\n        linha?.containerRevisao?.remove();\n      }\n    });\n\n    // Adiciona (ou atualiza) container de revisão para elementos que estão em revisão\n    uuidsElementosComRevisao.forEach(uuid => {\n      const linha = this.quill.getLinha(uuid);\n      if (linha) {\n        if (linha.containerRevisao?.blotBotaoAceitarRevisao) {\n          linha.containerRevisao.atualizarElemento(mapElementos.get(uuid)!);\n        } else {\n          const containerTr = linha.children.head;\n          containerTr.insertBefore(EtaQuillUtil.criarContainerRevisao(mapElementos.get(uuid)!), linha.containerDireito.prev);\n        }\n      }\n    });\n  }\n\n  // private atualizaQuantidadeRevisao = (): void => {\n  //   atualizaQuantidadeRevisao(rootStore.getState().elementoReducer.revisoes, document.getElementById(this._idBadgeQuantidadeRevisao) as any);\n  // };\n\n  private atualizarStatusBotoesRevisao(): void {\n    const numRevisoes = getQuantidadeRevisoes(rootStore.getState().elementoReducer.revisoes);\n    this.btnAceitarTodasRevisoes && (this.btnAceitarTodasRevisoes.disabled = numRevisoes === 0);\n    this.btnRejeitarTodasRevisoes && (this.btnRejeitarTodasRevisoes.disabled = numRevisoes === 0);\n  }\n\n  /**\n   * Método utilizado para navegar entre as marcas de revisão\n   * @param direcao\n   */\n  private navegarEntreMarcasRevisao = (direcao: string): void => {\n    const atributo = direcao === 'abaixo' ? 'next' : 'prev';\n    let linha = this.quill.linhaAtual;\n    if (linha.elemento.revisao) {\n      linha = linha[atributo];\n    }\n\n    while (linha && !linha.elemento.revisao) {\n      linha = linha[atributo];\n    }\n\n    if (linha) {\n      this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n      this.quill.marcarLinhaAtual(linha);\n    }\n  };\n\n  private checkedSwitchMarcaAlteracao = (): void => {\n    const switchMarcaAlteracaoView = document.getElementById(this._idSwitchRevisao) as any;\n    setCheckedElement(switchMarcaAlteracaoView, rootStore.getState().elementoReducer.emRevisao);\n  };\n\n  private disabledParagrafoElementoRemovido = (event: StateEvent): void => {\n    const elementos: Elemento[] = event.elementos ?? [];\n    elementos!.forEach((elemento: Elemento) => {\n      const paragrafo = document.getElementById('texto__dispositivo' + elemento.uuid) as any;\n\n      if (paragrafo) {\n        if (elemento.revisao && elemento.revisao.descricao === 'Dispositivo removido') {\n          paragrafo.setAttribute('contenteditable', 'false');\n        } else {\n          paragrafo.setAttribute('contenteditable', 'true');\n        }\n      }\n    });\n  };\n}\n","import { Elemento } from '../../model/elemento';\nimport { adicionarAgrupadorArtigoAction, adicionarAgrupadorArtigoAntesAction } from './../../model/lexml/acao/adicionarAgrupadorArtigoAction';\n\nexport const adicionarAgrupadorArtigoDialog = (elemento: Elemento, quill: any, store: any): void => {\n  Array.from(document.querySelectorAll('#slDialogAdicionarAgrupadorArtigo')).forEach(el => document.body.removeChild(el));\n\n  const tipoPai = elemento.hierarquia?.pai?.tipo;\n  const defaultValue = elemento.agrupador ? elemento.tipo : tipoPai === 'Articulacao' ? 'Capitulo' : tipoPai;\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.id = 'slDialogAdicionarAgrupadorArtigo';\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Adicionar agrupador de artigo';\n\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n\n    #chkManterNoMesmoGrupoDeAspas {\n      margin: 10px;\n    }\n    #chkManterNoMesmoGrupoDeAspas[disabled] {\n      display: none;\n    }\n    #rdgPosicao {\n      margin-top: 20px;\n    }\n\n  </style>\n  <div class=\"agrupadores\">\n    <sl-radio-group fieldset label=\"Tipo de agrupador\" id=\"rdgTipoAgrupador\">\n      <sl-radio class=\"tipo-agrupador\" id=\"Parte\" value=\"Parte\">Parte</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Livro\" value=\"Livro\">Livro</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Titulo\" value=\"Titulo\">Título</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Capitulo\" value=\"Capitulo\">Capítulo</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Secao\" value=\"Secao\">Seção</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Subsecao\" value=\"Subsecao\">Subseção</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div style=\"display: ${elemento.tipo === 'Artigo' ? 'none' : 'block'};\">\n    <sl-radio-group fieldset label=\"Posicionamento\" id=\"rdgPosicao\">\n      <sl-radio class=\"posicao-agrupador\" id=\"posicao-antes\" value=\"antes\">Antes</sl-radio>\n      <sl-radio class=\"posicao-agrupador\" id=\"posicao-depois\" value=\"depois\" checked>Depois</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div>\n    <sl-checkbox id=\"chkManterNoMesmoGrupoDeAspas\">Manter no mesmo grupo de aspas</sl-checkbox>\n  </div>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  const opcoes = Array.from(content.querySelectorAll('.tipo-agrupador'));\n\n  const tiposPermitidos = [...elemento.tiposAgrupadoresQuePodemSerInseridosAntes!];\n  if (elemento.tipo !== 'Artigo') {\n    tiposPermitidos.push(...elemento.tiposAgrupadoresQuePodemSerInseridosDepois!);\n  }\n\n  const defaultAux = tiposPermitidos.length === 1 ? tiposPermitidos[0] : defaultValue;\n  const elTipoAgrupadorDefault = opcoes.find(el => (el as any).value === defaultAux) as any;\n  elTipoAgrupadorDefault.checked = true;\n\n  opcoes.forEach(el => {\n    const element = el as HTMLInputElement;\n    element.disabled = !tiposPermitidos.includes(element.value);\n    element.checked = element.disabled ? false : element.checked;\n    if (element.checked) {\n      setTimeout(() => {\n        element.focus();\n      }, 0);\n    }\n  });\n\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const optPosicaoAntes = content.querySelector('#posicao-antes')! as any;\n  const optPosicaoDepois = content.querySelector('#posicao-depois')! as any;\n\n  const chkManterNoMesmoGrupoDeAspas = content.querySelector('#chkManterNoMesmoGrupoDeAspas')! as HTMLInputElement;\n\n  let ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario = false;\n  chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n\n  const action = elemento.tipo === 'Artigo' ? adicionarAgrupadorArtigoAction : adicionarAgrupadorArtigoAntesAction;\n\n  const validarStatusChkManterNoMesmoGrupoDeAspas = (): void => {\n    const posicao = (document.querySelector('sl-radio.posicao-agrupador[aria-checked=\"true\"]') as any)?.value;\n    const isCabecaAlteracao = elemento.abreAspas && elemento.fechaAspas;\n\n    if (elemento.agrupador) {\n      if (isCabecaAlteracao) {\n        chkManterNoMesmoGrupoDeAspas.disabled = false;\n        chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n      } else if ((!elemento.abreAspas && !elemento.fechaAspas) || (elemento.abreAspas && posicao === 'depois') || (elemento.fechaAspas && posicao === 'antes')) {\n        chkManterNoMesmoGrupoDeAspas.disabled = true;\n        chkManterNoMesmoGrupoDeAspas.checked = true;\n      } else {\n        chkManterNoMesmoGrupoDeAspas.disabled = false;\n        chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n      }\n    } else {\n      chkManterNoMesmoGrupoDeAspas.disabled = true;\n      chkManterNoMesmoGrupoDeAspas.checked = !elemento.abreAspas;\n    }\n  };\n\n  chkManterNoMesmoGrupoDeAspas.onchange = (evt: any): void => {\n    ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario = evt.target.checked;\n  };\n\n  setTimeout(() => validarStatusChkManterNoMesmoGrupoDeAspas(), 0);\n\n  (content.querySelector('#rdgPosicao')! as any).onclick = (): void => {\n    validarStatusChkManterNoMesmoGrupoDeAspas();\n  };\n\n  (content.querySelector('#rdgTipoAgrupador')! as any).onclick = (evt: any): void => {\n    if (elemento.tipo === 'Artigo' || !tiposPermitidos.includes(evt.target.value)) {\n      return;\n    }\n\n    optPosicaoAntes.disabled = !elemento.tiposAgrupadoresQuePodemSerInseridosAntes!.includes(evt.target.value);\n    optPosicaoDepois.disabled = !elemento.tiposAgrupadoresQuePodemSerInseridosDepois!.includes(evt.target.value);\n\n    if (!optPosicaoAntes.disabled && !optPosicaoDepois.disabled) {\n      optPosicaoAntes.checked = false;\n      optPosicaoDepois.checked = true;\n    } else {\n      optPosicaoAntes.checked = !optPosicaoAntes.disabled;\n      optPosicaoDepois.checked = !optPosicaoDepois.disabled;\n    }\n\n    // optPosicaoDepois.checked = tiposAgrupadorArtigo.indexOf(evt.target.value) >= tiposAgrupadorArtigo.indexOf(elemento.tipo!);\n    // optPosicaoAntes.checked = !optPosicaoDepois.checked;\n\n    validarStatusChkManterNoMesmoGrupoDeAspas();\n  };\n\n  ok.onclick = (): void => {\n    const tipo = (document.querySelector('sl-radio.tipo-agrupador[aria-checked=\"true\"]') as any).value;\n    const posicao = elemento.tipo === 'Artigo' ? 'antes' : (document.querySelector('sl-radio.posicao-agrupador[aria-checked=\"true\"]') as any).value;\n    const manterNoMesmoGrupoDeAspas = chkManterNoMesmoGrupoDeAspas.checked;\n    if (tipo) {\n      // const manterNoMesmoGrupoDeAspas = elemento.tipo !== 'Artigo' || elemento.hierarquia?.pai?.tipo !== 'Articulacao';\n      store.dispatch(action.execute(elemento, tipo, undefined, posicao, manterNoMesmoGrupoDeAspas));\n    }\n    dialogElem?.hide();\n    document.body.removeChild(dialogElem);\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    document.body.removeChild(dialogElem);\n  };\n\n  setTimeout(() => elTipoAgrupadorDefault.click(), 0);\n\n  quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n};\n","import { Elemento } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\n\nexport const transformarAction = (elemento: Elemento, novoTipo: string): any => {\n  const action = new TransformarElemento(\n    TipoDispositivo[novoTipo.toLowerCase()],\n    'Transformar ' + elemento.tipo + 'em ' + TipoDispositivo[novoTipo.toLowerCase()].name,\n    'transformar' + elemento.tipo + 'Em' + TipoDispositivo[novoTipo.toLowerCase()].name\n  );\n\n  return action.execute(elemento);\n};\n","import { Elemento } from '../../model/elemento';\nimport './autocomplete-norma';\n\nexport async function informarNormaDialog(elemento: Elemento, quill: any, store: any, action: any, urlAutocomplete: string): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Dados da norma vigente';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n\n  <div class=\"input-validation-required\">\n    <autocomplete-norma id=\"auto-norma\" urnInicial=\"${elemento.norma}\" urlAutocomplete=\"${urlAutocomplete}\"></autocomplete-norma>\n  </div>\n  <br/>\n  <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n    <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n    <strong>Dados inválidos.</strong><br/>\n    Identifique uma norma a ser alterada.\n  </sl-alert>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  const autocompleteNorma = content.querySelector('#auto-norma') as any;\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const alerta = content.querySelector('sl-alert');\n\n  let urn = '';\n\n  autocompleteNorma!['onSelect'] = (norma): void => {\n    urn = norma.urn;\n  };\n\n  ok!['onclick'] = (): void => {\n    if (urn) {\n      quill.focus();\n      alerta?.hide();\n      dialogElem?.hide();\n      dialogElem?.remove();\n      elemento.norma = urn;\n      store.dispatch(action.execute(elemento));\n    } else {\n      alerta?.show();\n    }\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    dialogElem?.remove();\n  };\n\n  quill.blur();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  autocompleteNorma.focusAutoComplete();\n}\n","import { LitElement, html, TemplateResult, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { Elemento } from '../../model/elemento';\n\n@customElement('lexml-eta-elemento')\nexport class ElementoComponent extends LitElement {\n  @property({ type: Object }) elemento!: Elemento;\n\n  static styles = css`\n    :host {\n      display: block;\n      padding: 0px;\n      margin: 0px;\n      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n        'Noto Color Emoji';\n      font-size: 1.1em;\n      line-height: 1.2;\n      color: #646260;\n      text-transform: none !important;\n    }\n\n    p.rotulo {\n      margin: 5px !important;\n      color: #373634;\n      font-weight: 600;\n      text-align: center;\n    }\n\n    p.texto {\n      margin: 5px !important;\n    }\n\n    p.texto-agrupador {\n      margin: 5px !important;\n      text-align: center;\n    }\n\n    span.rotulo {\n      color: #373634;\n      font-weight: 600;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"box\">\n        <div class=\"conteudo\">${this.elemento.agrupador ? this.htmlAgrupador() : this.htmlDispositivo()}</div>\n      </div>\n    `;\n  }\n\n  private htmlAgrupador = (): TemplateResult =>\n    html`<p class=\"rotulo\">${this.elemento.rotulo}</p>\n      <p class=\"texto-agrupador\">${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}</p>`;\n\n  private htmlDispositivo = (): TemplateResult =>\n    html`\n      <p class=\"texto\" style=\"${`padding-left: ${this.elemento.nivel * 20}px;`}\">\n        <span class=\"rotulo\">${this.elemento.rotulo}</span>\n        ${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}\n      </p>\n    `;\n}\n","import { css, html, LitElement, TemplateResult } from 'lit';\nimport { customElement } from 'lit/decorators.js';\n\n@customElement('lexml-eta-atalhos')\nexport class AtalhosComponent extends LitElement {\n  static styles = css`\n    :host {\n      display: block;\n      padding: 10px;\n      font-family: var(--sl-font-sans);\n    }\n    .lx-eta-help-content div div {\n      color: black;\n      padding: 0.4rem 0;\n      text-decoration: none;\n      display: block;\n      white-space: wrap;\n      font-size: 0.8em;\n      font-weight: normal !important;\n      text-align: left;\n    }\n\n    .lx-eta-help-info {\n      display: block;\n      font-weight: normal !important;\n      text-align: left;\n      color: #555555;\n      background-color: #fefefe;\n      border: 0.5px solid #ccc;\n      padding: 0.5rem;\n      margin-block: 0.1rem;\n      border-radius: 0.5rem;\n      font-style: italic;\n    }\n    .lx-eta-help-content h4 {\n      padding: 1rem 0 0.5rem 0;\n      margin: 0;\n    }\n\n    .lx-eta-help-group {\n      background-color: #eeeeee;\n      padding: 0.5rem;\n      border-radius: 0.5rem;\n      border: 0.5px solid #ccc;\n      box-shadow: var(--sl-shadow-x-large);\n      margin-block-end: 1rem;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"lx-eta-help\">\n        <div class=\"lx-eta-help-content\">\n          <h4>Desfazer e refazer</h4>\n          <div class=\"lx-eta-help-group\">\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Z</sl-badge>&nbsp;-&nbsp;Desfaz ultima alteração</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Y</sl-badge>&nbsp;-&nbsp;Refaz alteração</div>\n          </div>\n          <h4>Seleção e navegação</h4>\n          <div class=\"lx-eta-help-group\">\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Shift</sl-badge>+<sl-badge variant=\"neutral\">A</sl-badge>&nbsp;-&nbsp;Seleciona o texto do\n              dispositivo atual\n            </div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Home</sl-badge>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">End</sl-badge>&nbsp;-&nbsp;Vai para o último dispositivo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">F</sl-badge>&nbsp;-&nbsp;Localizar texto</div>\n          </div>\n          <h4>Criação e edição de dispositivos adicionados</h4>\n          <div class=\"lx-eta-help-group\">\n            <div>\n              <sl-badge variant=\"neutral\">Enter</sl-badge>&nbsp;-&nbsp;Cria um novo dispositivo do mesmo tipo ou cria dispositivo subordinado quando termina com dois pontos\n            </div>\n            <div><span class=\"lx-eta-help-info\">Os atalhos abaixo funcionam apenas para dispositivos adicionados</span></div>\n            <div><sl-badge variant=\"neutral\">Tab</sl-badge>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provável</div>\n            <div>\n              <sl-badge variant=\"neutral\">Shift</sl-badge>+<sl-badge variant=\"neutral\">Tab</sl-badge>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais\n              provável\n            </div>\n            <div><sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">&uarr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para cima</div>\n            <div><sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">&darr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para baixo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">D</sl-badge>&nbsp;-&nbsp;Remove dispositivo atual</div>\n            <div><span class=\"lx-eta-help-info\">Os atalhos abaixo funcionam apenas para dispositivos adicionados em alteração de normas</span></div>\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">N</sl-badge>&nbsp;-&nbsp;Numera o dispositivo que\n              foi adicionado em alteração de norma\n            </div>\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">O</sl-badge>&nbsp;-&nbsp;Omite dispositivos\n              (transforma em linha pontilhada que representa um ou mais dispositivos omitidos)\n            </div>\n            <div><sl-badge variant=\"neutral\">...</sl-badge>&nbsp;-&nbsp;Digitando três pontos no texto do dispositivo, cria-se uma linha pontilhada</div>\n          </div>\n          <h4>Formatação de texto</h4>\n          <div class=\"lx-eta-help-group\">\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">B</sl-badge>&nbsp;-&nbsp;Aplica <b>negrito</b> ao texto selecionado</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">I</sl-badge>&nbsp;-&nbsp;Aplica <i>itálico</i> ao texto selecionado</div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-eta-atalhos': AtalhosComponent;\n  }\n}\n","import { html } from 'lit';\n\nexport const editorTextoRicoCss = html`\n  <style>\n    .editor-texto-rico {\n      height: 375px;\n      font-size: 18px !important;\n    }\n    .editor-texto-rico p,\n    .editor-texto-rico ol,\n    .editor-texto-rico ul {\n      margin-bottom: 0.7rem;\n    }\n    .editor-texto-rico p:not(.ql-align-rigth, .ql-align-center) {\n      text-indent: 3rem;\n    }\n    .ql-toolbar.ql-snow .ql-formats {\n      margin-right: 8px;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n      content: 'Salvar';\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip a.ql-action::after {\n      display: inline;\n      content: 'Editar';\n    }\n\n    .editor-texto-rico.ql-snow .ql-tooltip a.ql-remove::before {\n      display: inline;\n      content: 'Remover';\n    }\n\n    .editor-texto-rico.ql-snow .ql-tooltip::before {\n      content: 'Insira o link:';\n    }\n\n    .editor-texto-rico .estilo-ementa {\n      text-indent: 0 !important;\n      text-align: justify;\n      margin-left: 40%;\n    }\n    .editor-texto-rico .estilo-norma-alterada {\n      margin-left: 3rem;\n    }\n\n    #revisoes-justificativa-icon sl-icon,\n    #revisoes-texto-livre-icon sl-icon,\n    #aceita-revisao-justificativa {\n      margin-right: 0.1rem;\n    }\n\n    .revisoes-justificativa-icon__ativo {\n      color: white;\n      background-color: var(--sl-color-warning-600) !important;\n      border-color: white !important;\n    }\n    .revisoes-texto-livre-icon__ativo {\n      color: white;\n      background-color: var(--sl-color-warning-600) !important;\n      border-color: white !important;\n    }\n    .lista-revisoes-justificativa {\n      padding-left: 1rem;\n      padding-right: 0.5rem;\n    }\n    #chk-em-revisao-justificativa {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao-justificativa[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    #chk-em-revisao-texto-livre {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao-texto-livre[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    #toolbar {\n      padding: 1.5px 0 1.5px 8px;\n    }\n\n    #badge-marca-alteracao-justificativa::part(base) {\n      min-width: 1.4rem;\n    }\n\n    #badge-marca-alteracao-texto-livre::part(base) {\n      min-width: 1.4rem;\n    }\n    revisao-container {\n      margin-left: auto;\n    }\n\n    .ql-toolbar .panel-revisao {\n      display: flex;\n      flex-grow: 1;\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label {\n      width: 160px;\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label::before,\n    .ql-picker.ql-estilo .ql-picker-item::before {\n      content: 'Texto normal';\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label[data-value='ementa']:before,\n    .ql-picker.ql-estilo .ql-picker-item[data-value='ementa']:before {\n      content: 'Ementa';\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label[data-value='norma-alterada']:before,\n    .ql-picker.ql-estilo .ql-picker-item[data-value='norma-alterada']:before {\n      content: 'Norma alterada';\n    }\n\n    .ql-estilo span.ql-picker-label {\n      border-color: #ccc !important;\n    }\n\n    .ql-picker-item[data-value='insert']::after {\n      content: 'Inserir tabela';\n    }\n\n    .ql-picker-item[data-value='append-col']::after {\n      content: 'Inserir coluna';\n    }\n\n    .ql-picker-item[data-value='append-col-before']::after {\n      content: 'Inserir coluna à esquerda';\n    }\n\n    .ql-picker-item[data-value='append-col-after']::after {\n      content: 'Inserir coluna à direita';\n    }\n\n    .ql-picker-item[data-value='remove-col']::after {\n      content: 'Remover coluna';\n    }\n\n    .ql-picker-item[data-value='change-width-col-modal']::after {\n      content: 'Alterar a largura da coluna';\n    }\n\n    .ql-picker-item[data-value='change-width-table-modal']::after {\n      content: 'Alterar a largura da tabela';\n    }\n\n    .ql-picker-item[data-value='append-row']::after {\n      content: 'Inserir linha';\n    }\n\n    .ql-picker-item[data-value='append-row-above']::after {\n      content: 'Inserir linha acima';\n    }\n\n    .ql-picker-item[data-value='append-row-below']::after {\n      content: 'Inserir linha abaixo';\n    }\n\n    .ql-picker-item[data-value='remove-row']::after {\n      content: 'Remover linha';\n    }\n\n    .ql-picker-item[data-value='split-cell']::after {\n      content: 'Dividir célula';\n    }\n\n    .ql-picker-item[data-value='merge-selection']::after {\n      content: 'Mesclar células';\n    }\n\n    .ql-picker-item[data-value='remove-cell']::after {\n      content: 'Remover célula';\n    }\n\n    .ql-picker-item[data-value='remove-selection']::after {\n      content: 'Remover seleção';\n    }\n\n    .ql-picker-item[data-value='undo']::after {\n      content: 'Desfazer';\n    }\n\n    .ql-picker-item[data-value='redo']::after {\n      content: 'Refazer';\n    }\n\n    .ql-picker-item[data-value='remove-table']:before {\n      content: 'Remover tabela';\n    }\n\n    .ql-editor td > p {\n      text-indent: 0 !important;\n      margin-bottom: 0 !important;\n    }\n\n    .table-selected {\n      border: 1px solid #87ceeb; /* Define a borda sólida em tom azul claro */\n      box-shadow: 0 0 10px rgba(135, 206, 235, 0.5); /* Adiciona sombra com tom azul claro */\n    }\n\n    .ql-snow .ql-editor img {\n      max-width: 100%;\n    }\n\n    .editor-texto-rico p.ql-text-indent-0px {\n      text-indent: 0;\n    }\n\n    .editor-texto-rico p.ql-margin-bottom-0px {\n      margin-bottom: 0;\n    }\n\n    .ql-editor ins {\n      text-decoration: none;\n      background-color: #b2e6be;\n      /* #d4edda; */\n    }\n\n    .ql-editor del {\n      text-decoration: strikethrough;\n      background-color: #f4a9b0;\n      /* #f8d7da; */\n    }\n\n    @media (max-width: 768px) {\n      .mobile-buttons {\n        display: inline-block !important;\n      }\n      #chk-em-revisao-justificativa span {\n        display: none;\n      }\n      .ql-snow .ql-editor img {\n        max-width: 100%;\n      }\n    }\n  </style>\n`;\n","import { html } from 'lit';\n\nexport const quillTableCss = html`<style>\n  .ql-editor table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    overflow: hidden;\n    white-space: nowrap;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .ql-editor table td {\n    border: 1px solid black;\n    padding: 2px 5px;\n    height: 25px;\n    vertical-align: top;\n    white-space: pre-wrap; /* https://github.com/quilljs/quill/issues/1760 */\n  }\n\n  .ql-editor table td[rowspan='2'] {\n    height: 50px;\n  }\n\n  .ql-editor table td[rowspan='3'] {\n    height: 75px;\n  }\n\n  .ql-editor table td[rowspan='4'] {\n    height: 100px;\n  }\n\n  .ql-editor table td[rowspan='5'] {\n    height: 125px;\n  }\n\n  .ql-editor table td[rowspan='6'] {\n    height: 150px;\n  }\n\n  .ql-editor table td[rowspan='7'] {\n    height: 175px;\n  }\n\n  .ql-editor table td[rowspan='8'] {\n    height: 200px;\n  }\n\n  .ql-editor table td[rowspan='9'] {\n    height: 225px;\n  }\n\n  .ql-editor table td.ql-cell-selected {\n    background-color: #cce0f8;\n  }\n\n  .ql-editor table td[merge_id] {\n    display: none;\n  }\n\n  .quill-better-table-wrapper {\n    overflow-x: auto;\n  }\n\n  .ql-picker.ql-table {\n    width: auto !important;\n    margin-right: 0;\n  }\n\n  .ql-picker.ql-table .ql-picker-label svg {\n    display: none;\n  }\n\n  .ql-picker.ql-table .ql-picker-label::before {\n    display: block;\n    font-size: 14px;\n  }\n\n  .ql-table:nth-of-type(1) .ql-picker-label {\n    background: url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-table\" viewBox=\"0 0 16 16\"><path d=\"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z\"/></svg>')\n        no-repeat center,\n      white;\n    background-size: 16px;\n  }\n\n  .ql-picker.ql-table .ql-picker-label::before {\n    font-family: 'Font Awesome 6 Free';\n    font-weight: 900;\n    padding-top: 2px;\n    line-height: 1em;\n  }\n\n  .ql-table:nth-of-type(1),\n  .ql-contain {\n    width: 90px;\n    margin-right: 0;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) {\n    font-size: 11px;\n    font-weight: normal;\n  }\n\n  .ql-picker.ql-table .ql-picker-label {\n    padding: 2px 3px;\n    width: 23px;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-options {\n    width: 180px;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {\n    display: block;\n    float: left;\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    padding: 0px;\n    margin: 1px;\n  }\n\n  .ql-toolbar .ql-picker.ql-table .ql-picker-item {\n    display: none;\n  }\n\n  .ql-toolbar .ql-picker.ql-table .ql-picker-item.enabled {\n    display: block;\n  }\n\n  .ql-picker.ql-table:nth-of-type(2) {\n    display: flex;\n    width: 145px;\n  }\n\n  .ql-table:nth-of-type(2) .ql-picker-label {\n    background: url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-border\" viewBox=\"0 0 16 16\"><path d=\"M0 0h.969v.5H1v.469H.969V1H.5V.969H0V0zm2.844 1h-.938V0h.938v1zm1.875 0H3.78V0h.938v1zm1.875 0h-.938V0h.938v1zm.937 0V.969H7.5V.5h.031V0h.938v.5H8.5v.469h-.031V1H7.53zm2.813 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zM15.5 1h-.469V.969H15V.5h.031V0H16v.969h-.5V1zM1 1.906v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM1 3.78v.938H0V3.78h1zm6.5.938V3.78h1v.938h-1zm7.5 0V3.78h1v.938h-1zM1 5.656v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM.969 8.5H.5v-.031H0V7.53h.5V7.5h.469v.031H1v.938H.969V8.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875-.031V8.5H7.53v-.031H7.5V7.53h.031V7.5h.938v.031H8.5v.938h-.031zm1.875.031h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.406 0h-.469v-.031H15V7.53h.031V7.5h.469v.031h.5v.938h-.5V8.5zM0 10.344v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 12.22v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 14.094v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM.969 16H0v-.969h.5V15h.469v.031H1v.469H.969v.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H7.5v-.469h.031V15h.938v.031H8.5v.469h-.031v.5H7.53zm2.813 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H15v-.469h.031V15h.469v.031h.5V16h-.969z\"/></svg>')\n        no-repeat center,\n      white;\n    background-size: 16px;\n  }\n  .ql-picker.ql-table:nth-of-type(2) {\n    color: #444;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {\n    border: 1px solid #444;\n    color: #444;\n  }\n\n  .ql-table:nth-of-type(2) .ql-picker-label.ql-active {\n    color: #444 !important;\n  }\n\n  .ql-toolbar .ql-picker-item.ql-selected:before,\n  .ql-picker.ql-table:nth-of-type(2) .ql-picker-item {\n    color: #444;\n  }\n\n  /* .ql-picker-label.ql-active .ql-stroke {\n    stroke: #444 !important;\n  } */\n\n  .ql-picker-item[data-value='remove-table'] {\n    border: none !important;\n    width: 100%;\n  }\n\n  .ql-picker-item[data-value='newtable_1_1']:before {\n    content: '1x1';\n  }\n\n  .ql-picker-item[data-value='newtable_1_2']:before {\n    content: '1x2';\n  }\n\n  .ql-picker-item[data-value='newtable_1_3']:before {\n    content: '1x3';\n  }\n\n  .ql-picker-item[data-value='newtable_1_4']:before {\n    content: '1x4';\n  }\n\n  .ql-picker-item[data-value='newtable_1_5']:before {\n    content: '1x5';\n  }\n\n  .ql-picker-item[data-value='newtable_2_1']:before {\n    content: '2x1';\n  }\n\n  .ql-picker-item[data-value='newtable_2_2']:before {\n    content: '2x2';\n  }\n\n  .ql-picker-item[data-value='newtable_2_3']:before {\n    content: '2x3';\n  }\n\n  .ql-picker-item[data-value='newtable_2_4']:before {\n    content: '2x4';\n  }\n\n  .ql-picker-item[data-value='newtable_2_5']:before {\n    content: '2x5';\n  }\n\n  .ql-picker-item[data-value='newtable_3_1']:before {\n    content: '3x1';\n  }\n\n  .ql-picker-item[data-value='newtable_3_2']:before {\n    content: '3x2';\n  }\n\n  .ql-picker-item[data-value='newtable_3_3']:before {\n    content: '3x3';\n  }\n\n  .ql-picker-item[data-value='newtable_3_4']:before {\n    content: '3x4';\n  }\n\n  .ql-picker-item[data-value='newtable_3_5']:before {\n    content: '3x5';\n  }\n\n  .ql-picker-item[data-value='newtable_4_1']:before {\n    content: '4x1';\n  }\n\n  .ql-picker-item[data-value='newtable_4_2']:before {\n    content: '4x2';\n  }\n\n  .ql-picker-item[data-value='newtable_4_3']:before {\n    content: '4x3';\n  }\n\n  .ql-picker-item[data-value='newtable_4_4']:before {\n    content: '4x4';\n  }\n\n  .ql-picker-item[data-value='newtable_4_5']:before {\n    content: '4x5';\n  }\n\n  .ql-picker-item[data-value='newtable_5_1']:before {\n    content: '5x1';\n  }\n\n  .ql-picker-item[data-value='newtable_5_2']:before {\n    content: '5x2';\n  }\n\n  .ql-picker-item[data-value='newtable_5_3']:before {\n    content: '5x3';\n  }\n\n  .ql-picker-item[data-value='newtable_5_4']:before {\n    content: '5x4';\n  }\n\n  .ql-picker-item[data-value='newtable_5_5']:before {\n    content: '5x5';\n  }\n\n  p:has(img) {\n    text-align: center !important;\n    text-indent: 0 !important;\n  }\n</style>`;\n","// import Quill from 'quill';\n\nconst Container = Quill.import('blots/container');\nconst Block = Quill.import('blots/block');\nconst BlockEmbed = Quill.import('blots/block/embed');\nconst Parchment = Quill.import('parchment');\n\nclass ContainBlot extends Container {\n  static create(value) {\n    return super.create(value);\n  }\n\n  // formats(domNode) {\n  //   if (domNode) {\n  //     return domNode.tagName;\n  //   }\n  //   return this.domNode.tagName;\n  // }\n}\n\nContainBlot.blotName = 'contain';\nContainBlot.tagName = 'contain';\nContainBlot.scope = Parchment.Scope.BLOCK_BLOT;\nContainBlot.defaultChild = 'block';\nContainBlot.allowedChildren = [Block, BlockEmbed, Container];\n\nexport default ContainBlot;\n","// import Quill from 'quill';\nimport ContainBlot from './ContainBlot';\n\nconst Container = Quill.import('blots/container');\nconst Block = Quill.import('blots/block');\nconst BlockEmbed = Quill.import('blots/block/embed');\nconst Parchment = Quill.import('parchment');\n\nclass TableCell extends ContainBlot {\n  static create(value) {\n    const tagName = 'td';\n    let node = super.create(tagName);\n    let ids = value.split('|');\n    node.setAttribute('table_id', ids[0]);\n    node.setAttribute('row_id', ids[1]);\n    node.setAttribute('cell_id', ids[2]);\n    if (ids[3]) {\n      node.setAttribute('merge_id', ids[3]);\n    }\n    if (ids[4]) {\n      node.setAttribute('colspan', ids[4]);\n    }\n    if (ids[5]) {\n      node.setAttribute('rowspan', ids[5]);\n    }\n    return node;\n  }\n\n  format() {}\n\n  formats() {\n    // We don't inherit from FormatBlot\n    return {\n      [this.statics.blotName]:\n        [\n          this.domNode.getAttribute('table_id'),\n          this.domNode.getAttribute('row_id'),\n          this.domNode.getAttribute('cell_id'),\n          this.domNode.getAttribute('merge_id'),\n          this.domNode.getAttribute('colspan'),\n          this.domNode.getAttribute('rowspan')\n        ].join('|')\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n\n    let parent = this.parent;\n    if (parent != null) {\n      if (parent.statics.blotName === 'td') {\n        this.moveChildren(parent, this);\n        this.remove();\n        return;\n      } else if (parent.statics.blotName !== 'tr') {\n        // we will mark td position, put in table and replace mark\n        let mark = Parchment.create('block');\n        this.parent.insertBefore(mark, this.next);\n        let table = Parchment.create('table', this.domNode.getAttribute('table_id'));\n        let tr = Parchment.create('tr', this.domNode.getAttribute('row_id'));\n        table.appendChild(tr);\n        tr.appendChild(this);\n        table.replace(mark);\n      }\n    }\n\n    // merge same TD id\n    let next = this.next;\n    if (next != null && next.prev === this &&\n      next.statics.blotName === this.statics.blotName &&\n      next.domNode.tagName === this.domNode.tagName &&\n      next.domNode.getAttribute('cell_id') === this.domNode.getAttribute('cell_id')\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = Parchment.create(this.statics.defaultChild);\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot)\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = Parchment.create(this.statics.defaultChild);\n      target.moveChildren(item);\n      this.appendChild(item);\n    }\n    if (target.parent == null) return;\n    super.replace(target)\n  }\n\n  moveChildren(targetParent, refNode) {\n    this.children.forEach(function (child) {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n}\n\nTableCell.blotName = 'td';\nTableCell.tagName = 'td';\nTableCell.className = 'td-q';\nTableCell.scope = Parchment.Scope.BLOCK_BLOT;\nTableCell.allowedChildren = [Block, BlockEmbed, Container];\n\nexport default TableCell;\n","// import Quill from 'quill';\nimport TableTrick from './TableTrick';\n\nconst Parchment = Quill.import('parchment');\n\nclass TableHistory {\n  // Register DOM change into current table history entry\n  static register(type, change) {\n    TableHistory.changes.push({ type, ...change });\n  }\n\n  // Add table history entry\n  static add(quill) {\n    if (!TableHistory.changes.length) return;\n\n    const historyChangeStatus = quill.history.ignoreChange;\n    // ignore history change and reset last recorded time for adding later changes in a new history entry\n    quill.history.ignoreChange = true;\n    quill.history.lastRecorded = 0;\n\n    // wait history update\n    setTimeout(() => {\n      // reset history changes value\n      quill.history.ignoreChange = historyChangeStatus;\n\n      // add new entry in table stack\n      const id = TableTrick.random_id();\n      quill.history.tableStack[id] = TableHistory.changes;\n\n      // set reference to table stack entry in a new history entry\n      quill.history.stack.undo.push({ type: 'tableHistory', id: id });\n\n      TableHistory.changes = [];\n    }, 0);\n  }\n\n  static undo(quill, id) {\n    const historyChangeStatus = quill.history.ignoreChange;\n    quill.history.ignoreChange = true;\n\n    const entry = quill.history.tableStack[id];\n    if (typeof entry !== 'undefined') {\n      // apply changes from last change to first change (undo)\n      entry.reverse().forEach(change => {\n        const oldDelta = quill.getContents();\n        switch (change.type) {\n          case 'insert':\n            // remove node (undo)\n            TableHistory.remove(change);\n            break;\n          case 'remove':\n            // add node (undo)\n            TableHistory.insert(change);\n            break;\n          case 'split':\n            // merge cell (redo)\n            TableHistory.merge(change, true);\n            // force triggering text-change event\n            TableTrick.emitTextChange(quill, oldDelta);\n            break;\n          case 'merge':\n            // split cell (redo)\n            TableHistory.split(change, true);\n            break;\n          case 'propertyChange':\n            // property change (undo)\n            TableHistory.propertyChange(change, true);\n            break;\n        }\n      });\n    }\n\n    // wait history update\n    setTimeout(() => {\n      // update history\n      const historyEntry = quill.history.stack.undo.pop();\n      quill.history.stack.redo.push(historyEntry);\n      quill.history.ignoreChange = historyChangeStatus;\n    }, 0);\n  }\n\n  static redo(quill, id) {\n    const historyChangeStatus = quill.history.ignoreChange;\n    quill.history.ignoreChange = true;\n\n    const entry = quill.history.tableStack[id];\n    if (typeof entry !== 'undefined') {\n      // apply changes from first change to last change (redo)\n      entry.forEach(change => {\n        switch (change.type) {\n          case 'insert':\n            // add node (redo)\n            TableHistory.insert(change);\n            break;\n          case 'remove':\n            // remove node (redo)\n            TableHistory.remove(change);\n            break;\n          case 'split':\n            // split cell (redo)\n            TableHistory.split(change, false);\n            break;\n          case 'merge':\n            // merge cell (redo)\n            TableHistory.merge(change, false);\n            break;\n          case 'propertyChange':\n            // property change (redo)\n            TableHistory.propertyChange(change, false);\n            break;\n        }\n      });\n    }\n\n    // wait history update\n    setTimeout(() => {\n      // update history\n      const historyEntry = quill.history.stack.redo.pop();\n      quill.history.stack.undo.push(historyEntry);\n      quill.history.ignoreChange = historyChangeStatus;\n    }, 0);\n  }\n\n  static insert(change) {\n    const parentNode = change.parentNode || change.nextNode.parentNode;\n    if (parentNode) {\n      const _parentNode = Parchment.find(parentNode);\n      if (_parentNode) {\n        const _node = Parchment.create(change.node);\n        if (change.nextNode) {\n          const _nextNode = Parchment.find(change.nextNode);\n          if (_nextNode) {\n            _parentNode.insertBefore(_node, _nextNode);\n          }\n        } else {\n          _parentNode.appendChild(_node);\n        }\n      }\n\n      // force re-rendering cells border (Firefox bug)\n      const tableNode = change.node.nodeName === 'TABLE' ? change.node : parentNode.closest('table');\n      tableNode.style.setProperty('overflow', (window.getComputedStyle(tableNode)['overflow'] || 'visible') === 'visible' ? 'hidden' : 'visible');\n      setTimeout(() => {\n        tableNode.style.removeProperty('overflow');\n      }, 0);\n\n      return true;\n    }\n    return false;\n  }\n\n  static remove(change) {\n    change.node.remove();\n    return true;\n  }\n\n  static split(change, revert) {\n    const td = change.node;\n    // remove colspan and rowspan attributes\n    td.removeAttribute('colspan');\n    td.removeAttribute('rowspan');\n    // for each merged node, remove merge_id attribute and restore content\n    change.mergedNodes.forEach(cell => {\n      cell.node.removeAttribute('merge_id');\n      cell.node.innerHTML = cell[revert ? 'oldContent' : 'newContent'];\n    });\n    // restore content\n    td.innerHTML = change[revert ? 'oldContent' : 'newContent'];\n    return true;\n  }\n\n  static merge(change, revert) {\n    const td = change.node;\n    const cell_id = td.getAttribute('cell_id');\n    // set colspan and rowspan attributes\n    td.setAttribute('colspan', change.colSpan);\n    td.setAttribute('rowspan', change.rowSpan);\n    // for each node to merge, set merge_id attribute and restore content\n    change.mergedNodes.forEach(cell => {\n      cell.node.innerHTML = cell[revert ? 'oldContent' : 'newContent'];\n      cell.node.setAttribute('merge_id', cell_id);\n    });\n    // restore content\n    td.innerHTML = change[revert ? 'oldContent' : 'newContent'];\n    return true;\n  }\n\n  static propertyChange(change, revert) {\n    const { node, property, oldValue, newValue } = change;\n    const value = revert ? oldValue : newValue;\n    if (value !== null) {\n      node.setAttribute(property, value);\n    } else {\n      node.removeAttribute(property);\n    }\n  }\n}\n\nTableHistory.changes = [];\nexport default TableHistory;\n","export default class TableToolbar {\n  static get(quill) {\n    if (quill.container.previousSibling && quill.container.previousSibling.classList && quill.container.previousSibling.classList.contains('ql-toolbar')) {\n      return quill.container.previousSibling;\n    }\n    return null;\n  }\n\n  static toggle(quill, actions = [], enable = true) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return;\n    if (typeof actions === 'string') actions = [actions];\n\n    actions.forEach(action => {\n      let selector = `.ql-table .ql-picker-item[data-value=\"${action}\"], .ql-table[value=\"${action}\"]`;\n      if (action.startsWith('*') && action.endsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value*=\"${action.substring(1, action.length - 1)}\"], .ql-table[value*=\"${action.substring(1, action.length - 1)}\"]`;\n      } else if (action.startsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value$=\"${action.substring(1)}\"], .ql-table[value$=\"${action.substring(1)}\"]`;\n      } else if (action.endsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value^=\"${action.substring(0, action.length - 1)}\"], .ql-table[value^=\"${action.substring(0, action.length - 1)}\"]`;\n      }\n\n      toolbar.querySelectorAll(selector).forEach(item => {\n        item.classList[enable ? 'add' : 'remove']('enabled');\n      });\n    });\n  }\n\n  static enable(quill, actions) {\n    TableToolbar.toggle(quill, actions, true);\n  }\n\n  static disable(quill, actions) {\n    TableToolbar.toggle(quill, actions, false);\n  }\n\n  static disableAll(quill) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return false;\n    toolbar.querySelectorAll('.ql-table .ql-picker-item.enabled, .ql-table.enabled[value]').forEach(item => item.classList.remove('enabled'));\n  }\n\n  static isEnabled(quill, action) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return false;\n    const item = toolbar.querySelector(`.ql-table .ql-picker-item[data-value=\"${action}\"], .ql-table[value=\"${action}\"]`);\n    return item && item.classList.contains('enabled');\n  }\n}\n","import TableToolbar from './TableToolbar';\n\nclass TableSelection {\n  static mouseDown(quill, e, inCellSelectionOnClick) {\n    if (inCellSelectionOnClick !== undefined){ //we may have no options set for onClick\n      TableSelection.cellSelectionOnClick = inCellSelectionOnClick;\n    }\n\n    if (e.which !== 1) {\n      // do nothing with center or right click\n      return;\n    }\n\n    TableSelection.resetSelection();\n\n    if ((!TableSelection.cellSelectionOnClick && e.ctrlKey) || TableSelection.cellSelectionOnClick){\n      TableSelection.isMouseDown = true;\n      // reset cell selection\n      TableSelection.previousSelection = [TableSelection.selectionStartElement, TableSelection.selectionEndElement];\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableSelection.resetSelection();\n\n      const targetCell = TableSelection.getTargetCell(e);\n      if (!targetCell) {\n        // default mouse down event when clicking outside a cell\n        TableSelection.focusedCell = null;\n        return;\n      }\n\n      if ((!TableSelection.preventMouseDown && targetCell === TableSelection.clickedCellTimeout) || TableSelection.focusedCell === targetCell) {\n        // default mouse down event when multiple click in less than 500ms in the same cell or if the cell is already focused\n        TableSelection.focusedCell = targetCell;\n        return;\n      }\n\n      // single mouse left click = start selection\n      e.preventDefault();\n      TableSelection.focusedCell = null;\n\n      clearTimeout(TableSelection.dblClickTimeout);\n      TableSelection.dblClickTimeout = setTimeout(() => {\n        TableSelection.preventMouseDown = true;\n        TableSelection.clickedCellTimeout = null;\n      }, 500);\n      TableSelection.preventMouseDown = false;\n\n      TableSelection.selectionStartElement = TableSelection.clickedCellTimeout = targetCell;\n\n      if (TableSelection.selectionStartElement) {\n        TableSelection.selectionStartElement.classList.add('ql-cell-selected');\n      }\n    }\n  }\n\n  static mouseMove(quill, e) {\n    if (TableSelection.isMouseDown && TableSelection.selectionStartElement) {\n      const previousSelectionEndElement = TableSelection.selectionEndElement;\n      TableSelection.selectionEndElement = TableSelection.getTargetCell(e);\n      // Update selection if: mouse button is down, selection changed, start and end element exist and are in the same table\n      if (\n        TableSelection.selectionEndElement &&\n        TableSelection.selectionEndElement !== previousSelectionEndElement &&\n        TableSelection.selectionStartElement.closest('table') === TableSelection.selectionEndElement.closest('table')\n      ) {\n        TableSelection.resetSelection();\n\n        // set new selection\n        const coords = TableSelection.getSelectionCoords();\n        for (let y = coords.minY; y <= coords.maxY; y++) {\n          for (let x = coords.minX; x <= coords.maxX; x++) {\n            let cell = TableSelection.getCellAt(x, y);\n            if (cell) {\n              cell.classList.add('ql-cell-selected');\n            }\n          }\n        }\n      }\n    }\n  }\n\n  static mouseUp(quill, e) {\n    TableSelection.isMouseDown = false;\n    if (!TableSelection.selectionEndElement) {\n      TableSelection.selectionEndElement = TableSelection.selectionStartElement;\n    }\n\n    if (\n      TableSelection.previousSelection[0] !== TableSelection.selectionStartElement &&\n      TableSelection.previousSelection[1] !== TableSelection.selectionEndElement\n    ) {\n      TableSelection.selectionChange(quill);\n    }\n  }\n\n  static selectionChange(quill, range = null, oldRange = null) {\n    let isInTable = false;\n    if (TableSelection.selectionStartElement || TableSelection.selectionEndElement) {\n      // there is a table selection\n      isInTable = true;\n      TableToolbar.enable(quill, ['split-cell', 'merge-selection', 'remove-selection']);\n    } else {\n      // Text selection\n      TableToolbar.disable(quill, ['split-cell', 'merge-selection', 'remove-selection']);\n      let selectionStartElement, selectionEndElement;\n      if (range === null && oldRange !== null) {\n        // There is a previous Quill selection but editor is no longer focused (selection-change event)\n        const [startLeaf] = quill.getLeaf(oldRange.index);\n        const [endLeaf] = quill.getLeaf(oldRange.index + oldRange.length);\n        selectionStartElement = startLeaf.parent.domNode;\n        selectionEndElement = endLeaf.parent.domNode;\n      } else {\n        // No Quill selection, use window.getSelection instead\n        const selection = window.getSelection();\n        selectionStartElement = selection.anchorNode ? (selection.anchorNode.nodeType === Node.TEXT_NODE ? selection.anchorNode.parentElement : selection.anchorNode) : null;\n        selectionEndElement = selection.focusNode ? (selection.focusNode.nodeType === Node.TEXT_NODE ? selection.focusNode.parentElement : selection.focusNode) : null;\n      }\n\n      if (selectionStartElement && selectionEndElement) {\n        // there is a text selection\n        let closestTable = selectionStartElement.closest('table');\n        if (closestTable && closestTable.closest('.ql-editor')) {\n          if (selectionEndElement !== selectionStartElement) {\n            closestTable = selectionEndElement.closest('table');\n            isInTable = closestTable && closestTable.closest('.ql-editor');\n          } else {\n            isInTable = true;\n          }\n        }\n      } // no selection = not in table\n    }\n\n    if (!isInTable && quill.table.isInTable) {\n      // disable\n      quill.table.isInTable = false;\n      TableToolbar.disableAll(quill);\n      TableToolbar.enable(quill, ['newtable_*', 'insert', 'undo', 'redo']);\n    }\n\n    if (isInTable && !quill.table.isInTable) {\n      // enable\n      quill.table.isInTable = true;\n      TableToolbar.enable(quill, ['append-row*', 'append-col*', 'remove-cell', 'remove-row', 'remove-col', 'change-width-col-modal', 'change-width-table-modal', 'remove-table']);\n    }\n  }\n\n  static getSelectionCoords() {\n    if (TableSelection.selectionStartElement && TableSelection.selectionEndElement) {\n      const coords = [\n        [\n          Array.prototype.indexOf.call(TableSelection.selectionStartElement.parentElement.children, TableSelection.selectionStartElement),\n          Array.prototype.indexOf.call(TableSelection.selectionStartElement.parentElement.parentElement.children, TableSelection.selectionStartElement.parentElement)\n        ],\n        [\n          Array.prototype.indexOf.call(TableSelection.selectionEndElement.parentElement.children, TableSelection.selectionEndElement),\n          Array.prototype.indexOf.call(TableSelection.selectionEndElement.parentElement.parentElement.children, TableSelection.selectionEndElement.parentElement)\n        ]\n      ];\n\n      return {\n        coords,\n        minX: Math.min(coords[0][0], coords[1][0]),\n        maxX: Math.max(coords[0][0], coords[1][0]),\n        minY: Math.min(coords[0][1], coords[1][1]),\n        maxY: Math.max(coords[0][1], coords[1][1])\n      };\n    }\n    return null;\n  }\n\n  static getCellAt(x, y) {\n    const currentTable = TableSelection.selectionStartElement.closest('table');\n    if (currentTable) {\n      if (typeof currentTable.children[y] !== 'undefined' && typeof currentTable.children[y].children[x] !== 'undefined') {\n        return currentTable.children[y].children[x];\n      }\n    }\n    return null;\n  }\n\n  static getTargetCell(e) {\n    let element = e.target;\n    let cell = null;\n    do {\n      if (['td', 'th'].includes(element.tagName.toLowerCase())) {\n        cell = element;\n        break;\n      }\n      element = element.parentNode;\n    } while (element && element !== e.currentTarget);\n    return cell;\n  }\n\n  static resetSelection(container) {\n    // reset selection for all instances\n    document.querySelectorAll('.ql-editor td.ql-cell-selected').forEach(cell => {\n      cell.classList.remove('ql-cell-selected');\n    });\n  }\n}\n\nTableSelection.focusedCell = null;\nTableSelection.isMouseDown = false;\nTableSelection.selectionStartElement = null;\nTableSelection.selectionEndElement = null;\nTableSelection.previousSelection = [];\n\nTableSelection.dblClickTimeout = null;\nTableSelection.clickedCellTimeout = null;\nTableSelection.preventMouseDown = true;\nTableSelection.cellSelectionOnClick = true\n\nexport default TableSelection;\n","// import Quill from 'quill';\nimport TableHistory from './TableHistory';\nimport TableSelection from './TableSelection';\n\nconst Parchment = Quill.import('parchment');\nconst Container = Quill.import('blots/container');\nconst Scroll = Quill.import('blots/scroll');\n\nexport default class TableTrick {\n  static random_id() {\n    return Math.random().toString(36).slice(2);\n  }\n\n  static getBlot(quill) {\n    let blot = null;\n    const selection = quill.getSelection();\n    if (selection) {\n      blot = quill.getLeaf(selection['index'])[0];\n    }\n    return blot;\n  }\n\n  static find_td(quill) {\n    let blot = TableTrick.getBlot(quill);\n    if (blot) {\n      for (; blot != null && blot.statics.blotName !== 'td';) {\n        blot = blot.parent;\n      }\n    }\n    return blot; // return TD or NULL\n  }\n\n  static find_td_node(quill) {\n    let td = TableTrick.find_td(quill);\n    if(td) {\n      return td.domNode;\n    }\n  }\n\n  static find_table(quill) {\n    const td = TableTrick.find_td(quill);\n    if (td) {\n      return td.parent.parent;\n    }\n  }\n\n  static find_table_node(quill) {\n    const table = TableTrick.find_table(quill);\n    if (table) {\n      return table.domNode;\n    }\n  }\n\n\n  static getQuill(el) {\n    // Get Quill instance from node/element or blot\n    let quill = null;\n    if (el instanceof Node) {\n      if (!el instanceof Element) {\n        el = el.parentElement;\n      }\n    } else if (typeof el === 'object' && typeof el.domNode !== 'undefined') {\n      el = el.domNode;\n    }\n\n    if (el instanceof Element) {\n      const editorNode = el.closest('.ql-container');\n      if (editorNode) {\n        quill = Quill.find(editorNode);\n      }\n    }\n    return quill;\n  }\n\n  static insertTable(quill, col_count, row_count) {\n    const table_id = TableTrick.random_id();\n    const table = Parchment.create('table', table_id);\n    for (let ri = 0; ri < row_count; ri++) {\n      const row_id = TableTrick.random_id();\n      const tr = Parchment.create('tr', row_id);\n      table.appendChild(tr);\n      for (let ci = 0; ci < col_count; ci++) {\n        const cell_id = TableTrick.random_id();\n        const value = [table_id, row_id, cell_id].join('|');\n        const td = Parchment.create('td', value);\n        tr.appendChild(td);\n        const p = Parchment.create('block');\n        td.appendChild(p);\n        const br = Parchment.create('break');\n        p.appendChild(br);\n      }\n    }\n    let blot = TableTrick.getBlot(quill);\n    let top_branch = null;\n    for (; blot != null && !(blot instanceof Container || blot instanceof Scroll);) {\n      top_branch = blot;\n      blot = blot.parent;\n    }\n    blot.insertBefore(table, top_branch);\n    // TableHistory.register('insert', { node: table.domNode, nextNode: top_branch.domNode });\n    // TableHistory.add(quill);\n  }\n\n  static removeTable(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table;\n    if (coords) {\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n    } else {\n      const td = TableTrick.find_td(quill);\n      if (td) {\n        table = td.parent.parent;\n      }\n    }\n\n    if (table) {\n      TableHistory.register('remove', { node: table.domNode, nextNode: table.next ? table.next.domNode : null, parentNode: table.parent.domNode });\n      TableHistory.add(quill);\n      table.remove();\n    }\n  }\n\n\n  static changeWidthTable(quill, width) {\n    const widthValue = width + '%';\n    const styleValue = `width:${widthValue}`;\n    const table = TableTrick.find_table(quill);\n\n    if (table) {\n      const tableNode = table.domNode;\n      TableHistory.register('propertyChange',{ node: tableNode, property: 'style', oldValue: tableNode.style, newValue: styleValue });\n      tableNode.setAttribute('style', styleValue);\n      TableHistory.add(quill);\n    }\n  }\n\n  static addCol(quill, direction = 'after') {\n    // direction = before: append col before current cell or before leftmost cell of selection\n    // direction = after: append col after current cell or after rightmost cell of selection\n    const coords = TableSelection.getSelectionCoords();\n    let td = TableTrick.find_td(quill);\n    if (coords) {\n      const cell = TableSelection.getCellAt(coords.maxX, coords.minY) || TableSelection.getCellAt(coords.maxX, coords.maxY);\n      if (cell) {\n        td = Parchment.find(cell);\n      }\n    }\n\n    if (td) {\n      if (direction !== 'before' && td.domNode.getAttribute('colspan')) {\n        // for direction = after, if the cell is merged, append column at the end of merged cell (not after the first cell)\n        const endCell = td.parent.domNode.children[\n          Array.prototype.indexOf.call(td.parent.domNode.children, td.domNode) + Number.parseInt(td.domNode.getAttribute('colspan')) - 1\n        ];\n        if (endCell) {\n          td = Parchment.find(endCell);\n        }\n      }\n\n      // get cell index\n      const index = Array.prototype.indexOf.call(td.parent.domNode.children, td.domNode) + (direction === 'before' ? 0 : 1);\n      // is this the last cell?\n      const last_cell = index === td.parent.domNode.children.length;\n      const table = td.parent.parent;\n      const table_id = table.domNode.getAttribute('table_id');\n      let managed_merged_cells = [];\n\n      table.children.forEach(function (tr) {\n        const row_id = tr.domNode.getAttribute('row_id');\n        const cell_id = TableTrick.random_id();\n        const new_td = Parchment.create('td', [table_id, row_id, cell_id].join('|'));\n        // do not add the cell for this row if selected cell is the last cell and if this row has more or less cells\n        if (!last_cell || index === tr.domNode.children.length) {\n          if (typeof tr.domNode.children[index] === 'undefined') {\n            tr.appendChild(new_td);\n            TableHistory.register('insert', { node: new_td.domNode, parentNode: tr.domNode });\n          } else {\n            const td = Parchment.find(tr.domNode.children[index]);\n            if (td) {\n              // manage merged cells\n              if (td.domNode.previousSibling) {\n                let merge_id = td.domNode.previousSibling.getAttribute('merge_id');\n                const _colSpan = Number.parseInt(td.domNode.previousSibling.getAttribute('colspan') || 1);\n                if (_colSpan > 1) {\n                  merge_id = td.domNode.previousSibling.getAttribute('cell_id');\n                }\n\n                if (merge_id) {\n                  new_td.domNode.setAttribute('merge_id', merge_id);\n                  if (managed_merged_cells.indexOf(merge_id) === -1) {\n                    managed_merged_cells.push(merge_id);\n                    const _cell = table.domNode.querySelector('td[cell_id=\"' + merge_id + '\"]');\n                    if (_cell) {\n                      const colSpan = Number.parseInt(_cell.getAttribute('colspan'));\n                      _cell.setAttribute('colspan', colSpan + 1);\n                      TableHistory.register('propertyChange', { node: _cell, property: 'colspan', oldValue: colSpan, newValue: colSpan + 1 });\n                    }\n                  }\n                }\n              }\n              tr.insertBefore(new_td, td);\n              TableHistory.register('insert', { node: new_td.domNode, nextNode: td.domNode });\n            }\n          }\n        }\n      });\n      TableHistory.add(quill);\n    }\n  }\n\n  static addRow(quill, direction = 'after') {\n    // direction = before: append row above current cell or above topmost cell of selection\n    // direction = after: append row below current cell or below bottommost cell of selection\n    const coords = TableSelection.getSelectionCoords();\n    let td = TableTrick.find_td(quill);\n    if (coords) {\n      const cell = TableSelection.getCellAt(coords.minX, coords.maxY) || TableSelection.getCellAt(coords.maxX, coords.maxY);\n      if (cell) {\n        td = Parchment.find(cell);\n      }\n    }\n\n    if (td) {\n      const tr = td.parent;\n      const col_count = tr.domNode.children.length;\n      const table = tr.parent;\n      const new_row = tr.clone();\n      // get row index\n      let index = Array.prototype.indexOf.call(table.domNode.children, tr.domNode) + (direction === 'before' ? 0 : 1);\n\n      let manage_merged_cells = true;\n      const rowSpan = Number.parseInt(td.domNode.getAttribute('rowspan') || 1);\n      if (rowSpan > 1) {\n        manage_merged_cells = false;\n        if (direction !== 'before') {\n          // add row below merged cell\n          index += rowSpan - 1;\n        }\n      }\n\n      const table_id = table.domNode.getAttribute('table_id');\n      const row_id = TableTrick.random_id();\n      new_row.domNode.setAttribute('row_id', row_id);\n      let managed_merged_cells = [];\n      let managed_unmerged_cells = [];\n\n      for (let i = 0; i < col_count; i++) {\n        const prev_cell = tr.domNode.children[i];\n        const cell_id = TableTrick.random_id();\n        const td = Parchment.create('td', [table_id, row_id, cell_id].join('|'));\n        if (prev_cell && manage_merged_cells) {\n          // manage merged cells\n          let merge_id, merged_cell;\n          if (prev_cell.getAttribute('rowspan')) {\n            merge_id = prev_cell.getAttribute('cell_id');\n            merged_cell = prev_cell;\n            if (direction === 'before') {\n              // do not merge cells if we add a row before a merged cell\n              if (managed_unmerged_cells.indexOf(merge_id) === -1) {\n                managed_unmerged_cells.push(merge_id);\n              }\n            }\n          } else if (prev_cell.getAttribute('merge_id')) {\n            merge_id = prev_cell.getAttribute('merge_id');\n            merged_cell = table.domNode.querySelector('td[cell_id=\"' + merge_id + '\"]');\n          }\n\n          if (merge_id && merged_cell && managed_unmerged_cells.indexOf(merge_id) === -1 && merged_cell.getAttribute('rowspan')) {\n            // merge cells of the new row according to previous row\n            let merge_rowspan = Number.parseInt(merged_cell.getAttribute('rowspan'));\n            if (merge_rowspan > 1) {\n              if (managed_merged_cells.indexOf(merge_id) === -1) {\n                managed_merged_cells.push(merge_id);\n                merged_cell.setAttribute('rowspan', merge_rowspan + 1);\n                TableHistory.register('propertyChange', { node: merged_cell, property: 'rowspan', oldValue: merge_rowspan, newValue: merge_rowspan + 1 });\n              }\n              td.domNode.setAttribute('merge_id', merge_id);\n            }\n          }\n        }\n\n        new_row.appendChild(td);\n        const p = Parchment.create('block');\n        td.appendChild(p);\n        const br = Parchment.create('break');\n        p.appendChild(br);\n      }\n\n      if (typeof table.domNode.children[index] === 'undefined') {\n        table.appendChild(new_row);\n        TableHistory.register('insert', { node: new_row.domNode, parentNode: table.domNode });\n      } else {\n        const row = Parchment.find(table.domNode.children[index]);\n        if (row) {\n          table.insertBefore(new_row, row);\n          TableHistory.register('insert', { node: new_row.domNode, nextNode: row.domNode });\n        }\n      }\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeCol(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table, colIndex, colsToRemove;\n    if (coords) {\n      // if we have a selection, remove all selected columns\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n      colIndex = coords.minX;\n      colsToRemove = coords.maxX - coords.minX + 1;\n    } else {\n      // otherwise, remove only the column of current cell\n      colsToRemove = 1;\n      const currentCell = TableTrick.find_td(quill);\n      if (currentCell) {\n        table = currentCell.parent.parent;\n        colIndex = Array.prototype.indexOf.call(currentCell.parent.domNode.children, currentCell.domNode);\n      }\n    }\n\n    if (table && typeof colIndex === 'number' && typeof colsToRemove === 'number') {\n      // Remove all TDs with the colIndex and repeat it colsToRemove times if there are multiple columns to delete\n      for (let i = 0; i < colsToRemove; i++) {\n        table.children.forEach(function (tr) {\n          const td = tr.domNode.children[colIndex];\n          if (td) {\n            const merge_id = td.getAttribute('merge_id');\n            if (merge_id) {\n              // if a cell is merged to another cell, get target cell and decrement colspan\n              const cell = table.domNode.querySelector(`td[cell_id=\"${merge_id}\"]`);\n              if (cell) {\n                const colSpan = Number.parseInt(cell.getAttribute('colspan'));\n                cell.setAttribute('colspan', colSpan - 1);\n                TableHistory.register('propertyChange', { node: cell, property: 'colspan', oldValue: colSpan, newValue: colSpan - 1 });\n              }\n            }\n\n            if (td.getAttribute('colspan')) {\n              TableTrick._split(td);\n            }\n\n            TableHistory.register('remove', { node: td, nextNode: td.nextSibling, parentNode: tr.domNode });\n            const _td = Parchment.find(td);\n            if (_td) { // remove node this way in order to update delta\n              _td.remove();\n            }\n          }\n        });\n      }\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static changeWidthCol(quill, width) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table, colIndex, colsToRemove;\n    if (coords) {\n      // if we have a selection, remove all selected columns\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n      colIndex = coords.minX;\n      colsToRemove = coords.maxX - coords.minX + 1;\n    } else {\n      // otherwise, remove only the column of current cell\n      colsToRemove = 1;\n      const currentCell = TableTrick.find_td(quill);\n      if (currentCell) {\n        table = currentCell.parent.parent;\n        colIndex = Array.prototype.indexOf.call(currentCell.parent.domNode.children, currentCell.domNode);\n      }\n    }\n\n    if (table && typeof colIndex === 'number' && typeof colsToRemove === 'number') {\n      const widthValue = width + '%';\n      // Remove all TDs with the colIndex and repeat it colsToRemove times if there are multiple columns to delete\n      for (let i = 0; i < colsToRemove; i++) {\n        table.children.forEach(function (tr) {\n          const td = tr.domNode.children[colIndex];\n          if (td) {\n            TableHistory.register('propertyChange', { node: td, property: 'width', oldValue: td.width, newValue: widthValue });\n            td.setAttribute('width', widthValue);\n          }\n        });\n      }\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeRow(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n\n    const manageMergedCells = (tr) => {\n      let managed_merged_cells = [];\n      [...tr.children].forEach(function(td) {\n        const merge_id = td.getAttribute('merge_id');\n        if (merge_id && managed_merged_cells.indexOf(merge_id) === -1) {\n          // if a cell is merged to another cell, get target cell and decrement rowspan\n          const cell = tr.parentNode.querySelector(`td[cell_id=\"${merge_id}\"]`);\n          managed_merged_cells.push(merge_id);\n          if (cell) {\n            const rowSpan = Number.parseInt(cell.getAttribute('rowspan'));\n            cell.setAttribute('rowspan', rowSpan - 1);\n            TableHistory.register('propertyChange', { node: cell, property: 'rowspan', oldValue: rowSpan, newValue: rowSpan - 1 });\n          }\n        }\n\n        if (td.getAttribute('rowspan')) {\n          TableTrick._split(td);\n        }\n      });\n    };\n\n    if (coords) {\n      // if we have a selection, remove all selected rows\n      const table = TableSelection.selectionStartElement.closest('table');\n      const rowIndex = coords.minY;\n      const rowsToRemove = coords.maxY - coords.minY + 1;\n\n      for (let i = 0; i < rowsToRemove; i++) {\n        const tr = table.children[rowIndex];\n        if (tr) {\n          manageMergedCells(tr);\n          TableHistory.register('remove', { node: tr, nextNode: tr.nextSibling, parentNode: table });\n          const _tr = Parchment.find(tr);\n          if (_tr) { // remove node this way in order to update delta\n            _tr.remove();\n          }\n        }\n      }\n    } else {\n      // otherwise, remove only the row of current cell\n      const td = TableTrick.find_td(quill);\n      if (td) {\n        const tr = td.parent;\n        manageMergedCells(tr.domNode);\n        TableHistory.register('remove', { node: tr.domNode, nextNode: tr.next ? tr.next.domNode : null, parentNode: tr.parent.domNode });\n        const _tr = Parchment.find(tr.domNode);\n        if (_tr) { // remove node this way in order to update delta\n          _tr.remove();\n        }\n      }\n    }\n    TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n    TableHistory.add(quill);\n  }\n\n  static splitCell(quill) {\n    // get cell\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let td = TableTrick.find_td(quill);\n    if (coords && coords.maxX - coords.minX === 0 && coords.maxY - coords.minY === 0) {\n      const _td = TableSelection.getCellAt(coords.minX, coords.minY);\n      td = Parchment.find(_td);\n    }\n\n    if (td && TableTrick._split(td.domNode)) {\n      // add changes to history\n      // TableTrick._split already register 'split' change to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      // force triggering text-change event\n      td.domNode.innerHTML = td.domNode.innerHTML;\n      TableHistory.add(quill);\n    }\n  }\n\n  static mergeSelection(quill) {\n    // get selection\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    if (coords) {\n      const table = TableSelection.selectionStartElement.closest('table');\n      const colSpan = coords.maxX - coords.minX + 1;\n      const rowSpan = coords.maxY - coords.minY + 1;\n      if (colSpan > 1 || rowSpan > 1) {\n        let node = null;\n        let oldContent = null;\n        let mergedNodes = [];\n        let mergedCellContent = [];\n        let cell_id;\n        // get selected cells\n        for (let y = coords.minY; y <= coords.maxY; y++) {\n          for (let x = coords.minX; x <= coords.maxX; x++) {\n            const cell = table.children[y].children[x];\n            if (cell) {\n              if (cell.textContent !== '') {\n                // merge all contents\n                mergedCellContent.push(cell.innerHTML);\n              }\n\n              if (!node) {\n                // first cell (this cell will be kept)\n                cell_id = cell.getAttribute('cell_id');\n                node = cell;\n                oldContent = node.innerHTML;\n              } else {\n                // other cells that will be merged\n                let _oldContent = cell.innerHTML;\n                // update mergedNodes array for history purposes\n                mergedNodes.push({ node: cell, oldContent: _oldContent, newContent: '<p><br></p>' });\n              }\n\n              if (cell.getAttribute('colspan') || cell.getAttribute('rowspan')) {\n                // cannot merge cell already merged\n                alert('Cannot merge already merged cell');\n                return false;\n              }\n            }\n          }\n        }\n\n        if (node && mergedNodes.length) {\n          mergedNodes.forEach(mergedNode => {\n            mergedNode.node.setAttribute('merge_id', cell_id);\n            mergedNode.node.innerHTML = mergedNode.newContent;\n          });\n\n          // set colspan and rowspan attributes\n          node.setAttribute('colspan', colSpan);\n          node.setAttribute('rowspan', rowSpan);\n          // set merged content\n          node.innerHTML = mergedCellContent.join('');\n        }\n        // add changes to history\n        TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n        TableHistory.register('merge', { node, mergedNodes, colSpan, rowSpan, oldContent, newContent: node.innerHTML });\n        TableHistory.add(quill);\n      }\n    }\n  }\n\n  static removeCell(quill) {\n    // get cell\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let td = TableTrick.find_td(quill);\n    if (coords && coords.maxX - coords.minX === 0 && coords.maxY - coords.minY === 0) {\n      const _td = TableSelection.getCellAt(coords.minX, coords.minY);\n      td = Parchment.find(_td);\n    }\n\n    if (td && TableTrick._removeCell(td.domNode)) {\n      // add changes to history\n      // TableTrick._removeCell already register 'remove' change to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeSelection(quill) {\n    // get selection\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    if (coords) {\n      const table = TableSelection.selectionStartElement.closest('table');\n      let nodesToRemove = [];\n      for (let y = coords.minY; y <= coords.maxY; y++) {\n        for (let x = coords.minX; x <= coords.maxX; x++) {\n          const cell = table.children[y].children[x];\n          if (cell) {\n            // if a cell is merged to another cell, split target cell\n            const merge_id = cell.getAttribute('merge_id');\n            if (merge_id) {\n              const targetCell = table.querySelector(`td[cell_id=\"${merge_id}\"]`);\n              if (targetCell) {\n                TableTrick._split(targetCell);\n              }\n            }\n\n            if (cell.getAttribute('rowspan') || cell.getAttribute('colspan')) {\n              TableTrick._split(cell);\n            }\n\n            // remove cell (and row if empty)\n            let node = cell;\n            let nextNode = cell.nextSibling;\n            let parentNode = cell.parentNode;\n            if (parentNode.nodeName === 'TR' && parentNode.childNodes.length <= 1) {\n              // remove row if only one node (cell to be removed)\n              node = parentNode;\n              nextNode = node.nextSibling;\n              parentNode = node.parentNode;\n            }\n            nodesToRemove.push(node);\n            TableHistory.register('remove', { node, nextNode, parentNode });\n          }\n        }\n      }\n\n      nodesToRemove.forEach(node => {\n        const _node = Parchment.find(node);\n        if (_node) { // remove node this way in order to update delta\n          _node.remove();\n        }\n      });\n\n      // add changes to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static _removeCell(cell, recursive = true) {\n    let cell_id = cell.getAttribute('cell_id');\n    if (cell.nodeName === 'TD') {\n      if (recursive) {\n        if (cell.getAttribute('merge_id')) {\n          // remove merged cells\n          cell = cell.closest('table').querySelector('td[cell_id=\"' + cell.getAttribute('merge_id') + '\"]');\n          if (!cell) return false;\n          cell_id = cell.getAttribute('cell_id');\n        }\n\n        if (cell.getAttribute('colspan') || cell.getAttribute('rowspan')) {\n          // remove merged cells\n          cell.parentNode.parentNode.querySelectorAll(`td[merge_id=\"${cell_id}\"`).forEach(node => {\n            TableTrick._removeCell(node, false);\n          });\n        }\n      }\n\n      let node = cell;\n      let nextNode = cell.nextSibling;\n      let parentNode = cell.parentNode;\n      if (parentNode.nodeName === 'TR' && parentNode.childNodes.length <= 1) {\n        // remove row if only one node (cell to be removed)\n        node = parentNode;\n        nextNode = node.nextSibling;\n        parentNode = node.parentNode;\n        if (parentNode.nodeName === 'TABLE' && parentNode.childNodes.length <= 1) {\n          // remove table if only one node (row to be removed)\n          node = parentNode;\n          nextNode = node.nextSibling;\n          parentNode = node.parentNode;\n        }\n      }\n\n      const _node = Parchment.find(node);\n      if (_node) { // remove node this way in order to update delta\n        _node.remove();\n      }\n\n      TableHistory.register('remove', { node, nextNode, parentNode });\n      return true;\n    }\n    return false;\n  }\n\n  static _split(cell) {\n    const cell_id = cell.getAttribute('cell_id');\n    // get merged nodes and update mergedNodes array for history purposes, remove merge_id attribute\n    let mergedNodes = [];\n    cell.parentNode.parentNode.querySelectorAll(`td[merge_id=\"${cell_id}\"`).forEach(node => {\n      mergedNodes.push({ node, oldContent: node.innerHTML, newContent: node.innerHTML });\n      node.removeAttribute('merge_id');\n    });\n\n    const colSpan = Number.parseInt(cell.getAttribute('colspan') || 1);\n    const rowSpan = Number.parseInt(cell.getAttribute('rowspan') || 1);\n    if (colSpan > 1 || rowSpan > 1) {\n      // remove colspan and rowspan attributes\n      cell.removeAttribute('colspan');\n      cell.removeAttribute('rowspan');\n      // register changes to history\n      TableHistory.register('split', { node: cell, mergedNodes, colSpan, rowSpan, oldContent: cell.innerHTML, newContent: cell.innerHTML });\n      return true;\n    }\n    return false;\n  }\n\n  static emitTextChange(quill, oldDelta, source = 'user') {\n    const newDelta = quill.getContents();\n    quill.emitter.emit('text-change', oldDelta.diff(newDelta), oldDelta, source);\n  }\n\n  static table_handler(value, quill) {\n    // Check if the selection is for the same Quill instance, otherwise reset selection\n    if (\n      (TableSelection.selectionStartElement && !quill.container.contains(TableSelection.selectionStartElement)) ||\n      (TableSelection.selectionEndElement && !quill.container.contains(TableSelection.selectionEndElement))\n    ) {\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableSelection.resetSelection();\n    }\n\n    if (value.includes('newtable_')) {\n      const sizes = value.split('_');\n      const row_count = Number.parseInt(sizes[1]);\n      const col_count = Number.parseInt(sizes[2]);\n      TableTrick.insertTable(quill, col_count, row_count);\n    } else {\n      let append_direction = 'after';\n      switch (value) {\n        case 'append-col-before':\n          append_direction = 'before';\n        case 'append-col':\n        case 'append-col-after':\n          TableTrick.addCol(quill, append_direction);\n          break;\n        case 'remove-col':\n          TableTrick.removeCol(quill);\n          break;\n        case 'append-row-above':\n          append_direction = 'before';\n        case 'append-row':\n        case 'append-row-below':\n          TableTrick.addRow(quill, append_direction);\n          break;\n        case 'remove-row':\n          TableTrick.removeRow(quill);\n          break;\n        case 'insert':\n          TableTrick.insertTable(quill, 1, 1);\n          break;\n        case 'remove-table':\n          TableTrick.removeTable(quill);\n          break;\n        case 'split-cell':\n          TableTrick.splitCell(quill);\n          break;\n        case 'merge-selection':\n          TableTrick.mergeSelection(quill);\n          break;\n        case 'remove-cell':\n          TableTrick.removeCell(quill);\n          break;\n        case 'remove-selection':\n          TableTrick.removeSelection(quill);\n          break;\n        case 'undo':\n          if (quill.history.stack.undo.length) {\n            const entry = quill.history.stack.undo[quill.history.stack.undo.length - 1];\n            if (typeof entry.type !== 'undefined' && typeof entry.id !== 'undefined' && entry.type === 'tableHistory') {\n              // Table history entry\n              TableHistory.undo(quill, entry.id);\n              return false;\n            } else if (entry.undo?.ops.some(op => op.attributes?.td === null)) {\n              // Ajusta histórico: operação de undo possui um item com atributo td=null que mantém uma célula vazia\n              const index = entry.undo.ops.findIndex(op => op.attributes?.td === null);\n              entry.undo.ops.splice(index, 1);\n          }\n            // Classic history entry\n          }\n          return true;\n        case 'redo':\n          if (quill.history.stack.redo.length) {\n            const entry = quill.history.stack.redo[quill.history.stack.redo.length - 1];\n            if (typeof entry.type !== 'undefined' && typeof entry.id !== 'undefined' && entry.type === 'tableHistory') {\n              // Table history entry\n              TableHistory.redo(quill, entry.id);\n              return false;\n            }\n            // Classic history entry\n          }\n          return true;\n        case 'copy':\n          if (TableSelection.selectionStartElement && TableSelection.selectionEndElement) {\n            // Copy text in selection\n            // Save previous selection\n            let { anchorNode, anchorOffset, focusNode, focusOffset } = window.getSelection();\n            // Get table selection position\n            // Set selection and copy\n            window.getSelection().removeAllRanges();\n            let range = document.createRange();\n            range.setStart(TableSelection.selectionStartElement, 0);\n            range.setEnd(TableSelection.selectionEndElement, TableSelection.selectionEndElement.childNodes.length);\n            window.getSelection().addRange(range);\n            if (TableSelection.selectionStartElement === TableSelection.selectionEndElement) {\n              TableSelection.selectionStartElement.classList.remove('ql-cell-selected');\n            }\n            document.execCommand('copy');\n            if (TableSelection.selectionStartElement === TableSelection.selectionEndElement) {\n              TableSelection.selectionStartElement.classList.add('ql-cell-selected');\n            }\n            // Remove selection and restore previous selection\n            window.getSelection().removeAllRanges();\n            range.setStart(anchorNode, anchorOffset);\n            range.setEnd(focusNode, focusOffset);\n            window.getSelection().addRange(range);\n            return false;\n          }\n          return true;\n      }\n    }\n  }\n}\n","// import Quill from 'quill';\nimport TableCell from './TableCellBlot';\nimport ContainBlot from './ContainBlot';\nimport TableTrick from './TableTrick';\n\nconst Parchment = Quill.import('parchment');\n\nclass TableRow extends ContainBlot {\n  static create(value) {\n    const tagName = 'tr';\n    let node = super.create(tagName);\n    node.setAttribute('row_id', value ? value : TableTrick.random_id());\n    return node;\n  }\n\n  format() {}\n\n  optimize(context) {\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        var child = this.createDefaultChild();\n        this.appendChild(child);\n        child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n    let next = this.next;\n    if (next != null && next.prev === this &&\n      next.statics.blotName === this.statics.blotName &&\n      next.domNode.tagName === this.domNode.tagName &&\n      next.domNode.getAttribute('row_id') === this.domNode.getAttribute('row_id')\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = this.createDefaultChild(refBlot);\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot);\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = this.createDefaultChild();\n      target.moveChildren(item, this);\n      this.appendChild(item);\n    }\n    super.replace(target);\n  }\n\n  createDefaultChild(refBlot) {\n    let table_id = null;\n    if (refBlot) {\n      table_id = refBlot.domNode.getAttribute('table_id');\n    } else if (this.parent) {\n      table_id = this.parent.domNode.getAttribute('table_id');\n    } else {\n      table_id = this.domNode.parent.getAttribute('table_id');\n    }\n\n    return Parchment.create(this.statics.defaultChild, [table_id, this.domNode.getAttribute('row_id'), TableTrick.random_id()].join('|'));\n  }\n}\n\nTableRow.blotName = 'tr';\nTableRow.tagName = 'tr';\nTableRow.scope = Parchment.Scope.BLOCK_BLOT;\nTableRow.defaultChild = 'td';\nTableRow.allowedChildren = [TableCell];\n\nexport default TableRow;\n","// import Quill from 'quill';\nimport TableTrick from './TableTrick';\nimport TableRow from './TableRowBlot';\nimport TableHistory from './TableHistory';\nimport ContainBlot from './ContainBlot';\n\nconst Parchment = Quill.import('parchment');\n\nclass Table extends ContainBlot {\n  static create(value) {\n    const tagName = 'table';\n    let node = super.create(tagName);\n    node.setAttribute('table_id', value ? value : TableTrick.random_id());\n    node.setAttribute('border', '1');\n    return node;\n  }\n\n  format() {}\n\n  optimize(context) {\n    super.optimize(context);\n    let quill = TableTrick.getQuill(this.domNode);\n    if (!quill) return;\n    let next = this.next;\n    const table_id = this.domNode.getAttribute('table_id');\n\n    if (\n      next != null && next.prev === this && next.domNode.getAttribute('table_id') === table_id &&\n      next.statics.blotName === this.statics.blotName && next.domNode.tagName === this.domNode.tagName\n    ) {\n      // merge table containing single cell with table\n      next.moveChildren(this);\n      next.remove();\n    }\n\n    if (\n      typeof quill.table.tables[table_id] !== 'undefined' &&\n      quill.table.tables[table_id].cell_counter === this.domNode.querySelectorAll('td').length &&\n      quill.table.tables[table_id].row_counter === this.domNode.querySelectorAll('tr').length\n    ) {\n      // our table is fully initialized, we can do more optimizations\n\n      // add hidden merged cells\n      this.domNode.querySelectorAll('td[cell_id][colspan], td[cell_id][rowspan]').forEach(cell => {\n        const index = Array.prototype.indexOf.call(cell.parentNode.children, cell);\n        const colSpan = Number.parseInt(cell.getAttribute('colspan') || 1);\n        const rowSpan = Number.parseInt(cell.getAttribute('rowspan') || 1);\n\n        if (!this.domNode.querySelector('td[merge_id=\"' + cell.getAttribute('cell_id') + '\"]') && (colSpan > 1 || rowSpan > 1)) {\n          let row = cell.parentNode;\n          for (let y = 1; y <= rowSpan; y++) {\n            if (!row) break;\n            // we want to add the cell between cell with colspan/rowspan and next cell\n            // for next rows, add the cell before the cell with the same index\n            let nextCell = y === 1 ? row.children[index + 1] : row.children[index];\n            for (let x = 1; x <= colSpan; x++) {\n              if (x === 1 && y === 1) {\n                continue; // do not add a cell at the original cell position\n              }\n              let newCell = document.createElement('td');\n              newCell.setAttribute('cell_id', TableTrick.random_id());\n              newCell.setAttribute('row_id', row.getAttribute('row_id'));\n              newCell.setAttribute('table_id', this.domNode.getAttribute('table_id'));\n              newCell.setAttribute('merge_id', cell.getAttribute('cell_id'));\n              let p = document.createElement('p');\n              let br = document.createElement('br');\n              p.appendChild(br);\n              newCell.appendChild(p);\n              row.insertBefore(newCell, nextCell);\n            }\n            row = row.nextSibling;\n          }\n        }\n      });\n\n      if (quill.table.tables[table_id].pasted) {\n        // add to history\n        TableHistory.register('insert', { node: this.domNode, nextNode: this.domNode.nextSibling, parentNode: this.domNode.parentNode });\n        TableHistory.add(quill);\n      }\n\n      // delete entry for optimizing only once\n      delete quill.table.tables[table_id];\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = Parchment.create(this.statics.defaultChild, TableTrick.random_id());\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot)\n  }\n}\n\nTable.blotName = 'table';\nTable.tagName = 'table';\nTable.scope = Parchment.Scope.BLOCK_BLOT;\nTable.defaultChild = 'tr';\nTable.allowedChildren = [TableRow];\n\nexport default Table;\n","// import Quill from 'quill';\n// import Delta from 'quill-delta';\n// import './css/quill.table.css';\nimport TableCell from './js/TableCellBlot';\nimport TableRow from './js/TableRowBlot';\nimport TableHistory from './js/TableHistory';\nimport Table from './js/TableBlot';\nimport Contain from './js/ContainBlot';\nimport TableTrick from './js/TableTrick';\nimport TableSelection from './js/TableSelection';\nimport TableToolbar from './js/TableToolbar';\n\nconst Container = Quill.import('blots/container');\nconst Parchment = Quill.import('parchment');\nconst Delta = Quill.import(\"delta\");\n\nconst nodeListToArray = collection => {\n  const elementsIndex = [];\n  for (let i = 0; i < collection.length; i++) {\n    elementsIndex.push(i);\n  }\n  return elementsIndex.map(i => collection.item(i));\n};\n\nContainer.order = [\n  'list', 'contain',   // Must be lower\n  'td', 'tr', 'table'  // Must be higher\n];\n\nconst emitirEventoTableInTable = (quill) => {\n  quill.container.dispatchEvent(\n    new CustomEvent('onTableInTable', {\n      bubbles: true,\n      composed: true,\n    })\n  );\n};\n\nexport default class TableModule {\n  static register() {\n    Quill.register(TableCell, true);\n    Quill.register(TableRow, true);\n    Quill.register(Table, true);\n    Quill.register(Contain, true);\n  }\n\n  constructor(quill, options) {\n    quill.history.tableStack = {};\n    quill.table = {\n      isInTable: false,\n      tables: {}\n    };\n\n    // selection mouse events\n    quill.container.addEventListener('mousedown', (e) => TableSelection.mouseDown(quill, e, options.cellSelectionOnClick));\n    quill.container.addEventListener('mousemove', (e) => TableSelection.mouseMove(quill, e));\n    quill.container.addEventListener('mouseup', (e) => TableSelection.mouseUp(quill, e));\n    quill.on('selection-change', (range, oldRange) => TableSelection.selectionChange(quill, range, oldRange));\n\n    const toolbar = quill.getModule('toolbar');\n\n    toolbar.addHandler('table', function (value) {\n      TableModule.configToolbar(quill, value);\n    });\n\n    const clipboard = quill.getModule('clipboard');\n    clipboard.addMatcher('TABLE', function (node, delta) {\n      if (isInTable(quill)) {\n        emitirEventoTableInTable(quill);\n        return new Delta();\n      }\n\n      const is_pasted_data = node.closest('.ql-editor') === null;\n      const table_id = node.getAttribute('table_id');\n      if (table_id) {\n        quill.table.tables[table_id] = {\n          pasted: is_pasted_data,\n          row_counter: node.querySelectorAll('tr').length,\n          cell_counter: node.querySelectorAll('td').length\n        };\n      }\n      return delta;\n    });\n    clipboard.addMatcher('TR', function (node, delta) {\n      return delta;\n    });\n    clipboard.addMatcher('TD, TH', function (node, delta) {\n      if (delta.length() === 0) {\n        // fix https://github.com/dclement8/quill1-table/issues/7 (empty td removed)\n        delta.ops = [\n          {insert: '\\n'}\n        ];\n      } else if (delta.ops && delta.ops.length) {\n        // fix https://github.com/dclement8/quill1-table/issues/7 (td with no child node)\n        const lastIndex = delta.ops.reduce((lastIndex, op, idx) => typeof op.insert !== 'undefined' ? idx : lastIndex, -1);\n        if (lastIndex >= 0 && !delta.ops[lastIndex].insert.endsWith('\\n')) {\n          delta.ops[lastIndex].insert += '\\n';\n        }\n      }\n\n      const tableNode = node.closest('table');\n      if (!node.getAttribute('table_id') && tableNode) {\n        if (!tableNode.getAttribute('table_id')) {\n          tableNode.setAttribute('table_id', TableTrick.random_id());\n        }\n        node.setAttribute('table_id', tableNode.getAttribute('table_id'));\n      }\n\n      if (!node.getAttribute('row_id')) {\n        const rowNode = node.closest('tr');\n        if (rowNode) {\n          if (!rowNode.getAttribute('row_id')) {\n            rowNode.setAttribute('row_id', TableTrick.random_id());\n          }\n          node.setAttribute('row_id', rowNode.getAttribute('row_id'));\n        }\n      }\n\n      if (!node.getAttribute('cell_id')) {\n        node.setAttribute('cell_id', TableTrick.random_id());\n      }\n\n      const newDelta = delta.compose(new Delta().retain(delta.length(), {\n        td: [\n          node.getAttribute('table_id'),\n          node.getAttribute('row_id'),\n          node.getAttribute('cell_id'),\n          node.getAttribute('merge_id'),\n          node.getAttribute('colspan'),\n          node.getAttribute('rowspan')\n        ].join('|')\n      }));\n      return newDelta;\n    });\n\n    TableToolbar.enable(quill, ['newtable_*', 'insert', 'undo', 'redo']);\n  }\n\n  static tableOptions() {\n    const maxRows = 5;\n    const maxCols = 5;\n    const tableOptions = [];\n    for (let r = 1; r <= maxRows; r++) {\n      for (let c = 1; c <= maxCols; c++) {\n        tableOptions.push('newtable_' + r + '_' + c);\n      }\n    }\n    return tableOptions;\n  }\n\n  static configToolbar(quill, value) {\n    if (isInsertTable(value) && isInTable(quill)) {\n      emitirEventoTableInTable(quill);\n      return false;\n    }\n    return TableTrick.table_handler(value, quill);\n  }\n\n\n  static removeNodeChildren(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  }\n\n  static keyboardHandler(quill, key, range, keycontext) {\n    const format_start = quill.getFormat(range.index - 1);\n    const format_end = quill.getFormat(range.index + range.length);\n\n    if (key === 'undo' || key === 'redo' || key === 'copy') {\n      return TableTrick.table_handler(key, quill);\n    }\n\n    // If the event is not in a cell, then pass the standard handler\n    if (!format_start.td && !keycontext.format.td && !format_end.td) {\n      return true;\n    }\n\n    if (key === 'backspace') {\n      // if the selection is at the cell border\n      // BUG: after undo brings back deleted cell when backspace comes in the keycontext offset is 0, which throws it to the end\n      if (!keycontext.offset && !range.length) {\n        const selection = window.getSelection();\n        const nodeList = document.querySelectorAll(\".ql-editor p\");\n        // remove selected content\n        const resultNodes = nodeListToArray(nodeList).filter(cell =>\n          selection.containsNode(cell, true)\n        );\n\n        // deletion does not affect the cell\n        if (!resultNodes.length) {\n          return true;\n        }\n        // do not delete if we have a selection (TODO: manage selection deletion)\n        if (TableSelection.getSelectionCoords()) {\n          return false;\n        }\n\n        let nodeRemoved = false;\n        resultNodes.forEach((resultNode, i) => {\n          if (resultNode.previousSibling) {\n            if (resultNode.previousSibling.nodeName === 'TABLE') {\n              // remove last cell if we are right after a table\n              const cells = resultNode.previousSibling.querySelectorAll('td');\n              if (cells.length && TableTrick._removeCell(cells[cells.length - 1])) {\n                nodeRemoved = true;\n              }\n            }\n          } else if (resultNode.parentNode.nodeName === 'TD') {\n            // remove current cell if we are inside it\n            if (TableTrick._removeCell(resultNode.parentNode)) {\n              nodeRemoved = true;\n            }\n          }\n        });\n\n        if (nodeRemoved) {\n          TableHistory.add(quill);\n        }\n\n        // if at least one node has been removed, then return false (do not call standard handler)\n        return !nodeRemoved;\n      }\n\n      // If we delete not at the cell border, then pass the standard handler\n      return true;\n    }\n\n    if (key === 'tab') {\n      TableSelection.resetSelection();\n      const [leaf] = quill.getLeaf(quill.getSelection().index);\n      let selectionIndex;\n      let blot;\n      let unmergedCell;\n      if (leaf.parent.domNode.closest('td')) {\n        if (leaf.parent.domNode.closest('td').nextSibling) {\n          unmergedCell = leaf.parent.domNode.closest('td').nextSibling\n          while (unmergedCell && unmergedCell.getAttribute('merge_id')) {\n            unmergedCell = unmergedCell.nextSibling\n          }\n          blot = Quill.find(unmergedCell ? unmergedCell : leaf.parent.domNode.closest('tr').nextSibling) //we truly dont have any more cells\n        } else { //we dont need to find the first child here since quill does the right thing\n          if (leaf.parent.domNode.closest('tr').nextSibling) { //no more cells, go to the next row\n            blot = Quill.find(leaf.parent.domNode.closest('tr').nextSibling)\n          } else { //no more rows to the tables next sibling which will be the next quill run p,h1-h4\n            if (leaf.parent.domNode.closest('table').nextSibling) {\n              blot = Quill.find(leaf.parent.domNode.closest('table').nextSibling)\n            }\n          }\n        }\n        //we get the actual editor index when we have the blot aka element in editor\n        selectionIndex = blot.offset(quill.scroll);\n        quill.setSelection(selectionIndex, 0)\n\n        return false\n      }\n      return true\n    }\n\n    if (key === \"shiftTab\") {\n      //previous cell\n      TableSelection.resetSelection();\n      const [leaf] = quill.getLeaf(quill.getSelection().index);\n      let selectionIndex;\n      let blot;\n      let unmergedCell;\n      if (leaf.parent.domNode.closest('td')) {\n        if (leaf.parent.domNode.closest('td').previousSibling) {\n          unmergedCell = leaf.parent.domNode.closest('td').previousSibling;\n          while (unmergedCell.getAttribute('merge_id')) { //this a merged cell, in dom but styled/css out\n            unmergedCell = unmergedCell.previousSibling;\n          }\n          blot = Quill.find(unmergedCell);\n        } else {\n          if (leaf.parent.domNode.closest('tr').previousSibling) { //no more cells, go to the next row\n            unmergedCell = leaf.parent.domNode.closest('tr').previousSibling.lastChild;\n            while (unmergedCell.getAttribute('merge_id')) { //this a merged cell, in dom but styled/css out\n              unmergedCell = unmergedCell.previousSibling;\n            }\n            blot = Quill.find(unmergedCell);\n          } else {\n            if (leaf.parent.domNode.closest('table').previousSibling) { //no more rows to the tables prev sibling which will just go to electron default.\n              return true;\n            }\n          }\n        }\n        //we get the actual editor index when we have the blot aka element in editor\n        selectionIndex = blot.offset(quill.scroll);\n        quill.setSelection(selectionIndex, 0)\n\n        return false;\n      }\n      return true;\n    }\n\n    let node = quill.selection.getNativeRange().start.node;\n    if (!node) return false;\n    let blot = Parchment.find(node);\n\n    if (\n      key === 'delete' && blot &&\n      keycontext.offset < (blot.text ? blot.text.length : 0)\n    ) {\n      return true;\n    }\n\n    const [prev] = quill.getLine(range.index - 1);\n    const [next] = quill.getLine(range.index + 1);\n    // If a cell has multiple rows, you can delete as standard\n\n    if (key === 'selectAll') {\n      let [line] = quill.getLine(quill.getSelection().index);\n      let blot;\n      let nextBlot;\n      if (line.parent.domNode.nodeName === \"TD\") {\n        if (line.parent.domNode.nextSibling){\n          nextBlot = Quill.find(line.parent.domNode.nextSibling);\n        } else { //no next cell to bounce the end to\n          if (line.parent.domNode.closest('tr').nextSibling) { //no next row either\n            nextBlot = Quill.find(line.parent.domNode.closest('tr').nextSibling);\n          } else { //the only other thing is get tables sibling which is the next p in editor\n            nextBlot = Quill.find(line.parent.domNode.closest('table').nextSibling);\n          }\n        }\n        blot = Quill.find(line.parent.domNode);\n        let selectionIndex = blot.offset(quill.scroll); //index for cell start\n        let nextBlotIndex = nextBlot.offset(quill.scroll); //index for cell ending\n        quill.setSelection(selectionIndex, nextBlotIndex-selectionIndex-1);\n        return false;\n      }\n      return true;\n    }\n    if (key === 'backspace' && prev && prev.next) {\n      return true;\n    }\n    if (key === 'delete' && next && next.prev) {\n      return true;\n    }\n  }\n}\n\nconst isInsertTable = (value = '') => value.includes('newtable_');\n\nconst isInTable = (quill) => quill && quill.getSelection(true) && quill.getFormat(quill.getSelection(true)).td;\n","import { html } from 'lit';\n\nexport const notaRodapeCss = html`\n  <style>\n    .nota-rodape {\n      position: relative;\n      cursor: pointer;\n      font-size: 0.8em;\n      line-height: 1;\n      vertical-align: super;\n      z-index: 1;\n      margin-left: 0.1em;\n    }\n\n    .nota-rodape::after {\n      content: attr(data-nota);\n      color: transparent;\n      position: absolute;\n      bottom: 50%;\n      left: 50%;\n      transform: translate(-50%, 50%);\n      opacity: 0;\n      background-color: var(--sl-color-red-300);\n      color: black;\n      width: 20px;\n      height: 20px;\n      line-height: 20px;\n      text-align: center;\n      border-radius: 50%;\n      font-size: 0.7em;\n      text-indent: 0;\n      z-index: -1;\n      transition: transform opacity 0.3s ease;\n    }\n\n    .nota-rodape:hover::after {\n      animation: pulseAnimation 1s infinite;\n      opacity: 0.5;\n    }\n\n    @keyframes pulseAnimation {\n      0% {\n        transform: translate(-50%, 50%) scale(0.8);\n        opacity: 0;\n      }\n      50% {\n        transform: translate(-50%, 50%) scale(1.2);\n        opacity: 0.5;\n      }\n      100% {\n        transform: translate(-50%, 50%) scale(1.6);\n        opacity: 0;\n      }\n    }\n\n    .nota-rodape.pulse::after {\n      animation: pulseAnimation 1s infinite;\n    }\n  </style>\n`;\n","import { Revisao, RevisaoJustificativa } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State } from '../../state';\nimport { RevisaoJustificativaEnum } from '../util/revisaoUtil';\n\nexport const atualizaRevisaoJustificativa = (state: State, removeAllRevisoesJustificativa = false): State => {\n  if (!state.emRevisao) {\n    return state;\n  }\n\n  if (!removeAllRevisoesJustificativa) {\n    let revisoes: Revisao[] = [];\n    revisoes = criaRevisaoJustificativa(state);\n\n    if (revisoes.length > 0) {\n      state.revisoes!.push(...revisoes);\n    }\n  } else {\n    remove(state);\n  }\n\n  return state;\n};\n\nconst remove = (state: State): void => {\n  state.revisoes = state.revisoes?.filter(r => r.descricao !== RevisaoJustificativaEnum.JustificativaAlterada);\n};\n\nconst criaRevisaoJustificativa = (state: State): Revisao[] => {\n  const result: Revisao[] = [];\n\n  if (!jaExisteRevisaoUsuarioAtual(state)) {\n    result.push(new RevisaoJustificativa(state.usuario!, formatDateTime(new Date()), RevisaoJustificativaEnum.JustificativaAlterada));\n  }\n\n  return result;\n};\n\nconst jaExisteRevisaoUsuarioAtual = (state: State): boolean => {\n  const revisoesUsuarioAtual = state.revisoes?.filter(r => r.usuario.nome === state.usuario?.nome && r.descricao === RevisaoJustificativaEnum.JustificativaAlterada);\n\n  if (revisoesUsuarioAtual!.length > 0) {\n    const revisaoDataHoraModificada = revisoesUsuarioAtual![0];\n    revisaoDataHoraModificada.dataHora = formatDateTime(new Date());\n    return true;\n  }\n  return false;\n};\n","import { Revisao, RevisaoTextoLivre } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State } from '../../state';\nimport { RevisaoTextoLivreEnum } from '../util/revisaoUtil';\n\nexport const atualizaRevisaoTextoLivre = (state: State, removeAllRevisoesTextoLivre = false): State => {\n  if (!state.emRevisao) {\n    return state;\n  }\n\n  if (!removeAllRevisoesTextoLivre) {\n    let revisoes: Revisao[] = [];\n    revisoes = criaRevisaoTextoLivre(state);\n\n    if (revisoes.length > 0) {\n      state.revisoes!.push(...revisoes);\n    }\n  } else {\n    remove(state);\n  }\n\n  return state;\n};\n\nconst remove = (state: State): void => {\n  state.revisoes = state.revisoes?.filter(r => r.descricao !== RevisaoTextoLivreEnum.TextoLivreAlterado);\n};\n\nconst criaRevisaoTextoLivre = (state: State): Revisao[] => {\n  const result: Revisao[] = [];\n\n  //if (!jaExisteRevisaoUsuarioAtual(state)) {\n  if (!jaExisteRevisao(state)) {\n    result.push(new RevisaoTextoLivre(state.usuario!, formatDateTime(new Date()), RevisaoTextoLivreEnum.TextoLivreAlterado));\n  }\n\n  return result;\n};\n\nconst jaExisteRevisao = (state: State): boolean => {\n  const revisaoUtil = state.revisoes?.filter(r => r.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado) || [];\n\n  return revisaoUtil.length > 0;\n};\n\n// const jaExisteRevisaoUsuarioAtual = (state: State): boolean => {\n//   const revisoesUsuarioAtual = state.revisoes?.filter(r => r.usuario.nome === state.usuario?.nome && r.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado);\n\n//   if (revisoesUsuarioAtual!.length > 0) {\n//     const revisaoDataHoraModificada = revisoesUsuarioAtual![0];\n//     revisaoDataHoraModificada.dataHora = formatDateTime(new Date());\n//     return true;\n//   }\n//   return false;\n// };\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { iconeMarginBottom, iconeTextIndent, negrito, sublinhado, iconeNotaDeRodape } from '../../../assets/icons/icons';\nimport { Observable } from '../../util/observable';\nimport { rootStore } from '../../redux/store';\nimport { getQuantidadeRevisoes, getQuantidadeRevisoesJustificativa, getQuantidadeRevisoesTextoLivre } from '../../redux/elemento/util/revisaoUtil';\nimport { connect } from 'pwa-helpers';\nimport { uploadAnexoDialog } from './uploadAnexoDialog';\nimport { showMenuImagem } from './menu-imagem';\nimport { Anexo } from '../../model/emenda/emenda';\nimport { Modo } from '../../redux/elemento/enum/enumUtil';\nimport { editorTextoRicoCss } from '../editor-texto-rico/editor-texto-rico.css';\nimport { EstiloTextoClass } from '../editor-texto-rico/estilos-texto';\nimport { quillTableCss } from '../editor-texto-rico/quill.table.css';\nimport TableModule from '../../assets/js/quill1-table/index.js';\nimport TableTrick from '../../assets/js/quill1-table/js/TableTrick.js';\nimport { removeElementosTDOcultos } from './texto-rico-util';\nimport { NoIndentClass } from './text-indent';\nimport { MarginBottomClass } from './margin-bottom';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { LexmlEmendaConfig } from '../../model/lexmlEmendaConfig';\nimport { AlterarLarguraTabelaColunaModalComponent } from './alterar-largura-tabela-coluna-modal';\nimport { AlterarLarguraImagemModalComponent } from './alterar-largura-imagem-modal';\nimport { notaRodapeCss } from './notaRodape.css';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './notaRodape';\nimport { SwitchRevisaoComponent } from '../switchRevisao/switch-revisao.component';\nimport { atualizaRevisaoJustificativa } from '../../redux/elemento/reducer/atualizaRevisaoJustificativa';\nimport { atualizaRevisaoTextoLivre } from '../../redux/elemento/reducer/atualizaRevisaoTextoLivre';\nimport { adicionarAlerta } from '../../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\n\nconst DefaultKeyboardModule = Quill.import('modules/keyboard');\nconst DefaultClipboardModule = Quill.import('modules/clipboard');\nconst Delta = Quill.import('delta');\n\nconst CLASS_BUTTON_ACEITAR_REVISAO = 'aceitar-revisao';\nconst CLASS_BUTTON_REJEITAR_REVISAO = 'rejeitar-revisao';\n\n@customElement('editor-texto-rico')\nexport class EditorTextoRicoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: String }) texto = '';\n  @property({ type: Array }) anexos: Anexo[] = [];\n  @property({ type: Array }) notasRodape: NotaRodape[] = [];\n  @property({ type: String, attribute: 'registro-evento' }) registroEvento = '';\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  @property({ type: String })\n  modo = '';\n\n  onChange: Observable<string> = new Observable<string>();\n  private timerOnChange?: any;\n\n  quill?: Quill;\n\n  lastSelecion?: any;\n\n  icons = Quill.import('ui/icons');\n\n  @query('#lexml-alterar-largura-coluna-modal')\n  private alterarLarguraColunaModal!: AlterarLarguraTabelaColunaModalComponent;\n\n  @query('#lexml-alterar-largura-tabela-modal')\n  private alterarLarguraTabelaModal!: AlterarLarguraTabelaColunaModalComponent;\n\n  @query('#lexml-alterar-largura-img-modal')\n  private alterarLarguraImagemModal!: AlterarLarguraImagemModalComponent;\n\n  @query('#lexml-switch-revisao-component')\n  private switchRevisaoComponent!: SwitchRevisaoComponent;\n\n  _textoAntesRevisao?: string;\n  get textoAntesRevisao(): string | undefined {\n    // TODO: se contém revisão e texto antes da revisão for igual ao texto atual, ainda assim retorna texto antes da revisão\n    //return (!this.existeRevisaoByModo() && this._textoAntesRevisao === this.texto) || !this._textoAntesRevisao ? undefined : this._textoAntesRevisao;\n    return !this.existeRevisaoByModo() ? undefined : this._textoAntesRevisao;\n  }\n\n  public setTextoAntesRevisao(texto: string | undefined): void {\n    this._textoAntesRevisao = texto;\n  }\n\n  private existeRevisaoByModo = (): boolean => {\n    if (this.modo === Modo.TEXTO_LIVRE) {\n      return getQuantidadeRevisoesTextoLivre(rootStore.getState().elementoReducer.revisoes) > 0;\n    } else {\n      return getQuantidadeRevisoesJustificativa(rootStore.getState().elementoReducer.revisoes) > 0;\n    }\n  };\n\n  private showAlterarLarguraColunaModal(width: string): void {\n    this.alterarLarguraColunaModal.show(width);\n  }\n\n  private hideAlterarLarguraColunaModal(): void {\n    this.alterarLarguraColunaModal.hide();\n  }\n\n  private showAlterarLarguraTabelaModal(width: string): void {\n    this.alterarLarguraTabelaModal.show(width);\n  }\n\n  private hideAlterarLarguraTabelaModal(): void {\n    this.alterarLarguraTabelaModal.hide();\n  }\n\n  private agendarEmissaoEventoOnChange(): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = setTimeout(() => {\n      this.dispatchEvent(\n        new CustomEvent('onchange', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            origemEvento: this.registroEvento,\n          },\n        })\n      );\n      this.onChange.notify(this.registroEvento);\n    }, 1000);\n  }\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  stateChanged(state: any): void {\n    const moduloRevisao = (this.quill as any)?.revisao;\n    const events: StateEvent[] = state.elementoReducer.ui?.events;\n    if (events) {\n      if (events.some(ev => ev.stateType === StateType.RevisaoAtivada)) {\n        moduloRevisao && (moduloRevisao.emRevisao = true);\n        if (!this._textoAntesRevisao) {\n          this._textoAntesRevisao = this.texto;\n        }\n      } else if (events.some(ev => ev.stateType === StateType.RevisaoDesativada)) {\n        moduloRevisao && (moduloRevisao.emRevisao = false);\n        this._textoAntesRevisao = undefined;\n      }\n\n      if (events.some(ev => ev.stateType === StateType.AtualizaUsuario) && moduloRevisao) {\n        moduloRevisao.usuario = state.elementoReducer.usuario?.nome || 'Anônimo';\n      }\n    }\n  }\n\n  labelAnexo = (): string => {\n    const lengthAnexos = this.anexos?.length;\n    return lengthAnexos === 1 ? '1 anexo' : lengthAnexos > 1 ? `${lengthAnexos} anexos` : '';\n  };\n\n  render(): TemplateResult {\n    return html`\n      ${quillTableCss} ${editorTextoRicoCss} ${notaRodapeCss} ${this.modo === Modo.TEXTO_LIVRE ? this.renderBotaoAnexo() : ''}\n\n      <div class=\"panel-revisao\">\n        <lexml-switch-revisao\n          id=\"lexml-switch-revisao-component\"\n          modo=\"${this.modo}\"\n          class=\"revisao-container\"\n          .nomeSwitch=\"${this.getNomeSwitch()}\"\n          .nomeBadgeQuantidadeRevisao=\"${this.getNomeBadge()}\"\n        >\n        </lexml-switch-revisao>\n\n        <sl-button class=\"aceitar-revisao\" variant=\"default\" size=\"small\" title=\"Aceitar revisões\" @click=${(): void => this.aceitarRevisoes()} disabled circle>\n          <sl-icon name=\"check-lg\"></sl-icon>\n        </sl-button>\n        <sl-button class=\"rejeitar-revisao\" variant=\"default\" size=\"small\" title=\"Rejeitar revisões\" @click=${(): void => this.rejeitarRevisoes()} disabled circle>\n          <sl-icon name=\"x\"></sl-icon>\n        </sl-button>\n      </div>\n      <div id=\"${this.id}-inner\" class=\"editor-texto-rico\" @onTableInTable=${this.onTableInTable}></div>\n      <lexml-alterar-largura-tabela-coluna-modal id=\"lexml-alterar-largura-tabela-modal\" tipo=\"tabela\"></lexml-alterar-largura-tabela-coluna-modal>\n      <lexml-alterar-largura-tabela-coluna-modal id=\"lexml-alterar-largura-coluna-modal\" tipo=\"coluna\"></lexml-alterar-largura-tabela-coluna-modal>\n      <lexml-alterar-largura-imagem-modal id=\"lexml-alterar-largura-img-modal\"></lexml-alterar-largura-imagem-modal>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.icons['undo'] = `<svg viewbox=\"0 0 18 18\">\n    <polygon class=\"ql-fill ql-stroke\" points=\"6 10 4 12 2 10 6 10\"></polygon>\n    <path class=\"ql-stroke\" d=\"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9\"></path>\n    </svg>`;\n    this.icons['redo'] = `<svg viewbox=\"0 0 18 18\">\n    <polygon class=\"ql-fill ql-stroke\" points=\"12 10 14 12 16 10 12 10\"></polygon>\n    <path class=\"ql-stroke\" d=\"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5\"></path>\n    </svg>`;\n    //this.icons['anexo'] = anexo + ;\n    this.icons['bold'] = negrito;\n    this.icons['underline'] = sublinhado;\n    this.icons['text-indent'] = iconeTextIndent;\n    this.icons['margin-bottom'] = iconeMarginBottom;\n    this.icons['nota-rodape'] = iconeNotaDeRodape;\n  }\n\n  private renderBotaoAnexo(): TemplateResult {\n    return html`\n      <div class=\"panel-anexo\">\n        <button type=\"button\" style=\"width:auto\" title=\"Anexo\" @click=${(): any => uploadAnexoDialog(this.anexos, this.atualizaAnexo, this)}>\n          <span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15px\" height=\"15px\" viewBox=\"0 0 35 35\" data-name=\"Layer 2\" id=\"Layer_2\">\n              <path\n                d=\"M18,34.75A11.32,11.32,0,0,1,6.69,23.45V8A7.78,7.78,0,0,1,22.25,8V22.49a4.58,4.58,0,1,1-9.15,0V9.29a1.25,1.25,0,0,1,2.5,0v13.2a2.08,2.08,0,1,0,4.15,0V8A5.28,5.28,0,0,0,9.19,8V23.45A8.82,8.82,0,0,0,18,32.25c4.6,0,7.81-3.62,7.81-8.8V9.66a1.25,1.25,0,0,1,2.5,0V23.45C28.31,30,24,34.75,18,34.75Z\"\n              />\n            </svg>\n            ${this.labelAnexo()}\n          </span>\n        </button>\n      </div>\n    `;\n  }\n\n  private timerAlerta?: any;\n  private onTableInTable = (): void => {\n    clearTimeout(this.timerAlerta);\n    this.timerAlerta = setTimeout(() => this.alertar('Não é permitido inserir uma tabela dentro de outra tabela.'), 100);\n  };\n\n  private alertar(mensagem: string): void {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n        <sl-icon name=\"exclamation-octagon\" slot=\"icon\"></sl-icon>\n        ${mensagem}\n      `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n\n  firstUpdated(): void {\n    this.init();\n  }\n\n  disconnectedCallback(): void {\n    this.quill?.off('text-change', this.updateTexto);\n    this.quill?.off('selection-change', this.onSelectionChange);\n    super.disconnectedCallback();\n  }\n\n  init = (): void => {\n    const quillContainer = this.querySelector(`#${this.id}-inner`) as HTMLElement;\n    if (quillContainer) {\n      Quill.register('modules/keyboard', DefaultKeyboardModule, true);\n      Quill.register('modules/clipboard', DefaultClipboardModule, true);\n      Quill.register('modules/table', TableModule, true);\n      Quill.register('formats/estilo-texto', EstiloTextoClass, true);\n      Quill.register('formats/text-indent', NoIndentClass, true);\n      Quill.register('formats/margin-bottom', MarginBottomClass, true);\n\n      const customToolbarOptions = toolbarOptions;\n      const customFormatsOptions = formatsOptions;\n      if (this.modo === Modo.JUSTIFICATIVA) {\n        customToolbarOptions.push(['nota-rodape']);\n        customToolbarOptions[1] = ['bold', 'italic', 'underline', 'link'];\n        customFormatsOptions.push('nota-rodape');\n        customFormatsOptions.push('link');\n      }\n\n      this.quill = new Quill(quillContainer, {\n        formats: customFormatsOptions,\n        modules: {\n          toolbar: {\n            container: customToolbarOptions,\n            handlers: {\n              undo: this.undo,\n              redo: this.redo,\n              image: this.imageHandler,\n            },\n          },\n          aspasCurvas: true,\n          notaRodape: true,\n          table: {\n            cellSelectionOnClick: false,\n          },\n          revisao: {\n            usuario: rootStore.getState().elementoReducer.usuario?.nome || 'Anônimo',\n            emRevisao: false,\n            gerenciarKeydown: true,\n            tableModule: TableModule,\n            tableTrick: TableTrick,\n          },\n          history: {\n            delay: 1000,\n            maxStack: 500,\n            userOnly: true,\n          },\n          clipboard: {},\n          keyboard: {\n            // Since Quill’s default handlers are added at initialization, the only way to prevent them is to add yours in the configuration.\n            bindings: {\n              tab: {\n                key: 'tab',\n                handler: (range: any, keycontext: any): any => {\n                  const outSideOfTable = TableModule.keyboardHandler(this.quill, 'tab', range, keycontext);\n                  if (outSideOfTable && this.quill) {\n                    //for some reason when you return true as quill says it should hand it to the default like the other bindings... for tab it doesnt.\n                    this.quill.history.cutoff(); //mimic the exact same thing quill does\n                    const delta = new Delta().retain(range.index).delete(range.length).insert('\\t');\n                    this.quill.updateContents(delta as any, Quill.sources.USER);\n                    this.quill.history.cutoff();\n                    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n                  }\n                },\n              },\n              shiftTab: {\n                key: 'tab',\n                shiftKey: true,\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'shiftTab', range, keycontext);\n                },\n              },\n              selectAll: {\n                key: 'a',\n                ctrlKey: true,\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'selectAll', range, keycontext);\n                },\n              },\n              backspace: {\n                key: 'backspace',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'backspace', range, keycontext);\n                },\n              },\n              delete: {\n                key: 'delete',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'delete', range, keycontext);\n                },\n              },\n              undo: {\n                ctrlKey: true,\n                key: 'z',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'undo', range, keycontext);\n                },\n              },\n              redo: {\n                ctrlKey: true,\n                key: 'y',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'redo', range, keycontext);\n                },\n              },\n              redo2: {\n                ctrlKey: true,\n                shiftKey: true,\n                key: 'z',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'redo', range, keycontext);\n                },\n              },\n              copy: {\n                ctrlKey: true,\n                key: 'c',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'copy', range, keycontext);\n                },\n              },\n              // Desabilita autoformatação de listas\n              // Referência: https://github.com/quilljs/quill/blob/1.3.7/modules/keyboard.js (linha 249)\n              'list autofill': {\n                key: ' ',\n                handler: (): boolean => true,\n              },\n            },\n          },\n        },\n        placeholder: '',\n        theme: 'snow',\n      });\n\n      this.setContent(this.texto, this.notasRodape);\n      this.addBotoesExtra();\n      this.configureTooltip();\n      this.elTableManagerButton = this.querySelectorAll('span.ql-table')[1] as HTMLSpanElement;\n      this.quill?.on('text-change', this.updateTexto);\n      this.quill?.on('selection-change', this.onSelectionChange);\n      this.alterarLarguraColunaModal.callback = this.alterarLarguraDaColuna;\n      this.alterarLarguraTabelaModal.callback = this.alterarLarguraDaTabela;\n      this.alterarLarguraImagemModal.callback = this.alterarLarguraDaImagem;\n\n      quillContainer.addEventListener('contextmenu', this.menuContextImagem);\n      quillContainer.addEventListener('click', this.onClick);\n\n      const toolbar = this.quill.getModule('toolbar');\n      toolbar.addHandler('table', (value: string) => {\n        TableModule.configToolbar(this.quill, value);\n\n        if (value === 'change-width-col-modal') {\n          this.lastSelecion = this.quill?.getSelection();\n          const td = TableTrick.find_td_node(this.quill);\n          this.showAlterarLarguraColunaModal(td.width);\n        } else if (value === 'change-width-table-modal') {\n          this.lastSelecion = this.quill?.getSelection();\n          const table = TableTrick.find_table_node(this.quill);\n          this.showAlterarLarguraTabelaModal(table.width);\n        }\n      });\n\n      this.quill.root.addEventListener(NOTA_RODAPE_CHANGE_EVENT, this.updateNotasRodape);\n      this.quill.root.addEventListener(NOTA_RODAPE_REMOVE_EVENT, this.updateNotasRodape);\n      this.buildRevisoes();\n    }\n  };\n\n  menuContextImagem = (ev: MouseEvent): void => {\n    const elemento = ev.target as Element;\n    if (elemento.tagName === 'IMG') {\n      ev.preventDefault();\n      showMenuImagem(this, elemento, ev.pageY, ev.pageX);\n    }\n  };\n\n  onClick = (ev: MouseEvent): void => {\n    const elemento = ev.target as Element;\n    if (elemento.tagName === 'IMG') {\n      ev.preventDefault();\n      this.selectImage(elemento);\n    }\n  };\n\n  selectImage = (img: any): void => {\n    const imgBlot = Quill.find(img);\n    imgBlot && this.quill!.setSelection(this.quill!.getIndex(imgBlot), 1);\n  };\n\n  imageHandler = (): void => {\n    let fileInput = this.querySelector('input.ql-image[type=file]') as any;\n    if (fileInput === null) {\n      fileInput = document.createElement('input');\n      fileInput.setAttribute('type', 'file');\n      fileInput.setAttribute('hidden', 'true');\n      fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n      fileInput.classList.add('ql-image');\n      fileInput.addEventListener('change', () => {\n        if (fileInput.files !== null && fileInput.files[0] !== null) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            if (this.tamanhoPermitido(e)) {\n              const range = this.quill!.getSelection(true);\n              this.quill!.updateContents(new Delta().retain(range.index).delete(range.length).insert({ image: e.target!.result }), Quill.sources.USER);\n              fileInput.value = '';\n              fileInput.remove();\n            } else {\n              this.alertar(`Essa imagem ultrapassa o tamanho máximo permitido (${Math.trunc(this.lexmlEtaConfig.tamanhoMaximoImagem / 1024)}MB)`);\n              fileInput.remove();\n            }\n          };\n          reader.readAsDataURL(fileInput.files[0]);\n        }\n      });\n      this.appendChild(fileInput);\n    }\n    fileInput.click();\n  };\n\n  tamanhoPermitido = (e: any): boolean => {\n    const size = Math.round(e.loaded / 1024);\n    return size < this.lexmlEtaConfig.tamanhoMaximoImagem;\n  };\n\n  alterarLarguraDaColuna = (valor: number): void => {\n    this.quill!.setSelection(this.lastSelecion);\n    TableTrick.changeWidthCol(this.quill, valor);\n    this.updateApenasTexto();\n    this.hideAlterarLarguraColunaModal();\n  };\n\n  alterarLarguraDaTabela = (valor: number): void => {\n    this.quill!.setSelection(this.lastSelecion);\n    TableTrick.changeWidthTable(this.quill, valor);\n    this.updateApenasTexto();\n    this.hideAlterarLarguraTabelaModal();\n  };\n\n  alterarLarguraDaImagem = (img: any, valor: number): void => {\n    const blot = Quill.find(img);\n    blot && blot.format('width', `${valor}%`);\n  };\n\n  private elTableManagerButton?: HTMLSpanElement;\n  onSelectionChange = (range: any): void => {\n    setTimeout(() => {\n      const format = range && this.quill?.getFormat(range);\n      this.highLightBotaoGerenciarTabela(format);\n    }, 0);\n  };\n\n  highLightBotaoGerenciarTabela = (format: any): void => {\n    format?.td ? this.elTableManagerButton?.classList.add('table-selected') : this.elTableManagerButton?.classList.remove('table-selected');\n  };\n\n  addBotoesExtra = (): void => {\n    const toolbarContainer = this.quill!.getModule('toolbar').container;\n    const elAnexo = this.querySelector('.panel-anexo');\n    const elRevisao = this.querySelector('.panel-revisao')!;\n\n    if (elAnexo) {\n      elAnexo.parentNode!.removeChild(elAnexo);\n      toolbarContainer.appendChild(elAnexo);\n    }\n\n    elRevisao.parentNode!.removeChild(elRevisao);\n    toolbarContainer.appendChild(elRevisao);\n  };\n\n  configureTooltip = (): void => {\n    const toolbarContainer = this.quill!.getModule('toolbar').container;\n    this.setTitle(toolbarContainer, 'button.ql-bold', 'Negrito (Ctrl+b)');\n    this.setTitle(toolbarContainer, 'button.ql-italic', 'Itálico (Ctrl+i)');\n    this.setTitle(toolbarContainer, 'button.ql-underline', 'Sublinhado (Ctrl+u)');\n    this.setTitle(toolbarContainer, 'button.ql-list[value=\"ordered\"]', 'Lista ordenada');\n    this.setTitle(toolbarContainer, 'button.ql-list[value=\"bullet\"]', 'Lista não ordenada');\n    this.setTitle(toolbarContainer, 'button.ql-blockquote', 'Bloco de citação');\n    this.setTitle(toolbarContainer, 'button.ql-script[value=\"sub\"]', 'Subscrito');\n    this.setTitle(toolbarContainer, 'button.ql-script[value=\"super\"]', 'Sobrescrito');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(1)', 'Alinhar à esquerda');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(2)', 'Centralizar');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(3)', 'Alinhar à direita');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(4)', 'Justificar');\n    this.setTitle(toolbarContainer, 'button.ql-clean', 'Limpar formatação');\n    this.setTitle(toolbarContainer, 'button.ql-image', 'Inserir imagem');\n    this.setTitle(toolbarContainer, 'button.ql-undo', 'Desfazer (Ctrl+z)');\n    this.setTitle(toolbarContainer, 'button.ql-redo', 'Refazer (Ctrl+y)');\n    this.setTitle(toolbarContainer, 'button.ql-margin-bottom', 'Distância entre parágrafos');\n    this.setTitle(toolbarContainer, 'button.ql-text-indent', 'Recuo de parágrafo');\n    this.setTitle(toolbarContainer, 'button.ql-table', 'Tabela');\n    this.setTitle(toolbarContainer, 'button.ql-nota-rodape', 'Nota de rodapé');\n  };\n\n  setTitle = (toolbarContainer: HTMLElement, seletor: string, title: string): void => toolbarContainer.querySelector(seletor)?.setAttribute('title', title);\n\n  setContent = (texto: string, notasRodape: NotaRodape[] = []): void => {\n    if (!this.quill || !this.quill.root) {\n      return;\n    }\n\n    this.texto = texto;\n\n    const textoAjustado = (texto || '')\n      .replace(/align-justify/g, 'ql-align-justify')\n      .replace(/align-center/g, 'ql-align-center')\n      .replace(/align-right/g, 'ql-align-right');\n\n    this.quill!.history.clear(); // Não remover: isso é um workaround para o bug que ocorre ao limpar conteúdo depois de alguma inserção de tabela\n    (this.quill as any).revisao.modo = this.modo;\n    this.configAbrindoTexto(true);\n    this.quill.setContents(this.quill.clipboard.convert(textoAjustado), 'silent');\n    this.configAbrindoTexto(false);\n    this.notasRodape = notasRodape;\n\n    setTimeout(() => {\n      this.quill!.history.clear();\n      (this.quill as any).notasRodape.associar(notasRodape);\n    }, 100); // A linha anterior gera um history, então é necessário limpar novamente.\n\n    this.atualizaStatusElementosRevisao();\n  };\n\n  configAbrindoTexto = (valor: boolean): void => {\n    (this.quill as any).revisao.isAbrindoTexto = valor;\n    (this.quill as any).notasRodape.isAbrindoTexto = valor;\n    const emRevisao = (this.quill as any).revisao.emRevisao;\n    if (!valor) {\n      if (this.getQuantidadeDeRevisoes() > 0 && !emRevisao) {\n        if (this.switchRevisaoComponent) {\n          this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(false);\n          setTimeout(() => {\n            this.alertaGlobalRevisao();\n          }, 0);\n        }\n      }\n    }\n    this.atualizaQuantidadeRevisao(this.getQuantidadeDeRevisoes());\n  };\n\n  updateApenasTexto = (): void => {\n    const texto = this.ajustaHtml(this.quill?.root.innerHTML);\n    this.texto = texto === '<p><br></p>' ? '' : texto;\n  };\n\n  updateTexto = (): void => {\n    const texto = this.ajustaHtml(this.quill?.root.innerHTML);\n    this.texto = texto === '<p><br></p>' ? '' : texto;\n    this.agendarEmissaoEventoOnChange();\n    this.onSelectionChange(this.quill?.getSelection());\n    this.atualizaStatusElementosRevisao(false);\n    this.buildRevisoes();\n    this.alertaGlobalRevisao();\n  };\n\n  public alertaGlobalRevisao(): void {\n    const id = 'alerta-global-revisao';\n\n    if (this.getQuantidadeDeRevisoes() > 0 || getQuantidadeRevisoes(rootStore.getState().elementoReducer.revisoes) > 0) {\n      if (rootStore.getState().elementoReducer.ui?.alertas?.filter(a => a.id === id).length === 0) {\n        const alerta = {\n          id: id,\n          tipo: 'info',\n          mensagem: 'Este documento contém marcas de revisão e não deve ser protocolado até que estas sejam removidas.',\n          podeFechar: true,\n          exibirComandoEmenda: true,\n        };\n        setTimeout(() => {\n          rootStore.dispatch(adicionarAlerta(alerta));\n        }, 0);\n      }\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === id)) {\n      rootStore.dispatch(removerAlerta(id));\n    }\n  }\n\n  updateNotasRodape = (): void => {\n    this.notasRodape = (this.quill as any).notasRodape.getNotasRodape();\n    // this.agendarEmissaoEventoOnChange();\n  };\n\n  ajustaHtml = (html = ''): string => {\n    let result = html\n      .replace(/ql-indent/g, 'indent')\n      .replace(/ql-align-justify/g, 'align-justify')\n      .replace(/ql-align-center/g, 'align-center')\n      .replace(/ql-align-right/g, 'align-right');\n\n    result = removeElementosTDOcultos(result);\n    return (this.quill as any).notasRodape.ajustarConteudoTagsNotaRodape(result);\n  };\n\n  undo = (): any => {\n    this.quill?.focus();\n    if ((this.quill as any).revisao.handleUndo(this.quill?.getSelection(), undefined)) {\n      this.quill?.history.undo();\n      this.atualizaStatusElementosRevisao();\n    }\n  };\n\n  redo = (): any => {\n    this.quill?.focus();\n    if ((this.quill as any).revisao.handleRedo(this.quill?.getSelection(), undefined)) {\n      this.quill?.history.redo();\n      this.atualizaStatusElementosRevisao();\n    }\n  };\n\n  atualizaAnexo = (anexo: Anexo[]): void => {\n    this.anexos = [...anexo];\n  };\n\n  private getNomeSwitch = (): string => {\n    return this.modo === Modo.JUSTIFICATIVA ? 'chk-em-revisao-justificativa' : 'chk-em-revisao-texto-livre';\n  };\n\n  private getNomeBadge = (): string => {\n    return this.modo === Modo.JUSTIFICATIVA ? 'badge-marca-alteracao-justificativa' : 'badge-marca-alteracao-texto-livre';\n  };\n\n  private aceitarRevisoes = (): void => {\n    (this.quill as any).revisao.revisarTodos(true);\n    this.setTextoAntesRevisao(undefined);\n    this.atualizaStatusElementosRevisao();\n    this.removeRevisoes();\n  };\n\n  private getQuantidadeDeRevisoes = (): number => {\n    return (this.quill as any)?.revisao?.getQuantidadeRevisoes() ?? 0;\n  };\n\n  private rejeitarRevisoes = (): void => {\n    (this.quill as any).revisao.revisarTodos(false);\n    this.setTextoAntesRevisao(undefined);\n    this.atualizaStatusElementosRevisao();\n    this.removeRevisoes();\n  };\n\n  private timerAtualizaStatusElementosRevisao?: any;\n  private atualizaStatusElementosRevisao = (immediate = true): void => {\n    const fnUpdate = (): void => {\n      const quantidade = this.getQuantidadeDeRevisoes();\n      if (quantidade > 0 && !rootStore.getState().elementoReducer.emRevisao) {\n        if (this.switchRevisaoComponent) {\n          this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(false);\n        }\n      }\n\n      if (quantidade === 0) {\n        this.removeRevisoes();\n      } else if (quantidade > 0) {\n        this.buildRevisoes();\n      }\n      this.desabilitaBtn(quantidade === 0, CLASS_BUTTON_REJEITAR_REVISAO);\n      this.desabilitaBtn(quantidade === 0, CLASS_BUTTON_ACEITAR_REVISAO);\n      this.atualizaQuantidadeRevisao(quantidade);\n    };\n\n    if (immediate) {\n      fnUpdate();\n    } else {\n      clearTimeout(this.timerAtualizaStatusElementosRevisao);\n      this.timerAtualizaStatusElementosRevisao = setTimeout(fnUpdate, 100);\n    }\n  };\n\n  private desabilitaBtn = (desabilita: boolean, button: string): void => {\n    const contadorView = this.querySelector(`.${button}`) as any;\n    if (contadorView) {\n      if (desabilita) {\n        contadorView.setAttribute('disabled', desabilita);\n      } else {\n        contadorView.removeAttribute('disabled');\n      }\n    }\n  };\n\n  private buildRevisoes = (): void => {\n    if (this.modo === Modo.JUSTIFICATIVA) {\n      atualizaRevisaoJustificativa(rootStore.getState().elementoReducer);\n    } else {\n      atualizaRevisaoTextoLivre(rootStore.getState().elementoReducer);\n    }\n  };\n\n  private removeRevisoes = (): void => {\n    atualizaRevisaoJustificativa(rootStore.getState().elementoReducer, true);\n    atualizaRevisaoTextoLivre(rootStore.getState().elementoReducer, true);\n  };\n\n  private atualizaQuantidadeRevisao = (quantidade: number): void => {\n    const elemento = this.querySelector(`#${this.getNomeBadge()}`) as any;\n    if (elemento) {\n      elemento.innerHTML = quantidade;\n    }\n  };\n\n  editarNotaRodape(idNotaRodape: string): void {\n    (this.quill as any).notasRodape.editar(idNotaRodape);\n  }\n\n  removerNotaRodape(idNotaRodape: string): void {\n    (this.quill as any).notasRodape.remover(idNotaRodape);\n  }\n}\n\nconst formatsOptions = [\n  'estilo',\n  'bold',\n  'italic',\n  'image',\n  'underline',\n  'align',\n  'list',\n  'script',\n  'image',\n  'table',\n  'tr',\n  'td',\n  'link',\n  'text-indent',\n  'margin-bottom',\n  'width',\n  'added',\n  'removed',\n];\n\nconst toolbarOptions = [\n  [{ estilo: [false, 'ementa', 'norma-alterada'] }],\n  ['bold', 'italic', 'underline'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  [{ script: 'sub' }, { script: 'super' }],\n  // ['blockquote'],\n  ['undo', 'redo'],\n  [{ align: [] }],\n  [{ 'text-indent': '0px' }],\n  [{ 'margin-bottom': '0px' }],\n  ['clean'],\n  [\n    {\n      table: TableModule.tableOptions(),\n    },\n    {\n      table: [\n        // 'insert',\n        'change-width-col-modal',\n        'change-width-table-modal',\n        'append-row-above',\n        'append-row-below',\n        'append-col-before',\n        'append-col-after',\n        'remove-col',\n        'remove-row',\n        'remove-table',\n        'split-cell',\n        'merge-selection',\n        // 'remove-cell',\n        // 'remove-selection',\n      ],\n    },\n  ],\n  ['image'],\n];\n","import { SlMenuItem } from '@shoelace-style/shoelace';\n\nexport async function showMenuImagem(editorTextoRico: any, img: any, top: number, left: number): Promise<any> {\n  const content = document.createRange().createContextualFragment(`\n    <div>\n      <style>\n      #bg-wp-menu-img {\n        position:absolute; top:0; left:0; width:100%; height:100%; z-index:999;\n      }\n      #menu-img {\n        position:absolute; z-index:9999;\n      }\n      </style>\n      <div id=\"bg-wp-menu-img\">\n        <sl-menu id=\"menu-img\" style=\"top:${top}px;left:${left}px;\">\n          <sl-menu-item id=\"item-menu-largura-img\" value=\"alterar-largura-imagem\">Alterar a largura da imagem</sl-menu-item>\n        </sl-menu>\n      </div>\n    </div>\n  `);\n\n  const itemMenu = content.querySelector('#item-menu-largura-img') as SlMenuItem;\n  const bgWpMenuImagem = content.querySelector('#bg-wp-menu-img') as HTMLDivElement;\n\n  itemMenu.onclick = (): void => {\n    const width = img.getAttribute('width');\n    editorTextoRico.showAlterarLarguraImagemModal(img, width);\n  };\n\n  bgWpMenuImagem.onclick = (): void => {\n    bgWpMenuImagem.parentElement?.remove();\n  };\n\n  await editorTextoRico.appendChild(content);\n}\n","export const ajustaHtmlToEditor = (html = ''): string => {\n  return html\n    .replace(/indent/g, 'ql-indent')\n    .replace(/align-justify/g, 'ql-align-justify')\n    .replace(/align-center/g, 'ql-align-center')\n    .replace(/align-right/g, 'ql-align-right');\n};\n\nexport const ajustaHtmlFromEditor = (html = ''): string => {\n  const result = html\n    .replace(/ql-indent/g, 'indent')\n    .replace(/ql-align-justify/g, 'align-justify')\n    .replace(/ql-align-center/g, 'align-center')\n    .replace(/ql-align-right/g, 'align-right');\n\n  return removeElementosTDOcultos(result);\n};\n\nexport const removeElementosTDOcultos = (html = ''): string => {\n  // O quill1table adiciona elementos td ocultos para identificar/gerenciar undo de células mescladas.\n  // Esses elementos não devem fazer parte do texto html a ser salvo.\n\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = html;\n  const elementosOcultos = tempDiv.querySelectorAll('td[merge_id]');\n  elementosOcultos.forEach((elemento: any) => elemento.parentNode?.removeChild(elemento));\n  return tempDiv.innerHTML;\n};\n\nexport const removeElementosTDOcultosByRegex = (html = ''): string => {\n  const regex = /<td[^>]*\\smerge_id=\"[^\"]*\"[^>]*>[\\s\\S]*?<\\/td>/gim;\n  return html.replace(regex, '');\n};\n","import { SlButton } from '@shoelace-style/shoelace';\nimport { Anexo } from '../../model/emenda/emenda';\n\nexport async function uploadAnexoDialog(anexos: Anexo[], atualizaAnexo: (Anexo) => any, editorTextoRico: any): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n  editorTextoRico.appendChild(dialogElem);\n  //tamanhoMaximoAnexo = editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo;\n  dialogElem.label = 'Anexo';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n    .anexo-item {\n      display: flex;\n      align-items: center;\n      gap: 0.5em;\n      margin-bottom: 1em;\n    }\n\n    sl-icon[name=\"paperclip\"] {\n      width: 1.5em;\n      height: 1.5em;\n    }\n\n    sl-button sl-icon {\n      font-size: 1.5em;\n      pointer-events: none;\n      vertical-align: -4px;\n    }\n\n    #input-upload::part(form-control) {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      gap: 1em;\n    }\n  </style>\n  <div id=\"wp-upload\">\n    <label for=\"input-upload\">Selecione o arquivo a ser anexado à emenda</label>\n    <br/>\n    <br/>\n    <input id=\"input-upload\" type=\"file\" accept=\"application/pdf\" size=\"small\"></input>\n    <br/>\n    <label class=\"tipoErrado\" style=\"color: red;\" hidden=\"true\" id=\"tipoErrado\">Esse arquivo não é um PDF</label>\n    <br/>\n    <label class=\"tamanhoMaximoAtingido\" style=\"color: red;\" hidden=\"true\" id=\"tamanhoMaximoAtingido\">Ultrapassou o tamanho máximo permitido (${Math.trunc(\n      editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo / 1024\n    )}MB)</label>\n  </div>\n  <br/>\n  <div id=\"form\" class=\"input-validation-required\"></div>\n  <br/>\n  <sl-button id=\"btnConfirmarAnexo\" class=\"controls\" slot=\"footer\" variant=\"primary\">Confirmar</sl-button>\n  <sl-button class=\"controls\" slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  `);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const removerAnexo = (e: MouseEvent) => {\n    const nomeArquivo = (e.target as SlButton).getAttribute('nomeArquivo');\n    anexos = anexos.filter(a => a.nomeArquivo !== nomeArquivo);\n    conteudoDinamico();\n  };\n\n  // cria função para exibir anexo em nova aba\n  const exibirAnexo = (e: MouseEvent) => {\n    const nomeArquivo = (e.target as SlButton).getAttribute('nomeArquivo');\n    const anexo = anexos.find(a => a.nomeArquivo === nomeArquivo);\n    const win = window.open();\n\n    if (anexo?.nomeArquivo?.match(/\\.(pdf)$/)) {\n      win?.document.write(`<embed src=\"${anexo?.base64}\" width=\"100%\" height=\"100%\" type=\"application/pdf\"></embed>`);\n      return;\n    }\n    if (anexo?.nomeArquivo?.match(/\\.(jpeg|jpg|gif|png|svg)$/)) {\n      win?.document.write(`<img src=\"${anexo?.base64}\" style=\"width:100%; height:auto;\">`);\n      return;\n    }\n    win?.document.write(`<a href=\"${anexo?.base64}\" download=\"${anexo?.nomeArquivo}\">Download do arquivo anexo</a>`);\n  };\n\n  const conteudoDinamico = (): void => {\n    let htmlConteudo = '';\n    wpUpload.hidden = anexos.length ? true : false;\n\n    anexos.forEach(\n      a =>\n        (htmlConteudo += `<span class=\"anexo-item\">\n                            <sl-icon name=\"paperclip\"></sl-icon>\n                            <a download=\"${a.nomeArquivo}\" href=\"data:application/pdf;base64,${a.base64}\">\n                              <span>\n                                ${a.nomeArquivo}\n                              </span>\n                            </a>\n                            <!--\n                            <sl-button class=\"btn-preview-anexo\" size=\"small\" title=\"Visualizar o anexo em uma nova janela\" nomeArquivo=\"${a.nomeArquivo}\">\n                              <sl-icon name=\"eye\"></sl-icon>\n                            </sl-button>\n                            -->\n                            <sl-button class=\"btn-remove-anexo\" size=\"small\" title=\"Remover anexo\" nomeArquivo=\"${a.nomeArquivo}\">\n                              <sl-icon name=\"x\"></sl-icon>\n                            </sl-button>\n                          </span>`)\n    );\n    form!.innerHTML = htmlConteudo;\n    const btns = form?.querySelectorAll('.btn-remove-anexo');\n    (btns || []).forEach(btn => (btn.onclick = removerAnexo));\n    const btns_preview = form?.querySelectorAll('.btn-preview-anexo');\n    (btns_preview || []).forEach(btn_preview => (btn_preview.onclick = exibirAnexo));\n  };\n\n  const wpUpload = content.querySelector('#wp-upload') as HTMLDivElement;\n  const inputUpload = content.querySelector('#input-upload') as HTMLInputElement;\n  const form = content.querySelector('#form');\n  const botoes = content.querySelectorAll('.controls');\n  const confirmar = botoes[0] as SlButton;\n  const fechar = botoes[1] as SlButton;\n\n  inputUpload.oninput = (): void => {\n    addAnexo(editorTextoRico);\n  };\n\n  confirmar.onclick = (): void => {\n    atualizaAnexo(anexos);\n    agendarEmissaoEventoOnChange(dialogElem);\n    dialogElem?.hide();\n    dialogElem?.remove();\n    anexos = [];\n  };\n\n  fechar.onclick = (): void => {\n    dialogElem?.hide();\n    dialogElem?.remove();\n    anexos = [];\n  };\n\n  const agendarEmissaoEventoOnChange = (elemento: HTMLElement): void => {\n    elemento.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento: 'anexo',\n        },\n      })\n    );\n  };\n\n  const addAnexo = async (editorTextoRico: any) => {\n    if (inputUpload?.files) {\n      const file = inputUpload.files[0];\n\n      const listaRestricoes = restricoes(file, editorTextoRico);\n\n      if (listaRestricoes.length === 0) {\n        const anexo = await convertAnexo(file);\n        anexos.push(anexo);\n        inputUpload.files = null;\n        conteudoDinamico();\n        document.getElementById('btnConfirmarAnexo')?.removeAttribute('disabled');\n      } else {\n        document.getElementById('btnConfirmarAnexo')?.setAttribute('disabled', 'true');\n\n        listaRestricoes.forEach(restricao => {\n          document.getElementById(restricao)?.removeAttribute('hidden');\n        });\n\n        listaRestricoesCompleta.forEach(restricaoCompleta => {\n          if (!listaRestricoes.includes(restricaoCompleta)) {\n            document.getElementById(restricaoCompleta)?.setAttribute('hidden', 'true');\n          }\n        });\n      }\n    }\n  };\n\n  const listaRestricoesCompleta: string[] = ['tamanhoMaximoAtingido', 'tipoErrado'];\n\n  const restricoes = (file: any, editorTextoRico: any): string[] => {\n    const restricoes: string[] = [];\n    if (file) {\n      const size = Math.round(file.size / 1024);\n\n      if (size > editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo) {\n        restricoes.push('tamanhoMaximoAtingido');\n      }\n\n      if (file.type !== 'application/pdf') {\n        restricoes.push('tipoErrado');\n      }\n\n      if (restricoes.length > 0) {\n        restricoes.push('restricao');\n      }\n    }\n\n    //const retorno = file && file.type === 'application/pdf' && size <= 4096;\n    return restricoes;\n  };\n\n  const convertAnexo = (file): Promise<Anexo> => {\n    return new Promise((resolve, reject) => {\n      confirmar.disabled = true;\n      fechar.disabled = true;\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n      fileReader.onload = () => {\n        confirmar.disabled = false;\n        fechar.disabled = false;\n        resolve({ nomeArquivo: file.name, base64: (fileReader.result?.toString() || '').replace(/.*;base64,/, '') });\n      };\n      fileReader.onerror = error => reject(error);\n    });\n  };\n\n  conteudoDinamico();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  setTimeout(() => {\n    inputUpload.focus();\n  }, 0);\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-alterar-largura-tabela-coluna-modal')\nexport class AlterarLarguraTabelaColunaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('sl-alert')\n  private slAlert!: any;\n\n  @property({ type: String })\n  private valorLargura = '';\n\n  @property({ type: String })\n  private tipo = '';\n\n  @property({ type: Function })\n  callback;\n\n  public show(width: string): void {\n    this.valorLargura = width ? width.replace('%', '') : '';\n    this.slAlert.hide();\n    this.slDialog.show();\n    setTimeout(() => {\n      this.shadowRoot?.querySelector('sl-input')?.focus();\n    }, 0);\n  }\n\n  public hide(): void {\n    this.slDialog.hide();\n  }\n\n  private alterarLargura(): void {\n    const width = parseInt(this.valorLargura);\n    if (isNaN(width) || width < 1 || width > 100) {\n      this.slAlert.show();\n    } else if (this.callback) {\n      this.callback(width);\n      this.hide();\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n        sl-input::part(base) {\n          width: 150px;\n        }\n        sl-alert {\n          margin-top: 20px;\n        }\n      </style>\n      <sl-dialog label=\"Alterar a largura da ${this.tipo}\">\n        <label>Informe o percentual da largura da ${this.tipo}</label>\n        <sl-input type=\"number\" value=${this.valorLargura} width=\"30px\" @input=${e => (this.valorLargura = e.target.value)}>\n          <sl-icon name=\"percent\" slot=\"suffix\"></sl-icon>\n        </sl-input>\n        <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n          <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n          Informe uma valor numérico de 1 a 100.\n        </sl-alert>\n        <sl-button slot=\"footer\" @click=${(): void => this.alterarLargura()}>Alterar</sl-button>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-alterar-largura-tabela-coluna-modal': AlterarLarguraTabelaColunaModalComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-alterar-largura-imagem-modal')\nexport class AlterarLarguraImagemModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('sl-alert')\n  private slAlert!: any;\n\n  @property({ type: String })\n  private valorLargura = '';\n\n  @property({ type: String })\n  private tipo = '';\n\n  @property({ type: Function })\n  callback;\n\n  private img: any;\n\n  public show(img: any, width: string): void {\n    this.valorLargura = width ? width.replace('%', '') : '';\n    this.img = img;\n    this.slAlert.hide();\n    this.slDialog.show();\n    setTimeout(() => {\n      this.shadowRoot?.querySelector('sl-input')?.focus();\n    }, 0);\n  }\n\n  public hide(): void {\n    this.slDialog.hide();\n  }\n\n  private alterarLargura(): void {\n    const width = parseInt(this.valorLargura);\n    if (isNaN(width) || width < 1 || width > 100) {\n      this.slAlert.show();\n    } else if (this.callback) {\n      this.callback(this.img, width);\n      this.hide();\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n        sl-input::part(base) {\n          width: 150px;\n        }\n        sl-alert {\n          margin-top: 20px;\n        }\n      </style>\n      <sl-dialog label=\"Alterar a largura da Imagem\">\n        <label>Informe o percentual da largura da Imagem</label>\n        <sl-input type=\"number\" value=${this.valorLargura} width=\"30px\" @input=${e => (this.valorLargura = e.target.value)}>\n          <sl-icon name=\"percent\" slot=\"suffix\"></sl-icon>\n        </sl-input>\n        <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n          <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n          Informe uma valor numérico de 1 a 100.\n        </sl-alert>\n        <sl-button slot=\"footer\" @click=${(): void => this.alterarLargura()}>Alterar</sl-button>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-alterar-largura-imagem-modal': AlterarLarguraImagemModalComponent;\n  }\n}\n","import { html } from 'lit';\n// Foi utilizado TemplateResult porque o articulacao.component.ts não usa ShadowDom\nexport const shoelaceLightThemeStyles = html`\n  <style>\n    :root,\n    :host,\n    .sl-theme-light {\n      --sl-color-gray-50: hsl(0 0% 97.5%);\n      --sl-color-gray-100: hsl(240 4.8% 95.9%);\n      --sl-color-gray-200: hsl(240 5.9% 90%);\n      --sl-color-gray-300: hsl(240 4.9% 83.9%);\n      --sl-color-gray-400: hsl(240 5% 64.9%);\n      --sl-color-gray-500: hsl(240 3.8% 46.1%);\n      --sl-color-gray-600: hsl(240 5.2% 33.9%);\n      --sl-color-gray-700: hsl(240 5.3% 26.1%);\n      --sl-color-gray-800: hsl(240 3.7% 15.9%);\n      --sl-color-gray-900: hsl(240 5.9% 10%);\n      --sl-color-gray-950: hsl(240 7.3% 8%);\n\n      --sl-color-red-50: hsl(0 85.7% 97.3%);\n      --sl-color-red-100: hsl(0 93.3% 94.1%);\n      --sl-color-red-200: hsl(0 96.3% 89.4%);\n      --sl-color-red-300: hsl(0 93.5% 81.8%);\n      --sl-color-red-400: hsl(0 90.6% 70.8%);\n      --sl-color-red-500: hsl(0 84.2% 60.2%);\n      --sl-color-red-600: hsl(0 72.2% 50.6%);\n      --sl-color-red-700: hsl(0 73.7% 41.8%);\n      --sl-color-red-800: hsl(0 70% 35.3%);\n      --sl-color-red-900: hsl(0 62.8% 30.6%);\n      --sl-color-red-950: hsl(0 60% 19.6%);\n\n      --sl-color-orange-50: hsl(33.3 100% 96.5%);\n      --sl-color-orange-100: hsl(34.3 100% 91.8%);\n      --sl-color-orange-200: hsl(32.1 97.7% 83.1%);\n      --sl-color-orange-300: hsl(30.7 97.2% 72.4%);\n      --sl-color-orange-400: hsl(27 96% 61%);\n      --sl-color-orange-500: hsl(24.6 95% 53.1%);\n      --sl-color-orange-600: hsl(20.5 90.2% 48.2%);\n      --sl-color-orange-700: hsl(17.5 88.3% 40.4%);\n      --sl-color-orange-800: hsl(15 79.1% 33.7%);\n      --sl-color-orange-900: hsl(15.3 74.6% 27.8%);\n      --sl-color-orange-950: hsl(15.2 69.1% 19%);\n\n      --sl-color-amber-50: hsl(48 100% 96.1%);\n      --sl-color-amber-100: hsl(48 96.5% 88.8%);\n      --sl-color-amber-200: hsl(48 96.6% 76.7%);\n      --sl-color-amber-300: hsl(45.9 96.7% 64.5%);\n      --sl-color-amber-400: hsl(43.3 96.4% 56.3%);\n      --sl-color-amber-500: hsl(37.7 92.1% 50.2%);\n      --sl-color-amber-600: hsl(32.1 94.6% 43.7%);\n      --sl-color-amber-700: hsl(26 90.5% 37.1%);\n      --sl-color-amber-800: hsl(22.7 82.5% 31.4%);\n      --sl-color-amber-900: hsl(21.7 77.8% 26.5%);\n      --sl-color-amber-950: hsl(22.9 74.1% 16.7%);\n\n      --sl-color-yellow-50: hsl(54.5 91.7% 95.3%);\n      --sl-color-yellow-100: hsl(54.9 96.7% 88%);\n      --sl-color-yellow-200: hsl(52.8 98.3% 76.9%);\n      --sl-color-yellow-300: hsl(50.4 97.8% 63.5%);\n      --sl-color-yellow-400: hsl(47.9 95.8% 53.1%);\n      --sl-color-yellow-500: hsl(45.4 93.4% 47.5%);\n      --sl-color-yellow-600: hsl(40.6 96.1% 40.4%);\n      --sl-color-yellow-700: hsl(35.5 91.7% 32.9%);\n      --sl-color-yellow-800: hsl(31.8 81% 28.8%);\n      --sl-color-yellow-900: hsl(28.4 72.5% 25.7%);\n      --sl-color-yellow-950: hsl(33.1 69% 13.9%);\n\n      --sl-color-lime-50: hsl(78.3 92% 95.1%);\n      --sl-color-lime-100: hsl(79.6 89.1% 89.2%);\n      --sl-color-lime-200: hsl(80.9 88.5% 79.6%);\n      --sl-color-lime-300: hsl(82 84.5% 67.1%);\n      --sl-color-lime-400: hsl(82.7 78% 55.5%);\n      --sl-color-lime-500: hsl(83.7 80.5% 44.3%);\n      --sl-color-lime-600: hsl(84.8 85.2% 34.5%);\n      --sl-color-lime-700: hsl(85.9 78.4% 27.3%);\n      --sl-color-lime-800: hsl(86.3 69% 22.7%);\n      --sl-color-lime-900: hsl(87.6 61.2% 20.2%);\n      --sl-color-lime-950: hsl(86.5 60.6% 13.9%);\n\n      --sl-color-green-50: hsl(138.5 76.5% 96.7%);\n      --sl-color-green-100: hsl(140.6 84.2% 92.5%);\n      --sl-color-green-200: hsl(141 78.9% 85.1%);\n      --sl-color-green-300: hsl(141.7 76.6% 73.1%);\n      --sl-color-green-400: hsl(141.9 69.2% 58%);\n      --sl-color-green-500: hsl(142.1 70.6% 45.3%);\n      --sl-color-green-600: hsl(142.1 76.2% 36.3%);\n      --sl-color-green-700: hsl(142.4 71.8% 29.2%);\n      --sl-color-green-800: hsl(142.8 64.2% 24.1%);\n      --sl-color-green-900: hsl(143.8 61.2% 20.2%);\n      --sl-color-green-950: hsl(144.3 60.7% 12%);\n\n      --sl-color-emerald-50: hsl(151.8 81% 95.9%);\n      --sl-color-emerald-100: hsl(149.3 80.4% 90%);\n      --sl-color-emerald-200: hsl(152.4 76% 80.4%);\n      --sl-color-emerald-300: hsl(156.2 71.6% 66.9%);\n      --sl-color-emerald-400: hsl(158.1 64.4% 51.6%);\n      --sl-color-emerald-500: hsl(160.1 84.1% 39.4%);\n      --sl-color-emerald-600: hsl(161.4 93.5% 30.4%);\n      --sl-color-emerald-700: hsl(162.9 93.5% 24.3%);\n      --sl-color-emerald-800: hsl(163.1 88.1% 19.8%);\n      --sl-color-emerald-900: hsl(164.2 85.7% 16.5%);\n      --sl-color-emerald-950: hsl(164.3 87.5% 9.4%);\n\n      --sl-color-teal-50: hsl(166.2 76.5% 96.7%);\n      --sl-color-teal-100: hsl(167.2 85.5% 89.2%);\n      --sl-color-teal-200: hsl(168.4 83.8% 78.2%);\n      --sl-color-teal-300: hsl(170.6 76.9% 64.3%);\n      --sl-color-teal-400: hsl(172.5 66% 50.4%);\n      --sl-color-teal-500: hsl(173.4 80.4% 40%);\n      --sl-color-teal-600: hsl(174.7 83.9% 31.6%);\n      --sl-color-teal-700: hsl(175.3 77.4% 26.1%);\n      --sl-color-teal-800: hsl(176.1 69.4% 21.8%);\n      --sl-color-teal-900: hsl(175.9 60.8% 19%);\n      --sl-color-teal-950: hsl(176.5 58.6% 11.4%);\n\n      --sl-color-cyan-50: hsl(183.2 100% 96.3%);\n      --sl-color-cyan-100: hsl(185.1 95.9% 90.4%);\n      --sl-color-cyan-200: hsl(186.2 93.5% 81.8%);\n      --sl-color-cyan-300: hsl(187 92.4% 69%);\n      --sl-color-cyan-400: hsl(187.9 85.7% 53.3%);\n      --sl-color-cyan-500: hsl(188.7 94.5% 42.7%);\n      --sl-color-cyan-600: hsl(191.6 91.4% 36.5%);\n      --sl-color-cyan-700: hsl(192.9 82.3% 31%);\n      --sl-color-cyan-800: hsl(194.4 69.6% 27.1%);\n      --sl-color-cyan-900: hsl(196.4 63.6% 23.7%);\n      --sl-color-cyan-950: hsl(196.8 61% 16.1%);\n\n      --sl-color-sky-50: hsl(204 100% 97.1%);\n      --sl-color-sky-100: hsl(204 93.8% 93.7%);\n      --sl-color-sky-200: hsl(200.6 94.4% 86.1%);\n      --sl-color-sky-300: hsl(199.4 95.5% 73.9%);\n      --sl-color-sky-400: hsl(198.4 93.2% 59.6%);\n      --sl-color-sky-500: hsl(198.6 88.7% 48.4%);\n      --sl-color-sky-600: hsl(200.4 98% 39.4%);\n      --sl-color-sky-700: hsl(201.3 96.3% 32.2%);\n      --sl-color-sky-800: hsl(201 90% 27.5%);\n      --sl-color-sky-900: hsl(202 80.3% 23.9%);\n      --sl-color-sky-950: hsl(202.3 73.8% 16.5%);\n\n      --sl-color-blue-50: hsl(213.8 100% 96.9%);\n      --sl-color-blue-100: hsl(214.3 94.6% 92.7%);\n      --sl-color-blue-200: hsl(213.3 96.9% 87.3%);\n      --sl-color-blue-300: hsl(211.7 96.4% 78.4%);\n      --sl-color-blue-400: hsl(213.1 93.9% 67.8%);\n      --sl-color-blue-500: hsl(217.2 91.2% 59.8%);\n      --sl-color-blue-600: hsl(221.2 83.2% 53.3%);\n      --sl-color-blue-700: hsl(224.3 76.3% 48%);\n      --sl-color-blue-800: hsl(225.9 70.7% 40.2%);\n      --sl-color-blue-900: hsl(224.4 64.3% 32.9%);\n      --sl-color-blue-950: hsl(226.2 55.3% 18.4%);\n\n      --sl-color-indigo-50: hsl(225.9 100% 96.7%);\n      --sl-color-indigo-100: hsl(226.5 100% 93.9%);\n      --sl-color-indigo-200: hsl(228 96.5% 88.8%);\n      --sl-color-indigo-300: hsl(229.7 93.5% 81.8%);\n      --sl-color-indigo-400: hsl(234.5 89.5% 73.9%);\n      --sl-color-indigo-500: hsl(238.7 83.5% 66.7%);\n      --sl-color-indigo-600: hsl(243.4 75.4% 58.6%);\n      --sl-color-indigo-700: hsl(244.5 57.9% 50.6%);\n      --sl-color-indigo-800: hsl(243.7 54.5% 41.4%);\n      --sl-color-indigo-900: hsl(242.2 47.4% 34.3%);\n      --sl-color-indigo-950: hsl(243.5 43.6% 22.9%);\n\n      --sl-color-violet-50: hsl(250 100% 97.6%);\n      --sl-color-violet-100: hsl(251.4 91.3% 95.5%);\n      --sl-color-violet-200: hsl(250.5 95.2% 91.8%);\n      --sl-color-violet-300: hsl(252.5 94.7% 85.1%);\n      --sl-color-violet-400: hsl(255.1 91.7% 76.3%);\n      --sl-color-violet-500: hsl(258.3 89.5% 66.3%);\n      --sl-color-violet-600: hsl(262.1 83.3% 57.8%);\n      --sl-color-violet-700: hsl(263.4 70% 50.4%);\n      --sl-color-violet-800: hsl(263.4 69.3% 42.2%);\n      --sl-color-violet-900: hsl(263.5 67.4% 34.9%);\n      --sl-color-violet-950: hsl(265.1 61.5% 21.4%);\n\n      --sl-color-purple-50: hsl(270 100% 98%);\n      --sl-color-purple-100: hsl(268.7 100% 95.5%);\n      --sl-color-purple-200: hsl(268.6 100% 91.8%);\n      --sl-color-purple-300: hsl(269.2 97.4% 85.1%);\n      --sl-color-purple-400: hsl(270 95.2% 75.3%);\n      --sl-color-purple-500: hsl(270.7 91% 65.1%);\n      --sl-color-purple-600: hsl(271.5 81.3% 55.9%);\n      --sl-color-purple-700: hsl(272.1 71.7% 47.1%);\n      --sl-color-purple-800: hsl(272.9 67.2% 39.4%);\n      --sl-color-purple-900: hsl(273.6 65.6% 32%);\n      --sl-color-purple-950: hsl(276 59.5% 16.5%);\n\n      --sl-color-fuchsia-50: hsl(289.1 100% 97.8%);\n      --sl-color-fuchsia-100: hsl(287 100% 95.5%);\n      --sl-color-fuchsia-200: hsl(288.3 95.8% 90.6%);\n      --sl-color-fuchsia-300: hsl(291.1 93.1% 82.9%);\n      --sl-color-fuchsia-400: hsl(292 91.4% 72.5%);\n      --sl-color-fuchsia-500: hsl(292.2 84.1% 60.6%);\n      --sl-color-fuchsia-600: hsl(293.4 69.5% 48.8%);\n      --sl-color-fuchsia-700: hsl(294.7 72.4% 39.8%);\n      --sl-color-fuchsia-800: hsl(295.4 70.2% 32.9%);\n      --sl-color-fuchsia-900: hsl(296.7 63.6% 28%);\n      --sl-color-fuchsia-950: hsl(297.1 56.8% 14.5%);\n\n      --sl-color-pink-50: hsl(327.3 73.3% 97.1%);\n      --sl-color-pink-100: hsl(325.7 77.8% 94.7%);\n      --sl-color-pink-200: hsl(325.9 84.6% 89.8%);\n      --sl-color-pink-300: hsl(327.4 87.1% 81.8%);\n      --sl-color-pink-400: hsl(328.6 85.5% 70.2%);\n      --sl-color-pink-500: hsl(330.4 81.2% 60.4%);\n      --sl-color-pink-600: hsl(333.3 71.4% 50.6%);\n      --sl-color-pink-700: hsl(335.1 77.6% 42%);\n      --sl-color-pink-800: hsl(335.8 74.4% 35.3%);\n      --sl-color-pink-900: hsl(335.9 69% 30.4%);\n      --sl-color-pink-950: hsl(336.2 65.4% 15.9%);\n\n      --sl-color-rose-50: hsl(355.7 100% 97.3%);\n      --sl-color-rose-100: hsl(355.6 100% 94.7%);\n      --sl-color-rose-200: hsl(352.7 96.1% 90%);\n      --sl-color-rose-300: hsl(352.6 95.7% 81.8%);\n      --sl-color-rose-400: hsl(351.3 94.5% 71.4%);\n      --sl-color-rose-500: hsl(349.7 89.2% 60.2%);\n      --sl-color-rose-600: hsl(346.8 77.2% 49.8%);\n      --sl-color-rose-700: hsl(345.3 82.7% 40.8%);\n      --sl-color-rose-800: hsl(343.4 79.7% 34.7%);\n      --sl-color-rose-900: hsl(341.5 75.5% 30.4%);\n      --sl-color-rose-950: hsl(341.3 70.1% 17.1%);\n\n      --sl-color-primary-50: var(--sl-color-sky-50);\n      --sl-color-primary-100: var(--sl-color-sky-100);\n      --sl-color-primary-200: var(--sl-color-sky-200);\n      --sl-color-primary-300: var(--sl-color-sky-300);\n      --sl-color-primary-400: var(--sl-color-sky-400);\n      --sl-color-primary-500: var(--sl-color-sky-500);\n      --sl-color-primary-600: var(--sl-color-sky-600);\n      --sl-color-primary-700: var(--sl-color-sky-700);\n      --sl-color-primary-800: var(--sl-color-sky-800);\n      --sl-color-primary-900: var(--sl-color-sky-900);\n      --sl-color-primary-950: var(--sl-color-sky-950);\n\n      --sl-color-success-50: var(--sl-color-green-50);\n      --sl-color-success-100: var(--sl-color-green-100);\n      --sl-color-success-200: var(--sl-color-green-200);\n      --sl-color-success-300: var(--sl-color-green-300);\n      --sl-color-success-400: var(--sl-color-green-400);\n      --sl-color-success-500: var(--sl-color-green-500);\n      --sl-color-success-600: var(--sl-color-green-600);\n      --sl-color-success-700: var(--sl-color-green-700);\n      --sl-color-success-800: var(--sl-color-green-800);\n      --sl-color-success-900: var(--sl-color-green-900);\n      --sl-color-success-950: var(--sl-color-green-950);\n\n      --sl-color-warning-50: var(--sl-color-amber-50);\n      --sl-color-warning-100: var(--sl-color-amber-100);\n      --sl-color-warning-200: var(--sl-color-amber-200);\n      --sl-color-warning-300: var(--sl-color-amber-300);\n      --sl-color-warning-400: var(--sl-color-amber-400);\n      --sl-color-warning-500: var(--sl-color-amber-500);\n      --sl-color-warning-600: var(--sl-color-amber-600);\n      --sl-color-warning-700: var(--sl-color-amber-700);\n      --sl-color-warning-800: var(--sl-color-amber-800);\n      --sl-color-warning-900: var(--sl-color-amber-900);\n      --sl-color-warning-950: var(--sl-color-amber-950);\n\n      --sl-color-danger-50: var(--sl-color-red-50);\n      --sl-color-danger-100: var(--sl-color-red-100);\n      --sl-color-danger-200: var(--sl-color-red-200);\n      --sl-color-danger-300: var(--sl-color-red-300);\n      --sl-color-danger-400: var(--sl-color-red-400);\n      --sl-color-danger-500: var(--sl-color-red-500);\n      --sl-color-danger-600: var(--sl-color-red-600);\n      --sl-color-danger-700: var(--sl-color-red-700);\n      --sl-color-danger-800: var(--sl-color-red-800);\n      --sl-color-danger-900: var(--sl-color-red-900);\n      --sl-color-danger-950: var(--sl-color-red-950);\n\n      --sl-color-neutral-50: var(--sl-color-gray-50);\n      --sl-color-neutral-100: var(--sl-color-gray-100);\n      --sl-color-neutral-200: var(--sl-color-gray-200);\n      --sl-color-neutral-300: var(--sl-color-gray-300);\n      --sl-color-neutral-400: var(--sl-color-gray-400);\n      --sl-color-neutral-500: var(--sl-color-gray-500);\n      --sl-color-neutral-600: var(--sl-color-gray-600);\n      --sl-color-neutral-700: var(--sl-color-gray-700);\n      --sl-color-neutral-800: var(--sl-color-gray-800);\n      --sl-color-neutral-900: var(--sl-color-gray-900);\n      --sl-color-neutral-950: var(--sl-color-gray-950);\n\n      --sl-color-neutral-0: hsl(0, 0%, 100%);\n      --sl-color-neutral-1000: hsl(0, 0%, 0%);\n\n      --sl-border-radius-small: 0.1875rem;\n      --sl-border-radius-medium: 0.25rem;\n      --sl-border-radius-large: 0.5rem;\n      --sl-border-radius-x-large: 1rem;\n\n      --sl-border-radius-circle: 50%;\n      --sl-border-radius-pill: 9999px;\n\n      --sl-shadow-x-small: 0 1px 2px hsl(240 3.8% 46.1% / 6%);\n      --sl-shadow-small: 0 1px 2px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-medium: 0 2px 4px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-large: 0 2px 8px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-x-large: 0 4px 16px hsl(240 3.8% 46.1% / 12%);\n\n      --sl-spacing-3x-small: 0.125rem;\n      --sl-spacing-2x-small: 0.25rem;\n      --sl-spacing-x-small: 0.5rem;\n      --sl-spacing-small: 0.75rem;\n      --sl-spacing-medium: 1rem;\n      --sl-spacing-large: 1.25rem;\n      --sl-spacing-x-large: 1.75rem;\n      --sl-spacing-2x-large: 2.25rem;\n      --sl-spacing-3x-large: 3rem;\n      --sl-spacing-4x-large: 4.5rem;\n\n      --sl-transition-x-slow: 1000ms;\n      --sl-transition-slow: 500ms;\n      --sl-transition-medium: 250ms;\n      --sl-transition-fast: 150ms;\n      --sl-transition-x-fast: 50ms;\n\n      --sl-font-mono: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;\n      --sl-font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      --sl-font-serif: Georgia, 'Times New Roman', serif;\n\n      --sl-font-size-2x-small: 0.625rem;\n      --sl-font-size-x-small: 0.75rem;\n      --sl-font-size-small: 0.875rem;\n      --sl-font-size-medium: 1rem;\n      --sl-font-size-large: 1.25rem;\n      --sl-font-size-x-large: 1.5rem;\n      --sl-font-size-2x-large: 2.25rem;\n      --sl-font-size-3x-large: 3rem;\n      --sl-font-size-4x-large: 4.5rem;\n\n      --sl-font-weight-light: 300;\n      --sl-font-weight-normal: 400;\n      --sl-font-weight-semibold: 500;\n      --sl-font-weight-bold: 700;\n\n      --sl-letter-spacing-denser: -0.03em;\n      --sl-letter-spacing-dense: -0.015em;\n      --sl-letter-spacing-normal: normal;\n      --sl-letter-spacing-loose: 0.075em;\n      --sl-letter-spacing-looser: 0.15em;\n\n      --sl-line-height-denser: 1;\n      --sl-line-height-dense: 1.4;\n      --sl-line-height-normal: 1.8;\n      --sl-line-height-loose: 2.2;\n      --sl-line-height-looser: 2.6;\n\n      --sl-focus-ring-alpha: 40%;\n      --sl-focus-ring-width: 3px;\n      --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) hsl(198.6 88.7% 48.4% / var(--sl-focus-ring-alpha));\n\n      --sl-button-font-size-small: var(--sl-font-size-x-small);\n      --sl-button-font-size-medium: var(--sl-font-size-small);\n      --sl-button-font-size-large: var(--sl-font-size-medium);\n\n      --sl-input-height-small: 1.875rem;\n      --sl-input-height-medium: 2.5rem;\n      --sl-input-height-large: 3.125rem;\n\n      --sl-input-background-color: var(--sl-color-neutral-0);\n      --sl-input-background-color-hover: var(--sl-input-background-color);\n      --sl-input-background-color-focus: var(--sl-input-background-color);\n      --sl-input-background-color-disabled: var(--sl-color-neutral-100);\n      --sl-input-border-color: var(--sl-color-neutral-300);\n      --sl-input-border-color-hover: var(--sl-color-neutral-400);\n      --sl-input-border-color-focus: var(--sl-color-primary-500);\n      --sl-input-border-color-disabled: var(--sl-color-neutral-300);\n      --sl-input-border-width: 1px;\n\n      --sl-input-border-radius-small: var(--sl-border-radius-medium);\n      --sl-input-border-radius-medium: var(--sl-border-radius-medium);\n      --sl-input-border-radius-large: var(--sl-border-radius-medium);\n\n      --sl-input-font-family: var(--sl-font-sans);\n      --sl-input-font-weight: var(--sl-font-weight-normal);\n      --sl-input-font-size-small: var(--sl-font-size-small);\n      --sl-input-font-size-medium: var(--sl-font-size-medium);\n      --sl-input-font-size-large: var(--sl-font-size-large);\n      --sl-input-letter-spacing: var(--sl-letter-spacing-normal);\n\n      --sl-input-color: var(--sl-color-neutral-700);\n      --sl-input-color-hover: var(--sl-color-neutral-700);\n      --sl-input-color-focus: var(--sl-color-neutral-700);\n      --sl-input-color-disabled: var(--sl-color-neutral-900);\n      --sl-input-icon-color: var(--sl-color-neutral-500);\n      --sl-input-icon-color-hover: var(--sl-color-neutral-600);\n      --sl-input-icon-color-focus: var(--sl-color-neutral-600);\n      --sl-input-placeholder-color: var(--sl-color-neutral-500);\n      --sl-input-placeholder-color-disabled: var(--sl-color-neutral-600);\n      --sl-input-spacing-small: var(--sl-spacing-small);\n      --sl-input-spacing-medium: var(--sl-spacing-medium);\n      --sl-input-spacing-large: var(--sl-spacing-large);\n\n      --sl-input-filled-background-color: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-hover: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-focus: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-disabled: var(--sl-color-neutral-100);\n      --sl-input-filled-color: var(--sl-color-neutral-800);\n      --sl-input-filled-color-hover: var(--sl-color-neutral-800);\n      --sl-input-filled-color-focus: var(--sl-color-neutral-700);\n      --sl-input-filled-color-disabled: var(--sl-color-neutral-800);\n\n      --sl-input-label-font-size-small: var(--sl-font-size-small);\n      --sl-input-label-font-size-medium: var(--sl-font-size-medium);\n      --sl-input-label-font-size-large: var(--sl-font-size-large);\n\n      --sl-input-label-color: inherit;\n\n      --sl-input-help-text-font-size-small: var(--sl-font-size-x-small);\n      --sl-input-help-text-font-size-medium: var(--sl-font-size-small);\n      --sl-input-help-text-font-size-large: var(--sl-font-size-medium);\n\n      --sl-input-help-text-color: var(--sl-color-neutral-500);\n\n      --sl-toggle-size: 1rem;\n\n      --sl-overlay-background-color: hsl(240 3.8% 46.1% / 33%);\n\n      --sl-panel-background-color: var(--sl-color-neutral-0);\n      --sl-panel-border-color: var(--sl-color-neutral-200);\n      --sl-panel-border-width: 1px;\n\n      --sl-tooltip-border-radius: var(--sl-border-radius-medium);\n      --sl-tooltip-background-color: var(--sl-color-neutral-800);\n      --sl-tooltip-color: var(--sl-color-neutral-0);\n      --sl-tooltip-font-family: var(--sl-font-sans);\n      --sl-tooltip-font-weight: var(--sl-font-weight-normal);\n      --sl-tooltip-font-size: var(--sl-font-size-small);\n      --sl-tooltip-line-height: var(--sl-line-height-dense);\n      --sl-tooltip-padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-small);\n      --sl-tooltip-arrow-size: 4px;\n\n      --sl-z-index-drawer: 700;\n      --sl-z-index-dialog: 800;\n      --sl-z-index-dropdown: 900;\n      --sl-z-index-toast: 950;\n      --sl-z-index-tooltip: 1000;\n    }\n\n    .sl-scroll-lock {\n      overflow: hidden !important;\n    }\n\n    .sl-toast-stack {\n      position: fixed;\n      top: 0;\n      right: 0;\n      z-index: var(--sl-z-index-toast);\n      width: 28rem;\n      max-width: 100%;\n      max-height: 100%;\n      overflow: auto;\n    }\n\n    .sl-toast-stack sl-alert {\n      --box-shadow: var(--sl-shadow-large);\n      margin: var(--sl-spacing-medium);\n    }\n  </style>\n`;\n","import { NotaRodape } from '../../components/editor-texto-rico/notaRodape';\nimport { Revisao } from '../revisao/revisao';\n\nexport class Emenda {\n  // Metadados padronizados para o lexml-eta\n  dataUltimaModificacao = new Date().toISOString();\n  aplicacao = '';\n  versaoAplicacao = '';\n  modoEdicao = ModoEdicaoEmenda.EMENDA;\n  // Metadados específicos de sistemas\n  metadados: MetadadosEmenda = {};\n  proposicao = new RefProposicaoEmendada();\n  epigrafe = new Epigrafe();\n  componentes = [new ComponenteEmendado()];\n  comandoEmendaTextoLivre = new ComandoEmendaTextoLivre();\n  comandoEmenda = new ComandoEmenda();\n  substituicaoTermo?: SubstituicaoTermo;\n  anexos: Anexo[] = [];\n  justificativa = '';\n  justificativaAntesRevisao?: string;\n  local = '';\n  data?: string = new Date().toISOString().replace(/T.*/, ''); // formato “YYYY-MM-DD”\n  autoria = new Autoria();\n  opcoesImpressao = new OpcoesImpressao();\n  revisoes: Revisao[] = [];\n  colegiadoApreciador = new ColegiadoApreciador();\n  notasRodape: NotaRodape[] = [];\n}\n\nexport type MetadadosEmenda = {\n  [key: string]: string | number | boolean | string[] | number[] | boolean[];\n};\n\nexport enum ModoEdicaoEmenda {\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n  EMENDA_TEXTO_LIVRE = 'emendaTextoLivre',\n  EMENDA_SUBSTITUICAO_TERMO = 'emendaSubstituicaoTermo',\n}\n\n// Dados da proposição ----------------------------\nexport class RefProposicaoEmendada {\n  urn = '';\n  sigla = '';\n  numero = '';\n  ano = '';\n  ementa = '';\n  identificacaoTexto = '';\n}\n\n// Colegiado apreciador da emenda ----------------------------\nexport class ColegiadoApreciador {\n  siglaCasaLegislativa: 'CN' | 'SF' | 'CD' = 'CN';\n  tipoColegiado: 'Plenário' | 'Comissão' | 'Plenário via Comissão' = 'Plenário';\n  siglaComissao?: string;\n}\n\n// Epígrafe ----------------------------\nexport class Epigrafe {\n  texto = '';\n  complemento = '';\n}\n\n// Componente emendado -------------------------------\nexport class ComponenteEmendado {\n  urn = '';\n  articulado = true;\n  rotuloAnexo?: string;\n  tituloAnexo?: string;\n  dispositivos = new DispositivosEmenda();\n}\n\n// Dispositivos da emenda ----------------------------\nexport class DispositivosEmenda {\n  dispositivosSuprimidos: DispositivoEmendaSuprimido[] = [];\n  dispositivosModificados: DispositivoEmendaModificado[] = [];\n  dispositivosAdicionados: DispositivoEmendaAdicionado[] = [];\n}\n\nexport class DispositivoEmenda {\n  tipo = ''; // Tipo do dispositivo\n  id = ''; // ID LexML\n  rotulo?: string;\n  urnNormaAlterada?: string;\n}\n\nexport class DispositivoEmendaSuprimido extends DispositivoEmenda {}\n\nexport class DispositivoEmendaModificado extends DispositivoEmenda {\n  texto?: string;\n  textoOmitido?: boolean;\n  abreAspas?: boolean;\n  fechaAspas?: boolean;\n  notaAlteracao?: 'NR' | 'AC';\n}\n\nexport class DispositivoEmendaAdicionado extends DispositivoEmendaModificado {\n  idPai?: string;\n  idIrmaoAnterior?: string;\n  idPosicaoAgrupador?: string;\n  existeNaNormaAlterada?: boolean;\n  filhos?: Array<DispositivoEmendaAdicionado>;\n}\n\nexport class ComandoEmenda {\n  cabecalhoComum?: string;\n  comandos: ItemComandoEmenda[] = [];\n}\n\nexport class ComandoEmendaTextoLivre {\n  motivo?: string;\n  texto?: string;\n  textoAntesRevisao?: string;\n}\n\nexport class ItemComandoEmenda {\n  constructor(public cabecalho: string, public citacao?: string) {}\n  rotulo?: string;\n  complemento?: string;\n}\n\n// Autoria ----------------------------\nexport enum TipoAutoria {\n  NAO_IDENTIFICADO = 'Não identificado',\n  PARLAMENTAR = 'Parlamentar',\n  COMISSAO = 'Comissão',\n  CASA_LEGISLATIVA = 'Casa Legislativa',\n}\nexport class Autoria {\n  tipo = TipoAutoria.PARLAMENTAR;\n  imprimirPartidoUF = true;\n  quantidadeAssinaturasAdicionaisSenadores = 0;\n  quantidadeAssinaturasAdicionaisDeputados = 0;\n  // TODO - Tornar opcional quando formos implementar outro tipo de autoria.\n  parlamentares: Array<Parlamentar> = [];\n  colegiado?: ColegiadoAutor;\n}\n\nexport class Parlamentar {\n  identificacao = '';\n  nome = '';\n  sexo: 'M' | 'F' = 'M';\n  siglaPartido = '';\n  siglaUF = '';\n  siglaCasaLegislativa: 'SF' | 'CD' = 'CD';\n  cargo = '';\n}\n\nexport class ColegiadoAutor {\n  identificacao = '';\n  nome = '';\n  sigla = '';\n}\n\n// Opções de impressão -----------------------------\nexport class OpcoesImpressao {\n  imprimirBrasao = true;\n  textoCabecalho = '';\n  reduzirEspacoEntreLinhas = false;\n  tamanhoFonte = 14;\n}\n\nexport class Anexo {\n  nomeArquivo = '';\n  base64 = '';\n}\n\nexport type TipoSubstituicaoTermo = 'Expressão' | 'Palavra' | 'Número';\nexport class SubstituicaoTermo {\n  tipo: TipoSubstituicaoTermo = 'Expressão';\n  termo = '';\n  novoTermo = '';\n  flexaoGenero = false;\n  flexaoNumero = false;\n}\n","import { isArticulacaoAlteracao, getDispositivoCabecaAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArtigo, isCaput } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { TagNode } from '../util/tag-node';\nimport { isOmissis, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoMultiplaAlteracaoNormaVigente {\n  private ultimoProcessado: Dispositivo | undefined = undefined;\n\n  private adjacentesOmissis: Dispositivo[] = []; // Dispositivos da lista que são adjacentes às omissis modificadas\n\n  private fecharAspasAposOmissis = false;\n\n  public getTexto(dispositivos: Dispositivo[]): string {\n    dispositivos = dispositivos.filter(d => d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isAgrupadorNaoArticulacao(d.pai!));\n    this.adjacentesOmissis = this.buscaDispositivosAdjacentesAsOmissis(dispositivos);\n    dispositivos.push(...this.adjacentesOmissis);\n    dispositivos.sort(DispositivoComparator.compare);\n\n    const arvoreDispositivos = CmdEmdUtil.getArvoreDispositivosDeAlteracaoDeNorma(dispositivos);\n\n    const sb = new StringBuilder();\n    this.montaCitacaoComando(sb, arvoreDispositivos);\n\n    const fechaAspas = this.fecharAspasAposOmissis || CmdEmdUtil.isFechaAspas(this.ultimoProcessado!);\n    if (fechaAspas) {\n      const primeiro = [...arvoreDispositivos.keys()][0];\n      const cabeca = getDispositivoCabecaAlteracao(primeiro);\n      const notaAlteracao = cabeca.notaAlteracao ? ' (' + cabeca.notaAlteracao + ')' : '';\n      return sb.toString().replace(/(<\\/p>)$/, '”' + notaAlteracao + '$1');\n    }\n    return sb.toString();\n  }\n\n  private buscaDispositivosAdjacentesAsOmissis(dispositivos: Dispositivo[]): Dispositivo[] {\n    const ret = new Array<Dispositivo>();\n\n    for (const d of dispositivos) {\n      if (isOmissis(d)) {\n        // TODO - Verificar necessidade de tratamento de bloco de alteração com omissis como primeiro elemento.\n        //    if (!d.isAbreAspas()) {\n        const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n        if (!dispositivos.includes(anterior)) {\n          ret.push(anterior);\n        }\n        //    }\n        if (!CmdEmdUtil.isFechaAspas(d)) {\n          const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n          if (posterior && !dispositivos.includes(posterior)) {\n            ret.push(posterior);\n          }\n        }\n      }\n    }\n\n    return ret;\n  }\n\n  private montaCitacaoComando(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const cabeca = [...arvoreDispositivos.keys()][0];\n    arvoreDispositivos = arvoreDispositivos.get(cabeca);\n\n    const ehAgrupador = isAgrupadorNaoArticulacao(cabeca);\n\n    const classes = cabeca.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n    const node = new TagNode('p').addAtributo('class', classes);\n    if (isArticulacaoAlteracao(cabeca.pai!)) {\n      node.add('“');\n    }\n    node.add(new TagNode('Rotulo').add(cabeca.rotulo!));\n    if (ehAgrupador) {\n      if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n        sb.append(node.toString());\n      } else {\n        sb.append(node.toString());\n        const nodeDenominacao = new TagNode('p').addAtributo('class', classes).add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n        sb.append(nodeDenominacao.toString());\n      }\n    } else {\n      node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca, true));\n      sb.append(node.toString());\n    }\n\n    this.ultimoProcessado = cabeca;\n    if (arvoreDispositivos.size > 0 && cabeca.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      this.writeDispositivoTo(sb, arvoreDispositivos);\n    }\n\n    if (!isAgrupadorNaoArticulacao(cabeca)) {\n      this.writeOmissisFinal(sb, cabeca);\n    }\n  }\n\n  private writeDispositivoTo(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const filhos = [...arvoreDispositivos.keys()];\n    filhos.sort(DispositivoComparator.compare);\n\n    for (const d of filhos) {\n      const arvoreAtual = arvoreDispositivos.get(d) as Map<Dispositivo, any>;\n\n      const dispositivoAnterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n\n      // -------------------------------------------\n      // Omissões antes\n\n      // Trata caso específico de primeiro parágrafo\n      if (isArtigo(this.ultimoProcessado as Dispositivo) && !isCaput(d)) {\n        // Omissis entre o caput e o dispositivo\n        if (!isCaput(dispositivoAnterior) && !isOmissis(d)) {\n          sb.append(this.tagOmissisSemRotulo().toString());\n        }\n      } else if (this.ultimoProcessado !== dispositivoAnterior && !isOmissis(d) && dispositivoAnterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      // -------------------------------------------\n      // o dispositivo atual\n      if (!isCaput(d)) {\n        const ehAgrupador = isAgrupadorNaoArticulacao(d);\n        const classes = d.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n        if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n          const node = new TagNode('p').addAtributo('classe', classes);\n          if (!isOmissis(d)) {\n            node.add(new TagNode('Rotulo').add(d.rotulo));\n          }\n          node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(d, true));\n          sb.append(node.toString());\n        } else if (this.hasFilhosPropostos(arvoreAtual) || this.adjacentesOmissis.includes(d)) {\n          const tag = new TagNode('p').addAtributo('classe', classes);\n          tag.add(new TagNode('Rotulo').add(d.rotulo));\n          tag.add(new TagNode('Omissis'));\n          sb.append(tag.toString());\n        } else {\n          sb.append(new TagNode('Omissis').toString());\n        }\n      }\n\n      this.ultimoProcessado = d;\n\n      // -------------------------------------------\n      // varre os filhos do dispositivo atual\n      if (arvoreAtual && arvoreAtual.size > 0) {\n        this.writeDispositivoTo(sb, arvoreAtual);\n      }\n    }\n  }\n\n  private tagOmissisSemRotulo(): TagNode {\n    return new TagNode('p').addAtributo('class', 'omissis').add(new TagNode('Omissis'));\n  }\n\n  private writeOmissisFinal(sb: StringBuilder, artigo: Dispositivo): void {\n    if (artigo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return;\n    }\n\n    // Busca último nó à direita\n    let d = artigo;\n    let filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    while (filhos.length) {\n      d = filhos[filhos.length - 1];\n      filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    }\n    if (isCaput(d)) {\n      d = d.pai!;\n    }\n\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && (!this.adjacentesOmissis.includes(d) || isOmissis(d))) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n      this.fecharAspasAposOmissis = true;\n    } else if (!CmdEmdUtil.isFechaAspas(d)) {\n      const proximo = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n      if (proximo && isOmissis(proximo)) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n        this.fecharAspasAposOmissis = true;\n      }\n    }\n  }\n\n  private hasFilhosPropostos(arvoreDispositivos: Map<Dispositivo, any>): boolean {\n    if (!arvoreDispositivos || !arvoreDispositivos.size) {\n      return false;\n    }\n\n    const arvore = arvoreDispositivos;\n    let hasPropostos = false;\n\n    for (const [d, value] of arvore.entries()) {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        hasPropostos = true;\n        break;\n      }\n\n      if (!hasPropostos && value) {\n        hasPropostos = this.hasFilhosPropostos(value as Map<Dispositivo, any>);\n      }\n    }\n    return hasPropostos;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { StringBuilder } from '../util/string-util';\nimport { isAgrupadorNaoArticulacao, isArtigo, isOmissis } from './../model/dispositivo/tipo';\nimport { getArtigo, isArticulacaoAlteracao, percorreHierarquiaDispositivos } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoMultiplaAlteracaoNormaVigente } from './citacao-cmd-multipla-de-norma-vigente';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoDeNormaVigente {\n  public getTexto(alteracao: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    // Identifica dispositivos alterados\n    const dispositivos = new Array<Dispositivo>();\n    percorreHierarquiaDispositivos(alteracao, d => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        dispositivos.push(d);\n      }\n    });\n\n    dispositivos.sort(DispositivoComparator.compare);\n\n    const qtdDispositivos = dispositivos.length;\n\n    const qtdSemCitacaoObrigatoria = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isOmissis(d)).length;\n\n    if (qtdDispositivos - qtdSemCitacaoObrigatoria > 0) {\n      this.getCitacoesMultiplas(sb, dispositivos);\n    }\n\n    return sb.toString();\n  }\n\n  private getCitacoesMultiplas(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    let dispositivosDaCabeca = new Array<Dispositivo>();\n    let cabeca, cabecaAtual;\n\n    for (const d of dispositivos) {\n      cabeca = this.getCabeca(d);\n\n      if (cabeca !== cabecaAtual) {\n        if (dispositivosDaCabeca.length) {\n          this.getCitacaoMultipla(sb, dispositivosDaCabeca);\n        }\n\n        dispositivosDaCabeca = [cabeca];\n        cabecaAtual = cabeca;\n      }\n\n      if (!dispositivosDaCabeca.includes(d)) {\n        dispositivosDaCabeca.push(d);\n      }\n    }\n\n    if (dispositivosDaCabeca.length) {\n      this.getCitacaoMultipla(sb, dispositivosDaCabeca);\n    }\n  }\n\n  private getCabeca(d: Dispositivo): Dispositivo {\n    if (isArticulacaoAlteracao(d.pai!)) {\n      return d;\n    }\n    if (isArtigo(d) || isAgrupadorNaoArticulacao(d) || (isOmissis(d) && isAgrupadorNaoArticulacao(d.pai!))) {\n      return this.getCabeca(d.pai!);\n    }\n    return this.getCabeca(getArtigo(d));\n  }\n\n  private getCitacaoMultipla(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    const cit = new CitacaoComandoMultiplaAlteracaoNormaVigente();\n    sb.append(cit.getTexto(dispositivos));\n  }\n}\n","import { isAgrupadorNaoArticulacao, isEmenta } from './../model/dispositivo/tipo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArtigo, isCaput } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { TagNode } from '../util/tag-node';\nimport { Artigo, Dispositivo } from './../model/dispositivo/dispositivo';\nimport {\n  getDispositivoCabecaAlteracao,\n  isArticulacaoAlteracao,\n  isAscendente,\n  isDescendenteDeSuprimido,\n  isDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoMultipla {\n  private ultimoProcessado?: Dispositivo;\n  private emAlteracao = false;\n\n  public getTexto(dispositivos: Dispositivo[], abreAspas = true, fechaAspas = true): string {\n    let arvoreDispositivos = CmdEmdUtil.getArvoreDispositivos(dispositivos);\n\n    const sb = new StringBuilder();\n\n    const cabeca = [...arvoreDispositivos.keys()][0];\n    arvoreDispositivos = arvoreDispositivos.get(cabeca);\n\n    const ehAgrupador = isAgrupadorNaoArticulacao(cabeca);\n\n    const classes = cabeca.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n    const node = new TagNode('p').addAtributo('class', classes);\n    if (abreAspas) {\n      node.add('“');\n    }\n    if (!isEmenta(cabeca)) {\n      node.add(new TagNode('Rotulo').add(cabeca.rotulo));\n    }\n    if (isAgrupadorNaoArticulacao(cabeca)) {\n      sb.append(node.toString());\n      const nodeDenominacao = new TagNode('p').addAtributo('class', classes).add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n      sb.append(nodeDenominacao.toString());\n    } else {\n      const texto = CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca);\n      node.add(isEmenta(cabeca) ? texto.trim() : texto);\n      sb.append(node.toString());\n    }\n\n    if (arvoreDispositivos.size) {\n      this.ultimoProcessado = cabeca;\n      this.writeDispositivoTo(sb, arvoreDispositivos);\n    }\n\n    this.writeOmissisFinal(sb, cabeca);\n\n    return fechaAspas ? sb.toString().replace(/(<\\/p>(?:<\\/Alteracao>)?)$/, '”$1') : sb.toString();\n  }\n\n  writeDispositivoTo(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const dispositivos = Array.from(arvoreDispositivos.keys());\n    dispositivos.sort(DispositivoComparator.compare);\n\n    for (const d of dispositivos) {\n      const mapFilhos = arvoreDispositivos.get(d);\n      if (isArticulacaoAlteracao(d)) {\n        sb.append('<Alteracao>');\n        this.emAlteracao = true;\n        this.ultimoProcessado = d;\n        if (mapFilhos.size) {\n          this.writeDispositivoTo(sb, mapFilhos);\n        }\n        sb.append('</Alteracao>');\n        continue;\n      }\n\n      if (isCaput(d)) {\n        this.ultimoProcessado = d;\n        if (mapFilhos.size) {\n          this.writeDispositivoTo(sb, mapFilhos);\n        }\n        continue;\n      }\n\n      const dispositivoAnterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n\n      // -------------------------------------------\n      // Omissões antes\n\n      // Trata caso específico de parágrafo modificado sem caput modificado\n      if (isArtigo(this.ultimoProcessado!) && !isCaput(d)) {\n        // Omissis entre o caput e o dispositivo\n        if (!isCaput(dispositivoAnterior)) {\n          sb.append(this.tagOmissisSemRotulo().toString());\n        }\n      } else if (\n        this.ultimoProcessado !== dispositivoAnterior &&\n        !(this.ultimoProcessado!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && isAscendente(dispositivoAnterior, this.ultimoProcessado!))\n      ) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      // -------------------------------------------\n      // o dispositivo atual\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL || this.hasFilhosPropostos(mapFilhos)) {\n        const dispRotulo = isArtigo(d) ? (d as Artigo).caput! : d;\n        const rotulo = this.emAlteracao ? d.rotulo?.replace('“', '') : d.rotulo;\n        const ehAgrupador = isAgrupadorNaoArticulacao(d);\n        const classes = d.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n        let tag = new TagNode('p').addAtributo('class', classes);\n        if (isDispositivoCabecaAlteracao(d)) {\n          tag.add('‘');\n        }\n        tag.add(new TagNode('Rotulo').add(rotulo));\n        if (ehAgrupador) {\n          sb.append(tag.toString());\n          tag = new TagNode('p').addAtributo('class', classes);\n        }\n        tag.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(dispRotulo));\n        if (d.isDispositivoAlteracao && isUltimaAlteracao(d)) {\n          tag.add('’');\n          const cabecaAlteracao = getDispositivoCabecaAlteracao(d);\n          if (cabecaAlteracao.notaAlteracao) {\n            tag.add(' (' + cabecaAlteracao.notaAlteracao + ')');\n          }\n        }\n        sb.append(tag.toString());\n      } else {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      this.ultimoProcessado = d;\n\n      // -------------------------------------------\n      // varre os filhos do dispositivo atual\n      if (mapFilhos.size) {\n        this.writeDispositivoTo(sb, mapFilhos);\n      }\n    }\n  }\n\n  private tagOmissisSemRotulo(): TagNode {\n    return new TagNode('p').addAtributo('class', 'omissis').add(new TagNode('Omissis'));\n  }\n\n  private writeOmissisFinal(sb: StringBuilder, cabeca: Dispositivo): void {\n    if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isAgrupadorNaoArticulacao(cabeca)) {\n      return;\n    }\n\n    let d = cabeca as Dispositivo;\n\n    // Trata caso específico de alteração de caput de artigo com alteração de norma\n    if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO && isArtigo(d) && (d as Artigo).hasAlteracao()) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n      return;\n    }\n\n    // Busca último nó à direita\n    while (d.filhos.length) {\n      d = d.filhos[d.filhos.length - 1];\n    }\n\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && !isDescendenteDeSuprimido(d)) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n    }\n  }\n\n  private hasFilhosPropostos(map: Map<Dispositivo, any>): boolean {\n    if (!map.size) {\n      return false;\n    }\n\n    let hasPropostos = false;\n\n    for (const [d, mapFilhos] of map.entries()) {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        hasPropostos = true;\n        break;\n      }\n\n      if (!hasPropostos && mapFilhos.size) {\n        hasPropostos = this.hasFilhosPropostos(mapFilhos);\n        if (hasPropostos) {\n          break;\n        }\n      }\n    }\n\n    return hasPropostos;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo, isEmenta } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { Articulacao } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isAgrupador, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport {\n  buscaNaHierarquiaDispositivos,\n  getArtigoDoProjeto,\n  isArticulacaoAlteracao,\n  isDescendenteDeSuprimido,\n  isDispositivoAlteracao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoMultipla } from './citacao-cmd-multipla';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoDispPrj {\n  constructor(private articulacao: Articulacao) {}\n\n  getTexto(): string {\n    const sb = new StringBuilder();\n\n    const dispositivos = this.getDispositivosParaCitacao();\n\n    const qtdDispositivos = dispositivos.length;\n    const qtdSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO).length;\n\n    if (qtdDispositivos - qtdSuprimidos > 0) {\n      this.getCitacoesMultiplas(sb, dispositivos);\n    }\n\n    return sb.toString();\n  }\n\n  private getDispositivosParaCitacao(): Dispositivo[] {\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao).filter(\n      d => !(isAgrupadorNaoArticulacao(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO)\n    );\n    dispositivosEmenda.sort(DispositivoComparator.compare);\n\n    const ret = new Array<Dispositivo>();\n\n    dispositivosEmenda.forEach(d => {\n      if (isArticulacaoAlteracao(d)) {\n        // Entram alterações de norma vigente em dispositivos novos,\n        if (d.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(d);\n        }\n      } else if (isDispositivoAlteracao(d)) {\n        // dispositivos de alteração de norma vigente em dispositivos novos, e\n        if (ret.indexOf(d.pai!) >= 0) {\n          ret.push(d);\n        }\n      } else if (!isDescendenteDeSuprimido(d)) {\n        // dispositivos que não são de alteração de norma vigente e que não são descendentes de suprimidos.\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n\n  getCitacoesMultiplas(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    // O dispositivo de referência será um artigo ou um agrupador de artigo.\n    let listaDispRef = new Array<Dispositivo>();\n    let dispRef;\n    let dispRefAtual;\n\n    let noGrupoDeAspas: Dispositivo[] = [];\n\n    dispositivos.forEach(d => {\n      dispRef = (isArtigo(d) || isAgrupadorNaoArticulacao(d) || isEmenta(d)) && !isDispositivoAlteracao(d) ? d : getArtigoDoProjeto(d);\n\n      if (dispRef !== dispRefAtual) {\n        if (listaDispRef.length) {\n          const abreAspas = dispRefAtual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO || noGrupoDeAspas.indexOf(dispRefAtual) < 0;\n          const fechaAspas = noGrupoDeAspas.indexOf(dispRef) < 0;\n          if (fechaAspas) {\n            noGrupoDeAspas = [];\n          }\n          sb.append(new CitacaoComandoMultipla().getTexto(listaDispRef, abreAspas, fechaAspas));\n        }\n\n        listaDispRef = [];\n        listaDispRef.push(dispRef);\n\n        dispRefAtual = dispRef;\n      }\n\n      // Preenche noGrupoDeAspas para agrupadores adicionados que não estão no último grupo de aspas\n      if (isAgrupador(dispRef) && dispRef.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && noGrupoDeAspas.indexOf(dispRef) < 0) {\n        noGrupoDeAspas = this.getDispositivosMesmoGrupoDeAspas(dispRef);\n      }\n\n      if (listaDispRef.indexOf(d) < 0) {\n        listaDispRef.push(d);\n      }\n    });\n\n    if (listaDispRef.length) {\n      const abreAspas = noGrupoDeAspas.indexOf(dispRefAtual) < 0;\n      sb.append(new CitacaoComandoMultipla().getTexto(listaDispRef, abreAspas, true));\n    }\n  }\n\n  getDispositivosMesmoGrupoDeAspas(agrupador: Dispositivo): Dispositivo[] {\n    const ret = new Array<Dispositivo>();\n    buscaNaHierarquiaDispositivos(agrupador, d => {\n      if (!isDispositivoAlteracao(d) && (isAgrupadorNaoArticulacao(d) || isArtigo(d))) {\n        if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(d);\n          return false;\n        }\n        return true;\n      }\n      return false;\n    });\n    return ret.slice(1);\n  }\n}\n","export class ObjetoUtil {\n  static arrayIgual(valor1: unknown, valor2: unknown): boolean {\n    if (!Array.isArray(valor1) || !Array.isArray(valor2)) {\n      return false;\n    }\n    const v1: unknown[] = valor1 as unknown[];\n    const v2: unknown[] = valor2 as unknown[];\n\n    if (v1.length !== v2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; i++) {\n      if (!ObjetoUtil.igual(v1[i], v2[1])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  static igual(valor1: unknown, valor2: unknown): boolean {\n    if (typeof valor1 !== typeof valor2) {\n      return false;\n    }\n\n    if (Array.isArray(valor1) || Array.isArray(valor2)) {\n      return ObjetoUtil.arrayIgual(valor1, valor2);\n    }\n\n    if (typeof valor1 !== 'object') {\n      return valor1 === valor2;\n    }\n\n    if (valor1 === valor2) {\n      return true;\n    }\n    const chaves1: string[] = Object.keys(valor1 as any);\n    const chaves2: string[] = Object.keys(valor2 as any);\n\n    if (chaves1.length !== chaves2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < chaves1.length; i++) {\n      if (!ObjetoUtil.igual(chaves1[i], chaves2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nexport const removeFromArray = (array: any[], element: any): void => {\n  array.splice(array.indexOf(element), 1);\n};\n","import { isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { Dispositivo } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { getDispositivoPosteriorMesmoTipo } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\nexport class RangeDispositivos {\n  private dispositivos: Dispositivo[] = [];\n\n  constructor(disp?: Dispositivo) {\n    if (disp) {\n      this.add(disp);\n    }\n  }\n\n  isSituacao(descricaoSituacao: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].situacao.descricaoSituacao === descricaoSituacao;\n  }\n\n  isTipo(nomeTipo: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].tipo === nomeTipo;\n  }\n\n  add(dispositivo: Dispositivo): boolean {\n    if (!this.podeAdicionarAoRange(dispositivo)) {\n      return false;\n    }\n    this.dispositivos.push(dispositivo);\n    return true;\n  }\n\n  addInicio(dispositivo: Dispositivo): void {\n    this.dispositivos.splice(0, 0, dispositivo);\n  }\n\n  isUltimo(dispositivo: Dispositivo): boolean {\n    return this.dispositivos.indexOf(dispositivo) === this.dispositivos.length - 1;\n  }\n\n  getPrimeiro(): Dispositivo {\n    return this.dispositivos[0];\n  }\n\n  getUltimo(): Dispositivo {\n    return this.dispositivos[this.dispositivos.length - 1];\n  }\n\n  getQuantidadeDispositivos(): number {\n    return this.dispositivos.length;\n  }\n\n  getAnterior(i: number): Dispositivo | undefined {\n    if (i < 1) {\n      return undefined;\n    }\n    return this.dispositivos[i - 1];\n  }\n\n  getNumeracaoParaComandoEmenda(): string {\n    let numeracao = this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0]);\n    if (this.dispositivos.length > 1) {\n      numeracao += ' a ' + this.getUltimo().getNumeracaoParaComandoEmenda(this.getUltimo());\n    }\n    return numeracao;\n  }\n\n  print(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    if (this.isRotuloNecessario(ranges)) {\n      this.printRotuloInicio(comando, ranges);\n    } else {\n      comando.append(this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0]));\n    }\n\n    this.printSeparadorProximoDispositivo(comando, ranges);\n\n    this.printRotuloFimSeExistir(comando);\n  }\n\n  private printRotuloFimSeExistir(comando: StringBuilder): void {\n    if (this.dispositivos.length >= 2) {\n      const d = this.dispositivos[this.dispositivos.length - 1];\n      comando.append(d.getNumeracaoParaComandoEmenda(d));\n    }\n  }\n\n  private printSeparadorProximoDispositivo(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(ranges);\n\n    if (this.dispositivos.length >= 3) {\n      comando.append(' a ');\n    } else if (this.dispositivos.length === 2 && !rangePosterior) {\n      comando.append(' e ');\n    } else if (this.dispositivos.length > 1 && this.dispositivos.length < 3 && rangePosterior) {\n      comando.append(', ');\n    }\n  }\n\n  private printRotuloInicio(comando: StringBuilder, range: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(range);\n    if ((this.hasApenasUmDispositivo() && !rangePosterior) || (rangePosterior && !this.isMesmoTipoSituacao(rangePosterior))) {\n      comando.append(this.getRotuloCompletoSingular(this.dispositivos[0]));\n    } else {\n      comando.append(this.getRotuloCompletoPlural(this.dispositivos[0]));\n    }\n  }\n\n  private isMesmoTipoSituacao(range: RangeDispositivos): boolean {\n    return range.isTipo(this.dispositivos[0].tipo) && range.isSituacao(this.dispositivos[0].situacao.descricaoSituacao);\n  }\n\n  private hasApenasUmDispositivo(): boolean {\n    return this.dispositivos.length === 1;\n  }\n\n  private isRotuloNecessario(ranges: RangeDispositivos[]): boolean {\n    const anterior = this.getRangeDispositivosAnterior(ranges);\n    if (!anterior || !anterior.isMesmoTipoSituacao(this)) {\n      return true;\n    }\n    if (this.isSituacao(DescricaoSituacao.DISPOSITIVO_ADICIONADO) && !this.isMesmoPai(anterior)) {\n      return true;\n    }\n    return false;\n  }\n\n  private isMesmoPai(range: RangeDispositivos): boolean {\n    return this.getPrimeiro().pai === range.getPrimeiro().pai;\n  }\n\n  private getRotuloCompletoSingular(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoSingular);\n    } else {\n      sb.append(' ');\n    }\n    const rotulo = dispositivo.getNumeracaoComRotuloParaComandoEmenda(dispositivo);\n\n    if (rotulo.endsWith('.')) {\n      sb.append(rotulo.substring(0, rotulo.indexOf('.')));\n    } else {\n      sb.append(rotulo);\n    }\n\n    return sb.toString();\n  }\n\n  private getRotuloCompletoPlural(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoPlural);\n    } else {\n      sb.append(' ');\n    }\n\n    sb.append(this.getTipoDispositivoPlural(dispositivo));\n    sb.append(' ');\n    sb.append(dispositivo.getNumeracaoParaComandoEmenda(dispositivo));\n\n    return sb.toString();\n  }\n\n  private getRangeDispositivosAnterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    const pos = ranges.indexOf(this);\n    if (pos > 0) {\n      return ranges[pos - 1];\n    }\n    return undefined;\n  }\n\n  private getRangeDispositivosPosterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    if (ranges.length === 1) {\n      return undefined;\n    }\n    const pos = ranges.indexOf(this);\n    if (pos >= 0 && pos < ranges.length - 1) {\n      return ranges[pos + 1];\n    }\n    return undefined;\n  }\n\n  private getTipoDispositivoPlural(dispositivo: Dispositivo): string {\n    if (dispositivo.tipo === TipoDispositivo.artigo.tipo) {\n      return 'arts.';\n    } else if (dispositivo.tipo === TipoDispositivo.paragrafo.tipo) {\n      return '§§';\n    }\n\n    return dispositivo.descricaoPlural?.toLocaleLowerCase() + '';\n  }\n\n  private podeAdicionarAoRange(atual: Dispositivo): boolean {\n    if (this.isVazio()) {\n      return true;\n    }\n\n    const ultimo = this.getUltimo();\n\n    // Mesmo tipo\n    if (ultimo.tipo !== atual.tipo) {\n      return false;\n    }\n\n    // Mesma situação\n    if (!CmdEmdUtil.isMesmaSituacaoParaComandoEmenda(ultimo, atual)) {\n      return false;\n    }\n\n    // Devem ter o mesmo pai, exceto no caso de artigo\n    if (!isArtigo(atual) && atual.pai !== ultimo.pai) {\n      return false;\n    }\n\n    // Atual segue o último\n    if (getDispositivoPosteriorMesmoTipo(ultimo) !== atual) {\n      return false;\n    }\n\n    if (isAgrupadorNaoArticulacao(atual)) {\n      return CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(ultimo, atual);\n    }\n\n    // Ambos (último e atual) apresentam alteração integral\n    // ou ambos não apresentam alteração integral\n    if (CmdEmdUtil.isAlteracaoIntegral(ultimo) !== CmdEmdUtil.isAlteracaoIntegral(atual)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  isVazio(): boolean {\n    return this.dispositivos.length === 0;\n  }\n\n  toString(): string {\n    const sb = new StringBuilder();\n    this.dispositivos.forEach(d => {\n      sb.append(' ');\n      sb.append('' + d.rotulo);\n    });\n    return sb.toString();\n  }\n\n  getDispositivos(): Dispositivo[] {\n    return this.dispositivos;\n  }\n\n  getDispositivo(i: number): Dispositivo {\n    return this.dispositivos[i];\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { removeFromArray } from '../util/objeto-util';\nimport { StringBuilder } from '../util/string-util';\nimport { RangeDispositivos } from './range-dispositivos';\n\nexport class SequenciaRangeDispositivos {\n  private ranges = new Array<RangeDispositivos>();\n  localizarEmAgrupador = false;\n  informarCaputDoDispositivo = false;\n\n  isVazio(): boolean {\n    return this.ranges.length === 0;\n  }\n\n  add(range: RangeDispositivos): void {\n    this.ranges.push(range);\n  }\n\n  addInicio(range: RangeDispositivos): void {\n    this.ranges.unshift(range);\n  }\n\n  getQuantidadeRanges(): number {\n    return this.ranges.length;\n  }\n\n  getPrimeiroRange(): RangeDispositivos {\n    return this.ranges[0];\n  }\n\n  getPrimeiroDispositivo(): Dispositivo {\n    return this.ranges[0].getPrimeiro();\n  }\n\n  getUltimoDispositivo(): Dispositivo {\n    return this.ranges[this.ranges.length - 1].getUltimo();\n  }\n\n  getRanges(): RangeDispositivos[] {\n    return this.ranges;\n  }\n\n  setRanges(ranges: RangeDispositivos[]): void {\n    this.ranges = ranges;\n  }\n\n  getRange(i: number): RangeDispositivos {\n    return this.ranges[i];\n  }\n\n  getTextoListaDeDispositivos(): string {\n    const sb = new StringBuilder();\n    const qtdRanges = this.ranges.length;\n    let posRange = 1;\n    for (const range of this.ranges) {\n      // Conector\n      if (posRange > 1) {\n        if (posRange === qtdRanges) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      sb.append(range.getNumeracaoParaComandoEmenda());\n\n      posRange++;\n    }\n    return sb.toString();\n  }\n\n  static debug(sequencias: SequenciaRangeDispositivos[]): void {\n    const sb = new StringBuilder();\n    for (const sequencia of sequencias) {\n      sb.append('seq: ' + sequencia);\n    }\n    console.log(sb);\n  }\n\n  toString(): string {\n    return this.ranges.toString();\n  }\n\n  remove(nr: RangeDispositivos): void {\n    removeFromArray(this.ranges, nr);\n  }\n}\n","import { isAgrupador } from './../model/dispositivo/tipo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { getDispositivoPosterior } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { removeFromArray } from './../util/objeto-util';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class AgrupadorDispositivosCmdEmd {\n  getSequencias(dispositivos: Dispositivo[]): SequenciaRangeDispositivos[] {\n    const ranges = this.getRanges(dispositivos);\n\n    const sequencias = this.agrupaRanges(ranges);\n\n    // SequenciaRangeDispositivos.debug(sequencias);\n\n    return sequencias;\n  }\n\n  private getRanges(dispositivos: Dispositivo[]): RangeDispositivos[] {\n    let ranges = new Array<RangeDispositivos>();\n\n    let range = new RangeDispositivos();\n    for (const dispositivo of dispositivos) {\n      if (!range.add(dispositivo)) {\n        ranges.push(range);\n        range = new RangeDispositivos();\n        range.add(dispositivo);\n      }\n    }\n\n    if (!range.isVazio()) {\n      ranges.push(range);\n    }\n\n    ranges = AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(ranges);\n\n    return ranges;\n  }\n\n  static separaRangesDeDoisDispositivos(ranges: RangeDispositivos[]): RangeDispositivos[] {\n    const ret = new Array<RangeDispositivos>();\n    for (const range of ranges) {\n      if (range.getQuantidadeDispositivos() === 2) {\n        ret.push(new RangeDispositivos(range.getPrimeiro()));\n        ret.push(new RangeDispositivos(range.getUltimo()));\n      } else {\n        ret.push(range);\n      }\n    }\n    return ret;\n  }\n\n  private separaRangesDeDoisDispositivosEmSequencias(sequencias: SequenciaRangeDispositivos[]): void {\n    for (const s of sequencias) {\n      s.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s.getRanges()));\n    }\n  }\n\n  private agrupaRanges(ranges: RangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    let sequencia = new SequenciaRangeDispositivos();\n    for (const range of ranges) {\n      if (sequencia.isVazio()) {\n        sequencia.add(range);\n        sequencias.push(sequencia);\n      } else {\n        if (this.isMesmaSequencia(sequencia, range)) {\n          sequencia.add(range);\n        } else {\n          sequencia = new SequenciaRangeDispositivos();\n          sequencia.add(range);\n          sequencias.push(sequencia);\n        }\n      }\n    }\n\n    return sequencias;\n  }\n\n  private isMesmaSequencia(sequencia: SequenciaRangeDispositivos, range: RangeDispositivos): boolean {\n    const dispSequencia = sequencia.getPrimeiroDispositivo();\n    const dispRange = range.getUltimo();\n    return (\n      CmdEmdUtil.isMesmoTipoParaComandoEmenda(dispSequencia, dispRange) &&\n      CmdEmdUtil.isMesmaSituacaoParaComandoEmenda(dispSequencia, dispRange) &&\n      (dispSequencia.tipo === TipoDispositivo.artigo.tipo || dispSequencia.pai === dispRange.pai) &&\n      dispSequencia.tipo !== TipoDispositivo.omissis.tipo &&\n      (!isAgrupador(dispSequencia) || CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(sequencia.getUltimoDispositivo(), range.getPrimeiro()))\n    );\n  }\n\n  separaDispositivosSeguidosDeOmissis(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n    for (const s of sequencias) {\n      ret.push(...this.separaDispositivosSeguidosDeOmissis2(s));\n    }\n    return ret;\n  }\n\n  private separaDispositivosSeguidosDeOmissis2(s: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    let ns = new SequenciaRangeDispositivos();\n    ret.push(ns);\n\n    let nr = new RangeDispositivos();\n    ns.add(nr);\n\n    for (const r of s.getRanges()) {\n      if (nr.getQuantidadeDispositivos() > 0) {\n        nr = new RangeDispositivos();\n        ns.add(nr);\n      }\n\n      for (const d of r.getDispositivos()) {\n        // Identifica dispositivo seguido de omissis\n        const posterior = getDispositivoPosterior(d);\n        if (posterior && posterior.tipo === TipoDispositivo.omissis.tipo) {\n          // Quebra em sequência com apenas este dispositivo\n          if (this.adicionaouDispositivos(ns, nr)) {\n            if (nr.getQuantidadeDispositivos() === 0) {\n              ns.remove(nr);\n            }\n            ns = new SequenciaRangeDispositivos();\n            ret.push(ns);\n            nr = new RangeDispositivos();\n            ns.add(nr);\n          }\n          ns.informarCaputDoDispositivo = true;\n          nr.add(d);\n\n          ns = new SequenciaRangeDispositivos();\n          ret.push(ns);\n          nr = new RangeDispositivos();\n          ns.add(nr);\n        } else {\n          nr.add(d);\n        }\n      }\n    }\n\n    if (nr.getQuantidadeDispositivos() === 0) {\n      ns.remove(nr);\n    }\n    if (ns.getQuantidadeRanges() === 0) {\n      removeFromArray(ret, ns);\n    }\n\n    this.separaRangesDeDoisDispositivosEmSequencias(ret);\n\n    return ret;\n  }\n\n  private adicionaouDispositivos(s: SequenciaRangeDispositivos, r: RangeDispositivos): boolean {\n    return s.getQuantidadeRanges() > 1 || r.getQuantidadeDispositivos() > 0;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\n/**\n * Representa um comando de emenda que pode ser combinado com outros.\n */\nexport abstract class CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {}\n\n  abstract getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string;\n\n  static compare(c1: CmdEmdCombinavel, c2: CmdEmdCombinavel): number {\n    if (!c1.dispositivos?.length) {\n      return 1;\n    }\n    if (!c2.dispositivos?.length) {\n      return -1;\n    }\n    return DispositivoComparator.compare(c1.dispositivos[0], c2.dispositivos[0]);\n  }\n}\n","import { RangeDispositivos } from './range-dispositivos';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero } from '../model/dispositivo/genero';\nimport { isAgrupador, isAgrupadorNaoArticulacao, isArtigo, isOmissis, isParagrafo } from '../model/dispositivo/tipo';\nimport { isDispositivoAlteracao, isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../model/lexml/tipo/tipoDispositivo';\nimport { primeiraLetraMaiuscula, StringBuilder } from '../util/string-util';\nimport { generoMasculino, generoFeminino } from './../model/dispositivo/genero';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isArticulacao, isCaput } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao, getDispositivoAnteriorNaSequenciaDeLeitura, getDispositivoPosteriorNaSequenciaDeLeitura } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoEmendaUtil } from './dispositivo-emenda-util';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport enum ArtigoAntesDispositivo {\n  NENHUM,\n  DEFINIDO,\n  DEFINIDO_COM_PREPOSICAO_A,\n}\n\nexport enum TipoReferenciaAgrupador {\n  APENAS_ROTULO,\n  DENOMINACAO_DO_AGRUPADOR, // 'a denominação do/a'\n  TODO_AGRUPADOR, // 'todo/a o/a'\n  O_AGRUPADOR, // 'o agrupador '\n  ADICAO, // Sessão X ' ao ' Capítulo Y\n}\n\nexport class DispositivosWriterCmdEmd {\n  public artigoAntesDispositivo = ArtigoAntesDispositivo.NENHUM;\n\n  public tipoReferenciaAgrupador = TipoReferenciaAgrupador.APENAS_ROTULO;\n\n  getTexto(sequencias: SequenciaRangeDispositivos[], citarPais = true): string {\n    const sb = new StringBuilder();\n\n    const qtdSequencias = sequencias.length;\n    let posSequencia = 1;\n    for (const sequencia of sequencias) {\n      // Conector (, ou e)\n      if (posSequencia > 1) {\n        if (posSequencia === qtdSequencias) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      const primeiroDispSeq = sequencia.getPrimeiroDispositivo();\n      const primeiroEhAgrupador = isAgrupadorNaoArticulacao(primeiroDispSeq);\n      const referenciarDenominacao = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR && primeiroEhAgrupador;\n      const referenciarTodoAgrupador = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.TODO_AGRUPADOR && primeiroEhAgrupador;\n      const referenciarOAgrupador = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.O_AGRUPADOR && primeiroEhAgrupador && !!primeiroDispSeq.filhos.length;\n      const posicionarAgrupadores = primeiroEhAgrupador && this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.ADICAO;\n\n      if (sequencia.informarCaputDoDispositivo) {\n        sb.append(this.getReferenciaCaputDoDispositivo(sequencia));\n      } else {\n        // Artigo antes do dispositivo\n        sb.append(this.getTextoArtigoAntesSequencia(sequencia, referenciarDenominacao, referenciarTodoAgrupador, referenciarOAgrupador));\n      }\n\n      // Rótulo do tipo do dispositivo ou denominação\n      if (referenciarDenominacao) {\n        sb.append('denominação ' + primeiroDispSeq.pronomePossessivoSingular + ' ');\n      } else if (referenciarOAgrupador) {\n        sb.append('agrupador ');\n      }\n      sb.append(this.getRotuloTipoDispositivo(sequencia, primeiroEhAgrupador));\n\n      sb.append(' ');\n\n      // Dispositivos\n      sb.append(sequencia.getTextoListaDeDispositivos());\n\n      // Pai dos dispositivos\n      if (citarPais && !posicionarAgrupadores) {\n        sb.append(this.getRotuloPaisSequencia(sequencia));\n      }\n\n      // Escreve posição do agrupador. 'antes ou depois de xxx'\n      if (posicionarAgrupadores) {\n        sb.append(DispositivosWriterCmdEmd.getLocalizacaoAgrupadores(sequencia.getRanges()));\n      }\n\n      posSequencia++;\n    }\n\n    return sb.toString().replace('ementa ', 'ementa');\n  }\n\n  private getReferenciaCaputDoDispositivo(sequencia: SequenciaRangeDispositivos): string {\n    const sb = new StringBuilder();\n\n    const disp = sequencia.getPrimeiroDispositivo();\n\n    if (disp.tipo === TipoDispositivo.caput.tipo) {\n      return this.getTextoArtigoAntesSequencia(sequencia);\n    }\n\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    sb.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, generoMasculino, plural));\n\n    sb.append(' caput ');\n\n    if (sequencia.getRange(0).getQuantidadeDispositivos() === 1) {\n      sb.append(disp.pronomePossessivoSingular);\n    } else {\n      sb.append(disp.pronomePossessivoPlural);\n    }\n\n    return sb.toString();\n  }\n\n  private getTextoArtigoAntesSequencia(\n    sequencia: SequenciaRangeDispositivos,\n    referenciarDenominacao = false,\n    referenciarTodoAgrupador = false,\n    referenciarOAgrupador = false\n  ): string {\n    const primeiro = sequencia.getPrimeiroDispositivo();\n    const genero = referenciarDenominacao ? generoFeminino : referenciarOAgrupador ? generoMasculino : primeiro;\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    const textoTodo = referenciarTodoAgrupador ? (primeiro.tipoGenero === 'feminino' ? 'toda ' : 'todo ') : '';\n\n    return textoTodo + this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, genero, plural);\n  }\n\n  private getTextoArtigoAntesDispositivo(tipo: ArtigoAntesDispositivo, genero: Genero, plural: boolean): string {\n    switch (tipo) {\n      case ArtigoAntesDispositivo.DEFINIDO:\n        if (plural) {\n          return genero.artigoDefinidoPlural;\n        }\n        return genero.artigoDefinidoSingular;\n      case ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A:\n        if (plural) {\n          return genero.artigoDefinidoPrecedidoPreposicaoAPlural;\n        }\n        return genero.artigoDefinidoPrecedidoPreposicaoASingular;\n      default:\n        return '';\n    }\n  }\n\n  private getRotuloTipoDispositivo(sequencia: SequenciaRangeDispositivos, iniciarComMaiuscula: boolean): string {\n    const disp = sequencia.getPrimeiroDispositivo();\n    const rotulo = DispositivosWriterCmdEmd.getRotuloTipoDispositivo(disp, CmdEmdUtil.isSequenciaPlural(sequencia));\n    return iniciarComMaiuscula ? primeiraLetraMaiuscula(rotulo) : rotulo;\n  }\n\n  static getRotuloTipoDispositivo(disp: Dispositivo, plural: boolean): string {\n    // TODO Verificar melhor forma de identificar que não deve ser impresso o rótulo\n    // do tipo do dispositivo antes do parágrafo único e do artigo único.\n    if (disp.getNumeracaoParaComandoEmenda(disp).indexOf('único') >= 0) {\n      return '';\n    }\n\n    if (plural) {\n      // Plural\n      if (isArtigo(disp)) {\n        return 'arts.';\n      } else if (isParagrafo(disp)) {\n        return '§§';\n      }\n\n      return String(disp.descricaoPlural).toLocaleLowerCase();\n    }\n\n    // Singular\n    if (isArtigo(disp)) {\n      if (disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO && !CmdEmdUtil.isAlteracaoIntegral(disp)) {\n        return 'caput do art.';\n      }\n      return 'art.';\n    } else if (isParagrafo(disp)) {\n      return '§';\n    }\n\n    return String(disp.descricao).toLowerCase();\n  }\n\n  private getRotuloPaisSequencia(sequencia: SequenciaRangeDispositivos): string {\n    return this.getRotuloPais(sequencia.getPrimeiroDispositivo(), sequencia.localizarEmAgrupador);\n  }\n\n  private getRotuloPais(disp: Dispositivo, localizarEmAgrupador: boolean): string {\n    let pai: Dispositivo | undefined;\n\n    const dispOrig = disp;\n\n    if (isAgrupador(disp)) {\n      return DispositivosWriterCmdEmd.getRotuloPaisAgrupador(disp);\n    }\n\n    const sb = new StringBuilder();\n\n    while (!isDispositivoRaiz(disp)) {\n      pai = disp.pai;\n\n      if (pai && isArticulacaoAlteracao(pai)) {\n        if (disp.tipo === TipoDispositivo.omissis.tipo) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          if (anterior.tipo !== TipoDispositivo.alteracao.tipo) {\n            sb.append('após ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda(anterior));\n            sb.append(this.getRotuloPais(anterior, localizarEmAgrupador));\n            return sb.toString();\n          }\n        }\n        break;\n      }\n\n      if (pai && !isDispositivoRaiz(pai) && (!isAgrupador(pai) || (isArtigo(dispOrig) && localizarEmAgrupador))) {\n        const dispAlteracao = isDispositivoAlteracao(disp);\n        const dispositivoNovoForaDeAlteracao = !dispAlteracao && disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n        const dispositivoNovoEmAlteracao =\n          dispAlteracao &&\n          !CmdEmdUtil.isTextoOmitido(disp) &&\n          disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          !DispositivoEmendaUtil.existeNaNormaAlterada(disp);\n        // TODO Tratar diferentes situações na norma vigente\n        // && StringUtils\n        //         .defaultString(disp.getSituacaoNaNormaVigente())\n        //         .equals(Dispositivo.ACRESCIMO);\n        if (dispositivoNovoForaDeAlteracao || dispositivoNovoEmAlteracao) {\n          sb.append(pai.artigoDefinidoPrecedidoPreposicaoASingular);\n        } else if (isOmissis(disp)) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(disp);\n\n          if (anterior === pai && posterior && posterior.pai === pai) {\n            // Entre pai e irmão\n            const refIrmao = posterior.pronomePossessivoSingular + ' ' + posterior.descricao?.toLowerCase() + ' ' + posterior.getNumeracaoParaComandoEmenda(posterior);\n            sb.append('antes ' + refIrmao);\n            sb.append(pai.pronomePossessivoSingular);\n          } else if (!(isArticulacao(anterior) && anterior.pai)) {\n            sb.append('após ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda(anterior));\n            sb.append(this.getRotuloPais(anterior, localizarEmAgrupador));\n            return sb.toString();\n          }\n        } else {\n          sb.append(pai.pronomePossessivoSingular);\n        }\n        sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(pai));\n      } else if (isArtigo(disp) && isDispositivoRaiz(pai!) && localizarEmAgrupador) {\n        const agrupador = CmdEmdUtil.getProximoAgrupador(disp);\n        if (agrupador) {\n          sb.append(' antes ');\n          sb.append(agrupador.pronomePossessivoSingular);\n          sb.append(agrupador.getNumeracaoComRotuloParaComandoEmenda(agrupador));\n        }\n      }\n\n      if (!pai) break;\n      disp = pai;\n    }\n\n    return sb.toString();\n  }\n\n  static getRotuloPaisAgrupador(disp: Dispositivo): string {\n    const sb = new StringBuilder();\n    let pai = disp.pai;\n    while (pai && !isDispositivoRaiz(pai) && !isArticulacao(pai)) {\n      sb.append(' ');\n      sb.append(pai.pronomePossessivoSingular);\n      sb.append(' ');\n      sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(pai));\n      pai = pai.pai;\n    }\n    return sb.toString();\n  }\n\n  static getLocalizacaoAgrupadores(ranges: RangeDispositivos[]): string {\n    const ultimoAgrupador = ranges[ranges.length - 1].getUltimo();\n    const dispositivoSeguinte = getDispositivoPosteriorNaSequenciaDeLeitura(\n      ultimoAgrupador,\n      d => d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO && !isCaput(d) && !isArticulacaoAlteracao(d)\n    );\n    const sb = new StringBuilder();\n    sb.append(' ');\n    if (dispositivoSeguinte) {\n      sb.append('antes ');\n      sb.append(dispositivoSeguinte.pronomePossessivoSingular);\n      sb.append(' ');\n      sb.append(dispositivoSeguinte.getNumeracaoComRotuloParaComandoEmenda(dispositivoSeguinte));\n      if (isAgrupadorNaoArticulacao(dispositivoSeguinte)) {\n        sb.append(DispositivosWriterCmdEmd.getRotuloPaisAgrupador(dispositivoSeguinte));\n      }\n    } else {\n      const primeiroAgrupador = ranges[0].getPrimeiro();\n      const dispositvoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(primeiroAgrupador, d => isArtigo(d) || isAgrupadorNaoArticulacao(d));\n      if (dispositvoAnterior) {\n        sb.append('após ');\n        sb.append(dispositvoAnterior.artigoDefinido);\n        sb.append(' ');\n        sb.append(dispositvoAnterior.getNumeracaoComRotuloParaComandoEmenda(dispositvoAnterior));\n        if (isAgrupadorNaoArticulacao(dispositvoAnterior)) {\n          sb.append(DispositivosWriterCmdEmd.getRotuloPaisAgrupador(dispositvoAnterior));\n        }\n      } else {\n        sb.append('!!! localização não encontrada !!!');\n      }\n    }\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { isArtigo, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdAdicaoANormaVigente extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[], private generoNormaAlterada: Genero, private textoTodos: string) {\n    super(dispositivos);\n  }\n\n  public getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = this.dispositivos.length > 1;\n    if (isPrimeiro) {\n      sb.append(plural ? 'Acrescentem-se ' : 'Acrescente-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'acrescentem-se ' : 'acrescente-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      const ultimaSequencia = sequencias[sequencias.length - 1];\n      const primeiroDaUltimaSequencia = ultimaSequencia.getPrimeiroDispositivo();\n      if (isArtigo(primeiroDaUltimaSequencia) || isAgrupadorNaoArticulacao(primeiroDaUltimaSequencia)) {\n        sb.append(this.generoNormaAlterada.artigoDefinidoPrecedidoPreposicaoASingular);\n      } else {\n        if (this.textoTodos !== '') {\n          sb.append(this.textoTodos);\n        }\n        sb.append(' ');\n        sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      }\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdModificacaoDeNormaVigente extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[], private generoNormaAlterada: Genero, private textoTodos: string) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // parágrafo único ao art. 15-A da\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.separaDispositivosSeguidosDeOmissis(agrupador.getSequencias(this.dispositivos));\n\n    // Prefixo\n    if (isPrimeiro) {\n      sb.append('Dê-se nova redação ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append('dê-se nova redação ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      if (this.textoTodos !== '') {\n        sb.append(this.textoTodos);\n      }\n      sb.append(' ');\n      sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdSupressaoDeNormaVigente extends CmdEmdCombinavel {\n  constructor(\n    protected dispositivos: Dispositivo[],\n    private alteracao: Dispositivo,\n    private urnNormaAlterada: string,\n    private generoNormaAlterada: Genero,\n    private textoTodos: string\n  ) {\n    super(dispositivos);\n  }\n\n  public getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Suprimam-se ' : 'Suprima-se ');\n    } else {\n      if (!isPrimeiro) {\n        sb.append(isUltimo ? '; e ' : '; ');\n      }\n      sb.append(plural ? 'suprimam-se ' : 'suprima-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.O_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      if (this.textoTodos !== '') {\n        sb.append(this.textoTodos);\n      }\n      sb.append(' ');\n      sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n\n  private escreveDispositivoAlterado(sb: StringBuilder, d: Dispositivo): void {\n    sb.append(d.pronomePossessivoSingular);\n    sb.append(DispositivosWriterCmdEmd.getRotuloTipoDispositivo(d, false));\n    sb.append(' ');\n    sb.append(d.getNumeracaoParaComandoEmenda(d));\n    sb.append(CmdEmdUtil.getRotuloPais(d));\n  }\n}\n","import { hasFilhos } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Alteracoes } from '../model/dispositivo/blocoAlteracao';\nimport { Articulacao, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { generoFeminino, NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isOmissis } from '../model/dispositivo/tipo';\nimport { getGeneroUrnNorma, getNomeExtensoComDataExtenso } from '../model/lexml/documento/urnUtil';\nimport { StringBuilder } from '../util/string-util';\nimport { CmdEmdAdicaoANormaVigente } from './cmd-emd-adicao-a-norma-vigente';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdModificacaoDeNormaVigente } from './cmd-emd-modificacao-de-norma-vigente';\nimport { CmdEmdSupressaoDeNormaVigente } from './cmd-emd-supressao-norma-vigente';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\n\n/**\n * Comando de emenda que trata comandos de alteração de norma vigente.\n */\nexport class CmdEmdDispNormaVigente {\n  constructor(private alteracao: Articulacao) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    const sb = new StringBuilder();\n\n    const dispositivos = CmdEmdUtil.getDispositivosNaAlteracaoParaComando(this.alteracao);\n\n    const urnNormaAlterada = (this.alteracao as Alteracoes).base;\n    if (!urnNormaAlterada) {\n      return 'Não foi possível gerar o comando de emenda porque a norma alterada não foi informada.';\n    }\n\n    const generoNormaAlterada = getGeneroUrnNorma(urnNormaAlterada);\n\n    // let imprimirPrefixoESufixo = false;\n\n    // Combinar comandos\n    const comandos = new Array<CmdEmdCombinavel>();\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n\n    // Consideramos modificados os dispositivos já existentes na proposição e os que foram\n    // adicionados pela emenda, mas que já existiam na norma vigente.\n    const dispositivosModificados = dispositivos.filter(d => CmdEmdUtil.getDescricaoSituacaoParaComandoEmenda(d) === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n\n    // Consideramos adicionados os dispositivos adicionados pela emenda e que não existiam na\n    // norma vigente\n    const dispositivosAdicionados = dispositivos.filter(d => CmdEmdUtil.getDescricaoSituacaoParaComandoEmenda(d) === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n\n    const dispositivosReferenciados = dispositivosSuprimidos.concat(dispositivosModificados).concat(dispositivosAdicionados);\n    const qtdDispositivos = dispositivosReferenciados.length;\n    const temDispositivoMasculino = dispositivosReferenciados.reduce((tem, d) => tem || d.tipoGenero === 'masculino', false);\n    let textoTodos = '';\n    if (qtdDispositivos === 2) {\n      textoTodos = temDispositivoMasculino ? ', ambos' : ', ambas';\n    } else if (qtdDispositivos > 2) {\n      textoTodos = temDispositivoMasculino ? ', todos' : ', todas';\n    }\n\n    if (dispositivosSuprimidos.length) {\n      comandos.push(new CmdEmdSupressaoDeNormaVigente(dispositivosSuprimidos, this.alteracao, urnNormaAlterada, generoNormaAlterada, textoTodos));\n    }\n\n    if (dispositivosModificados.length) {\n      comandos.push(new CmdEmdModificacaoDeNormaVigente(dispositivosModificados, generoNormaAlterada, textoTodos));\n    }\n\n    if (dispositivosAdicionados.length) {\n      comandos.push(new CmdEmdAdicaoANormaVigente(dispositivosAdicionados, generoNormaAlterada, textoTodos));\n    }\n\n    comandos.sort(CmdEmdCombinavel.compare);\n\n    let i = 0;\n    const iUltimo = comandos.length - 1;\n    comandos.forEach(cmd => {\n      sb.append(cmd.getTexto(refGenericaProjeto, i === 0, i === iUltimo));\n      i++;\n    });\n\n    // da/à Lei nº 11.340, de 7 de agosto de 2006\n    this.escreveLei(sb, urnNormaAlterada);\n    const temDispositivoNovo = dispositivos.reduce((tem, d) => tem || d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO, false);\n    if (temDispositivoNovo) {\n      // , na forma proposta pelo art. 6º do Projeto\n      if (textoTodos !== '' && !sb.toString().includes(textoTodos)) {\n        sb.append(textoTodos);\n      } else {\n        sb.append(',');\n      }\n      sb.append(' na forma proposta ');\n    } else {\n      // , como propost(o/a)(s)\n      sb.append(', como ');\n      this.escreveProposto(\n        sb,\n        dispositivos.filter(d => !CmdEmdUtil.isTextoOmitido(d) || hasFilhos(d))\n      );\n    }\n    // pelo art. 6º do Projeto\n    sb.append(' ');\n    this.escreveDispositivoAlterado(sb, this.alteracao.pai!);\n    sb.append(' ');\n    sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n    sb.append(' ');\n    sb.append(refGenericaProjeto.nome);\n    if (this.temCitacao(dispositivosModificados, dispositivosAdicionados)) {\n      sb.append(', nos termos a seguir:');\n    } else {\n      sb.append('.');\n    }\n\n    return CmdEmdUtil.normalizaCabecalhoComandoEmenda(sb.toString());\n  }\n\n  private temCitacao(dispositivosModificados: Dispositivo[], dispositivosAdicionados: Dispositivo[]): boolean {\n    if (dispositivosModificados.length) {\n      return true;\n    }\n    return !!dispositivosAdicionados.find(d => !isOmissis(d));\n  }\n\n  private escreveDispositivoAlterado(sb: StringBuilder, d: Dispositivo): void {\n    sb.append('pel' + d.artigoDefinidoSingular.trim());\n    sb.append(' ');\n    sb.append(DispositivosWriterCmdEmd.getRotuloTipoDispositivo(d, false));\n    sb.append(' ');\n    sb.append(d.getNumeracaoParaComandoEmenda(d));\n    sb.append(CmdEmdUtil.getRotuloPais(d));\n  }\n\n  private escreveLei(sb: StringBuilder, urn: string): void {\n    sb.append(getNomeExtensoComDataExtenso(urn));\n  }\n\n  private escreveProposto(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    const plural = dispositivos.length > 1;\n    const feminino = dispositivos.filter(d => d.tipoGenero === generoFeminino.tipoGenero).length === dispositivos.length;\n    sb.append('propost' + (feminino ? 'a' : 'o') + (plural ? 's' : ''));\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { StringBuilder } from './../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class CmdEmdAdicao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    dispositivos = CmdEmdUtil.retiraPrimeirosFilhosAdicionadosAgrupador(dispositivos);\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Acrescente-se art. 7º-A ao Capítulo II do Projeto, com a seguinte redação:\n    // Acrescentem-se arts. 7º-A e 7º-B ao Capítulo II do Projeto, com a seguinte redação:\n    // Acrescente-se art. 2º-A antes do Capítulo I do Projeto, com a seguinte redação:\n    // Acrescentem-se art. 2º-A antes do Capítulo I e art. 2º-B ao Capítulo I do Projeto, com a\n    // seguinte redação:\n    // Acrescentem-se parágrafo único ao art. 1º e parágrafo único ao art. 2º do Projeto, com a\n    // seguinte redação:\n    // Acrescentem-se §§ 1º e 2º ao art. 1º e §§ 1º e 2º ao art. 2º do Projeto, com a seguinte\n    // redação:\n    // Acrescentem-se § 0 ao art. 9º, alínea “a” inciso I do § 4º do art. 9º e § 8º ao art. 9º\n    // do Projeto, com a seguinte redação:\n\n    // Agrupadores de artigo\n    // Acrescentem-se, antes do art. 3º da Medida Provisória, os seguintes Capítulos II e III:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    let sequencias = agrupador.getSequencias(this.dispositivos);\n    sequencias = this.trataLocalizacaoEmAgrupador(sequencias);\n\n    if (isPrimeiro && isUltimo && this.trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(sb, refGenericaProjeto, sequencias)) {\n      return sb.toString();\n    }\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Acrescentem-se ' : 'Acrescente-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'acrescentem-se ' : 'acrescente-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.ADICAO;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      const ultimaSequencia = sequencias[sequencias.length - 1];\n      const primeiroDosUltimos = ultimaSequencia.getPrimeiroDispositivo();\n      if (!isArtigo(primeiroDosUltimos) || ultimaSequencia.localizarEmAgrupador) {\n        sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n      } else {\n        sb.append(refGenericaProjeto.genero.artigoDefinidoPrecedidoPreposicaoASingular);\n      }\n      sb.append(refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ', com a seguinte redação:' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n\n  private trataLocalizacaoEmAgrupador(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    for (const sequencia of sequencias) {\n      const primeiro = sequencia.getPrimeiroDispositivo();\n      if (isArtigo(primeiro)) {\n        ret.push(...this.trataLocalizacaoEmAgrupadorSequencia(sequencia));\n      } else {\n        ret.push(sequencia);\n      }\n    }\n\n    return ret;\n  }\n\n  private trataLocalizacaoEmAgrupadorSequencia(sequencia: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    // Junta todos os artigos/agrupadores dos ranges da sequencia em uma única lista\n    const dispositivos = new Array<Dispositivo>();\n    for (const range of sequencia.getRanges()) {\n      dispositivos.push(...range.getDispositivos());\n    }\n\n    // Verifica a necessidade de reagrupar\n    let reagrupar = false;\n    for (const disp of dispositivos) {\n      if (this.isInclusaoDeArtigoProximoAAgrupador(disp)) {\n        reagrupar = true;\n        break;\n      }\n    }\n\n    // Se não for necessário repassa a sequência como veio\n    if (!reagrupar) {\n      sequencias.push(sequencia);\n      return sequencias;\n    }\n\n    // Vamos reagrupá-los em ranges dentro do mesmo pai\n    let s = new SequenciaRangeDispositivos(); // Nova sequência\n    s.localizarEmAgrupador = true;\n    sequencias.push(s);\n\n    let r = new RangeDispositivos(); // Novo range\n    s.add(r);\n\n    let artAnterior: Dispositivo | undefined = undefined;\n    for (const disp of dispositivos) {\n      if (!r.isVazio()) {\n        if (disp.pai !== (artAnterior as Dispositivo).pai) {\n          s = new SequenciaRangeDispositivos();\n          s.localizarEmAgrupador = true;\n          sequencias.push(s);\n\n          r = new RangeDispositivos();\n          s.add(r);\n        } else if (CmdEmdUtil.getDispositivoIrmaoPosterior(artAnterior as Dispositivo) !== disp) {\n          r = new RangeDispositivos();\n          s.add(r);\n        }\n      }\n\n      r.add(disp);\n\n      artAnterior = disp;\n    }\n\n    // Quebra ranges com 2 dispositivos em duas\n    for (const s2 of sequencias) {\n      s2.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s2.getRanges()));\n    }\n\n    return sequencias;\n  }\n\n  private isInclusaoDeArtigoProximoAAgrupador(artigo: Dispositivo): boolean {\n    return this.isInclusaoNoInicioDeAgrupador(artigo) || this.isInclusaoImediatamenteAntesDeAgrupador(artigo);\n  }\n\n  private isInclusaoNoInicioDeAgrupador(artigo: Dispositivo): boolean {\n    // Dentro de agrupador de artigo\n    const pai = artigo.pai as Dispositivo;\n    if (isDispositivoRaiz(pai) || !isAgrupador(pai)) {\n      return false;\n    }\n\n    // Verifica se ele é o primeiro artigo do pai\n    return pai.filhos.indexOf(artigo) === 0;\n  }\n\n  private isInclusaoImediatamenteAntesDeAgrupador(disp: Dispositivo): boolean {\n    // TODO Testar também último artigo do projeto seguido de agrupador\n\n    // Verifica se o próximo artigo está no mesmo agrupador\n    const pai = disp.pai;\n    const irmao = CmdEmdUtil.getDispositivoIrmaoPosterior(disp);\n\n    // Se existe próximo artigo com outro pai, é porque existe um agrupador entre eles\n    return !!irmao && pai !== irmao.pai;\n  }\n\n  /*\n  Caso de acréscimo apenas de agrupadores consecutivos:\n\n  Acrescente-se, antes do art. 3º da Medida Provisória, o seguinte Capítulo II:\n  Acrescentem-se, antes do art. 3º da Medida Provisória, os seguintes Capítulos II e III:\n  Acrescentem-se, antes do art. 3º da Medida Provisória, os seguintes Capítulos II a IV:\n  */\n  trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(sb: StringBuilder, refGenericaProjeto: NomeComGenero, sequencias: SequenciaRangeDispositivos[]): boolean {\n    // console.log(sequencias);\n    const sequencia = sequencias[0];\n    const dispositivo = sequencia.getPrimeiroDispositivo();\n    if (sequencias.length === 1 && isAgrupadorNaoArticulacao(dispositivo)) {\n      // Verifica apenas uma range ou duas ranges de um dispositivo sequenciais.\n      const ranges = sequencia.getRanges();\n      if (\n        ranges.length === 1 ||\n        (ranges.length === 2 &&\n          ranges[0].getDispositivos().length === 1 &&\n          ranges[1].getDispositivos().length === 1 &&\n          CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(ranges[0].getPrimeiro(), ranges[1].getPrimeiro()))\n      ) {\n        const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n        sb.append(plural ? 'Acrescentem-se,' : 'Acrescente-se,');\n        sb.append(DispositivosWriterCmdEmd.getLocalizacaoAgrupadores(ranges));\n        sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n        sb.append(' ');\n        sb.append(refGenericaProjeto.nome);\n        sb.append(', ');\n        sb.append(dispositivo.artigoDefinido);\n        sb.append(plural ? 's seguintes ' : ' seguinte ');\n        const dispositivosWriter = new DispositivosWriterCmdEmd();\n        sb.append(dispositivosWriter.getTexto(sequencias, false));\n        sb.append(':');\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","import { isArtigo, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { removeEspacosDuplicados, StringBuilder } from '../util/string-util';\n\nexport class CmdEmdAdicaoDispositivosOndeCouber {\n  constructor(private dispositivos: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    // \"Acrescente-se, onde couber, no Projeto o seguinte artigo:\"\n    // \"Acrescentem-se, onde couber, no Projeto os seguintes artigos:\"\n\n    if (!this.dispositivos.length) {\n      return '';\n    }\n\n    const strRefProjeto = refGenericaProjeto.genero.contracaoEmArtigoDefinidoSingular + ' ' + refGenericaProjeto.nome;\n\n    const qtdArtigos = this.dispositivos.filter(d => isArtigo(d) && !isAgrupadorNaoArticulacao(d.pai!)).length;\n    const qtdAgrupadores = this.dispositivos.filter(d => isAgrupadorNaoArticulacao(d)).length;\n\n    const sb = new StringBuilder();\n\n    const pluralTodos = qtdArtigos + qtdAgrupadores > 1;\n    if (pluralTodos) {\n      sb.append('Acrescentem-se, onde couber, ' + strRefProjeto + ' '); //os seguintes artigos:';\n    } else {\n      sb.append('Acrescente-se, onde couber, ' + strRefProjeto + ' ');\n    }\n\n    const temArtigos = qtdArtigos > 0;\n    if (temArtigos) {\n      sb.append(pluralTodos ? 'os seguintes ' : 'o seguinte ');\n      sb.append(qtdArtigos > 1 ? 'artigos' : 'artigo');\n    }\n\n    if (qtdAgrupadores > 0) {\n      const agrupador = this.dispositivos.find(d => isAgrupadorNaoArticulacao(d))!;\n      if (temArtigos) {\n        sb.append(' e ');\n        sb.append(qtdAgrupadores > 1 ? agrupador.descricaoPlural?.toLocaleLowerCase() : agrupador.descricao?.toLocaleLowerCase());\n      } else if (qtdAgrupadores > 1) {\n        sb.append(agrupador.artigoDefinidoPlural + ' seguintes ' + agrupador.descricaoPlural?.toLocaleLowerCase());\n      } else {\n        sb.append(agrupador.artigoDefinido + ' seguinte ' + agrupador.descricao?.toLocaleLowerCase());\n      }\n    }\n\n    sb.append(':');\n\n    return removeEspacosDuplicados(sb.toString());\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdModificacao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Dê-se ao art. 7º-A do Capítulo II do Projeto a seguinte redação:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    if (isPrimeiro) {\n      sb.append('Dê-se ');\n      if (!isUltimo) {\n        sb.append('nova redação ');\n      }\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append('dê-se nova redação ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias).trim());\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ' a seguinte redação:' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdSupressao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Suprima-se o § 1º do art. 9º do Projeto.\n    // Suprima-se o inciso I do § 6º do art. 9º do Projeto.\n    // Suprimam-se os §§ 1º e 2º do art. 9º do Projeto.\n    // Suprimam-se os §§ 1º, 3º e 5º do art. 9º do Projeto.\n    // Suprimam-se os §§ 1º a 3º do art. 9º do Projeto.\n    // Suprimam-se os §§ 3º, 4º e 7º do art. 9º do Projeto.\n    // Suprimam-se os §§ 1º, 3º a 5º e 7º do art. 9º do Projeto.\n    // Suprima-se o parágrafo único do art. 8º do Projeto.\n    // Suprimam-se os §§ 1º, 3º a 5º e o inciso I do § 6º do art. 9º do Projeto.\n    // Suprimam-se o inciso IX do caput do art. 2º, o art. 3º, o parágrafo único do art. 8º e o\n    // art. 9º do Projeto.\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Suprimam-se ' : 'Suprima-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'suprimam-se ' : 'suprima-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.TODO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? '.' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { CmdEmdAdicao } from './cmd-emd-adicao';\nimport { CmdEmdAdicaoDispositivosOndeCouber } from './cmd-emd-adicao-dispositivos-onde-couber';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdModificacao } from './cmd-emd-modificacao';\nimport { CmdEmdSupressao } from './cmd-emd-supressao';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\n/**\n * Comando de emenda que trata supressão, modificação e adição de dispositivos do projeto.\n */\nexport class CmdEmdDispPrj {\n  constructor(private dispositivosEmenda: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    let texto = '';\n\n    const dispositivos = CmdEmdUtil.getDispositivosComando(this.dispositivosEmenda);\n\n    const artigosOndeCouber = dispositivos.filter(d => {\n      return d.situacao instanceof DispositivoAdicionado && (d.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n    });\n    // Se for caso de artigos onde couber, não pode ter outro tipo de alteração\n    if (artigosOndeCouber.length) {\n      if (artigosOndeCouber.length < dispositivos.length) {\n        throw new Error('Adição de artigos onde couber e outras alterações na mesma emenda.');\n      }\n\n      const cmd = new CmdEmdAdicaoDispositivosOndeCouber(artigosOndeCouber);\n      return cmd.getTexto(refGenericaProjeto);\n    }\n\n    // Combinar comandos\n    const comandos: CmdEmdCombinavel[] = [];\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    if (dispositivosSuprimidos.length) {\n      comandos.push(new CmdEmdSupressao(dispositivosSuprimidos));\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      comandos.push(new CmdEmdModificacao(dispositivosModificados));\n    }\n\n    const dispositivosAdicionados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n    if (dispositivosAdicionados.length) {\n      comandos.push(new CmdEmdAdicao(dispositivosAdicionados));\n    }\n\n    comandos.sort(CmdEmdCombinavel.compare);\n\n    let i = 0;\n    const iUltimo = comandos.length - 1;\n    comandos.forEach(cmd => {\n      texto += cmd.getTexto(refGenericaProjeto, i === 0, i === iUltimo);\n      i++;\n    });\n\n    return CmdEmdUtil.normalizaCabecalhoComandoEmenda(texto);\n  }\n}\n","import { SubstituicaoTermo } from '../model/emenda/emenda';\nimport { getRefGenericaProjeto } from '../model/lexml/documento/urnUtil';\n\nexport class CmdEmdSubstituicaoTermo {\n  constructor(private substituicaoTermo: SubstituicaoTermo, private urn: string) {}\n\n  private getComplementoFlexoes(flexaoGenero: boolean, flexaoNumero: boolean): string {\n    const flexoes: string[] = [];\n    flexaoGenero && flexoes.push('gênero');\n    flexaoNumero && flexoes.push('número');\n    return flexoes.length ? `, fazendo-se as flexões de ${flexoes.join(' e ')} necessárias` : '';\n  }\n\n  getTexto(): string {\n    const { tipo, termo, novoTermo, flexaoGenero, flexaoNumero } = this.substituicaoTermo;\n    const refProjeto = getRefGenericaProjeto(this.urn);\n    const artigoDefinido = tipo.toLowerCase() == 'número' ? 'o' : 'a';\n    return `Substitua-se n${refProjeto.genero.artigoDefinido} ${refProjeto.nome} ${artigoDefinido} ${tipo.toLowerCase()} “${termo}” por “${novoTermo}”${this.getComplementoFlexoes(\n      flexaoGenero,\n      flexaoNumero\n    )}.`;\n  }\n}\n","import { Articulacao, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { ComandoEmenda, ItemComandoEmenda, SubstituicaoTermo } from '../model/emenda/emenda';\nimport { getArticulacao } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao, isArticulacao } from './../model/dispositivo/tipo';\nimport { getRefGenericaProjeto } from './../model/lexml/documento/urnUtil';\nimport { buscaNaHierarquiaDispositivos, isArticulacaoAlteracao, isDispositivoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoDeNormaVigente } from './citacao-cmd-de-norma-vigente';\nimport { CitacaoComandoDispPrj } from './citacao-cmd-disp-prj';\nimport { CmdEmdDispNormaVigente } from './cmd-emd-disp-norma-vigente';\nimport { CmdEmdDispPrj } from './cmd-emd-disp-prj';\nimport { CmdEmdSubstituicaoTermo } from './cmd-emd-substituicao-termo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nconst isInstanceOfSubstituicaoTermo = (payload: any = {}): boolean => 'termo' in payload;\n\nexport class ComandoEmendaBuilder {\n  constructor(private urn: string, private payload: Articulacao | SubstituicaoTermo) {}\n\n  getComandoEmenda(): ComandoEmenda {\n    if (isInstanceOfSubstituicaoTermo(this.payload)) {\n      return this.getComandoEmendaSubstituicaoTermo();\n    } else {\n      return this.getComandoEmendaArticulacao();\n    }\n  }\n\n  private getComandoEmendaSubstituicaoTermo(): ComandoEmenda {\n    const ret = new ComandoEmenda();\n    const cmdEmdSubstituicaoTermo = new CmdEmdSubstituicaoTermo(this.payload as SubstituicaoTermo, this.urn);\n    ret.comandos.push(new ItemComandoEmenda(cmdEmdSubstituicaoTermo.getTexto(), ''));\n    return ret;\n  }\n\n  private getComandoEmendaArticulacao(): ComandoEmenda {\n    const articulacao = this.payload as Articulacao;\n    const ret = new ComandoEmenda();\n\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(articulacao);\n\n    const list = this.getDispositivosRepresentativosDeCadaComando(dispositivosEmenda);\n    list.sort(DispositivoComparator.compare);\n\n    if (!list.length) {\n      return ret;\n    }\n\n    const refProjeto = getRefGenericaProjeto(this.urn);\n\n    list.forEach(d => {\n      let cabecalho: string;\n      let citacao: string;\n      let complemento: string | undefined = undefined;\n\n      if (isArticulacao(d)) {\n        const cmd = new CmdEmdDispNormaVigente(d as Articulacao);\n        cabecalho = cmd.getTexto(refProjeto);\n\n        const cit = new CitacaoComandoDeNormaVigente();\n        citacao = cit.getTexto(d);\n\n        complemento = this.getTextoComplementoDispAlteracao(d);\n      } else {\n        const cmd = new CmdEmdDispPrj(dispositivosEmenda);\n        cabecalho = cmd.getTexto(refProjeto);\n\n        const cit = new CitacaoComandoDispPrj(articulacao);\n        citacao = cit.getTexto();\n\n        complemento = this.getTextoComplementoDispProposicao(dispositivosEmenda);\n      }\n\n      const item = new ItemComandoEmenda(cabecalho, citacao);\n      if (complemento) {\n        item.complemento = complemento;\n      }\n      ret.comandos.push(item);\n    });\n\n    if (ret.comandos.length > 1) {\n      ret.cabecalhoComum = this.montaCabecalhoComum(refProjeto, ret.comandos.length);\n      ret.comandos.forEach((c, i) => {\n        c.rotulo = `Item ${i + 1} –`;\n      });\n    }\n\n    return ret;\n  }\n\n  private getDispositivosRepresentativosDeCadaComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n\n    let temDispositivoDeProjeto = false;\n\n    dispositivosEmenda.forEach(d => {\n      const articulacao = getArticulacao(d);\n      // Separa alterações\n      if (articulacao && isArticulacaoAlteracao(articulacao)) {\n        if (\n          !ret.includes(articulacao) &&\n          articulacao.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          articulacao.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n        ) {\n          ret.push(articulacao);\n        }\n      } else if (!temDispositivoDeProjeto) {\n        temDispositivoDeProjeto = true;\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n\n  montaCabecalhoComum(refProjeto: NomeComGenero, qtdItens: number): string {\n    return `Dê-se nova redação ${refProjeto.genero.artigoDefinidoPrecedidoPreposicaoASingular} ${refProjeto.nome} nos termos dos itens ${this.listarItens(qtdItens)} a seguir.`;\n  }\n\n  listarItens(qtdItens: number): string {\n    return Array(qtdItens)\n      .fill(0)\n      .map((_, i) => i + 1)\n      .join(', ')\n      .replace(/, (\\d+?)$/, ' e $1');\n  }\n\n  getTextoComplementoDispProposicao(dispositivosNaoOriginais: Dispositivo[]): string | undefined {\n    // Complemento renumeração\n    const adicionadosProposicao = dispositivosNaoOriginais.filter(\n      d =>\n        !isDispositivoAlteracao(d) &&\n        d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        (d.situacao as DispositivoAdicionado).tipoEmenda !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n        d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    );\n    if (adicionadosProposicao.length && CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(adicionadosProposicao)) {\n      return 'Os dispositivos acima propostos e adjacentes deverão ser devidamente renumerados no momento da consolidação das emendas ao texto da proposição pela Redação Final.';\n    }\n\n    return undefined;\n  }\n\n  getTextoComplementoDispAlteracao(articulacao: Dispositivo): string | undefined {\n    // Complemento supressão de agrupador em bloco de alteração\n    const temAgrupadorSuprimido = buscaNaHierarquiaDispositivos(articulacao, d => {\n      return isAgrupadorNaoArticulacao(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n    });\n\n    if (temAgrupadorSuprimido) {\n      return 'O comando de supressão do agrupador não se refere aos dispositivos a ele subordinados.';\n    }\n\n    return undefined;\n  }\n}\n","import { isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport {\n  isDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n  getDispositivoCabecaAlteracao,\n  getDispositivoAnteriorDireto,\n  getArtigo,\n  isDispositivoAlteracao,\n  getArticulacao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo, isCaput, isOmissis } from '../model/dispositivo/tipo';\nimport {\n  DispositivoEmenda,\n  DispositivoEmendaAdicionado,\n  DispositivoEmendaModificado,\n  DispositivoEmendaSuprimido,\n  DispositivosEmenda,\n  ModoEdicaoEmenda,\n} from '../model/emenda/emenda';\nimport { TEXTO_OMISSIS } from '../model/lexml/conteudo/textoOmissis';\nimport { isArticulacaoAlteracao, isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { buildId } from '../model/lexml/util/idUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { Alteracoes } from '../model/dispositivo/blocoAlteracao';\n\nexport class DispositivosEmendaBuilder {\n  constructor(private tipoEmenda: ModoEdicaoEmenda, private urn: string, private articulacao: Articulacao) {}\n\n  getDispositivosEmenda(): DispositivosEmenda {\n    const dispositivos = new DispositivosEmenda();\n    this.preencheDispositivos(dispositivos);\n    return dispositivos;\n  }\n\n  private preencheDispositivos(dispositivosEmenda: DispositivosEmenda): void {\n    const dispositivos = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao);\n\n    const dispositivosSuprimidos = dispositivos.filter(\n      d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n    );\n    if (dispositivosSuprimidos.length) {\n      for (const d of dispositivosSuprimidos) {\n        const ds = new DispositivoEmendaSuprimido();\n        ds.tipo = this.getTipoDispositivoParaEmenda(d);\n        ds.id = d.id!;\n        ds.rotulo = d.rotulo;\n        this.addUrnNormaAlteradaSeNecessario(d, ds);\n        dispositivosEmenda.dispositivosSuprimidos.push(ds);\n      }\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      for (const d of dispositivosModificados) {\n        const dm = new DispositivoEmendaModificado();\n        if (isArtigo(d)) {\n          const caput = (d as Artigo).caput!;\n          dm.tipo = this.getTipoDispositivoParaEmenda(caput);\n          dm.id = caput.id!;\n          dm.rotulo = d.rotulo;\n          dm.texto = this.trataTexto(caput.texto);\n        } else {\n          dm.tipo = this.getTipoDispositivoParaEmenda(d);\n          dm.id = d.id!;\n          dm.rotulo = d.rotulo;\n          dm.texto = this.trataTexto(d.texto);\n        }\n        if (d.isDispositivoAlteracao) {\n          this.preencheAtributosAlteracao(d, dm);\n        }\n        this.addUrnNormaAlteradaSeNecessario(d, dm);\n        dispositivosEmenda.dispositivosModificados.push(dm);\n      }\n    }\n\n    const dispositivosAdicionados = this.separaAgrupadores(\n      dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !this.isDispositivoFilhoDeAdicionado(d))\n    );\n\n    if (dispositivosAdicionados.length) {\n      for (const d of dispositivosAdicionados) {\n        const da = this.criaDispositivoEmendaAdicionado(d);\n        this.addUrnNormaAlteradaSeNecessario(d, da);\n        dispositivosEmenda.dispositivosAdicionados.push(da);\n      }\n    }\n  }\n\n  private separaAgrupadores(disps: Dispositivo[]): Dispositivo[] {\n    const fSeparacao = (d: Dispositivo): Dispositivo[] => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        return [];\n      }\n      if (isAgrupadorNaoArticulacao(d)) {\n        return [d, ...d.filhos.flatMap(f => fSeparacao(f))];\n      }\n      return [d];\n    };\n\n    return disps.flatMap(d => fSeparacao(d));\n  }\n\n  private isDispositivoFilhoDeAdicionado(d: Dispositivo): boolean {\n    return !!(\n      d.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ||\n      (isCaput(d.pai!) && d.pai!.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) ||\n      (d.isDispositivoAlteracao && isArtigo(d) && d.pai!.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n    );\n  }\n\n  private criaDispositivoEmendaAdicionado(d: Dispositivo, posicionar = true): DispositivoEmendaAdicionado {\n    const da = new DispositivoEmendaAdicionado();\n\n    da.tipo = this.getTipoDispositivoParaEmenda(d);\n\n    if (!d.id) {\n      d.id = buildId(d);\n    }\n    da.id = d.id;\n\n    if (!isCaput(d) && !isArticulacaoAlteracao(d) && !isOmissis(d)) {\n      da.rotulo = d.rotulo;\n    }\n    if (!isArtigo(d) && !isArticulacaoAlteracao(d)) {\n      da.texto = this.trataTexto(d.texto);\n    }\n\n    if (posicionar) {\n      if (isCaput(d) || isArticulacaoAlteracao(d)) {\n        da.idPai = d.pai?.id;\n      } else if (isAgrupadorNaoArticulacao(d)) {\n        da.idPosicaoAgrupador = this.calculaPosicaoAgrupador(d);\n      } else {\n        const irmaos = CmdEmdUtil.getFilhosEstiloLexML(d.pai!);\n        if (d !== irmaos[0]) {\n          da.idIrmaoAnterior = irmaos[irmaos.indexOf(d) - 1].id;\n        } else if (!isDispositivoRaiz(d.pai!)) {\n          da.idPai = d.pai?.id;\n        }\n      }\n    }\n\n    if (isArticulacaoAlteracao(d)) {\n      const base = (d as Alteracoes).base;\n      if (base) {\n        da.urnNormaAlterada = base;\n      }\n    } else if (d.isDispositivoAlteracao) {\n      da.existeNaNormaAlterada = (d.situacao as DispositivoAdicionado)?.existeNaNormaAlterada;\n      this.preencheAtributosAlteracao(d, da);\n    }\n\n    // Adiciona filhos\n    const filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    // TODO - As alterações deveriam estar listadas nos getFilhosEstiloLexML (tem que rever todo o código que usa esse método)\n    if (isCaput(d) && d.pai!.alteracoes) {\n      filhos.push(d.pai!.alteracoes);\n    }\n    if (filhos.length) {\n      da.filhos = [];\n      filhos.forEach(f => {\n        // Pode ocorrer do filho nao ser um dispositivo adicionado no caso de filho de agrupador de artigo.\n        if (isCaput(f) || isArticulacaoAlteracao(f) || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          da.filhos!.push(this.criaDispositivoEmendaAdicionado(f, false));\n        }\n      });\n    }\n\n    return da;\n  }\n\n  private calculaPosicaoAgrupador(d: Dispositivo): string | undefined {\n    const dPos = getDispositivoAnteriorDireto(d);\n    if (!dPos || isDispositivoRaiz(dPos)) {\n      return undefined;\n    }\n    if (isAgrupadorNaoArticulacao(dPos) || isArtigo(dPos)) {\n      return dPos.id;\n    }\n    return getArtigo(dPos).id;\n  }\n\n  private getTipoDispositivoParaEmenda(d: Dispositivo): string {\n    return isArticulacao(d) ? 'Alteracao' : d.tipo;\n  }\n\n  private preencheAtributosAlteracao(d: Dispositivo, dm: DispositivoEmendaModificado): void {\n    if (!isOmissis(d) && dm.texto && dm.texto.indexOf(TEXTO_OMISSIS) >= 0) {\n      dm.textoOmitido = true;\n    }\n    if (isDispositivoCabecaAlteracao(d)) {\n      dm.abreAspas = true;\n    }\n    if (isUltimaAlteracao(d)) {\n      dm.fechaAspas = true;\n      const cabecaAlteracao = getDispositivoCabecaAlteracao(d);\n      dm.notaAlteracao = cabecaAlteracao.notaAlteracao as any;\n    }\n  }\n\n  private trataTexto(str: string): string {\n    if (str.indexOf(TEXTO_OMISSIS) >= 0) {\n      return TEXTO_OMISSIS;\n    }\n    return str.trim();\n  }\n\n  private addUrnNormaAlteradaSeNecessario(d: Dispositivo, de: DispositivoEmenda): void {\n    if (isDispositivoAlteracao(d)) {\n      const base = getArticulacao(d)?.pai?.alteracoes?.base;\n      if (base) {\n        de.urnNormaAlterada = base;\n      }\n    }\n  }\n}\n","import { isDispositivoAlteracao, isUltimaAlteracao, getDispositivoCabecaAlteracao, isDispositivoCabecaAlteracao } from './../../hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isAgrupador, isArtigo, isCaput, isOmissis } from '../../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { buildHref, buildId, buildIdAlteracao } from '../../util/idUtil';\nimport { isNorma, ProjetoNorma } from '../projetoNorma';\n\nexport const buildJsonixFromProjetoNorma = (projetoNorma: ProjetoNorma, urn: string): any => {\n  const resultado = montaCabecalho(urn);\n\n  resultado.value.projetoNorma = montaProjetoNorma(projetoNorma);\n\n  return resultado;\n};\n\nexport const buildJsonixArticulacaoFromProjetoNorma = (articulacaoProjetoNorma: Articulacao): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(articulacaoProjetoNorma, { articulacao: {} }),\n  };\n\n  return articulacao;\n};\n\nconst montaCabecalho = (urn: string): any => {\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'LexML',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}LexML',\n      string: '{http://www.lexml.gov.br/1.0}LexML',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.LexML',\n      metadado: {\n        TYPE_NAME: 'br_gov_lexml__1.Metadado',\n        identificacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n          urn: urn,\n        },\n      },\n    },\n  };\n};\n\nconst montaProjetoNorma = (projetoNorma: any): any => {\n  const p = {\n    TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n  };\n\n  p[isNorma(projetoNorma) ? 'norma' : 'projeto'] = {\n    TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n    parteInicial: montaParteInicial(projetoNorma),\n    articulacao: montaArticulacao(projetoNorma),\n  };\n\n  return p;\n};\n\nconst montaParteInicial = (projetoNorma: any): any => {\n  return {\n    TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n    epigrafe: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'epigrafe',\n      content: projetoNorma.epigrafe,\n    },\n    ementa: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'ementa',\n      content: projetoNorma.ementa,\n    },\n    preambulo: {\n      TYPE_NAME: 'br_gov_lexml__1.TextoType',\n      id: 'preambulo',\n      p: projetoNorma.preambulo,\n    },\n  };\n};\n\nconst montaArticulacao = (projetoNorma: any): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(projetoNorma.articulacao, projetoNorma.articulacao),\n  };\n\n  return articulacao;\n};\n\nconst buildTree = (dispositivo: Dispositivo, obj: any): any => {\n  let tree;\n  if (isAgrupador(dispositivo)) {\n    tree = obj.lXhier = [];\n  } else {\n    tree = obj.lXcontainersOmissis = [];\n  }\n\n  if (isArtigo(dispositivo)) {\n    const node = buildNode((dispositivo as Artigo).caput!);\n    buildAlteracaoSeNecessario(dispositivo, node.value);\n\n    tree.push(node);\n\n    buildFilhos(\n      dispositivo.filhos?.filter(f => !isCaput(f.pai!)),\n      tree\n    );\n\n    buildTree((dispositivo as Artigo).caput!, node.value);\n  } else {\n    buildFilhos(dispositivo.filhos, tree);\n  }\n\n  return tree;\n};\n\nconst buildAlteracaoSeNecessario = (dispositivo: Dispositivo, node: any): void => {\n  if (dispositivo.hasAlteracao()) {\n    node['alteracao'] = {\n      TYPE_NAME: 'br_gov_lexml__1.Alteracao',\n      base: '',\n      id: '',\n      content: [],\n    };\n\n    node.alteracao.base = dispositivo.alteracoes?.base ?? '';\n    node.alteracao.id = buildIdAlteracao((dispositivo as Artigo).caput!);\n\n    dispositivo.alteracoes!.filhos?.forEach(filho => {\n      const n = buildNode(filho);\n\n      node.alteracao.content.push(n);\n\n      buildTree(filho, n.value);\n    });\n  }\n};\n\nconst buildFilhos = (filhos: Dispositivo[], tree: any): any => {\n  filhos?.forEach(filho => {\n    const node = buildNode(filho);\n    tree.push(node);\n\n    buildTree(filho, node.value);\n  });\n};\n\nconst buildNode = (dispositivo: Dispositivo): any => {\n  const node = {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: dispositivo.tipo,\n      prefix: '',\n      key: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n      string: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n    },\n  };\n\n  buildDispositivo(dispositivo, node.value);\n\n  return node;\n};\n\nconst buildDispositivo = (dispositivo: Dispositivo, value: any): void => {\n  value['href'] = isCaput(dispositivo) ? buildHref(dispositivo.pai!) + '_' + buildHref(dispositivo) : buildHref(dispositivo);\n\n  value['id'] = buildId(dispositivo);\n\n  if (isDispositivoCabecaAlteracao(dispositivo)) {\n    value['abreAspas'] = 's';\n    value.rotulo = dispositivo.rotulo;\n  } else if (!isCaput(dispositivo) && !isOmissis(dispositivo)) {\n    value.rotulo = dispositivo.rotulo;\n  }\n\n  const dispositivoTemp = isCaput(dispositivo) ? dispositivo.pai! : dispositivo;\n  if (isDispositivoAlteracao(dispositivoTemp) && isUltimaAlteracao(dispositivoTemp)) {\n    value['fechaAspas'] = 's';\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivoTemp);\n    value['notaAlteracao'] = cabecaAlteracao.notaAlteracao || 'NR';\n  }\n\n  if (isAgrupador(dispositivo)) {\n    value.nomeAgrupador = {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      content: buildContent(dispositivo),\n    };\n  } else if (!isArtigo(dispositivo)) {\n    if (dispositivo.texto === TEXTO_OMISSIS) {\n      value['textoOmitido'] = 's';\n    } else {\n      value['p'] = [{ TYPE_NAME: 'br_gov_lexml__1.GenInline', content: buildContent(dispositivo) }];\n    }\n  }\n};\n\nconst buildContent = (dispositivo: Dispositivo): any[] => {\n  const regex = /<a[^>]+href=\"(.*?)\"[^>]*>(.*?)<\\/a>/gi;\n  const result: any[] = [];\n\n  const ocorrencias = dispositivo.texto.match(regex);\n\n  if (!ocorrencias) {\n    const fim = dispositivo.texto.indexOf('” (NR)');\n    result.push(dispositivo.texto.substring(0, fim === -1 ? undefined : fim));\n  } else if (!dispositivo.texto.startsWith(ocorrencias[0])) {\n    result.push(dispositivo.texto.substring(0, dispositivo.texto.indexOf(ocorrencias![0])));\n  }\n\n  ocorrencias?.forEach((m, i) => {\n    const http = m.match(regex) ? m : '';\n\n    result.push(buildSpan(http ?? ''));\n\n    const from = dispositivo.texto?.indexOf(m) + m.length;\n\n    if (from < dispositivo.texto.length - 1) {\n      const to = ocorrencias[i + 1] ? dispositivo.texto.indexOf(ocorrencias[i + 1]) : dispositivo.texto.length;\n      result.push(\n        dispositivo.texto\n          .substring(from, to)\n          ?.replace(/strong>/gi, 'b>')\n          .replace(/em>/gi, 'i>')\n      );\n    }\n  });\n  return result;\n};\n\nconst buildSpan = (m: string): any => {\n  const resultHref = m.match(/href=\"(.*?)\"*>/i);\n  const href = resultHref && resultHref[1] ? resultHref[1] : '';\n\n  const contentHref = m.match(/<a[^>]+href=\".*?\"[^>]*>(.*?)<\\/a>/);\n  const content = contentHref && contentHref[1] ? [contentHref[1]?.trim()] : [''];\n\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'span',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}span',\n      string: '{http://www.lexml.gov.br/1.0}span',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      href,\n      content,\n    },\n  };\n};\n","export const DOCUMENTO_PADRAO = {\n  name: {\n    namespaceURI: 'http://www.lexml.gov.br/1.0',\n    localPart: 'LexML',\n    prefix: '',\n    key: '{http://www.lexml.gov.br/1.0}LexML',\n    string: '{http://www.lexml.gov.br/1.0}LexML',\n  },\n  value: {\n    TYPE_NAME: 'br_gov_lexml__1.LexML',\n    metadado: {\n      TYPE_NAME: 'br_gov_lexml__1.Metadado',\n      identificacao: {\n        TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n        urn: '',\n      },\n    },\n    projetoNorma: {\n      TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n      norma: {\n        TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n        parteInicial: {\n          TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n          epigrafe: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'epigrafe',\n            content: [''],\n          },\n          ementa: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'ementa',\n            content: [''],\n          },\n          preambulo: {\n            TYPE_NAME: 'br_gov_lexml__1.TextoType',\n            id: 'preambulo',\n            p: [\n              {\n                TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                content: [''],\n              },\n            ],\n          },\n        },\n        articulacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n          lXhier: [\n            {\n              name: {\n                namespaceURI: 'http://www.lexml.gov.br/1.0',\n                localPart: 'Artigo',\n                prefix: '',\n                key: '{http://www.lexml.gov.br/1.0}Artigo',\n                string: '{http://www.lexml.gov.br/1.0}Artigo',\n              },\n              value: {\n                TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                id: 'art1',\n                rotulo: 'Art. 1º',\n                lXcontainersOmissis: [\n                  {\n                    name: {\n                      namespaceURI: 'http://www.lexml.gov.br/1.0',\n                      localPart: 'Caput',\n                      prefix: '',\n                      key: '{http://www.lexml.gov.br/1.0}Caput',\n                      string: '{http://www.lexml.gov.br/1.0}Caput',\n                    },\n                    value: {\n                      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                      id: 'art1_cpt',\n                      p: [\n                        {\n                          TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                          content: [''],\n                        },\n                      ],\n                    },\n                  },\n                ],\n              },\n            },\n          ],\n        },\n      },\n    },\n  },\n};\n","import { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\n\nimport { shoelaceLightThemeStyles } from '../assets/css/shoelace.theme.light.css';\nimport { ComandoEmendaBuilder } from '../emenda/comando-emenda-builder';\nimport { DispositivosEmendaBuilder } from '../emenda/dispositivos-emenda-builder';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { ComandoEmenda, ModoEdicaoEmenda } from '../model/emenda/emenda';\nimport { aplicarAlteracoesEmendaAction } from '../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { openArticulacaoAction } from '../model/lexml/acao/openArticulacaoAction';\nimport { buildJsonixArticulacaoFromProjetoNorma } from '../model/lexml/documento/conversor/buildJsonixFromProjetoNorma';\nimport { buildProjetoNormaFromJsonix } from '../model/lexml/documento/conversor/buildProjetoNormaFromJsonix';\nimport { DOCUMENTO_PADRAO } from '../model/lexml/documento/modelo/documentoPadrao';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivosEmenda } from './../model/emenda/emenda';\nimport { ProjetoNorma } from './../model/lexml/documento/projetoNorma';\nimport { rootStore } from './../redux/store';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { Revisao } from '../model/revisao/revisao';\n\n@customElement('lexml-eta')\nexport class LexmlEtaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  private modo: any = '';\n\n  private urn = '';\n\n  private projetoNorma?: any;\n\n  private dispositivosEmenda: DispositivosEmenda | undefined;\n  private revisoes: Revisao[] | undefined;\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  inicializarEdicao(modo: string, urn: string, projetoNorma?: ProjetoNorma, preparaAberturaEmenda = false): void {\n    this.modo = modo;\n    this.urn = urn;\n    if (projetoNorma) {\n      this.projetoNorma = projetoNorma;\n    }\n    this.loadProjetoNorma(preparaAberturaEmenda);\n    document.querySelector('lexml-eta-articulacao')!['style'].display = 'block';\n  }\n\n  getDispositivosEmenda(): DispositivosEmenda | undefined {\n    if (this.modo !== ClassificacaoDocumento.EMENDA && this.modo !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER) {\n      return undefined;\n    }\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new DispositivosEmendaBuilder(this.modo, this.urn, articulacao).getDispositivosEmenda();\n  }\n\n  setDispositivosERevisoesEmenda(dispositivosEmenda: DispositivosEmenda | undefined, revisoes?: Revisao[]): void {\n    this.revisoes = revisoes;\n    if (dispositivosEmenda) {\n      this.dispositivosEmenda = dispositivosEmenda;\n      this.loadEmenda();\n    }\n  }\n\n  getComandoEmenda(): ComandoEmenda {\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new ComandoEmendaBuilder(this.urn, articulacao).getComandoEmenda();\n  }\n\n  getProjetoAtualizado(): any {\n    const out = { ...this.projetoNorma };\n    const articulacaoAtualizada = buildJsonixArticulacaoFromProjetoNorma(rootStore.getState().elementoReducer.articulacao);\n    (out as any).value.projetoNorma[(out as any).value.projetoNorma.norma ? 'norma' : 'projeto'].articulacao.lXhier = articulacaoAtualizada.lXhier;\n    return out;\n  }\n\n  private loadProjetoNorma(preparaAberturaEmenda: boolean): void {\n    let documento;\n\n    if (!this.projetoNorma || !this.projetoNorma.value) {\n      this.projetoNorma = DOCUMENTO_PADRAO;\n    }\n\n    if (this.modo === ModoEdicaoEmenda.EMENDA_ARTIGO_ONDE_COUBER) {\n      documento = buildProjetoNormaFromJsonix(DOCUMENTO_PADRAO, true);\n      const artigo = documento.articulacao!.artigos[0]!;\n      artigo.rotulo = 'Art.';\n      artigo.numero = '1';\n      artigo.id = 'art1';\n      const situacao = new DispositivoAdicionado();\n      situacao.tipoEmenda = ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n      artigo.situacao = situacao;\n\n      // Se estiver abrindo emenda, remove artigo inicial do documento padrão\n      if (preparaAberturaEmenda) {\n        documento.articulacao.removeFilho(documento.articulacao.filhos[0]);\n      }\n    } else {\n      documento = buildProjetoNormaFromJsonix(this.projetoNorma, this.modo === ClassificacaoDocumento.EMENDA);\n    }\n\n    documento.urn = this.urn;\n\n    document.querySelector('lexml-emenda')?.querySelector('sl-tab')?.click();\n    rootStore.dispatch(openArticulacaoAction(documento.articulacao!, this.modo));\n  }\n\n  private _timerLoadEmenda = 0;\n  private loadEmenda(): void {\n    if (this.dispositivosEmenda) {\n      clearInterval(this._timerLoadEmenda);\n      this._timerLoadEmenda = window.setTimeout(() => {\n        rootStore.dispatch(aplicarAlteracoesEmendaAction.execute(this.dispositivosEmenda!, this.revisoes));\n      }, 1000);\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${shoelaceLightThemeStyles}\n      <style>\n        #gtx-trans {\n          display: block;\n        }\n\n        lexml-eta-articulacao {\n          display: none;\n          height: 100%;\n        }\n\n        lexml-eta-articulacao:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n      <lexml-eta-articulacao .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-articulacao>\n    `;\n  }\n}\n","import { Parlamentar } from '../emenda/emenda';\n\nexport const incluirParlamentar = (parlamentares: Parlamentar[], parlamentar: Parlamentar): Parlamentar[] => {\n  const novoArray = [...parlamentares];\n  novoArray.push(parlamentar);\n  return novoArray;\n};\n\nexport const excluirParlamentar = (parlamentares: Parlamentar[], index: number): Parlamentar[] => {\n  const novoArray = [...parlamentares];\n  novoArray.splice(index, 1);\n  return novoArray;\n};\n\nexport const moverParlamentar = (parlamentares: Parlamentar[], index: number, deslocamento: number): Parlamentar[] => {\n  const newIndex = index + deslocamento;\n\n  if (newIndex < 0 || newIndex >= parlamentares.length) {\n    return parlamentares;\n  }\n\n  const novoArray = [...parlamentares];\n  novoArray.splice(newIndex, 0, novoArray.splice(index, 1)[0]);\n  return novoArray;\n};\n","import { css } from 'lit';\nexport const autoriaCss = css`\n  sl-radio-group::part(base) {\n    background-color: var(--sl-color-gray-100);\n    box-shadow: var(--sl-shadow-x-large);\n    padding: 20px 20px;\n  }\n  sl-radio-group::part(label) {\n    background-color: var(--sl-color-gray-200);\n    font-weight: bold;\n    border-radius: 5px;\n    border: 1px solid var(--sl-color-gray-300);\n    padding: 2px 5px;\n    box-shadow: var(--sl-shadow-small);\n  }\n\n  legend {\n    font-weight: normal;\n  }\n\n  .lexml-autoria {\n    display: block;\n    font-size: var(--sl-font-size-small);\n    font-family: var(--sl-font-sans);\n    max-width: 700px;\n  }\n\n  .lexml-autocomplete {\n    width: 100%;\n  }\n\n  .grid-autoria {\n    display: grid;\n    grid-template-columns: 3fr 2fr 250px;\n  }\n\n  .autoria-grid {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    width: 100%;\n    padding: 0 0 4px 0;\n    flex-wrap: wrap;\n  }\n\n  .autoria-grid--col1 {\n    flex: none;\n    order: 0;\n    flex-grow: 1;\n  }\n\n  .autoria-grid--col2 {\n    flex: none;\n    order: 1;\n    flex-grow: 1;\n  }\n\n  .autoria-grid--col3 {\n    flex: none;\n    order: 2;\n    flex-grow: 1;\n  }\n\n  [class^='autoria-grid--'] {\n    margin: 0px 2px;\n  }\n\n  .autoria-grid:first-child {\n    padding: 0 0 2px 0;\n  }\n\n  .autoria-header {\n    width: 180px;\n    padding: 0px 2px;\n  }\n\n  .autoria-buttons {\n    width: 124px;\n    text-align: right;\n  }\n\n  .autoria-input {\n    width: 100%;\n    margin: 0px;\n  }\n\n  .autoria-button {\n    background-color: white;\n    border: 1px solid #555;\n    border-radius: 2px;\n    padding: 2px 4px;\n    cursor: pointer;\n  }\n\n  .autoria-label {\n    display: none;\n  }\n\n  .autoria-icon {\n    background-color: #555;\n  }\n\n  .icon-up {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>\");\n  }\n\n  .icon-down {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>\");\n  }\n\n  .icon-delete {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>\");\n  }\n\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border-width: 0;\n  }\n\n  .assinaturas-adicionais {\n    padding-top: 10px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    vertical-align: center;\n    gap: 10px;\n  }\n\n  .assinaturas-adicionais div {\n    padding-top: 5px;\n  }\n\n  .assinaturas-adicionais .autoria-input {\n    display: block;\n    max-width: 400px;\n  }\n\n  @media (max-width: 576px) {\n    .autoria-grid {\n      flex-direction: column;\n    }\n\n    .autoria-labels {\n      display: none;\n    }\n    .autoria-label {\n      display: block;\n    }\n\n    .autoria-buttons {\n      width: calc(100% - 3px);\n    }\n\n    .autoria-input {\n      width: calc(100% - 2px);\n    }\n\n    [class^='autoria-grid--'] {\n      width: 100%;\n      padding: 2px 0;\n    }\n  }\n`;\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, state, query, queryAll } from 'lit/decorators.js';\n\nimport { REGEX_ACCENTS } from './../../util/string-util';\nimport { Parlamentar, Autoria } from '../../model/emenda/emenda';\nimport { incluirParlamentar, excluirParlamentar, moverParlamentar } from '../../model/autoria/parlamentarUtil';\nimport { autoriaCss } from '../../assets/css/autoria.css';\nimport { LexmlAutocomplete } from '../lexml-autocomplete';\n\nconst parlamentarVazio = new Parlamentar();\n\n// Decorator para aguardar fim da validação para executar um método\nfunction executarAposValidacao(interval = 200) {\n  return function (_target: unknown, key: string | symbol, descriptor: PropertyDescriptor): any {\n    return {\n      get(): any {\n        const wrapperFn = (...args: any[]): any => {\n          let timer = 0;\n\n          const executarMetodo = (): void => {\n            clearInterval(timer);\n            if (this['_isProcessandoValidacao']) {\n              timer = window.setTimeout(() => executarMetodo(), interval);\n              return;\n            }\n\n            descriptor.value.apply(this, args);\n          };\n\n          executarMetodo();\n        };\n\n        Object.defineProperty(this, key, { value: wrapperFn, configurable: true, writable: true });\n\n        return wrapperFn;\n      },\n    };\n  };\n}\n\n@customElement('lexml-autoria')\nexport class AutoriaComponent extends LitElement {\n  static styles = [autoriaCss];\n\n  @query('#btnNovoParlamentar')\n  private _btnNovoParlamentar!: HTMLButtonElement;\n\n  @queryAll('input#tex-cargo')\n  private _inputCargos!: NodeListOf<HTMLInputElement>;\n\n  @queryAll('lexml-autocomplete')\n  private _autocompletes!: NodeListOf<LexmlAutocomplete>;\n\n  @state()\n  private _nomesAutocomplete: string[] = [];\n\n  @state()\n  private _podeIncluirParlamentar = true;\n\n  private _parlamentaresAutocomplete: Parlamentar[] = [];\n  @property({ type: Array })\n  set parlamentares(value: Parlamentar[]) {\n    const oldValue = this._parlamentaresAutocomplete;\n    this._parlamentaresAutocomplete = value;\n    this._nomesAutocomplete = value.map(p => p.nome);\n    this.requestUpdate('parlamentares', oldValue);\n  }\n\n  get parlamentares(): Parlamentar[] {\n    return this._parlamentaresAutocomplete;\n  }\n\n  private _autoriaOriginal?: Autoria;\n  private _autoria!: Autoria;\n  @property({ type: Object })\n  set autoria(value: Autoria | undefined) {\n    const oldValue = this._autoriaOriginal;\n    this._autoriaOriginal = value;\n\n    this._autoria = value ? { ...value, parlamentares: [...value.parlamentares] } : new Autoria();\n    if (!this._autoria.parlamentares.length) {\n      this._autoria.parlamentares = [{ ...parlamentarVazio }];\n    }\n\n    this._podeIncluirParlamentar = this._isAllAutoresOk();\n    this.requestUpdate('autoria', oldValue);\n  }\n\n  get autoria(): Autoria | undefined {\n    return this._autoriaOriginal;\n  }\n\n  getAutoriaAtualizada(): Autoria {\n    return { ...this._autoria, parlamentares: this._autoria.parlamentares.filter(p => p.identificacao) };\n  }\n\n  render(): TemplateResult {\n    return html`\n      <sl-radio-group label=\"Autoria\" fieldset class=\"lexml-autoria\">\n        ${this._getTipoAutoriaTemplate()}\n        <div class=\"autoria-list\">${this._getParlamentaresTemplate()}</div>\n        <sl-button id=\"btnNovoParlamentar\" variant=\"primary\" @click=${this._incluirNovoParlamentar} ?disabled=${!this._podeIncluirParlamentar}>\n          Incluir ${this._autoria?.parlamentares.length ? 'outro' : ''} parlamentar\n        </sl-button>\n\n        ${this._getAssinaturasAdicionaisTemplate()}\n\n        <div class=\"assinaturas-adicionais\">\n          <label>\n            <input type=\"checkbox\" id=\"chk-exibir-partido-uf\" ?checked=${this._autoria?.imprimirPartidoUF} @input=${(ev: Event): void => this._atualizarExibirPartidoUF(ev)} />\n            Imprimir partido e UF para os signatários\n          </label>\n        </div>\n      </sl-radio-group>\n    `;\n  }\n\n  private _exibirTemplateTipoAutoria = false; // variável temporária\n  private _getTipoAutoriaTemplate(): TemplateResult {\n    return !this._exibirTemplateTipoAutoria\n      ? html`<div></div>`\n      : html`\n          <fieldset class=\"autoria-label--tipo-autoria\">\n            <legend>Tipo de autoria</legend>\n            <div class=\"control\">\n              <label class=\"radio\">\n                <input type=\"radio\" id=\"opt-parlamentar\" name=\"tipoAutoria\" value=\"Parlamentar\" ?checked=${this._autoria?.tipo === 'Parlamentar'} />\n                Parlamentar\n              </label>\n              <label class=\"radio\">\n                <input type=\"radio\" id=\"opt-comissao\" name=\"tipoAutoria\" value=\"Comissão\" ?checked=${this._autoria?.tipo === 'Comissão'} />\n                Comissão\n              </label>\n            </div>\n          </fieldset>\n        `;\n  }\n\n  private _getParlamentaresTemplate(): TemplateResult {\n    return html`\n      <div class=\"autoria-grid autoria-labels\">\n        <div class=\"autoria-grid--col1\"><div class=\"autoria-header\">Parlamentar</div></div>\n        <div class=\"autoria-grid--col2\"><div class=\"autoria-header\">Cargo</div></div>\n        <div class=\"autoria-grid--col3\"><div class=\"autoria-buttons\"></div></div>\n      </div>\n      ${this._autoria?.parlamentares.map((_, index) => this._getParlamentarAutocompleteTemplate(index))}\n    `;\n  }\n\n  private _getParlamentarAutocompleteTemplate(index: number): TemplateResult {\n    return html`\n      <div class=\"autoria-grid\">\n        <div class=\"autoria-grid--col1\">\n          <label for=\"defaultInput\" class=\"autoria-label\">Parlamentar</label>\n          <lexml-autocomplete\n            class=\"lexml-autocomplete\"\n            .items=${this._nomesAutocomplete}\n            value=${this._autoria.parlamentares[index].nome}\n            @input=${(ev: Event): void => this._validarNomeParlamentar(ev, index)}\n            @blur=${(ev: Event): void => this._validarNomeParlamentar(ev, index)}\n            @autocomplete=${(ev: CustomEvent): void => this._atualizarParlamentar(ev, index)}\n            @keyup=${(ev: KeyboardEvent): void => this._handleKeyUp(ev, index)}\n            @click=${this._handleClickAutoComplete}\n          ></lexml-autocomplete>\n        </div>\n\n        <div class=\"autoria-grid--col2\">\n          <label for=\"tex-cargo\" class=\"autoria-label\">Cargo</label>\n          <sl-input\n            type=\"text\"\n            id=\"tex-cargo\"\n            placeholder=\"ex: Presidente da Comissão ..., Líder do ...\"\n            class=\"autoria-input\"\n            aria-label=\"Cargo\"\n            size=\"small\"\n            .value=${this._autoria.parlamentares[index].cargo ?? ''}\n            @input=${(ev: Event): void => this._atualizarCargo(ev, index)}\n            @keyup=${(ev: KeyboardEvent): void => this._handleKeyUp(ev, index)}\n          ></sl-input>\n        </div>\n\n        <div class=\"autoria-grid--col3\">\n          <div class=\"autoria-buttons\">\n            <sl-button\n              id=\"paraBaixo\"\n              size=\"small\"\n              aria-label=\"Para baixo\"\n              title=\"Para baixo\"\n              @click=${(): void => this._moverParlamentar(index, 1)}\n              .disabled=${index === this._autoria.parlamentares.length - 1 ? true : false}\n            >\n              <sl-icon name=\"arrow-down\"></sl-icon>\n            </sl-button>\n            <sl-button\n              id=\"paraCima\"\n              size=\"small\"\n              aria-label=\"Para cima\"\n              title=\"Para cima\"\n              @click=${(): void => this._moverParlamentar(index, -1)}\n              .disabled=${index === 0 ? true : false}\n            >\n              <sl-icon name=\"arrow-up\"></sl-icon>\n            </sl-button>\n            <sl-button\n              id=\"excluir\"\n              size=\"small\"\n              aria-label=\"Excluir\"\n              title=\"Excluir\"\n              @click=${(): void => this._excluirParlamentar(index)}\n              .disabled=${this._autoria.parlamentares.length === 1 ? true : false}\n            >\n              <sl-icon name=\"trash\"></sl-icon>\n            </sl-button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _getAssinaturasAdicionaisTemplate(): TemplateResult {\n    return html`\n      <div class=\"assinaturas-adicionais\">\n        <sl-input\n          label=\"Quantidade de assinaturas adicionais de Senadores\"\n          type=\"number\"\n          id=\"num-assinaturas-adicionais-senadores\"\n          class=\"autoria-input\"\n          aria-label=\"Assinaturas Adicionais Senadores\"\n          size=\"small\"\n          .value=${this._autoria?.quantidadeAssinaturasAdicionaisSenadores.toString() ?? '0'}\n          @input=${(ev: Event): void => this._atualizarQtdAssinaturasAdicionaisSenadores(ev)}\n        ></sl-input>\n        <sl-input\n          label=\"Quantidade de assinaturas adicionais de Deputados Federais\"\n          type=\"number\"\n          id=\"num-assinaturas-adicionais-deputados\"\n          class=\"autoria-input\"\n          aria-label=\"Assinaturas Adicionais deputados\"\n          size=\"small\"\n          .value=${this._autoria?.quantidadeAssinaturasAdicionaisDeputados.toString() ?? '0'}\n          @input=${(ev: Event): void => this._atualizarQtdAssinaturasAdicionaisDeputados(ev)}\n        ></sl-input>\n      </div>\n    `;\n  }\n\n  updated(): void {\n    this._isProcessandoMovimentacao = false;\n  }\n\n  private _isAllAutoresOk(): boolean {\n    return this._autoria.parlamentares.every(p => p.identificacao);\n  }\n\n  private _incluirNovoParlamentar(): void {\n    this._autoria.parlamentares = incluirParlamentar(this._autoria.parlamentares, { ...parlamentarVazio });\n    this._podeIncluirParlamentar = false;\n    setTimeout(() => this._autocompletes[this._autoria.parlamentares.length - 1].focus(), 200);\n  }\n\n  @executarAposValidacao()\n  private _moverParlamentar(index: number, deslocamento: number): void {\n    this._autoria.parlamentares = moverParlamentar(this._autoria.parlamentares, index, deslocamento);\n    this.agendarEmissaoEventoOnChange('moverAutor');\n    this.requestUpdate();\n  }\n\n  @executarAposValidacao()\n  private _excluirParlamentar(index: number): void {\n    this._autoria.parlamentares = excluirParlamentar(this._autoria.parlamentares, index);\n    if (!this._autoria.parlamentares.length) {\n      this._autoria.parlamentares = [{ ...parlamentarVazio }];\n    }\n    this._podeIncluirParlamentar = this._isAllAutoresOk();\n    this.agendarEmissaoEventoOnChange('excluirAutor');\n    this.requestUpdate();\n  }\n\n  private _timerValidacao = 0;\n  protected _isProcessandoValidacao = false;\n  private _validarNomeParlamentar(ev: Event, index: number): void {\n    this._isProcessandoValidacao = true;\n    const isBlur = ev.type === 'blur';\n\n    if (!isBlur) {\n      clearInterval(this._timerValidacao);\n    }\n\n    // O trecho abaixo está dentro de um setTimeout por dois motivos:\n    // 1 - Debounce quando ev.type é \"input\"\n    // 2 - O clique de um nome na lista do autocomplete dispara o evento \"blur\"\n    //     e é preciso dar tempo do @autocomplete ser executado e preencher o input com o nome selecionado antes da validação\n    this._timerValidacao = window.setTimeout(\n      () => {\n        const auxValorPodeIncluirOriginal = this._podeIncluirParlamentar;\n\n        const elLexmlAutocomplete = this._autocompletes[index];\n        const cargoAtual = this._autoria.parlamentares[index].cargo;\n        const nomeAtual = elLexmlAutocomplete.value ?? '';\n\n        const regex = new RegExp('^' + nomeAtual.normalize('NFD').replace(REGEX_ACCENTS, '') + '$', 'i');\n        const parlamentar = this.parlamentares.find(p =>\n          p.nome\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .match(regex)\n        ) || { ...parlamentarVazio, nome: isBlur ? '' : nomeAtual };\n\n        const parlamentarEhValido = !!parlamentar.identificacao;\n\n        parlamentar.cargo = isBlur && !parlamentarEhValido ? '' : cargoAtual;\n\n        this._autoria.parlamentares[index] = { ...parlamentar };\n        this._podeIncluirParlamentar = parlamentarEhValido && this._isAllAutoresOk();\n\n        if (isBlur && !parlamentarEhValido) {\n          elLexmlAutocomplete.value = '';\n        }\n\n        this._isProcessandoValidacao = false;\n\n        if (auxValorPodeIncluirOriginal !== this._podeIncluirParlamentar) {\n          this.agendarEmissaoEventoOnChange('atualizarAutor');\n        }\n      },\n      ev.type === 'blur' ? 200 : 0\n    );\n  }\n\n  private timerEmitirEventoOnChange = 0;\n  private _atualizarParlamentar(ev: CustomEvent, index: number): void {\n    const parlamentarAutocomplete = this.parlamentares.find(p => p.nome === ev.detail.value);\n    if (parlamentarAutocomplete) {\n      const { cargo } = this._autoria.parlamentares[index];\n      this._autoria.parlamentares[index] = {\n        ...parlamentarAutocomplete,\n        cargo,\n      };\n    }\n    this._podeIncluirParlamentar = !!parlamentarAutocomplete && this._isAllAutoresOk();\n    (ev.target as HTMLElement).focus();\n    this._lastIndexAutoCompleted = index;\n\n    this.agendarEmissaoEventoOnChange('atualizarAutor');\n    this.requestUpdate();\n  }\n\n  private _atualizarCargo(ev: Event, index: number): void {\n    const cargoAtual = this._autoria.parlamentares[index].cargo;\n    const newValue = (ev.target as HTMLInputElement).value;\n    this._autoria.parlamentares[index].cargo = newValue;\n    if (cargoAtual !== newValue) {\n      this.agendarEmissaoEventoOnChange('atualizarAutor');\n    }\n  }\n\n  private _atualizarQtdAssinaturasAdicionaisSenadores(ev: Event): void {\n    this._autoria.quantidadeAssinaturasAdicionaisSenadores = Number((ev.target as HTMLInputElement).value);\n  }\n\n  private _atualizarQtdAssinaturasAdicionaisDeputados(ev: Event): void {\n    this._autoria.quantidadeAssinaturasAdicionaisDeputados = Number((ev.target as HTMLInputElement).value);\n  }\n\n  private _atualizarExibirPartidoUF(ev: Event): void {\n    this._autoria.imprimirPartidoUF = (ev.target as HTMLInputElement).checked;\n  }\n\n  private _isProcessandoMovimentacao = false;\n  private _lastIndexAutoCompleted = -1;\n  private _handleKeyUp(ev: KeyboardEvent, index: number): void {\n    if (!ev.ctrlKey && !ev.altKey && !ev.shiftKey) {\n      if (ev.key === 'Enter' && this._podeIncluirParlamentar && index !== this._lastIndexAutoCompleted) {\n        this._btnNovoParlamentar.click();\n        this._lastIndexAutoCompleted = -1;\n      } else if (['ArrowUp', 'ArrowDown'].includes(ev.key) && this._autoria.parlamentares[index].identificacao) {\n        this._focarAutocompleteOuCargo(ev.target!, index, ev.key === 'ArrowUp' ? -1 : 1);\n      }\n    } else if (ev.ctrlKey && !ev.altKey && !ev.shiftKey) {\n      if (ev.key === 'ArrowUp') {\n        if (!this._isProcessandoMovimentacao) {\n          this._isProcessandoMovimentacao = true;\n          this._moverParlamentar(index, -1);\n          this._focarAutocompleteOuCargo(ev.target!, index, -1);\n        }\n      } else if (ev.key === 'ArrowDown') {\n        if (!this._isProcessandoMovimentacao) {\n          this._isProcessandoMovimentacao = true;\n          this._moverParlamentar(index, 1);\n          this._focarAutocompleteOuCargo(ev.target!, index, 1);\n        }\n      }\n    }\n  }\n\n  private _focarAutocompleteOuCargo(el: EventTarget, index: number, deslocamento: number): void {\n    const nodes = (el as HTMLElement).tagName === 'LEXML-AUTOCOMPLETE' ? this._autocompletes : this._inputCargos;\n    const newIndex = index + deslocamento;\n    if (newIndex < 0 || newIndex >= nodes.length) {\n      return;\n    }\n    setTimeout(() => nodes[newIndex].focus(), 0);\n  }\n\n  private _handleClickAutoComplete(): void {\n    window.setTimeout(() => (this._lastIndexAutoCompleted = -1), 0);\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-autoria': AutoriaComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, query, state } from 'lit/decorators.js';\nimport { Option } from '../editor/autocomplete-async';\nimport { LexmlAutocomplete } from '../lexml-autocomplete';\nimport { ColegiadoApreciador, RefProposicaoEmendada } from '../../model/emenda/emenda';\nimport { Comissao } from './comissao';\n\n@customElement('lexml-destino')\nexport class DestinoComponent extends LitElement {\n  @query('#auto-complete-async')\n  private _autocomplete!: LexmlAutocomplete;\n\n  @state()\n  private _comissoesAutocomplete: Option[] = [];\n\n  @state()\n  private comissaoSelecionada = '';\n  private isMPV = false;\n  private isPlenario = false;\n  private tipoColegiadoPlenario = false;\n\n  private _proposicao!: RefProposicaoEmendada;\n  @property({ type: RefProposicaoEmendada })\n  set proposicao(value: RefProposicaoEmendada) {\n    // this._autocomplete.value = '';\n    this._proposicao = value;\n    this.isMPV = false;\n    if (this._proposicao.sigla === 'MPV') {\n      this._colegiadoApreciador.siglaCasaLegislativa = 'CN';\n      this._colegiadoApreciador.tipoColegiado = 'Comissão';\n      this._colegiadoApreciador.siglaComissao = `CMMPV ${this._proposicao.numero}/${this._proposicao.ano}`;\n      this._autocomplete.value = `${this._colegiadoApreciador.siglaComissao} - COMISSÃO MISTA DA MEDIDA PROVISÓRIA N° ${this._proposicao.numero}, DE ${this._proposicao.ano}`;\n      this.isMPV = true;\n    }\n\n    this.requestUpdate();\n  }\n\n  get proposicao(): RefProposicaoEmendada {\n    return this._proposicao;\n  }\n\n  private _comissoes!: Comissao[];\n  @property({ type: Array, state: true })\n  set comissoes(value: Comissao[] | undefined) {\n    this.isPlenario = false;\n    if (!this._comissoes || this._comissoes.length === 0) {\n      this._comissoes = value ? value : [];\n      this._comissoesOptions = this.comissoes.map(comissao => new Option(comissao.sigla, `${comissao.sigla} - ${comissao.nome}`));\n      this.requestUpdate();\n    }\n    if (typeof value === 'undefined') {\n      this.isPlenario = true;\n    }\n  }\n\n  get comissoes(): Array<Comissao> {\n    return this._comissoes;\n  }\n\n  private _comissoesOptions: Option[] = [];\n\n  private _colegiadoApreciador!: ColegiadoApreciador;\n  @property({ type: Object, state: true })\n  set colegiadoApreciador(value: ColegiadoApreciador | undefined) {\n    this._colegiadoApreciador = value ? value : new ColegiadoApreciador();\n    this.tipoColegiadoPlenario = this._colegiadoApreciador.tipoColegiado === 'Plenário' ? true : false;\n    if (this._colegiadoApreciador.siglaComissao) {\n      const option: Option = this._comissoesOptions.find(op => op.value === this._colegiadoApreciador.siglaComissao) || new Option('', '');\n      this._autocomplete.value = option.description || this._colegiadoApreciador.siglaComissao;\n    } else {\n      this._autocomplete.value = '';\n    }\n    this.requestUpdate();\n  }\n\n  get colegiadoApreciador(): ColegiadoApreciador {\n    return this._colegiadoApreciador;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        fieldset {\n          display: flex;\n          flex-direction: column;\n          gap: 1em;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n          border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n          border-radius: var(--sl-border-radius-medium);\n          max-width: 655px;\n        }\n\n        legend {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n\n        /* sl-radio-group::part(base) {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          gap: 10px;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n        }\n        sl-radio-group::part(label) {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n        sl-radio-group > sl-radio:first-child {\n          display: inline-flex;\n          padding: 0 20px 0 0;\n        }\n        sl-input::part(form-control) {\n          display: flex;\n          flex-direction: row;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        sl-input::part(base) {\n          max-width: 190px;\n        }\n        @media (max-width: 480px) {\n          sl-input::part(base) {\n            max-width: 150px;\n          }\n        }\n\n        sl-radio-group::part(base) {\n          box-shadow: none;\n        } */\n      </style>\n      <fieldset class=\"lexml-destino\">\n        <legend>Destino</legend>\n        <div>\n          <sl-radio-group id=\"tipoColegiado\">\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Plenário')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Plenário')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Plenário'}\n              value=\"Plenário\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Plenário</sl-radio\n            >\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Comissão')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Comissão')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Comissão'}\n              value=\"Comissão\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Comissão</sl-radio\n            >\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Plenário via Comissão')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Plenário via Comissão')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Plenário via Comissão'}\n              value=\"Plenário via Comissão\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Plenário via Comissão</sl-radio\n            >\n          </sl-radio-group>\n        </div>\n        <div style=\"width:100%;margin-top:10px\">\n          <autocomplete-async\n            id=\"auto-complete-async\"\n            label=\"Comissão\"\n            .async=${false}\n            ?readonly=${this.isMPV || this.isPlenario}\n            placeholder=\"ex: Comissão\"\n            .items=${this._comissoesAutocomplete}\n            .onSearch=${value => this._filtroComissao(value)}\n            .onSelect=${value => this._selecionarComissao(value)}\n            @blur=${this._blurAutoComplete}\n            ?disabled=${this.isMPV || this.isPlenario || this.tipoColegiadoPlenario || !this.comissoes?.length}\n          ></autocomplete-async>\n        </div>\n      </fieldset>\n    `;\n  }\n\n  private updateTipoColegiado(value: any): void {\n    if (!this.isMPV && !this.isPlenario) {\n      this._colegiadoApreciador.tipoColegiado = value;\n      this.tipoColegiadoPlenario = this._colegiadoApreciador.tipoColegiado === 'Plenário';\n      this.requestUpdate();\n    }\n  }\n\n  private _selecionarComissao(item: Option): void {\n    this._colegiadoApreciador.siglaComissao = item.value;\n  }\n\n  private _filtroComissao(query: string): void {\n    const regex = new RegExp(query, 'i');\n    this._comissoesAutocomplete = this._comissoesOptions.filter(comissao => comissao.description.match(regex));\n  }\n\n  private _blurAutoComplete(): void {\n    if (!this.comissoes?.length) return;\n    setTimeout(() => {\n      const comissao = this._autocomplete.value ?? '';\n      const comissaoSelecionada = this._comissoesOptions.find(comissaoOp => comissao === comissaoOp.description);\n\n      if (!comissaoSelecionada) {\n        this._autocomplete.value = '';\n        this.comissaoSelecionada = '';\n      }\n    }, 200);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-destino': DestinoComponent;\n  }\n}\n","import { REGEX_ACCENTS } from '../util/string-util';\nimport { LitElement, html, TemplateResult, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('lexml-autocomplete')\nexport class LexmlAutocomplete extends LitElement {\n  @property({ type: Array })\n  items: string[] = [];\n\n  @property({ type: Boolean, reflect: true })\n  opened = false;\n\n  @property({ type: Number })\n  maxSuggestions = 10;\n\n  _suggestions: string[] = [];\n\n  _bound: any = {};\n\n  _inputEl: any;\n\n  _suggestionEl: any;\n\n  _highlightedEl: any;\n\n  _blur = false;\n\n  _mouseEnter = false;\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        .suggest-container {\n          position: relative;\n        }\n\n        ul {\n          position: absolute;\n          display: block;\n          list-style-type: none;\n          margin: 0;\n          padding: 0;\n          z-index: 10000;\n          border: 1px solid grey;\n          background: white;\n        }\n        li {\n          padding: 4px;\n          cursor: pointer;\n        }\n        li.active {\n          background: whitesmoke;\n        }\n        [hidden] {\n          display: none;\n        }\n\n        .lexml-autocomplete-input {\n          width: 100%;\n        }\n\n        @media (max-width: 576px) {\n          .lexml-autocomplete-label {\n            width: calc(100% - 2px);\n            display: block;\n          }\n          .lexml-autocomplete-input {\n            width: calc(100% - 2px);\n          }\n        }\n      </style>\n      <slot id=\"dropdown-input\">\n        <!-- <input id=\"defaultInput\" class=\"lexml-autocomplete-input\" type=\"text\" placeholder=\"Parlamentar\" .value=${this.value || ''} /> -->\n        <sl-input id=\"defaultInput\" class=\"lexml-autocomplete-input\" type=\"text\" placeholder=\"\" size=\"small\" .value=${this.value || ''}></sl-input>\n      </slot>\n      <div class=\"suggest-container\">\n        <ul id=\"suggestions\" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>\n          ${this._suggestions.map(item => html`<li @click=${(): void => this.autocomplete(item)}>${item}</li>`)}\n        </ul>\n      </div>\n    `;\n  }\n\n  /**\n   * Input element getter\n   */\n  get contentElement(): any {\n    if (this._inputEl) return this._inputEl; // Cache\n    if (!this.hasUpdated) return undefined; // No shadow root, no element to use\n\n    const slotElement = this.shadowRoot!.getElementById('dropdown-input') as HTMLSlotElement;\n    const slotInputList = slotElement.assignedElements();\n    this._inputEl = slotInputList.length ? slotInputList[0] : this.shadowRoot!.getElementById('defaultInput');\n    return this._inputEl;\n  }\n\n  private _tempValue?: string;\n  /**\n   * Value getter from input element.\n   */\n  get value(): any {\n    return this.contentElement && this.contentElement.value;\n  }\n\n  /**\n   * Value setter to input element.\n   */\n  @property({ type: String })\n  set value(value) {\n    if (!this.contentElement) {\n      this._tempValue = value;\n      return;\n    }\n\n    this.contentElement.value = value;\n  }\n\n  firstUpdated(): void {\n    this._suggestionEl = this.shadowRoot!.getElementById('suggestions');\n    this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n\n    this._bound.onKeyDown = this._handleKeyDown.bind(this);\n    this._bound.onKeyUp = this._handleKeyUp.bind(this);\n    this._bound.onFocus = this._handleFocus.bind(this);\n    this._bound.onBlur = this._handleBlur.bind(this);\n\n    this.contentElement.addEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.addEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.addEventListener('focus', this._bound.onFocus);\n    this.contentElement.addEventListener('blur', this._bound.onBlur);\n\n    if (this._tempValue !== undefined) {\n      this.contentElement.value = this._tempValue;\n    }\n  }\n\n  disconnectedCallback(): void {\n    if (!this.contentElement) return; // no events to remove\n    this.contentElement.removeEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.removeEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.removeEventListener('focus', this._bound.onFocus);\n    this.contentElement.removeEventListener('blur', this._bound.onBlur);\n  }\n\n  focus(options?: FocusOptions): void {\n    if (this.contentElement) {\n      this.contentElement.focus(options);\n    }\n  }\n\n  updated(changed: PropertyValues): void {\n    if (changed.has('opened') && this.opened && this._suggestionEl.childElementCount) {\n      // Highlight the first when there are suggestions\n      // eslint-disable-next-line prefer-destructuring\n      this._highlightedEl = this._suggestionEl.children[0];\n      this._highlightedEl.classList.add('active');\n    }\n  }\n\n  /**\n   * Open suggestions.\n   */\n  open(): void {\n    if (this._suggestionEl.style.width === '0px') {\n      this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n    }\n\n    if (this._suggestions.length) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Close suggestions.\n   */\n  close(): void {\n    this.opened = false;\n    this._highlightedEl = null;\n  }\n\n  /**\n   * Suggest autocomplete items.\n   * @param {Array<String>} suggestions\n   */\n  suggest(suggestions: string[]): void {\n    this._suggestions = suggestions || [];\n    // eslint-disable-next-line no-unused-expressions\n    this._suggestions.length > 1 || (this._suggestions.length === 1 && this._suggestions[0] !== this.contentElement.value) ? this.open() : this.close();\n    this.requestUpdate();\n  }\n\n  /**\n   * Autocomplete input with `value`.\n   * @param {String} value\n   */\n  autocomplete(value: string): void {\n    this.contentElement.value = value;\n    this.close();\n    this.dispatchEvent(\n      new CustomEvent('autocomplete', {\n        detail: { value },\n        composed: true,\n        bubbles: true,\n      })\n    );\n  }\n\n  _highlightPrev(): void {\n    if (!this._highlightedEl || !this._highlightedEl.previousElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.previousElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  _highlightNext(): void {\n    if (!this._highlightedEl || !this._highlightedEl.nextElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.nextElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _handleKeyDown(ev: KeyboardEvent): void {\n    // Prevent up and down from behaving as home and end on some browsers\n    if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  _handleKeyUp(ev: KeyboardEvent): void {\n    switch (ev.key) {\n      case 'ArrowUp':\n        if (this._highlightedEl?.previousElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightPrev();\n        }\n        break;\n      case 'ArrowDown':\n        if (this._highlightedEl?.nextElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightNext();\n        }\n        break;\n      case 'Enter':\n        // Select\n        // eslint-disable-next-line no-unused-expressions\n        this._highlightedEl && this._highlightedEl.click();\n        break;\n      default:\n        // TODO debounce\n        if (this.items.length) {\n          const { value } = this.contentElement;\n          const normalizedValue = value.normalize('NFD').replace(REGEX_ACCENTS, '');\n          this.suggest(this._findSuggetions(normalizedValue));\n        }\n    }\n  }\n\n  _findSuggetions(value?: string, nItemsResult = this.maxSuggestions): string[] {\n    if (!value) {\n      return [];\n    }\n    let suggestions = this._filterStartWith(value, nItemsResult);\n    if (suggestions.length < this.maxSuggestions) {\n      suggestions = [...suggestions, ...this._filterContains(value, this.maxSuggestions - suggestions.length).filter(item => !suggestions.includes(item))];\n    }\n    return suggestions;\n  }\n\n  _filterStartWith(value: string, itemsResult = this.maxSuggestions): string[] {\n    const regexStartWith = new RegExp('^' + value, 'gi');\n    return (\n      (value &&\n        this.items\n          .filter(item =>\n            item\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '')\n              .match(regexStartWith)\n          )\n          .slice(0, itemsResult)) ||\n      []\n    );\n  }\n\n  _filterContains(value: string, itemsResult = this.maxSuggestions): string[] {\n    const regexContains = new RegExp(value, 'gi');\n    return (\n      (value &&\n        this.items\n          .filter(item =>\n            item\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '')\n              .match(regexContains)\n          )\n          .slice(0, itemsResult)) ||\n      []\n    );\n  }\n\n  _handleFocus(): void {\n    this._blur = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._suggestions.length > 1 && this.open();\n  }\n\n  _handleBlur(): void {\n    this._blur = true;\n    // eslint-disable-next-line no-unused-expressions\n    // !this._mouseEnter && this.close();\n    setTimeout(() => this.close(), 200);\n    this._suggestions = [];\n  }\n\n  // Handle mouse change focus to suggestions\n  _handleItemMouseEnter(): void {\n    this._mouseEnter = true;\n  }\n\n  _handleItemMouseLeave(): void {\n    this._mouseEnter = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._blur && setTimeout(() => this.close(), 500); // Give user some slack before closing\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-autocomplete': LexmlAutocomplete;\n  }\n}\n","import { css, html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\n\n@customElement('lexml-data')\nexport class DataComponent extends LitElement {\n  static styles = css`\n    .lexml-data {\n      display: block;\n      font-size: 1em;\n      max-width: 700px;\n    }\n  `;\n\n  @query('#input-data')\n  inputData!: HTMLInputElement;\n\n  @query('#no-date')\n  optionNaoInformarData!: any;\n\n  // @query('#opt-data')\n  // optData!: HTMLInputElement;\n\n  @property({ type: String })\n  data = '';\n\n  updated(): void {\n    this.inputData.value = this.data || this.inputData.value || new Date().toISOString().replace(/T.+$/, '');\n    if (!this.data && !this.optionNaoInformarData.checked) {\n      this.optionNaoInformarData.checked = true;\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        sl-radio-group::part(base) {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          gap: 10px;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n        }\n        sl-radio-group::part(label) {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n        sl-radio-group > sl-radio:first-child {\n          display: inline-flex;\n          padding: 0 20px 0 0;\n        }\n        sl-input::part(form-control) {\n          display: flex;\n          flex-direction: row;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        sl-input::part(base) {\n          max-width: 190px;\n        }\n        @media (max-width: 480px) {\n          sl-input::part(base) {\n            max-width: 150px;\n          }\n        }\n      </style>\n      <div class=\"lexml-data\">\n        <sl-radio-group label=\"Data\" fieldset>\n          <sl-radio name=\"data\" value=\"2\" ?checked=${!!this.data} @click=${this.setDate}>\n            <sl-input id=\"input-data\" label=\"Data\" type=\"date\" ?disabled=${!this.data} @input=${this.setDate}></sl-input>\n          </sl-radio>\n          <sl-radio name=\"data\" id=\"no-date\" value=\"1\" ?checked=${!this.data} @click=${this.resetDate}>Não informar</sl-radio>\n        </sl-radio-group>\n      </div>\n    `;\n  }\n\n  private getCurrentDate(): string {\n    return new Date().toLocaleDateString().split('/').reverse().join('-');\n  }\n\n  private resetDate(): void {\n    const original = this.data;\n    this.data = '';\n    if (original !== this.data) {\n      this.agendarEmissaoEventoOnChange();\n    }\n  }\n\n  private setDate(): void {\n    if (this.inputData) {\n      const original = this.data;\n      this.data = this.inputData.value;\n      if (original !== this.data) {\n        this.agendarEmissaoEventoOnChange();\n      }\n    }\n  }\n\n  private timerOnChange = 0;\n  private agendarEmissaoEventoOnChange(): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = window.setTimeout(() => this.emitirEventoOnChange(), 1000);\n  }\n\n  private emitirEventoOnChange(): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento: 'data',\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-data': DataComponent;\n  }\n}\n","export class Usuario {\n  nome = 'Anônimo';\n  id: any;\n  sigla?: string;\n\n  constructor(nome?: string, id?: any, sigla?: string) {\n    this.nome = nome || 'Anônimo';\n    this.id = id;\n    this.sigla = sigla;\n  }\n}\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/badge/badge.styles.ts\nvar badge_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-flex;\n  }\n\n  .badge {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: var(--sl-font-size-x-small);\n    font-weight: var(--sl-font-weight-semibold);\n    letter-spacing: var(--sl-letter-spacing-normal);\n    line-height: 1;\n    border-radius: var(--sl-border-radius-small);\n    border: solid 1px var(--sl-color-neutral-0);\n    white-space: nowrap;\n    padding: 3px 6px;\n    user-select: none;\n    cursor: inherit;\n  }\n\n  /* Variant modifiers */\n  .badge--primary {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--success {\n    background-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--neutral {\n    background-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--warning {\n    background-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--danger {\n    background-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Pill modifier */\n  .badge--pill {\n    border-radius: var(--sl-border-radius-pill);\n  }\n\n  /* Pulse modifier */\n  .badge--pulse {\n    animation: pulse 1.5s infinite;\n  }\n\n  .badge--pulse.badge--primary {\n    --pulse-color: var(--sl-color-primary-600);\n  }\n\n  .badge--pulse.badge--success {\n    --pulse-color: var(--sl-color-success-600);\n  }\n\n  .badge--pulse.badge--neutral {\n    --pulse-color: var(--sl-color-neutral-600);\n  }\n\n  .badge--pulse.badge--warning {\n    --pulse-color: var(--sl-color-warning-600);\n  }\n\n  .badge--pulse.badge--danger {\n    --pulse-color: var(--sl-color-danger-600);\n  }\n\n  @keyframes pulse {\n    0% {\n      box-shadow: 0 0 0 0 var(--pulse-color);\n    }\n    70% {\n      box-shadow: 0 0 0 0.5rem transparent;\n    }\n    100% {\n      box-shadow: 0 0 0 0 transparent;\n    }\n  }\n`;\n\nexport {\n  badge_styles_default\n};\n","import {\n  badge_styles_default\n} from \"./chunk.7PNSFSF6.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/badge/badge.ts\nvar SlBadge = class extends s {\n  constructor() {\n    super(...arguments);\n    this.variant = \"primary\";\n    this.pill = false;\n    this.pulse = false;\n  }\n  render() {\n    return $`\n      <span\n        part=\"base\"\n        class=${o({\n      badge: true,\n      \"badge--primary\": this.variant === \"primary\",\n      \"badge--success\": this.variant === \"success\",\n      \"badge--neutral\": this.variant === \"neutral\",\n      \"badge--warning\": this.variant === \"warning\",\n      \"badge--danger\": this.variant === \"danger\",\n      \"badge--pill\": this.pill,\n      \"badge--pulse\": this.pulse\n    })}\n        role=\"status\"\n      >\n        <slot></slot>\n      </span>\n    `;\n  }\n};\nSlBadge.styles = badge_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlBadge.prototype, \"variant\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlBadge.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlBadge.prototype, \"pulse\", 2);\nSlBadge = __decorateClass([\n  n(\"sl-badge\")\n], SlBadge);\n\nexport {\n  SlBadge\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab-group/tab-group.styles.ts\nvar tab_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --track-color: var(--sl-color-neutral-200);\n    --indicator-color: var(--sl-color-primary-600);\n\n    display: block;\n  }\n\n  .tab-group {\n    display: flex;\n    border: solid 1px transparent;\n    border-radius: 0;\n  }\n\n  .tab-group .tab-group__tabs {\n    display: flex;\n    position: relative;\n  }\n\n  .tab-group .tab-group__indicator {\n    position: absolute;\n    left: 0;\n    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) width ease;\n  }\n\n  .tab-group--has-scroll-controls .tab-group__nav-container {\n    position: relative;\n    padding: 0 var(--sl-spacing-x-large);\n  }\n\n  .tab-group__scroll-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: var(--sl-spacing-x-large);\n  }\n\n  .tab-group__scroll-button--start {\n    left: 0;\n  }\n\n  .tab-group__scroll-button--end {\n    right: 0;\n  }\n\n  /*\n   * Top\n   */\n\n  .tab-group--top {\n    flex-direction: column;\n  }\n\n  .tab-group--top .tab-group__nav-container {\n    order: 1;\n  }\n\n  .tab-group--top .tab-group__nav {\n    display: flex;\n    overflow-x: auto;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .tab-group--top .tab-group__nav::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .tab-group--top .tab-group__tabs {\n    flex: 1 1 auto;\n    position: relative;\n    flex-direction: row;\n    border-bottom: solid 2px var(--track-color);\n  }\n\n  .tab-group--top .tab-group__indicator {\n    bottom: -2px;\n    border-bottom: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--top .tab-group__body {\n    order: 2;\n  }\n\n  .tab-group--top ::slotted(sl-tab-panel) {\n    --padding: var(--sl-spacing-medium) 0;\n  }\n\n  /*\n   * Bottom\n   */\n\n  .tab-group--bottom {\n    flex-direction: column;\n  }\n\n  .tab-group--bottom .tab-group__nav-container {\n    order: 2;\n  }\n\n  .tab-group--bottom .tab-group__nav {\n    display: flex;\n    overflow-x: auto;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .tab-group--bottom .tab-group__tabs {\n    flex: 1 1 auto;\n    position: relative;\n    flex-direction: row;\n    border-top: solid 2px var(--track-color);\n  }\n\n  .tab-group--bottom .tab-group__indicator {\n    top: calc(-1 * 2px);\n    border-top: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--bottom .tab-group__body {\n    order: 1;\n  }\n\n  .tab-group--bottom ::slotted(sl-tab-panel) {\n    --padding: var(--sl-spacing-medium) 0;\n  }\n\n  /*\n   * Start\n   */\n\n  .tab-group--start {\n    flex-direction: row;\n  }\n\n  .tab-group--start .tab-group__nav-container {\n    order: 1;\n  }\n\n  .tab-group--start .tab-group__tabs {\n    flex: 0 0 auto;\n    flex-direction: column;\n    border-right: solid 2px var(--track-color);\n  }\n\n  .tab-group--start .tab-group__indicator {\n    right: calc(-1 * 2px);\n    border-right: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--start .tab-group__body {\n    flex: 1 1 auto;\n    order: 2;\n  }\n\n  .tab-group--start ::slotted(sl-tab-panel) {\n    --padding: 0 var(--sl-spacing-medium);\n  }\n\n  /*\n   * End\n   */\n\n  .tab-group--end {\n    flex-direction: row;\n  }\n\n  .tab-group--end .tab-group__nav-container {\n    order: 2;\n  }\n\n  .tab-group--end .tab-group__tabs {\n    flex: 0 0 auto;\n    flex-direction: column;\n    border-left: solid 2px var(--track-color);\n  }\n\n  .tab-group--end .tab-group__indicator {\n    left: calc(-1 * 2px);\n    border-left: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--end .tab-group__body {\n    flex: 1 1 auto;\n    order: 1;\n  }\n\n  .tab-group--end ::slotted(sl-tab-panel) {\n    --padding: 0 var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  tab_group_styles_default\n};\n","import {\n  tab_group_styles_default\n} from \"./chunk.55G5Z2SG.js\";\nimport {\n  scrollIntoView\n} from \"./chunk.H262HIXG.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab-group/tab-group.ts\nvar SlTabGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.tabs = [];\n    this.panels = [];\n    this.hasScrollControls = false;\n    this.placement = \"top\";\n    this.activation = \"auto\";\n    this.noScrollControls = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.resizeObserver = new ResizeObserver(() => {\n      this.preventIndicatorTransition();\n      this.repositionIndicator();\n      this.updateScrollControls();\n    });\n    this.mutationObserver = new MutationObserver((mutations) => {\n      if (mutations.some((m) => ![\"aria-labelledby\", \"aria-controls\"].includes(m.attributeName))) {\n        setTimeout(() => this.setAriaLabels());\n      }\n      if (mutations.some((m) => m.attributeName === \"disabled\")) {\n        this.syncTabsAndPanels();\n      }\n    });\n    this.updateComplete.then(() => {\n      this.syncTabsAndPanels();\n      this.mutationObserver.observe(this, { attributes: true, childList: true, subtree: true });\n      this.resizeObserver.observe(this.nav);\n      const intersectionObserver = new IntersectionObserver((entries, observer) => {\n        var _a;\n        if (entries[0].intersectionRatio > 0) {\n          this.setAriaLabels();\n          this.setActiveTab((_a = this.getActiveTab()) != null ? _a : this.tabs[0], { emitEvents: false });\n          observer.unobserve(entries[0].target);\n        }\n      });\n      intersectionObserver.observe(this.tabGroup);\n    });\n  }\n  disconnectedCallback() {\n    this.mutationObserver.disconnect();\n    this.resizeObserver.unobserve(this.nav);\n  }\n  show(panel) {\n    const tab = this.tabs.find((el) => el.panel === panel);\n    if (tab) {\n      this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n    }\n  }\n  getAllTabs(includeDisabled = false) {\n    const slot = this.shadowRoot.querySelector('slot[name=\"nav\"]');\n    return [...slot.assignedElements()].filter((el) => {\n      return includeDisabled ? el.tagName.toLowerCase() === \"sl-tab\" : el.tagName.toLowerCase() === \"sl-tab\" && !el.disabled;\n    });\n  }\n  getAllPanels() {\n    const slot = this.body.querySelector(\"slot\");\n    return [...slot.assignedElements()].filter((el) => el.tagName.toLowerCase() === \"sl-tab-panel\");\n  }\n  getActiveTab() {\n    return this.tabs.find((el) => el.active);\n  }\n  handleClick(event) {\n    const target = event.target;\n    const tab = target.closest(\"sl-tab\");\n    const tabGroup = tab == null ? void 0 : tab.closest(\"sl-tab-group\");\n    if (tabGroup !== this) {\n      return;\n    }\n    if (tab !== null) {\n      this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n    }\n  }\n  handleKeyDown(event) {\n    const target = event.target;\n    const tab = target.closest(\"sl-tab\");\n    const tabGroup = tab == null ? void 0 : tab.closest(\"sl-tab-group\");\n    if (tabGroup !== this) {\n      return;\n    }\n    if ([\"Enter\", \" \"].includes(event.key)) {\n      if (tab !== null) {\n        this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n        event.preventDefault();\n      }\n    }\n    if ([\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n      const activeEl = document.activeElement;\n      if ((activeEl == null ? void 0 : activeEl.tagName.toLowerCase()) === \"sl-tab\") {\n        let index = this.tabs.indexOf(activeEl);\n        if (event.key === \"Home\") {\n          index = 0;\n        } else if (event.key === \"End\") {\n          index = this.tabs.length - 1;\n        } else if ([\"top\", \"bottom\"].includes(this.placement) && event.key === \"ArrowLeft\" || [\"start\", \"end\"].includes(this.placement) && event.key === \"ArrowUp\") {\n          index--;\n        } else if ([\"top\", \"bottom\"].includes(this.placement) && event.key === \"ArrowRight\" || [\"start\", \"end\"].includes(this.placement) && event.key === \"ArrowDown\") {\n          index++;\n        }\n        if (index < 0) {\n          index = this.tabs.length - 1;\n        }\n        if (index > this.tabs.length - 1) {\n          index = 0;\n        }\n        this.tabs[index].focus({ preventScroll: true });\n        if (this.activation === \"auto\") {\n          this.setActiveTab(this.tabs[index], { scrollBehavior: \"smooth\" });\n        }\n        if ([\"top\", \"bottom\"].includes(this.placement)) {\n          scrollIntoView(this.tabs[index], this.nav, \"horizontal\");\n        }\n        event.preventDefault();\n      }\n    }\n  }\n  handleScrollToStart() {\n    this.nav.scroll({\n      left: this.nav.scrollLeft - this.nav.clientWidth,\n      behavior: \"smooth\"\n    });\n  }\n  handleScrollToEnd() {\n    this.nav.scroll({\n      left: this.nav.scrollLeft + this.nav.clientWidth,\n      behavior: \"smooth\"\n    });\n  }\n  updateScrollControls() {\n    if (this.noScrollControls) {\n      this.hasScrollControls = false;\n    } else {\n      this.hasScrollControls = [\"top\", \"bottom\"].includes(this.placement) && this.nav.scrollWidth > this.nav.clientWidth;\n    }\n  }\n  setActiveTab(tab, options) {\n    options = __spreadValues({\n      emitEvents: true,\n      scrollBehavior: \"auto\"\n    }, options);\n    if (tab !== this.activeTab && !tab.disabled) {\n      const previousTab = this.activeTab;\n      this.activeTab = tab;\n      this.tabs.map((el) => el.active = el === this.activeTab);\n      this.panels.map((el) => {\n        var _a;\n        return el.active = el.name === ((_a = this.activeTab) == null ? void 0 : _a.panel);\n      });\n      this.syncIndicator();\n      if ([\"top\", \"bottom\"].includes(this.placement)) {\n        scrollIntoView(this.activeTab, this.nav, \"horizontal\", options.scrollBehavior);\n      }\n      if (options.emitEvents) {\n        if (previousTab) {\n          emit(this, \"sl-tab-hide\", { detail: { name: previousTab.panel } });\n        }\n        emit(this, \"sl-tab-show\", { detail: { name: this.activeTab.panel } });\n      }\n    }\n  }\n  setAriaLabels() {\n    this.tabs.forEach((tab) => {\n      const panel = this.panels.find((el) => el.name === tab.panel);\n      if (panel) {\n        tab.setAttribute(\"aria-controls\", panel.getAttribute(\"id\"));\n        panel.setAttribute(\"aria-labelledby\", tab.getAttribute(\"id\"));\n      }\n    });\n  }\n  syncIndicator() {\n    const tab = this.getActiveTab();\n    if (tab) {\n      this.indicator.style.display = \"block\";\n      this.repositionIndicator();\n    } else {\n      this.indicator.style.display = \"none\";\n    }\n  }\n  repositionIndicator() {\n    const currentTab = this.getActiveTab();\n    if (!currentTab) {\n      return;\n    }\n    const width = currentTab.clientWidth;\n    const height = currentTab.clientHeight;\n    const allTabs = this.getAllTabs(true);\n    const precedingTabs = allTabs.slice(0, allTabs.indexOf(currentTab));\n    const offset = precedingTabs.reduce((previous, current) => ({\n      left: previous.left + current.clientWidth,\n      top: previous.top + current.clientHeight\n    }), { left: 0, top: 0 });\n    switch (this.placement) {\n      case \"top\":\n      case \"bottom\":\n        this.indicator.style.width = `${width}px`;\n        this.indicator.style.height = \"auto\";\n        this.indicator.style.transform = `translateX(${offset.left}px)`;\n        break;\n      case \"start\":\n      case \"end\":\n        this.indicator.style.width = \"auto\";\n        this.indicator.style.height = `${height}px`;\n        this.indicator.style.transform = `translateY(${offset.top}px)`;\n        break;\n    }\n  }\n  preventIndicatorTransition() {\n    const transitionValue = this.indicator.style.transition;\n    this.indicator.style.transition = \"none\";\n    requestAnimationFrame(() => {\n      this.indicator.style.transition = transitionValue;\n    });\n  }\n  syncTabsAndPanels() {\n    this.tabs = this.getAllTabs();\n    this.panels = this.getAllPanels();\n    this.syncIndicator();\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      \"tab-group\": true,\n      \"tab-group--top\": this.placement === \"top\",\n      \"tab-group--bottom\": this.placement === \"bottom\",\n      \"tab-group--start\": this.placement === \"start\",\n      \"tab-group--end\": this.placement === \"end\",\n      \"tab-group--has-scroll-controls\": this.hasScrollControls\n    })}\n        @click=${this.handleClick}\n        @keydown=${this.handleKeyDown}\n      >\n        <div class=\"tab-group__nav-container\" part=\"nav\">\n          ${this.hasScrollControls ? $`\n                <sl-icon-button\n                  part=\"scroll-button scroll-button--start\"\n                  exportparts=\"base:scroll-button__base\"\n                  class=\"tab-group__scroll-button tab-group__scroll-button--start\"\n                  name=\"chevron-left\"\n                  library=\"system\"\n                  label=${this.localize.term(\"scrollToStart\")}\n                  @click=${this.handleScrollToStart}\n                ></sl-icon-button>\n              ` : \"\"}\n\n          <div class=\"tab-group__nav\">\n            <div part=\"tabs\" class=\"tab-group__tabs\" role=\"tablist\">\n              <div part=\"active-tab-indicator\" class=\"tab-group__indicator\"></div>\n              <slot name=\"nav\" @slotchange=${this.syncTabsAndPanels}></slot>\n            </div>\n          </div>\n\n          ${this.hasScrollControls ? $`\n                <sl-icon-button\n                  part=\"scroll-button scroll-button--end\"\n                  exportparts=\"base:scroll-button__base\"\n                  class=\"tab-group__scroll-button tab-group__scroll-button--end\"\n                  name=\"chevron-right\"\n                  library=\"system\"\n                  label=${this.localize.term(\"scrollToEnd\")}\n                  @click=${this.handleScrollToEnd}\n                ></sl-icon-button>\n              ` : \"\"}\n        </div>\n\n        <div part=\"body\" class=\"tab-group__body\">\n          <slot @slotchange=${this.syncTabsAndPanels}></slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlTabGroup.styles = tab_group_styles_default;\n__decorateClass([\n  i(\".tab-group\")\n], SlTabGroup.prototype, \"tabGroup\", 2);\n__decorateClass([\n  i(\".tab-group__body\")\n], SlTabGroup.prototype, \"body\", 2);\n__decorateClass([\n  i(\".tab-group__nav\")\n], SlTabGroup.prototype, \"nav\", 2);\n__decorateClass([\n  i(\".tab-group__indicator\")\n], SlTabGroup.prototype, \"indicator\", 2);\n__decorateClass([\n  t()\n], SlTabGroup.prototype, \"hasScrollControls\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"placement\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"activation\", 2);\n__decorateClass([\n  e({ attribute: \"no-scroll-controls\", type: Boolean })\n], SlTabGroup.prototype, \"noScrollControls\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"lang\", 2);\n__decorateClass([\n  watch(\"noScrollControls\", { waitUntilFirstUpdate: true })\n], SlTabGroup.prototype, \"updateScrollControls\", 1);\n__decorateClass([\n  watch(\"placement\", { waitUntilFirstUpdate: true })\n], SlTabGroup.prototype, \"syncIndicator\", 1);\nSlTabGroup = __decorateClass([\n  n(\"sl-tab-group\")\n], SlTabGroup);\n\nexport {\n  SlTabGroup\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab-panel/tab-panel.styles.ts\nvar tab_panel_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --padding: 0;\n\n    display: block;\n  }\n\n  .tab-panel {\n    border: solid 1px transparent;\n    padding: var(--padding);\n  }\n`;\n\nexport {\n  tab_panel_styles_default\n};\n","// src/internal/auto-increment.ts\nvar id = 0;\nfunction autoIncrement() {\n  return ++id;\n}\n\nexport {\n  autoIncrement\n};\n","import {\n  tab_panel_styles_default\n} from \"./chunk.XGXDQT2J.js\";\nimport {\n  autoIncrement\n} from \"./chunk.KFR7NC2M.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab-panel/tab-panel.ts\nvar SlTabPanel = class extends s {\n  constructor() {\n    super(...arguments);\n    this.attrId = autoIncrement();\n    this.componentId = `sl-tab-panel-${this.attrId}`;\n    this.name = \"\";\n    this.active = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.id = this.id.length > 0 ? this.id : this.componentId;\n  }\n  render() {\n    this.style.display = this.active ? \"block\" : \"none\";\n    return $`\n      <div part=\"base\" class=\"tab-panel\" role=\"tabpanel\" aria-hidden=${this.active ? \"false\" : \"true\"}>\n        <slot></slot>\n      </div>\n    `;\n  }\n};\nSlTabPanel.styles = tab_panel_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlTabPanel.prototype, \"name\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTabPanel.prototype, \"active\", 2);\nSlTabPanel = __decorateClass([\n  n(\"sl-tab-panel\")\n], SlTabPanel);\n\nexport {\n  SlTabPanel\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab/tab.styles.ts\nvar tab_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .tab {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-small);\n    font-weight: var(--sl-font-weight-semibold);\n    border-radius: var(--sl-border-radius-medium);\n    color: var(--sl-color-neutral-600);\n    padding: var(--sl-spacing-medium) var(--sl-spacing-large);\n    white-space: nowrap;\n    user-select: none;\n    cursor: pointer;\n    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;\n  }\n\n  .tab:hover:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .tab:focus {\n    outline: none;\n  }\n\n  .tab${focusVisibleSelector}:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n    box-shadow: inset var(--sl-focus-ring);\n  }\n\n  .tab.tab--active:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .tab.tab--closable {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .tab.tab--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .tab__close-button {\n    font-size: var(--sl-font-size-large);\n    margin-left: var(--sl-spacing-2x-small);\n  }\n\n  .tab__close-button::part(base) {\n    padding: var(--sl-spacing-3x-small);\n  }\n`;\n\nexport {\n  tab_styles_default\n};\n","import {\n  autoIncrement\n} from \"./chunk.KFR7NC2M.js\";\nimport {\n  tab_styles_default\n} from \"./chunk.ETKBJAAO.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab/tab.ts\nvar SlTab = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.attrId = autoIncrement();\n    this.componentId = `sl-tab-${this.attrId}`;\n    this.panel = \"\";\n    this.active = false;\n    this.closable = false;\n    this.disabled = false;\n  }\n  focus(options) {\n    this.tab.focus(options);\n  }\n  blur() {\n    this.tab.blur();\n  }\n  handleCloseClick() {\n    emit(this, \"sl-close\");\n  }\n  render() {\n    this.id = this.id.length > 0 ? this.id : this.componentId;\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      tab: true,\n      \"tab--active\": this.active,\n      \"tab--closable\": this.closable,\n      \"tab--disabled\": this.disabled\n    })}\n        role=\"tab\"\n        aria-disabled=${this.disabled ? \"true\" : \"false\"}\n        aria-selected=${this.active ? \"true\" : \"false\"}\n        tabindex=${this.disabled || !this.active ? \"-1\" : \"0\"}\n      >\n        <slot></slot>\n        ${this.closable ? $`\n              <sl-icon-button\n                part=\"close-button\"\n                exportparts=\"base:close-button__base\"\n                name=\"x\"\n                library=\"system\"\n                label=${this.localize.term(\"close\")}\n                class=\"tab__close-button\"\n                @click=${this.handleCloseClick}\n                tabindex=\"-1\"\n              ></sl-icon-button>\n            ` : \"\"}\n      </div>\n    `;\n  }\n};\nSlTab.styles = tab_styles_default;\n__decorateClass([\n  i(\".tab\")\n], SlTab.prototype, \"tab\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlTab.prototype, \"panel\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTab.prototype, \"active\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTab.prototype, \"closable\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTab.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlTab.prototype, \"lang\", 2);\nSlTab = __decorateClass([\n  n(\"sl-tab\")\n], SlTab);\n\nexport {\n  SlTab\n};\n","import { html } from 'lit';\n\n// Foi utilizado TemplateResult porque o editor.component.ts não usa ShadowDom\nexport const editorStyles = html`\n  <style>\n    :root {\n      --elemento-padding-factor: 20;\n      --eta-font-serif: 'Times New Roman', Times, serif;\n      --eta-font-sans: var(--sl-font-sans);\n    }\n\n    #lx-eta-box {\n      /* display: grid;\n      grid-template-columns: 1fr;\n      grid-template-rows: 42px calc(100% - 30px); */\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    /* #lx-eta-box .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      padding: 3px 10px 3px 10px;\n    } */\n\n    .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n      /* padding: 8px; */\n      display: flex;\n      flex-wrap: wrap;\n      align-items: center;\n      min-height: 55px;\n    }\n    #lx-eta-box .ql-snow.ql-toolbar button,\n    .ql-snow .ql-toolbar button {\n      /* height: 20px !important;\n      padding: 0px !important;\n      width: 24px !important;\n      margin: 0px !important; */\n      background: none;\n      border: none;\n      cursor: pointer;\n      display: inline-block;\n      float: left;\n      height: 24px;\n      padding: 3px 5px;\n      width: 28px;\n    }\n\n    #lx-eta-barra-ferramenta button:focus {\n      outline: 0;\n      border: 0px solid #f1f1f1;\n      -webkit-box-shadow: 0px;\n      box-shadow: none;\n    }\n\n    #lx-eta-barra-ferramenta .lx-eta-ql-button {\n      font-size: 1.1em;\n      color: #444444;\n    }\n\n    .lx-eta-rebate-180-graus {\n      -moz-transform: scaleX(-1);\n      -o-transform: scaleX(-1);\n      -webkit-transform: scaleX(-1);\n      transform: scaleX(-1);\n    }\n\n    #lx-eta-editor {\n      overflow-y: hidden;\n    }\n\n    #lx-eta-editor .ql-editor {\n      /* font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n        'Noto Color Emoji'; */\n      font-family: var(--eta-font-serif);\n      font-size: 18px;\n      line-height: 1.42;\n      color: #646260;\n      text-transform: none !important;\n      padding: 0 10px 0 8px;\n      min-height: 250px;\n      overflow-x: hidden;\n    }\n\n    #lx-eta-editor .ql-editor *:focus {\n      outline: 0;\n      border: 0px solid #f1f1f1;\n      -webkit-box-shadow: 0px;\n      box-shadow: none;\n    }\n\n    #lx-eta-editor .ql-editor label:before {\n      /* content: attr(data-rotulo) ' '; */\n    }\n\n    #toast-msg {\n      padding: 1em;\n      font-size: 1.1em;\n    }\n\n    .lx-eta-dropbtn {\n      background-color: transparent;\n      color: #444444;\n      width: 26px;\n      font-weight: bold;\n      vertical-align: middle;\n      border: none;\n      cursor: pointer;\n      text-align: center;\n    }\n\n    .container__menu sl-button::part(base) {\n      position: absolute;\n      margin: -13px 0 0 -15px;\n      background-color: #e1e1e1;\n      line-height: 20px;\n      height: 23px;\n      color: black;\n      font-weight: bold;\n      font-size: 15px;\n    }\n\n    .container__menu sl-menu-item::part(suffix) {\n      font-size: 14px;\n      padding-left: 20px;\n    }\n\n    .container__menu sl-menu-item:hover .lx-eta-dropbtn {\n      background-color: #e1e1e1;\n    }\n\n    .lx-eta-btn-desfazer {\n      margin-left: 10px;\n    }\n\n    .icon-undo-redo {\n      width: 19px;\n      height: 16px !important;\n    }\n\n    .icon-undo-redo:hover {\n      fill: #0066cc;\n    }\n\n    .icon-negrito {\n      fill: #444;\n    }\n\n    .icon-negrito:hover {\n      fill: #0066cc;\n    }\n\n    .icon-sublinhado {\n      fill: #444;\n    }\n\n    .icon-sublinhado:hover {\n      fill: #0066cc;\n    }\n\n    .lx-eta-dropdown-content-right {\n      right: 0;\n    }\n\n    .ql-snow .ql-hidden {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip::before {\n      content: 'Acesse a norma:';\n    }\n\n    .ql-snow .ql-tooltip a.ql-action::after {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip a.ql-remove::before {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip a.ql-preview {\n      max-width: 300px;\n    }\n\n    .btn--artigoOndeCouber {\n    }\n\n    .container__linha {\n      display: flex;\n      width: 100%;\n    }\n\n    .container__linha--reverse {\n      flex-direction: row-reverse;\n    }\n\n    .container__texto {\n      flex: 1;\n      white-space: pre-wrap;\n    }\n\n    .container_elemento--omissis .container__texto {\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n    }\n\n    .container_elemento--omissis .container__texto--mensagem {\n      flex: 1;\n      display: inline-block;\n    }\n\n    .container_elemento--omissis .texto__rotulo {\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n      flex: none;\n      order: 0;\n      flex-grow: 0;\n    }\n\n    .container_elemento--omissis .texto__dispositivo {\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n      padding: 0px;\n      flex-grow: 1;\n    }\n\n    .container_elemento--omissis .texto__omissis {\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      flex-grow: 1;\n      width: 50px;\n      white-space: nowrap;\n    }\n\n    .elemento-tipo-capitulo .texto__dispositivo,\n    .elemento-tipo-titulo .texto__dispositivo,\n    .elemento-tipo-livro .texto__dispositivo,\n    .elemento-tipo-parte .texto__dispositivo {\n      text-transform: uppercase;\n    }\n\n    .elemento-tipo-secao .texto__dispositivo,\n    .elemento-tipo-subsecao .texto__dispositivo {\n      font-weight: bold;\n    }\n\n    .container__menu {\n      width: 30px;\n      vertical-align: top;\n      text-align: center;\n    }\n\n    .container__elemento--padrao {\n      width: 100%;\n      min-height: 26px;\n      border: 3px solid #ffffff;\n      line-height: 1.42;\n      margin: 0;\n      padding: 0 5px 0 0;\n    }\n\n    .container__elemento--articulacao {\n      width: 100%;\n      min-height: 1px;\n      line-height: 0.42;\n      margin: 1px;\n    }\n\n    .agrupador {\n      text-align: center;\n    }\n\n    label[pode-informar-numeracao='true'] {\n      cursor: pointer;\n      /* border-bottom: 1px dashed; */\n      -webkit-box-shadow: 0px -1px 0px green inset;\n      -moz-box-shadow: 0px -1px 0px green inset;\n      box-shadow: 0px -1px 0px green inset;\n    }\n\n    /* [existenanormaalterada] label:after, */\n    .existencia {\n      font-family: var(--sl-font-sans);\n      position: relative;\n      left: 5px;\n      top: -1px;\n      margin-right: 5px;\n      border: 1px solid green;\n      padding: 0 4px;\n      font-weight: normal;\n      -webkit-border-radius: 4px;\n      -moz-border-radius: 4px;\n      border-radius: 4px;\n      font-size: 12px;\n    }\n\n    .existencia {\n      margin-left: -10px;\n      margin-right: 15px;\n    }\n\n    .existencia:hover {\n      cursor: pointer;\n    }\n\n    /* [existenanormaalterada='true'] label:after {\n      content: 'Existente';\n    }\n\n    [existenanormaalterada='false'] label:after {\n      content: 'Novo';\n    } */\n\n    .texto__rotulo {\n      color: black;\n      font-weight: 600;\n    }\n\n    .texto__rotulo--padrao {\n      display: inline-block;\n      padding-right: 10px; /* Manter padding em vez de margin para evitar problema de layout ao apagar todo o texto do dispositivo.\n        Fica um sublinhado a mais, mas é melhor que a alternativa.\n      */\n    }\n\n    .texto__rotulo--omissis,\n    .tipo-omissis {\n      font-family: var(--sl-font-sans);\n      box-shadow: none;\n    }\n\n    .texto__rotulo--omissis:before,\n    .tipo-omissis {\n      position: relative;\n      left: 0;\n      top: -1px;\n      margin-right: 5px;\n      border: 1px solid green;\n      padding: 0 4px;\n      font-weight: normal;\n      -webkit-border-radius: 4px;\n      -moz-border-radius: 4px;\n      border-radius: 4px;\n      font-size: 12px;\n      white-space: nowrap;\n      display: none;\n    }\n\n    .agrupador .blot-tipo-omissis {\n      display: block;\n    }\n\n    /* .container__texto[tipo-omissis='inciso-caput'] .texto__rotulo--omissis:before {\n      content: ' Incisos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='inciso-paragrafo'] .texto__rotulo--omissis:before {\n      content: ' Incisos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='paragrafo'] .texto__rotulo--omissis:before {\n      content: ' Parágrafos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='alinea'] .texto__rotulo--omissis:before {\n      content: ' Alíneas omitidas ';\n    }\n\n    .container__texto[tipo-omissis='item'] .texto__rotulo--omissis:before {\n      content: ' Itens omitidos ';\n    } */\n\n    .Omissis {\n      word-break: break-all;\n      word-break: break-word;\n      -webkit-hyphens: auto;\n      -moz-hyphens: auto;\n      -ms-hyphens: auto;\n      hyphens: auto;\n    }\n\n    .agrupador .existencia {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .dispositivo--adicionado {\n      color: green;\n    }\n\n    .dispositivo--modificado {\n      color: blue;\n    }\n\n    .dispositivo--suprimido {\n      color: red;\n    }\n\n    .dispositivo--suprimido .texto__dispositivo {\n      text-decoration: line-through;\n    }\n\n    /* .texto--suprimido {\n      text-decoration: line-through;\n    } */\n\n    .ementa {\n      margin-bottom: 30px;\n    }\n\n    .ementa .container__texto {\n      margin-left: 35%;\n    }\n\n    .texto__rotulo--ementa {\n      display: none;\n    }\n\n    .container__elemento--ativo {\n      border: 3px solid #24d421;\n      border-radius: 4px;\n    }\n\n    .mensagem {\n      font-family: var(--sl-font-sans);\n      font-size: 0.8em;\n      font-weight: normal;\n      border: 1px solid;\n      padding: 4px 10px;\n      margin: 2px;\n      display: inline-block;\n      border-radius: 2px;\n    }\n\n    .mensagem--success {\n      color: #155724;\n      background-color: #d4edda;\n      border-color: #c3e6cb;\n    }\n\n    .mensagem--info {\n      color: #0c5460;\n      background-color: #d1ecf1;\n      border-color: #bee5eb;\n    }\n\n    .mensagem--warning {\n      color: #856404;\n      background-color: #fff3cd;\n      border-color: #ffeeba;\n    }\n\n    .mensagem--danger {\n      color: #721c24;\n      background-color: #f8d7da;\n      border-color: #f5c6cb;\n    }\n    .mensagem__fix {\n      color: blue;\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    #lx-eta-buffer {\n      display: none;\n      height: 0px;\n    }\n\n    /* [fecha-aspas]::after {\n      content: '” (' attr(nota-alteracao) ')';\n      font-weight: bold;\n    }\n\n    [abre-aspas]::before {\n      content: '“';\n      font-weight: bold;\n    } */\n\n    .nota-alteracao,\n    .abre-aspas,\n    .fecha-aspas {\n      font-weight: bold;\n    }\n\n    .nota-alteracao-editavel {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    .texto__dispositivo {\n      display: inline;\n      /* background-color: lightblue; */\n    }\n\n    @-moz-document url-prefix() {\n      .agrupador .texto__dispositivo {\n        display: inline-block;\n        min-height: 1rem;\n      }\n    }\n\n    .blot-existencia br,\n    .blot-tipo-omissis br,\n    .agrupador.dispositivo-alteracao p[fecha-aspas] br,\n    .h-artigo br {\n      display: inline; /* faz o BR não pular linha em texto__dispositivo vazio */\n      content: ''; /* descola cursor do rótulo e remove quebra de linha quando \"(NR) */\n    }\n\n    .mobile-buttons {\n      float: right;\n      /* margin-right: 30px; */\n      width: auto !important;\n      display: none !important;\n    }\n\n    .mobile-button {\n      margin-right: 2px;\n      width: auto !important;\n    }\n\n    .mobile-button sl-icon {\n      font-size: 18px;\n    }\n\n    .mobile-button span {\n      vertical-align: 4px;\n    }\n\n    @media (max-width: 768px) {\n      .mobile-buttons {\n        display: inline-block !important;\n      }\n      #chk-em-revisao span {\n        display: none;\n      }\n      .button-navegacao-marca {\n        display: none;\n      }\n    }\n\n    @media (max-width: 640px) {\n      .mobile-button span {\n        display: none;\n      }\n      .mobile-button:last-child {\n        display: none !important;\n      }\n    }\n\n    .revisao-ativa {\n      background-color: #add8e6 !important;\n    }\n\n    [em-revisao='true'] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    [excluido='true'] .texto__dispositivo {\n      text-decoration: line-through;\n      /* background-color: #d3d3d3; */\n    }\n\n    .blot__revisao {\n      padding: 3px 7px;\n      border: 1px solid white;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      top: -1px;\n    }\n\n    .blot__revisao_aceitar {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/check-lg.svg') no-repeat center, white;\n      background-size: 1rem;\n    }\n\n    .blot__revisao_aceitar:hover {\n      filter: invert(100%);\n    }\n\n    .blot__opcoes_diff {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/plus-minus.svg') no-repeat center, white;\n      background-size: 0.8rem;\n      margin-right: 1.2px;\n    }\n\n    .blot__opcoes_diff:hover {\n      filter: invert(100%);\n    }\n\n    .blot__revisao_recusar {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/x.svg') no-repeat center, white;\n      background-size: 1rem;\n    }\n\n    .blot__revisao_recusar:hover {\n      filter: invert(100%);\n    }\n\n    .blot__revisao_aceitar:focus,\n    .blot__opcoes_diff:focus .blot__revisao_recusar:focus {\n      outline: 1px solid #000;\n      border: 1px solid #000;\n    }\n\n    #chk-em-revisao {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    .container__revisao {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      gap: 0.1rem;\n      @media (max-width: 768px) {\n        flex-direction: column;\n      }\n    }\n\n    .container__opcoes {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      margin-left: 0.1rem;\n      gap: 0.1rem;\n      @media (max-width: 768px) {\n        flex-direction: column;\n      }\n    }\n\n    @media (max-width: 480px) {\n      .lx-eta-btn-desfazer {\n        margin-left: 0px;\n      }\n    }\n\n    @media (max-width: 398px) {\n      .btn-dicas {\n        display: none !important;\n      }\n    }\n  </style>\n`;\n","import { Usuario } from './../model/revisao/usuario';\nimport '@shoelace-style/shoelace/dist/components/badge/badge';\nimport '@shoelace-style/shoelace/dist/components/tab-group/tab-group';\nimport '@shoelace-style/shoelace/dist/components/tab-panel/tab-panel';\nimport '@shoelace-style/shoelace/dist/components/tab/tab';\n\nimport { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query, state } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\n\nimport { editorStyles } from '../assets/css/editor.css';\nimport { quillSnowStyles } from '../assets/css/quill.snow.css';\nimport { shoelaceLightThemeStyles } from '../assets/css/shoelace.theme.light.css';\n\nimport { adicionarAlerta } from '../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../model/alerta/acao/removerAlerta';\nimport { Autoria, ColegiadoApreciador, Emenda, Epigrafe, ModoEdicaoEmenda, Parlamentar, RefProposicaoEmendada, OpcoesImpressao, SubstituicaoTermo } from '../model/emenda/emenda';\nimport { buildFakeUrn, getAno, getNumero, getSigla, getTipo } from '../model/lexml/documento/urnUtil';\nimport { rootStore } from '../redux/store';\nimport { ClassificacaoDocumento } from './../model/documento/classificacao';\nimport { ProjetoNorma } from './../model/lexml/documento/projetoNorma';\nimport { ComandoEmendaComponent } from './comandoEmenda/comandoEmenda.component';\nimport { ComandoEmendaModalComponent } from './comandoEmenda/comandoEmenda.modal.component';\nimport { LexmlEtaComponent } from './lexml-eta.component';\nimport { limparAlertas } from '../model/alerta/acao/limparAlertas';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { atualizarUsuarioAction } from '../model/lexml/acao/atualizarUsuarioAction';\nimport { getQuantidadeRevisoesAll, isRevisaoElemento, mostrarDialogDisclaimerRevisao, ordernarRevisoes, removeAtributosDoElemento } from '../redux/elemento/util/revisaoUtil';\nimport { Revisao, RevisaoElemento } from '../model/revisao/revisao';\nimport { ativarDesativarRevisaoAction } from '../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { StateEvent, StateType } from '../redux/state';\nimport { limparRevisaoAction } from '../model/lexml/acao/limparRevisoes';\nimport { aplicarAlteracoesEmendaAction } from '../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { buildContent, getUrn } from '../model/lexml/documento/conversor/buildProjetoNormaFromJsonix';\nimport { generoFromLetra } from '../model/dispositivo/genero';\nimport { SufixosModalComponent } from './sufixos/sufixos.modal.componet';\nimport { Comissao } from './destino/comissao';\nimport { SubstituicaoTermoComponent } from './substituicao-termo/substituicao-termo.component';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './editor-texto-rico/notaRodape';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\n\n/**\n * Parâmetros de inicialização de edição de documento\n */\nexport class LexmlEmendaParametrosEdicao {\n  modo = 'Emenda';\n\n  // Identificação da proposição (texto) emendado.\n  // Opcional se for informada a emenda ou o projetoNorma\n  proposicao?: {\n    sigla: string;\n    numero: string;\n    ano: string;\n    ementa: string;\n  };\n\n  // Preenchido automaticamente se for informada a emenda ou o projetoNorma\n  ementa = '';\n\n  // Texto json da proposição para emenda ou edição estruturada (modo 'emenda' ou 'edicao')\n  // Obrigatório para modo 'emenda'\n  // Opcional para modo 'edicao'\n  projetoNorma?: ProjetoNorma;\n\n  // Emenda a ser aberta para edição\n  emenda?: Emenda;\n\n  // Motivo de uma nova emenda de texto livre\n  // Preenchido automaticamente se for informada a emenda\n  motivo = '';\n\n  // Identificação do usuário para registro de marcas de revisão\n  usuario?: Usuario;\n\n  // Preferências de usuário ----\n\n  // Autoria padrão\n  autoriaPadrao?: { identificacao: string; siglaCasaLegislativa: 'SF' | 'CD' };\n\n  // Opções de impressão padrão\n  opcoesImpressaoPadrao?: { imprimirBrasao: boolean; textoCabecalho: string; tamanhoFonte: number };\n}\n\n@customElement('lexml-emenda')\nexport class LexmlEmendaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Boolean }) existeObserverEmenda = false;\n  @property({ type: Number }) totalAlertas = 0;\n  @property({ type: Boolean }) exibirAjuda = true;\n  @property({ type: Array }) parlamentares: Parlamentar[] = [];\n  @property({ type: Array }) comissoes: Comissao[] | undefined = [];\n  @property({ type: Object }) lexmlEmendaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  private modo: any = ClassificacaoDocumento.EMENDA;\n\n  private urn = '';\n\n  private ementa = '';\n\n  private projetoNorma: any;\n\n  private motivo = '';\n\n  private parlamentaresCarregados = false;\n  private comissoesCarregadas = false;\n\n  // Para forçar atualização da interface\n  @state()\n  private updateState: any;\n\n  @state()\n  private notasRodape: NotaRodape[] = [];\n\n  @state()\n  autoria = new Autoria();\n\n  @query('lexml-substituicao-termo')\n  _substituicaoTermo?: SubstituicaoTermoComponent;\n\n  @query('lexml-eta')\n  _lexmlEta?: LexmlEtaComponent;\n  @query('#editor-texto-rico-emenda')\n  _lexmlEmendaTextoRico;\n  @query('#editor-texto-rico-justificativa')\n  _lexmlJustificativa;\n  @query('lexml-destino')\n  _lexmlDestino;\n  @query('lexml-autoria')\n  _lexmlAutoria;\n  @query('lexml-data')\n  _lexmlData;\n  @query('lexml-opcoes-impressao')\n  _lexmlOpcoesImpressao;\n  @query('#tabs-esquerda')\n  _tabsEsquerda;\n  @query('#tabs-direita')\n  _tabsDireita;\n  @query('lexml-emenda-comando')\n  _lexmlEmendaComando!: ComandoEmendaComponent;\n\n  @query('lexml-emenda-comando-modal')\n  _lexmlEmendaComandoModal!: ComandoEmendaModalComponent;\n\n  @query('sl-split-panel')\n  private slSplitPanel!: any;\n\n  @query('lexml-sufixos-modal')\n  sufixosModal!: SufixosModalComponent;\n\n  async getParlamentares(): Promise<Parlamentar[]> {\n    try {\n      const _response = await fetch(this.lexmlEmendaConfig.urlConsultaParlamentares);\n      const _parlamentares = await _response.json();\n      return _parlamentares.map(p => ({\n        identificacao: p.id + '',\n        nome: p.nome,\n        sexo: p.sexo,\n        siglaPartido: p.siglaPartido,\n        siglaUF: p.siglaUF,\n        siglaCasaLegislativa: p.siglaCasa,\n      }));\n    } catch (err) {\n      console.log('Erro inesperado ao carregar lista de parlamentares');\n      console.log(err);\n    } finally {\n      this.parlamentaresCarregados = true;\n      // this.habilitarBotoes();\n    }\n    return Promise.resolve([]);\n  }\n\n  async getComissoes(): Promise<Comissao[] | undefined> {\n    try {\n      if (!this.lexmlEmendaConfig.urlComissoes) {\n        return Promise.resolve(undefined);\n      }\n      const _response = await fetch(this.lexmlEmendaConfig.urlComissoes);\n      const _comissoes = await _response.json();\n      return _comissoes.map(c => ({\n        siglaCasaLegislativa: c.siglaCasaLegislativa,\n        sigla: c.sigla,\n        nome: c.nome,\n      }));\n    } catch (err) {\n      console.log('Erro inesperado ao carregar lista de comissões');\n      console.log(err);\n    } finally {\n      this.comissoesCarregadas = true;\n      // this.habilitarBotoes();\n    }\n    return Promise.resolve([]);\n  }\n\n  // private habilitarBotoes(): void {\n  //   const botoes = document.querySelectorAll('.lexml-eta-main-header input[type=button]');\n\n  //   if (this.parlamentaresCarregados && this.comissoesCarregadas) {\n  //     botoes.forEach(btn => ((btn as HTMLInputElement).disabled = false));\n  //   } else {\n  //     botoes.forEach(btn => ((btn as HTMLInputElement).disabled = true));\n  //   }\n  // }\n\n  atualizaListaParlamentares(): void {\n    this.getParlamentares().then(parlamentares => (this.parlamentares = parlamentares));\n  }\n\n  atualizaListaComissoes(): void {\n    this.getComissoes().then(comissoes => (this.comissoes = comissoes));\n  }\n\n  private montarColegiadoApreciador(sigla: string, numero: string, ano: string): ColegiadoApreciador {\n    if (sigla.toUpperCase() === 'MPV') {\n      return {\n        siglaCasaLegislativa: 'CN',\n        tipoColegiado: 'Comissão',\n        siglaComissao: `CMMPV ${numero}/${ano}`,\n      };\n    }\n    // Inicialmente registra destino plenário do SF para demais matérias\n    return {\n      siglaCasaLegislativa: 'SF',\n      tipoColegiado: 'Plenário',\n    };\n  }\n\n  private montarLocalFromColegiadoApreciador(colegiado: ColegiadoApreciador): any {\n    return colegiado.tipoColegiado === 'Comissão' ? 'Sala da comissão' : 'Sala das sessões';\n  }\n\n  private montarEmendaBasica(): Emenda {\n    const emenda = new Emenda();\n    emenda.modoEdicao = this.modo;\n    emenda.componentes[0].urn = this.urn;\n    emenda.proposicao = this.montarProposicaoPorUrn(this.urn, this.ementa);\n    return emenda;\n  }\n\n  private montarProposicaoPorUrn(urn: string, ementa: string): RefProposicaoEmendada {\n    if (urn) {\n      return {\n        urn: urn,\n        sigla: getSigla(urn),\n        numero: getNumero(urn),\n        ano: getAno(urn),\n        ementa: ementa,\n        identificacaoTexto: 'Texto inicial',\n      };\n    }\n    return new RefProposicaoEmendada();\n  }\n\n  getEmenda(): Emenda {\n    // Para evitar erros de referência nula quando chamado antes da inicialização do componente\n    if (!this.urn) {\n      return new Emenda();\n    }\n\n    const emenda = this.montarEmendaBasica();\n    const numeroProposicao = emenda.proposicao.numero.replace(/^0+/, '');\n    if (this.isEmendaSubstituicaoTermo()) {\n      emenda.substituicaoTermo = this._substituicaoTermo!.getSubstituicaoTermo();\n      emenda.comandoEmenda = this._substituicaoTermo!.getComandoEmenda(this.urn);\n      emenda.comandoEmendaTextoLivre.texto = '';\n    } else if (this.isEmendaTextoLivre()) {\n      emenda.comandoEmendaTextoLivre.motivo = this.motivo;\n      emenda.comandoEmendaTextoLivre.texto = this._lexmlEmendaTextoRico.texto; // visualizar ? this.removeRevisaoFormat(this._lexmlEmendaTextoRico.texto) : this._lexmlEmendaTextoRico.texto;\n      emenda.anexos = this._lexmlEmendaTextoRico.anexos;\n      emenda.comandoEmendaTextoLivre.textoAntesRevisao = this._lexmlEmendaTextoRico.textoAntesRevisao;\n    } else {\n      emenda.comandoEmendaTextoLivre.texto = '';\n      emenda.componentes[0].dispositivos = this._lexmlEta!.getDispositivosEmenda()!;\n      emenda.comandoEmenda = this._lexmlEta!.getComandoEmenda();\n    }\n    emenda.justificativa = this._lexmlJustificativa.texto; // visualizar ? this.removeRevisaoFormat(this._lexmlJustificativa.texto) : this._lexmlJustificativa.texto;\n    emenda.notasRodape = this._lexmlJustificativa.notasRodape;\n    emenda.autoria = this._lexmlAutoria.getAutoriaAtualizada();\n    emenda.data = this._lexmlData.data || undefined;\n    emenda.opcoesImpressao = this._lexmlOpcoesImpressao.opcoesImpressao;\n    emenda.colegiadoApreciador = this._lexmlDestino.colegiadoApreciador;\n    emenda.epigrafe = new Epigrafe();\n    emenda.epigrafe.texto = 'EMENDA Nº         ';\n    if (emenda.colegiadoApreciador.tipoColegiado !== 'Plenário' && emenda.colegiadoApreciador.siglaComissao) {\n      emenda.epigrafe.texto += `- ${emenda.colegiadoApreciador.siglaComissao}`;\n    }\n\n    const generoProposicao = generoFromLetra(getTipo(emenda.proposicao.urn).genero);\n    emenda.epigrafe.complemento = `(${generoProposicao.artigoDefinidoPrecedidoPreposicaoASingular.trim()} ${emenda.proposicao.sigla} ${numeroProposicao}/${emenda.proposicao.ano})`;\n    emenda.local = this.montarLocalFromColegiadoApreciador(emenda.colegiadoApreciador);\n    emenda.revisoes = this.getRevisoes();\n    emenda.justificativaAntesRevisao = this._lexmlJustificativa.textoAntesRevisao;\n    return emenda;\n  }\n\n  private removeRevisaoFormat(texto: string): string {\n    let novoTexto = '';\n\n    if (texto !== '') {\n      texto = texto.replace(/<ins\\b[^>]*>(.*?)<\\/ins>/s, '');\n      texto = texto.replace(/<del\\b[^>]*>(.*?)<\\/del>/s, '');\n      novoTexto = texto;\n    }\n\n    return novoTexto;\n  }\n\n  private getRevisoes(): Revisao[] {\n    const revisoes = ordernarRevisoes([...rootStore.getState().elementoReducer.revisoes]);\n\n    revisoes.filter(isRevisaoElemento).forEach(r => {\n      const re = r as RevisaoElemento;\n      removeAtributosDoElemento(re.elementoAposRevisao);\n      re.elementoAntesRevisao && removeAtributosDoElemento(re.elementoAntesRevisao);\n    });\n\n    return revisoes;\n  }\n\n  openModalSufixos(): void {\n    if (this.sufixosModal !== null) {\n      this.sufixosModal.show();\n    }\n  }\n\n  inicializarEdicao(params: LexmlEmendaParametrosEdicao): void {\n    this._lexmlEmendaComando.emenda = [];\n    this.modo = params.modo;\n    this.projetoNorma = params.projetoNorma;\n\n    this.inicializaProposicao(params);\n\n    this.motivo = params.motivo;\n    if (this.isEmendaTextoLivre() && params.emenda) {\n      this.motivo = params.emenda.comandoEmendaTextoLivre.motivo || 'Motivo não informado na emenda';\n    }\n\n    if (!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo()) {\n      this._lexmlEta!.inicializarEdicao(this.modo, this.urn, params.projetoNorma, !!params.emenda);\n    }\n\n    if (params.emenda) {\n      this.setEmenda(params.emenda);\n    } else {\n      this.resetaEmenda(params);\n    }\n\n    this.limparAlertas();\n\n    if (this.isEmendaTextoLivre() && !this._lexmlEmendaTextoRico.texto) {\n      this.showAlertaEmendaTextoLivre();\n    }\n    this.setUsuario(params.usuario ?? rootStore.getState().elementoReducer.usuario);\n    setTimeout(this.handleResize, 0);\n\n    if (!params.emenda?.revisoes?.length) {\n      this.desativarMarcaRevisao();\n    }\n\n    this._tabsEsquerda.show('lexml-eta');\n\n    if (this.modo.startsWith('emenda') && !this.isEmendaTextoLivre()) {\n      setTimeout(() => {\n        this._tabsDireita?.show('comando');\n      });\n    } else {\n      setTimeout(() => {\n        this._tabsDireita?.show('notas');\n      });\n    }\n\n    this.updateView();\n  }\n\n  private inicializaProposicao(params: LexmlEmendaParametrosEdicao): void {\n    this.urn = '';\n    this.ementa = '';\n\n    if (params.proposicao) {\n      // Preferência para a proposição informada\n      this.urn = buildFakeUrn(params.proposicao.sigla, params.proposicao.numero, params.proposicao.ano);\n      this.ementa = params.proposicao.ementa; // Preferência para a ementa informada\n    }\n\n    // Se não forem informados, utilizar da Emenda\n    if (params.emenda) {\n      if (!this.urn) {\n        this.urn = params.emenda.proposicao.urn;\n      }\n      if (!this.ementa) {\n        this.ementa = params.emenda.proposicao.ementa;\n      }\n    }\n\n    // Por último do ProjetoNorma\n    if (this.projetoNorma) {\n      if (!this.urn) {\n        this.urn = getUrn(this.projetoNorma);\n      }\n      if (!this.ementa) {\n        this.ementa = this.getEmentaFromProjetoNorma(this.projetoNorma);\n      }\n    }\n  }\n\n  getEmentaFromProjetoNorma(projetoNorma: any): string {\n    return buildContent(projetoNorma.value?.projetoNorma?.norma?.parteInicial?.ementa.content);\n  }\n\n  stateChanged(state: any): void {\n    const revisaoAtivada = state?.elementoReducer?.ui?.events?.some((ev: StateEvent) => ev.stateType === StateType.RevisaoAtivada);\n    const revisaoDesativada = state?.elementoReducer?.ui?.events?.some((ev: StateEvent) => ev.stateType === StateType.RevisaoDesativada);\n    revisaoAtivada && this.mostrarDialogDisclaimerRevisao();\n    if (revisaoAtivada || revisaoDesativada) {\n      this.emitiEventoOnRevisao(rootStore.getState().elementoReducer.emRevisao);\n    }\n  }\n\n  private emitiEventoOnRevisao(emRevisao: boolean): void {\n    this.dispatchEvent(\n      new CustomEvent('onrevisao', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          emRevisao,\n        },\n      })\n    );\n  }\n\n  private desativarMarcaRevisao = (): void => {\n    if (rootStore.getState().elementoReducer.emRevisao) {\n      const quantidade = getQuantidadeRevisoesAll(rootStore.getState().elementoReducer.revisoes);\n      if (quantidade === 0) {\n        rootStore.dispatch(ativarDesativarRevisaoAction.execute(quantidade));\n      }\n    }\n  };\n\n  public setUsuario(usuario = new Usuario()): void {\n    rootStore.dispatch(atualizarUsuarioAction.execute(usuario));\n  }\n\n  private setEmenda(emenda: Emenda): void {\n    rootStore.dispatch(limparAlertas());\n\n    if (!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo()) {\n      this._lexmlEta!.setDispositivosERevisoesEmenda(emenda.componentes[0].dispositivos, emenda.revisoes);\n    }\n\n    this._lexmlAutoria.autoria = emenda.autoria;\n    this._lexmlOpcoesImpressao.opcoesImpressao = emenda.opcoesImpressao;\n    this._lexmlJustificativa.setTextoAntesRevisao(emenda.justificativaAntesRevisao);\n    this._lexmlDestino.colegiadoApreciador = emenda.colegiadoApreciador;\n    this._lexmlDestino.proposicao = emenda.proposicao;\n    this.notasRodape = emenda.notasRodape || [];\n    this._lexmlJustificativa.setContent(emenda.justificativa, emenda.notasRodape);\n\n    if (this.isEmendaTextoLivre()) {\n      this._lexmlEmendaTextoRico.setContent(emenda?.comandoEmendaTextoLivre.texto || '');\n      this._lexmlEmendaTextoRico.anexos = emenda.anexos || [];\n      this._lexmlEmendaTextoRico.setTextoAntesRevisao(emenda.comandoEmendaTextoLivre.textoAntesRevisao);\n      rootStore.dispatch(aplicarAlteracoesEmendaAction.execute(emenda.componentes[0].dispositivos, emenda.revisoes));\n    } else if (this.isEmendaSubstituicaoTermo()) {\n      this._substituicaoTermo!.setSubstituicaoTermo(emenda.substituicaoTermo || new SubstituicaoTermo());\n    }\n    this._lexmlData.data = emenda.data;\n  }\n\n  private resetaEmenda(params: LexmlEmendaParametrosEdicao): void {\n    const emenda = new Emenda();\n    emenda.modoEdicao = params.modo as ModoEdicaoEmenda;\n    emenda.proposicao = this.montarProposicaoPorUrn(this.urn, params.ementa);\n    emenda.autoria = this.montarAutoriaPadrao(params);\n    emenda.opcoesImpressao = this.montarOpcoesImpressaoPadrao(params);\n    this._lexmlEmendaComando.emenda = {};\n    this.setEmenda(emenda);\n    rootStore.dispatch(limparRevisaoAction.execute());\n  }\n\n  private montarAutoriaPadrao(params: LexmlEmendaParametrosEdicao): Autoria {\n    const autoria = new Autoria();\n    const autoriaPadrao = params.autoriaPadrao;\n    const parlamentarAutor = this.parlamentares.find(par => par.identificacao === autoriaPadrao?.identificacao && par.siglaCasaLegislativa === autoriaPadrao?.siglaCasaLegislativa);\n\n    if (parlamentarAutor) {\n      autoria.parlamentares = [parlamentarAutor];\n    }\n    return autoria;\n  }\n\n  private montarOpcoesImpressaoPadrao(params: LexmlEmendaParametrosEdicao): OpcoesImpressao {\n    const opcoesImpressao = new OpcoesImpressao();\n    if (params.opcoesImpressaoPadrao) {\n      opcoesImpressao.imprimirBrasao = params.opcoesImpressaoPadrao.imprimirBrasao;\n      opcoesImpressao.textoCabecalho = params.opcoesImpressaoPadrao.textoCabecalho;\n      opcoesImpressao.tamanhoFonte = params.opcoesImpressaoPadrao.tamanhoFonte;\n    }\n    return opcoesImpressao;\n  }\n\n  constructor() {\n    super();\n    this.addEventListener(NOTA_RODAPE_CHANGE_EVENT, this.onChangeNotasRodape);\n    this.addEventListener(NOTA_RODAPE_REMOVE_EVENT, this.onChangeNotasRodape);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  private MOBILE_WIDTH = 768;\n  private splitPanelPosition = 67;\n  private sizeMode = '';\n\n  private updateLayoutSplitPanel(forceUpdate = false): void {\n    if (this.sizeMode === 'desktop') {\n      this.slSplitPanel.position = this.splitPanelPosition;\n    }\n\n    if (window.innerWidth <= this.MOBILE_WIDTH && (this.sizeMode !== 'mobile' || forceUpdate)) {\n      this.sizeMode = 'mobile';\n      this.slSplitPanel.position = 100;\n      this.slSplitPanel.setAttribute('disabled', 'true');\n    } else if (window.innerWidth > this.MOBILE_WIDTH && (this.sizeMode !== 'desktop' || forceUpdate)) {\n      this.sizeMode = 'desktop';\n      this.slSplitPanel.position = this.splitPanelPosition;\n      this.slSplitPanel.removeAttribute('disabled');\n    }\n  }\n\n  // Documentação de tratamento de eventos no Lit\n  // https://lit.dev/docs/components/events/\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  disconnectedCallback(): void {\n    window.removeEventListener('resize', this.handleResize);\n    super.disconnectedCallback();\n  }\n\n  handleResize = (): void => {\n    this.updateLayoutSplitPanel();\n    this.ajustarAltura();\n  };\n\n  protected firstUpdated(): void {\n    // this.habilitarBotoes();\n    setTimeout(() => this.atualizaListaParlamentares(), 0);\n    setTimeout(() => this.atualizaListaComissoes(), 0);\n\n    this._tabsEsquerda?.addEventListener('sl-tab-show', (event: any) => {\n      const tabName = event.detail.name;\n      if (tabName === 'avisos') {\n        const badge = (event.target as Element).querySelector('sl-badge');\n        if (badge) {\n          badge.pulse = false;\n        }\n      } else if (tabName === 'autoria') {\n        this.parlamentares.length === 0 && this.atualizaListaParlamentares();\n        this.comissoes?.length === 0 && this.atualizaListaComissoes();\n      }\n    });\n\n    this.slSplitPanel.addEventListener('sl-reposition', () => {\n      this.ajustarAltura();\n    });\n\n    const badgeAtalhos = this._tabsDireita?.querySelector('#badgeAtalhos');\n    if (badgeAtalhos) {\n      const naoPulsarBadgeAtalhos = localStorage.getItem('naoPulsarBadgeAtalhos');\n      if (!naoPulsarBadgeAtalhos) {\n        badgeAtalhos.pulse = true;\n        badgeAtalhos.setAttribute('variant', 'warning');\n      }\n    }\n\n    this._tabsDireita?.addEventListener('sl-tab-show', (event: any) => {\n      const tabName = event.detail.name;\n      if (tabName === 'atalhos') {\n        const badge = (event.target as Element).querySelector('sl-badge');\n        if (badge) {\n          badge.pulse = false;\n          badge.setAttribute('variant', 'primmay');\n        }\n        localStorage.setItem('naoPulsarBadgeAtalhos', 'true');\n      }\n    });\n  }\n\n  updated(): void {\n    // if (this.modo.startsWith('emenda') && !this.isEmendaTextoLivre()) {\n    //   this.slSplitPanel.removeAttribute('disabled');\n    //   this.slSplitPanel.position = this.splitPanelPosition;\n    // } else {\n    //   this.slSplitPanel.setAttribute('disabled', 'true');\n    //   this.slSplitPanel.position = 100;\n    // }\n  }\n\n  private pesquisarAlturaParentElement(elemento): number {\n    if (elemento.parentElement === null) {\n      // chegou no HTML e não encontrou altura\n      return 0;\n    } else {\n      const minHeight = getComputedStyle(this).getPropertyValue('--min-height').replace('px', '');\n      if (elemento.clientHeight >= minHeight) {\n        return elemento.clientHeight;\n      } else {\n        return this.pesquisarAlturaParentElement(elemento.parentElement);\n      }\n    }\n  }\n\n  private ajustarAltura(altura?: number): boolean {\n    const alturaElementoBase = altura ?? this.pesquisarAlturaParentElement(this);\n    const lexmlEtaTabs = document.querySelector('sl-tab-group')?.shadowRoot?.querySelector('.tab-group__nav-container');\n    const alturaLexmlEtaTabs = lexmlEtaTabs?.clientHeight;\n\n    if (!alturaLexmlEtaTabs) return false;\n\n    const alturaElemento = alturaElementoBase - alturaLexmlEtaTabs - 12;\n    if (alturaElemento <= 0) return false;\n\n    const getElement = (selector: string) => document.querySelector(selector) as HTMLElement;\n\n    const justificativaTabPanel = getElement('sl-tab-panel[name=\"justificativa\"]');\n    const emendaTabPanel = getElement('sl-tab-panel[name=\"lexml-eta\"]');\n    const qlToolbarJustificativa = getElement('#editor-texto-rico-justificativa .ql-toolbar');\n    const qlToolbarEmenda = getElement('#lx-eta-barra-ferramenta');\n\n    const estilosOriginais = {\n      justificativa: {\n        display: justificativaTabPanel.style.display,\n        opacity: justificativaTabPanel.style.opacity,\n        pointerEvents: justificativaTabPanel.style.pointerEvents,\n      },\n      emenda: {\n        display: emendaTabPanel.style.display,\n        opacity: emendaTabPanel.style.opacity,\n        pointerEvents: emendaTabPanel.style.pointerEvents,\n      },\n    };\n\n    const setTabPanelStyles = (tabPanel: HTMLElement, estilos: any, isTemporary = false) => {\n      if (isTemporary) {\n        tabPanel.style.opacity = '0';\n        tabPanel.style.pointerEvents = 'none';\n        tabPanel.style.display = 'block';\n      } else {\n        tabPanel.style.opacity = estilos.opacity;\n        tabPanel.style.pointerEvents = estilos.pointerEvents;\n        tabPanel.style.display = estilos.display;\n      }\n    };\n\n    if (estilosOriginais.justificativa.display === 'none') {\n      setTabPanelStyles(justificativaTabPanel, estilosOriginais.justificativa, true);\n    }\n    if (estilosOriginais.emenda.display === 'none') {\n      setTabPanelStyles(emendaTabPanel, estilosOriginais.emenda, true);\n    }\n\n    const alturaToolBarJustificativa = qlToolbarJustificativa?.clientHeight + 10;\n    const alturaToolBarEmenda = qlToolbarEmenda?.clientHeight + 10;\n\n    setTabPanelStyles(justificativaTabPanel, estilosOriginais.justificativa);\n    setTabPanelStyles(emendaTabPanel, estilosOriginais.emenda);\n\n    this.style.setProperty('--heightJustificativa', `${alturaElemento - alturaToolBarJustificativa}px`);\n    this.style.setProperty('--heightEmenda', `${alturaElemento - alturaToolBarEmenda}px`);\n    this.style.setProperty('--height', `${alturaElemento}px`);\n    this.style.setProperty('--overflow', 'hidden');\n\n    return true;\n  }\n\n  private onChange(): void {\n    let comandoEmenda = null as any;\n    if (this.isEmendaSubstituicaoTermo()) {\n      comandoEmenda = this._substituicaoTermo!.getComandoEmenda(this.urn);\n      this._lexmlEmendaComando.emenda = comandoEmenda;\n      this._lexmlEmendaComandoModal.atualizarComandoEmenda(comandoEmenda);\n    } else if (this.isEmendaTextoLivre()) {\n      if (!this._lexmlJustificativa.texto) {\n        this.disparaAlerta();\n      } else {\n        rootStore.dispatch(removerAlerta('alerta-global-justificativa'));\n      }\n      if (!this._lexmlEmendaTextoRico.texto) {\n        this.showAlertaEmendaTextoLivre();\n      } else {\n        rootStore.dispatch(removerAlerta('alerta-global-emenda-texto-livre'));\n      }\n    }\n\n    if (!this.isEmendaTextoLivre()) {\n      this.buildAlertaJustificativa(comandoEmenda);\n    }\n  }\n\n  buildAlertaJustificativa(comandoEmenda: any): void {\n    if (comandoEmenda === null) {\n      comandoEmenda = this._lexmlEta!.getComandoEmenda();\n      this._lexmlEmendaComando.emenda = comandoEmenda;\n      this._lexmlEmendaComandoModal.atualizarComandoEmenda(comandoEmenda);\n    }\n\n    if (comandoEmenda !== null && comandoEmenda.comandos?.length > 0 && !this._lexmlJustificativa.texto) {\n      this.disparaAlerta();\n    } else {\n      rootStore.dispatch(removerAlerta('alerta-global-justificativa'));\n    }\n  }\n\n  disparaAlerta(): void {\n    const alerta = {\n      id: 'alerta-global-justificativa',\n      tipo: 'error',\n      mensagem: 'A emenda não possui uma justificação',\n      podeFechar: false,\n    };\n    rootStore.dispatch(adicionarAlerta(alerta));\n  }\n\n  getJustificativa(): string {\n    return '';\n  }\n\n  limparAlertas(): void {\n    rootStore.dispatch(limparAlertas());\n  }\n\n  showAlertaEmendaTextoLivre(): void {\n    const alerta = {\n      id: 'alerta-global-emenda-texto-livre',\n      tipo: 'error',\n      mensagem: 'O comando de emenda deve ser preenchido.',\n      podeFechar: false,\n    };\n    rootStore.dispatch(adicionarAlerta(alerta));\n  }\n\n  mostrarDialogDisclaimerRevisao(): void {\n    mostrarDialogDisclaimerRevisao();\n  }\n\n  private isEmendaTextoLivre(): boolean {\n    return this.modo && this.modo === 'emendaTextoLivre';\n  }\n\n  private isEmendaSubstituicaoTermo(): boolean {\n    return this.modo === 'emendaSubstituicaoTermo';\n  }\n\n  private updateView(): void {\n    this.updateState = new Date();\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${shoelaceLightThemeStyles} ${quillSnowStyles} ${editorStyles}\n      <style>\n        :root {\n          --height: 100%;\n          --overflow: visible;\n          --min-height: 300px;\n          --heightJustificativa: 100%;\n          --heightEmenda: 100%;\n          --visibilityNotasAcao: hidden;\n        }\n        sl-tab-panel {\n          --padding: 0px;\n        }\n        sl-tab-panel::part(base) {\n          height: var(--height);\n        }\n        sl-tab-panel.overflow-hidden::part(base) {\n          overflow-y: auto;\n        }\n        lexml-emenda-comando {\n          font-family: var(--eta-font-serif);\n          display: ${this.modo.startsWith('emenda') && !this.isEmendaTextoLivre() ? 'block' : 'none'};\n          height: 100%;\n        }\n        lexml-eta {\n          font-family: var(--eta-font-serif);\n          text-align: left;\n        }\n        /* #editor-texto-rico-justificativa #editor-texto-rico {\n          height: calc(var(--height) - 44px);\n          overflow: var(--overflow);\n        } */\n\n        #editor-texto-rico-emenda-inner {\n          height: calc(var(--heightJustificativa));\n          overflow: var(--overflow);\n        }\n        #editor-texto-rico-justificativa-inner {\n          height: calc(var(--heightJustificativa));\n          overflow: var(--overflow);\n        }\n        .badge-pulse {\n          margin-left: 7px;\n          height: 16px;\n          margin-top: -4px;\n        }\n\n        #badgeAtalhos::part(base) {\n          height: 16px;\n          margin-top: 2px;\n          font-size: var(--sl-font-size-small);\n          background-color: transparent;\n          color: var(--sl-color-neutral-600);\n        }\n        sl-tab[panel='atalhos'][active] #badgeAtalhos::part(base) {\n          color: var(--sl-color-primary-600);\n        }\n\n        sl-split-panel {\n          --divider-width: 15px;\n        }\n        sl-tab sl-icon {\n          margin-right: 5px;\n          font-size: 18px;\n        }\n        .tab-autoria__container {\n          padding: 10px;\n        }\n        .notas-rodape {\n          font-family: var(--eta-font-serif);\n          font-style: normal;\n          padding: 10px;\n        }\n        .notas-rodape h4 {\n          font-family: var(--eta-font-sans);\n          font-style: normal;\n          padding: 1rem 0px 0.5rem;\n          margin: 0px;\n        }\n        .notas-texto-vazio {\n          padding-left: 20px;\n          color: var(--sl-color-gray-500);\n          font-style: italic;\n        }\n\n        .notas-rodape ol {\n          padding-left: 20px;\n          list-style: none;\n          counter-reset: item;\n          margin: 0px;\n        }\n\n        .notas-rodape li {\n          padding: 0px;\n          position: relative;\n          cursor: pointer;\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .notas-rodape li:hover {\n          --visibilityNotasAcao: visible;\n          background-color: var(--sl-color-gray-100);\n        }\n\n        .notas-rodape li::before {\n          content: counter(item);\n          counter-increment: item;\n          position: absolute;\n          width: 20px;\n          left: -20px;\n          top: 4px;\n          font-size: smaller;\n          vertical-align: super;\n          font-weight: bold;\n          font-size: 12px;\n          color: var(--sl-color-gray-500);\n          text-align: right;\n        }\n\n        .notas-texto {\n          flex-grow: 1;\n          cursor: pointer;\n          padding: 5px;\n          color: var(--sl-color-gray-500);\n        }\n\n        .notas-acoes {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n\n        .notas-acao {\n          margin-left: 5px;\n          visibility: var(--visibilityNotasAcao);\n          cursor: pointer;\n        }\n\n        .notas-checkbox {\n          appearance: none;\n          background: transparent;\n          display: none;\n        }\n\n        .notas-checkbox:checked + .notas-texto {\n          color: black;\n          font-style: italic;\n        }\n\n        @media (max-width: 768px) {\n          sl-split-panel {\n            --divider-width: 0px;\n          }\n        }\n      </style>\n\n      <sl-split-panel position=\"67\">\n        <sl-icon slot=\"handle\" name=\"grip-vertical\"></sl-icon>\n        <div slot=\"start\">\n          <sl-tab-group id=\"tabs-esquerda\">\n            <sl-tab slot=\"nav\" panel=\"lexml-eta\">Texto</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"justificativa\">Justificação</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"autoria\">Destino, Data, Autoria e Impressão</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"avisos\">\n              Avisos\n              <div class=\"badge-pulse\" id=\"contadorAvisos\">${this.totalAlertas > 0 ? html` <sl-badge variant=\"danger\" pill pulse>${this.totalAlertas}</sl-badge> ` : ''}</div>\n            </sl-tab>\n            <sl-tab-panel name=\"lexml-eta\" class=\"overflow-hidden\">\n              <lexml-eta\n                style=\"display: ${!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo() ? 'block' : 'none'}\"\n                id=\"lexmlEta\"\n                .lexmlEtaConfig=${this.lexmlEmendaConfig}\n                @onchange=${this.onChange}\n              ></lexml-eta>\n              <editor-texto-rico\n                style=\"display: ${this.isEmendaTextoLivre() ? 'block' : 'none'}\"\n                modo=\"textoLivre\"\n                id=\"editor-texto-rico-emenda\"\n                registroEvento=\"justificativa\"\n                @onchange=${this.onChange}\n              ></editor-texto-rico>\n              <lexml-substituicao-termo style=\"display: ${this.isEmendaSubstituicaoTermo() ? 'block' : 'none'}\" @onchange=${this.onChange}></lexml-substituicao-termo>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"justificativa\" class=\"overflow-hidden\">\n              <editor-texto-rico\n                .lexmlEtaConfig=${this.lexmlEmendaConfig}\n                modo=\"justificativa\"\n                id=\"editor-texto-rico-justificativa\"\n                registroEvento=\"justificativa\"\n                @onchange=${this.onChange}\n              ></editor-texto-rico>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"autoria\" class=\"overflow-hidden\">\n              <div class=\"tab-autoria__container\">\n                <lexml-destino .comissoes=${this.comissoes}></lexml-destino>\n                <br />\n                <lexml-data></lexml-data>\n                <br />\n                <lexml-autoria .parlamentares=${this.parlamentares}></lexml-autoria>\n                <lexml-opcoes-impressao></lexml-opcoes-impressao>\n              </div>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"avisos\" class=\"overflow-hidden\">\n              <lexml-eta-alertas></lexml-eta-alertas>\n            </sl-tab-panel>\n          </sl-tab-group>\n        </div>\n        <div slot=\"end\">\n          <sl-tab-group id=\"tabs-direita\">\n            ${this.tabIsVisible('comando')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"comando\">\n                    <sl-icon name=\"code\"></sl-icon>\n                    Comando\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('notas')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"notas\" title=\"Notas de rodapé\">\n                    <sl-badge variant=\"primary\" id=\"badgeAtalhos\" pill>\n                      <sl-icon name=\"footnote\"></sl-icon>\n                      Notas\n                    </sl-badge>\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('dicas')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"dicas\">\n                    <sl-icon name=\"lightbulb\"></sl-icon>\n                    Dicas\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('atalhos')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"atalhos\">\n                    <sl-badge variant=\"primary\" id=\"badgeAtalhos\" pill>\n                      <sl-icon name=\"keyboard\"></sl-icon>\n                      Atalhos\n                    </sl-badge>\n                  </sl-tab>\n                `\n              : ''}\n            <sl-tab-panel name=\"comando\" class=\"overflow-hidden\">\n              <lexml-emenda-comando></lexml-emenda-comando>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"notas\" class=\"overflow-hidden\">\n              <div class=\"notas-rodape\">\n                <h4>Notas de rodapé</h4>\n                ${this.renderNotasRodape()}\n              </div>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"dicas\" class=\"overflow-hidden\">\n              <lexml-ajuda></lexml-ajuda>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"atalhos\" class=\"overflow-hidden\">\n              <lexml-eta-atalhos></lexml-eta-atalhos>\n            </sl-tab-panel>\n          </sl-tab-group>\n        </div>\n      </sl-split-panel>\n      <lexml-sufixos-modal></lexml-sufixos-modal>\n    `;\n  }\n\n  tabIsVisible(tab: string): boolean {\n    if ((tab === 'atalhos' || tab === 'dicas') && this.modo === 'emendaSubstituicaoTermo') {\n      return false;\n    } else if (tab === 'notas' && (this.isEmendaTextoLivre() || this.modo === 'edicao')) {\n      return true;\n    }\n    return this.modo.startsWith('emenda') && !this.isEmendaTextoLivre();\n  }\n\n  onChangeNotasRodape(): void {\n    this.notasRodape = this._lexmlJustificativa.notasRodape;\n    this.focusOnTab('notas');\n  }\n\n  renderNotasRodape(): TemplateResult {\n    return !this.notasRodape.length\n      ? html`<span class=\"notas-texto-vazio\">Não há notas de rodapé registradas.</span>`\n      : html`\n          <ol>\n            ${this._lexmlJustificativa.notasRodape.map(\n              (nr: NotaRodape) =>\n                html`\n                  <li>\n                    <input type=\"checkbox\" idNotaRodape=\"${nr.id}\" class=\"notas-checkbox\" id=\"checkbox-${nr.id}\" @change=${() => this.selecionarNotaRodape(nr.id)} />\n                    <label for=\"checkbox-${nr.id}\" class=\"notas-texto\">${unsafeHTML(nr.texto)}</label>\n                    <span class=\"notas-acoes\">\n                      <sl-button\n                        class=\"notas-acao\"\n                        variant=\"default\"\n                        size=\"small\"\n                        aria-label=\"Editar nota de rodapé\"\n                        title=\"Editar nota de rodapé\"\n                        idNotaRodape=\"${nr.id}\"\n                        @click=${this.editarNotaRodape}\n                      >\n                        <sl-icon slot=\"prefix\" name=\"pencil-square\"></sl-icon>\n                      </sl-button>\n                      <sl-button\n                        class=\"notas-acao\"\n                        variant=\"default\"\n                        size=\"small\"\n                        aria-label=\"Excluir nota de rodapé\"\n                        title=\"Excluir nota de rodapé\"\n                        idNotaRodape=\"${nr.id}\"\n                        @click=${this.removerNotaRodape}\n                      >\n                        <sl-icon slot=\"prefix\" name=\"trash\"></sl-icon>\n                      </sl-button>\n                    </span>\n                  </li>\n                `\n            )}\n          </ol>\n        `;\n  }\n\n  focusOnTab(tabName: string): void {\n    const tab = this.querySelector(`sl-tab[panel=\"${tabName}\"]`) as HTMLElement | null;\n    if (!tab) return;\n\n    this._tabsDireita?.show('notas');\n\n    if (tabName === 'notas') {\n      const badgeElement = tab?.querySelector('sl-badge');\n      if (!badgeElement) return;\n\n      if (!tab.hasAttribute('active')) {\n        if (tabName === 'notas') {\n          badgeElement.setAttribute('pulse', '');\n          setTimeout(() => {\n            badgeElement.removeAttribute('pulse');\n          }, 4000);\n        }\n      }\n    }\n  }\n\n  localizarNotaRodape(idNotaRodape: any): void {\n    // const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const tab = this.getTabFromElement(notaRodapeElement);\n    this.focusOnTab(tab.getAttribute('name'));\n    notaRodapeElement && setTimeout(() => notaRodapeElement.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);\n    const notasRodape = this.querySelectorAll('.ql-editor nota-rodape');\n    notasRodape.forEach(nr => {\n      if (nr.attributes['id-nota-rodape'].value === idNotaRodape) {\n        nr?.classList.add('pulse');\n      } else {\n        nr.classList.remove('pulse');\n      }\n    });\n  }\n\n  selecionarNotaRodape(idNotaRodape: any): void {\n    const checkbox = document.getElementById(`checkbox-${idNotaRodape}`) as HTMLInputElement | null;\n    if (checkbox) {\n      if (checkbox.checked) {\n        const checkboxes = document.querySelectorAll('.notas-checkbox') as NodeListOf<HTMLInputElement>;\n        checkboxes.forEach(cb => {\n          if (cb.id !== checkbox.id) {\n            cb.checked = false;\n          }\n        });\n        this.localizarNotaRodape(idNotaRodape);\n      } else {\n        this.removerPulsarNotaRodape(idNotaRodape);\n      }\n    }\n  }\n\n  removerPulsarNotaRodape(idNotaRodape: any): void {\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    notaRodapeElement?.classList.remove('pulse');\n  }\n\n  editarNotaRodape(event: any): void {\n    const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const editorTextoRico = this.getEditorTextoRicoFromElement(notaRodapeElement);\n    editorTextoRico?.focus();\n    editorTextoRico.editarNotaRodape(idNotaRodape);\n  }\n\n  removerNotaRodape(event: any): void {\n    const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const editorTextoRico = this.getEditorTextoRicoFromElement(notaRodapeElement);\n    editorTextoRico?.focus();\n    editorTextoRico.removerNotaRodape(idNotaRodape);\n  }\n\n  getEditorTextoRicoFromElement(element: any): any {\n    return element.closest('editor-texto-rico');\n  }\n\n  getTabFromElement(element: any): any {\n    return element.closest('sl-tab-panel');\n  }\n}\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/alert/alert.styles.ts\nvar alert_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: contents;\n\n    /* For better DX, we'll reset the margin here so the base part can inherit it */\n    margin: 0;\n  }\n\n  .alert {\n    position: relative;\n    display: flex;\n    align-items: stretch;\n    background-color: var(--sl-panel-background-color);\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-top-width: calc(var(--sl-panel-border-width) * 3);\n    border-radius: var(--sl-border-radius-medium);\n    box-shadow: var(--box-shadow);\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-small);\n    font-weight: var(--sl-font-weight-normal);\n    line-height: 1.6;\n    color: var(--sl-color-neutral-700);\n    margin: inherit;\n  }\n\n  .alert:not(.alert--has-icon) .alert__icon,\n  .alert:not(.alert--closable) .alert__close-button {\n    display: none;\n  }\n\n  .alert__icon {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-large);\n    padding-left: var(--sl-spacing-large);\n  }\n\n  .alert--primary {\n    border-top-color: var(--sl-color-primary-600);\n  }\n\n  .alert--primary .alert__icon {\n    color: var(--sl-color-primary-600);\n  }\n\n  .alert--success {\n    border-top-color: var(--sl-color-success-600);\n  }\n\n  .alert--success .alert__icon {\n    color: var(--sl-color-success-600);\n  }\n\n  .alert--neutral {\n    border-top-color: var(--sl-color-neutral-600);\n  }\n\n  .alert--neutral .alert__icon {\n    color: var(--sl-color-neutral-600);\n  }\n\n  .alert--warning {\n    border-top-color: var(--sl-color-warning-600);\n  }\n\n  .alert--warning .alert__icon {\n    color: var(--sl-color-warning-600);\n  }\n\n  .alert--danger {\n    border-top-color: var(--sl-color-danger-600);\n  }\n\n  .alert--danger .alert__icon {\n    color: var(--sl-color-danger-600);\n  }\n\n  .alert__message {\n    flex: 1 1 auto;\n    padding: var(--sl-spacing-large);\n    overflow: hidden;\n  }\n\n  .alert__close-button {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-large);\n    padding-right: var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  alert_styles_default\n};\n","import {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  alert_styles_default\n} from \"./chunk.JXDWJJGV.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/alert/alert.ts\nvar toastStack = Object.assign(document.createElement(\"div\"), { className: \"sl-toast-stack\" });\nvar SlAlert = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"icon\", \"suffix\");\n    this.open = false;\n    this.closable = false;\n    this.variant = \"primary\";\n    this.duration = Infinity;\n  }\n  firstUpdated() {\n    this.base.hidden = !this.open;\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  async toast() {\n    return new Promise((resolve) => {\n      if (toastStack.parentElement === null) {\n        document.body.append(toastStack);\n      }\n      toastStack.appendChild(this);\n      requestAnimationFrame(() => {\n        this.clientWidth;\n        this.show();\n      });\n      this.addEventListener(\"sl-after-hide\", () => {\n        toastStack.removeChild(this);\n        resolve();\n        if (toastStack.querySelector(\"sl-alert\") === null) {\n          toastStack.remove();\n        }\n      }, { once: true });\n    });\n  }\n  restartAutoHide() {\n    clearTimeout(this.autoHideTimeout);\n    if (this.open && this.duration < Infinity) {\n      this.autoHideTimeout = window.setTimeout(() => this.hide(), this.duration);\n    }\n  }\n  handleCloseClick() {\n    this.hide();\n  }\n  handleMouseMove() {\n    this.restartAutoHide();\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      if (this.duration < Infinity) {\n        this.restartAutoHide();\n      }\n      await stopAnimations(this.base);\n      this.base.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"alert.show\");\n      await animateTo(this.base, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      clearTimeout(this.autoHideTimeout);\n      await stopAnimations(this.base);\n      const { keyframes, options } = getAnimation(this, \"alert.hide\");\n      await animateTo(this.base, keyframes, options);\n      this.base.hidden = true;\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  handleDurationChange() {\n    this.restartAutoHide();\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      alert: true,\n      \"alert--open\": this.open,\n      \"alert--closable\": this.closable,\n      \"alert--has-icon\": this.hasSlotController.test(\"icon\"),\n      \"alert--primary\": this.variant === \"primary\",\n      \"alert--success\": this.variant === \"success\",\n      \"alert--neutral\": this.variant === \"neutral\",\n      \"alert--warning\": this.variant === \"warning\",\n      \"alert--danger\": this.variant === \"danger\"\n    })}\n        role=\"alert\"\n        aria-live=\"assertive\"\n        aria-atomic=\"true\"\n        aria-hidden=${this.open ? \"false\" : \"true\"}\n        @mousemove=${this.handleMouseMove}\n      >\n        <span part=\"icon\" class=\"alert__icon\">\n          <slot name=\"icon\"></slot>\n        </span>\n\n        <span part=\"message\" class=\"alert__message\">\n          <slot></slot>\n        </span>\n\n        ${this.closable ? $`\n              <sl-icon-button\n                part=\"close-button\"\n                exportparts=\"base:close-button__base\"\n                class=\"alert__close-button\"\n                name=\"x\"\n                library=\"system\"\n                @click=${this.handleCloseClick}\n              ></sl-icon-button>\n            ` : \"\"}\n      </div>\n    `;\n  }\n};\nSlAlert.styles = alert_styles_default;\n__decorateClass([\n  i('[part=\"base\"]')\n], SlAlert.prototype, \"base\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlAlert.prototype, \"open\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlAlert.prototype, \"closable\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlAlert.prototype, \"variant\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlAlert.prototype, \"duration\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlAlert.prototype, \"handleOpenChange\", 1);\n__decorateClass([\n  watch(\"duration\")\n], SlAlert.prototype, \"handleDurationChange\", 1);\nSlAlert = __decorateClass([\n  n(\"sl-alert\")\n], SlAlert);\nsetDefaultAnimation(\"alert.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"alert.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\n\nexport {\n  SlAlert\n};\n","import { LitElement, html, TemplateResult, css, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport '@shoelace-style/shoelace/dist/components/alert/alert.js';\nimport '@shoelace-style/shoelace/dist/components/icon/icon.js';\nimport { connect } from 'pwa-helpers';\nimport { rootStore } from '../../redux/store';\nimport { Alerta } from '../../model/alerta/alerta';\nimport { limparAlertas } from '../../model/alerta/acao/limparAlertas';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\nimport { LexmlEmendaComponent } from '../lexml-emenda.component';\nimport SlBadge from '@shoelace-style/shoelace/dist/components/badge/badge';\n\n@customElement('lexml-eta-alertas')\nexport class AlertasComponent extends connect(rootStore)(LitElement) {\n  static styles = css`\n    sl-alert {\n      --box-shadow: var(--sl-shadow-x-large);\n      margin: 20px;\n    }\n    .alert__close-button {\n      font-size: 1.25rem;\n      float: right;\n    }\n  `;\n\n  @property({ type: Array }) alertas: Alerta[] = [];\n\n  stateChanged(state: any): void {\n    this.alertas = state.elementoReducer.ui?.alertas || [];\n  }\n\n  getAlertIcon(tipo: string): TemplateResult {\n    if (tipo === 'success') {\n      return html`<sl-icon slot=\"icon\" name=\"check2-circle\"></sl-icon>`;\n    } else if (tipo === 'warning') {\n      return html`<sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>`;\n    } else if (tipo === 'danger') {\n      return html`<sl-icon slot=\"icon\" name=\"exclamation-octagon\"></sl-icon>`;\n    } else {\n      return html`<sl-icon slot=\"icon\" name=\"info-circle\"></sl-icon>`;\n    }\n  }\n\n  limparAlertas(): void {\n    // limpa o array de alertas para do state.ui.alertas\n    rootStore.dispatch(limparAlertas());\n  }\n\n  removeAlertaById(id: string): void {\n    rootStore.dispatch(removerAlerta(id));\n  }\n\n  updated(changedProperties: PropertyValues): void {\n    if (changedProperties.has('alertas')) {\n      this.alertas?.forEach(alerta => {\n        this.shadowRoot?.getElementById(alerta.id)?.addEventListener('click', event => {\n          event.stopImmediatePropagation();\n          this.removeAlertaById((event.target as Element).id);\n        });\n      });\n      const lexmlEmenda = document.querySelector('lexml-emenda') as LexmlEmendaComponent;\n      lexmlEmenda.totalAlertas = this.alertas.length;\n      const oldValue = changedProperties.get('alertas')?.length || 0;\n\n      if (lexmlEmenda.totalAlertas > oldValue) {\n        const badge = document.querySelector('#contadorAvisos')?.querySelector('sl-badge') as SlBadge;\n        if (badge) {\n          badge.pulse = true;\n        }\n      }\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${this.alertas.map(\n        alerta =>\n          html` ${alerta.podeFechar\n            ? html`\n                <sl-alert variant=\"${alerta.tipo}\" open>\n                  <sl-icon-button name=\"x\" class=\"alert__close-button\" id=\"${alerta.id}\" label=\"fechar\"></sl-icon-button>\n                  ${this.getAlertIcon(alerta.tipo)} ${alerta.mensagem}\n                </sl-alert>\n              `\n            : html` <sl-alert variant=\"${alerta.tipo}\" open> ${this.getAlertIcon(alerta.tipo)} ${alerta.mensagem} </sl-alert> `}`\n      )}\n    `;\n  }\n}\n","import { LitElement, html, TemplateResult, css } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\n\nimport { connect } from 'pwa-helpers';\nimport { Elemento } from '../../model/elemento';\nimport { ElementoAction, isAcaoMenu } from '../../model/lexml/acao';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { rootStore } from '../../redux/store';\n\n@customElement('lexml-ajuda')\nexport class AjudaComponent extends connect(rootStore)(LitElement) {\n  static styles = css`\n    :host {\n      padding: 0 10px;\n      display: block;\n      font-family: var(--sl-font-sans);\n      font-size: var(--sl-font-size-small);\n      font-weight: var(--sl-font-weight-normal);\n    }\n  `;\n  @state()\n  private elementoSelecionado?: Elemento;\n\n  @state()\n  private acoesMenu: ElementoAction[] = [];\n\n  stateChanged(state: any): void {\n    if (state.elementoReducer.ui?.events && state.elementoReducer.ui.events[0]?.stateType !== 'AtualizacaoAlertas') {\n      this.processarStateEvents(state.elementoReducer.ui.events);\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.ElementoSelecionado:\n        case StateType.ElementoMarcado:\n          if (events[events.length - 1] === event && event.elementos) {\n            this.atualizarAjuda(event.elementos[0]);\n          }\n          break;\n      }\n    });\n  }\n\n  private atualizarAjuda(elemento: Elemento): void {\n    this.elementoSelecionado = elemento;\n    this.acoesMenu = (elemento.acoesPossiveis ?? []).filter((acao: ElementoAction) => isAcaoMenu(acao));\n  }\n\n  render(): TemplateResult {\n    return !this.elementoSelecionado || !this.acoesMenu.length\n      ? html``\n      : html`\n          <p>O que você pode fazer com o dispositivo selecionado:</p>\n          <ul>\n            <li>Sugerir uma nova redação para o dispositivo. Para isso basta alterar o texto do dispositivo selecionado.</li>\n            <li>\n              Adicionar um novo dispositivo após o dispositivo atual. Para isso vá para o final do texto e pressione a tecla\n              <span class=\"badge\">enter</span>.\n            </li>\n          </ul>\n\n          <p>\n            Além disso, clicando no menu de ações\n            <span class=\"badge\"><strong>⋮</strong></span> que fica à esquerda do dispositivo selecionado você também pode:\n          </p>\n          <ul>\n            ${this.acoesMenu.map(am => html` <li>${am.descricao}</li> `)}\n          </ul>\n        `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-ajuda': AjudaComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\n@customElement('lexml-ajuda-modal')\nexport class AjudaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Dicas\">\n        <lexml-ajuda></lexml-ajuda>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-ajuda-modal': AjudaModalComponent;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { LitElement, html, css, TemplateResult } from 'lit';\n\n@customElement('lexml-sufixos-modal')\nexport class SufixosModalComponent extends LitElement {\n  @property({ type: Number }) private step = 1;\n  @query('sl-dialog') private slDialog!: any;\n\n  static styles = css`\n    .footer-container {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      flex-wrap: wrap; /* Quebra de linha no mobile ou quando o espaço for insuficiente */\n    }\n\n    .footer-container sl-switch {\n      order: 1; /* Garante que o switch sempre venha primeiro */\n      margin-right: auto; /* Empurra qualquer conteúdo à sua direita para o canto mais distante */\n    }\n\n    .footer-container sl-button {\n      order: 2; /* Garante que o botão sempre venha depois do switch */\n      margin-left: auto; /* Empurra qualquer conteúdo à sua esquerda para o canto mais distante */\n    }\n  `;\n\n  public show(): void {\n    const noShowAgain = localStorage.getItem('naoMostrarExplicacaoSufixo');\n    const noShowAgainSwitch = this.shadowRoot?.querySelector('#noShowAgain') as any;\n    if (noShowAgain && noShowAgainSwitch) {\n      noShowAgainSwitch.checked = true;\n    }\n    this.slDialog.show();\n  }\n\n  private handleSwitchChange(event: any): void {\n    const isChecked = event.target.checked;\n    if (isChecked) {\n      localStorage.setItem('naoMostrarExplicacaoSufixo', 'true');\n    } else {\n      localStorage.removeItem('naoMostrarExplicacaoSufixo');\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog>\n        <span slot=\"label\">Sufixos de posicionamento</span>\n\n        <div>\n          <p>\n            Os sufixos na numeração de dispositivos, como -1, -2 e assim por diante, são usados para orientar o posicionamento na redação final. Eles não indicam uma numeração\n            definitiva.\n          </p>\n          <p>Os dispositivos propostos e adjacentes deverão ser devidamente renumerados no momento da consolidação das emendas ao texto da proposição pela Redação Final.</p>\n        </div>\n\n        <div slot=\"footer\" class=\"footer-container\">\n          <sl-switch id=\"noShowAgain\" @sl-change=${this.handleSwitchChange}> Não mostrar novamente </sl-switch>\n\n          <sl-button variant=\"default\" @click=${(): void => this.slDialog.hide()}> Fechar </sl-button>\n        </div>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-sufixos-modal': SufixosModalComponent;\n  }\n}\n","import { ComandoEmenda } from './../../model/emenda/emenda';\nimport { ComandoEmendaComponent } from './comandoEmenda.component';\nimport { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-emenda-comando-modal')\nexport class ComandoEmendaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('#comando-emenda-modal')\n  private lexmlComandoEmenda!: ComandoEmendaComponent;\n\n  @property({ type: Object })\n  private comandoEmenda?: ComandoEmenda;\n\n  public atualizarComandoEmenda(comandoEmenda: ComandoEmenda): void {\n    this.lexmlComandoEmenda.emenda = comandoEmenda;\n  }\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Comando\">\n        <lexml-emenda-comando id=\"comando-emenda-modal\" .emenda=${this.comandoEmenda}></lexml-emenda-comando>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-emenda-comando-modal': ComandoEmendaModalComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\n@customElement('lexml-atalhos-modal')\nexport class AtalhosModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Atalhos\">\n        <lexml-eta-atalhos></lexml-eta-atalhos>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-atalhos-modal': AtalhosModalComponent;\n  }\n}\n","import { css, html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { OpcoesImpressao } from '../../model/emenda/emenda';\nimport { SlSelect } from '@shoelace-style/shoelace';\n\n@customElement('lexml-opcoes-impressao')\nexport class OpcoesImpressaoComponent extends LitElement {\n  @query('#select-tamanho-fonte')\n  tamanhoFonte!: SlSelect;\n\n  private _opcoesImpressao!: OpcoesImpressao;\n  @property({ type: Object, state: true })\n  set opcoesImpressao(value: OpcoesImpressao) {\n    this._opcoesImpressao = value ? value : new OpcoesImpressao();\n    this.requestUpdate();\n  }\n\n  get opcoesImpressao(): OpcoesImpressao {\n    return this._opcoesImpressao;\n  }\n\n  private timerEmitirEventoOnChange = 0;\n\n  static styles = css`\n    .lexml-opcoes-impressao {\n      display: block;\n      margin: 20px 0 80px 0;\n      font-size: 1em;\n      max-width: 700px;\n    }\n  `;\n\n  protected firstUpdated(): void {\n    this.tamanhoFonte.addEventListener('sl-change', (ev: Event) => this._atualizarTamanhoFonte(ev));\n  }\n  render(): TemplateResult {\n    return html`\n      <style>\n        sl-radio-group::part(base) {\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n        }\n        sl-radio-group::part(label) {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n\n        sl-input::part(form-control) {\n        }\n        sl-input::part(base) {\n        }\n        @media (max-width: 480px) {\n          sl-input::part(base) {\n          }\n        }\n        sl-select {\n          max-width: 400px;\n        }\n      </style>\n\n      <sl-radio-group label=\"Opções de impressão\" fieldset class=\"lexml-opcoes-impressao\">\n        <div>\n          <sl-checkbox id=\"chk-imprimir-brasao\" ?checked=${this._opcoesImpressao?.imprimirBrasao} @input=${(ev: Event): void => this._atualizarImprimirBrasao(ev)}></sl-checkbox>\n          <label for=\"chk-imprimir-brasao\">Imprimir brasão</label>\n        </div>\n        <sl-input\n          type=\"text\"\n          id=\"input-cabecalho\"\n          name=\"textoCabecalho\"\n          label=\"Texto do cabeçalho\"\n          value=${this._opcoesImpressao?.textoCabecalho}\n          @input=${(ev: Event): void => this._atualizarTextoCabecalho(ev)}\n        ></sl-input>\n        <div>\n          <sl-select id=\"select-tamanho-fonte\" label=\"Tamanho da letra\" size=\"small\" value=${this._opcoesImpressao?.tamanhoFonte}>\n            <sl-menu-item value=\"14\">14</sl-menu-item>\n            <sl-menu-item value=\"16\">16</sl-menu-item>\n            <sl-menu-item value=\"18\">18</sl-menu-item>\n          </sl-select>\n        </div>\n        <div>\n          <sl-checkbox\n            id=\"chk-reduzir-espaco\"\n            ?checked=${this._opcoesImpressao?.reduzirEspacoEntreLinhas}\n            @click=${(ev: Event): void => this._atualizarReduzirEspacoEntreLinhas(ev)}\n          ></sl-checkbox>\n          <label for=\"chk-reduzir-espaco\">Reduzir espaço entre linhas</label>\n        </div>\n      </sl-radio-group>\n    `;\n  }\n\n  private _atualizarTextoCabecalho(ev: Event): void {\n    this._opcoesImpressao.textoCabecalho = (ev.target as HTMLInputElement).value;\n    this.requestUpdate();\n  }\n\n  private _atualizarImprimirBrasao(ev: Event): void {\n    this._opcoesImpressao.imprimirBrasao = (ev.target as HTMLInputElement).checked;\n    this.requestUpdate();\n  }\n\n  private _atualizarTamanhoFonte(ev: Event): void {\n    const valorFonte = parseInt((ev.target as SlSelect).value as string);\n    this._opcoesImpressao.tamanhoFonte = valorFonte;\n    this.requestUpdate();\n  }\n\n  private _atualizarReduzirEspacoEntreLinhas(ev: Event): void {\n    this._opcoesImpressao.reduzirEspacoEntreLinhas = (ev.target as HTMLInputElement).checked;\n    this.requestUpdate();\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-opcoes-impressao': OpcoesImpressaoComponent;\n  }\n}\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { Observable } from '../../util/observable';\nimport { ativarDesativarMarcaDeRevisao, atualizaQuantidadeRevisao, getQuantidadeRevisoesAll, setCheckedElement } from '../../redux/elemento/util/revisaoUtil';\nimport { rootStore } from '../../redux/store';\nimport { connect } from 'pwa-helpers';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { alertarInfo } from '../../redux/elemento/util/alertaUtil';\n\n@customElement('lexml-switch-revisao')\nexport class SwitchRevisaoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Number })\n  quantidadeRevisao = 0;\n\n  @property({ type: String })\n  nomeSwitch = '';\n\n  @property({ type: String })\n  nomeBadgeQuantidadeRevisao = '';\n\n  @property({ type: Boolean, reflect: true })\n  checkedRevisao = false;\n\n  @property({ type: String })\n  modo = '';\n\n  onChange: Observable<string> = new Observable<string>();\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  stateChanged(state: any): void {\n    if (state.elementoReducer.ui) {\n      if (state.elementoReducer.ui.events) {\n        if (state.elementoReducer.ui.message && state.elementoReducer.ui.events[0]?.stateType === 'AtualizacaoAlertas') {\n          alertarInfo(state.elementoReducer.ui.message.descricao);\n        }\n        this.processarStateEvents(state.elementoReducer.ui.events);\n      }\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.RevisaoAtivada:\n        case StateType.RevisaoDesativada:\n          this.checkedSwitchMarcaAlteracao();\n          break;\n      }\n\n      this.atualizaQuantidadeRevisao();\n    });\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        #revisoes-justificativa-icon sl-icon {\n          border: 1px solid #ccc !important;\n          padding: 0.4rem 0.4rem !important;\n          border-radius: 15px !important;\n          font-weight: bold;\n          background-color: #eee;\n          cursor: pointer;\n        }\n\n        #revisoes-texto-livre-icon sl-icon {\n          border: 1px solid #ccc !important;\n          padding: 0.4rem 0.4rem !important;\n          border-radius: 15px !important;\n          font-weight: bold;\n          background-color: #eee;\n          cursor: pointer;\n        }\n        #chk-em-revisao {\n          border: 1px solid #ccc !important;\n          padding: 5px 10px !important;\n          border-radius: 20px !important;\n          margin-left: auto;\n          margin-right: 5px;\n          font-weight: bold;\n          background-color: #eee;\n        }\n        #chk-em-revisao[checked] {\n          background-color: var(--sl-color-blue-100);\n        }\n        .revisao-container {\n          margin-left: auto;\n        }\n        .sl-toast-stack sl-alert::part(base) {\n          background-color: var(--sl-color-danger-100);\n        }\n        @media (max-width: 992px) {\n          .mobile-buttons {\n            display: inline-block !important;\n          }\n          #chk-em-revisao span {\n            display: none;\n          }\n        }\n      </style>\n      <div id=\"toolbar\">\n        <sl-switch id=\"${this.nomeSwitch}\" size=\"small\" @sl-change=${(): void => this.ativarDesativarMarcaDeRevisao()}>\n          <span>Marcas de revisão</span>\n          <sl-badge id=\"${this.nomeBadgeQuantidadeRevisao}\" variant=\"warning\" pill>0</sl-badge>\n        </sl-switch>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n  }\n\n  private atualizaQuantidadeRevisao = (): void => {\n    atualizaQuantidadeRevisao(rootStore.getState().elementoReducer.revisoes, document.getElementById(this.nomeBadgeQuantidadeRevisao) as any, this.modo);\n  };\n\n  public ativarDesativarMarcaDeRevisao(consideraQuantidade = true): void {\n    const quantidade = getQuantidadeRevisoesAll(rootStore.getState().elementoReducer.revisoes);\n    ativarDesativarMarcaDeRevisao(rootStore, consideraQuantidade ? quantidade : 0);\n    this.checkedSwitchMarcaAlteracao();\n  }\n\n  private checkedSwitchMarcaAlteracao = (): void => {\n    const switchMarcaAlteracaoView = document.getElementById(this.nomeSwitch) as any;\n    setCheckedElement(switchMarcaAlteracaoView, rootStore.getState().elementoReducer.emRevisao);\n  };\n}\n","import { LitElement, TemplateResult, css, html } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\nimport { ComandoEmenda, SubstituicaoTermo } from '../../model/emenda/emenda';\nimport { ComandoEmendaBuilder } from '../../emenda/comando-emenda-builder';\n\n@customElement('lexml-substituicao-termo')\nexport class SubstituicaoTermoComponent extends LitElement {\n  static styles = css`\n    span.alerta {\n      color: red;\n    }\n\n    fieldset {\n      display: flex;\n      flex-direction: column;\n      gap: 1em;\n      background-color: var(--sl-color-gray-100);\n      box-shadow: var(--sl-shadow-x-large);\n      flex-wrap: wrap;\n      padding: 20px 20px;\n      margin: 10px;\n      border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n      border-radius: var(--sl-border-radius-medium);\n    }\n\n    legend {\n      background-color: var(--sl-color-gray-200);\n      font-weight: bold;\n      border-radius: 5px;\n      border: 1px solid var(--sl-color-gray-300);\n      padding: 2px 5px;\n      box-shadow: var(--sl-shadow-small);\n    }\n\n    sl-radio-group::part(base) {\n      display: flex;\n      flex-direction: row;\n      gap: 20px;\n    }\n    #flexaoGenero {\n      margin-left: 20px;\n    }\n  `;\n\n  @query('#tipoSubstituicaoTermo')\n  elTipoSubstituicaoTermo!: HTMLInputElement;\n\n  @query('#termoASerSubstituido')\n  elTermoASerSubstituido!: HTMLInputElement;\n\n  @query('#novoTermo')\n  elNovoTermo!: HTMLInputElement;\n\n  @query('#alertaTermoASerSubstituido')\n  elAlertaTermoASerSubstituido!: HTMLSpanElement;\n\n  @query('#alertaNovoTermo')\n  elAlertaNovoTermo!: HTMLSpanElement;\n\n  @query('#flexaoGenero')\n  elFlexaoGenero!: HTMLInputElement;\n\n  @query('#flexaoNumero')\n  elFlexaoNumero!: HTMLInputElement;\n\n  private timerEmitirEventoOnChange = 0;\n\n  private onDadosAlterados(evt?: Event): void {\n    const el = evt?.target as HTMLInputElement;\n    el === this.elTermoASerSubstituido && this.elAlertaTermoASerSubstituido.style.setProperty('visibility', el.value ? 'hidden' : 'unset');\n    el === this.elNovoTermo && this.elAlertaNovoTermo.style.setProperty('visibility', el.value ? 'hidden' : 'unset');\n    this.agendarEmissaoEventoOnChange();\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento = 'substituicao-termo'): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n\n  getComandoEmenda(urn: string): ComandoEmenda {\n    return new ComandoEmendaBuilder(urn, this.getSubstituicaoTermo()).getComandoEmenda();\n  }\n\n  getSubstituicaoTermo(): SubstituicaoTermo {\n    const ret = new SubstituicaoTermo();\n    ret.tipo = (this.elTipoSubstituicaoTermo.querySelector('sl-radio[checked]') as any)?.value || 'Expressão';\n    ret.termo = this.elTermoASerSubstituido.value || '(termo a ser substituído)';\n    ret.novoTermo = this.elNovoTermo.value || '(novo termo)';\n    ret.flexaoGenero = this.elFlexaoGenero.checked;\n    ret.flexaoNumero = this.elFlexaoNumero.checked;\n    return ret;\n  }\n\n  setSubstituicaoTermo(substituicaoTermo: SubstituicaoTermo): void {\n    this.elTermoASerSubstituido.value = substituicaoTermo.tipo;\n    this.elTermoASerSubstituido.value = substituicaoTermo.termo;\n    this.elNovoTermo.value = substituicaoTermo.novoTermo;\n    this.elFlexaoGenero.checked = substituicaoTermo.flexaoGenero;\n    this.elFlexaoNumero.checked = substituicaoTermo.flexaoNumero;\n    (this.shadowRoot?.querySelector(`sl-radio[value=\"${substituicaoTermo.tipo}\"]`) as HTMLElement)?.click();\n    this.agendarEmissaoEventoOnChange();\n\n    if (this.elTermoASerSubstituido.value !== '') {\n      this.elAlertaTermoASerSubstituido.style.setProperty('visibility', 'hidden');\n    }\n\n    if (this.elNovoTermo.value !== '') {\n      this.elAlertaNovoTermo.style.setProperty('visibility', 'hidden');\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <fieldset @input=${this.onDadosAlterados}>\n        <legend>Substituição de termo em todo o texto</legend>\n        <sl-radio-group id=\"tipoSubstituicaoTermo\" value=\"Expressão\" @sl-change=${this.onDadosAlterados}>\n          <sl-radio value=\"Expressão\">Expressão</sl-radio>\n          <sl-radio value=\"Palavra\">Palavra</sl-radio>\n          <sl-radio value=\"Número\">Número</sl-radio>\n        </sl-radio-group>\n        <div>\n          <sl-input id=\"termoASerSubstituido\" type=\"text\" required label=\"Termo a ser substituído: *\"></sl-input>\n          <span id=\"alertaTermoASerSubstituido\" class=\"alerta\">Este campo deve ser preenchido</span>\n        </div>\n        <div>\n          <sl-input id=\"novoTermo\" type=\"text\" required label=\"Novo termo: *\"></sl-input>\n          <span id=\"alertaNovoTermo\" class=\"alerta\">Este campo deve ser preenchido</span>\n        </div>\n        <div>\n          <span>Propor fazer flexões de:</span>\n          <sl-checkbox id=\"flexaoGenero\">Gênero</sl-checkbox>\n          <sl-checkbox id=\"flexaoNumero\">Número</sl-checkbox>\n        </div>\n      </fieldset>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-substituicao-termo': SubstituicaoTermoComponent;\n  }\n}\n","// ---------------------------------------------------\n// DEPENDÊNCIAS\n// ---------------------------------------------------\n// import 'quill/dist/quill.snow.css';\n// import 'font-awesome/css/font-awesome.css';\n\nimport 'elix/define/AlertDialog';\nimport 'elix/define/Dialog';\nimport 'elix/define/MenuButton';\nimport 'elix/define/MenuItem';\nimport 'elix/define/MenuSeparator';\nimport 'elix/define/Toast';\nimport 'quill/dist/quill';\n\nimport '@shoelace-style/shoelace/dist/components/radio-group/radio-group.js';\nimport '@shoelace-style/shoelace/dist/components/radio-button/radio-button';\nimport '@shoelace-style/shoelace/dist/components/input/input';\nimport '@shoelace-style/shoelace/dist/components/dialog/dialog';\nimport '@shoelace-style/shoelace/dist/components/menu-item/menu-item';\nimport '@shoelace-style/shoelace/dist/components/select/select';\nimport '@shoelace-style/shoelace/dist/components/button/button';\nimport '@shoelace-style/shoelace/dist/components/split-panel/split-panel';\nimport '@shoelace-style/shoelace/dist/components/radio/radio';\nimport '@shoelace-style/shoelace/dist/components/details/details';\nimport '@shoelace-style/shoelace/dist/components/checkbox/checkbox';\nimport '@shoelace-style/shoelace/dist/components/switch/switch';\nimport '@shoelace-style/shoelace/dist/components/tooltip/tooltip';\nimport '@shoelace-style/shoelace/dist/components/card/card';\nimport { ModuloAspasCurvas } from './components/editor-texto-rico/moduloAspasCurvas';\nimport { ModuloRevisao } from './components/editor-texto-rico/moduloRevisao';\nimport { ModuloNotaRodape } from './components/editor-texto-rico/moduloNotaRodape';\n\n// ---------------------------------------------------\n\nexport { ArticulacaoComponent } from './components/articulacao.component';\nexport { ComandoEmendaComponent } from './components/comandoEmenda/comandoEmenda.component';\nexport { EditorComponent } from './components/editor/editor.component';\nexport { ElementoComponent } from './components/elemento/elemento.component';\nexport { AtalhosComponent as HelpComponent } from './components/ajuda/atalhos.component';\nexport { EditorTextoRicoComponent } from './components/editor-texto-rico/editor-texto-rico.component';\nexport { AlterarLarguraTabelaColunaModalComponent } from './components/editor-texto-rico/alterar-largura-tabela-coluna-modal';\nexport { AlterarLarguraImagemModalComponent } from './components/editor-texto-rico/alterar-largura-imagem-modal';\nexport { LexmlEtaComponent } from './components/lexml-eta.component';\nexport { AutoriaComponent } from './components/autoria/autoria.component';\nexport { DestinoComponent } from './components/destino/destino.component';\nexport { LexmlAutocomplete } from './components/lexml-autocomplete';\nexport { DataComponent } from './components/data/data.component';\nexport { LexmlEmendaComponent, LexmlEmendaParametrosEdicao } from './components/lexml-emenda.component';\nexport { LexmlEmendaConfig } from './model/lexmlEmendaConfig';\nexport { AlertasComponent } from './components/alertas/alertas.component';\nexport { AjudaComponent } from './components/ajuda/ajuda.component';\nexport { AjudaModalComponent } from './components/ajuda/ajuda.modal.component';\nexport { SufixosModalComponent } from './components/sufixos/sufixos.modal.componet';\nexport { ComandoEmendaModalComponent } from './components/comandoEmenda/comandoEmenda.modal.component';\nexport { AtalhosModalComponent } from './components/ajuda/atalhos.modal.component';\nexport { OpcoesImpressaoComponent } from './components/opcoesImpressao/opcoesImpressao.component';\nexport { SwitchRevisaoComponent } from './components/switchRevisao/switch-revisao.component';\nexport { SubstituicaoTermoComponent } from './components/substituicao-termo/substituicao-termo.component';\nexport { Usuario } from './model/revisao/usuario';\n\nQuill.register('modules/aspasCurvas', ModuloAspasCurvas, true);\nQuill.register('modules/revisao', ModuloRevisao, true);\nQuill.register('modules/notaRodape', ModuloNotaRodape, true);\n"],"names":["defaultState","Symbol","delegatesFocus","firstRender","focusTarget","hasDynamicTemplate","ids","nativeInternals","raiseChangeEvents","render","renderChanges","rendered","rendering","setState","shadowRoot","shadowRootMode","state","stateEffects","template","booleanAttributeValue","name","value","toLowerCase","deepContains","container","target","current","parent","assignedSlot","parentNode","host","firstFocusableElement","root","walker","walkComposedTree","node","HTMLElement","matches","tabIndex","next","indexOfItemContainingTarget","items","Array","prototype","findIndex","call","item","ownEvent","event","eventSource","composedPath","selfAndComposedAncestors","ShadowRoot","composedAncestors","setInternalState","element","toggleAttribute","states","toggle","standardBooleanAttributes","checked","defer","disabled","hidden","ismap","multiple","noresize","readonly","selected","filter","children","assignedNodes","HTMLSlotElement","flatten","length","childNodes","i","fragmentFrom","html","strings","substitutions","templateFrom","content","document","createElement","innerHTML","String","raw","mapBaseTagToCount","Map","descriptor","e","classFn","baseTag","classNameRegex","classNameMatch","match","uppercaseRegEx","hyphenated","replace","letter","offset","tag","count","get","customElements","define","set","registerCustomElement","original","replacement","SVGElement","forEach","attributes","attribute","getAttribute","setAttribute","classList","className","add","style","key","append","replaceChild","transmute","constructor","Element","localName","attributeToPropertyNames","tabindex","propertyNamesToAttributes","attributesForClass","baseClass","Object","getPrototypeOf","baseAttributes","observedAttributes","diff","getOwnPropertyNames","propertyName","getOwnPropertyDescriptor","map","setterName","propertyNameToAttribute","indexOf","concat","stateKey","raiseChangeEventsInNextRenderKey","changedSinceLastRenderKey","fieldsChanged","changes","changed","field","value1","value2","Date","getTime","classTemplateMap","shadowIdProxyKey","proxyElementKey","shadowIdProxyHandler","id","getElementById","ReactiveElement","Base","attributeChangedCallback","attributeName","oldValue","newValue","super","this","hyphenRegEx","toUpperCase","attributeToPropertyName","parsed","AttributeMarshallingMixin","Reactive","undefined","connectedCallback","render$1","renderChanges$1","saveRaiseChangeEvents","rendered$1","async","console","warn","assign","effects","changedByEffects","keys","copyStateWithChanges","freeze","willRender","isConnected","Promise","resolve","stateEffects$1","URLSearchParams","location","search","defineProperty","ReactiveMixin","Proxy","t","HTMLTemplateElement","getTemplate","attachShadow","mode","clone","importNode","ShadowTemplateMixin","checkSize","closestAvailableItemIndex","contentSlot","coreInternal.defaultState","defaultTabIndex","coreInternal.delegatesFocus","effectEndTarget","coreInternal.firstRender","coreInternal.focusTarget","getItemText","goDown","goEnd","goFirst","goLast","goLeft","goNext","goPrevious","goRight","goStart","goToItemWithPrefix","goUp","coreInternal.hasDynamicTemplate","coreInternal.ids","inputDelegate","itemsDelegate","keydown","mouseenter","mouseleave","coreInternal.nativeInternals","coreInternal.raiseChangeEvents","coreInternal.render","coreInternal.renderChanges","renderDataToElement","coreInternal.rendered","coreInternal.rendering","scrollTarget","coreInternal.setState","coreInternal.shadowRoot","coreInternal.shadowRootMode","startEffect","coreInternal.state","coreInternal.stateEffects","swipeDown","swipeDownComplete","swipeLeft","swipeLeftTransitionEnd","swipeRight","swipeRightTransitionEnd","swipeUp","swipeUpComplete","swipeStart","swipeTarget","tap","coreInternal.template","toggleSelectedFlag","elix","internal","previousBodyOverflowKey","previousDocumentMarginRightKey","wrap","wrappingFocusKey","FocusCaptureMixin","firstElement","firstElementIsDocumentActive","activeElement","contains","shadowActiveElement","firstElementIsShadowActive","shiftKey","focusCatcher","focus","addEventListener","focusElement","focusCapture","replaceWith","KeyboardMixin","focusVisible","preventDefault","stopImmediatePropagation","Number","isNaN","role","removeAttribute","s","AriaRoleMixin","Backdrop","ModalBackdrop","window","touches","closePromiseKey","closeResolveKey","OpenCloseMixin","opened","closeResult","close","closed","closeFinished","defaults","effect","effectPhase","openCloseEffects","open","oldEvent","CustomEvent","bubbles","detail","dispatchEvent","openedChangeEvent","oldOpenedEvent","openEvent","oldClosedEvent","closeEvent","closeResolve","whenClosed","OverlayFrame","appendedToDocumentKey","defaultZIndexKey","restoreFocusToElementKey","bringToFront","defaultZIndex","elements","body","querySelectorAll","zIndices","from","getComputedStyle","zIndex","position","parseInt","Math","max","maxZIndexInUse","toString","hasZIndex","computedZIndex","explicitZIndex","isExplicitZIndexNumeric","SlotContentMixin","slot","querySelector","autoFocus","persistent","newFocusedElement","relatedTarget","removeChild","result","OverlayMixin","Overlay","backdrop","backdropPartType","framePartType","frame","renderParts","handled","canceled","documentElement","documentWidth","clientWidth","scrollBarWidth","innerWidth","overflow","marginRight","DialogModalityMixin","Dialog","AlertDialog","choiceButtons","choiceButtonPartType","choices","choice","find","choiceButtonContainer","button","textContent","copy","oldLength","newLength","oldChild","newChild","insertBefore","updateChildNodes","part","defaultSlot","focusTest","nativeDelegatesFocus","getLabelFromElement","selectedText","option","options","innerText","refreshInputLabel","ariaLabel","ariaLabelledby","rootNode","getRootNode","inputLabel","labels","split","elementWithId","join","elementWithFor","labelElement","closest","trim","keyboardActive","focusVisibleChangedListenerKey","FocusVisibleMixin","then","isFocusedElement","containsFocus","removeEventListener","updateKeyboardActive","newKeyboardActive","DelegateFocusMixin","focusOptions","capture","extendsKey","delegatedPropertySettersKey","focusableByDefault","a","area","details","iframe","input","select","textarea","reraiseEvents","address","blockquote","caption","center","dd","dir","div","dl","dt","fieldset","form","h1","h2","h3","h4","h5","h6","img","li","link","menu","object","ol","p","script","tbody","tfoot","thead","mouseEventNames","eventBubbles","abort","change","reset","blockElements","attributesWithoutProperties","WrappedStandardElement","cast","attachInternals","innerAttributes","blur","inner","extends","eventName","Event","applyAttribute","property","display","includes","static","extendsTag","Wrapped","cls","names","delegate","args","configurable","enumerable","writable","createMethodDelegate","getInnerProperty","setInnerProperty","createPropertyDelegate","createDelegate","push","defineDelegates","composeFocus","closestFocusableNode","ComposedFocusMixin","removingAriaAttribute","requestIdleCallback","setTimeout","DelegateInputLabelMixin","Button","clickEvent","MouseEvent","cancelable","PlainButton","PlainButtonMixin","PlainBorderButton","PlainModalBackdrop","PlainOverlayFrame","PlainModalOverlayMixin","PlainAlertDialog","PlainDialog","defaultAriaRole","article","hr","output","progress","table","td","th","ul","defaultScrollTarget","ancestor","isElementScrollable","getScrollableElement","overflowX","overflowY","moveToIndex","index","direction","newIndex","currentIndex","auxiliarycustomTags","getIndexOfItemAtY","y","downward","start","end","step","itemRect","availableItemFlags","getBoundingClientRect","top","bottom","itemStyle","itemPaddingTop","paddingTop","parseFloat","itemPaddingBottom","paddingBottom","contentTop","contentBottom","clientHeight","scrollOnePage","targetRect","indexOfItemAtEdge","currentRect","pageHeight","saveRaiseChangesEvents","typedPrefixKey","prefixTimeoutKey","resetPrefixTimeout","clearTimeout","resetTypedPrefix","setPrefixTimeout","LanguageDirectionMixin","rightToLeft","ContentItemsMixin","isSubstantiveElement","base","itemRole","AriaMenuMixin","currentItemRequired","cursorOperationsWrap","currentItem","CursorAPIMixin","scrollCurrentItemIntoView","scrollTargetRect","bottomDelta","leftDelta","left","rightDelta","right","topDelta","orientation","scrollLeft","ceil","scrollTop","CursorInViewMixin","canGoDown","canGoLeft","canGoRight","canGoUp","canGoNext","canGoPrevious","languageDirection","horizontal","vertical","DirectionCursorMixin","ItemsAPIMixin","desiredCurrentIndex","newDesiredIndex","newItemIndex","min","newItem","ItemsCursorMixin","texts","getText","getTextsFromItems","ItemsTextMixin","altKey","metaKey","KeyboardDirectionMixin","pageDown","pageUp","KeyboardPagedCursorMixin","prefix","searchText","text","substr","previousIndex","handleBackspace","ctrlKey","char","handlePlainCharacter","KeyboardPrefixCursorMixin","SlotItemsMixin","touchAction","mozUserSelect","msUserSelect","webkitUserSelect","userSelect","Node","targetIndex","stopPropagation","TapCursorMixin","Menu","highlightCurrentItem","currentItemFocused","probablyDesktop","matchMedia","flashDuration","slice","isDefaultFocusableItem","documentMouseupListenerKey","handleMouseup","hitTargets","elementsFromPoint","clientX","clientY","overSource","source","popup","overPopup","overPopupFrame","dragSelect","listenIfOpenAndConnected","bind","DisabledMixin","availableSpace","sourceRect","boundsRect","align","sourceOrigin","getSourceOrigin","height","width","x","layoutPopup","popupRect","normalized","logicalAlign","logicalDirection","defaultDirection","physicalDirection","above","below","column","row","crossAxis","defaultAlign","stretch","normalizeOptions","layouts","preferredDirection","preferredAlign","flipDirection","flipAlign","possibilties","prioritizedLayouts","sort","layout1","layout2","space1","space2","fitsWidth1","fitsHeight1","fitsEither1","fitsBoth1","fitsWidth2","fitsHeight2","fitsEither2","fitsBoth2","area1","area2","compareLayouts","layout","rect","boundsLeft","boundsTop","boundsBottom","boundsRight","DOMRect","getPositionedRect","implicitCloseListenerKey","blurHandler","closeHandler","handleEvent","type","closeOnWindowResize","PopupModalityMixin","Popup","mousedownHandler","resizeListenerKey","choosePopupLayout","popupAlign","popupDirection","popupLayout","viewportBounds","popupPartType","sourcePartType","viewport","visualViewport","offsetLeft","offsetTop","innerHeight","disconnectedCallback","PopupDragSelectMixin","ariaHasPopup","horizontalAlign","popupPosition","positionStyling","bounds","styling","getPositiongStylingForLayout","opacity","addEventListeners","removeEventListeners","documentMousemoveListenerKey","handleMousemove","hasHoveredOverItemSinceOpened","hoverIndex","selectCurrentItemAndClose","originalRaiseChangeEvents","cursorDefined","list","popupList","flashCurrentItem","PopupListMixin","popupFocused","measured","popupHeight","MenuButton","menuPartType","UpDownToggle","downIcon","upIcon","popupTogglePartType","popupToggle","PlainMenu","PlainOpenCloseToggle","downIconGlyph","firstElementChild","upIconGlyph","PlainBackdrop","PlainPopup","PlainMenuButton","toggleDirection","PopupToggleMixin","MenuItem","CurrentMixin","SelectableMixin","PlainMenuItem","MenuSeparator","PlainMenuSeparator","timeoutKey","effectTarget","offsetHeight","TransitionEffectMixin","Toast","startTimerIfOpened","clearTimer","duration","fromEdge","hostEdgeStyles","alignItems","justifyContent","oppositeEdge","languageAdjustedEdge","edgeTransforms","openEdgeTransforms","transform","startTimer","PlainToast","factory","self","modules","installedModules","__webpack_require__","moduleId","exports","module","l","m","c","d","getter","o","n","__esModule","hasOwnProperty","container_1","format_1","leaf_1","scroll_1","inline_1","block_1","embed_1","text_1","attributor_1","class_1","style_1","store_1","Registry","Parchment","Scope","create","query","register","Container","default","Format","Leaf","Embed","Scroll","Block","Inline","Text","Attributor","Attribute","Class","Style","Store","extendStatics","__extends","setPrototypeOf","__proto__","b","__","ParchmentError","_super","message","_this","Error","classes","tags","types","scope","ANY","TEXT_NODE","LEVEL","BLOCK","INLINE","tagName","TYPE","DATA_KEY","BlotClass","bubble","blot","Definitions","_i","arguments","Definition","blotName","attrName","keyName","isArray","tagNames","equal","extend","op","NULL_CHARACTER","fromCharCode","Delta","ops","insert","newOp","delete","retain","lastOp","unshift","splice","chop","pop","predicate","partition","passed","failed","reduce","initial","changeLength","elem","Infinity","iter","iterator","hasNext","nextOp","compose","other","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","thisOp","otherOp","rest","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","line","priority","transformPosition","nextType","hasOwn","toStr","gOPD","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","setProperty","getProperty","src","copyIsArray","deep","BlockEmbed","bubbleFormats","_createClass","defineProperties","props","Constructor","protoProps","staticProps","_get","receiver","Function","desc","_extend2","_interopRequireDefault","_quillDelta2","_parchment2","_break2","_inline2","_text2","_classCallCheck","instance","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","_Parchment$Embed","apply","domNode","formats","values","BLOCK_ATTRIBUTE","format","def","endsWith","block","insertAt","BLOCK_BLOT","_Parchment$Block","_this2","cache","descendants","leaf","lines","shift","tail","ref","head","remove","context","child","force","statics","defaultChild","allowedChildren","overload","expandConfig","_typeof","_slicedToArray","_arr","_n","_d","_e","_s","done","err","sliceIterator","_editor2","_emitter4","_module2","_selection","_selection2","_logger2","_theme2","_defineProperty","debug","Quill","error","__quill","addContainer","scrollingContainer","emitter","scroll","whitelist","editor","selection","theme","keyboard","addModule","clipboard","history","init","on","events","EDITOR_CHANGE","TEXT_CHANGE","isBlank","SCROLL_UPDATE","mutations","range","lastRange","modify","update","contents","convert","setContents","clear","placeholder","readOnly","disable","limit","level","imports","path","overwrite","startsWith","refNode","setRange","_this3","_overload","_overload2","deleteText","enable","enabled","scrollIntoView","_this4","sources","API","getSelection","formatLine","formatText","setSelection","SILENT","_this5","_overload3","_overload4","_this6","_overload5","_overload6","getBounds","containerBounds","getLength","_overload7","_overload8","getContents","getFormat","MAX_VALUE","getRange","_overload9","_overload10","hasFocus","embed","_this7","insertEmbed","_this8","_overload11","_overload12","insertText","off","once","dangerouslyPasteHTML","_this9","_overload13","_overload14","removeFormat","_this10","deleted","applied","applyDelta","_overload15","_overload16","Range","USER","_this11","userConfig","DEFAULTS","import","themeConfig","config","moduleConfig","moduleClass","toolbar","modifier","strict","isEnabled","oldDelta","shiftRange","_emitter","_emitter2","emit","_map","pos","_map2","_map3","_map4","version","parchment","_Parchment$Inline","compare","BLOT","isolate","moveChildren","selfIndex","order","otherIndex","_parchment","TextBlot","_Parchment$Text","_eventemitter2","_len","_key","_node$__quill$emitter","handleDOM","Emitter","_EventEmitter","listeners","log","_len2","_key2","_ref","handler","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SELECTION_CHANGE","Module","quill","levels","method","_console","namespace","ns","logger","newLevel","pSlice","objectKeys","isArguments","deepEqual","actual","expected","opts","isUndefinedOrNull","isBuffer","ka","kb","objEquiv","attributeBit","ATTRIBUTE","canAdd","Code","_block2","_Inline","CodeBlock","_Block","frag","_descendant","descendant","deleteAt","nextNewline","newlineIndex","prevNewline","isolateLength","formatAt","_descendant3","_descendant4","searchIndex","reverse","lastIndexOf","appendChild","prev","optimize","unwrap","TAB","_op2","_code2","_cursor2","_block","_clone2","_deepEqual2","ASCII","Editor","getDelta","consumeNextNewline","scrollLength","batchStart","image","bullet","normalizeDelta","_scroll$line","_scroll$line2","_line$descendant","batchEnd","lengthRemaining","lineLength","codeIndex","codeLength","leaves","formatsArr","blots","combineFormats","_scroll$line3","_scroll$line4","suffixLength","suffix","cursorIndex","data","textBlot","CONTENTS","oldText","newText","diffDelta","combined","merged","_toConsumableArray","arr2","Selection","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","listenDOM","native","getNativeRange","textNode","setNativeRange","ignored","_context$range","startNode","startOffset","endNode","endOffset","restore","_format","nativeRange","collapsed","after","attach","_scroll$leaf","_scroll$leaf2","_leaf$position","_leaf$position2","createRange","setStart","_scroll$leaf3","_scroll$leaf4","_leaf$position3","_leaf$position4","setEnd","side","rangeCount","getRangeAt","normalizeNative","info","normalizedToRange","positions","indexes","_position","startContainer","endContainer","lastChild","_scroll$leaf5","_scroll$leaf6","_leaf$position5","_leaf$position6","first","last","scrollBounds","removeAllRanges","addRange","rangeToNative","oldRange","_getRange","_getRange2","Break","linked_list_1","shadow_1","ContainerBlot","build","makeBlot","forEachAt","criteria","_a","lengthLeft","detach","childBlot","refBlot","some","insertInto","memo","targetParent","inclusive","addedNodes","removedNodes","mutation","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","nextSibling","FormatBlot","wrapper","move","LeafBlot","INLINE_BLOT","lib","keepNull","Iterator","retOp","_instanceof","nativeMap","nativeSet","nativePromise","_","Set","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","proto","reject","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","allocUnsafe","keyChild","valueChild","entryChild","attrs","getOwnPropertySymbols","symbols","symbol","allPropertyNames","__objToStr","re","flags","global","ignoreCase","multiline","clonePrototype","_container2","isLine","_Parchment$Scroll","batch","_line","_line2","_line3","_newlineIndex","getLines","observer","takeRecords","SHORTKEY","_quill2","test","navigator","platform","Keyboard","_Module","bindings","addBinding","ENTER","handleEnter","userAgent","BACKSPACE","handleDelete","handleDeleteRange","listen","evt","binding","normalize","which","keyCode","defaultPrevented","_quill$getLine","getLine","_quill$getLine2","_quill$getLeaf","getLeaf","_quill$getLeaf2","leafStart","offsetStart","_ref2","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","makeEmbedArrowHandler","_ref3","where","LEFT","RIGHT","_quill$getLeaf3","_quill$getLine11","_quill$getLine13","curFormats","prevFormats","nextLength","_quill$getLine15","_quill$getLine17","nextFormats","firstFormats","lastFormats","lineFormats","makeCodeBlockHandler","indent","_quill$scroll$descend","_quill$scroll$descend2","scrollIndex","getIndex","makeFormatHandler","shortKey","charCodeAt","ESCAPE","UP","DOWN","bold","italic","underline","outdent","tab","cutoff","updateContents","_quill$getLine3","_quill$getLine4","_quill$getLine5","_quill$getLine6","header","_quill$getLine7","_quill$getLine8","_quill$getLine9","_quill$getLine10","Cursor","createTextNode","_length","restoreText","_Parchment$Container","ColorStyle","ColorClass","ColorAttributor","_Parchment$Attributor","sanitize","_inline","Link","url","_sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","_keyboard2","_dropdown2","optionsCounter","toggleAriaAttribute","Picker","buildPicker","label","togglePicker","escape","hasAttribute","selectItem","buildItem","buildLabel","buildOptions","trigger","selectedIndex","createEvent","initEvent","isActive","_embed2","_scroll2","_clipboard2","_history2","ShadowBlot","cloneNode","parentBlot","refDomNode","AttributorStore","styles","attr","ClassAttributor","camelize","parts","StyleAttributor","Theme","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","AlignStyle","AlignClass","AlignAttribute","BackgroundStyle","BackgroundClass","_color","DirectionStyle","DirectionClass","DirectionAttribute","FontClass","FontStyle","FontStyleAttributor","SizeStyle","SizeClass","justify","background","clean","code","color","rtl","float","full","formula","ordered","check","sub","strike","video","getLastChangeIndex","History","lastRecorded","ignoreChange","userOnly","record","undo","redo","dest","stack","changeDelta","undoDelta","timestamp","now","delay","maxStack","deleteLength","changeIndex","endsWithNewlineChange","BaseTooltip","_colorPicker2","_iconPicker2","_picker2","_tooltip2","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","_Theme","listener","tooltip","textbox","hide","pickers","picker","extendToolbar","buttons","icons","selects","fillSelect","handlers","edit","fileInput","files","reader","FileReader","onload","readAsDataURL","click","_Tooltip","boundsContainer","save","cancel","preview","linkRange","restoreFocus","defaultValue","LinkedList","nodes","cur","curNode","ret","callback","curIndex","curLength","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","ScrollBlot","MutationObserver","observe","disconnect","records","mark","markParent","remaining","previousSibling","grandChild","InlineBlot","obj1","obj2","prop","isEqual","BlockBlot","EmbedBlot","splitText","_toggle","DOMTokenList","token","searchString","subjectString","isFinite","floor","thisArg","execCommand","DIFF_DELETE","diff_main","text1","text2","cursor_pos","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","j","best_common","prefixLength","text1_a","text1_b","text2_a","text2_b","hm1","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","norm","current_pos","next_pos","split_pos","d_left","d_right","cursor_normalize_diff","ndiffs","cursor_pointer","d_next","merge_tuples","fix_cursor","compact","starts_with_pair_end","str","ends_with_pair_start","fixed_diffs","fix_emoji","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","pointerend","pointer","count_delete","count_insert","text_delete","text_insert","left_d","right_d","shim","supportsArgumentsClass","supported","unsupported","propertyIsEnumerable","has","Events","EE","fn","EventEmitter","_events","_eventsCount","eventNames","exists","available","ee","a1","a2","a3","a4","a5","len","removeListener","removeAllListeners","addListener","setMaxListeners","prefixed","matchText","matchSpacing","matchNewline","matchBlot","matchAttributor","_extend3","_align","_background","_direction","_font","_size","DOM_KEY","CLIPBOARD_CONFIG","deltaEndsWith","ELEMENT_NODE","fontStyle","computeStyle","fontWeight","applyFormat","textIndent","matchAlias","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","_prepareMatching","prepareMatching","_prepareMatching2","elementMatchers","textMatchers","traverse","paste","pair","_pair","nodeType","endText","childrenDelta","nextElementSibling","nodeHeight","marginTop","marginBottom","whiteSpace","replacer","collapse","Bold","addControls","Toolbar","_ret","controls","addHandler","_this$quill$selection","_quill$selection$getR","prompt","addButton","groups","group","control","addSelect","_picker","ColorPicker","_Picker","backgroundColor","colorLabel","stroke","fill","IconPicker","defaultItem","Tooltip","TEMPLATE","reference","offsetWidth","rootBounds","verticalShift","_base","_base2","_link2","_icons2","TOOLBAR_CONFIG","SnowTheme","_BaseTheme","buildButtons","buildPickers","SnowTooltip","_BaseTooltip","show","_core2","_indent","_blockquote2","_header2","_list","_list2","_bold2","_italic2","_script2","_strike2","_underline2","_image2","_video2","_code","_formula2","_syntax2","_toolbar2","_bubble2","_snow2","IndentClass","ListItem","IdentAttributor","Blockquote","Header","List","_Container","listEventHandler","_bold","Italic","_Bold","Script","Strike","Underline","_link","ATTRIBUTES","Image","Video","_BlockEmbed","FormulaBlot","_Embed","katex","throwOnError","errorColor","Formula","CodeToken","SyntaxCodeBlock","_CodeBlock","_highlight","cachedText","Syntax","highlight","timer","interval","hljs","highlightAuto","BubbleTooltip","BubbleTheme","lastLine","_bounds","arrow","marginLeft","amd","s2","t2","ShadyCSS","nativeShadow","Document","CSSStyleSheet","t3","n5","_$cssResult$","cssText","styleSheet","e4","replaceSync","r","o5","n6","s5","t4","S","cssRules","e2","trustedTypes","r2","emptyScript","h","reactiveElementPolyfillSupport","o2","toAttribute","i3","Boolean","JSON","stringify","fromAttribute","parse","n2","converter","reflect","hasChanged","_$Et","isUpdatePending","hasUpdated","_$Ei","finalize","elementProperties","_$Eh","_$Eu","noAccessor","getPropertyDescriptor","r4","requestUpdate","finalized","properties","createProperty","elementStyles","finalizeStyles","flat","i4","_$Ep","enableUpdating","_$AL","_$Em","addController","_$Eg","renderRoot","hostConnected","removeController","createRenderRoot","shadowRootOptions","adoptedStyleSheets","litNonce","hostDisconnected","_$AK","_$ES","getPropertyOptions","l4","_$E_","_$EC","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","globalThis","reactiveElementVersions","i2","s3","createPolicy","createHTML","e3","random","o3","n3","l2","createComment","r3","v","f","g","$","_$litType$","for","w","T","WeakMap","A","createTreeWalker","E","d2","u2","c2","o6","u3","p2","$2","exec","C","el","currentNode","firstChild","nextNode","hasAttributes","getAttributeNames","s6","t5","ctor","M","H","I","S2","P","_$Cl","_$Cu","_$litDirective$","_$AO","_$AT","_$AS","l3","o4","N","_$AH","_$AN","_$AA","_$AB","_$AM","_$Cg","_$AU","_$AI","_$AR","u","_$AC","_$AD","creationScope","L","_$AP","setConnected","e5","k","passive","z","litHtmlPolyfillSupport","litHtmlVersions","s4","renderOptions","_$Dt","renderBefore","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","n4","litElementPolyfillSupport","litElementVersions","component_styles_default","radio_group_styles_default","_$Ct","_$Ci","st","et","__defProp","__defProps","__getOwnPropDesc","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","__objRest","exclude","__decorateClass","decorators","kind","decorator","finisher","e6","placement","originalKey","initializer","assignedElements","RADIO_CHILDREN","SlRadioGroup","hasButtonGroup","getAllRadios","handleRadioClick","checkedRadio","radio","handleKeyDown","radios","incr","handleSlotChange","button_group_styles_default","BUTTON_CHILDREN","SlButtonGroup","handleFocus","findButton","handleBlur","handleMouseOver","handleMouseOut","slottedElements","hasFocusVisible","isSupported","sheet","insertRule","focusVisibleSelector","button_styles_default","radio_button_styles_default","_$litStatic$","FormDataEventPolyfill","formData","FormDataPolyfill","FormData","entries","getAll","polyfillFormData","supportsFormDataEvent","readyState","FormSubmitController","reportValidity","handleFormData","handleFormSubmit","val","noValidate","submit","submitter","clipPath","HasSlotController","slotNames","hasDefaultSlot","hasNamedSlot","slotName","getTextContent","watch","propName","resolvedOptions","waitUntilFirstUpdate","decoratedFnName","propNameKey","changedProps","composed","waitForEvent","SlRadioButton","formSubmitController","hasSlotController","invalid","variant","size","pill","hiddenInput","setCustomValidity","handleClick","handleCheckedChange","handleDisabledChange","checkValidity","fallback","form_control_styles_default","input_styles_default","connectedElements","documentElementObserver","translations","documentLanguage","lang","language","attributeFilter","LocalizeController","term","subcode","primary","secondary","term2","date","dateToFormat","Intl","DateTimeFormat","number","numberToFormat","NumberFormat","relativeTime","unit","RelativeTimeFormat","translation2","$code","registerTranslation","$name","$dir","clearEntry","currentValue","hidePassword","resize","scrollToEnd","scrollToStart","selectAColorFromTheScreen","showPassword","toggleColorFormat","SlInput","localize","isPasswordVisible","filled","helpText","clearable","togglePassword","required","valueAsDate","_b","valueAsNumber","setSelectionRange","selectionStart","selectionEnd","selectionDirection","setRangeText","selectMode","handleChange","handleClearClick","handleInput","handleInvalid","hasModifier","handlePasswordToggle","handleValueChange","hasLabelSlot","hasHelpTextSlot","hasLabel","hasHelpText","minlength","maxlength","autocapitalize","autocomplete","autocorrect","autofocus","spellcheck","pattern","enterkeyhint","inputmode","basePath","setBasePath","scripts","getElementsByTagName","configScript","fallbackScript","eye","eyedropper","registry","resolver","encodeURIComponent","watchedIcons","getIconLibrary","includeFiles","iconFiles","requestIcon","fileData","fileDataPromise","fetch","response","ok","status","requestInclude","iconFileData","svg","outerHTML","icon_styles_default","it","directiveName","vt","resultType","parser","DOMParser","SlIcon","library","icon","setIcon","getUrl","redraw","file","svgEl","parseFromString","mutator","isTabbable","offsetParent","visibility","getTabbableBoundary","allElements","walk","activeModals","locks","lockBodyScrolling","lockingEl","unlockBodyScrolling","behavior","round","getOffset","minX","maxX","minY","maxY","scrollTo","dialog_styles_default","animateTo","keyframes","animation","animate","prefersReducedMotion","parseDuration","stopAnimations","all","getAnimations","handleAnimationEvent","requestAnimationFrame","shimKeyframesHeightAuto","calculatedHeight","keyframe","defaultAnimationRegistry","customAnimationRegistry","setDefaultAnimation","animationName","ensureAnimation","getAnimation","customAnimation","defaultAnimation","SlDialog","noHeader","modal","tabDirection","handleFocusIn","handleKeyUp","activate","deactivate","checkFocus","preventScroll","dialog","requestClose","panel","originalTrigger","autoFocusTarget","overlay","panelAnimation","overlayAnimation","easing","icon_button_styles_default","SlIconButton","isLink","interior","download","menu_item_styles_default","SlMenuItem","select_styles_default","SlSelect","isOpen","displayLabel","displayTags","maxTagsVisible","hoist","handleMenuSlotChange","resizeObserver","ResizeObserver","resizeMenu","syncItemsFromValue","unobserve","getItemLabel","getItems","getValueAsArray","dropdown","firstItem","lastItem","setCurrentItem","typeToSelect","handleLabelClick","handleMenuSelect","handleMenuShow","handleMenuHide","handleMultipleChange","handleTagInteraction","reposition","checkedItems","syncValueFromItems","total","checkedItem","checkedValues","hasSelection","tag_styles_default","SlTag","removable","handleRemoveClick","menu_styles_default","SlMenu","typeToSelectString","getAllItems","includeDisabled","getCurrentItem","activeItem","typeToSelectTimeout","handleMouseDown","getSide","getAlignment","getMainAxisFromPlacement","getLengthFromAxis","axis","computeCoordsFromPlacement","floating","commonX","commonY","mainAxis","commonAlign","isVertical","coords","getSideObjectFromPadding","padding","expandPaddingObject","rectToClientRect","detectOverflow","middlewareArguments","_await$platform$isEle","platform2","rects","strategy","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","getClippingRect","isElement","contextElement","getDocumentElement","elementClientRect","convertOffsetParentRelativeRectToViewportRelativeRect","getOffsetParent","within","min$1","max$1","hash$1","getOppositePlacement","matched","hash","getOppositeAlignmentPlacement","flip","_middlewareData$flip","middlewareData","initialPlacement","checkMainAxis","checkCrossAxis","fallbackPlacements","specifiedFallbackPlacements","fallbackStrategy","flipAlignment","detectOverflowOptions","oppositePlacement","getExpandedPlacements","placements","overflows","overflowsData","main","cross","alignment","mainAlignmentSide","getAlignmentSides","isRTL","side2","_middlewareData$flip$","_middlewareData$flip2","nextIndex","nextPlacement","skip","resetPlacement","_overflowsData$slice$","placement2","overflow2","acc","diffCoords","mainAxisMulti","crossAxisMulti","rawValue","convertValueToCoords","limiter","mainAxisCoord","crossAxisCoord","maxSide","limitedCoords","isWindow","getWindow","ownerDocument","defaultView","getComputedStyle$1","getNodeName","nodeName","isHTMLElement","isShadowRoot","isOverflowElement","isTableElement","isContainingBlock","isFirefox","css","perspective","contain","willChange","min2","max2","includeScale","clientRect","scaleX","scaleY","getNodeScroll","pageXOffset","pageYOffset","getWindowScrollBarX","getRectRelativeToOffsetParent","isOffsetParentAnElement","isScaled","offsets","offsetRect","clientLeft","clientTop","getParentNode","getTrueOffsetParent","window2","getContainingBlock","getDimensions","getNearestOverflowAncestor","getOverflowAncestors","_node$ownerDocument","scrollableAncestor","isBody","win","updatedList","getClientRectFromClippingAncestor","clippingParent","abs","scale","getViewportRect","getInnerBoundingClientRect","_element$ownerDocumen","scrollWidth","scrollHeight","getDocumentRect","getClippingAncestors","clippingAncestors","clipperElement","clippingAncestors2","firstClippingAncestor","clippingRect","accRect","clippingAncestor","getElementRects","getClientRects","autoUpdate","ancestorScroll","_ancestorScroll","ancestorResize","_ancestorResize","elementResize","_elementResize","animationFrame","cleanedUp","ancestors","frameId","prevRefRect","frameLoop","nextRefRect","_observer","cancelAnimationFrame","computePosition2","middleware","statefulPlacement","skippedMiddlewareNames","nextX","nextY","computePosition","dropdown_styles_default","SlDropdown","stayOpenOnSelect","distance","skidding","handleMenuItemActivate","handlePanelSelect","handleDocumentKeyDown","handleDocumentMouseDown","containingElement","addOpenListeners","startPositioner","removeOpenListeners","stopPositioner","focusOnTrigger","getMenu","_a2","_c","handlePopoverOptionsChange","updatePositioner","handleTriggerClick","handleTriggerKeyDown","menuItems","firstMenuItem","lastMenuItem","ignoredKeys","handleTriggerKeyUp","handleTriggerSlotChange","updateAccessibleTrigger","accessibleTrigger","positionerCleanup","positioner","maxWidth","maxHeight","heightSide","widthSide","xMin","xMax","yMin","yMax","dimensions","SlButton","doc","formId","caret","loading","outline","circle","spinner_styles_default","SlSpinner","split_panel_styles_default","clamp","SlSplitPanel","snapThreshold","handleResize","detectSize","cachedPositionInPixels","percentageToPixels","pixelsToPercentage","handleDrag","onMove","pointerEvent","dims","offsetX","offsetY","pageX","pageY","stop","drag","newPositionInPixels","snap","snapPoint","newPosition","handlePositionChange","positionInPixels","handlePositionInPixelsChange","handleVerticalChange","contentRect","gridTemplate","gridTemplateAlt","radio_styles_default","SlRadio","details_styles_default","SlDetails","handleSummaryClick","handleSummaryKeyDown","summary","checkbox_styles_default","SlCheckbox","indeterminate","handleStateChange","checkbox","switch_styles_default","SlSwitch","switch","tooltip_styles_default","SlTooltip","getTarget","hasTrigger","getPropertyValue","hoverTimeout","handleOptionsChange","triggerType","arrowDimensions","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","min3","max3","offset2","centerOffset","arrowX","arrowY","staticSide","card_styles_default","SlCard","card","generateUUID","uuid","randomNumber","RevisaoUtil","partes","formatDDMMYYYYAndTime","num","padStart","getFullYear","padTo2Digits","getMonth","getDate","getHours","getMinutes","InlineRevisionBaseFormat","valueToAttributes","InsBlot","DelBlot","CustomKeyboard","onKeyDown","revisao","gerenciarKeydown","emRevisao","ModuloRevisao","ignorarEventoTextChange","isAbrindoTexto","usuario","tableModule","tableTrick","addClipboardMatcher","addKeyboardBindings","onTextChange","tratarClick","getModule","isInsertTable","isInTable","setIgnorarEventoTextChange","table_handler","isTagRevisao","param","getTagRevisaoMaisProxima","elemento","elRevisao","mostrarTooltipRevisao","revisarTodos","aceitar","revisar","getRevisoes","elementosRevisao","todos","isTagIns","fnActionRevisao","elementos","closeTooltip","ajustaPosicaoTooltip","limpaTooltip","topOffset","scrollY","leftOffset","scrollX","createTooltip","tooltipElem","createContextualFragment","removed","added","buildAttributes","addBindingOnTop","keyBinding","newBinding","handleRemove","handleUndo","handleRedo","hasModuloTabela","keyboardHandler","formatDate","deslocamento","isEmbedBlot","posicao","numChars","oldContent","isInsertJaFormatadoEmModoDeRevisao","apenasNovaLinha","numCaracteresRemovidos","itemUndo","rev","idx","op2","setUsuario","setEmRevisao","getQuantidadeRevisoes","getRevisoesSemDuplicidade","listElements","revisoesSemDuplicidade","Diff","buildValues","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","tmp","lastComponent","equals","clonePath","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","addPath","removePath","_oldPos","canRemove","pushComponent","commonCount","comparator","array","chars","characterDiff","diffChars","oldStr","newStr","extendedWordChars","reWhitespace","wordDiff","diffWords","generateOptions","ignoreWhitespace","tokens","lineDiff","retLines","linesAndNewlines","newlineIsToken","objectPrototypeToString","jsonDiff","canonicalize","replacementStack","canonicalizedObj","toJSON","sortedKeys","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","arrayDiff","getTextoSemHtml","removeEspacosDuplicados","endsWithWord","texto","indicadores","word","addSpaceRegex","escapeRegex","converteIndicadorParaTexto","primeiraLetraMaiuscula","removeAllHtmlTags","StringBuilder","strs","REGEX_ACCENTS","removeTagEConteudo","textoDiffAsHtml","texto1","texto2","typeDiff","buildPartRemoved","substituiEspacosEntreTagsPorNbsp","regex","substituiMultiplosEspacosPorNbsp","decodeHtml","txt","V","quillSnowStyles","EstiloTextoClass","MarginBottomClass","NotaRodape","numero","NoIndentClass","hasShadow","hasShady","ShadyDOM","inUse","isSafari","MSStream","useDocument","invalidPartialElements","validNodeTypes","DOCUMENT_FRAGMENT_NODE","findNode","isLeft","containsNode","recentCaretRange","containsNextElement","walkForward","walkFromNode","ev","withinInternals","pending","pushAll","nodeList","findCaretFocus","anchorNode","cachedRange","thisFrame","leftNode","isNaturalDirection","rightNode","measure","initialSize","updatedSize","getSelectionDirection","rightOffset","rightText","existingNextSibling","insertData","appendData","collapseToStart","leftText","deleteData","setPosition","internalGetShadowSelection","DefaultKeyboardModule","DefaultClipboardModule","NotaRodapeModal","ajustaHtml","idNotaRodape","textoInicialNotaRodape","domNodeNotaRodape","tituloModal","modalElement","overlayElement","transition","keydownListener","quillContainer","baseNode","focusNode","baseOffset","focusOffset","modalTitle","fromSave","shouldClose","removeModal","confirm","cfgInline","INLINE_ATTRIBUTE","IdNotaRodapeAttribute","NumeroAttribute","TextoAttribute","NotaRodapeBlot","notaRodape","buildNotaRodape","encodeHtml","__decorate","Reflect","decorate","connect","store","baseElement","_storeUnsubscribe","subscribe","stateChanged","getState","_state","LexmlEmendaConfig","urlConsultaParlamentares","urlAutocomplete","tamanhoMaximoAnexo","tamanhoMaximoImagem","formatProdErrorMessage","$$observable","observable","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","miniKindOf","toDateString","setDate","isDate","stackTraceLimit","isError","constructorName","ctorName","kindOf","typeOfVal","process","env","NODE_ENV","warning","isCrushed","AdicionarAgrupadorArtigo","hotkey","descricao","execute","atual","tipo","refAux","manterNoMesmoGrupoDeAspas","novo","adicionarAgrupadorArtigoAction","adicionarAgrupadorArtigoAntesAction","adicionarAlerta","alerta","mensagem","podeFechar","exibirComandoEmenda","removerAlerta","adicionarAlteracaoComAssistenteAction","norma","dispositivos","TipoDispositivo","agrupadorGenerico","tagId","descricaoPlural","tiposPermitidosPai","tiposPermitidosFilhos","tipoProvavelFilho","INDICADOR_SEQUENCIA","INDICADOR_FIM_SEQUENCIA","INDICADOR_DESDOBRAMENTO","alinea","articulacao","artigo","capitulo","caput","generico","inciso","livro","omissis","paragrafo","parte","secao","subsecao","titulo","ementa","AdicionarElemento","isDispositivoAlteracao","conteudo","hasDesmembramento","adicionarElementoAction","adicionarArtigo","adicionarArtigoAntes","adicionarArtigoDepois","adicionarAlinea","adicionarAlineaAntes","adicionarAlineaDepois","adicionarAlineaFilho","adicionarInciso","adicionarIncisoAntes","adicionarIncisoDepois","adicionarIncisoFilho","adicionarItem","adicionarItemAntes","adicionarItemDepois","adicionarItemFilho","adicionarParagrafo","adicionarParagrafoAntes","adicionarParagrafoDepois","adicionarParagrafoFilho","adicionarElementoFromClipboardAction","isColarSubstituindo","AgruparElemento","adicionarParte","adicionarLivro","adicionarTitulo","adicionarCapitulo","adicionarSecao","adicionarSubsecao","APLICAR_ALTERACOES_EMENDA","aplicarAlteracoesEmendaAction","alteracoesEmenda","revisoes","atualizarReferenciaElementoAction","atualizarTextoElementoAction","autofixAction","elementoSelecionadoAction","InformarDadosAssistenteAction","InformarExistenciaDoElementoNaNorma","nomeAcao","existeNaNormaAlterada","subType","considerarElementoExistenteNaNorma","considerarElementoNovoNaNorma","InformarNorma","informarNormaAction","MoverElementoAbaixo","moverElementoAbaixoAction","MoverElementoAcima","moverElementoAcimaAction","ABRIR_ARTICULACAO","RemoverElemento","elementoLinhaAnterior","removerElementoAction","RenumerarElemento","renumerarElementoAction","restaurarElementoAction","suprimirAgrupadorAction","suprimirElementoAction","TransformarElemento","transformarEmOmissisAlinea","transformarEmOmissisIncisoCaput","transformarEmOmissisItem","transformarEmOmissisParagrafo","transformarEmOmissisIncisoParagrafo","transformarAlineaEmIncisoCaput","transformarAlineaEmIncisoParagrafo","transformaAlineaEmItem","transformarArtigoEmParagrafo","transformarGenericoEmInciso","transformarGenericoEmAlinea","transformarGenericoEmItem","transformarIncisoParagrafoEmParagrafo","transformarIncisoCaputEmParagrafo","transformarIncisoCaputEmAlinea","transformarIncisoParagrafoEmAlinea","transformarOmissisEmAlinea","transformarOmissisEmArtigo","transformarOmissisEmIncisoCaput","transformarOmissisEmIncisoParagrafo","transformarOmissisEmItem","transformarOmissisEmParagrafo","transformarItemEmAlinea","transformarParagrafoEmArtigo","transformarParagrafoEmIncisoParagrafo","transformarParagrafoEmIncisoCaput","VALIDAR_ARTICULACAO","validarArticulacaAction","validarElementoAction","AtualizarNotaAlteracao","notaAlteracao","atualizarNotaAlteracaoAction","removerElementoSemTextoAction","DescricaoSituacao","isSituacaoExclusivaDispositivoEmenda","dispositivo","DISPOSITIVO_ADICIONADO","DISPOSITIVO_MODIFICADO","DISPOSITIVO_SUPRIMIDO","situacao","descricaoSituacao","TEXTO_OMISSIS","isArticulacao","isDispositivoGenerico","isArtigo","isCaput","isParagrafo","isInciso","isIncisoCaput","pai","isIncisoParagrafo","isAlinea","isItem","isOmissis","isAgrupador","isAgrupadorNaoArticulacao","isAgrupadorGenerico","isDispositivoDeArtigo","isEmenta","isTextoMaiusculo","isCapitulo","isParte","isLivro","isTitulo","isTextoOmitido","ClassificacaoDocumento","getArticulacao","getDispositivo","filhos","hasAlteracao","alteracoes","findDispositivoByUuid","getUltimoFilho","hasFilhos","getFilhosEstiloLexML","irmaosMesmoTipo","artigos","getAgrupadoresAcima","referencia","agrupadores","getArtigo","getArtigoDoProjeto","getDispositivoAnteriorNaSequenciaDeLeitura","disp","accept","isArticulacaoAlteracao","anterior","irmaos","getFilhosArtigoEstiloLexML","getDispositivoPosteriorNaSequenciaDeLeitura","aPartirDe","proximo","getIrmaoPosteriorIndependenteDeTipo","isDispositivoRaiz","art","getParagrafosEOmissis","getProximoArtigoAnterior","buscaArtigoAnteriorAbaixo","getAgrupadorPosterior","hasFilhoGenerico","isUnicoMesmoTipo","isUltimoMesmoTipo","isPrimeiroMesmoTipo","getDispositivoAnterior","getDispositivoAnteriorMesmoTipo","getDispositivoAnteriorMesmoTipoInclusiveOmissis","getIrmaoAnteriorIndependenteDeTipo","getDispositivoAnteriorDireto","getDispositivoPosterior","getDispositivoPosteriorMesmoTipo","getDispositivosAnterioresMesmoTipo","getDispositivosPosterioresMesmoTipo","getDispositivoPosteriorMesmoTipoInclusiveOmissis","getDispositivosPosteriores","isExclusao","indexOfArtigo","isArtigoUnico","isParagrafoUnico","getDispositivoCabecaAlteracao","cabecaAlteracao","isDispositivoCabecaAlteracao","isAntesDoPrimeiroDispositivoOriginal","isOriginal","isUltimaAlteracao","lista","getDispositivoAndFilhosAsLista","buscaDispositivoDeArtigoPosterior","isUltimaEnumeracao","proximoDispositivoDeArtigo","isTodosFilhosTipoEnumeracaoSuprimidos","getSomenteFilhosDispositivoAsLista","isSuprimido","DISPOSITIVO_ORIGINAL","isAdicionado","DISPOSITIVO_NOVO","isModificado","isModificadoOuSuprimido","buildListaDispositivos","percorreHierarquiaDispositivos","visit","buscaNaHierarquiaDispositivos","buscaDispositivoById","projetoNorma","idArtigo","extraiIdArtigo","raiz","isAscendente","dAscendente","isDescendenteDeSuprimido","buscaProximoOmissis","posterior","isDispositivoNaNormaAlterada","isDispositivoNovoNaNormaAlterada","podeRenumerarFilhosAutomaticamente","podeEditarNotaAlteracao","getProximoAgrupadorAposAgrupador","ignorarFilhos","filhoAgrupador","proximoIrmao","getProximoAgrupadorAposArtigo","getTiposAgrupadoresQuePodemSerInseridosDepois","primeiroAgrupador","getPrimeiroAgrupadorNaArticulacao","agrupadorDepois","getPrimeiroAgrupadorDepois","getTipoAgrupadorNivelAcima","agrupadorRef","getRangeTiposAgrupador","getTipoAgrupadorNivelAbaixo","tipos","indexPrimeiroAgrupador","getIndexTipoAgrupador","getTiposAgrupadoresQuePodemSerInseridosAntes","tipoAgrupadorNivelAcima","agrupadorAntes","getAgrupadorAntes","tipoInicial","tipoFinal","tipoAgrupador","tiposAgrupadorArtigoOrdenados","indexRef","hasEmenta","findDispositivoByUuid2","uuid2","getDispositivoByUuid2","TagNode","nome","valores","atributos","resultado","valor","addAtributo","atributo","DispositivoComparator","d1","i1","getIndices","comparaIndices","indices","getPaiParaComparacao","getIndexDoFilho","indices1","indices2","size1","size2","DispositivoEmendaUtil","alteracao","CmdEmdUtil","dispositivosEmenda","dispositivoAfetado","getDispositivoAfetado","isAlteracaoIntegral","primeiro","filhosAdicionadosComAgrupador","listaFilhosAdicionadosComAgrupador","isOmissisAdjacenteADispositivoDeEmenda","isAlteracaoIntegralEmAlteracao","getDispositivoAfetadoEmAlteracao","getDescricaoSituacaoParaComandoEmenda","filho","mapa","atualizaMapa","hierarquia","getHierarquiaDispositivosDeUmDispositivo","mapaAtual","dispositivoAtual","mapaFilho","novoMapa","atualizaMapaDeAlteracaoDeNorma","sequencias","qtdSequencias","isSequenciaPlural","sequencia","qtdRanges","getQuantidadeRanges","getPrimeiroRange","getQuantidadeDispositivos","getArtigoPosterior","isUltimoDispositivoDoMesmoTipo","buscaProximoArtigo","getProximoIrmaoRecursivo","irmao","sb","pronomePossessivoSingular","getNumeracaoComRotuloParaComandoEmenda","dispositivosAlterados","getDispositivoPosteriorDireto","alteracaoNormaVigente","trataTextoParaCitacao","dispositivosAdicionadosProposicao","implicaEmRenumeracaoRedacaoFinal","rotulo","getFilhoNaoAdicionadoDeAgrupadorAdicionado","agrupador","TipoMensagem","AutoFix","hasIndicativoDesdobramento","hasIndicativoFinalSequencia","hasIndicativoContinuacaoSequencia","TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO","hasIndicativoInicioAlteracao","normalizaSeForOmissis","validaTextoDispositivo","mensagens","addMensagem","ERROR","artigoDefinido","isValidHTML","WARNING","INFORMAR_NORMA","isSeguidoDeOmissis","tipoEmenda","EMENDA_ARTIGO_ONDE_COUBER","verificaNecessidadeRenumeracaoRedacaoFinal","localStorage","getItem","fix","nomeEvento","existe","validaTexto","validaTextoAgrupador","TipoGenero","GeneroFeminino","tipoGenero","pronomePossessivoPlural","artigoDefinidoSingular","artigoDefinidoPlural","artigoIndefinidoSingular","artigoDefinidoPrecedidoPreposicaoASingular","artigoDefinidoPrecedidoPreposicaoAPlural","contracaoEmArtigoDefinidoSingular","GeneroIndefinido","GeneroMasculino","generoFeminino","generoMasculino","generoIndefinido","generoFromLetra","letraGenero","NomeComGenero","genero","VOCABULARIO","autoridades","urn","tiposDocumento","fakeUrns","sigla","urnAutoridade","urnTipoDocumento","siglas","atalhosUrn","eventos","tipoTextoProcessoLegislativo","substitutivo","getSigla","getTipo","fnProcurarPorUrnTipoDocumento","getNumero","formataNumero","getData","getDataPorExtenso","mes","dataInformada","getAno","retiraFragmento","converteDataFormatoBrasileiroParaUrn","dataRegex","buildFakeUrn","ano","fake","autoridade","buildUrn","validaUrn","getAutoridade","getNomeExtensoComDataExtenso","atalho","dataString","diaOuApenasAno","dataExtenso","getDataExtenso","toLocaleString","toLocaleDateString","month","getRefGenericaProjeto","ALGARISMOS_ROMANOS","CM","D","CD","XC","XL","X","IX","IV","isNumeracaoZero","isNumero","isNumeracaoValida","isLetra","letra","isRomano","converteLetraParaNumeroArabico","acumulador","converteNumeroArabicoParaLetra","strNumero","intToAlpha","converteNumeroRomanoParaArabico","numeroRomano","tot","numberCharToInt","converteNumeroArabicoParaRomano","temp","resto","trataNumeroAndComplemento","funcNumero","funcComplemento","converteNumerosComplementoParaLetra","converteLetrasComplementoParaNumero","comparaNumeracao","partesA","partesB","numA","remainingA","numB","remainingB","rA","rB","calculaNumeracao","getNumeracao","mapValidacaoNumeracao","Artigo","Paragrafo","Inciso","Alinea","Item","getProximoNumero","getNumeroAbaixo","dispositivosAnteriores","getArtigosAnterioresIndependenteAgrupador","dispositivoPosteriores","getArtigosPosterioresIndependenteAgrupador","dispositivoOriginalAnterior","dispositivoOriginalPosterior","dispositivoAnteriorAdicionado","seqDispEmenda","contaIrmaosNaoOriginaisConsecutivosAte","validaNumeracao","_f","RENUMERAR_DISPOSITIVO","_g","OMISSIS_ANTES","_h","validaOrdemDispositivo","_j","isLastFilho","validaNumeracaoDispositivoAlteracao","validaNumeracaoDispositivo","validaDispositivo","relacaoFilhos","dispositivo1","dispositivo2","OMISSIS_SEQUENCIAIS","isDispositivosSequenciais","validaHierarquia","validaReferencia","DispositivoSuprimido","dispositivoOriginal","getAcoesPermitidas","acoes","acao","buildHref","calculaSequencialOmissis","buildHierarquia","idArray","buildId","isElementoDispositivoAlteracao","uuidAlteracao","getNivel","buildElementoPai","articulacaoAlteracao","lexmlId","uuid2Alteracao","createElemento","procurarElementoAnterior","fechaAspas","elementoAnteriorNaSequenciaDeLeitura","dispositivoAnteriorNaSequenciaDeLeitura","nivel","editavel","sendoEditado","acoesPossiveis","getAcoesPossiveis","abreAspas","dispositivoAlteracao","tipoOmissis","tiposAgrupadoresQuePodemSerInseridosAntes","tiposAgrupadoresQuePodemSerInseridosDepois","createElementoValidado","createElementos","validados","fnCreateElemento","getElementos","getDispositivoFromElemento","ignorarElementoAlteracao","getArticulacaoFromElemento","flatMap","criaElementoValidadoSeNecessario","incluiAcoes","criaListaElementosAfinsValidados","incluiDispositivo","listaDispositivosRenumerados","podeAdicionarAtributoDeExistencia","StateType","abreArticulacao","action","modo","past","present","future","ui","stateType","DocumentoCarregado","alertas","numEventosPassadosAntesDaRevisao","load","classificacao","Counter","generateId","ValidacaoDispositivo","BlocoAlteracao","tipoAcao","iniciarBlocoAlteracao","finalizarBlocoAlteracao","BlocoAlteracaoNaoPermitido","TipoConteudo","ConteudoDispositivo","tipoConteudo","ConteudoTexto","HierarquiaAgrupador","addFilho","addArtigo","addFilhoOnPosition","addArtigoOnPosition","hasArtigos","_filhos","removeFilho","removeArtigo","renumeraFilhos","createRotulo","renumeraArtigos","HierarquiaDispositivo","novoId","NumeracaoAgrupador","informouAgrupadorUnico","getNomeAgrupadorUnico","normalizaNumeracao","numeracao","createNumeroFromRotulo","numAux","prefixo","toLocaleUpperCase","setMaiusculaPrimeiraLetraDaDescricao","palavras","toLocaleLowerCase","getNumeracaoParaComandoEmenda","NumeracaoIndisponivel","adicionarTextoOmissisAction","removerTextoOmissisAction","ACEITAR_REVISAO","aceitarRevisaoAction","REJEITAR_REVISAO","rejeitarRevisaoAction","exibirDiferencaAction","acoesMenu","acoesExclusivasEdicao","isAcaoMenu","acoesDisponiveis","getAcaoAgrupamento","podeConverterEmOmissis","MotivosOperacaoNaoPermitida","buildPast","retornaEstadoAtualComMensagem","normalizaNomeAcaoTransformacao","tipoDispositivo","replaceAll","isAcaoPermitida","montaEMostraMensagensErro","verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida","ORIGINAL","buildMessages","motivosOperacaoNaoPermitida","motivo","RegrasAgrupadores","AGRUPADOR","getAcaoPossivelTab","getAcaoPossivelShiftTab","DispositivoNovo","localeCompare","DispositivoAdicionado","EMENDA","SituacaoDispositivo","TipoLexml","converteFilhos","destino","criaDispositivo","copiaFilhos","AlineaLexml","PROXIMO_DIFERENTE_ALINEA","RegrasAlinea","SUFIXO","NumeracaoAlinea","ArtigoLexml","PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA","hasAgrupadoresPosteriores","hasAgrupadoresAcima","tiposExistentes","RegrasArtigo","BlocoAlteracaoPermitido","PREFIXO","ARTIGO_UNICO","informouArtigoUnico","isNumeracaoComComplementoAlfabetico","isNumeracaoComComplementoNumerico","getNumeroAndSufixoNumeracao","paraComandoEmenda","ordinal","NumeracaoArtigo","incisos","getIncisosCaput","paragrafos","_paragrafos","addIncisoCaput","addParagrafo","removeParagrafo","renumeraIncisos","renumeraParagrafos","ajustaRotuloParagrafoUnicoSeNecessario","nParagrafos","paragrafoUnico","HierarquiaArtigo","CaputLexml","RegrasCaput","NumeracaoCaput","DispositivoGenericoLexml","RegrasDispositivoGenerico","NumeracaoGenerico","IncisoLexml","PROXIMO_DIFERENTE_INCISO","complemento","RegrasInciso","NumeracaoInciso","ItemLexml","RegrasItem","isNumeracaoValidaParaRotulo","NumeracaoItem","ParagrafoLexml","PROXIMO_DIFERENTE_PARAGRAFO","RegrasParagrafo","PARAGRAFO_UNICO","informouParagrafoUnico","NumeracaoParagrafo","ArticulacaoLexml","_artigos","CapituloLexml","DispositivoAgrupadorGenericoLexml","LivroLexml","ParteLexml","SubsecaoLexml","SecaoLexml","TituloLexml","OmissisLexml","RegrasOmissis","_texto","ConteudoOmissis","EmentaLexml","RegrasEmenta","desativaRotuloAutomaticoSeDispositivoAlteracao","createArticulacao","createAlteracao","createByInferencia","criaDispositivoCabecaAlteracao","createFromReferencia","podeSerUltimaalteracao","_l","_k","_p","_o","_m","_r","_q","_u","_t","_v","_x","_w","_0","_z","_3","_1","_2","createWhenReferenciaBlocoAlteracao","createWhenReferenciaIsArtigo","createWhenReferenciaIsAgrupador","createFromReferenciaDefault","buildDispositivosAssistente","referencias","identificaReferencias","artigoInformado","cabeca","buildCabecaAlteracao","processaFilhos","resultParser","ReferenciaDispositivoParser","valido","regexEncaixe","regexArtigo","regexParagrafo","regexInciso","regexAlinea","regexItem","preparaTexto","execArray","ativarDesativarRevisaoAction","quantidade","Modo","getRevisoesElemento","isRevisaoElemento","findRevisaoByElementoUuid","elementoAposRevisao","findRevisoesByElementoUuid","identificarRevisaoElementoPai","rAux","uuidPai","ElementoIncluido","getUuidPaiElementoRevisado","elementoAntesRevisao","rPai","actionType","isRevisaoMesmaSituacao","idRevisaoElementoPai","idRevisaoElementoPrincipal","findRevisaoElementoPrincipal","mapperActionTypeToDescricao","ADICIONAR_ELEMENTO","REMOVER_ELEMENTO","SUPRIMIR_ELEMENTO","ATUALIZAR_TEXTO_ELEMENTO","buildDescricaoRevisaoFromMovimentacaoElemento","RESTAURAR_ELEMENTO","ADICIONAR_ELEMENTOS_FROM_CLIPBOARD","buildDescricaoRevisaoFromStateType","UNDO","REDO","mapperStateTypeToDescricao","ElementoRemovido","ElementoRestaurado","ElementoModificado","ElementoSuprimido","buildDescricaoRevisaoElemento","buildDescricaoRevisaoTexto","getUuidPai","getRevisoesElementoAssociadas","isRevisaoJustificativa","existeFilhoExcluidoDuranteRevisao","uuids","isRevisaoDeExclusao","isRevisaoPrincipal","RevisaoJustificativaEnum","RevisaoTextoLivreEnum","getRevisoesDeExclusaoOrdenadasPorUuid","r1","removeAtributosDoElemento","removeAtributosDoElementoAnteriorNaSequenciaDeLeitura","atributosPermitidos","getQuantidadeRevisoesAll","revisoesDispositivos","listaRevisoes","salvaNoNavegadorOpcaoNaoMostrarNovamente","setItem","setCheckedElement","atualizaReferenciaElementoAnteriorSeNecessario","tipoProcessamento","findRevisaoDeExclusaoComElementoAnteriorApontandoPara","findUltimaRevisaoDoGrupo","dPrimeiroElementoIncluido","ultimoFilho","ePrimeiroElementoIncluido","isAtualizarPosicaoDeElementoExcluido","isRevisaoDeMovimentacao","isRevisaoDeTransformacao","isRevisaoDeModificacao","elementoIncluido","elementoExcluido","associarRevisoesAosElementosDosEventos","se","RevisaoRejeitada","RevisaoAdicionalRejeitada","associarRevisoesAosElementos","mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes","tempStates","operacao","eventosParaUnificar","ElementoValidado","rejeitar","ElementoRenumerado","ElementoSelecionado","ElementoMarcado","SituacaoElementoModificada","eventosPast","tempState","unificarEvento","idsRevisoes","DispositivoOriginal","acoesFiltradas","resetUuidTodaArvore","copiaDispositivosParaOutroPai","posicaoAtualArtigo","paiAtual","ajustaReferencia","isPrimeiroArtigo","isPrimeiroParagrafo","isNovoDispositivoDesmembrandoAtual","getElementosDoDispositivo","valida","getElementosAlteracaoASeremAtualizados","getDispositivosCabecaAlteracaoFromElementos","ca","buildEventoAdicionarElemento","Eventos","setReferencia","buildEventoAtualizacaoElemento","buildUpdateEvent","removeAndBuildEvents","removidos","dispositivosRenumerados","dispositivoAnterior","ehDispositivoAlteracao","dispositivoValidado","elementosRemovidos","elementosValidados","buildEventoExclusaoElemento","dispositivoParaAtualizar","removeAgrupadorAndBuildEvents","agrupadoresAnteriorMesmoTipo","paiOriginal","removido","irmaoAnterior","transferidosParaOutroPai","posNoPaiNovo","novoPai","getPaiQuePodeReceberFilhoDoTipo","renumerados","renumeradosPaiOriginal","tipoFilho","dispositivosPermitidos","restauraAndBuildEvents","addRestauracao","elementoAntesRestauracao","restaura","aRestaurar","elementoPai","getElementoPaiDeEnumerodos","dipositivoPai","getEvento","getElementosRemovidosEIncluidos","mapDispositivos","ElementoReferenciado","RevisaoAceita","evento","stateEvents","adicionarOmissisObrigatorios","adicionaElemento","textoModificado","refAtual","atualCaputPosicaoFilho","refUltimoFilho","originalmenteUnico","elementoAtualOriginal","textoFoiModificado","pDispositivo","naoPodeCriarFilho","INFO","posicaoAtual","calculaPosicao","paiDoNovo","elementoAtualAtualizado","_y","agrupaElemento","descricaoTipo","isAbrindoEmenda","posicaoDoNovoAgrupador","manterNovoNoMesmoGrupoDeAspas","dispositivosAlteracao","dispositivosArticulacao","criarNovaCabecaDeAlteracao","getReferencia","paiQuePodeReceberNovoAgrupador","posNovoAgrupador","calculaPosNovoAgrupador","getDispositivosASeremCopiadosParaOutroPai","dispositivosAux","fnFilterAgrupadorAdicionado","dArticulacao","dReferenciado","paiQuePodeReceberFilho","ds","isDispositivoValidoNoConjunto","dadosComplementares","pais","getPais","indexAtual","tiposAgrupadorArtigo","atuaEhDispositivoDeAlteracao","DispositivoModificado","processaDispositivosAdicionados","da","dispositivosAdicionados","criaEventosParaDispositivoAgrupador","criaEventoElementosIncluidos","isEmendaEmAlteracaoDeNorma","dea","idPosicaoAgrupador","isPrimeiroDispositivoEmAlteracaoDeNorma","elementosIncluidos","novoAgrupador","ajustaAtributosDispositivoAdicionado","criaArvoreDispositivos","idPai","referenciaAjustada","novoEl","ehCaput","idIrmaoAnterior","idSemCpt","urnNormaAlterada","corrigeIdDispositivoSeNecessario","processaRevisoes","elementosExcluidosEmModoDeRevisao","elementoAnterior","processarElementoDaRevisao","buildEventoRevisaoDispositivoRestaurado","revisoesRestauracao","atualizarUuidDoPaiDoElementoRemovido","revisaoPai","idRevisao","findRevisaoById","atualizaReferenciaElemento","urnNova","urnAnterior","normaExtenso","normaLink","textoDispositivo","textoUrn","indexCursor","removeItem","eventosUi","atualizaTextoElemento","textoOriginal","textoAtual","dispositivoOriginalNovamente","solicitaNorma","validaAlteracaoExistenciaDispositivo","newValueExisteNaNormaAlterada","currentValueExisteNaNormaAlterada","validaAlteracaoExistenteParaNovo","validaAlteracaoNovoParaExistente","isDispositivoPossuiPaiNovoNaNormaAlterada","existeDispositivoSemNumeroNaoOmissis","existeOmissis","existeNecessidadeDeOmissis","transformaTipoElemento","isAcaoTransformacaoPermitida","dispositivoAnteriorAtual","ultimoFilhoDispositivoAnteriorAtual","atualRenumerados","paiNovo","converteDispositivo","elementosRenumerados","buildEventoTransformacaooElemento","removeElemento","existeFilhoExcluidoOuAlteradoDuranteRevisao","isRejeitandoRevisao","findRevisaoByElementoUuid2","primeiroFilhoDoAgrupador","elPrimeiroFilhoDoAgrupador","isAtualizarElementoEmenta","getTipoSituacaoByDescricao","getDispositivoPaiFromElemento","redodDispositivoExcluido","isOmissisCaput","incluir","novosEvento","novos","primeiroElemento","idPrimeiroDispositivo","redoDispositivosExcluidos","remover","processarModificados","novosElementos","findRevisaoDeRestauracaoByUuid","processaRenumerados","processaValidados","processaSituacoesAlteradas","isUndoRedoInclusaoExclusaoAgrupador","eventosFiltrados","ajustarAtributosAgrupadorIncluidoPorUndoRedo","eventosFonte","eventosResultantes","refFonteAgrupadorIncluido","agrupadorIncluido","processarRestaurados","elementoDeReferencia","elementoAntesDeRestaurarSituacao","processarRevisoesAceitasOuRejeitadas","revisoesRetornadasParaState","existeRevisaoCriadaPorExclusao","revisaoASerAtualizada","revisaoRetornada","ultimaRevisaoDoGrupo","getElementosFromRevisoes","retorno","elementoASerIncluido","eventosRevisao","getEventosDeRevisao","idsRevisoesAssociadas","eventoRestaurados","Situacao","restaurarSituacao","elementosParaMarcar","getEventoMarcacaoElemento","moverParaFimLinha","podeRemoverDispositivo","ajustarNumero","restauraElemento","possuiFilhosModificados","getSituacoesFilhos","situacoes","suprimeElemento","podeSuprimir","suprimeAndBuildEvents","buildFuture","processarSuprimidos","revisoesDeRejeicaoDeRestauracaoASeremRetornadas","getRevisoesFromElementos","incluidos","ultimoDispositivoCriado","isEmendamento","buildProjetoNormaFromJsonix","documentoLexml","emendamento","NORMA","PROJETO","getUrn","getMetadado","getParteInicial","getTextoArticulado","projeto","testMode","fnAjustaFormatoQuill","tempContainer","tempQuill","ajustarTextosParaQuill","retiraCaracteresDesnecessarios","documento","metadado","identificacao","epigrafe","parteInicial","buildContent","preambulo","buildDispositivoEmenta","buildArticulacao","substituiAspasRetasPorCurvas","tree","buildTree","lXhier","cabecasAlteracao","localPart","textoOmitido","buildContentDispositivo","buildAlteracao","lXcontainersOmissis","adicionaTextoAoUltimoDispositivoCriado","buildDispositivo","nomeAgrupador","newInnerHTML","montaTag","elementTexto","buildDispositivoFromJsonix","TipoRestricaoEnum","InfoTextoColado","articulacaoProposicao","textoColadoOriginal","textoColadoAjustado","textoColadoAjustadoParaParser","jsonix","articulacaoColada","montarRestricoes","validarArticulacaoColadaAnaliseInicial","validarArticulacaoColadaAnaliseContextualizada","infoDispositivos","isColandoArtigoSemNumeracao","hasArtigoOndeCouber","tiposColados","montarListaTiposDispositivosColados","existentes","tipoColado","getTipoColadoFromArticulacao","getDispositivoReferencia","montarListaDispositivosExistentes","montarListaDispositivosNovos","infoElementos","podeColarAntes","restricoes","removeAspasENRSeNecessario","numerarArtigosOndeCouber","getJsonixFromTexto","existeItemSemPaiAlinea","ajustaFalsosItensParaParser","atualizarAtributosEAnaliseContextualizada","tiposRestricoesAnaliseInicial","ARTICULACAO_SEM_FILHOS","AGRUPADORES_DE_ARTIGO","DISPOSITIVOS_DE_TIPOS_DIFERENTES","DISPOSITIVOS_COM_ROTULO_DUPLICADO","textoAux","textoItemAjustadoParaPesquisa","comecaComAspas","headers","json","getTipoColadoFromDispositipo","nomeTipo","ajustaIdsNaArticulacaoColada","idsColados","idsExistentes","AGRUPADOR_GENERICO_NA_ARTICULACAO","hasAgrupador","existeDispositivoComRotuloDuplicado","isArticulacaoInconsistente","getTextoInconsistencia","ARTICULACAO_INCONSISTENTE","isDispositivoInconsistente","tiposPermitidos","rotulos","infoTextoColado","dispositivosExistentes","pluralTipoColado","ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO","ALTERACAO_DENTRO_DE_ALTERACAO","dispositivosExistentesAux","isColandoFilhos","FILHOS_EM_DISPOSITIVO_SUPRIMIDO","DISPOSITIVO_JA_MODIFICADO","isPermitidoColarAdicionando","referenciaAux","pluralTipoAtual","DISPOSITIVO_EM_POSICAO_INVALIDA","DISPOSITIVO_ANTES_DO_ATUAL","isColandoArtigosComFilhosSobreArtigosComAlteracoes","ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES","isColandoArtigosComAlteracoesSobreArtigosComFilhos","ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS","isColandoArtigoExistenteComMudancaDaNormaAlterada","ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA","hasArtigosComAlteracoes","hasArtigosComFilhos","tipoASerColado","f2","ajustaIdSeNecessario","ajustarId","contador","novoTexto","ajustaHtmlParaColagem","htmlInicial","allowedTags","removeAllHtmlTagsExcept","REGEX_OMISSIS","colarDispositivos","isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao","isColandoEmAlteracaoDeNorma","adicionados","modificados","suprimidos","buscarDispositivoByIdTratandoParagrafoUnico","colarDispositivoSubstituindo","colarDispositivoAdicionando","eventoElementoRemovido","isAdicionarNaPosicaoAtual","buildEventoElementoRemovido","buildEventoElementoIncluido","buildEventosElementoModificado","buildEventoElementosRenumerados","processaEventosSuprimidos","buildEventoSituacaoElementoModificada","buildEventoElementoMarcado","filhosASeremRenumerados","primeiroDispositivoColado","elementoAdicionados","paiRef","referenciaUI","dispositivosProcessar","getDispositivosToElementoSuprimido","elementosComSituacaoModificada","getDispositivosEmAlteracaoDeNormaASeremAtualizados","getParagrafosDeNumero1","getArtigosComAlteracaoDeNorma","dOriginal","dColado","colecaoInfoOmissis","omissisImediatamenteAnterior","fColado","montarInfoOmissis","fOriginal","getUltimoDispositivoDoIntervaloOmitido","suprimirDispositivosForaDosIntervalosOmitidos","omitidos","dispositivosOriginaisOmitidosNaArticulacaoColada","isPrecedidoPorOmissis","ajustaSituacaoDispositivoAdicionado","removeOmissis","renumerarEAjustarIds","criaAtributosComunsAdicionado","omissisColado","dispositivosDaArvoreDoOmisses","dispositivosDaArvoreDoOriginal","indexOmissis","anteriorOmissis","posteriorOmissis","anteriorOmissisNaArvoreDoOriginal","posteriorOmissisNaArvoreDoOriginal","getDispositivosOriginais","prefixos","posteriorOmissisNaArvoreDoOmissis","indexAnteriorNaListaOriginal","indexPosteriorNaListaOriginal","getMensagemTipoRevisoes","contemRevisoesDispositivos","JustificativaAlterada","contemRevisoesJustificativa","Revisao","dataHora","RevisaoJustificativa","RevisaoTextoLivre","RevisaoElemento","formatDateTime","getSeconds","ATUALIZAR_USUARIO","atualizarUsuarioAction","isUndoDeRevisaoAceitaOuRejeitada","isAcaoDeRevisaoRejeitada","processaEventosDeSupressao","getEventos","revisoesParaRemover","getElementosFromEventos","eAux","processaEventosDeModificacao","isRevisaoDeRestauracao","revisaoDeElementoComMesmoUuid2RotuloEConteudo","getElementoAntesModificacao","isAjusteTextoOmitido","eAntesRevisao","eAposRevisao","processaEventosDeMoverOuTransformar","montarNovaRevisao","revInclusao","revisoesElemento","existeRevisaoParaElementos","revisaoDeElementoComMesmoLexmlIdRotuloEConteudo","findRevisoesByElementoLexmlId","findRevisoesByElementoUuid2","processaEventosDeInclusao","uuidsElementosIncluidos","processaEventosDeRemocao","uuidsElementosRemovidos","processaEventosDeRestauracao","elementoAtual","removeDuplicidades","isAcaoMoverOuTransformar","modificacoes","modificacao","adicionarOpcoesAoMenu","existeEventoDeInclusaoOuExclusao","atualizarLexmlIdEmElementosDeRevisoes","atualizarPosicaoDeElementosEmRevisoes","atualizarPosicaoDeElementosEmRevisoesByEvento","fator","fnCondicao2","lexmlIdPai","aceitarRevisaoEmLote","aceitarRevisao","revisoesAssociadas","atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao","revisaoPrincipal","ultimaRevisao","rejeitarRevisaoEmLote","rejeitarRevisao","uuid2Elementos","outrasRevisoes","elementosDeOutrasRevisoes","montarEventosDeModificacaoParaHistorico","rejeitaSupressao","rejeitaModificacao","rejeitaRestauracao","rejeitaInclusao","rejeitaExclusao","dispositivoASerRemovido","rAux2","eventoAux","atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao","montarListaElementosValidados","primeiroElementoReincluido","dUltimoFilho","eUltimoFilho","LIMPAR_REVISAO","limparRevisaoAction","isRedoDeRevisaoAceita","isRedoDeRevisaoRejeitada","combinedReducer","reducers","reducerKeys","finalReducers","unexpectedKeyCache","shapeAssertionError","finalReducerKeys","reducer","assertReducerShape","warningMessage","inputState","argumentName","unexpectedKeys","getUnexpectedStateShapeWarningMessage","nextState","previousStateForKey","nextStateForKey","combineReducers","appReducer","elementoReducer","mensagemValidacao","mudouIndicacaoDeExistenteParaNovo","alterado","informaExistenciaDoElementoNaNorma","atualizaNotaAlteracao","dispositivosSuprimidos","dispositivosModificados","elementosInseridos","stateEvent","RevisaoAtivada","aplicaAlteracoesEmenda","novosDispositivos","adicionaAlteracaoComAssistente","atualizaElemento","hasFix","elementoNovo","buscaProximoOmissisSequencial","autoFixElemento","newInstanceFromJsonix","adicionaElementosNaProposicaoFromClipboard","selecionaElemento","InformarDadosAssistente","solicitaDadosAssistente","movendoArtigoParaAgrupador","paiAntigo","dAnterior","moveElementoAbaixo","emAlteracao","anteriorAoAgrupador","dPosterior","moveElementoAcima","detalhe","renumeraElemento","suprimeAgrupador","removeElementoSemTexto","newAction","modificaTipoElementoWithTab","validaElemento","validaArticulacao","AtualizacaoAlertas","adicionaAlerta","removeAlerta","limparAlertas","RevisaoDesativada","ativaDesativaRevisao","AtualizaUsuario","atualizaUsuario","aceitaRevisao","rejeitaRevisao","limpaRevisao","numElementos","atualizaRevisao","adicionaDiffMenuOpcoes","rootStore","createStore","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","dispatch","replaceReducer","nextReducer","outerSubscribe","observeState","unsubscribe","__REDUX_DEVTOOLS_EXTENSION__","ArticulacaoComponent","lexmlEtaConfig","customElement","ft","ComandoEmendaComponent","changedProperties","buildTemplateComando","comandos","res","comando","cabecalho","buildTemplateCitacao","citacao","cabecalhoComum","emenda","unsafeHTML","Subscription","isCanceled","Observable","subscriptions","inscricao","notify","subscription","onChangeColarDialog","DialogColagem","nomeDispositivoSingular","nomeDispositivoPlural","isPrimeiroDialogoTipoColagem","exibeDialogAviso","montaDialogoAviso","dialogColagem","idDialog","labelDialog","tipoRodape","variante","montaDialogo","colarTextoArticuladoDialog","getNomeDispositivo","TipoSubstantivoEnum","SINGULAR","PLURAL","executarValidacaoRestricao","montaDialogoTipoColagem","restricao","getConcordanciaTodosTodas","getConcordanciaAsOs","montaDialogoAdicionarAposAtual","montaDialagoNaoPermitidoPadrao","montaDialogoModificarExistenteAdicionarNovo","dialogElem","getRadioGroup","getTipoRodape","buildRadioClick","addIconBeforeTitle","setFocusButtonConfirmar","elDialogTitle","insertAdjacentHTML","getIcon","botoes","onclick","fecharDialog","confirma","executeByIdDialog","opt1","opt2","habilitaBotaoConfirmar","getValueFromRadioGroup","idRadioGroup","colarSubstituindo","colarComoTextoSimples","getRadioGroupTipoColagem","getRadioGroupModificarExistenteAdicionarNovo","getRadioGroupSimNao","getRodapeConfirmar","getRodapeFechar","tipoSubstantivo","isGeneroFeminino","nomeDispositivo","Elemento","EtaBlot","instanceBlotName","linha","tamanho","AlinhamentoMenu","EtaBlotMenu","EtaBlotMenuBotao","EtaBlotMenuConteudo","alinhamentoMenu","classeAdicional","Esquerda","EtaBlotMenuItem","EtaBlotRotulo","getClasseCSS","podeInformarNumeracao","montarRotulo","title","formatoStyle","criarAtributoStyle","classeSituacao","setEstilo","atualizarAtributos","isRevisaoPrincipalDeExclusaoDeDispositivo","EtaBlotAbreAspas","montarHTML","EtaBlotConteudo","_htmlAnt","htmlAnt","EtaBlotEspaco","EtaBlotExistencia","_atualizarAtributos","atualizarElemento","EtaBlotFechaAspas","EtaBlotNotaAlteracao","EtaBlotRevisaoRecusar","EtaBlotRevisaoAceitar","EtaContainer","firstBlot","findBlot","findBlotByBlotName","findBlotByClass","clazz","EtaBlotRevisao","montarMensagem","getIniciais","EtaContainerRevisao","atualizarBlots","blotBotaoAceitarRevisao","blotBotaoRejeitarRevisao","blotInfoRevisao","EtaContainerTable","_lexmlId","_uuid2","_editavel","_nivel","_numero","_tipo","_agrupador","_hierarquia","_descricaoSituacao","_existeNaNormaAlterada","criarId","atualizarAtributoRevisao","atualizarAtributoExistenciaNormaAlterada","blotRotulo","findBlotRef","blotRef","searchBlotRotuloNode","blotExistencia","blotConteudo","blotAbreAspas","blotFechaAspas","blotNotaAlteracao","containerRevisao","containerDireito","blotInsideContainerDireito","resetClasses","classeCSS","ativarBorda","desativarBorda","limparContainerDireito","classe","isLinhaComMarcacaoDeExclusao","cancelarPropagacaoDoEvento","strCaracteresValidos","CaracteresValidos","CaracteresNaoValidos","EtaKeyboard","operacaoTecladoInvalida","adicionaElementoTeclaEnter","transformaElemento","moveElemento","onChange","toggleExistencia","adicionaAgrupador","altGraphPressionado","onHotKeyToolbar","elementoLinhaAtual","linhaAtual","cursorDeTextoEstaSobreLink","isTeclaQueAlteraTexto","verificaSelecaoComLink","enterEmOmissis","cursorDeTextoEstaSobreOmissis","isNotTeclasDeNavegacao","onTeclaHome","onTeclaEnd","onTeclaCtrlD","onTeclaCtrlZ","onTeclaCtrlY","onTeclaCtrlShiftA","onValidarTecla","onTeclaCtrlA","onHotKeyTransformacaoTipo","onHotKeyRenumeraDispositivo","onHotKeyToggleExistencia","onHotKeyAdicionaAgrupador","keyFake","keyDownFake","KeyboardEvent","onHotKeyMover","onTeclaArrowRight","onTeclaArrowLeft","onTeclaArrowDown","onTeclaArrowUp","onTeclaEnter","onTeclaEscape","onTeclaDelete","onTeclaBackspace","onTeclaTab","isTeclaComCaracterGrafico","verificarOperacaoTecladoPermitida","textoSelec","textoSelecionado","quantidadeCR","blotCursor","setIndex","linhaAnt","isProcessandoMudancaLinha","inicioConteudoAtual","fimConteudoAtual","apagaTextoNaPosicao","getPrimeiraLinha","getUltimaLinha","iniciaOuTerminaComLink","inicioLinha","negrito","EtaBlotConteudoOmissis","EtaBlotMensagem","EtaBlotMensagens","EtaBlotOpcoesDiff","EtaBlotTipoOmissis","getDescricaoTipoOmissis","EtaClipboard","onPasteTextoArticulado","clipboardData","textoClipboard","removeTagHead","removeTagScript","hasRotulo","adicionaDispositivos","EtaContainerOpcoes","blotBotaoExibirDiferencas","EtaContainerTdDireito","EtaContainerTdEsquerdo","classLevel","EtaContainerTr","EtaQuillBuffer","editorHtml","getConteudoHtml","blotBuffer","setConteudo","converterHtmlParaDelta","converterDeltaParaHtml","EtaQuill","bufferHtml","_undoEstruturaVazio","_redoEstruturaVazio","_processandoMudancaLinha","undoRedoEstrutura","elementoSelecionado","customClickHandler","observableSelectionChange","onSelectionChange","linhaAtualAux","_mudouDeLinha","verificarMudouLinha","limparHistory","_linhaAtual","acertarAspas","buffer","mudouDeLinha","linhaAnterior","_linhaAnterior","isUndoEstruturaVazio","undoEstruturaVazio","undoVazio","isRedoEstruturaVazio","redoEstruturaVazio","redoVazio","processandoMudancaLinha","processando","paddingLeft","border","borderColor","DataRotulo","destroi","getConteudoHtmlParteLinha","getLinhaByUuid2","getLinha","getLinhaPorId","getHtmlElement","setConteudoLinha","irProximaLinha","desmarcarLinhaAtual","linhaCursorAnt","marcarLinhaAtual","linhaCursor","atualizarLinhaCorrente","desmarcarLinhas","blotCursorAnt","posicaoTexto","novaAspas","scrollToElemento","isInEtaBoxViewport","scrollIntoEtaBox","offsetTopElement","lxEtaBox","etaBoxHeight","EtaBlotQuebraLinha","EtaQuillUtil","etaTable","etaTrContainer","etaTdTexto","etaTdEspaco","criarContainerOpcoes","criarContainerRevisao","etaContainerRevisao","etaContainerOpcoes","etaTdMensagens","avisoJaExiste","Norma","nomePreferido","nomePorExtenso","nomes","nomesAlternativos","sData","stringData","dataDDMMYYYY","formatDDMMYYYY","AutocompleteAsync","maxSuggestions","onSearch","onSelect","_interval","_bound","_blur","_mouseEnter","_search","contentElement","_timer","description","_handleChange","_handleItemMouseEnter","_handleItemMouseLeave","_inputEl","slotInputList","_tempValue","_suggestionEl","_handleKeyDown","onKeyUp","_handleKeyUp","onFocus","_handleFocus","onBlur","_handleBlur","childElementCount","_highlightedEl","_highlightPrev","previousElementSibling","_highlightNext","Option","AutocompleteNorma","urnInicial","_selectedNorma","_optionsNorma","_normas","_response","_updateNormas","paramQuery","_searchNormas","normas","_handleSearch","_handleSelect","_getNormaByURN","_autoCompleteAsync","focusAutoComplete","assistenteAlteracaoDialog","normaAlteracao","autocompleteNorma","cancelar","alertaMensagem","alertaComplemento","preencheAlerta","temErro","elementoFocavel","podeMostrarDialog","TextoDiff","adicionado","exibirDiferencasDialog","fnDestroy","contemRevisao","trataOmissisDiff","textoAntesRevisao","diferencaModificado","diferencaSemEspacosDuplicados","tabModificado","tabModificadoRevisao","diferencaEntreTextoAtualETextoAntesRevisao","tabPanelModificado","tabPanelModificadoRevisao","alertarInfo","idAlert","alert","closable","toast","EditorComponent","eventosOnChange","inscricoes","_idSwitchRevisao","_idBadgeQuantidadeRevisao","exibirBotoesParaTratarTodas","ajustarLinkParaNorma","listenerRotulo","renumerarElemento","listenerNotaAlteracao","editarNotaAlteracao","listenerToggleExistencia","toggleExistenciaElemento","listenerMensagem","criarElemento","listenerAceitarRevisao","listenerRejeitarRevisao","navegarEntreMarcasRevisao","direcao","checkedSwitchMarcaAlteracao","switchMarcaAlteracaoView","disabledParagrafoElementoRemovido","_quill","inicializar","configEditor","tool","processarStateEvents","quillNaoInicializado","destroiQuill","onClickUndo","onClickRedo","renderBotoesParaTratarTodasRevisoes","artigoOndeCouber","showComandoEmendaModal","showAjudaModal","showAtalhosModal","rejeitarTodasRevisoes","aceitarTodasRevisoes","ajudaModal","atalhosModal","comandoEmendaModal","formatacaoAlterada","agendarEmissaoEventoOnChange","linkTooltip","getNomeExtenso","onBold","onItalic","onScript","onOperacaoInvalida","alertar","isDesmembramento","textoAnterior","textoLinhaAtual","textoNovaLinha","adicionarElemento","indexInicio","indexFim","textoLinha","tamanhoNovaLinha","opcoes","NR","VZ","editarNotaAlteracaoDialog","podeRenumerar","tp","getMsgPlaceholder","rotuloAtual","erro","validar","validarInput","msgErro","partePrincipal","parteSufixo","resultPartePrincipal","isNumeracaoValidaPorTipo","adicionarAgrupadorArtigo","tipoPai","defaultAux","elTipoAgrupadorDefault","optPosicaoAntes","optPosicaoDepois","chkManterNoMesmoGrupoDeAspas","ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario","validarStatusChkManterNoMesmoGrupoDeAspas","isCabecaAlteracao","onchange","adicionarAgrupadorArtigoDialog","removerElementoSemTexto","removerElemento","moverElemento","transformarElemento","novoTipo","transformarAction","tabAction","ultimoEventoElementoSelecionado","carregarArticulacao","informarNormaDialog","inserirNovoElementoNoQuill","inserirNovosElementosNoQuill","atualizarQuill","atualizarOmissis","marcarLinha","atualizarSituacao","removerLinhaQuill","renumerarQuill","atualizarMensagemQuill","montarMenuContexto","atualizarEstiloBotaoRevisao","processaRevisoesAceitas","indicadorMarcaRevisao","indicadorTextoModificado","atualizarStatusBotoesRevisao","eventosQueDevemEmitirTextChange","isAceitandoRevisoesDeExclusao","existeReinclusaoDoElemento","processarEscolhaMenu","itemMenu","exibirDiferencas","selecionarLinha","fnSelecionarNovaLinha","linhaASerReinserida","linhaRef","novaLinha","criarContainerLinha","isEmendaArtigoOndeCouber","timerOnChange","nivelAlerado","elementoRemovidoEmRevisao","isMensagemSufixos","criarContainerMensagens","blotMenu","blotMenuConteudo","configurar","atualizarTextoElemento","exibirModalSufixos","configListenersEta","alertaGlobalRevisao","setCursorCurrentLine","origemEvento","statesType","emitirEventoOnChange","alertaGlobalVerificaRenumeracao","idAlerta","getDispositivosAdicionados","alertaGlobalVerificaCorrelacao","getDispositivosEmenda","listaLexmlIds","getElementsByClassName","etaContainerTable","botoesDialog","nao","sim","verificarQuillInicializado","removeListenersEta","payload","newInstanceFromTexto","botaoRevisao","ignorarStateTypes","mapElementos","uuidsElementosSemModificacao","uuidsElementosComModificacao","containerOpcoes","adicionaRemoveOpcaoDiffMenu","uuidsElementosSemRevisao","uuidsElementosComRevisao","numRevisoes","btnAceitarTodasRevisoes","btnRejeitarTodasRevisoes","ElementoComponent","htmlAgrupador","htmlDispositivo","AtalhosComponent","editorTextoRicoCss","quillTableCss","ContainBlot","TableCell","tr","TableHistory","historyChangeStatus","TableTrick","random_id","tableStack","entry","merge","emitTextChange","propertyChange","historyEntry","_parentNode","_node","_nextNode","tableNode","removeProperty","revert","mergedNodes","cell","cell_id","colSpan","rowSpan","TableToolbar","actions","TableSelection","inCellSelectionOnClick","cellSelectionOnClick","resetSelection","isMouseDown","previousSelection","selectionStartElement","selectionEndElement","targetCell","getTargetCell","focusedCell","preventMouseDown","clickedCellTimeout","dblClickTimeout","previousSelectionEndElement","getSelectionCoords","getCellAt","selectionChange","startLeaf","endLeaf","parentElement","closestTable","disableAll","currentTable","currentTarget","getBlot","find_td","find_table","editorNode","col_count","row_count","table_id","ri","row_id","ci","br","top_branch","_table","styleValue","endCell","last_cell","managed_merged_cells","new_td","merge_id","_cell","new_row","manage_merged_cells","managed_unmerged_cells","prev_cell","merged_cell","merge_rowspan","colIndex","colsToRemove","currentCell","_split","_td","widthValue","manageMergedCells","rowIndex","rowsToRemove","_tr","mergedCellContent","_oldContent","newContent","mergedNode","_removeCell","nodesToRemove","recursive","newDelta","sizes","insertTable","append_direction","addCol","removeCol","addRow","removeRow","removeTable","splitCell","mergeSelection","removeCell","removeSelection","anchorOffset","TableRow","createDefaultChild","Table","getQuill","tables","cell_counter","row_counter","nextCell","newCell","pasted","emitirEventoTableInTable","TableModule","Contain","mouseMove","mouseUp","configToolbar","is_pasted_data","rowNode","tableOptions","keycontext","format_start","format_end","resultNodes","collection","elementsIndex","nodeListToArray","nodeRemoved","resultNode","cells","selectionIndex","unmergedCell","nextBlot","nextBlotIndex","notaRodapeCss","atualizaRevisaoJustificativa","removeAllRevisoesJustificativa","criaRevisaoJustificativa","jaExisteRevisaoUsuarioAtual","revisoesUsuarioAtual","atualizaRevisaoTextoLivre","removeAllRevisoesTextoLivre","criaRevisaoTextoLivre","TextoLivreAlterado","jaExisteRevisao","revisaoUtil","EditorTextoRicoComponent","anexos","notasRodape","registroEvento","existeRevisaoByModo","TEXTO_LIVRE","getQuantidadeRevisoesTextoLivre","getQuantidadeRevisoesJustificativa","labelAnexo","lengthAnexos","onTableInTable","timerAlerta","customToolbarOptions","toolbarOptions","customFormatsOptions","formatsOptions","JUSTIFICATIVA","imageHandler","aspasCurvas","shiftTab","selectAll","backspace","redo2","setContent","addBotoesExtra","configureTooltip","elTableManagerButton","updateTexto","alterarLarguraColunaModal","alterarLarguraDaColuna","alterarLarguraTabelaModal","alterarLarguraDaTabela","alterarLarguraImagemModal","alterarLarguraDaImagem","menuContextImagem","onClick","lastSelecion","find_td_node","showAlterarLarguraColunaModal","find_table_node","showAlterarLarguraTabelaModal","updateNotasRodape","buildRevisoes","editorTextoRico","bgWpMenuImagem","showAlterarLarguraImagemModal","showMenuImagem","selectImage","imgBlot","tamanhoPermitido","trunc","loaded","changeWidthCol","updateApenasTexto","hideAlterarLarguraColunaModal","changeWidthTable","hideAlterarLarguraTabelaModal","highLightBotaoGerenciarTabela","toolbarContainer","elAnexo","setTitle","seletor","textoAjustado","configAbrindoTexto","associar","atualizaStatusElementosRevisao","getQuantidadeDeRevisoes","switchRevisaoComponent","ativarDesativarMarcaDeRevisao","atualizaQuantidadeRevisao","getNotasRodape","tempDiv","removeElementosTDOcultos","ajustarConteudoTagsNotaRodape","atualizaAnexo","anexo","getNomeSwitch","getNomeBadge","aceitarRevisoes","setTextoAntesRevisao","removeRevisoes","rejeitarRevisoes","immediate","fnUpdate","desabilitaBtn","timerAtualizaStatusElementosRevisao","desabilita","contadorView","_textoAntesRevisao","moduloRevisao","renderBotaoAnexo","removerAnexo","nomeArquivo","conteudoDinamico","exibirAnexo","write","base64","htmlConteudo","wpUpload","btn","btn_preview","inputUpload","confirmar","fechar","oninput","addAnexo","listaRestricoes","convertAnexo","listaRestricoesCompleta","restricaoCompleta","fileReader","onerror","uploadAnexoDialog","editarNotaRodape","editar","removerNotaRodape","estilo","AlterarLarguraTabelaColunaModalComponent","valorLargura","slAlert","slDialog","alterarLargura","AlterarLarguraImagemModalComponent","shoelaceLightThemeStyles","Emenda","dataUltimaModificacao","toISOString","aplicacao","versaoAplicacao","modoEdicao","ModoEdicaoEmenda","metadados","proposicao","RefProposicaoEmendada","Epigrafe","componentes","ComponenteEmendado","comandoEmendaTextoLivre","ComandoEmendaTextoLivre","comandoEmenda","ComandoEmenda","justificativa","local","autoria","Autoria","opcoesImpressao","OpcoesImpressao","colegiadoApreciador","ColegiadoApreciador","TipoAutoria","identificacaoTexto","siglaCasaLegislativa","tipoColegiado","articulado","DispositivosEmenda","DispositivoEmenda","DispositivoEmendaSuprimido","DispositivoEmendaModificado","DispositivoEmendaAdicionado","ItemComandoEmenda","PARLAMENTAR","imprimirPartidoUF","quantidadeAssinaturasAdicionaisSenadores","quantidadeAssinaturasAdicionaisDeputados","parlamentares","imprimirBrasao","textoCabecalho","reduzirEspacoEntreLinhas","tamanhoFonte","SubstituicaoTermo","termo","novoTermo","flexaoGenero","flexaoNumero","CitacaoComandoMultiplaAlteracaoNormaVigente","ultimoProcessado","adjacentesOmissis","fecharAspasAposOmissis","getTexto","buscaDispositivosAdjacentesAsOmissis","arvoreDispositivos","getArvoreDispositivosDeAlteracaoDeNorma","montaCitacaoComando","isFechaAspas","ehAgrupador","getTextoDoDispositivoOuOmissis","nodeDenominacao","writeDispositivoTo","writeOmissisFinal","arvoreAtual","tagOmissisSemRotulo","hasFilhosPropostos","arvore","hasPropostos","CitacaoComandoDeNormaVigente","qtdDispositivos","qtdSemCitacaoObrigatoria","getCitacoesMultiplas","cabecaAtual","dispositivosDaCabeca","getCabeca","getCitacaoMultipla","cit","CitacaoComandoMultipla","getArvoreDispositivos","mapFilhos","dispRotulo","CitacaoComandoDispPrj","getDispositivosParaCitacao","qtdSuprimidos","getDispositivosNaoOriginais","dispRef","dispRefAtual","listaDispRef","noGrupoDeAspas","getDispositivosMesmoGrupoDeAspas","removeFromArray","RangeDispositivos","isSituacao","isTipo","podeAdicionarAoRange","addInicio","isUltimo","getPrimeiro","getUltimo","getAnterior","print","ranges","isRotuloNecessario","printRotuloInicio","printSeparadorProximoDispositivo","printRotuloFimSeExistir","rangePosterior","getRangeDispositivosPosterior","hasApenasUmDispositivo","isMesmoTipoSituacao","getRotuloCompletoSingular","getRotuloCompletoPlural","getRangeDispositivosAnterior","isMesmoPai","getTipoDispositivoPlural","isVazio","ultimo","isMesmaSituacaoParaComandoEmenda","verificaAgrupadoresAdicionadosEmSequencia","getDispositivos","SequenciaRangeDispositivos","localizarEmAgrupador","informarCaputDoDispositivo","getPrimeiroDispositivo","getUltimoDispositivo","getRanges","setRanges","getTextoListaDeDispositivos","posRange","nr","AgrupadorDispositivosCmdEmd","getSequencias","agrupaRanges","separaRangesDeDoisDispositivos","separaRangesDeDoisDispositivosEmSequencias","isMesmaSequencia","dispSequencia","dispRange","isMesmoTipoParaComandoEmenda","separaDispositivosSeguidosDeOmissis","separaDispositivosSeguidosDeOmissis2","adicionaouDispositivos","CmdEmdCombinavel","c1","ArtigoAntesDispositivo","TipoReferenciaAgrupador","DispositivosWriterCmdEmd","artigoAntesDispositivo","NENHUM","tipoReferenciaAgrupador","APENAS_ROTULO","citarPais","posSequencia","primeiroDispSeq","primeiroEhAgrupador","referenciarDenominacao","DENOMINACAO_DO_AGRUPADOR","referenciarTodoAgrupador","TODO_AGRUPADOR","referenciarOAgrupador","O_AGRUPADOR","posicionarAgrupadores","ADICAO","getReferenciaCaputDoDispositivo","getTextoArtigoAntesSequencia","getRotuloTipoDispositivo","getRotuloPaisSequencia","getLocalizacaoAgrupadores","plural","getTextoArtigoAntesDispositivo","DEFINIDO","DEFINIDO_COM_PREPOSICAO_A","iniciarComMaiuscula","getRotuloPais","dispOrig","getRotuloPaisAgrupador","dispAlteracao","dispositivoNovoForaDeAlteracao","dispositivoNovoEmAlteracao","refIrmao","getProximoAgrupador","ultimoAgrupador","dispositivoSeguinte","dispositvoAnterior","CmdEmdAdicaoANormaVigente","generoNormaAlterada","textoTodos","refGenericaProjeto","isPrimeiro","dispositivosWriter","primeiroDaUltimaSequencia","CmdEmdModificacaoDeNormaVigente","CmdEmdSupressaoDeNormaVigente","isSequenciasPlural","escreveDispositivoAlterado","CmdEmdDispNormaVigente","getDispositivosNaAlteracaoParaComando","getGeneroUrnNorma","dispositivosReferenciados","temDispositivoMasculino","tem","iUltimo","cmd","escreveLei","temDispositivoNovo","escreveProposto","temCitacao","normalizaCabecalhoComandoEmenda","feminino","CmdEmdAdicao","retiraPrimeirosFilhosAdicionadosAgrupador","trataLocalizacaoEmAgrupador","trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos","ultimaSequencia","primeiroDosUltimos","trataLocalizacaoEmAgrupadorSequencia","reagrupar","isInclusaoDeArtigoProximoAAgrupador","artAnterior","getDispositivoIrmaoPosterior","isInclusaoNoInicioDeAgrupador","isInclusaoImediatamenteAntesDeAgrupador","CmdEmdAdicaoDispositivosOndeCouber","strRefProjeto","qtdArtigos","qtdAgrupadores","pluralTodos","temArtigos","CmdEmdModificacao","CmdEmdSupressao","CmdEmdDispPrj","getDispositivosComando","artigosOndeCouber","CmdEmdSubstituicaoTermo","substituicaoTermo","getComplementoFlexoes","flexoes","refProjeto","ComandoEmendaBuilder","getComandoEmenda","isInstanceOfSubstituicaoTermo","getComandoEmendaSubstituicaoTermo","getComandoEmendaArticulacao","cmdEmdSubstituicaoTermo","getDispositivosRepresentativosDeCadaComando","getTextoComplementoDispAlteracao","getTextoComplementoDispProposicao","montaCabecalhoComum","temDispositivoDeProjeto","qtdItens","listarItens","dispositivosNaoOriginais","adicionadosProposicao","temAgrupadorSuprimido","DispositivosEmendaBuilder","preencheDispositivos","getTipoDispositivoParaEmenda","addUrnNormaAlteradaSeNecessario","dm","trataTexto","preencheAtributosAlteracao","separaAgrupadores","isDispositivoFilhoDeAdicionado","criaDispositivoEmendaAdicionado","disps","fSeparacao","posicionar","calculaPosicaoAgrupador","dPos","de","buildNode","buildAlteracaoSeNecessario","buildFilhos","TYPE_NAME","buildIdAlteracao","namespaceURI","string","dispositivoTemp","ocorrencias","fim","http","buildSpan","to","resultHref","contentHref","DOCUMENTO_PADRAO","LexmlEtaComponent","_timerLoadEmenda","inicializarEdicao","preparaAberturaEmenda","loadProjetoNorma","setDispositivosERevisoesEmenda","loadEmenda","getProjetoAtualizado","out","articulacaoAtualizada","articulacaoProjetoNorma","clearInterval","autoriaCss","parlamentarVazio","sexo","siglaPartido","siglaUF","cargo","executarAposValidacao","_target","wrapperFn","executarMetodo","AutoriaComponent","_nomesAutocomplete","_podeIncluirParlamentar","_parlamentaresAutocomplete","_exibirTemplateTipoAutoria","_timerValidacao","_isProcessandoValidacao","timerEmitirEventoOnChange","_isProcessandoMovimentacao","_lastIndexAutoCompleted","_autoriaOriginal","_autoria","_isAllAutoresOk","getAutoriaAtualizada","_getTipoAutoriaTemplate","_getParlamentaresTemplate","_incluirNovoParlamentar","_getAssinaturasAdicionaisTemplate","_atualizarExibirPartidoUF","_getParlamentarAutocompleteTemplate","_validarNomeParlamentar","_atualizarParlamentar","_handleClickAutoComplete","_atualizarCargo","_moverParlamentar","_excluirParlamentar","_atualizarQtdAssinaturasAdicionaisSenadores","_atualizarQtdAssinaturasAdicionaisDeputados","parlamentar","novoArray","incluirParlamentar","_autocompletes","moverParlamentar","excluirParlamentar","isBlur","auxValorPodeIncluirOriginal","elLexmlAutocomplete","cargoAtual","nomeAtual","parlamentarEhValido","parlamentarAutocomplete","_focarAutocompleteOuCargo","_btnNovoParlamentar","_inputCargos","queryAll","DestinoComponent","_comissoesAutocomplete","comissaoSelecionada","isMPV","isPlenario","tipoColegiadoPlenario","_comissoesOptions","_proposicao","_colegiadoApreciador","siglaComissao","_autocomplete","comissoes","_comissoes","comissao","updateTipoColegiado","_filtroComissao","_selecionarComissao","_blurAutoComplete","comissaoOp","LexmlAutocomplete","_suggestions","suggest","suggestions","normalizedValue","_findSuggetions","nItemsResult","_filterStartWith","_filterContains","itemsResult","regexStartWith","regexContains","DataComponent","inputData","optionNaoInformarData","resetDate","getCurrentDate","Usuario","badge_styles_default","SlBadge","pulse","badge","tab_group_styles_default","SlTabGroup","tabs","panels","hasScrollControls","activation","noScrollControls","preventIndicatorTransition","repositionIndicator","updateScrollControls","mutationObserver","setAriaLabels","syncTabsAndPanels","nav","IntersectionObserver","intersectionRatio","setActiveTab","getActiveTab","emitEvents","tabGroup","scrollBehavior","getAllTabs","getAllPanels","active","activeEl","handleScrollToStart","handleScrollToEnd","activeTab","previousTab","syncIndicator","indicator","currentTab","allTabs","previous","transitionValue","tab_panel_styles_default","autoIncrement","SlTabPanel","attrId","componentId","tab_styles_default","SlTab","handleCloseClick","editorStyles","LexmlEmendaParametrosEdicao","LexmlEmendaComponent","existeObserverEmenda","totalAlertas","exibirAjuda","lexmlEmendaConfig","parlamentaresCarregados","comissoesCarregadas","desativarMarcaRevisao","MOBILE_WIDTH","splitPanelPosition","sizeMode","updateLayoutSplitPanel","ajustarAltura","onChangeNotasRodape","siglaCasa","urlComissoes","atualizaListaParlamentares","getParlamentares","atualizaListaComissoes","getComissoes","montarColegiadoApreciador","montarLocalFromColegiadoApreciador","colegiado","montarEmendaBasica","montarProposicaoPorUrn","getEmenda","numeroProposicao","isEmendaSubstituicaoTermo","_substituicaoTermo","getSubstituicaoTermo","isEmendaTextoLivre","_lexmlEmendaTextoRico","_lexmlEta","_lexmlJustificativa","_lexmlAutoria","_lexmlData","_lexmlOpcoesImpressao","_lexmlDestino","generoProposicao","justificativaAntesRevisao","removeRevisaoFormat","ordernarRevisoes","openModalSufixos","sufixosModal","params","_lexmlEmendaComando","inicializaProposicao","setEmenda","resetaEmenda","showAlertaEmendaTextoLivre","_tabsEsquerda","_tabsDireita","updateView","getEmentaFromProjetoNorma","revisaoAtivada","revisaoDesativada","mostrarDialogDisclaimerRevisao","emitiEventoOnRevisao","setSubstituicaoTermo","montarAutoriaPadrao","montarOpcoesImpressaoPadrao","autoriaPadrao","parlamentarAutor","par","opcoesImpressaoPadrao","forceUpdate","slSplitPanel","tabName","badgeAtalhos","pesquisarAlturaParentElement","minHeight","altura","alturaElementoBase","lexmlEtaTabs","alturaLexmlEtaTabs","alturaElemento","getElement","justificativaTabPanel","emendaTabPanel","qlToolbarJustificativa","qlToolbarEmenda","estilosOriginais","pointerEvents","setTabPanelStyles","tabPanel","estilos","isTemporary","alturaToolBarJustificativa","alturaToolBarEmenda","_lexmlEmendaComandoModal","atualizarComandoEmenda","disparaAlerta","buildAlertaJustificativa","getJustificativa","botoesHtml","chkNaoMostrarNovamente","closeButton","updateState","tabIsVisible","renderNotasRodape","focusOnTab","selecionarNotaRodape","badgeElement","localizarNotaRodape","notaRodapeElement","getTabFromElement","cb","removerPulsarNotaRodape","getEditorTextoRicoFromElement","alert_styles_default","toastStack","SlAlert","restartAutoHide","autoHideTimeout","handleMouseMove","handleDurationChange","AlertasComponent","getAlertIcon","removeAlertaById","lexmlEmenda","AjudaComponent","atualizarAjuda","am","AjudaModalComponent","SufixosModalComponent","noShowAgain","noShowAgainSwitch","handleSwitchChange","ComandoEmendaModalComponent","lexmlComandoEmenda","AtalhosModalComponent","OpcoesImpressaoComponent","_opcoesImpressao","_atualizarTamanhoFonte","_atualizarImprimirBrasao","_atualizarTextoCabecalho","_atualizarReduzirEspacoEntreLinhas","valorFonte","SwitchRevisaoComponent","quantidadeRevisao","nomeSwitch","nomeBadgeQuantidadeRevisao","checkedRevisao","consideraQuantidade","SubstituicaoTermoComponent","onDadosAlterados","elTermoASerSubstituido","elAlertaTermoASerSubstituido","elNovoTermo","elAlertaNovoTermo","elTipoSubstituicaoTermo","elFlexaoGenero","elFlexaoNumero","tratarAspas","caracter","isAspasDuplas","aspasTransformada","setEnabled","_isAbrindoTexto","numeroInicial","solicitarTexto","tratarRespostaModal","gerarId","hasNotaRodape","renumerarTodasNotas","emitirEventoNotaRodapeAdicionadaOuRemovida","removerEspacosAoRedorNotaRodape","findBlotsNotaRodape","isAdicionadaOuAtualizada","timerEmitirEventoNotaRodapeChange","findNodeById","atualizarTexto","adicionar","nota"],"mappings":"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G,KAAK6oF,IACfugB,GAAUppG,KAAKipF,IACfmgB,GAAUppG,KAAK8oF,IACfsgB,GAAUppG,KAAKwpF,IACf4f,GAAUppG,KAAK+oF,IACfqgB,GAAUppG,KAAKgpF,IAEfogB,GAAUppG,KAAKkpF,IACfkgB,GAAUppG,KAAKmpF,IACfigB,GAAUppG,KAAKopF,IACfggB,GAAUppG,KAAKqpF,IACf+f,GAAUppG,KAAKspF,IACf8f,GAAUppG,KAAKupF,IACf6f,GAAUppG,KAAKypF,IACf2f,GAAUppG,KAAK0pF,IACf0f,GAAUppG,KAAK2pF,IACfyf,GAAUppG,KAAK2nF,IACfyhB,GAAUppG,KAAK8nF,IACfshB,GAAUppG,KAAKgoF,IACfohB,GAAUppG,KAAK+nF,IACfqhB,GAAUppG,KAAK8pF,IACfsf,GAAUppG,KAAK6lF,IACfujB,GAAUppG,KAAK8lF,IACfsjB,GAAUppG,KAAK+lF,IACfqjB,GAAUppG,KAAKgmF,IACfojB,GAAUppG,KAAKimF,IACfmjB,GAAUppG,KAAKkmF,IAEfkjB,GAAUppG,KAAKwkF,IACf4kB,GAAUppG,KAAKykF,IACf2kB,GAAUppG,KAAK+kF,IACfqkB,GAAUppG,KAAKglF,IACfokB,GAAUppG,KAAKilF,IACfmkB,GAAUppG,KAAK2kF,IACfykB,GAAUppG,KAAK4kF,IACfwkB,GAAUppG,KAAK6kF,IACfukB,GAAUppG,KAAKmlF,IACfikB,GAAUppG,KAAKolF,IACfgkB,GAAUppG,KAAKqlF,IACf+jB,GAAUppG,KAAKulF,IACf6jB,GAAUppG,KAAKwlF,IACf4jB,GAAUppG,KAAKylF,IAEf2jB,GAAUppG,KAAK8hF,IACfsnB,GAAUppG,KAAK+hF,IACfqnB,GAAUppG,KAAK6oG,IACfO,GAAUppG,KAAK8oG,IAEfM,GAAUppG,KAAKgpG,IACfI,GAAUppG,KAAKkpG,IAEfE,GAAUppG,KAAKmpG,IAER,MAAME,GAA0C,GACvDA,GAAsBrpG,KAAKskF,IAC3B+kB,GAAsBrpG,KAAKukF,IAC3B8kB,GAAsBrpG,KAAK8kF,IAC3BukB,GAAsBrpG,KAAKslF,IAC3B+jB,GAAsBrpG,KAAKklF,IAC3BmkB,GAAsBrpG,KAAK0kF,IAEpB,MAAM4kB,GAAc1G,GAClBwG,GAAUpqG,SAAS4jG,GAGf2G,GAAmB,IAAIH,MAAcC,GAAuBxf,IAM5D2f,GAAsB9nB,GAC1B6nB,GAAiBtkH,QAAO29G,GAAQA,aAAgBhd,IAAmBgd,EAAKlhB,OAASA,IAAM,GC1KnF+nB,GAA0Bpf,YACrC,OACElG,GAAuBkG,EAAYc,MACL,IAA9Bd,EAAYiC,OAAOhnG,QACnB+kG,EAAY3I,OAASe,GAAgBkB,QAAQ3hG,OACV,QAAnC+yC,EAAA05D,GAAuBpE,UAAY,IAAAt1D,OAAA,EAAAA,EAAE2sD,QAASe,GAAgBkB,QAAQ3hG,OAChC,QAAtCsuE,EAAAw+B,GAAwBzE,UAAc,IAAA/5B,OAAA,EAAAA,EAAAoxB,QAASe,GAAgBkB,QAAQ3hG,MAe3E,IAAY0nH,IAAZ,SAAYA,GACVA,EAAA,UAAA,8CACAA,EAAA,SAAA,gDACAA,EAAA,4BAAA,4CACAA,EAAA,yCAAA,mGACAA,EAAA,yBAAA,0CACAA,EAAA,yBAAA,yCANF,CAAYA,KAAAA,GAOX,KC7BM,MAAMC,GAAY,CAAC/nH,EAAYkhC,KACpC,MAAM6iF,EAAO/jH,EAAM+jH,KAAO/jH,EAAM+jH,KAAO,GAGvC,OAFAA,EAAK3lG,KAAKy9C,KAAKG,MAAMH,KAAKC,UAAU56B,KAED6iF,GAUxBiE,GAAgC,CAAChoH,EAAYsgG,WACxD,MAAO,CACLkB,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,eAAQiS,EAAAnzC,EAAMkkH,yBAAIhjF,OAClB5L,QAASgrE,GAEXlS,UAAWpuF,EAAMouF,UACjBI,QAASxuF,EAAMwuF,QACfkW,SAAU1kG,EAAM0kG,SAChB4f,iCAAkCtkH,EAAMskH,mCC1B/B2D,GAAiC,CAACxf,EAA0B3I,WACvE,IAAIn0F,EAEJ,GAAIm0F,EAAKviE,SAAS,aAAc,CAC9B,MAAM2qF,EAAkBpoB,EAAK36F,QAAQ,cAAe,IAAIA,QAAQ,YAAa,IAC7EwG,EAAI,cAAgBu8G,EAAkB,YAAcA,OAEpDv8G,EAAIm0F,EAGN,MAAMihB,EAAatY,EAChB6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAQwW,GAAWA,EAAEorF,WAAanF,GAAQjmF,EAAEorF,SAASkjB,WAAW,cAAe,UAAUA,WAAW,kBAAmB,YAAcx8G,IAExI,OAAe,UAARo1G,EAAM,UAAE,IAAA5tE,OAAA,EAAAA,EAAE8xD,UAGNmjB,GAAkB,CAAC3f,EAA0B3I,IACjD2I,EAAY6Z,kBAAkB7Z,GAAaplG,QAAOwW,GAAKA,aAAaimF,IAAMp8F,OAAS,EAQ/E2kH,GAA4B,CAAC5f,EAA0BzoG,KACnB,yBAA3CyoG,EAAYI,SAASC,mBACvBwf,GAAsD7f,EAAaqf,GAA4BS,UAE1FP,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,+BAAiC6oB,GAAc/f,EAAYggB,gCAGnID,GAAiB3R,QAA+C5sG,IAAd4sG,EAA0BA,EAAUp+F,KAAK,QAAU,GAErG6vG,GAAwD,CAAC7f,EAA0BigB,UAC9Cz+G,IAA5Cw+F,EAAYggB,4BACThgB,EAAYggB,4BAA4BrrG,SAASsrG,IACpDjgB,EAAYggB,4BAA4BrqG,KAAKsqG,IAG/CjgB,EAAYggB,4BAA8B,GAC1ChgB,EAAYggB,4BAA4BrqG,KAAKsqG,KC5B3C,SAAUC,GAA6Cv/G,GAC3D,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,eAChB,MAAMsY,EAA0B,GAChC,IAAKnX,GAAYnB,GACf,MAAO,GAiBT,GAdAsY,EAAM3iG,KAAKwkF,IACXme,EAAM3iG,KAAKykF,IAGkD,IAA3DuK,GAAmC3E,GAAa/kG,QAChD2pG,GAAoC5E,GAAa/kG,OAAS,GAC7C+kG,ExCwDRiC,OAAOrnG,QAAOwW,GAAK+vF,GAAY/vF,KAAInW,OAAS,GwCvDjD+kG,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAI7DqY,EAAM3iG,KAAK2nF,IAGT0C,EAAYc,KAAOP,GAAcP,EAAYc,MAAQK,GAAYnB,EAAYc,WAAyDt/F,IAAjD6iG,GAAgCrE,GAA4B,CACnJ,MAAMrhE,EAAoC,QAA9B+L,EAAAs1D,EAAYxH,0BAAkB,IAAA9tD,OAAA,EAAAA,EAAEnrC,QAAQygG,EAAYc,IAAKzJ,MACvC,QAA9BpxB,EAAA+5B,EAAYxH,0BAAkB,IAAAvyB,GAAAA,EAAErrE,QAAO,CAACy8F,EAAMr/E,IAAUA,EAAQ2mB,IAAMphC,SAAQ2F,GAAKo1G,EAAM3iG,KAAKwpG,GAAmBj8G,MAGnH,GAAI88F,EAAYc,MAAQP,GAAcP,EAAYc,MAAQK,GAAYnB,EAAYc,MAAkD,IAA1Cd,EAAYc,IAAKvhG,QAAQygG,GAAoB,CACrI,MAAMrhE,EAAoC,QAA9Bk/C,EAAAmiB,EAAYxH,0BAAkB,IAAA3a,OAAA,EAAAA,EAAEt+E,QAAQygG,EAAYc,IAAKzJ,MACvC,QAA9B5gE,EAAAupE,EAAYxH,0BAAkB,IAAA/hE,GAAAA,EAAE77B,QAAO,CAACy8F,EAAMr/E,IAAUA,EAAQ2mB,IAAMphC,SAAQ2F,GAAKo1G,EAAM3iG,KAAKwpG,GAAmBj8G,MAmBnH,OAZI42F,GAAuBkG,IACzBsY,EAAM3iG,KAAK6nF,IAGb8a,EAAM3iG,KAAK8hF,IAEPqC,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAGjIkjB,GAAsD7f,EAAaqf,GAA4Bc,WAExFngB,EAAYqY,mBAAmBrY,EAAasY,GAIrD8H,mBAAmBpgB,IAKnBqgB,wBAAwBrgB,YC3EfsgB,GAAbliH,cACE6C,KAAAo/F,kBAAoBP,GAAkBqG,iBAEtCkS,mBAAmBrY,EAA0BsY,GAG3C,MAF4B,IAAI,IAAI7rE,IAAI6rE,IAGrC19G,QAAOwW,QAAW5P,IAAN4P,IACZxW,QAAQ29G,GAAqD,cAAnBA,EAAKrhB,WAAgD,0BAAnBqhB,EAAKrhB,YACjFh1E,MAAK,CAAC9Q,EAAGqb,IAAMrb,EAAE8lF,UAAWqpB,cAAc9zF,EAAEyqE,cCN7C,MAAOspB,WAA8BF,GAA3CliH,kCACE6C,KAAAo/F,kBAAoBP,GAAkBG,uBACtCh/F,KAAA2tG,WAAa9M,GAAuB2e,OAGpCpI,mBAAmBrY,EAA0BsY,GAG3C,MAF4B,IAAI,IAAI7rE,IAAI6rE,IAGrC19G,QAAQwW,KAAwBA,aAAamqF,MAC7C3gG,QAAOwW,QAAW5P,IAAN4P,IACZxW,QAAQ29G,GAAqD,cAAnBA,EAAKrhB,WAAgD,0BAAnBqhB,EAAKrhB,YACjFh1E,MAAK,CAAC9Q,EAAGqb,IAAMrb,EAAE8lF,UAAWqpB,cAAc9zF,EAAEyqE,cCf7C,SAAUwpB,GAA+C//G,GAC7D,OAAO,cAAcA,EAAdvC,kCACL6C,KAAAm/F,SAAW,IAAIkgB,GAEfjI,mBAAmBrY,EAA0BsY,SAC3C,OAAoB,QAAb5tE,EAAAzpC,KAAKm/F,gBAAQ,IAAA11D,OAAA,EAAAA,EAAE2tE,mBAAmBrY,EAAasY,WCL/CqI,GAkBXviH,YAAYi5F,GACVp2F,KAAKo2F,KAAOe,GAAgBf,GAAMA,KAClCp2F,KAAKq3F,MAAQF,GAAgBf,GAAMiB,MACnCr3F,KAAKtJ,KAAOygG,GAAgBf,GAAM1/F,KAClCsJ,KAAKi2F,UAAYkB,GAAgBf,GAAMH,UACvCj2F,KAAKs3F,gBAAkBH,GAAgBf,GAAMkB,gBAE7Ct3F,KAAKu3F,mBAAqBJ,GAAgBf,GAAMmB,mBAChDv3F,KAAKw3F,sBAAwBL,GAAgBf,GAAMoB,sBAEnDx3F,KAAKy3F,kBAAoBN,GAAgBf,GAAMqB,kBAE/Cz3F,KAAK03F,oBAAsBP,GAAgBf,GAAMsB,oBACjD13F,KAAK23F,wBAA0BR,GAAgBf,GAAMuB,wBACrD33F,KAAK43F,wBAA0BT,GAAgBf,GAAMwB,yBClBzD,MAAM+nB,GAAiB,CAACxpB,EAAoBypB,UACPr/G,IAA/Bq/G,EAAQnoB,mBAGZtB,EAAM6K,OAAO1kG,SAAQ,CAACiuG,EAAOxzF,WAC3B,MAAMw/E,EAAOspB,GACXrgB,GAASogB,IAAYzoB,GAAgBgB,OAAOzhG,OAASkpH,EAAQnoB,kBAAsBmoB,EAAmB3nB,MAAS2nB,EAC/GA,EAAQnoB,mBAEVlB,EAAKtJ,MAAuB,QAAfxjD,EAAA8gE,EAAMtd,aAAS,IAAAxjD,EAAAA,EAAA,GAC5B8sD,EAAK4I,SAAWoL,EAAMpL,SACtB5I,EAAK4W,UAAYuJ,GAAkBngB,GACnCA,EAAK8lB,aAAa9lB,GAClBgU,EAAMvJ,QAAS2e,GAAepV,EAAOhU,GACrCx/E,IAAUo/E,EAAM6K,OAAOhnG,OAAS,GAAI4lH,EAAQxD,qBAuEnC0D,GAAc,CAAC3pB,EAAoBypB,KAC1CzpB,EAAMC,OAASwpB,EAAQxpB,MAG3BD,EAAM6K,OAAO1kG,SAAQiuG,UACnB,MAAMhU,EAAOspB,GAAgBrgB,GAASogB,IAAYngB,GAAQ8K,EAAM1K,KAAS+f,EAAmB3nB,MAAS2nB,EAASrV,EAAMnU,MACpHmU,EAAMgC,OAAUhW,EAAKgW,OAAShC,EAAMgC,OAAUhW,EAAK8lB,aAAa9lB,GAChEA,EAAKtJ,MAAuB,QAAfxjD,EAAA8gE,EAAMtd,aAAS,IAAAxjD,EAAAA,EAAA,GAC5B8sD,EAAK4I,SAAWoL,EAAMpL,SACtBhJ,EAAM+lB,YAAY3R,GAClBhU,EAAK4W,UAAYuJ,GAAkBnM,GAEnCA,EAAMvJ,SAAU7K,EAAMC,OAASwpB,EAAQxpB,KAAO0pB,GAAYvV,EAAOhU,GAAQopB,GAAepV,EAAOhU,IAEvE,IAAxBJ,EAAM6K,OAAOhnG,QAAe4lH,EAAQxD,qBCjElC2D,GAAcN,GCbd,SAAkD//G,GACtD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAKtX,GAAShB,IAIdsY,EAAM3iG,KAAK2nF,IAENxD,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAAiD,MAAvBD,EAAYnQ,QAC7IyoB,EAAM3iG,KAAK2kF,IAGbge,EAAM3iG,KAAK4kF,SAE2D/4F,IAAlEqjG,GAAiD7E,GACnDsY,EAAM3iG,KAAKqnF,IAEX6iB,GAAsD7f,EAAaqf,GAA4B4B,+BAE5Bz/G,IAAjE8iG,GAAgDtE,GAClDsY,EAAM3iG,KAAKunF,IAEX2iB,GAAsD7f,EAAaqf,GAA4B4B,0BAG7FnnB,GAAuBkG,KAAiBqH,GAAiCrH,EAAYc,MACvFwX,EAAM3iG,KAAK6nF,IAET1D,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,IAGRrW,GAAYhG,IACfsY,EAAM3iG,KAAKqlF,KAETiJ,GAAiBjE,IAAgBkE,GAAkBlE,KACrDsY,EAAM3iG,KAAKgrF,GAAYX,EAAYc,IAAKA,KAAQ3C,GAAqCD,IAElFiG,GAAoBnE,UAAyDx+F,IAAxC4iG,GAAuBpE,IAA+BkB,GAAUkD,GAAuBpE,MAC/HsY,EAAM3iG,KAAKyoF,IAETghB,GAAuBpf,IACzBsY,EAAM3iG,KAAKkoF,IAGT/D,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAG7H4K,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,KAGTI,EAAYlG,wBAA2B+H,GAAe7B,IAAiBgG,GAAYhG,IACrFsY,EAAM3iG,KAAK6oG,IAGTxe,EAAYlG,wBAA0B+H,GAAe7B,KAAiBgG,GAAYhG,IACpFsY,EAAM3iG,KAAK8oG,IAGNze,EAAYqY,mBAAmBrY,EAAasY,IA1D1C,GA6DX8H,mBAAmBpgB,SACjB,GAAKgB,GAAShB,GAId,eAAOt1D,EAAAs1D,EAAYvH,4CAAuBr5F,KAAIi4F,IAC5C,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EACvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,GAGL8H,wBAAwBrgB,SACtB,GAAKgB,GAAShB,GAId,OAAIiE,GAAiBjE,IAAgBkE,GAAkBlE,GAC9CW,GAAYX,EAAYc,IAAKA,KAAQ3C,GAAqCD,WAG5ExzD,EAAAs1D,EAAYxH,yCAAoBp5F,KAAIi4F,IACzC,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EAEvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,KDnFP2I,CAAahF,GAAqB3M,GAAegN,GAA2BE,GExCxE,SAAqD97G,GACzD,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,uBACC7iB,KAAMkgH,OAAG,IAITtD,mBAAmBhuB,GACzB,MAAMlL,EAAM,yBAAyB5rB,KAAK82B,EAAOz/E,QACjD,OAAOu0E,EAAMA,EAAI,GAAK0J,GAAcwB,GAAQz/E,OAAO1T,QAAQ,MAAO,IAAI0T,OAGxE2tG,uBAAuBvQ,GACrBvsG,KAAK4uF,OAASklB,GACZ9zG,KAAK48G,mBAAmBrQ,GACxBqG,GAAgBrG,GAAU,KAAO2G,GACjCgB,IAIJmI,aAAatd,GACX/+F,KAAKusG,YACahsG,IAAhBP,KAAK4uF,OACDuI,GAAgBU,OAAOnhG,KACvBo9G,GAA0B9zG,KAAK4uF,OAAQwkB,GAAgCrU,EAAYlG,uBAAyBob,QAAsC1zG,GAClJP,KAAKkgH,OAGb7C,gCACE,YAAoB98G,IAAhBP,KAAK4uF,OACA,uBAEF,IAAM5uF,KAAKusG,OAAQp9F,OAAO1T,QAAQuE,KAAKkgH,OAAQ,IAAM,IAG9DlU,iDACE,YAAoBzrG,IAAhBP,KAAK4uF,QACgC,QAAhCnlD,EAAA0tD,GAAgBU,OAAO5B,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE2zE,qBAAsB,yBAE1B,QAAhCp4C,EAAAmyB,GAAgBU,OAAO5B,iBAAS,IAAAjxB,OAAA,EAAAA,EAAEo4C,qBAAsB,IAAMp9G,KAAKq9G,kCFCkB8C,CAAgB5D,GAAsBmD,WAElIU,GAAcX,GGEd,SAAkD//G,GACtD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,qBAChB,MAAMsY,EAA0B,GAEhC,IAAK7X,GAAST,GACZ,MAAO,GAwET,GArEAsY,EAAM3iG,KAAKskF,IAEXqe,EAAM3iG,KAAK2nF,IAEPuH,GAAiD7E,IAAgB4H,GAA8B5H,GACjGsY,EAAM3iG,KAAKqnF,IAEX6iB,GAAsD7f,EAAaqf,GAA4BiC,0CAE7Fhd,GAAgDtE,IAAgBoB,GAA0BpB,EAAYc,KACxGwX,EAAM3iG,KAAKunF,IAEX2iB,GAAsD7f,EAAaqf,GAA4BiC,0CAI9Fjc,GAA6BrF,IAC7BlG,GAAuBkG,IACxBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBACtC,MAAvBD,EAAYnQ,QAEZyoB,EAAM3iG,KAAKwkF,IAEbme,EAAM3iG,KAAKykF,IAEN4L,GAAYhG,KACfsY,EAAM3iG,KAAKylF,IACXkd,EAAM3iG,KAAKilF,KAGRd,GAAuBkG,IAC1BsY,EAAM3iG,KAAK2mF,IAGTxC,GAAuBkG,IACzBsY,EAAM3iG,KAAK6nF,IAETwC,EAAYmC,YAAcnC,EAAYI,SAASC,oBAAsBP,GAAkBI,wBACzFoY,EAAM3iG,KAAKmnF,IAERkD,EAAYkC,gBAAmBpI,GAAuBkG,IAA8C,IAA7BA,EAAY9R,MAAMjzF,QAAiB4yG,GAA2B7N,IACxIsY,EAAM3iG,KAAKukF,IAGX8F,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAC5DD,EAAYkC,gBACZpI,GAAuBkG,IACvBsC,GAAUtC,IAEXsY,EAAM3iG,KAAK0mG,MAGXrc,EAAYc,IAAKvhG,QAAQygG,GAAe,QACAx+F,IAAxC4iG,GAAuBpE,MACa,UAAnCoE,GAAuBpE,UAAY,IAAAt1D,OAAA,EAAAA,EAAEw3D,iBACrChB,GAAUkD,GAAuBpE,KAChClG,GAAuBkG,IAAiBoE,GAAuBpE,IAAiBmB,GAAYiD,GAAuBpE,KAErHsY,EAAM3iG,KAAK0oF,IAET2B,EAAYc,MAAQhH,GAAuBkG,IAAgBO,GAAcP,EAAYc,MAAuE,IAA/Dd,EAAYc,IAAKmB,OAAOrnG,QAAOmvB,GAAKo3E,GAAYp3E,KAAI9uB,QACnJq9G,EAAM3iG,KAAKgmF,IAETqE,EAAYc,KAAOhH,GAAuBkG,IAAgBmB,GAAYnB,EAAYc,MACpFwX,EAAM3iG,KAAKgmF,KAER7B,GAAuBkG,IAAgBA,EAAYc,KjDgHrB,CAACd,IACxC,MAAMrhE,EAAMqhE,EAAYc,IAAKvhG,QAAQygG,GACrC,OAAOA,EAAYc,IAAKmB,OAAOrnG,QAAO,CAACmvB,EAAG5uB,IAAMA,EAAIwjC,GAAOwiE,GAAYp3E,KAAI9uB,OAAS,GiDlHjBsmH,CAA0BvhB,IACvFsY,EAAM3iG,KAAKwpG,GAAmBpb,GAAsB/D,GAAa3I,QAE9DyC,GAAuBkG,IAAgBmB,GAAYnB,EAAYc,KAAO,CACzE,MAAMniE,EAAoE,QAA9Dk/C,EAAgC,UAAhCmiB,EAAYxH,0BAAoB,IAAAvyB,OAAA,EAAAA,EAAA1mE,QAAQygG,EAAYc,IAAKzJ,aAAK,IAAAxZ,EAAAA,EAAI,EAChD,QAA9BpnD,EAAAupE,EAAYxH,0BAAkB,IAAA/hE,GAAAA,EAC1B77B,QAAO,IAAM+jC,EAAM,IACpB/jC,QAAO,CAACy8F,EAAMr/E,IAAWgoF,EAAYc,IAAKvhG,QAAQygG,GAAe,EAAIhoF,GAAS2mB,EAAO3mB,EAAQ2mB,IAC7FphC,SAAQ2F,GAAKo1G,EAAM3iG,KAAKwpG,GAAmBj8G,MAGhD,IACG42F,GAAuBkG,IACxBmB,GAAYnB,EAAYc,OACvBP,GAAcP,EAAYc,MAC3Bd,EAAYc,IAAKvhG,QAAQygG,GAAe,GjDpDb,CAACA,UAElC,YAA6Bx+F,KAAR,UAAjBw+F,EAAYc,WAAK,IAAAp2D,OAAA,EAAAA,EAAAo2D,MAId4B,GAAoB1C,EAAYc,IAAKA,IAAMd,EAAYc,IAL3B,IAK6C7lG,OAAS,GiD+CnFumH,CAAoBxhB,GACpB,CACA,MAAMrhE,EAAoE,QAA9Ds4E,EAAgC,UAAhCjX,EAAYxH,0BAAoB,IAAA9hE,OAAA,EAAAA,EAAAn3B,QAAQygG,EAAYc,IAAKzJ,aAAK,IAAA4f,EAAAA,EAAI,EAExEwK,EAAkB/e,GAAoB1C,EAAYc,IAAKA,IAAMd,EAAYc,IAAM,IAAIlxE,QACvF,CAAC61E,EAAiBzF,IAChByF,EAAM9wF,SAASqrF,EAAY3I,YAAgD71F,IAAvCuiG,GAAsB/D,GAA6ByF,EAAQA,EAAMjmG,OAAOwgG,EAAY3I,OAC1H,YAEF8f,EAAAnX,EAAYxH,mCACR59F,QAAO,IAAM+jC,EAAM,IACpB/jC,QAAOsI,GAAKu+G,EAAgB9sG,SAASzR,KACrC3F,SAAQ2F,GAAKo1G,EAAM3iG,KAAKwpG,GAAmBj8G,MAqBhD,OAlBI42F,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAG7H4K,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,IAGb0Y,EAAM3iG,KAAK+hF,KAEPsI,EAAYlG,wBAA2B+H,GAAe7B,IAAiBgG,GAAYhG,IACrFsY,EAAM3iG,KAAK6oG,IAGTxe,EAAYlG,wBAA0B+H,GAAe7B,KAAiBgG,GAAYhG,IACpFsY,EAAM3iG,KAAK8oG,IAGNze,EAAYqY,mBAAmBrY,EAAasY,GAGrD8H,mBAAmBpgB,SACjB,GAAKS,GAAST,GAId,eAAOt1D,EAAAs1D,EAAYvH,4CAAuBr5F,KAAIi4F,IAC5C,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EACvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,GAGL8H,wBAAwBrgB,SACtB,GAAKA,EAAYvH,sBAIjB,OAAIoI,GAAcb,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IAC7EtB,GAGLqC,GAAkBf,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACjFvB,GAGLuC,GAAShB,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACxEW,GAAYX,EAAYc,IAAKA,KAAQ3C,GAAqCD,WAG5ExzD,EAAAs1D,EAAYxH,yCAAoBp5F,KAAIi4F,IACzC,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EAEvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,KHvK+BmJ,CAAaxF,GAAqBjM,GIrDpE,SAA6DtvG,GACjE,OAAO,cAAcA,EAGnBuhG,qBACE,QAAOjhG,KAAKkhG,uBAAalhG,KAAKkhG,WAAWF,6BAAQhnG,QAAS,IJgD0B0mH,CK5CpF,SAAqDhhH,GACzD,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,uBACP7iB,KAAO2gH,QAAG,QACV3gH,KAAMkgH,OAAG,IACDlgH,KAAY4gH,aAAG,gBAGvB5gH,KAAmB6gH,qBAAG,EAEdjE,mBAAmBhuB,GACzB,OAAOA,EACJnzF,QAAQ,SAAU,IAClBA,QAAQ,MAAO,IACfA,QAAQ,mBAAoB,KAC5BA,QAAQ,iBAAkB,IAC1BA,QAAQ,OAAQ,IAChB0T,OAGG2xG,oCAAoClyB,GAC1C,MAAO,qCAAqCtgD,KAAKsgD,GAG3CmyB,kCAAkCnyB,GACxC,MAAO,kCAAkCtgD,KAAKsgD,GAGhDkuB,uBAAuBvQ,GACrB,MAAMqH,EAAO5zG,KAAK48G,mBAAmBrQ,GACrCvsG,KAAK6gH,oBAAsB,cAAcvyE,KAAKi+D,GAC9CvsG,KAAK4uF,OAAS5uF,KAAK6gH,oBACf,IACA7gH,KAAK8gH,oCAAoClN,GACzCE,GAA0BF,OAAMrzG,EAAW2zG,IAC3Cl0G,KAAK+gH,kCAAkCnN,GACvCA,OACArzG,EAGN87G,aAAatd,QACSx+F,IAAhBw+F,EACF/+F,KAAKusG,OAASpV,GAAgBY,OAAO9B,UAErC8I,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAC5DD,EAAYI,SAAmCwO,aAAe9M,GAAuB+M,2BACrF/U,GAAuBkG,QAGCx+F,IAAhBP,KAAK4uF,OACd5uF,KAAKusG,OAASxN,EAAY3I,UACD71F,IAAhBP,KAAK4uF,QAAyBkkB,GAAkB9yG,KAAK4uF,QAErDwV,GAA6BrF,IAAiBlG,GAAuBkG,IAAgBmB,GAAYnB,EAAYc,MAA4C,IAAnCd,EAAYc,IAAKmB,OAAOhnG,OACvJgG,KAAKusG,OAASvsG,KAAK6gH,oBAAsB7gH,KAAK4gH,aAAe5gH,KAAK2gH,QAAU3gH,KAAKghH,4BAA4BjiB,GAE9D,IAA/C+B,GAAe/B,GAAayC,QAAQxnG,OAC/BgG,KAAKusG,OAASvsG,KAAK4gH,aACnB5gH,KAAKusG,OAASvsG,KAAK2gH,QAAU3gH,KAAK4uF,cAAWruF,OAAYA,EAAYP,KAAK2gH,QAAU3gH,KAAKghH,4BAA4BjiB,GAN1H/+F,KAAKusG,OAASvsG,KAAK2gH,QAAU3gH,KAAK4uF,OAAS5uF,KAAKkgH,OAJhDlgH,KAAKusG,OAAS,OAcVyU,4BAA4BjiB,EAA0BkiB,GAAoB,SAChF,MAAMz9B,EAAoB,QAAX/5C,EAAAzpC,KAAK4uF,cAAM,IAAAnlD,OAAA,EAAAA,EAAE56B,MAAM,MAC3B60E,KAAQ1lC,GAAawlC,EACtB09B,IAAYx9B,MAAAA,EAAAA,EAAO,KAAO,GAAKj5E,SAASi5E,MAAAA,EAAAA,EAAO,IAAK,IAAM,GAChE,OACGw9B,EAAUx9B,EAAM1jF,KAAKkgH,OAASx8B,IAC9B1lC,EAAUhkD,OAAS,EAChB,KACAgkD,MAAAA,OAAA,EAAAA,EACI7/C,KAAI0lD,GAAQk7C,EAAYlG,uBAAyBua,GAA+BvvD,GAAOA,IACxF90C,KAAK,KACL7O,eACH,KACF+gH,GAAuBC,IAAWljE,EAAUhkD,OAAgB,GAAN,KAI5DqjH,8BAA8Bte,GAC5B,YAAoBx+F,IAAhBP,KAAK4uF,OACA,uBAEL5uF,KAAK6gH,oBACA,eAEF7gH,KAAKghH,4BAA4BjiB,GAAa,GAGvDiN,uCAAuCjN,SACrC,YAAoBx+F,IAAhBP,KAAK4uF,QACgC,QAAhCnlD,EAAA0tD,GAAgBY,OAAO9B,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE7yC,eAAgB,wBAEvDoJ,KAAK6gH,oBACA,eAEF,QAAU7gH,KAAKghH,4BAA4BjiB,GAAa,KLpD6CoiB,CM9C5G,SAAsDzhH,GAC1D,OAAO,cAAcA,EAMfshG,aACF,MAAMogB,EAAUphH,KAAKqhH,kBACfC,EAAathH,KAAKshH,WAExB,OAAOF,EAAQ7iH,OAAO+iH,GAGhBD,0BACN,OAA6B,QAAtBr8C,EAAY,UAAZhlE,KAAKi4F,aAAO,IAAAxuD,OAAA,EAAAA,EAAAu3D,cAAU,IAAAh8B,EAAAA,EAAA,GAG3Bs8C,uBAEF,OADAthH,KAAKuhH,YAAkC,QAApB93E,EAAAzpC,KAAKuhH,mBAAe,IAAA93E,EAAAA,EAAA,GAChCzpC,KAAKuhH,YAGdzF,mBAAmBvR,EAAoBtiB,GACjC0X,GAAS4K,GACXvqG,KAAKi4F,MAAO6jB,mBAAmBvR,EAAOtiB,IAEtCsiB,EAAM1K,IAAM7/F,KACZA,KAAKshH,WAAWlzF,OAAO65D,EAAUjoF,KAAKqhH,kBAAkBrnH,OAAQ,EAAGuwG,IAIvEqR,SAASrR,EAAoB7I,GAC3BjC,GAAQ8K,GAAUvqG,KAAKi4F,MAAQsS,EAAS5K,GAAS4K,GAASvqG,KAAKwhH,eAAejX,EAAO7I,GAAc1hG,KAAKyhH,aAAalX,EAAO7I,GAG9Hwa,YAAY3R,SACV5K,GAAS4K,GAAqB,QAAZ9gE,EAAAzpC,KAAKi4F,aAAO,IAAAxuD,GAAAA,EAAAyyE,YAAY3R,GAASvqG,KAAK0hH,gBAAgBnX,GAGlEiX,eAAejX,EAAoB7I,GACzC1hG,KAAKi4F,MAAO2jB,SAASrR,EAAO7I,GAGtB+f,aAAalX,EAAoB7I,GACvC,GAAIA,EAAY,CACd,MAAMzZ,EAAUjoF,KAAKshH,WAAWhjH,QAAQojG,GAAc,EACtD1hG,KAAKu2G,YAAY7U,GAAc1hG,KAAKshH,WAAW5sG,KAAK61F,GAASvqG,KAAKshH,WAAWlzF,OAAO65D,EAAS,EAAGsiB,QAEhGvqG,KAAKshH,WAAW5sG,KAAK61F,GAIjBmX,gBAAgBnX,SACtBvqG,KAAKuhH,YAA8B,QAAhB93E,EAAAzpC,KAAKuhH,mBAAW,IAAA93E,OAAA,EAAAA,EAAE9vC,QAAOi9D,GAAMA,EAAEysB,OAASknB,EAAMlnB,KAAOzsB,EAAKA,EAAEipC,SAAMt/F,IAGzFg2G,YAAYhM,GACV,OAAOvqG,KAAKshH,WAAWhjH,QAAQisG,KAAWvqG,KAAKshH,WAAWtnH,OAAS,EAGrEsE,QAAQisG,GACN,OAAO5K,GAAS4K,GAASvqG,KAAKi4F,MAAO35F,QAAQisG,GAASvqG,KAAKghG,OAAO1iG,QAAQisG,GAGpEoX,wBACM,QAAZl4E,EAAAzpC,KAAKi4F,aAAO,IAAAxuD,GAAAA,EAAA2yE,iBAGNwF,qBACN5hH,KAAKshH,WAAWhlH,SAAQiuG,IAEnB1R,GAAuB0R,IAAUlG,GAAqCkG,IACvEA,EAAMpL,SAASC,oBAAsBP,GAAkBqG,kBACvDqF,EAAMpL,SAASC,oBAAsBP,GAAkBG,wBAEvDuL,EAAM3b,OAASgmB,GAAiBrK,GAChCA,EAAM8R,aAAa9R,GACnBA,EAAMhrG,GAAKo4G,GAAQpN,IAEnBA,EAAM8R,aAAa9R,MAKzBtG,mBACE,OAAkC,IAA3BjkG,KAAKshH,WAAWtnH,OAGzBoiH,iBACO/V,GAAmCrmG,OAIxCA,KAAK2hH,kBACL3hH,KAAK4hH,sBAJH5hH,KAAK6hH,yCAOTA,yCACE,MAAMC,EAAc9hH,KAAKshH,WAAW3nH,QAAOuY,IAAM+tF,GAAU/tF,KAAIlY,OACzD+nH,EAAiB/hH,KAAKshH,WAAW3nH,QAAOuY,IAAM+tF,GAAU/tF,KAAIhF,MAAKgF,IAAK,IAAAu3B,EAAA,OAAI,UAAJv3B,EAAE3S,UAAE,IAAAkqC,OAAA,EAAAA,EAAE5V,SAAS,YACvFkuF,IACFA,EAAexV,OAAyB,IAAhBuV,EAAoB,mBAAqB,UNxDyDE,COpD5H,cAA0BtC,GAG9BviH,cACE4C,MAAM,UAKJktF,oBACF,OAA4B,QAArBjoB,EAAY,UAAZhlE,KAAKi4F,aAAO,IAAAxuD,OAAA,EAAAA,EAAAwjD,aAAS,IAAAjoB,EAAAA,EAAA,GAG1BioB,UAAMA,GACRjtF,KAAKi4F,MAAOhL,MAAQA,WPuClBg1B,GAAaxC,GQpDb,SAAiD//G,GACrD,OAAO,cAAcA,EAEnBk5G,kBAAkB7Z,GAChB,MAAO,GAGTogB,mBAAmBpgB,IAKnBqgB,wBAAwBrgB,MRyC1BmjB,CAAYjH,GAAqBjM,GAAgBsM,GAA2BE,GSvDxE,SAAoD97G,GACxD,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,wBAKPw5F,eACEr8G,KAAKusG,YAAShsG,EAGhBu8G,0BAIAO,gCACE,MAAO,GAGTrR,yCACE,MAAO,UTmCqFmW,CAAe5F,GAAsBmD,WAEjI0C,GAA2B3C,GUlD3B,SAA+D//G,GACnE,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAK9X,GAAsBR,IAI3BsY,EAAM3iG,KAAK2nF,IAEPxD,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,KAIV1b,GAAYX,EAAYc,MAASJ,GAAQV,EAAYc,MAASF,GAASZ,EAAYc,MAASE,GAAShB,EAAYc,OAClHd,EAAYc,IAAKpI,kBAAmBz9F,OAAS,GAE7Cq9G,EAAM3iG,KAAKupG,GAAiBtkH,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,WAAa,mCAAqCwD,EAAYc,IAAKpI,oBAAmB,IAG/JsH,EAAYqY,mBAAmBrY,EAAasY,IAhB1C,GAmBX8H,mBAAmBpgB,IAKnBqgB,wBAAwBrgB,MVqB1BsjB,CAA0BpH,GAAqBlM,GAAiBuM,GAA2BE,GW1DvF,SAAuD97G,GAC3D,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,oCACC7iB,KAAMkgH,OAAG,KAKjBpD,0BAIAT,eACEr8G,KAAKusG,YAAyBhsG,IAAhBP,KAAK4uF,OAAuB,KAAO5uF,KAAK4uF,OAAS5uF,KAAKkgH,OAGtE7C,gCACE,YAAuB98G,IAAhBP,KAAK4uF,OAAuB,KAAO5uF,KAAK4uF,OAGjDod,yCACE,OAAOhsG,KAAKq9G,kCXqC+FiF,CAAkB/F,GAAsBmD,WAEnJ6C,GAAc9C,GYnBd,SAAkD//G,GACtD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAK1X,GAASZ,IAIdsY,EAAM3iG,KAAKskF,IACXqe,EAAM3iG,KAAK2nF,IAENxD,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAAiD,MAAvBD,EAAYnQ,QAC7IyoB,EAAM3iG,KAAK+kF,IAEb4d,EAAM3iG,KAAKglF,SAE2Dn5F,IAAlEqjG,GAAiD7E,GACnDsY,EAAM3iG,KAAKqnF,IAEX6iB,GAAsD7f,EAAaqf,GAA4BoE,+BAE5BjiH,IAAjE8iG,GAAgDtE,GAClDsY,EAAM3iG,KAAKunF,IAEX2iB,GAAsD7f,EAAaqf,GAA4BoE,0BAG7F3pB,GAAuBkG,KAAiBqH,GAAiCrH,EAAYc,MACvFwX,EAAM3iG,KAAK6nF,IAET1D,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,IAGRrW,GAAYhG,IACfsY,EAAM3iG,KAAK6kF,IAETsT,GAA4B9N,IAAgBkE,GAAkBlE,IAChEsY,EAAM3iG,KAAKslF,KAIX4F,GAAcb,IACZmE,GAAoBnE,UAAyDx+F,IAAxC4iG,GAAuBpE,IAA+BkB,GAAUkD,GAAuBpE,MAE9HsY,EAAM3iG,KAAKgpF,IAETkC,GAAcb,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,KACpFsY,EAAM3iG,KAAK+oF,IAETmC,GAAcb,IAAgBof,GAAuBpf,IACvDsY,EAAM3iG,KAAKmoF,IAETiD,GAAkBf,KAAiBiE,GAAiBjE,IAAgBmE,GAAoBnE,KAC1FsY,EAAM3iG,KAAKsoF,IAGX8C,GAAkBf,MAChBmE,GAAoBnE,SAAyDx+F,IAAxC4iG,GAAuBpE,IAA8BkB,GAAUkD,GAAuBpE,MAE7HsY,EAAM3iG,KAAKipF,IAETmC,GAAkBf,IAAgBof,GAAuBpf,IAC3DsY,EAAM3iG,KAAKsoF,IAET8C,GAAkBf,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,KACxFsY,EAAM3iG,KAAK8oF,IAGT3E,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAG7H4K,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,KAGTI,EAAYlG,wBAA2B+H,GAAe7B,IAAiBgG,GAAYhG,IACrFsY,EAAM3iG,KAAK6oG,IAGTxe,EAAYlG,wBAA0B+H,GAAe7B,KAAiBgG,GAAYhG,IACpFsY,EAAM3iG,KAAK8oG,IAGNze,EAAYqY,mBAAmBrY,EAAasY,IAhF1C,GAkFX8H,mBAAmBpgB,SACjB,GAAKY,GAASZ,GAId,OAAIa,GAAcb,IAAkBiE,GAAiBjE,IAAiBmE,GAAoBnE,GAItFe,GAAkBf,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACjFpB,WAGFl0D,EAAAs1D,EAAYvH,4CAAuBr5F,KAAIi4F,IAC5C,MAAMqsB,EAAc9iB,GAASZ,GAAeA,EAAYc,IAAKzJ,KAAO,GAE9DwpB,EAAUxpB,EAAKviE,SAASsjE,GAAgBgB,OAAOzhG,OACjDgpG,GAAYX,IAAkBiE,GAAiBjE,IAAiBmE,GAAoBnE,GAElF,cADA,kBAEF3I,EAEEkhB,EAAO,cAAgBvY,EAAY3I,KAAOqsB,EAAc,KAAO7C,EACrE,OAAO7gB,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,GArBM5Z,GAwBX0hB,wBAAwBrgB,SACtB,GAAKY,GAASZ,GAId,OAAIa,GAAcb,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IAC7EtB,GAGLqC,GAAkBf,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACjFvB,WAGF/zD,EAAAs1D,EAAYxH,yCAAoBp5F,KAAIi4F,IACzC,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EAEvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,KZtHPoL,CAAazH,GAAqBjM,GAAgBsM,GAA2BE,GajDzE,SAAqD97G,GACzD,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,uBACC7iB,KAAMkgH,OAAG,KAITtD,mBAAmBhuB,GACzB,MAAMlL,EAAM,6BAA6B5rB,KAAK82B,GAC9C,OAAOlL,EAAMA,EAAI,GAAK0J,GAAcwB,GAAQz/E,OAAO1T,QAAQ,KAAM,IAAI0T,OAGvE2tG,uBAAuBvQ,GACrB,MAAMqH,EAAOE,GACX9zG,KAAK48G,mBAAmBrQ,GACxBqG,GAAgBrG,GAAU,KAAOgH,GACjCW,IAEFl0G,KAAK4uF,OAASkkB,GAAkBc,GAAQA,OAAOrzG,EAGjD87G,aAAatd,GACX/+F,KAAKusG,YACahsG,IAAhBP,KAAK4uF,OACDuI,GAAgBgB,OAAOzhG,KACvBo9G,GAA0B9zG,KAAK4uF,OAAQ+kB,GAAiC5U,EAAYlG,uBAAyBob,QAAsC1zG,GACnJP,KAAKkgH,OAGb7C,8BAA8Bte,GAC5B,YAAoBx+F,IAAhBP,KAAK4uF,OACA,uBAEFklB,GAA0B9zG,KAAK4uF,OAAQ+kB,GAAiC5U,EAAYlG,uBAAyBob,QAAsC1zG,GAG5JyrG,uCAAuCjN,WACrC,YAAoBx+F,IAAhBP,KAAK4uF,QACgC,QAAhCnlD,EAAA0tD,GAAgBgB,OAAOlC,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE2zE,qBAAsB,yBAExB,QAAlCp4C,EAAAmyB,GAAgBgB,OAAOlC,iBAAW,IAAAjxB,OAAA,EAAAA,EAAAo4C,qBAAsB,IAAMp9G,KAAKq9G,8BAA8Bte,KbSX4jB,CAAgBpG,GAAsBmD,WAEnIkD,GAAYnD,GcnCZ,SAAgD//G,GACpD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAKrX,GAAOjB,IAIZsY,EAAM3iG,KAAK2nF,IACNxD,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAAiD,MAAvBD,EAAYnQ,QAC7IyoB,EAAM3iG,KAAKmlF,IAEbwd,EAAM3iG,KAAKolF,SAE2Dv5F,IAAlEqjG,GAAiD7E,IACnDsY,EAAM3iG,KAAKqnF,SAEwDx7F,IAAjE8iG,GAAgDtE,IAClDsY,EAAM3iG,KAAKunF,IAGTpD,GAAuBkG,KAAiBqH,GAAiCrH,EAAYc,MACvFwX,EAAM3iG,KAAK6nF,IAET1D,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,KAGTpY,GAAiBjE,IAAgBkE,GAAkBlE,KACrDsY,EAAM3iG,KAAKwpF,IAETigB,GAAuBpf,IACzBsY,EAAM3iG,KAAKooF,IAGTjE,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAG7H4K,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,KAGTI,EAAYlG,wBAA2B+H,GAAe7B,IAAiBgG,GAAYhG,IACrFsY,EAAM3iG,KAAK6oG,IAGTxe,EAAYlG,wBAA0B+H,GAAe7B,KAAiBgG,GAAYhG,IACpFsY,EAAM3iG,KAAK8oG,IAGNze,EAAYqY,mBAAmBrY,EAAasY,IA9C1C,GAgDX8H,mBAAmBpgB,SACjB,GAAKiB,GAIL,eAAOv2D,EAAAs1D,EAAYvH,4CAAuBr5F,KAAIi4F,IAC5C,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EACvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,GAGL8H,wBAAwBrgB,SACtB,GAAKA,EAAYvH,sBAIjB,eAAO/tD,EAAAs1D,EAAYxH,yCAAoBp5F,KAAIi4F,IACzC,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EAEvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,Kd5CPuL,CAAW5H,GAAqBjM,GAAgBsM,GAA2BE,Ge5DvE,SAAmD97G,GACvD,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,qBACC7iB,KAAMkgH,OAAG,IAITtD,mBAAmBhuB,GACzB,MAAMlL,EAAM,sBAAsB5rB,KAAK82B,EAAOz/E,QAC9C,OAAOu0E,EAAMA,EAAI,GAAK0J,GAAcwB,GAAQz/E,OAAO1T,QAAQ,MAAO,IAAI0T,OAGhE2zG,4BAA4Bl0B,GAClC,MAAO,oCAAoCtgD,KAAKsgD,GAGlDkuB,uBAAuBvQ,GACrB,MAAMqH,EAAO5zG,KAAK48G,mBAAmBrQ,GACrCvsG,KAAK4uF,OAAS5uF,KAAK8iH,4BAA4BlP,GAAQE,GAA0BF,OAAMrzG,EAAW2zG,SAAuC3zG,EAG3I87G,aAAatd,GACX/+F,KAAKusG,YACahsG,IAAhBP,KAAK4uF,OACDuI,GAAgB/+F,KAAK1B,KACrBo9G,GAA0B9zG,KAAK4uF,YAAQruF,EAAWw+F,EAAYlG,uBAAyBob,QAAsC1zG,GAAaP,KAAKkgH,OAGvJ7C,gCACE,YAAoB98G,IAAhBP,KAAK4uF,OACA,uBAEF5uF,KAAKusG,OAAQp9F,OAAO1T,QAAQ,IAAK,IAG1CuwG,iDACE,YAAoBzrG,IAAhBP,KAAK4uF,QAC8B,QAA9BnlD,EAAA0tD,GAAgB/+F,KAAK69F,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE2zE,qBAAsB,yBAE1B,QAA9Bp4C,EAAAmyB,GAAgB/+F,KAAK69F,iBAAS,IAAAjxB,OAAA,EAAAA,EAAEo4C,qBAAsB,IAAMp9G,KAAKq9G,kCfqBmB0F,CAAcxG,GAAsBmD,WAE/HsD,GAAiBvD,GgBxBjB,SAAqD//G,GACzD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAK3X,GAAYX,IAIjBsY,EAAM3iG,KAAK2nF,IACNxD,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBAAiD,MAAvBD,EAAYnQ,QAC7IyoB,EAAM3iG,KAAKulF,IAEbod,EAAM3iG,KAAKwlF,SAE2D35F,IAAlEqjG,GAAiD7E,GACnDsY,EAAM3iG,KAAKqnF,IAEX6iB,GAAsD7f,EAAaqf,GAA4B6E,kCAG5B1iH,IAAjE8iG,GAAgDtE,GAClDsY,EAAM3iG,KAAKunF,IAEX2iB,GAAsD7f,EAAaqf,GAA4B6E,6BAG7FpqB,GAAuBkG,KAAiBqH,GAAiCrH,EAAYc,MACvFwX,EAAM3iG,KAAK6nF,IAERwI,GAAYhG,IACfsY,EAAM3iG,KAAKilF,KAERuJ,GAAoBnE,KAAgBiE,GAAiBjE,IAAmBoE,GAAuBpE,IAAiBkB,GAAUkD,GAAuBpE,KACpJsY,EAAM3iG,KAAK2pF,KAER6E,GAAoBnE,IAAgBW,GAAYyD,GAAuBpE,KAC1EsY,EAAM3iG,KAAK0pF,KAET6E,GAAkBlE,IAAgBiE,GAAiBjE,KACrDsY,EAAM3iG,KAAKypF,IAETggB,GAAuBpf,IACzBsY,EAAM3iG,KAAKqoF,IAETlE,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,IAGTviB,GAAuBkG,IAAgBA,EAAYI,SAASC,oBAAsBP,GAAkBG,yBACrGD,EAAYI,SAAmC3D,sBAAwB6b,EAAM3iG,KAAKinF,IAAiC0b,EAAM3iG,KAAKgnF,KAG7H4K,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,KAGTI,EAAYlG,wBAA2B+H,GAAe7B,IAAiBgG,GAAYhG,IACrFsY,EAAM3iG,KAAK6oG,IAGTxe,EAAYlG,wBAA0B+H,GAAe7B,KAAiBgG,GAAYhG,IACpFsY,EAAM3iG,KAAK8oG,IAGNze,EAAYqY,mBAAmBrY,EAAasY,IA3D1C,GA6DX8H,mBAAmBpgB,SACjB,GAAKW,GAAYX,GAGjB,eAAOt1D,EAAAs1D,EAAYvH,4CAAuBr5F,KAAIi4F,IAC5C,MAAMwpB,EAAUxpB,EAAKviE,SAASsjE,GAAgBgB,OAAOzhG,MACjDgpG,GAAYX,KAAiBiE,GAAiBjE,KAAiBmE,GAAoBnE,IAAgBW,GAAYyD,GAAuBpE,IACpI,kBACA,cACF3I,EAEEkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOwpB,EACvD,OAAO7gB,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,GAGL8H,wBAAwBrgB,SACtB,GAAKA,EAAYvH,sBAIjB,OAAIoI,GAAcb,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IAC7EtB,GAGLqC,GAAkBf,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACjFvB,GAGLuC,GAAShB,KAAiBiE,GAAiBjE,IAAgBkE,GAAkBlE,IACxEW,GAAYX,EAAYc,IAAKA,KAAQ3C,GAAqCD,WAG5ExzD,EAAAs1D,EAAYxH,yCAAoBp5F,KAAIi4F,IACzC,MAAMkhB,EAAO,cAAgBvY,EAAY3I,KAAO,KAAOA,EAEvD,OAAO2I,EACJ6Z,kBAAkB7Z,GAClBplG,QAAOwW,GAAKA,aAAawsF,KACzBhjG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAY+b,GAAQnnG,EAAEorF,WAAa+b,IAAM,MAC7F,KhBrFP4L,CAAgBjI,GAAqBjM,GAAgBsM,GAA2BE,GiB9D5E,SAAwD97G,GAC5D,OAAO,cAAcA,EAAdvC,kCACL6C,KAAI6iB,KAAG,0BACC7iB,KAAO2gH,QAAG,KACV3gH,KAAMkgH,OAAG,IACTlgH,KAAemjH,gBAAG,mBAG1BnjH,KAAsBojH,wBAAG,EAEjBxG,mBAAmBhuB,GACzB,OAAOA,EACJz/E,OACA1T,QAAQ,MAAO,IACfA,QAAQ,KAAM,IACdA,QAAQ,yBAA0B,KAClCA,QAAQ,OAAQ,IAChB0T,OAGG2xG,oCAAoClyB,GAC1C,MAAO,qCAAqCtgD,KAAKsgD,GAG3CmyB,kCAAkCnyB,GACxC,MAAO,kCAAkCtgD,KAAKsgD,GAGhDkuB,uBAAuBvQ,GACrB,MAAMqH,EAAO5zG,KAAK48G,mBAAmBrQ,GACrCvsG,KAAKojH,uBAAyB,cAAc90E,KAAKi+D,GACjDvsG,KAAK4uF,OAAS5uF,KAAKojH,uBACf,IACApjH,KAAK8gH,oCAAoClN,GACzCE,GAA0BF,OAAMrzG,EAAW2zG,IAC3Cl0G,KAAK+gH,kCAAkCnN,GACvCA,OACArzG,EAGN87G,aAAatd,gBACSx+F,IAAhBP,KAAK4uF,QAAyBmQ,EAEtB+T,GAAkB9yG,KAAK4uF,QAExBmQ,EAAYlG,uBACjBuN,GAAiCrH,GAC4B,aAA/Dt1D,EAAAs1D,EAAYc,0BAAKmB,OAAOrnG,QAAOi9D,GAAK8oC,GAAY9oC,KAAI58D,QAC/CgG,KAAKusG,OAASvsG,KAAKmjH,gBACnBnjH,KAAKusG,OAASvsG,KAAK2gH,QAAU3gH,KAAK4uF,cAAWruF,OAAYA,EAAYP,KAAK2gH,QAAU3gH,KAAKghH,4BAA4BjiB,GAE1H/+F,KAAKusG,OAASvsG,KAAKojH,uBAAyBpjH,KAAKmjH,gBAAkBnjH,KAAK2gH,QAAU3gH,KAAKghH,4BAA4BjiB,GAGtD,aAA/D/5B,EAAA+5B,EAAYc,0BAAKmB,OAAOrnG,QAAOi9D,GAAK8oC,GAAY9oC,KAAI58D,QAC/CgG,KAAKusG,OAASvsG,KAAKmjH,gBACnBnjH,KAAKusG,OAASvsG,KAAK2gH,QAAU3gH,KAAK4uF,cAAWruF,OAAYA,EAAYP,KAAK2gH,QAAU3gH,KAAKghH,4BAA4BjiB,GAZ1H/+F,KAAKusG,OAASvsG,KAAKghH,4BAA4BjiB,GAF/C/+F,KAAKusG,OAASpV,GAAgBmB,UAAU5hG,KAkBpCsqH,4BAA4BjiB,EAA0BkiB,GAAoB,SAChF,MAAMz9B,EAAoB,QAAX/5C,EAAAzpC,KAAK4uF,cAAM,IAAAnlD,OAAA,EAAAA,EAAE56B,MAAM,MAC3B60E,KAAQ1lC,GAAawlC,EACtB09B,EAAUz2G,SAASi5E,MAAAA,EAAAA,EAAO,IAAK,IAAM,GAC3C,OACGw9B,EAAUx9B,EAAM1jF,KAAKkgH,OAASx8B,IAC9B1lC,EAAUhkD,OAAS,EAChB,KACAgkD,MAAAA,OAAA,EAAAA,EACI7/C,KAAI0lD,GAAQk7C,EAAYlG,uBAAyBua,GAA+BvvD,GAAOA,IACxF90C,KAAK,KACL7O,eACH,KACF+gH,GAAuBC,IAAWljE,EAAUhkD,OAAgB,GAAN,KAI5DqjH,8BAA8Bte,GAC5B,YAAoBx+F,IAAhBP,KAAK4uF,OACA,uBAEF5uF,KAAKikG,mBAAqB,kBAAoBjkG,KAAKghH,4BAA4BjiB,GAAa,GAGrGiN,uCAAuCjN,SACrC,YAAoBx+F,IAAhBP,KAAK4uF,QACmC,QAAnCnlD,EAAA0tD,GAAgBmB,UAAUrC,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE2zE,qBAAsB,wBAE7Dp9G,KAAKikG,mBAAqB,kBAAoB,KAAOjkG,KAAKghH,4BAA4BjiB,GAAa,GAGpGkF,2BACN,OAAQjkG,KAAK64F,yBAAqC,QAAXpvD,EAAAzpC,KAAKusG,cAAM,IAAA9iE,OAAA,EAAAA,EAAE/1B,SAAS,YAAe1T,KAAK64F,wBAAkF,KAAhD,QAAR7zB,EAAAhlE,KAAK6/F,WAAG,IAAA76B,OAAA,EAAAA,EAAEg8B,OAAOrnG,QAAOi9D,GAAK8oC,GAAY9oC,KAAI58D,UjB9BxDqpH,CAAmB9G,GAAsBmD,WAEzI4D,GAAmB7D,GACvBR,GAAkBhE,GAAqBlM,GAAiBuM,GAA2BE,GAAoBiB,GAAmBd,GkBjEtH,cAA+B+D,GAGnCviH,cACE4C,MAAM,eAGJyhG,oBACF,OAAoB,UAAbxhG,KAAKujH,gBAAQ,IAAA95E,EAAAA,EAAI,GAG1BoyE,UAAU9jB,EAAgB2J,SACxB1hG,KAAKujH,SAA4B,QAAjB95E,EAAAzpC,KAAKujH,gBAAY,IAAA95E,EAAAA,EAAA,QAClBlpC,IAAfmhG,EAA2B1hG,KAAKujH,SAASn1F,OAAOpuB,KAAKujH,SAASjlH,QAAQojG,GAAwB,EAAG,EAAG3J,GAAU/3F,KAAKujH,SAAS7uG,KAAKqjF,GAGnIgkB,oBAAoBxR,EAAoBtiB,SACtCjoF,KAAKujH,SAA4B,QAAjB95E,EAAAzpC,KAAKujH,gBAAY,IAAA95E,EAAAA,EAAA,GACjCzpC,KAAKujH,SAASn1F,OAAO65D,EAAS,EAAGsiB,GAGnC4R,aAAapkB,SACX/3F,KAAKujH,SAA4B,QAAjB95E,EAAAzpC,KAAKujH,gBAAY,IAAA95E,EAAAA,EAAA,GACjCzpC,KAAKujH,SAAWvjH,KAAKujH,SAAS5pH,QAAOi9D,GAAKA,EAAEysB,OAAS0U,EAAO1U,OAG9Di5B,kBACEt8G,KAAKwhG,QACF7nG,QAAOi9D,GAAKA,EAAEuoC,SAASC,oBAAsBP,GAAkBqG,kBAAoBtuC,EAAEuoC,SAASC,oBAAsBP,GAAkBG,yBACtI1iG,SAAQiuG,IACF1R,GAAuB0R,KAC1BA,EAAM3b,OAASgmB,GAAiBrK,IAElCA,EAAM8R,aAAa9R,GACnBA,EAAMhrG,GAAKo4G,GAAQpN,GACnB,MAAMtS,EAASsS,EAAiBtS,MAC5BA,IACFA,EAAM14F,GAAKo4G,GAAQ1f,OAK3B8L,cAAchM,GACZ,OAAO/3F,KAAKwhG,QAAQljG,QAAQy5F,alBwB1ByrB,GAAgB/D,GACpBR,GAAkBhE,GAAqBjM,GAAgBsM,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAEzI+D,GAAoChE,GACxCR,GAAkBhE,GAAqBlM,GAAiBuM,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAE1IgE,GAAajE,GACjBR,GAAkBhE,GAAqBjM,GAAgBsM,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAEzIiE,GAAalE,GACjBR,GAAkBhE,GAAqB3M,GAAegN,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAExIkE,GAAgBnE,GACpBR,GAAkBhE,GAAqB3M,GAAegN,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAExImE,GAAapE,GACjBR,GAAkBhE,GAAqB3M,GAAegN,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAExIoE,GAAcrE,GAClBR,GAAkBhE,GAAqBjM,GAAgBsM,GAA2BE,GAAoBiB,GAAmBd,GAAoB+D,WAGzIqE,GAAetE,GmBtEf,SAAmD//G,GACvD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAKpX,GAAUlB,IAIfsY,EAAM3iG,KAAK2nF,SAE2D97F,IAAlEqjG,GAAiD7E,IACnDsY,EAAM3iG,KAAKqnF,SAEwDx7F,IAAjE8iG,GAAgDtE,IAClDsY,EAAM3iG,KAAKunF,IAGTpD,GAAuBkG,IAAgBwF,GAAkBxF,IAC3DsY,EAAM3iG,KAAK0mG,IAGT9b,GAAcP,EAAYc,WAAiDt/F,IAAxC4iG,GAAuBpE,IAC5DsY,EAAM3iG,KAAKmpF,IAET4B,GAAQV,EAAYc,MACtBwX,EAAM3iG,KAAKopF,IAET0B,GAAST,EAAYc,MACvBwX,EAAM3iG,KAAKupF,IAETyB,GAAYX,EAAYc,MAC1BwX,EAAM3iG,KAAKqpF,IAET4B,GAASZ,EAAYc,MACvBwX,EAAM3iG,KAAKkpF,IAETmC,GAAShB,EAAYc,MACvBwX,EAAM3iG,KAAKspF,IAGTsI,GAAwBvH,IAC1BsY,EAAM3iG,KAAKiqF,IAGNI,EAAYqY,mBAAmBrY,EAAasY,IAvC1C,GA0CX8H,mBAAmBpgB,IAKnBqgB,wBAAwBrgB,MnBiBailB,CAAc1V,GAAegN,GoB3FhE,SAAqD57G,GACzD,OAAO,cAAcA,EAAdvC,kCACI6C,KAAAy7G,aAAeF,GAAaG,cACrC17G,KAAMikH,OAAG5kB,GAELpS,YACF,OAAOjtF,KAAKikH,OAGVh3B,UAAMA,GACR,MAAMhrF,EAAIgrG,GAAsBhgB,GAChCjtF,KAAKikH,OAAShiH,IAAM8qG,GAAsCA,GAAsC1N,KpBgFL6kB,CAAgB5G,GAAsBf,GAAsBmD,UAEvJyE,GAAc1E,GqB1Fd,SAAkD//G,GACtD,OAAO,cAAcA,EACnBk5G,kBAAkB7Z,GAChB,MAAMsY,EAA0B,GAEhC,OAAK/W,GAASvB,IAIdsY,EAAM3iG,KAAKykF,IACXke,EAAM3iG,KAAK8hF,IAEJuI,EAAYqY,mBAAmBrY,EAAasY,IAN1C,GAUX8H,mBAAmBpgB,IAKnBqgB,wBAAwBrgB,MrBqEYqlB,CAAa9V,GAAegN,GAA2BE,GAAoB8B,GAAsBf,GAAsBmD,UAElJG,GAAkB,CAAC5oH,EAAqBm/F,EAAcsL,EAA0BzZ,KAC3F,MAAM8W,EAAc50E,GAAOisE,EAAMn/F,GAGjC,YAFYsJ,IAAZ0nF,GAAyBA,GAAW,EAAIhxF,EAAQ6kH,mBAAmB/c,EAAa9W,GAAWyZ,EAAazqG,EAAQ2kH,SAAS7c,EAAa2C,GAAczqG,EAAQ2kH,SAAS7c,GAE9JA,GAGH50E,GAAS,CAACzzB,EAAcO,KAC5B,IAAI8nG,EAEJ,OAAQroG,EAAKE,eACX,IAAK,SACHmoG,EAAc,IAAIghB,GAAYrpH,EAAKE,eACnC,MACF,IAAK,SACHmoG,EAAc,IAAIqhB,GACjBrhB,EAAuB9G,MAAQ9tE,GAAOgtE,GAAgBc,MAAM7B,KAAM2I,GACnE,MACF,IAAK,WACHA,EAAc,IAAIykB,GAAc9sH,EAAKE,eACrC,MACF,IAAK,QACHmoG,EAAc,IAAIkjB,GAAWvrH,EAAKE,eAClC,MACF,IAAK,SACHmoG,EAAc,IAAIwjB,GAAY7rH,EAAKE,eACnC,MACF,IAAK,OACHmoG,EAAc,IAAI6jB,GAAUlsH,EAAKE,eACjC,MACF,IAAK,QACHmoG,EAAc,IAAI2kB,GAAWhtH,EAAKE,eAClC,MACF,IAAK,UACHmoG,EAAc,IAAIglB,GAAartH,EAAKE,eACpC,MACF,IAAK,YACHmoG,EAAc,IAAIikB,GAAetsH,EAAKE,eACtC,MACF,IAAK,QACHmoG,EAAc,IAAI4kB,GAAWjtH,EAAKE,eAClC,MACF,IAAK,QACHmoG,EAAc,IAAI8kB,GAAWntH,EAAKE,eAClC,MACF,IAAK,WACHmoG,EAAc,IAAI6kB,GAAcltH,EAAKE,eACrC,MACF,IAAK,SACHmoG,EAAc,IAAI+kB,GAAYptH,EAAKE,eACnC,MACF,IAAK,SACHmoG,EAAc,IAAIolB,GAAYztH,EAAKE,eACnC,MACF,QACEmoG,EAAc9nG,GAAUipG,GAAYjpG,GAAU,IAAIwsH,GAAkC,qBAAuB,IAAIrB,GAAyB,YACxIrjB,EAAYoO,UAAY,GACxBpO,EAAYoO,UAAUz4F,KAAK,CAAE0hF,KAAMsW,GAAac,QAASvX,UAAW,yFAYxE,OARA8I,EAAY1b,KAAO03B,GAAQljH,OAC3BknG,EAAYoJ,MAAQ/kB,KACpB2b,EAAYroG,KAAOA,EACnBqoG,EAAYc,IAAMF,GAASZ,IAAgBS,GAASvoG,GAAWA,EAAkBghG,MAAQhhG,EACzF8nG,EAAYlG,uBAAyBA,GAAuBkG,GAE5DslB,GAA+CtlB,GAExCA,GAGIulB,GAAoB,KAC/B,MAAMxsB,EAAc,IAAIwrB,GAGxB,OAFAxrB,EAAYzU,KAAO03B,GAAQljH,OAC3BigG,EAAYqQ,MAAQ/kB,KACb0U,GAGIysB,GAAmBpuB,IAC9BA,EAAM+K,WAAaojB,KACnBnuB,EAAM+K,WAAWrB,IAAM1J,GAGZquB,GAAqB,CAAC9iB,EAAyByY,iEAC1D,IAAI5jB,EAEJ,GAAIsC,GAAuB6I,GACzB,GvBxLyB,kBuBwLrByY,EAAO1e,QACTlF,EAAOkuB,GAA+BttB,GAAgBY,OAAO3B,KAAM0K,GAAeY,IAClFnL,EAAKtJ,iBAA+B,QAAvBjoB,EAAa,QAAbv7B,EAAA0wE,EAAO5jB,YAAM,IAAA9sD,OAAA,EAAAA,EAAAqvD,gBAAU,IAAA9zB,OAAA,EAAAA,EAAAioB,4BAAOjzF,QAAS,UAAIy7B,EAAa,QAAbD,EAAA2kF,EAAO5jB,YAAM,IAAA/gE,OAAA,EAAAA,EAAAsjE,+BAAU7L,MAAQ,QAClF,GvB1LoB,oBuB0LhBktB,EAAO1e,QAA6B,CAC7C,MAAMhnE,EAAMqsE,GAAeY,GAC3BnL,EAAOmuB,GAAqBjwF,EAAIorE,KAChCtJ,EAAMtJ,MAAQggB,GAAsD,QAAhCmJ,EAAqB,kBAArBJ,EAAAmE,EAAO5jB,2BAAMuC,gBAAQ,IAAAod,OAAA,EAAAA,EAAEjpB,aAAS,IAAAmpB,EAAAA,EAAA,SAC/D,GD1E2B,EAACrX,EAA0Bob,eAC/D,IAAKthB,GAAuBkG,GAC1B,OAAO,EAET,MAAMhH,EAAS6J,GAAU7C,GACzB,OAAOkE,GAAkBlL,KvC5Ee9K,EuC4EsBggB,GAAmD,QAA7BrwB,EAAsB,QAAtB5X,EAAY,QAAZv7B,EAAA0wE,EAAOhkB,aAAK,IAAA1sD,OAAA,EAAAA,EAAEqvD,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,aAAK,IAAArQ,EAAAA,EAAI,IvC3E9G,0BAA0BtuC,KAAK2+C,KuC2EuFsX,GAAkBxF,GvC5ExG,IAAC9R,GwCiJ3B03B,CAAuBjjB,EAAYyY,GAAS,CACrD,MAAM1lF,EAAMqsE,GAAeY,GAC3BnL,EvBjMuB,kBuBiMhB4jB,EAAO1e,QAA4BgpB,GAA+BttB,GAAgBY,OAAO3B,KAAM3hE,GAAQiwF,GAAqBjwF,EAAIorE,KACvItJ,EAAMtJ,MvBlMiB,kBuBkMTktB,EAAO1e,QAA4B,GAAKwR,GAAsD,QAAhC2X,EAAuB,QAAvBC,EAAa,QAAbvO,EAAA6D,EAAO5jB,YAAM,IAAA+f,OAAA,EAAAA,EAAAxd,gBAAU,IAAA+rB,OAAA,EAAAA,EAAA53B,aAAS,IAAA23B,EAAAA,EAAA,SAE5GruB,EAAOmuB,GAAqBhjB,GAC5BnL,EAAK8lB,eACL9lB,EAAMtJ,eAAQ63B,EAAuB,QAAvBC,EAAW,UAAX5K,EAAO5jB,YAAI,IAAAyuB,OAAA,EAAAA,EAAElsB,gBAAU,IAAAisB,OAAA,EAAAA,EAAA93B,4BAAOjzF,QAAS,EAAIizG,WAAsBv3E,EAAuB,QAAvBuvF,EAAa,UAAb9K,EAAO5jB,YAAM,IAAA2uB,OAAA,EAAAA,EAAApsB,gBAAU,IAAAmsB,OAAA,EAAAA,EAAAh4B,qBAAS,IAAM,QAGnHyU,EAAWR,YAAc8L,GAAqD,QAAxBmY,EAAY,QAAZC,EAAAjL,EAAOhkB,aAAK,IAAAivB,OAAA,EAAAA,EAAEtsB,gBAAU,IAAAqsB,OAAA,EAAAA,EAAAl4B,SAAqB,QAAXo4B,EAAAlL,EAAO5jB,YAAI,IAAA8uB,OAAA,EAAAA,EAAExsB,yBAClG6I,EAAWT,gBACdsjB,GAAgB7iB,GAElBnL,EAAOkuB,GAA+B/iB,EAAWtL,KAAMsL,EAAWR,YAClE3K,EAAKtJ,iBAA+B,QAAvBq4B,EAAa,QAAbC,EAAApL,EAAO5jB,YAAM,IAAAgvB,OAAA,EAAAA,EAAAzsB,gBAAU,IAAAwsB,OAAA,EAAAA,EAAAr4B,4BAAOjzF,QAAS,UAAIwrH,EAAa,QAAbC,EAAAtL,EAAO5jB,YAAM,IAAAkvB,OAAA,EAAAA,EAAA3sB,+BAAU7L,MAAQ,KAEvFsJ,EAAOmuB,GAAqBhjB,GAC5BnL,EAAMtJ,MAAoC,QAA5By4B,EAAqB,kBAArBC,EAAAxL,EAAO5jB,2BAAMuC,gBAAQ,IAAA8sB,OAAA,EAAAA,EAAE34B,aAAK,IAAAy4B,EAAAA,EAAI,IAGlD,OAAOnvB,GAGImuB,GAAwBhjB,GAC/BA,EAAWT,eACN4kB,GAAmCnkB,GAGxClC,GAASkC,GACN7I,GAAuB6I,GAGrBme,GAAiBne,EAAsBzJ,MAAQd,GAAgBgB,OAAO/B,UAAM71F,EAAW,GAFrFulH,GAA6BpkB,GAKpCxB,GAAYwB,GACPqkB,GAAgCrkB,GAGrC7I,GAAuB6I,GACrBzB,GAAUyB,GACLme,GAAgBne,EAAW7B,IAAML,GAASkC,EAAW7B,KAAQ1I,GAAgBmB,UAAUlC,KAAOsL,EAAW7B,IAAKpI,kBAAoBiK,GAEpIL,GAAUK,IAAekL,GAA2BlL,GACvDme,GAAgBne,EAAYA,EAAWjK,kBAAoBiK,GAC3Dme,GAAgBne,EAAW7B,IAAM6B,EAAWtL,KAAMsL,GAGpDpB,GAASoB,GACJme,GAAgBne,EAAW7B,IAAM1I,GAAgBY,OAAO3B,UAAM71F,EAAW,GAG3EylH,GAA4BtkB,GAG/BmkB,GAAsCnkB,UAC1C,OAAIA,EAAW7B,IAAK0W,YAAY7U,KAAgC,QAAjBj4D,EAAAi4D,MAAAA,SAAAA,EAAY7B,WAAK,IAAAp2D,OAAA,EAAAA,EAAAo2D,KACvDggB,GAAgBne,EAAW7B,IAAIA,IAAK6B,EAAW7B,IAAIzJ,KAAMsL,EAAW7B,KAEtEggB,GAAgBne,EAAW7B,IAAM6B,EAAWtL,KAAMsL,IAGrDskB,GAA+BtkB,IACnC,GAAIkL,GAA2BlL,GAAa,CAC1C,MAAM7+E,EAAO6+E,EAAWjK,kBACxB,OAAOiK,EAAW7B,IAAKmB,OAAQhnG,OAAS,EAAI6lH,GAAgBne,EAAY7+E,OAAMtiB,EAAW,GAAKs/G,GAAgBne,EAAY7+E,GAE5H,GAAI6+E,EAAWvC,SAASC,oBAAsBP,GAAkBmG,sBAAwB6H,GAA4BnL,IAAeA,EAAW7B,IAAK0W,YAAY7U,GAAa,CAC1K,GAAI9B,GAAc8B,GAAa,CAC7B,MAAM3J,EAAiB2J,EAAW7B,IAAKA,IACvC,OAAO9H,EAAQiJ,OAAQrnG,QAAO4wG,GAAS7K,GAAY6K,KAAQvwG,OAAS,EAChE6lH,GAAgB9nB,EAAQZ,GAAgBmB,UAAUlC,UAAM71F,EAAW,GACnEs/G,GAAgB9nB,EAAQZ,GAAgBmB,UAAUlC,MAEtD,OAAOypB,GAAgBne,EAAY7B,IAAKA,IAAM6B,EAAW7B,IAAKzJ,KAAMsL,EAAY7B,KAGpF,OAAOggB,GAAgBne,EAAW7B,IAAM6B,EAAWtL,KAAMsL,IAGrDokB,GAAgCpkB,IACpC,GAAIkL,GAA2BlL,GAAa,CAC1C,MAAM7+E,EAAO6+E,EAAWjK,kBAExB,GAAI50E,IAASs0E,GAAgBgB,OAAO/B,KAAM,CACxC,MAAMn/F,EAAUyqG,EAAsBzJ,MACtC,OAAOhhG,EAAQ+pG,OAAQhnG,OAAS,EAAI6lH,GAAgB5oH,EAAS4rB,OAAMtiB,EAAW,GAAKs/G,GAAgB5oH,EAAS4rB,GAE9G,OAAO6+E,EAAW7B,IAAKmB,OAAQhnG,OAAS,EAAI6lH,GAAgBne,EAAY7+E,OAAMtiB,EAAW,GAAKs/G,GAAgBne,EAAY7+E,GAG5H,OAAIiqF,GAAkCpL,IAAeA,EAAWV,OAAOhnG,OAAS,GAAK0lG,GAAYgC,EAAWV,OAAO,IAC1G6e,GAAgBne,EAAavK,GAAgBmB,UAAUlC,UAAM71F,EAAW,GAE1Es/G,GAAgBne,EAAW7B,IAAM6B,EAAWtL,KAAMsL,IAGrDqkB,GAAmCrkB,GAChCme,GAAgBne,EAAYvK,GAAgBY,OAAO3B,UAAM71F,EAAW,GAGhEkkH,GAAiC,CAACruB,EAAc8K,EAAwBQ,EAA0BzZ,KAC7G,MAAM8W,EAAc8gB,GAAgB3e,EAAa9K,EAAMsL,EAAYzZ,GAOnE,OALA8W,EAAYI,SAAW,IAAIogB,GAC3BxgB,EAAYlG,wBAAyB,EACrCkG,EAAYL,cAAgB,KAC5BK,EAAYsd,aAAatd,GAElBA,GAGHslB,GAAkDtlB,IAClDlG,GAAuBkG,KAKzB+B,GAAe/B,GAAaqd,eAAiB,OAC7Ctb,GAAe/B,GAAaud,gBAAkB,SsB5S5CnuB,GAAQ,IAAIpzF,IAClBozF,GAAMlyF,IAAI,SAAU,6DACpBkyF,GAAMlyF,IAAI,SAAU,qDACpBkyF,GAAMlyF,IAAI,SAAU,8DACpBkyF,GAAMlyF,IAAI,OAAQ,4CAClBkyF,GAAMlyF,IAAI,YAAa,8DAEvB,MA0DagqH,GAA8B,CAACh5B,EAAe8R,EAA0Bqb,EAAOvZ,GAAuB2e,UACjH,MAAM0G,EAAcC,GAAsBl5B,GAC1C,IAAIm5B,GAAkB,EAEtB,IAAKF,GAAsC,IAAvBA,EAAYlsH,OAC9B,MAAM,IAAI8xB,MAAM,4CAGdo6F,EAAY,GAAG9vB,OAASe,GAAgBY,QACtCmuB,EAAY9jF,UAAU,GAAGg0D,OAASe,GAAgBY,SACpDquB,GAAkB,GAGtB,MAAMv9F,EAAIu9F,EAAkBF,EAAY3xF,aAAUh0B,EAC5C8lH,EArCqB,EAACtnB,EAA0B2C,EAAmC0Y,KACpFrb,EAAYkC,iBACfsjB,GAAgBxlB,GAChBA,EAAYmC,WAAY/B,SAAW,IAAIogB,GACtCxgB,EAAYmC,WAAY/B,SAAmCwO,WAAayM,GAE3E,MAAMiM,EAAS5B,GAA+BttB,GAAgBY,OAAO3B,KAAM2I,EAAYmC,gBAAa3gG,EAAW,GAc/G,OAbA8lH,EAAOxtB,wBAAyB,EAChCwtB,EAAOlnB,SAAW,IAAIogB,GACrB8G,EAAOlnB,SAAmCwO,WAAayM,EACvDiM,EAAOlnB,SAAmC3D,uBAAwB,EACnEkG,EAAW9S,QAAUy3B,EAAOvJ,uBAAuBpb,EAAW9S,QAC9Dy3B,EAAOhK,aAAagK,GACpBA,EAAO9mH,GAAKo4G,GAAQ0O,GAEhB7mB,GAAS6mB,KACVA,EAAkBpuB,MAAOkH,SAAW,IAAIogB,GACvC8G,EAAkBpuB,MAAOkH,SAAmCwO,WAAayM,GAGtEiM,GAiBQC,CAAqBvnB,EAAal2E,MAAAA,EAAAA,EAAK,CAAEutE,KAAMe,GAAgBY,QAAUqiB,GAIxF,MA5EqB,EAACrb,EAA0BmnB,EAAsC9L,KACtF,IAAInjH,EAAS8nG,EACbmnB,MAAAA,GAAAA,EAAa5pH,SAAQolG,aACgB,QAA9Bj4D,EAAAxyC,EAAOugG,6BAAuB,IAAA/tD,OAAA,EAAAA,EAAA/1B,iBAASsxD,EAAA08B,EAAWtL,2BAAMA,QAU3Dn/F,EAAS4oH,GAAgB5oH,EAAQyqG,EAAWtL,KAAKA,MACjDsL,EAAW9S,QAAU33F,EAAO6lH,uBAAuBpb,EAAW9S,QAC9D33F,EAAOolH,aAAaplH,IAXhByqG,EAAW9S,QAAU8S,EAAW9S,OAAOtzF,MAAM,SAC/CrE,EAAS4oH,GAAgB5oH,EAAQuoG,GAASvoG,GAAUkgG,GAAgBmB,UAAUlC,KAAO2J,GAAS9oG,GAAUkgG,GAAgB/+F,KAAKg+F,KAAOe,GAAgBe,SAAS9B,MAC7JsL,EAAW9S,QAAU33F,EAAO6lH,uBAAuBpb,EAAW9S,QAC9D33F,EAAOolH,aAAaplH,KAEpBA,EAAS4oH,GAAgB5oH,EAAQkgG,GAAgBe,SAAS9B,MAC1Dn/F,EAAOs1G,OAAS7K,EAAW9S,QAO3BwrB,IACDnjH,EAAOkoG,SAAmCwO,WAAayM,GAE1DnjH,EAAO4hG,wBAAyB,EAChC5hG,EAAOkoG,SAAW,IAAIogB,GACrBtoH,EAAOkoG,SAAmC3D,uBAAwB,EACnEvkG,EAAOsI,GAAKo4G,GAAQ1gH,GAEhBuoG,GAASvoG,KACVA,EAAkBghG,MAAOkH,SAAW,IAAIogB,GACrCnF,IACAnjH,EAAkBghG,MAAOkH,SAAmCwO,WAAayM,IAG/EnjH,EAAOk2G,UAAYuJ,GAAkBz/G,OA2CvCsvH,CAAeF,EAAQH,EAAa9L,GAE7BiM,GAsEIF,GAAyBl5B,IACpC,MAAMu5B,EAAe,IAAIC,GAA4Bx5B,GACrD,GAAIu5B,EAAaE,OACf,OAAOF,EAAaN,mBAwCXO,GAcXtpH,YAAoB8vF,GAAAjtF,KAAKitF,MAALA,EAbpBjtF,KAAM0mH,QAAG,EAET1mH,KAAWkmH,YAA4B,GAE/BlmH,KAAY2mH,aAAG,mBACf3mH,KAAA4mH,YAAc,gCAAgC5mH,KAAK2mH,gBACnD3mH,KAAA6mH,eAAiB,wCAAwC7mH,KAAK2mH,gBAC9D3mH,KAAA8mH,YAAc,uDAAuD9mH,KAAK2mH,gBAC1E3mH,KAAA+mH,YAAc,+BAA+B/mH,KAAK2mH,gBAClD3mH,KAAAgnH,UAAY,iBAAiBhnH,KAAK2mH,gBAElC3mH,KAAKmuF,MAAG,gBAAgBnuF,KAAKgnH,oBAAoBhnH,KAAK+mH,uBAAuB/mH,KAAK8mH,uBAAuB9mH,KAAK6mH,2BAA2B7mH,KAAK4mH,gBAGpJ5mH,KAAKsyD,QAGCA,QACNtyD,KAAKinH,eAEL,MAAMC,EAAY,IAAI76E,OAAOrsC,KAAKmuF,MAAO,MAAMr2B,KAAK93D,KAAKitF,OAEzD,GAAIi6B,EAAW,CACblnH,KAAK0mH,QAAS,EACd,MAAMx0G,EAAIg1G,EAAUjpG,MAAM,GAAGtkB,QAAOiO,QAAWrH,IAANqH,IAEzC,IAAK,IAAI1N,EAAI,EAAGumD,EAAI,EAAOvuC,EAAElY,OAAYymD,GAAKvuC,EAAElY,OAAS,EAAGE,GAAK,EAAGumD,GAAK,EAAG,CAC1E,MAAM21C,GAtIUnJ,EAsIY/6E,EAAEhY,IArI1BiV,OAAO7T,MAAM,oBACd67F,GAAgBU,OAErB5K,EAAM99E,OAAO7T,MAAM,gBACd67F,GAAgBY,OAGrB9K,EAAM99E,OAAO7T,MAAM,iBACd67F,GAAgBgB,OAGrBlL,EAAM99E,OAAO7T,MAAM,WACd67F,GAAgB/+F,KAGrB60F,EAAM99E,OAAO7T,MAAM,qBACd67F,GAAgBmB,eADzB,EAwHM,IAAKlC,EACH,MAAM,IAAItqE,MAAM,mDAAmD5Z,EAAEhY,MAEvE8F,KAAKkmH,YAAYxxG,KAAK,CAAE0hF,KAAAA,EAAMxH,OAAQ18E,EAAEuuC,MA3IzB,IAACwsC,EAgJdg6B,eACNjnH,KAAKitF,MAAQjtF,KAAKitF,MACfr2F,cACA6E,QAAQ,WAAY,IACpBA,QAAQ,QAAS,KACjBA,QAAQ,aAAc,KACtBA,QAAQ,aAAc,KACtBA,QAAQ,OAAQ,KAChB0T,QC/OA,MAAMg4G,GAA+B,UAZ1ChqH,cACE6C,KAAKi2F,UAAY,2BAGnBC,QAAQkxB,EAAa,GACnB,MAAO,CACLvkG,KAZkC,2BAalCukG,WAAYA,KCblB,IAAYC,IAAZ,SAAYA,GACVA,EAAA,cAAA,gBACAA,EAAA,YAAA,aACAA,EAAA,OAAA,SACAA,EAAA,0BAAA,yBAJF,CAAYA,KAAAA,GAKX,KCiBM,MAAMC,GAAsB,CAACtsB,EAAsB,KACjDA,EAASrhG,OAAO4tH,IAAmBppH,KAAI+yD,GAAKA,IAOxCs2D,GAA4B,CAACxsB,EAAsB,GAAI3X,EAAO,IAClEikC,GAAoBtsB,GACxBrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBpkC,OAASA,IAC3CplE,OAAO,GAAG,GAeFypG,GAA6B,CAAC1sB,EAAsB,GAAI3X,EAAO,IACnEikC,GAAoBtsB,GAAUrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBpkC,OAASA,IAsBrEskC,GAAgC,CAACrxH,EAAc0kG,KAC1D,MAAMtvF,EAAoB,GAe1B,OAbAsvF,MAAAA,GAAAA,EAAU1+F,SAAQ40D,gBAChB,GAAIq2D,GAAkBr2D,GAAI,CACxB,MAAM02D,EAAO12D,EACP22D,EAAUD,EAAKnN,YAAcR,GAAU6N,iBAAmBC,GAA2BzxH,EAAOsxH,GAAkD,QAA1ChrC,EAAqC,kBAArCnzC,EAAAm+E,EAAKI,2CAAsBtd,kBAAU,IAAA1lC,OAAA,EAAAA,EAAE66B,WAAG,IAAAjjB,OAAA,EAAAA,EAAEyG,KAChJ4kC,EAAOJ,EAAUL,GnGzEK,uBmGyEqBI,EAAKM,WAAoC5xH,EAAM0kG,SAAWA,EAAU6sB,QAAWtnH,EAC5H0nH,GAAQE,GAAuBP,EAAMK,KACvCL,EAAKQ,qBAAuBH,EAAK1oH,GACjCqoH,EAAKS,2BAAiF,QAApD7yF,EAAA8yF,GAA6BhyH,EAAO0kG,EAAWitB,UAAK,IAAAzyF,OAAA,EAAAA,EAAEj2B,IAG5FmM,EAAOgJ,KAAKw8C,MAGPxlD,GAGI48G,GAA+B,CAAChyH,EAAc0kG,EAAqBitB,eAC9E,MAAM5kC,EAAO4kC,EAAKxN,YAAcR,GAAU6N,iBAAmBC,GAA2BzxH,EAAO2xH,GAAkD,QAA1CrrC,EAAqC,kBAArCnzC,EAAAw+E,EAAKD,2CAAsBtd,kBAAU,IAAA1lC,OAAA,EAAAA,EAAE66B,WAAG,IAAAjjB,OAAA,EAAAA,EAAEyG,KAC7IukC,EAAOK,GAAQT,GAA0BxsB,EAAU3X,GACzD,OAAOukC,EAAOU,GAA6BhyH,EAAO0kG,EAAU4sB,GAAQK,GAOhEM,GAA8B,CAClCC,mBAAsB,IAAc,yBACpCC,iBAAoB,IAAc,uBAClCC,kBAAqB,IAAc,wBACnCC,yBAA4B,IAAc,oCAC1C,mBAA0BnkC,GAAqCokC,GAA8CpkC,GAC7G,kBAAwB,IAAc,qBACtCqkC,mBAAsB,IAAc,yBACpCC,mCAAuCtkC,GAAqCukC,GAAmCvkC,GAC/GwkC,KAASxkC,GAAqCukC,GAAmCvkC,GACjFykC,KAASzkC,GAAqCukC,GAAmCvkC,IAG7E0kC,GAA6B,CACjC,CAACjP,GAAU6N,kBAAmB,IAAc,yBAC5C,CAAC7N,GAAUkP,kBAAmB,IAAc,uBAC5C,CAAClP,GAAUmP,oBAAqB,IAAc,yBAC9C,CAACnP,GAAUoP,oBAAqB,IAAc,oCAC9C,CAACpP,GAAUqP,mBAAoB,IAAc,yBAIlCC,GAAiC/kC,GACjC+jC,GAA4B/jC,EAAQ0jC,YACnCK,GAA4B/jC,EAAQ0jC,YAAY1jC,GAAWukC,GAAmCvkC,GAG/FglC,GAA8BhlC,UACzC,OAAwB,UAAjBA,EAAQyR,iBAAS,IAAAxsD,EAAAA,EAAI,IAGjBm/E,GAAiDpkC,IAC5D,MAAM4R,KAAEA,EAAImW,OAAEA,GAAW/nB,EAAQwjC,sBAAwB,CAAE5xB,KAAM,GAAIxH,OAAQ,GAC7E,MAAO,sBAAqBwH,EAAO,gBAAgBA,KAAQmW,MAAa,KAG7Dwc,GAAqC,CAACvkC,EAA0BijC,IAC1CjjC,EAAQwjC,sBAAwBP,GAAuBjjC,EAAQwjC,qBAAqBp5B,SAAW64B,EAAoB74B,OAClHg6B,GAA8CpkC,GAAW0kC,GAA2B1kC,EAAQi2B,aAG1HsN,GAA6B,CAACzxH,EAAckuF,IAEzCilC,GAAWnzH,EAAOkuF,EAAQijC,sBAAwB,EAGrDgC,GAAa,CAACnzH,EAAcuvF,qBAChC,MAAM/8D,EAAIywF,GAA2BjjH,EAAMwhG,YAAcjS,GACzD,OAAK/8D,EAEM+vE,GAAuB/vE,GACzBm5E,GAAuBn5E,EAAE+2E,MAASJ,GAAQ32E,EAAE+2E,aAAQ76B,EAAO,QAAPv7B,EAAA3gB,EAAE+2E,WAAK,IAAAp2D,OAAA,EAAAA,EAAAo2D,0BAAKxc,KAAY,UAALv6D,EAAE+2E,WAAG,IAAAjjB,OAAA,EAAAA,EAAEyG,KAE9Eoc,GAAQ32E,EAAE+2E,KAAkB,QAAVpqE,EAAK,QAALD,EAAA1M,EAAE+2E,WAAG,IAAArqE,OAAA,EAAAA,EAAEqqE,WAAG,IAAApqE,OAAA,EAAAA,EAAE4tD,KAAc,QAAP2yB,EAAAltF,EAAE+2E,WAAK,IAAAmW,OAAA,EAAAA,EAAA3yB,UAJnD,GAQE8kC,GAAyB,CAACj3D,EAAoB+2D,aAElD,OACE/2D,EAAEupD,YAAcR,GAAUoP,qBAAiD,QAA3B5/E,EAAAw+E,EAAKD,4BAAsB,IAAAv+E,OAAA,EAAAA,EAAA21D,sBAA4C,QAAtBp6B,EAAA9T,EAAE82D,4BAAoB,IAAAhjD,OAAA,EAAAA,EAAEo6B,oBAAqBluC,EAAEupD,YAAcwN,EAAKxN,WAI1JiP,GAAgC,CAAC1uB,EAAsB,GAAIxW,IAC/D,CAACA,KAAY8iC,GAAoBtsB,GAAUrhG,QAAOu3D,GAAKA,EAAEm3D,6BAA+B7jC,EAAQjlF,MAY5FgoH,GAAqB/iC,GAA8B,wBAAyBA,EAE5EmlC,GAA0BnlC,IAA+B+iC,GAAkB/iC,GAE3EolC,GAAoC,CAACtzH,EAAcyoG,WAC9D,KAAmB,QAAdt1D,EAAAnzC,EAAM0kG,gBAAQ,IAAAvxD,OAAA,EAAAA,EAAEzvC,QACnB,OAAO,EAET,MAAM6vH,EAAQplB,GAA+B1F,GAAa5gG,KAAI2qB,GAAKA,EAAEu6D,OACrE,OAAO/sF,EAAM0kG,SACVrhG,QAAOu3D,GAAKq2D,GAAkBr2D,IAAM44D,GAAoB54D,KACxD/yD,KAAI+yD,GAAKA,IACTpnB,MAAKonB,IAAI,IAAAznB,EAAAu7B,EAAA4X,EAAApnD,EAAC,OAAAq0F,EAAMn2G,SAAiC,UAAxBw9C,EAAE82D,4BAAsB,IAAAv+E,OAAA,EAAAA,EAAA45C,OAASwmC,EAAMn2G,SAAkD,QAAzC8hB,EAAkC,QAAlConD,EAAsB,QAAtB5X,EAAA9T,EAAE82D,4BAAoB,IAAAhjD,OAAA,EAAAA,EAAE0lC,kBAAU,IAAA9tB,OAAA,EAAAA,EAAEijB,WAAK,IAAArqE,OAAA,EAAAA,EAAA6tD,UAc1G0mC,GAAsBvlC,GAA8B+iC,GAAkB/iC,KAAcA,EAA4B6jC,2BAI7H,IAAY2B,GAIAC,IAJZ,SAAYD,GACVA,EAAA,sBAAA,wBADF,CAAYA,KAAAA,GAEX,KAED,SAAYC,GACVA,EAAA,mBAAA,uBADF,CAAYA,KAAAA,GAEX,KAEM,MAODC,GAAwC,CAAClvB,EAAsB,KAC5DA,EACJrhG,QAAOu3D,GAAKq2D,GAAkBr2D,IAAM44D,GAAoB54D,KACxDjwC,MAAK,CAACkpG,EAAIx4D,IAAQw4D,EAAuB1C,oBAAoBpkC,KAAS1xB,EAAuB81D,oBAAoBpkC,OAGzGymC,GAAuBtlC,GAAsCA,EAAQi2B,YAAcR,GAAUkP,iBAE7FiB,GAA6BvkC,IACnCA,WAIEA,EAAS8yB,sBACT9yB,EAASmzB,iDACTnzB,EAASozB,2CAEZpzB,EAASrB,SACXqB,EAASrB,QAGX6lC,GAAsDxkC,EAASyyB,wCAG3DgS,GAAsB,CAAC,OAAQ,OAAQ,QAAS,UAAW,WAAY,oBAAqB,gBAAiB,iBAAkB,yBAExHD,GAAyDxkC,IACpE,GAAKA,EAIL,IAAK,MAAM9oF,KAAO8oF,EACXykC,GAAoB52G,SAAS3W,WACzB8oF,EAAS9oF,IAKT8rF,GAAwB,CAACmS,EAAsB,KACnDA,EAASrhG,OAAOowH,IAAoB/vH,OA4ChCuwH,GAA2B,CAACC,EAAkC,YACzE,MAEMC,EAAgBhwH,SAAS0P,iBAAiB,aAAe,GACzD6wF,EAAW,GAEjB,IAAK,IAAIjkF,EAAQ,EAAGA,EAAQ0zG,EAAczwH,OAAQ+c,IAAS,CACzD,MAAMytE,EAAUimC,EAAc1zG,GANb,SAOI,QAAjB0yB,EAAA+6C,EAAQn2E,iBAAS,IAAAo7B,OAAA,EAAAA,EAAE0I,WAAW,KAChC6oD,EAAStmF,KAAK8vE,GAIlB,OAAOwW,EAAShhG,OAAS6uF,GAAsB2hC,IAG3CE,GAA2C,KAC/C,MAAMppC,EAAW7mF,SAAS+E,eAAe,mCACrC8hF,GACFwsB,aAAa6c,QAAQ,8CAA+CrpC,EAASpoF,QAAU,OAAS,UAqBvF0xH,GAAoB,CAAC/xH,EAAcK,KAC1CL,IACEK,EACFL,EAAQ6D,aAAa,UAAW,IAEhC7D,EAAQ8O,gBAAgB,aAKjBkjH,GAAiD,CAAC/yB,EAA0BkD,EAAsB,GAAInV,EAAoBilC,KAErI,MAAMlD,EAAOmD,GAAsD/vB,EAAUnV,EAASyyB,sCACtF,GAAIsP,EACF,GAA0B,aAAtBkD,EAEFjlC,EAASyyB,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAU44D,GAAyBhwB,EAAU4sB,GAAMH,sBACnH4C,GAAsDxkC,EAASyyB,0CAC1D,CAEL,MAAM2S,EAA4B1R,GAA2BzhB,EAAajS,GACpEqlC,EAAc/S,GAAe/W,GAAe6pB,IAClDZ,GAAsDa,GACtDtD,EAAKH,oBAAoBnP,qCAAuC4S,EAChEtD,EAAKI,qBAAsB1P,qCAAuC4S,EAElE,MAAMC,EAA4BhT,GAAe8S,GAC7CG,GAAqCD,EAA2BvD,EAAKH,uBACvEG,EAAKH,oBAAoB/c,WAAYziB,QAAUkjC,EAA0BzgB,WAAYziB,QAAW,EAChG2/B,EAAKI,qBAAsBtd,WAAYziB,QAAUkjC,EAA0BzgB,WAAYziB,QAAW,KAM7F8iC,GAAwD,CAAC/vB,EAAsB,GAAIsd,IACvFtd,EACJrhG,OAAO4tH,IACPppH,KAAI+yD,GAAKA,IACTv3D,OAAOmwH,IACP58G,MAAKgkD,GAAKA,EAAEu2D,oBAAoBnP,qCAAsCj1B,OAASi1B,EAAqCj1B,OAG5G2nC,GAA2B,CAAChwB,EAAsB,GAAIxW,IAE/DwW,EACG78F,KAAI+yD,GAAKA,IACTv3D,QAAOu3D,GAAKA,EAAEm3D,6BAA+B7jC,EAAQjlF,KACrD0e,OAAO,GAAG,IAAMumE,EAIV6mC,GAA2B7mC,IACtC,MAAMtzB,EAAIszB,EACV,SACE+iC,GAAkB/iC,IAClBtzB,EAAEupD,YAAcR,GAAU6N,kBAC1B52D,EAAE82D,sBACF92D,EAAEu2D,qBACFv2D,EAAE82D,qBAAqB5xB,OAASllC,EAAEu2D,oBAAoBrxB,OAI7Ck1B,GAA4B9mC,IACvC,MAAMtzB,EAAIszB,EACV,SAAU+iC,GAAkB/iC,IAAYtzB,EAAE82D,sBAAwB92D,EAAEu2D,qBAAuBv2D,EAAE82D,qBAAqB5xB,OAASllC,EAAEu2D,oBAAoBrxB,OAGtIm1B,GAA0B/mC,GAC9B+iC,GAAkB/iC,IAAaA,EAA4Bi2B,YAAcR,GAAUoP,mBAO/E+B,GAAuC,CAACI,EAA4BC,iBAC/E,OAAyC,QAAlCzmD,EAA6B,QAA7Bv7B,EAAA+hF,EAAiB9gB,kBAAY,IAAAjhE,OAAA,EAAAA,EAAAo2D,WAAK,IAAA76B,OAAA,EAAAA,EAAAizC,YAA8C,QAAlCziF,EAA6B,QAA7BonD,EAAA6uC,EAAiB/gB,kBAAY,IAAA9tB,OAAA,EAAAA,EAAAijB,WAAK,IAAArqE,OAAA,EAAAA,EAAAyiF,UAAWuT,EAAiBnoC,KAAQooC,EAAiBpoC,MAOjIqoC,GAA0Cp1H,UAC7C,QAARmzC,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,GAAAA,EAAEjS,OACP79B,QAAOgyH,GAAMA,EAAGlR,YAAcR,GAAU2R,mBACxCjyH,QAAOgyH,GAAMA,EAAGlR,YAAcR,GAAU4R,4BACxCvvH,SAAQqvH,GAAMG,GAA6Bx1H,EAAM0kG,SAAU2wB,EAAGnlC,cAGtDslC,GAA+B,CAAC9wB,EAAsB,GAAIxU,EAAwB,MAC7FA,EAAU7sF,OAAOu4D,SAAS51D,SAAQrB,IAChC,MAAMi2D,EAAIs2D,GAA0BxsB,EAAU//F,EAAEooF,MAChDpoF,EAAEupF,QAAUtzB,EAAIiB,KAAKG,MAAMH,KAAKC,UAAUlB,SAAM3wD,MAIvCwrH,GAA2D,CAACz1H,EAAc01H,EAAqBhxB,EAAqBixB,aAC/H,MAAMC,EAAsB,CAC1BjmC,QAAS,CAACg0B,GAAUkS,kBACpBC,SAAU,CACRnS,GAAU6N,iBACV7N,GAAUkP,iBACVlP,GAAUqP,kBACVrP,GAAUoS,mBACVpS,GAAUkS,iBACVlS,GAAUqS,oBACVrS,GAAUsS,gBACVtS,GAAUuS,6BAId,IAAIC,EAA4B,GAC5Bvc,EAAwB,GAE5B8b,EAAW1vH,SAAQowH,IACjBD,EAAY/3G,QAASg4G,EAAUrS,KAAM,IACrCnK,EAAQx7F,QAAQg4G,EAAUlS,GAAIhjF,WAGhC,MAAMk1F,EAAmB,IAAKp2H,GAE9B41H,EAAoBD,GAAU3vH,SAAQm+G,IACpCgS,EAAcE,GAAeD,EAAWD,EAAahS,GACrDvK,EAAUyc,GAAeD,EAAWxc,EAASuK,MAG/C,MAAMmS,EAAc5xB,EAAS78F,KAAI+yD,GAAKA,EAAE3xD,KAWxC,OATAmtH,EAAUrS,KAAOgE,GAAUqO,EAAWD,GACtCC,EAAUpS,QAAUpK,EACpBwc,EAAUnS,OAAS,GACnBmS,EAAUlS,GAAK,CACbhjF,OAAQ04E,EACRyK,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,SAErB+R,EAAU1xB,SAAyB,QAAdh2B,EAAA1uE,EAAM0kG,gBAAQ,IAAAh2B,OAAA,EAAAA,EAAErrE,QAAQu3D,IAAgB07D,EAAYl5G,SAASw9C,EAAE3xD,MAE7EmtH,SCvdIG,GAAb1vH,cACE6C,KAAAo/F,kBAAoBP,GAAkBmG,qBAGtCoS,mBAAmBrY,EAA0BsY,GAC3C,MAAMyV,EAAiBzV,EACpB19G,QAAQwW,KAAwBA,aAAamqF,MAC7C3gG,QAAQwW,KAAwBA,aAAagsF,MAC7CxiG,QAAQwW,IAAsB,IAAAs5B,EAAA,gBAACA,EAAAt5B,EAAE8lF,gCAAWn9D,WAAW,aACvDn/B,QAAQwW,KAAwBA,aAAawsF,MAC7ChjG,QAAQwW,KAAwBA,aAAamsF,MAC7C3iG,QAAQwW,KAAwBA,aAAayrF,MAchD,OAXG0E,GAASvB,IACRmB,GAAYnB,IAAiBlG,GAAuBkG,IACsD,IAA5G0F,GAA+B1F,GAAaplG,QAAOi9D,GAAKkoC,GAAqCloC,KAAI58D,QAEjG8yH,EAAep4G,KAAKgoF,IAGlBwD,GAAYnB,IAAgBlG,GAAuBkG,IACrD+tB,EAAep4G,KAAK+nF,IAGfqwB,GChBJ,MAUMC,GAAuBhuB,UAClCA,EAAY1b,KAAO03B,GAAQljH,OACT,QAAlB4xC,EAAAs1D,EAAYiC,cAAM,IAAAv3D,GAAAA,EAAEntC,SAAQs6D,GAAKm2D,GAAoBn2D,MAG1Co2D,GAAgC,CAACntB,EAAkB3I,IACvDA,EAAa/4F,KAAI2qB,IACtB,MAAMmkG,EAAqBztB,GAAS12E,GAAKg4E,GAAeh4E,GAAGi7E,cAAcj7E,IAAM,EACzEokG,EAAWpkG,EAAE+2E,IACbqC,EAAW1C,GAAS12E,GAAKs6E,GAAgCt6E,QAAKvoB,EAMpE,GALA2sH,MAAAA,GAAAA,EAAUhR,YAAYpzF,GACtBA,EAAE+2E,IAAMA,EAERA,EAAI+b,SAAS9yF,EAAGo5E,GAEZ1C,GAAS12E,KAAOo5E,EAAU,CAC5B,MAAMpK,EAAcgJ,GAAeh4E,GACnCgvE,EAAYqkB,aAAarzF,GACzBgvE,EAAYikB,oBAAoBjzF,EAAGmkG,GAGrC,OAAOnkG,KAYEqkG,GAAmB,CAACzrB,EAAyB3C,IACpDO,GAAcoC,KAAgBO,GAAuBP,IAAeuG,GAAUvG,GACxEA,EAA2BgE,aAAc/M,OAG5C2G,GAAcoC,IAbE,CAAC3C,GACjBS,GAAST,IAAqF,IAArE+B,GAAe/B,GAAagF,cAAchF,GAYrCquB,CAAiBruB,KAAiBlG,GAAuBkG,IAA2D,IAA1CA,EAAYc,IAAKvhG,QAAQygG,GACpI2C,EAMN,SAA6B3C,GAC3B,OAAOS,GAAST,EAAYc,MAAoF,IAA3E8C,GAAsB5D,EAAYc,KAAgBvhG,QAAQygG,GAN3FsuB,CAAoBtuB,GACpBqC,GAAgBrC,EAAYc,IAAgB5H,OAC5CmJ,GAAeM,GAOd,MAUM4rB,GAAsCrgC,QAChC1sF,IAAV0sF,GAAiC,KAAVA,EAGnBsgC,GAA4B,CAACxuB,EAA0ByuB,GAAS,KAC3E,MAAMhpB,EAAoB,GAa1B,OAXAC,GAA+B1F,GAAaziG,SAAQwsB,IAClD,GAAI0kG,EAAQ,CACV,MAAMrgB,EAAYuJ,GAAkB5tF,GAChCqkF,IACFrkF,EAAEqkF,UAAYA,EACd3I,EAAM9vF,KAAKyjG,GAAervF,GAAG,GAAM,UAGrC07E,EAAM9vF,KAAKyjG,GAAervF,GAAG,GAAM,OAGhC07E,GAGIipB,GAAyC,CAAC31B,EAA0BtR,KAC/E,MAAM96E,EAAqB,GAE3B,OADAgiH,GAA4C51B,EAAatR,GAAWlqF,SAAQwsB,GAAKpd,EAAOgJ,QAAQ4kG,GAAaxwF,GAAG,MACzGpd,GAGHgiH,GAA8C,CAAC51B,EAA0BtR,KAC7E,MAAMroF,EAAM,IAAIpD,IAQhB,OAPAyrF,EAAUlqF,SAAQupF,UAChB,MAAM/8D,EAAIywF,GAA2BzhB,EAAajS,KAAiC,QAAnBp8C,EAAAo8C,EAAS6kB,kBAAU,IAAAjhE,OAAA,EAAAA,EAAEo2D,MAAO0Z,GAA2BzhB,EAAajS,EAAS6kB,WAAW7K,KACxJ,GAAI/2E,GAAK+vE,GAAuB/vE,GAAI,CAClC,MAAM6kG,EAAKzpB,GAA8Bp7E,GACzC3qB,EAAIlC,IAAI0xH,EAAGpuH,GAAIouH,OAGZ31H,MAAMqS,KAAKlM,EAAIs1B,WC5FXm6F,GAA+B,CAACz3B,EAAoBI,KAC/D,MAAM2Z,EAAU,IAAI2d,GAUpB,OATA3d,EAAQ4d,cAAc3V,GAAegV,GAAiBh3B,EAAOI,KAC7D2Z,EAAQrzG,IAAIo9G,GAAU6N,iBAAkByF,GAA0Bh3B,IAClE2Z,EAAQrzG,IAAIo9G,GAAUoS,mBzDmQftS,GyDnQkExjB,GzDmQxBp4F,KAAI2qB,IACnDA,EAAEqkF,UAAYuJ,GAAkB5tF,GACrBqvF,GAAervF,OyDpQ5BonF,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBtS,GAAiCtjB,GAAM,IAE3EsC,GAAuB1C,IACzB+Z,EAAQrzG,IAAIo9G,GAAUuS,2BAA4B,CAACrU,GAAehiB,KAG7D+Z,GAGI6d,GAAkChvB,IAC7C,MAAMmR,EAAU,IAAI2d,GAEdhoC,EAAWsyB,GAAepZ,GAMhC,OALAlZ,EAASsnB,UAAYuJ,GAAkB3X,GAEvCmR,EAAQrzG,IAAIo9G,GAAUoP,mBAAoB,CAACxjC,IAC3CqqB,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBtS,GAAiC9a,IAElEmR,GAGI8d,GAAmB,CAACjvB,EAA0B5iG,KACzD4iG,EAAYoO,UAAYuJ,GAAkB3X,GAC1C,MAAMlZ,EAAWsyB,GAAepZ,GAE1BvY,EAAYrqF,EAAW,CAACA,GAAY,GAG1C,OAFAqqF,EAAU9xE,KAAKmxE,GAER,CACL,CACE40B,UAAWR,GAAUoP,mBACrB7iC,UAAWA,GAEb,CACEi0B,UAAWR,GAAUkS,iBACrB3lC,UAAWqzB,GAAiC9a,GAAa,MAoClDkvB,GAAuB,CAAC33H,EAAcyoG,KACjD,MAAMjH,EAAcxhG,EAAMwhG,YACpBo2B,EAAY5U,GAAava,GAAa,GAAO,GAC7CovB,EAA0BpU,GAA6Bhb,GACvDqvB,EAAsBjrB,GAAuBpE,GAE7CsvB,EAAyBx1B,GAAuBkG,GAEhDc,EAAMd,EAAYc,IACxBA,EAAIqc,YAAYnd,GAChBc,EAAIuc,iBAEAna,GAAuBpC,IAA8B,IAAtBA,EAAImB,OAAOhnG,SAC5C6lG,EAAIA,IAAKqB,gBAAa3gG,GAGxB,MAAM+tH,EACJF,IAAwBpqB,GAAcoqB,IAAwBnqB,GAAiBmqB,IAAwBA,EAAsB3uB,GAAQI,GAAQA,EAAKA,IAAOA,EAExH,IAA/B/H,EAAY0J,QAAQxnG,QACtBm0H,EAAwBz5G,KAAKojF,EAAY0J,QAAQ,IAGnD,MAAM0O,EAtDmC,EAACqe,EAAgCJ,EAAwCK,KAClH,MAAMte,EAAU,IAAI2d,GASpB,OAPA3d,EAAQrzG,IAAIo9G,GAAUkP,iBAAkBoF,GACxCre,EAAQrzG,IACNo9G,GAAUoS,mBACV8B,EAAwBhwH,KAAI2qB,GAAKqvF,GAAervF,MAElDonF,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBqC,GAEjCte,GA4CSue,CAA4BP,EAAWC,EAAyBtU,GAAiCyU,GAAqB,IAEtI,GAAID,IACFne,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBtS,GAAiCha,GAAK,IAE1EuuB,GAAuBvuB,GACzB,IACE,MAAM6uB,EAA2BN,IAAqC,UAAbvuB,EAAIzJ,KAAmByJ,EAAIA,IAAOA,GAC3FqQ,EAAQrzG,IAAIo9G,GAAUuS,2BAA4BlT,GAAaoV,IAC/D,MAAOl4F,GACP05E,EAAQrzG,IAAIo9G,GAAUuS,2BAA4B,IAKxD,OAAOtc,EAAQ7mE,SAGJslF,GAAgC,CAAC72B,EAA0B3B,KACtE,IAAIz4D,EAAMy4D,EAAM0J,IAAKvhG,QAAQ63F,GAC7B,MAAMy4B,EAA+Bz4B,EAAM0J,IAAKmB,OAAOrnG,QAAO,CAACmvB,EAAG5uB,IAAMA,EAAIwjC,GAAOwiE,GAAYp3E,KACzF+lG,EAAc14B,EAAM0J,IACpBivB,EAAW3W,GAAehiB,GAAO,GAAO,GACxC44B,EAAgB3rB,GAAgCjN,GAEhDuR,E1E8yByB,CAAC5+E,IAChC,MAAMouE,EAAeuN,GAA+B3D,GAAeh4E,IAC7Dk/E,EAAW9Q,EAAa54F,QAAQwqB,GACtC,OAAOouE,EAAav9F,QAAO,CAACmvB,EAAG/R,IAAUA,EAAQixF,GAAY9H,GAAYp3E,KAAOw2E,GAAcx2E,KAAIsZ,UAAU,I0EjzBrFulE,CAAkBxR,GAEnC0J,GAAM+uB,MAAAA,OAAA,EAAAA,EAA8B50H,QAAS,EAAI40H,EAA6BxsF,UAAU,GAAK+zD,EAAM0J,IAEnGuuB,GAAsBQ,MAAAA,OAA4B,EAA5BA,EAA8B50H,QAAS,EAAI40H,EAA6BxsF,UAAU,GAAK1E,EAAM,EAAI0jE,GAAevB,EAAImB,OAAOtjE,EAAM,IAAMmiE,EAE7J6B,EAAapC,GAAc8uB,IAAyB/sB,GAAUxB,IAAQA,EAAImB,OAAO,GAAGzhG,KAAO42F,EAAM52F,GAAMsgG,EAAMuB,GAAegtB,GAE5HY,EAAuC,GAC7C,IAAIC,EAAepvB,EAAImB,OAAOhnG,OAC9Bm8F,EAAM6K,OAAO1kG,SAAQwsB,YACnB,IAAIomG,EAsBJ,OApBEA,EADE1vB,GAAS12E,GACD4+E,MAAAA,EAAAA,EAAkB5P,GACM,QAAzBruD,EAAAo2D,EAAIrI,6BAAqB,IAAA/tD,OAAA,EAAAA,EAAE/1B,SAASoV,EAAEstE,OACrCyJ,GACwC,QAAzC76B,EAAAopD,EAAoB52B,6BAAqB,IAAAxyB,OAAA,EAAAA,EAAEtxD,SAASoV,EAAEstE,OACrDg4B,EAEAe,GAAgCh5B,EAAM0J,IAAM/2E,EAAEstE,KAAM,IAGhEttE,EAAE+2E,IAAMqvB,EACR/4B,EAAM+lB,YAAYpzF,IAEd8lG,MAAAA,OAA4B,EAA5BA,EAA8B50H,QAAS,EAEzCk1H,EAASpT,mBAAmBhzF,EAAGmmG,KAE/BC,EAASpT,mBAAmBhzF,EAAG4U,KAGjCsxF,EAAyBt6G,KAAKyjG,GAAervF,IACtCA,KAGTqtE,EAAM0J,IAAKqc,YAAY/lB,GACvB0J,MAAAA,GAAAA,EAAKuc,iBACLyS,EAAazS,iBAEb,MAAMgT,EAAcvvB,EAAKmB,OACtBrnG,QAAO,CAACi9D,EAAG7/C,IAAUA,GAAS2mB,IAAQwiE,GAAYtpC,IAAMwtC,GAA6BxtC,MACrFz4D,KAAI2qB,GAAKqvF,GAAervF,KACxB8qC,OAEGy7D,GACJR,MAAAA,OAAW,EAAXA,EAAa7tB,OACVrnG,QAAOi9D,GAAKA,EAAEuoC,SAASC,oBAAsBP,GAAkBG,wBAA0BpoC,EAAEuoC,SAASC,oBAAsBP,GAAkBqG,mBAC5I/mG,KAAI2qB,GAAKqvF,GAAervF,OAAO,GAEhCimG,GAA2D,IAA1CxtB,GAAgBwtB,GAAe/0H,QAClDo1H,EAAYjhG,QAAQgqF,GAAe4W,IAGrC,MAAM7e,EAAU,IAAI2d,GAMpB,OALA3d,EAAQ4d,cAAcxuB,GAAcoC,IAAeO,GAAuBP,GAA6ByW,GAAezW,EAAW7B,KAAQsY,GAAezW,IAExJwO,EAAQrzG,IAAIo9G,GAAUkP,iBAAkB,CAAC2F,IACzC5e,EAAQrzG,IAAIo9G,GAAUuS,2BAA4BwC,GAClD9e,EAAQrzG,IAAIo9G,GAAUoS,mBAAoB,IAAI+C,KAAgBC,IACvDnf,EAAQ7mE,SAGJ8lF,GAAkC,CAACpwB,EAA0BuwB,EAAmBC,WAC3F,GAAKxwB,EAGL,OAA0C,UAAnCA,EAAYvH,6BAAuB,IAAA/tD,OAAA,EAAAA,EAAA/1B,SAAS47G,IACb,IAAlCC,EAAuBv1H,QAAgBu1H,EAAuB77G,SAASqrF,GACrEA,OACAx+F,EACF4uH,GAAgCpwB,EAAYc,IAAMyvB,EAAWC,IActDC,GAA0BzwB,IACrC,MAAMrzF,EAAuB,GAEvB+jH,EAAkB3mG,IACtB,MAAM4mG,EAA2BvX,GAAervF,GAfnC,CAACA,0BAChBA,EAAE8lE,OAA+C,QAAtC5pB,EAA8B,UAA9Bl8C,EAAEq2E,SAASgY,2BAAmB,IAAA1tE,OAAA,EAAAA,EAAEmlD,cAAM,IAAA5pB,EAAAA,EAAI,GACrDl8C,EAAEyjF,OAA+C,QAAtC/2E,EAA8B,UAA9B1M,EAAEq2E,SAASgY,2BAAmB,IAAAv6B,OAAA,EAAAA,EAAE2vB,cAAM,IAAA/2E,EAAAA,EAAI,GACrD1M,EAAEvpB,GAA4C,QAAvCy2G,EAA8B,UAA9BltF,EAAEq2E,SAASgY,2BAAmB,IAAA1hF,OAAA,EAAAA,EAAEwiF,eAAO,IAAAjC,EAAAA,EAAI,GAClDltF,EAAEmkE,MAAQnkE,EAAEq2E,SAASC,oBAAsBP,GAAkBI,uBAA4E,QAAnDqX,EAA0C,QAA1CF,EAA8B,QAA9BF,EAAAptF,EAAEq2E,SAASgY,2BAAmB,IAAAjB,OAAA,EAAAA,EAAEpd,gBAAU,IAAAsd,OAAA,EAAAA,EAAAnpB,aAAS,IAAAqpB,EAAAA,EAAA,GAAKxtF,EAAEmkE,MAChJnkE,EAAEq2E,SAAW,IAAI0tB,GACbrtB,GAAS12E,KACVA,EAAamvE,MAAOkH,SAAW,IAAI0tB,KASpC8C,CAAS7mG,GACTpd,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUmP,mBAAoB5iC,UAAW,CAACkpC,EAA0BvX,GAAervF,OAG9G,GAAIi2E,EAAYI,SAASC,oBAAsBP,GAAkBK,sBAAuB,CACtF,MAAM0wB,EAAanrB,GAA+B1F,GAAaplG,QAAOi9D,GAAKA,EAAEuoC,SAASC,oBAAsBP,GAAkBK,wBAC9H0wB,EAAWtzH,QAAQmzH,GAEnB,MAAMI,EAAcC,GAA2B/wB,GAC3C8wB,GACFnkH,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUkS,iBAAkB3lC,UAAW,CAACqpC,UAGnEJ,EAAe1wB,GAIjB,OADArzF,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUqS,oBAAqB9lC,UAAW,CAAC2xB,GAAepZ,GAAa,MACzFrzF,GAqBIokH,GAA8B/wB,IACzC,MAAMgxB,EAAgBhxB,EAAYc,MAAQK,GAAYnB,EAAYc,KAAQJ,GAAQV,EAAYc,KAAOd,EAAYc,IAAIA,IAAMd,EAAYc,IAAO,KAE9I,OAAIkwB,GACFA,EAAc5iB,UAAYuJ,GAAkBqZ,GACrC5X,GAAe4X,GAAe,IAGhC,MAGIC,GAAY,CAAC9f,EAAuBuK,IACxCvK,MAAAA,OAAO,EAAPA,EAASv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcA,IAAW,GAqG9CwV,GAAmC/f,IAC9C,MAAM/xG,EAAM,IAAIpD,IAEhB,OADAm1G,EAAQv2G,QAAOo2F,GAAM,CAACkqB,GAAUkP,iBAAkBlP,GAAU6N,kBAAkBp0G,SAASq8E,EAAG0qB,aAAYn+G,SAAQyzF,IAAK,IAAAtmD,EAAC,OAAY,QAAZA,EAAAsmD,EAAGvJ,iBAAS,IAAA/8C,OAAA,EAAAA,EAAEntC,SAAQ07D,GAAM75D,EAAIlC,IAAI+7D,EAAGqrB,KAAOrrB,QAC3JhgE,MAAMqS,KAAKlM,EAAIs1B,WAGXk5F,GAAiB,CAACr2H,EAAc45G,EAAuBuK,KAClE,MAAM/uG,EAASwkG,EAAQv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcA,IAErD,GAAIA,IAAcR,GAAUkP,iBAAkB,CAC5C,MAAM3iC,EAAY0pB,EACfv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcR,GAAUkP,mBACxChrH,KAAI4xF,GAAMA,EAAGvJ,WAAa,KAC1B5yB,OACH4yB,EAAUxsF,QAAU0R,EAAOgJ,KAAK,CAAE+lG,UAAWA,EAAWj0B,UAAAA,QACnD,CACL,MAAMA,EAAwB,GACxB0pC,EAA4C,IAAIn1H,IAEtDm1G,EACGv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcA,IAC9Bn+G,SAAQyzF,UACK,QAAZtmD,EAAAsmD,EAAGvJ,iBAAS,IAAA/8C,GAAAA,EAAEntC,SAAQrB,IACpB,MAAMi2D,EAAI,CAAC+oD,GAAU6N,iBAAkB7N,GAAUsS,gBAAiBtS,GAAUuS,2BAA4BvS,GAAUoS,oBAAoB34G,SAAS+mG,GAC3I+M,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,WAC5C9iF,EACJ,GAAI2wD,GAAK44D,GAAoB54D,GAC3Bs1B,EAAU9xE,KAAKzZ,QACV,IAAKi1H,EAAgB3qE,IAAItqD,EAAEooF,MAAQ,CACxC,MAAM0b,EAAcwa,GAA2BjjH,EAAMwhG,YAAc78F,GAC/D8jG,IACFmxB,EAAgBj0H,IAAIhB,EAAEooF,KAAO0b,GAC7BvY,EAAU9xE,KAAKwkG,GAAuBna,EAAa0b,IAAcR,GAAU6N,2BAMrFthC,EAAUxsF,QAAU0R,EAAOgJ,KAAK,CAAE+lG,UAAWA,EAAWj0B,UAAAA,IAE1D,OAAO96E,SCpbImiH,GAGX1wH,cAFA6C,KAAOkwG,QAAiB,GAGtBlwG,KAAKkwG,QDsTA,CACL,CACEuK,UAAWR,GAAU6N,iBACrBpmB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUkP,iBACrBznB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUoP,mBACrB3nB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUoS,mBACrB3qB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUmP,mBACrB1nB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUqP,kBACrB5nB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUkS,iBACrBzqB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUqS,oBACrB5qB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUsS,gBACrB7qB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUuS,2BACrB9qB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUkW,qBACrBzuB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAUmW,cACrB1uB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAEb,CACEi0B,UAAWR,GAAU2R,iBACrBlqB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,KChYf3pF,IAAI49G,EAAsBj0B,GACxB,MAAM6pC,EAASrwH,KAAKlE,IAAI2+G,GACxBj0B,EAAUlqF,SAAQ07D,IAAM,IAAAvuB,EDySC6mF,EAAyBzqC,ECzS1B,ODyS0BA,ECzSH7tB,GD2S/Cs4D,OAFyBA,ECzScD,QD2S5B,EAAXC,EAAa9pC,UAAWroF,KAAI4xF,IAAK,IAAAtmD,EAAAu7B,EAAC,OAAA+qB,EAAG1M,OAASwC,EAAUxC,MAAQ0M,EAAGwc,SAAW1mB,EAAU0mB,SAAqB,QAAX9iE,EAAAsmD,EAAG+I,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,kBAAUjoB,EAAA6gB,EAASiT,+BAAU7L,UAAOtzF,QAAOhD,GAASA,IAChKqD,QAAS,GC5S2D,QAAlByvC,EAAA4mF,EAAO7pC,iBAAW,IAAA/8C,OAAWlpC,EAAXkpC,EAAA/0B,KAAKsjD,MAG9E3uB,QACE,OAAOrpC,KAAKkwG,QAAQv2G,QAAOo2F,GAAMA,EAAGvJ,WAAauJ,EAAGvJ,UAAUxsF,OAAS,IAGzE8B,IAAI2+G,GACF,OAAOz6G,KAAKkwG,QAAQv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcA,IAAW,GAG/DqT,cAAcpsB,GACZ1hG,KAAKlE,IAAIm+G,GAAU6N,kBAAkBpmB,WAAaA,GCR/C,MAyED6uB,GAAgCp6B,UACpC,GAAI1rF,SAAS0rF,EAAMvH,QAAW,EAAG,CAC/B,MAAMsT,EAAWiB,GAAuBhN,GAClCI,EAAOspB,GAAgB1pB,EAAM0J,IAAM1I,GAAgBkB,QAAQjC,KAAM8L,EAAUA,OAAW3hG,EAAY,GACxGg2F,EAAK4I,SAAW,IAAIogB,GACT,QAAX91E,EAAA0sD,EAAM0J,WAAK,IAAAp2D,GAAAA,EAAAqyE,mBAAmBvlB,EAAM,KCzD3Bi6B,GAAmB,CAACl6H,EAAY6jH,uDAC3C,IAAIsW,GAAkB,EAEtB,MAAMC,EAAWnX,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GACvEw6B,EAAyBD,GAAYlxB,GAASkxB,IAAavW,EAAO5jB,KAAKH,OAASe,GAAgBgB,OAAO/B,KAAQs6B,EAAwBz4B,WAAQ13F,EAC/I41F,EAA2B,UAAnBgkB,EAAOlyB,SAAuB0oC,EAAyBA,EAAyBD,EACxFE,EAAiBz6B,GAA4B,UAAnBgkB,EAAOlyB,SAAuBoZ,GAAUlL,GAASA,EAAM6K,OAAO7K,EAAM6K,OAAOhnG,OAAS,QAAkBuG,EAEtI,QAAcA,IAAV41F,GAAwBA,EAAMgJ,SAASC,oBAAsBP,GAAkBK,uBAAyB0N,GAA2BzW,GAErI,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,GACE6/F,EAAMgJ,SAASC,oBAAsBP,GAAkBqG,kBACvD/O,EAAMgJ,SAASC,oBAAsBP,GAAkBG,wBACvD4N,GAA2BzW,KAC1Bm3B,GAAwD,QAArBtoD,EAAW,QAAXv7B,EAAA0wE,EAAO5jB,YAAI,IAAA9sD,OAAA,EAAAA,EAAEqvD,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,OAC3D,CACA,GACEkJ,EAAM8K,iBACU,QAAhBrkB,EAAAuZ,EAAM+K,kBAAU,IAAAtkB,OAAA,EAAAA,EAAEokB,SAClBsD,GAAWnO,EAAM+K,WAAWF,OAAO,MAClCf,GAAU9J,EAAM+K,WAAWF,OAAO,KACG,MAAtC7K,EAAM+K,WAAWF,OAAO,GAAGpS,QACR,UAAnBurB,EAAOlyB,SACPkO,EAAMC,OAAS+jB,EAAO5jB,KAAKH,KAG3B,OADA9/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAET,QACqBiK,IAAnB45G,EAAOlyB,SACP4Q,GAAuB1C,IACvBkL,GAAUlL,IACVmO,GAAWnO,EAAM6K,OAAO,MACvBf,GAAU9J,EAAM6K,OAAO,MACvBtB,GAAYvJ,EAAM6K,OAAO,KACC,MAA3B7K,EAAM6K,OAAO,GAAGpS,OAGhB,OADAt4F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAIX,IAAIm+B,EAC4B,IAA9B0hE,EAAM0J,IAAKvhG,QAAQ63F,IACdgkB,EAAOlyB,SAAWkO,EAAM8K,eACvB9K,EACAyJ,GAAczJ,IAAWiO,GAA6BjO,GACtDA,EAAM0J,IAAKA,IACX1J,EAAM0J,IACR1J,EAAM0J,IAAKmB,OAAO7K,EAAM0J,IAAKvhG,QAAQ63F,GAAS,YAEhD3gE,EAAA2gE,EAAMgJ,+BAAUC,qBAAsBP,GAAkBmG,sBAAwBsoB,GAAwD,QAArBtX,UAAAvgF,EAAA0kF,EAAO5jB,2BAAMuC,gBAAQ,IAAAkd,OAAA,EAAAA,EAAE/oB,SAC5IktB,EAAOhkB,MAAM2C,SAAS7L,MAAQkJ,EAAMlJ,MACpCktB,EAAO5jB,KAAKuC,SAAS7L,WAAQ1sF,GAG/B,MAAMswH,EAAqB7sB,GAAc7N,IAAU8N,GAAiB9N,GAE9D26B,EAAwB5X,GAAuB/iB,GAE/Co4B,EAAiC,GASvC,GAPApV,GAAgBoV,EAAoBp4B,GJjFJ,EAACA,EAAoBgkB,EAAa7jH,2BAClE,GAAIA,IAAiB,QAARmzC,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,OAAA,EAAAA,EAAEjS,QAAQ,CAC7B,MAAMu4D,EAAKigC,GAAU15H,EAAMkkH,GAAGhjF,OAAQyiF,GAAUoP,oBAChD,GAAIt5B,GAAMA,EAAGvJ,YAAsC,QAAzB5J,EAAe,QAAf5X,EAAA+qB,EAAGvJ,UAAU,UAAE,IAAAxhB,OAAA,EAAAA,EAAE8zB,gBAAQ,IAAAlc,OAAA,EAAAA,EAAEqQ,SAAUkJ,EAAMlJ,MACnE,OAAO,EAGX,MAAwB,KAAhBkJ,EAAMlJ,OAAkD,MAAV,QAAxBx3D,EAAc,QAAdD,EAAA2kF,EAAOhkB,aAAO,IAAA3gE,OAAA,EAAAA,EAAAsjE,gBAAU,IAAArjE,OAAA,EAAAA,EAAAw3D,SAAwC,QAAtBipB,EAAY,QAAZF,EAAAmE,EAAOhkB,aAAK,IAAA6f,OAAA,EAAAA,EAAEld,gBAAQ,IAAAod,OAAA,EAAAA,EAAEjpB,QAAsE,IAA7DkJ,EAAMlJ,MAAMqyB,cAAoC,QAAtBhJ,EAAY,UAAZ6D,EAAOhkB,aAAK,IAAAigB,OAAA,EAAAA,EAAEtd,gBAAQ,IAAAwd,OAAA,EAAAA,EAAErpB,QI4EvJ8jC,CAAmB56B,EAAOgkB,EAAQ7jH,KACpC6/F,EAAMlJ,MAAS4L,GAAuB1C,GAAwC8W,GAAsD,QAAhCqJ,EAAuB,UAAvB6D,EAAOhkB,MAAM2C,gBAAU,IAAAsd,OAAA,EAAAA,EAAAnpB,aAAS,IAAAqpB,EAAAA,EAAA,IAAhE,QAArBJ,EAAAiE,EAAOhkB,MAAM2C,gBAAQ,IAAAod,OAAA,EAAAA,EAAEjpB,MACtEwjC,GAAkB,GJ1BW,EAACO,EAA2B7W,eAC3D,MAAMpb,EAAcU,GAAQuxB,GAAgBA,EAAanxB,IAAOmxB,EAEhE,OACEzxB,GAAsBR,IACrB6N,GAA2B7N,KAAiB2f,GAAgB3f,EAAanG,MACnD,QAAtBnvD,EAAAs1D,EAAYI,gBAAU,IAAA11D,OAAA,EAAAA,EAAA21D,qBAAsBP,GAAkBmG,sBAAwBsoB,GAAwD,QAArB1wC,EAAW,QAAX5X,EAAAm1C,EAAO5jB,YAAI,IAAAvxB,OAAA,EAAAA,EAAE8zB,gBAAQ,IAAAlc,OAAA,EAAAA,EAAEqQ,QIuB/IgkC,CAAkB96B,EAAOgkB,GAC3B,OAAOmE,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,qDAGpF,IAAIM,EAEJ,GAAI4jB,EAAOlyB,SAA8B,UAAnBkyB,EAAOlyB,UAAwBqY,GAASnK,IAC5D,GAAIA,EAAMC,OAAS+jB,EAAO5jB,KAAKH,KAC7BG,EACqB,UAAnB4jB,EAAOlyB,QACH43B,GAAgB1pB,EAAM0J,IAAMsa,EAAO5jB,KAAKH,UAAM71F,EA1FnC,EAAC41F,EAAoBlO,KAC1C,MAAMkpC,EAAeh7B,EAAM0J,IAAKvhG,QAAQ63F,GACxC,MAAgB,UAAZlO,EACKkpC,EAEFA,IAAiBh7B,EAAM0J,IAAKmB,OAAOhnG,OAAS,OAAIuG,EAAY4wH,EAAe,GAqFfC,CAAej7B,EAAOgkB,EAAOlyB,UACtF43B,GAAgB1pB,EAAM0J,IAAMsa,EAAO5jB,KAAKH,KAAMD,QAC/C,GAAI+J,GAAY/J,IAAUgkB,EAAO5jB,KAAKH,OAASe,GAAgBY,OAAO3B,KAC3E,GAAuB,UAAnB+jB,EAAOlyB,QAAqB,CAC9B,MAAMia,EAAWJ,GAA2C3L,GAC5D1hE,EAAMytE,EACN,MAAMmvB,EAAanvB,EAAwBhC,GAAYgC,GAAaA,EAAW1C,GAAS0C,GAAYA,EAASrC,IAAO+B,GAAUM,GAAUrC,IAA1G1J,EAAM0J,IAC9B5X,EAAUia,GAAYhC,GAAYgC,GAAY,OAAI3hG,EAClDmhG,GAAcQ,GAAYhC,GAAYgC,QAAY3hG,EAAYi/F,GAAS0C,GAAYA,EAAWN,GAAUM,GAC9G3L,EAAOspB,GAAgBwR,EAAWlX,EAAO5jB,KAAKH,KAAMsL,EAAYzZ,QAEhEsO,EAAOspB,GAAgB1pB,EAAOgkB,EAAO5jB,KAAKH,UAAM71F,EAAW,QAI/Dg2F,EADSJ,EAAM8K,eACRwjB,GAA+BttB,GAAgBY,OAAO3B,KAAMD,EAAM+K,gBAAa3gG,EAAW,GACxF+/F,GAASnK,IAAUgkB,EAAO5jB,KAAKH,KACjCypB,GAAgBvpH,EAAMwhG,YAAaqiB,EAAO5jB,KAAKH,UAAM71F,EAAW,GAC9D45G,EAAO5jB,KAAKH,MAAQD,EAAMC,OAAS+jB,EAAO5jB,KAAKH,KACjDypB,GAAgB1pB,EAAOgkB,EAAO5jB,KAAKH,KAAMw6B,GAEzCpM,GAAmBruB,EAAOgkB,GAYnC,GATI/V,GAA6B7N,KAE/BA,EAAKmI,cAAgB,MAGnB0F,GAA6B7N,KAC/BA,EAAKmI,cAAgB,eAIrBmmB,EAAA1uB,EAAMgJ,+BAAUC,qBAAsBP,GAAkBmG,+BACxD4f,EAAAzuB,EAAMgJ,+BAAUC,qBAAsBP,GAAkBI,iCACxD+lB,EAAA7uB,EAAMgJ,+BAAUC,qBAAsBP,GAAkBK,uBACxD/I,EAAMgJ,oBAAoBogB,GAC1B,CACAhpB,EAAK4I,SAAW,IAAIogB,GAChB/f,GAASjJ,KACVA,EAAgB0B,MAAOkH,SAAW,IAAIogB,IAExChpB,EAAK4I,SAAmCwO,WAAar3G,EAAM8jH,KAC5D,MAAMva,EAAMtJ,EAAKsJ,IACboC,GAAuBpC,IAA8B,IAAtBA,EAAImB,OAAOhnG,SAC5C6lG,EAAIV,SAAW,IAAIogB,IAInB+N,GAAwD,QAArBxI,EAAW,QAAXC,EAAA5K,EAAO5jB,YAAI,IAAAwuB,OAAA,EAAAA,EAAEjsB,gBAAQ,IAAAgsB,OAAA,EAAAA,EAAE73B,QAAUkJ,EAAMC,OAASG,EAAKH,MAAQiL,GAAUlL,IAC5G2pB,GAAY3pB,EAAOI,GAGjBsC,GAAuBtC,KACzBA,EAAK8lB,aAAa9lB,GAClBA,EAAKh3F,GAAKo4G,GAAQphB,WAClB2uB,EAAA3uB,EAAK4W,0BAAWz4F,KAAK,CAAE0hF,KAAMsW,GAAac,QAASvX,UAAW,mDAG5D4C,GAAuBtC,IAASA,EAAK4I,SAASC,oBAAsBP,GAAkBG,yBACvFzI,EAAK4I,SAAmC3D,sBAAwB4I,GAA6B7N,KAAU8P,GAAmC9P,EAAKsJ,MAGlJtJ,EAAKsJ,IAAKuc,kBAES,QAAf6I,EAAA1uB,EAAK4I,gBAAU,IAAA8lB,OAAA,EAAAA,EAAA7lB,qBAAsBP,GAAkBG,yBACzDzI,EAAKh3F,GAAKo4G,GAAQphB,IAGpB,MAAM2Z,EACJiK,EAAOlyB,SAA8B,UAAnBkyB,EAAOlyB,QACrB2lC,GAA6Bn5F,EAAM8hE,GAChB,UAAnB4jB,EAAOlyB,SAAuB2oC,EAC9BhD,GAA6BgD,EAAgBr6B,GAC1B,UAAnB4jB,EAAOlyB,UAAwB2oC,GAAkBnxB,GAAQtJ,GACzDy3B,GAA6Bz3B,EAAM0J,IAAMtJ,GACzCq3B,GAA6Bz3B,EAAOI,GAEpC+6B,EAA0BpY,GAAuB/iB,GAMvD,GAJIm3B,GAAwD,QAArBlI,EAAW,QAAX1vF,EAAAykF,EAAO5jB,YAAI,IAAA7gE,OAAA,EAAAA,EAAEojE,gBAAQ,IAAAssB,OAAA,EAAAA,EAAEn4B,QAAUkJ,EAAMC,OAASG,EAAKH,MAAQm4B,GAAsBA,EAAmBv0H,OAAS,GACpJk2G,EAAQrzG,IAAIo9G,GAAUkP,iBAAkBoF,GAGtCruB,GAAY3J,IAA0C,IAAjCgL,GAAgBhL,GAAMv8F,OAAc,CAC3D,MAAM6xG,EAAQtK,GAAgBhL,GAAM58F,QAAOwW,GAAKA,IAAMomF,IACtD2Z,EAAQrzG,IAAIo9G,GAAUoP,mBAAoB,CAAClR,GAAetM,EAAM,MAyBlE,OAtBI4kB,GAAmBnD,GAA0D,UAAV,QAAbnI,EAAAhL,EAAO5jB,YAAM,IAAA4uB,OAAA,EAAAA,EAAArsB,gBAAU,IAAAusB,OAAA,EAAAA,EAAAp4B,SAC/EijB,EAAQrzG,IAAIo9G,GAAUoP,mBAAoB,CAACyH,EAAuBQ,KAGhEb,GAAmBnD,GAAwD,QAArBhI,UAAAC,EAAApL,EAAO5jB,2BAAMuC,gBAAQ,IAAAwsB,OAAA,EAAAA,EAAEr4B,QAAUgT,GAAU9J,KACnG+Z,EAAQrzG,IAAIo9G,GAAUkS,iBAAkB,CAACmF,KAGvCttB,GAAc7N,IAAU06B,KAC1B3gB,EAAQrzG,IAAIo9G,GAAUkS,iBAAkB,CAACmF,IACzCphB,EAAQrzG,IAAIo9G,GAAUoS,mBAAoB,CAACiF,KAGzCnX,EAAOlyB,SAA8B,UAAnBkyB,EAAOlyB,SAC3BioB,EAAQrzG,IACNo9G,GAAUoS,mBACVtS,GAA6BxjB,GAAMp4F,KAAI2qB,GAAKqvF,GAAervF,MAI/DonF,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAe5hB,GAAO4hB,GAAehiB,KAEtE,CACL2B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GAERC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAAS4W,EAAAj7H,EAAMkkH,yBAAIG,WCjNZ6W,GAAiB,CAACl7H,EAAY6jH,mBACzC,IAAIhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAExE,QAAc51F,IAAV41F,EACF,OAAO7/F,EAGT,IAAKkpG,GAASrJ,KAAW+J,GAAY/J,KAAWmK,GAASnK,GACvD,OAAOmoB,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,4EAGrF,IAAKqJ,GAAcnJ,IAAUmK,GAASnK,KAAmC,UAAxBgkB,EAAO5jB,KAAKtO,QAC3D,OAAOq2B,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,kEAOrF,MAAMw7B,EAAgBt6B,GAAgBgjB,EAAO5jB,KAAKH,KAAKx/F,eAAeq/F,UAEtE,IAAKkkB,EAAOuX,iBAA2C,UAAxBvX,EAAO5jB,KAAKtO,UAAwBuf,GAA6CrR,GAAOziF,SAASymG,EAAO5jB,KAAKH,MAC1I,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,wCAAoDt7B,EAAMoW,YAIjH,IAAK4N,EAAOuX,iBAA2C,WAAxBvX,EAAO5jB,KAAKtO,UAAyB2e,GAA8CzQ,GAAOziF,SAASymG,EAAO5jB,KAAKH,MAC5I,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,sCAAkDt7B,EAAMoW,YAI3GjM,GAASnK,KACXA,EAAQ7/F,EAAMwhG,aAGhB,MAAM65B,EAAiCxX,EAAO5jB,KAAKtO,QAC7C2pC,EAAyCzX,EAAO5jB,KAAKD,0BAErD6N,EAAkBtL,GAAuB1C,GAAS+N,GAA8B/N,QAAS51F,EACzFsxH,EAAwB1tB,EAAkBM,GAA+BN,GAAmB,GAC5F2tB,EAA0BrtB,GAA+BnuG,EAAMwhG,aAErE,GAAIe,GAAuB1C,GAAQ,CACjC,GAAIiO,GAA6BjO,IAAUy7B,GAA4D,UAA3BD,KAAiE,QAA1BloF,EAAA0sD,EAAMoB,0BAAoB,IAAA9tD,OAAA,EAAAA,EAAA/1B,SAASymG,EAAO5jB,KAAKH,OAChK,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,kEAA8Et7B,EAAMoW,YAI3I,IAAKnI,GAA6BjO,IAAUy7B,IAAkCC,EAAsB/nF,MAAKhhB,IAAI,IAAA2gB,EAAC,OAAuB,QAAvBA,EAAA3gB,EAAE0uE,6BAAqB,IAAA/tD,OAAA,EAAAA,EAAE/1B,SAASymG,EAAO5jB,KAAKH,SAC1J,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,gEAA4Et7B,EAAMoW,YAIzI,GAAI/M,GAASrJ,KAAWiO,GAA6BjO,KAAWy7B,EAC9D,OAAOtT,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,yEAAqFt7B,EAAMoW,YAIlJ,IAAKqlB,EACH,OAAOG,GAA2Bz7H,EAAO6/F,EAAOw7B,EAAwBxX,EAAO5jB,KAAKH,MAAM,EAAO,CAAEmW,OAAQ4N,EAAO5jB,KAAKgW,OAAQlpB,KAAM82B,EAAO5jB,KAAKlT,OAGnJ,GAAI+gB,GAA6BjO,IAAqC,UAA3Bw7B,EACzC,OAAOI,GAA2Bz7H,EAAO6/F,EAAOw7B,EAAwBxX,EAAO5jB,KAAKH,MAAM,EAAM,CAAEmW,OAAQ4N,EAAO5jB,KAAKgW,OAAQlpB,KAAM82B,EAAO5jB,KAAKlT,OAIpJ,IAAIkT,EAEJ,MAAM9hE,EAAMu9F,GAAc77B,EAAOw7B,EAAwBG,GAEzD,GAAKxyB,GAAcnJ,KLpDyB4I,EKoDe5I,ELpDWC,EKoDJ+jB,EAAO5jB,KAAKH,KLnDvE2I,EAAYc,IAAKzJ,OAASA,GKqD1B,CACL,MAAM67B,EAAiC9C,GAAgC16F,EAAK0lF,EAAO5jB,KAAKH,KAAMy7B,GAC9F,IAAKI,EACH,OAAO3T,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwCw7B,iDAA6Dt7B,EAAMoW,YAI1H,MAAM2lB,EACJ/7B,EAAM0J,MAAQoyB,EACV97B,EAAM0J,IAAKvhG,QAAQ63F,IAAqC,UAA3Bw7B,EAAqC,EAAI,GACtEQ,GAAwBh8B,EAAO87B,EAAgCH,EAAyBD,GAC9Ft7B,EAAOspB,GAAgBoS,EAAgC9X,EAAO5jB,KAAKH,UAAM71F,EAAW2xH,QAdpF37B,EAAOspB,GAAgB1pB,EAAM0J,IAAKA,IAAMsa,EAAO5jB,KAAKH,UAAM71F,EAAW41F,EAAM0J,IAAKA,IAAKvhG,QAAQ63F,EAAM0J,KAAQ,GLrDlE,IAACd,EAA0B3I,EKuEtEG,EAAKlT,KAAuB,QAAhBre,EAAAm1C,EAAO5jB,KAAKlT,YAAI,IAAAre,EAAAA,EAAIuxB,EAAKlT,KAErCkT,EAAK4I,SAAW,IAAIogB,GACnBhpB,EAAK4I,SAAmCwO,WAAar3G,EAAM8jH,KAC5D7jB,EAAKtJ,MAA6B,QAArBrQ,EAAAu9B,EAAO5jB,KAAKtJ,aAAS,IAAArQ,EAAAA,EAAA,GAClC2Z,EAAK8lB,aAAa9lB,GAClBA,EAAKgW,OAA2B,QAAlB/2E,EAAA2kF,EAAO5jB,KAAKgW,cAAM,IAAA/2E,EAAAA,EAAI+gE,EAAKgW,OACzChW,EAAKh3F,GAAKo4G,GAAQphB,GAEdsC,GAAuBtC,IAASA,EAAK4I,SAASC,oBAAsBP,GAAkBG,yBACvFzI,EAAK4I,SAAmC3D,sBAAwB4I,GAA6B7N,KAAU8P,GAAmC9P,EAAKsJ,MAGlJ,MAAM3I,EAAek7B,GAA0Cj8B,EAAOI,EAAMo7B,EAAwBE,GACpG7E,GAA8Bz2B,EAAMW,GAEpCX,EAAKsJ,IAAKuc,iBACV7lB,EAAKsJ,IAAKmB,OAAO1kG,SAAQs6D,GAAKA,EAAEwlD,mBAGhC,MAAMiW,EAAkB5tB,GAA+BlO,EAAKsJ,KAE5DwyB,EAAgB14H,QAAOmvB,GAAKo3E,GAAYp3E,MAAmB,gBAAXA,EAAEstE,WAAoC71F,IAAVuoB,EAAE+2E,OAAoBvjG,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,KAE/H,MAAMsmG,EAAciD,EAAgB14H,OAAO24H,IAA6Bn0H,KAAK2qB,GAAmBqvF,GAAervF,KAEzGimG,EAAgB3rB,GAAgC7M,GAElDw4B,GAAkD,IAAjCxtB,GAAgBhL,GAAMv8F,QACzCo1H,EAAYjhG,QAAQgqF,GAAe4W,IAGrC,MAAM7e,EAAU,IAAI2d,GAChBvuB,GAAc7qE,IAAQwzE,GAAUxzE,GAClCy7E,EAAQ4d,cAAc3V,GAAe7hH,EAAMwhG,YAAY4N,aAAa/M,SAC3D6G,GAASrJ,IAAqC,WAA3Bw7B,GAEnBnyB,GAAS/qE,IAAmC,UAA3Bk9F,EAD1BzhB,EAAQ4d,cAAc3V,GAAe/W,GAAe3sE,KAIpDy7E,EAAQ4d,cAAc3V,GAAe1jF,IAGvC,MAAMu6F,EAA2Bz4B,EAAKyK,OAAO7iG,KAAK2qB,GAAmBqvF,GAAervF,KAG9E0iG,EAAmBrT,GAAe5hB,GACxCi1B,EAAiBl1B,0BAA4Bs7B,EAC7C1hB,EAAQrzG,IAAIo9G,GAAU6N,iBAAkB,CAAC0D,IAEzCtb,EAAQrzG,IAAIo9G,GAAUuS,2BAA4B,CAACrU,GAAehiB,MAAW64B,IAC7E9e,EAAQrzG,IAAIo9G,GAAUoS,mBAAoB+C,GAC1Clf,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAe5hB,KAEvD,MAAMg8B,EAAe9tB,GAA+BnuG,EAAMwhG,aACpD06B,EAAgBD,EAAaA,EAAaj0H,QAAQi4F,GAAQ,GAOhE,OANA2Z,EAAQrzG,IAAIo9G,GAAUkW,qBAAsBqC,EAAgB,CAACra,GAAeqa,IAAkB,IAE1Fj8B,IAASuQ,GAAkCvQ,IAAS0R,GAAU1R,IAChE2Z,EAAQp0G,IAAIm+G,GAAUuS,4BAA4BhmC,UAAW9xE,KAAKyjG,GAAe7hH,EAAMwhG,YAAY4N,aAAa/M,SAG3G,CACLb,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASllF,EAAAn/B,EAAMkkH,yBAAIG,WAKnBwX,GAA0B,CAC9BpzB,EACA0zB,EACAX,EACAD,KAEA,MAAMa,EAAKZ,EAAwBn4H,QAAOmvB,GAAK6pG,GAA8B7pG,EAAG+oG,KAA2B/oG,IAAMi2E,GAAe0zB,EAAuBzxB,OAAOttF,SAASoV,MACvK,OAAO4pG,EAAGp0H,QAAQygG,IAOduzB,GAA+BxpG,IAA6B02E,GAAS12E,IAAMA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,uBAE9H+yB,GAA6B,CAACz7H,EAAY6/F,EAAoBlO,EAAiBmO,EAAcw7B,GAAgC,EAAOgB,EAA2B,oBACnK,MAAMzuB,EAAkBD,GAA8B/N,GAChDz4D,EAAMymE,EAAgBtE,IAAKvhG,QAAQ6lG,IAAgC,UAAZlc,EAAsB,EAAI,GACjFsO,EAAOkuB,GAA+BruB,EAAM+N,EAAgBtE,SAAoBt/F,EAAWm9B,GACjG64D,EAAKgW,OAAuC,QAA9B9iE,EAAAmpF,EAAoBrmB,cAAU,IAAA9iE,EAAAA,EAAA8sD,EAAKgW,OACjDhW,EAAKlT,KAAmC,QAA5Bre,EAAA4tD,EAAoBvvC,YAAQ,IAAAre,EAAAA,EAAAuxB,EAAKlT,KAC7CkT,EAAKtJ,MAA+C,QAAvCz3D,EAAyB,UAAzBo9F,EAAoB3lC,aAAK,IAAArQ,EAAAA,EAAI2Z,EAAKtJ,aAAK,IAAAz3D,EAAAA,EAAI,GACxD+gE,EAAKh3F,GAAKo4G,GAAQphB,GACdsC,GAAuBtC,IAASA,EAAK4I,SAASC,oBAAsBP,GAAkBG,yBACvFzI,EAAK4I,SAAmC3D,sBAAwB4I,GAA6B7N,KAAU8P,GAAmC9P,EAAKsJ,MAGlJ,MAAMprE,EAAc,IAARiJ,EAAY64D,EAAKsJ,IAAKA,IAAOuB,GAAe7K,EAAKsJ,IAAKmB,OAAOtjE,EAAM,IAEzEwyE,EAAU,IAAI2d,GAEpB,GAAI+D,EAA+B,CACjCz7B,EAAMgO,iBAAkB,EACxB6oB,GAA8Bz2B,EAAM,CAACJ,IAErCI,EAAKsJ,IAAKuc,iBACV7lB,EAAK6lB,iBAEL,MAAMgT,EAAc,IACf74B,EAAKsJ,IAAKmB,OAAOrnG,OAAO24H,IAA6Bn0H,KAAI2qB,GAAKqvF,GAAervF,QAC7EytE,EAAKyK,OAAOrnG,OAAO24H,IAA6Bn0H,KAAI2qB,GAAKqvF,GAAervF,MAG7EonF,EAAQrzG,IAAIo9G,GAAUoS,mBAAoB+C,GAG5Clf,EAAQ4d,cAAc3V,GAAe1jF,IAGrC,MAAM+2F,EAAmBrT,GAAe5hB,GACxCi1B,EAAiBl1B,0BAA4Bs7B,EAC7C1hB,EAAQrzG,IAAIo9G,GAAU6N,iBAAkB,CAAC0D,IAEzCtb,EAAQrzG,IAAIo9G,GAAUuS,2BAA4BlT,GAAa/iB,IAC/D2Z,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAe5hB,KAEvD,MAAMg8B,EAAe9tB,GAA+BnuG,EAAMwhG,aACpD06B,EAAgBD,EAAaA,EAAaj0H,QAAQi4F,GAAQ,GAGhE,OAFA2Z,EAAQrzG,IAAIo9G,GAAUkW,qBAAsBqC,EAAgB,CAACra,GAAeqa,IAAkB,IAEvF,CACL16B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASllF,EAAAn/B,EAAMkkH,yBAAIG,WAKnBgY,GAAgC,CAAC7pG,EAAgB+oG,IAAmF,IAAjCA,EAAsB73H,QAAgB63H,EAAsBn+G,SAASoV,GAExKspG,GAA4C,CAACj8B,EAAoBI,EAAmBo7B,EAAgCE,KACxH,MAAMU,EAAe9tB,GAA+B3D,GAAe3K,IAC7D08B,EAAOC,GAAQ38B,EAAOI,EAAKH,MAC7B8J,GAAY/J,IAAqC,WAA3Bw7B,GACxBkB,EAAKn+G,KAAKyhF,GAEZ,MAAM48B,EAAaR,EAAaj0H,QAAQ63F,IAAqC,UAA3Bw7B,EAAqC,EAAI,GAG3F,OAAOY,EAAa54H,QAFD,CAACmvB,EAAgB/R,KAA0B,IAAA0yB,EAC5D,OAAA1yB,GAASg8G,GAAcjqG,IAAMytE,cAAU9sD,EAAA8sD,EAAKiB,4CAAuB9jF,SAASoV,EAAEstE,QAASy8B,EAAKn/G,SAASoV,EAAE+2E,MAAS8yB,GAA8B7pG,EAAG+oG,OAI/IiB,GAAU,CAAC/zB,EAA0B3I,EAAc1qF,EAAwB,MAC/E,MAAMsnH,EAAuB,CAAC,QAAS,QAAS,SAAU,WAAY,QAAS,WAAY,UAC3F,OAAIj0B,GAAei0B,EAAqB10H,QAAQygG,EAAY3I,OAAS48B,EAAqB10H,QAAQ83F,IAChG1qF,EAAOgJ,KAAKqqF,EAAYc,KACjBizB,GAAQ/zB,EAAYc,IAAMzJ,EAAM1qF,IAElCA,GAGHsmH,GAAgB,CAAC77B,EAAoBw7B,EAAgCG,KACzE,MAAMmB,EAA+Bp6B,GAAuB1C,GACtDe,EAAe46B,EAAwBn4H,QAAOmvB,GAAK+vE,GAAuB/vE,KAAOmqG,IACvF,OAAO/7B,EAAaA,EAAa54F,QAAQ63F,IAAqC,UAA3Bw7B,EAAqC,EAAI,WCzSjFuB,GAIX/1H,YAAYg6G,GAHZn3G,KAAAo/F,kBAAoBP,GAAkBI,uBAIpCj/F,KAAKm3G,oBAAsBA,EAI7BC,mBAAmBrY,EAA0BsY,GAC3C,MAAMyV,EAAiBzV,EACpB19G,QAAQwW,KAAwBA,aAAamqF,MAC7C3gG,QAAQwW,KAAwBA,aAAagsF,MAC7CxiG,QAAQwW,KAAwBA,aAAamsF,MAC7C3iG,QAAQwW,IAAsB,IAAAs5B,EAAA,gBAACA,EAAAt5B,EAAE8lF,gCAAWn9D,WAAW,aACvDn/B,QAAQ29G,GAAqD,cAAnBA,EAAKrhB,WAAgD,0BAAnBqhB,EAAKrhB,YACjFt8F,QAAQwW,KAAwBA,aAAawsF,MAIhD,OAFAmwB,EAAep4G,KAAK8nF,IAEbswB,EAAenzH,QAAOwW,QAAW5P,IAAN4P,IAAiB8Q,MAAK,CAAC9Q,EAAGqb,IAAMrb,EAAE8lF,UAAWqpB,cAAc9zF,EAAEyqE,cCM5F,MAqFDk9B,GAAkC,CAAC78H,EAAYykG,KACnD,MAAMi4B,EhFkvBwD,CAAC,QAAS,QAAS,SAAU,WAAY,QAAS,YgFjvB1G9iB,EAAwB,GAE9B,IAAK,MAAMkjB,KAAMr4B,EAAiBs4B,wBAC5BL,EAAqBt/G,SAAS0/G,EAAGh9B,MACnC8Z,EAAQx7F,QAAQ4+G,GAAoCh9H,EAAO88H,IAE3DljB,EAAQx7F,KAAK6+G,GAA6Bj9H,EAAO88H,IAIrD,OAAOljB,GAOHsjB,GAA8BC,GAC3BA,EAAIl0H,GAAGsP,MAAM,KAAKi7B,MAAK53B,GAAKA,EAAE4mB,WAAW,SAG5Cw6F,GAAsC,CAACh9H,EAAYm9H,KACvD,MAAM37B,EAAcxhG,EAAMwhG,YAC1B,IAAIrjE,EAAMgxE,GAAqBnvG,EAAMwhG,YAAa27B,EAAIC,oBAClDzrC,EAAU,SAGd,GAAIwd,GAAqBnvG,EAAMwhG,YAAa27B,EAAIl0H,IAC9C,MAAO,GAIT,GAAIk1B,EAAK,CACH6qE,GAAc7qE,KAASwtE,GAAuBxtE,IAAQwzE,GAAUxzE,GAClEA,EAAOA,EAAoBixE,aAAc/M,OArBC,EAAClkE,EAAkBg/F,KACzD56B,GAAuBpkE,IAAQ++F,GAA2BC,GAqBrDE,CAAwCl/F,EAAKg/F,KACtDh/F,EAAMA,EAAIysE,WAAYF,OAAO,GAC7B/Y,EAAU,SAGZ,MAAMkO,EAAQgiB,GAAe1jF,GAEvB6hE,GAA4Bm9B,EAAI5a,YAAqB4a,EAAIpb,WAEzD7gF,EADYg6F,GAAel7H,EAAO,CAAE6/F,MAAAA,EAAOI,KAAM,CAAEH,KAAMq9B,EAAIr9B,KAAMnO,QAAAA,EAASqO,0BAAAA,EAA2BiW,OAAQknB,EAAIlnB,QAAUmlB,iBAAiB,IAC3HlX,GAAIhjF,OAAO79B,QAAOo2F,GAAMA,EAAG0qB,YAAcR,GAAUsS,kBAEtEqH,EAAqBp8F,EAAOtqB,MAAKjS,GAAKA,EAAEw/G,YAAcR,GAAU6N,mBAAmBthC,UACnFqtC,EAAgBD,EAAmB,GAEnCr9B,EAAOgjB,GAA2BzhB,EAAa+7B,GAOrD,OALAC,GAAqCv9B,EAAMk9B,EAAK5yB,GAAuB2e,QAEvEoU,EAAmB55H,OAAS,EAC5B45H,EAAmBl/G,KAAKyjG,GAAe5hB,IAEhC/+D,EAGT,MAAO,IAGH+7F,GAA+B,CAACj9H,EAAYyoG,KAChD,MAAMsxB,EAAqB,CACzB5V,UAAWR,GAAU6N,iBACrBpmB,gBAAYnhG,EACZs/F,SAAKt/F,EACLimF,UAAW,IAGP+P,EAAOw9B,GAAuBz9H,EAAMwhG,YAAaiH,EAAazoG,EAAM8jH,MAE1E,GAAI7jB,EAAM,CAKR,GAJIA,EAAKgW,QACPhW,EAAKumB,uBAAuBvmB,EAAKgW,SAG9B8jB,EAAO3uB,WAAY,CACtB,MAAM0sB,EAAsB9qB,GAAmC/M,GAC/D,IAAIsJ,EAAMJ,GAAQlJ,EAAMsJ,KAAQtJ,EAAMsJ,IAAKA,IAAMtJ,EAAKsJ,IACtDA,EAAMoC,GAAuBpC,GAAQ4F,GAAqBnvG,EAAMwhG,YAAa+H,EAAKA,IAAKtgG,IAAOsgG,EAC1Fd,EAAYi1B,OAAS9zB,GAAYL,GACnCwwB,EAAO3uB,WAAayW,GAAetY,GAEnCwwB,EAAO3uB,WAAayW,GAAe8b,GAAmB7F,GAAuBvuB,EAAMtJ,IAIvF+O,GAA+B/O,GAAMztE,UACnC,IAAK22E,GAAQ32E,KAAOm5E,GAAuBn5E,GAAI,CAC7C,MAAMorG,EAAS/b,GAAervF,GAC9BorG,EAAOjc,QAAUN,GAAQ7uF,GACT,QAAhB2gB,EAAA4mF,EAAO7pC,iBAAS,IAAA/8C,GAAAA,EAAE/0B,KAAKw/G,OAK7B,OAAO7D,GAGH4D,GAAqB,CAACvyB,EAAyB3C,KACnD,MAAMtqE,EAAM04F,GAAiBzrB,EAAY3C,GACzC,OAAOtqE,EAAIl1B,KAAOw/F,EAAYx/F,GAAKk1B,EAAMsqE,EAAYc,IAAKmB,OAAOjC,EAAYc,IAAKmB,OAAOhnG,OAAS,IAG9F+5H,GAAyB,CAACj8B,EAA0Bs7B,EAAiChZ,aACzF,IAAI7jB,EAEJ,MAAM49B,EAAsB,UAAZf,EAAGh9B,KAEnB,GAAIg9B,EAAGgB,gBAAiB,CACtB,MAAMtrG,EAAI28E,GAAqB3N,EAAau8B,GAASjB,EAAGgB,kBAEpDtrG,IAEAytE,EADEztE,EAAEvpB,KAAO6zH,EAAGgB,gBACPvU,GAAgB/2F,EAAE+2E,IAAMuzB,EAAGh9B,KAAMttE,GAKjC+2F,GAAgB/2F,EAAGsqG,EAAGh9B,UAAM71F,EAAW,SAG7C,GAAI6yH,EAAGY,MAAO,CACnB,MAAMlrG,EAAI28E,GAAqB3N,EAAau8B,GAASjB,EAAGY,QAEpDlrG,IACe,WAAZsqG,EAAGh9B,MAAiC,YAAZg9B,EAAGh9B,MAAkC,WAAXttE,EAAEstE,KAE9C+9B,GACTrrG,EAAEmkE,MAAoB,QAAZxjD,EAAA2pF,EAAGnmC,aAAS,IAAAxjD,EAAAA,EAAA,GACtB8sD,EAAQztE,EAAamvE,OACA,cAAZm7B,EAAGh9B,MACZmuB,GAAgBz7F,GAChBytE,EAAOztE,EAAEo4E,WACTp4E,EAAEo4E,WAAY3hG,GAAK6zH,EAAG7zH,GACtBupB,EAAEo4E,WAAY1nF,KAAO45G,EAAGkB,mBAExB/9B,EAAOspB,GAAgB/2F,EAAGsqG,EAAGh9B,UAAM71F,EAAW,GAC9Cg2F,EAAKtJ,MAAoB,QAAZjoB,EAAAouD,EAAGnmC,aAAS,IAAAjoB,EAAAA,EAAA,IAXzBuxB,EAAOspB,GAAiB/2F,EAAamvE,MAAQm7B,EAAGh9B,UAAM71F,EAAW,SAerEg2F,EAAOspB,GAAgB/nB,EAAas7B,EAAGh9B,UAAM71F,EAAW,GAmB1D,OAhBIg2F,GACFu9B,GAAqCv9B,EAAM68B,EAAIhZ,GAG7C7jB,GAAQ68B,EAAGpyB,QACboyB,EAAGpyB,OAAO1kG,SAAQ,CAACs6D,EAAG18D,KACV,IAANA,GACF08D,EAAEo9D,MAAQZ,EAAG7zH,GACbq3D,EAAEr3D,GAAKg1H,GAAiC39D,EAAEr3D,GAAI6zH,EAAG7zH,KAEjDq3D,EAAEw9D,gBAAkBhB,EAAGpyB,OAAQ9mG,EAAI,GAAGqF,GAExCw0H,GAAuBj8B,EAAalhC,EAAGwjD,MAIpC7jB,GAKHg+B,GAAmC,CAACh1H,EAAYy0H,IAC7Cz0H,EAAGu5B,WAAWk7F,GAASz0H,EAAKy0H,EAAMnlH,MAAM,KAAKoP,MAAM,GAAI,GAAGlP,KAAK,KAAO,IAAMxP,EAG/Eu0H,GAAuC,CAAC/0B,EAA0Bq0B,EAAiChZ,aACvGrb,EAAY9R,MAAoB,QAAZxjD,EAAA2pF,EAAGnmC,aAAS,IAAAxjD,EAAAA,EAAA,GAChCs1D,EAAYx/F,GAAK6zH,EAAG7zH,GACpB,MAAM4/F,EAAW,IAAIogB,GAerB,GAdApgB,EAASwO,WAAayM,EACtBrb,EAAYI,SAAWA,EACnBJ,EAAYlG,yBACdsG,EAAS3D,wBAA0B43B,EAAG53B,uBAGnCiE,GAAQV,IAAiBkB,GAAUlB,IAAiBO,GAAcP,KACrEA,EAAY+d,uBAAuBsW,EAAG7mB,QACtCxN,EAAYwN,OAAS6mB,EAAG7mB,OACpB6mB,EAAGva,YACL9Z,EAAYoF,iBAAkB,KAI7B7E,GAAcP,KACjBA,EAAY9R,MAAoB,QAAZjoB,EAAAouD,EAAGnmC,aAAS,IAAAjoB,EAAAA,EAAA,GAC5BouD,EAAG/a,YAAY,CACOnU,GAA8BnF,GACtCL,cAAgB00B,EAAG10B,gBAKnC21B,GAAY90H,GAAuBA,EAAG9D,QAAQ,UAAW,IAEzD+4H,GAAmB,CAACl+H,EAAc0kG,KACtC,MAAMy5B,EAAgD,GACtD,IAAIC,EAmBJ,OAjBA15B,EAAS1+F,SAAQ40D,UACf,IACE,GAAIq2D,GAAkBr2D,GAAI,CACxB,MAAM02D,EAAO12D,EACbyjE,GAA2Br+H,EAAOsxH,EAAM8M,EAAkBD,GACtD3K,GAAoBlC,KACtB8M,EAAmB9M,EAAKH,qBAGd,QAAdh+E,EAAAnzC,EAAM0kG,gBAAQ,IAAAvxD,GAAAA,EAAE/0B,KAAKw8C,GACrB,MAAO16B,QAKXlgC,EAAM0kG,SAAW2sB,GAA8BrxH,EAAOA,EAAM0kG,UAErD,IAAI45B,GAAwCt+H,EAAO0kG,GAAW,CAAEyf,UAAWR,GAAU6N,iBAAkBthC,UAAWiuC,KAGrHG,GAA0C,CAACt+H,EAAc0kG,KAC7D,MAAMtvF,EAAuB,GACvBmpH,EAAsB75B,EAAS78F,KAAI+yD,GAAKA,IAAsBv3D,QAAOu3D,G5F1V3C,uB4F0VgDA,EAAEg3D,cAAsC,GAExH,GAAI2M,EAAoB76H,OAAQ,CAC9B,MAAMwsF,EAAYquC,EAAoB12H,KAAI+yD,GAAKu0C,GAAqBnvG,EAAMwhG,YAAc5mC,EAAEu2D,oBAAoBxP,WAAY95G,KAAI2qB,GAAKqvF,GAAervF,KAClJpd,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUmP,mBAAoB5iC,UAAAA,IAGzD,OAAO96E,GAGHipH,GAA6B,CAACr+H,EAAckuF,EAA0BkwC,EAAqCD,yCAC/G,GAAI3K,GAAoBtlC,GAAU,CAChC,IAAIvpF,EAEJ,GAAI8uH,GAAmBvlC,GAAU,CAC/B,IAAI17D,EAAIo/E,GAAuB5xG,EAAMwhG,YAActT,EAAQijC,oBAAoBnP,qCAAsCnQ,OACrHr/E,EAAIA,GAAK28E,GAAqBnvG,EAAMwhG,YAAcu8B,GAAS7vC,EAAQijC,oBAAoBnP,qCAAsCL,WAAc,KAC3Ih9G,EAAI6tB,EAAIqvF,GAAervF,GAAK4rG,OAE5Bz5H,EAAIy5H,EAGNlwC,EAAQijC,oBAAoBpkC,KAAO03B,GAAQljH,OAC3C2sF,EAAQijC,oBAAoBnP,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAUn3D,IAE7FupF,EAAQwjC,qBAAsB3kC,KAAOmB,EAAQijC,oBAAoBpkC,KACjEmB,EAAQwjC,qBAAsB1P,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAUn3D,IAE/F65H,GAAqCx+H,EAAOkuF,GAE5CiwC,EAAkC//G,KAAK8vE,EAAQijC,qBAC/CiN,EAAmBlwC,EAAQijC,wBACtB,CACL,MAAMxsH,EAAIk9G,GAAe1S,GAAqBnvG,EAAMwhG,YAActT,EAAQijC,oBAAoBxP,UAC9FzzB,EAAQijC,oBAAoBpkC,KAAOpoF,EAAEooF,KACrCmB,EAAQijC,oBAAoBtf,MAAQltG,EAAEktG,MACtC3jB,EAAQijC,oBAAoB/c,WAAY7K,IAAKxc,KAAwB,QAAjBre,UAAAv7B,EAAAxuC,EAAEyvG,iCAAY7K,WAAG,IAAA76B,OAAA,EAAAA,EAAEqe,KACvEmB,EAAQijC,oBAAoB/c,WAAY7K,IAAKsI,MAAyB,QAAjB3yE,UAAAonD,EAAA3hF,EAAEyvG,iCAAY7K,WAAG,IAAArqE,OAAA,EAAAA,EAAE2yE,MAEpEkjB,GAAwB7mC,IAAY8mC,GAAyB9mC,IAC/DA,EAAQwjC,qBAAsB3kC,KAAO03B,GAAQljH,OAC7C2sF,EAAQwjC,qBAAsBtd,WAAY7K,IAAKxc,KAAwB,QAAjB2yB,UAAAvgF,EAAAx6B,EAAEyvG,iCAAY7K,WAAG,IAAAmW,OAAA,EAAAA,EAAE3yB,KACzEmB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKsI,MAAyB,QAAjBiO,UAAAF,EAAAj7G,EAAEyvG,iCAAY7K,WAAG,IAAAuW,OAAA,EAAAA,EAAEjO,OACjE3jB,EAAQi2B,YAAcR,GAAU6N,mBACzCtjC,EAAQwjC,qBAAsB3kC,KAAOpoF,EAAEooF,KACvCmB,EAAQwjC,qBAAsB7f,MAAQltG,EAAEktG,MACxC3jB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKxc,KAAwB,QAAjBwhC,UAAAvO,EAAAr7G,EAAEyvG,iCAAY7K,WAAG,IAAAglB,OAAA,EAAAA,EAAExhC,KACzEmB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKsI,MAAyB,QAAjB6c,UAAAJ,EAAA3pH,EAAEyvG,iCAAY7K,WAAG,IAAAmlB,OAAA,EAAAA,EAAE7c,OAGxEltG,EAAE69G,uBACJt0B,EAAQijC,oBAAoB/c,WAAY7K,IAAKgY,cAAiC,QAAjBiN,UAAAC,EAAA9pH,EAAEyvG,iCAAY7K,WAAG,IAAAilB,OAAA,EAAAA,EAAEjN,cAChFrzB,EAAQijC,oBAAoB/c,WAAY7K,IAAKqY,eAAkC,QAAjB+M,UAAAC,EAAAjqH,EAAEyvG,iCAAY7K,WAAG,IAAAolB,OAAA,EAAAA,EAAE/M,kBAKjF4c,GAAuC,CAACx+H,EAAckuF,KAC1D,IAEIqzB,EACAK,EAHA70B,EAA2B,EAC3B8kB,EAA4B,GAIhC,GAAI4hB,GAAmBvlC,GAAU,CAC/B,MAAMqb,EAAM4F,GAAqBnvG,EAAMwhG,YAActT,EAAQijC,oBAAoB/c,WAAY7K,IAAKoY,SAGlG,GAFA50B,EAAOwc,MAAAA,SAAAA,EAAKxc,KACZ8kB,EAAQtI,MAAAA,SAAAA,EAAKsI,MACTtI,GAAOhH,GAAuBgH,GAAM,CACtC,MAAMmY,EAAuBlX,GAAejB,GAC5CgY,EAAgBG,MAAAA,SAAAA,EAAsB30B,KACtC60B,EAAiBF,MAAAA,SAAAA,EAAsB7P,WAEpC,CACL,MAAM4sB,ET5YqB,EAAC/5B,EAAsB,GAAIg6B,IACjDh6B,MAAAA,SAAAA,EAAU9tF,MAAKgkD,GAAKA,EAAE3xD,KAAOy1H,IS2YfC,CAAgB3+H,EAAM0kG,SAAWxW,EAAQ4jC,sBAC5D/kC,EAAO0xC,EAAYtN,oBAAoBpkC,KACvC8kB,EAAQ4sB,EAAYtN,oBAAoBtf,MAG1C3jB,EAAQijC,oBAAoB/c,WAAY7K,IAAKxc,KAAOA,EACpDmB,EAAQijC,oBAAoB/c,WAAY7K,IAAKsI,MAAQA,EACrD3jB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKxc,KAAOA,EACtDmB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKsI,MAAQA,EAEvD3jB,EAAQijC,oBAAoB/c,WAAY7K,IAAKgY,cAAgBA,EAC7DrzB,EAAQijC,oBAAoB/c,WAAY7K,IAAKqY,eAAiBA,EAC9D1zB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKgY,cAAgBA,EAC/DrzB,EAAQwjC,qBAAsBtd,WAAY7K,IAAKqY,eAAiBA,GCzarDgd,GAA6B,CAAC5+H,EAAY6jH,iBACrD,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1Eg/B,EAAUhb,EAAOhkB,MAAMc,MACvBm+B,GAAcr2B,MAAAA,OAAW,EAAXA,EAAamC,WAAY1nF,OAAQ,GAC/C20E,EAAQ,IAAI9hD,OAAO,aAAa+oF,eAA0B,MAC1DC,EAAe5jB,GAA6B0jB,GAElD,QAAoB50H,IAAhBw+F,IAA8BA,EAAYmC,YAAek0B,IAAgBD,GAAWp2B,EAAY9R,MAAM3xF,MAAM6yF,GAE9G,OADA73F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMg/H,EvEiHC,YAFqB5lB,EuE/GIylB,MvEgHZ1jB,GAA6B/B,SADtB,IAACA,EuE9G5B,MAAM6lB,EAAmBx2B,EAAY9R,MAErC,GAAI8R,EAAY9R,MAAM3xF,MAAM6yF,GAC1B4Q,EAAY9R,MAAQsoC,EAAiB95H,QAAQ0yF,EAAOmnC,QAC/C,GAAIv2B,EAAY9R,MAAMv5E,SAAS2hH,GACpCt2B,EAAY9R,MAAQsoC,EAAiB95H,QAAQ45H,EAAcC,QACtD,GAAIH,GAAW5jB,GAAU4jB,UAAmC50H,IAAtBw+F,EAAY9R,OAAqD,MAAX,QAAnBxjD,EAAAs1D,EAAY9R,aAAO,IAAAxjD,OAAA,EAAAA,EAAAt6B,SAAgB,CACjH,MAAMogG,EAA2B,QAAlBvqC,EAAAsrC,GAAQ6kB,UAAU,IAAAnwD,OAAA,EAAAA,EAAAuqC,OAE3BimB,EAAW,GAAGllB,GAAQ6kB,GAASl/B,gBAAgBwa,GAAcD,GAAU2kB,WAAiBxkB,GAAkBwkB,KAChHp2B,EAAY9R,MAAQ,GAAGsiB,GAAqB,MAAXA,EAAiB,IAAM,gBAAgB4lB,MAAYK,0DAC/E,CACL,MAAMz+G,EAAQtM,SAASqjG,aAAa2nB,aACpC12B,EAAY9R,MAAQ,CAACsoC,EAAiBt3G,MAAM,EAAGlH,GAAQu+G,EAAWC,EAAiBt3G,MAAMlH,IAAQhI,KAAK,KACtG++F,aAAa4nB,WAAW,eAG1B,MAAMv5H,EAAWg8G,GAAepZ,GAEhCA,EAAYmC,WAAY1nF,KAAO27G,GAEL,QAAtBv4C,EAAAmiB,EAAYI,gBAAU,IAAAviB,OAAA,EAAAA,EAAAwiB,qBAAsBP,GAAkBmG,uBAChEjG,EAAYI,SAAW,IAAI+zB,GAAsB/2H,IAGnD,MAAMw5H,EAAY,IAAI9H,GAEhBhoC,EAAWsyB,GAAepZ,GAAa,GAC7ClZ,EAASsnB,UAAYuJ,GAAkB3X,GAEvC42B,EAAU94H,IAAIo9G,GAAUkS,iBAAkB,CAACtmC,IAC3C8vC,EAAU94H,IAAIo9G,GAAUoP,mBAAoB,CAACxjC,IAC7C8vC,EAAU94H,IAAIo9G,GAAUuS,2BAA4B,CAAC3mC,IAErD,MAAMqqB,EAAU6d,GAA+BhvB,GAC/C,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO03H,GAAiBjvB,EAAa5iG,IACrDm+G,QAASpK,EAAQ7mE,QACjBkxE,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQm+F,EAAUtsF,QAClBsxE,gBAASnlF,EAAAl/B,EAAMkkH,yBAAIG,WChDZib,GAAwB,CAACt/H,EAAY6jH,qBAChD,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAC1E0/B,EAAmE,QAAnD7wD,UAAAv7B,EAAAs1D,MAAAA,OAAW,EAAXA,EAAaI,SAASgY,0CAAqBre,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,MACrE6oC,EAAqC,QAAxBtgG,EAAc,QAAdonD,EAAAu9B,EAAOhkB,aAAO,IAAAvZ,OAAA,EAAAA,EAAAkc,gBAAU,IAAAtjE,OAAA,EAAAA,EAAAy3D,MACrC8oC,EAA+Bh3B,GAAe82B,IAAkBC,EAEtE,QAAoBv1H,IAAhBw+F,GAA6BA,EAAY9R,QAAU6oC,EAErD,OADAx/H,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM6F,EAAWg8G,GAAepZ,GAEhCA,EAAY9R,MAAS4L,GAAuBkG,GAA4BkO,GAAsB6oB,MAAAA,EAAAA,EAAc,IAAjDA,EAEvDC,EACFh3B,EAAYI,SAAW,IAAI0tB,IACI,QAAtBp3F,EAAAspE,EAAYI,gBAAU,IAAA1pE,OAAA,EAAAA,EAAA2pE,qBAAsBP,GAAkBmG,uBACvEjG,EAAYI,SAAW,IAAI+zB,GAAsB/2H,IAGnD,MAAMw5H,EAAY,IAAI9H,GAEhBhoC,EAAWsyB,GAAepZ,GAAa,GAC7ClZ,EAASsnB,UAAYuJ,GAAkB3X,GAMnCwB,GAAiBxB,KACnBA,EAAY9R,MAAQ8R,EAAY9R,MAAM/sF,eAGxCy1H,EAAU94H,IAAIo9G,GAAUoP,mBAAoB,CAACxjC,IAC7C8vC,EAAU94H,IAAIo9G,GAAUkS,iBAAkBtS,GAAiC9a,IAExD,KAAf+2B,GACFH,EAAU94H,IAAIo9G,GAAUsS,gBAAiB,CAAC1mC,IAG5C8vC,EAAUzlB,QAAQx7F,KAAK,CAAE+lG,UAAWR,GAAUqS,oBAAqB9lC,UAAW,CAACX,KAE/E,MAAMqqB,EAAU6d,GAA+BhvB,GAC/C,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO03H,GAAiBjvB,EAAa5iG,IACrDm+G,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQm+F,EAAUtsF,QAClBsxE,gBAAS3E,EAAA1/G,EAAMkkH,yBAAIG,WCnEZqb,GAAgB,CAAC1/H,EAAY6jH,WACxC,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAET6/F,EAAMgX,UAAYuJ,GAAkBvgB,GACpC,MAAMtQ,EAAWsyB,GAAehiB,GAAO,GAEjC3+D,EAAS,CACb,CACEijF,UAAWR,GAAUre,cACrBpV,UAAW,CAACX,KAIhB,MAAO,CACLiS,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WC2DZsb,GAAuC,CAACl3B,EAA0Bm3B,KAC7E,MAAMC,GAAqC/vB,GAAiCrH,GAC5E,GAAIo3B,IAAsCD,EACxC,OAIF,OAD0CC,IAAsCD,EACrCE,GAAiCr3B,GAAes3B,GAAiCt3B,IAGxHs3B,GAAoCt3B,IACxC,GAAIu3B,GAA0Cv3B,GAC5C,MAAO,CACL3I,KAAMsW,GAAawkB,KACnBj7B,UAAW,qJAKXmgC,GAAoCr3B,IACxC,MAAM7H,EAAeuN,GAA+B1F,GAAaplG,QAAOmvB,IAAMo3E,GAAYnB,KAAiBS,GAAS12E,KACpH,OAAIytG,GAAqCr/B,EAAaj5E,MAAM,IACnD,CACLm4E,KAAMsW,GAAawkB,KACnBj7B,UAAW,iIAIXugC,GAAcz3B,GACT,CACL3I,KAAMsW,GAAawkB,KACnBj7B,UAAW,qIAIXwgC,GAA2Bv/B,EAAaj5E,MAAM,IACzC,CACLm4E,KAAMsW,GAAawkB,KACnBj7B,UAAW,uJAHf,GAQIqgC,GAA6Cv3B,UACjD,MAAMmP,GAAyB,QAAfzkE,EAAAs1D,EAAYc,WAAG,IAAAp2D,OAAA,EAAAA,EAAE01D,UAAmC3D,sBACpE,OAAQgE,GAAST,KAAiBqF,GAA6BrF,MAAkBmP,MAAAA,GAAAA,IAG7EqoB,GAAwCr/B,GACrCA,EAAaptD,MAAKhhB,IAAI,IAAA2gB,EAAC,QAAc,QAAbA,EAAA3gB,EAAEqkF,iBAAW,IAAA1jE,OAAA,EAAAA,EAAAK,MAAKlhB,IAAI,IAAA6gB,EAAC,OAAa,QAAbA,EAAA7gB,EAAEqtE,iBAAW,IAAAxsD,OAAA,EAAAA,EAAA7yC,cAAc8c,SAAS,kCAAyCnT,IAAbuoB,EAAE8lE,UAA0BqR,GAAUn3E,MAGxJ0tG,GAAiBz3B,GACA0F,GAA+B1F,GAChCj1D,MAAKhhB,IAAI,IAAA2gB,EAAC,MAAW,YAAX3gB,EAAEstE,OAA6B,QAAP3sD,EAAA3gB,EAAEmkE,aAAK,IAAAxjD,OAAA,EAAAA,EAAE/1B,SAAS2rF,QAGpEo3B,GAA8Bv/B,GAC3BA,EAAaptD,MAAKhhB,IAAI,IAAA2gB,EAAC,OAAa,QAAbA,EAAA3gB,EAAEqkF,iBAAW,IAAA1jE,OAAA,EAAAA,EAAAK,MAAKlhB,IAAI,IAAA6gB,EAAC,eAAAA,EAAA7gB,EAAEqtE,gCAAWviF,SAAS,uBC/HhEgjH,GAAyB,CAACpgI,EAAY6jH,WACjD,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GACpEgO,EAAkBhO,GAAS0C,GAAuB1C,IAAU+N,GAA8B/N,GAEhG,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,I9CC0C,EAACyoG,EAA0Bob,KACrE,MAAM5e,EAAWgjB,GAA+Bxf,EAAaob,EAAO1e,SACpE,OAAOsD,EAAY6Z,kBAAkB7Z,GAAaplG,QAAOwW,GAAKA,aAAawsF,IAAuBxsF,EAAEorF,UAAYprF,EAAEorF,WAAaA,IAAUvhG,OAAS,G8CH7I28H,CAA6BxgC,EAAOgkB,GACvC,OAAOmE,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,6DAGpF,MAAM2gC,EAA2BzzB,GAAuBhN,GAExD,GAAIygC,GAA4BxwB,GAAiCwwB,KAA8BxwB,GAAiCjQ,GAC9H,OAAOmoB,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,iFAGpF,MAAM4gC,EAAsC1yB,GAAmByyB,GAA4Bx1B,GAAew1B,GAE1Gzc,EAAO1e,QAAU8iB,GAA+BpoB,EAAOgkB,EAAO1e,SAE9D,MAAMyyB,EAAY,IAAI5U,GAAanjB,GAAO,GAAO,IAE3C2gC,EAAmB/c,GAA6B5jB,GAEhDI,ExCV2B,EAACJ,EAAoBgkB,aACtD,MAAM+S,EAAW/2B,EAAM0J,IACvB,IAAItJ,EACAwgC,EAEJ,OAAQ5c,EAAO1e,SACb,IAAK,0BACL,IAAK,iCACL,IAAK,qCACL,IAAK,wCAkCL,IAAK,+BACHs7B,EAAU5zB,GAAuBhN,GACjCI,EAAOspB,GAAgBkX,EAAS5c,EAAO5jB,KAAKH,MAC5C,MAjCF,IAAK,yCACL,IAAK,yCACL,IAAK,uCACL,IAAK,6BACL,IAAK,6BACL,IAAK,kCACL,IAAK,sCACL,IAAK,2BACL,IAAK,gCACL,IAAK,mCACL,IAAK,+BACL,IAAK,yCACL,IAAK,6CACL,IAAK,qDACH2gC,EAAU7J,EACV32B,EAAOspB,GAAgBqN,EAAW/S,EAAO5jB,KAAKH,UAAM71F,EAAW2sH,MAAAA,OAAQ,EAARA,EAAU5uH,QAAQ63F,IACjF,MACF,IAAK,+BACH,GAAIuJ,GAAYvJ,KAAW+M,GAAoB/M,IAAU6M,GAAiB7M,IAAS,CACjF4gC,EAAU7J,EACV32B,EAAOspB,GAAiBkX,EAAmB9+B,MAAQkiB,EAAO5jB,KAAKH,MAC/D,MAEF2gC,EAAU5zB,GAAuBhN,GACjCI,EAAOspB,GAAgBkX,EAAS5c,EAAO5jB,KAAKH,MAC5C,MACF,IAAK,oCACH2gC,EAAU7J,EACV32B,EAAOspB,GAAiBkX,EAAmB9+B,MAAQkiB,EAAO5jB,KAAKH,MAC/D,MAKF,QACE2gC,EAAU5gC,EAAM0J,IAAKA,IACrBtJ,EAAOspB,GAAgBkX,EAAS5c,EAAO5jB,KAAKH,KAAMD,EAAM0J,KAe5D,OAZAtJ,EAAMtJ,MAAoC,QAA5BjoB,UAAAv7B,EAAA0wE,EAAOhkB,MAAM2C,+BAAU7L,aAAK,IAAAjoB,EAAAA,EAAImxB,EAAMlJ,MACpDsJ,EAAK8lB,aAAa9lB,GAClBA,EAAK4I,SAAWhJ,EAAMgJ,SAClBiF,GAA6B7N,KAC/BA,EAAKmI,cAAgB,MAEvBnI,EAAK4W,UAAYuJ,GAAkBngB,GACnC22B,MAAAA,GAAAA,EAAUhR,YAAY/lB,GACtB+2B,MAAAA,GAAAA,EAAU9Q,iBACV2a,MAAAA,GAAAA,EAAS3a,iBACTuD,GAAexpB,EAAOI,GAEfA,GwCtDMygC,CAAoB7gC,EAAOgkB,GAIlCiV,EAFkBrV,GAA6BxjB,GAEjBh4F,OAAOu4H,GAErC1d,EAAYmU,GAA0Bh3B,GAAM,GAE5CwgC,EAAUt3B,GAAQlJ,EAAKsJ,KAAQtJ,EAAKsJ,IAAKA,IAAOtJ,EAAKsJ,IAEvD+2B,GAA4B3yB,GAAiB2yB,KAC/CA,EAAyB/2B,IAAKuc,iBAC9BgT,EAAYjhG,QAAQyoG,IAGtB,MAAMxI,EAAsBjrB,GAAuB5M,GAEnD,GAAI63B,EAAqB,CACvB,MAAMjhB,EAAYuJ,GAAkB0X,GAChCA,EAAoBjhB,YAAcA,GACpCiM,EAAUjrF,QAAQgqF,GAAeiW,IAIrC,MAAMn3H,EAASmiH,EAAUz/G,QAAOg9D,GAAKA,EAAE0sB,OAAS0zC,EAAQ1zC,OAAMrpF,OAAS,EAAIm8F,EAAM0J,IAAMk3B,EAEnF9/H,GACFwtG,GAA+BxtG,GAAQqF,SAAQwsB,IAC7CA,EAAEqkF,UAAYuJ,GAAkB5tF,GAChCswF,EAAUjrF,QAAQgqF,GAAervF,OAIrC,MAAM44E,EAAa0sB,MAAAA,EAAAA,EAAuB73B,EAAKsJ,IACzCqQ,EXayC,EAC/C/Z,EACAI,EACAg4B,EACA0I,EACAzI,KAEA,MAAMte,EAAU,IAAI2d,GAQpB,OANA3d,EAAQ4d,cAAc3V,GAAegV,GAAiBh3B,EAAOI,KAC7D2Z,EAAQrzG,IAAIo9G,GAAU6N,iBAAkBxO,GAAa/iB,IACrD2Z,EAAQrzG,IAAIo9G,GAAUkP,iBAAkBoF,GACxCre,EAAQrzG,IAAIo9G,GAAUoS,mBAAoB4K,GAC1C/mB,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBqC,GAEjCte,GW5BSgnB,CACdz3B,GAAQiC,GAAcA,EAAW7B,IAAO6B,EACxCnL,EACA23B,EACAkB,EAAYjxH,KAAI2qB,IACdA,EAAEqkF,UAAYuJ,GAAkB5tF,GAEhC,OADWqvF,GAAervF,MAG5BswF,GASF,MANkB,WAAd7iB,EAAKH,MAAqB+N,EAC5B+L,EAAQrzG,IAAIo9G,GAAUuS,2BAA4B,CAACrU,GAAe/W,GAAe+C,MAC1D,cAAd5N,EAAKH,MAAwBygC,GACtC3mB,EAAQrzG,IAAIo9G,GAAUuS,2BAA4B,CAACrU,GAAe0e,KAG7D,CACL/+B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WCrFZwc,GAAiB,CAAC7gI,EAAY6jH,WACzC,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,EAEF,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,GAAI4pG,GAAYnB,KAAiBlG,GAAuBkG,GAEtD,GAAIO,GAAcP,EAAYc,KAAO,CACnC,MAAMwH,EtF80BkE,CAAC,QAAS,QAAS,SAAU,YsF70BrG,IAAKtI,EAAYiC,OAAOvwD,OAAMmmB,GAAK4oC,GAAS5oC,IAAMywC,EAAM3zF,SAASkjD,EAAEw/B,QACjE,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,uDAAuD8I,EAAYwN,kDAG7E,GAAIxN,EAAYiC,OAAOrnG,QAAOi9D,IAAM4oC,GAAS5oC,KAAI58D,OAAQ,CAC9D,MAAMk9F,EAAeuN,GAA+B1F,EAAYc,KAAMlmG,OAAOumG,IACvEwH,EAAiBxQ,EAAaA,EAAa54F,QAAQygG,GAAe,IAAM,GACxEgI,EAAkB7P,EAAaA,EAAa54F,QAAQygG,GAAe,IAAM,GAC/E,GAAI2I,EAAetR,OAAS2Q,EAAgB3Q,OAAS+4B,GAAgCpwB,EAAYc,IAAMkH,EAAgB3Q,KAAM,IAC3H,OAAOkoB,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,wCAAwC8Q,EAAgBwF,iEAAiE7E,EAAe6E,aAM3J,IAAKmS,GAAgB3f,EAAa5C,IAChC,OAAOmiB,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,0EAGrF,IACG4C,GAAuBkG,KACvBiF,GAAcjF,IAAqD,IAApCzoG,EAAMwhG,YAAYkJ,OAAOhnG,QAAgB1D,EAAMwhG,YAAYkJ,OAAO,KAAOjC,IAAgBsC,GAAUtC,IAEnI,OAAOuf,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,2DAGrF,GAAI3/F,EAAMouF,WfiI+C,EAACpuF,EAAcyoG,WACxE,KAAmB,QAAdt1D,EAAAnzC,EAAM0kG,gBAAQ,IAAAvxD,OAAA,EAAAA,EAAEzvC,QACnB,OAAO,EAET,MAAM6vH,EAAQplB,GAA+B1F,GAAa5gG,KAAI2qB,GAAKA,EAAEu6D,OACrE,OAAO/sF,EAAM0kG,SACVrhG,OAAO4tH,IACPppH,KAAI+yD,GAAKA,IACTpnB,MAAKonB,IAAI,IAAAznB,EAAAu7B,EAAA4X,EAAApnD,EAAC,OAAAq0F,EAAMn2G,SAAiC,UAAxBw9C,EAAE82D,4BAAsB,IAAAv+E,OAAA,EAAAA,EAAA45C,OAASwmC,EAAMn2G,SAAkD,QAAzC8hB,EAAkC,QAAlConD,EAAsB,QAAtB5X,EAAA9T,EAAE82D,4BAAoB,IAAAhjD,OAAA,EAAAA,EAAE0lC,kBAAU,IAAA9tB,OAAA,EAAAA,EAAEijB,WAAK,IAAArqE,OAAA,EAAAA,EAAA6tD,UezI9F+zC,CAA4C9gI,EAAOyoG,KAAiBob,EAAOkd,oBAChG,OAAO/Y,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,sHAIf,MAAMzR,Ef5BkC,EAACwW,EAAsB,GAAImN,EAAQ,KACpEmf,GAAoBtsB,GACxBrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBtf,QAAUA,IAC5ClqF,OAAO,GAAG,GeyBGq5G,CAA2BhhI,EAAM0kG,SAAU+D,EAAYoJ,OACvE,GAAI7xG,EAAMouF,WAAaF,GAAWulC,GAAmBvlC,IAAY6mC,GAAwB7mC,KAAa21B,EAAOkd,oBAC3G,OAAO/Y,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,kEAIf,MAAMshC,EAA2Br3B,GAAYnB,GAAeA,EAAYiC,OAAO,IAAMwC,GAAwBzE,IAAgBoE,GAAuBpE,QAAex+F,EAC7Ji3H,EAA6BD,EAA2Bpf,GAAeof,QAA4Bh3H,EACnGk3H,EAA4BxvB,GAAUlJ,IAAgBA,IAAgB+H,GAAkC/H,GAExGvnE,EAAS0oE,GAAYnB,GAAe4vB,GAA8Br4H,EAAMwhG,YAAaiH,GAAekvB,GAAqB33H,EAAOyoG,GAWtI,OATIy4B,IACFhgG,EAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUsS,gBAAiB/lC,UAAW,CAACgxC,KAChEhgG,EAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUkW,qBAAsB3pC,UAAW,CAACgxC,MAGnEC,GACFjgG,EAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUuS,2BAA4BhmC,UAAW,CAAC2xB,GAAe7hH,EAAMwhG,YAAY4N,aAAa/M,WAGpH,CACLb,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAOkhC,GACvB8iF,QAAS9iF,EACT+iF,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WC7DnB+c,GAA8BzhC,IAClC,OAAQA,GACN,KAAK4I,GAAkBG,uBACrB,OAAO,IAAIugB,GACb,KAAK1gB,GAAkBqG,iBACrB,OAAO,IAAIma,GACb,QACE,OAAO,IAAIwN,KAIX8K,GAAgC,CAAC7/B,EAA0BjS,KAC/D,GAAI+xB,GAA+B/xB,GAAW,CAC5C,MAAMkS,EAASkK,GAAuBnK,GAClCA,EAAY+H,IACZsB,GAAsBrJ,EAAajS,EAAS6kB,WAAY7K,IAAKgY,gBAAmBpS,GAAqB3N,EAAajS,EAAS6kB,WAAY7K,IAAKoY,SAEhJ,GAAIlgB,EAKF,OAJKA,EAAOmJ,aACVnJ,EAAQmJ,WAAaojB,KACrBvsB,EAAOmJ,WAAWrB,IAAM9H,GAEtBlS,EAAS6kB,WAAY7K,IAAKzJ,OAAUe,GAAgBW,YAAY1B,KAC3D2B,EAAOmJ,WAETC,GAAsBpJ,EAAOmJ,WAAYrb,EAAS6kB,WAAY7K,IAAKxc,OAAUoiB,GAAqB1N,EAAOmJ,WAAYrb,EAAS6kB,WAAY7K,IAAKoY,UAAa,KAGvK,OAAO9W,GAAsBrJ,EAAajS,EAAS6kB,WAAY7K,IAAKxc,OAAUoiB,GAAqB3N,EAAajS,EAAS6kB,WAAY7K,IAAKoY,UAAa,MAOnJ2f,GAA2B,CAAC/xC,EAAoBga,EAAkBua,eACtE,MAAM7jB,EAAOspB,GACXrgB,GAASK,KAASha,EAASuQ,OAASe,GAAgBgB,OAAOzhG,MANxC,CAACmvF,GACfA,EAASuQ,OAASe,GAAgBkB,QAAQjC,MAAiC,iBAAzBvQ,EAASkzB,YAKG8e,CAAehyC,IAAcga,EAAe5H,MAAS4H,EACxHha,EAASuQ,UACT71F,EACAslF,EAAS6kB,WAAYziB,SAyBvB,OAvBAsO,EAAKlT,KAAOwC,EAASxC,KACrBkT,EAAK4R,MAAQtiB,EAASsiB,MACtB5R,EAAKh3F,GAAKsmF,EAASoyB,QACnB1hB,EAAMtJ,MAAiC,QAAzBjoB,EAAkB,QAAlBv7B,EAAAo8C,MAAAA,OAAA,EAAAA,EAAUiT,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,aAAK,IAAAjoB,EAAAA,EAAI,GAC3CuxB,EAAM3H,OAA6B,QAApBhS,EAAAiJ,MAAAA,OAAQ,EAARA,EAAU6kB,kBAAU,IAAA9tB,OAAA,EAAAA,EAAEgS,OACrC2H,EAAKgW,OAAS1mB,MAAAA,OAAA,EAAAA,EAAU0mB,OACxBhW,EAAK4W,UAAYtnB,MAAAA,OAAA,EAAAA,EAAUsnB,UAC3B5W,EAAK4I,SAAWu4B,GAA2B7xC,EAAUuZ,mBAClB,2BAA/BvZ,EAASuZ,oBACV7I,EAAK4I,SAAmC3D,sBAAwB3V,EAAS2V,sBACtE4e,IACD7jB,EAAK4I,SAAmCwO,WAAayM,IAGtD5a,GAASjJ,KACVA,EAAgB0B,MAAOkH,SAAWu4B,GAA2B7xC,EAAUuZ,mBACpEvZ,EAASoR,QACXstB,GAAgBhuB,GACfA,EAAgB2K,WAAY1nF,KAAOqsE,EAASoR,MAC7CV,EAAK2K,WAAY/B,SAAW,IAAIogB,GAC/BhpB,EAAK2K,WAAY/B,SAAmCwO,WAAayM,IAG/D7jB,GAwBIuhC,GAAU,CAACxhI,EAAc+5H,EAAoB0H,KACxD,QAAex3H,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,GAAkB,CAC/F,MAAMX,EAAWwqC,EAAO7pC,UAAU,GAC5B4xB,EAA2BiY,EAAO7pC,UAAU18C,MAAK7uC,GAAKA,EAAEq9G,uCAExDzY,EAAM83B,GAA8BrhI,EAAMwhG,YAAcjS,GAExDmyC,EA5BwB,EAAClgC,EAAkBtR,EAAuB4zB,KAC1E,MAAM6d,EAAmBzxC,EAAUjyD,QAE7BsrE,EAAM83B,GAA8B7/B,EAAamgC,IAAsBxyB,GAAqB3N,EAAamgC,EAAkBvtB,WAAY7K,IAAKoY,SAC5IjO,EAAW4tB,GAAyBK,EAAmBp4B,EAAMua,GAC7D8d,EAAwBluB,EAASzqG,GAEjCy4H,EAAuB,CAAChuB,GAW9B,OAVAxjB,MAAAA,GAAAA,EAAWlqF,SAAQiuG,YACjB,MAAMtzG,WACJwyC,EAAA8gE,EAAMG,iCAAY7K,QAAoC,UAA5Bo4B,MAAAA,OAAA,EAAAA,EAAkBvtB,kBAAU,IAAA1lC,OAAA,EAAAA,EAAE66B,KACpDmK,EAASnK,IACT83B,GAA8B7/B,EAAayS,IAAU9E,GAAqB3N,EAAaogC,GAEvF3hC,EAAOqhC,GAAyBrtB,EAAOtzG,EAASmjH,GACtD4d,EAAMtjH,KAAK6hF,MAGNyhC,GAUSG,CAA0B7hI,EAAMwhG,YAAau4B,EAAO7pC,UAAWlwF,EAAM8jH,MAGnF,GAFAva,MAAAA,GAAAA,EAAKuc,iBAED2b,EAAa,CAGf,IAAIr2B,EAAyB,IAFb7b,EAAU6kB,WAAYziB,QAEJqX,GAAcO,IAASoC,GAAuBpC,GAAsBA,EAAKA,IAAOA,EAAOuB,GAAe+B,GAAuB60B,EAAM,KAErK,GAAIt2B,EAAY,CACdA,EAAapC,GAAcoC,IAAeuG,GAAUvG,GAAeA,EAA2BgE,aAAc/M,OAAU+I,EACtH,MAAM3C,EAAcwa,GAA2BjjH,EAAMwhG,YAAc4J,GACnE3C,EAAeg5B,EAAYr2B,WAAayW,GAAepZ,GAAiBuf,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,qBAQxJ,OAJIo6B,EAAO5V,YAAcR,GAAU6N,mBACjCiQ,EAAYr2B,WAAa2uB,EAAO3uB,YAG3Bs2B,EAAM75H,KAAI8qB,GAAKkvF,GAAelvF,GAAG,EAAMmvF,KAEhD,MAAO,IAGIggB,GAAU,CAAC9hI,EAAc+5H,SACrB9vH,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,IAC7E6pC,EAAO7pC,UAAUlqF,SAAQ07D,IACvB,MAAM+mC,EAAcwa,GAA2BjjH,EAAMwhG,YAAc9/B,GAAI,GACvE,GAAI+mC,EAAa,CACf,MAAMc,EAAMd,EAAYc,IACxBA,EAAIqc,YAAYnd,GAChBc,EAAIuc,qBAGDiU,EAAO7pC,WAET,GAuBI6xC,GAAuB,CAAC/hI,EAAc+5H,EAAoBpE,EAA2BjxB,EAA8B,MAC9H,QAAez6F,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,GAAkB,CAC/F,MAAM8xC,EAA6B,GAEnC,IAAIp2B,EAAW,EAsCf,OArCAmuB,EAAO7pC,UAAUlqF,SAAQrB,sBACvB,MAAM8jG,EAAcwa,GAA2BjjH,EAAMwhG,YAAc78F,GAAG,GACtE,GAAI8jG,EAAa,CAEf,GADyBmD,IAAanD,EAAY1b,MAAsB,SAAb4oC,GAAuB/pB,IAAanD,EAAY1b,KACrF,CAkBpB,GAjBI0b,EAAYI,SAASC,oBAAsBP,GAAkBI,uBhB4N7B,EAACjE,EAAsB,GAAI3X,IAChE2X,EAAS78F,KAAI+yD,GAAKA,IAAsBhkD,MAAKgkD,GAAKq2D,GAAkBr2D,IAAMA,EAAEupD,YAAcR,GAAUmP,oBAAsBl4D,EAAEu2D,oBAAoBpkC,OAASA,IgB5NlJk1C,CAA+Bv9B,EAAU+D,EAAY1b,OAAU0b,EAAYI,SAASgY,oBAAqBre,SAAU7L,SAAoB,QAAVxjD,EAAAxuC,EAAE69F,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,QAC3I8R,EAAY9R,MAAiE,QAAzDrQ,EAAkD,QAAlD5X,EAAA+5B,EAAYI,SAASgY,oBAAqBre,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,aAAK,IAAArQ,EAAAA,EAAI,GACjFmiB,EAAYI,SAAW,IAAI0tB,IAE3B9tB,EAAY9R,MAA6B,QAArBx3D,EAAY,QAAZD,EAAAv6B,EAAE69F,gBAAU,IAAAtjE,OAAA,EAAAA,EAAAy3D,aAAS,IAAAx3D,EAAAA,EAAA,IAGvCx6B,EAAEmkG,oBAAsBP,GAAkBI,yBAC5CF,EAAYI,SAAW,IAAI+zB,GAAsB/a,GAAepZ,KAElEA,EAAY9R,MAA6B,QAArBipB,EAAY,QAAZF,EAAA/6G,EAAE69F,gBAAU,IAAAkd,OAAA,EAAAA,EAAA/oB,aAAS,IAAAipB,EAAAA,EAAA,IAEvCnX,EAAYmC,aACdnC,EAAYmC,WAAW1nF,KAAOve,EAAEg8F,OAG9B8H,EAAYI,SAASC,oBAAsBP,GAAkBG,yBAC9DD,EAAYI,SAAmC3D,sBAAwBvgG,EAAEugG,sBACtE3C,GAAuBkG,IAAgBwF,GAAkBxF,IAAc,CACjDmF,GAA8BnF,GACtCL,cAAgBzjG,EAAEyjG,cAItCK,EAAYoO,UAAYuJ,GAAkB3X,GAC1Cu5B,EAAe5jH,KAAKyjG,GAAepZ,IACnCmD,EAAWnD,EAAY1b,UAKtBi1C,EAET,MAAO,IAGIE,GAAsB,CAACliI,EAAc+5H,KAChD,QAAe9vH,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,GAAkB,CAC/F,MAAM8xC,EAA6B,GASnC,OAPAjI,EAAO7pC,UAAUlqF,SAAQrB,IACvB,MAAM8jG,EAAcwa,GAA2BjjH,EAAMwhG,YAAc78F,GAAG,GAClE8jG,GACFu5B,EAAe5jH,KAAKyjG,GAAepZ,OAIhCu5B,EAET,MAAO,IAGIG,GAAoB,CAACniI,EAAc45G,KAC9C,MAAMmgB,EAASL,GAAU9f,EAAS+J,GAAUkS,kBAC5C,QAAe5rH,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,GAAkB,CAC/F,MAAM4yB,EAAwB,GAS9B,OAPAiX,EAAO7pC,UAAUlqF,SAAQrB,IACvB,MAAM8jG,EAAcwa,GAA2BjjH,EAAMwhG,YAAc78F,GAAG,GAClE8jG,IACFA,EAAYoO,UAAYuJ,GAAkB3X,GAC1Cqa,EAAU1kG,KAAKyjG,GAAepZ,QAG3Bqa,EAET,MAAO,IAGIsf,GAA6B,CAACpiI,EAAc45G,KACvD,MAAM1pB,EAAwB,GAW9B,OAVA0pB,EACGv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcR,GAAUuS,6BACxClwH,SAAQyzF,UACK,QAAZtmD,EAAAsmD,EAAGvJ,iBAAS,IAAA/8C,GAAAA,EAAEntC,SAAS07D,IACrB,MAAM+mC,EAAcwa,GAA2BjjH,EAAMwhG,YAAc9/B,GAAI,GACnE+mC,GACFvY,EAAU9xE,KAAKyjG,GAAepZ,UAI/BvY,GAGImyC,GAAuCzoB,IAClD,MAAM8iB,EvFykBwD,CAAC,QAAS,QAAS,SAAU,WAAY,QAAS,YuFxkB1G4F,EAAmB1oB,EAAQv2G,QAAOo2F,IAAO,CAACkqB,GAAUmW,cAAenW,GAAU2R,iBAAkB3R,GAAU4R,2BAA2Bn4G,SAASq8E,EAAG0qB,aACtJ,OACEme,EAAiB5+H,OAAS,GAC1B,CAACigH,GAAU6N,iBAAkB7N,GAAUkP,kBAAkBz1G,SAASklH,EAAiB,GAAGne,YACtFme,EAAiB,GAAGpyC,UAAWxsF,OAAS,GACxCg5H,EAAqBt/G,SAASklH,EAAiB,GAAGpyC,UAAW,GAAG4P,OAIvDyiC,GAA+C,CAAC/gC,EAA0BghC,EAA4BC,WACjH,MAAMC,EAA4BF,EAAa,GAAGtyC,UAAW,GACvDyyC,EAAoBF,EAAmB,GAAGvyC,UAAW,GACrDuY,EAAcwa,GAA2BzhB,EAAamhC,GAC5Dl6B,EAAY9R,MAAqD,QAA7CxjD,EAAAuvF,EAA0BlgC,SAAU7L,aAAS,IAAAxjD,EAAAA,EAAA,GACjEs1D,EAAYnQ,OAASoqC,EAA0BpqC,OAC/CmQ,EAAYx/F,GAAKy5H,EAA0B/gB,QAC3ClZ,EAAYwN,OAASysB,EAA0BzsB,OAC/CwsB,EAAmB,GAAGvyC,UAAWxsF,OAAS,EAC1C++H,EAAmB,GAAGvyC,UAAW9xE,KAAKyjG,GAAepZ,KAG1Cm6B,GAAuB,CAAC5iI,EAAc+5H,EAAoB/Y,iBACrE,MAAM6hB,EAAuB9I,EAAO7pC,UAAoB,SAAT8wB,EAAkB,EAAI,GAC/DxuF,EAAIywF,GAA2BjjH,EAAMwhG,YAAcqhC,GAAsB,GAEzEC,EAAmCjhB,GAAervF,GACxD,IAAI2xF,EAEA0e,EAAqB/5B,oBAAsBP,GAAkBI,wBAC/Dn2E,EAAEq2E,SAAW,IAAI+zB,GAAsB/a,GAAervF,IACtD2xF,EAAYR,GAAUmP,oBACb+P,EAAqB/5B,oBAAsBP,GAAkBK,uBACtEp2E,EAAEq2E,SAAW,IAAI+X,GAAqBiB,GAAervF,IACrD2xF,EAAYR,GAAUmP,qBAEtBtgG,EAAEq2E,SAAW,IAAI0tB,GACjBpS,EAAYR,GAAUmP,oBAGxBtgG,EAAE8lE,OAAwC,QAA/BnlD,EAAA0vF,EAAqBvqC,cAAU,IAAAnlD,EAAAA,EAAA,GAC1C3gB,EAAEyjF,OAAwC,QAA/BvnC,EAAAm0D,EAAqB5sB,cAAU,IAAAvnC,EAAAA,EAAA,GAC1Cl8C,EAAEmkE,MAAgD,QAAxCz3D,EAA+B,QAA/BonD,EAAAu8C,EAAqBrgC,gBAAU,IAAAlc,OAAA,EAAAA,EAAAqQ,aAAS,IAAAz3D,EAAAA,EAAA,GAIlD,MAAO,CAAEilF,UAAAA,EAAWj0B,UAFFue,GAAYj8E,GAAK,CAACqvF,GAAervF,IAAM,CAACswG,EAAkCjhB,GAAervF,MAkBhGuwG,GAAuC,CAAC/iI,EAAc45G,EAAuBuK,KACxF,MAgBM/uG,EAAuB,GACvBktH,EAAmB1oB,EAAQv2G,QAAQgyH,GAAmBA,EAAGlR,YAAcA,IAgC7E,OA/BIme,EAAiB5+H,QACnB4+H,EAAiBt8H,SAASyzF,IACxB,MAAMupC,EAA8BvpC,EAAGvJ,UAAWroF,KAAIlD,GAAKA,EAAEupF,UAK7D,GAJAluF,EAAM0kG,SAAUtmF,QAAQ4kH,GAExB5tH,EAAOgJ,KAAK,CAAE+lG,UAAW1qB,EAAG0qB,UAAWj0B,UAAWuJ,EAAGvJ,YhB5Kb,EAACwU,EAAsB,KAAgBA,EAASlxD,MAAKonB,GAAK44D,GAAoB54D,KgB8KlHqoE,CAA+BD,GAA8B,CAC/D,MAAM9yC,EAAY8yC,EAA4Bn7H,KAAI+yD,GAAKA,EAAE82D,uBACrDvN,IAAcR,GAAU4R,2BAC1BrlC,EAAUlqF,SAAQrB,GAAKk8H,GAAe,IAAK7gI,EAAOouF,WAAW,GAAS,CAAEyR,MAAOl7F,MAI7Ew/G,IAAcR,GAAUmW,gBAC1B1kH,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAU6N,iBAAkBthC,UAAWA,IAChE96E,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUsS,gBAAiB/lC,UAAW,CAACA,EAAU,OAlC3B,CAAC8yC,IACtDA,EAA4B3/H,OAAOowH,IAAoBztH,SAAQ40D,IAC7D,MAAMj2D,EAAIi2D,EAAEu2D,oBAAoBnP,qCAC1BkhB,EAAwBzO,GAAsDz0H,EAAM0kG,SAAW//F,GACrG,GAAIu+H,GAAyBA,EAAsBj6H,KAAO2xD,EAAE3xD,GAAI,CAC9D,MAAMk6H,EAAmB1O,GAAsDuO,EAA6Br+H,GACtGy+H,EAAuB1O,GAAyBsO,EAA6BG,GAE7E/E,EAAmBviE,KAAKG,MAAMH,KAAKC,UAAUsnE,EAAqBjS,sBACxE4C,GAAsDqK,GACtD8E,EAAsB/R,oBAAoBnP,qCAAuCoc,EACjF8E,EAAsBxR,qBAAsB1P,qCAAuCoc,OA0BnF7J,CAA+CyO,OAC1C,CACL,MAAM9yC,EhBjO0B,EAACwU,EAAsB,GAAI1kG,IAC1D0kG,EAASrhG,OAAO4tH,IAAmBppH,KAAI+yD,IAC5C,MAAMj2D,EAAKi2D,EAAsBu2D,oBACjC,OAAOnxH,EAAQ6hH,GAAeoB,GAA2BjjH,EAAMwhG,YAAc78F,IAAOA,KgB8N9D0+H,CAAyBL,EAA6BhjI,GAAO6H,KAAIlD,GAAKk3D,KAAKG,MAAMH,KAAKC,UAAUn3D,MAClH6wH,GAA6Bx1H,EAAM0kG,SAAUxU,GAC7C96E,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUuS,2BAA4BhmC,UAAWA,IAEtEi0B,IAAcR,GAAUmW,eAC1B1kH,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUsS,gBAAiB/lC,UAAW,CAACA,EAAU,UAK3E96E,GCrYI8tC,GAAQljD,gBACnB,QAAqBiK,IAAjBjK,EAAMikH,QAAgD,IAAxBjkH,EAAMikH,OAAOvgH,OAE7C,OADA1D,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM45G,EAAU55G,EAAMikH,OAAOjsF,MACvB+rF,EAAOgE,GAAU/nH,EAAO45G,GAExB0pB,EAAiB,CACrB9hC,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAAA,EACAC,QAAS,GACTC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,GACRmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,SAErBj2B,UAAWpuF,EAAMouF,UACjBI,QAASxuF,EAAMwuF,QACfkW,SAAU1kG,EAAM0kG,SAChB4f,iCAAkCtkH,EAAMskH,kCAG1C,GAAI+d,GAAoCzoB,GAAU,CAChD,IAAIwc,EAMJ,GALAA,EAAY,IAAKkN,GACjBlN,EAAUrS,KAAO,GACjBqS,EAAUpS,QAAU,GACpBoS,EAAUnS,OAAS,GAEfrK,EAAQ,GAAGuK,YAAcR,GAAU6N,iBAAkB,CACvD,MAAMrzF,EAAMy7E,EAAQhjG,MAAM6iF,GAAmBA,EAAG0qB,YAAcR,GAAUkW,uBAAuB3pC,UAAU,GACnGqzC,EAAuB3pB,EAAQ,GAAG1pB,UAAU,GAClDkmC,EAAY8E,GAAe9E,EAAW,CACpCv2B,MAAO1hE,EACP8hE,KAAM,CAAEH,KAAMyjC,EAAqBzjC,KAAM/S,KAAMw2C,EAAqBx2C,KAAM4E,QAAS,QAASqO,0BAA2BujC,EAAqBvjC,6BAE9IuiC,GAA6CviI,EAAMwhG,YAAaoY,EAASwc,EAAUlS,GAAIhjF,aAEvFk1F,EAAYyK,GAAezK,EAAW,CAAEv2B,MAAO+Z,EAAQ,GAAG1pB,UAAU,KAGtE,MAAMszC,EAAiBC,GAAoB7pB,GAC3C,GAAI4pB,EAAe9/H,OAAQ,CACzB,MAAMggI,EAAwBF,EAC3B37H,KAAKwtH,GAAmBA,EAAGnlC,WAAa,KACxC5yB,OACAz1D,KAAKlD,GAAgBysH,GAA2BkS,EAAQ5+B,SAAU//F,EAAEooF,QACpEzvB,OACAz1D,KAAI+yD,GAAKA,EAAE3xD,KACX5F,OAAOu4D,SAEV0nE,EAAQ5+B,SAAyB,QAAdh2B,EAAA1uE,EAAM0kG,gBAAQ,IAAAh2B,OAAA,EAAAA,EAAErrE,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,MAM9F,OAHAq6H,EAAQpf,GAAIhjF,OAAS,IAAIsiG,KAAmBpN,EAAUlS,GAAIhjF,QAC1DoiG,EAAQtf,QAAU,IAAIwf,KAAmBpN,EAAUlS,GAAIhjF,QAEhDoiG,EAGT,MAAMpiG,EAAS,IAAIq2F,GAEnBr2F,EAAO36B,IAAIo9G,GAAUkP,iBAAkBiP,GAAQ9hI,EAAO05H,GAAU9f,EAAS+J,GAAUkP,oBACnF3xF,EAAO36B,IAAIo9G,GAAU6N,iBAAkBgQ,GAAQxhI,EAAO05H,GAAU9f,EAAS+J,GAAU6N,kBAAmBkI,GAAUx4F,EAAO04E,QAAS+J,GAAU6N,oBAE1I5X,EACGv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUoP,qBACtD/sH,SAASyzF,GAAmBv4D,EAAO04E,QAAQx7F,KAAK,CAAE+lG,UAAWR,GAAUoP,mBAAoB7iC,UAAW6xC,GAAqB/hI,EAAOy5F,EAAI,YAEzIv4D,EAAO36B,IACLo9G,GAAUqP,kBDwFmB,EAAChzH,EAAc+5H,EAAoB4J,EAA+BC,SAClF35H,IAAX8vH,QAA6C9vH,IAArB8vH,EAAO7pC,gBAAmDjmF,IAAxB8vH,EAAO7pC,UAAU,IAC7E6pC,EAAO7pC,UAAUlqF,SAAQ07D,sBACvB,MAAMlvC,EAAIywF,GAA2BjjH,EAAMwhG,YAAc9/B,GAAI,GAEzDkiE,aAAoBrN,IACtB/jG,EAAG8lE,OAAgD,QAAvC5pB,EAA+B,UAA/Bl8C,EAAGq2E,SAASgY,2BAAmB,IAAA1tE,OAAA,EAAAA,EAAEmlD,cAAM,IAAA5pB,EAAAA,EAAI,GACvDl8C,EAAGyjF,OAAgD,QAAvC/2E,EAA+B,UAA/B1M,EAAGq2E,SAASgY,2BAAmB,IAAAv6B,OAAA,EAAAA,EAAE2vB,cAAM,IAAA/2E,EAAAA,EAAI,GACvD1M,EAAGmkE,MAAwD,QAAhDipB,UAAAF,EAAiC,UAAjCltF,EAAGq2E,SAASgY,2BAAqB,IAAA1hF,OAAA,EAAAA,EAAAqjE,+BAAU7L,aAAK,IAAAipB,EAAAA,EAAI,GAC/DptF,EAAGq2E,SAAW,IAAI0tB,IAElB/jG,EAAGq2E,SAAW,IAAI+6B,EAAS/hB,GAAervF,IAE5CmxG,EAAkBzzC,UAAW9xE,KAAKyjG,GAAervF,OAE5CmxG,EAAkBzzC,WAEpB,GCxGL2zC,CAAkB7jI,EAAO05H,GAAU9f,EAAS+J,GAAUqP,mBAAoB0G,GAAUx4F,EAAO04E,QAAS+J,GAAUqP,mBAAoBpS,KAGpIhH,EAAQv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUmP,qBAAoB9sH,SAASyzF,GAAmBv4D,EAAO04E,QAAQx7F,KAAKwkH,GAAqB5iI,EAAOy5F,EAAI,WAElKv4D,EAAO36B,IAAIo9G,GAAUoS,mBAAoBmM,GAAoBliI,EAAO05H,GAAU9f,EAAS+J,GAAUoS,sBACjG70F,EAAO36B,IAAIo9G,GAAUkS,iBAAkBsM,GAAkBniI,EAAO45G,IAEhE,MAAMkqB,EAAmE,QAA7Cx9C,EAAAozC,GAAU9f,EAAS+J,GAAUsS,wBAAgB,IAAA3vC,OAAA,EAAAA,EAAE4J,UACvE4zC,IACF5iG,EAAO36B,IAAIo9G,GAAUsS,gBAAiB6N,GACtC5iG,EAAO36B,IAAIo9G,GAAUqS,oBAAqB,CAAC8N,EAAoB,MAGjE5iG,EAAO36B,IAAIo9G,GAAUuS,2BAA4BiB,GAAuCn3H,EAAMwhG,YAAam4B,GAAgCz4F,EAAO04E,WAClJ14E,EAAO04E,QAAQx7F,KAAK,CAAE+lG,UAAWR,GAAUuS,2BAA4BhmC,UAAWkyC,GAA2BpiI,EAAO45G,KAEpH,MAAM4pB,EAAiBC,GAAoB7pB,GAC3C,GAAI4pB,EAAe9/H,OAAQ,CACzB,MAAMggI,EAAwBF,EAC3B37H,KAAKwtH,GAAmBA,EAAGnlC,WAAa,KACxC5yB,OACAz1D,KAAKlD,GAAgBysH,GAA2BkS,EAAQ5+B,SAAU//F,EAAEooF,QACpEzvB,OACAz1D,KAAI+yD,GAAKA,EAAE3xD,KACX5F,OAAOu4D,SAEV0nE,EAAQ5+B,SAAyB,QAAdxlE,EAAAl/B,EAAM0kG,gBAAQ,IAAAxlE,OAAA,EAAAA,EAAE77B,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,MAM9F,OAHAq6H,EAAQpf,GAAIhjF,OAAS,IAAIsiG,KAAmBtiG,EAAO6R,SACnDuwF,EAAQtf,QAAU,IAAIwf,KAAmBtiG,EAAO6R,SAEzCuwF,GAGHG,GAAuB7pB,GACpBA,EAAQv2G,QAAQgyH,GAAmB,CAAC1R,GAAUmW,cAAenW,GAAU2R,iBAAkB3R,GAAU4R,2BAA2Bn4G,SAASi4G,EAAGlR,aClG7I4f,GAA6Bt7B,IAC1B,CACL0b,UAAWR,GAAUsS,gBACrB/lC,UAAW,CAAC2xB,GAAepZ,IAC3Bu7B,mBAAmB,IAIjBC,GAAyB,CAACjkI,EAAYyoG,MACtCzoG,EAAM8jH,KAAKthF,WAAW,WAAaimE,EAAYI,SAASC,oBAAsBP,GAAkBG,0BAG5FqC,GAAUtC,GC5Bdy7B,GAAgB,CAACz7B,EAA0BnQ,KAC/C,IAAKA,EACH,MAAO,GAGT,GAAyB,WAArBmQ,EAAY3I,KACd,OAAOxH,EAAO1uF,cAIhB,OADe0uF,EAAO//E,MAAM,KACd1Q,KAAI,CAACo6F,EAAOxhF,IAAWA,EAAQ,EAAIwhF,EAAMr4F,cAAgBq4F,IAAQxpF,KAAK,MCdzE0rH,GAAmB,CAACnkI,EAAY6jH,eAC3C,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,EAEF,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMokI,EAA0Bj2B,GAA+B1F,GAAaplG,QAAOi9D,GAAKkoC,GAAqCloC,KAAI58D,OAAS,EAE1I,IACG0gI,YACDjxF,EAAAs1D,EAAYI,+BAAUC,qBAAsBP,GAAkBI,yBAC1C,QAApBj6B,EAAA+5B,EAAYI,gBAAQ,IAAAn6B,OAAA,EAAAA,EAAEo6B,qBAAsBP,GAAkBK,sBAE9D,OAAO5oG,EAGT,MAAMkhC,EAASg4F,GAAuBzwB,GAEtC,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAOkhC,GACvB8iF,QAAS9iF,EACT+iF,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAAS/9B,EAAAtmF,EAAMkkH,yBAAIG,WC3BnBggB,GAAqB,CAACzjC,EAA6B0jC,KAC3B,IAAxB1jC,EAAal9F,SAGjBk9F,MAAAA,GAAAA,EAAc56F,SAAQwsB,IACpB8xG,EAAU/9H,IAAIisB,EAAEq2E,SAASC,mBACzBu7B,GAAmB7xG,EAAEk4E,OAAQ45B,QAepBC,GAAkB,CAACvkI,EAAY6jH,aAC1C,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,YAA6Bt1D,EAAAs1D,EAAYI,+BAAUC,qBAAsBP,GAAkBmG,qBAE7F,OADA1uG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAnB0B,CAACyoG,UAC3B,MAAM67B,EAAY,IAAIpvF,IAOtB,OANAovF,EAAU/9H,IAAIkiG,EAAYI,SAASC,mBACnCu7B,GAAmB57B,EAAYiC,OAAQ45B,GAEnC77B,EAAYmC,YACdy5B,WAAmBlxF,EAAAs1D,EAAYmC,iCAAYF,OAAQ45B,GAE3B,IAAnBA,EAAUr5D,MAAc,IAAIq5D,GAAW,KAAO/7B,GAAkBmG,sBAWlE81B,CAAa/7B,GAChB,OAAOuf,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,4EAGrF,MAAMz+D,ElBoO6B,EAACsgE,EAA0BiH,KAC9D0F,GAA+B1F,GAAaziG,SAAQwsB,GAAMA,EAAEq2E,SAAW,IAAI+X,GAAqBiB,GAAervF,MAE3Gi2E,EAAYmC,YAAcnC,EAAYmC,WAAWF,OAAOhnG,OAAS,GACnE+kG,EAAYmC,WAAWF,OAAO1kG,SAAQs6D,GAAK6tC,GAA+B7tC,GAAGt6D,SAAQwsB,GAAMA,EAAEq2E,SAAW,IAAI+X,GAAqBiB,GAAervF,QAElJ,MAAMonF,EAAU,IAAI2d,GACpB3d,EAAQrzG,IAAIo9G,GAAUqP,kBAAmBhQ,GAAava,IAEtD,MAAM8wB,EAAcC,GAA2B/wB,GAM/C,OALI8wB,GACF3f,EAAQrzG,IAAIo9G,GAAUkS,iBAAkB,CAAC0D,IAG3C3f,EAAQrzG,IAAIo9G,GAAUqS,oBAAqB,CAACnU,GAAepZ,GAAa,KACjEmR,EAAQ7mE,SkBnPA0xF,CAAsBzkI,EAAMwhG,YAAaiH,GAExD,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAOkhC,GACvB8iF,QAAS9iF,EACT+iF,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAAS31C,EAAA1uE,EAAMkkH,yBAAIG,WChCZphE,GAAQjjD,cACnB,QAAmBiK,IAAfjK,EAAM+jH,MAA4C,IAAtB/jH,EAAM+jH,KAAKrgH,OAEzC,OADA1D,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM45G,EAAU55G,EAAM+jH,KAAK/rF,MACrBisF,EvDdmB,EAACjkH,EAAYkhC,KACtC,MAAM+iF,EAASjkH,EAAMikH,OAASjkH,EAAMikH,OAAS,GAG7C,OAFAA,EAAO7lG,KAAKy9C,KAAKG,MAAMH,KAAKC,UAAU56B,KAED+iF,GuDUtBygB,CAAY1kI,EAAO45G,GAE5B0pB,EAAiB,CACrB9hC,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAS,GACTC,OAAAA,EACAC,GAAI,CACFhjF,OAAQ,GACRmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,SAErBj2B,UAAWpuF,EAAMouF,UACjBI,QAASxuF,EAAMwuF,QACfkW,SAAU1kG,EAAM0kG,SAChB4f,iCAAkCtkH,EAAMskH,kCAG1C,GAAI+d,GAAoCzoB,GAAU,CAChD,IAAIwc,EACJA,EAAY,IAAKkN,GACjBlN,EAAUrS,KAAO,GACjBqS,EAAUpS,QAAU,GACpBoS,EAAUnS,OAAS,GAEnB,MAAMqe,EAAmB1oB,EAAQv2G,QAAQo2F,IAAoB,CAACkqB,GAAUmW,cAAenW,GAAU2R,iBAAkB3R,GAAU4R,2BAA2Bn4G,SAASq8E,EAAG0qB,aAEpK,GAAIme,EAAiB,GAAGne,YAAcR,GAAU6N,iBAC9C4E,EAAYyK,GAAezK,EAAW,CAAEv2B,MAAOyiC,EAAiB,GAAGpyC,UAAU,SACxE,CACL,MAAM/xD,EAAMmkG,EAAiB1rH,MAAM6iF,GAAmBA,EAAG0qB,YAAcR,GAAUkW,uBAAuB3pC,UAAU,GAC5GqzC,EAAuBjB,EAAiB,GAAGpyC,UAAU,GAC3DkmC,EAAY8E,GAAe9E,EAAW,CACpCv2B,MAAO1hE,EACP8hE,KAAM,CAAEH,KAAMyjC,EAAqBzjC,KAAM/S,KAAMw2C,EAAqBx2C,KAAM4E,QAAS,QAASqO,0BAA2BujC,EAAqBvjC,6BAE9IuiC,GAA6CviI,EAAMwhG,YAAa8gC,EAAkBlM,EAAUlS,GAAIhjF,QAGlG,MAAMsiG,EAAiB,IAClBT,GAAqCO,EAAS1pB,EAAS+J,GAAUmW,kBACjEiJ,GAAqCO,EAAS1pB,EAAS+J,GAAU2R,qBACjEyN,GAAqCO,EAAS1pB,EAAS+J,GAAU4R,4BACpElyH,QAAOo2F,UAAM,OAAc,QAAdtmD,EAAAsmD,EAAGvJ,iBAAW,IAAA/8C,OAAA,EAAAA,EAAAzvC,UAK7B,OAHA4/H,EAAQpf,GAAIhjF,OAAS,IAAIsiG,KAAmBpN,EAAUlS,GAAIhjF,QAC1DoiG,EAAQtf,QAAU,IAAIwf,KAAmBpN,EAAUlS,GAAIhjF,QAEhDoiG,EAGT,MAAMpiG,EAAS,IAAIq2F,GAEnBr2F,EAAO36B,IAAIo9G,GAAUkP,iBAAkBiP,GAAQ9hI,EAAO05H,GAAU9f,EAAS+J,GAAU6N,oBACnFtwF,EAAO36B,IAAIo9G,GAAU6N,iBAAkBgQ,GAAQxhI,EAAO05H,GAAU9f,EAAS+J,GAAUkP,kBAAmB6G,GAAUx4F,EAAO04E,QAAS+J,GAAU6N,oBAE1I5X,EAAQv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUqP,oBAAmBhtH,SAASyzF,GAAmBv4D,EAAO04E,QAAQx7F,QNkQ3F,EAACpe,EAAc+5H,WAChD,MAAM3kH,EAAuB,GAS7B,OAPgB,QAAhB+9B,EAAA4mF,EAAO7pC,iBAAS,IAAA/8C,GAAAA,EAAEntC,SAAQrB,IACxB,MAAM6tB,EAAIywF,GAA2BjjH,EAAMwhG,YAAc78F,GAAG,GACtDy0H,EAA2BvX,GAAervF,GAChDA,EAAEq2E,SAAW,IAAI0tB,GACjBnhH,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUmP,mBAAoB5iC,UAAW,CAACkpC,EAA0BvX,GAAervF,SAGvGpd,GM5Q6HuvH,CAAoB3kI,EAAOy5F,MAE/JmgB,EAAQv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUmP,qBAAoB9sH,SAASyzF,GAAmBv4D,EAAO04E,QAAQx7F,KAAKwkH,GAAqB5iI,EAAOy5F,EAAI,WAElK,MAAMmrC,EtByFgC,EAAC10C,EAAwB,KAA0BA,EAAWroF,KAAIlD,GAAKA,EAAEupF,UsBzFvD22C,CACtDjrB,EACGv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAU2R,mBACtDztH,KAAK4xF,GAAmBA,EAAGvJ,WAAa,KACxC5yB,QAGLs8C,EACGv2G,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUoP,qBACtD/sH,SAASyzF,GACRv4D,EAAO04E,QAAQx7F,KAAK,CAAE+lG,UAAWR,GAAUoP,mBAAoB7iC,UAAW6xC,GAAqB/hI,EAAOy5F,EAAI,OAAQmrC,OAGtH1jG,EAAO36B,IAAIo9G,GAAUoS,mBAAoBmM,GAAoBliI,EAAO05H,GAAU9f,EAAS+J,GAAUoS,sBACjG70F,EAAO36B,IAAIo9G,GAAUkS,iBAAkBsM,GAAkBniI,EAAO45G,IAEhE,MAAMkrB,EAAY5jG,EAAO17B,IAAIm+G,GAAU6N,kBAEvC,MAD6CsT,EAAU50C,YAAc40C,EAAU50C,UAAUxsF,SAAiBohI,EAAU50C,UAAU,GAAGimB,UAE/Hj1E,EAAO36B,IAAIo9G,GAAUsS,gBAAiB,CAAC6O,EAAU50C,UAAW,KAC5DhvD,EAAO36B,IAAIo9G,GAAUqS,oBAAqB,CAAC8O,EAAU50C,UAAW,SAC3D,CACL,MAAM4zC,EAAgF,QAA1Dx9C,EAA6C,QAA7C5X,EAAAgrD,GAAU9f,EAAS+J,GAAUsS,wBAAgB,IAAAvnD,OAAA,EAAAA,EAAEwhB,iBAAW,IAAA5J,OAAA,EAAAA,EAAAjjF,QAAOsB,GAAKs+G,GAA2BjjH,EAAMwhG,YAAa78F,GAAG,KAC/Im/H,IACF5iG,EAAO36B,IAAIo9G,GAAUsS,gBAAiB,CAAC6N,EAAoB,GAAIA,EAAoB,IAAIzgI,OAAOu4D,UAC9F16B,EAAO36B,IAAIo9G,GAAUqS,oBAAqB,CAAC8N,EAAoB,IAAIzgI,OAAOu4D,WAI9E16B,EAAO36B,IAAIo9G,GAAUuS,2BAA4Bh1F,EAAO17B,IAAIm+G,GAAU6N,kBAAkBthC,WAAa,IACrGhvD,EAAO36B,IAAIo9G,GAAUuS,2BAA4BiB,GAAuCn3H,EAAMwhG,YAAam4B,GAAgCz4F,EAAO04E,WAClJ14E,EAAO36B,IAAIo9G,GAAUuS,2BAA4BkM,GAA2BpiI,EAAO45G,IAEnF,IAAI4pB,EAAiB,IAChBT,GAAqCO,EAAS1pB,EAAS+J,GAAUmW,kBACjEiJ,GAAqCO,EAAS1pB,EAAS+J,GAAU2R,qBACjEyN,GAAqCO,EAAS1pB,EAAS+J,GAAU4R,4BACpElyH,QAAOo2F,UAAM,OAAc,QAAdtmD,EAAAsmD,EAAGvJ,iBAAW,IAAA/8C,OAAA,EAAAA,EAAAzvC,UAS7B,OAPA8/H,EAAiBnN,GAAeiN,EAASE,EAAgB7f,GAAU6N,kBACnEgS,EAAiBnN,GAAeiN,EAASE,EAAgB7f,GAAUuS,4BACnEsN,EAAiBnN,GAAeiN,EAASE,EAAgB7f,GAAUsS,iBAEnEqN,EAAQpf,GAAIhjF,OAAS,IAAIsiG,KAAmBtiG,EAAO6R,SACnDuwF,EAAQtf,QAAU,IAAIwf,KAAmBtiG,EAAO6R,SAEzCuwF,GCxHF,IACHyB,GADOC,IAAgB,EAM3B,MA0BaC,GAA8B,CAACC,EAAqBC,GAAc,aAG7E,GAFAH,GAAgBG,IAEY,QAAvBhyF,EAAA+xF,MAAAA,OAAA,EAAAA,EAAgB7kI,aAAO,IAAA8yC,OAAA,EAAAA,EAAAi8D,cAC1B,MAAM,IAAI55E,MAAM,6CAGlB,MAAM45E,EAA6B,CACjCoV,eAAmC,QAApB91C,EAAAw2D,EAAe7kI,aAAK,IAAAquE,OAAA,EAAAA,EAAE0gC,aAAazO,OAAQ4J,GAAuB66B,MAAQ76B,GAAuB86B,QAChHvlC,KAAMka,GAAQsrB,GAAOJ,OAClBK,GAAYL,MACZM,GAAgBN,MAChBO,GAAmBP,EAAe7kI,MAAM+uG,aAAazO,OAASukC,EAAe7kI,MAAM+uG,aAAas2B,UAYrG,OATIt2B,EAAa5N,cACf4N,EAAa5N,YAAY4N,aAAeA,EACpCA,EAAa/M,SACf+M,EAAa/M,OAAOkH,IAAM6F,EAAa5N,cA5Cd,CAAC4N,IAC9B,GAAI19F,OAAO0tF,QAAQC,IAAIsmC,SAAU,OAEjC,MAAMC,EAAuB,CAACjvC,EAAen2F,EAAgB8oC,KAEvDqtD,MAAAA,OAAA,EAAAA,EAAO3xF,MAD+C,wDAExDskC,EAAMxH,YAAYwH,EAAMxI,UAAUe,QAAQ80D,IACnCn2F,EAAUsU,cAAc,gBAAiBzQ,WAE3CsyF,EAGHkvC,EAAgB1hI,SAASC,cAAc,OACvC0hI,EAAY,IAAI7lG,MAAM4lG,EAAe,IAEvCz2B,EAAa/M,SACf+M,EAAa/M,OAAO1L,MAAQivC,EAAqBx2B,EAAa/M,OAAO1L,MAAOkvC,EAAeC,IAGzF12B,EAAa5N,aACf2M,GAA+BiB,EAAa5N,aAAax7F,SAAQwsB,IAC/DA,EAAEmkE,MAAQivC,EAAqBpzG,EAAEmkE,MAAOkvC,EAAeC,OA2B3DC,CAAuB32B,GAEhBA,GAGH42B,GAAkCrvC,GAC/BA,MAAAA,OAAK,EAALA,EAAOxxF,QAAQ,QAAS,IAAI0T,OAGxBysH,GAAUW,cACrB,OAAgD,UAAf,QAA1Bv3D,UAAAv7B,EAAA8yF,MAAAA,OAAA,EAAAA,EAAW5lI,4BAAO6lI,gBAAQ,IAAAx3D,OAAA,EAAAA,EAAEy3D,qBAAa,IAAA7/C,OAAA,EAAAA,EAAE8yB,KAG9CmsB,GAAeU,IACZ,CACL7sB,IAAKksB,GAAOW,KAIVT,GAAmBS,wCACvB,MAAMG,EAAoF,QAAzE1mB,EAA+D,QAA/DvgF,EAAqD,QAArDD,EAAuC,QAAvConD,EAAgC,QAAhC5X,EAAkB,QAAlBv7B,EAAA8yF,MAAAA,OAAS,EAATA,EAAW5lI,aAAO,IAAA8yC,OAAA,EAAAA,EAAAi8D,oBAAc,IAAA1gC,OAAA,EAAAA,EAAAiyB,aAAO,IAAAra,OAAA,EAAAA,EAAA+/C,oBAAc,IAAAnnG,OAAA,EAAAA,EAAAknG,gBAAU,IAAAjnG,OAAA,EAAAA,EAAAj7B,QAAQ,UAAE,IAAAw7G,EAAAA,EAAI,GACxFrd,EAASikC,GAAgE,QAAnD/X,EAAqC,QAArCvO,EAA8B,QAA9BF,EAAgB,QAAhBF,EAAAqmB,MAAAA,OAAA,EAAAA,EAAW5lI,aAAK,IAAAu/G,OAAA,EAAAA,EAAExQ,oBAAY,IAAA0Q,OAAA,EAAAA,EAAEnf,aAAK,IAAAqf,OAAA,EAAAA,EAAEqmB,oBAAY,IAAA9X,OAAA,EAAAA,EAAElsB,OAAOn+F,SAClFqiI,EAA2F,QAA/E5X,UAAAC,EAAqD,UAAd,QAAvCH,EAAgC,QAAhCC,EAAkB,QAAlBJ,EAAA2X,MAAAA,OAAS,EAATA,EAAW5lI,aAAO,IAAAiuH,OAAA,EAAAA,EAAAlf,oBAAc,IAAAsf,OAAA,EAAAA,EAAA/tB,aAAO,IAAA8tB,OAAA,EAAAA,EAAA4X,oBAAc,IAAA7X,OAAA,EAAAA,EAAA+X,gCAAW3qH,EAAE,GAAG1X,QAAQ,UAAE,IAAAyqH,EAAAA,EAAI,GAErG,MAAO,CACLyX,SAAUJ,GAA+BI,GACzC/jC,OAAQmkC,GAAuBR,GAA+B3jC,IAC9DkkC,UAAWP,GAA+BO,KAIjCd,GAAsB9kC,IAC1B,CACLa,YAAailC,GAAiB9lC,EAAMa,eAIlCglC,GAA0B7vC,IAC9B,IAAKA,EACH,OAGF,MAAM8R,EAAc8gB,GAAgByE,KAAqB,UASzD,OARAvlB,EAAYc,SAAMt/F,EAClBw+F,EAAY9R,MAAQ+vC,GAA6B/vC,GACjD8R,EAAYwN,OAAS,GACrBxN,EAAYx/F,GAAK,SACb+7H,KACFv8B,EAAYI,SAAW,IAAI0tB,IAGtB9tB,GAGHg+B,GAAoBE,IACxB,MAAMnlC,EAAcwsB,KAIpB,OAFA4Y,GAAUplC,EAAamlC,EAAKE,OAAQ,IAE7BrlC,GAGHolC,GAAY,CAACr9B,EAAkBmB,EAAao8B,KAC3Cv9B,GAAQmB,IAIbA,MAAAA,GAAAA,EAAQ1kG,SAAS07D,4CACf,IAAI+mC,EACJ,MAAML,EAAwB,QAARj1D,EAAAuuB,EAAGrhE,aAAK,IAAA8yC,OAAA,EAAAA,EAAEi1D,cAEhC,GAAY,UAAR1mC,EAAGrhE,aAAK,IAAAquE,OAAA,EAAAA,EAAEqzC,WAAY,CACxB,MAAMlU,EAAkBi5B,EAAiB9uG,MACrC61E,IACFA,EAAgBzF,cAA0B,QAAV9hB,EAAA5kB,EAAGrhE,aAAO,IAAAimF,OAAA,EAAAA,EAAA8hB,eAInB,WAAd,UAAT1mC,EAAGthE,YAAM,IAAA8+B,OAAA,EAAAA,EAAA6nG,YACiB,OAAd,UAAVrlE,EAAGrhE,aAAO,IAAA8+B,OAAA,EAAAA,EAAAojF,YACZukB,EAAiB1oH,KAAKqqF,GACtBA,EAAYwN,OAAmB,QAAVyJ,EAAAh+C,EAAGrhE,aAAO,IAAAq/G,OAAA,EAAAA,EAAAzJ,OAC/BxN,EAAYoF,iBAAkB,EAC9BpF,EAAYL,cAAgBA,IACX,UAAR1mC,EAAGrhE,aAAK,IAAAu/G,OAAA,EAAAA,EAAE3J,UACnBxN,EAAYwN,OAASv0C,EAAGrhE,MAAM41G,OAC9BxN,EAAY+d,uBAAuB/d,EAAYwN,SAGjD1M,EAAI5S,OAAkB,QAAVmpB,EAAAp+C,EAAGrhE,aAAO,IAAAy/G,OAAA,EAAAA,EAAAknB,cAAej+B,GAAgBi9B,GAA+BiB,GAAwBvlE,IAE3G6nC,EAAe5H,MAAOxjD,KAAiB,QAAV6hE,EAAAt+C,EAAGrhE,aAAO,IAAA2/G,OAAA,EAAAA,EAAA7hE,KACvCorD,EAAe5H,MAAO14F,GAAe,QAAVslH,EAAA7sD,EAAGrhE,aAAO,IAAAkuH,OAAA,EAAAA,EAAAtlH,GACtCi+H,GAAe39B,EAAa,QAAR+kB,EAAA5sD,EAAGrhE,aAAK,IAAAiuH,OAAA,EAAAA,EAAElb,UAAW0zB,GACzCF,GAAWr9B,EAAe5H,MAAkB,QAAV+sB,EAAAhtD,EAAGrhE,aAAO,IAAAquH,OAAA,EAAAA,EAAAyY,oBAAqBL,IACjC,eAAd,UAATplE,EAAGthE,YAAM,IAAAquH,OAAA,EAAAA,EAAAsY,YAClBG,GAAe39B,EAAK7nC,EAAIolE,GACxBF,GAAWr9B,EAAe5H,MAAkB,QAAV6sB,EAAA9sD,EAAGrhE,aAAO,IAAAmuH,OAAA,EAAAA,EAAA2Y,oBAAqBL,IAEtC,OAAd,UAATplE,EAAGthE,YAAM,IAAAwuH,OAAA,EAAAA,EAAAmY,WACXK,GAAuC1lE,GAGlC6nC,EAAIqB,aACPnC,EAAc4+B,GAAiB99B,EAAK7nC,EAAIolE,GACxCF,GAAUn+B,UAAarpE,EAAU,UAAVsiC,EAAGrhE,aAAO,IAAAsuH,OAAA,EAAAA,EAAAkY,sBAAkB,QAAR/X,EAAAptD,EAAGrhE,aAAK,IAAAyuH,OAAA,EAAAA,EAAEqY,oBAAqBL,SAO9EI,GAAiB,CAAC39B,EAAkB7nC,EAASolE,WAC7CplE,IACFusD,GAAgB1kB,GAChBA,EAAIqB,WAAY3hG,GAAKy4D,EAAGz4D,GACxBsgG,EAAIqB,WAAY1nF,KAAOw+C,EAAGx+C,KACtB8hH,KACFz7B,EAAIqB,WAAY/B,SAAW,IAAI0tB,IAEvB,QAAVpjF,EAAAuuB,EAAGx9D,eAAO,IAAAivC,GAAAA,EAAEntC,SAASusB,kBACnB,GAA0B,OAAd,UAARA,EAAEnyB,YAAM,IAAA+yC,OAAA,EAAAA,EAAA4zF,WACVK,GAAuC70G,OAClC,CACL,MAAMC,EAAI60G,GAAiB99B,EAAIqB,WAAar4E,EAAGu0G,GAC/Ct0G,EAAE+vE,wBAAyB,EAC3B/vE,EAAEyjF,OAAkB,QAATvnC,EAAAn8C,EAAElyB,aAAO,IAAAquE,OAAA,EAAAA,EAAAunC,OACpB2wB,GAAUp0G,UAAI0M,EAAS,UAAT3M,EAAElyB,aAAO,IAAAimF,OAAA,EAAAA,EAAAugD,sBAAiB,QAAP1nG,EAAA5M,EAAElyB,aAAK,IAAA8+B,OAAA,EAAAA,EAAEgoG,oBAAqBL,SAMjEM,GAA0C1lE,UAC9CqjE,GAAwBpuC,OAASouC,GAAwBpuC,MAAQ,IAAMqvC,GAA+BM,GAAqB,QAARnzF,EAAAuuB,EAAGrhE,aAAK,IAAA8yC,OAAA,EAAAA,EAAEjvC,WAAWiB,QAAQ,OAAQ,MAGpJkiI,GAAmB,CAAC99B,EAAkB7nC,EAASolE,6BACnD,MAAMr+B,EAAc8gB,GAAgBhgB,EAAc,QAATp2D,EAAAuuB,EAAGthE,YAAM,IAAA+yC,OAAA,EAAAA,EAAA4zF,WAE5C3+B,EAAwB,QAAR15B,EAAAhN,EAAGrhE,aAAK,IAAAquE,OAAA,EAAAA,EAAE05B,cAEhC,GAAY,UAAR1mC,EAAGrhE,aAAK,IAAAimF,OAAA,EAAAA,EAAEy7B,WAAY,CACxB,MAAMlU,EAAkBi5B,EAAiB9uG,MACrC61E,IACFA,EAAgBzF,cAA0B,QAAVlpE,EAAAwiC,EAAGrhE,aAAO,IAAA6+B,OAAA,EAAAA,EAAAkpE,eA2B9C,OAvBKuB,GAAUlB,KACe,OAAd,UAAV/mC,EAAGrhE,aAAO,IAAA8+B,OAAA,EAAAA,EAAAojF,YACZukB,EAAiB1oH,KAAKqqF,GACtBA,EAAYwN,OAAmB,QAAVyJ,EAAAh+C,EAAGrhE,aAAO,IAAAq/G,OAAA,EAAAA,EAAAzJ,OAC/BxN,EAAYoF,iBAAkB,EAC9BpF,EAAYL,cAAgBA,GAE5BK,EAAYwN,OAAmB,QAAV2J,EAAAl+C,EAAGrhE,aAAO,IAAAu/G,OAAA,EAAAA,EAAA3J,OAEjCxN,EAAY+d,uBAAuB/d,EAAYwN,SAGjDxN,EAAYtqD,KAAiB,QAAV2hE,EAAAp+C,EAAGrhE,aAAO,IAAAy/G,OAAA,EAAAA,EAAA3hE,KAC7BsqD,EAAYx/F,GAAe,QAAV+2G,EAAAt+C,EAAGrhE,aAAO,IAAA2/G,OAAA,EAAAA,EAAA/2G,GACvB+7H,KACFv8B,EAAYI,SAAW,IAAI0tB,GACvBrtB,GAAST,KACVA,EAAuB9G,MAAOkH,SAAW,IAAI0tB,KAGlD9tB,EAAY9R,OAAkB,QAAV43B,EAAA7sD,EAAGrhE,aAAO,IAAAkuH,OAAA,EAAAA,EAAAyY,cAAej+B,GAAgBi9B,GAA+BiB,GAAwBvlE,IAEpHqjE,GAA0Bt8B,EACnBA,GAOHw+B,GAA2BvlE,kBAC/B,IAAIi1B,EAAQ,GACZ,OAAY,UAARj1B,EAAGrhE,aAAK,IAAA8yC,OAAA,EAAAA,EAAEm0F,eAC4B,QAAjC54D,EAAAhN,EAAGrhE,MAAMinI,cAAcpjI,QAAQ,UAAE,IAAAwqE,EAAAA,EAAI,IAIxC,QAFJvvC,UAAAD,EAAU,UAAVwiC,EAAGrhE,aAAO,IAAAimF,OAAA,EAAAA,EAAA1qE,wBACN/T,KAAK+T,GAAWA,WAChB,IAAAujB,GAAAA,EAAAt3B,KAAKgS,GAAWA,EAAE3V,UACnB8B,SAAS9B,GAAkByyF,GAAS2vC,GAAapiI,KAE/CwiI,GAA6B/vC,KAGhC+vC,GAAgC5iI,IACpC,MAAM6W,EAAMxW,SAASC,cAAc,OACnCuW,EAAItW,UAAYP,EAChB,MAAM6P,EAAWgH,EAAI+1D,qBAAqB,KAC1C,IAAK,IAAI9sE,EAAI,EAAGA,EAAI+P,EAASjQ,OAAQE,IAAK,CACxC,MAAMS,EAAYsP,EAAS/P,GAAGS,UAC9B,IAAgC,IAA5BA,EAAU2D,QAAQ,KAAa,CACjC,MAAMu/H,EAAeljI,EAAUc,QAAQ,aAAc,WAAWA,QAAQ,uBAAwB,WAChGwO,EAAS/P,GAAGS,UAAYkjI,GAG5B,OAAO5sH,EAAItW,UAAUc,QAAQ,UAAW,MAG7BmhI,GAAgBpiI,IAC3B,IAAIyyF,EAAQ,GAWZ,OAVAzyF,MAAAA,GAAAA,EAAS8B,SAASzD,IAChB,GAAIA,EAAQlC,MACVs2F,GAAS6wC,GAASjlI,EAAQnC,KAAMmC,EAAQlC,WACnC,CACL,IAAIonI,EAAellI,EACnBklI,EAAeA,EAAatiI,QAAQ,aAAc,WAClDsiI,EAAeA,EAAatiI,QAAQ,uBAAwB,WAC5DwxF,GAAS8wC,MAGN9wC,GAGH6wC,GAAW,CAACpnI,EAAWC,KAC3B,MAAM0mI,EAAY3mI,EAAK2mI,UACvB,MAAkB,SAAdA,GAAwB1mI,EAAM89C,KACzB,YAAY99C,EAAM89C,SAASmoF,GAAajmI,EAAM6D,eAErC,MAAd6iI,GAAmC,MAAdA,GAAmC,QAAdA,GAAqC,QAAdA,EAC5D,IAAIA,KAAaT,GAAajmI,EAAM6D,aAAa6iI,KAEnD,ICpSIW,GAA8BxC,UACzC,KAA4B,QAAvB/xF,EAAA+xF,MAAAA,OAAA,EAAAA,EAAgB7kI,aAAO,IAAA8yC,OAAA,EAAAA,EAAAi8D,cAC1B,MAAM,IAAI55E,MAAM,6CAGlB,MAAO,IACFiwG,GAAmBP,EAAe7kI,MAAM+uG,aAAazO,MAAQukC,EAAe7kI,MAAM+uG,aAAazO,MAAQukC,EAAe7kI,MAAM+uG,aAAas2B,WCgChJ,IAAYiC,IAAZ,SAAYA,GACVA,EAAAA,EAAA,uBAAA,GAAA,yBACAA,EAAAA,EAAA,kCAAA,GAAA,oCACAA,EAAAA,EAAA,sBAAA,GAAA,wBACAA,EAAAA,EAAA,iCAAA,GAAA,mCACAA,EAAAA,EAAA,kCAAA,GAAA,oCACAA,EAAAA,EAAA,0CAAA,GAAA,4CACAA,EAAAA,EAAA,8BAAA,GAAA,gCACAA,EAAAA,EAAA,gCAAA,GAAA,kCACAA,EAAAA,EAAA,0BAAA,GAAA,4BACAA,EAAAA,EAAA,gCAAA,GAAA,kCACAA,EAAAA,EAAA,2BAAA,IAAA,6BACAA,EAAAA,EAAA,8CAAA,IAAA,gDACAA,EAAAA,EAAA,8CAAA,IAAA,gDACAA,EAAAA,EAAA,gDAAA,IAAA,kDACAA,EAAAA,EAAA,0BAAA,IAAA,4BAfF,CAAYA,KAAAA,GAgBX,WASYC,GAgBX/gI,YACEghI,EACAC,EACAC,EACAC,EACAC,EACAC,EACAroC,EACAkE,GAAsB,EACtBpS,EAAU,gBAhBZjoF,KAAmBq6F,qBAAG,EAuGdr6F,KAAgBy+H,iBAAG,IAClB,IAAIC,GAAuC1+H,KAAKw+H,sBAAuBG,GAA+C3+H,KAAMA,KAAK4+H,mBAtFxI5+H,KAAKo+H,oBAAsBA,EAC3Bp+H,KAAKq+H,oBAAsBA,EAC3Br+H,KAAKs+H,8BAAgCA,EACrCt+H,KAAK6+H,4BAA8BC,GAAoBT,GACvDr+H,KAAKu+H,OAASA,EACdv+H,KAAKm+H,sBAAwBA,EAC7Bn+H,KAAKw+H,kBAAoBA,EAEzBx+H,KAAKq6F,oBAAsBA,EAC3Br6F,KAAKioF,QAAUA,EAEfjoF,KAAK4+H,iBAAmB,CACtBG,aAAcC,GAAoCh/H,KAAKw+H,mBACvDroC,MAAOojB,GAA2Bv5G,KAAKm+H,sBAAuBhoC,GAC9D8oC,WAAY,GACZjH,MAAO,IAGTh4H,KAAKk/H,WAAaC,GAA6Bn/H,KAAKw+H,mBAEpDx+H,KAAK4+H,iBAAiBl9B,WAAa09B,GAAyBZ,EAAkBx9B,OAAO,GAAG5K,KAAMp2F,KAAK4+H,iBAAiBzoC,OACpHn2F,KAAK4+H,iBAAiBK,WAAaI,GAAkCr/H,KAAKm+H,sBAAuBn+H,KAAKw+H,kBAAmBx+H,KAAK4+H,iBAAiBl9B,YAC/I1hG,KAAK4+H,iBAAiB5G,MAAQsH,GAA6Bt/H,KAAKm+H,sBAAuBn+H,KAAKw+H,kBAAmBx+H,KAAK4+H,iBAAiBl9B,YAErI1hG,KAAKu/H,cAAgB,CACnBR,aAAc/+H,KAAK4+H,iBAAiBG,aACpC5oC,MAAOgiB,GAAen4G,KAAK4+H,iBAAiBzoC,OAC5C8oC,WAAYj/H,KAAK4+H,iBAAiBK,WAAW9gI,KAAI2qB,GAAKqvF,GAAervF,KACrEkvG,MAAOh4H,KAAKs5G,aAAat5G,KAAK4+H,iBAAiB5G,OAC/Ct2B,WAAY1hG,KAAK4+H,iBAAiBl9B,WAAayW,GAAen4G,KAAK4+H,iBAAiBl9B,iBAAcnhG,GAGpGP,KAAKw/H,0BAAiBx/H,KAAK4+H,iBAAiBl9B,iCAAYtL,QAASp2F,KAAK4+H,iBAAiBG,aAAa,GAEpG/+H,KAAKy/H,WAAaz/H,KAAKy+H,mBAGjBnlB,aAAapiB,GACnB,IACE,OAAOA,EAAa/4F,KAAI2qB,GAAKqvF,GAAervF,KAC5C,MAAO0N,GACP,MAAO,IAIJ7iB,kCACLyqH,EACAC,EACAF,EACAhoC,GAEA,IAAImoC,EAAgCoB,GAA2BZ,GAAoBT,GAAuBsB,GAAyBtB,GAAuBA,GACtJE,QAAeqB,GAAmBtB,GAClC54B,EAAes4B,GAA2BO,GAE9C,MAAMrnC,EAAeuN,GAA+BiB,EAAa5N,aAOjE,OANI+nC,GAAuB3oC,KACzBonC,EAAgCwB,GAA4BxB,EAA+BpnC,GAC3FqnC,QAAeqB,GAAmBtB,GAClC54B,EAAes4B,GAA2BO,IAGrC,IAAIL,GAAgBC,EAAuBC,EAAqBC,EAAqBC,EAA+BC,EAAQ74B,EAAa5N,YAAc3B,GAGzJxiF,6BAA6B4qH,EAAaJ,EAAoChoC,EAAiBkE,GAAsB,EAAMpS,EAAU,UAC1I,MAAMyd,EAAes4B,GAA2BO,GAChD,OAAO,IAAIL,GAAgBC,EAAuB,GAAI,GAAI,GAAII,EAAQ74B,EAAa5N,YAAc3B,EAAOkE,EAAqBpS,GAGxHt0E,mCACLyqH,EACAC,EACAE,EACAJ,EACAhoC,GAEA,MAAMuP,EAAes4B,GAA2BO,GAChD,OAAO,IAAIL,GAAgBC,EAAuBC,EAAqBC,EAAqBA,EAAqBE,EAAQ74B,EAAa5N,YAAc3B,GAG/IxiF,kCAAkC6qH,EAAgCL,EAAoChoC,GAC3G,OAAO,IAAI+nC,GAAgBC,EAAuB,GAAI,GAAI,QAAI59H,EAAWi+H,EAAmBroC,GAOvF4pC,0CAA0C1lC,EAA8BpS,GAC7E,MAAM+3C,EAAgC,CACpC/B,GAAkBgC,uBAClBhC,GAAkBiC,sBAClBjC,GAAkBkC,iCAClBlC,GAAkBmC,mCAGpBpgI,KAAKioF,QAAUA,EACfjoF,KAAKq6F,oBAAsBA,EAE3Br6F,KAAKy/H,WAAaz/H,KAAKy/H,WAAW9lI,QAAOu3D,GAAK8uE,EAA8BtsH,SAASw9C,EAAEklC,QAEvFp2F,KAAKy/H,WAAW/qH,QAAQiqH,GAA+C3+H,KAAMA,KAAK4+H,oBAKtF,MAAMkB,GAA8B,CAAC7yC,EAAeiK,KAClD,IAAImpC,EAAWpzC,EACf,MAAMuX,EAAQtN,EAAav9F,QAAOmvB,GAAKk3E,GAAOl3E,KAAOi3E,GAASj3E,EAAE+2E,OAMhE,OALA2E,EAAMloG,SAAQwsB,IACZ,MAAMw3G,EAAgCjzC,GAAYvkE,EAAEmkE,OAAOp+E,MAAM,KAAKE,KAAK,aACrEo/E,EAAQ,IAAI9hD,OAAO,WAAWvjB,EAAE8lE,WAAW0xC,KAAkC,KACnFD,EAAWA,EAAS5kI,QAAQ0yF,EAAO,UAE9BkyC,GAGIR,GAA0B3oC,GAC9BA,EAAaptD,MAAKhhB,GAAKk3E,GAAOl3E,KAAOi3E,GAASj3E,EAAE+2E,OAAUP,GAAcx2E,EAAE+2E,OAGtE6/B,GAA8BzyC,IACzC,MAAMozC,EAAWpzC,EACdxxF,QAAQ,MAAO,IACfA,QAAQ,gBAAiB,SACzBA,QAAQ,eAAgB,MAE3B,IAAK8kI,GAAeF,GAClB,OAAOA,EAIT,IAAKA,EAAS/kI,MAD+B,iFAE3C,OAAO+kI,EAKT,OAAOA,EAAS5kI,QAD8C,mHACiB,QAAQ0T,QAG5EoxH,GAAkBtzC,KAA6BA,EAAM3xF,MAAM,WAE3DskI,GAAqB/+H,MAAOosF,IACvC,MAAM7+E,EAAU,CACd0xB,OAAQ,OACR0gG,QAAS,CAAE,eAAgB,cAC3Bt2H,KAAM+iF,GAGR,IACE,MAAMjlB,QAAiBD,MAAM,kEAAmE35D,GAChG,aAAa45D,EAASy4D,OACtB,MAAO7qG,GACP,OAAO90B,QAAQ01B,MAAMZ,KAIZopG,GAAuClnC,GAC3C,IAAI,IAAItsD,IAAIssD,EAAYkJ,OAAOrnG,QAAOi9D,GAAgB,YAAXA,EAAEw/B,OAAoBj4F,KAAIy4D,GAAKA,EAAEw/B,SAG/E+oC,GAAgCrnC,GAAmC4oC,GAA6B5oC,EAAYkJ,OAAO,IAEnH0/B,GAAgC3hC,GAAmCuR,GAAQvR,EAAY3I,MAEvFka,GAAWqwB,GAA2BxpC,GAAgBwpC,MAAAA,OAAA,EAAAA,EAAU/pI,eAEzDyoI,GAAoC,CAACvnC,EAA0B0mC,EAAgC98B,MACtGA,GAAgBlC,GAASg/B,EAAkBx9B,OAAO,MAAOnI,GAAuB6I,IAClFk/B,GAA6BpC,EAAkBx9B,OAAQU,GAGzD,MAAMm/B,EAAap8B,GAA+B+5B,GAC/C7kI,QAAOmvB,GAAgB,gBAAXA,EAAEstE,OACdj4F,KAAI2qB,GAAKA,EAAEvpB,KACXovB,QAAO,CAAC4mD,EAAKz4B,KACRA,IACFy4B,EAAI7gE,KAAKooC,GACLA,EAAIjpB,SAAS,UACf0hD,EAAI7gE,KAAKooC,EAAIrhD,QAAQ,QAAS,YAG3B85E,IACN,IACL,OAAOkvB,GAA+B3M,GAAan+F,QAAOmvB,GAAKw7E,GAAWx7E,IAAM+3G,EAAWntH,SAASoV,EAAEvpB,OAG3F+/H,GAA+B,CAACxnC,EAA0B0mC,EAAgC98B,KACrG,MAAMo/B,EAAgBzB,GAAkCvnC,EAAa0mC,EAAmB98B,GAAYvjG,KAAI2qB,GAAKA,EAAEvpB,KAC/G,OAAOklG,GAA+B+5B,GAAmB7kI,QAAOmvB,IAAMw2E,GAAcx2E,KAAOg4G,EAAcptH,SAASoV,EAAEvpB,OAGzGm/H,GAA0CF,IACrD,MAAM9yH,EAAsB,GAE5B,IAAK8yH,IAAsBA,EAAkBx9B,OAAOhnG,OAKlD,OAJA0R,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBgC,uBACxB9yB,UAAW,CAAC,kEAEPzhG,EAiBT,GAdI+4F,GAA+B+5B,GAAmB10F,KAAKs2D,KACzD10F,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB8C,kCACxB5zB,UAAW,CAAC,wFAIZ6zB,GAAaxC,IACf9yH,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBiC,sBACxB/yB,UAAW,CAAC,yDAA0D,yFAItEqxB,EAAkBx9B,OAAOrnG,QAAOi9D,IAAMqpC,GAAUrpC,KAAI58D,SAAWunG,GAAgBi9B,EAAkBx9B,OAAOrnG,QAAOi9D,IAAMqpC,GAAUrpC,KAAI,IAAI58D,OAAQ,CACjJ,MAAMqtG,EAAQ,IAAI,IAAI77D,IAAIgzF,EAAkBx9B,OAAO7iG,KAAIy4D,UAAK,OAAqD,QAArDntB,EAAA0tD,GAAgBvgC,EAAEw/B,KAAKx/F,eAAe0gG,uBAAe,IAAA7tD,OAAA,EAAAA,EAAE2zE,yBACnH1xG,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBkC,iCACxBhzB,UAAW,CAAC,qEAAqE9F,EAAMt4F,KAAK,SAAU,uCAW1G,GAPIkyH,GAAoCzC,IACtC9yH,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBmC,kCACxBjzB,UAAW,CAAC,gEAIZ+zB,GAA2B1C,GAAoB,CACjD,MAAMrxB,EAAY,CAChB,qFACAg0B,GAAuB18B,GAA+B+5B,IACtD,mEACA7kI,OAAOu4D,SAETxmD,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBmD,0BACxBj0B,UAAAA,IAIJ,OAAOzhG,GAGHs1H,GAAgBjiC,GACbA,EAAYiC,OAAOrnG,QAAOwW,GAAK+vF,GAAY/vF,IAAiB,iCAAXA,EAAEimF,OAAyCp8F,OAAS,EAGxGknI,GAA8BppC,GACb2M,GAA+B3M,GAAa75E,MAAM,GACnD6rB,MAAKhhB,GAAKu4G,GAA2Bv4G,KAGrDu4G,GAA8BtiC,YAClC,SAA8C,QAAtC/5B,EAAe,QAAfv7B,EAAAs1D,EAAYc,WAAG,IAAAp2D,OAAA,EAAAA,EAAE+tD,6BAAqB,IAAAxyB,OAAA,EAAAA,EAAEtxD,SAASqrF,EAAY3I,QAAU6J,GAAUlB,KAAkBA,EAAYc,KAAQP,GAAcP,EAAYc,OAGrJshC,GAA0BjqC,YAC9B,MAAM6H,EAAc7H,EAAahqF,MAAK4b,GAAKu4G,GAA2Bv4G,KACtE,GAAIi2E,GAAeA,EAAYc,IAAK,CAClC,MAAMA,EAAMJ,GAAQV,EAAYc,KAAOd,EAAYc,IAAIA,IAAMd,EAAYc,IACnEyhC,EAA8C,QAA5B73F,EAAAo2D,MAAAA,OAAG,EAAHA,EAAKrI,6BAAuB,IAAA/tD,OAAA,EAAAA,EAAAtrC,KAAI8D,IAAI,IAAAwnC,EAAC,eAAAA,EAAA0tD,GAAgBl1F,EAAErL,eAAeq/F,gCAAWr/F,iBACzG,MAAO,kBAAkBmoG,EAAYwN,8CAA8C1M,MAAAA,OAAG,EAAHA,EAAK0M,gDAAwCvnC,EAAAmyB,GAC9H4H,EAAY3I,KAAKx/F,eACjBq/F,gCAAWr/F,sCAAsC0qI,MAAAA,OAAe,EAAfA,EAAiBvyH,KAAK,WAE3E,MAAO,IAGHkyH,GAAuCzC,IAC3C,MAAM+C,EAAU/C,EAAkBx9B,OAAO7iG,KAAIy4D,GAAKA,EAAE21C,SACpD,OAAOg1B,EAAQvnI,OAAS,IAAIwxC,IAAI+1F,GAAShgE,MAGrCo9D,GAAiD,CAAC6C,EAAkC5C,KACxF,MAAMlzH,EAAsB,IAEtB2yH,oBAAEA,EAAmBG,kBAAEA,EAAiBL,sBAAEA,EAAqBe,WAAEA,EAAU7kC,oBAAEA,EAAmBpS,QAAEA,GAAYu5C,GAC9GrrC,MAAEA,EAAKuL,WAAEA,EAAYu9B,WAAYwC,GAA2B7C,EAElE,GAAI4C,EAAgBjC,cAAcR,aAAarrH,SAAS,gCACtD,OAAOhI,EAGT,IAAK8yH,EAAkBx9B,OAAOhnG,OAC5B,OAAO0R,EAGT,MAAMg2H,EAAmBxC,EAAW5nC,gBAEhCuB,GAAuB1C,IAAU2oC,GAAoBT,IACvD3yH,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB0D,0CACxBx0B,UAAW,CAAC,8EAIZtU,GAAuB1C,IAAUqoC,EAAkBx9B,OAAOl3D,MAAK8sB,IAAK,IAAAntB,EAAA,OAAA+1D,GAAS5oC,KAAoB,QAAdntB,EAAAmtB,EAAEsqC,kBAAY,IAAAz3D,OAAA,EAAAA,EAAAu3D,OAAOhnG,YAC1G0R,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB2D,8BACxBz0B,UAAW,CAAC,2EAIhB,MAAM00B,EAA4BJ,GAA0BpC,GAAkCv+B,GAAe3K,GAAQqoC,EAAmB98B,GASxI,GAPIvL,EAAMgJ,SAASC,oBAAsBP,GAAkBK,uBAAyBs/B,EAAkBx9B,QAAU8gC,GAAgBtD,EAAkBx9B,OAAQ7K,IACxJzqF,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB8D,gCACxB50B,UAAW,CAAC,2DAIZ9S,GAAuBwnC,EAA0B/3F,KAAKs7D,IAA0B,CAClF,MAAMxvG,EAAMisI,EAA0BloI,OAAOyrG,IAAyBjnG,KAAI2qB,GAAKA,EAAEvpB,KAC3E23F,EAAeuN,GAA+B05B,GACjDxkI,QAAOmvB,GAAKo2G,EAAWxoI,OAASoyB,EAAEstE,MAAQxgG,EAAI8d,SAASoV,EAAEvpB,MACzDpB,KAAI2qB,IAAK,IAAA2gB,EAAA,OAAU,UAAV3gB,EAAEyjF,cAAQ,IAAA9iE,OAAA,EAAAA,EAAAhuC,QAAQ,SAAU,OACrCsT,KAAK,MAERrD,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB+D,0BACxBtpC,OAAQ,gDACRyU,UAAW,CAAC,sEAAsEjW,EAAe,UAAUwqC,MAAqBxqC,KAAkB,OAClJ+qC,6BAA6B,IAIjC,MAAMC,EAAgBxgC,GAAc09B,GAAyBZ,EAAkBx9B,OAAO,GAAG5K,KAAMD,GAE/F,IAAK+rC,EAAe,CAClB,MAAMC,EAAkB7xB,GAAQna,EAAMC,MAAMkB,gBAK5C,OAJA5rF,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBmE,gCACxBj1B,UAAW,CAAC,yBAAyBu0B,MAAAA,OAAgB,EAAhBA,EAAkB9qI,uBAAuBurI,MAAAA,OAAe,EAAfA,EAAiBvrI,mBAE1F8U,EAkCT,MA/BgB,UAAZu8E,GAAuBi6C,EAAc9rC,OAASooC,EAAkBx9B,OAAO,GAAG5K,MAC5E1qF,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBoE,2BACxBl1B,UAAW,CAAC,yBAAyBu0B,8CAIrCY,GAAmDd,EAAiB5C,IACtElzH,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBsE,8CACxBp1B,UAAW,CAAC,8FACZ80B,6BAA6B,IAI7BO,GAAmDhB,EAAiB5C,IACtElzH,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkBwE,8CACxBt1B,UAAW,CAAC,8FACZ80B,6BAA6B,IAI7BS,GAAkDlB,IACpD91H,EAAOgJ,KAAK,CACV0hF,KAAM6nC,GAAkB0E,gDACxBx1B,UAAW,CAAC,+EACZ80B,6BAA6B,IAI1Bv2H,GAGH42H,GAAqD,CAACd,EAAkC5C,IACrF4C,EAAgBnnC,qBAAuBuoC,GAAwBhE,EAAiBK,aAAe4D,GAAoBrB,EAAgBhD,kBAAkBx9B,QAGxJwhC,GAAqD,CAAChB,EAAkC5C,IACrF4C,EAAgBnnC,qBAAuBwoC,GAAoBjE,EAAiBK,aAAe2D,GAAwBpB,EAAgBhD,kBAAkBx9B,QAGxJ0hC,GAAqDlB,IAEjDA,EAGJoB,GAA2B1rC,GAAyCA,EAAaptD,MAAKhhB,IAAK,IAAA2gB,EAAA,OAAA+1D,GAAS12E,KAAO+vE,GAAuB/vE,KAAkB,UAAZA,EAAEo4E,kBAAU,IAAAz3D,OAAA,EAAAA,EAAEu3D,OAAOhnG,WAE7J6oI,GAAuB3rC,GAAyCA,EAAaptD,MAAKhhB,IAAI,IAAA2gB,EAAC,OAAA+1D,GAAS12E,KAAO+vE,GAAuB/vE,KAAgB,QAAV2gB,EAAA3gB,EAAEk4E,cAAQ,IAAAv3D,OAAA,EAAAA,EAAAzvC,WAE9IolI,GAA2B,CAAC0D,EAAwBruG,IACnDA,EAEMA,EAAI2hE,OAAS0sC,IAAmBruG,EAAI+iE,uBAAyB,IAAI9jF,SAASovH,GAC5EruG,EAEA2qG,GAAyB0D,EAAgBruG,EAAIorE,UAJpD,EAQEiiC,GAAkB,CAAC9gC,EAAuB7K,WAC9C,OAAO6K,EAAO,GAAG5K,OAASD,EAAMC,SAAuC,QAA7B3sD,EAAA0sD,EAAMqB,6BAAuB,IAAA/tD,OAAA,EAAAA,EAAA/1B,SAASstF,EAAO,GAAG5K,QAG/EwqC,GAA+B,CAAC5/B,EAAuBU,KAClE,IAAIsb,EAEFA,EADEtb,EAAWtL,OAAS4K,EAAO,GAAG5K,KACtBsL,EAAW7B,IAAKtgG,GAEhBmiG,EAAWniG,GAGnBigG,GAASkC,IAAe/B,GAASqB,EAAO,MAC1Cgc,GAAW,QAGbhc,EAAO1kG,SAAQs6D,GAAK6tC,GAA+B7tC,GAAGt6D,SAAQymI,GAAMC,GAAqBD,EAAI/lB,QAGzFgmB,GAAuB,CAACjkC,EAA0Bie,aACvC,QAAdvzE,EAAAs1D,EAAYx/F,UAAE,IAAAkqC,OAAA,EAAAA,EAAE3Q,WAAWkkF,KAAYimB,GAAUlkC,EAAaie,IAG3DimB,GAAY,CAAClkC,EAA0Bie,KAC3Cje,EAAYx/F,GAAKy9G,EAAU,IAAMje,EAAYx/F,GACzCigG,GAAST,IAAiBA,EAAuB9G,QAClD8G,EAAuB9G,MAAO14F,GAAKy9G,EAAU,IAAOje,EAAuB9G,MAAO14F,KAMjFu/H,GAAuB7xC,UAC3B,MAAMhrF,EACF,QADMwnC,EAAA+jD,GAAkBP,UACxB,IAAAxjD,OAAA,EAAAA,EAAAhuC,QAAQ,UAAW,KACpBA,QAAQ,SAAU,IAClB0T,OAEH,MAR0D,4CAQlBm/B,KAAKrsC,IAGzC09H,GAA4B1yC,IAChC,GAAI6xC,GAAoB7xC,GAAQ,CAC9B,IAAIi2C,EAAW,IACXC,EAAYl2C,EAAMwxB,WAdkC,4CAcW,oBAGnE,MAAgD,IAAzC0kB,EAAU7kI,QAAQ,mBACvB6kI,EAAYA,EAAU1nI,QAAQ,iBAAkB,QAAUynI,IAAa,MAGzE,OAAOC,EAET,OAAOl2C,GAGIm2C,GAAyBC,IACpC,IAAIjpI,EAAOipI,EACR5nI,QAAQ,QAAS,KACjBA,QAAQ,YAAa,IACrBA,QAAQ,MAAO,QACfA,QAAQ,gBAAiB,MACzBA,QAAQ,UAAW,KACnBA,QAAQ,iBAAkB,KAC1BA,QAAQ,+BAAgC,SACxCA,QAAQ,kBAAmB,MAC3BA,QAAQ,IAAK,MACbA,QAAQ,UAAW,IACnBA,QAAQ,mBAAoB,IAC5BA,QAAQ,MAAO,IACfA,QAAQ,OAAQ,MAChBA,QAAQ,oBAAqB,KAC7BA,QAAQ,WAAY,KAEvB,MAAM6nI,EAAc,CAAC,IAAK,SAAU,IAAK,KAAM,MAAO,MAAO,KAsB7D,OApBAA,EAAYnlI,KAAIvC,GAAOA,EAAIhF,gBAAe0F,SAAQV,GAAQxB,EAAOA,EAAKqB,QAAQ,IAAI4wC,OAAO,IAAIzwC,UAAa,MAAO,IAAIA,QAGrHxB,EAAOA,EAAKqB,QAAQ,kBAAmB,SAASA,QAAQ,gBAAiB,SAGzErB,EAAOA,EAAKqB,QAAQ,6BAA6BmM,GAAKA,EAAEnM,QAAQ,MAAO,OAAMA,QAAQ,UAAW,KAEhGrB,EAAOA,EAAKqB,QAAQ,QAAS,KAAKA,QAAQ,QAAS,KAEnDrB,EzJtfqC,EAAC6yF,EAAejhE,KAErD,MAAMmiE,EAAQ,IAAI9hD,OAAO,aAAargB,EAAKjd,KAAK,mBAAoB,MACpE,OAAOk+E,EAAMxxF,QAAQ0yF,EAAO,KyJmfrBo1C,CAAwBnpI,EAAMkpI,GAClC7nI,QAAQ,aAAc,SACtBA,QAAQ,iBAAkB,IAC1BA,QAAQ,eAAgB,MACxBA,QAAQ,OAAQ,MAChBA,QAAQ,MAAO,KACfA,QAAQ,SAAU,MAClBA,QAAQ,sCAAuC,QAC/C0T,OAEI/U,GCljBHopI,GAAgB,UAyDhBC,GAAoB,CACxB3rC,EACA0mC,EACAroC,EACAuL,EACAzZ,EACAoS,EACAqpC,EACAtpB,EACA8kB,KAEA,MAAMyE,EAA8B9qC,GAAuB1C,GAC3D,IAAIE,EAASqL,EAEb,MAAMkiC,EAA6B,GAC7BC,EAA6B,GAC7BC,EAA4B,GAElCtF,EAAkBx9B,OAAO1kG,SAAQs6D,IAC/B,GAAI+sE,IAAgC1jC,GAAUrpC,GAAI,CAChD,MAAM9tC,EAAIi7G,GAA4CjsC,EAAalhC,EAAEr3D,IACrE,GAAIupB,GAAKuxE,EAAqB,CAC5B,MAAM9iC,EAAKysE,GAA6Bl7G,EAAG8tC,EAAGwjD,EAAMupB,GACpDE,EAAYnvH,QAAQ+vF,GAA+BltC,GAAI59D,OAAOwrG,KAC9Dy+B,EAAYlvH,QAAQ+vF,GAA+BltC,GAAI59D,OAAOsrG,KAC9D6+B,EAAWpvH,QAAQ+vF,GAA+BltC,GAAI59D,OAAOorG,KAC7D1O,EAAS9+B,MACJ,CACL8+B,EAASvtE,GAAK46G,EAA4D56G,EAAIutE,EAC9E,MAAM9+B,EAAK0sE,GAA4B5tC,EAAQz/B,EAAG+sE,GAA6B,EAAOvpB,EAAkB,UAAZnyB,GAAuBoO,IAAWqL,EAAazZ,OAAU1nF,GACrJqjI,EAAYlvH,QAAQ+vF,GAA+BltC,IACnDusE,EAAWpvH,QAAQ+vF,GAA+BltC,GAAI59D,OAAOorG,KAC7D1O,EAAS9+B,OAKf,MAAM24C,EAAwB,GAC9B,IAAIg0B,EAkBJ,OAhBIC,GAA0B3F,EAAmBroC,EAAOuL,KACtDwiC,EAAyBE,GAA4B1iC,GAErDA,EAAW7B,IAAKqc,YAAYxa,GAC5BA,EAAW7B,IAAKuc,iBAChBwnB,EAAYtnI,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,MAG3ConF,EAAQx7F,KAAK2vH,GAA4BT,EAAaliC,IACtDwiC,GAA0Bh0B,EAAQx7F,KAAKwvH,GACvCh0B,EAAQx7F,QAAQ4vH,GAA+BT,IAC/C3zB,EAAQx7F,KAAK6vH,GAAgCX,EAAaliC,EAAYw9B,IACtEsF,GAA0Bt0B,EAAS2zB,EAAaC,GAChD5zB,EAAQx7F,KAAK+vH,GAAsCb,EAAaD,IAChEC,EAAY,IAAM1zB,EAAQx7F,KAAKgwH,GAA2B,CAACd,EAAY,GAAIztC,KAEpE+Z,EAAQv2G,QAAOo2F,IAAM,IAAAtmD,EAAA,OAAY,QAAZA,EAAAsmD,EAAGvJ,iBAAS,IAAA/8C,OAAA,EAAAA,EAAEzvC,WAGtCuqI,GAAkC,CAACX,EAA4BliC,EAAyBw9B,KAC5F,MACMyF,GADSjjC,EAAWtL,OAAS8oC,EAAax9B,EAAW7B,IAAO6B,GAC3BV,OAAOrnG,QAAOi9D,GAAKquC,GAAaruC,KAAOgtE,EAAYlwH,SAASkjD,KAEnG,MAAO,CACL6jD,UAAWR,GAAUoS,mBACrB7lC,UAAWm+C,EAAwBxmI,KAAIy4D,GAAKuhD,GAAevhD,OAIzDutE,GAA4B,CAAC3F,EAAgCroC,EAAoBuL,KACrF,MAAMkjC,EAA4BngC,GAA+B+5B,GAAmB7kI,QAAOmvB,IAAM,CAAC,cAAe,WAAWpV,SAASoV,EAAEstE,QAAO,GAC9I,OAAOD,IAAUuL,GAAckjC,EAA0BxuC,OAASsL,EAAWtL,OAASsL,EAAWzU,OAASgY,GAAavD,IAGnH0iC,GAA+BrlC,IAC5B,CACL0b,UAAWR,GAAUkP,iBACrB3iC,UAAW,CAAC0yB,GAAuBna,MAIjCslC,GAA8B,CAACT,EAA4BliC,KAC/D,MAAMmjC,EAAkC,GAClCC,EAASpjC,EAAW7B,IAC1B,IAAIklC,EAEJ,GAAInB,EAAY5pI,OAAQ,CACtB,IAAIk9F,EAAeuN,GAA+BqgC,GAC9C/tH,EAAQmgF,EAAa54F,QAAQslI,EAAY,KAC9B,IAAX7sH,IACFmgF,EAAeuN,GAA+B3D,GAAegkC,IAC7D/tH,EAAQmgF,EAAa54F,QAAQslI,EAAY,KAG3CA,EAAYtnI,SAAQwsB,IAClB,MAAM+8D,EAAWsyB,GAAervF,GAAG,GAAM,GACzC+8D,EAASsnB,UAAYuJ,GAAkB5tF,GACvC+7G,EAAoBnwH,KAAKmxE,MAG3Bk/C,EAAe5sB,GAAejhB,EAAangF,EAAQ,IAGrD,MAAO,CACL0jG,UAAWR,GAAU6N,iBACrBthC,UAAWq+C,EACXnjC,WAAYqjC,IAIVT,GAAkCT,IACtC,MAAM3zB,EAAwB,GAO9B,OANA2zB,EAAYvnI,SAAQwsB,IAClBonF,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUoP,mBACrB7iC,UAAW,CAAE19D,EAAEq2E,SAAmCgY,oBAAqB+B,GAAuBpwF,SAG3FonF,GAGHs0B,GAA4B,CAACt0B,EAAuB2zB,EAA4BC,KACpF,MAAMkB,EAAwB,GAc9B,GANIlB,EAAW9pI,OAAS,GACtB8pI,EAAWxnI,SAAQsL,IACjBo9H,EAAsBtwH,KAAK9M,MAI3Bo9H,EAAsBhrI,OAAS,EAAG,CACpC,MAAM8pI,EAA4B,GAClCkB,EAAsB1oI,SAAQwsB,IAC5Bm8G,GAAmCn8G,GAAGxsB,SAAQwsB,IACS,IAAjDg7G,EAAWnqI,QAAOiO,GAAKA,EAAErI,KAAOupB,EAAEvpB,KAAIvF,QACxC8pI,EAAWpvH,KAAKoU,SAItBonF,EAAQx7F,KAAK,CAAE+lG,UAAWR,GAAUqP,kBAAmB9iC,UAAWs9C,EAAW3lI,KAAI2qB,GAAKowF,GAAuBpwF,SAI3Gm8G,GAAsCvjC,IAC1C,MAAMoiC,EAAar/B,GAA+B/C,EAAW7B,KAC1DlmG,OAAOorG,IACP5mG,KAAI2qB,GAAK27E,GAA+B37E,KACxC8qC,OAEH,OAAOkwE,GAGHW,GAAwC,CAACvtC,EAA6BysC,KAC1E,MAAMuB,EAA6C,GAMnD,OALIvB,GACFuB,EAA+BxwH,QAAQywH,GAAmDjuC,GAAc/4F,KAAI2qB,GAAKowF,GAAuBpwF,MAE1Io8G,EAA+BxwH,QAAQ0wH,GAAuBluC,GAAc/4F,KAAI2qB,GAAKowF,GAAuBpwF,MAC5Go8G,EAA+BxwH,QAAQ2wH,GAA8BnuC,GAAc/4F,KAAI2qB,GAAKowF,GAAuBpwF,MAC5G,CACL2xF,UAAWR,GAAUuS,2BACrBhmC,UAAW0+C,IAITR,GAA8BxtC,IAC3B,CACLujB,UAAWR,GAAUsS,gBACrB/lC,UAAW0Q,EAAa/4F,KAAI2qB,GAAKowF,GAAuBpwF,OAItDs8G,GAA0BluC,GACvB,IAAI,IAAI1rD,IAAI0rD,EAAav9F,OAAO+lG,IAAavhG,KAAI2qB,GAAKA,EAAE+2E,QAAQ1hG,KAAIukG,GAAOA,EAAI1B,OAAOrnG,QAAOi9D,GAAK8oC,GAAY9oC,IAAmB,MAAbA,EAAEg4B,WAAiBh7B,OAG1IyxE,GAAiCnuC,GAC9BA,EAAav9F,QAAOmvB,IAAK,IAAA2gB,EAAA,OAAA+1D,GAAS12E,KAAOm5E,GAAuBn5E,KAAkB,QAAZ2gB,EAAA3gB,EAAEo4E,kBAAU,IAAAz3D,OAAA,EAAAA,EAAEu3D,OAAOhnG,WAG9FgqI,GAA+B,CACnCsB,EACAC,EACAnrB,EACAupB,EACA6B,EAAoC,YAEpC,IAQIC,EARApvC,EAASivC,EAET93C,GAAkB83C,EAAUr4C,SAAWO,GAAkB+3C,EAAQt4C,SAAWs4C,EAAQt4C,MAAM3xF,MAAMkoI,KAAkB+B,EAAQt4C,MAAM99E,SAClIm2H,EAAUnmC,SAAW,IAAI+zB,GAAsBha,GAAuBosB,IAEtEA,EAAUr4C,MAAQs4C,EAAQt4C,OA8B5B,QAzBwC,QAAlBxjD,EAAA87F,EAAQrkC,kBAAU,IAAAz3D,OAAA,EAAAA,EAAEu3D,SAAUukC,EAAQvkC,QAE9C1kG,SAAQopI,IAKpB,GAJIzlC,GAAUylC,IACZF,EAAmB9wH,KAAKixH,GAAkBL,EAAWI,KAGlDzlC,GAAUylC,IAAY/B,EAA6B,CACtD,MAAMiC,EAAY7B,GAA4CjjC,GAAewkC,GAAYI,EAAQnmI,IAC7FqmI,GACFvvC,EAASuvC,EACT5B,GAA6B4B,EAAWF,EAAStrB,EAAMupB,GAA+B9qC,GAAuB6sC,GAAUF,KAEvHnvC,EAAUovC,GAAgCI,GAAuCJ,EAA8BD,EAAoBE,IAAarvC,EAChJ4tC,GAA4B5tC,EAAQqvC,EAAS/B,GAA+B9qC,GAAuB6sC,KAAYD,EAA8BrrB,EAAM,UACnJ/jB,EAASqvC,GAGbD,EAA+BxlC,GAAUylC,GAAWA,OAAUnlI,KAG3DojI,GACHmC,GAA8CR,EAAWC,EAASC,GAG7DF,GAGHO,GAAyC,CAACxtC,EAAsBmtC,EAAmCD,WACvG,OACmC,UAD5BC,EACJt4H,MAAKhT,GAAKA,EAAEm+F,UAAYA,WAAQ,IAAA5uD,OAAA,EAAAA,EAC/Bs8F,SAASpsI,QAAOqvB,GAAKA,EAAEotE,OAASmvC,EAAQnvC,OACzCn4E,OAAO,GAAG,IAGT6nH,GAAgD,CAACR,EAAwBC,EAAsBC,KACnG,MAAMhH,EAAoB19B,GAAeykC,GACnCS,EAAmDR,EAAmBrnI,KAAIjE,GAAKA,EAAE6rI,WAAUnyE,OAEjG0xE,EAAUtkC,OAAO1kG,SAAQspI,IAErB7B,GAA4CvF,EAAmBoH,EAAUrmI,KAAQkmG,GAAqB+4B,EAAmBoH,EAAUrmI,GAAI9D,QAAQ,QAAS,UAEzIuqI,EAAiD94H,MAAK4b,GAAKA,EAAEvpB,KAAOqmI,EAAUrmI,MAC7FklG,GAA+BmhC,GAAWtpI,SAAQwsB,GAAMA,EAAEq2E,SAAW,IAAI+X,GAAqBgC,GAAuBpwF,UAKrHi7G,GAA8C,CAACjsC,EAA0Bv4F,KAC7E,MAAMupB,EAAI28E,GAAqB3N,EAAav4F,GAC5C,OAAIupB,IAGEvpB,EAAGs0B,SAAS,SAAWt0B,EAAGsP,MAAM,KAAK6E,SAAS,QACzC+xF,GAAqB3N,EAAav4F,EAAG9D,QAAQ,SAAU,WAAWA,QAAQ,QAAS,eAE1F,IAKAwoI,GAA8B,CAClCviC,EACA6jC,EACA5B,EACAsC,EACA7rB,EACAnyB,iBAsCA,IApCKgY,GAAUyB,KAA+C,UAAhCA,EAAWlK,6BAAqB,IAAA/tD,OAAA,EAAAA,EAAE/1B,SAAS6xH,EAAQnvC,OAC3EoJ,GAASkC,IAAe/B,GAAS4lC,IACnCA,EAAQ1lC,IAAO6B,EAAsBzJ,MACjCguC,EACDvkC,EAAsBzJ,MAAO2jB,SAAS2pB,GAEtC7jC,EAAsBzJ,MAAO6jB,mBAAmBypB,EAAS,KAG5DA,EAAQ1lC,IAAM6B,EACVukC,EACFvkC,EAAWka,SAAS2pB,GAEpB7jC,EAAWoa,mBAAmBypB,EAAS,KAGjC1sC,GAAuB6I,IAAe7I,GAAuB0sC,IACvEA,EAAQ1lC,IAAM6B,EAAWR,WACzBQ,EAAWR,WAAY4a,mBAAmBypB,EAAS,KAEnDA,EAAQ1lC,IAAM6B,EAAW7B,IACX,QAAd76B,EAAA08B,EAAW7B,WAAG,IAAA76B,GAAAA,EAAE82C,mBAAmBypB,EAAS7jC,EAAW7B,IAAKvhG,QAAQojG,IAA2B,UAAZzZ,EAAsB,EAAI,KAG3Gs9C,EAAQt4C,MAAM3xF,MAAMkoI,MAAmBG,IACzC4B,EAAQt4C,MAAQ,IAGlBi5C,GAAoCX,EAASnrB,GAEzCupB,EACF4B,EAAQ7mC,cAAgB0F,GAA6BmhC,GAAW,UAAOhlI,EAEvE4lI,GAAcZ,KAGyB,QAApC/vG,EAAa,QAAbonD,EAAA2oD,EAAQ1lC,WAAK,IAAAjjB,OAAA,EAAAA,EAAA4a,6BAAuB,IAAAhiE,OAAA,EAAAA,EAAA9hB,SAAS6xH,EAAQnvC,SAAU6J,GAAUslC,GAC5E,MAAM,IAAIz5G,MAAM,wCAIlB,OADAs6G,GAAqBb,GACdA,GAGHa,GAAwBrnC,UACX,QAAjBt1D,EAAAs1D,EAAYc,WAAK,IAAAp2D,GAAAA,EAAA2yE,iBAEjB3X,GAA+B1F,GAAaziG,SAAQwsB,IAClDA,EAAEvpB,GAAKo4G,GAAQ7uF,GACX02E,GAAS12E,KACVA,EAAamvE,MAAO14F,GAAKo4G,GAAS7uF,EAAamvE,YAKhDouC,GAAgC,CAAC97B,EAAoB6P,KACzD7P,EAAMpL,SAAW,IAAIogB,GACrBhV,EAAM1R,uBAAyBA,GAAuB0R,GACrDA,EAAMpL,SAAmCwO,WAAayM,EACnD7P,EAAM1R,yBAA2BoH,GAAUsK,KAC5CA,EAAMpL,SAAmC3D,uBAAwB,IAIhE2qC,GAAiBhwC,IACLA,EAAM6K,OAAOrnG,OAAOsmG,IAC5B3jG,SAAQ0sB,GAAKA,EAAE62E,IAAKqc,YAAYlzF,KACxCmtE,EAAM6K,OAAO1kG,QAAQ6pI,IACrBhwC,EAAM52F,GAAKo4G,GAAQxhB,GACnBA,EAAMimB,kBAGF8pB,GAAsC,CAAC/vC,EAAoBikB,KAC/DisB,GAA8BlwC,EAAOikB,GACrCjkB,EAAM6K,OAAO1kG,SAAQiuG,IACnB87B,GAA8B97B,EAAO6P,GACrC7P,EAAMvJ,QAAUklC,GAAoC37B,EAAO6P,MAGzDjkB,EAAM+K,aACRmlC,GAA8BlwC,EAAM+K,WAAYkZ,GAChDjkB,EAAM+K,WAAWF,OAAO1kG,SAAQiuG,IAC9B87B,GAA8B97B,EAAO6P,GACrC7P,EAAMvJ,QAAUklC,GAAoC37B,EAAO6P,QAK3DurB,GAAoB,CAACL,EAAwBgB,KACjD,MAAMC,EAAgC9hC,GAA+BhF,GAAQ6mC,EAAczmC,KAAQymC,EAAczmC,IAAKA,IAAOymC,EAAczmC,KACrI2mC,EAAiC/hC,GAA+BjF,GAAS8lC,GAAaA,EAAYA,EAAUzlC,KAE5G4mC,EAAeF,EAA8BjoI,QAAQgoI,GACrDI,EAAkBH,EAA8BE,EAAe,GAC/DE,EAAmBJ,EAA8BE,EAAe,GAEhEG,EAAoCJ,EAA+Bt5H,MAAK4b,GAAKA,EAAEvpB,KAAOmnI,EAAgBnnI,KACtGsnI,EAAqCF,GAAoBH,EAA+Bt5H,MAAK4b,GAAKA,EAAEvpB,KAAOonI,EAAiBpnI,KAE5HwmI,EAAWe,GAAyBN,EAAgCI,EAAmCC,EAAoCF,GAE3II,EAAW,IAAI,IAAIv7F,IAAIu6F,EAAS5nI,KAAI2qB,GAAKA,EAAEvpB,GAAIsP,MAAM,KAAK,OAChE,GAAIk4H,EAAS/sI,OAAS,EACpB,MAAM,IAAI8xB,MAAM,iDAGlB,MAAO,CACLusE,QAASiuC,EACTpkC,SAAUwkC,EACVxgC,UAAWygC,EACXZ,SAAAA,IAIEe,GAA2B,CAC/BN,EACAI,EACAC,EACAG,KAEA,MAAMt7H,EAAwB,GAE9B,GAAIm7H,EAAoC,CACtC,MAAMI,EAA+BT,EAA+BtuI,WAAU4wB,GAAKA,EAAEvpB,KAAOqnI,EAAkCrnI,KACxH2nI,EAAgCV,EAA+BtuI,WAAU4wB,GAAKA,EAAEvpB,KAAOsnI,EAAmCtnI,KAChImM,EAAOgJ,QAAQ8xH,EAA+B7sI,QAAO,CAAC4xC,EAAGx0B,IAAUA,EAAQkwH,GAAgClwH,EAAQmwH,SAC9G,CACL,MAAMD,EAA+BT,EAA+BtuI,WAAU4wB,GAAKA,EAAEvpB,KAAOqnI,EAAkCrnI,KAC9HmM,EAAOgJ,QACF8xH,EAA+B7sI,QAChC,CAACmvB,EAAG/R,IAAUA,EAAQkwH,KAAkCD,GAAqCl+G,EAAEvpB,GAAIu5B,WAAWkuG,EAAkCnnC,IAAKtgG,QAK3J,OAAOmM,GAGHy5H,GAAsDjuC,IAC1D,MAAMsT,EAAO,IAAIzvG,IACjBm8F,EAAa56F,SAAQwsB,IACnB,MAAMu9F,EAASniB,GAA8Bp7E,GAC7C0hF,EAAKvuG,IAAIoqH,EAAO9mH,GAAI8mH,MAGtB,MADgB,IAAI7b,EAAK/2E,UAEtBt1B,KAAI2qB,IACH,MAAMoiG,EAAc9pB,GAAet4E,GAC7BimG,EAAgBjtB,GAA2CopB,GAAapiB,MAASA,EAAGjJ,KAAOiJ,EAAGjJ,MAAQqrB,EAAYrrB,OACxH,OAAOkvB,EAAgB,CAACA,EAAe7D,GAAe,CAACA,MAExDt3D,OACAj6D,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,0BCxe9DmoC,GAA2B7wI,IAC/B,MAAM8wI,EAA6B9wI,EAAM0kG,SAAUrhG,QAAOsB,GAAKA,EAAEg7F,YAAc+zB,GAAyBqd,wBAAuBrtI,OAAS,EAClIstI,EAA8BhxI,EAAM0kG,SAAUrhG,QAAOsB,GAAKA,EAAEg7F,YAAc+zB,GAAyBqd,wBAAuBrtI,OAAS,EAEzI,OAAOotI,GAA8BE,EACjC,kCACAF,EACA,iBACAE,EACA,wBACA,WC/BgBC,GAOpBpqI,YAAY2nF,EAAkB0iD,EAAkBvxC,GAC9Cj2F,KAAKT,GAAK6jF,KACVpjF,KAAK8kF,QAAUA,EACf9kF,KAAKwnI,SAAWA,EAChBxnI,KAAKi2F,UAAYA,GAIf,MAAOwxC,WAA6BF,GAExCpqI,YAAY2nF,EAAkB0iD,EAAkBvxC,GAC9Cl2F,MAAM+kF,EAAS0iD,EAAUvxC,GAF3Bj2F,KAAI6iB,KAAG,wBAMH,MAAO6kH,WAA0BH,GAErCpqI,YAAY2nF,EAAkB0iD,EAAkBvxC,GAC9Cl2F,MAAM+kF,EAAS0iD,EAAUvxC,GAF3Bj2F,KAAI6iB,KAAG,qBAMH,MAAO8kH,WAAwBJ,GASnCpqI,YACE+qH,EACAzN,EACAxkB,EACAnR,EACA0iD,EACAxf,EACAP,G5B6CiC,IAACjjC,E4B3ClCzkF,MAAM+kF,EAAS0iD,EAAUvxC,GAjB3Bj2F,KAAI6iB,KAAG,kBAkBL7iB,KAAKkoH,WAAaA,EAClBloH,KAAKy6G,UAAYA,EACjBz6G,KAAKgoH,qBAAuBA,EAC5BhoH,KAAKynH,oBAAsBA,EAC3BznH,KAAKi2F,UAAYA,I5BuCZsxB,GAD6B/iC,E4BtCkBxkF,M5BuClBupH,GAA8B/kC,GAA8BglC,GAA2BhlC,I4BrCzH4lC,GAA0BpqH,KAAKgoH,sBAC/BoC,GAA0BpqH,KAAKynH,sBC7D5B,MAAM5jC,GAAgBH,GACpBA,EAAI74E,WAAW84E,SAAS,EAAG,KAOvBikD,GAAkB7kE,GAGtB,GAFM,CAACA,EAAK6gB,cAAeC,GAAa9gB,EAAK+gB,WAAa,GAAID,GAAa9gB,EAAKghB,YAAYh1E,KAAK,QAC3F,CAAC80E,GAAa9gB,EAAKihB,YAAaH,GAAa9gB,EAAKkhB,cAAeJ,GAAa9gB,EAAK8kE,eAAe94H,KAAK,OCRzG+4H,GAAoB,oBAiB1B,MAAMC,GAAyB,UAZpC5qI,cACE6C,KAAKi2F,UAAY,kCAGnBC,QAAQpR,GACN,MAAO,CACLjiE,KAAMilH,GACNhjD,QAASA,KC2ETkjD,GAAoC1xI,UACxC,SAAuB,UAAdA,EAAMikH,cAAQ,IAAA9wE,OAAA,EAAAA,EAAAzvC,SAAU,CAACigH,GAAUmW,cAAenW,GAAU2R,kBAAkBl4G,SAASpd,EAAMikH,OAAOjkH,EAAMikH,OAAOvgH,OAAS,GAAG,GAAGygH,YAGrIwtB,GAA4B3xI,IAAyB,IAAAmzC,EAAC,SAAY,QAAVA,EAAAnzC,EAAMkkH,UAAI,IAAA/wE,OAAA,EAAAA,EAAAjS,OAAOsS,MAAKimD,GAAMA,EAAG0qB,YAAcR,GAAU2R,qBAE/Gsc,GAA6B,CAAC5xI,EAAc4xH,WAChD,MAAMhY,EAAUi4B,GAAW7xI,EAAO2jH,GAAUqP,mBAEtC59G,EAAoB,GACpB08H,EAAiC,GAkBvC,OAhBAC,GAAwBn4B,GAAS5zG,SAAQrB,UACvC,MAAMupF,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,MAC5D,GAAImB,IAAuC,QAA5B/6C,EAAA+6C,EAAQwjC,4BAAoB,IAAAv+E,OAAA,EAAAA,EAAE21D,qBAAsBP,GAAkBK,sBACnFkpC,EAAoB1zH,KAAK8vE,OACpB,CACL,MAAM17D,EAAIywF,GAA2BjjH,EAAMwhG,YAAc78F,GACnDqtI,GAAO9jD,MAAAA,OAAO,EAAPA,EAASwjC,uBAAyB71D,KAAKG,MAAMH,KAAKC,UAAUtpC,EAAEq2E,SAASgY,sBACpFzrG,EAAOgJ,KAAK,IAAIizH,GAAgBzf,EAAYjO,GAAUqP,kBAAmB,GAAIhzH,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,MAASqpI,EAAMn2E,KAAKG,MAAMH,KAAKC,UAAUn3D,MACrJupF,GACF4jD,EAAoB1zH,KAAK8vE,OAK/BluF,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGH68H,GAA+B,CAACjyI,EAAc4xH,WAClD,MAAMhY,EAAUi4B,GAAW7xI,EAAO2jH,GAAUoP,oBAEtC39G,EAAoB,GACpB08H,EAAiC,GAsBvC,OApBAC,GAAwBn4B,GAAS5zG,SAAQrB,IACvC,MAAMupF,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,MAC5D,GAAImB,GACG+mC,GAAuB/mC,I/BgSI,CAACA,GAC9B+iC,GAAkB/iC,IAAaA,EAA4Bi2B,YAAcR,GAAUmP,mB+BjS9Cof,CAAuBhkD,KAAaikD,GAA8CjkD,EAASvpF,IACjImtI,EAAoB1zH,KAAK8vE,GAE3BA,EAAQijC,oBAAsBt1D,KAAKG,MAAMH,KAAKC,UAAUn3D,IACxD3E,EAAMwuF,UAAYN,EAAQM,QAAUxuF,EAAMwuF,SAC1CN,EAAQgjD,SAAWI,GAAe,IAAI3oI,UACjC,CACL,MAAMqpI,EAAOI,GAA4BpyI,EAAO2E,GAE3C0tI,GAAqBL,EAAMrtI,IAC9ByQ,EAAOgJ,KAAK,IAAIizH,GAAgBzf,EAAYjO,GAAUoP,mBAAoB,GAAI/yH,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,MAASqpI,EAAMn2E,KAAKG,MAAMH,KAAKC,UAAUn3D,UAKhK3E,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGHi9H,GAAuB,CAACC,EAAqCC,uBAEjE,QACEA,EAAazyC,QAASwyC,MAAAA,OAAa,EAAbA,EAAexyC,SACT,QAA5BpxB,EAAqB,QAArBv7B,EAAAo/F,EAAa/vC,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,aAAK,IAAAjoB,OAAA,EAAAA,EAAEtxD,SAAS2rF,QACP,QAAhC7pE,EAAuB,QAAvBonD,EAAAgsD,MAAAA,SAAAA,EAAe9vC,gBAAQ,IAAAlc,OAAA,EAAAA,EAAEqQ,aAAO,IAAAz3D,OAAA,EAAAA,EAAA9hB,SAAS2rF,OACX,QAA9B2W,EAAuB,QAAvBvgF,EAAAozG,EAAa/vC,gBAAU,IAAArjE,OAAA,EAAAA,EAAAw3D,aAAO,IAAA+oB,OAAA,EAAAA,EAAAv6G,QAAQ,gCAAiC,IAAIA,QAAQ,UAAW,QAA+B,QAAvBy6G,EAAA0yB,MAAAA,OAAA,EAAAA,EAAe9vC,gBAAQ,IAAAod,OAAA,EAAAA,EAAEjpB,SAI7H67C,GAAsC,CAACxyI,EAAc4xH,WACzD,MAAMkT,EAAYiN,GAAwBF,GAAW7xI,EAAO2jH,GAAU6N,mBAChEoG,EAAYma,GAAwBF,GAAW7xI,EAAO2jH,GAAUkP,mBAEhEz9G,EAAoB,GACpB08H,EAAiC,GAEjCW,EAAoB,CAACH,EAAyBC,KAClD,MAAMG,EAAc,IAAIrB,GACtBzf,EACAjO,GAAU6N,iBACV,GACAxxH,EAAMwuF,QACN8iD,GAAe,IAAI3oI,MACnB2pI,EAAgBz2E,KAAKG,MAAMH,KAAKC,UAAUw2E,SAAkBroI,EAC5D4xD,KAAKG,MAAMH,KAAKC,UAAUy2E,KAO5B,OAJAG,EAAY/yC,UAAY8yB,GAAmCigB,EAAaH,GAIjEG,GAuCT,M/B1JwC,EAAChuC,EAAsB,GAAIxU,KACnE,MAAMyiD,EAAmB3hB,GAAoBtsB,GAC7C,OAAOxU,EAAU18C,MAAK7uC,GAAKguI,EAAiBn/F,MAAKonB,GAAKA,EAAEu2D,oBAAoBpkC,OAASpoF,EAAEooF,U+BoHnF6lD,CAA2B5yI,EAAM0kG,SAAUkzB,GAC7CA,EAAU5xH,SAAQ,CAACrB,EAAG8b,WACpB,MAAMytE,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,MAGvDmB,EAEM8mC,GAAyB9mC,IAAY2kD,GAAgD3kD,EAAS42C,EAAUrkH,IACjHqxH,EAAoB1zH,Q/BxIiB,EAACsmF,EAAsB,GAAIid,EAAU,KACzEqP,GAAoBtsB,GAAUrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBxP,UAAYA,I+BuIjDmxB,CAA8B9yI,EAAM0kG,SAAU//F,EAAEg9G,UACnEwwB,GAA8CjkD,EAAS42C,EAAUrkH,KAAWytE,EAAQwjC,qBAAsB3kC,OAASpoF,EAAEooF,KAC9H+kD,EAAoB1zH,Q/B9Ie,EAACsmF,EAAsB,GAAImN,EAAQ,KACrEmf,GAAoBtsB,GAAUrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBtf,QAAUA,I+B6I/CkhC,CAA4B/yI,EAAM0kG,SAAUogC,EAAUrkH,GAAOoxF,SAEzF7xG,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,GAAKA,EAAE3xD,KAAOilF,EAAQjlF,KAI9DilF,EAAQi2B,UAAYR,GAAU6N,iBAC9BtjC,EAAQ0jC,WAAaA,EACrB1jC,EAAQgjD,SAAWI,GAAe,IAAI3oI,MACtCulF,EAAQijC,oBAAsBt1D,KAAKG,MAAMH,KAAKC,UAAUgpE,EAAUrkH,KAClEqzG,GAA0B5lC,EAAQijC,qBAClCjjC,EAAQM,QAAUxuF,EAAMwuF,QACxBN,EAAQyR,UAAY8yB,GAAmCvkC,EAAS42C,EAAUrkH,IAE1EytE,EAAQ4jC,qBAAuBggB,EAAoBl7H,MAAKgkD,GAAKA,EAAE3xD,KAAOilF,EAAQ4jC,4BAAwB7nH,EAAYikF,EAAQ4jC,qBAC1H5jC,EAAQ6jC,2BAA6B+f,EAAoBl7H,MAAKgkD,GAAKA,EAAE3xD,KAAOilF,EAAQ6jC,kCAA8B9nH,EAAYikF,EAAQ6jC,2BAEtI38G,EAAOgJ,KAAK8vE,IArBZ94E,EAAOgJ,KAAKq0H,EAAkB9tI,EAAGmgI,EAAUrkH,QAyB/Cm3G,EAAU5xH,SAAQ,CAACrB,EAAG8b,IAAUrL,EAAOgJ,KAAKq0H,EAAkB9tI,EAAGmgI,EAAUrkH,OAG7EzgB,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGH49H,GAA4B,CAAChzI,EAAc4xH,WAC/C,MAAMhY,EAAUi4B,GAAW7xI,EAAO2jH,GAAU6N,kBAEtCp8G,EAAoB,GACpB08H,EAAiC,GAEjCmB,EADqBlB,GAAwBn4B,GACA/xG,KAAIlD,GAAKA,EAAEooF,OAgB9D,OAdAglD,GAAwBn4B,GAAS5zG,SAAQrB,YACvC,MAAMupF,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,MACxDmB,EACF4jD,EAAoB1zH,KAAK8vE,IAEpB+kD,EAAwB71H,SAA4B,QAAnBsxD,EAAc,QAAdv7B,EAAAxuC,EAAEyvG,kBAAY,IAAAjhE,OAAA,EAAAA,EAAAo2D,WAAK,IAAA76B,OAAA,EAAAA,EAAAqe,OACvDwnC,GAA+Cv0H,EAAMwhG,YAAcxhG,EAAM0kG,SAAU//F,EAAG,YAExFyQ,EAAOgJ,KAAK,IAAIizH,GAAgBzf,EAAYjO,GAAU6N,iBAAkB,GAAIxxH,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,WAASsB,EAAW4xD,KAAKG,MAAMH,KAAKC,UAAUn3D,UAIjK3E,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGH89H,GAA2B,CAAClzI,EAAc4xH,WAC9C,MAAMhY,EAAUi4B,GAAW7xI,EAAO2jH,GAAUkP,kBAEtCz9G,EAAoB,GACpB08H,EAAiC,GACjC7Z,EAAqB8Z,GAAwBn4B,GAC7Cu5B,EAA0Blb,EAAmBpwH,KAAIlD,GAAKA,EAAEooF,OAiB9D,OAfAkrC,EAAmBjyH,SAAQrB,YACzB,MAAMupF,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU//F,EAAEooF,MAC5D,IAAImB,IAAYulC,GAAmBvlC,IAAa6mC,GAAwB7mC,GAEjE,CACAilD,EAAwB/1H,SAA4B,QAAnBsxD,EAAc,QAAdv7B,EAAAxuC,EAAEyvG,kBAAY,IAAAjhE,OAAA,EAAAA,EAAAo2D,WAAK,IAAA76B,OAAA,EAAAA,EAAAqe,OACvDwnC,GAA+Cv0H,EAAMwhG,YAAcxhG,EAAM0kG,SAAU//F,EAAG,YAExF,MAAMqtI,EAAOn2E,KAAKG,MAAMH,KAAKC,UAAUn3D,IACvCyQ,EAAOgJ,KAAK,IAAIizH,GAAgBzf,EAAYjO,GAAUkP,iBAAkB,GAAI7yH,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,MAASqpI,EAAM,IAAKA,EAAM3vB,eAAgB,WANzJyvB,EAAoB1zH,KAAK8vE,MAU7BluF,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGHg+H,GAA+B,CAACpzI,EAAc4xH,WAClD,MAAMhY,EAAUi4B,GAAW7xI,EAAO2jH,GAAUmP,oBAEtC19G,EAAoB,GACpB08H,EAAiC,GAiCvC,OA/BAl4B,EAAQ5zG,SAAQqvH,UACd,MAAMge,EAAgBhe,EAAGnlC,UAAW,GAC9BkuC,EAAmB/I,EAAGnlC,UAAW,GACjC8hD,EAAOqB,GAAiBjV,EAExBlwC,EAAUgjC,GAA0BlxH,EAAM0kG,SAAU05B,EAAiBrxC,MAC3E,GAAImB,YAAW/6C,EAAA+6C,EAAQwjC,2CAAsB5oB,qBAAsBkpC,EAAKlpC,mBAAqBqpC,GAA8CjkD,EAAS8jD,GAClJF,EAAoB1zH,KAAK8vE,OACpB,CACL,MAAM17D,EAAIywF,GAA2BjjH,EAAMwhG,YAAc48B,GACnDkU,EAAiBe,EAAiDjV,EAAjC5rG,EAAEq2E,SAASgY,oBAC5C0xB,EAAe1wB,GAAervF,GACpCpd,EAAOgJ,KACL,IAAIizH,GACFzf,EACAjO,GAAUmP,mBACV,GACA9yH,EAAMwuF,QACN8iD,GAAe,IAAI3oI,MACnBkzD,KAAKG,MAAMH,KAAKC,UAAUw2E,IAC1Bz2E,KAAKG,MAAMH,KAAKC,UAAUy2E,MAG1BrkD,GACF4jD,EAAoB1zH,KAAK8vE,OAK/BluF,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAMk3E,EAAoB10H,SAASw9C,KAEpExlD,GAGHy8H,GAAa,CAAC7xI,EAAcmkH,WAChC,OAAiB,UAAVnkH,EAAMkkH,UAAI,IAAA/wE,OAAA,EAAAA,EAAAjS,OAAO79B,QAAOgyH,GAAMA,EAAGlR,YAAcA,MAAc,IAGhE4tB,GAA2Bn4B,GACxB05B,GAAmB15B,EAAQ/xG,KAAIwtH,GAAMA,EAAGnlC,WAAa,KAAI5yB,QAG5Dg2E,GAAsBpjD,IAC1B,MAAMroF,EAAM,IAAIpD,IACV2Q,EAAqB,GAO3B,OANA86E,EAAUpkD,UAAU9lC,SAAQrB,IACrBkD,EAAIonD,IAAItqD,EAAEooF,QACbllF,EAAIlC,IAAIhB,EAAEooF,KAAOpoF,GACjByQ,EAAOyiB,QAAQlzB,OAGZyQ,GAGHy9H,GAAkD,CAACj4E,EAAoBj2D,mBAC3E,OAA6B,QAAtBwuC,EAAAynB,EAAE82D,4BAAoB,IAAAv+E,OAAA,EAAAA,EAAEwuE,WAAYh9G,EAAEg9G,UAAiC,QAAtBjzC,EAAA9T,EAAE82D,4BAAoB,IAAAhjD,OAAA,EAAAA,EAAEunC,UAAWtxG,EAAEsxG,iBAAU/2E,EAAwB,UAAxB07B,EAAE82D,4BAAsB,IAAAprC,OAAA,EAAAA,EAAAkc,+BAAU7L,UAAsB,UAAZhyF,EAAE69F,gBAAU,IAAArjE,OAAA,EAAAA,EAAAw3D,QAG3Jw7C,GAAgD,CAACv3E,EAAoBj2D,6BACzE,OACwB,QAAtBwuC,EAAAynB,EAAE82D,4BAAoB,IAAAv+E,OAAA,EAAAA,EAAE0+D,SAAUltG,EAAEktG,gBACpCnjC,EAAA9T,EAAE82D,2CAAsBzb,UAAWtxG,EAAEsxG,SACL,kBAAhC3vB,EAAA1rB,EAAE82D,2CAAsBlvB,gBAAQ,IAAAtjE,OAAA,EAAAA,EAAEy3D,UAAoB,UAAVhyF,EAAE69F,gBAAQ,IAAArjE,OAAA,EAAAA,EAAEw3D,SACf,QAAzCmpB,EAAoC,QAApCF,EAAwB,QAAxBF,EAAA9kD,EAAE82D,4BAAsB,IAAAhS,OAAA,EAAAA,EAAAtL,kBAAY,IAAAwL,OAAA,EAAAA,EAAArW,WAAK,IAAAuW,OAAA,EAAAA,EAAA6B,YAA+B,QAAnB4M,EAAY,QAAZvO,EAAAr7G,EAAEyvG,kBAAU,IAAA4L,OAAA,EAAAA,EAAEzW,WAAK,IAAAglB,OAAA,EAAAA,EAAA5M,UAItE4xB,GAA4BvzI,IAChC,MAAM8kI,EAAY+M,GAAW7xI,EAAO2jH,GAAU6N,kBACxCoG,EAAYia,GAAW7xI,EAAO2jH,GAAUkP,kBAC9C,QAASiS,EAAUphI,QAAUohI,EAAUphI,SAAWk0H,EAAUl0H,QAGxD0uI,GAA8B,CAACpyI,EAAcuvF,KACjD,MACMikD,EADU,IAAIxzI,EAAM+jH,MAAO/rF,MACJ30B,QAAOgyH,UAAM,OAAAA,EAAGlR,YAAcR,GAAUoP,6BAAsB5/E,EAAAkiF,EAAGnlC,gCAAW18C,MAAK7uC,GAAKA,EAAEooF,OAASwC,EAASxC,WACjI0mD,EAAcD,EAAax7G,MACjC,OAAOy7G,EAAc53E,KAAKG,MAAMH,KAAKC,UAAU23E,EAAYvjD,UAAW,UAAOjmF,GAGzEypI,GAAyB1zI,UACnB,QAAVmzC,EAAAnzC,EAAMkkH,UAAI,IAAA/wE,GAAAA,EAAAjS,OAAOl7B,SAAQqvH,UACvB,OAAc,QAAdliF,EAAAkiF,EAAGnlC,iBAAW,IAAA/8C,OAAA,EAAAA,EAAA9vC,OAAOu4D,SAAS51D,SAAQrB,IAChCA,EAAEupF,UAAavpF,EAAEupF,QAA4B6jC,6BAC/CptH,EAAE09G,eAAiBgT,EAAGlR,YAAcR,GAAUkP,iBAAmB,GAAK,IAAKluH,EAAE09G,gBAAkB,KAC9F19G,EAAE09G,eAAejlG,SAASgqG,KAAyBziH,EAAE09G,eAAejkG,KAAKgpG,KACzEziH,EAAE09G,eAAejlG,SAASkqG,KAA0B3iH,EAAE09G,eAAejkG,KAAKkpG,YAO7EqsB,GAAoC3zI,UAExC,QAD0B,QAAVmzC,EAAAnzC,EAAMkkH,UAAI,IAAA/wE,OAAA,EAAAA,EAAAjS,SAAU,IACrBsS,MAAK6hF,GAAMA,EAAGlR,YAAcR,GAAU6N,kBAAoB6D,EAAGlR,YAAcR,GAAUkP,oBAIhG+gB,GAAyC5zI,IAC7C,IAAI0kG,EAAWssB,GAAoBhxH,EAAM0kG,UAAY,IAClDrhG,QAAOu3D,GAAKA,EAAEu2D,oBAAoBroB,oBAAsBP,GAAkBG,yBAC1ErlG,QAAOu3D,IAAM44D,GAAoB54D,KAEpC8pC,EAAS1+F,SAAQ40D,IACf,MAAMpoC,EAAIywF,GAA2BjjH,EAAMwhG,YAAc5mC,EAAEu2D,qBAC3D,GAAI3+F,EAAG,CACL,MAAM7tB,EAAIk9G,GAAervF,GAAG,GAAO,GACnCooC,EAAEu2D,oBAAoBxP,QAAUnvF,EAAEvpB,GAClC2xD,EAAEu2D,oBAAoB/c,WAAY7K,IAAKoY,QAAUnvF,EAAE+2E,IAAKtgG,GACxD2xD,EAAEu2D,oBAAoBnP,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAUn3D,EAAEq9G,uCAErFpnD,EAAE82D,uBACJ92D,EAAE82D,qBAAqB/P,QAAUnvF,EAAEvpB,GACnC2xD,EAAE82D,qBAAqBtd,WAAY7K,IAAKoY,QAAUnvF,EAAE+2E,IAAKtgG,GACzD2xD,EAAE82D,qBAAqB1P,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAUn3D,EAAEq9G,4CAKhGtd,EAAWssB,GAAoBhxH,EAAM0kG,UAAY,IAAIrhG,QAAOu3D,GAAK64D,GAAmB74D,IAAM44D,GAAoB54D,KAC9G8pC,EAAS1+F,SAAQ40D,IACf,MAAMpoC,EAAIywF,GAA2BjjH,EAAMwhG,YAAc5mC,EAAEu2D,oBAAoB/c,WAAY7K,KAC3F3uC,EAAEu2D,oBAAoB/c,WAAY7K,IAAKoY,QAAUnvF,EAAEvpB,OAKjD4qI,GAAyC7zI,IAC7C,MAAM0kG,EAAWssB,GAAoBhxH,EAAM0kG,UAAY,IAAIrhG,QAAOu3D,GAAK64D,GAAmB74D,IAAM44D,GAAoB54D,KACpHk5E,GAA8CpvC,EAAUg1B,GAAU15H,EAAMkkH,GAAIhjF,OAAQyiF,GAAU6N,mBAC9FsiB,GAA8CpvC,EAAUg1B,GAAU15H,EAAMkkH,GAAIhjF,OAAQyiF,GAAUkP,oBAG1FihB,GAAgD,CAACpvC,EAA8B,GAAIq1B,KACvF,IAAKA,EACH,OAEF,MAAMga,EAAQha,EAAO5V,YAAcR,GAAU6N,iBAAmB,GAAK,EAG/DwiB,EAAcja,EAAO5V,YAAcR,GAAU6N,iBAFxB,CAAC7sH,EAAak2H,IAAkCl2H,EAAEyvG,WAAYziB,SAAYkpC,EAC1E,CAACl2H,EAAak2H,IAAkCl2H,EAAEyvG,WAAYziB,QAAWkpC,EAEpGn2B,EAAS1+F,SAAQ40D,IACf,MAAMq5E,EAAar5E,EAAEu2D,oBAAoB/c,WAAY7K,IAAKoY,QACpDkZ,EAAejgE,EAAEu2D,oBAAoB/c,WAAYziB,QACjDF,EAAesoC,EAAO7pC,UAAW7sF,QAAOsB,IAAK,IAAAwuC,EAAAu7B,EAAA,eAAAA,EAAc,QAAdv7B,EAAAxuC,EAAEyvG,kBAAY,IAAAjhE,OAAA,EAAAA,EAAAo2D,0BAAKoY,WAAYsyB,GAAcD,EAAYrvI,EAAGk2H,MAAen3H,OAASqwI,EACvIn5E,EAAEu2D,oBAAoB/c,WAAYziB,SAAYF,MC1ZrCyiD,GAAuB,CAACl0I,EAAc0kG,EAAsB,YACvE,MAAMgxB,EAAsB,GAC5BhxB,EAASrhG,OAAOowH,IAAoBztH,SAASkoF,IAC3C,MAAMkoC,EAAY,IAAKp2H,EAAO+jH,KAAM,GAAIC,QAAS,GAAIC,OAAQ,GAAIC,GAAI,IAAKlkH,EAAMkkH,GAAIhjF,OAAQ,KAC5Fw0F,EAAWt3G,KAAK+1H,GAAe/d,EAAW,CAAEloC,QAAAA,QAG9C,MAAMkoC,EAAYX,GAAyDz1H,EAAO01H,EAAYhxB,EAAU,WAExG,OADA0xB,EAAU1xB,iBAAWvxD,EAAAnzC,EAAM0kG,+BAAUrhG,QAAOu3D,IAAM64D,GAAmB74D,KAC9Dw7D,GAGH+d,GAAiB,CAACn0I,EAAY6jH,aAClC,MAAM31B,EAAW21B,EAAO31B,SAAWgjC,GAA0BlxH,EAAM0kG,SAAUmf,EAAOt0B,SAASxC,MACvFqnD,EAAqBhhB,GAA8BpzH,EAAM0kG,SAAUxW,GACnEw1C,EAAwB0Q,EAAmBvsI,KAAI+yD,GAAKA,EAAE3xD,KAEtDinF,EAAYkkD,EAAmBvsI,KAAI+yD,IACvC,MAAMj2D,EAAI6uH,GAAoB54D,GAAKA,EAAEu2D,oBAAsBvO,GAAuBK,GAA2BjjH,EAAMwhG,YAAa5mC,EAAEu2D,sBAElI,OADAxsH,EAAEupF,QAAUryB,KAAKG,MAAMH,KAAKC,UAAUlB,IAC/Bj2D,KAGHuzH,EAAqBhoC,EACxBroF,KAAIlD,GAAKs+G,GAA2BjjH,EAAMwhG,YAAa78F,KACvDtB,OAAOu4D,SACP/zD,KAAI2qB,GAAKowF,GAAuBpwF,KAE7B0O,EAAuB,CAAC,CAAEijF,UAAWR,GAAUmW,cAAe5pC,UAAAA,IAEhEgoC,EAAmBx0H,QACrBw9B,EAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUkS,iBAAkB3lC,UAAWgoC,IAGlE,MAAMxzB,EAAW1kG,EAAM0kG,SAASrhG,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,MAMzF,OALIuqH,GAAoBtlC,IAEtBmmD,GAAkE3vC,EAAU0vC,GAGvE,IACFp0I,EACH+jH,KAAMgE,GAAU/nH,EAAOkhC,GACvB8iF,QAAS9iF,EACT+iF,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,SAErB3f,SAA0B,UAAhB1kG,EAAM0kG,gBAAU,IAAAh2B,OAAA,EAAAA,EAAArrE,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,QAIjForI,GAAoE,CAAC3vC,EAAqB0vC,KAC9F,MAAME,EAAmBF,EAAmB,GACtCG,EAAgBH,EAAmBA,EAAmB1wI,OAAS,GAE/DwqF,EAAUwW,EAAS9tF,MAAKgkD,IAAI,IAAAznB,EAAAu7B,EAAC,OAAkF,UAAtC,QAA3Cv7B,EAAAynB,EAAsBu2D,2BAAqB,IAAAh+E,OAAA,EAAAA,EAAA6uE,4CAAsC,IAAAtzC,OAAA,EAAAA,EAAAqe,QAASwnD,EAAcpjB,oBAAoBpkC,QAC5JmB,IACDA,EAA4BijC,oBAAoBnP,qCAAuCsyB,EAAiBnjB,oBAAoBnP,qCAC5H9zB,EAA4BwjC,qBAAsB1P,qCAAuCsyB,EAAiBnjB,oBAAoBnP,uCCpCtHwyB,GAAwB,CAACx0I,EAAc0kG,EAAsB,YACxE,MAAMgxB,EAAsB,GAC5BhxB,EAASrhG,OAAOowH,IAAoBztH,SAASkoF,IAC3C,MAAMkoC,EAAY,IAAKp2H,EAAO+jH,KAAM,GAAIC,QAAS,GAAIC,OAAQ,GAAIC,GAAI,IAAKlkH,EAAMkkH,GAAIhjF,OAAQ,KAC5Fw0F,EAAWt3G,KAAKq2H,GAAgBre,EAAW,CAAEloC,QAAAA,QAE/C,MAAMkoC,EAAYX,GAAyDz1H,EAAO01H,EAAYhxB,EAAU,YAExG,OADA0xB,EAAU1xB,iBAAWvxD,EAAAnzC,EAAM0kG,+BAAUrhG,QAAOu3D,IAAM64D,GAAmB74D,KAC9Dw7D,GAGIqe,GAAkB,CAACz0I,EAAY6jH,aAC1C,MAAM31B,EAAW21B,EAAO31B,SAAWgjC,GAA0BlxH,EAAM0kG,SAAUmf,EAAOt0B,SAASxC,MACvFqnD,EAAqBhhB,GAA8BpzH,EAAM0kG,SAAUxW,GACnEw1C,EAAwB0Q,EAAmBvsI,KAAI+yD,GAAKA,EAAE3xD,KAEtDinF,EAAYkkD,EAAmBvsI,KAAI+yD,IACvCA,EAAEu2D,oBAAoBjjC,QAAUryB,KAAKG,MAAMH,KAAKC,UAAUlB,IACnDA,EAAEu2D,uBAGLvX,EAAwB,CAAC,CAAEuK,UAAWR,GAAU2R,iBAAkBplC,UAAAA,IAExE,GAAI6kC,GAAwB7mC,GAAU,CAGpC,MAAMwmD,EAAiBxkD,EAAUroF,KAAIlD,GAAKA,EAAEktG,QACtC8iC,EAAiB30I,EAAM0kG,SAC1BrhG,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,MACzD5F,QAAQu3D,GAAe85E,EAAet3H,SAAUw9C,EAAsBu2D,oBAAoBtf,SAC7F6xB,EAAsBtlH,QAAQu2H,EAAe9sI,KAAI+yD,GAAKA,EAAE3xD,MAGxDi1H,GAAiBl+H,EAAO20I,EAAetxI,OAAOowH,KAE9C,MAAMmhB,EAA4BD,EAAe9sI,KAAI+yD,IACnDA,EAAEu2D,oBAAoBjjC,QAAUryB,KAAKG,MAAMH,KAAKC,UAAUlB,IACnDA,EAAEu2D,uBAGXvX,EAAQx7F,KAAK,CAAE+lG,UAAWR,GAAU4R,0BAA2BrlC,UAAW0kD,IAG5E,MAAMxe,EAAY,IAAKp2H,EAAO+jH,KAAM,IAEpCnK,EAAQx7F,QAAQ8/G,GAAiB9H,EAAWge,EAAmB/wI,OAAOowH,MACtE,MAAM0C,EAAclB,GAAuB/mC,GAAW2mD,GAAwCj7B,EAAS1rB,EAASluF,GAAS45G,EAEzH,MAAO,IACF55G,EACH+jH,KAAMgE,GAAU/nH,EAAOm2H,GACvBnS,QAASpK,EACTqK,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EACRyK,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,SAErB3f,SAA0B,UAAhB1kG,EAAM0kG,gBAAU,IAAAh2B,OAAA,EAAAA,EAAArrE,QAAQu3D,IAAgB8oE,EAAsBtmH,SAASw9C,EAAE3xD,QAIjF4rI,GAA0C,CAACj7B,EAAuB1rB,EAA0BluF,KAIhG,MAAMm2H,EAAcvc,EAAQv2G,QAAOo2F,GAAMA,EAAG0qB,YAAcR,GAAUoP,qBAC9DtqB,EAAcwa,GAA2BjjH,EAAMwhG,YAActT,EAAQijC,qBAG3E,OAFAgF,EAAY/3G,KAAK,CAAE+lG,UAAWR,GAAUoP,mBAAoB7iC,UAAW,CAAChC,EAAQijC,oBAAkCjjC,EAAQwjC,wBAC1HyE,EAAY/3G,KAAK,CAAE+lG,UAAWR,GAAUkS,iBAAkB3lC,UAAWqzB,GAAiC9a,GAAa,KAC5G0tB,GAGH+H,GAAmB,CAACl+H,EAAc0kG,KACtC,MAAMkV,EAAwB,GAU9B,OARAlV,EAAS1+F,SAAQ40D,IACfA,EAAEupD,YAAcR,GAAUqP,mBAAqBpZ,EAAQx7F,QAAQ02H,GAAiB90I,EAAO46D,IACvFA,EAAEupD,YAAcR,GAAUoP,oBAAsBnZ,EAAQx7F,QAAQ22H,GAAmB/0I,EAAO46D,IAC1FA,EAAEupD,YAAcR,GAAUmP,oBAAsBlZ,EAAQx7F,QAAQ42H,GAAmBh1I,EAAO46D,IAC1FA,EAAEupD,YAAcR,GAAU6N,kBAAoB5X,EAAQx7F,QAAQ62H,GAAgBj1I,EAAO46D,IACrFA,EAAEupD,YAAcR,GAAUkP,kBAAoBjZ,EAAQx7F,QAAQ82H,GAAgBl1I,EAAO46D,OAGhFy7D,GAAer2H,EAAO45G,EAAS+J,GAAUoS,qBAG5C+e,GAAmB,CAAC90I,EAAckuF,WACtC,iBAAOi2C,GAAiBnkI,EAAO,CAAE6/F,MAAO3R,EAAQwjC,uBAAwBxN,yBAAIhjF,SAAU,IAGlF6zG,GAAqB,CAAC/0I,EAAckuF,WACxC,iBAAOoxC,GAAsBt/H,EAAO,CAAE6/F,MAAO3R,EAAQwjC,uBAAwBxN,yBAAIhjF,SAAU,IAGvF8zG,GAAqB,CAACh1I,EAAckuF,iBACxC,OAAkC,QAA9B/6C,EAAA+6C,EAAQwjC,4BAAsB,IAAAv+E,OAAA,EAAAA,EAAA21D,qBAAsBP,GAAkBK,iCACjE27B,GAAgBvkI,EAAO,CAAE6/F,MAAO3R,EAAQwjC,uBAAwBxN,yBAAIhjF,SAAU,IAC9C,QAA9BolD,EAAA4H,EAAQwjC,4BAAsB,IAAAprC,OAAA,EAAAA,EAAAwiB,qBAAsBP,GAAkBI,mCACxE22B,GAAsBt/H,EAAO,CAAE6/F,MAAO3R,EAAQwjC,uBAAwBxN,yBAAIhjF,SAE5E,IAGH+zG,GAAkB,CAACj1I,EAAckuF,WACrC,MAAMinD,EAA0BlyB,GAA2BjjH,EAAMwhG,YAActT,EAAQijC,qBACjF2G,EAAsBtsB,GAA2C2pC,GAAyB3iH,IAAM22E,GAAQ32E,KAExGpd,GAAsG,QAA7F+9B,EAAA0tF,GAAe7gI,EAAO,CAAE6/F,MAAO3R,EAAQijC,oBAAqB4P,qBAAqB,IAAQ7c,UAAI,IAAA/wE,OAAA,EAAAA,EAAAjS,SAAU,GAGlHgtD,EAAQwjC,sBACVt8G,EAAOgJ,QAAQ82H,GAAgBl1I,EAAOkuF,IAGxC,MAAMk1C,EAAuB1O,GAAyB10H,EAAM0kG,SAAUxW,GAChEknD,EAAQ3gB,GAAsDz0H,EAAM0kG,SAAU0+B,EAAqBjS,qBAEzG,GAAIikB,EAAO,CACT,MAAMzwI,EAAImzH,EAAsBjW,GAAeiW,QAAuB7tH,EACtEmrI,EAAMjkB,oBAAoBnP,qCAAuCr9G,EAAIk3D,KAAKG,MAAMH,KAAKC,UAAUn3D,SAAMsF,EACrGmrI,EAAM1jB,qBAAsB1P,qCAAuCr9G,EAAIk3D,KAAKG,MAAMH,KAAKC,UAAUn3D,SAAMsF,EAGzG,OAAOmL,GAGH8/H,GAAkB,CAACl1I,EAAckuF,KACrC,MAAMkmD,EAAqBhhB,GAA8BpzH,EAAM0kG,SAAUxW,GACnE6rC,EAAqB,CAAE5V,UAAWR,GAAUkP,iBAAkB3iC,UAAWkkD,EAAmBvsI,KAAI+yD,GAAKA,EAAE82D,wBACvG2jB,EAAwB,CAAElxB,UAAWR,GAAU6N,iBAAkBthC,UAAW,IAE5E96E,EAAuB,GAEvBmuH,EAAuBr1C,EAAQijC,oBAErC,GAAIoS,EAAqBptB,UAAW,CAClC,IAAIigB,EAAmB,IAAKp2H,EAAO+jH,KAAM,GAAIC,QAAS,GAAIC,OAAQ,GAAIC,GAAI,CAAEhjF,OAAQ,KACpFk1F,EAAY8E,GAAe9E,EAAW,CACpCv2B,MAAO0jC,EAAqBvhB,qCAC5B/hB,KAAM,CACJH,KAAMyjC,EAAqBzjC,KAC3B/S,KAAMw2C,EAAqBx2C,KAC3B4E,QAAS,SACTqO,0BAA2BujC,EAAqBvjC,6BAIpD5qF,EAAOgJ,QAAQg4G,EAAUlS,GAAIhjF,aAE7B9rB,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAU6N,iBAAkBthC,UAAWsxC,GAAQxhI,EAAO+5H,EAAQsb,KAGzFC,GAAmEt1I,EAAOkuF,EAAS94E,EAAO,GAAG86E,UAAW,IAExG,MAAM2nC,EAA0BpU,GAA6BR,GAA2BjjH,EAAMwhG,YAAcpsF,EAAO,GAAG86E,UAAW,KAAM7sF,OAAOsrG,IAM9I,OALAv5F,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUoS,mBAAoB7lC,UAAW2nC,EAAwBhwH,KAAI2qB,GAAKqvF,GAAervF,OAElHpd,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUuS,2BAA4BhmC,UAAWinC,GAAuCn3H,EAAMwhG,YAAcm4B,GAAgCvkH,MACrKA,EAAOgJ,KAAK,CAAE+lG,UAAWR,GAAUkS,iBAAkB3lC,UAAWqlD,GAA8Bv1I,EAAOoV,KAE9FA,EAAO/R,QAAOo2F,IAAM,IAAAtmD,EAAA,OAAY,QAAZA,EAAAsmD,EAAGvJ,iBAAS,IAAA/8C,OAAA,EAAAA,EAAEzvC,WAGrC4xI,GAAqE,CAACt1I,EAAckuF,EAA0BsnD,WAElH,MAAMC,EAAe3qC,GAAemY,GAA2BjjH,EAAMwhG,YAAcg0C,IAC7EE,EAAe7zB,GAAe4zB,GAAc,GAAO,GACnDvS,EAAwBzO,GACd,QAAdthF,EAAAnzC,EAAM0kG,gBAAQ,IAAAvxD,OAAA,EAAAA,EAAE9vC,QAAOu3D,GAAKA,EAAE3xD,KAAOilF,EAAQjlF,KAC7CysI,GAGExS,GAAyBA,EAAsBj6H,KAAOilF,EAAQjlF,KAEhEi6H,EAAsB/R,oBAAoBnP,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAU45E,IAC3GxS,EAAsBxR,qBAAsB1P,qCAAuCnmD,KAAKG,MAAMH,KAAKC,UAAU45E,MAU3GH,GAAgC,CAACv1I,EAAcoV,IAC5CA,EACJ/R,QAAOo2F,GAAMA,EAAG0qB,YAAcR,GAAU6N,mBACxC3pH,KAAI4xF,GAAMA,EAAGvJ,WAAa,KAC1B5yB,OACAz1D,KAAIlD,GAAKs+G,GAA2BjjH,EAAMwhG,YAAc78F,KACxDkD,KAAI2qB,GAAKowF,GAAuBpwF,KCpOxBmjH,GAAiB,iBAcvB,MAAMC,GAAsB,UATjCh2C,UAEE,MAAO,CACLrzE,KAAMopH,GACNjxC,SAH0B,MCmO1BmxC,GAAwB,CAACjkB,EAAgC5xH,WAC7D,MC7OkB,SD6OX4xH,MAAiC,QAARz+E,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,OAAA,EAAAA,EAAEjS,OAAOsS,MAAKxxC,GAASA,EAAMmiH,YAAcR,GAAUmW,kBAGzFgc,GAA2B,CAAClkB,EAAgC5xH,WAChE,MCjPkB,SDiPX4xH,MAAiC,QAARz+E,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,OAAA,EAAAA,EAAEjS,OAAOsS,MAAKxxC,GAASA,EAAMmiH,YAAcR,GAAU2R,qBE7OzFygB,G9IgfN,SAAyBC,GAIvB,IAHA,IAAIC,EAAc5uI,OAAOwD,KAAKmrI,GAC1BE,EAAgB,GAEXtyI,EAAI,EAAGA,EAAIqyI,EAAYvyI,OAAQE,IAAK,CAC3C,IAAI6C,EAAMwvI,EAAYryI,GAEO,eAAzBw7F,QAAQC,IAAIC,eACe,IAAlB02C,EAASvvI,IAClB84F,GAAQ,gCAAmC94F,EAAM,KAIxB,mBAAlBuvI,EAASvvI,KAClByvI,EAAczvI,GAAOuvI,EAASvvI,IAIlC,IAGI0vI,EAMAC,EATAC,EAAmBhvI,OAAOwD,KAAKqrI,GAKN,eAAzB92C,QAAQC,IAAIC,WACd62C,EAAqB,IAKvB,KAjEF,SAA4BH,GAC1B3uI,OAAOwD,KAAKmrI,GAAUhwI,SAAQ,SAAUS,GACtC,IAAI6vI,EAAUN,EAASvvI,GAKvB,QAA4B,IAJT6vI,OAAQrsI,EAAW,CACpCsiB,KAAM+xE,GAAYC,OAIlB,MAAM,IAAI/oE,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,IAAM,8BAAiCz3F,EAAjC,iRAGvF,QAEO,IAFI6vI,OAAQrsI,EAAW,CAC5BsiB,KAAM+xE,GAAYG,yBAElB,MAAM,IAAIjpE,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,IAAM,8BAAiCz3F,EAAjC,8EAA6H63F,GAAYC,KAAzI,oTAoDvFg4C,CAAmBL,GACnB,MAAOvxI,GACPyxI,EAAsBzxI,EAGxB,OAAO,SAAqB3E,EAAO6jH,GAKjC,QAJc,IAAV7jH,IACFA,EAAQ,IAGNo2I,EACF,MAAMA,EAGR,GAA6B,eAAzBh3C,QAAQC,IAAIC,SAA2B,CACzC,IAAIk3C,EA1GV,SAA+CC,EAAYT,EAAUnyB,EAAQsyB,GAC3E,IAAIF,EAAc5uI,OAAOwD,KAAKmrI,GAC1BU,EAAe7yB,GAAUA,EAAOt3F,OAAS+xE,GAAYC,KAAO,gDAAkD,yCAElH,GAA2B,IAAvB03C,EAAYvyI,OACd,MAAO,gIAGT,IAAKi3B,GAAc87G,GACjB,MAAO,OAASC,EAAe,4BAA+Bx3C,GAAOu3C,GAA9D,kEAAwJR,EAAYx9H,KAAK,QAAU,IAG5L,IAAIk+H,EAAiBtvI,OAAOwD,KAAK4rI,GAAYpzI,QAAO,SAAUoD,GAC5D,OAAQuvI,EAASnjH,eAAepsB,KAAS0vI,EAAmB1vI,MAK9D,OAHAkwI,EAAe3wI,SAAQ,SAAUS,GAC/B0vI,EAAmB1vI,IAAO,KAExBo9G,GAAUA,EAAOt3F,OAAS+xE,GAAYE,aAA1C,EAEIm4C,EAAejzI,OAAS,EACnB,eAAiBizI,EAAejzI,OAAS,EAAI,OAAS,OAAtD,KAA6EizI,EAAel+H,KAAK,QAAU,cAAiBi+H,EAA5H,8DAAwNT,EAAYx9H,KAAK,QAAU,2CAD5P,EAsFyBm+H,CAAsC52I,EAAOk2I,EAAeryB,EAAQsyB,GAErFK,GACFj3C,GAAQi3C,GAOZ,IAHA,IAAIp6E,GAAa,EACby6E,EAAY,GAEPpgH,EAAK,EAAGA,EAAK4/G,EAAiB3yI,OAAQ+yB,IAAM,CACnD,IAAI8R,EAAO8tG,EAAiB5/G,GACxB6/G,EAAUJ,EAAc3tG,GACxBuuG,EAAsB92I,EAAMuoC,GAC5BwuG,EAAkBT,EAAQQ,EAAqBjzB,GAEnD,QAA+B,IAApBkzB,EAAiC,CAC1C,IAAInlB,EAAa/N,GAAUA,EAAOt3F,KAClC,MAAM,IAAIiJ,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,IAAM,uCAAyC0zB,EAAa,IAAOttH,OAAOstH,GAAc,IAAO,kBAAoB,gCAAmCrpF,EAAhJ,kLAGvFsuG,EAAUtuG,GAAQwuG,EAClB36E,EAAaA,GAAc26E,IAAoBD,EAIjD,OADA16E,EAAaA,GAAci6E,EAAiB3yI,SAAW2D,OAAOwD,KAAK7K,GAAO0D,QACtDmzI,EAAY72I,G8IvjBZg3I,CAAgB,CACtCC,WCLwB,CAACj3I,EAAQ,GAAI6jH,KAC7BA,EAAOt3F,KAEJvsB,GDGXk3I,gBF0E6B,CAACl3I,EAAQ,GAAI6jH,aAC1C,IAAIuS,EAEA5nC,EAAWxuF,EAAgBwuF,QAC3BojC,EAAa/N,EAAOt3F,KACpB6hE,EAAapuF,EAAgBouF,UAC7BsW,EAAY1kG,EAAgB0kG,UAAY,GACxC4f,EAAoCtkH,EAAgBskH,kCAAoC,EAE5F,OAAQT,EAAOt3F,MACb,I3IvFsC,6B2IwFpC6pG,EAAY8E,GAAel7H,EAAO6jH,GAClC,MACF,I7H1FwC,+B6H2FtCuS,EtBhF4C,EAACp2H,EAAY6jH,WAC7D,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,EAEF,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAAKooH,GAAgB3f,EAAazD,IAChC,OAAOgjB,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,oEAGpF,MAAMkgC,GAAqC/vB,GAAiCrH,GACtEm3B,EAAgC/b,EAAO3e,sBAE7C,GAAI26B,IAAsCD,EAExC,OADA5/H,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMm3I,EAAoBxX,GAAqCl3B,EAAam3B,GAC5E,GAAIuX,EACF,OAAOnvB,GAA8BhoH,EAAOm3I,GAG9C,MAAMC,EAAoCvX,IAAsChc,EAAO3e,sBAEjF0U,EAAwB,GAE9B,GAAIw9B,EAAmC,CACrC,MAAMx2C,EAAeuN,GAA+B1F,GAAaplG,QAAOmvB,IAAMo3E,GAAYnB,IAAgBmB,GAAYp3E,KAEtHouE,EAAa56F,SAAQwsB,IACnB,MAAM3sB,EAAWg8G,GAAervF,GAC/BA,EAAEq2E,SAAmC3D,sBAAwB2e,EAAO3e,sBACrE,MAAMmyC,EAAWx1B,GAAervF,GAChConF,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUoP,mBACrB7iC,UAAW,CAACrqF,EAAUwxI,YAGrB,CACL,MAAMxxI,EAAWg8G,GAAepZ,GAC/BA,EAAYI,SAAmC3D,sBAAwB2e,EAAO3e,sBAC/E,MAAMmyC,EAAWx1B,GAAepZ,GAChCmR,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUoP,mBACrB7iC,UAAW,CAACrqF,EAAUwxI,KAGxBz9B,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUuS,2BACrBhmC,UAAW8yB,GAAava,KAS5B,OALAmR,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUqS,oBACrB9lC,UAAW,CAAC2xB,GAAepZ,MAGtB,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,GACvBoK,QAASpK,EACTqK,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EACRyK,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WsBWPizB,CAAmCt3I,EAAO6jH,GACtD,MACF,IhH7FoC,2BgH8FlCuS,EIzF+B,EAACp2H,EAAY6jH,WAChD,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,EAEF,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAAKooH,GAAgB3f,EAAaN,IAChC,OAAO6f,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,oEAGpF,MAAMkO,EAAkBD,GAA8BnF,GAEtD,QAAwBx+F,IAApB4jG,EACF,OAAOma,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,oEAGpF,GAAIkO,EAAgBzF,gBAAkByb,EAAOzb,cAE3C,OADApoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM6F,EAAWg8G,GAAepZ,GAChCoF,EAAgBzF,cAAgByb,EAAOzb,oBAAiBn+F,EACxD,MAAMotI,EAAWx1B,GAAepZ,GAE1BmR,EAAwB,GAU9B,OATAA,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUoP,mBACrB7iC,UAAW,CAACrqF,EAAUwxI,KAExBz9B,EAAQx7F,KAAK,CACX+lG,UAAWR,GAAUkS,iBACrB3lC,UAAW,CAACmnD,KAGP,CACL71C,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,GACvBoK,QAASpK,EACTqK,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EACRyK,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WJ4CPkzB,CAAsBv3I,EAAO6jH,GACzC,MACF,KAAKtf,GACH6xB,E1BhEgC,EAACp2H,EAAY6jH,WACjD,IAAIQ,EAAU,GACVrkH,GAASA,EAAMkkH,IAAMlkH,EAAMkkH,GAAGG,QAAQ3gH,OAAS,IACjD2gH,EAAUrkH,EAAMkkH,GAAGG,SAGrB,MAAMif,EAAiB,CACrB9hC,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM,GACNC,QAAS,GACTC,OAAQ,GACRC,GAAI,CACFhjF,OAAQ,GACRmjF,QAASA,GAEX3f,SAAU,GACVtW,UAAWpuF,EAAMouF,UACjBk2B,iCAAkC,GAG9B1K,EAAU,IAAI2d,GAEhB1T,EAAOpf,iBAAiB+yC,yBAC1B59B,EAAQrzG,IAAIo9G,GAAUqP,kBAAmB,IAEzCnP,EAAOpf,iBAAiB+yC,uBAAuBxxI,SAAQyiG,IACrD,MAAMj2E,EAAI28E,GAAqBnvG,EAAMwhG,YAAaiH,EAAYx/F,IAE1DupB,GACFw8E,GAA+Bx8E,GAAGA,UAChCA,EAAEq2E,SAAW,IAAI+X,GAAqBiB,GAAervF,IACH,QAAlD2gB,EAAAymE,EAAQp0G,IAAIm+G,GAAUqP,mBAAmB9iC,iBAAS,IAAA/8C,GAAAA,EAAE/0B,KAAKyjG,GAAervF,WAM5EqxF,EAAOpf,iBAAiBgzC,0BAC1B79B,EAAQrzG,IAAIo9G,GAAUoP,mBAAoB,IAE1ClP,EAAOpf,iBAAiBgzC,wBAAwBzxI,SAAQyiG,UACtD,MAAMj2E,EAAI28E,GAAqBnvG,EAAMwhG,YAAkC,UAArBiH,EAAY3I,KAAmBi+B,GAASt1B,EAAYx/F,IAAMw/F,EAAYx/F,IAEpHupB,IACFA,EAAEq2E,SAAW,IAAI+zB,GAAsB/a,GAAervF,IACtDA,EAAEmkE,MAAQ8R,EAAY9R,MAC6B,QAAnDxjD,EAAAymE,EAAQp0G,IAAIm+G,GAAUoP,oBAAoB7iC,iBAAS,IAAA/8C,GAAAA,EAAE/0B,KAAKyjG,GAAervF,SAK3EqxF,EAAOpf,iBAAiBs4B,yBAC1BnjB,EAAQA,QAAQx7F,QAAQy+G,GAAgC78H,EAAO6jH,EAAOpf,oBAGrD,UAAfof,EAAOnf,gBAAQ,IAAAvxD,OAAA,EAAAA,EAAEzvC,UACnBk2G,EAAQA,QAAQx7F,QAAQ8/G,GAAiBoF,EAASzf,EAAOnf,WACzD4+B,EAAQl1C,WAAY,GAGtBk1C,EAAQpf,GAAIhjF,OAAS04E,EAAQ7mE,QAE7B,MAAM2kG,EAAiC,GAYvC,GAXApU,EAAQpf,GAAIhjF,OAAO79B,QAAOs0I,GAAcA,EAAWxzB,YAAcR,GAAU6N,mBAAkBxrH,SAAQqvH,GAAMqiB,EAAmBt5H,QAAQi3G,EAAGnlC,aAEzIozC,EAAQpf,GAAIhjF,OAAO9iB,KAAK,CACtB+lG,UAAWR,GAAUuS,2BACrBhmC,UAAWinC,GAAuCn3H,EAAMwhG,YAAak2C,KAGnEpU,EAAQl1C,WACVk1C,EAAQpf,GAAIhjF,OAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUi0B,iBAG7C53I,EAAMwhG,YAAa,CACrB,MAAMhvE,EAAI27E,GAA+BnuG,EAAMwhG,aAAa5qF,MAAK4b,IAAMw2E,GAAcx2E,KAAOm8E,GAAan8E,IAAMi8E,GAAYj8E,IAAMq8E,GAAar8E,MAC1IA,GACF8wG,EAAQpf,GAAIhjF,OAAO9iB,KAAK,CAAE+lG,UAAWR,GAAUsS,gBAAiB/lC,UAAW,CAAC2xB,GAAervF,MAI/F,OAAO8wG,G0BlBSuU,CAAuB73I,EAAO6jH,GAC1Cz1B,EAAYgoC,EAAUhoC,UACtB,MACF,IxIrGgC,uBwIsG9BgoC,E9BvFwC,EAACp2H,EAAY6jH,eACzD,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,IAAwBqJ,GAASrJ,GAEnC,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMigG,EAAOspB,GAAgB1pB,EAAM0J,IAAM1J,EAAMC,KAAMD,GAgBrD,GAfAI,EAAK4I,SAAW,IAAIogB,GACnBhpB,EAAK4I,SAAmCwO,WAAar3G,EAAM8jH,KAC5D7jB,EAAKsC,wBAAyB,EAC7BtC,EAAK4I,SAAmC3D,2BAAwBj7F,EACvD,QAAVkpC,EAAA8sD,EAAKsJ,WAAK,IAAAp2D,GAAAA,EAAA2yE,iBACV7lB,EAAKh3F,GAAKo4G,GAAQphB,GAEjBA,EAAgB0B,MAAOkH,SAAW5I,EAAK4I,SAAW,IAAIogB,GACrDhpB,EAAgB0B,MAAOkH,SAAmCwO,WAAar3G,EAAM8jH,KAE/EmK,GAAgBhuB,GAEhBA,EAAK2K,WAAY/B,SAAW,IAAIogB,GAC/BhpB,EAAK2K,WAAY/B,SAAmCwO,WAAar3G,EAAM8jH,KAEpED,EAAOjjB,aACT,IACE+uB,GAA4B9L,EAAOjjB,aAAcX,EAAMjgG,EAAM8jH,MAC7D,MAAOn/G,GACP,OAAOqjH,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAYh7F,EAAY2wB,UAIpG,GAAIuuF,EAAOljB,MAAO,CAChBV,EAAK2K,WAAY1nF,KAAO2gG,EAAOljB,MAE/B,MAAMsY,EAAgC,QAAvBvqC,EAAAsrC,GAAQ6J,EAAOljB,cAAQ,IAAAjyB,OAAA,EAAAA,EAAAuqC,OAEtC,GAAI4K,EAAOljB,OAASsa,GAAU4I,EAAOljB,OAAQ,CAC3C,MAAMu+B,EAAW,GAAGllB,GAAQ6J,EAAOljB,OAAOhB,gBAAgBwa,GAAcD,GAAU2J,EAAOljB,eAAe0Z,GAAkBwJ,EAAOljB,SACjIV,EAAKtJ,MAAQ,GAAGsiB,GAAqB,MAAXA,EAAiB,IAAM,gBAAgB4K,EAAOljB,UAAUu+B,uDAItF,MAAM4Y,EAAoB/oC,GAAuB9O,EAAM,IACvD63C,EAAkB9xI,SAAQ,CAACwsB,EAAG5uB,KACxBA,EAAI,GAAKA,EAAIk0I,EAAkBp0I,OAAS,IAC1C8uB,EAAEmkE,MAAQoS,IAERnlG,EAAI,GACNq2H,GAA6BznG,MAIjC,MAAMonF,EAAU,IAAI2d,GAMpB,OALA3d,EAAQ4d,cAAc3V,GAAegV,GAAiBh3B,EAAOI,KAC7D2Z,EAAQrzG,IAAIo9G,GAAU6N,iBAAkByF,GAA0Bh3B,GAAM,IACxE2Z,EAAQrzG,IAAIo9G,GAAUkS,iBAAkBtS,GAAiCtjB,GAAM,IAC/E2Z,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAe/W,GAAe7K,IAAQ4hB,GAAehiB,KAEtF,CACL2B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GAERC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAAS/9B,EAAAtmF,EAAMkkH,yBAAIG,W8BmBP0zB,CAA+B/3I,EAAO6jH,GAClD,MACF,IKvG8B,qBLwG5BuS,EMlG0B,EAACp2H,EAAY6jH,mBAC3C,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,GAA6BA,EAAY9R,QAAUktB,EAAOhkB,MAAM2C,SAAS7L,MAE3E,OADA32F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM6F,EAAWg8G,GAAepZ,GAEhCA,EAAY9R,MAAS4L,GAAuBkG,GAA8CkO,GAAsD,QAAhCrwB,EAAuB,UAAvBu9B,EAAOhkB,MAAM2C,gBAAU,IAAA9zB,OAAA,EAAAA,EAAAioB,aAAS,IAAArQ,EAAAA,EAAA,IAAhE,QAArBnzC,EAAA0wE,EAAOhkB,MAAM2C,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,OAExD,QAAtBz3D,EAAAupE,EAAYI,gBAAU,IAAA3pE,OAAA,EAAAA,EAAA4pE,qBAAsBP,GAAkBmG,uBAChEjG,EAAYI,SAAW,IAAI+zB,GAAsB/2H,IAGnD,MAAM+zG,EAAU6d,GAA+BhvB,GAC/C,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO03H,GAAiBjvB,EAAa5iG,IACrDm+G,QAASpK,EAAQ7mE,QACjBkxE,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASllF,EAAAn/B,EAAMkkH,yBAAIG,WNyEP2zB,CAAiBh4I,EAAO6jH,GACpC,MACF,IlI1GyC,gCkI2GvCuS,EAAYwI,GAA2B5+H,EAAO6jH,GAC9C,MACF,IjI7GoC,2BiI8GlCuS,EAAYkJ,GAAsBt/H,EAAO6jH,GACzC,MACF,IhIhHoB,WgIiHlBuS,EO5FyB,EAACp2H,EAAY6jH,aAC1C,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,IAPS,CAAC4I,YACd,OAAqD,QAA7C/5B,EAAuB,QAAvBv7B,EAAAs1D,EAAYoO,iBAAW,IAAA1jE,OAAA,EAAAA,EAAA9vC,QAAOivB,GAAKA,EAAEolF,aAAQ,IAAAhpC,EAAAA,EAAA,IAAIhrE,OAAS,GAMtCu0I,CAAOp4C,GAEjC,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM45G,EAAU,IAAI2d,GAEpB,OAAuB,UAAf1T,EAAOvjB,gBAAQ,IAAAntD,OAAA,EAAAA,EAAEwsD,WACvB,KAAK0W,GAAQc,eACX,OAAOuoB,GAAc1/H,EAAO6jH,GAE9B,KAAKxN,GAAQwJ,cAAe,CAC1B,MAAMjU,EAAWiB,GAAuBhN,GAElCI,EAAOspB,GAAgB1pB,EAAM0J,IAAM1I,GAAgBkB,QAAQjC,KAAM8L,EAAUA,OAAW3hG,EAAY,GACxGg2F,EAAK4I,SAAW,IAAIogB,GACpBhpB,EAAK4W,UAAYuJ,GAAkBngB,GACnC,MAAMi4C,EAAer2B,GAAe5hB,GAAM,GAE1CJ,EAAMgX,UAAYuJ,GAAkBvgB,GACpC,MAAMwzC,EAAgBxxB,GAAehiB,GAIrC,IAAI1hE,EAHJy7E,EAAQrzG,IAAIo9G,GAAU6N,iBAAkB,CAAC0mB,IACzCt+B,EAAQrzG,IAAIo9G,GAAUkS,iBAAkB,CAACwd,IAKvCl1G,EADEytE,EACI1C,GAAS0C,IAAab,GAAUa,GAAYd,GAAec,GAAYA,EAEvEtC,GAAczJ,GAASA,EAAM0J,IAAKA,IAAO1J,EAAM0J,IAGvDqQ,EAAQ4d,cAAc3V,GAAe1jF,IACrC,MAEF,KAAKk4E,GAAQmK,oBAAqB,CAChC,MAAMgY,EAAW3W,GAAehiB,GAChC,IAAIoM,EAAUiB,GAAwBrN,GAEjCoM,GAAYtC,GAAUsC,KACzBA,EAAUksC,GAA8Bt4C,EAAM0J,MAGhD,MAAMA,EAAM1J,EAAM0J,IAClBA,EAAIqc,YAAY/lB,GAChB0J,EAAIuc,iBAEJlM,EAAQrzG,IAAIo9G,GAAUkP,iBAAkB,CAAC2F,IACzCvsB,GAAW2N,EAAQrzG,IAAIo9G,GAAUkS,iBAAkB,CAAChU,GAAe5V,KAEnE,MAEF,QAEE,OADAjsG,EAAMkkH,GAAK,GACJlkH,EAGX,MAAO,CACLwhG,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAAS31C,EAAA1uE,EAAMkkH,yBAAIG,WPwBP+zB,CAAgBp4I,EAAO6jH,GACnC,MACF,ItIjH8B,qBsIkH5BuS,EAAY8D,GAAiBl6H,EAAO6jH,GACpC,MACF,IrItH8C,qCqIuH5CuS,EThFoD,EAACp2H,EAAY6jH,iBACrE,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMkrI,EACsB,QAA1B/3F,EAAA0wE,EAAOqnB,uBAAmB,IAAA/3F,EAAAA,EAAAy0F,GAAgByQ,sBAA6C,QAAvB/xD,EAAa,QAAb5X,EAAAm1C,EAAO5jB,YAAM,IAAAvxB,OAAA,EAAAA,EAAA8zB,gBAAU,IAAAlc,OAAA,EAAAA,EAAAqQ,MAAO32F,EAAMwhG,YAAaqiB,EAAOhkB,MAAOgkB,EAAO9f,oBAAqB8f,EAAOlyB,SAEpK,GAAIu5C,EAAgB/B,WAAWzlI,OAC7B,OAAOskH,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAWurC,EAAgB/B,WAAW,GAAGtyB,UAAU,KAG7H,MAAMqxB,EAAoBgD,EAAgBhD,kBACpC/pG,EAAM8kF,GAA2BjjH,EAAMwhG,YAAa0pC,EAAgBjC,cAAc79B,YAEnFlC,GAASg/B,EAAkBx9B,OAAO,MAAOnI,GAAuB1C,IACnEyqC,GAA6BpC,EAAkBx9B,OAAQvsE,GAGzD,MAAMy7E,EAAUuzB,GACdntI,EAAMwhG,YACN0mC,EACAroC,EACA1hE,EACA0lF,EAAOlyB,QACPkyB,EAAO9f,oBACP8f,EAAOupB,0DACPptI,EAAM8jH,KACNonB,EAAgBjC,cAAcR,aAAa,IAG7C,MAAO,CACLjnC,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,GACvBoK,QAASpK,EACTqK,OAAQ,GAERC,GAAI,CACFhjF,OAAQ04E,EACRyK,gBAASnlF,EAAAl/B,EAAMkkH,yBAAIG,WSqCPi0B,CAA2Ct4I,EAAO6jH,GAC9D,MACF,IpIvH4B,mBoIwH1BuS,EAAY8E,GAAel7H,EAAO6jH,GAClC,MACF,InH1HqC,4BmH2HnCuS,EAAYgK,GAAuBpgI,EAAO6jH,GAC1C,MACF,I/H/HgC,uB+HgI9BuS,EQ9H2B,EAACp2H,EAAY6jH,WAC5C,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAC1E,QAAc51F,IAAV41F,EAAqB,CACvB,MAAM3R,EAAUgjC,GAA0BlxH,EAAM0kG,SAAUmf,EAAOhkB,MAAM9S,MACvE,GAAKmB,EAEE,CACL,MAAMvpF,EAAI,IAAKupF,EAAQwjC,qBAAuBrP,eAAgB,IAC9DriH,EAAMkkH,GAAGhjF,OAAS,CAAC,CAAEijF,UAAWR,GAAUqS,oBAAqB9lC,UAAW,CAACvrF,UAH3E3E,EAAMkkH,GAAGhjF,OAAS,GAKpB,OAAOlhC,EAGT6/F,EAAMgX,UAAYuJ,GAAkBvgB,GACpC,MAAMtQ,EAAWsyB,GAAehiB,GAAO,GAEjC3+D,EAAS,CACb,CACEijF,UAAWR,GAAUqS,oBACrB9lC,UAAW,CAACX,KAIhB,MAAO,CACLiS,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WR+FPk0B,CAAkBv4I,EAAO6jH,GACrC,MACF,I9HnIqC,4B8HoInCuS,ESlIiC,EAACp2H,EAAY6jH,WAClD,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAET6/F,EAAMgX,UAAYuJ,GAAkBvgB,GACpC,MAAMtQ,EAAWsyB,GAAehiB,GAAO,GAEjC3+D,EAAS,CACb,CACEijF,UAAWR,GAAU60B,wBACrBtoD,UAAW,CAACX,KAIhB,MAAO,CACLiS,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WTyGPo0B,CAAwBz4I,EAAO6jH,GAC3C,MACF,I5HtI0B,iB4HuIxBuS,EAAYsJ,GAAc1/H,EAAO6jH,GACjC,MACF,I3HxIiC,mB2HyI/BuS,EU5H4B,EAACp2H,EAAY6jH,WAC7C,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAAKooH,GAAgBvoB,EAAO2F,IAC1B,OAAO6iB,GAA0BxoB,EAAO7/F,GAG1C,GAAIA,EAAMouF,WAAaklC,GAAkCtzH,EAAO6/F,KAAWgkB,EAAOkd,oBAChF,OAAO/Y,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,oHAKf,IAAIsM,EAAUC,GAAoCrM,GAKlD,IAJKoM,GAAW/C,GAASrJ,KACvBoM,EAAUoE,GAA8BxQ,KAGrCoM,EACH,OAAOjsG,EAGT,MAAM04I,EAA6B7uC,GAA0BoC,GAEvD2rB,EAAY,IAAI5U,GAAanjB,GAAO,GAAO,IAC3Ci5B,EAAcrV,GAA6B5jB,GAE3C84C,EAAY94C,EAAM0J,IAClBqvB,EAAU8f,EAA6BzsC,EAAUA,EAAQ1C,IACzDniE,EAAMsxG,EAA6B,EAAI9f,EAAQ5wH,QAAQ63F,GAAS,EAEtE42B,GAAoB52B,GAEpBA,EAAM0J,IAAKqc,YAAY/lB,GACvB+4B,EAAQpT,mBAAmB3lB,EAAOz4D,GAElCwxF,EAAQ9S,iBACJ6yB,IAAc/f,GAChB+f,EAAU7yB,iBAGZ3X,GAA+BtO,GAAO75F,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,KACnE,MAAMomH,EAAY/4C,EAAM0J,IAAKmB,OAAO7K,EAAM0J,IAAKvhG,QAAQ63F,GAAS,GAChE+4C,GAAazqC,GAA+ByqC,GAAW5yI,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,KAEpF,MAAM44E,EAAastC,EAA6BzsC,EAAUnB,GAAemB,GAEnE2N,EAAU,IAAI2d,GAqBpB,OApBA3d,EAAQ4d,cAAc3V,GAAegV,GAAiBzrB,EAAavL,KACnE+Z,EAAQrzG,IACNo9G,GAAU6N,iBACVziB,GAAuBlP,EAAO,IAAIh4F,KAAIw4D,IACpCA,EAAEw2C,UAAYuJ,GAAkB//C,GACzBwhD,GAAexhD,OAG1Bu5C,EAAQrzG,IAAIo9G,GAAUkP,iBAAkB+E,GACxChe,EAAQrzG,IACNo9G,GAAUoS,mBACV+C,EAAYjxH,KAAI+yD,GAAKinD,GAAejnD,MAMtCg/C,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAehiB,GAAQgkB,EAAOhkB,QACtE+Z,EAAQrzG,IAAIo9G,GAAUqS,oBAAqB,CAACnU,GAAehiB,KAEpD,CACL2B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WVyCPw0B,CAAmB74I,EAAO6jH,GACtC,MACF,I1H3IgC,kB0H4I9BuS,EWrH2B,EAACp2H,EAAY6jH,WAC5C,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAAKooH,GAAgBvoB,EAAO6F,IAC1B,OAAO2iB,GAA0BxoB,EAAO7/F,GAG1C,GAAIA,EAAMouF,WAAaklC,GAAkCtzH,EAAO6/F,KAAWgkB,EAAOkd,oBAChF,OAAO/Y,GAA8BhoH,EAAO,CAC1C8/F,KAAMsW,GAAaW,MACnBpX,UAAW,oHAKf,MAAMm5C,EAAcv2C,GAAuB1C,GACrC+L,EAAW1C,GAASrJ,GACtB2L,GAA2C3L,GAAOrtE,IAAM02E,GAAS12E,IAAMo3E,GAAYp3E,KAAO+vE,GAAuB/vE,KAAOsmH,IACxH9rC,GAAmCnN,GAEvC,QAAiB51F,IAAb2hG,GAA0BO,GAAkBP,IAAa5B,GAAS4B,GACpE,OAAO5rG,EAGT,MAAM43H,EAAY5U,GAAanjB,GAAO,GAAO,GACvCi5B,EAAc7tB,GAAgBpL,GAAOx8F,QAAOmvB,GAAKA,IAAMqtE,GAASrtE,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,uBAEzH+nB,GAAoB52B,GAGpB,MAAM84C,EAAY94C,EAAM0J,IACxB,IAAIqvB,EAAUhtB,EAASrC,IACnBniE,EAAMwxF,EAAQ5wH,QAAQ4jG,GAe1B,GAAIhC,GAAYgC,GAAW,CACzB,MAAMmtC,EAAsBvtC,GAA2CI,GAAUp5E,IAAM02E,GAAS12E,IAAMo3E,GAAYp3E,KAAO+vE,GAAuB/vE,KAAOsmH,IACnJlvC,GAAYmvC,IACdngB,EAAUmgB,EACV3xG,EAAM,IAGNwxF,EAAUmgB,EAAoBxvC,IAC9BniE,EAAMwxF,EAAQ5wH,QAAQ+wI,GAAuB,GAIjDl5C,EAAM0J,IAAKqc,YAAY/lB,GACvB+4B,EAAQpT,mBAAmB3lB,EAAOz4D,GAClCwxF,EAAQ9S,iBACJ6yB,IAAc/f,GAChB+f,EAAU7yB,iBAGZ3X,GAA+BtO,GAAO75F,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,KACnE,MAAMwmH,EAAan5C,EAAM0J,IAAKmB,OAAO7K,EAAM0J,IAAKvhG,QAAQ63F,GAAS,GACjEm5C,GAAc7qC,GAA+B6qC,GAAYhzI,SAAQwsB,GAAMA,EAAEvpB,GAAKo4G,GAAQ7uF,KAEtF,MAAM44E,EAAaI,GAA2C3L,GAAOrtE,IAAM22E,GAAQ32E,KAAOm5E,GAAuBn5E,KAE3GonF,EAAU,IAAI2d,GAoBpB,OAnBA3d,EAAQrzG,IAAIo9G,GAAUkP,iBAAkB+E,GACxChe,EAAQ4d,cAAc3V,GAAegV,GAAiBzrB,EAAYvL,KAClE+Z,EAAQrzG,IACNo9G,GAAU6N,iBACVziB,GAAuBlP,EAAO,IAAIh4F,KAAIw4D,IACpCA,EAAEw2C,UAAYuJ,GAAkB//C,GACzBwhD,GAAexhD,OAG1Bu5C,EAAQrzG,IACNo9G,GAAUoS,mBACV+C,EAAYjxH,KAAI+yD,GAAKinD,GAAejnD,MAMtCg/C,EAAQrzG,IAAIo9G,GAAUsS,gBAAiB,CAACpU,GAAehiB,GAAQgkB,EAAOhkB,QACtE+Z,EAAQrzG,IAAIo9G,GAAUqS,oBAAqB,CAACnU,GAAehiB,KACpD,CACL2B,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAO45G,EAAQ7mE,SAC/BixE,QAASpK,EAAQ7mE,QACjBkxE,OAAQ,GACRC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WXYP40B,CAAkBj5I,EAAO6jH,GACrC,MACF,IvH9I8B,qBuH+I5BuS,EhB1H0B,EAACp2H,EAAY6jH,iBAC3C,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,EAEF,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,IAAKooH,GAAgB3f,EAAazC,IAChC,OAAOgiB,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,2DAGpF,GAAI4C,GAAuBkG,KAA+D,QAA/C/5B,EAAAw1D,GAAcz7B,EAA0B,QAAbt1D,EAAA0wE,EAAO5jB,YAAM,IAAA9sD,OAAA,EAAAA,EAAAmlD,eAAO,IAAA5pB,OAAA,EAAAA,EAAElsC,WAAW,MACrG,OAAOwlF,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAawkB,KAAMj7B,UAAW,wEAGpF,MAAMokB,EAAOgE,GAAU/nH,EAAO03H,GAAiBjvB,IAE/C,IACE,MAAMnQ,EAAS4rC,GAAcz7B,EAA0B,QAAbniB,EAAAu9B,EAAO5jB,YAAM,IAAA3Z,OAAA,EAAAA,EAAAgS,QACvDmQ,EAAY+d,uBAAuBluB,GACnCmQ,EAAYx/F,GAAKo4G,GAAQ5Y,GACA,WAArBA,EAAY3I,OACb2I,EAAuB9G,MAAO14F,GAAKo4G,GAAS5Y,EAAuB9G,QAEtE,MAAOzhE,GACP,OAAO8nF,GAA8BhoH,EAAO,CAAE8/F,KAAMsW,GAAaW,MAAOpX,UAAW,gCAAiCu5C,QAASh5G,IAG/HuoE,EAAYsd,aAAatd,GAEzB,MAAMmR,EAAU6d,GAA+BhvB,GAE/C,MAAO,CACLjH,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAAA,EACAC,QAASpK,EAAQ7mE,QACjBkxE,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ04E,EAAQ7mE,QAChBsxE,gBAASnlF,EAAAl/B,EAAMkkH,yBAAIG,WgBiFP80B,CAAiBn5I,EAAO6jH,GACpC,MACF,ItHjJ8B,qBsHkJ5BuS,EAAY+N,GAAiBnkI,EAAO6jH,GACpC,MACF,IrHpJ8B,qBqHqJ5BuS,EYjJ0B,EAACp2H,EAAY6jH,aAC3C,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,YAA6Bt1D,EAAAs1D,EAAYI,+BAAUC,qBAAsBP,GAAkBmG,qBAE7F,OADA1uG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGTyoG,EAAYI,SAAW,IAAI+X,GAAqBiB,GAAepZ,IAC/D,MAAMmR,EAAU,IAAI2d,GAEpB3d,EAAQrzG,IAAIo9G,GAAUqP,kBAAmB,CAACnR,GAAepZ,KAEzD,MAAMvnE,EAAS04E,EAAQ7mE,QAEvB,MAAO,CACLyuD,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAMgE,GAAU/nH,EAAOkhC,GACvB8iF,QAAS9iF,EACT+iF,OAAQ,GACRC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAAS31C,EAAA1uE,EAAMkkH,yBAAIG,WZ0HP+0B,CAAiBp5I,EAAO6jH,GACpC,MACF,IpHvJ6B,oBoHwJ3BuS,EAAYmO,GAAgBvkI,EAAO6jH,GACnC,MACF,KAAKje,GACHwwB,EAAYxS,GAAgB5jH,EAAO6jH,GACnC,MACF,IChKgB,ODiKduS,EAAYlzE,GAAKljD,GACjB,MACF,IxHhK4B,mBwHiK1Bo2H,EAAYyK,GAAe7gI,EAAO6jH,GAClC,MACF,I/GpKsC,6B+GqKpCuS,EjB7JgC,EAACp2H,EAAY6jH,WACjD,MAAMpb,EAAcwa,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAEhF,QAAoB51F,IAAhBw+F,IAA8Bw7B,GAAuBjkI,EAAOyoG,GAE9D,OADAzoG,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAM83H,EAAsBjrB,GAAuBpE,GAE7C66B,EAAUzC,GAAe7gI,EAAO6jH,GAItC,MAHmB,cAAfA,EAAOp9G,KAAuBqxH,IACtB,QAAV3kF,EAAAmwF,EAAQpf,UAAE,IAAA/wE,GAAAA,EAAEjS,OAAO9iB,KAAK2lH,GAA0BjM,KAE7CwL,GiB+IS+V,CAAuBr5I,EAAO6jH,GAC1C,MACF,IaxKqB,YbyKrB,IczKe,Md0KbuS,EerKqC,EAACp2H,EAAY6jH,KACtD,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAET,MAAMghH,EDZW,QCYJ6C,EAAOt3F,KAAeszE,EAAMgpB,mBAAmBhpB,GAASA,EAAMipB,wBAAwBjpB,GAEnG,IAAKmhB,EAEH,OADAhhH,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT,MAAMs5I,EAAY,CAChB/sH,KlIhBqC,4BkIiBrC44E,QAAU6b,EAA6B/b,SACvCpF,MAAOgkB,EAAOhkB,MACdI,KAAM,CACJH,KAAMkhB,EAAKlhB,OAIf,OAAOsgC,GAAuBpgI,EAAOs5I,If8IrBC,CAA4Bv5I,EAAO6jH,GAC/C,MACF,IgB7KgB,OhB8KduS,EAAYnzE,GAAKjjD,GACjB,MACF,IjH7K4B,mBiH8K1Bo2H,EiB7KwB,EAACp2H,EAAY6jH,WACzC,MAAMhkB,EAAQojB,GAA2BjjH,EAAMwhG,YAAaqiB,EAAOhkB,OAAO,GAE1E,QAAc51F,IAAV41F,EAEF,OADA7/F,EAAMkkH,GAAGhjF,OAAS,GACXlhC,EAGT6/F,EAAMgX,UAAYuJ,GAAkBvgB,GACpC,MAAMtQ,EAAWsyB,GAAehiB,GAAO,GAEjC3+D,EAAS,CACb,CACEijF,UAAWR,GAAUkS,iBACrB3lC,UAAW,CAACX,KAIhB,MAAO,CACLiS,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WjBmJPm1B,CAAex5I,EAAO6jH,GAClC,MACF,KAAK7b,GACHouB,EkB9K2B,CAACp2H,UAChC,MAAMkwF,EAAwB,GAC9B6e,GAAuB/uG,EAAMwhG,YAAa,IAAIx7F,SAAQwsB,IACpD,MAAMqkF,EAAYuJ,GAAkB5tF,IAEhCqkF,MAAAA,OAAS,EAATA,EAAWnzG,QAAS,IACtB8uB,EAAEqkF,UAAYA,EACd3mB,EAAU9xE,KAAKyjG,GAAervF,QAIlC,MAAM0O,EAAS,CACb,CACEijF,UAAWR,GAAUkS,iBACrB3lC,UAAWA,IAIf,MAAO,CACLsR,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAAA,EACAmjF,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WlBoJPo1B,CAAkBz5I,GAC9B,MACF,I1IpL4B,mB0IqL1Bo2H,EmBpLyB,EAACp2H,EAAY6jH,iBAC1C,IAAIQ,GAA8B,QAAVlxE,EAAAnzC,EAAMkkH,UAAI,IAAA/wE,OAAA,EAAAA,EAAAkxE,UAAW,GAO7C,OALEA,GADqB,QAAnB/9B,EAAU,QAAV5X,EAAA1uE,EAAMkkH,UAAI,IAAAx1C,OAAA,EAAAA,EAAA21C,eAAS,IAAA/9B,OAAA,EAAAA,EAAAjjF,QAAO,EAAG4F,GAAAA,KAASA,IAAO46G,EAAOxjB,OAAOp3F,KAAIvF,QAAS,EAChE,IAAI2gH,GAEJ,IAAIA,EAASR,EAAOxjB,QAGzB,CACLmB,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAWR,GAAU+1B,qBAChCpkH,gBAAS4J,EAAAl/B,EAAMkkH,yBAAI5jB,SACnB+jB,QAASA,KnBmKGs1B,CAAe35I,EAAO6jH,GAClC,MACF,IzIzL0B,iByI0LxBuS,EoBxLsB,EAACp2H,EAAY6jH,eACvC,MAAMQ,EAA2B,QAAjB31C,EAAQ,QAARv7B,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,OAAA,EAAAA,EAAEkxE,eAAO,IAAA31C,OAAA,EAAAA,EAAErrE,QAAO,EAAG4F,GAAAA,KAASA,IAAO46G,EAAO56G,KAEpE,MAAO,CACLu4F,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAWR,GAAU+1B,qBAChCpkH,gBAASgxD,EAAAtmF,EAAMkkH,yBAAI5jB,SACnB+jB,QAASA,KpB4KGu1B,CAAa55I,EAAO6jH,GAChC,MACF,IqB5L0B,iBrB6LxBuS,EsB3LuB,CAACp2H,UAC5B,MAAO,CACLwhG,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAWR,GAAU+1B,qBAChCpkH,gBAAS6d,EAAAnzC,EAAMkkH,yBAAI5jB,SACnB+jB,QAAS,MtBiLGw1B,CAAc75I,GAC1B,MACF,IrC/LoC,2BqCgMlCo2H,ER3L8B,EAACp2H,EAAY6jH,WAC/C,MAAMtkE,GAAYv/C,EAAMouF,UACxB,OAAK7uC,GAAYskE,EAAOiN,WAAa,EAC5B,IACF9I,GAA8BhoH,EAAO,CACtC8/F,KAAMsW,GAAawkB,KACnBj7B,UAAW,mDAAqDkxC,GAAwB7wI,GAAS,oDAEnGouF,WAAW,GAIR,IACFpuF,EACHouF,UAAW7uC,EACX2kE,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAW5kE,EAAWokE,GAAUi0B,eAAiBj0B,GAAUm2B,oBACtEz1B,gBAASlxE,EAAAnzC,EAAMkkH,yBAAIG,WQ0KP01B,CAAqB/5I,EAAO6jH,GACxCz1B,EAAYgoC,EAAUhoC,UACtBk2B,GAAmD,QAAhBnxE,EAAAijF,EAAUrS,YAAM,IAAA5wE,OAAA,EAAAA,EAAAzvC,SAAU,EAC7D,MACF,KAAK8tI,GACHpb,EuBnMyB,EAACp2H,EAAY6jH,aAC1C,MAAO,CACLriB,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAWR,GAAUq2B,kBAChC1kH,gBAAS6d,EAAAnzC,EAAMkkH,yBAAI5jB,SACnB+jB,gBAAS31C,EAAA1uE,EAAMkkH,yBAAIG,SAErB71B,QAASq1B,EAAOr1B,UvBuLFyrD,CAAgBj6I,EAAO6jH,GACnCr1B,EAAU4nC,EAAU5nC,QACpB,MACF,KAAK24B,GACHiP,EHjMuB,EAACp2H,EAAY6jH,IACpCA,EAAO31B,SAAW21B,EAAOt0B,SACpB4kD,GAAen0I,EAAO6jH,GAEtBqwB,GAAqBl0I,EAAOA,EAAM0kG,UG6L3Bw1C,CAAcl6I,EAAO6jH,GACjC,MACF,KAAKwD,GACH+O,EF5KwB,EAACp2H,EAAY6jH,IACrCA,EAAO31B,SAAW21B,EAAOt0B,SACpBklD,GAAgBz0I,EAAO6jH,GAEvB2wB,GAAsBx0I,EAAOA,EAAM0kG,UEwK5By1C,CAAen6I,EAAO6jH,GAClC,MACF,KAAK8xB,GACHvf,EwB7MsB,CAACp2H,UAC3B,MAAO,CACLwhG,YAAaxhG,EAAMwhG,YACnBsiB,KAAM9jH,EAAM8jH,KACZC,KAAM/jH,EAAM+jH,KACZC,QAAShkH,EAAMgkH,QACfC,OAAQjkH,EAAMikH,OACdC,GAAI,CACFhjF,OAAQ,CAAC,CAAEijF,UAAWR,GAAU+1B,qBAChCpkH,gBAAS6d,EAAAnzC,EAAMkkH,yBAAI5jB,SACnB+jB,QAASrkH,EAAMqkH,SAEjB3f,SAAU,GACVtW,WAAW,EACXI,QAASxuF,EAAMwuF,UxB+LD4rD,CAAap6I,GACzB,MACF,QACE4xH,OAAa3nH,EACbmsH,EAAYp2H,EAsBhB,MAlBI,CAAC21I,IAAgBv4H,SAASw0G,KAE5BltB,EAAW,IAIV,CAACkB,GAAmBrB,GAA2B4iB,GAAiBE,IAAkBjqG,SAASw0G,IAC3FikB,GAAsBjkB,EAAYwE,IAClC0f,GAAyBlkB,EAAYwE,KAEtCA,EAAU1xB,SAAWA,EACrB0xB,EAAU9R,iCAAmCl2B,EAAYk2B,WAAmC51C,EAAA0nD,EAAUrS,2BAAMrgH,SAAU,GAGxH0yH,EAAUhoC,UAAYA,EACtBgoC,EAAU5nC,QAAUA,EAEpB4nC,EJpM6B,EAACp2H,EAAc4xH,mBAC5C,MAAMyoB,EAAuB,QAARlnG,EAAAnzC,EAAMkkH,UAAE,IAAA/wE,OAAA,EAAAA,EAAEjS,OAAOr5B,KAAIwtH,GAAMA,EAAGnlC,YAAW5yB,OAAO55D,OACrE,GAAI,CAACkiG,GAAmB4rC,GAAmBxpC,IAAqB5qF,SAASw0G,KAAgB5xH,EAAMouF,YAAcwjC,IAAeyoB,EAC1H,OAAOr6I,EACF,GAAI4xH,IAAertB,GAExB,OADA6wB,GAAuCp1H,GAChCA,EAGT,GoB7CkB,SpB6CL4xH,KAA2B,UAAZ5xH,EAAM+jH,YAAM,IAAAr1C,OAAA,EAAAA,EAAAhrE,SAAU,GAAK1D,EAAMskH,iCAE3D,OADA8Q,GAAuCp1H,GAChCA,EAGT,GKlDkB,SLkDL4xH,KAA2B,UAAZ5xH,EAAM+jH,YAAM,IAAAz9B,OAAA,EAAAA,EAAA5iF,SAAU,IAAM1D,EAAMskH,iCAE5D,OADA8Q,GAAuCp1H,GAChCA,EAGT,IAAqB,QAAjBm/B,EAAQ,QAARD,EAAAl/B,EAAMkkH,UAAE,IAAAhlF,OAAA,EAAAA,EAAE5J,eAAO,IAAA6J,OAAA,EAAAA,EAAE2gE,QAASsW,GAAaW,MAC3C,OAAO/2G,EAGT,IAAI0kG,EAAsB,GA2B1B,MoBtFkB,SpB4DJktB,GAAe8f,GAAiC1xI,IAAY2xI,GAAyB3xI,KACjG0kG,EAAStmF,QAAQwzH,GAA2B5xI,EAAO4xH,IACnDltB,EAAStmF,QAAQ6zH,GAA6BjyI,EAAO4xH,IACrDltB,EAAStmF,QAAQg1H,GAA6BpzI,EAAO4xH,IAGjD2hB,GAAyBvzI,GAC3B0kG,EAAStmF,QAAQo0H,GAAoCxyI,EAAO4xH,KAE5DltB,EAAStmF,QAAQ40H,GAA0BhzI,EAAO4xH,IAClDltB,EAAStmF,QAAQ80H,GAAyBlzI,EAAO4xH,MAGrDltB,EAAW2sB,GAA8BrxH,EAAO0kG,GAE5CivC,GAAiC3zI,KACnC4zI,GAAsC5zI,GACtC6zI,GAAsC7zI,IAGxCA,EAAM0kG,SAAUtmF,QAAQsmF,GAExB0wB,GAAuCp1H,GAEvC0zI,GAAsB1zI,GAEfA,GIkJKs6I,CAAgBlkB,EAAWxE,GyBnOH,CAAC5xH,UAarC,OAZU,QAAVmzC,EAAAnzC,EAAMkkH,UAAI,IAAA/wE,GAAAA,EAAAjS,OAAOl7B,SAAQqvH,UACvB,OAAc,QAAdliF,EAAAkiF,EAAGnlC,iBAAW,IAAA/8C,OAAA,EAAAA,EAAA9vC,OAAOu4D,SAAS51D,SAAQrB,eAElCA,EAAEmkG,oBAAsBP,GAAkBI,wBACzChkG,EAAEmkG,oBAAsBP,GAAkBG,wBAA0B/jG,EAAEupF,SAAmC,sCAAxBvpF,EAAEupF,QAAQyR,WAC3Fh7F,EAAEmkG,oBAAsBP,GAAkBmG,sBAAwB/pG,EAAEupF,oBAAgE,QAApD/6C,EAAAxuC,EAAEupF,QAA4BwjC,4BAAsB,IAAAv+E,OAAA,EAAAA,EAAAqvD,+BAAU7L,UAAoB,QAAVrQ,EAAA3hF,EAAE69F,gBAAQ,IAAAlc,OAAA,EAAAA,EAAEqQ,UAEpKhyF,EAAE09G,eAAgBjlG,SAASmqG,KAA0B5iH,EAAE09G,eAAgBjkG,KAAKmpG,UAK5EvnH,GzBuNAu6I,CAAuBnkB,MEhOnBokB,G9I+Hb,SAASC,EAAYnE,EAASoE,EAAgBC,GAC5C,IAAI/gG,EAEJ,GAA8B,mBAAnB8gG,GAAqD,mBAAbC,GAA+C,mBAAbA,GAAmD,mBAAjBjkH,UAAU,GAC/H,MAAM,IAAIlB,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,oQAQtF,GAL8B,mBAAnBw8C,QAAqD,IAAbC,IACjDA,EAAWD,EACXA,OAAiBzwI,QAGK,IAAb0wI,EAA0B,CACnC,GAAwB,mBAAbA,EACT,MAAM,IAAInlH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,+DAAiEgB,GAAOy7C,GAAY,KAG1K,OAAOA,EAASF,EAATE,CAAsBrE,EAASoE,GAGxC,GAAuB,mBAAZpE,EACT,MAAM,IAAI9gH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,mEAAqEgB,GAAOo3C,GAAW,KAG7K,IAAIsE,EAAiBtE,EACjBuE,EAAeH,EACfI,EAAmB,GACnBC,EAAgBD,EAChBE,GAAgB,EASpB,SAASC,IACHF,IAAkBD,IACpBC,EAAgBD,EAAiBnzH,SAUrC,SAASg2E,IACP,GAAIq9C,EACF,MAAM,IAAIxlH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,wMAGtF,OAAO28C,EA2BT,SAASp9C,EAAU/4C,GACjB,GAAwB,mBAAbA,EACT,MAAM,IAAIlvB,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,+DAAiEgB,GAAOx6C,GAAY,KAG1K,GAAIs2F,EACF,MAAM,IAAIxlH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,mTAGtF,IAAIg9C,GAAe,EAGnB,OAFAD,IACAF,EAAc38H,KAAKsmC,GACZ,WACL,GAAKw2F,EAAL,CAIA,GAAIF,EACF,MAAM,IAAIxlH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,wJAGtFg9C,GAAe,EACfD,IACA,IAAIx6H,EAAQs6H,EAAc/yI,QAAQ08C,GAClCq2F,EAAcjjH,OAAOrX,EAAO,GAC5Bq6H,EAAmB,OA8BvB,SAASK,EAASt3B,GAChB,IAAKlpF,GAAckpF,GACjB,MAAM,IAAIruF,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,iEAAmEgB,GAAO2kB,GAAU,8UAG1K,QAA2B,IAAhBA,EAAOt3F,KAChB,MAAM,IAAIiJ,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,8GAGtF,GAAI88C,EACF,MAAM,IAAIxlH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,GAAK,sCAGtF,IACE88C,GAAgB,EAChBH,EAAeD,EAAeC,EAAch3B,GACpC,QACRm3B,GAAgB,EAKlB,IAFA,IAAIpyG,EAAYkyG,EAAmBC,EAE1Bn3I,EAAI,EAAGA,EAAIglC,EAAUllC,OAAQE,IAAK,EAEzC8gD,EADe9b,EAAUhlC,MAI3B,OAAOigH,EAcT,SAASu3B,EAAeC,GACtB,GAA2B,mBAAhBA,EACT,MAAM,IAAI7lH,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,IAAM,kEAAoEgB,GAAOm8C,IAGlKT,EAAiBS,EAKjBF,EAAS,CACP5uH,KAAM+xE,GAAYE,UAWtB,SAASJ,IACP,IAAIp1D,EAEAsyG,EAAiB79C,EACrB,OAAOz0D,EAAO,CASZy0D,UAAW,SAAmB7lD,GAC5B,GAAwB,iBAAbA,GAAsC,OAAbA,EAClC,MAAM,IAAIpiB,MAA+B,eAAzB4pE,QAAQC,IAAIC,SAA4BpB,GAAuB,IAAM,8DAAgEgB,GAAOtnD,GAAY,KAG1K,SAAS2jG,IACH3jG,EAASr2C,MACXq2C,EAASr2C,KAAKo8F,KAMlB,OAFA49C,IAEO,CACLC,YAFgBF,EAAeC,OAK7Bp9C,IAAgB,WACtB,OAAOz0F,MACNs/B,EASL,OAHAmyG,EAAS,CACP5uH,KAAM+xE,GAAYC,QAEb3kD,EAAQ,CACbuhG,SAAUA,EACV19C,UAAWA,EACXE,SAAUA,EACVy9C,eAAgBA,IACTj9C,IAAgBC,EAAYxkD,E8IpXd6gG,CAAY1E,GAAkBrkI,OAAe+pI,8BAAiC/pI,OAAe+pI,gCwBCzG,IAAAC,GAAb,cAA0Cr+C,GAAQm9C,GAARn9C,CAAmBv4B,KAI3Dj+D,cACE4C,QAJyBC,KAASwmF,UAAe,GACvBxmF,KAAAiyI,eAAoC,IAAI99C,GAIlEn0F,KAAKpI,UAAY,EAGnB28D,mBACE,OAAOv0D,KAGTjK,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;0CAc2B4F,KAAKiyI;QA3BlBz+C,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAAoCg6I,GAAA/5I,UAAA,iBAAA,GAC1Bu7F,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAsEq0I,GAAA/5I,UAAA,sBAAA,GAF7E+5I,GAAoBx+C,GAAA,CADhC0+C,GAAc,0BACFF;;;;;;ACLb,MAAM/vI,GAAqB;;;;;;ACAxB,MAAMhH,WDAkH,MAAQkC,YAAY8E,IAAQ43D,WAAO,OAAO75D,KAAK25D,KAAKE,KAAKX,KAAKj3D,EAAEhH,EAAEf,GAAG8F,KAAK07D,KAAKz5D,EAAEjC,KAAK25D,KAAK1+D,EAAE+E,KAAK27D,KAAKzhE,EAAEi/D,KAAKl3D,EAAEhH,GAAG,OAAO+E,KAAKi4B,OAAOh2B,EAAEhH,GAAGg9B,OAAOh2B,EAAEhH,GAAG,OAAO+E,KAAKjK,UAAUkF,KCAnRkC,YAAYjD,GAAG,GAAG6F,MAAM7F,GAAG8F,KAAKwoE,GAAGvmE,GAAE/H,EAAE2oB,OAAOjb,GAAQ,MAAMkkB,MAAM9rB,KAAK7C,YAAYsrE,cAAc,yCAAyC1yE,OAAOm7D,GAAG,GAAGA,IAAIjvD,IAAG,MAAMivD,EAAE,OAAOlxD,KAAKmyI,QAAG,EAAOnyI,KAAKwoE,GAAGtX,EAAE,GAAGA,IAAIh3D,GAAE,OAAOg3D,EAAE,GAAG,iBAAiBA,EAAE,MAAMplC,MAAM9rB,KAAK7C,YAAYsrE,cAAc,qCAAqC,GAAGvX,IAAIlxD,KAAKwoE,GAAG,OAAOxoE,KAAKmyI,GAAGnyI,KAAKwoE,GAAGtX,EAAE,MAAMtpD,EAAE,CAACspD,GAAG,OAAOtpD,EAAE/M,IAAI+M,EAAE5H,KAAKmyI,GAAG,CAACp7E,WAAW/2D,KAAK7C,YAAYwrE,WAAWtuE,QAAQuN,EAAE6rB,OAAO,KAAKx4B,GAAEwtE,cAAc,aAAaxtE,GAAE0tE,WAAW,EAAE,MAAM3/C,GDA7b/mB,CAAAA,GAAG,IAAIhH,KAAC,CAAK+9D,gBAAgB/2D,EAAEwxB,OAAOx4B,ICAyZguB,CAAEhuB,ICErgB,IAAAm3I,GAAb,cAA4Cz+C,GAAQm9C,GAARn9C,CAAmBv4B,KAA/Dj+D,kCAE6B6C,KAAO26G,QAAa,GAE/C1iF,OAAOo6G,GACLtyI,MAAMk4B,OAAOo6G,GAGfr+C,aAAa19F,SACX0J,KAAK26G,SAAkC,UAAxBrkH,EAAMk3I,gBAAgBhzB,UAAE,IAAA/wE,OAAA,EAAAA,EAAEkxE,UAAW,GAGtD23B,qBAAqBC,GACnB,MAAMC,EAAMD,MAAAA,OAAA,EAAAA,EAAU5jH,QAAO,CAACwkF,EAAYs/B,IAAYt/B,EAAa,OAAOs/B,EAAQC,kBAAkB,IACpG,OAAOt4I,EAAI,GAAGo4I,IAGhBG,qBAAqBC,GASnB,OAPcA,EACXn0B,WAAW,WAAY,OACvBA,WAAW,YAAa,SACxBA,WAAW,cAAe,2BAC1BA,WAAW,eAAgB,WAC3BA,WAAW,aAAc,uFAK9B1oH,iBACE,MAAM88I,EAA4B,QAAXppG,EAAAzpC,KAAK8yI,cAAM,IAAArpG,OAAA,EAAAA,EAAEopG,eAC9BN,EAAsB,QAAXvtE,EAAAhlE,KAAK8yI,cAAM,IAAA9tE,OAAA,EAAAA,EAAEutE,SAC9B,OAAOn4I,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA2FJ4F,KAAK26G,SAAW,IAChBhhH,QAAOg9F,GAAUA,EAAOG,sBACxB34F,KAAIw4F,GAAUv8F,EAAI,0EAA0Eu8F,EAAOC;UACpGi8C,EAAiBE,GAAW,4CAA4CF,SAAwB;UAChGN,MAAAA,OAAA,EAAAA,EAAUp0I,KAAIs0I,GACPM,GACL,+CACGN,EAAQlmC,OAAS,WAAWkmC,EAAQlmC,mBAAqB,IAC1DkmC,EAAQC,UAFV,kDAKE1yI,KAAK2yI,qBAAqBF,EAAQG,SAClC,UACCH,EAAQhwB,YAAc,2EAA6EgwB,EAAQhwB,YAAc,SAAW;;QAvIrHjvB,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAiBy0I,GAAAn6I,UAAA,cAAA,GACRu7F,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAAgCo6I,GAAAn6I,UAAA,eAAA,GAFvCm6I,GAAsB5+C,GAAA,CADlC0+C,GAAc,yBACFE,UCPAY,GAGX71I,YAAmB8/C,EAAe9wC,GAAfnM,KAAQi9C,SAARA,EACjBj9C,KAAKmM,SAAWA,EAGlB8mI,mBACE,OAAoB,UAAbjzI,KAAKmM,gBAAQ,IAAAs9B,GAAAA,EAGtB8S,SACEv8C,KAAKmM,UAAW,SAIP+mI,GAGX/1I,cACE6C,KAAKmzI,cAAgB,GAGvBp/C,UAAU92C,GACR,MAAMm2F,EAA0B,IAAIJ,GAAa/1F,GAEjD,OADAj9C,KAAKmzI,cAAcz+H,KAAK0+H,GACjBA,EAGTC,OAAO1uG,GACL3kC,KAAKmzI,cAAc72I,SAASg3I,IACrBA,EAAaL,cAChBh+H,YAAW,KACTq+H,EAAar2F,SAAStY,KACrB,MAKT0T,QACEr4C,KAAKmzI,cAAgB,ICjCzB,MAcMjiB,GAAO,UA8BAqiB,GAA0C,IAAIL,SAE9CM,GAAbr2I,cAOE6C,KAASmtG,UAAa,GAGtBntG,KAAuByzI,wBAAG,GAC1BzzI,KAAqB0zI,sBAAG,GACxB1zI,KAA4B2zI,8BAAG,EAC/B3zI,KAAgB4zI,kBAAG,GAGrB,MAoDMC,GAAqBC,IACzB,GAAIA,EAAcF,iBAAkB,CAClCE,EAAcC,SAhHO,iBAiHrBD,EAAcE,YAzGC,cA0GfF,EAAcG,WA/GI,gBAgHlBH,EAAcI,SAAWhjB,GACzB,MAAM/jB,EAAY,CAAC,wGAAyG,kCAC5H2mC,EAAc3mC,UAAYA,EAC1BgnC,GAAaL,KAOJM,GAA6B,CAACx0G,EAAiBkxG,EAAgBtP,EAAkC1pG,EAAY67G,GAA+B,KACvJ,MAAMG,EAA+B,IAAIN,GACzCM,EAAcl0G,MAAQA,EACtBk0G,EAAchD,UAAYA,EAC1BgD,EAActS,gBAAkBA,EAChCsS,EAAch8G,MAAQA,EACtBg8G,EAAcL,wBAA0BY,GAAmBC,GAAoBC,SAAUT,EAActS,iBACvGsS,EAAcJ,sBAAwBW,GAAmBC,GAAoBE,OAAQV,EAActS,iBACnGsS,EAAcH,6BAA+BA,EAEzCnS,EAAgBjC,cAAcvH,MAAMh+H,OAAS,GAAKwnI,EAAgBjC,cAAcN,WAAWjlI,OAAS,GACtGy6I,GAA2BX,GAC3BA,EAAcH,8BAA+B,EAC7CE,GAAkBC,KAhFU,CAACA,IAE/BA,EAAc3mC,UADI,CAAC,sEAEnB2mC,EAAcC,SAjEgB,uBAkE9BD,EAAcE,YAzDY,sBA0D1BF,EAAcG,WA7DS,mBA8DvBH,EAAcI,SAAWhjB,GACzBijB,GAAaL,IA2EXY,CAAwBZ,GACxBA,EAAcH,8BAA+B,IAS3Cc,GAA8BX,IAClC,GAAIA,EAActS,gBAAgB/B,WAAWzlI,OAAQ,CACnD,MAAM26I,EAAYb,EAActS,gBAAgB/B,WAAW,GAC3DqU,EAAcE,YAAcW,EAAUj8C,QAnJX,yBAoJ3Bi8C,EAAU1S,4BA5EyB,CAAC6R,IACtC,MAAM3mC,EAAY,IACb2mC,EAActS,gBAAgB/B,WAAW,GAAGtyB,UAC/C,yBACEynC,GAA0Bd,EAAcL,yBACxCoB,GAAoBf,EAAcL,yBAClCK,EAAcJ,sBACd,0BAEJI,EAAc3mC,UAAYA,EAC1B2mC,EAAcC,SAzFwB,8BA0FtCD,EAAcG,WAvFS,mBAwFvBH,EAAcI,SAAWhjB,GAEzBijB,GAAaL,IA8D6BgB,CAA+BhB,GAtFpC,CAACA,IACtCA,EAAc3mC,UAAY2mC,EAActS,gBAAgB/B,WAAW,GAAGtyB,UACtE2mC,EAAcC,SAAW,wBACzBD,EAAcE,YAjEe,yBAkE7BF,EAAcG,WArEM,gBAsEpBH,EAAcI,SAhED,SAiEbJ,EAAcF,kBAAmB,EACjCO,GAAaL,IA+E6EiB,CAA+BjB,GACvHA,EAAcF,kBAAmB,OAC4B,IAApDE,EAActS,gBAAgB/B,WAAWzlI,QAAkF,IAAlE85I,EAActS,gBAAgBjC,cAAcN,WAAWjlI,OACzHw2H,GAAiBsjB,GAAe,IAEhCA,EAAcF,kBAAmB,EAhEe,CAACE,IACnDA,EAAcC,SAnGsC,2CAoGpDD,EAAcE,YA1Fc,0CA2F5BF,EAAcG,WAhGS,mBAiGvBH,EAAcI,SAAWhjB,GACzB,MAAM/jB,EAAY,CAChB,8BACE0nC,GAAoBf,EAAcL,yBAClCK,EAAcJ,sBACd,gDAEJI,EAAc3mC,UAAYA,EAC1BgnC,GAAaL,IAqDXkB,CAA4ClB,KAO1CK,GAAgBL,IACpB97I,MAAMqS,KAAK5P,SAAS0P,iBAAiB,qBAAqB7N,SAAQ07D,GAAMv9D,SAASyP,KAAKuB,YAAYusD,KAElG,MAAMi9E,EAAax6I,SAASC,cAAc,aAC1Cu6I,EAAWt4I,UAAUE,IAAI,mBACzBo4I,EAAW11I,GAAKu0I,EAAcC,SAE9Bt5I,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ6+F,EAAcE,YAEjC,MAAMx5I,EAAUC,SAASwsC,cAAcigD,yBAAyB,sTAexD43B,GAAcg1B,EAAc3mC,yCAE5B+nC,GAAcpB,uDAEdqB,GAAcrB,wCAKtB5nF,GAAa1xD,EAASy6I,EAAYnB,GAElCsB,GAAgB56I,GAEhBs5I,EAAcl0G,MAAM1sB,OACpB+hI,EAAW3yG,YAAY9nC,GACvBy6I,EAAW3oF,OAEXr3C,YAAW,IAAMogI,GAAmBvB,IAAgB,GArNtB,yBAuN1BA,EAAcC,UAChB9+H,YAAW,IAAMqgI,MAA2B,IAI1CA,GAA0B,KAC9B76I,SAAS+E,eAAe,gBAAiBuH,SAGrCsuI,GAAsBvB,IAC1B,MAAMyB,EAAgB96I,SAAS2Q,cAAc,IAAM0oI,EAAcC,UAAW39I,WAAYgV,cAAc,UACtGmqI,MAAAA,GAAAA,EAAeC,mBAAmB,aAAcC,GAAQ3B,KAGpD2B,GAAW3B,GAxNF,WAyNTA,EAAcI,SAvND,08CAcF,48CAkNXhoF,GAAe,CAAC1xD,EAA2By6I,EAAsBnB,KACrE,MAAM4B,EAASl7I,EAAQ2P,iBAAiB,aAExC,GAAsB,IAAlBurI,EAAO17I,OAAc,CACR07I,EAAO,GACfC,QAAU,KACfC,GAAaX,EAAYnB,SAEtB,GAAI4B,EAAO17I,OAAS,EAAG,CAC5B,MAAM67I,EAAWH,EAAO,GACTA,EAAO,GAEfC,QAAU,KACfC,GAAaX,EAAYnB,IAG3B+B,EAASF,QAAU,KACjBG,GAAkBhC,EAAemB,MAKjCG,GAAmB56I,IACvB,MAAMmjE,EAAQnjE,EAAQ2P,iBAAiB,YAEvC,GAAIwzD,EAAM3jE,OAAS,EAAG,CACpB,MAAM+7I,EAAOp4E,EAAM,GACbq4E,EAAOr4E,EAAM,GAEnBo4E,EAAKJ,QAAU,KACbM,MAEFD,EAAKL,QAAU,KACbM,QAKAC,GAA0BC,GACtB17I,SAAS+E,eAAe22I,GAAe/qI,cAAc,qBAA6BzU,MAMtFm/I,GAAoB,CAAChC,EAA8BmB,KACvD,MAAMlB,SAAEA,GAAaD,EACrB,IAAIprC,EAAQ,GACR0tC,GAAoB,EA5Rc,gCA8RlCrC,EACFrrC,EAAgD,MAAxCwtC,GAAuB,aAAuB,IAAM,GAlShC,yBAmSnBnC,GACTrrC,EAAQwtC,GAAuB,kBACjB,MAAVxtC,GACF2tC,GAAsBvC,GACtBprC,EAAQ,IACW,MAAVA,GAAiBorC,EAAcH,8BACxCG,EAAcH,8BAA+B,EAC7CjrC,EAAQ,GACR0rC,GAA2BN,EAAcl0G,MAAOk0G,EAAchD,UAAWgD,EAActS,gBAAiBsS,EAAch8G,OAAO,IAC1G,MAAV4wE,GAAkBorC,EAAcH,+BACzCc,GAA2BX,GAC3BprC,EAAQ,KA7SwC,6CA+SzCqrC,IACTrrC,EAAQwtC,GAAuB,sCAC/BE,EAA8B,MAAV1tC,GAGlBA,GACF8nB,GAAiBsjB,EAAesC,GAGlCR,GAAaX,EAAYnB,GACzBD,GAAkBC,IAGdtjB,GAAmB,CAACsjB,EAA8BsC,KACtD,MAAM5U,gBAAEA,EAAesP,UAAEA,GAAcgD,EACvChD,EAAUW,SACRr3C,GAAqClE,QACnCsrC,EAAgBjC,cAAcppC,MAC9BqrC,EAAgBjD,YAChBh+H,EACAihI,EAAgBjC,cAAcppC,MAAM2iB,qBACpCs9B,EACA,YAKAC,GAAyBvC,IAC7B,MAAMl0G,MAAEA,EAAK9H,MAAEA,EAAK0pG,gBAAEA,GAAoBsS,EAC1Cl0G,EAAMxI,UAAUuE,qBAAqB7D,EAAM/gB,MAAOyqH,EAAgBpD,qBAClEmV,GAAoBF,OAAO,cAGvBuC,GAAe,CAACX,EAAsBnB,KAC1CmB,MAAAA,GAAAA,EAAY95F,OACR1gD,SAASyP,KAAKxD,SAASuuI,IACzBx6I,SAASyP,KAAKuB,YAAYwpI,GAE5BhgI,YAAW,IAAM6+H,EAAcl0G,MAAM74B,SAAS,IAG1C+3G,GAAiB3R,GAAgCA,EAAUp+F,KAAK,YAEhEmmI,GAAiBpB,GA3VS,yBA4V1BA,EAAcC,SACTuC,KA5V2C,6CA6VzCxC,EAAcC,SAChBwC,GAA6CzC,GA7VH,6CA8VxCA,EAAcC,UA7Va,gCA6VgDD,EAAcC,SAC3FyC,KAEF,GAGHF,GAA2B,IACxB,sRAQHC,GAAgDzC,GAElD,2HAGAA,EAAcJ,sBACd,mFAEAmB,GAAoBf,EAAcL,yBAClCK,EAAcJ,sBACd,uCAME8C,GAAsB,IACnB,iKAQHrB,GAAiBrB,GAlYE,qBAkYwCA,EAAcG,WAAkCwC,GAAmB3C,GAAiB4C,KAE/IA,GAAkB,IACf,yIAQHD,GAAsB3C,GAEnB,8IArZuB,yBAoZbA,EAAcC,SAAuC,GAAK,wHAUvEkC,GAAyB,KAC5Bx7I,SAAS+E,eAAe,gBAAwBpG,UAAW,EAC5Dk8I,MAGF,IAAKhB,IAAL,SAAKA,GACHA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,SAAA,GAAA,WAFF,CAAKA,KAAAA,GAGJ,KAKD,MAAMD,GAAqB,CAACsC,EAAsCnV,KAChE,GAAIA,EAAgBjC,cAAcR,aAAarrH,SAAS,gCACtD,MAAO,GAET,MAAMqrF,EAAcyiC,EAAgBjC,cAAcR,aAAa,GAAGnoI,cAClE,OAAO+/I,IAAoBrC,GAAoBE,OAASr9C,GAAgB4H,GAAazH,gBAAiB1gG,cAAgBugG,GAAgB4H,GAAa9I,UAAWr/F,eAQ1JggJ,GAAoBC,GAAqC,CAAC,QAAS,QAAS,WAAY,UAAUnjI,SAASmjI,GAK3GjC,GAA6BiC,GAAqCD,GAAiBC,GAAmB,SAAW,SAKjHhC,GAAuBgC,GAAqCD,GAAiBC,GAAmB,MAAQ,MCzbxG,MAAOC,mBAAb35I,kCACE6C,KAAKw4G,MAAG,EAERx4G,KAAMusG,OAAG,GACTvsG,KAASysG,WAAG,EACZzsG,KAAQy4G,UAAG,EAOXz4G,KAAY04G,cAAG,EACf14G,KAAK+W,MAAG,GC3BV,MAAM6T,GAAQ2L,MAAMoG,OAAO,eAErB,MAAOo6G,WAAgBnsH,GA4B3BztB,YAAYo2B,GACVxzB,MAAMwzB,GAzBJyjH,uBACF,OAAOD,GAAQ7pH,SAGb+pH,YACF,OAAOj3I,KAAK/I,OAAOA,OAAOA,OAGxBigJ,cACF,OAAOl3I,KAAKhG,SAAW,EAGrBwyB,cACF,OAAOxsB,KAAKuzB,QAAQ/G,QAGlBpyB,WACF,MAAkC,SAA3B4F,KAAKuzB,QAAQ54B,UAAuBqF,KAAKuzB,QAAQ54B,UAAUc,QAAQ,SAAU,IAAM,GAGxFrB,SAAKA,GACP4F,KAAKuzB,QAAQ54B,UAAYP,GC1B7B,IAAY+8I,GDGHJ,GAAQ7pH,SAAG,UCHpB,SAAYiqH,GACVA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAFF,CAAYA,KAAAA,GAGX,KAEK,MAAOC,WAAoBL,GAkB/B55I,cACE4C,MAAMq3I,GAAYjtH,UAbhB6sH,uBACF,OAAOI,GAAYlqH,SAGrBvZ,gBACE,MAAMlc,EAAmBsI,MAAMoqB,SAI/B,OAFA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS06I,GAAYx6I,WAChCnF,GAbF2/I,GAAQlqH,SAAG,cACXkqH,GAAO5qH,QAAG,cACV4qH,GAASx6I,UAAG,kBCTf,MAAOy6I,WAAyBN,GAqBpC55I,cACE4C,MAAMs3I,GAAiBltH,UAjBrB6sH,uBACF,OAAOK,GAAiBnqH,SAG1BvZ,gBACE,MAAMlc,EAAiBsI,MAAMoqB,SAQ7B,OANA1yB,EAAKiF,aAAa,UAAW,QAC7BjF,EAAKiF,aAAa,OAAQ,SAC1BjF,EAAKiF,aAAa,OAAQ,WAC1BjF,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS26I,GAAiBz6I,WAC5CnF,EAAKkD,UAAY,WACVlD,GAjBF4/I,GAAQnqH,SAAG,mBACXmqH,GAAO7qH,QAAG,YACV6qH,GAASz6I,UAAG,iBCFf,MAAO06I,WAA4BP,GAmBvC55I,YAAYo6I,GACVx3I,MAAMu3I,GAAoBntH,OAAOotH,IAf/BP,uBACF,OAAOM,GAAoBpqH,SAG7BvZ,cAAc4jI,GACZ,MAAM9/I,EAAesI,MAAMoqB,SAErBqtH,EAAkBD,IAAoBJ,GAAgBM,SAAW,GAAK,iCAI5E,OAFAhgJ,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS46I,GAAoB16I,UAAY46I,GACpD//I,GAfF6/I,GAAQpqH,SAAG,sBACXoqH,GAAO9qH,QAAG,UACV8qH,GAAS16I,UAAG,0BCDf,MAAO86I,WAAwBX,GA2BnC55I,YAAYm6G,EAAsBr6D,GAChCl9C,MAAM23I,GAAgBvtH,OAAOmtF,EAAMr6D,IAvBjC+5F,uBACF,OAAOU,GAAgBxqH,SAGzBvZ,cAAc2jG,EAAsBr6D,SAClC,MAAMxlD,EAAmBsI,MAAMoqB,SAc/B,OAZA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASg7I,GAAgB96I,WAC3CnF,EAAKkD,WAA+B,QAAlB8uC,EAAA6tE,EAAKrhB,iBAAa,IAAAxsD,EAAAA,EAAA,KAAO6tE,EAAKthB,OAAS,wBAAwBshB,EAAKthB,iBAAmB,IAEzGv+F,EAAKuP,iBAAiB,aAAa,WACjC,GAAIswG,EAAKrhB,YAAc4F,GAAoB5F,WAAaqhB,EAAKrhB,YAAcoF,GAA8BpF,UAAW,CAClH,MAAMl/E,EAAiC,QAAzB0yB,EAAAhvC,SAASk/B,sBAAgB,IAAA8P,OAAA,EAAAA,EAAAgpD,YACvCqb,aAAa6c,QAAQ,cAAex4D,KAAKC,UAAUr7C,IAGrDkmC,EAASq6D,MAEJ7/G,GAvBFigJ,GAAQxqH,SAAG,kBACXwqH,GAAOlrH,QAAG,eACVkrH,GAAS96I,UAAG,+BCFf,MAAO+6I,WAAsBZ,GA0CjC55I,YAAY0oF,GACV9lF,MAAM43I,GAAcxtH,OAAO07D,IArCzBmxD,uBACF,OAAOW,GAAczqH,SAGvBvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAwBhC,OAtBA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASi7I,GAAcC,aAAa/xD,IACtDpuF,EAAKiF,aAAa,cAAempF,EAAS0mB,QAEtC1mB,EAASgzB,WACXphH,EAAKiF,aAAa,aAAc,QAG9Bm7I,GAAsBhyD,IACxBpuF,EAAKiF,aAAa,0BAA2B,QAG3CmpF,EAASuQ,MACX3+F,EAAKiF,aAAa,mBAAoBmpF,EAASuQ,MAGjD3+F,EAAKkD,UAAYg9I,GAAcG,aAAajyD,GACxCA,EAASuZ,oBAAsBP,GAAkBG,wBAA0BnZ,EAASizB,uBACtFrhH,EAAKsgJ,MAAQlyD,EAAS2V,sBAAwB,0CAA4C,wCAG5F/jG,EAAKk+I,QAAUA,GAAQl+I,EAAMouF,GACtBpuF,EAGL80G,aACF,OAAOvsG,KAAKuzB,QAAQ92B,aAAa,eAOnCk3B,OAAOj9B,EAAcC,EAAYkiH,GAC3BniH,IAASihJ,GAAczqH,UACzBltB,KAAKuzB,QAAQ72B,aAAa,eAAgBm8G,EAAY,IAAW,IAAMliH,GACnEkiH,GACF74G,KAAKuzB,QAAQ72B,aAAa,aAAc,QAE1CsD,KAAKuzB,QAAQ54B,UAAYhE,GAChBD,IAASihJ,GAAcK,aAChCh4I,KAAKuzB,QAAQ72B,aAAa,QAASi7I,GAAcM,mBAAmBthJ,IAEpEoJ,MAAM4zB,OAAOj9B,EAAMC,GAIfgd,0BAA0BkyE,GAChC,IAAI/oF,EAA0B,gBAAlB+oF,EAASuQ,KAAyB,uDAAyD,uDAOvG,OAJEt5F,EADE+oF,EAAS4mB,UACH,GAAG3vG,yDAEH,GAAGA,qCAENA,EAGF6W,oBAAoBkyE,aACzB,MAAMqyD,EAAiB,CACrB,CAACr5C,GAAkBG,wBAAyB,0BAC5C,CAACH,GAAkBI,wBAAyB,0BAC5C,CAACJ,GAAkBK,uBAAwB,0BAGvC+F,EAAepf,EAASuZ,oBAAsBP,GAAkBG,uBACtE,MACE,iBACCnZ,EAAS4mB,UAAY,4BAA8B,2BACnDxH,GAAgBpf,EAASizB,qBAAuB,UAAY,IAC5D,oBAAoC,QAAfrvE,EAAAo8C,EAASuQ,YAAM,IAAA3sD,OAAA,EAAAA,EAAA7yC,eACpC,KAAuD,UAAhDshJ,EAAyC,UAA1BryD,EAASuZ,yBAAiB,IAAAp6B,EAAAA,EAAI,WAAG,IAAA4X,EAAAA,EAAI,IAIzDu7D,UAAUtyD,GACf7lF,KAAKuzB,QAAQ72B,aAAa,QAAS,GAAGi7I,GAAcC,aAAa/xD,MAG5DuyD,mBAAmBvyD,GACxB7lF,KAAKm4I,UAAUtyD,GAEf7lF,KAAKuzB,QAAQ72B,aAAa,cAAempF,EAAS0mB,QAE9C1mB,EAASgzB,UACX74G,KAAKuzB,QAAQ72B,aAAa,aAAc,QAExCsD,KAAKuzB,QAAQ5rB,gBAAgB,cAG3BkwI,GAAsBhyD,GACxB7lF,KAAKuzB,QAAQ72B,aAAa,0BAA2B,QAErDsD,KAAKuzB,QAAQ5rB,gBAAgB,2BAG/B3H,KAAKuzB,QAAQoiH,QAAUA,GAAQ31I,KAAKuzB,QAASsyD,GAC7C7lF,KAAKuzB,QAAQ54B,UAAYg9I,GAAcG,aAAajyD,GAG9ClyE,oBAAoBkyE,GAC1B,MAAM4rC,EAAgBt6B,GAAgBtR,EAASuQ,KAAMx/F,eAAeq/F,UACpE,OAAOpQ,EAASrB,SAAWmzD,GAAcU,0CAA0CxyD,GAAY4rC,MAAAA,EAAAA,EAAiB,GAAK5rC,EAAS0mB,OAGxH54F,iDAAiDkyE,GACvD,MAAM30B,EAAI20B,EAASrB,QACnB,OAAOulC,GAAmB74D,IAAM44D,GAAoB54D,IAvH/CymF,GAAQzqH,SAAG,gBACXyqH,GAAOnrH,QAAG,QAEVmrH,GAAYK,aAAG,QAwHxB,MAAMH,GAAyBhyD,cAC7B,QACEA,EAASuZ,oBAAsBP,GAAkBG,yBACjDnZ,EAASizB,uBACRjzB,EAASgzB,WAA+B,WAAlBhzB,EAASuQ,MAAqE,QAA/CxZ,EAAwB,QAAxB5X,EAAmB,UAAnB6gB,EAAS6kB,kBAAU,IAAAjhE,OAAA,EAAAA,EAAEo2D,WAAG,IAAA76B,OAAA,EAAAA,EAAEw2B,6BAAqB,IAAA5e,IAAAA,IAInG+4D,GAAU,CAACl+I,EAAmBouF,IAC9BgyD,GAAsBhyD,GACjB,IAAepuF,EAAK0R,cAAc,IAAIH,YAAY,SAAU,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,MAEzG,KAAe,EC5IpB,MAAOyyD,WAAyBvB,GAMpC55I,YAAY0oF,GACV9lF,MAAMu4I,GAAiBnuH,OAAO07D,IAC9B7lF,KAAK6lF,SAAWA,EAGdmxD,uBACF,OAAOsB,GAAiBprH,SAG1BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAOhC,OALA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS47I,GAAiB17I,WAE5CnF,EAAKkD,UAAY29I,GAAiBC,WAAW1yD,GAEtCpuF,EAGTkc,iBACE,OAAO,EAGFykI,mBAAmBvyD,GACxB7lF,KAAK6lF,SAAWA,EAChB7lF,KAAKuzB,QAAQ54B,UAAY29I,GAAiBC,WAAW1yD,GAG/ClyE,kBAAkBkyE,GACxB,OAAOA,EAASgzB,UAAY,IAAM,IAnC7By/B,GAAQprH,SAAG,mBACXorH,GAAO9rH,QAAG,aACV8rH,GAAS17I,UAAG,aCDf,MAAO47I,WAAwBzB,GA+CnC55I,YAAY0oF,GACV9lF,MAAMy4I,GAAgBruH,OAAO07D,IAC7B7lF,KAAKy4I,SAAW,GA5CdzB,uBACF,OAAOwB,GAAgBtrH,SAGzBvZ,cAAckyE,WACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAC1B2uE,EAAmBmU,GAAkD,QAA5BjoC,EAAiB,UAAjB6gB,EAASiT,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,aAAS,IAAAjoB,EAAAA,EAAA,IAAI71D,OAoB/E,OAlBA1X,EAAKiF,aAAa,QAAS87I,GAAgBZ,aAAa/xD,IACxDpuF,EAAKiF,aAAa,mBAAmBmpF,MAAAA,OAAA,EAAAA,EAAU4yB,UAAW,OAAS,SACnEhhH,EAAKiF,aAAa,KAAM,qBAAuBmpF,EAASxC,MAEpDwC,EAAS6Y,eACXjnG,EAAKiF,aAAa,iBAAkBmpF,EAAS6Y,eAAiB,IAG5D7Y,EAASwyB,YACX5gH,EAAKiF,aAAa,cAAe,QAGb,YAAlBmpF,EAASuQ,MAAsB0C,EAASx6F,QAAQ+gG,KAAkB,EACpE5nG,EAAKkD,UAAY,gCAAkC0kG,GAAgB,UAEnE5nG,EAAKkD,UAAyB,KAAbm+F,EAAkBA,EAAW,OAGzCrhG,EAILihJ,YAAQA,GACV14I,KAAKy4I,SAAWC,EAGdA,cACF,OAAO14I,KAAKy4I,SAGV9K,eACF,OAAO3tI,KAAKy4I,WAAaz4I,KAAK5F,KASzBuZ,oBAAoBkyE,GACzB,MAAO,qBAGFuyD,mBAAmBvyD,GACxB7lF,KAAK04I,QAAU14I,KAAK5F,KAChByrF,EAAS6Y,cACX1+F,KAAKuzB,QAAQ72B,aAAa,iBAAkBmpF,EAAS6Y,eAAiB,IAEtE1+F,KAAKuzB,QAAQ5rB,gBAAgB,kBAG3Bk+E,EAASwyB,WACXr4G,KAAKuzB,QAAQ72B,aAAa,cAAe,QAEzCsD,KAAKuzB,QAAQ5rB,gBAAgB,gBAnE1B6wI,GAAQtrH,SAAG,kBACXsrH,GAAOhsH,QAAG,IACVgsH,GAAS57I,UAAG,qBCNf,MAAO+7I,WAAsB5B,GAiBjC55I,cACE4C,MAAM44I,GAAcxuH,UAblB6sH,uBACF,OAAO2B,GAAczrH,SAGvBvZ,gBACE,MAAMlc,EAAoBsI,MAAMoqB,SAIhC,OAFA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKkD,UAAY,SACVlD,GAbFkhJ,GAAQzrH,SAAG,gBACXyrH,GAAOnsH,QAAG,SACVmsH,GAAS/7I,UAAG,SCDf,MAAOg8I,WAA0B7B,GASrC55I,YAAY0oF,GACV9lF,MAAM64I,GAAkBzuH,OAAO07D,IAL7BmxD,uBACF,OAAO4B,GAAkB1rH,SAO3BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAOhC,OALA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,KAAM,kBAAoBmpF,EAASxC,MACrD5rF,EAAKkF,UAAUE,IAAI+7I,GAAkBh8I,WACrCg8I,GAAkBC,oBAAoBhzD,EAAUpuF,GAEzCA,EAGTkc,iBACE,OAAO,EAGFmlI,kBAAkBjzD,GACvB7lF,KAAKo4I,mBAAmBvyD,GAGnBuyD,mBAAmBvyD,GACxB+yD,GAAkBC,oBAAoBhzD,EAAU7lF,KAAKuzB,SAG/C5f,2BAA2BkyE,EAAoBpuF,GACrDA,EAAKkD,UAAYi+I,GAAkBL,WAAW1yD,GAC9CpuF,EAAKk+I,QAAUA,GAAQl+I,EAAMouF,GAEzBm0B,GAAkCn0B,IACpCpuF,EAAKkF,UAAUE,IAAI,cACnBpF,EAAKsgJ,MAAQlyD,EAAS2V,sBAAwB,0CAA4C,wCAE1F/jG,EAAKkF,UAAUg4B,OAAO,cAIlBhhB,kBAAkBkyE,GACxB,OAAIm0B,GAAkCn0B,GAC7BA,EAAS2V,sBAAwB,YAAc,OAE/C,IAnDJo9C,GAAQ1rH,SAAG,oBACX0rH,GAAOpsH,QAAG,kBACVosH,GAASh8I,UAAG,kBAsDrB,MAAM+4I,GAAU,CAACl+I,EAAmBouF,IAC9Bm0B,GAAkCn0B,GAC7B,IAAepuF,EAAK0R,cAAc,IAAIH,YAAY,oBAAqB,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,MAEpH,KAAe,EC9DpB,MAAOkzD,WAA0BhC,GAUrC55I,YAAY0oF,GACV9lF,MAAMg5I,GAAkB5uH,OAAO07D,IAC/B7lF,KAAK6lF,SAAWA,EAPdmxD,uBACF,OAAO+B,GAAkB7rH,SAS3BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAOhC,OALA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASq8I,GAAkBn8I,WAE7CnF,EAAKkD,UAAYo+I,GAAkBR,WAAW1yD,GAEvCpuF,EAGTkc,iBACE,OAAO,EAGFykI,mBAAmBvyD,GACxB7lF,KAAK6lF,SAAWA,EAChB7lF,KAAKuzB,QAAQ54B,UAAYo+I,GAAkBR,WAAW1yD,GAGhDlyE,kBAAkBkyE,GACxB,OAAOA,EAASwyB,WAAa,KAAO,KAnC/B0gC,GAAQ7rH,SAAG,oBACX6rH,GAAOvsH,QAAG,cACVusH,GAASn8I,UAAG,cCHf,MAAOo8I,WAA6BjC,GASxC55I,YAAY0oF,GACV9lF,MAAMi5I,GAAqB7uH,OAAO07D,IALhCmxD,uBACF,OAAOgC,GAAqB9rH,SAO9BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAMhC,OAJA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASs8I,GAAqBp8I,WAChDo8I,GAAqBH,oBAAoBhzD,EAAUpuF,GAE5CA,EAGTkc,iBACE,OAAO,EAGFykI,mBAAmBvyD,GACxBmzD,GAAqBH,oBAAoBhzD,EAAU7lF,KAAKuzB,SAGlD5f,2BAA2BkyE,EAAoBpuF,GACrDA,EAAKkD,UAAYq+I,GAAqBT,WAAW1yD,GACjDpuF,EAAKk+I,QAAUA,GAAQl+I,EAAMouF,GAEzBA,EAAS6Y,cACXjnG,EAAKiF,aAAa,iBAAkBmpF,EAAS6Y,eAAiB,IAE9DjnG,EAAKkQ,gBAAgB,kBAGnBk+E,EAASygB,wBACX7uG,EAAKkF,UAAUE,IAAI,2BAEnBpF,EAAKkF,UAAUg4B,OAAO,2BAIlBhhB,kBAAkBkyE,GACxB,OAAOA,EAAS6Y,cAAgB,IAAM7Y,EAAS6Y,cAAgB,IAAM,KAhDhEs6C,GAAQ9rH,SAAG,uBACX8rH,GAAOxsH,QAAG,iBACVwsH,GAASp8I,UAAG,iBA2DrB,MAAM+4I,GAAU,CAACl+I,EAAmBouF,IAC9BA,EAASygB,wBACJ,IAAe7uG,EAAK0R,cAAc,IAAIH,YAAY,iBAAkB,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,MAEjH,KAAe,EClE1B,IAAYsxD,GCAAA,IDAZ,SAAYA,GACVA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAFF,CAAYA,KAAAA,GAGX,KAEK,MAAO8B,WAA8BlC,GAmBzC55I,YAAY0oF,GACV9lF,MAAMk5I,GAAsB9uH,OAAO07D,IAfjCmxD,uBACF,OAAOiC,GAAsB/rH,SAG/BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAMhC,OALA1yB,EAAKkD,UAAY,IACjBlD,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASu8I,GAAsBr8I,WACjDnF,EAAKiF,aAAa,QAAS,mBAC3Bu8I,GAAsBb,mBAAmBvyD,EAAUpuF,GAC5CA,EAOTqhJ,kBAAkBjzD,GAChBozD,GAAsBb,mBAAmBvyD,EAAU7lF,KAAKuzB,SAG1D5f,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAM,uBAAyBmpF,EAASxC,MAC1D5rF,EAAKk+I,QAAU,IAAel+I,EAAK0R,cAAc,IAAIH,YAAY,mBAAoB,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,OA5B7HozD,GAAQ/rH,SAAG,wBACX+rH,GAASr8I,UAAG,wBACZq8I,GAAOzsH,QAAG,SCRnB,SAAY2qH,GACVA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAFF,CAAYA,KAAAA,GAGX,KAEK,MAAO+B,WAA8BnC,GAmBzC55I,YAAY0oF,GACV9lF,MAAMm5I,GAAsB/uH,OAAO07D,IAfjCmxD,uBACF,OAAOkC,GAAsBhsH,SAG/BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAMhC,OALA1yB,EAAKkD,UAAY,IACjBlD,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASw8I,GAAsBt8I,WACjDnF,EAAKiF,aAAa,QAAS,mBAC3Bw8I,GAAsBd,mBAAmBvyD,EAAUpuF,GAC5CA,EAOTqhJ,kBAAkBjzD,GAChBqzD,GAAsBd,mBAAmBvyD,EAAU7lF,KAAKuzB,SAG1D5f,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAM,uBAAyBmpF,EAASxC,MAC1D5rF,EAAKk+I,QAAU,IAAel+I,EAAK0R,cAAc,IAAIH,YAAY,kBAAmB,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,OA5B5HqzD,GAAQhsH,SAAG,wBACXgsH,GAASt8I,UAAG,wBACZs8I,GAAO1sH,QAAG,SCTnB,MAAMlC,GAAYiM,MAAMoG,OAAO,mBAMzB,MAAgBw8G,WAAqB7uH,GAGzCntB,YAAY1F,GACVsI,MAAMtI,GAGI2hJ,gBACV,OAAOp5I,KAAKpG,SAAS86B,KAGb2kH,SAASnsH,GACjB,GAAKltB,KAAKo5I,UAGV,OAAOp5I,KAAKs5I,mBAAmBt5I,KAAKo5I,UAAWlsH,GAGvCosH,mBAAmB7hJ,EAAWy1B,GACtC,IAAIz1B,MAAAA,OAAI,EAAJA,EAAMu/I,oBAAqB9pH,EAC7B,OAAOz1B,EAIT,GAAoB,iBAATA,GAAqBA,EAE9B,IAAK,MAAMsF,KAAOtF,EAChB,GAAI,CAAC,WAAY,OAAQ,QAAQic,SAAS3W,GAAM,CAE9C,MAAM2O,EAAS1L,KAAKs5I,mBAAmB7hJ,EAAKsF,GAAMmwB,GAElD,IAAIxhB,MAAAA,OAAM,EAANA,EAAQsrI,oBAAqB9pH,EAC/B,OAAOxhB,GASP6tI,gBAAmB9hJ,EAAW+hJ,GAEtC,GAAI/hJ,aAAgB+hJ,EAClB,OAAO/hJ,EAIT,GAAoB,iBAATA,GAAqBA,EAE9B,IAAK,MAAMsF,KAAOtF,EAChB,GAAI,CAAC,WAAY,OAAQ,QAAQic,SAAS3W,GAAM,CAE9C,MAAM2O,EAAS1L,KAAKu5I,gBAAgB9hJ,EAAKsF,GAAMy8I,GAG/C,GAAI9tI,aAAkB8tI,EACpB,OAAO9tI,IC7DnB,IAAYyrI,IAAZ,SAAYA,GACVA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAFF,CAAYA,KAAAA,GAGX,KAEK,MAAOsC,WAAuB1C,GAiBlC55I,YAAY0oF,GACV9lF,MAAM05I,GAAetvH,OAAO07D,IAb1BmxD,uBACF,OAAOyC,GAAevsH,SAGxBvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAIhC,OAHA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS+8I,GAAe78I,WAC1C68I,GAAerB,mBAAmBvyD,EAAUpuF,GACrCA,EAOTqhJ,kBAAkBjzD,GAChB4zD,GAAerB,mBAAmBvyD,EAAU7lF,KAAKuzB,SAGnD5f,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAM,oBAAsBmpF,EAASxC,MACvD5rF,EAAKiF,aAAa,QAAS+8I,GAAeC,eAAe7zD,IAEzDpuF,EAAKkD,UAAYkrF,EAASrB,QAASM,QAAQ+qB,OnNmFpB,EAAC5iB,EAAQ,YAClC,OAE8B,QAD5BxjD,EAAAwjD,EACG3xF,MAAM,2BAAmB,IAAAmuC,OAAA,EAAAA,EACxBtrC,KAAIgvF,GAAQA,EAAK7qC,OAAO,KACzB3oD,QAAO,CAAC4xC,EAAGrxC,EAAG82B,IAAc,IAAN92B,GAAWA,IAAM82B,EAAIh3B,OAAS,IACpD+U,KAAK,MAAO,ImNzFqC4qI,CAAY9zD,EAASrB,QAASM,QAAQwjB,MAAMhmD,OAAO,IAAM,IAO/G3uC,sBAAsBkyE,GACpB,MAAMrB,EAAUqB,EAASrB,QAEzB,MAAO,SAAWA,EAAQyR,UAAnB,eAAoDzR,EAAQM,QAAQwjB,KAApE,iBAAkG9jB,EAAQgjD,UAtC5GiS,GAAQvsH,SAAG,iBACXusH,GAAS78I,UAAG,gBACZ68I,GAAOjtH,QAAG,SCNb,MAAOotH,WAA4BT,GAoBvCh8I,YAAY0oF,GACV9lF,MAAM65I,GAAoBzvH,OAAO07D,IAhB/BmxD,uBACF,OAAO4C,GAAoB1sH,SAG7BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAKhC,OAHA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASk9I,GAAoBh9I,WAC/Cg9I,GAAoBxB,mBAAmBvyD,EAAUpuF,GAC1CA,EASTqhJ,kBAAkBjzD,GAChB+zD,GAAoBxB,mBAAmBvyD,EAAU7lF,KAAKuzB,SACtDvzB,KAAK65I,eAAeh0D,GAGtBg0D,eAAeh0D,aACe,QAA5Bp8C,EAAAzpC,KAAK85I,+BAAuB,IAAArwG,GAAAA,EAAEqvG,kBAAkBjzD,GACnB,QAA7B7gB,EAAAhlE,KAAK+5I,gCAAwB,IAAA/0E,GAAAA,EAAE8zE,kBAAkBjzD,GAC7B,QAApBjJ,EAAA58E,KAAKg6I,uBAAe,IAAAp9D,GAAAA,EAAEk8D,kBAAkBjzD,GAG1ClyE,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAMk9I,GAAoBh9I,UAAYipF,EAASxC,MAG/Dy2D,8BACF,OAAO95I,KAAKq5I,SAASH,GAAsBhsH,UAGzC6sH,+BACF,OAAO/5I,KAAKq5I,SAASJ,GAAsB/rH,UAGzC8sH,sBACF,OAAOh6I,KAAKq5I,SAASI,GAAevsH,WA/C/B0sH,GAAQ1sH,SAAG,sBACX0sH,GAAOptH,QAAG,MACVotH,GAASh9I,UAAG,qBCUf,MAAOq9I,WAA0Bd,GAiTrCh8I,YAAY0oF,eACV9lF,MAAMk6I,GAAkB9vH,OAAO07D,IAC/B7lF,KAAK6lF,SAAWA,EAChB7lF,KAAKk6I,SAA+B,QAApBzwG,EAAAo8C,EAASoyB,eAAW,IAAAxuE,EAAAA,EAAA,GACpCzpC,KAAKm6I,OAA2B,QAAlBn1E,EAAA6gB,EAASsiB,aAAS,IAAAnjC,EAAAA,EAAA,GAChChlE,KAAKo6I,UAAYv0D,EAAS4yB,SAC1Bz4G,KAAKq6I,OAASx0D,EAAS2yB,MACvBx4G,KAAKs6I,QAA6B,QAAnB19D,EAAAiJ,EAAS+I,cAAU,IAAAhS,EAAAA,EAAA,GAClC58E,KAAKu6I,MAAyB,QAAjB/kH,EAAAqwD,EAASuQ,YAAQ,IAAA5gE,EAAAA,EAAA,GAC9Bx1B,KAAKw6I,WAAa30D,EAAS4mB,UAC3BzsG,KAAKy6I,YAAc50D,EAAS6kB,WAC5B1qG,KAAK06I,mBAAqB70D,EAASuZ,kBAAoBvZ,EAASuZ,uBAAoB7+F,EACpFP,KAAK26I,uBAAyB90D,EAAS2V,sBAxTrCw7C,uBACF,OAAOiD,GAAkB/sH,SAG3BvZ,eAAe0vE,GACb,MAAO,UAAUA,MAAAA,EAAAA,EAAQ,IAG3B1vE,cAAckyE,WACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAC1B2uE,EAAmBmU,GAAkD,QAA5BjoC,EAAiB,UAAjB6gB,EAASiT,gBAAQ,IAAArvD,OAAA,EAAAA,EAAEwjD,aAAS,IAAAjoB,EAAAA,EAAA,IAAI71D,OAY/E,OATA1X,EAAKiF,aAAa,QAASu9I,GAAkBr9I,UAAY,IAAMq9I,GAAkBrC,aAAa/xD,IAC9FpuF,EAAKiF,aAAa,KAAMu9I,GAAkBW,QAAQ/0D,EAASxC,OAE3D42D,GAAkBY,yBAAyBh1D,EAAUpuF,GACrDwiJ,GAAkBa,yCAAyCj1D,EAAUpuF,IAE/C,YAAlBouF,EAASuQ,MAAsB0C,EAASx6F,QAAQ+gG,KAAkB,IACpE5nG,EAAKkF,UAAUE,IAAI,+BAEdpF,EAKC4hJ,SAASnsH,GACjB,GAAKltB,KAAK+6I,WAGV,OAAO/6I,KAAKg7I,YAAYh7I,KAAK+6I,WAAWljJ,KAAMq1B,GAGtC8tH,YAAYC,EAAkB/tH,GACtC,GAAK+tH,EAGL,OAAOA,EAAQjE,mBAAqB9pH,EAAW+tH,EAAUj7I,KAAKg7I,YAAYC,EAAQpjJ,KAAMq1B,GAGlFguH,qBAAqBzjJ,GAE3B,GAAIA,aAAgBkgJ,GAClB,OAAOlgJ,EAIT,GAAoB,iBAATA,GAAqBA,EAE9B,IAAK,MAAMsF,KAAOtF,EAChB,GAAI,CAAC,WAAY,OAAQ,QAAQic,SAAS3W,GAAM,CAE9C,MAAM2O,EAAS1L,KAAKk7I,qBAAqBzjJ,EAAKsF,IAG9C,GAAI2O,aAAkBisI,GACpB,OAAOjsI,GAUbqvI,iBAGF,OAAO/6I,KAAKk7I,qBAAqBl7I,KAAKpG,SAAS86B,MAG7CymH,qBACF,OAAOn7I,KAAKq5I,SAAST,GAAkB1rH,UAGrCkuH,mBACF,OAAOp7I,KAAKq5I,SAASb,GAAgBtrH,UAGnCmuH,oBACF,OAAOr7I,KAAKq5I,SAASf,GAAiBprH,UAGpCouH,qBACF,OAAOt7I,KAAKq5I,SAASN,GAAkB7rH,UAGrCquH,wBACF,OAAOv7I,KAAKq5I,SAASL,GAAqB9rH,UAGxCsuH,uBACF,OAAOx7I,KAAKs5I,mBAAmBt5I,KAAKpG,SAAUggJ,GAAoB1sH,UAGhEuuH,uBACF,OAAOz7I,KAAKpG,SAAS86B,KAAK96B,SAAS46B,KAGjCknH,iCACF,OAAO17I,KAAKy7I,iBAAiB7hJ,SAAS86B,KAGpCwiH,cACF,OAAOl3I,KAAKhG,SAAW,EAGrBuF,eACF,OAA0C,QAAnCkqC,EAAAzpC,KAAKuzB,QAAQ92B,aAAa,aAAS,IAAAgtC,EAAAA,EAAA,GAIxCgjE,cAAUA,GACZzsG,KAAKw6I,WAAa/tC,EAGhBA,gBACF,OAAOzsG,KAAKw6I,WAIV/hC,aAASA,GACXz4G,KAAKo6I,UAAY3hC,EAIfA,eACF,OAAOz4G,KAAKo6I,UAIV1vC,eAAWA,GACb1qG,KAAKy6I,YAAc/vC,EAGjBA,iBACF,OAAO1qG,KAAKy6I,YAIVjiC,UAAMA,GACRx4G,KAAKq6I,OAAS7hC,EAGZA,YACF,OAAOx4G,KAAKq6I,OAIVzrD,WAAOA,GACT5uF,KAAKs6I,QAAU1rD,EAGbA,aACF,OAAO5uF,KAAKs6I,QAIVlkD,SAAKA,GACPp2F,KAAKu6I,MAAQnkD,EAGXA,WACF,OAAOp2F,KAAKu6I,MAIVn7C,sBAAkBD,GACpBn/F,KAAK06I,mBAAqBv7C,EAGxBC,wBACF,OAAOp/F,KAAK06I,mBAIVl/C,0BAAsBA,GACxBx7F,KAAK26I,uBAAyBn/C,EAG5BA,4BACF,OAAOx7F,KAAK26I,uBAGVt3D,WACF,OAAO54E,SAASzK,KAAKT,GAAGmd,OAAO,GAAI,GAIjCyrF,UAAMA,GACRnoG,KAAKm6I,OAAShyC,EAGZA,YACF,OAAOnoG,KAAKm6I,OAIVliC,YAAQA,GACVj4G,KAAKk6I,SAAWjiC,EAGdA,oBACF,OAAoB,UAAbj4G,KAAKk6I,gBAAQ,IAAAzwG,EAAAA,EAAI,GAGtBrvC,WACF,MAAkC,SAA3B4F,KAAKuzB,QAAQ54B,UAAuBqF,KAAKuzB,QAAQ54B,UAAY,GAGlEP,SAAKA,GACP4F,KAAKuzB,QAAQ54B,UAAYP,EAGnBuhJ,eACN37I,KAAKuzB,QAAQ52B,UAAUg4B,OAAO,2BAC9B30B,KAAKuzB,QAAQ52B,UAAUg4B,OAAO,2BAC9B30B,KAAKuzB,QAAQ52B,UAAUg4B,OAAO,0BAIhCwjH,UAAUtyD,GACR,IAAI+1D,EAAY,GAIhB,OAFA57I,KAAK27I,eAEG91D,EAASuZ,mBACf,KAAKP,GAAkBG,uBACrB48C,EAAY,0BACZ,MACF,KAAK/8C,GAAkBI,uBACrB28C,EAAY,0BACZ,MACF,KAAK/8C,GAAkBK,sBACrB08C,EAAY,yBAIZA,GACF57I,KAAKuzB,QAAQ52B,UAAUE,IAAI++I,GAG7B57I,KAAK+6I,WAAY5C,UAAUtyD,GAG7BlyE,gCAAgCkyE,EAAoBpuF,GAC9CouF,EAASrB,SACX/sF,EAAKiF,aAAa,aAAc,QACwB,qBAAnDmpF,EAASrB,QAA4Bi2B,UACxChjH,EAAKiF,aAAa,WAAY,QAE9BjF,EAAKkQ,gBAAgB,cAGvBlQ,EAAKkQ,gBAAgB,cACrBlQ,EAAKkQ,gBAAgB,aAIzBgM,gDAAgDkyE,EAAoBpuF,GAC9DuiH,GAAkCn0B,GACpCpuF,EAAKiF,aAAa,2BAA4BmpF,EAAS2V,uBAAuB3wF,YAE9EpT,EAAKkQ,gBAAgB,yBAIzBywI,mBAAmBvyD,iBACjBo0D,GAAkBY,yBAAyBh1D,EAAU7lF,KAAKuzB,SAC1D0mH,GAAkBa,yCAAyCj1D,EAAU7lF,KAAKuzB,SAExD,QAAlBkW,EAAAzpC,KAAKq7I,qBAAa,IAAA5xG,GAAAA,EAAE2uG,mBAAmBvyD,GACxB,QAAf7gB,EAAAhlE,KAAK+6I,kBAAU,IAAA/1E,GAAAA,EAAEozE,mBAAmBvyD,GACjB,QAAnBjJ,EAAA58E,KAAKm7I,sBAAc,IAAAv+D,GAAAA,EAAEw7D,mBAAmBvyD,GACxC7lF,KAAKo7I,aAAahD,mBAAmBvyD,GAClB,QAAnBrwD,EAAAx1B,KAAKs7I,sBAAc,IAAA9lH,GAAAA,EAAE4iH,mBAAmBvyD,GAClB,QAAtBpwD,EAAAz1B,KAAKu7I,yBAAiB,IAAA9lH,GAAAA,EAAE2iH,mBAAmBvyD,GAG7CizD,kBAAkBjzD,eAChB7lF,KAAK6lF,SAAWA,EAEhB7lF,KAAKk6I,SAA+B,QAApBzwG,EAAAo8C,EAASoyB,eAAW,IAAAxuE,EAAAA,EAAA,GACpCzpC,KAAKm6I,OAA2B,QAAlBn1E,EAAA6gB,EAASsiB,aAAS,IAAAnjC,EAAAA,EAAA,GAChChlE,KAAKo6I,UAAYv0D,EAAS4yB,SAC1Bz4G,KAAKq6I,OAASx0D,EAAS2yB,MACvBx4G,KAAKs6I,QAA6B,QAAnB19D,EAAAiJ,EAAS+I,cAAU,IAAAhS,EAAAA,EAAA,GAClC58E,KAAKu6I,MAAyB,QAAjB/kH,EAAAqwD,EAASuQ,YAAQ,IAAA5gE,EAAAA,EAAA,GAC9Bx1B,KAAKw6I,WAAa30D,EAAS4mB,UAC3BzsG,KAAKy6I,YAAc50D,EAAS6kB,WAC5B1qG,KAAK06I,mBAAqB70D,EAASuZ,kBAAoBvZ,EAASuZ,uBAAoB7+F,EACpFP,KAAK26I,uBAAyB90D,EAAS2V,sBAEvCx7F,KAAKm4I,UAAUtyD,GACf7lF,KAAKo4I,mBAAmBvyD,GAmB1BlyD,OAAOj9B,EAAcC,GACfD,IAASujJ,GAAkB/sH,SAC7BltB,KAAKuzB,QAAQ72B,aAAa,QAASu9I,GAAkBhC,mBAAmBthJ,IAExEoJ,MAAM4zB,OAAOj9B,EAAMC,GAIvBklJ,cACE77I,KAAKuzB,QAAQ52B,UAAUE,IAAI,8BAG7Bi/I,iBACE97I,KAAKuzB,QAAQ52B,UAAUg4B,OAAO,8BAC9B30B,KAAK+7I,yBAGPA,yBACM/7I,KAAK07I,sCAAsCtE,KAC7Cp3I,KAAK07I,2BAA2B/mH,UAChC,IAAIgkH,IAAgB5uG,WAAW/pC,KAAKy7I,mBAIhC9nI,0BAA0BkyE,GAChC,IAAI/oF,EACgB,gBAAlB+oF,EAASuQ,KACL,+DACA,mHAMN,OAJIvQ,EAAS4mB,YACX3vG,EAAQ,GAAGA,yBAGNA,EAED6W,oBAAoBkyE,SAC1B,IAAIm2D,EAA2B,gBAAlBn2D,EAASuQ,KAAyB,mCAAqC,8BAapF,OAZA4lD,EAAS,GAAGA,mBAAuC,QAAfvyG,EAAAo8C,EAASuQ,YAAM,IAAA3sD,OAAA,EAAAA,EAAA7yC,gBAGjDolJ,EADEn2D,EAAS4mB,UACF,GAAGuvC,cACe,WAAlBn2D,EAASuQ,KACT,GAAG4lD,WAEH,GAAGA,aAEVn2D,EAASizB,uBACXkjC,EAAS,GAAGA,2BAEPA,EAGFC,+BACL,OAAOj8I,KAAKuzB,QAAQ6hB,aAAa,aCzW/B,SAAU8mG,GAA2BnsD,GACzCA,EAAGtyE,kBACHsyE,EAAGzoF,iBDdI2yI,GAAQ/sH,SAAG,oBACX+sH,GAAOztH,QAAG,MACVytH,GAASr9I,UAAG,sBEhBrB,MAAMu/I,GAAuB,uIAChBC,GAAoB,IAAI/vG,OAAO,IAAI8vG,MAAyB,KAC5DE,GAAuB,IAAIhwG,OAAO,KAAK8vG,MAAyB,MAEhE1tG,GAAWlY,MAAMoG,OAAO,oBAE/B,MAAO2/G,WAAoB7tG,GAc/BtxC,YAAYyiC,EAAiBxxB,GAC3BrO,MAAM6/B,EAAOxxB,GAdfpO,KAAAu8I,wBAA4C,IAAIrJ,GAChDlzI,KAAAw8I,2BAAsD,IAAItJ,GAC1DlzI,KAAAm3H,eAAmC,IAAI+b,GACvClzI,KAAA2vI,uBAA6C,IAAIuD,GACjDlzI,KAAAyvI,iBAA8C,IAAIyD,GAClDlzI,KAAAy8I,mBAAgD,IAAIvJ,GACpDlzI,KAAA08I,aAA0C,IAAIxJ,GAC9ClzI,KAAA28I,SAA+B,IAAIzJ,GACnClzI,KAAA48I,iBAA8C,IAAI1J,GAClDlzI,KAAA68I,kBAA+C,IAAI3J,GAE3ClzI,KAAmB88I,qBAAG,EAM9B3tG,SACEnvC,KAAK4/B,MAAMtoC,KAAK0P,iBAAiB,SAAU+oF,KAErCA,EAAGlzE,SAAYkzE,EAAG9zE,QAAW8zE,EAAGlpF,WAAY,OAAO6M,SAASq8E,EAAGhzF,MACjEiD,KAAK+8I,qBAKT/8I,KAAK4/B,MAAMtoC,KAAK0P,iBAAiB,WAAY+oF,UAC3C/vF,KAAK88I,oBAAsB/sD,EAAG9zE,QAA0B,IAAhB8zE,EAAGnuF,SAC3C,MAAMo7I,EAA4C,QAAvBvzG,EAAAzpC,KAAK4/B,MAAMq9G,kBAAY,IAAAxzG,OAAA,EAAAA,EAAAo8C,SAKlD,GAJM7lF,KAAK4/B,MAAMs9G,8BAA4C,cAAXntD,EAAGhzF,KAAuBiD,KAAK4/B,MAAMs9G,4BAA4B,KAAQl9I,KAAKm9I,sBAAsBptD,IACpJ/vF,KAAK28I,SAAStJ,OAAO,YAGnBrzI,KAAK4/B,MAAMs9G,8BAAgCl9I,KAAK4/B,MAAMs9G,4BAA4B,KAAO,CAAC,SAAU,aAAaxpI,SAASq8E,EAAGhzF,MAC/H,IAAMgzF,EAAGlzE,SAA6B,IAAlBkzE,EAAGhzF,IAAI/C,QAAkB+1F,EAAGlzE,SAAW,OAAOnJ,SAASq8E,EAAGhzF,MAAUgzF,EAAG9zE,QAAU,aAAavI,SAASq8E,EAAGhzF,MAAoB,UAAXgzF,EAAGhzF,IAExI,YADAm/I,GAA2BnsD,OAGxB,CAAA,GAAI/vF,KAAKo9I,yBAEd,YADAlB,GAA2BnsD,GAEtB,GAC0B,YAA/B/vF,KAAK4/B,MAAMq9G,WAAW7mD,OACrB,CAAC,UAAW,aAAa1iF,SAASq8E,EAAGhzF,OACrCiD,KAAKm9I,sBAAsBptD,IAAkB,UAAXA,EAAGhzF,KAAmBgzF,EAAG9zE,QAAU8zE,EAAG7zE,WACxE6zE,EAAGlzE,QAMJ,MAJe,UAAXkzE,EAAGhzF,KACLiD,KAAKq9I,sBAEPnB,GAA2BnsD,GAEtB,GACL/vF,KAAK4/B,MAAM09G,kCACV,CAAC,SAAU,aAAa5pI,SAASq8E,EAAGhzF,OACpCiD,KAAKm9I,sBAAsBptD,IAAkB,UAAXA,EAAGhzF,KAAmBgzF,EAAG9zE,UAC3D8zE,EAAGlzE,QAMJ,MAJe,UAAXkzE,EAAGhzF,KACLiD,KAAKq9I,sBAEPnB,GAA2BnsD,GAEtB,IAAIitD,MAAAA,OAAA,EAAAA,EAAoB59C,qBAAsBP,GAAkBK,uBAAyBl/F,KAAKu9I,uBAAuBxtD,GAC1HmsD,GAA2BnsD,QACtB,GAAIA,EAAGlzE,SAsBZ,GArBKkzE,EAAG9zE,QAAW8zE,EAAG7zE,UAChB,CAAC,SAAU,aAAaxI,SAASq8E,EAAGhzF,KACtCm/I,GAA2BnsD,GACP,SAAXA,EAAGhzF,IACZiD,KAAKw9I,YAAYztD,GACG,QAAXA,EAAGhzF,IACZiD,KAAKy9I,WAAW1tD,GACkB,MAAzBA,EAAGhzF,IAAInG,eAA0Bm5F,EAAGlpF,SAEX,MAAzBkpF,EAAGhzF,IAAInG,cAChBoJ,KAAK09I,aAAa3tD,GACgB,MAAzBA,EAAGhzF,IAAInG,cAChBoJ,KAAK29I,aAAa5tD,GACgB,MAAzBA,EAAGhzF,IAAInG,cAChBoJ,KAAK49I,aAAa7tD,GACTA,EAAGlzE,SAAWkzE,EAAGlpF,UAAqC,MAAzBkpF,EAAGhzF,IAAInG,cAC7CoJ,KAAK69I,kBAAkB9tD,GACH,MAAXA,EAAGhzF,KAA0B,MAAXgzF,EAAGhzF,KAA0B,MAAXgzF,EAAGhzF,KAA0B,MAAXgzF,EAAGhzF,KAClEiD,KAAK89I,eAAe/tD,GAVpB/vF,KAAK+9I,aAAahuD,KAalBA,EAAG9zE,QAAU8zE,EAAG7zE,WACd,CAAC,KAAKxI,SAASq8E,EAAGhzF,IAAInG,eACxBoJ,KAAKg+I,0BAA0BjuD,GACtB,CAAC,IAAK,KAAKr8E,SAASq8E,EAAGhzF,IAAInG,eACpCoJ,KAAKi+I,4BAA4BluD,GACxB,CAAC,IAAK,KAAKr8E,SAASq8E,EAAGhzF,IAAInG,eACpCoJ,KAAKk+I,yBAAyBnuD,GACrB,CAAC,KAAKr8E,SAASq8E,EAAGhzF,IAAInG,gBAC/BoJ,KAAKm+I,0BAA0BpuD,GAI7B,CAAC,MAAO,MAAO,KAAM,MAAO,MAAO,QAAQr8E,SAASq8E,EAAGhzF,IAAIo1C,WAAW,GAAGtnC,aAAa,CACxF,IAAIuzI,EAAU,GACd,OAAQruD,EAAGhzF,IAAIo1C,WAAW,GAAGtnC,YAC3B,IAAK,MACHuzI,EAAU,IACV,MACF,IAAK,MACHA,EAAU,IACV,MACF,IAAK,KACHA,EAAU,IACV,MACF,IAAK,MACHA,EAAU,IACV,MACF,IAAK,MACHA,EAAU,IACV,MACF,IAAK,OACHA,EAAU,IAGd,GAAIA,EAAS,CAEX,MAAMC,EAAc,IAAIC,cAAc,UAAW,CAC/CvhJ,IAAKqhJ,IAEPp+I,KAAKg+I,0BAA0BK,UAI5BtuD,EAAG9zE,OACG,YAAX8zE,EAAGhzF,KAAgC,cAAXgzF,EAAGhzF,KAC7BiD,KAAKu+I,cAAcxuD,GAED,eAAXA,EAAGhzF,IACZiD,KAAKw+I,kBAAkBzuD,GACH,cAAXA,EAAGhzF,IACZiD,KAAKy+I,iBAAiB1uD,GACF,cAAXA,EAAGhzF,IACZiD,KAAK0+I,iBAAiB3uD,GACF,YAAXA,EAAGhzF,IACZiD,KAAK2+I,eAAe5uD,GACA,UAAXA,EAAGhzF,IACZiD,KAAK4+I,aAAa7uD,GACE,WAAXA,EAAGhzF,IACZiD,KAAK6+I,cAAc9uD,GACC,WAAXA,EAAGhzF,IACZiD,KAAK8+I,cAAc/uD,GACC,cAAXA,EAAGhzF,IACZiD,KAAK++I,iBAAiBhvD,GACF,QAAXA,EAAGhzF,IACZiD,KAAKg/I,WAAWjvD,GACW,IAAlBA,EAAGhzF,IAAI/C,QAAgBoiJ,GAAkB9tG,KAAKyhD,EAAGhzF,MAC1DiD,KAAK89I,eAAe/tD,OAIxBhwF,MAAMovC,SAGAouG,uBAAuBxtD,GAC7B,OACGA,EAAGlzE,SAAsB,YAAXkzE,EAAGhzF,KAAgC,cAAXgzF,EAAGhzF,KAAkC,eAAXgzF,EAAGhzF,KAAmC,cAAXgzF,EAAGhzF,KAAkC,SAAXgzF,EAAGhzF,KAA6B,QAAXgzF,EAAGhzF,MAAkBgzF,EAAGlpF,SAI/Jo4I,0BAA0BlvD,GAGhC,OADgC,IACzBA,EAAGnuF,UAFuB,aAE0C8R,SAASq8E,EAAGhzF,KAGjFogJ,sBAAsBptD,GAG5B,QAAIA,EAAGlzE,SAAWkzE,EAAG9zE,QAAU8zE,EAAG7zE,aAI9Blc,KAAK88I,sBAAwB98I,KAAKi/I,0BAA0BlvD,QAO5D,CAAC,SAAU,aAAar8E,SAASq8E,EAAGhzF,MAA0B,IAAlBgzF,EAAGhzF,IAAI/C,SAOzDklJ,oCACE,MAAMC,EAA+Bn/I,KAAK4/B,MAAMw/G,iBAChD,GAAID,EAAWrmD,UACTqmD,EAAWE,aAAe,EAAG,CAC/B,GAAgC,IAA5BF,EAAWE,cAAsB,QAAQ/wG,KAAK6wG,EAAWrmD,UAAW,CACtE,MAAMhhE,EAAQ93B,KAAK4/B,MAAMjG,eAEzB,OADA7B,GAAS93B,KAAK4/B,MAAM9F,aAAahC,EAAM/gB,MAAO+gB,EAAM99B,OAAS,EAAGu8B,MAAMkD,QAAQC,MACvE,EAGP,OADA15B,KAAKu8I,wBAAwBlJ,UACtB,EAIb,OAAO,EAGDmL,kBAAkBzuD,GACxB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,IAC5C2lH,EAAY3jJ,GAAUqE,KAAK4/B,MAAM+P,QAAQ7X,EAAM/gB,OAElDpb,IAAW2jJ,EAAWpI,UACpBoI,EAAWrI,MAAMp/I,MACnBmI,KAAK4/B,MAAM2/G,SAASv/I,KAAK4/B,MAAMoS,SAASstG,EAAWrI,MAAMp/I,KAAKujJ,cAAe7kH,MAAMkD,QAAQ8C,MAE7F2/G,GAA2BnsD,IAIvB0uD,iBAAiB1uD,GACvB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,IAC5C2lH,EAAY3jJ,GAAUqE,KAAK4/B,MAAM+P,QAAQ7X,EAAM/gB,OAEtD,GAAe,IAAXpb,EAAc,CAChB,GAAI2jJ,EAAWrI,MAAM10G,KAAM,CACzB,MAAMi9G,EAA8BF,EAAWrI,MAAM10G,KAC/CxrB,EAAgB/W,KAAK4/B,MAAMoS,SAASwtG,EAASpE,cAAgBoE,EAASpE,aAAalE,QACzFl3I,KAAK4/B,MAAM2/G,SAASxoI,EAAOwf,MAAMkD,QAAQ8C,MAE3C2/G,GAA2BnsD,IAIvB4uD,eAAe5uD,GACrB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,IAC5C2lH,EAAY3jJ,GAAUqE,KAAK4/B,MAAM+P,QAAQ7X,EAAM/gB,OAEtD,GAAe,IAAXpb,GAAgBqE,KAAK4/B,MAAM09G,gCAAiC,CAC9D,GAAIgC,EAAWrI,MAAM10G,KAAM,CACzB,MAAMi9G,EAA8BF,EAAWrI,MAAM10G,KAC/CxrB,EAAgB/W,KAAK4/B,MAAMoS,SAASwtG,EAASpE,cAAgBoE,EAASpE,aAAalE,QACzFl3I,KAAK4/B,MAAM2/G,SAASxoI,EAAOwf,MAAMkD,QAAQ8C,MAE3C2/G,GAA2BnsD,GAGzB/vF,KAAK4/B,MAAM6/G,2BACbvD,GAA2BnsD,GAIvB2uD,iBAAiB3uD,GACvB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,IAC5C2lH,EAAY3jJ,GAAUqE,KAAK4/B,MAAM+P,QAAQ7X,EAAM/gB,QAElDpb,IAAW2jJ,EAAWpI,SAAWl3I,KAAK4/B,MAAM09G,mCAC1CgC,EAAWrI,MAAMp/I,MACnBmI,KAAK4/B,MAAM2/G,SAASv/I,KAAK4/B,MAAMoS,SAASstG,EAAWrI,MAAMp/I,KAAKujJ,cAAe7kH,MAAMkD,QAAQ8C,MAE7F2/G,GAA2BnsD,IAGzB/vF,KAAK4/B,MAAM6/G,2BACbvD,GAA2BnsD,GAIvB6uD,aAAa7uD,GACnB,GAAI/vF,KAAKk/I,sCAAwCl/I,KAAK4/B,MAAMs9G,4BAA4B,GAAI,CAC1F,MAAMplH,EAAqB93B,KAAK4/B,MAAMjG,cAAa,GACnD35B,KAAK4/B,MAAM9F,aAAahC,EAAM/gB,MAAO,EAAGwf,MAAMkD,QAAQM,QACtD/5B,KAAKw8I,2BAA2BnJ,OAAOv7G,GAEzCokH,GAA2BnsD,GAGrB8uD,cAAc9uD,GACpB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,GACnD35B,KAAK4/B,MAAM2/G,SAASznH,EAAM/gB,MAAOwf,MAAMkD,QAAQM,QAC/C/5B,KAAK4/B,MAAM9F,aAAa95B,KAAK4/B,MAAM8/G,oBAAqB,EAAGnpH,MAAMkD,QAAQM,QACzEmiH,GAA2BnsD,GAGrB+uD,cAAc/uD,GACpB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,GACnD,GAAK35B,KAAK4/B,MAAMq9G,WAAW7B,aAAahhJ,KAGjC,GAAK4F,KAAKk/I,qCAAuCpnH,EAAM/gB,QAAU/W,KAAK4/B,MAAM+/G,kBAE5E,GAAI3/I,KAAK4/B,MAAMs9G,6BAA8B,CAClD,IAAIj1D,EAAUjoF,KAAK4/B,MAAMjG,eAAe5iB,MACnC/W,KAAK4/B,MAAMs9G,4BAA4B,KAC1Cj1D,GAAW,GAEbjoF,KAAK4/I,oBAAoB33D,GACzBi0D,GAA2BnsD,QACtB,GAAI/vF,KAAK4/B,MAAM09G,gCAAiC,CACrDt9I,KAAK4/B,MAAMq9G,WAAW1pH,QAAQ52B,UAAUg4B,OAAO,+BAC/C,MAAMszD,EAAUjoF,KAAK4/B,MAAMjG,eAAe5iB,MAC1C/W,KAAK4/I,oBAAoB33D,GACzBi0D,GAA2BnsD,SAZ3BmsD,GAA2BnsD,QAH3BmsD,GAA2BnsD,GAC3B/vF,KAAK2vI,uBAAuB0D,OAAOtjD,EAAGhzF,KAkBlCgiJ,iBAAiBhvD,GACvB,MAAMj4D,EAAqB93B,KAAK4/B,MAAMjG,cAAa,GACnD,GAAK35B,KAAK4/B,MAAMq9G,WAAW7B,aAAahhJ,MAGjC,IAAK4F,KAAKk/I,qCAAwCpnH,EAAM/gB,QAAU/W,KAAK4/B,MAAM8/G,qBAAwC,IAAjB5nH,EAAM99B,OAC/GkiJ,GAA2BnsD,QACtB,GAAI/vF,KAAK4/B,MAAMs9G,4BAA4B,GAAI,CACpD,MAAMj1D,EAAUjoF,KAAK4/B,MAAMjG,eAAe5iB,MAC1C/W,KAAK4/I,oBAAoB33D,GACzBi0D,GAA2BnsD,QACtB,GAAI/vF,KAAK4/B,MAAM09G,gCAAiC,CACrDt9I,KAAK4/B,MAAMq9G,WAAW1pH,QAAQ52B,UAAUg4B,OAAO,+BAC/C,MAAMszD,EAAUjoF,KAAK4/B,MAAMjG,eAAe5iB,MAC1C/W,KAAK4/I,oBAAoB33D,GACzBi0D,GAA2BnsD,SAZ3BmsD,GAA2BnsD,GAC3B/vF,KAAK2vI,uBAAuB0D,OAAOtjD,EAAGhzF,KAelC+gJ,eAAe/tD,GAChB/vF,KAAKk/I,qCACRhD,GAA2BnsD,GAIvBytD,YAAYztD,GAClB,MAAM+H,EAAc93F,KAAK4/B,MAAMigH,mBACzB9oI,EAAgB/W,KAAK4/B,MAAMoS,SAAS8lD,EAAYjgG,KAAKujJ,cAC3Dp7I,KAAK4/B,MAAM2/G,SAASxoI,EAAOwf,MAAMkD,QAAQ8C,MACzCv8B,KAAK4/B,MAAM/I,OAAOtD,QAAQm3C,SAAS,EAAG,GACtCwxE,GAA2BnsD,GAGrB0tD,WAAW1tD,WACjB,MAAMh5E,EAAiI,QAAjHiuD,EAAAhlE,KAAK4/B,MAAMoS,SAAShyC,KAAK4/B,MAAMkgH,iBAAiB1E,eAA0D,QAA1C3xG,EAAAzpC,KAAK4/B,MAAMkgH,iBAAiB1E,oBAAc,IAAA3xG,OAAA,EAAAA,EAAAytG,gBAAO,IAAAlyE,EAAAA,EAAI,EAC3IhlE,KAAK4/B,MAAM2/G,SAASxoI,EAAOwf,MAAMkD,QAAQ8C,MACzCv8B,KAAK4/B,MAAM/I,OAAOtD,QAAQm3C,SAAS,EAAG1qE,KAAK4/B,MAAM/I,OAAOtD,QAAQimD,cAChE0iE,GAA2BnsD,GAGrB2tD,aAAa3tD,GACnB/vF,KAAKm3H,eAAekc,SACpB6I,GAA2BnsD,GAGrBivD,WAAWjvD,GACjB/vF,KAAKy8I,mBAAmBpJ,OAAOtjD,GAC/BmsD,GAA2BnsD,GAGrB4tD,aAAa5tD,GACnB/vF,KAAK4/B,MAAM2Z,OACX2iG,GAA2BnsD,GAGrB6tD,aAAa7tD,GACnB/vF,KAAK4/B,MAAM4Z,OACX0iG,GAA2BnsD,GAGrBguD,aAAahuD,GAGnBmsD,GAA2BnsD,GAGrB8tD,kBAAkB9tD,GACxB/vF,KAAK4/B,MAAM9F,aAAa95B,KAAK4/B,MAAM8/G,oBAAqB1/I,KAAK4/B,MAAMq9G,WAAW7B,aAAalE,QAAS3gH,MAAMkD,QAAQM,QAClHmiH,GAA2BnsD,GAGrBkuD,4BAA4BluD,GAClC/vF,KAAKyvI,iBAAiB4D,OAAOtjD,GAC7BmsD,GAA2BnsD,GAGrBwuD,cAAcxuD,GACpB/vF,KAAK08I,aAAarJ,OAAOtjD,GACzBmsD,GAA2BnsD,GAGrBiuD,0BAA0BjuD,GAChC/vF,KAAKy8I,mBAAmBpJ,OAAOtjD,GAC/BmsD,GAA2BnsD,GAGrBgtD,yBAC+B,QAAvBtzG,EAAAhvC,SAASk/B,sBAAc,IAAA8P,OAAA,EAAAA,EAAE5+B,aAErC7K,KAAK28I,SAAStJ,OAAO,mBAIjB6K,yBAAyBnuD,GAC/B/vF,KAAK48I,iBAAiBvJ,OAAOtjD,GAC7BmsD,GAA2BnsD,GAGrBouD,0BAA0BpuD,GAChC/vF,KAAK68I,kBAAkBxJ,OAAOtjD,GAC9BmsD,GAA2BnsD,GAGrBqtD,qCACN,MAAMtlH,EAAQ93B,KAAK4/B,MAAMjG,eACzB,IAAK7B,EACH,OAAO,EAGT,IAAIioH,GAAyB,EAC7B,MAAMlyH,EAAM7tB,KAAK4/B,MAAMjF,YAAY7C,GAAOjK,IAI1C,QAHwB,QAApBm3C,EAAQ,QAARv7B,EAAA5b,EAAI,UAAI,IAAA4b,OAAA,EAAAA,EAAAltC,kBAAY,IAAAyoE,OAAA,EAAAA,EAAAlzD,QAAuC,QAA/B0jB,EAAmB,QAAnBonD,EAAA/uD,EAAIA,EAAI7zB,OAAS,UAAE,IAAA4iF,OAAA,EAAAA,EAAErgF,kBAAU,IAAAi5B,OAAA,EAAAA,EAAE1jB,SAC/DiuI,GAAyB,GAEpBA,EAGDH,oBAAoB33D,GAC1B,MAAO5zD,EAAM14B,GAAUqE,KAAK4/B,MAAMkQ,QAAQm4C,GAC1CjoF,KAAK4/B,MAAMxG,WAAW6uD,EAAUtsF,EAAQ04B,EAAK5X,KAAKziB,QAG5CqjJ,iBACN,GAAIr9I,KAAKk/I,oCAAqC,CAC5C,MAAMpnH,EAAqB93B,KAAK4/B,MAAMjG,cAAa,GAC7CqmH,EAAchgJ,KAAK4/B,MAAMoS,SAAShyC,KAAK4/B,MAAMq9G,WAAW7B,cACxDlE,EAAUl3I,KAAK4/B,MAAMq9G,WAAW7B,aAAaphJ,SAE/C89B,EAAM/gB,QAAUipI,IAClBloH,EAAM/gB,MAAQipI,EAAc9I,EAAU,GAExCl3I,KAAKw8I,2BAA2BnJ,OAAOv7G,KCpctC,MAAMmoH,GAAU,4ZCAjBp1H,GAAS0L,MAAMoG,OAAO,gBAEtB,MAAOujH,WAA+Br1H,GAKtCmsH,uBACF,OAAOkJ,GAAuBhzH,SAGhCvZ,iBACE,OAAO,GATFusI,GAAQhzH,SAAG,yBACXgzH,GAAO1zH,QAAG,OACV0zH,GAAStjJ,UAAG,iBCFf,MAAOujJ,WAAwBpJ,GAyCnC55I,YAAYy5F,GACV72F,MAAMogJ,GAAgBh2H,OAAOysE,IArC3BogD,uBACF,OAAOmJ,GAAgBjzH,SAGzBvZ,cAAcijF,GACZ,MAAMn/F,EAAoBsI,MAAMoqB,SAChC,IAAI6xH,EAAS,GA2Bb,MAzB4B,KAAxBplD,EAASqX,YACXx2G,EAAKiF,aAAa,KAAMk6F,EAASqX,YAIjC+tC,EADEplD,EAASR,OAASsW,GAAawkB,KACxB,iBACAt6B,EAASR,OAASsW,GAAac,QAC/B,oBAEA,mBAGX/1G,EAAKiF,aAAa,kBAAmB,SAErCjF,EAAKkF,UAAUE,IAAIm/I,GACnBvkJ,EAAKkD,UAAYi8F,EAASX,UAAYW,EAASX,UAAY,GACvDW,EAASoX,MACXv2G,EAAKkD,WAAa,uDAClBlD,EAAKk+I,QAAU,IAAel+I,EAAK0R,cAAc,IAAIH,YAAY,WAAY,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE0tF,SAAAA,OAGxHA,EAASqX,YAAsC,KAAxBrX,EAASqX,aAClCx2G,EAAKkD,WAAa,kDAClBlD,EAAKk+I,QAAU,IAAel+I,EAAK0R,cAAc,IAAIH,YAAY4tF,EAASqX,WAAa,CAAEhlG,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE0tF,SAAAA,OAE/Hn/F,GArCF0oJ,GAAQjzH,SAAG,kBACXizH,GAAO3zH,QAAG,MACV2zH,GAASvjJ,UAAG,WCJf,MAAOwjJ,WAAyBrJ,GAgBpC55I,cACE4C,MAAMqgJ,GAAiBj2H,UAbrB6sH,uBACF,OAAOoJ,GAAiBlzH,SAG1BvZ,gBACE,MAAMlc,EAAoBsI,MAAMoqB,SAIhC,OAFA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS,qBACpBjF,GCZX,IAAY0/I,GDAHiJ,GAAQlzH,SAAG,YACXkzH,GAAO5zH,QAAG,YCDnB,SAAY2qH,GACVA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,QAAA,GAAA,UAFF,CAAYA,KAAAA,GAGX,KAEK,MAAOkJ,WAA0BtJ,GAmBrC55I,YAAY0oF,GACV9lF,MAAMsgJ,GAAkBl2H,OAAO07D,IAf7BmxD,uBACF,OAAOqJ,GAAkBnzH,SAG3BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAMhC,OALA1yB,EAAKkD,UAAY,IACjBlD,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAAS2jJ,GAAkBzjJ,WAC7CnF,EAAKiF,aAAa,QAAS,qBAC3B2jJ,GAAkBjI,mBAAmBvyD,EAAUpuF,GACxCA,EAOTqhJ,kBAAkBjzD,GAChBw6D,GAAkBjI,mBAAmBvyD,EAAU7lF,KAAKuzB,SAGtD5f,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAM,yBAA2BmpF,EAASxC,MAC5D5rF,EAAKk+I,QAAU,IAAel+I,EAAK0R,cAAc,IAAIH,YAAY,oBAAqB,CAAEC,SAAS,EAAMqM,YAAY,EAAMpM,OAAQ,CAAE28E,SAAAA,OA5B9Hw6D,GAAQnzH,SAAG,oBACXmzH,GAASzjJ,UAAG,oBACZyjJ,GAAO7zH,QAAG,SCRb,MAAO8zH,WAA2BvJ,GAStC55I,YAAY0oF,GACV9lF,MAAMugJ,GAAmBn2H,OAAO07D,IAL9BmxD,uBACF,OAAOsJ,GAAmBpzH,SAO5BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAMhC,OAJA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKkF,UAAUE,IAAIyjJ,GAAmB1jJ,WACtC0jJ,GAAmBzH,oBAAoBhzD,EAAUpuF,GAE1CA,EAGTkc,iBACE,OAAO,EAGFmlI,kBAAkBjzD,GACvB7lF,KAAKo4I,mBAAmBvyD,GAGnBuyD,mBAAmBvyD,GACxBy6D,GAAmBzH,oBAAoBhzD,EAAU7lF,KAAKuzB,SAGhD5f,2BAA2BkyE,EAAoBpuF,GACrDA,EAAKkD,UAAY2lJ,GAAmBC,wBAAwB16D,GACtC,YAAlBA,EAASuQ,KACX3+F,EAAKkF,UAAUE,IAAI,gBAEnBpF,EAAKkF,UAAUg4B,OAAO,gBAIlBhhB,+BAA+BkyE,GACrC,OAAQA,EAASkzB,aACf,IAAK,eACL,IAAK,mBACH,MAAO,qBACT,IAAK,YACH,MAAO,wBACT,IAAK,SACH,MAAO,qBACT,IAAK,OACH,MAAO,mBACT,QACE,MAAO,KAvDNunC,GAAQpzH,SAAG,qBACXozH,GAAO9zH,QAAG,oBACV8zH,GAAS1jJ,UAAG,oBCIrB,MAAMwrD,GAAY7xB,MAAMoG,OAAO,qBAEzB,MAAO6jH,WAAqB7sD,GAAQm9C,GAARn9C,CAAmBvrC,KAInDjrD,YAAYyiC,EAAiBxxB,GAC3BrO,MAAM6/B,EAAOxxB,GAJfpO,KAAA28I,SAA+B,IAAIzJ,GACnClzI,KAAAygJ,uBAA0C,IAAIvN,GAK5ClzI,KAAK4/B,MAAMtoC,KAAK0P,iBAAiB,OAAQ+oF,UACvC,GAAI/vF,KAAK4/B,MAAMs9G,6BAEb,YADAhB,GAA2BnsD,IAGO,QAAvBtmD,EAAAhvC,SAASk/B,sBAAc,IAAA8P,OAAA,EAAAA,EAAE5+B,aAEpC7K,KAAK28I,SAAStJ,OAAO,gBAK3Bl7G,QAAQ/9B,GACN,GAAoB,iBAATA,EAET,OADA4F,KAAKlJ,UAAU6D,UAAYP,EACpB2F,MAAMo4B,UAGfn4B,KAAKlJ,UAAU6D,UAAYqF,KAAKlJ,UAAU6D,UACvCc,QAAQ4gJ,GAAsB,IAC9B5gJ,QAAQ,YAAa,OACrBA,QAAQ,gBAAiB,KACzBA,QAAQ,gFAAiF,IACzFA,QAAQ,+BAAgC,SAE3C,MAAMo0B,EAAqB9vB,MAAMo4B,UAEjC,OADAn4B,KAAKlJ,UAAU6D,UAAY,GACpBk1B,EAGTw4B,QAAQptD,WACN,GAAI+E,KAAK4/B,MAAMs9G,6BAEb,YADAhB,GAA2BjhJ,GAI7BA,EAAEqM,iBAEF,IAAIlN,EAAyB,QAAlBqvC,EAAAxuC,MAAAA,OAAC,EAADA,EAAGylJ,qBAAe,IAAAj3G,OAAA,EAAAA,EAAAinE,QAAQ,aACrC,MAAMiwC,EAAmC,QAAlB37E,EAAA/pE,MAAAA,OAAC,EAADA,EAAGylJ,qBAAe,IAAA17E,OAAA,EAAAA,EAAA0rC,QAAQ,cAE3C54E,EAAQ93B,KAAK4/B,MAAMjG,eAKzB,GAJIv/B,IACFA,E9NyDuB,CAAC6yF,GAA0BW,GAAmBX,EAAO,Q8NzDrE2zD,C9NuDkB,CAAC3zD,GAA0BW,GAAmBX,EAAO,U8NvDzD4zD,C9NqD8BjzD,G8NrDCxzF,E9NqDyB,Y8NlD3EA,GAAQA,EAAKJ,OAAS,GAAKwzF,GAAkBpzF,GAAMJ,OAAS,EAAG,CACjE,MAAMyiB,EAAO2mH,GAAsBhpI,GAEnC,QAAamG,IAATkc,GAAsBzc,KAAK8gJ,UAAUrkI,GAEvC,YADAzc,KAAK+gJ,qBAAqBJ,EAAiBlkI,EAAMqb,GAGnD93B,KAAK4/B,MAAMxG,WAAWtB,EAAM/gB,MAAO+gB,EAAM99B,QACzCgG,KAAK4/B,MAAMxI,UAAUuE,qBAAqB7D,EAAM/gB,MAAO0F,GACnDA,GACFzc,KAAK28I,SAAStJ,OAAO,kBAElB,GAAIsN,EAAgB,CACzB,GAA8B,KAA1BA,EAAexxI,QAAiBnP,KAAK8gJ,UAAUH,GAEjD,YADA3gJ,KAAK+gJ,qBAAqBJ,EAAgBA,EAAgB7oH,GAG5D93B,KAAK4/B,MAAMxI,UAAUuE,qBAAqB7D,EAAM/gB,MAAO4pI,GACnDA,GACF3gJ,KAAK28I,SAAStJ,OAAO,cAKnByN,UAAU7zD,SAChB,MAAMhrF,EACF,QADMwnC,EAAA+jD,GAAkBP,UACxB,IAAAxjD,OAAA,EAAAA,EAAAhuC,QAAQ,UAAW,KACpBA,QAAQ,SAAU,IAClB0T,OAIH,SAAIlN,GAAKA,EAAEjI,OAAS,GAFA,0JAEiBs0C,KAAKrsC,IAOpC8+I,qBAAqB3iB,EAA6BC,EAA6BvmG,GACrF93B,KAAKygJ,uBAAuBpN,OAAO,CAAEjV,oBAAAA,EAAqBC,oBAAAA,EAAqBvmG,MAAAA,KCrG7E,MAAOkpH,WAA2B7H,GAoBtCh8I,YAAY0oF,GACV9lF,MAAMihJ,GAAmB72H,OAAO07D,IAhB9BmxD,uBACF,OAAOgK,GAAmB9zH,SAG5BvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAKhC,OAHA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASskJ,GAAmBpkJ,WAC9CokJ,GAAmB5I,mBAAmBvyD,EAAUpuF,GACzCA,EASTqhJ,kBAAkBjzD,GAChBm7D,GAAmB5I,mBAAmBvyD,EAAU7lF,KAAKuzB,SACrDvzB,KAAK65I,eAAeh0D,GAGtBg0D,eAAeh0D,SACiB,QAA9Bp8C,EAAAzpC,KAAKihJ,iCAAyB,IAAAx3G,GAAAA,EAAEqvG,kBAAkBjzD,GAGpDlyE,0BAA0BkyE,EAAoBpuF,GAC5CA,EAAKiF,aAAa,KAAMskJ,GAAmBpkJ,UAAYipF,EAASxC,MAG9D49D,gCACF,OAAOjhJ,KAAKq5I,SAASgH,GAAkBnzH,WArClC8zH,GAAQ9zH,SAAG,qBACX8zH,GAAOx0H,QAAG,MACVw0H,GAASpkJ,UAAG,oBCJf,MAAOskJ,WAA8B/H,GAqBzCh8I,YAAYo6I,GACVx3I,MAAMmhJ,GAAsB/2H,UAC5BnqB,KAAKu3I,gBAAkBA,EAhBrBP,uBACF,OAAOkK,GAAsBh0H,SAG/BvZ,gBACE,MAAMlc,EAAoBsI,MAAMoqB,SAIhC,OAFA1yB,EAAKiF,aAAa,kBAAmB,SACrCjF,EAAKiF,aAAa,QAASwkJ,GAAsBtkJ,WAC1CnF,GAfFypJ,GAAQh0H,SAAG,wBACXg0H,GAAO10H,QAAG,MACV00H,GAAStkJ,UAAG,kBCHf,MAAOukJ,WAA+BhI,GA8B1Ch8I,YAAY0oF,GACV9lF,MAAMohJ,GAAuBh3H,OAAO07D,IAzBlCmxD,uBACF,OAAOmK,GAAuBj0H,SAGhCvZ,cAAckyE,GACZ,MAAMpuF,EAAoBsI,MAAMoqB,SAIhC1yB,EAAKiF,aAAa,QAASykJ,GAAuBvkJ,UAAY,2BAA6BipF,EAAS2yB,OAEpG,MAAM6xB,EAAQ7iI,OAAO8C,iBAAiB7P,SAAS2R,iBAAiB01E,iBAAiB,8BACjF,GAAIuoD,EAAO,CACT,MAAM54D,GAAmBoU,EAAS4mB,WAA+B,WAAlB5mB,EAASuQ,KAAoB,EAAIvQ,EAAS2yB,OAAS6xB,EAAQ,EAC1G5yI,EAAKiF,aAAa,QAAS,iBAAiB+0E,QAK9C,OAHIoU,EAASkzB,aACXthH,EAAKiF,aAAa,eAAgBmpF,EAASkzB,aAEtCthH,GAxBF0pJ,GAAQj0H,SAAG,yBACXi0H,GAAO30H,QAAG,MACV20H,GAASvkJ,UAAG,mBACZukJ,GAAUC,WAAG,QCJhB,MAAOC,WAAuBlI,GAqBlCh8I,YAAYs7G,EAAmB8+B,GAC7Bx3I,MAAMshJ,GAAel3H,OAAOsuF,EAAU8+B,IAjBpCP,uBACF,OAAOqK,GAAen0H,SAGxBvZ,cAAc8kG,EAAmB8+B,GAC/B,MAAM9/I,EAAoBsI,MAAMoqB,SAE1BqtH,EAAkBD,IAAoBJ,GAAgBM,SAAW,6BAA+B,GAItG,OADAhgJ,EAAKiF,aAAa,QAAS2kJ,GAAezkJ,UAAY46I,GAC/C//I,GAfF4pJ,GAAQn0H,SAAG,iBACXm0H,GAAO70H,QAAG,MACV60H,GAASzkJ,UAAG,mBCNf,MAAO0kJ,WAAuB/qH,MAClCp5B,YAAYokJ,EAAyB9zH,GACnC1tB,MAAMwhJ,EAAY9zH,GAGpB+zH,gBAAgBpnJ,EAAcuB,EAAgBu7I,GAC5C,MAAMuK,EAAkBzhJ,KAAK62B,OAAOj9B,SAAS86B,KAQ7C,OANA10B,KAAK0hJ,YAAY1hJ,KAAK2hJ,uBAAuBvnJ,GAAOm8B,MAAMkD,QAAQM,QAClE/5B,KAAKo5B,WAAWz9B,EAASu7I,EAASuK,EAAWznJ,SAAWk9I,EAAU,EAAG3gH,MAAMkD,QAAQM,QAE/Ep+B,EAAS,GACXqE,KAAKo5B,WAAW,EAAGz9B,EAAQ46B,MAAMkD,QAAQM,QAEpC0nH,EAAWluH,QAAQ54B,UAG5BgnJ,uBAAuBvnJ,GACrB,OAAO4F,KAAKo3B,UAAWe,QAAQ/9B,MAAAA,EAAAA,EAAQ,IAGzCwnJ,uBAAuB/xH,GAErB,OADA7vB,KAAK0hJ,YAAY7xH,EAAO0G,MAAMkD,QAAQM,QAC/B/5B,KAAK62B,OAAOj9B,SAAS86B,KAAKnB,QAAQ54B,UAGnC+mJ,YAAY7xH,EAAoBnR,SACtC,MAAM+iI,EAAkBzhJ,KAAK62B,OAAOj9B,SAAS86B,KAC7C,IAAI3d,EAAQ,EAER0qI,EAAWznJ,SAAW,GACxBgG,KAAKo5B,WAAWriB,EAAO0qI,EAAWznJ,SAAW,EAAG0kB,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAE1E/5B,KAAKw7B,WAAWzkB,EAAO,IAAKwf,MAAMkD,QAAQM,QAEjC,QAAT0P,EAAA5Z,EAAMhC,WAAG,IAAA4b,GAAAA,EAAEntC,SAASmxB,IACdA,EAAGlxB,WACLyD,KAAKw7B,WAAWzkB,EAAO0W,EAAGK,OAAQL,EAAGlxB,WAAYmiB,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAEzE/5B,KAAKw7B,WAAWzkB,EAAO0W,EAAGK,OAAQpP,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAE5DhjB,GAAS0W,EAAGK,OAAO9zB,UAErBgG,KAAKo5B,WAAWriB,EAAO,EAAGwf,MAAMkD,QAAQM,SCLtC,MAAO8nH,WAAiBtrH,MAmI5Bp5B,YAAYokJ,EAAyBO,EAAyBr0H,GAC5D1tB,MAAMwhJ,EAAY9zH,GAhGZztB,KAAmB+hJ,qBAAG,EAStB/hJ,KAAmBgiJ,qBAAG,EAatBhiJ,KAAwBiiJ,0BAAG,EASnCjiJ,KAAAkiJ,kBAAwC,IAAIhP,GAC5ClzI,KAAAmiJ,oBAA0C,IAAIjP,GA6E9ClzI,KAAAoiJ,mBAAsBryD,IACpB,IACE,IAAIljE,EAAOg1H,GAAS30I,KAAK6iF,EAAGh5F,QAC5B,GAAI,CAAC,qBAAqB2c,SAASmZ,EAAKmqH,kBACtC,OAEF,KAAOnqH,GAAkC,sBAA1BA,EAAKmqH,kBAClBnqH,EAAOA,EAAK51B,OAEd41B,GAAQA,IAAS7sB,KAAKi9I,YAAcpwH,EAAKuuH,aAAa7nH,QAAQxsB,QAC9D,MAAOyvB,MAyLXx2B,KAAAqiJ,0BAA4B,IAAInP,GACxBlzI,KAAAsiJ,kBAA4C,CAACxqH,EAAoBgR,KAGvE,MAAMy5G,EAAgBviJ,KAAKi9I,WAE3Bj9I,KAAKwiJ,cAAgBxiJ,KAAKyiJ,oBAAoB3qH,EAAOgR,GAEjD9oC,KAAKwiJ,gBACPxiJ,KAAKqiJ,0BAA0BhP,OAAOkP,GACtCviJ,KAAK0iJ,kBAID1iJ,KAAYmlF,aAAsB,KACpCnlF,KAAK2iJ,aACP1tI,YAAW,YACM,QAAfw0B,EAAAzpC,KAAKi9I,kBAAU,IAAAxzG,OAAA,EAAAA,EAAE2xG,eAAgBp7I,KAAK4iJ,iBACrC,IAjOL5iJ,KAAKu3B,GAAG,cAAev3B,KAAKmlF,cAC5BnlF,KAAKu3B,GAAG,mBAAoBv3B,KAAKsiJ,mBACjCtiJ,KAAK6iJ,OAAS,IAAIvB,GAAeQ,EAAY,IAC7C9hJ,KAAK1I,KAAK0P,iBAAiB,aAAc/L,IACvCA,EAAEqM,oBAEJtH,KAAK1I,KAAK0P,iBAAiB,QAAS/L,IAClCA,EAAEqM,oBAEJtH,KAAK1I,KAAK0P,iBAAiB,QAAShH,KAAKoiJ,oBAzIvCU,yBACF,OAAyB,UAAlB9iJ,KAAKwiJ,qBAAa,IAAA/4G,GAAAA,EAIvBs5G,oBACF,OAAO/iJ,KAAKgjJ,eAIV/F,iBACF,OAAOj9I,KAAK2iJ,YAGVjD,0BACF,OAAO1/I,KAAKi9I,WAAW7B,aAAep7I,KAAKgyC,SAAShyC,KAAKi9I,WAAW7B,cAAgB,EAGlFuE,uBACF,OAAO3/I,KAAK0/I,oBAAsB1/I,KAAKi9I,WAAW7B,aAAalE,QAG7DkI,iCACF,MAAMtnH,EAA2B,QAAnB2R,EAAAzpC,KAAK25B,sBAAc,IAAA8P,EAAAA,EAAI,CAAE1yB,MAAO,EAAG/c,OAAQ,GACnDizF,EAAgBjtF,KAAK8b,UAAUY,OAAOob,EAAM/gB,MAAO+gB,EAAM99B,QAC/D,MAAO,CACL8+F,SAAU7L,EACVoyD,aAA2C,QAA7BziE,EAAqB,QAArB5X,EAAAioB,EAAM3xF,MAAM,iBAAS,IAAA0pE,OAAA,EAAAA,EAAEhrE,cAAM,IAAA4iF,EAAAA,EAAI,GAK/CqmE,2BACF,OAAOjjJ,KAAK+hJ,oBAGVmB,uBAAmBC,GACrBnjJ,KAAK+hJ,oBAAsBoB,EAIzBC,2BACF,OAAOpjJ,KAAKgiJ,oBAGVqB,uBAAmBC,GACrBtjJ,KAAKgiJ,oBAAsBsB,EAQzB7D,gCACF,OAAOz/I,KAAKiiJ,yBAGVsB,4BAAwBC,GAC1BxjJ,KAAKiiJ,yBAA2BuB,EAQlC7vI,oBACE,MAAMsW,EAAiB43H,GAASllH,OAAO,aACjCp9B,EAAK,IAAI0qB,EAAUc,WAAWC,UAAU,KAAM,KAAM,CAAEkB,MAAOjC,EAAUC,MAAMoC,QAC7Em3H,EAAc,IAAIx5H,EAAUc,WAAWG,MAAM,cAAe,eAAgB,CAAEgB,MAAOjC,EAAUC,MAAMoC,QACrGo3H,EAAS,IAAIz5H,EAAUc,WAAWG,MAAM,SAAU,SAAU,CAAEgB,MAAOjC,EAAUC,MAAMoC,QACrFq3H,EAAc,IAAI15H,EAAUc,WAAWG,MAAM,cAAe,eAAgB,CAAEgB,MAAOjC,EAAUC,MAAMoC,QACrG7Y,EAAU,IAAIwW,EAAUc,WAAWG,MAAM,UAAW,UAAW,CAAEgB,MAAOjC,EAAUC,MAAMoC,QACxF/d,EAAY,IAAI0b,EAAUc,WAAWG,MAAM,aAAc,aAAc,CAAEgB,MAAOjC,EAAUC,MAAMoC,QAChGs3H,EAAa,IAAI35H,EAAUc,WAAWC,UAAU,aAAc,cAAe,CAAEkB,MAAOjC,EAAUC,MAAMoC,QAE9FiK,MAAMoG,OAAO,YACf,KAAIsjH,GAIhB,MAAM1tG,EAAOhc,MAAMoG,OAAO,gBAC1B4V,EAAK/lB,QAAU,IACf+J,MAAMlM,SAASkoB,GAAM,GAErB,MAAMC,EAASjc,MAAMoG,OAAO,kBAC5B6V,EAAOhmB,QAAU,IACjB+J,MAAMlM,SAASmoB,GAAQ,GAEvBqvG,GAASx3H,SAAS,oBAAqBm2H,IAAc,GACrDqB,GAASx3H,SAAS,mBAAoBiyH,IAAa,GACnDuF,GAASx3H,SAAS61H,IAAwB,GAC1C2B,GAASx3H,SAASiuH,IAAkB,GACpCuJ,GAASx3H,SAAS0uH,IAAmB,GACrC8I,GAASx3H,SAAS2uH,IAAsB,GACxC6I,GAASx3H,SAASuuH,IAAmB,GACrCiJ,GAASx3H,SAASi2H,IAAoB,GACtCuB,GAASx3H,SAASmuH,IAAiB,GACnCqJ,GAASx3H,SAASsuH,IAAe,GACjCkJ,GAASx3H,SAAS81H,IAAiB,GACnC0B,GAASx3H,SAAS+1H,IAAkB,GACpCyB,GAASx3H,SAASgtH,IAAkB,GACpCwK,GAASx3H,SAASitH,IAAqB,GACvCuK,GAASx3H,SAASqtH,IAAiB,GACnCmK,GAASx3H,SAAS+sH,IAAa,GAC/ByK,GAASx3H,SAASstH,IAAe,GACjCkK,GAASx3H,SAAS4vH,IAAmB,GACrC4H,GAASx3H,SAAS82H,IAAwB,GAC1CU,GAASx3H,SAAS62H,IAAuB,GACzCW,GAASx3H,SAASg3H,IAAgB,GAClCQ,GAASx3H,SAASuvH,IAAqB,GACvCiI,GAASx3H,SAASovH,IAAgB,GAClCoI,GAASx3H,SAAS6uH,IAAuB,GACzC2I,GAASx3H,SAAS4uH,IAAuB,GACzC4I,GAASx3H,SAAS22H,IAAoB,GACtCa,GAASx3H,SAASg2H,IAAmB,GACrCwB,GAASx3H,SAAS9qB,GAAI,GACtBsiJ,GAASx3H,SAASo5H,GAAa,GAC/B5B,GAASx3H,SAASq5H,GAAQ,GAC1B7B,GAASx3H,SAASs5H,GAAa,GAC/B9B,GAASx3H,SAAS5W,GAAS,GAC3BouI,GAASx3H,SAAS9b,GAAW,GAC7BszI,GAASx3H,SAASu5H,GAAY,GAgChCC,oBACW,QAATp6G,EAAAzpC,KAAK1I,YAAI,IAAAmyC,GAAAA,EAAE/5B,oBAAoB,QAAS1P,KAAKoiJ,oBAC7CpiJ,KAAKy7B,IAAI,cAAez7B,KAAKmlF,cAC7BnlF,KAAKy7B,IAAI,mBAAoBz7B,KAAKsiJ,mBACrB,QAAbt9E,EAAAhlE,KAAKk3B,gBAAQ,IAAA8tC,GAAAA,EAAEu3E,wBAAwBlkG,QAC1B,QAAbukC,EAAA58E,KAAKk3B,gBAAQ,IAAA0lD,GAAAA,EAAE4/D,2BAA2BnkG,QAG5CyrG,0BAA0B1I,EAA+Bz/I,EAAgBu7I,GACvE,OAAOl3I,KAAK6iJ,OAAOrB,gBAAgBpG,EAAahhJ,KAAMuB,EAAQu7I,GAGhE2I,mBACE,OAAO7/I,KAAK62B,OAAOj9B,SAAS86B,KAG9BorH,iBACE,OAAO9/I,KAAK62B,OAAOj9B,SAAS46B,KAG9BuvH,gBAAgB57C,EAAe8uC,EAA2Bj3I,KAAK6/I,oBAC7D,OAAI5I,EAAM9uC,QAAUA,EACX8uC,EAELA,EAAMp/I,KACDmI,KAAK+jJ,gBAAgB57C,EAAO8uC,EAAMp/I,WAEzC,EAIJmsJ,SAAS3gE,EAAc4zD,EAA2Bj3I,KAAK6/I,oBACrD,OAAI5I,EAAM5zD,OAASA,EACV4zD,EAELA,EAAMp/I,KACDmI,KAAKgkJ,SAAS3gE,EAAM4zD,EAAMp/I,WAEjC,EAIJosJ,cAAc5gE,GACZ,OAAO9sD,MAAMrpB,KAAKlN,KAAKkkJ,eAAejK,GAAkBW,QAAQv3D,KAAQ,GAG1Ek8D,SAASxoI,EAAe2H,EAAkB6X,MAAMkD,QAAQ8C,YACtD,MAAMzE,UAAqB2R,EAAAzpC,KAAK25B,cAAa,kBAAS,CAAE5iB,MAAO,EAAG/c,OAAQ,GAC1E,GAAI+c,IAAU+gB,EAAM/gB,OAA0B,IAAjB+gB,EAAM99B,OACjC,IACEgG,KAAK85B,aAAa/iB,EAAO,EAAG2H,GAC5B,MAAO8X,GACPx2B,KAAK85B,aAAa/iB,EAAQ,EAAG,EAAG2H,IAKtCylI,iBAAiB/I,EAA+BvrH,EAAoBnR,SAClE,IAAI3H,EAAQ/W,KAAKgyC,SAASopG,GAEtBA,EAAaphJ,SAAW,GAC1BgG,KAAKo5B,WAAWriB,EAAOqkI,EAAaphJ,SAAW,EAAG0kB,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAE5E/5B,KAAKw7B,WAAWzkB,EAAO,IAAKwf,MAAMkD,QAAQM,QAEjC,QAAT0P,EAAA5Z,EAAMhC,WAAG,IAAA4b,GAAAA,EAAEntC,SAASmxB,IACdA,EAAGlxB,WACLyD,KAAKw7B,WAAWzkB,EAAO0W,EAAGK,OAAQL,EAAGlxB,WAAYmiB,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAEzE/5B,KAAKw7B,WAAWzkB,EAAO0W,EAAGK,OAAQpP,MAAAA,EAAAA,EAAU6X,MAAMkD,QAAQM,QAE5DhjB,GAAS0W,EAAGK,OAAO9zB,UAErBgG,KAAKo5B,WAAWriB,EAAO,EAAGwf,MAAMkD,QAAQM,QAG1C4nH,uBAAuBvnJ,GACrB,OAAO4F,KAAK6iJ,OAAOlB,uBAAuBvnJ,GAG5CwnJ,uBAAuB/xH,GACrB,OAAO7vB,KAAK6iJ,OAAOjB,uBAAuB/xH,GAG5Cu0H,uBACE,MAAMrtI,EAAgB/W,KAAKgyC,SAA2B,QAAlBvI,EAAAzpC,KAAK2iJ,mBAAa,IAAAl5G,OAAA,EAAAA,EAAA5xC,KAAKujJ,cAC3Dp7I,KAAK85B,aAAa/iB,EAAO,GAG3BstI,oBAAoBC,GAClBtkJ,KAAKgjJ,eAAiBsB,EACtBA,MAAAA,GAAAA,EAAgBxI,iBAGlByI,iBAAiBC,GACXA,GAAoC,gBAArBA,EAAYpuD,OAC7Bp2F,KAAKykJ,uBAAuBD,GAC5BxkJ,KAAKmiJ,oBAAoB9O,OAAOmR,EAAYnhE,OAIhD9pC,OACyC,IAAnCv5C,KAAKq3B,QAAQqiB,MAAMH,KAAKv/C,OACrBgG,KAAKijJ,sBACRjjJ,KAAKkiJ,kBAAkB7O,OAAOwO,GAAS74B,OAGzChpH,KAAKq3B,QAAQkiB,OACbv5C,KAAK+G,SAITyyC,OACyC,IAAnCx5C,KAAKq3B,QAAQqiB,MAAMF,KAAKx/C,OACrBgG,KAAKojJ,sBACRpjJ,KAAKkiJ,kBAAkB7O,OAAOwO,GAAS54B,OAGzCjpH,KAAKq3B,QAAQmiB,OACbx5C,KAAK+G,SAIT27I,gBACEztI,YAAW,KACTjV,KAAKq3B,QAAQgB,UACZ,GAGGqsH,kBACNjqJ,SAAS0P,iBAAiB,+BAA+B7N,SAAQupF,IACjD7lF,KAAKikJ,cAAcx5I,SAASo7E,EAAStmF,GAAGmd,OAAO,GAAI,IAC3Do/H,oBAIF2G,oBAAoB3qH,EAAoBgR,GAE9C,GAAIA,GAA6B,KAAjBhR,MAAAA,OAAK,EAALA,EAAO/gB,QAAiC,KAAlB+gB,MAAAA,OAAK,EAALA,EAAO99B,QAE3C,OADAgG,KAAK85B,aAAagP,EAAS/xB,MAAO,IAC3B,EAGT,GAAI+gB,EAAO,CACT,MAAMwnH,EAAsBt/I,KAAK2vC,QAAQ7X,EAAM/gB,OAAO,GAChDytI,EAAiClF,EAAWrI,MAgBlD,GAbEqI,EAAW9yH,UAAYmrH,GAAcnrH,SACrC8yH,EAAW9yH,UAAYmsH,GAAcnsH,SACrC8yH,EAAW9yH,UAAY4qH,GAAY5qH,SACnC8yH,EAAW9yH,UAAY4zH,GAAiB5zH,SACxC8yH,EAAW9yH,UAAY8rH,GAAiB9rH,SACxC8yH,EAAW9yH,UAAY8zH,GAAmB9zH,SAC1C8yH,EAAW9yH,UAAYosH,GAAkBpsH,QAEzCxsB,KAAK85B,aAAa95B,KAAKgyC,SAASstG,EAAWrI,MAAMmE,cAAe,EAAG7kH,MAAMkD,QAAQM,QACxEulH,EAAW9yH,UAAYusH,GAAkBvsH,SAAW8yH,EAAW9yH,UAAYwsH,GAAqBxsH,SACzGxsB,KAAK85B,aAAa95B,KAAKgyC,SAASstG,EAAWrI,MAAMqE,gBAAkB,EAAG,EAAG/kH,MAAMkD,QAAQM,QAGrF+O,EAAU,CACZ,MAAM67G,EAAyB3kJ,KAAK2vC,QAAQ7G,EAAS/xB,OAAO,GAE5D,GAAI4tI,EAAe,CAGjB,GAAIH,IAFsCG,EAAc1N,MAGtD,OAAO,GAOb,OAFAj3I,KAAK0kJ,kBACL1kJ,KAAKukJ,iBAAiBC,IACf,EAET,OAAO,EAyBDN,eAAe3kJ,GACrB,OAAOS,KAAK1I,KAAK8T,cAAc,IAAI7L,KAG7BqjJ,uBACN,GAAI5iJ,KAAK2iJ,YAAa,CACpB,MAAM5rI,EAAgB/W,KAAK0/I,oBACrBzyD,EAA0E,QAA1DjoB,EAAAhlE,KAAK8b,QAAQ/E,UAAO0yB,EAAAzpC,KAAKi9I,iCAAY7B,aAAalE,gBAAQ,IAAAlyE,EAAAA,EAAI,GACpF,IAAI4/E,EAAe7tI,EAEnB,GAAIk2E,EAAM3uF,QAAQ,MAAQ,EACxB,IAAK,IAAIpE,EAAI,EAAGA,EAAI+yF,EAAMjzF,OAAQE,IAChC,GAAiB,MAAb+yF,EAAM/yF,GAAY,CACpB,MAAM2qJ,EAAkB,IAAN3qJ,GAAW+yF,EAAM/yF,EAAI,GAAGoB,MAAM,MAAQ,IAAM,IAC9DspJ,GAAgB1qJ,EAChB8F,KAAKo5B,WAAWwrH,EAAc,EAAGruH,MAAMkD,QAAQM,QAC/C/5B,KAAKw7B,WAAWopH,EAAcC,EAAWtuH,MAAMkD,QAAQM,QACvD6qH,EAAe7tI,IAOzB0tI,uBAAuBxN,GACrBj3I,KAAKujJ,yBAA0B,EAE/BvjJ,KAAK2iJ,YAAc1L,EACnBj3I,KAAK2iJ,YAAYvH,aAAa1C,QAAU14I,KAAK2iJ,YAAYvH,aAAahhJ,KACtE68I,EAAM4E,cACN77I,KAAK8kJ,iBAAiB7N,EAAM5zD,MAGtByhE,iBAAiBzhE,GACvB,MAAMrrB,EAAKh4D,KAAKkkJ,eAAejK,GAAkBW,QAAQv3D,IACzDpuE,YAAW,KACJjV,KAAK+kJ,mBAAmB/sF,IAC3Bh4D,KAAKglJ,iBAAiBhtF,KAGvB,GAGGgtF,iBAAiBhtF,SACvB,MAAMitF,EAAmBjtF,EAAGn0C,UACF,QAA1B4lB,EAAAuuB,EAAG9oD,QAAQ,qBAAe,IAAAu6B,GAAAA,EAAAihC,SAAS,EAAGu6E,GAGhCF,mBAAmB/sF,GACzB,MAAM91C,EAAO81C,EAAGpgD,wBAEVstI,EAAWltF,EAAG9oD,QAAQ,eACtBi2I,GAAeD,MAAAA,OAAQ,EAARA,EAAUttI,wBAAwBE,SAAU,EAEjE,OAAOoK,EAAKrK,KAAO,GAAKqK,EAAKpK,QAAUqtI,EAGzCjI,2BAA2Bn1D,EAAe,SACxC,MAAMjwD,EAAQ93B,KAAK25B,eACnB,GAAI7B,EAAO,CACT,MAAMjK,EAAM7tB,KAAK26B,YAAY7C,EAAM/gB,MAAQgxE,EAAc,GAAGl6D,IAC5D,SAAQA,IAAQA,EAAI,MAAgC,QAAnB4b,EAAA5b,EAAI,GAAGtxB,kBAAY,IAAAktC,OAAA,EAAAA,EAAA33B,MAEtD,OAAO,EAGTwrI,gCACE,MAAMxlH,EAAQ93B,KAAK25B,eACnB,GAAI7B,EAAO,CAET,OADiB93B,KAAK8vC,QAAQhY,EAAM/gB,OACpB,GAAG0F,OAAS4iF,GAE9B,OAAO,GAjbOwiD,GAAI74B,KAAW,OACf64B,GAAI54B,KAAW,OCtC3B,MAAOm8B,WAA2BrO,GAiBtC55I,cACE4C,MAAMqlJ,GAAmBj7H,UAbvB6sH,uBACF,OAAOoO,GAAmBl4H,SAG5BvZ,gBAKE,OAJ0B5T,MAAMoqB,UAT3Bi7H,GAAQl4H,SAAG,qBACXk4H,GAAO54H,QAAG,WCsBN64H,GAGX1xI,2BAA2BkyE,GACzB,MAAMy/D,EAA8B,IAAIrL,GAAkBp0D,GACpD0/D,EAAiC,IAAIlE,GAAex7D,EAAS4yB,SAAUz4G,KAAKu3I,iBAC5EiO,EAAqC,IAAIrE,GAAuBt7D,GAChE4/D,EAAqC,IAAIvE,GAAsBlhJ,KAAKu3I,iBA+C1E,OA7CI1xD,EAASgzB,WACX,IAAIy/B,GAAiBzyD,GAAU97C,WAAWy7G,GAG5C,IAAI7N,GAAc9xD,GAAU97C,WAAWy7G,IAED,IAAlC3/D,EAASizB,sBAAiCjzB,EAASuZ,oBAAsBP,GAAkBG,wBAC7F,IAAI45C,GAAkB/yD,GAAU97C,WAAWy7G,GAGvB,YAAlB3/D,EAASuQ,MACX,IAAIkqD,GAAmBz6D,GAAU97C,WAAWy7G,GAG1C3/D,EAAS4mB,YACX,IAAI24C,IAAqBr7G,WAAWy7G,GAGtC,IAAIhN,GAAgB3yD,GAAU97C,WAAWy7G,QAIbjlJ,IAAxBslF,EAASwyB,YAA4BxyB,EAASwyB,aAChD,IAAI0gC,GAAkBlzD,GAAU97C,WAAWy7G,GAC3C,IAAIxM,GAAqBnzD,GAAU97C,WAAWy7G,KAGhD,IAAI7M,IAAgB5uG,WAAW07G,IAG7B5/D,EAASuZ,oBAAsBP,GAAkBI,wBAChDpZ,EAASuZ,oBAAsBP,GAAkBG,wBAA0BnZ,EAASrB,SAA0C,sCAA/BqB,EAASrB,QAAQyR,YAEjHovD,GAAaK,qBAAqB7/D,GAAU97C,WAAWw7G,GAGrD1/D,EAASrB,SAAWulC,GAAmBlkC,EAASrB,UAClD6gE,GAAaM,sBAAsB9/D,GAAU97C,WAAWw7G,GAG1DC,EAAWz7G,WAAWw7G,GACtBE,EAAY17G,WAAWw7G,GAEvBA,EAAex7G,WAAWu7G,GAEnBA,EAGT3xI,6BAA6BkyE,GAC3B,MAAM+/D,EAA2C,IAAIhM,GAAoB/zD,GAIzE,OAHA,IAAIqzD,GAAsBrzD,GAAU97C,WAAW67G,GAC/C,IAAI3M,GAAsBpzD,GAAU97C,WAAW67G,GAC/C,IAAInM,GAAe5zD,GAAU97C,WAAW67G,GACjCA,EAGTjyI,4BAA4BkyE,GAC1B,MAAMggE,EAAyC,IAAI7E,GAAmBn7D,GAEtE,OADA,IAAIw6D,GAAkBx6D,GAAU97C,WAAW87G,GACpCA,EAGTlyI,+BAA+BkyE,GAC7B,MAAM0/D,EAAiC,IAAIlE,IAAe,EAAOrhJ,KAAKu3I,iBAChEuO,EAAyC,IAAI3E,GAAuBt7D,GACpE4/D,EAAqC,IAAIvE,GAAsBlhJ,KAAKu3I,iBAmB1E,OAjBI1xD,EAASsnB,WAAatnB,EAASsnB,UAAUnzG,OAAS,GACpD6rF,EAASsnB,UAAU7wG,SAASs6F,IAC1B,GAAKA,EAASqX,YAAsC,KAAxBrX,EAASqX,WAE9B,CACL,MAAM83C,EAAgBtrJ,SAAS+E,eAAe,kBAC1Co3F,EAASqX,YAAsC,KAAxBrX,EAASqX,aAAsB83C,GACxD,IAAI5F,GAAgBvpD,GAAU7sD,WAAW+7G,QAJ3C,IAAI3F,GAAgBvpD,GAAU7sD,WAAW+7G,OAS/C,IAAInN,IAAgB5uG,WAAW07G,GAC/BK,EAAevyH,QAAQ52B,UAAUE,IAAI,8BACrCipJ,EAAe/7G,WAAWw7G,GAC1BE,EAAY17G,WAAWw7G,GAEhBA,GA5FFF,GAAA9N,gBAAkBJ,GAAgBM,eCzB9BuO,GAQX7oJ,YAAYuyG,EAAM,GAAIu2C,EAAgB,GAAIC,EAAiB,GAAIC,EAAQ,GAAIC,EAAoB,GAAIztD,EAAS,IAP5G34F,KAAG0vG,IAAG,GACN1vG,KAAaimJ,cAAG,GAChBjmJ,KAAiBomJ,kBAAG,GACpBpmJ,KAAKmmJ,MAAG,GACRnmJ,KAAM24F,OAAG,GACT34F,KAAckmJ,eAAG,GAGflmJ,KAAK0vG,IAAMA,EACX1vG,KAAKimJ,cAAgBA,EACrBjmJ,KAAKomJ,kBAAoBA,EACzBpmJ,KAAKmmJ,MAAQA,EACbnmJ,KAAK24F,OAASA,EACd34F,KAAKkmJ,eAAiBA,EAGjBt3D,SACL,OAAO5uF,KAAK0vG,IAAI7gG,MAAM,KAAK,GAGtBunF,OACL,OAAOp2F,KAAK0vG,IAAI7gG,MAAM,KAAK,GAGtBw3I,QACL,OAAOrmJ,KAAK0vG,IAAI7gG,MAAM,KAAK,GAAGA,MAAM,KAAK,GAGpC81B,OACL,MAAM2hH,EAAatmJ,KAAKqmJ,QACxB,OAAO,IAAIpnJ,KAAKqnJ,GAGXC,eACL,M1EjC0B,CAACxjF,GACtB,CAAC8gB,GAAa9gB,EAAKghB,WAAYF,GAAa9gB,EAAK+gB,WAAa,GAAI/gB,EAAK6gB,eAAe70E,KAAK,K0EgCzFy3I,CAAexmJ,KAAK2kC,SCjC/B,IAAa8hH,GAAb,cAAuCrrF,GAAvCj+D,kCAEE6C,KAAWs4B,YAAG,GAEdt4B,KAAKi1C,MAAG,GAERj1C,KAAKjI,MAAa,GAGlBiI,KAAQ5G,UAAG,EAGX4G,KAAMqI,QAAG,EAGTrI,KAAKa,OAAG,EAGRb,KAAc0mJ,eAAG,GAGjB1mJ,KAAA2mJ,SAAYhwJ,GAAwBmK,QAAQq+B,IAAI,oBAAqBxoC,GAGrEqJ,KAAA4mJ,SAAYjwJ,GAAwBmK,QAAQq+B,IAAI,oBAAqBxoC,GAGrEqJ,KAAA28I,SAAYhmJ,GAAwBmK,QAAQq+B,IAAI,iBAAkBxoC,GAElEqJ,KAAS6mJ,UAAG,IAIZ7mJ,KAAM8mJ,OAAQ,GAQd9mJ,KAAK+mJ,OAAG,EAER/mJ,KAAWgnJ,aAAG,EAEdhnJ,KAAOinJ,QAAG,KACR,MAAMtwJ,MAAEA,GAAUqJ,KAAKknJ,eACnBlnJ,KAAKa,OACPoY,aAAajZ,KAAKmnJ,SACdxwJ,EAAMqD,QAAU,IAAMgG,KAAKa,SAC7Bb,KAAKmnJ,OAASlyI,YACZ,KACEjV,KAAK2mJ,SAAShwJ,KAEhBqJ,KAAKa,MAAQb,KAAK6mJ,UAAY,KAIlC7mJ,KAAK2mJ,SAAShwJ,IAIlBZ,eACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBA8CG4F,KAAKi1C;wBACCj1C,KAAKs4B;oBACE,UAAZt4B,KAAKrJ,aAAO,IAAA8yC,OAAA,EAAAA,EAAA29G,cAAe;oBAC1BnsJ,GAAK+E,KAAKqnJ,cAAcpsJ,EAAElE,OAAOJ;sBAC/BqJ,KAAK5G;;;;wCAIa4G,KAAKqI,sBAAsBrI,KAAKsnJ,qCAAqCtnJ,KAAKunJ;YACtGvnJ,KAAKjI,MAAMoG,KAAK/F,GAAiBgC,EAAI,cAAc,IAAY4F,KAAKsmE,aAAaluE,MAASA,EAAKgvJ;;;MASrGF,qBACF,GAAIlnJ,KAAKwnJ,SAAU,OAAOxnJ,KAAKwnJ,SAC/B,IAAKxnJ,KAAK6yD,WAAY,OAEtB,MACM40F,EADcznJ,KAAK5J,WAAYoJ,eAAe,kBAClB49D,mBAElC,OADAp9D,KAAKwnJ,SAAWC,EAAcztJ,OAASytJ,EAAc,GAAKznJ,KAAK5J,WAAYoJ,eAAe,gBACnFQ,KAAKwnJ,SAOV7wJ,YACF,OAAOqJ,KAAKknJ,gBAAkBlnJ,KAAKknJ,eAAevwJ,MAOhDA,UAAMA,GACHqJ,KAAKknJ,eAKVlnJ,KAAKknJ,eAAevwJ,MAAQA,EAJ1BqJ,KAAK0nJ,WAAa/wJ,EAOtB++D,eACE11D,KAAK2nJ,cAAgB3nJ,KAAK5J,WAAYoJ,eAAe,eACrDQ,KAAK2nJ,cAAc7qJ,MAAM2iB,MAAQ,GAAGzf,KAAKknJ,eAAetvI,wBAAwB6H,UAEhFzf,KAAK8mJ,OAAOviE,UAAYvkF,KAAK4nJ,eAAe5oI,KAAKhf,MACjDA,KAAK8mJ,OAAOe,QAAU7nJ,KAAK8nJ,aAAa9oI,KAAKhf,MAC7CA,KAAK8mJ,OAAOiB,QAAU/nJ,KAAKgoJ,aAAahpI,KAAKhf,MAC7CA,KAAK8mJ,OAAOmB,OAASjoJ,KAAKkoJ,YAAYlpI,KAAKhf,MAC3CA,KAAK8mJ,OAAOnK,SAAW38I,KAAKqnJ,cAAcroI,KAAKhf,MAE/CA,KAAKknJ,eAAelgJ,iBAAiB,UAAWhH,KAAK8mJ,OAAOviE,WAC5DvkF,KAAKknJ,eAAelgJ,iBAAiB,QAAShH,KAAK8mJ,OAAOe,SAC1D7nJ,KAAKknJ,eAAelgJ,iBAAiB,QAAShH,KAAK8mJ,OAAOiB,SAC1D/nJ,KAAKknJ,eAAelgJ,iBAAiB,OAAQhH,KAAK8mJ,OAAOmB,QACzDjoJ,KAAKknJ,eAAelgJ,iBAAiB,WAAYhH,KAAK8mJ,OAAOnK,eAErCp8I,IAApBP,KAAK0nJ,aACP1nJ,KAAKknJ,eAAevwJ,MAAQqJ,KAAK0nJ,YAIrC3jI,uBACO/jB,KAAKknJ,iBACVlnJ,KAAKknJ,eAAex3I,oBAAoB,UAAW1P,KAAK8mJ,OAAOviE,WAC/DvkF,KAAKknJ,eAAex3I,oBAAoB,QAAS1P,KAAK8mJ,OAAOe,SAC7D7nJ,KAAKknJ,eAAex3I,oBAAoB,QAAS1P,KAAK8mJ,OAAOiB,SAC7D/nJ,KAAKknJ,eAAex3I,oBAAoB,OAAQ1P,KAAK8mJ,OAAOmB,QAC5DjoJ,KAAKknJ,eAAex3I,oBAAoB,WAAY1P,KAAK8mJ,OAAOnK,WAGlE51I,MAAMqH,GACApO,KAAKknJ,gBACPlnJ,KAAKknJ,eAAengJ,MAAMqH,GAI9BunD,QAAQ92D,GACFA,EAAQ0mD,IAAI,WACdvlD,KAAKjI,MAAMiC,OAAS,GAA4B,IAAtBgG,KAAKjI,MAAMiC,QAAgBgG,KAAKjI,MAAM,KAAOiI,KAAKknJ,eAAevwJ,MAASqJ,KAAK8I,OAAS9I,KAAKuI,SAGrH1J,EAAQ0mD,IAAI,WAAavlD,KAAKqI,QAAUrI,KAAK2nJ,cAAcQ,oBAG7DnoJ,KAAKooJ,eAAiBpoJ,KAAK2nJ,cAAc/tJ,SAAS,GAClDoG,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAOtCiM,OACyC,QAAnC9I,KAAK2nJ,cAAc7qJ,MAAM2iB,QAC3Bzf,KAAK2nJ,cAAc7qJ,MAAM2iB,MAAQ,GAAGzf,KAAKknJ,eAAetvI,wBAAwB6H,WAG9Ezf,KAAKjI,MAAMiC,SACbgG,KAAKqI,QAAS,GAOlBE,QACEvI,KAAKqI,QAAS,EACdrI,KAAKooJ,eAAiB,KAOxB9hF,aAAa3vE,GACXqJ,KAAKknJ,eAAevwJ,MAAQA,EAC5BqJ,KAAK4mJ,SAASjwJ,GACdqJ,KAAKuI,QAGP8/I,iBACOroJ,KAAKooJ,gBAAmBpoJ,KAAKooJ,eAAeE,yBAEjDtoJ,KAAKooJ,eAAezrJ,UAAUg4B,OAAO,UACrC30B,KAAKooJ,eAAiBpoJ,KAAKooJ,eAAeE,uBAC1CtoJ,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAGpC0rJ,iBACOvoJ,KAAKooJ,gBAAmBpoJ,KAAKooJ,eAAe7+F,qBAEjDvpD,KAAKooJ,eAAezrJ,UAAUg4B,OAAO,UACrC30B,KAAKooJ,eAAiBpoJ,KAAKooJ,eAAe7+F,mBAC1CvpD,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAIpCwqJ,cAAc1wJ,GACZqJ,KAAK28I,SAAShmJ,GAGhBixJ,eAAe73D,GAEE,YAAXA,EAAGhzF,KAAgC,cAAXgzF,EAAGhzF,MAC7BgzF,EAAGzoF,iBACHyoF,EAAGtyE,mBAIPqqI,aAAa/3D,WACX,OAAQA,EAAGhzF,KACT,IAAK,WACoB,UAAnBiD,KAAKooJ,sBAAc,IAAA3+G,OAAA,EAAAA,EAAE6+G,0BACvBv4D,EAAGzoF,iBACHyoF,EAAGtyE,kBACHzd,KAAKqoJ,kBAEP,MACF,IAAK,aACoB,UAAnBroJ,KAAKooJ,sBAAc,IAAApjF,OAAA,EAAAA,EAAEzb,sBACvBwmC,EAAGzoF,iBACHyoF,EAAGtyE,kBACHzd,KAAKuoJ,kBAEP,MACF,IAAK,QAEHvoJ,KAAKooJ,gBAAkBpoJ,KAAKooJ,eAAejsG,QAC3Cn8C,KAAKknJ,eAAeh0I,OACpB,MACF,QACElT,KAAKinJ,WAIXe,eACEhoJ,KAAK+mJ,OAAQ,EAEb/mJ,KAAKjI,MAAMiC,OAAS,GAAKgG,KAAK8I,OAGhCo/I,cACEloJ,KAAK+mJ,OAAQ,EAEb9xI,YAAW,IAAMjV,KAAKuI,SAAS,KAKjC++I,wBACEtnJ,KAAKgnJ,aAAc,EAGrBO,wBACEvnJ,KAAKgnJ,aAAc,EAEnBhnJ,KAAK+mJ,OAAS9xI,YAAW,IAAMjV,KAAKuI,SAAS,OAxT/CirF,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACD6rJ,GAAAxuJ,UAAA,mBAAA,GAEjBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACP6rJ,GAAAxuJ,UAAA,aAAA,GAEXu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAM7qB,MAAOy6D,SAAS,KACbg0F,GAAAxuJ,UAAA,aAAA,GAGrBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,QAASO,SAAS,KACnBg0F,GAAAxuJ,UAAA,gBAAA,GAGjBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,QAASO,SAAS,KACrBg0F,GAAAxuJ,UAAA,cAAA,GAGfu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,QAASO,SAAS,KACvBg0F,GAAAxuJ,UAAA,aAAA,GAGbu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMrb,UACEi/I,GAAAxuJ,UAAA,sBAAA,GAGpBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMuP,YAC0Dq0H,GAAAxuJ,UAAA,gBAAA,GAG5Eu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMuP,YAC0Dq0H,GAAAxuJ,UAAA,gBAAA,GAG5Eu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMuP,YACuDq0H,GAAAxuJ,UAAA,gBAAA,GA0HzEu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UAQjB6rJ,GAAAxuJ,UAAA,QAAA,MA5JUwuJ,GAAiBjzD,GAAA,CAD7B0+C,GAAc,uBACFuU,UA8TA+B,GAIXrrJ,YAAYxG,EAAOywJ,GACjBpnJ,KAAKonJ,YAAcA,EACnBpnJ,KAAKrJ,MAAQA,GClUjB,IAAa8xJ,GAAb,cAAuCrtF,GAAvCj+D,kCAEE6C,KAAU0oJ,WAAG,GAOb1oJ,KAAA4mJ,SAAYjwJ,MAIZqJ,KAAA2oJ,eAAwB,IAAI3C,GAG5BhmJ,KAAa4oJ,cAAa,GAE1B5oJ,KAAO6oJ,QAAY,GAKnBhoJ,oBAAoBupB,GAClB,IACE,MAAM0+H,QAAkB/gF,MAAM,GAAG/nE,KAAKq0F,yBAAyBjqE,KAE/D,aADsB0+H,EAAUroB,QACjBtiI,KAAI8qB,GAAK,IAAI+8H,GAAM/8H,EAAEymF,IAAKzmF,EAAEg9H,cAAeh9H,EAAEi9H,eAAgBj9H,EAAEk9H,MAAOl9H,EAAEm9H,kBAAmBn9H,EAAE0vE,UAC5G,MAAO/iE,GACP90B,QAAQq+B,IAAI,0CACZr+B,QAAQq+B,IAAIvJ,GAEd,OAAOp0B,QAAQC,QAAQ,IAGzBsnJ,cAAcC,GACZ,MAAM5+H,EAAQ4+H,EACXvtJ,QAAQ,cAAe,KACvBgjH,WAAW,IAAK,IAChB7nH,cACHoJ,KAAKipJ,cAAc7+H,GAAO7a,MAAK25I,IAC7BlpJ,KAAK6oJ,QAAUK,EACflpJ,KAAK4oJ,cAAgBM,EAAO/qJ,KAAI8qB,GAAK,IAAIu/H,GAAOv/H,EAAEymF,IAAKzmF,EAAEg9H,oBAI7DkD,cAAcxyJ,GACZqJ,KAAK+oJ,cAAcpyJ,GAGrByyJ,cAAcj7I,GACZ,MAAM8oF,EAAQj3F,KAAK6oJ,QAAQ37I,MAAK+pF,GAASA,EAAMyY,MAAQvhG,EAAOxX,QAC1DsgG,IACFj3F,KAAK2oJ,eAAiB1xD,EACtBj3F,KAAK4mJ,SAAS5mJ,KAAK2oJ,iBAIvBU,eAAe35C,GACb,MAAMzY,EAAQ,IAAI+uD,GAAMt2C,GAClBtlF,EAAQ,GAAG6sE,EAAMovD,WAAWpvD,EAAMrI,WACxC5uF,KAAKipJ,cAAc7+H,GAAO7a,MAAK25I,IAC7BlpJ,KAAK2oJ,eAAiBO,EAAOh8I,MAAK+b,GAAKA,EAAEymF,MAAQA,IACjD1vG,KAAK4mJ,SAAS5mJ,KAAK2oJ,gBACnB3oJ,KAAKspJ,mBAAmB3yJ,MAAQqJ,KAAK2oJ,eAAe1C,iBAIxDvwF,eACM11D,KAAK0oJ,YACP1oJ,KAAKqpJ,eAAerpJ,KAAK0oJ,YAE3B1oJ,KAAKupJ,oBAGPA,oBACEt0I,YAAW,KACTjV,KAAKspJ,mBAAmBviJ,UACvB,KAILsgJ,cAAc1wJ,GAEZqJ,KAAK2oJ,eAAiB,IAAI3C,GAC1BhmJ,KAAK4mJ,SAAS5mJ,KAAK2oJ,gBAGrB5yJ,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBA4BI4F,KAAK4oJ;sBACFjyJ,GAASqJ,KAAKmpJ,cAAcxyJ;sBAC5BA,GAASqJ,KAAKopJ,cAAczyJ;sBAC5BA,GAASqJ,KAAKqnJ,cAAc1wJ;;;;0DAIQqJ,KAAK2oJ,eAAehwD,QAAU,IAAI16E,MAAM,EAAG;gBC7H9Fpd,eAAe2oJ,GAA0B3jE,EAAoBjmD,EAAYg0D,EAAYumB,EAAa9lB,mBACvG,MAAM4gD,EAAax6I,SAASC,cAAc,aAE1CD,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ,mCACnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,+6BA2CTmN,2iCAwBvD,IAAIo1D,EAAwB,IAAIzD,GAChC,MAAM0D,EAAoBlvJ,EAAQ4Q,cAAc,eAC1C8rF,EAAe18F,EAAQ4Q,cAAc,iBACrCsqI,EAASl7I,EAAQ2P,iBAAiB,aAClCw/I,EAAWjU,EAAO,GAClBztE,EAAKytE,EAAO,GACZ/+C,EAASn8F,EAAQ4Q,cAAc,YAC/Bw+I,EAAiBjzD,EAAQvrF,cAAc,UACvCy+I,EAAoBlzD,EAAQvrF,cAAc,QAE1C0+I,EAAiB,CAAClzD,EAAW,mBAAoB6rB,EAAc,iCACnEmnC,EAA2B,UAAIhzD,EAC/BizD,EAA8B,UAAIpnC,GAGpCinC,EAA6B,SAAKzyD,IAChCwyD,EAAiBxyD,GAGnBhvB,EAAG0tE,QAAU,KACX,IAAIoU,GAAU,EACd,MAAMx0B,EAAoBr+B,MAAAA,OAAA,EAAAA,EAAmCvgG,MAI7D,GAFAmzJ,IAEKL,EAAe/5C,IAGb,GAAI6lB,GAAoBA,EAAiBv7H,OAAS,EACvD,I7GVGisH,G6GW2BsP,E7GXQ1V,GAAgByE,KAAqBntB,GAAgBY,OAAO3B,O6GYhG,MAAOxgE,GACPk0H,EAAe,yCAA0C,6GACzDC,GAAU,OAGZD,EAAe,iDAAkD,6GACjEC,GAAU,OAXVD,EAAe,kBAAmB,yCAClCC,GAAU,EAaPA,EAQHpzD,MAAAA,GAAAA,EAAQrqC,QAPR1sB,EAAM74B,QACN4vF,MAAAA,GAAAA,EAAQx7C,OACR85F,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,SACZkxD,EAASoR,MAAQwyD,EAAe/5C,IAChC9b,EAAM69C,SAASt3B,EAAOjkB,QAAQrQ,EAAU4jE,EAAe/5C,IAAK6lB,MAMhEo0B,EAAShU,QAAU,KACjB/1G,EAAM74B,QACNkuI,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAEdiL,EAAM1sB,aACA+hI,EAAW3yG,YAAY9nC,SACvBy6I,EAAW3oF,OACjB,MAAM09F,UAAkBh0C,EAIpB,QAJoBvgF,YAGpB,QAHoBmnD,UAAA5X,EAEpB,UAFoBvqE,SACrB2Q,cAAc,sBACb,IAAAq+B,OAAA,EAAAA,EAAArzC,iCAAYgV,cAAc,+BAC1B,IAAAwxE,OAAA,EAAAA,EAAAxmF,iCAAYgV,cAAc,wBAC1B,IAAAqqB,OAAA,EAAAA,EAAAr/B,iCAAYgV,cAAc,UAC9B4+I,MAAAA,GAAAA,EAAiBjjJ,QD5IjBysF,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACF6tJ,GAAAxwJ,UAAA,kBAAA,GAGhBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACF6tJ,GAAAxwJ,UAAA,uBAAA,GAIhBu7F,GAAA,CAFChgF,GAAS,CAAEqP,KAAMuP,YAEoBq2H,GAAAxwJ,UAAA,gBAAA,GAItCu7F,GAAA,CADCl9F,MACmCmyJ,GAAAxwJ,UAAA,sBAAA,GAGpCu7F,GAAA,CADCl9F,MAC4BmyJ,GAAAxwJ,UAAA,qBAAA,GAK7Bu7F,GAAA,CADCppE,GAAM,yBACgCq+H,GAAAxwJ,UAAA,0BAAA,GArB5BwwJ,GAAiBj1D,GAAA,CAD7B0+C,GAAc,uBACFuW,IEHN,MAwDDwB,GAAqBpkE,IACrBA,EAASrB,SACwB,yBAA/BqB,EAASrB,QAAQyR,gBC1DZi0D,GAAb/sJ,cAKE6C,KAAUmqJ,YAAG,GAGf,MAEaC,GAA0BrsJ,IACrC/F,MAAMqS,KAAK5P,SAAS0P,iBAAiB,8BAA8B7N,SAAQ07D,GAAMv9D,SAASyP,KAAKuB,YAAYusD,KAE3G,MAAMi9E,EAAax6I,SAASC,cAAc,aAC1Cu6I,EAAW11I,GAAK,2BAEhB9E,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ,uCAYnBggG,EAAWjuI,iBAAiB,iBAAiB,KAC3CiO,YAAW,IAXK,MAChB,IACElX,EAAK6hC,OAAS7hC,EAAK6hC,MAAM74B,QACzBkuI,MAAAA,GAAAA,EAAY95F,OACZ1gD,SAASyP,KAAKuB,YAAYwpI,GAC1B,MAAOz+G,MAMQ6zH,IAAa,MAKhC,MAAMC,KAFNvsJ,EAAOwsJ,GAAiBxsJ,IAEKysJ,kBAE7B,IAAIC,EAAsB58D,GAAgB9vF,EAAK83H,cAAe93H,EAAK+3H,WAAY,aAC3E40B,EAAgCD,EAAoBhvJ,QAAQ,OAAQ,KACxEgvJ,EAAsBv8D,GAAiCL,GAAgB68D,EAA+BD,EAAqB,aAAc,CAAC,MAAO,QAEjJ,MAAME,EAAiB5sJ,EAAKosJ,YAAcM,IAAwB1sJ,EAAK83H,cAAoF,GAApE,kEACjF+0B,EAAuBN,EAAgB,+EAAiF,GAE9H,IAAIO,EAA6CP,EAAgBz8D,GAAgB9vF,EAAKysJ,kBAAmBzsJ,EAAK+3H,WAAY,kBAAev1H,EACrI+pJ,IACFI,EAAgCG,EAA4CpvJ,QAAQ,OAAQ,KAC5FovJ,EAA6C38D,GAC3CL,GAAgB68D,EAA+BG,EAA6C,aAC5F,CAAC,MAAO,SAIZ9sJ,EAAK83H,cAAgBznC,GAAiCrwF,EAAK83H,eAC3D93H,EAAK+3H,WAAa1nC,GAAiCrwF,EAAK+3H,YACpDw0B,IACFvsJ,EAAKysJ,kBAAoBp8D,GAAiCrwF,EAAKysJ,oBAEjE,MAAMM,EACH/sJ,EAAKosJ,YAAcM,IAAwB1sJ,EAAK83H,cA+B7C,GA9BA,yNAOM93H,EAAK83H,qOASL40B,yNASA1sJ,EAAK+3H,0EAOXi1B,EAA4BT,EAC9B,oPAOUvsJ,EAAKysJ,yPASLK,2OASA9sJ,EAAK+3H,gFAKf,GAEEt7H,EAAUC,SAASwsC,cAAcigD,yBAAyB,+wCAqE1DyjE,YACAC,cAEAE,YACAC,6GAQSvwJ,EAAQ2P,iBAAiB,aAAa,GAE9CwrI,QAAU,IAAqBV,MAAAA,OAAA,EAAAA,EAAY95F,OAElDp9C,EAAK6hC,OAAS7hC,EAAK6hC,MAAM1sB,OACzB+hI,EAAW3yG,YAAY9nC,GACvBy6I,EAAW3oF,QAGPi+F,GAAoBxsJ,IACpBA,EAAK+3H,WAAWpiH,SAAS,UAC3B3V,EAAK+3H,WAjNO,wBAmNP/3H,GC9NIitJ,GAAep0D,IAC1B,MAAMq0D,EAAU,aAGhB,IAFqBxwJ,SAAS+E,eAAeyrJ,GAE1B,CACjB,MAAMC,EAAQvtJ,OAAOqD,OAAOvG,SAASC,cAAc,YAAa,CAC9D4mE,QAAS,SACT6pF,UAAU,EACV5jI,SAAU,IACV5sB,UAAW,qGAELi8F,gBAGRn8F,SAASyP,KAAKlN,OAAOkuJ,GACrBA,EAAME,UC6DG,IAAAC,GAAb,cAAqC13D,GAAQm9C,GAARn9C,CAAmBv4B,KAiCtDj+D,cACE4C,QAjC0BC,KAAAiyI,eAAoC,IAAI99C,GAiB5Dn0F,KAAAo6G,KAAOvZ,GAAuB2e,OAO9Bx/G,KAAesrJ,gBAAgB,GAE/BtrJ,KAAUurJ,WAAmB,GAG7BvrJ,KAAgBwrJ,iBAAG,iBACnBxrJ,KAAyByrJ,0BAAG,wBA6CpCzrJ,KAA2B0rJ,6BAAG,EAoJtB1rJ,KAAiBsiJ,kBAA2B,CAACxqH,EAAoBgR,EAAuBpqB,KACxE,KAAlBoZ,MAAAA,OAAA,EAAAA,EAAO99B,SAAgB0kB,IAAW6X,MAAMkD,QAAQ8C,MAClDv8B,KAAK2rJ,wBA4mCD3rJ,KAAA4rJ,eAAkBtzJ,IACxBA,EAAMiP,2BACNvH,KAAK6rJ,qBAGC7rJ,KAAA8rJ,sBAAyBxzJ,IAC/BA,EAAMiP,2BACNvH,KAAK+rJ,oBAAoBzzJ,EAAM4Q,OAAO28E,WAGhC7lF,KAAAgsJ,yBAA4B1zJ,IAClCA,EAAMiP,2BACNvH,KAAKisJ,yBAAyB3zJ,EAAM4Q,OAAO28E,WAGrC7lF,KAAAksJ,iBAAoB5zJ,YAC1BA,EAAMiP,2BAEN,MAAM0vI,EAA2Bj3I,KAAK4/B,MAAMq9G,WAE5C,GAAIhG,EACF,GAAItqC,GAAQsJ,yBAAkD,UAAV,QAAdxsE,EAAAnxC,EAAM4Q,cAAQ,IAAAugC,OAAA,EAAAA,EAAAmtD,gBAAU,IAAA5xB,OAAA,EAAAA,EAAAixB,WAC5Dj2F,KAAK6rJ,wBACA,CACL,MAAMzQ,EAAgCnE,EAAMmE,aACtCv1D,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAMglD,EAAahhJ,KAAM68I,EAAMroD,OAAQqoD,EAAMvsC,YACzIomC,GAAUW,SAASt2C,GAAcjF,QAAQrQ,EAAUvtF,EAAM4Q,OAAO0tF,aAK9D52F,KAAAosJ,uBAA0B9zJ,IAChCA,EAAMiP,2BACNvH,KAAKyqI,eAAenyI,EAAM4Q,OAAO28E,WAG3B7lF,KAAAqsJ,wBAA2B/zJ,IACjCA,EAAMiP,2BACNvH,KAAK+qI,gBAAgBzyI,EAAM4Q,OAAO28E,WAsK5B7lF,KAAAssJ,0BAA6BC,IACnC,MAAM3jD,EAAuB,WAAZ2jD,EAAuB,OAAS,OACjD,IAAItV,EAAQj3I,KAAK4/B,MAAMq9G,WAKvB,IAJIhG,EAAMpxD,SAASrB,UACjByyD,EAAQA,EAAMruC,IAGTquC,IAAUA,EAAMpxD,SAASrB,SAC9ByyD,EAAQA,EAAMruC,GAGZquC,IACFj3I,KAAK4/B,MAAMykH,oBAAoBrkJ,KAAK4/B,MAAMq9G,YAC1Cj9I,KAAK4/B,MAAM2kH,iBAAiBtN,KAIxBj3I,KAA2BwsJ,4BAAG,KACpC,MAAMC,EAA2BhyJ,SAAS+E,eAAeQ,KAAKwrJ,kBAC9D5gC,GAAkB6hC,EAA0B3b,GAAU78C,WAAWu5C,gBAAgB9oD,YAG3E1kF,KAAA0sJ,kCAAqCp0J,WACE,QAAfmxC,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IACtCntC,SAASupF,IAClB,MAAMyS,EAAY79F,SAAS+E,eAAe,qBAAuBqmF,EAASxC,MAEtEiV,IACEzS,EAASrB,SAA0C,yBAA/BqB,EAASrB,QAAQyR,UACvCqC,EAAU57F,aAAa,kBAAmB,SAE1C47F,EAAU57F,aAAa,kBAAmB,aAthDhDsD,KAAKpI,UAAY,EAdPgoC,YACV,OAAO5/B,KAAK2sJ,OAgBdp4F,mBACE,OAAOv0D,KAGTa,qBACEb,KAAK4sJ,YAAY5sJ,KAAK6sJ,gBACtB7sJ,KAAKmK,iBAAiB,oCAAoC7N,SAAQwwJ,IAChEA,EAAK9lJ,iBAAiB,SAAU1O,IAC9BA,EAAMiP,iCAKZysF,aAAa19F,aACN0J,KAAK4/B,OAIV5/B,KAAK4/B,MAAOsjH,mBAAmE,eAA7C5sJ,EAAMk3I,gBAAgBnzB,oBAAQ,IAAIrgH,OACpEgG,KAAK4/B,MAAOyjH,mBAAqE,eAA/C/sJ,EAAMk3I,gBAAgBjzB,sBAAU,IAAIvgH,OAElE1D,EAAMk3I,gBAAgBhzB,KACpBlkH,EAAMk3I,gBAAgBhzB,GAAG5uF,QAE3Bo/H,GAAY10J,EAAMk3I,gBAAgBhzB,GAAG5uF,QAAQqqE,WACc,wBAAhB,QAAlCrZ,EAAAtmF,EAAMk3I,gBAAgBhzB,GAAGhjF,OAAO,UAAE,IAAAolD,OAAA,EAAAA,EAAE69B,YAC7Cz6G,KAAK+sJ,qBAAqBz2J,EAAMk3I,gBAAgBhzB,GAAGhjF,UAXrDx3B,KAAKgtJ,qBAAqB12J,GAgB9BytB,uBACE/jB,KAAKurJ,WAAWjvJ,SAASpC,GAAoBA,EAAEqiD,WAC/Cv8C,KAAKitJ,eACLltJ,MAAMgkB,uBAMRhuB,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BA+BY4F,KAAKktJ;;;;;;;2BAOLltJ,KAAKmtJ;;;;;;;;;;;;;;;;;;;yBAmBPntJ,KAAKwrJ;yCACWxrJ,KAAKyrJ;kBAC5BzrJ,KAAKo6G;;;;mGAI4E,IAAYp6G,KAAKssJ,0BAA0B;;;;mGAI3C,IAAYtsJ,KAAKssJ,0BAA0B;;;;YAIlItsJ,KAAK0rJ,4BAA8B1rJ,KAAKotJ,sCAAwC;;wCAEpDptJ,KAAKqtJ,2BAA2B;;+EAEOrtJ,KAAKstJ;;;;2EAITttJ,KAAKutJ;;;;mEAIbvtJ,KAAKwtJ;;;;;;;;;;;;;;;;MAmB9DJ,sCACN,OAAOhzJ,EAAI;6GAC6F,YAAe,IAAY4F,KAAKytJ;;;;kHAI3B,YAAe,IAAYztJ,KAAK0tJ;;;MAMvIH,iBACNvtJ,KAAK2tJ,WAAWrhG,OAGVkhG,mBACNxtJ,KAAK4tJ,aAAathG,OAGZghG,yBACNttJ,KAAK6tJ,mBAAmBvhG,OAGlBwhG,4BAC+B,QAAvBrkH,EAAAhvC,SAASk/B,sBAAc,IAAA8P,OAAA,EAAAA,EAAE5+B,aAErC7K,KAAK+tJ,6BAA6B,WAI9Bb,cACNltJ,KAAK4/B,MAAM2Z,OAGL4zG,cACNntJ,KAAK4/B,MAAM4Z,OAGL6zG,oBAUA1B,uBACN,MAAMqC,EAAcvzJ,SAAS2Q,cAAc,gBACrCqpC,EAAOu5G,MAAAA,OAAW,EAAXA,EAAavxJ,aAAa,QACvC,GAAIg4C,MAAAA,OAAA,EAAAA,EAAM3b,WAAW,OAAQ,CAC3B,MAAMqb,EAAM,8BAAgCM,EAC5Cu5G,EAAatxJ,aAAa,OAAQy3C,GAClC65G,EAAarzJ,U3KxMW,CAAC+0G,UAC7B,MAAM11C,EAAI+2C,GAAgBrB,GACpB9gB,EAAS4hB,GAAUx2C,GACnBo8B,EAAmB,QAAZ3sD,EAAA6mE,GAAQt2C,UAAI,IAAAvwB,OAAA,EAAAA,EAAAwsD,UACnBtxD,EAAO+rE,GAAQ12C,GACrB,OAAQo8B,GAAc,KAAOxH,EAAS,OAASA,EAAS,KAAOjqD,EAAK3qC,OAAS,EAAI,OAAS2qC,EAAO,K2KmMpEspH,CAAex5G,IAIpCy5G,OAAOv3J,GACTqJ,KAAK4/B,MAAM1I,SAASgoH,sCACtBl/I,KAAK4/B,MAAMjM,OAAO,OAAQh9B,GAC1BqJ,KAAK8tJ,sBAIDK,SAASx3J,GACXqJ,KAAK4/B,MAAM1I,SAASgoH,sCACtBl/I,KAAK4/B,MAAMjM,OAAO,SAAUh9B,GAC5BqJ,KAAK8tJ,sBAIDM,SAASz3J,GACXqJ,KAAK4/B,MAAM1I,SAASgoH,sCACtBl/I,KAAK4/B,MAAMjM,OAAO,SAAUh9B,GAC5BqJ,KAAK8tJ,sBAIDO,qBACNruJ,KAAKsuJ,QAAQ,2BAGPC,iBAAiBC,EAAuBC,EAAyBC,GACvE,OAA2E,KAAnED,EAAkBC,GAAgBpvC,cAAckvC,GAGlDG,kBAAkB72H,WACxB,MAAMm/G,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtC7B,EAAgCnE,EAAMmE,aAEtCwT,EAAwD,QAAlCnlH,EAAAzpC,KAAK4/B,MAAM8/G,2BAAuB,IAAAj2G,EAAAA,EAAA,EACxDolH,EAA0D,QAAvC7pF,EAAA4pF,EAAcxT,EAAclE,eAAW,IAAAlyE,EAAAA,EAAA,EAChE,IAAI8pF,EAAa,GACbJ,EAAiB,GAErB,GAAI52H,EAAM/gB,QAAU63I,EAClBE,EAAa,GACbJ,EAAiBtT,EAAahhJ,UACzB,GAAI09B,EAAM/gB,QAAU83I,EACzBC,EAAa1T,EAAahhJ,KAC1Bs0J,EAAiB,OACZ,CACL,MAAMK,EAA2BF,EAAW/2H,EAAM/gB,MAClD+3I,EAAa9uJ,KAAK4/B,MAAMkkH,0BAA0B1I,EAAc,EAAGA,EAAalE,QAAU6X,GAC1FL,EAAiB1uJ,KAAK4/B,MAAMkkH,0BAA0B1I,EAActjH,EAAM/gB,MAAQ63I,EAAaG,GAEjG,MAAMlpE,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAM04D,EAAY7X,EAAMroD,OAAQqoD,EAAMvsC,YAElI,GAAI1qG,KAAKuuJ,iBAAiBnT,EAAa1C,QAASoW,EAAYJ,GAAiB,CAC3E,MAAM7oE,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAM04D,EAAaJ,EAAgBzX,EAAMroD,OAAQqoD,EAAMvsC,YACnJomC,GAAUW,SAASv2C,GAA6BhF,QAAQrQ,IAE1DirD,GAAUW,SAASz4C,GAAwB9C,QAAQrQ,EAAU6oE,IAGvD3C,oBAAoBlmE,GHnXW,EAACA,EAAoBjmD,EAAYg0D,KACxE,GAAIq2D,GAAkBpkE,GAAW,CAC/B,MAAMovD,EAAax6I,SAASC,cAAc,aAC1CD,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ,oBACnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,kaAS1D8nE,EAAS,CACbC,GAAIz0J,EAAQ4Q,cAAc,YAC1B8jJ,GAAI10J,EAAQ4Q,cAAc,gBAGtBszF,EAA2C,OAA3B7Y,EAAS6Y,mBAAyBn+F,EAAYslF,EAAS6Y,cAC7EswD,EAAOtwD,GAAiB,MAAMxlG,SAAU,EAExC,MAAMw8I,EAASl7I,EAAQ2P,iBAAiB,aAClCw/I,EAAWjU,EAAO,GACbA,EAAO,GAEfC,QAAU,KACX,MAAM71I,EAAYrF,SAAS2Q,cAAc,sCAA8CzU,MACnFkvF,EAAS6Y,gBAAkB5+F,GAC7B8zF,EAAM69C,SAAS9yC,GAA6BzI,QAAQrQ,EAAU/lF,IAEhEm1I,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAGdg1H,EAAShU,QAAU,KACjB/1G,EAAM74B,QACNkuI,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAGdiL,EAAM1sB,OACN+hI,EAAW3yG,YAAY9nC,GACvBy6I,EAAW3oF,OACXr3C,YAAW,KACT+5I,EAAOnpE,EAAS6Y,eAAiB,MAAM33F,UACtC,KGgUHooJ,CAA0BtpE,EAAU7lF,KAAK4/B,MAAOkxG,IAG1CjwI,sCACN,MAAMo2I,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtCp3D,EAAqB7lF,KAAKmsJ,cACnB,QAAX1iH,EAAAwtG,EAAO5zD,YAAI,IAAA55C,EAAAA,EAAI,UACfu7B,EAAAiyE,EAAO9uC,qBAAS,GAChB8uC,EAAMh/B,QACS,UAAfg/B,EAAO7gD,YAAQ,IAAAxZ,EAAAA,EAAA,GACf,GACAq6D,EAAMroD,OACNqoD,EAAMvsC,WACNusC,EAAM73C,kBACN63C,EAAMz7C,uBAGR,I1KlJyB,EAAC1D,EAA0BjS,iBACtD,MAAMkZ,EAAcwa,GAA2BzhB,EAAajS,GAE5D,aAAoBtlF,IAAhBw+F,GAIAkB,GAAUlB,SAKgCx+F,KAApB,QAAxBykE,EAAmB,QAAnBv7B,EAAAo8C,EAAS6kB,kBAAU,IAAAjhE,OAAA,EAAAA,EAAEo2D,WAAG,IAAA76B,OAAA,EAAAA,EAAE6yC,gBAC1BhyB,EAASuZ,oBAAsBP,GAAkBmG,sBACjDnf,EAASuZ,oBAAsBP,GAAkBI,wBACjDpZ,EAASuZ,oBAAsBP,GAAkBK,uBAE/CrG,GAAuBkG,IACvBA,EAAYI,SAASC,oBAAsBP,GAAkBG,wBACH,OAAX,QAA/CpiB,EAAA6mB,GAAiC1E,UAAc,IAAAniB,OAAA,EAAAA,EAAAgS,UACA,QAA/Cp5D,EAAAiuE,GAAiC1E,UAAc,IAAAvpE,OAAA,EAAAA,EAAA2pE,SAASC,qBAAsBP,GAAkBG,yB0K8H7FowD,CAActe,GAAU78C,WAAWu5C,gBAAgB11C,YAAajS,GAEnE,YADA7lF,KAAKsuJ,QAAQ,0DAIf,MAAMrZ,EAAax6I,SAASC,cAAc,aAC1CD,SAASyP,KAAKo4B,YAAY2yG,GAE1BA,EAAWhgG,MAAQ,qBACnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAeM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,6FAftC,CAACkP,UACzB,MAAMi5D,EAAKj5D,EAAKx/F,cACVq/F,EAAyC,QAA7BxsD,EAAA0tD,GAAgBk4D,GAAIp5D,iBAAS,IAAAxsD,OAAA,EAAAA,EAAE7yC,cACjD,GAAKy4J,EAEE,CAAA,GAAI,CAAC,SAAU,YAAa,QAAQ37I,SAAS27I,GAClD,MAAO,sBAAwBp5D,EAAY,gBAAyB,cAAPo5D,EAAqB,UAAY,IACzF,GAAW,WAAPA,EACT,MAAO,qBAAuBp5D,EAAY,eAG1C,MAAO,2BADQ,CAAC,QAAS,QAAS,YAAYviF,SAAS27I,GAAM,IAAM,OACvBp5D,oBAP5C,MAAO,IAa4Bq5D,CAA+B,QAAb95H,EAAAqwD,EAASuQ,YAAI,IAAA5gE,EAAAA,EAAI,sbAYpEjlB,EAAiB/V,EAAQ4Q,cAAc,YACvCmkJ,EAAc,G1KvNStiE,E0KuNWgqD,EAAM8D,WAAYxuC,O1KtNrDtf,EACJxxF,QAAQ,MAAO,IACfA,QAAQ,QAAS,IACjBA,QAAQ,UAAW,IACnBA,QAAQ,UAAW,IACnBA,QAAQ,cAAe,IACvBA,QAAQ,iBAAkB,IAC1BA,QAAQ,kBAAmB,IAC3BA,QAAQ,qBAAsB,IAC9BA,QAAQ,YAAa,IACrBA,QAAQ,mBAAoB,IAC5BA,QAAQ,YAAa,IACrBA,QAAQ,gBAAiB,IACzBA,QAAQ,UAAW,IACnBA,QAAQ,OAAQ,IAChBA,QAAQ,KAAM,IACdA,QAAQ,KAAM,IACdA,QAAQ,OAAQ,IAChBA,QAAQ,aAAc,IACtBA,QAAQ,YAAa,IACrB0T,SArB2B,IAAC89E,E0KwN7B18E,EAAM5Z,MAAQ44J,EAEd,MAAM7Z,EAASl7I,EAAQ2P,iBAAiB,aAClCw/I,EAAWjU,EAAO,GAClBztE,EAAKytE,EAAO,GAEZ8Z,EAAuBh1J,EAAQ4Q,cAAc,SAC7CurF,EAASn8F,EAAQ4Q,cAAc,YAErC68D,EAAG0tE,QAAU,WACX31I,KAAK4/B,MAAM74B,QACXkuI,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAEK,UAAbpkB,EAAM5Z,aAAO,IAAA8yC,OAAA,EAAAA,EAAAt6B,OAAOvY,kBAAkB24J,MAAAA,OAAA,EAAAA,EAAa34J,gBACrDk6I,GAAUW,SAASl1C,GAAwBrG,QAAQrQ,EAAUt1E,EAAM5Z,MAAMwY,UAI7Ew6I,EAAShU,QAAU,KACjB31I,KAAK4/B,MAAM74B,QACXkuI,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAGd,MAAM86H,EAAU,KACd,MAAM5yC,EAAYtsG,EAAM5Z,MACxB,MAAI,QAAQ23C,KAAKuuE,GACR,kCAEF,IAGH6yC,EAAgBtgH,IACpB,IAAIugH,EAAUF,IACTE,IAAW9pE,EAASuQ,M1K/HS,EAACxH,EAAgBwH,KACvD,MAAM5S,EAASoL,EAAO//E,MAAM,KACtB+gJ,EAAiBpsE,EAAO,GACxBqsE,EAAc,IAAMrsE,EAAOvlE,MAAM,EAAGulE,EAAOxpF,QAAQ+U,KAAK,KAExD+gJ,GADch7C,GAAsB1e,IAAS6c,IACV28C,IAAsC,MAAnBA,EAG5D,OAAyB,IAAlBpsE,EAAOxpF,OAAe81J,EAAuBA,GADK,wBACoExhH,KAAKuhH,I0KuH5FE,CAAyBx/I,EAAM5Z,MAAOkvF,EAASuQ,QAC/Eu5D,EAAU,uBAEZH,EAAKnhJ,UAAYshJ,EACjBA,EAAUh5D,MAAAA,GAAAA,EAAQrqC,OAASqqC,MAAAA,GAAAA,EAAQx7C,OACnC8sB,EAAG7uE,SAAW84D,QAAQy9F,GACjB1nF,EAAG7uE,UACU,UAAZg2C,EAAIryC,KACNkrE,EAAG9rB,SAKT5rC,EAAMvJ,iBAAiB,QAAS0oJ,GAChCn/I,EAAMvJ,iBAAiB,WAAY0oJ,GAEnCza,EAAW3yG,YAAY9nC,GACvBy6I,MAAAA,GAAAA,EAAY3oF,OACZ2b,EAAG7uE,SAAW84D,QAAQu9F,KACtBx6I,YAAW,IAAO1E,EAAkBxJ,SAAS,GAGvC61I,6BACN,MAAM3F,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtCp3D,EAAqB7lF,KAAKmsJ,cACnB,QAAX1iH,EAAAwtG,EAAO5zD,YAAI,IAAA55C,EAAAA,EAAI,UACfu7B,EAAAiyE,EAAO9uC,qBAAS,GAChB8uC,EAAMh/B,QACS,UAAfg/B,EAAO7gD,YAAQ,IAAAxZ,EAAAA,EAAA,GACf,GACAq6D,EAAMroD,OACNqoD,EAAMvsC,WACNusC,EAAM73C,kBACN63C,EAAMz7C,uBAERx7F,KAAKisJ,yBAAyBpmE,GAGxBg3D,oBACN78I,KAAKgwJ,yBAAyBhwJ,KAAK4/B,MAAMq9G,WAAWp3D,UAG9CmqE,yBAAyBnqE,GChgBW,EAACA,EAAoBjmD,EAAYg0D,aAC7E57F,MAAMqS,KAAK5P,SAAS0P,iBAAiB,sCAAsC7N,SAAQ07D,GAAMv9D,SAASyP,KAAKuB,YAAYusD,KAEnH,MAAMi4F,EAAoC,QAA1BjrF,EAAqB,QAArBv7B,EAAAo8C,EAAS6kB,kBAAY,IAAAjhE,OAAA,EAAAA,EAAAo2D,WAAK,IAAA76B,OAAA,EAAAA,EAAAoxB,KACpCz5C,EAAekpC,EAAS4mB,UAAY5mB,EAASuQ,KAAmB,gBAAZ65D,EAA4B,WAAaA,EAE7Fhb,EAAax6I,SAASC,cAAc,aAC1Cu6I,EAAW11I,GAAK,mCAEhB9E,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ,gCAEnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,q4BAwBvB,WAAlBrB,EAASuQ,KAAoB,OAAS,kjBAavD44D,EAASh3J,MAAMqS,KAAK7P,EAAQ2P,iBAAiB,oBAE7Cm3H,EAAkB,IAAIz7C,EAASmzB,2CACf,WAAlBnzB,EAASuQ,MACXkrC,EAAgB5sH,QAAQmxE,EAASozB,4CAGnC,MAAMi3C,EAAwC,IAA3B5uB,EAAgBtnI,OAAesnI,EAAgB,GAAK3kF,EACjEwzG,EAAyBnB,EAAO9hJ,MAAK8qD,GAAOA,EAAWrhE,QAAUu5J,IACvEC,EAAuBj3J,SAAU,EAEjC81J,EAAO1yJ,SAAQ07D,IACb,MAAMn/D,EAAUm/D,EAChBn/D,EAAQO,UAAYkoI,EAAgB5tH,SAAS7a,EAAQlC,OACrDkC,EAAQK,SAAUL,EAAQO,UAAmBP,EAAQK,QACjDL,EAAQK,SACV+b,YAAW,KACTpc,EAAQkO,UACP,MAIP,MAAM2uI,EAASl7I,EAAQ2P,iBAAiB,aAClCw/I,EAAWjU,EAAO,GAClBztE,EAAKytE,EAAO,GACZ0a,EAAkB51J,EAAQ4Q,cAAc,kBACxCilJ,EAAmB71J,EAAQ4Q,cAAc,mBAEzCklJ,EAA+B91J,EAAQ4Q,cAAc,iCAE3D,IAAImlJ,GAAiE,EACrED,EAA6Bp3J,QAAUq3J,EAEvC,MAAMp2C,EAA2B,WAAlBt0B,EAASuQ,KAAoBI,GAAiCC,GAEvE+5D,EAA4C,WAChD,MAAMvoE,EAA8F,QAApFx+C,EAAChvC,SAAS2Q,cAAc,0DAA4D,IAAAq+B,OAAA,EAAAA,EAAA9yC,MAC9F85J,EAAoB5qE,EAASgzB,WAAahzB,EAASwyB,WAErDxyB,EAAS4mB,UACPgkD,GACFH,EAA6Bl3J,UAAW,EACxCk3J,EAA6Bp3J,QAAUq3J,IAC5B1qE,EAASgzB,YAAchzB,EAASwyB,YAAgBxyB,EAASgzB,WAAyB,WAAZ5wB,GAA0BpC,EAASwyB,YAA0B,UAAZpwB,GAClIqoE,EAA6Bl3J,UAAW,EACxCk3J,EAA6Bp3J,SAAU,IAEvCo3J,EAA6Bl3J,UAAW,EACxCk3J,EAA6Bp3J,QAAUq3J,IAGzCD,EAA6Bl3J,UAAW,EACxCk3J,EAA6Bp3J,SAAW2sF,EAASgzB,YAIrDy3C,EAA6BI,SAAYthH,IACvCmhH,EAAiEnhH,EAAIr4C,OAAOmC,SAG9E+b,YAAW,IAAMu7I,KAA6C,GAE7Dh2J,EAAQ4Q,cAAc,eAAwBuqI,QAAU,KACvD6a,KAGDh2J,EAAQ4Q,cAAc,qBAA8BuqI,QAAWvmG,IACxC,WAAlBy2C,EAASuQ,MAAsBkrC,EAAgB5tH,SAAS07B,EAAIr4C,OAAOJ,SAIvEy5J,EAAgBh3J,UAAYysF,EAASmzB,0CAA2CtlG,SAAS07B,EAAIr4C,OAAOJ,OACpG05J,EAAiBj3J,UAAYysF,EAASozB,2CAA4CvlG,SAAS07B,EAAIr4C,OAAOJ,OAEjGy5J,EAAgBh3J,UAAai3J,EAAiBj3J,UAIjDg3J,EAAgBl3J,SAAWk3J,EAAgBh3J,SAC3Ci3J,EAAiBn3J,SAAWm3J,EAAiBj3J,WAJ7Cg3J,EAAgBl3J,SAAU,EAC1Bm3J,EAAiBn3J,SAAU,GAS7Bs3J,MAGFvoF,EAAG0tE,QAAU,KACX,MAAMv/C,EAAQ37F,SAAS2Q,cAAc,gDAAwDzU,MACvFsxF,EAA4B,WAAlBpC,EAASuQ,KAAoB,QAAW37F,SAAS2Q,cAAc,mDAA2DzU,MACpI2/F,EAA4Bg6D,EAA6Bp3J,QAC3Dk9F,GAEFxC,EAAM69C,SAASt3B,EAAOjkB,QAAQrQ,EAAUuQ,OAAM71F,EAAW0nF,EAASqO,IAEpE2+C,MAAAA,GAAAA,EAAY95F,OACZ1gD,SAASyP,KAAKuB,YAAYwpI,IAG5B0U,EAAShU,QAAU,KACjB/1G,EAAM74B,QACNkuI,MAAAA,GAAAA,EAAY95F,OACZ1gD,SAASyP,KAAKuB,YAAYwpI,IAG5BhgI,YAAW,IAAMk7I,EAAuBh0G,SAAS,GAEjDvc,EAAM1sB,OACN+hI,EAAW3yG,YAAY9nC,GACvBy6I,EAAW3oF,QD4VTqkG,CAA+B9qE,EAAU7lF,KAAK4/B,MAAOkxG,IAG/Cmb,yBAAyBpmE,GAC/B,MAAMs0B,EAASt0B,EAAS2V,sBAAwBG,GAAgCD,GAChFo1C,GAAUW,SAASt3B,EAAOjkB,QAAQrQ,IAG5B+qE,wBAAwB7zJ,WAC9B,MAAMk6I,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtCp3D,EAAqB7lF,KAAKmsJ,sBAAc1iH,EAAAwtG,EAAO5zD,oBAAQ,EAAG4zD,EAAO9uC,MAAO8uC,EAAMh/B,QAAoB,UAAXg/B,EAAO7gD,YAAI,IAAApxB,EAAAA,EAAI,GAAI,GAAIiyE,EAAMroD,OAAQqoD,EAAMvsC,YACxIomC,GAAUW,SAAS7yC,GAA8B1I,QAAQrQ,EAAU9oF,IAG7D8zJ,4BACN,MAAM5Z,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtC7gD,EAAoD,QAA5B3yD,EAAAzpC,KAAK4/B,MAAMq9G,WAAW16G,YAAM,IAAAkH,OAAA,EAAAA,EAAAo8C,SACpDA,EAAqB7lF,KAAKmsJ,sBAAcnnF,EAAAiyE,EAAO5zD,oBAAQ,EAAG4zD,EAAO9uC,MAAO8uC,EAAMh/B,QAAoB,UAAXg/B,EAAO7gD,YAAI,IAAAxZ,EAAAA,EAAI,GAAI,GAAIq6D,EAAMroD,OAAQqoD,EAAMvsC,YACxIomC,GAAUW,SAASp1C,GAAsBnG,QAAQrQ,EAAUuW,IAGrD00D,cAAc/gE,GACpB,MAAMknD,EAA2Bj3I,KAAK4/B,MAAMq9G,WAC5C,GAAIhG,EAAO,CACT,MACM6X,EADgC7X,EAAMmE,aACZhhJ,KAE1ByrF,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAM04D,EAAY7X,EAAMroD,OAAQqoD,EAAMvsC,YAEnH,YAAX3a,EAAGhzF,IACL+zI,GAAUW,SAASx1C,GAAyB/F,QAAQrQ,IAChC,cAAXkK,EAAGhzF,KACZ+zI,GAAUW,SAAS11C,GAA0B7F,QAAQrQ,KAKnDkrE,oBAAoBhhE,GAC1B,MAAMknD,EAA2Bj3I,KAAK4/B,MAAMq9G,WAEtC6R,EADgC7X,EAAMmE,aACZhhJ,KAE1ByrF,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAM04D,EAAY7X,EAAMroD,OAAQqoD,EAAMvsC,YAErG,MAAzB3a,EAAGhzF,IAAInG,cACTk6I,GAAUW,SE7iBiB,EAAC5rD,EAAoBmrE,IACrC,IAAIr0D,GACjBxF,GAAgB65D,EAASp6J,eACzB,eAAiBivF,EAASuQ,KAAO,MAAQe,GAAgB65D,EAASp6J,eAAeF,KACjF,cAAgBmvF,EAASuQ,KAAO,KAAOe,GAAgB65D,EAASp6J,eAAeF,MAGnEw/F,QAAQrQ,GFsiBCorE,CAAkBprE,EAAUsR,GAAgBkB,QAAQ3hG,OAC9D+3C,GAASttC,KAAKuhC,KACvBouG,GAAUW,SAAS1hD,EAAGlpF,S9D/iBnB,CACLgc,KAJqB,YAKrBszE,M8D6iBkDtQ,G7DhjB7B,CAACsQ,IACjB,CACLtzE,KAJe,MAKfszE,MAAAA,I6D6iB8D+6D,CAAUrrE,IAIlEs8D,oBAAoB9+D,SAC1B,MAAM4zD,EAA2Bj3I,KAAK4/B,MAAMq9G,WAC5C,GAAIhG,EAAO,CACT,MAAMpxD,EAAqB7lF,KAAKmsJ,cAAc9oE,EAAM4zD,EAAO9uC,MAAO8uC,EAAMh/B,QAAuB,QAAdxuE,EAAAwtG,EAAM7gD,YAAQ,IAAA3sD,EAAAA,EAAA,GAAI,GAAIwtG,EAAMroD,OAAQqoD,EAAMvsC,YAC3HomC,GAAUW,SAASr2C,GAA0BlF,QAAQrQ,IACrD7lF,KAAK4/B,MAAM2jH,yBAA0B,GAIjCrB,kBAAkB9rD,GAIX,SAATA,EACF06C,GAAUW,S3DlkBP,CACL5uH,KAJgB,S2DukBdiuH,GAAUW,S1EpkBP,CACL5uH,KAJgB,S0E2kBVkqI,qBAAqBv1H,GAC3B,MAAM25H,EAAkC35H,EAAO79B,QAAQo2F,GAAmBA,EAAG0qB,YAAcR,GAAUqS,sBAAqBruG,OAAO,GAAG,GACpIuZ,MAAAA,GAAAA,EAAQl7B,SAAShE,UACf,OAAQA,EAAMmiH,WACZ,KAAKR,GAAUS,mBACb16G,KAAKitJ,eACLjtJ,KAAK4sJ,YAAY5sJ,KAAK6sJ,gBACtB7sJ,KAAKoxJ,oBAAmC,QAAf3nH,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAC5C,MAEF,KAAKwwE,GAAU60B,wBACb0a,GAA0BlxJ,EAAMkuF,UAAW,GAAIxmF,KAAK4/B,MAAOkxG,GAAW95C,GAAuCh3F,KAAKiyI,eAAe59C,iBACjI,MAEF,KAAK4lB,GAAUre,eGtlBhB/6F,eAAmCglF,EAAoBjmD,EAAYg0D,EAAYumB,EAAa9lB,GACjG,MAAM4gD,EAAax6I,SAASC,cAAc,aAC1CD,SAASyP,KAAKo4B,YAAY2yG,GAC1BA,EAAWhgG,MAAQ,yBACnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,sGAGZrB,EAASoR,2BAA2B5C,0ZAYlFq1D,EAAoBlvJ,EAAQ4Q,cAAc,eAC1CsqI,EAASl7I,EAAQ2P,iBAAiB,aAClCw/I,EAAWjU,EAAO,GAClBztE,EAAKytE,EAAO,GACZ/+C,EAASn8F,EAAQ4Q,cAAc,YAErC,IAAIskG,EAAM,GAEVg6C,EAA6B,SAAKzyD,IAChCyY,EAAMzY,EAAMyY,KAGdznC,EAAa,QAAI,KACXynC,GACF9vE,EAAM74B,QACN4vF,MAAAA,GAAAA,EAAQx7C,OACR85F,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,SACZkxD,EAASoR,MAAQyY,EACjB9b,EAAM69C,SAASt3B,EAAOjkB,QAAQrQ,KAE9B8Q,MAAAA,GAAAA,EAAQrqC,QAIZq9F,EAAShU,QAAU,KACjB/1G,EAAM74B,QACNkuI,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,UAGdiL,EAAM1sB,aACA+hI,EAAW3yG,YAAY9nC,SACvBy6I,EAAW3oF,OACjBo9F,EAAkBH,oBH4hBV8H,CAAoB/4J,EAAMkuF,UAAW,GAAIxmF,KAAK4/B,MAAOkxG,GAAW71C,GAAmCj7F,KAAKiyI,eAAe59C,iBACvH,MAEF,KAAK4lB,GAAU6N,iBACb9nH,KAAKsxJ,2BAA2Bh5J,EAAMkuF,UAAW,GAAIluF,EAAMopG,YAAwB,GACnF1hG,KAAKuxJ,6BAA6Bj5J,GAAO,GAEzC,MAEF,KAAK2hH,GAAUoP,mBACf,KAAKpP,GAAUmP,mBACbppH,KAAKwxJ,eAAel5J,GACpB0H,KAAKyxJ,iBAAiBn5J,GAClBk/B,EAAOA,EAAOx9B,OAAS,KAAO1B,GAChC0H,KAAK0xJ,YAAYp5J,GAEnB,MAEF,KAAK2hH,GAAUqP,kBACbtpH,KAAK2xJ,kBAAkBr5J,GACnBk/B,EAAOA,EAAOx9B,OAAS,KAAO1B,GAChC0H,KAAK0xJ,YAAYp5J,GAEnB,MAEF,KAAK2hH,GAAUkP,iBACbnpH,KAAK4xJ,kBAAkBt5J,GACvB,MAEF,KAAK2hH,GAAUoS,mBACbrsH,KAAK6xJ,eAAev5J,GACpB,MAEF,KAAK2hH,GAAUkS,iBACbnsH,KAAK8xJ,uBAAuBx5J,GAC5B,MAEF,KAAK2hH,GAAUqS,oBACbtsH,KAAKo4I,mBAAmB9/I,GACpB64J,IAAoC74J,GACtC0H,KAAK+xJ,mBAAmBz5J,GAE1B0H,KAAK8xJ,uBAAuBx5J,GAC5B,MAEF,KAAK2hH,GAAUsS,gBACbt3G,YAAW,IAAMjV,KAAK0xJ,YAAYp5J,IAAQ,KAC1C,MAEF,KAAK2hH,GAAUuS,2BACbxsH,KAAKwxJ,eAAel5J,GACpB0H,KAAK2xJ,kBAAkBr5J,GACvB0H,KAAKo4I,mBAAmB9/I,GACxB0H,KAAK8xJ,uBAAuBx5J,GAC5B0H,KAAKyxJ,iBAAiBn5J,GACtB,MAEF,KAAK2hH,GAAUi0B,eACbluI,KAAKwsJ,8BACL,MACF,KAAKvyC,GAAUm2B,kBACbpwI,KAAKwsJ,8BACLxsJ,KAAKgyJ,8BACL,MACF,KAAK/3C,GAAUmW,cACbpwH,KAAKiyJ,wBAAwBz6H,EAAQl/B,GACrC,MACF,KAAK2hH,GAAU4R,0BACb7rH,KAAK4xJ,kBAAkBt5J,GAI3B0H,KAAK0sJ,kCAAkCp0J,GACvC0H,KAAK4/B,MAAM8iH,mBAGb1iJ,KAAKkyJ,sBAAsB16H,GAC3Bx3B,KAAKmyJ,yBAAyB36H,GAE9Bx3B,KAAKoyJ,+BAGL,MAAMC,EAAkC,CACtCp4C,GAAUoP,mBACVpP,GAAUqP,kBACVrP,GAAUmP,mBACVnP,GAAU6N,iBACV7N,GAAUkP,iBACVlP,GAAUoS,oBAGNuM,EAAmBphG,MAAAA,OAAA,EAAAA,EAAQ79B,QAAOo2F,GAAMsiE,EAAgC3+I,SAASq8E,EAAG0qB,aAAYt8G,KAAI4xF,GAAMA,EAAG0qB,aAE/Gme,MAAAA,SAAAA,EAAkB5+H,UAEpBgG,KAAKsrJ,gBAAgB52I,QAAQkkH,GAE7B54H,KAAK+tJ,6BAA6B,cAAen1B,IAI7Cq5B,wBAAwBz6H,EAAsBl/B,GAChD0H,KAAKsyJ,8BAA8Bh6J,GACrC0H,KAAK4xJ,kBAAkBt5J,IAEvB0H,KAAKo4I,mBAAmB9/I,GACpBk/B,EAAOA,EAAOx9B,OAAS,KAAO1B,GAChC0H,KAAK+xJ,mBAAmBz5J,GAE1B0H,KAAK8xJ,uBAAuBx5J,IAIxBg6J,8BAA8Bh6J,WACpC,OAAgJ,UAA1H,QAAfmxC,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,OAAA,EAAAA,EAAEK,MAAK7uC,YAAK,OAAmE,UAApC,QAA9BwuC,EAAAzpC,KAAK4/B,MAAMokH,SAAS/oJ,EAAEooF,aAAQ,IAAA55C,OAAA,EAAAA,EAAAo8C,SAASrB,eAA2B,IAAAxf,OAAA,EAAAA,EAAEy1C,aAAcR,GAAUkP,2BAAiB,IAAAnkD,GAAAA,EAG1IutF,2BAA2B3+B,EAAgC/tC,GACjE,OAAO+tC,EAAmB9pF,MAAK0hF,GAAoBA,EAAiBnoC,OAASwC,EAASxC,OAGhFquE,YAAYp5J,GAClB,IACE0H,KAAK4/B,MAAMykH,oBAAoBrkJ,KAAK4/B,MAAMq9G,YAC1C,MAAMp3D,EAAWvtF,EAAMkuF,UAAW,GAC5BywD,EAAQj3I,KAAK4/B,MAAMokH,SAASn+D,EAASxC,MAC3CrjF,KAAK4/B,MAAM6kH,uBAAuBxN,GAClCj3I,KAAKmiJ,oBAAoBlL,EAAM5zD,MAC/B,MAAMtsE,EAAQ/W,KAAK4/B,MAAMoS,SAASilG,EAAMmE,cACxC,IACEp7I,KAAK4/B,MAAM2/G,SAASxoI,EAAOwf,MAAMkD,QAAQM,QAEzC,MAAOvD,IACLl+B,EAAMgiI,mBACRrlH,YAAW,KACT,MAAMgzE,EAAUjoF,KAAK4/B,MAAMjG,eAAgB5iB,MAAQ/W,KAAK4/B,MAAMq9G,WAAW7B,aAAahhJ,KAAKJ,OAC3FgG,KAAK4/B,MAAM9F,aAAamuD,EAAS,EAAG1xD,MAAMkD,QAAQ8C,QACjD,GAEL,MAAO/F,KAKHg8H,qBAAqBC,qBAC3B,GAAIA,IAAal2D,GACfv8F,KAAK6rJ,yBACA,GAAI4G,IAAa9zD,GACtB3+F,KAAK+rJ,oBAAoB/rJ,KAAK4/B,MAAMq9G,WAAWp3D,eAC1C,GAAI4sE,aAAoB18D,GAC7B/1F,KAAKgwJ,yBAAyBhwJ,KAAK4/B,MAAMq9G,WAAWp3D,eAC/C,GAAI4sE,IAAap2D,GAAuB,CAC7C,MAAM46C,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtCp3D,EAAqB7lF,KAAKmsJ,sBAAc1iH,EAAAwtG,EAAO5zD,oBAAQ,EAAG4zD,EAAO9uC,MAAO8uC,EAAMh/B,QAAoB,UAAXg/B,EAAO7gD,YAAI,IAAApxB,EAAAA,EAAI,GAAI,GAAIiyE,EAAMroD,OAAQqoD,EAAMvsC,YACxI7kB,EAASiT,SAAU7L,MAA+B,QAAvBrQ,EAAAq6D,EAAMmE,aAAahhJ,YAAI,IAAAwiF,EAAAA,EAAI,GAEtD,MAAMwf,EAAoD,QAA5B5mE,EAAAx1B,KAAK4/B,MAAMq9G,WAAW16G,YAAM,IAAA/M,OAAA,EAAAA,EAAAqwD,SAC1DirD,GAAUW,SAASghB,EAASv8D,QAAQrQ,EAAUuW,SACzC,GAAIq2D,IAAa50C,GACtB79G,KAAK0yJ,iBAAiB1yJ,KAAK4/B,MAAMq9G,WAAWp3D,cACvC,CACL,MAAMoxD,EAA2Bj3I,KAAK4/B,MAAMq9G,WACtCp3D,EAAqB7lF,KAAKmsJ,sBAAc12H,EAAAwhH,EAAO5zD,oBAAQ,EAAG4zD,EAAO9uC,MAAO8uC,EAAMh/B,QAAoB,UAAXg/B,EAAO7gD,YAAI,IAAA4f,EAAAA,EAAI,GAAI,GAAIihC,EAAMroD,OAAQqoD,EAAMvsC,YACxI7kB,EAASiT,SAAU7L,MAA+B,QAAvBipB,EAAA+gC,EAAMmE,aAAahhJ,YAAI,IAAA87G,EAAAA,EAAI,GACtD46B,GAAUW,SAASghB,EAASv8D,QAAQrQ,KAIhCyrE,2BAA2BzrE,EAAoB6b,EAAsBixD,WAC3E,MAAMC,EAAwB,CAAC3b,EAA0BgG,KACvDj9I,KAAK4/B,MAAMykH,oBAAoBpH,GAC/Bj9I,KAAK4/B,MAAM2kH,iBAAiBtN,GAC5B,IACEj3I,KAAK4/B,MAAM2/G,SAASv/I,KAAK4/B,MAAMoS,SAASilG,EAAMmE,cAAe7kH,MAAMkD,QAAQM,QAC3E,MAAO9+B,MAKL43J,EAAsB7yJ,KAAK4/B,MAAMokH,SAASn+D,EAASxC,MAEzD,GAAIwvE,EAGF,OAFAA,EAAoB/Z,kBAAkBjzD,QACtC8sE,GAAmBC,EAAsBC,EAAqB7yJ,KAAK4/B,MAAMq9G,aAI3E,MAAM6V,EAA0C9yJ,KAAK4/B,MAAMokH,kBAASv6G,EAAAo8C,EAASyyB,2DAAsCj1B,OAAQqe,EAAWre,MAEtI,GAAIyvE,EAAU,CACZ,MAAMC,EAA+B1N,GAAa2N,oBAAoBntE,GAElEitE,EAASj7J,KACXk7J,EAAUhpH,WAAW/pC,KAAK4/B,MAAM/I,OAAQi8H,EAASj7J,MAEjDk7J,EAAUhpH,WAAW/pC,KAAK4/B,MAAM/I,QAGlC,MAAMo8H,EAA2BniB,GAAU78C,WAAWu5C,gBAAgBpzB,OAASvZ,GAAuB+M,0BACrD,MAAxB,QAArB5oC,EAAAhlE,KAAK4/B,MAAMq9G,kBAAU,IAAAj4E,OAAA,EAAAA,EAAEo2E,aAAahhJ,OAA+C,KAAhC24J,EAAU3X,aAAahhJ,MAAe64J,GAA8C,YAAlBptE,EAASuQ,KAChIu8D,IAAoB3yJ,KAAKkzJ,eAAiBN,EAAsBG,EAAW/yJ,KAAK4/B,MAAMq9G,YAEtFj9I,KAAK4/B,MAAMq9G,WAAW7B,aAAa1C,QAAU14I,KAAK4/B,MAAMq9G,WAAW7B,aAAahhJ,KAGlF24J,EAAU3zD,kBAAoBvZ,EAASuZ,kBACvC2zD,EAAUv3D,sBAAwB3V,EAAS2V,sBAC3Cu3D,EAAU5a,UAAUtyD,IAIhB0rE,6BAA6Bj5J,EAAmBq6J,SACtD,MAAMnsE,EAAuC,QAAf/8C,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,GAEjD,IAAK,IAAIvvC,EAAI,EAAGA,EAAIssF,EAAUxsF,OAAQE,IACpC8F,KAAKsxJ,2BAA2B9qE,EAAUtsF,GAAIssF,EAAUtsF,EAAI,GAAIy4J,GAI5DhB,kBAAkBr5J,SAExB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCntC,SAASupF,UACjBoxD,EAAQj3I,KAAK4/B,MAAMokH,SAAsB,QAAbv6G,EAAAo8C,EAASxC,YAAI,IAAA55C,EAAAA,EAAI,EAAqB,WAAlBo8C,EAASuQ,UAAoB71F,EAAY02I,GACrFA,GACEpxD,EAASuZ,oBAAsB63C,EAAM73C,oBACvC63C,EAAM73C,kBAAoBvZ,EAASuZ,kBACnC63C,EAAMkB,UAAUtyD,GAChBoxD,EAAM6B,kBAAkBjzD,OAMxBuyD,mBAAmB9/I,SAEzB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCntC,SAASupF,UACjBoxD,EAAQj3I,KAAK4/B,MAAMokH,SAAsB,QAAbv6G,EAAAo8C,EAASxC,YAAI,IAAA55C,EAAAA,EAAI,EAAqB,WAAlBo8C,EAASuQ,UAAoB71F,EAAY02I,GACrFA,GACFA,EAAM6B,kBAAkBjzD,MAKtB4rE,iBAAiBn5J,SAEvB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCntC,SAASupF,kBACjB,GAAIA,EAASizB,qBAAsB,CAEjC,GADAm+B,EAAQj3I,KAAK4/B,MAAMokH,SAA0B,QAAjBv6G,EAAAo8C,EAASxC,YAAQ,IAAA55C,EAAAA,EAAA,EAAGwtG,GAC5CA,GAAShqC,GAAwC,QAAlBjoC,EAAAiyE,EAAMmE,oBAAY,IAAAp2E,OAAA,EAAAA,EAAE5qE,MAAMkE,QAAQ+gG,KAAkB,EAAG,CACxF43C,EAAMmE,aAAahhJ,KAAO,GAC1B,MAAM2c,EAAQ/W,KAAK4/B,MAAMoS,SAASilG,EAAMmE,cACxCp7I,KAAK4/B,MAAMpE,WAAWzkB,EAAOsoF,GAAe,CAAE6gD,wBAAwB,IAExE,IAAqB,QAAjBtjE,EAAAiJ,EAASiT,gBAAQ,IAAAlc,OAAA,EAAAA,EAAEqQ,UAAUgqD,MAAAA,SAAAA,EAAOmE,aAAahhJ,MAAM,CAC3C6yG,GAAkD,UAAT,QAAnBz3E,EAAAqwD,EAASiT,gBAAU,IAAAtjE,OAAA,EAAAA,EAAAy3D,aAAS,IAAAx3D,EAAAA,EAAA,IACtDn3B,QAAQ+gG,KAAkB,IAClC43C,MAAAA,GAAAA,EAAO1jH,QAAQ52B,UAAUE,IAAI,qCAO/B20J,eAAel5J,SAErB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCtrC,KAAK0nF,sBAEb,GADAoxD,EAAQj3I,KAAK4/B,MAAMokH,SAAsB,QAAbv6G,EAAAo8C,EAASxC,YAAI,IAAA55C,EAAAA,EAAI,EAAqB,WAAlBo8C,EAASuQ,UAAoB71F,EAAY02I,GACrFA,EAAO,CACT,IAAIkc,GAAe,EAEfttE,EAAS4yB,WAAaw+B,EAAMx+B,WAC9Bw+B,EAAMx+B,SAAW5yB,EAAS4yB,UAGxB5yB,EAAS0mB,UAA2B,QAAhBvnC,EAAAiyE,EAAM8D,kBAAU,IAAA/1E,OAAA,EAAAA,EAAE5qE,QACxC68I,EAAMroD,OAA4B,QAAnBhS,EAAAiJ,EAAS+I,cAAU,IAAAhS,EAAAA,EAAA,GAClB,QAAhBpnD,EAAAyhH,EAAM8D,kBAAU,IAAAvlH,GAAAA,EAAE7B,OAAOgkH,GAAczqH,SAAU24D,EAAS0mB,SAGxD1mB,EAAS2yB,QAAUy+B,EAAMz+B,QAC3By+B,EAAMz+B,MAAQ3yB,EAAS2yB,MACvBy+B,EAAMtjH,OAAOsmH,GAAkB/sH,SAAU24D,GACzCstE,GAAe,GAGbttE,EAAS4mB,YAAcwqC,EAAMxqC,YAC/BwqC,EAAMxqC,UAAY5mB,EAAS4mB,UACX,QAAhBh3E,EAAAwhH,EAAM8D,kBAAU,IAAAtlH,GAAAA,EAAE9B,OAAOgkH,GAAcK,aAAcnyD,GAChDstE,GACHlc,EAAMtjH,OAAOsmH,GAAkB/sH,SAAU24D,IAK7C,MAAMs9C,EAAwC,QAA5BjtB,EAAmB,QAAnBF,EAAAnwB,EAASiT,gBAAU,IAAAkd,OAAA,EAAAA,EAAA/oB,aAAS,IAAAipB,EAAAA,EAAA,GAgB9C,GAfI+gC,EAAMmE,aAAahhJ,OAAS+oI,IAC9B8T,EAAMmE,aAAahhJ,KAAO+oI,GAGxBt9C,EAASuZ,oBAAsB63C,EAAM73C,oBACvC63C,EAAM73C,kBAAoBvZ,EAASuZ,kBACnC63C,EAAMkB,UAAUtyD,IAGlBoxD,EAAM6B,kBAAkBjzD,GAEM,IAA1BoxD,EAAMr9I,SAASI,QACjBi9I,EAAMr9I,SAAS46B,KAAKG,SAGlBkxD,EAASsnB,WAAatnB,EAASsnB,UAAUnzG,OAAS,IAAMgG,KAAKozJ,0BAA0BvtE,GAAW,CACpG,MAAMkgE,EAAgBtrJ,SAAS+E,eAAe,kBAE1CQ,KAAKqzJ,kBAAkBxtE,GACH,OAAlBkgE,GACFV,GAAaiO,wBAAwBztE,GAAU97C,WAAWktG,GAG5DoO,GAAaiO,wBAAwBztE,GAAU97C,WAAWktG,QAO5Dmc,0BAA0BvtE,GAChC,SAAIA,EAASrB,SAAYqB,EAASrB,QAA4Bi2B,YAAcR,GAAUkP,kBAMhFyoC,kBAAkBt5J,SAExB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCntC,SAAQ,CAACupF,EAAoB9uE,aACrCkgI,EAAQj3I,KAAK4/B,MAAMokH,SAAsB,QAAbv6G,EAAAo8C,EAASxC,YAAI,IAAA55C,EAAAA,EAAI,EAAGwtG,IAAUj3I,KAAK4/B,MAAMokH,SAA0B,QAAjBh/E,EAAA6gB,EAASxC,YAAQ,IAAAre,EAAAA,EAAA,GAC3FiyE,KACEpxD,EAASrB,SAAayyD,EAAMpxD,SAASrB,SAAYslC,GAAoBmtB,EAAMpxD,SAASrB,SAItFyyD,EAAMtiH,UAHNsiH,EAAM6B,kBAAkBjzD,GACd,IAAV9uE,GAAe/W,KAAK+xJ,mBAAmBz5J,QAO7C,MAAMw/B,EAAQ93B,KAAK4/B,MAAMjG,eACzB,GAAI7B,EAAO,CACT,MAAM0sH,EAAiCxkJ,KAAK4/B,MAAM+P,QAAQ7X,EAAM/gB,MAAQ,GAAG,GAAGkgI,MAExElgI,EAAgB/W,KAAK4/B,MAAMoS,SAASwyG,EAAYpJ,cAEtDp7I,KAAK4/B,MAAM9F,aAAa/iB,EAAO,EAAGwf,MAAMkD,QAAQM,QAChD/5B,KAAK4/B,MAAM2kH,iBAAiBC,IAIxBqN,eAAev5J,SAErB,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCtrC,KAAK0nF,cACboxD,EAAQj3I,KAAK4/B,MAAMokH,SAAsB,QAAbv6G,EAAAo8C,EAASxC,YAAI,IAAA55C,EAAAA,EAAI,EAAGwtG,IAAUj3I,KAAK4/B,MAAMokH,SAA0B,QAAjBh/E,EAAA6gB,EAASxC,YAAQ,IAAAre,EAAAA,EAAA,GAC3FiyE,IACc,QAAhBr6D,EAAAq6D,EAAM8D,kBAAU,IAAAn+D,GAAAA,EAAEjpD,OAAOgkH,GAAczqH,SAAU24D,EAAS0mB,YAKxDulD,uBAAuBx5J,SAE7B,IAAI2+I,GADyC,QAAfxtG,EAAAnxC,EAAMkuF,iBAAS,IAAA/8C,EAAAA,EAAI,IAGvCtrC,KAAK0nF,UAGb,GAFAoxD,EAAQj3I,KAAK4/B,MAAMokH,SAA0B,QAAjBv6G,EAAAo8C,EAASxC,YAAQ,IAAA55C,EAAAA,EAAA,EAAGwtG,GAE5CA,IAC6B,KAA3BA,MAAAA,OAAA,EAAAA,EAAOr9I,SAASI,SAClBi9I,EAAMr9I,SAAS46B,KAAKG,SAGlBkxD,EAASsnB,WAAatnB,EAASsnB,UAAUnzG,OAAS,IAAMgG,KAAKozJ,0BAA0BvtE,IAAW,CACpG,MAAMkgE,EAAgBtrJ,SAAS+E,eAAe,kBAE1CQ,KAAKqzJ,kBAAkBxtE,GACH,OAAlBkgE,GACFV,GAAaiO,wBAAwBztE,GAAU97C,WAAWktG,GAG5DoO,GAAaiO,wBAAwBztE,GAAU97C,WAAWktG,OAO5Doc,kBAAkBxtE,GACxB,OAAOA,EAASsnB,WAA2C,IAA9BtnB,EAASsnB,UAAUnzG,QAAqD,mBAArC6rF,EAASsnB,UAAU,GAAGc,WAGhF8jD,mBAAmBz5J,WACzB,MAAMutF,EAAqBvtF,EAAMkuF,UAAYluF,EAAMkuF,UAAU,GAAK,IAAIswD,GAChEh5B,GAA2D,QAA5Br0E,EAAAo8C,MAAAA,OAAA,EAAAA,EAAU8yB,sBAAkB,IAAAlvE,EAAAA,EAAA,IAAI9vC,QAAQ29G,GAAyB0G,GAAW1G,KAEjH,GAAIwG,EAAU9jH,OAAS,EAAG,CACxB,MAAMu5J,EAAwB,IAAInc,GAC5Boc,EAAwC,IAAIlc,GAAoBt3I,KAAK4/B,MAAMq9G,WAAWxB,iBAAiBlE,iBACvGt6F,EAAiBw1G,IACrBzyJ,KAAKwyJ,qBAAqBC,GAC1BzyJ,KAAK4/B,MAAM74B,UAGb,IAAIswI,IAAmBttG,WAAWwpH,GAElCz1C,EAAUxhH,SAASg7G,IACjB,IAAIogC,GAAgBpgC,EAAMr6D,GAAUlT,WAAWypH,MAEjDA,EAAiBzpH,WAAWwpH,GAEoB,QAAhDvuF,EAAAhlE,KAAK4/B,MAAMq9G,WAAWvB,kCAA0B,IAAA12E,GAAAA,EAAErwC,SAClD4+H,EAASxpH,WAAW/pC,KAAK4/B,MAAMq9G,WAAWxB,mBAItC0Q,cACN9oE,EACA8kB,EACA8P,EACA7hB,EACAh8F,EACAw0F,EACA8b,EACAtL,EACA5D,GAEA,MAAM3V,EAAqB,IAAIixD,GAU/B,OATAjxD,EAASxC,KAAOA,EAChBwC,EAASsiB,MAAQA,EACjBtiB,EAASoyB,QAAUA,EACnBpyB,EAASuQ,KAAOA,EAChBvQ,EAAS+I,OAASA,EAClB/I,EAASiT,SAAW,CAAE7L,MAAO7yF,GAC7ByrF,EAAS6kB,WAAaA,EACtB7kB,EAASuZ,kBAAoBA,EAC7BvZ,EAAS2V,sBAAwBA,EAC1B3V,EAGD+mE,YAAYn/H,GAClB,MAAM8zH,EAA0BvhJ,KAAKkkJ,eAAe,iBAC9CpC,EAA0B9hJ,KAAKkkJ,eAAe,iBAEpDrC,GAAS4R,aACTzzJ,KAAK2sJ,OAAS,IAAI9K,GAASN,EAAYO,EAAYr0H,GACnDztB,KAAK4/B,MAAMrI,GAAG,mBAAoBv3B,KAAKsiJ,mBACvCtiJ,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASqlH,wBAAwBxoD,UAAU/zF,KAAKquJ,mBAAmBrvI,KAAKhf,QACxGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASslH,2BAA2BzoD,UAAU/zF,KAAK2uJ,kBAAkB3vI,KAAKhf,QAC1GA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASwlH,aAAa3oD,UAAU/zF,KAAK8wJ,cAAc9xI,KAAKhf,QACxFA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASigG,eAAepjC,UAAU/zF,KAAK6wJ,gBAAgB7xI,KAAKhf,QAC5FA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASy4G,uBAAuB57C,UAAU/zF,KAAK4wJ,wBAAwB5xI,KAAKhf,QAC5GA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASu4G,iBAAiB17C,UAAU/zF,KAAK6rJ,kBAAkB7sI,KAAKhf,QAChGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASulH,mBAAmB1oD,UAAU/zF,KAAK+wJ,oBAAoB/xI,KAAKhf,QACpGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAAS0lH,iBAAiB7oD,UAAU/zF,KAAK48I,iBAAiB59H,KAAKhf,QAC/FA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAAS2lH,kBAAkB9oD,UAAU/zF,KAAK68I,kBAAkB79H,KAAKhf,QACjGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAMsiH,kBAAkBnuD,UAAU/zF,KAAKkiJ,kBAAkBljI,KAAKhf,QACxFA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAMuiH,oBAAoBpuD,UAAU/zF,KAAKmiJ,oBAAoBnjI,KAAKhf,QAE5FA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAMyiH,0BAA0BtuD,UAAU/zF,KAAK0zJ,uBAAuB10I,KAAKhf,QACrGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAM1I,SAASylH,SAAS5oD,UAAU/zF,KAAK+tJ,6BAA6B/uI,KAAKhf,QACnGA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAMxI,UAAUulH,SAAS5oD,UAAU/zF,KAAK+tJ,6BAA6B/uI,KAAKhf,QACpGA,KAAKurJ,WAAW72I,KAAK6+H,GAAoBx/C,UAAU/zF,KAAK+tJ,6BAA6B/uI,KAAKhf,QAC1FA,KAAKurJ,WAAW72I,KAAK1U,KAAK4/B,MAAMxI,UAAUqpH,uBAAuB1sD,UAAU/zF,KAAKygJ,uBAAuBzhI,KAAKhf,QAE5GuhJ,EAAWv6I,iBAAiB,UAAW1O,IACrCA,EAAMiP,2BACNvH,KAAK6rJ,uBAGPtK,EAAWv6I,iBAAiB,kBAAmB1O,IAC7CA,EAAMiP,2BACNvH,KAAK+rJ,oBAAoBzzJ,EAAM4Q,OAAO28E,aAGxC07D,EAAWv6I,iBAAiB,qBAAsB1O,IAChDA,EAAMiP,2BACNvH,KAAKisJ,yBAAyB3zJ,EAAM4Q,OAAO28E,aAG7C07D,EAAWv6I,iBAAiB,YAAa1O,YACvCA,EAAMiP,2BAEN,MAAM0vI,EAA2Bj3I,KAAK4/B,MAAMq9G,WAE5C,GAAIhG,EACF,GAAItqC,GAAQsJ,yBAAkD,UAAV,QAAdxsE,EAAAnxC,EAAM4Q,cAAQ,IAAAugC,OAAA,EAAAA,EAAAmtD,gBAAU,IAAA5xB,OAAA,EAAAA,EAAAixB,WAC5Dj2F,KAAK6rJ,wBACA,CACL,MAAMzQ,EAAgCnE,EAAMmE,aACtCv1D,EAAqB7lF,KAAKmsJ,cAAclV,EAAM5zD,KAAM4zD,EAAM9uC,MAAO8uC,EAAMh/B,QAASg/B,EAAM7gD,KAAMglD,EAAahhJ,KAAM68I,EAAMroD,OAAQqoD,EAAMvsC,YACzIomC,GAAUW,SAASt2C,GAAcjF,QAAQrQ,EAAUvtF,EAAM4Q,OAAO0tF,eAKtE2qD,EAAWv6I,iBAAiB,mBAAoB1O,IAC9CA,EAAMiP,2BACNvH,KAAKyqI,eAAenyI,EAAM4Q,OAAO28E,aAGnC07D,EAAWv6I,iBAAiB,oBAAqB1O,IAC/CA,EAAMiP,2BACNvH,KAAK+qI,gBAAgBzyI,EAAM4Q,OAAO28E,aAGpC07D,EAAWv6I,iBAAiB,qBAAsB1O,IAChDA,EAAMiP,2BACNvH,KAAK0yJ,iBAAiBp6J,EAAM4Q,OAAO28E,aAGrC07D,EAAWv6I,iBAAiB,kBAAmB1O,IAC7CA,EAAMiP,2BACNvH,KAAK2zJ,wBAEP3zJ,KAAK4zJ,qBAGPD,qBACE3zJ,KAAKmJ,cACH,IAAIH,YAAY,kBAAmB,CACjCC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,MAKdwpJ,iBAAiB7sE,SACf,MAAM9nF,EAAkB,IAAImsJ,GAC5BnsJ,EAAK+3H,WAAajwC,EAASiT,SAAU7L,MACrClvF,EAAK6hC,MAAQ5/B,KAAK4/B,MAElB,MAAM4kD,EAAUqB,EAASrB,QACnB17D,EAAI28E,GAAqBqrC,GAAU78C,WAAWu5C,gBAAgB11C,YAAajS,EAASoyB,SAEtFzzB,GACFzmF,EAAKysJ,kBAAoBhmE,EAAQwjC,qBAAsBlvB,SAAU7L,MAE7DnkE,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,wBAA0Bl2E,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,qBACvIjnG,EAAK83H,cAAgB/sG,EAAGq2E,SAASgY,oBAAqBre,SAAU7L,OAEhElvF,EAAK83H,cAAgBhwC,EAASuZ,oBAAsBP,GAAkBmG,qBAAuBjnG,EAAK+3H,WAAa/3H,EAAKysJ,kBACpHzsJ,EAAKosJ,YAAa,GAGpBC,GAAuBrsJ,KAEnB+qB,QAAmDvoB,KAAf,QAA/BkpC,EAAA3gB,EAAGq2E,SAASgY,2BAAmB,IAAA1tE,OAAA,EAAAA,EAAEqvD,YACxC/6F,EAAK83H,cAAgB/sG,EAAGq2E,SAASgY,oBAAqBre,SAAU7L,OAElEm9D,GAAuBrsJ,IAI3B0sI,eAAe5kD,GACbirD,GAAUW,SAAS/zB,GAAqBxnB,QAAQrQ,OAAUtlF,IAC1DP,KAAK6zJ,sBACL7zJ,KAAK8zJ,uBAGPA,uBACE9zJ,KAAK4/B,MAAM74B,QAGbgkI,gBAAgBllD,GACdirD,GAAUW,SAAS7zB,GAAsB1nB,QAAQrQ,OAAUtlF,IAC3DP,KAAK8zJ,uBAGPpG,uBACE5c,GAAUW,SAAS/zB,GAAqBxnB,aAAQ31F,OAAkBA,IAGpEktJ,wBACE3c,GAAUW,SAAS7zB,GAAsB1nB,aAAQ31F,OAAkBA,IAG7DwtJ,6BAA6BgG,EAAsBC,EAA0B,IACnF/6I,aAAajZ,KAAKkzJ,eAClBlzJ,KAAKkzJ,cAAgBj+I,YAAW,IAAMjV,KAAKi0J,qBAAqBF,EAAcC,IAAa,KAGrFN,uBAAuBzW,aAC7B,GAA8B,QAA1BxzG,EAAAwzG,MAAAA,OAAU,EAAVA,EAAY7B,oBAAc,IAAA3xG,OAAA,EAAAA,EAAAkkG,SAAU,CACtC,MAAM9nD,EAAqB7lF,KAAKmsJ,cAC9BlP,EAAW55D,KACX45D,EAAW90C,MACX80C,EAAWhlC,QACXglC,EAAW7mD,KACsB,UAAV,QAAvBpxB,EAAAi4E,EAAW7B,oBAAY,IAAAp2E,OAAA,EAAAA,EAAE5qE,YAAQ,IAAAwiF,EAAAA,EAAA,GACjCqgE,EAAWruD,OACXquD,EAAWvyC,YAEbomC,GAAUW,SAASv2C,GAA6BhF,QAAQrQ,KAIpDquE,kCACN,MAAMC,EAAW,4BACXj9D,EAAeyS,GAAWyqD,2BAA2BtjB,GAAU78C,WAAWu5C,gBAAgB11C,aAEhG,GAAIZ,EAAal9F,QAAU2vG,GAAWkE,2CAA2C3W,GAAe,CAC9F,MAAMP,EAAS,CACbp3F,GAAI40J,EACJ/9D,KAAM,UACNQ,SACE,qLACFC,YAAY,GAGdi6C,GAAUW,SAAS/6C,GAAgBC,SAEnCm6C,GAAUW,SAAS16C,GAAco9D,IAI7BE,yCACN,MAAMzqD,EAAsBnvG,SAAS2Q,cAAc,aAAmCkpJ,yBAA2B,GAC3GC,EAAgB52J,OAAO81B,OAAOm2E,GACjCh2C,KAAK,GACLz1D,KAAI+yB,GAAOA,EAAI3xB,KAGlB,GAFgB,IAAI,IAAIisC,IAAI+oH,EAAcp2J,KAAI85G,GAAWA,EAAQppG,MAAM,KAAKlV,QAAOolG,GAAeA,EAAYjmE,WAAW,SAAQ,OAErH9+B,OAAS,EAAG,CACtB,MAAM28F,EAAS,CACbp3F,GAAI,2BACJ62F,KAAM,OACNQ,SACE,sLACFC,YAAY,EACZC,qBAAqB,GAEvBg6C,GAAUW,SAAS/6C,GAAgBC,iBAC1B3xB,EAAyC,QAAzCv7B,EAAAqnG,GAAU78C,WAAWu5C,gBAAgBhzB,UAAI,IAAA/wE,OAAA,EAAAA,EAAAkxE,8BAAS7wE,MAAK6sD,GAAwB,6BAAdA,EAAOp3F,OACjFuxI,GAAUW,SAAS16C,GAAc,6BAI7B88D,8BACN,MAAMt0J,EAAK,wBAGX,GAF0B9E,SAAS+5J,uBAAuB,iBAEpCx6J,OAAS,EAAG,CAChC,MAAM28F,EAAS,CACbp3F,GAAIA,EACJ62F,KAAM,OACNQ,SAAU,oGACVC,YAAY,EACZC,qBAAqB,GAEvBg6C,GAAUW,SAAS/6C,GAAgBC,iBAC1B3xB,EAAyC,QAAzCv7B,EAAAqnG,GAAU78C,WAAWu5C,gBAAgBhzB,UAAI,IAAA/wE,OAAA,EAAAA,EAAAkxE,8BAAS7wE,MAAK6sD,GAAUA,EAAOp3F,KAAOA,MACxFuxI,GAAUW,SAAS16C,GAAcx3F,IAK7B00J,qBAAqBF,EAAsBC,EAA0B,UAC3Eh0J,KAAK0zJ,uBAAuB1zJ,KAAK4/B,MAAMq9G,YAEvCj9I,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAAA,OAKkB,QAApBtqH,EAAAzpC,KAAKsrJ,uBAAe,IAAA7hH,OAAA,EAAAA,EAAEzvC,UAAWgG,KAAKsrJ,gBAAgB53I,SAASumG,GAAU6N,mBAAqB9nH,KAAKsrJ,gBAAgB53I,SAASumG,GAAUkP,oBACxInpH,KAAKk0J,kCAGPl0J,KAAKq0J,iCACLr0J,KAAK6zJ,sBACL7zJ,KAAKsrJ,gBAAkB,GACvBtrJ,KAAKkzJ,cAAgB,KAGf9B,oBAAoB5qE,GAC1BvxE,YAAW,KACTjV,KAAK4/B,MAAM+P,QAAQ,GAAG,GAAGhb,SACzB6xD,EAAUlqF,SAASupF,IACjB,MAAM4uE,EAAoBpP,GAAa2N,oBAAoBntE,GAC3D4uE,EAAkB1qH,WAAW/pC,KAAK4/B,MAAM/I,QACxC49H,EAAkBtc,UAAUtyD,GAE5BA,EAASuQ,OAASe,GAAgBe,SAAS9B,MAAQ06C,GAAUW,SAASjzC,GAAsBtI,QAAQrQ,OAEtG7lF,KAAK4/B,MAAM8iH,gBACPl8D,EAAUxsF,OAAS,GACrBib,YAAW,KACT,MAAM+iD,EAAKh4D,KAAK4/B,MAAMokH,SAASx9D,EAAU,GAAGnD,OACxCrrB,MAAAA,SAAAA,EAAIojF,eACNp7I,KAAK4/B,MAAM9F,aAAa95B,KAAK4/B,MAAMoS,SAASgmB,MAAAA,OAAA,EAAAA,EAAIojF,cAAe,EAAG7kH,MAAMkD,QAAQ8C,QAEjF,GAELu0G,GAAUW,SAASlzC,GAAwBrI,aAC1C,GAGG22D,eACN,MAAO,CACLr5H,QAAS,CAAC,OAAQ,SAAU,OAAQ,SAAU,0BAC9CnL,QAAS,CACP2U,QAAS,CACPlmC,UAAW,2BACX6kD,SAAU,CACRpJ,KAAMvyC,KAAKkuJ,OAAOlvI,KAAKhf,MACvBwyC,OAAQxyC,KAAKmuJ,SAASnvI,KAAKhf,MAC3BmS,OAAQnS,KAAKouJ,SAASpvI,KAAKhf,QAG/Bq3B,QAAS,CACP0iB,MAAO,EACPC,SAAU,IACVX,UAAU,IAGdpiB,MAAO,QAIHp2B,gBAAgB+1F,EAAkB8+C,EAAkBz4F,GAC1D,IAAIhwC,EAAS,GACb,MAAM2/D,EAASnyE,SAASC,cAAc,aACtCkyE,EAAO33B,MAAQ,cAKf23B,EAAOjyE,UAAYi8F,EAJA,6IAKnBn8F,SAASyP,KAAKo4B,YAAYsqC,SACpBA,EAAOtgB,OACb,MAAMooG,EAAe9nF,EAAOziE,iBAAiB,aACvCwqJ,EAAMD,EAAa,GACnBE,EAAMF,EAAa,GACzBE,EAAI7tJ,QAEJ4tJ,EAAIhf,QAAU,KACZ1oI,EAAS,MACT2/D,MAAAA,GAAAA,EAAQzxB,OACRyxB,MAAAA,GAAAA,EAAQj4C,UAGVigI,EAAIjf,QAAU,KACZ1oI,EAAS,MACT2/D,MAAAA,GAAAA,EAAQzxB,OACRyxB,MAAAA,GAAAA,EAAQj4C,UAGVi4C,EAAO5lE,iBAAiB,oBAAqB1O,IACf,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIVslE,EAAO5lE,iBAAiB,WAAY1O,IAClCA,EAAM4Q,OAAOZ,YAAc2E,EAC3BgwC,EAAS3kD,MAGLg2J,QAAQ13D,GACd,MAAMs0D,EAAQvtJ,OAAOqD,OAAOvG,SAASC,cAAc,YAAa,CAC9D4mE,QAAS,SACT6pF,UAAU,EACV5jI,SAAU,IACV5sB,UAAW,iFAEPi8F,cAGNn8F,SAASyP,KAAKlN,OAAOkuJ,GACrBA,EAAME,QAGA4B,qBAAqB12J,SAC3B,IAAIkwF,EAAwB,GAC5B,MAAMquE,EAAmCruE,IACvCvxE,YAAW,KACJjV,KAAK4/B,MAEC4mD,EAAUxsF,OAAS,GAC5BgG,KAAKoxJ,oBAAoB5qE,GAFzBquE,EAA2BruE,KAI5B,KAGL,GAAIlwF,EAAMk3I,gBAAgBhzB,GAAI,CAC5B,MAAMliH,EAAgChC,EAAMk3I,gBAAgBhzB,GAAGhjF,OAAOtqB,MAAM5U,GAA+BA,EAAMmiH,YAAcR,GAAUS,qBACzIl0B,EAAgC,QAApB/8C,EAAAnxC,MAAAA,OAAA,EAAAA,EAAOkuF,iBAAa,IAAA/8C,EAAAA,EAAA,GAElCorH,EAA2BruE,GAGrB09D,eAAe3kJ,GACrB,OAAOS,KAAKoL,cAAc,IAAI7L,KAGxB0tJ,eACNjtJ,KAAK80J,qBAEL90J,KAAKkkJ,eAAe,iBAAkBvpJ,UAAY,GAClDqF,KAAKkkJ,eAAe,iBAAkBvpJ,UAAY,GAC9CqF,KAAK4/B,QACP5/B,KAAK4/B,MAAMnE,IAAI,mBAAoBz7B,KAAKsiJ,mBACxCtiJ,KAAK4/B,MAAMikH,WAEb7jJ,KAAK2sJ,YAASpsJ,EA4CRqzJ,qBACN,MAAMrS,EAA0BvhJ,KAAKkkJ,eAAe,iBACpD3C,EAAWv6I,iBAAiB,SAAUhH,KAAK4rJ,gBAC3CrK,EAAWv6I,iBAAiB,iBAAkBhH,KAAK8rJ,uBACnDvK,EAAWv6I,iBAAiB,oBAAqBhH,KAAKgsJ,0BACtDzK,EAAWv6I,iBAAiB,WAAYhH,KAAKksJ,kBAC7C3K,EAAWv6I,iBAAiB,kBAAmBhH,KAAKosJ,wBACpD7K,EAAWv6I,iBAAiB,mBAAoBhH,KAAKqsJ,yBAG/CyI,qBACN,MAAMvT,EAA0BvhJ,KAAKkkJ,eAAe,iBACpD3C,EAAW7xI,oBAAoB,SAAU1P,KAAK4rJ,gBAC9CrK,EAAW7xI,oBAAoB,iBAAkB1P,KAAK8rJ,uBACtDvK,EAAW7xI,oBAAoB,oBAAqB1P,KAAKgsJ,0BACzDzK,EAAW7xI,oBAAoB,WAAY1P,KAAKksJ,kBAChD3K,EAAW7xI,oBAAoB,kBAAmB1P,KAAKosJ,wBACvD7K,EAAW7xI,oBAAoB,mBAAoB1P,KAAKqsJ,yBAGlDxrJ,6BAA6Bk0J,GACnC,MAAM9d,EAAQj3I,KAAK4/B,MAAMq9G,WACnBp3D,EAAqB,IAAIixD,GAC/BjxD,EAASxC,KAAO4zD,EAAM5zD,KACtBwC,EAASuQ,KAAO6gD,EAAM7gD,KAEtB,MAAMorC,QAAwBtD,GAAgB82B,qBAC5CD,EAAQ32B,oBACR22B,EAAQ12B,oBACRyS,GAAU78C,WAAWu5C,gBAAgB11C,YACrCm/C,EAAMpxD,UAERuuD,GAA2Bp0I,KAAK4/B,MAAOkxG,GAAWtP,EAAiBuzB,EAAQj9H,OAGrEk6H,8BACN,MAAMiD,EAAej1J,KAAKkkJ,eAAe,sBACrC+Q,GACFA,EAAat4J,UAAU3D,OAAO,gBAAiB83I,GAAU78C,WAAWu5C,gBAAgB9oD,WAIhFytE,yBAAyB36H,GAC/B,MAAM09H,EAAiC,CACrCj7C,GAAUS,mBACVT,GAAU6N,iBACV7N,GAAUkS,iBACVlS,GAAUq2B,gBACVr2B,GAAU+1B,oBAENmlB,EAAsC,IAAIp6J,IAEhDy8B,EACG79B,QAAOo2F,IAAOmlE,EAAkBxhJ,SAASq8E,EAAG0qB,aAC5Ct8G,KAAI4xF,GAAMA,EAAGvJ,WAAa,KAC1B5yB,OACAt3D,SAAQrB,GAAKk6J,EAAal5J,IAAIhB,EAAEooF,KAAOpoF,KAE1C,MAAMurF,EAAwB,IAAI2uE,EAAa1hI,UACzC2hI,EAA+B5uE,EAAU7sF,QAAOsB,GAAKA,EAAEmkG,oBAAsBP,GAAkBI,yBAAwB9gG,KAAIlD,GAAKA,EAAEooF,OAClIgyE,EAA+B7uE,EAClC7sF,QACCsB,cACE,OAAAA,EAAEmkG,oBAAsBP,GAAkBI,wBACzChkG,EAAEmkG,oBAAsBP,GAAkBG,wBAA0B/jG,EAAEupF,SAAmC,sCAAxBvpF,EAAEupF,QAAQyR,WAC3Fh7F,EAAEmkG,oBAAsBP,GAAkBmG,sBACzC/pG,EAAEupF,UAC2D,QAA7Dxf,YAAC/pE,EAAEupF,QAA4BwjC,2CAAsBlvB,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,kBAAUrQ,EAAA3hF,EAAE69F,+BAAU7L,UAI1F9uF,KAAIlD,GAAKA,EAAEooF,OAEd+xE,EAA6B94J,SAAQ+mF,UACnC,MAAMiyE,EAAkB76J,SAAS+E,eAAewhJ,GAAmBpkJ,UAAYymF,GAC/E,GAAIiyE,EAAiB,CACnB,MAAMre,EAAQj3I,KAAK4/B,MAAMokH,SAAS3gE,GACZ,QAAtB55C,EAAAwtG,MAAAA,OAAA,EAAAA,EAAOqe,uBAAe,IAAA7rH,GAAAA,EAAE9U,SACxB2gI,EAAgB3gI,aAIpB0gI,EAA6B/4J,SAAQ+mF,UACnC,MAAM4zD,EAAQj3I,KAAK4/B,MAAMokH,SAAS3gE,GAClC,GAAI4zD,EAGF,GAFAj3I,KAAKu1J,4BAA4Bte,EAAMpxD,SAAUwvE,GAExB,UAArBpe,EAAMqe,uBAAe,IAAA7rH,OAAA,EAAAA,EAAEw3G,0BACzBhK,EAAMqe,gBAAgBxc,kBAAkBqc,EAAar5J,IAAIunF,QACpD,CACL,MAAMiyE,EAAkB76J,SAAS+E,eAAewhJ,GAAmBpkJ,UAAYymF,GAC3EiyE,GACFA,EAAgB3gI,SAEEsiH,EAAMr9I,SAAS86B,KACvB/mB,aAAa03I,GAAaK,qBAAqByP,EAAar5J,IAAIunF,IAAS4zD,EAAMwE,iBAAiBl5G,UAM5GgzH,4BAA4B1vE,EAAoBwvE,SAClDA,EAA6B3hJ,SAASmyE,EAASxC,QAC1B,QAAvB55C,EAAAo8C,EAAS8yB,sBAAc,IAAAlvE,GAAAA,EAAE/0B,KAAKmpG,KAI1Bq0C,sBAAsB16H,GAC5B,MAAM09H,EAAiC,CACrCj7C,GAAUS,mBACVT,GAAU6N,iBACV7N,GAAUkS,iBACVlS,GAAUq2B,gBACVr2B,GAAU+1B,oBAENmlB,EAAsC,IAAIp6J,IAChDy8B,EACG79B,QAAOo2F,IAAOmlE,EAAkBxhJ,SAASq8E,EAAG0qB,aAC5Ct8G,KAAI4xF,GAAMA,EAAGvJ,WAAa,KAC1B5yB,OACAt3D,SAAQrB,GAAKk6J,EAAal5J,IAAIhB,EAAEooF,KAAOpoF,KAE1C,MAAMurF,EAAwB,IAAI2uE,EAAa1hI,UACzC+hI,EAA2BhvE,EAAU7sF,QAAOsB,IAAMA,EAAEupF,UAASrmF,KAAIlD,GAAKA,EAAEooF,OACxEoyE,EAA2BjvE,EAAU7sF,QAAOsB,GAAKA,EAAEupF,SAAWulC,GAAmB9uH,EAAEupF,WAAUrmF,KAAIlD,GAAKA,EAAEooF,OAG9GmyE,EAAyBl5J,SAAQ+mF,UAE/B,GADyB5oF,SAAS+E,eAAeo6I,GAAoBh9I,UAAYymF,GAC3D,CACpB,MAAM4zD,EAAQj3I,KAAK4/B,MAAMokH,SAAS3gE,GACX,QAAvB55C,EAAAwtG,MAAAA,OAAA,EAAAA,EAAOuE,wBAAgB,IAAA/xG,GAAAA,EAAE9U,aAK7B8gI,EAAyBn5J,SAAQ+mF,UAC/B,MAAM4zD,EAAQj3I,KAAK4/B,MAAMokH,SAAS3gE,GAClC,GAAI4zD,EACF,GAA0B,UAAtBA,EAAMuE,wBAAgB,IAAA/xG,OAAA,EAAAA,EAAEqwG,wBAC1B7C,EAAMuE,iBAAiB1C,kBAAkBqc,EAAar5J,IAAIunF,QACrD,CACe4zD,EAAMr9I,SAAS86B,KACvB/mB,aAAa03I,GAAaM,sBAAsBwP,EAAar5J,IAAIunF,IAAS4zD,EAAMwE,iBAAiBl5G,UAU7G6vH,+BACN,MAAMsD,EAAc7sE,GAAsBioD,GAAU78C,WAAWu5C,gBAAgBxyC,UAC/Eh7F,KAAK21J,0BAA4B31J,KAAK21J,wBAAwBv8J,SAA2B,IAAhBs8J,GACzE11J,KAAK41J,2BAA6B51J,KAAK41J,yBAAyBx8J,SAA2B,IAAhBs8J,KAlhDjDliE,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAsE0tJ,GAAApzJ,UAAA,sBAAA,GAGxFu7F,GAAA,CADCppE,GAAM,sBACkCihI,GAAApzJ,UAAA,kBAAA,GAGzCu7F,GAAA,CADCppE,GAAM,wBACsCihI,GAAApzJ,UAAA,oBAAA,GAG7Cu7F,GAAA,CADCppE,GAAM,+BACkDihI,GAAApzJ,UAAA,0BAAA,GAGzDu7F,GAAA,CADCppE,GAAM,6BAC6CihI,GAAApzJ,UAAA,+BAAA,GAGpDu7F,GAAA,CADCppE,GAAM,8BAC8CihI,GAAApzJ,UAAA,gCAAA,GA4DrDu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,WACkBm5F,GAAApzJ,UAAA,mCAAA,GA5EzBozJ,GAAe73D,GAAA,CAD3B0+C,GAAc,qBACFmZ,IIrEb,IAAawK,GAAb,cAAuCz6F,GAAvCj+D,kCA8CU6C,KAAa81J,cAAG,eACtB,OAAA17J,EAAI,qBAAqB4F,KAAK6lF,SAAS0mB;mCACRwmC,GAAyC,QAA9Bn2D,UAAA5X,EAAe,QAAfv7B,EAAAzpC,KAAK6lF,gBAAU,IAAAp8C,OAAA,EAAAA,EAAAqvD,+BAAU7L,aAAK,IAAArQ,EAAAA,EAAI,WAEtE58E,KAAe+1J,gBAAG,eACxB,OAAA37J,EAAI;gCACwB,iBAAuC,GAAtB4F,KAAK6lF,SAAS2yB;+BAChCx4G,KAAK6lF,SAAS0mB;UACnCwmC,GAAyC,QAA9Bn2D,EAAuB,QAAvB5X,EAAa,QAAbv7B,EAAAzpC,KAAK6lF,gBAAQ,IAAAp8C,OAAA,EAAAA,EAAEqvD,gBAAQ,IAAA9zB,OAAA,EAAAA,EAAEioB,aAAK,IAAArQ,EAAAA,EAAI;;OAhBrD7mF,SACE,OAAOqE,EAAI;;gCAEiB4F,KAAK6lF,SAAS4mB,UAAYzsG,KAAK81J,gBAAkB91J,KAAK+1J;;QAtC7EF,GAAMt/G,OAAGwgC,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAFSyc,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAA8Bk4J,GAAA59J,UAAA,gBAAA,GADrC49J,GAAiBriE,GAAA,CAD7B0+C,GAAc,uBACF2jB,ICHb,IAAaG,GAAb,cAAsC56F,GA6CpCrlE,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA7CN47J,GAAMz/G,OAAGwgC,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IADRi/E,GAAgBxiE,GAAA,CAD5B0+C,GAAc,sBACF8jB,ICFN,MAAMC,GAAqB77J,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECAzB87J,GAAgB97J,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCA3BkwB,GAAYiM,MAAMoG,OAAO,mBACzB/R,GAAQ2L,MAAMoG,OAAO,eACrBjL,GAAa6E,MAAMoG,OAAO,qBAC1B1S,GAAYsM,MAAMoG,OAAO,aAE/B,MAAMw5H,WAAoB7rI,GACxB3W,cAAchd,GACZ,OAAOoJ,MAAMoqB,OAAOxzB,IAWxBw/J,GAAYjpI,SAAW,UACvBipI,GAAY3pI,QAAU,UACtB2pI,GAAYjqI,MAAQjC,GAAUC,MAAM8J,WACpCmiI,GAAYnhI,aAAe,QAC3BmhI,GAAYlhI,gBAAkB,CAACrK,GAAO8G,GAAYpH,ICrBlD,MAAMA,GAAYiM,MAAMoG,OAAO,mBACzB/R,GAAQ2L,MAAMoG,OAAO,eACrBjL,GAAa6E,MAAMoG,OAAO,qBAC1B1S,GAAYsM,MAAMoG,OAAO,aAE/B,MAAMy5H,WAAkBD,GACtBxiJ,cAAchd,GAEZ,IAAIc,EAAOsI,MAAMoqB,OADD,MAEZv0B,EAAMe,EAAMkY,MAAM,KAatB,OAZApX,EAAKiF,aAAa,WAAY9G,EAAI,IAClC6B,EAAKiF,aAAa,SAAU9G,EAAI,IAChC6B,EAAKiF,aAAa,UAAW9G,EAAI,IAC7BA,EAAI,IACN6B,EAAKiF,aAAa,WAAY9G,EAAI,IAEhCA,EAAI,IACN6B,EAAKiF,aAAa,UAAW9G,EAAI,IAE/BA,EAAI,IACN6B,EAAKiF,aAAa,UAAW9G,EAAI,IAE5B6B,EAGTk8B,UAEAH,UAEE,MAAO,CACL,CAACxzB,KAAK+0B,QAAQ7H,UACZ,CACEltB,KAAKuzB,QAAQ92B,aAAa,YAC1BuD,KAAKuzB,QAAQ92B,aAAa,UAC1BuD,KAAKuzB,QAAQ92B,aAAa,WAC1BuD,KAAKuzB,QAAQ92B,aAAa,YAC1BuD,KAAKuzB,QAAQ92B,aAAa,WAC1BuD,KAAKuzB,QAAQ92B,aAAa,YAC1BsS,KAAK,MAIbyzB,SAAS5N,GACP70B,MAAMyiC,SAAS5N,GAEf,IAAI39B,EAAS+I,KAAK/I,OAClB,GAAc,MAAVA,EAAgB,CAClB,GAAgC,OAA5BA,EAAO89B,QAAQ7H,SAGjB,OAFAltB,KAAKo+B,aAAannC,EAAQ+I,WAC1BA,KAAK20B,SAEA,GAAgC,OAA5B19B,EAAO89B,QAAQ7H,SAAmB,CAE3C,IAAI4wB,EAAO7zB,GAAUE,OAAO,SAC5BnqB,KAAK/I,OAAO0W,aAAamwC,EAAM99C,KAAKnI,MACpC,IAAIue,EAAQ6T,GAAUE,OAAO,QAASnqB,KAAKuzB,QAAQ92B,aAAa,aAC5D45J,EAAKpsI,GAAUE,OAAO,KAAMnqB,KAAKuzB,QAAQ92B,aAAa,WAC1D2Z,EAAMksB,YAAY+zH,GAClBA,EAAG/zH,YAAYtiC,MACfoW,EAAM3a,QAAQqiD,IAKlB,IAAIjmD,EAAOmI,KAAKnI,KACJ,MAARA,GAAgBA,EAAK0qC,OAASviC,MAChCnI,EAAKk9B,QAAQ7H,WAAaltB,KAAK+0B,QAAQ7H,UACvCr1B,EAAK07B,QAAQ/G,UAAYxsB,KAAKuzB,QAAQ/G,SACtC30B,EAAK07B,QAAQ92B,aAAa,aAAeuD,KAAKuzB,QAAQ92B,aAAa,aAEnE5E,EAAKumC,aAAap+B,MAClBnI,EAAK88B,UAIThnB,aAAai8B,EAAWC,GACtB,GAAoC,MAAhC7pC,KAAK+0B,QAAQE,kBAA4Bj1B,KAAK+0B,QAAQE,gBAAgB6U,MAAK,SAAUjV,GACvF,OAAO+U,aAAqB/U,KAC1B,CACF,IAAInnB,EAAWuc,GAAUE,OAAOnqB,KAAK+0B,QAAQC,cAC7CtnB,EAAS40B,YAAYsH,GACrBA,EAAYl8B,EAEd3N,MAAM4N,aAAai8B,EAAWC,GAGhCpuC,QAAQ1E,GACN,GAAIA,EAAOg+B,QAAQ7H,WAAaltB,KAAK+0B,QAAQ7H,SAAU,CACrD,IAAI90B,EAAO6xB,GAAUE,OAAOnqB,KAAK+0B,QAAQC,cACzCj+B,EAAOqnC,aAAahmC,GACpB4H,KAAKsiC,YAAYlqC,GAEE,MAAjBrB,EAAOE,QACX8I,MAAMtE,QAAQ1E,GAGhBqnC,aAAa6L,EAAclR,GACzB/4B,KAAKpG,SAAS0C,SAAQ,SAAUu4B,GAC9BoV,EAAat8B,aAAaknB,EAAOkE,OAKvCq9H,GAAUlpI,SAAW,KACrBkpI,GAAU5pI,QAAU,KACpB4pI,GAAUx5J,UAAY,OACtBw5J,GAAUlqI,MAAQjC,GAAUC,MAAM8J,WAClCoiI,GAAUnhI,gBAAkB,CAACrK,GAAO8G,GAAYpH,IC3GhD,MAAML,GAAYsM,MAAMoG,OAAO,aAE/B,MAAM25H,GAEJ3iJ,gBAAgBkP,EAAMnQ,GACpB4jJ,GAAa13J,QAAQ8V,KAAK,CAAEmO,KAAAA,KAASnQ,IAIvCiB,WAAWisB,GACT,IAAK02H,GAAa13J,QAAQ5E,OAAQ,OAElC,MAAMu8J,EAAsB32H,EAAMvI,QAAQ+hB,aAE1CxZ,EAAMvI,QAAQ+hB,cAAe,EAC7BxZ,EAAMvI,QAAQ8hB,aAAe,EAG7BlkC,YAAW,KAET2qB,EAAMvI,QAAQ+hB,aAAem9G,EAG7B,MAAMh3J,EAAKi3J,GAAWC,YACtB72H,EAAMvI,QAAQq/H,WAAWn3J,GAAM+2J,GAAa13J,QAG5CghC,EAAMvI,QAAQqiB,MAAMH,KAAK7kC,KAAK,CAAEmO,KAAM,eAAgBtjB,GAAIA,IAE1D+2J,GAAa13J,QAAU,KACtB,GAGL+U,YAAYisB,EAAOrgC,GACjB,MAAMg3J,EAAsB32H,EAAMvI,QAAQ+hB,aAC1CxZ,EAAMvI,QAAQ+hB,cAAe,EAE7B,MAAMu9G,EAAQ/2H,EAAMvI,QAAQq/H,WAAWn3J,QAClB,IAAVo3J,GAETA,EAAMv0H,UAAU9lC,SAAQoW,IACtB,MAAM0qB,EAAWwC,EAAMjF,cACvB,OAAQjoB,EAAOmQ,MACb,IAAK,SAEHyzI,GAAa3hI,OAAOjiB,GACpB,MACF,IAAK,SAEH4jJ,GAAaxoI,OAAOpb,GACpB,MACF,IAAK,QAEH4jJ,GAAaM,MAAMlkJ,GAAQ,GAE3B8jJ,GAAWK,eAAej3H,EAAOxC,GACjC,MACF,IAAK,QAEHk5H,GAAaznJ,MAAM6D,GAAQ,GAC3B,MACF,IAAK,iBAEH4jJ,GAAaQ,eAAepkJ,GAAQ,OAO5CuC,YAAW,KAET,MAAM8hJ,EAAen3H,EAAMvI,QAAQqiB,MAAMH,KAAKjrB,MAC9CsR,EAAMvI,QAAQqiB,MAAMF,KAAK9kC,KAAKqiJ,GAC9Bn3H,EAAMvI,QAAQ+hB,aAAem9G,IAC5B,GAGL5iJ,YAAYisB,EAAOrgC,GACjB,MAAMg3J,EAAsB32H,EAAMvI,QAAQ+hB,aAC1CxZ,EAAMvI,QAAQ+hB,cAAe,EAE7B,MAAMu9G,EAAQ/2H,EAAMvI,QAAQq/H,WAAWn3J,QAClB,IAAVo3J,GAETA,EAAMr6J,SAAQoW,IACZ,OAAQA,EAAOmQ,MACb,IAAK,SAEHyzI,GAAaxoI,OAAOpb,GACpB,MACF,IAAK,SAEH4jJ,GAAa3hI,OAAOjiB,GACpB,MACF,IAAK,QAEH4jJ,GAAaznJ,MAAM6D,GAAQ,GAC3B,MACF,IAAK,QAEH4jJ,GAAaM,MAAMlkJ,GAAQ,GAC3B,MACF,IAAK,iBAEH4jJ,GAAaQ,eAAepkJ,GAAQ,OAO5CuC,YAAW,KAET,MAAM8hJ,EAAen3H,EAAMvI,QAAQqiB,MAAMF,KAAKlrB,MAC9CsR,EAAMvI,QAAQqiB,MAAMH,KAAK7kC,KAAKqiJ,GAC9Bn3H,EAAMvI,QAAQ+hB,aAAem9G,IAC5B,GAGL5iJ,cAAcjB,GACZ,MAAMvb,EAAaub,EAAOvb,YAAcub,EAAOylD,SAAShhE,WACxD,GAAIA,EAAY,CACd,MAAM6/J,EAAc/sI,GAAU/c,KAAK/V,GACnC,GAAI6/J,EAAa,CACf,MAAMC,EAAQhtI,GAAUE,OAAOzX,EAAOjb,MACtC,GAAIib,EAAOylD,SAAU,CACnB,MAAM++F,EAAYjtI,GAAU/c,KAAKwF,EAAOylD,UACpC++F,GACFF,EAAYrpJ,aAAaspJ,EAAOC,QAGlCF,EAAY10H,YAAY20H,GAK5B,MAAME,EAAqC,UAAzBzkJ,EAAOjb,KAAK++E,SAAuB9jE,EAAOjb,KAAON,EAAW+X,QAAQ,SAMtF,OALAioJ,EAAUr6J,MAAMu0B,YAAY,WAA8E,aAAjErpB,OAAOsC,iBAAiB6sJ,GAAqB,UAAK,WAA2B,SAAW,WACjIliJ,YAAW,KACTkiJ,EAAUr6J,MAAMs6J,eAAe,cAC9B,IAEI,EAET,OAAO,EAGTzjJ,cAAcjB,GAEZ,OADAA,EAAOjb,KAAKk9B,UACL,EAGThhB,aAAajB,EAAQ2kJ,GACnB,MAAMhhJ,EAAK3D,EAAOjb,KAWlB,OATA4e,EAAG1O,gBAAgB,WACnB0O,EAAG1O,gBAAgB,WAEnB+K,EAAO4kJ,YAAYh7J,SAAQi7J,IACzBA,EAAK9/J,KAAKkQ,gBAAgB,YAC1B4vJ,EAAK9/J,KAAKkD,UAAY48J,EAAKF,EAAS,aAAe,iBAGrDhhJ,EAAG1b,UAAY+X,EAAO2kJ,EAAS,aAAe,eACvC,EAGT1jJ,aAAajB,EAAQ2kJ,GACnB,MAAMhhJ,EAAK3D,EAAOjb,KACZ+/J,EAAUnhJ,EAAG5Z,aAAa,WAWhC,OATA4Z,EAAG3Z,aAAa,UAAWgW,EAAO+kJ,SAClCphJ,EAAG3Z,aAAa,UAAWgW,EAAOglJ,SAElChlJ,EAAO4kJ,YAAYh7J,SAAQi7J,IACzBA,EAAK9/J,KAAKkD,UAAY48J,EAAKF,EAAS,aAAe,cACnDE,EAAK9/J,KAAKiF,aAAa,WAAY86J,MAGrCnhJ,EAAG1b,UAAY+X,EAAO2kJ,EAAS,aAAe,eACvC,EAGT1jJ,sBAAsBjB,EAAQ2kJ,GAC5B,MAAM5/J,KAAEA,EAAI+b,SAAEA,EAAQ3T,SAAEA,EAAQC,SAAEA,GAAa4S,EACzC/b,EAAQ0gK,EAASx3J,EAAWC,EACpB,OAAVnJ,EACFc,EAAKiF,aAAa8W,EAAU7c,GAE5Bc,EAAKkQ,gBAAgB6L,IAK3B8iJ,GAAa13J,QAAU,GCtMR,MAAM+4J,GACnBhkJ,WAAWisB,GACT,OAAIA,EAAM9oC,UAAUmnD,iBAAmBre,EAAM9oC,UAAUmnD,gBAAgBthD,WAAaijC,EAAM9oC,UAAUmnD,gBAAgBthD,UAAU+J,SAAS,cAC9Hk5B,EAAM9oC,UAAUmnD,gBAElB,KAGTtqC,cAAcisB,EAAOg4H,EAAU,GAAIv+H,GAAS,GAC1C,MAAM2D,EAAU26H,GAAa77J,IAAI8jC,GAC5B5C,IACkB,iBAAZ46H,IAAsBA,EAAU,CAACA,IAE5CA,EAAQt7J,SAAQ69G,IACd,IAAI5xD,EAAW,yCAAyC4xD,yBAA8BA,MAClFA,EAAOrhF,WAAW,MAAQqhF,EAAOtmF,SAAS,KAC5C00B,EAAW,0CAA0C4xD,EAAOv6D,UAAU,EAAGu6D,EAAOngH,OAAS,2BAA2BmgH,EAAOv6D,UAAU,EAAGu6D,EAAOngH,OAAS,OAC/ImgH,EAAOrhF,WAAW,KAC3ByvB,EAAW,0CAA0C4xD,EAAOv6D,UAAU,2BAA2Bu6D,EAAOv6D,UAAU,OACzGu6D,EAAOtmF,SAAS,OACzB00B,EAAW,0CAA0C4xD,EAAOv6D,UAAU,EAAGu6D,EAAOngH,OAAS,2BAA2BmgH,EAAOv6D,UAAU,EAAGu6D,EAAOngH,OAAS,QAG1JgjC,EAAQ7yB,iBAAiBo+C,GAAUjsD,SAAQlE,IACzCA,EAAKuE,UAAU08B,EAAS,MAAQ,UAAU,kBAKhD1lB,cAAcisB,EAAOg4H,GACnBD,GAAa3+J,OAAO4mC,EAAOg4H,GAAS,GAGtCjkJ,eAAeisB,EAAOg4H,GACpBD,GAAa3+J,OAAO4mC,EAAOg4H,GAAS,GAGtCjkJ,kBAAkBisB,GAChB,MAAM5C,EAAU26H,GAAa77J,IAAI8jC,GACjC,IAAK5C,EAAS,OAAO,EACrBA,EAAQ7yB,iBAAiB,+DAA+D7N,SAAQlE,GAAQA,EAAKuE,UAAUg4B,OAAO,aAGhIhhB,iBAAiBisB,EAAOu6E,GACtB,MAAMn9E,EAAU26H,GAAa77J,IAAI8jC,GACjC,IAAK5C,EAAS,OAAO,EACrB,MAAM5kC,EAAO4kC,EAAQ5xB,cAAc,yCAAyC+uG,yBAA8BA,OAC1G,OAAO/hH,GAAQA,EAAKuE,UAAU+J,SAAS,YC7C3C,MAAMmxJ,GACJlkJ,iBAAiBisB,EAAO3kC,EAAG68J,GAKzB,QAJ+Bv3J,IAA3Bu3J,IACFD,GAAeE,qBAAuBD,GAGxB,IAAZ78J,EAAEs0C,QAKNsoH,GAAeG,kBAETH,GAAeE,sBAAwB98J,EAAE4hB,SAAYg7I,GAAeE,sBAAqB,CAC7FF,GAAeI,aAAc,EAE7BJ,GAAeK,kBAAoB,CAACL,GAAeM,sBAAuBN,GAAeO,qBACzFP,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5EP,GAAeG,iBAEf,MAAMK,EAAaR,GAAeS,cAAcr9J,GAChD,IAAKo9J,EAGH,YADAR,GAAeU,YAAc,MAI/B,IAAMV,GAAeW,kBAAoBH,IAAeR,GAAeY,oBAAuBZ,GAAeU,cAAgBF,EAG3H,YADAR,GAAeU,YAAcF,GAK/Bp9J,EAAEqM,iBACFuwJ,GAAeU,YAAc,KAE7Bt/I,aAAa4+I,GAAea,iBAC5Bb,GAAea,gBAAkBzjJ,YAAW,KAC1C4iJ,GAAeW,kBAAmB,EAClCX,GAAeY,mBAAqB,OACnC,KACHZ,GAAeW,kBAAmB,EAElCX,GAAeM,sBAAwBN,GAAeY,mBAAqBJ,EAEvER,GAAeM,uBACjBN,GAAeM,sBAAsBx7J,UAAUE,IAAI,qBAKzD8W,iBAAiBisB,EAAO3kC,GACtB,GAAI48J,GAAeI,aAAeJ,GAAeM,sBAAuB,CACtE,MAAMQ,EAA8Bd,GAAeO,oBAGnD,GAFAP,GAAeO,oBAAsBP,GAAeS,cAAcr9J,GAGhE48J,GAAeO,qBACfP,GAAeO,sBAAwBO,GACvCd,GAAeM,sBAAsBjpJ,QAAQ,WAAa2oJ,GAAeO,oBAAoBlpJ,QAAQ,SACrG,CACA2oJ,GAAeG,iBAGf,MAAMzmF,EAASsmF,GAAee,qBAC9B,IAAK,IAAIvhJ,EAAIk6D,EAAO/G,KAAMnzD,GAAKk6D,EAAO9G,KAAMpzD,IAC1C,IAAK,IAAIqI,EAAI6xD,EAAOjH,KAAM5qD,GAAK6xD,EAAOhH,KAAM7qD,IAAK,CAC/C,IAAI63I,EAAOM,GAAegB,UAAUn5I,EAAGrI,GACnCkgJ,GACFA,EAAK56J,UAAUE,IAAI,uBAQ/B8W,eAAeisB,EAAO3kC,GACpB48J,GAAeI,aAAc,EACxBJ,GAAeO,sBAClBP,GAAeO,oBAAsBP,GAAeM,uBAIpDN,GAAeK,kBAAkB,KAAOL,GAAeM,uBACvDN,GAAeK,kBAAkB,KAAOL,GAAeO,qBAEvDP,GAAeiB,gBAAgBl5H,GAInCjsB,uBAAuBisB,EAAO9H,EAAQ,KAAMgR,EAAW,MACrD,IAAIy8C,GAAY,EAChB,GAAIsyE,GAAeM,uBAAyBN,GAAeO,oBAEzD7yE,GAAY,EACZoyE,GAAat+H,OAAOuG,EAAO,CAAC,aAAc,kBAAmB,yBACxD,CAGL,IAAIu4H,EAAuBC,EAC3B,GAFAT,GAAan/H,QAAQoH,EAAO,CAAC,aAAc,kBAAmB,qBAEhD,OAAV9H,GAA+B,OAAbgR,EAAmB,CAEvC,MAAOiwH,GAAan5H,EAAMkQ,QAAQhH,EAAS/xB,QACpCiiJ,GAAWp5H,EAAMkQ,QAAQhH,EAAS/xB,MAAQ+xB,EAAS9uC,QAC1Dm+J,EAAwBY,EAAU9hK,OAAOs8B,QACzC6kI,EAAsBY,EAAQ/hK,OAAOs8B,YAChC,CAEL,MAAMyD,EAAYhvB,OAAO2xB,eACzBw+H,EAAwBnhI,EAAUq5D,WAAcr5D,EAAUq5D,WAAWjnC,WAAa7rC,KAAK6O,UAAY4K,EAAUq5D,WAAW4oE,cAAgBjiI,EAAUq5D,WAAc,KAChK+nE,EAAsBphI,EAAUu7D,UAAav7D,EAAUu7D,UAAUnpC,WAAa7rC,KAAK6O,UAAY4K,EAAUu7D,UAAU0mE,cAAgBjiI,EAAUu7D,UAAa,KAG5J,GAAI4lE,GAAyBC,EAAqB,CAEhD,IAAIc,EAAef,EAAsBjpJ,QAAQ,SAC7CgqJ,GAAgBA,EAAahqJ,QAAQ,gBACnCkpJ,IAAwBD,GAC1Be,EAAed,EAAoBlpJ,QAAQ,SAC3Cq2E,EAAY2zE,GAAgBA,EAAahqJ,QAAQ,eAEjDq2E,GAAY,KAMfA,GAAa3lD,EAAMxpB,MAAMmvE,YAE5B3lD,EAAMxpB,MAAMmvE,WAAY,EACxBoyE,GAAawB,WAAWv5H,GACxB+3H,GAAat+H,OAAOuG,EAAO,CAAC,aAAc,SAAU,OAAQ,UAG1D2lD,IAAc3lD,EAAMxpB,MAAMmvE,YAE5B3lD,EAAMxpB,MAAMmvE,WAAY,EACxBoyE,GAAat+H,OAAOuG,EAAO,CAAC,cAAe,cAAe,cAAe,aAAc,aAAc,yBAA0B,2BAA4B,kBAI/JjsB,4BACE,GAAIkkJ,GAAeM,uBAAyBN,GAAeO,oBAAqB,CAC9E,MAAM7mF,EAAS,CACb,CACEv5E,MAAMC,UAAUqG,QAAQnG,KAAK0/J,GAAeM,sBAAsBc,cAAcr/J,SAAUi+J,GAAeM,uBACzGngK,MAAMC,UAAUqG,QAAQnG,KAAK0/J,GAAeM,sBAAsBc,cAAcA,cAAcr/J,SAAUi+J,GAAeM,sBAAsBc,gBAE/I,CACEjhK,MAAMC,UAAUqG,QAAQnG,KAAK0/J,GAAeO,oBAAoBa,cAAcr/J,SAAUi+J,GAAeO,qBACvGpgK,MAAMC,UAAUqG,QAAQnG,KAAK0/J,GAAeO,oBAAoBa,cAAcA,cAAcr/J,SAAUi+J,GAAeO,oBAAoBa,iBAI7I,MAAO,CACL1nF,OAAAA,EACAjH,KAAM5/D,KAAKgR,IAAI61D,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvChH,KAAM7/D,KAAKC,IAAI4mE,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvC/G,KAAM9/D,KAAKgR,IAAI61D,EAAO,GAAG,GAAIA,EAAO,GAAG,IACvC9G,KAAM//D,KAAKC,IAAI4mE,EAAO,GAAG,GAAIA,EAAO,GAAG,KAG3C,OAAO,KAGT59D,iBAAiB+L,EAAGrI,GAClB,MAAM+hJ,EAAevB,GAAeM,sBAAsBjpJ,QAAQ,SAClE,OAAIkqJ,QACsC,IAA7BA,EAAax/J,SAASyd,SAAsE,IAAzC+hJ,EAAax/J,SAASyd,GAAGzd,SAAS8lB,GACvF05I,EAAax/J,SAASyd,GAAGzd,SAAS8lB,GAGtC,KAGT/L,qBAAqB1Y,GACnB,IAAIpC,EAAUoC,EAAElE,OACZwgK,EAAO,KACX,EAAG,CACD,GAAI,CAAC,KAAM,MAAM7jJ,SAAS7a,EAAQ2zB,QAAQ51B,eAAgB,CACxD2gK,EAAO1+J,EACP,MAEFA,EAAUA,EAAQ1B,iBACX0B,GAAWA,IAAYoC,EAAEo+J,eAClC,OAAO9B,EAGT5jJ,sBAAsB7c,GAEpB2D,SAAS0P,iBAAiB,kCAAkC7N,SAAQi7J,IAClEA,EAAK56J,UAAUg4B,OAAO,wBAK5BkjI,GAAeU,YAAc,KAC7BV,GAAeI,aAAc,EAC7BJ,GAAeM,sBAAwB,KACvCN,GAAeO,oBAAsB,KACrCP,GAAeK,kBAAoB,GAEnCL,GAAea,gBAAkB,KACjCb,GAAeY,mBAAqB,KACpCZ,GAAeW,kBAAmB,EAClCX,GAAeE,sBAAuB,EC7MtC,MAAM9tI,GAAYsM,MAAMoG,OAAO,aACzBrS,GAAYiM,MAAMoG,OAAO,mBACzBhS,GAAS4L,MAAMoG,OAAO,gBAEb,MAAM65H,GACnB7iJ,mBACE,OAAOjJ,KAAK2rD,SAASxrD,SAAS,IAAIoT,MAAM,GAG1CtK,eAAeisB,GACb,IAAI/S,EAAO,KACX,MAAMmK,EAAY4I,EAAMjG,eAIxB,OAHI3C,IACFnK,EAAO+S,EAAMkQ,QAAQ9Y,EAAiB,OAAG,IAEpCnK,EAGTlZ,eAAeisB,GACb,IAAI/S,EAAO2pI,GAAW8C,QAAQ15H,GAC9B,GAAI/S,EACF,KAAe,MAARA,GAA0C,OAA1BA,EAAKkI,QAAQ7H,UAClCL,EAAOA,EAAK51B,OAGhB,OAAO41B,EAGTlZ,oBAAoBisB,GAClB,IAAIvpB,EAAKmgJ,GAAW+C,QAAQ35H,GAC5B,GAAGvpB,EACD,OAAOA,EAAGkd,QAId5f,kBAAkBisB,GAChB,MAAMvpB,EAAKmgJ,GAAW+C,QAAQ35H,GAC9B,GAAIvpB,EACF,OAAOA,EAAGpf,OAAOA,OAIrB0c,uBAAuBisB,GACrB,MAAMxpB,EAAQogJ,GAAWgD,WAAW55H,GACpC,GAAIxpB,EACF,OAAOA,EAAMmd,QAKjB5f,gBAAgBqkD,GAEd,IAAIp4B,EAAQ,KASZ,GARIo4B,aAAcz6C,MACXy6C,aAAc56D,UACjB46D,EAAKA,EAAGihG,eAEa,iBAAPjhG,QAAyC,IAAfA,EAAGzkC,UAC7CykC,EAAKA,EAAGzkC,SAGNykC,aAAc56D,QAAS,CACzB,MAAMq8J,EAAazhG,EAAG9oD,QAAQ,iBAC1BuqJ,IACF75H,EAAQrJ,MAAMrpB,KAAKusJ,IAGvB,OAAO75H,EAGTjsB,mBAAmBisB,EAAO85H,EAAWC,GACnC,MAAMC,EAAWpD,GAAWC,YACtBrgJ,EAAQ6T,GAAUE,OAAO,QAASyvI,GACxC,IAAK,IAAIC,EAAK,EAAGA,EAAKF,EAAWE,IAAM,CACrC,MAAMC,EAAStD,GAAWC,YACpBJ,EAAKpsI,GAAUE,OAAO,KAAM2vI,GAClC1jJ,EAAMksB,YAAY+zH,GAClB,IAAK,IAAI0D,EAAK,EAAGA,EAAKL,EAAWK,IAAM,CACrC,MACMpjK,EAAQ,CAACijK,EAAUE,EADTtD,GAAWC,aACe1nJ,KAAK,KACzCsH,EAAK4T,GAAUE,OAAO,KAAMxzB,GAClC0/J,EAAG/zH,YAAYjsB,GACf,MAAMnE,EAAI+X,GAAUE,OAAO,SAC3B9T,EAAGisB,YAAYpwB,GACf,MAAM8nJ,EAAK/vI,GAAUE,OAAO,SAC5BjY,EAAEowB,YAAY03H,IAGlB,IAAIntI,EAAO2pI,GAAW8C,QAAQ15H,GAC1Bq6H,EAAa,KACjB,KAAe,MAARptI,KAAkBA,aAAgBvC,IAAauC,aAAgBlC,KACpEsvI,EAAaptI,EACbA,EAAOA,EAAK51B,OAEd41B,EAAKlf,aAAayI,EAAO6jJ,GAK3BtmJ,mBAAmBisB,GACjB,MAAM2xC,EAASsmF,GAAee,qBAE9B,IAAIxiJ,EACJ,GAFAyhJ,GAAeG,eAAep4H,EAAM9oC,WAEhCy6E,EAAQ,CACV,MAAM2oF,EAASrC,GAAeM,sBAAsBjpJ,QAAQ,SAC5DkH,EAAQ6T,GAAU/c,KAAKgtJ,OAClB,CACL,MAAM7jJ,EAAKmgJ,GAAW+C,QAAQ35H,GAC1BvpB,IACFD,EAAQC,EAAGpf,OAAOA,QAIlBmf,IACFkgJ,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM2e,EAAMmd,QAAS4kC,SAAU/hD,EAAMve,KAAOue,EAAMve,KAAK07B,QAAU,KAAMp8B,WAAYif,EAAMnf,OAAOs8B,UAClI+iI,GAAaz5J,IAAI+iC,GACjBxpB,EAAMue,UAKVhhB,wBAAwBisB,EAAOngB,GAC7B,MACM06I,EAAa,SADA16I,EAAQ,MAErBrJ,EAAQogJ,GAAWgD,WAAW55H,GAEpC,GAAIxpB,EAAO,CACT,MAAM+gJ,EAAY/gJ,EAAMmd,QACxB+iI,GAAajsI,SAAS,iBAAiB,CAAE5yB,KAAM0/J,EAAW3jJ,SAAU,QAAS3T,SAAUs3J,EAAUr6J,MAAOgD,SAAUq6J,IAClHhD,EAAUz6J,aAAa,QAASy9J,GAChC7D,GAAaz5J,IAAI+iC,IAIrBjsB,cAAcisB,EAAO5oB,EAAY,SAG/B,MAAMu6D,EAASsmF,GAAee,qBAC9B,IAAIviJ,EAAKmgJ,GAAW+C,QAAQ35H,GAC5B,GAAI2xC,EAAQ,CACV,MAAMgmF,EAAOM,GAAegB,UAAUtnF,EAAOhH,KAAMgH,EAAO/G,OAASqtF,GAAegB,UAAUtnF,EAAOhH,KAAMgH,EAAO9G,MAC5G8sF,IACFlhJ,EAAK4T,GAAU/c,KAAKqqJ,IAIxB,GAAIlhJ,EAAI,CACN,GAAkB,WAAdW,GAA0BX,EAAGkd,QAAQ92B,aAAa,WAAY,CAEhE,MAAM29J,EAAU/jJ,EAAGpf,OAAOs8B,QAAQ35B,SAChC5B,MAAMC,UAAUqG,QAAQnG,KAAKke,EAAGpf,OAAOs8B,QAAQ35B,SAAUyc,EAAGkd,SAAW/rB,OAAOiD,SAAS4L,EAAGkd,QAAQ92B,aAAa,YAAc,GAE3H29J,IACF/jJ,EAAK4T,GAAU/c,KAAKktJ,IAKxB,MAAMrjJ,EAAQ/e,MAAMC,UAAUqG,QAAQnG,KAAKke,EAAGpf,OAAOs8B,QAAQ35B,SAAUyc,EAAGkd,UAA0B,WAAdvc,EAAyB,EAAI,GAE7GqjJ,EAAYtjJ,IAAUV,EAAGpf,OAAOs8B,QAAQ35B,SAASI,OACjDoc,EAAQC,EAAGpf,OAAOA,OAClB2iK,EAAWxjJ,EAAMmd,QAAQ92B,aAAa,YAC5C,IAAI69J,EAAuB,GAE3BlkJ,EAAMxc,SAAS0C,SAAQ,SAAU+5J,GAC/B,MAAMyD,EAASzD,EAAG9iI,QAAQ92B,aAAa,UACjC+6J,EAAUhB,GAAWC,YACrB8D,EAAStwI,GAAUE,OAAO,KAAM,CAACyvI,EAAUE,EAAQtC,GAASzoJ,KAAK,MAEvE,IAAKsrJ,GAAatjJ,IAAUs/I,EAAG9iI,QAAQ35B,SAASI,OAC9C,QAA0C,IAA/Bq8J,EAAG9iI,QAAQ35B,SAASmd,GAC7Bs/I,EAAG/zH,YAAYi4H,GACfjE,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM8iK,EAAOhnI,QAASp8B,WAAYk/J,EAAG9iI,cAClE,CACL,MAAMld,EAAK4T,GAAU/c,KAAKmpJ,EAAG9iI,QAAQ35B,SAASmd,IAC9C,GAAIV,EAAI,CAEN,GAAIA,EAAGkd,QAAQ0qB,gBAAiB,CAC9B,IAAIu8G,EAAWnkJ,EAAGkd,QAAQ0qB,gBAAgBxhD,aAAa,YAMvD,GALiB+K,OAAOiD,SAAS4L,EAAGkd,QAAQ0qB,gBAAgBxhD,aAAa,YAAc,GACxE,IACb+9J,EAAWnkJ,EAAGkd,QAAQ0qB,gBAAgBxhD,aAAa,YAGjD+9J,IACFD,EAAOhnI,QAAQ72B,aAAa,WAAY89J,IACQ,IAA5CF,EAAqBh8J,QAAQk8J,IAAkB,CACjDF,EAAqB5lJ,KAAK8lJ,GAC1B,MAAMC,EAAQrkJ,EAAMmd,QAAQnoB,cAAc,eAAiBovJ,EAAW,MACtE,GAAIC,EAAO,CACT,MAAMhD,EAAUjwJ,OAAOiD,SAASgwJ,EAAMh+J,aAAa,YACnDg+J,EAAM/9J,aAAa,UAAW+6J,EAAU,GACxCnB,GAAajsI,SAAS,iBAAkB,CAAE5yB,KAAMgjK,EAAOjnJ,SAAU,UAAW3T,SAAU43J,EAAS33J,SAAU23J,EAAU,MAK3HpB,EAAG1oJ,aAAa4sJ,EAAQlkJ,GACxBigJ,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM8iK,EAAOhnI,QAAS4kC,SAAU9hD,EAAGkd,eAK7E+iI,GAAaz5J,IAAI+iC,IAIrBjsB,cAAcisB,EAAO5oB,EAAY,SAG/B,MAAMu6D,EAASsmF,GAAee,qBAC9B,IAAIviJ,EAAKmgJ,GAAW+C,QAAQ35H,GAC5B,GAAI2xC,EAAQ,CACV,MAAMgmF,EAAOM,GAAegB,UAAUtnF,EAAOjH,KAAMiH,EAAO9G,OAASotF,GAAegB,UAAUtnF,EAAOhH,KAAMgH,EAAO9G,MAC5G8sF,IACFlhJ,EAAK4T,GAAU/c,KAAKqqJ,IAIxB,GAAIlhJ,EAAI,CACN,MAAMggJ,EAAKhgJ,EAAGpf,OACRyiK,EAAYrD,EAAG9iI,QAAQ35B,SAASI,OAChCoc,EAAQigJ,EAAGp/J,OACXyjK,EAAUrE,EAAG/zJ,QAEnB,IAAIyU,EAAQ/e,MAAMC,UAAUqG,QAAQnG,KAAKie,EAAMmd,QAAQ35B,SAAUy8J,EAAG9iI,UAA0B,WAAdvc,EAAyB,EAAI,GAEzG2jJ,GAAsB,EAC1B,MAAMjD,EAAUlwJ,OAAOiD,SAAS4L,EAAGkd,QAAQ92B,aAAa,YAAc,GAClEi7J,EAAU,IACZiD,GAAsB,EACJ,WAAd3jJ,IAEFD,GAAS2gJ,EAAU,IAIvB,MAAMkC,EAAWxjJ,EAAMmd,QAAQ92B,aAAa,YACtCq9J,EAAStD,GAAWC,YAC1BiE,EAAQnnI,QAAQ72B,aAAa,SAAUo9J,GACvC,IAAIQ,EAAuB,GACvBM,EAAyB,GAE7B,IAAK,IAAI1gK,EAAI,EAAGA,EAAIw/J,EAAWx/J,IAAK,CAClC,MAAM2gK,EAAYxE,EAAG9iI,QAAQ35B,SAASM,GAChCs9J,EAAUhB,GAAWC,YACrBpgJ,EAAK4T,GAAUE,OAAO,KAAM,CAACyvI,EAAUE,EAAQtC,GAASzoJ,KAAK,MACnE,GAAI8rJ,GAAaF,EAAqB,CAEpC,IAAIH,EAAUM,EAed,GAdID,EAAUp+J,aAAa,YACzB+9J,EAAWK,EAAUp+J,aAAa,WAClCq+J,EAAcD,EACI,WAAd7jJ,IAEgD,IAA9C4jJ,EAAuBt8J,QAAQk8J,IACjCI,EAAuBlmJ,KAAK8lJ,IAGvBK,EAAUp+J,aAAa,cAChC+9J,EAAWK,EAAUp+J,aAAa,YAClCq+J,EAAc1kJ,EAAMmd,QAAQnoB,cAAc,eAAiBovJ,EAAW,OAGpEA,GAAYM,IAA6D,IAA9CF,EAAuBt8J,QAAQk8J,IAAoBM,EAAYr+J,aAAa,WAAY,CAErH,IAAIs+J,EAAgBvzJ,OAAOiD,SAASqwJ,EAAYr+J,aAAa,YACzDs+J,EAAgB,KAC8B,IAA5CT,EAAqBh8J,QAAQk8J,KAC/BF,EAAqB5lJ,KAAK8lJ,GAC1BM,EAAYp+J,aAAa,UAAWq+J,EAAgB,GACpDzE,GAAajsI,SAAS,iBAAkB,CAAE5yB,KAAMqjK,EAAatnJ,SAAU,UAAW3T,SAAUk7J,EAAej7J,SAAUi7J,EAAgB,KAEvI1kJ,EAAGkd,QAAQ72B,aAAa,WAAY89J,KAK1CE,EAAQp4H,YAAYjsB,GACpB,MAAMnE,EAAI+X,GAAUE,OAAO,SAC3B9T,EAAGisB,YAAYpwB,GACf,MAAM8nJ,EAAK/vI,GAAUE,OAAO,SAC5BjY,EAAEowB,YAAY03H,GAGhB,QAA6C,IAAlC5jJ,EAAMmd,QAAQ35B,SAASmd,GAChCX,EAAMksB,YAAYo4H,GAClBpE,GAAajsI,SAAS,SAAU,CAAE5yB,KAAMijK,EAAQnnI,QAASp8B,WAAYif,EAAMmd,cACtE,CACL,MAAMlT,EAAM4J,GAAU/c,KAAKkJ,EAAMmd,QAAQ35B,SAASmd,IAC9CsJ,IACFjK,EAAMzI,aAAa+sJ,EAASr6I,GAC5Bi2I,GAAajsI,SAAS,SAAU,CAAE5yB,KAAMijK,EAAQnnI,QAAS4kC,SAAU93C,EAAIkT,WAG3E+iI,GAAaz5J,IAAI+iC,IAIrBjsB,iBAAiBisB,GACf,MAAM2xC,EAASsmF,GAAee,qBAE9B,IAAIxiJ,EAAO4kJ,EAAUC,EACrB,GAFApD,GAAeG,eAAep4H,EAAM9oC,WAEhCy6E,EAAQ,CAEV,MAAM2oF,EAASrC,GAAeM,sBAAsBjpJ,QAAQ,SAC5DkH,EAAQ6T,GAAU/c,KAAKgtJ,GACvBc,EAAWzpF,EAAOjH,KAClB2wF,EAAe1pF,EAAOhH,KAAOgH,EAAOjH,KAAO,MACtC,CAEL2wF,EAAe,EACf,MAAMC,EAAc1E,GAAW+C,QAAQ35H,GACnCs7H,IACF9kJ,EAAQ8kJ,EAAYjkK,OAAOA,OAC3B+jK,EAAWhjK,MAAMC,UAAUqG,QAAQnG,KAAK+iK,EAAYjkK,OAAOs8B,QAAQ35B,SAAUshK,EAAY3nI,UAI7F,GAAInd,GAA6B,iBAAb4kJ,GAAiD,iBAAjBC,EAA2B,CAE7E,IAAK,IAAI/gK,EAAI,EAAGA,EAAI+gK,EAAc/gK,IAChCkc,EAAMxc,SAAS0C,SAAQ,SAAU+5J,GAC/B,MAAMhgJ,EAAKggJ,EAAG9iI,QAAQ35B,SAASohK,GAC/B,GAAI3kJ,EAAI,CACN,MAAMmkJ,EAAWnkJ,EAAG5Z,aAAa,YACjC,GAAI+9J,EAAU,CAEZ,MAAMjD,EAAOnhJ,EAAMmd,QAAQnoB,cAAc,eAAeovJ,OACxD,GAAIjD,EAAM,CACR,MAAME,EAAUjwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAClD86J,EAAK76J,aAAa,UAAW+6J,EAAU,GACvCnB,GAAajsI,SAAS,iBAAkB,CAAE5yB,KAAM8/J,EAAM/jJ,SAAU,UAAW3T,SAAU43J,EAAS33J,SAAU23J,EAAU,KAIlHphJ,EAAG5Z,aAAa,YAClB+5J,GAAW2E,OAAO9kJ,GAGpBigJ,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM4e,EAAI8hD,SAAU9hD,EAAGo0B,YAAatzC,WAAYk/J,EAAG9iI,UACrF,MAAM6nI,EAAMnxI,GAAU/c,KAAKmJ,GACvB+kJ,GACFA,EAAIzmI,aAKZkjI,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5E9B,GAAaz5J,IAAI+iC,IAIrBjsB,sBAAsBisB,EAAOngB,GAC3B,MAAM8xD,EAASsmF,GAAee,qBAE9B,IAAIxiJ,EAAO4kJ,EAAUC,EACrB,GAFApD,GAAeG,eAAep4H,EAAM9oC,WAEhCy6E,EAAQ,CAEV,MAAM2oF,EAASrC,GAAeM,sBAAsBjpJ,QAAQ,SAC5DkH,EAAQ6T,GAAU/c,KAAKgtJ,GACvBc,EAAWzpF,EAAOjH,KAClB2wF,EAAe1pF,EAAOhH,KAAOgH,EAAOjH,KAAO,MACtC,CAEL2wF,EAAe,EACf,MAAMC,EAAc1E,GAAW+C,QAAQ35H,GACnCs7H,IACF9kJ,EAAQ8kJ,EAAYjkK,OAAOA,OAC3B+jK,EAAWhjK,MAAMC,UAAUqG,QAAQnG,KAAK+iK,EAAYjkK,OAAOs8B,QAAQ35B,SAAUshK,EAAY3nI,UAI7F,GAAInd,GAA6B,iBAAb4kJ,GAAiD,iBAAjBC,EAA2B,CAC7E,MAAMI,EAAa57I,EAAQ,IAE3B,IAAK,IAAIvlB,EAAI,EAAGA,EAAI+gK,EAAc/gK,IAChCkc,EAAMxc,SAAS0C,SAAQ,SAAU+5J,GAC/B,MAAMhgJ,EAAKggJ,EAAG9iI,QAAQ35B,SAASohK,GAC3B3kJ,IACFigJ,GAAajsI,SAAS,iBAAkB,CAAE5yB,KAAM4e,EAAI7C,SAAU,QAAS3T,SAAUwW,EAAGoJ,MAAO3f,SAAUu7J,IACrGhlJ,EAAG3Z,aAAa,QAAS2+J,OAI/B/E,GAAaz5J,IAAI+iC,IAIrBjsB,iBAAiBisB,GACf,MAAM2xC,EAASsmF,GAAee,qBAC9Bf,GAAeG,eAAep4H,EAAM9oC,WAEpC,MAAMwkK,EAAqBjF,IACzB,IAAIiE,EAAuB,GAC3B,IAAIjE,EAAGz8J,UAAU0C,SAAQ,SAAS+Z,GAChC,MAAMmkJ,EAAWnkJ,EAAG5Z,aAAa,YACjC,GAAI+9J,IAAwD,IAA5CF,EAAqBh8J,QAAQk8J,GAAkB,CAE7D,MAAMjD,EAAOlB,EAAGl/J,WAAWiU,cAAc,eAAeovJ,OAExD,GADAF,EAAqB5lJ,KAAK8lJ,GACtBjD,EAAM,CACR,MAAMG,EAAUlwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAClD86J,EAAK76J,aAAa,UAAWg7J,EAAU,GACvCpB,GAAajsI,SAAS,iBAAkB,CAAE5yB,KAAM8/J,EAAM/jJ,SAAU,UAAW3T,SAAU63J,EAAS53J,SAAU43J,EAAU,KAIlHrhJ,EAAG5Z,aAAa,YAClB+5J,GAAW2E,OAAO9kJ,OAKxB,GAAIk7D,EAAQ,CAEV,MAAMn7D,EAAQyhJ,GAAeM,sBAAsBjpJ,QAAQ,SACrDqsJ,EAAWhqF,EAAO/G,KAClBgxF,EAAejqF,EAAO9G,KAAO8G,EAAO/G,KAAO,EAEjD,IAAK,IAAItwE,EAAI,EAAGA,EAAIshK,EAActhK,IAAK,CACrC,MAAMm8J,EAAKjgJ,EAAMxc,SAAS2hK,GAC1B,GAAIlF,EAAI,CACNiF,EAAkBjF,GAClBC,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM4+J,EAAIl+F,SAAUk+F,EAAG5rH,YAAatzC,WAAYif,IAClF,MAAMqlJ,EAAMxxI,GAAU/c,KAAKmpJ,GACvBoF,GACFA,EAAI9mI,eAIL,CAEL,MAAMte,EAAKmgJ,GAAW+C,QAAQ35H,GAC9B,GAAIvpB,EAAI,CACN,MAAMggJ,EAAKhgJ,EAAGpf,OACdqkK,EAAkBjF,EAAG9iI,SACrB+iI,GAAajsI,SAAS,SAAU,CAAE5yB,KAAM4+J,EAAG9iI,QAAS4kC,SAAUk+F,EAAGx+J,KAAOw+J,EAAGx+J,KAAK07B,QAAU,KAAMp8B,WAAYk/J,EAAGp/J,OAAOs8B,UACtH,MAAMkoI,EAAMxxI,GAAU/c,KAAKmpJ,EAAG9iI,SAC1BkoI,GACFA,EAAI9mI,UAIVkjI,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5E9B,GAAaz5J,IAAI+iC,GAGnBjsB,iBAAiBisB,GAEf,MAAM2xC,EAASsmF,GAAee,qBAC9Bf,GAAeG,eAAep4H,EAAM9oC,WACpC,IAAIuf,EAAKmgJ,GAAW+C,QAAQ35H,GAC5B,GAAI2xC,GAAUA,EAAOhH,KAAOgH,EAAOjH,MAAS,GAAKiH,EAAO9G,KAAO8G,EAAO/G,MAAS,EAAG,CAChF,MAAM4wF,EAAMvD,GAAegB,UAAUtnF,EAAOjH,KAAMiH,EAAO/G,MACzDn0D,EAAK4T,GAAU/c,KAAKkuJ,GAGlB/kJ,GAAMmgJ,GAAW2E,OAAO9kJ,EAAGkd,WAG7BskI,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAE5E/hJ,EAAGkd,QAAQ54B,UAAY0b,EAAGkd,QAAQ54B,UAClC27J,GAAaz5J,IAAI+iC,IAIrBjsB,sBAAsBisB,GAEpB,MAAM2xC,EAASsmF,GAAee,qBAE9B,GADAf,GAAeG,eAAep4H,EAAM9oC,WAChCy6E,EAAQ,CACV,MAAMn7D,EAAQyhJ,GAAeM,sBAAsBjpJ,QAAQ,SACrDuoJ,EAAUlmF,EAAOhH,KAAOgH,EAAOjH,KAAO,EACtCotF,EAAUnmF,EAAO9G,KAAO8G,EAAO/G,KAAO,EAC5C,GAAIitF,EAAU,GAAKC,EAAU,EAAG,CAC9B,IAIIF,EAJA//J,EAAO,KACP0wF,EAAa,KACbmvE,EAAc,GACdoE,EAAoB,GAGxB,IAAK,IAAIrkJ,EAAIk6D,EAAO/G,KAAMnzD,GAAKk6D,EAAO9G,KAAMpzD,IAC1C,IAAK,IAAIqI,EAAI6xD,EAAOjH,KAAM5qD,GAAK6xD,EAAOhH,KAAM7qD,IAAK,CAC/C,MAAM63I,EAAOnhJ,EAAMxc,SAASyd,GAAGzd,SAAS8lB,GACxC,GAAI63I,EAAM,CAMR,GALyB,KAArBA,EAAKlqJ,aAEPquJ,EAAkBhnJ,KAAK6iJ,EAAK58J,WAGzBlD,EAKE,CAEL,IAAIkkK,EAAcpE,EAAK58J,UAEvB28J,EAAY5iJ,KAAK,CAAEjd,KAAM8/J,EAAMpvE,WAAYwzE,EAAaC,WAAY,qBAPpEpE,EAAUD,EAAK96J,aAAa,WAC5BhF,EAAO8/J,EACPpvE,EAAa1wF,EAAKkD,UAQpB,GAAI48J,EAAK96J,aAAa,YAAc86J,EAAK96J,aAAa,WAGpD,OADAyuJ,MAAM,qCACC,GAMXzzJ,GAAQ6/J,EAAYt9J,SACtBs9J,EAAYh7J,SAAQu/J,IAClBA,EAAWpkK,KAAKiF,aAAa,WAAY86J,GACzCqE,EAAWpkK,KAAKkD,UAAYkhK,EAAWD,cAIzCnkK,EAAKiF,aAAa,UAAW+6J,GAC7BhgK,EAAKiF,aAAa,UAAWg7J,GAE7BjgK,EAAKkD,UAAY+gK,EAAkB3sJ,KAAK,KAG1C8oJ,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5E9B,GAAajsI,SAAS,QAAS,CAAE5yB,KAAAA,EAAM6/J,YAAAA,EAAaG,QAAAA,EAASC,QAAAA,EAASvvE,WAAAA,EAAYyzE,WAAYnkK,EAAKkD,YACnG27J,GAAaz5J,IAAI+iC,KAKvBjsB,kBAAkBisB,GAEhB,MAAM2xC,EAASsmF,GAAee,qBAC9Bf,GAAeG,eAAep4H,EAAM9oC,WACpC,IAAIuf,EAAKmgJ,GAAW+C,QAAQ35H,GAC5B,GAAI2xC,GAAUA,EAAOhH,KAAOgH,EAAOjH,MAAS,GAAKiH,EAAO9G,KAAO8G,EAAO/G,MAAS,EAAG,CAChF,MAAM4wF,EAAMvD,GAAegB,UAAUtnF,EAAOjH,KAAMiH,EAAO/G,MACzDn0D,EAAK4T,GAAU/c,KAAKkuJ,GAGlB/kJ,GAAMmgJ,GAAWsF,YAAYzlJ,EAAGkd,WAGlCskI,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5E9B,GAAaz5J,IAAI+iC,IAIrBjsB,uBAAuBisB,GAErB,MAAM2xC,EAASsmF,GAAee,qBAE9B,GADAf,GAAeG,eAAep4H,EAAM9oC,WAChCy6E,EAAQ,CACV,MAAMn7D,EAAQyhJ,GAAeM,sBAAsBjpJ,QAAQ,SAC3D,IAAI6sJ,EAAgB,GACpB,IAAK,IAAI1kJ,EAAIk6D,EAAO/G,KAAMnzD,GAAKk6D,EAAO9G,KAAMpzD,IAC1C,IAAK,IAAIqI,EAAI6xD,EAAOjH,KAAM5qD,GAAK6xD,EAAOhH,KAAM7qD,IAAK,CAC/C,MAAM63I,EAAOnhJ,EAAMxc,SAASyd,GAAGzd,SAAS8lB,GACxC,GAAI63I,EAAM,CAER,MAAMiD,EAAWjD,EAAK96J,aAAa,YACnC,GAAI+9J,EAAU,CACZ,MAAMnC,EAAajiJ,EAAMhL,cAAc,eAAeovJ,OAClDnC,GACF7B,GAAW2E,OAAO9C,IAIlBd,EAAK96J,aAAa,YAAc86J,EAAK96J,aAAa,aACpD+5J,GAAW2E,OAAO5D,GAIpB,IAAI9/J,EAAO8/J,EACPp/F,EAAWo/F,EAAK9sH,YAChBtzC,EAAaogK,EAAKpgK,WACM,OAAxBA,EAAWq/E,UAAqBr/E,EAAW8C,WAAWD,QAAU,IAElEvC,EAAON,EACPghE,EAAW1gE,EAAKgzC,YAChBtzC,EAAaM,EAAKN,YAEpB4kK,EAAcrnJ,KAAKjd,GACnB6+J,GAAajsI,SAAS,SAAU,CAAE5yB,KAAAA,EAAM0gE,SAAAA,EAAUhhE,WAAAA,KAKxD4kK,EAAcz/J,SAAQ7E,IACpB,MAAMw/J,EAAQhtI,GAAU/c,KAAKzV,GACzBw/J,GACFA,EAAMtiI,YAKVkjI,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5E9B,GAAaz5J,IAAI+iC,IAIrBjsB,mBAAmB4jJ,EAAMyE,GAAY,GACnC,IAAIxE,EAAUD,EAAK96J,aAAa,WAChC,GAAsB,OAAlB86J,EAAK/gF,SAAmB,CAC1B,GAAIwlF,EAAW,CACb,GAAIzE,EAAK96J,aAAa,YAAa,CAGjC,KADA86J,EAAOA,EAAKroJ,QAAQ,SAAS9D,cAAc,eAAiBmsJ,EAAK96J,aAAa,YAAc,OACjF,OAAO,EAClB+6J,EAAUD,EAAK96J,aAAa,YAG1B86J,EAAK96J,aAAa,YAAc86J,EAAK96J,aAAa,aAEpD86J,EAAKpgK,WAAWA,WAAWgT,iBAAiB,gBAAgBqtJ,MAAYl7J,SAAQ7E,IAC9E++J,GAAWsF,YAAYrkK,GAAM,MAKnC,IAAIA,EAAO8/J,EACPp/F,EAAWo/F,EAAK9sH,YAChBtzC,EAAaogK,EAAKpgK,WACM,OAAxBA,EAAWq/E,UAAqBr/E,EAAW8C,WAAWD,QAAU,IAElEvC,EAAON,EACPghE,EAAW1gE,EAAKgzC,YAChBtzC,EAAaM,EAAKN,WACU,UAAxBA,EAAWq/E,UAAwBr/E,EAAW8C,WAAWD,QAAU,IAErEvC,EAAON,EACPghE,EAAW1gE,EAAKgzC,YAChBtzC,EAAaM,EAAKN,aAItB,MAAM8/J,EAAQhtI,GAAU/c,KAAKzV,GAM7B,OALIw/J,GACFA,EAAMtiI,SAGR2hI,GAAajsI,SAAS,SAAU,CAAE5yB,KAAAA,EAAM0gE,SAAAA,EAAUhhE,WAAAA,KAC3C,EAET,OAAO,EAGTwc,cAAc4jJ,GACZ,MAAMC,EAAUD,EAAK96J,aAAa,WAElC,IAAI66J,EAAc,GAClBC,EAAKpgK,WAAWA,WAAWgT,iBAAiB,gBAAgBqtJ,MAAYl7J,SAAQ7E,IAC9E6/J,EAAY5iJ,KAAK,CAAEjd,KAAAA,EAAM0wF,WAAY1wF,EAAKkD,UAAWihK,WAAYnkK,EAAKkD,YACtElD,EAAKkQ,gBAAgB,eAGvB,MAAM8vJ,EAAUjwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAAc,GAC1Di7J,EAAUlwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAAc,GAChE,OAAIg7J,EAAU,GAAKC,EAAU,KAE3BH,EAAK5vJ,gBAAgB,WACrB4vJ,EAAK5vJ,gBAAgB,WAErB2uJ,GAAajsI,SAAS,QAAS,CAAE5yB,KAAM8/J,EAAMD,YAAAA,EAAaG,QAAAA,EAASC,QAAAA,EAASvvE,WAAYovE,EAAK58J,UAAWihK,WAAYrE,EAAK58J,aAClH,GAKXgZ,sBAAsBisB,EAAOxC,EAAU1e,EAAS,QAC9C,MAAMu9I,EAAWr8H,EAAMjF,cACvBiF,EAAMhJ,QAAQ4G,KAAK,cAAeJ,EAASr/B,KAAKk+J,GAAW7+H,EAAU1e,GAGvE/K,qBAAqBhd,EAAOipC,GAU1B,IAPGi4H,GAAeM,wBAA0Bv4H,EAAM9oC,UAAU4P,SAASmxJ,GAAeM,wBACjFN,GAAeO,sBAAwBx4H,EAAM9oC,UAAU4P,SAASmxJ,GAAeO,wBAEhFP,GAAeM,sBAAwBN,GAAeO,oBAAsB,KAC5EP,GAAeG,kBAGbrhK,EAAM+c,SAAS,aAAc,CAC/B,MAAMwoJ,EAAQvlK,EAAMkY,MAAM,KACpB8qJ,EAAYnyJ,OAAOiD,SAASyxJ,EAAM,IAClCxC,EAAYlyJ,OAAOiD,SAASyxJ,EAAM,IACxC1F,GAAW2F,YAAYv8H,EAAO85H,EAAWC,OACpC,CACL,IAAIyC,EAAmB,QACvB,OAAQzlK,GACN,IAAK,oBACHylK,EAAmB,SACrB,IAAK,aACL,IAAK,mBACH5F,GAAW6F,OAAOz8H,EAAOw8H,GACzB,MACF,IAAK,aACH5F,GAAW8F,UAAU18H,GACrB,MACF,IAAK,mBACHw8H,EAAmB,SACrB,IAAK,aACL,IAAK,mBACH5F,GAAW+F,OAAO38H,EAAOw8H,GACzB,MACF,IAAK,aACH5F,GAAWgG,UAAU58H,GACrB,MACF,IAAK,SACH42H,GAAW2F,YAAYv8H,EAAO,EAAG,GACjC,MACF,IAAK,eACH42H,GAAWiG,YAAY78H,GACvB,MACF,IAAK,aACH42H,GAAWkG,UAAU98H,GACrB,MACF,IAAK,kBACH42H,GAAWmG,eAAe/8H,GAC1B,MACF,IAAK,cACH42H,GAAWoG,WAAWh9H,GACtB,MACF,IAAK,mBACH42H,GAAWqG,gBAAgBj9H,GAC3B,MACF,IAAK,OACH,GAAIA,EAAMvI,QAAQqiB,MAAMH,KAAKv/C,OAAQ,CACnC,MAAM28J,EAAQ/2H,EAAMvI,QAAQqiB,MAAMH,KAAK3Z,EAAMvI,QAAQqiB,MAAMH,KAAKv/C,OAAS,GACzE,QAA0B,IAAf28J,EAAM9zI,WAA4C,IAAb8zI,EAAMp3J,IAAqC,iBAAfo3J,EAAM9zI,KAGhF,OADAyzI,GAAa/8G,KAAK3Z,EAAO+2H,EAAMp3J,KACxB,EACF,GAAIo3J,EAAMp9G,MAAM1rB,IAAIic,MAAKrc,GAA4B,OAAtBA,EAAGlxB,YAAY8Z,KAAc,CAEjE,MAAMU,EAAQ4/I,EAAMp9G,KAAK1rB,IAAI31B,WAAUu1B,GAA4B,OAAtBA,EAAGlxB,YAAY8Z,KAC5DsgJ,EAAMp9G,KAAK1rB,IAAIO,OAAOrX,EAAO,IAIjC,OAAO,EACT,IAAK,OACH,GAAI6oB,EAAMvI,QAAQqiB,MAAMF,KAAKx/C,OAAQ,CACnC,MAAM28J,EAAQ/2H,EAAMvI,QAAQqiB,MAAMF,KAAK5Z,EAAMvI,QAAQqiB,MAAMF,KAAKx/C,OAAS,GACzE,QAA0B,IAAf28J,EAAM9zI,WAA4C,IAAb8zI,EAAMp3J,IAAqC,iBAAfo3J,EAAM9zI,KAGhF,OADAyzI,GAAa98G,KAAK5Z,EAAO+2H,EAAMp3J,KACxB,EAIX,OAAO,EACT,IAAK,OACH,GAAIs4J,GAAeM,uBAAyBN,GAAeO,oBAAqB,CAG9E,IAAI/nE,WAAEA,EAAUysE,aAAEA,EAAYvqE,UAAEA,EAASE,YAAEA,GAAgBzqF,OAAO2xB,eAGlE3xB,OAAO2xB,eAAegP,kBACtB,IAAI7Q,EAAQr9B,SAASwsC,cAgBrB,OAfAnP,EAAMoP,SAAS2wH,GAAeM,sBAAuB,GACrDrgI,EAAMyP,OAAOswH,GAAeO,oBAAqBP,GAAeO,oBAAoBn+J,WAAWD,QAC/FgO,OAAO2xB,eAAeiP,SAAS9Q,GAC3B+/H,GAAeM,wBAA0BN,GAAeO,qBAC1DP,GAAeM,sBAAsBx7J,UAAUg4B,OAAO,oBAExDl6B,SAAS0kD,YAAY,QACjB04G,GAAeM,wBAA0BN,GAAeO,qBAC1DP,GAAeM,sBAAsBx7J,UAAUE,IAAI,oBAGrDmL,OAAO2xB,eAAegP,kBACtB7Q,EAAMoP,SAASmpD,EAAYysE,GAC3BhlI,EAAMyP,OAAOgrD,EAAWE,GACxBzqF,OAAO2xB,eAAeiP,SAAS9Q,IACxB,EAET,OAAO,KC/wBjB,MAAM7N,GAAYsM,MAAMoG,OAAO,aAE/B,MAAMogI,WAAiB5G,GACrBxiJ,cAAchd,GAEZ,IAAIc,EAAOsI,MAAMoqB,OADD,MAGhB,OADA1yB,EAAKiF,aAAa,SAAU/F,GAAgB6/J,GAAWC,aAChDh/J,EAGTk8B,UAEA6O,SAAS5N,GACP,GAA6B,IAAzB50B,KAAKpG,SAASI,OAChB,GAAiC,MAA7BgG,KAAK+0B,QAAQC,aAAsB,CACrC,IAAIH,EAAQ70B,KAAKg9J,qBACjBh9J,KAAKsiC,YAAYzN,GACjBA,EAAM2N,SAAS5N,QAEf50B,KAAK20B,SAGT,IAAI98B,EAAOmI,KAAKnI,KACJ,MAARA,GAAgBA,EAAK0qC,OAASviC,MAChCnI,EAAKk9B,QAAQ7H,WAAaltB,KAAK+0B,QAAQ7H,UACvCr1B,EAAK07B,QAAQ/G,UAAYxsB,KAAKuzB,QAAQ/G,SACtC30B,EAAK07B,QAAQ92B,aAAa,YAAcuD,KAAKuzB,QAAQ92B,aAAa,YAElE5E,EAAKumC,aAAap+B,MAClBnI,EAAK88B,UAIThnB,aAAai8B,EAAWC,GACtB,GAAoC,MAAhC7pC,KAAK+0B,QAAQE,kBAA4Bj1B,KAAK+0B,QAAQE,gBAAgB6U,MAAK,SAAUjV,GACvF,OAAO+U,aAAqB/U,KAC1B,CACF,IAAInnB,EAAW1N,KAAKg9J,mBAAmBnzH,GACvCn8B,EAAS40B,YAAYsH,GACrBA,EAAYl8B,EAEd3N,MAAM4N,aAAai8B,EAAWC,GAGhCpuC,QAAQ1E,GACN,GAAIA,EAAOg+B,QAAQ7H,WAAaltB,KAAK+0B,QAAQ7H,SAAU,CACrD,IAAI90B,EAAO4H,KAAKg9J,qBAChBjmK,EAAOqnC,aAAahmC,EAAM4H,MAC1BA,KAAKsiC,YAAYlqC,GAEnB2H,MAAMtE,QAAQ1E,GAGhBimK,mBAAmBnzH,GACjB,IAAI+vH,EAAW,KASf,OAPEA,EADE/vH,EACSA,EAAQtW,QAAQ92B,aAAa,YAC/BuD,KAAK/I,OACH+I,KAAK/I,OAAOs8B,QAAQ92B,aAAa,YAEjCuD,KAAKuzB,QAAQt8B,OAAOwF,aAAa,YAGvCwtB,GAAUE,OAAOnqB,KAAK+0B,QAAQC,aAAc,CAAC4kI,EAAU55J,KAAKuzB,QAAQ92B,aAAa,UAAW+5J,GAAWC,aAAa1nJ,KAAK,OAIpIguJ,GAAS7vI,SAAW,KACpB6vI,GAASvwI,QAAU,KACnBuwI,GAAS7wI,MAAQjC,GAAUC,MAAM8J,WACjC+oI,GAAS/nI,aAAe,KACxB+nI,GAAS9nI,gBAAkB,CAACmhI,ICtE5B,MAAMnsI,GAAYsM,MAAMoG,OAAO,aAE/B,MAAMsgI,WAAc9G,GAClBxiJ,cAAchd,GAEZ,IAAIc,EAAOsI,MAAMoqB,OADD,SAIhB,OAFA1yB,EAAKiF,aAAa,WAAY/F,GAAgB6/J,GAAWC,aACzDh/J,EAAKiF,aAAa,SAAU,KACrBjF,EAGTk8B,UAEA6O,SAAS5N,GACP70B,MAAMyiC,SAAS5N,GACf,IAAIgL,EAAQ42H,GAAW0G,SAASl9J,KAAKuzB,SACrC,IAAKqM,EAAO,OACZ,IAAI/nC,EAAOmI,KAAKnI,KAChB,MAAM+hK,EAAW55J,KAAKuzB,QAAQ92B,aAAa,YAGjC,MAAR5E,GAAgBA,EAAK0qC,OAASviC,MAAQnI,EAAK07B,QAAQ92B,aAAa,cAAgBm9J,GAChF/hK,EAAKk9B,QAAQ7H,WAAaltB,KAAK+0B,QAAQ7H,UAAYr1B,EAAK07B,QAAQ/G,UAAYxsB,KAAKuzB,QAAQ/G,UAGzF30B,EAAKumC,aAAap+B,MAClBnI,EAAK88B,eAImC,IAAjCiL,EAAMxpB,MAAM+mJ,OAAOvD,IAC1Bh6H,EAAMxpB,MAAM+mJ,OAAOvD,GAAUwD,eAAiBp9J,KAAKuzB,QAAQppB,iBAAiB,MAAMnQ,QAClF4lC,EAAMxpB,MAAM+mJ,OAAOvD,GAAUyD,cAAgBr9J,KAAKuzB,QAAQppB,iBAAiB,MAAMnQ,SAKjFgG,KAAKuzB,QAAQppB,iBAAiB,8CAA8C7N,SAAQi7J,IAClF,MAAMxgJ,EAAQ/e,MAAMC,UAAUqG,QAAQnG,KAAKo/J,EAAKpgK,WAAWyC,SAAU29J,GAC/DE,EAAUjwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAAc,GAC1Di7J,EAAUlwJ,OAAOiD,SAAS8sJ,EAAK96J,aAAa,YAAc,GAEhE,IAAKuD,KAAKuzB,QAAQnoB,cAAc,gBAAkBmsJ,EAAK96J,aAAa,WAAa,QAAUg7J,EAAU,GAAKC,EAAU,GAAI,CACtH,IAAIr3I,EAAMk3I,EAAKpgK,WACf,IAAK,IAAIkgB,EAAI,EAAGA,GAAKqgJ,GACdr3I,EADuBhJ,IAAK,CAIjC,IAAIimJ,EAAiB,IAANjmJ,EAAUgJ,EAAIzmB,SAASmd,EAAQ,GAAKsJ,EAAIzmB,SAASmd,GAChE,IAAK,IAAI2I,EAAI,EAAGA,GAAK+3I,EAAS/3I,IAAK,CACjC,GAAU,IAANA,GAAiB,IAANrI,EACb,SAEF,IAAIkmJ,EAAU9iK,SAASC,cAAc,MACrC6iK,EAAQ7gK,aAAa,UAAW85J,GAAWC,aAC3C8G,EAAQ7gK,aAAa,SAAU2jB,EAAI5jB,aAAa,WAChD8gK,EAAQ7gK,aAAa,WAAYsD,KAAKuzB,QAAQ92B,aAAa,aAC3D8gK,EAAQ7gK,aAAa,WAAY66J,EAAK96J,aAAa,YACnD,IAAIyV,EAAIzX,SAASC,cAAc,KAC3Bs/J,EAAKv/J,SAASC,cAAc,MAChCwX,EAAEowB,YAAY03H,GACduD,EAAQj7H,YAAYpwB,GACpBmO,EAAI1S,aAAa4vJ,EAASD,GAE5Bj9I,EAAMA,EAAIoqB,iBAKZ7K,EAAMxpB,MAAM+mJ,OAAOvD,GAAU4D,SAE/BlH,GAAajsI,SAAS,SAAU,CAAE5yB,KAAMuI,KAAKuzB,QAAS4kC,SAAUn4D,KAAKuzB,QAAQkX,YAAatzC,WAAY6I,KAAKuzB,QAAQp8B,aACnHm/J,GAAaz5J,IAAI+iC,WAIZA,EAAMxpB,MAAM+mJ,OAAOvD,IAI9BjsJ,aAAai8B,EAAWC,GACtB,GAAoC,MAAhC7pC,KAAK+0B,QAAQE,kBAA4Bj1B,KAAK+0B,QAAQE,gBAAgB6U,MAAK,SAAUjV,GACvF,OAAO+U,aAAqB/U,KAC1B,CACF,IAAInnB,EAAWuc,GAAUE,OAAOnqB,KAAK+0B,QAAQC,aAAcwhI,GAAWC,aACtE/oJ,EAAS40B,YAAYsH,GACrBA,EAAYl8B,EAEd3N,MAAM4N,aAAai8B,EAAWC,IAIlCozH,GAAM/vI,SAAW,QACjB+vI,GAAMzwI,QAAU,QAChBywI,GAAM/wI,MAAQjC,GAAUC,MAAM8J,WAC9BipI,GAAMjoI,aAAe,KACrBioI,GAAMhoI,gBAAkB,CAAC8nI,IC1FzB,MAAMzyI,GAAYiM,MAAMoG,OAAO,mBACzB1S,GAAYsM,MAAMoG,OAAO,aACzB/O,GAAQ2I,MAAMoG,OAAO,SAU3BrS,GAAUgU,MAAQ,CAChB,OAAQ,UACR,KAAM,KAAM,SAGd,MAAMm/H,GAA4B79H,IAChCA,EAAM9oC,UAAUqS,cACd,IAAIH,YAAY,iBAAkB,CAChCC,SAAS,EACT+3D,UAAU,MAKD,MAAM08F,GACnB/pJ,kBACE4iB,MAAMlM,SAAS+rI,IAAW,GAC1B7/H,MAAMlM,SAAS0yI,IAAU,GACzBxmI,MAAMlM,SAAS4yI,IAAO,GACtB1mI,MAAMlM,SAASszI,IAAS,GAG1BxgK,YAAYyiC,EAAOxxB,GACjBwxB,EAAMvI,QAAQq/H,WAAa,GAC3B92H,EAAMxpB,MAAQ,CACZmvE,WAAW,EACX43E,OAAQ,IAIVv9H,EAAM9oC,UAAUkQ,iBAAiB,aAAc/L,GAAM48J,GAAetyH,UAAU3F,EAAO3kC,EAAGmT,EAAQ2pJ,wBAChGn4H,EAAM9oC,UAAUkQ,iBAAiB,aAAc/L,GAAM48J,GAAe+F,UAAUh+H,EAAO3kC,KACrF2kC,EAAM9oC,UAAUkQ,iBAAiB,WAAY/L,GAAM48J,GAAegG,QAAQj+H,EAAO3kC,KACjF2kC,EAAMrI,GAAG,oBAAoB,CAACO,EAAOgR,IAAa+uH,GAAeiB,gBAAgBl5H,EAAO9H,EAAOgR,KAE/ElJ,EAAMylD,UAAU,WAExBl7B,WAAW,SAAS,SAAUxzD,GACpC+mK,GAAYI,cAAcl+H,EAAOjpC,MAGnC,MAAMygC,EAAYwI,EAAMylD,UAAU,aAClCjuD,EAAUsxB,WAAW,SAAS,SAAUjxD,EAAMo4B,GAC5C,GAAI01D,GAAU3lD,GAEZ,OADA69H,GAAyB79H,GAClB,IAAIhS,GAGb,MAAMmwI,EAAgD,OAA/BtmK,EAAKyX,QAAQ,cAC9B0qJ,EAAWniK,EAAKgF,aAAa,YAQnC,OAPIm9J,IACFh6H,EAAMxpB,MAAM+mJ,OAAOvD,GAAY,CAC7B4D,OAAQO,EACRV,YAAa5lK,EAAK0S,iBAAiB,MAAMnQ,OACzCojK,aAAc3lK,EAAK0S,iBAAiB,MAAMnQ,SAGvC61B,KAETuH,EAAUsxB,WAAW,MAAM,SAAUjxD,EAAMo4B,GACzC,OAAOA,KAETuH,EAAUsxB,WAAW,UAAU,SAAUjxD,EAAMo4B,GAC7C,GAAuB,IAAnBA,EAAM71B,SAER61B,EAAMhC,IAAM,CACV,CAACC,OAAQ,YAEN,GAAI+B,EAAMhC,KAAOgC,EAAMhC,IAAI7zB,OAAQ,CAExC,MAAMuyC,EAAY1c,EAAMhC,IAAIc,QAAO,CAAC4d,EAAW9e,EAAIg7D,SAA6B,IAAdh7D,EAAGK,OAAyB26D,EAAMl8C,IAAY,GAC5GA,GAAa,IAAM1c,EAAMhC,IAAI0e,GAAWze,OAAO+F,SAAS,QAC1DhE,EAAMhC,IAAI0e,GAAWze,QAAU,MAInC,MAAMqpI,EAAY1/J,EAAKyX,QAAQ,SAQ/B,IAPKzX,EAAKgF,aAAa,aAAe06J,IAC/BA,EAAU16J,aAAa,aAC1B06J,EAAUz6J,aAAa,WAAY85J,GAAWC,aAEhDh/J,EAAKiF,aAAa,WAAYy6J,EAAU16J,aAAa,eAGlDhF,EAAKgF,aAAa,UAAW,CAChC,MAAMuhK,EAAUvmK,EAAKyX,QAAQ,MACzB8uJ,IACGA,EAAQvhK,aAAa,WACxBuhK,EAAQthK,aAAa,SAAU85J,GAAWC,aAE5Ch/J,EAAKiF,aAAa,SAAUshK,EAAQvhK,aAAa,YAIhDhF,EAAKgF,aAAa,YACrBhF,EAAKiF,aAAa,UAAW85J,GAAWC,aAa1C,OAViB5mI,EAAMT,SAAQ,IAAIxB,IAAQK,OAAO4B,EAAM71B,SAAU,CAChEqc,GAAI,CACF5e,EAAKgF,aAAa,YAClBhF,EAAKgF,aAAa,UAClBhF,EAAKgF,aAAa,WAClBhF,EAAKgF,aAAa,YAClBhF,EAAKgF,aAAa,WAClBhF,EAAKgF,aAAa,YAClBsS,KAAK,WAKX4oJ,GAAat+H,OAAOuG,EAAO,CAAC,aAAc,SAAU,OAAQ,SAG9DjsB,sBACE,MAEMsqJ,EAAe,GACrB,IAAK,IAAI/sG,EAAI,EAAGA,GAHA,EAGcA,IAC5B,IAAK,IAAIroC,EAAI,EAAGA,GAHF,EAGgBA,IAC5Bo1I,EAAavpJ,KAAK,YAAcw8C,EAAI,IAAMroC,GAG9C,OAAOo1I,EAGTtqJ,qBAAqBisB,EAAOjpC,GAC1B,OAAI2uF,GAAc3uF,IAAU4uF,GAAU3lD,IACpC69H,GAAyB79H,IAClB,GAEF42H,GAAW/wE,cAAc9uF,EAAOipC,GAIzCjsB,0BAA0Blc,GACxB,KAAOA,EAAKygE,YACVzgE,EAAKgU,YAAYhU,EAAKygE,YAI1BvkD,uBAAuBisB,EAAO7iC,EAAK+6B,EAAOomI,GACxC,MAAMC,EAAev+H,EAAMhF,UAAU9C,EAAM/gB,MAAQ,GAC7CqnJ,EAAax+H,EAAMhF,UAAU9C,EAAM/gB,MAAQ+gB,EAAM99B,QAEvD,GAAY,SAAR+C,GAA0B,SAARA,GAA0B,SAARA,EACtC,OAAOy5J,GAAW/wE,cAAc1oF,EAAK6iC,GAIvC,IAAKu+H,EAAa9nJ,KAAO6nJ,EAAWvqI,OAAOtd,KAAO+nJ,EAAW/nJ,GAC3D,OAAO,EAGT,GAAY,cAARtZ,EAAqB,CAGvB,IAAKmhK,EAAWviK,SAAWm8B,EAAM99B,OAAQ,CACvC,MAAMg9B,EAAYhvB,OAAO2xB,eAGnB0kI,EAzKUC,CAAAA,IACtB,MAAMC,EAAgB,GACtB,IAAK,IAAIrkK,EAAI,EAAGA,EAAIokK,EAAWtkK,OAAQE,IACrCqkK,EAAc7pJ,KAAKxa,GAErB,OAAOqkK,EAAcpgK,KAAIjE,GAAKokK,EAAWlmK,KAAK8B,MAoKpBskK,CAFH/jK,SAAS0P,iBAAiB,iBAEGxQ,QAAO49J,GACnDvgI,EAAU04D,aAAa6nE,GAAM,KAI/B,IAAK8G,EAAYrkK,OACf,OAAO,EAGT,GAAI69J,GAAee,qBACjB,OAAO,EAGT,IAAI6F,GAAc,EAuBlB,OAtBAJ,EAAY/hK,SAAQ,CAACoiK,EAAYxkK,KAC/B,GAAIwkK,EAAWzgH,iBACb,GAA4C,UAAxCygH,EAAWzgH,gBAAgBu4B,SAAsB,CAEnD,MAAMmoF,EAAQD,EAAWzgH,gBAAgB9zC,iBAAiB,MACtDw0J,EAAM3kK,QAAUw8J,GAAWsF,YAAY6C,EAAMA,EAAM3kK,OAAS,MAC9DykK,GAAc,QAG0B,OAAnCC,EAAWvnK,WAAWq/E,UAE3BggF,GAAWsF,YAAY4C,EAAWvnK,cACpCsnK,GAAc,MAKhBA,GACFnI,GAAaz5J,IAAI+iC,IAIX6+H,EAIV,OAAO,EAGT,GAAY,QAAR1hK,EAAe,CACjB86J,GAAeG,iBACf,MAAO3jI,GAAQuL,EAAMkQ,QAAQlQ,EAAMjG,eAAe5iB,OAClD,IAAI6nJ,EACA/xI,EACAgyI,EACJ,GAAIxqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAO,CACrC,GAAImlB,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,YAAa,CAEjD,IADAo0H,EAAexqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,YAC1Co0H,GAAgBA,EAAapiK,aAAa,aAC/CoiK,EAAeA,EAAap0H,YAE9B5d,EAAO0J,MAAMrpB,KAAK2xJ,GAA8BxqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,kBAE9EpW,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,YACpC5d,EAAO0J,MAAMrpB,KAAKmnB,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,aAEhDpW,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,SAASu7B,cACvC5d,EAAO0J,MAAMrpB,KAAKmnB,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,SAASu7B,cAQ7D,OAHAm0H,EAAiB/xI,EAAKlxB,OAAOikC,EAAM/I,QACnC+I,EAAM9F,aAAa8kI,EAAgB,IAE5B,EAET,OAAO,EAGT,GAAY,aAAR7hK,EAAoB,CAEtB86J,GAAeG,iBACf,MAAO3jI,GAAQuL,EAAMkQ,QAAQlQ,EAAMjG,eAAe5iB,OAClD,IAAI6nJ,EACA/xI,EACAgyI,EACJ,GAAIxqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAO,CACrC,GAAImlB,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAM+uC,gBAAiB,CAErD,IADA4gH,EAAexqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAM+uC,gBAC1C4gH,EAAapiK,aAAa,aAC/BoiK,EAAeA,EAAa5gH,gBAE9BpxB,EAAO0J,MAAMrpB,KAAK2xJ,QAElB,GAAIxqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAM+uC,gBAAiB,CAErD,IADA4gH,EAAexqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,MAAM+uC,gBAAgB9V,UAC1D02H,EAAapiK,aAAa,aAC/BoiK,EAAeA,EAAa5gH,gBAE9BpxB,EAAO0J,MAAMrpB,KAAK2xJ,QAElB,GAAIxqI,EAAKp9B,OAAOs8B,QAAQrkB,QAAQ,SAAS+uC,gBACvC,OAAO,EAQb,OAHA2gH,EAAiB/xI,EAAKlxB,OAAOikC,EAAM/I,QACnC+I,EAAM9F,aAAa8kI,EAAgB,IAE5B,EAET,OAAO,EAGT,IAAInnK,EAAOmoC,EAAM5I,UAAU8O,iBAAiBvuB,MAAM9f,KAClD,IAAKA,EAAM,OAAO,EAClB,IAAIo1B,EAAO5C,GAAU/c,KAAKzV,GAE1B,GACU,WAARsF,GAAoB8vB,GACpBqxI,EAAWviK,QAAUkxB,EAAKpQ,KAAOoQ,EAAKpQ,KAAKziB,OAAS,GAEpD,OAAO,EAGT,MAAOuoC,GAAQ3C,EAAM+P,QAAQ7X,EAAM/gB,MAAQ,IACpClf,GAAQ+nC,EAAM+P,QAAQ7X,EAAM/gB,MAAQ,GAG3C,GAAY,cAARha,EAAqB,CACvB,IACI8vB,EACAiyI,GAFCruI,GAAQmP,EAAM+P,QAAQ/P,EAAMjG,eAAe5iB,OAGhD,GAAqC,OAAjC0Z,EAAKx5B,OAAOs8B,QAAQijD,SAAmB,CAEvCsoF,EADEruI,EAAKx5B,OAAOs8B,QAAQkX,YACXlU,MAAMrpB,KAAKujB,EAAKx5B,OAAOs8B,QAAQkX,aAEtCha,EAAKx5B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,YACzBlU,MAAMrpB,KAAKujB,EAAKx5B,OAAOs8B,QAAQrkB,QAAQ,MAAMu7B,aAE7ClU,MAAMrpB,KAAKujB,EAAKx5B,OAAOs8B,QAAQrkB,QAAQ,SAASu7B,aAG/D5d,EAAO0J,MAAMrpB,KAAKujB,EAAKx5B,OAAOs8B,SAC9B,IAAIqrI,EAAiB/xI,EAAKlxB,OAAOikC,EAAM/I,QACnCkoI,EAAgBD,EAASnjK,OAAOikC,EAAM/I,QAE1C,OADA+I,EAAM9F,aAAa8kI,EAAgBG,EAAcH,EAAe,IACzD,EAET,OAAO,EAET,QAAY,cAAR7hK,IAAuBwlC,IAAQA,EAAK1qC,UAG5B,WAARkF,IAAoBlF,IAAQA,EAAK0qC,YAArC,IAMJ,MAAM+iD,GAAgB,CAAC3uF,EAAQ,KAAOA,EAAM+c,SAAS,aAE/C6xE,GAAa3lD,GAAUA,GAASA,EAAMjG,cAAa,IAASiG,EAAMhF,UAAUgF,EAAMjG,cAAa,IAAOtjB,GCrV/F2oJ,GAAgB5kK,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECGpB6kK,GAA+B,CAAC3oK,EAAc4oK,GAAiC,KAC1F,IAAK5oK,EAAMouF,UACT,OAAOpuF,EAGT,GAAK4oK,EAQHvqI,GAAOr+B,OAR4B,CACnC,IAAI0kG,EAAsB,GAC1BA,EAAWmkE,GAAyB7oK,GAEhC0kG,EAAShhG,OAAS,GACpB1D,EAAM0kG,SAAUtmF,QAAQsmF,GAM5B,OAAO1kG,GAGHq+B,GAAUr+B,UACdA,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,GAAKA,EAAE+kC,YAAc+zB,GAAyBqd,yBAGlF83B,GAA4B7oK,IAChC,MAAMoV,EAAoB,GAM1B,OAJK0zJ,GAA4B9oK,IAC/BoV,EAAOgJ,KAAK,IAAI+yH,GAAqBnxI,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,MAAS+qH,GAAyBqd,wBAGrG37H,GAGH0zJ,GAA+B9oK,UACnC,MAAM+oK,EAAuC,QAAhB51H,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,IAAI,IAAAznB,EAAC,OAAAynB,EAAE4zB,QAAQwjB,QAAwB,QAAf7+D,EAAAnzC,EAAMwuF,eAAS,IAAAr7C,OAAA,EAAAA,EAAA6+D,OAAQp3C,EAAE+kC,YAAc+zB,GAAyBqd,yBAE5I,GAAIg4B,EAAsBrlK,OAAS,EAAG,CAGpC,OAFkCqlK,EAAsB,GAC9B73B,SAAWI,GAAe,IAAI3oI,OACjD,EAET,OAAO,GCzCIqgK,GAA4B,CAAChpK,EAAcipK,GAA8B,KACpF,IAAKjpK,EAAMouF,UACT,OAAOpuF,EAGT,GAAKipK,EAQH5qI,GAAOr+B,OARyB,CAChC,IAAI0kG,EAAsB,GAC1BA,EAAWwkE,GAAsBlpK,GAE7B0kG,EAAShhG,OAAS,GACpB1D,EAAM0kG,SAAUtmF,QAAQsmF,GAM5B,OAAO1kG,GAGHq+B,GAAUr+B,UACdA,EAAM0kG,SAA2B,QAAhBvxD,EAAAnzC,EAAM0kG,gBAAU,IAAAvxD,OAAA,EAAAA,EAAA9vC,QAAOu3D,GAAKA,EAAE+kC,YAAcg0B,GAAsBw1C,sBAG/ED,GAAyBlpK,IAC7B,MAAMoV,EAAoB,GAO1B,OAJKg0J,GAAgBppK,IACnBoV,EAAOgJ,KAAK,IAAIgzH,GAAkBpxI,EAAMwuF,QAAU8iD,GAAe,IAAI3oI,MAASgrH,GAAsBw1C,qBAG/F/zJ,GAGHg0J,GAAmBppK,UACvB,MAAMqpK,GAA4B,QAAdl2H,EAAAnzC,EAAM0kG,gBAAQ,IAAAvxD,OAAA,EAAAA,EAAE9vC,QAAOu3D,GAAKA,EAAE+kC,YAAcg0B,GAAsBw1C,uBAAuB,GAE7G,OAAOE,EAAY3lK,OAAS,GCXxBy3F,GAAwBl7D,MAAMoG,OAAO,oBACrC+0D,GAAyBn7D,MAAMoG,OAAO,qBACtC/O,GAAQ2I,MAAMoG,OAAO,SAMd,IAAAijI,GAAb,cAA8CjsE,GAAQm9C,GAARn9C,CAAmBv4B,KA+I/Dj+D,cACE4C,QA/I0BC,KAAKitF,MAAG,GACTjtF,KAAM6/J,OAAY,GAClB7/J,KAAW8/J,YAAiB,GACG9/J,KAAc+/J,eAAG,GAC/C//J,KAAAiyI,eAAoC,IAAI99C,GAGpEn0F,KAAIo6G,KAAG,GAEPp6G,KAAA28I,SAA+B,IAAIzJ,GAOnClzI,KAAAw7C,MAAQjlB,MAAMoG,OAAO,YAyBb38B,KAAmBggK,oBAAG,IACxBhgK,KAAKo6G,OAASiN,GAAK44C,YlI2NoB,EAACjlE,EAAsB,KAC7DA,EAASrhG,QAAOsB,GAAKA,EAAEg7F,YAAcg0B,GAAsBw1C,qBAAoBzlK,OkI3N3EkmK,CAAgCpvB,GAAU78C,WAAWu5C,gBAAgBxyC,UAAY,ElIqL5C,EAACA,EAAsB,KAChEA,EAASrhG,QAAOsB,GAAKA,EAAEg7F,YAAc+zB,GAAyBqd,wBAAuBrtI,OkIpLjFmmK,CAAmCrvB,GAAU78C,WAAWu5C,gBAAgBxyC,UAAY,EAgE/Fh7F,KAAUogK,WAAG,WACX,MAAMC,EAA0B,QAAX52H,EAAAzpC,KAAK6/J,cAAM,IAAAp2H,OAAA,EAAAA,EAAEzvC,OAClC,OAAwB,IAAjBqmK,EAAqB,UAAYA,EAAe,EAAI,GAAGA,WAAwB,IAmEhFrgK,KAAcsgK,eAAG,KACvBrnJ,aAAajZ,KAAKugK,aAClBvgK,KAAKugK,YAActrJ,YAAW,IAAMjV,KAAKsuJ,QAAQ,+DAA+D,MA2BlHtuJ,KAAIs3B,KAAG,eACL,MAAM+6D,EAAiBryF,KAAKoL,cAAc,IAAIpL,KAAKT,YACnD,GAAI8yF,EAAgB,CAClB97D,MAAMlM,SAAS,mBAAoBonE,IAAuB,GAC1Dl7D,MAAMlM,SAAS,oBAAqBqnE,IAAwB,GAC5Dn7D,MAAMlM,SAAS,gBAAiBqzI,IAAa,GAC7CnnI,MAAMlM,SAAS,uBAAwBokE,IAAkB,GACzDl4D,MAAMlM,SAAS,sBAAuBwkE,IAAe,GACrDt4D,MAAMlM,SAAS,wBAAyBqkE,IAAmB,GAE3D,MAAM8xE,EAAuBC,GACvBC,EAAuBC,GACzB3gK,KAAKo6G,OAASiN,GAAKu5C,gBACrBJ,EAAqB9rJ,KAAK,CAAC,gBAC3B8rJ,EAAqB,GAAK,CAAC,OAAQ,SAAU,YAAa,QAC1DE,EAAqBhsJ,KAAK,eAC1BgsJ,EAAqBhsJ,KAAK,SAG5B1U,KAAK4/B,MAAQ,IAAIrJ,MAAM87D,EAAgB,CACrC7+D,QAASktI,EACTr4I,QAAS,CACP2U,QAAS,CACPlmC,UAAW0pK,EACX7kH,SAAU,CACRpC,KAAMv5C,KAAKu5C,KACXC,KAAMx5C,KAAKw5C,KACXjW,MAAOvjC,KAAK6gK,eAGhBC,aAAa,EACbztE,YAAY,EACZj9E,MAAO,CACL2hJ,sBAAsB,GAExBvzE,QAAS,CACPM,SAAuD,QAA9Cr7C,EAAAqnG,GAAU78C,WAAWu5C,gBAAgB1oD,eAAS,IAAAr7C,OAAA,EAAAA,EAAA6+D,OAAQ,UAC/D5jB,WAAW,EACXD,kBAAkB,EAClBM,YAAa24E,GACb14E,WAAYwxE,IAEdn/H,QAAS,CACP0iB,MAAO,IACPC,SAAU,IACVX,UAAU,GAEZjiB,UAAW,GACXF,SAAU,CAERyX,SAAU,CACRgE,IAAK,CACH51C,IAAK,MACLwiC,QAAS,CAACzH,EAAYomI,KAEpB,GADuBR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,MAAO9H,EAAOomI,IACvDl+J,KAAK4/B,MAAO,CAEhC5/B,KAAK4/B,MAAMvI,QAAQub,SACnB,MAAM/iB,GAAQ,IAAIjC,IAAQK,OAAO6J,EAAM/gB,OAAOiX,OAAO8J,EAAM99B,QAAQ8zB,OAAO,MAC1E9tB,KAAK4/B,MAAMiT,eAAehjB,EAAc0G,MAAMkD,QAAQ8C,MACtDv8B,KAAK4/B,MAAMvI,QAAQub,SACnB5yC,KAAK4/B,MAAM9F,aAAahC,EAAM/gB,MAAQ,EAAGwf,MAAMkD,QAAQM,WAI7DgnI,SAAU,CACRhkK,IAAK,MACL8J,UAAU,EACV04B,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,WAAY9H,EAAOomI,IAGtE8C,UAAW,CACTjkK,IAAK,IACL8f,SAAS,EACT0iB,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,YAAa9H,EAAOomI,IAGvE+C,UAAW,CACTlkK,IAAK,YACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,YAAa9H,EAAOomI,IAGvElwI,OAAQ,CACNjxB,IAAK,SACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,SAAU9H,EAAOomI,IAGpE3kH,KAAM,CACJ18B,SAAS,EACT9f,IAAK,IACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,OAAQ9H,EAAOomI,IAGlE1kH,KAAM,CACJ38B,SAAS,EACT9f,IAAK,IACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,OAAQ9H,EAAOomI,IAGlEgD,MAAO,CACLrkJ,SAAS,EACThW,UAAU,EACV9J,IAAK,IACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,OAAQ9H,EAAOomI,IAGlE5wJ,KAAM,CACJuP,SAAS,EACT9f,IAAK,IACLwiC,QAAS,CAACzH,EAAYomI,IACbR,GAAY71E,gBAAgB7nF,KAAK4/B,MAAO,OAAQ9H,EAAOomI,IAKlE,gBAAiB,CACfnhK,IAAK,IACLwiC,QAAS,KAAe,MAKhCjH,YAAa,GACbrB,MAAO,SAGTj3B,KAAKmhK,WAAWnhK,KAAKitF,MAAOjtF,KAAK8/J,aACjC9/J,KAAKohK,iBACLphK,KAAKqhK,mBACLrhK,KAAKshK,qBAAuBthK,KAAKmK,iBAAiB,iBAAiB,GACzD,QAAV66D,EAAAhlE,KAAK4/B,aAAK,IAAAolC,GAAAA,EAAEztC,GAAG,cAAev3B,KAAKuhK,aACzB,QAAV3kF,EAAA58E,KAAK4/B,aAAK,IAAAg9C,GAAAA,EAAErlD,GAAG,mBAAoBv3B,KAAKsiJ,mBACxCtiJ,KAAKwhK,0BAA0BvkH,SAAWj9C,KAAKyhK,uBAC/CzhK,KAAK0hK,0BAA0BzkH,SAAWj9C,KAAK2hK,uBAC/C3hK,KAAK4hK,0BAA0B3kH,SAAWj9C,KAAK6hK,uBAE/CxvE,EAAerrF,iBAAiB,cAAehH,KAAK8hK,mBACpDzvE,EAAerrF,iBAAiB,QAAShH,KAAK+hK,SAE9B/hK,KAAK4/B,MAAMylD,UAAU,WAC7Bl7B,WAAW,SAAUxzD,YAG3B,GAFA+mK,GAAYI,cAAc99J,KAAK4/B,MAAOjpC,GAExB,2BAAVA,EAAoC,CACtCqJ,KAAKgiK,aAAyB,QAAVv4H,EAAAzpC,KAAK4/B,aAAK,IAAA6J,OAAA,EAAAA,EAAE9P,eAChC,MAAMtjB,EAAKmgJ,GAAWyL,aAAajiK,KAAK4/B,OACxC5/B,KAAKkiK,8BAA8B7rJ,EAAGoJ,YACjC,GAAc,6BAAV9oB,EAAsC,CAC/CqJ,KAAKgiK,aAAyB,QAAVh9F,EAAAhlE,KAAK4/B,aAAK,IAAAolC,OAAA,EAAAA,EAAErrC,eAChC,MAAMvjB,EAAQogJ,GAAW2L,gBAAgBniK,KAAK4/B,OAC9C5/B,KAAKoiK,8BAA8BhsJ,EAAMqJ,WAI7Czf,KAAK4/B,MAAMtoC,KAAK0P,iB1P3YW,qB0P2YgChH,KAAKqiK,mBAChEriK,KAAK4/B,MAAMtoC,KAAK0P,iB1P3YW,qB0P2YgChH,KAAKqiK,mBAChEriK,KAAKsiK,kBAITtiK,KAAA8hK,kBAAqB/xE,IACnB,MAAMlK,EAAWkK,EAAGh5F,OACK,QAArB8uF,EAASr5D,UACXujE,EAAGzoF,iBC/ZFzG,eAA8B0hK,EAAsB3wJ,EAAUiG,EAAasC,GAChF,MAAM3f,EAAUC,SAASwsC,cAAcigD,yBAAyB,mTAWtBrvE,YAAcsC,0LAOlDs4I,EAAWj4J,EAAQ4Q,cAAc,0BACjCo3J,EAAiBhoK,EAAQ4Q,cAAc,mBAE7CqnJ,EAAS9c,QAAU,KACjB,MAAMl2H,EAAQ7N,EAAInV,aAAa,SAC/B8lK,EAAgBE,8BAA8B7wJ,EAAK6N,IAGrD+iJ,EAAe7sB,QAAU,WACO,QAA9BlsG,EAAA+4H,EAAevJ,qBAAe,IAAAxvH,GAAAA,EAAA9U,gBAG1B4tI,EAAgBjgI,YAAY9nC,GDiY9BkoK,CAAe1iK,KAAM6lF,EAAUkK,EAAGlQ,MAAOkQ,EAAGnQ,SAIhD5/E,KAAA+hK,QAAWhyE,IACT,MAAMlK,EAAWkK,EAAGh5F,OACK,QAArB8uF,EAASr5D,UACXujE,EAAGzoF,iBACHtH,KAAK2iK,YAAY98E,KAIrB7lF,KAAA2iK,YAAe/wJ,IACb,MAAMgxJ,EAAUrsI,MAAMrpB,KAAK0E,GAC3BgxJ,GAAW5iK,KAAK4/B,MAAO9F,aAAa95B,KAAK4/B,MAAOoS,SAAS4wH,GAAU,IAGrE5iK,KAAY6gK,aAAG,KACb,IAAIhlH,EAAY77C,KAAKoL,cAAc,6BACjB,OAAdywC,IACFA,EAAYphD,SAASC,cAAc,SACnCmhD,EAAUn/C,aAAa,OAAQ,QAC/Bm/C,EAAUn/C,aAAa,SAAU,QACjCm/C,EAAUn/C,aAAa,SAAU,6DACjCm/C,EAAUl/C,UAAUE,IAAI,YACxBg/C,EAAU70C,iBAAiB,UAAU,KACnC,GAAwB,OAApB60C,EAAUC,OAAyC,OAAvBD,EAAUC,MAAM,GAAa,CAC3D,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAShhD,IACd,GAAI+E,KAAK6iK,iBAAiB5nK,GAAI,CAC5B,MAAM68B,EAAQ93B,KAAK4/B,MAAOjG,cAAa,GACvC35B,KAAK4/B,MAAOiT,gBAAe,IAAIjlB,IAAQK,OAAO6J,EAAM/gB,OAAOiX,OAAO8J,EAAM99B,QAAQ8zB,OAAO,CAAEyV,MAAOtoC,EAAElE,OAAQ2U,SAAW6qB,MAAMkD,QAAQ8C,MACnIsf,EAAUllD,MAAQ,GAClBklD,EAAUlnB,cAEV30B,KAAKsuJ,QAAQ,sDAAsD5jJ,KAAKo4J,MAAM9iK,KAAKiyI,eAAe19C,oBAAsB,YACxH14C,EAAUlnB,UAGdonB,EAAOG,cAAcL,EAAUC,MAAM,QAGzC97C,KAAKsiC,YAAYuZ,IAEnBA,EAAUM,SAGZn8C,KAAA6iK,iBAAoB5nK,GACLyP,KAAK0/D,MAAMnvE,EAAE8nK,OAAS,MACrB/iK,KAAKiyI,eAAe19C,oBAGpCv0F,KAAAyhK,uBAA0B/4D,IACxB1oG,KAAK4/B,MAAO9F,aAAa95B,KAAKgiK,cAC9BxL,GAAWwM,eAAehjK,KAAK4/B,MAAO8oE,GACtC1oG,KAAKijK,oBACLjjK,KAAKkjK,iCAGPljK,KAAA2hK,uBAA0Bj5D,IACxB1oG,KAAK4/B,MAAO9F,aAAa95B,KAAKgiK,cAC9BxL,GAAW2M,iBAAiBnjK,KAAK4/B,MAAO8oE,GACxC1oG,KAAKijK,oBACLjjK,KAAKojK,iCAGPpjK,KAAA6hK,uBAAyB,CAACjwJ,EAAU82F,KAClC,MAAM77E,EAAO0J,MAAMrpB,KAAK0E,GACxBib,GAAQA,EAAK8G,OAAO,QAAS,GAAG+0E,OAIlC1oG,KAAAsiJ,kBAAqBxqH,IACnB7iB,YAAW,WACT,MAAM0e,EAASmE,IAAmB,UAAV93B,KAAK4/B,aAAK,IAAA6J,OAAA,EAAAA,EAAE7O,UAAU9C,IAC9C93B,KAAKqjK,8BAA8B1vI,KAClC,IAGL3zB,KAAAqjK,8BAAiC1vI,aAC/BA,MAAAA,OAAM,EAANA,EAAQtd,YAAKozB,EAAAzpC,KAAKshK,qCAAsB3kK,UAAUE,IAAI,kBAA6C,UAAzBmD,KAAKshK,4BAAoB,IAAAt8F,GAAAA,EAAEroE,UAAUg4B,OAAO,mBAGxH30B,KAAcohK,eAAG,KACf,MAAMkC,EAAmBtjK,KAAK4/B,MAAOylD,UAAU,WAAWvuF,UACpDysK,EAAUvjK,KAAKoL,cAAc,gBAC7B06E,EAAY9lF,KAAKoL,cAAc,kBAEjCm4J,IACFA,EAAQpsK,WAAYsU,YAAY83J,GAChCD,EAAiBhhI,YAAYihI,IAG/Bz9E,EAAU3uF,WAAYsU,YAAYq6E,GAClCw9E,EAAiBhhI,YAAYwjD,IAG/B9lF,KAAgBqhK,iBAAG,KACjB,MAAMiC,EAAmBtjK,KAAK4/B,MAAOylD,UAAU,WAAWvuF,UAC1DkJ,KAAKwjK,SAASF,EAAkB,iBAAkB,oBAClDtjK,KAAKwjK,SAASF,EAAkB,mBAAoB,oBACpDtjK,KAAKwjK,SAASF,EAAkB,sBAAuB,uBACvDtjK,KAAKwjK,SAASF,EAAkB,kCAAmC,kBACnEtjK,KAAKwjK,SAASF,EAAkB,iCAAkC,sBAClEtjK,KAAKwjK,SAASF,EAAkB,uBAAwB,oBACxDtjK,KAAKwjK,SAASF,EAAkB,gCAAiC,aACjEtjK,KAAKwjK,SAASF,EAAkB,kCAAmC,eACnEtjK,KAAKwjK,SAASF,EAAkB,mDAAoD,sBACpFtjK,KAAKwjK,SAASF,EAAkB,mDAAoD,eACpFtjK,KAAKwjK,SAASF,EAAkB,mDAAoD,qBACpFtjK,KAAKwjK,SAASF,EAAkB,mDAAoD,cACpFtjK,KAAKwjK,SAASF,EAAkB,kBAAmB,qBACnDtjK,KAAKwjK,SAASF,EAAkB,kBAAmB,kBACnDtjK,KAAKwjK,SAASF,EAAkB,iBAAkB,qBAClDtjK,KAAKwjK,SAASF,EAAkB,iBAAkB,oBAClDtjK,KAAKwjK,SAASF,EAAkB,0BAA2B,8BAC3DtjK,KAAKwjK,SAASF,EAAkB,wBAAyB,sBACzDtjK,KAAKwjK,SAASF,EAAkB,kBAAmB,UACnDtjK,KAAKwjK,SAASF,EAAkB,wBAAyB,mBAG3DtjK,KAAQwjK,SAAG,CAACF,EAA+BG,EAAiB1rB,KAAwB,IAAAtuG,EAAA,OAAuC,QAAvCA,EAAA65H,EAAiBl4J,cAAcq4J,UAAQ,IAAAh6H,OAAA,EAAAA,EAAE/sC,aAAa,QAASq7I,IAEnJ/3I,KAAAmhK,WAAa,CAACl0E,EAAe6yE,EAA4B,MACvD,IAAK9/J,KAAK4/B,QAAU5/B,KAAK4/B,MAAMtoC,KAC7B,OAGF0I,KAAKitF,MAAQA,EAEb,MAAMy2E,GAAiBz2E,GAAS,IAC7BxxF,QAAQ,iBAAkB,oBAC1BA,QAAQ,gBAAiB,mBACzBA,QAAQ,eAAgB,kBAE3BuE,KAAK4/B,MAAOvI,QAAQgB,QACnBr4B,KAAK4/B,MAAc4kD,QAAQ41B,KAAOp6G,KAAKo6G,KACxCp6G,KAAK2jK,oBAAmB,GACxB3jK,KAAK4/B,MAAMxH,YAAYp4B,KAAK4/B,MAAMxI,UAAUe,QAAQurI,GAAgB,UACpE1jK,KAAK2jK,oBAAmB,GACxB3jK,KAAK8/J,YAAcA,EAEnB7qJ,YAAW,KACTjV,KAAK4/B,MAAOvI,QAAQgB,QACnBr4B,KAAK4/B,MAAckgI,YAAY8D,SAAS9D,KACxC,KAEH9/J,KAAK6jK,kCAGP7jK,KAAA2jK,mBAAsBj7D,IACnB1oG,KAAK4/B,MAAc4kD,QAAQK,eAAiB6jB,EAC5C1oG,KAAK4/B,MAAckgI,YAAYj7E,eAAiB6jB,EACjD,MAAMhkB,EAAa1kF,KAAK4/B,MAAc4kD,QAAQE,UACzCgkB,GACC1oG,KAAK8jK,0BAA4B,IAAMp/E,GACrC1kF,KAAK+jK,yBACP/jK,KAAK+jK,uBAAuBC,+BAA8B,GAC1D/uJ,YAAW,KACTjV,KAAK6zJ,wBACJ,IAIT7zJ,KAAKikK,0BAA0BjkK,KAAK8jK,4BAGtC9jK,KAAiBijK,kBAAG,WAClB,MAAMh2E,EAAQjtF,KAAK4xF,WAAuB,QAAZnoD,EAAAzpC,KAAK4/B,aAAO,IAAA6J,OAAA,EAAAA,EAAAnyC,KAAKqD,WAC/CqF,KAAKitF,MAAkB,gBAAVA,EAA0B,GAAKA,GAG9CjtF,KAAWuhK,YAAG,aACZ,MAAMt0E,EAAQjtF,KAAK4xF,WAAuB,QAAZnoD,EAAAzpC,KAAK4/B,aAAO,IAAA6J,OAAA,EAAAA,EAAAnyC,KAAKqD,WAC/CqF,KAAKitF,MAAkB,gBAAVA,EAA0B,GAAKA,EAC5CjtF,KAAK+tJ,+BACL/tJ,KAAKsiJ,kBAA8B,QAAZt9E,EAAAhlE,KAAK4/B,aAAO,IAAAolC,OAAA,EAAAA,EAAArrC,gBACnC35B,KAAK6jK,gCAA+B,GACpC7jK,KAAKsiK,gBACLtiK,KAAK6zJ,uBAwBP7zJ,KAAiBqiK,kBAAG,KAClBriK,KAAK8/J,YAAe9/J,KAAK4/B,MAAckgI,YAAYoE,kBAIrDlkK,KAAA4xF,WAAa,CAACx3F,EAAO,MACnB,IAAIsR,EAAStR,EACVqB,QAAQ,aAAc,UACtBA,QAAQ,oBAAqB,iBAC7BA,QAAQ,mBAAoB,gBAC5BA,QAAQ,kBAAmB,eAG9B,OADAiQ,EEvmBoC,EAACtR,EAAO,MAI9C,MAAM+pK,EAAU1pK,SAASC,cAAc,OAIvC,OAHAypK,EAAQxpK,UAAYP,EACK+pK,EAAQh6J,iBAAiB,gBACjC7N,SAASupF,UAAkB,eAAAp8C,EAAAo8C,EAAS1uF,iCAAYsU,YAAYo6E,MACtEs+E,EAAQxpK,WF+lBJypK,CAAyB14J,GAC1B1L,KAAK4/B,MAAckgI,YAAYuE,8BAA8B34J,IAGvE1L,KAAIu5C,KAAG,eACO,QAAZ9P,EAAAzpC,KAAK4/B,aAAO,IAAA6J,GAAAA,EAAA1iC,QACP/G,KAAK4/B,MAAc4kD,QAAQkD,WAAuB,QAAZ1iB,EAAAhlE,KAAK4/B,aAAO,IAAAolC,OAAA,EAAAA,EAAArrC,oBAAgBp5B,KAC3D,QAAVq8E,EAAA58E,KAAK4/B,aAAK,IAAAg9C,GAAAA,EAAEvlD,QAAQkiB,OACpBv5C,KAAK6jK,mCAIT7jK,KAAIw5C,KAAG,eACO,QAAZ/P,EAAAzpC,KAAK4/B,aAAO,IAAA6J,GAAAA,EAAA1iC,QACP/G,KAAK4/B,MAAc4kD,QAAQmD,WAAuB,QAAZ3iB,EAAAhlE,KAAK4/B,aAAO,IAAAolC,OAAA,EAAAA,EAAArrC,oBAAgBp5B,KAC3D,QAAVq8E,EAAA58E,KAAK4/B,aAAK,IAAAg9C,GAAAA,EAAEvlD,QAAQmiB,OACpBx5C,KAAK6jK,mCAIT7jK,KAAAskK,cAAiBC,IACfvkK,KAAK6/J,OAAS,IAAI0E,IAGZvkK,KAAawkK,cAAG,IACfxkK,KAAKo6G,OAASiN,GAAKu5C,cAAgB,+BAAiC,6BAGrE5gK,KAAYykK,aAAG,IACdzkK,KAAKo6G,OAASiN,GAAKu5C,cAAgB,sCAAwC,oCAG5E5gK,KAAe0kK,gBAAG,KACvB1kK,KAAK4/B,MAAc4kD,QAAQwB,cAAa,GACzChmF,KAAK2kK,0BAAqBpkK,GAC1BP,KAAK6jK,iCACL7jK,KAAK4kK,kBAGC5kK,KAAuB8jK,wBAAG,eAChC,OAA4D,QAArDlnF,EAA8B,QAA9B5X,EAAqB,QAApBv7B,EAAAzpC,KAAK4/B,aAAe,IAAA6J,OAAA,EAAAA,EAAA+6C,eAAS,IAAAxf,OAAA,EAAAA,EAAA6jB,+BAAuB,IAAAjM,EAAAA,EAAI,GAG1D58E,KAAgB6kK,iBAAG,KACxB7kK,KAAK4/B,MAAc4kD,QAAQwB,cAAa,GACzChmF,KAAK2kK,0BAAqBpkK,GAC1BP,KAAK6jK,iCACL7jK,KAAK4kK,kBAIC5kK,KAAA6jK,+BAAiC,CAACiB,GAAY,KACpD,MAAMC,EAAW,KACf,MAAM39C,EAAapnH,KAAK8jK,0BACpB18C,EAAa,IAAM0pB,GAAU78C,WAAWu5C,gBAAgB9oD,WACtD1kF,KAAK+jK,wBACP/jK,KAAK+jK,uBAAuBC,+BAA8B,GAI3C,IAAf58C,EACFpnH,KAAK4kK,iBACIx9C,EAAa,GACtBpnH,KAAKsiK,gBAEPtiK,KAAKglK,cAA6B,IAAf59C,EAtpBa,oBAupBhCpnH,KAAKglK,cAA6B,IAAf59C,EAxpBY,mBAypB/BpnH,KAAKikK,0BAA0B78C,IAG7B09C,EACFC,KAEA9rJ,aAAajZ,KAAKilK,qCAClBjlK,KAAKilK,oCAAsChwJ,WAAW8vJ,EAAU,OAI5D/kK,KAAAglK,cAAgB,CAACE,EAAqB93J,KAC5C,MAAM+3J,EAAenlK,KAAKoL,cAAc,IAAIgC,KACxC+3J,IACED,EACFC,EAAazoK,aAAa,WAAYwoK,GAEtCC,EAAax9J,gBAAgB,cAK3B3H,KAAasiK,cAAG,KAClBtiK,KAAKo6G,OAASiN,GAAKu5C,cACrB3B,GAA6BnuB,GAAU78C,WAAWu5C,iBAElD8xB,GAA0BxuB,GAAU78C,WAAWu5C,kBAI3CxtI,KAAc4kK,eAAG,KACvB3F,GAA6BnuB,GAAU78C,WAAWu5C,iBAAiB,GACnE8xB,GAA0BxuB,GAAU78C,WAAWu5C,iBAAiB,IAG1DxtI,KAAAikK,0BAA6B78C,IACnC,MAAMvhC,EAAW7lF,KAAKoL,cAAc,IAAIpL,KAAKykK,kBACzC5+E,IACFA,EAASlrF,UAAYysH,IA1iBvBpnH,KAAKw7C,MAAY,KAAI,8MAIrBx7C,KAAKw7C,MAAY,KAAI,kNAKrBx7C,KAAKw7C,MAAY,KAAIykG,GACrBjgJ,KAAKw7C,MAAiB,U1C1LA,mjB0C2LtBx7C,KAAKw7C,MAAM,e1CnKgB,qU0CoK3Bx7C,KAAKw7C,MAAM,iB1C1KkB,0d0C2K7Bx7C,KAAKw7C,MAAM,e1C/JkB,uwB0CiC3BgvG,wBAGF,OAAQxqJ,KAAKggK,sBAAoChgK,KAAKolK,wBAAjB7kK,EAGhCokK,qBAAqB13E,GAC1BjtF,KAAKolK,mBAAqBn4E,EAWpBi1E,8BAA8BziJ,GACpCzf,KAAKwhK,0BAA0Bl1G,KAAK7sC,GAG9ByjJ,gCACNljK,KAAKwhK,0BAA0BrmH,OAGzBinH,8BAA8B3iJ,GACpCzf,KAAK0hK,0BAA0Bp1G,KAAK7sC,GAG9B2jJ,gCACNpjK,KAAK0hK,0BAA0BvmH,OAGzB4yG,+BACN90I,aAAajZ,KAAKkzJ,eAClBlzJ,KAAKkzJ,cAAgBj+I,YAAW,KAC9BjV,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAc/zJ,KAAK+/J,mBAIzB//J,KAAK28I,SAAStJ,OAAOrzI,KAAK+/J,kBACzB,KAGL9nI,OAAOo6G,GACLtyI,MAAMk4B,OAAOo6G,GAGf99E,mBACE,OAAOv0D,KAGTg0F,aAAa19F,aACX,MAAM+uK,EAAmC,QAAlB57H,EAAAzpC,KAAK4/B,aAAa,IAAA6J,OAAA,EAAAA,EAAE+6C,QACrChtD,EAAiD,QAA1BwtC,EAAA1uE,EAAMk3I,gBAAgBhzB,UAAI,IAAAx1C,OAAA,EAAAA,EAAAxtC,OACnDA,IACEA,EAAOsS,MAAKimD,GAAMA,EAAG0qB,YAAcR,GAAUi0B,kBAC/Cm3B,IAAkBA,EAAc3gF,WAAY,GACvC1kF,KAAKolK,qBACRplK,KAAKolK,mBAAqBplK,KAAKitF,QAExBz1D,EAAOsS,MAAKimD,GAAMA,EAAG0qB,YAAcR,GAAUm2B,sBACtDi1B,IAAkBA,EAAc3gF,WAAY,GAC5C1kF,KAAKolK,wBAAqB7kK,GAGxBi3B,EAAOsS,MAAKimD,GAAMA,EAAG0qB,YAAcR,GAAUq2B,mBAAoB+0B,IACnEA,EAAcvgF,SAAuC,UAA7BxuF,EAAMk3I,gBAAgB1oD,eAAO,IAAAlI,OAAA,EAAAA,EAAE0rB,OAAQ,YAUrEvyG,SACE,OAAOqE,EAAI;QACP87J,MAAiBD,MAAsB+I,MAAiBh/J,KAAKo6G,OAASiN,GAAK44C,YAAcjgK,KAAKslK,mBAAqB;;;;;kBAKzGtlK,KAAKo6G;;yBAEEp6G,KAAKwkK;yCACWxkK,KAAKykK;;;;4GAI8D,IAAYzkK,KAAK0kK;;;8GAGf,IAAY1kK,KAAK6kK;;;;iBAI9G7kK,KAAKT,uDAAuDS,KAAKsgK;;;;MAyBxEgF,mBACN,OAAOlrK,EAAI;;wEAEyD,IGxMjEyG,eAAiCg/J,EAAiByE,EAA+B/B,GACtF,MAAMttB,EAAax6I,SAASC,cAAc,aAC1C6nK,EAAgBjgI,YAAY2yG,GAE5BA,EAAWhgG,MAAQ,QACnBggG,EAAWjuI,iBAAiB,oBAAqB1O,IACnB,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM9M,EAAUC,SAASwsC,cAAcigD,yBAAyB,q+BAmC8Ex8E,KAAKo4J,MAC/IP,EAAgBtwB,eAAe39C,mBAAqB,+SAWlDixE,EAAgBtqK,IACpB,MAAMuqK,EAAevqK,EAAElE,OAAoB0F,aAAa,eACxDojK,EAASA,EAAOlmK,QAAOwW,GAAKA,EAAEq1J,cAAgBA,IAC9CC,KAIIC,EAAezqK,YACnB,MAAMuqK,EAAevqK,EAAElE,OAAoB0F,aAAa,eAClD8nK,EAAQ1E,EAAO3yJ,MAAKiD,GAAKA,EAAEq1J,cAAgBA,IAC3C1sF,EAAM9wE,OAAOc,QAEK,QAApB2gC,EAAA86H,MAAAA,OAAA,EAAAA,EAAOiB,mBAAa,IAAA/7H,OAAA,EAAAA,EAAAnuC,MAAM,aAC5Bw9E,MAAAA,GAAAA,EAAKr+E,SAASkrK,MAAM,eAAepB,MAAAA,OAAA,EAAAA,EAAOqB,uEAGpB,QAApB5gG,EAAAu/F,MAAAA,OAAA,EAAAA,EAAOiB,mBAAa,IAAAxgG,OAAA,EAAAA,EAAA1pE,MAAM,8BAC5Bw9E,MAAAA,GAAAA,EAAKr+E,SAASkrK,MAAM,aAAapB,MAAAA,OAAA,EAAAA,EAAOqB,6CAG1C9sF,MAAAA,GAAAA,EAAKr+E,SAASkrK,MAAM,YAAYpB,MAAAA,OAAA,EAAAA,EAAOqB,qBAAqBrB,MAAAA,OAAA,EAAAA,EAAOiB,+CAG/DC,EAAmB,KACvB,IAAII,EAAe,GACnBC,EAASzsK,SAASwmK,EAAO7lK,OAEzB6lK,EAAOvjK,SACL6T,GACG01J,GAAgB,yIAEkB11J,EAAEq1J,kDAAkDr1J,EAAEy1J,mFAE/Dz1J,EAAEq1J,uQAIuGr1J,EAAEq1J,8QAI3Br1J,EAAEq1J,2JAKhHn0J,EAAM1W,UAAYkrK,IACLx0J,MAAAA,OAAI,EAAJA,EAAMlH,iBAAiB,uBAC3B,IAAI7N,SAAQypK,GAAQA,EAAIpwB,QAAU4vB,MACtBl0J,MAAAA,OAAI,EAAJA,EAAMlH,iBAAiB,wBAC3B,IAAI7N,SAAQ0pK,GAAgBA,EAAYrwB,QAAU+vB,KAG/DI,EAAWtrK,EAAQ4Q,cAAc,cACjC66J,EAAczrK,EAAQ4Q,cAAc,iBACpCiG,EAAO7W,EAAQ4Q,cAAc,SAC7BsqI,EAASl7I,EAAQ2P,iBAAiB,aAClC+7J,EAAYxwB,EAAO,GACnBywB,EAASzwB,EAAO,GAEtBuwB,EAAYG,QAAU,KACpBC,EAAS9D,IAGX2D,EAAUvwB,QAAU,KAClB2uB,EAAczE,GACd9R,EAA6B9Y,GAC7BA,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,SACZkrI,EAAS,IAGXsG,EAAOxwB,QAAU,KACfV,MAAAA,GAAAA,EAAY95F,OACZ85F,MAAAA,GAAAA,EAAYtgH,SACZkrI,EAAS,IAGX,MAAM9R,EAAgCloE,IACpCA,EAAS18E,cACP,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAc,aAMhBsS,EAAWxlK,MAAO0hK,YACtB,GAAI0D,MAAAA,SAAAA,EAAanqH,MAAO,CACtB,MAAMstB,EAAO68F,EAAYnqH,MAAM,GAEzBwqH,EAAkB7mC,EAAWr2D,EAAMm5F,GAEzC,GAA+B,IAA3B+D,EAAgBtsK,OAAc,CAChC,MAAMuqK,QAAcgC,EAAan9F,GACjCy2F,EAAOnrJ,KAAK6vJ,GACZ0B,EAAYnqH,MAAQ,KACpB2pH,IAC4C,QAA5Ch8H,EAAAhvC,SAAS+E,eAAe,4BAAoB,IAAAiqC,GAAAA,EAAE9hC,gBAAgB,iBAEhB,QAA9Cq9D,EAAAvqE,SAAS+E,eAAe,4BAAsB,IAAAwlE,GAAAA,EAAAtoE,aAAa,WAAY,QAEvE4pK,EAAgBhqK,SAAQq4I,UACY,QAAlClrG,EAAAhvC,SAAS+E,eAAem1I,UAAU,IAAAlrG,GAAAA,EAAE9hC,gBAAgB,aAGtD6+J,EAAwBlqK,SAAQmqK,UACzBH,EAAgB5yJ,SAAS+yJ,IACgB,QAA5Ch9H,EAAAhvC,SAAS+E,eAAeinK,UAAoB,IAAAh9H,GAAAA,EAAA/sC,aAAa,SAAU,aAOvE8pK,EAAoC,CAAC,wBAAyB,cAE9D/mC,EAAa,CAACr2D,EAAWm5F,KAC7B,MAAM9iC,EAAuB,GAkB7B,OAjBIr2D,IACW1+D,KAAK0/D,MAAMhB,EAAK7H,KAAO,MAEzBghG,EAAgBtwB,eAAe39C,oBACxCmrC,EAAW/qH,KAAK,yBAGA,oBAAd00D,EAAKvmD,MACP48G,EAAW/qH,KAAK,cAGd+qH,EAAWzlI,OAAS,GACtBylI,EAAW/qH,KAAK,cAKb+qH,GAGH8mC,EAAgBn9F,GACb,IAAI5nE,SAAQ,CAACC,EAASyqC,KAC3Bg6H,EAAU9sK,UAAW,EACrB+sK,EAAO/sK,UAAW,EAClB,MAAMstK,EAAa,IAAI1qH,WACvB0qH,EAAWxqH,cAAcktB,GACzBs9F,EAAWzqH,OAAS,WAClBiqH,EAAU9sK,UAAW,EACrB+sK,EAAO/sK,UAAW,EAClBqI,EAAQ,CAAE+jK,YAAap8F,EAAK1yE,KAAMkvK,SAA0B,UAAjBc,EAAWh7J,cAAM,IAAA+9B,OAAA,EAAAA,EAAE5+B,aAAc,IAAIpP,QAAQ,aAAc,OAExGirK,EAAWC,QAAUnwI,GAAS0V,EAAO1V,MAIzCivI,UACMxwB,EAAW3yG,YAAY9nC,SACvBy6I,EAAW3oF,OACjBr3C,YAAW,KACTgxJ,EAAYl/J,UACX,GHpB8E6/J,CAAkB5mK,KAAK6/J,OAAQ7/J,KAAKskK,cAAetkK;;;;;;;cAOxHA,KAAKogK;;;;MAaT9R,QAAQ13D,GACd,MAAMs0D,EAAQvtJ,OAAOqD,OAAOvG,SAASC,cAAc,YAAa,CAC9D4mE,QAAS,SACT6pF,UAAU,EACV5jI,SAAU,IACV5sB,UAAW,iFAEPi8F,cAGNn8F,SAASyP,KAAKlN,OAAOkuJ,GACrBA,EAAME,QAGR11F,eACE11D,KAAKs3B,OAGPvT,+BACY,QAAV0lB,EAAAzpC,KAAK4/B,aAAK,IAAA6J,GAAAA,EAAEhO,IAAI,cAAez7B,KAAKuhK,aAC1B,QAAVv8F,EAAAhlE,KAAK4/B,aAAK,IAAAolC,GAAAA,EAAEvpC,IAAI,mBAAoBz7B,KAAKsiJ,mBACzCviJ,MAAMgkB,uBAoWD8vI,kCACL,MAAMt0J,EAAK,wBAEX,GAAIS,KAAK8jK,0BAA4B,GAAKj7E,GAAsBioD,GAAU78C,WAAWu5C,gBAAgBxyC,UAAY,GAC/G,GAA0F,KAAtC,QAAhDh2B,EAAuC,QAAvCv7B,EAAAqnG,GAAU78C,WAAWu5C,gBAAgBhzB,UAAE,IAAA/wE,OAAA,EAAAA,EAAEkxE,eAAO,IAAA31C,OAAA,EAAAA,EAAErrE,QAAOwW,GAAKA,EAAE5Q,KAAOA,IAAIvF,QAAc,CAC3F,MAAM28F,EAAS,CACbp3F,GAAIA,EACJ62F,KAAM,OACNQ,SAAU,oGACVC,YAAY,EACZC,qBAAqB,GAEvB7hF,YAAW,KACT67H,GAAUW,SAAS/6C,GAAgBC,MAClC,iBAEInhE,EAAyC,QAAzConD,EAAAk0D,GAAU78C,WAAWu5C,gBAAgBhzB,UAAI,IAAA59B,OAAA,EAAAA,EAAA+9B,8BAAS7wE,MAAK6sD,GAAUA,EAAOp3F,KAAOA,MACxFuxI,GAAUW,SAAS16C,GAAcx3F,IA6HrCsnK,iBAAiBh1E,GACd7xF,KAAK4/B,MAAckgI,YAAYgH,OAAOj1E,GAGzCk1E,kBAAkBl1E,GACf7xF,KAAK4/B,MAAckgI,YAAY1nC,QAAQvmC,KAnsBd2B,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMjoB,UAAqBglK,GAAA3nK,UAAA,aAAA,GACZu7F,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAA8B4nK,GAAA3nK,UAAA,cAAA,GACrBu7F,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAAwC4nK,GAAA3nK,UAAA,mBAAA,GACAu7F,GAAA,CAAzDhgF,GAAS,CAAEqP,KAAMjoB,OAAQ4B,UAAW,qBAAyCojK,GAAA3nK,UAAA,sBAAA,GAClDu7F,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAsEiiK,GAAA3nK,UAAA,sBAAA,GAGxFu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACRglK,GAAA3nK,UAAA,YAAA,GAYVu7F,GAAA,CADCppE,GAAM,wCACsEw1I,GAAA3nK,UAAA,iCAAA,GAG7Eu7F,GAAA,CADCppE,GAAM,wCACsEw1I,GAAA3nK,UAAA,iCAAA,GAG7Eu7F,GAAA,CADCppE,GAAM,qCACgEw1I,GAAA3nK,UAAA,iCAAA,GAGvEu7F,GAAA,CADCppE,GAAM,oCACiDw1I,GAAA3nK,UAAA,8BAAA,GA7B7C2nK,GAAwBpsE,GAAA,CADpC0+C,GAAc,sBACF0tB,IAwsBb,MAAMe,GAAiB,CACrB,SACA,OACA,SACA,QACA,YACA,QACA,OACA,SACA,QACA,QACA,KACA,KACA,OACA,cACA,gBACA,QACA,QACA,WAGIF,GAAiB,CACrB,CAAC,CAAEuG,OAAQ,EAAC,EAAO,SAAU,oBAC7B,CAAC,OAAQ,SAAU,aACnB,CAAC,CAAE9hJ,KAAM,WAAa,CAAEA,KAAM,WAC9B,CAAC,CAAE/S,OAAQ,OAAS,CAAEA,OAAQ,UAE9B,CAAC,OAAQ,QACT,CAAC,CAAEkN,MAAO,KACV,CAAC,CAAE,cAAe,QAClB,CAAC,CAAE,gBAAiB,QACpB,CAAC,SACD,CACE,CACEjJ,MAAOsnJ,GAAYO,gBAErB,CACE7nJ,MAAO,CAEL,yBACA,2BACA,mBACA,mBACA,oBACA,mBACA,aACA,aACA,eACA,aACA,qBAMN,CAAC,UIlyBH,IAAa6wJ,GAAb,cAA8D7rG,GAA9Dj+D,kCAQU6C,KAAYknK,aAAG,GAGflnK,KAAIo2F,KAAG,GAKR9pC,KAAK7sC,GACVzf,KAAKknK,aAAeznJ,EAAQA,EAAMhkB,QAAQ,IAAK,IAAM,GACrDuE,KAAKmnK,QAAQhsH,OACbn7C,KAAKonK,SAAS96G,OACdr3C,YAAW,aACiC,QAA1C+vD,EAAiB,QAAjBv7B,EAAAzpC,KAAK5J,kBAAY,IAAAqzC,OAAA,EAAAA,EAAAr+B,cAAc,mBAAW,IAAA45D,GAAAA,EAAEj+D,UAC3C,GAGEo0C,OACLn7C,KAAKonK,SAASjsH,OAGRksH,iBACN,MAAM5nJ,EAAQhV,SAASzK,KAAKknK,cACxBz/J,MAAMgY,IAAUA,EAAQ,GAAKA,EAAQ,IACvCzf,KAAKmnK,QAAQ76G,OACJtsD,KAAKi9C,WACdj9C,KAAKi9C,SAASx9B,GACdzf,KAAKm7C,QAITplD,SACE,OAAOqE,EAAI;;;;;;;;;;;;+CAYgC4F,KAAKo2F;oDACAp2F,KAAKo2F;wCACjBp2F,KAAKknK,oCAAoCjsK,GAAM+E,KAAKknK,aAAejsK,EAAElE,OAAOJ;;;;;;;0CAO1E,IAAYqJ,KAAKqnK;4DACC,IAAYrnK,KAAKonK,SAASjsH;;QA5DpFq4C,GAAA,CADCppE,GAAM,cACgB68I,GAAAhvK,UAAA,gBAAA,GAGvBu7F,GAAA,CADCppE,GAAM,aACe68I,GAAAhvK,UAAA,eAAA,GAGtBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACQqsK,GAAAhvK,UAAA,oBAAA,GAG1Bu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACAqsK,GAAAhvK,UAAA,YAAA,GAGlBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMuP,YACT60I,GAAAhvK,UAAA,gBAAA,GAdEgvK,GAAwCzzE,GAAA,CADpD0+C,GAAc,8CACF+0B,ICAb,IAAaK,GAAb,cAAwDlsG,GAAxDj+D,kCAQU6C,KAAYknK,aAAG,GAGflnK,KAAIo2F,KAAG,GAOR9pC,KAAK16C,EAAU6N,GACpBzf,KAAKknK,aAAeznJ,EAAQA,EAAMhkB,QAAQ,IAAK,IAAM,GACrDuE,KAAK4R,IAAMA,EACX5R,KAAKmnK,QAAQhsH,OACbn7C,KAAKonK,SAAS96G,OACdr3C,YAAW,aACiC,QAA1C+vD,EAAiB,QAAjBv7B,EAAAzpC,KAAK5J,kBAAY,IAAAqzC,OAAA,EAAAA,EAAAr+B,cAAc,mBAAW,IAAA45D,GAAAA,EAAEj+D,UAC3C,GAGEo0C,OACLn7C,KAAKonK,SAASjsH,OAGRksH,iBACN,MAAM5nJ,EAAQhV,SAASzK,KAAKknK,cACxBz/J,MAAMgY,IAAUA,EAAQ,GAAKA,EAAQ,IACvCzf,KAAKmnK,QAAQ76G,OACJtsD,KAAKi9C,WACdj9C,KAAKi9C,SAASj9C,KAAK4R,IAAK6N,GACxBzf,KAAKm7C,QAITplD,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;wCAcyB4F,KAAKknK,oCAAoCjsK,GAAM+E,KAAKknK,aAAejsK,EAAElE,OAAOJ;;;;;;;0CAO1E,IAAYqJ,KAAKqnK;4DACC,IAAYrnK,KAAKonK,SAASjsH;;QA/DpFq4C,GAAA,CADCppE,GAAM,cACgBk9I,GAAArvK,UAAA,gBAAA,GAGvBu7F,GAAA,CADCppE,GAAM,aACek9I,GAAArvK,UAAA,eAAA,GAGtBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACQ0sK,GAAArvK,UAAA,oBAAA,GAG1Bu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACA0sK,GAAArvK,UAAA,YAAA,GAGlBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMuP,YACTk1I,GAAArvK,UAAA,gBAAA,GAdEqvK,GAAkC9zE,GAAA,CAD9C0+C,GAAc,uCACFo1B,ICFN,MAAMC,GAA2BntK,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCC/BotK,GAAbrqK,cAEE6C,KAAAynK,uBAAwB,IAAIxoK,MAAOyoK,cACnC1nK,KAAS2nK,UAAG,GACZ3nK,KAAe4nK,gBAAG,GAClB5nK,KAAA6nK,WAAaC,GAAiBtoD,OAE9Bx/G,KAAS+nK,UAAoB,GAC7B/nK,KAAAgoK,WAAa,IAAIC,GACjBjoK,KAAA08H,SAAW,IAAIwrC,GACfloK,KAAAmoK,YAAc,CAAC,IAAIC,IACnBpoK,KAAAqoK,wBAA0B,IAAIC,GAC9BtoK,KAAAuoK,cAAgB,IAAIC,GAEpBxoK,KAAM6/J,OAAY,GAClB7/J,KAAayoK,cAAG,GAEhBzoK,KAAK0oK,MAAG,GACR1oK,KAAA2kC,MAAgB,IAAI1lC,MAAOyoK,cAAcjsK,QAAQ,MAAO,IACxDuE,KAAA2oK,QAAU,IAAIC,GACd5oK,KAAA6oK,gBAAkB,IAAIC,GACtB9oK,KAAQg7F,SAAc,GACtBh7F,KAAA+oK,oBAAsB,IAAIC,GAC1BhpK,KAAW8/J,YAAiB,IAO9B,IAAYgI,GAyFAmB,IAzFZ,SAAYnB,GACVA,EAAA,OAAA,SACAA,EAAA,0BAAA,yBACAA,EAAA,mBAAA,mBACAA,EAAA,0BAAA,0BAJF,CAAYA,KAAAA,GAKX,WAGYG,GAAb9qK,cACE6C,KAAG0vG,IAAG,GACN1vG,KAAK6vG,MAAG,GACR7vG,KAAM4uF,OAAG,GACT5uF,KAAGmxG,IAAG,GACNnxG,KAAM24F,OAAG,GACT34F,KAAkBkpK,mBAAG,UAIVF,GAAb7rK,cACE6C,KAAoBmpK,qBAAuB,KAC3CnpK,KAAaopK,cAAsD,kBAKxDlB,GAAb/qK,cACE6C,KAAKitF,MAAG,GACRjtF,KAAWyiH,YAAG,UAIH2lD,GAAbjrK,cACE6C,KAAG0vG,IAAG,GACN1vG,KAAUqpK,YAAG,EAGbrpK,KAAAk3F,aAAe,IAAIoyE,UAIRA,GAAbnsK,cACE6C,KAAsB8tI,uBAAiC,GACvD9tI,KAAuB+tI,wBAAkC,GACzD/tI,KAAuBqzH,wBAAkC,UAG9Ck2C,GAAbpsK,cACE6C,KAAAo2F,KAAO,GACPp2F,KAAAT,GAAK,IAKD,MAAOiqK,WAAmCD,IAE1C,MAAOE,WAAoCF,IAQ3C,MAAOG,WAAoCD,UAQpCjB,GAAbrrK,cAEE6C,KAAQuyI,SAAwB,UAGrB+1B,UAMAqB,GACXxsK,YAAmBu1I,EAA0BE,GAA1B5yI,KAAS0yI,UAATA,EAA0B1yI,KAAO4yI,QAAPA,IAM/C,SAAYq2B,GACVA,EAAA,iBAAA,mBACAA,EAAA,YAAA,cACAA,EAAA,SAAA,WACAA,EAAA,iBAAA,mBAJF,CAAYA,KAAAA,GAKX,WACYL,GAAbzrK,cACE6C,KAAAo2F,KAAO6yE,GAAYW,YACnB5pK,KAAiB6pK,mBAAG,EACpB7pK,KAAwC8pK,yCAAG,EAC3C9pK,KAAwC+pK,yCAAG,EAE3C/pK,KAAagqK,cAAuB,UAqBzBlB,GAAb3rK,cACE6C,KAAciqK,gBAAG,EACjBjqK,KAAckqK,eAAG,GACjBlqK,KAAwBmqK,0BAAG,EAC3BnqK,KAAYoqK,aAAG,UASJC,GAAbltK,cACE6C,KAAIo2F,KAA0B,YAC9Bp2F,KAAKsqK,MAAG,GACRtqK,KAASuqK,UAAG,GACZvqK,KAAYwqK,cAAG,EACfxqK,KAAYyqK,cAAG,SCnKJC,GAAbvtK,cACU6C,KAAgB2qK,sBAA4BpqK,EAE5CP,KAAA4qK,kBAAmC,GAEnC5qK,KAAsB6qK,wBAAG,EAE1BC,SAAS5zE,GACdA,EAAeA,EAAav9F,QAAOmvB,GAAKA,EAAE+2E,IAAKV,SAASC,oBAAsBP,GAAkBK,uBAAyBiB,GAA0Br3E,EAAE+2E,OACrJ7/F,KAAK4qK,kBAAoB5qK,KAAK+qK,qCAAqC7zE,GACnEA,EAAaxiF,QAAQ1U,KAAK4qK,mBAC1B1zE,EAAaj2E,KAAK4nF,GAAsB5qE,SAExC,MAAM+sI,EAAqBrhE,GAAWshE,wCAAwC/zE,GAExE4U,EAAK,IAAIre,GACfztF,KAAKkrK,oBAAoBp/D,EAAIk/D,GAG7B,GADmBhrK,KAAK6qK,wBAA0BlhE,GAAWwhE,aAAanrK,KAAK2qK,kBAC/D,CACd,MAAM3gE,EAAW,IAAIghE,EAAmB7pK,QAAQ,GAC1CklH,EAASniB,GAA8B8F,GACvCtL,EAAgB2nB,EAAO3nB,cAAgB,KAAO2nB,EAAO3nB,cAAgB,IAAM,GACjF,OAAOoN,EAAGjhG,WAAWpP,QAAQ,WAAY,IAAMijG,EAAgB,MAEjE,OAAOoN,EAAGjhG,WAGJkgK,qCAAqC7zE,GAC3C,MAAMl6C,EAAM,IAAIhlD,MAEhB,IAAK,MAAM8wB,KAAKouE,EACd,GAAI+I,GAAUn3E,GAAI,CAGhB,MAAMo5E,EAAWyH,GAAWpG,6BAA6Bz6E,GAKzD,GAJKouE,EAAaxjF,SAASwuF,IACzBllD,EAAItoC,KAAKwtF,IAGNyH,GAAWwhE,aAAariJ,GAAI,CAC/B,MAAMo9E,EAAYyD,GAAWuC,8BAA8BpjF,GACvDo9E,IAAchP,EAAaxjF,SAASwyF,IACtClpD,EAAItoC,KAAKwxF,IAMjB,OAAOlpD,EAGDkuH,oBAAoBp/D,EAAmBk/D,GAC7C,MAAM3kD,EAAS,IAAI2kD,EAAmB7pK,QAAQ,GAC9C6pK,EAAqBA,EAAmBlvK,IAAIuqH,GAE5C,MAAM+kD,EAAcjrE,GAA0BkmB,GAExCt6F,EAAUs6F,EAAOjwB,KAAKx/F,eAAiBw0K,EAAc,aAAe,IAEpE3zK,EAAO,IAAI4wG,GAAQ,KAAKM,YAAY,QAAS58E,GAKnD,GAJIk2E,GAAuBokB,EAAOxmB,MAChCpoG,EAAKoF,IAAI,KAEXpF,EAAKoF,IAAI,IAAIwrG,GAAQ,UAAUxrG,IAAIwpH,EAAO9Z,SACtC6+D,EACF,GAAI/kD,EAAOlnB,SAASC,oBAAsBP,GAAkBK,sBAC1DznG,EAAKoF,IAAI8sG,GAAW0hE,+BAA+BhlD,IACnDva,EAAG9uG,OAAOvF,EAAKoT,gBACV,CACLihG,EAAG9uG,OAAOvF,EAAKoT,YACf,MAAMygK,EAAkB,IAAIjjE,GAAQ,KAAKM,YAAY,QAAS58E,GAASlvB,IAAI8sG,GAAW0hE,+BAA+BhlD,IACrHva,EAAG9uG,OAAOsuK,EAAgBzgK,iBAG5BpT,EAAKoF,IAAI8sG,GAAW0hE,+BAA+BhlD,GAAQ,IAC3Dva,EAAG9uG,OAAOvF,EAAKoT,YAGjB7K,KAAK2qK,iBAAmBtkD,EACpB2kD,EAAmBzpG,KAAO,GAAK8kD,EAAOlnB,SAASC,oBAAsBP,GAAkBK,uBACzFl/F,KAAKurK,mBAAmBz/D,EAAIk/D,GAGzB7qE,GAA0BkmB,IAC7BrmH,KAAKwrK,kBAAkB1/D,EAAIua,GAIvBklD,mBAAmBz/D,EAAmBk/D,GAC5C,MAAMhqE,EAAS,IAAIgqE,EAAmB7pK,QACtC6/F,EAAO//E,KAAK4nF,GAAsB5qE,SAElC,IAAK,MAAMnV,KAAKk4E,EAAQ,CACtB,MAAMyqE,EAAcT,EAAmBlvK,IAAIgtB,GAErCslG,EAAsBzkB,GAAWpG,6BAA6Bz6E,GAiBpE,GAXI02E,GAASx/F,KAAK2qK,oBAAqClrE,GAAQ32E,GAExD22E,GAAQ2uB,IAAyBnuB,GAAUn3E,IAC9CgjF,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YAE9B7K,KAAK2qK,mBAAqBv8C,GAAwBnuB,GAAUn3E,IAAMslG,EAAoBjvB,SAASC,oBAAsBP,GAAkBK,uBAChJ4M,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,aAKlC40F,GAAQ32E,GAAI,CACf,MAAMsiJ,EAAcjrE,GAA0Br3E,GACxCiD,EAAUjD,EAAEstE,KAAKx/F,eAAiBw0K,EAAc,aAAe,IACrE,GAAItiJ,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,qBAAsB,CAC3E,MAAMvtG,EAAO,IAAI4wG,GAAQ,KAAKM,YAAY,SAAU58E,GAC/Ck0E,GAAUn3E,IACbrxB,EAAKoF,IAAI,IAAIwrG,GAAQ,UAAUxrG,IAAIisB,EAAEyjF,SAEvC90G,EAAKoF,IAAI8sG,GAAW0hE,+BAA+BviJ,GAAG,IACtDgjF,EAAG9uG,OAAOvF,EAAKoT,iBACV,GAAI7K,KAAK2rK,mBAAmBF,IAAgBzrK,KAAK4qK,kBAAkBl3J,SAASoV,GAAI,CACrF,MAAMltB,EAAM,IAAIysG,GAAQ,KAAKM,YAAY,SAAU58E,GACnDnwB,EAAIiB,IAAI,IAAIwrG,GAAQ,UAAUxrG,IAAIisB,EAAEyjF,SACpC3wG,EAAIiB,IAAI,IAAIwrG,GAAQ,YACpByD,EAAG9uG,OAAOpB,EAAIiP,iBAEdihG,EAAG9uG,OAAO,IAAIqrG,GAAQ,WAAWx9F,YAIrC7K,KAAK2qK,iBAAmB7hJ,EAIpB2iJ,GAAeA,EAAYlqG,KAAO,GACpCvhE,KAAKurK,mBAAmBz/D,EAAI2/D,IAK1BC,sBACN,OAAO,IAAIrjE,GAAQ,KAAKM,YAAY,QAAS,WAAW9rG,IAAI,IAAIwrG,GAAQ,YAGlEmjE,kBAAkB1/D,EAAmB/T,GAC3C,GAAIA,EAAOoH,SAASC,oBAAsBP,GAAkBK,sBAC1D,OAIF,IAAIp2E,EAAIivE,EACJiJ,EAAS2I,GAAWrI,qBAAqBx4E,GAC7C,KAAOk4E,EAAOhnG,QACZ8uB,EAAIk4E,EAAOA,EAAOhnG,OAAS,GAC3BgnG,EAAS2I,GAAWrI,qBAAqBx4E,GAM3C,GAJI22E,GAAQ32E,KACVA,EAAIA,EAAE+2E,KAGJ/2E,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,sBAA0BhlG,KAAK4qK,kBAAkBl3J,SAASoV,KAAMm3E,GAAUn3E,IAG1H,IAAK6gF,GAAWwhE,aAAariJ,GAAI,CACtC,MAAMy5E,EAAUoH,GAAWuC,8BAA8BpjF,GACrDy5E,GAAWtC,GAAUsC,KACvBuJ,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YACrC7K,KAAK6qK,wBAAyB,SANhC/+D,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YACrC7K,KAAK6qK,wBAAyB,EAU1Bc,mBAAmBX,GACzB,IAAKA,IAAuBA,EAAmBzpG,KAC7C,OAAO,EAGT,MAAMqqG,EAASZ,EACf,IAAIa,GAAe,EAEnB,IAAK,MAAO/iJ,EAAGnyB,KAAUi1K,EAAOvsG,UAAW,CACzC,GAAIv2C,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,qBAAsB,CAC3E6mE,GAAe,EACf,OAGGA,GAAgBl1K,IACnBk1K,EAAe7rK,KAAK2rK,mBAAmBh1K,IAG3C,OAAOk1K,SCnMEC,GACJhB,SAASphE,GACd,MAAMoC,EAAK,IAAIre,GAGTyJ,EAAe,IAAIl/F,MACzBstG,GAA+BoE,GAAW5gF,IACpCA,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,sBACrD9N,EAAaxiF,KAAKoU,MAItBouE,EAAaj2E,KAAK4nF,GAAsB5qE,SAExC,MAAM8tI,EAAkB70E,EAAal9F,OAE/BgyK,EAA2B90E,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,uBAAyBe,GAAUn3E,KAAI9uB,OAMpJ,OAJI+xK,EAAkBC,EAA2B,GAC/ChsK,KAAKisK,qBAAqBngE,EAAI5U,GAGzB4U,EAAGjhG,WAGJohK,qBAAqBngE,EAAmB5U,GAC9C,IACImvB,EAAQ6lD,EADRC,EAAuB,IAAIn0K,MAG/B,IAAK,MAAM8wB,KAAKouE,EACdmvB,EAASrmH,KAAKosK,UAAUtjJ,GAEpBu9F,IAAW6lD,IACTC,EAAqBnyK,QACvBgG,KAAKqsK,mBAAmBvgE,EAAIqgE,GAG9BA,EAAuB,CAAC9lD,GACxB6lD,EAAc7lD,GAGX8lD,EAAqBz4J,SAASoV,IACjCqjJ,EAAqBz3J,KAAKoU,GAI1BqjJ,EAAqBnyK,QACvBgG,KAAKqsK,mBAAmBvgE,EAAIqgE,GAIxBC,UAAUtjJ,GAChB,OAAIm5E,GAAuBn5E,EAAE+2E,KACpB/2E,EAEL02E,GAAS12E,IAAMq3E,GAA0Br3E,IAAOm3E,GAAUn3E,IAAMq3E,GAA0Br3E,EAAE+2E,KACvF7/F,KAAKosK,UAAUtjJ,EAAE+2E,KAEnB7/F,KAAKosK,UAAUxqE,GAAU94E,IAG1BujJ,mBAAmBvgE,EAAmB5U,GAC5C,MAAMo1E,EAAM,IAAI5B,GAChB5+D,EAAG9uG,OAAOsvK,EAAIxB,SAAS5zE,WCtDdq1E,GAAbpvK,cAEU6C,KAAWovI,aAAG,EAEf07B,SAAS5zE,EAA6B2hB,GAAY,EAAMR,GAAa,GAC1E,IAAI2yD,EAAqBrhE,GAAW6iE,sBAAsBt1E,GAE1D,MAAM4U,EAAK,IAAIre,GAET44B,EAAS,IAAI2kD,EAAmB7pK,QAAQ,GAC9C6pK,EAAqBA,EAAmBlvK,IAAIuqH,GAE5C,MAAM+kD,EAAcjrE,GAA0BkmB,GAExCt6F,EAAUs6F,EAAOjwB,KAAKx/F,eAAiBw0K,EAAc,aAAe,IAEpE3zK,EAAO,IAAI4wG,GAAQ,KAAKM,YAAY,QAAS58E,GAOnD,GANI8sF,GACFphH,EAAKoF,IAAI,KAENyjG,GAAS+lB,IACZ5uH,EAAKoF,IAAI,IAAIwrG,GAAQ,UAAUxrG,IAAIwpH,EAAO9Z,SAExCpM,GAA0BkmB,GAAS,CACrCva,EAAG9uG,OAAOvF,EAAKoT,YACf,MAAMygK,EAAkB,IAAIjjE,GAAQ,KAAKM,YAAY,QAAS58E,GAASlvB,IAAI8sG,GAAW0hE,+BAA+BhlD,IACrHva,EAAG9uG,OAAOsuK,EAAgBzgK,gBACrB,CACL,MAAMoiF,EAAQ0c,GAAW0hE,+BAA+BhlD,GACxD5uH,EAAKoF,IAAIyjG,GAAS+lB,GAAUp5B,EAAM99E,OAAS89E,GAC3C6e,EAAG9uG,OAAOvF,EAAKoT,YAUjB,OAPImgK,EAAmBzpG,OACrBvhE,KAAK2qK,iBAAmBtkD,EACxBrmH,KAAKurK,mBAAmBz/D,EAAIk/D,IAG9BhrK,KAAKwrK,kBAAkB1/D,EAAIua,GAEpBhO,EAAavM,EAAGjhG,WAAWpP,QAAQ,6BAA8B,OAASqwG,EAAGjhG,WAGtF0gK,mBAAmBz/D,EAAmBk/D,SACpC,MAAM9zE,EAAel/F,MAAMqS,KAAK2gK,EAAmB7pK,QACnD+1F,EAAaj2E,KAAK4nF,GAAsB5qE,SAExC,IAAK,MAAMnV,KAAKouE,EAAc,CAC5B,MAAMu1E,EAAYzB,EAAmBlvK,IAAIgtB,GACzC,GAAIm5E,GAAuBn5E,GAAI,CAC7BgjF,EAAG9uG,OAAO,eACVgD,KAAKovI,aAAc,EACnBpvI,KAAK2qK,iBAAmB7hJ,EACpB2jJ,EAAUlrG,MACZvhE,KAAKurK,mBAAmBz/D,EAAI2gE,GAE9B3gE,EAAG9uG,OAAO,gBACV,SAGF,GAAIyiG,GAAQ32E,GAAI,CACd9oB,KAAK2qK,iBAAmB7hJ,EACpB2jJ,EAAUlrG,MACZvhE,KAAKurK,mBAAmBz/D,EAAI2gE,GAE9B,SAGF,MAAMr+C,EAAsBzkB,GAAWpG,6BAA6Bz6E,GAoBpE,GAdI02E,GAASx/F,KAAK2qK,oBAAuBlrE,GAAQ32E,GAE1C22E,GAAQ2uB,IACXtiB,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YAGvC7K,KAAK2qK,mBAAqBv8C,GACxBpuH,KAAK2qK,iBAAkBxrE,SAASC,oBAAsBP,GAAkBK,uBAAyB4G,GAAasoB,EAAqBpuH,KAAK2qK,mBAE1I7+D,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YAKnCie,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,sBAAwBhlG,KAAK2rK,mBAAmBc,GAAY,CACjH,MAAMC,EAAaltE,GAAS12E,GAAMA,EAAamvE,MAASnvE,EAClDyjF,EAASvsG,KAAKovI,oBAAc3lG,EAAA3gB,EAAEyjF,6BAAQ9wG,QAAQ,IAAK,IAAMqtB,EAAEyjF,OAC3D6+D,EAAcjrE,GAA0Br3E,GACxCiD,EAAUjD,EAAEstE,KAAKx/F,eAAiBw0K,EAAc,aAAe,IAErE,IAAIxvK,EAAM,IAAIysG,GAAQ,KAAKM,YAAY,QAAS58E,GAUhD,GATIq4E,GAA6Bt7E,IAC/BltB,EAAIiB,IAAI,KAEVjB,EAAIiB,IAAI,IAAIwrG,GAAQ,UAAUxrG,IAAI0vG,IAC9B6+D,IACFt/D,EAAG9uG,OAAOpB,EAAIiP,YACdjP,EAAM,IAAIysG,GAAQ,KAAKM,YAAY,QAAS58E,IAE9CnwB,EAAIiB,IAAI8sG,GAAW0hE,+BAA+BqB,IAC9C5jJ,EAAE+vE,wBAA0B0L,GAAkBz7E,GAAI,CACpDltB,EAAIiB,IAAI,KACR,MAAMsnG,EAAkBD,GAA8Bp7E,GAClDq7E,EAAgBzF,eAClB9iG,EAAIiB,IAAI,KAAOsnG,EAAgBzF,cAAgB,KAGnDoN,EAAG9uG,OAAOpB,EAAIiP,iBAEdihG,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,YAGvC7K,KAAK2qK,iBAAmB7hJ,EAIpB2jJ,EAAUlrG,MACZvhE,KAAKurK,mBAAmBz/D,EAAI2gE,IAK1Bf,sBACN,OAAO,IAAIrjE,GAAQ,KAAKM,YAAY,QAAS,WAAW9rG,IAAI,IAAIwrG,GAAQ,YAGlEmjE,kBAAkB1/D,EAAmBua,GAC3C,GAAIA,EAAOlnB,SAASC,oBAAsBP,GAAkBK,uBAAyBiB,GAA0BkmB,GAC7G,OAGF,IAAIv9F,EAAIu9F,EAGR,GAAIA,EAAOlnB,SAASC,oBAAsBP,GAAkBI,wBAA0BO,GAAS12E,IAAOA,EAAam4E,eACjH6K,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,gBADvC,CAMA,KAAOie,EAAEk4E,OAAOhnG,QACd8uB,EAAIA,EAAEk4E,OAAOl4E,EAAEk4E,OAAOhnG,OAAS,GAG7B8uB,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,sBAAyBgB,GAAyBl9E,IACvGgjF,EAAG9uG,OAAOgD,KAAK0rK,sBAAsB7gK,aAIjC8gK,mBAAmBxtK,GACzB,IAAKA,EAAIojE,KACP,OAAO,EAGT,IAAIsqG,GAAe,EAEnB,IAAK,MAAO/iJ,EAAG2jJ,KAActuK,EAAIkhE,UAAW,CAC1C,GAAIv2C,EAAEq2E,SAASC,oBAAsBP,GAAkBmG,qBAAsB,CAC3E6mE,GAAe,EACf,MAGF,IAAKA,GAAgBY,EAAUlrG,OAC7BsqG,EAAe7rK,KAAK2rK,mBAAmBc,GACnCZ,GACF,MAKN,OAAOA,SC9KEc,GACXxvK,YAAoB26F,GAAA93F,KAAW83F,YAAXA,EAEpBgzE,WACE,MAAMh/D,EAAK,IAAIre,GAETyJ,EAAel3F,KAAK4sK,6BAEpBb,EAAkB70E,EAAal9F,OAC/B6yK,EAAgB31E,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,wBAAuBllG,OAMzH,OAJI+xK,EAAkBc,EAAgB,GACpC7sK,KAAKisK,qBAAqBngE,EAAI5U,GAGzB4U,EAAGjhG,WAGJ+hK,6BACN,MAAMhjE,EAAqBD,GAAWmjE,4BAA4B9sK,KAAK83F,aAAan+F,QAClFmvB,KAAOq3E,GAA0Br3E,IAAMA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,yBAE5F0K,EAAmB3oF,KAAK4nF,GAAsB5qE,SAE9C,MAAM+e,EAAM,IAAIhlD,MAmBhB,OAjBA4xG,EAAmBttG,SAAQwsB,IACrBm5E,GAAuBn5E,GAErBA,EAAE+2E,IAAKV,SAASC,oBAAsBP,GAAkBG,wBAC1DhiD,EAAItoC,KAAKoU,GAEF+vE,GAAuB/vE,GAE5Bk0B,EAAI1+C,QAAQwqB,EAAE+2E,MAAS,GACzB7iD,EAAItoC,KAAKoU,GAEDk9E,GAAyBl9E,IAEnCk0B,EAAItoC,KAAKoU,MAINk0B,EAGTivH,qBAAqBngE,EAAmB5U,GAEtC,IACI61E,EACAC,EAFAC,EAAe,IAAIj1K,MAInBk1K,EAAgC,GA+BpC,GA7BAh2E,EAAa56F,SAAQwsB,IAGnB,GAFAikJ,GAAWvtE,GAAS12E,IAAMq3E,GAA0Br3E,IAAMw3E,GAASx3E,MAAQ+vE,GAAuB/vE,GAAKA,EAAI+4E,GAAmB/4E,GAE1HikJ,IAAYC,EAAc,CAC5B,GAAIC,EAAajzK,OAAQ,CACvB,MAAM6+G,EAAYm0D,EAAa7tE,SAASC,oBAAsBP,GAAkBG,wBAA0BkuE,EAAe5uK,QAAQ0uK,GAAgB,EAC3I30D,EAAa60D,EAAe5uK,QAAQyuK,GAAW,EACjD10D,IACF60D,EAAiB,IAEnBphE,EAAG9uG,QAAO,IAAIuvK,IAAyBzB,SAASmC,EAAcp0D,EAAWR,IAG3E40D,EAAe,GACfA,EAAav4J,KAAKq4J,GAElBC,EAAeD,EAIb7sE,GAAY6sE,IAAYA,EAAQ5tE,SAASC,oBAAsBP,GAAkBG,wBAA0BkuE,EAAe5uK,QAAQyuK,GAAW,IAC/IG,EAAiBltK,KAAKmtK,iCAAiCJ,IAGrDE,EAAa3uK,QAAQwqB,GAAK,GAC5BmkJ,EAAav4J,KAAKoU,MAIlBmkJ,EAAajzK,OAAQ,CACvB,MAAM6+G,EAAYq0D,EAAe5uK,QAAQ0uK,GAAgB,EACzDlhE,EAAG9uG,QAAO,IAAIuvK,IAAyBzB,SAASmC,EAAcp0D,GAAW,KAI7Es0D,iCAAiC1gE,GAC/B,MAAMzvD,EAAM,IAAIhlD,MAWhB,OAVAwtG,GAA8BiH,GAAW3jF,KAClC+vE,GAAuB/vE,KAAOq3E,GAA0Br3E,KAAM02E,GAAS12E,MACtEA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,yBACrDhiD,EAAItoC,KAAKoU,IACF,MAMNk0B,EAAI/+B,MAAM,IClEd,MAAMmvJ,GAAkB,CAACniF,EAAcpyF,KAC5CoyF,EAAM78D,OAAO68D,EAAM3sF,QAAQzF,GAAU,UC5C1Bw0K,GAGXlwK,YAAY4kG,GAFJ/hG,KAAYk3F,aAAkB,GAGhC6K,GACF/hG,KAAKnD,IAAIklG,GAIburE,WAAWluE,GACT,QAASp/F,KAAKk3F,aAAal9F,QAAUgG,KAAKk3F,aAAa,GAAGiI,SAASC,oBAAsBA,EAG3FmuE,OAAO5sC,GACL,QAAS3gI,KAAKk3F,aAAal9F,QAAUgG,KAAKk3F,aAAa,GAAGd,OAASuqC,EAGrE9jI,IAAIkiG,GACF,QAAK/+F,KAAKwtK,qBAAqBzuE,KAG/B/+F,KAAKk3F,aAAaxiF,KAAKqqF,IAChB,GAGT0uE,UAAU1uE,GACR/+F,KAAKk3F,aAAa9oE,OAAO,EAAG,EAAG2wE,GAGjC2uE,SAAS3uE,GACP,OAAO/+F,KAAKk3F,aAAa54F,QAAQygG,KAAiB/+F,KAAKk3F,aAAal9F,OAAS,EAG/E2zK,cACE,OAAO3tK,KAAKk3F,aAAa,GAG3B02E,YACE,OAAO5tK,KAAKk3F,aAAal3F,KAAKk3F,aAAal9F,OAAS,GAGtDwxG,4BACE,OAAOxrG,KAAKk3F,aAAal9F,OAG3B6zK,YAAY3zK,GACV,KAAIA,EAAI,GAGR,OAAO8F,KAAKk3F,aAAah9F,EAAI,GAG/BmjH,gCACE,IAAIR,EAAY78G,KAAKk3F,aAAa,GAAGmmB,8BAA8Br9G,KAAKk3F,aAAa,IAIrF,OAHIl3F,KAAKk3F,aAAal9F,OAAS,IAC7B6iH,GAAa,MAAQ78G,KAAK4tK,YAAYvwD,8BAA8Br9G,KAAK4tK,cAEpE/wD,EAGTixD,MAAMr7B,EAAwBs7B,GACxB/tK,KAAKguK,mBAAmBD,GAC1B/tK,KAAKiuK,kBAAkBx7B,EAASs7B,GAEhCt7B,EAAQz1I,OAAOgD,KAAKk3F,aAAa,GAAGmmB,8BAA8Br9G,KAAKk3F,aAAa,KAGtFl3F,KAAKkuK,iCAAiCz7B,EAASs7B,GAE/C/tK,KAAKmuK,wBAAwB17B,GAGvB07B,wBAAwB17B,GAC9B,GAAIzyI,KAAKk3F,aAAal9F,QAAU,EAAG,CACjC,MAAM8uB,EAAI9oB,KAAKk3F,aAAal3F,KAAKk3F,aAAal9F,OAAS,GACvDy4I,EAAQz1I,OAAO8rB,EAAEu0F,8BAA8Bv0F,KAI3ColJ,iCAAiCz7B,EAAwBs7B,GAC/D,MAAMK,EAAiBpuK,KAAKquK,8BAA8BN,GAEtD/tK,KAAKk3F,aAAal9F,QAAU,EAC9By4I,EAAQz1I,OAAO,OACuB,IAA7BgD,KAAKk3F,aAAal9F,QAAiBo0K,EAEnCpuK,KAAKk3F,aAAal9F,OAAS,GAAKgG,KAAKk3F,aAAal9F,OAAS,GAAKo0K,GACzE37B,EAAQz1I,OAAO,MAFfy1I,EAAQz1I,OAAO,OAMXixK,kBAAkBx7B,EAAwB36G,GAChD,MAAMs2I,EAAiBpuK,KAAKquK,8BAA8Bv2I,GACrD93B,KAAKsuK,2BAA6BF,GAAoBA,IAAmBpuK,KAAKuuK,oBAAoBH,GACrG37B,EAAQz1I,OAAOgD,KAAKwuK,0BAA0BxuK,KAAKk3F,aAAa,KAEhEu7C,EAAQz1I,OAAOgD,KAAKyuK,wBAAwBzuK,KAAKk3F,aAAa,KAI1Dq3E,oBAAoBz2I,GAC1B,OAAOA,EAAMy1I,OAAOvtK,KAAKk3F,aAAa,GAAGd,OAASt+D,EAAMw1I,WAAWttK,KAAKk3F,aAAa,GAAGiI,SAASC,mBAG3FkvE,yBACN,OAAoC,IAA7BtuK,KAAKk3F,aAAal9F,OAGnBg0K,mBAAmBD,GACzB,MAAM7rE,EAAWliG,KAAK0uK,6BAA6BX,GACnD,OAAK7rE,IAAaA,EAASqsE,oBAAoBvuK,UAG3CA,KAAKstK,WAAWzuE,GAAkBG,yBAA4Bh/F,KAAK2uK,WAAWzsE,IAM5EysE,WAAW72I,GACjB,OAAO93B,KAAK2tK,cAAc9tE,MAAQ/nE,EAAM61I,cAAc9tE,IAGhD2uE,0BAA0BzvE,GAChC,MAAM+M,EAAK,IAAIre,GAEXsR,EAAYI,SAASC,oBAAsBP,GAAkBG,uBAC/D8M,EAAG9uG,OAAO+hG,EAAY0P,wBAEtB3C,EAAG9uG,OAAO,KAEZ,MAAMuvG,EAASxN,EAAYiN,uCAAuCjN,GAQlE,OANIwN,EAAO14E,SAAS,KAClBi4E,EAAG9uG,OAAOuvG,EAAO3sD,UAAU,EAAG2sD,EAAOjuG,QAAQ,OAE7CwtG,EAAG9uG,OAAOuvG,GAGLT,EAAGjhG,WAGJ4jK,wBAAwB1vE,GAC9B,MAAM+M,EAAK,IAAIre,GAWf,OAVIsR,EAAYI,SAASC,oBAAsBP,GAAkBG,uBAC/D8M,EAAG9uG,OAAO+hG,EAAY2P,sBAEtB5C,EAAG9uG,OAAO,KAGZ8uG,EAAG9uG,OAAOgD,KAAK4uK,yBAAyB7vE,IACxC+M,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO+hG,EAAYse,8BAA8Bte,IAE7C+M,EAAGjhG,WAGJ6jK,6BAA6BX,GACnC,MAAMrwI,EAAMqwI,EAAOzvK,QAAQ0B,MAC3B,GAAI09B,EAAM,EACR,OAAOqwI,EAAOrwI,EAAM,GAKhB2wI,8BAA8BN,GACpC,GAAsB,IAAlBA,EAAO/zK,OACT,OAEF,MAAM0jC,EAAMqwI,EAAOzvK,QAAQ0B,MAC3B,OAAI09B,GAAO,GAAKA,EAAMqwI,EAAO/zK,OAAS,EAC7B+zK,EAAOrwI,EAAM,QADtB,EAMMkxI,yBAAyB7vE,SAC/B,OAAIA,EAAY3I,OAASe,GAAgBY,OAAO3B,KACvC,QACE2I,EAAY3I,OAASe,GAAgBmB,UAAUlC,KACjD,cAGF3sD,EAAAs1D,EAAYzH,sCAAiB8lB,qBAAsB,GAGpDowD,qBAAqBr3E,GAC3B,GAAIn2F,KAAK6uK,UACP,OAAO,EAGT,MAAMC,EAAS9uK,KAAK4tK,YAGpB,OAAIkB,EAAO14E,OAASD,EAAMC,SAKrBuT,GAAWolE,iCAAiCD,EAAQ34E,QAKpDqJ,GAASrJ,IAAUA,EAAM0J,MAAQivE,EAAOjvE,OAKzC4D,GAAiCqrE,KAAY34E,IAI7CgK,GAA0BhK,GACrBwT,GAAWqlE,0CAA0CF,EAAQ34E,GAKlEwT,GAAWI,oBAAoB+kE,KAAYnlE,GAAWI,oBAAoB5T,OAOhF04E,UACE,OAAoC,IAA7B7uK,KAAKk3F,aAAal9F,OAG3B6Q,WACE,MAAMihG,EAAK,IAAIre,GAKf,OAJAztF,KAAKk3F,aAAa56F,SAAQwsB,IACxBgjF,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO,GAAK8rB,EAAEyjF,WAEZT,EAAGjhG,WAGZokK,kBACE,OAAOjvK,KAAKk3F,aAGd6J,eAAe7mG,GACb,OAAO8F,KAAKk3F,aAAah9F,UCxPhBg1K,GAAb/xK,cACU6C,KAAA+tK,OAAS,IAAI/1K,MACrBgI,KAAoBmvK,sBAAG,EACvBnvK,KAA0BovK,4BAAG,EAE7BP,UACE,OAA8B,IAAvB7uK,KAAK+tK,OAAO/zK,OAGrB6C,IAAIi7B,GACF93B,KAAK+tK,OAAOr5J,KAAKojB,GAGnB21I,UAAU31I,GACR93B,KAAK+tK,OAAO5/I,QAAQ2J,GAGtBwzE,sBACE,OAAOtrG,KAAK+tK,OAAO/zK,OAGrBuxG,mBACE,OAAOvrG,KAAK+tK,OAAO,GAGrBsB,yBACE,OAAOrvK,KAAK+tK,OAAO,GAAGJ,cAGxB2B,uBACE,OAAOtvK,KAAK+tK,OAAO/tK,KAAK+tK,OAAO/zK,OAAS,GAAG4zK,YAG7C2B,YACE,OAAOvvK,KAAK+tK,OAGdyB,UAAUzB,GACR/tK,KAAK+tK,OAASA,EAGhBjzI,SAAS5gC,GACP,OAAO8F,KAAK+tK,OAAO7zK,GAGrBu1K,8BACE,MAAM3jE,EAAK,IAAIre,GACT4d,EAAYrrG,KAAK+tK,OAAO/zK,OAC9B,IAAI01K,EAAW,EACf,IAAK,MAAM53I,KAAS93B,KAAK+tK,OAEnB2B,EAAW,IACTA,IAAarkE,EACfS,EAAG9uG,OAAO,OAEV8uG,EAAG9uG,OAAO,OAId8uG,EAAG9uG,OAAO86B,EAAMulF,iCAEhBqyD,IAEF,OAAO5jE,EAAGjhG,WAGZ8I,aAAas3F,GACX,MAAMa,EAAK,IAAIre,GACf,IAAK,MAAM2d,KAAaH,EACtBa,EAAG9uG,OAAO,QAAUouG,GAEtBtqG,QAAQq+B,IAAI2sE,GAGdjhG,WACE,OAAO7K,KAAK+tK,OAAOljK,WAGrB8pB,OAAOg7I,GACLvC,GAAgBptK,KAAK+tK,OAAQ4B,UC3EpBC,GACXC,cAAc34E,GACZ,MAAM62E,EAAS/tK,KAAKuvK,UAAUr4E,GAM9B,OAJmBl3F,KAAK8vK,aAAa/B,GAO/BwB,UAAUr4E,GAChB,IAAI62E,EAAS,IAAI/1K,MAEb8/B,EAAQ,IAAIu1I,GAChB,IAAK,MAAMtuE,KAAe7H,EACnBp/D,EAAMj7B,IAAIkiG,KACbgvE,EAAOr5J,KAAKojB,GACZA,EAAQ,IAAIu1I,GACZv1I,EAAMj7B,IAAIkiG,IAUd,OANKjnE,EAAM+2I,WACTd,EAAOr5J,KAAKojB,GAGdi2I,EAAS6B,GAA4BG,+BAA+BhC,GAE7DA,EAGTp6J,sCAAsCo6J,GACpC,MAAM/wH,EAAM,IAAIhlD,MAChB,IAAK,MAAM8/B,KAASi2I,EACwB,IAAtCj2I,EAAM0zE,6BACRxuD,EAAItoC,KAAK,IAAI24J,GAAkBv1I,EAAM61I,gBACrC3wH,EAAItoC,KAAK,IAAI24J,GAAkBv1I,EAAM81I,eAErC5wH,EAAItoC,KAAKojB,GAGb,OAAOklB,EAGDgzH,2CAA2C/kE,GACjD,IAAK,MAAMrjG,KAAKqjG,EACdrjG,EAAE4nK,UAAUI,GAA4BG,+BAA+BnoK,EAAE2nK,cAIrEO,aAAa/B,GACnB,MAAM9iE,EAAa,IAAIjzG,MAEvB,IAAIozG,EAAY,IAAI8jE,GACpB,IAAK,MAAMp3I,KAASi2I,EACd3iE,EAAUyjE,WACZzjE,EAAUvuG,IAAIi7B,GACdmzE,EAAWv2F,KAAK02F,IAEZprG,KAAKiwK,iBAAiB7kE,EAAWtzE,GACnCszE,EAAUvuG,IAAIi7B,IAEdszE,EAAY,IAAI8jE,GAChB9jE,EAAUvuG,IAAIi7B,GACdmzE,EAAWv2F,KAAK02F,IAKtB,OAAOH,EAGDglE,iBAAiB7kE,EAAuCtzE,GAC9D,MAAMo4I,EAAgB9kE,EAAUikE,yBAC1Bc,EAAYr4I,EAAM81I,YACxB,OACEjkE,GAAWymE,6BAA6BF,EAAeC,IACvDxmE,GAAWolE,iCAAiCmB,EAAeC,KAC1DD,EAAc95E,OAASe,GAAgBY,OAAO3B,MAAQ85E,EAAcrwE,MAAQswE,EAAUtwE,MACvFqwE,EAAc95E,OAASe,GAAgBkB,QAAQjC,QAC7C8J,GAAYgwE,IAAkBvmE,GAAWqlE,0CAA0C5jE,EAAUkkE,uBAAwBx3I,EAAM61I,gBAIjI0C,oCAAoCplE,GAClC,MAAMjuD,EAAM,IAAIhlD,MAChB,IAAK,MAAM4P,KAAKqjG,EACdjuD,EAAItoC,QAAQ1U,KAAKswK,qCAAqC1oK,IAExD,OAAOo1C,EAGDszH,qCAAqC1oK,GAC3C,MAAMo1C,EAAM,IAAIhlD,MAEhB,IAAIioC,EAAK,IAAIivI,GACblyH,EAAItoC,KAAKurB,GAET,IAAI0vI,EAAK,IAAItC,GACbptI,EAAGpjC,IAAI8yK,GAEP,IAAK,MAAMz+G,KAAKtpD,EAAE2nK,YAAa,CACzBI,EAAGnkE,4BAA8B,IACnCmkE,EAAK,IAAItC,GACTptI,EAAGpjC,IAAI8yK,IAGT,IAAK,MAAM7mJ,KAAKooC,EAAE+9G,kBAAmB,CAEnC,MAAM/oE,EAAY1C,GAAwB16E,GACtCo9E,GAAaA,EAAU9P,OAASe,GAAgBkB,QAAQjC,MAEtDp2F,KAAKuwK,uBAAuBtwI,EAAI0vI,KACK,IAAnCA,EAAGnkE,6BACLvrE,EAAGtL,OAAOg7I,GAEZ1vI,EAAK,IAAIivI,GACTlyH,EAAItoC,KAAKurB,GACT0vI,EAAK,IAAItC,GACTptI,EAAGpjC,IAAI8yK,IAET1vI,EAAGmvI,4BAA6B,EAChCO,EAAG9yK,IAAIisB,GAEPmX,EAAK,IAAIivI,GACTlyH,EAAItoC,KAAKurB,GACT0vI,EAAK,IAAItC,GACTptI,EAAGpjC,IAAI8yK,IAEPA,EAAG9yK,IAAIisB,IAcb,OATuC,IAAnC6mJ,EAAGnkE,6BACLvrE,EAAGtL,OAAOg7I,GAEqB,IAA7B1vI,EAAGqrE,uBACL8hE,GAAgBpwH,EAAK/c,GAGvBjgC,KAAKgwK,2CAA2ChzH,GAEzCA,EAGDuzH,uBAAuB3oK,EAA+BspD,GAC5D,OAAOtpD,EAAE0jG,sBAAwB,GAAKp6C,EAAEs6C,4BAA8B,SCtJpDglE,GACpBrzK,YAAsB+5F,GAAAl3F,KAAYk3F,aAAZA,EAItBvjF,eAAe88J,EAAsBh5G,WACnC,OAAoB,QAAfhuB,EAAAgnI,EAAGv5E,oBAAY,IAAAztD,OAAA,EAAAA,EAAEzvC,SAGF,QAAfgrE,EAAAvN,EAAGy/B,oBAAY,IAAAlyB,OAAA,EAAAA,EAAEhrE,QAGf6uG,GAAsB5qE,QAAQwyI,EAAGv5E,aAAa,GAAIz/B,EAAGy/B,aAAa,KAF/D,EAHD,GCCb,IAAYw5E,GAMAC,IANZ,SAAYD,GACVA,EAAAA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,0BAAA,GAAA,4BAHF,CAAYA,KAAAA,GAIX,KAED,SAAYC,GACVA,EAAAA,EAAA,cAAA,GAAA,gBACAA,EAAAA,EAAA,yBAAA,GAAA,2BACAA,EAAAA,EAAA,eAAA,GAAA,iBACAA,EAAAA,EAAA,YAAA,GAAA,cACAA,EAAAA,EAAA,OAAA,GAAA,SALF,CAAYA,KAAAA,GAMX,WAEYC,GAAbzzK,cACS6C,KAAA6wK,uBAAyBH,GAAuBI,OAEhD9wK,KAAA+wK,wBAA0BJ,GAAwBK,cAEzDlG,SAAS7/D,EAA0CgmE,GAAY,GAC7D,MAAMnlE,EAAK,IAAIre,GAETyd,EAAgBD,EAAWjxG,OACjC,IAAIk3K,EAAe,EACnB,IAAK,MAAM9lE,KAAaH,EAAY,CAE9BimE,EAAe,IACbA,IAAiBhmE,EACnBY,EAAG9uG,OAAO,OAEV8uG,EAAG9uG,OAAO,OAId,MAAMm0K,EAAkB/lE,EAAUikE,yBAC5B+B,EAAsBjxE,GAA0BgxE,GAChDE,EAAyBrxK,KAAK+wK,0BAA4BJ,GAAwBW,0BAA4BF,EAC9GG,EAA2BvxK,KAAK+wK,0BAA4BJ,GAAwBa,gBAAkBJ,EACtGK,EAAwBzxK,KAAK+wK,0BAA4BJ,GAAwBe,aAAeN,KAAyBD,EAAgBnwE,OAAOhnG,OAChJ23K,EAAwBP,GAAuBpxK,KAAK+wK,0BAA4BJ,GAAwBiB,OAE1GxmE,EAAUgkE,2BACZtjE,EAAG9uG,OAAOgD,KAAK6xK,gCAAgCzmE,IAG/CU,EAAG9uG,OAAOgD,KAAK8xK,6BAA6B1mE,EAAWimE,EAAwBE,EAA0BE,IAIvGJ,EACFvlE,EAAG9uG,OAAO,eAAiBm0K,EAAgBplE,0BAA4B,KAC9D0lE,GACT3lE,EAAG9uG,OAAO,cAEZ8uG,EAAG9uG,OAAOgD,KAAK+xK,yBAAyB3mE,EAAWgmE,IAEnDtlE,EAAG9uG,OAAO,KAGV8uG,EAAG9uG,OAAOouG,EAAUqkE,+BAGhBwB,IAAcU,GAChB7lE,EAAG9uG,OAAOgD,KAAKgyK,uBAAuB5mE,IAIpCumE,GACF7lE,EAAG9uG,OAAO4zK,GAAyBqB,0BAA0B7mE,EAAUmkE,cAGzE2B,IAGF,OAAOplE,EAAGjhG,WAAWpP,QAAQ,UAAW,UAGlCo2K,gCAAgCzmE,GACtC,MAAMU,EAAK,IAAIre,GAETsU,EAAOqJ,EAAUikE,yBAEvB,GAAIttE,EAAK3L,OAASe,GAAgBc,MAAM7B,KACtC,OAAOp2F,KAAK8xK,6BAA6B1mE,GAG3C,MAAM8mE,EAASvoE,GAAWwB,kBAAkBC,GAY5C,OAVAU,EAAG9uG,OAAOgD,KAAKmyK,+BAA+BnyK,KAAK6wK,uBAAwB3hE,GAAiBgjE,IAE5FpmE,EAAG9uG,OAAO,WAEgD,IAAtDouG,EAAUtwE,SAAS,GAAG0wE,4BACxBM,EAAG9uG,OAAO+kG,EAAKgK,2BAEfD,EAAG9uG,OAAO+kG,EAAKyM,yBAGV1C,EAAGjhG,WAGJinK,6BACN1mE,EACAimE,GAAyB,EACzBE,GAA2B,EAC3BE,GAAwB,GAExB,MAAMznE,EAAWoB,EAAUikE,yBACrB9/D,EAAS8hE,EAAyBpiE,GAAiBwiE,EAAwBviE,GAAkBlF,EAC7FkoE,EAASvoE,GAAWwB,kBAAkBC,GAI5C,OAFkBmmE,EAAoD,aAAxBvnE,EAASuE,WAA4B,QAAU,QAAW,IAErFvuG,KAAKmyK,+BAA+BnyK,KAAK6wK,uBAAwBthE,EAAQ2iE,GAGtFC,+BAA+B/7E,EAA8BmZ,EAAgB2iE,GACnF,OAAQ97E,GACN,KAAKs6E,GAAuB0B,SAC1B,OAAIF,EACK3iE,EAAOb,qBAETa,EAAOd,uBAChB,KAAKiiE,GAAuB2B,0BAC1B,OAAIH,EACK3iE,EAAOV,yCAETU,EAAOX,2CAChB,QACE,MAAO,IAILmjE,yBAAyB3mE,EAAuCknE,GACtE,MAAMvwE,EAAOqJ,EAAUikE,yBACjB9iE,EAASqkE,GAAyBmB,yBAAyBhwE,EAAM4H,GAAWwB,kBAAkBC,IACpG,OAAOknE,EAAsB/kF,GAAuBgf,GAAUA,EAGhE54F,gCAAgCouF,EAAmBmwE,GAGjD,OAAInwE,EAAKsb,8BAA8Btb,GAAMzjG,QAAQ,UAAY,EACxD,GAGL4zK,EAEE1yE,GAASuC,GACJ,QACErC,GAAYqC,GACd,KAGFnnG,OAAOmnG,EAAKzK,iBAAiB8lB,oBAIlC5d,GAASuC,GACPA,EAAK5C,SAASC,oBAAsBP,GAAkBI,wBAA2B0K,GAAWI,oBAAoBhI,GAG7G,OAFE,gBAGArC,GAAYqC,GACd,IAGFnnG,OAAOmnG,EAAK9L,WAAWr/F,cAGxBo7K,uBAAuB5mE,GAC7B,OAAOprG,KAAKuyK,cAAcnnE,EAAUikE,yBAA0BjkE,EAAU+jE,sBAGlEoD,cAAcxwE,EAAmBotE,SACvC,IAAItvE,EAEJ,MAAM2yE,EAAWzwE,EAEjB,GAAI7B,GAAY6B,GACd,OAAO6uE,GAAyB6B,uBAAuB1wE,GAGzD,MAAM+J,EAAK,IAAIre,GAEf,MAAQgV,GAAkBV,IAAO,CAG/B,GAFAlC,EAAMkC,EAAKlC,IAEPA,GAAOoC,GAAuBpC,GAAM,CACtC,GAAIkC,EAAK3L,OAASe,GAAgBkB,QAAQjC,KAAM,CAC9C,MAAM8L,EAAWyH,GAAWpG,6BAA6BxB,GACzD,GAAIG,EAAS9L,OAASe,GAAgBuS,UAAUtT,KAK9C,OAJA0V,EAAG9uG,OAAO,SACV8uG,EAAG9uG,OAAOklG,EAASuM,wBACnB3C,EAAG9uG,OAAOklG,EAAS8J,uCAAuC9J,IAC1D4J,EAAG9uG,OAAOgD,KAAKuyK,cAAcrwE,EAAUitE,IAChCrjE,EAAGjhG,WAGd,MAGF,GAAIg1F,IAAQ4C,GAAkB5C,MAAUK,GAAYL,IAASL,GAASgzE,IAAarD,GAAwB,CACzG,MAAMuD,EAAgB75E,GAAuBkJ,GACvC4wE,GAAkCD,GAAiB3wE,EAAK5C,SAASC,oBAAsBP,GAAkBG,uBACzG4zE,EACJF,IACC/oE,GAAW/I,eAAemB,IAC3BA,EAAK5C,SAASC,oBAAsBP,GAAkBG,yBACrDyK,GAAsBjO,sBAAsBuG,GAK/C,GAAI4wE,GAAkCC,EACpC9mE,EAAG9uG,OAAO6iG,EAAI+O,iDACT,GAAI3O,GAAU8B,GAAO,CAC1B,MAAMG,EAAWyH,GAAWpG,6BAA6BxB,GACnDmE,EAAYyD,GAAWuC,8BAA8BnK,GAE3D,GAAIG,IAAarC,GAAOqG,GAAaA,EAAUrG,MAAQA,EAAK,CAE1D,MAAMgzE,EAAW3sE,EAAU6F,0BAA4B,aAAMtiE,EAAAy8D,EAAUjQ,gCAAWr/F,eAAgB,IAAMsvG,EAAUmX,8BAA8BnX,GAChJ4F,EAAG9uG,OAAO,SAAW61K,GACrB/mE,EAAG9uG,OAAO6iG,EAAIkM,gCACT,IAAMzM,GAAc4C,KAAaA,EAASrC,IAK/C,OAJAiM,EAAG9uG,OAAO,SACV8uG,EAAG9uG,OAAOklG,EAASuM,wBACnB3C,EAAG9uG,OAAOklG,EAAS8J,uCAAuC9J,IAC1D4J,EAAG9uG,OAAOgD,KAAKuyK,cAAcrwE,EAAUitE,IAChCrjE,EAAGjhG,gBAGZihG,EAAG9uG,OAAO6iG,EAAIkM,2BAEhBD,EAAG9uG,OAAO6iG,EAAImM,uCAAuCnM,SAChD,GAAIL,GAASuC,IAASU,GAAkB5C,IAASsvE,EAAsB,CAC5E,MAAM1iE,EAAY9C,GAAWmpE,oBAAoB/wE,GAC7C0K,IACFX,EAAG9uG,OAAO,WACV8uG,EAAG9uG,OAAOyvG,EAAUV,2BACpBD,EAAG9uG,OAAOyvG,EAAUT,uCAAuCS,KAI/D,IAAK5M,EAAK,MACVkC,EAAOlC,EAGT,OAAOiM,EAAGjhG,WAGZ8I,8BAA8BouF,GAC5B,MAAM+J,EAAK,IAAIre,GACf,IAAIoS,EAAMkC,EAAKlC,IACf,KAAOA,IAAQ4C,GAAkB5C,KAASP,GAAcO,IACtDiM,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO6iG,EAAIkM,2BACdD,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO6iG,EAAImM,uCAAuCnM,IACrDA,EAAMA,EAAIA,IAEZ,OAAOiM,EAAGjhG,WAGZ8I,iCAAiCo6J,GAC/B,MAAMgF,EAAkBhF,EAAOA,EAAO/zK,OAAS,GAAG4zK,YAC5CoF,EAAsB3wE,GAC1B0wE,GACAjqJ,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,yBAA2BS,GAAQ32E,KAAOm5E,GAAuBn5E,KAErHgjF,EAAK,IAAIre,GAEf,GADAqe,EAAG9uG,OAAO,KACNg2K,EACFlnE,EAAG9uG,OAAO,UACV8uG,EAAG9uG,OAAOg2K,EAAoBjnE,2BAC9BD,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOg2K,EAAoBhnE,uCAAuCgnE,IACjE7yE,GAA0B6yE,IAC5BlnE,EAAG9uG,OAAO4zK,GAAyB6B,uBAAuBO,QAEvD,CACL,MAAMnsE,EAAoBknE,EAAO,GAAGJ,cAC9BsF,EAAqBnxE,GAA2C+E,GAAmB/9E,GAAK02E,GAAS12E,IAAMq3E,GAA0Br3E,KACnImqJ,GACFnnE,EAAG9uG,OAAO,SACV8uG,EAAG9uG,OAAOi2K,EAAmB3lE,gBAC7BxB,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOi2K,EAAmBjnE,uCAAuCinE,IAChE9yE,GAA0B8yE,IAC5BnnE,EAAG9uG,OAAO4zK,GAAyB6B,uBAAuBQ,KAG5DnnE,EAAG9uG,OAAO,sCAGd,OAAO8uG,EAAGjhG,YC/SR,MAAOqoK,WAAkC1C,GAC7CrzK,YAAsB+5F,EAAqCi8E,EAAqCC,GAC9FrzK,MAAMm3F,GADcl3F,KAAYk3F,aAAZA,EAAqCl3F,KAAmBmzK,oBAAnBA,EAAqCnzK,KAAUozK,WAAVA,EAIzFtI,SAASuI,EAAmCC,EAAqB5F,GACtE,MAAM5hE,EAAK,IAAIre,GAGTwd,GADY,IAAI2kE,IACOC,cAAc7vK,KAAKk3F,cAG1Cg7E,EAASlyK,KAAKk3F,aAAal9F,OAAS,EACtCs5K,EACFxnE,EAAG9uG,OAAOk1K,EAAS,kBAAoB,mBAEvCpmE,EAAG9uG,OAAO0wK,EAAW,OAAS,MAC9B5hE,EAAG9uG,OAAOk1K,EAAS,kBAAoB,mBAIzC,MAAMqB,EAAqB,IAAI3C,GAG/B,GAFA9kE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,IAElCyiE,EAAU,CACZ,MACM8F,EADkBvoE,EAAWA,EAAWjxG,OAAS,GACLq1K,yBAC9C7vE,GAASg0E,IAA8BrzE,GAA0BqzE,GACnE1nE,EAAG9uG,OAAOgD,KAAKmzK,oBAAoBvkE,6CAEX,KAApB5uG,KAAKozK,YACPtnE,EAAG9uG,OAAOgD,KAAKozK,YAEjBtnE,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOgD,KAAKmzK,oBAAoBpnE,4BAErCD,EAAG9uG,OAAO,KAGZ,OAAO8uG,EAAGjhG,YCxCR,MAAO4oK,WAAwCjD,GACnDrzK,YAAsB+5F,EAAqCi8E,EAAqCC,GAC9FrzK,MAAMm3F,GADcl3F,KAAYk3F,aAAZA,EAAqCl3F,KAAmBmzK,oBAAnBA,EAAqCnzK,KAAUozK,WAAVA,EAIhGtI,SAASuI,EAAmCC,EAAqB5F,GAG/D,MAAM5hE,EAAK,IAAIre,GAETgf,EAAY,IAAImjE,GAChB3kE,EAAawB,EAAU4jE,oCAAoC5jE,EAAUojE,cAAc7vK,KAAKk3F,eAG1Fo8E,EACFxnE,EAAG9uG,OAAO,wBAEV8uG,EAAG9uG,OAAO0wK,EAAW,OAAS,MAC9B5hE,EAAG9uG,OAAO,wBAIZ,MAAMu2K,EAAqB,IAAI3C,GAc/B,OAbA2C,EAAmB1C,uBAAyBH,GAAuB2B,0BACnEkB,EAAmBxC,wBAA0BJ,GAAwBW,yBACrExlE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,IAElCyiE,IACsB,KAApB1tK,KAAKozK,YACPtnE,EAAG9uG,OAAOgD,KAAKozK,YAEjBtnE,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOgD,KAAKmzK,oBAAoBpnE,2BACnCD,EAAG9uG,OAAO,MAGL8uG,EAAGjhG,YCnCR,MAAO6oK,WAAsClD,GACjDrzK,YACY+5F,EACFwS,EACA4qB,EACA6+C,EACAC,GAERrzK,MAAMm3F,GANIl3F,KAAYk3F,aAAZA,EACFl3F,KAAS0pG,UAATA,EACA1pG,KAAgBs0H,iBAAhBA,EACAt0H,KAAmBmzK,oBAAnBA,EACAnzK,KAAUozK,WAAVA,EAKHtI,SAASuI,EAAmCC,EAAqB5F,GACtE,MAAM5hE,EAAK,IAAIre,GAGTwd,GADY,IAAI2kE,IACOC,cAAc7vK,KAAKk3F,cAG1Cg7E,EAASvoE,GAAWgqE,mBAAmB1oE,GACzCqoE,EACFxnE,EAAG9uG,OAAOk1K,EAAS,eAAiB,gBAE/BoB,GACHxnE,EAAG9uG,OAAO0wK,EAAW,OAAS,MAEhC5hE,EAAG9uG,OAAOk1K,EAAS,eAAiB,gBAItC,MAAMqB,EAAqB,IAAI3C,GAc/B,OAbA2C,EAAmB1C,uBAAyBH,GAAuB0B,SACnEmB,EAAmBxC,wBAA0BJ,GAAwBe,YACrE5lE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,IAElCyiE,IACsB,KAApB1tK,KAAKozK,YACPtnE,EAAG9uG,OAAOgD,KAAKozK,YAEjBtnE,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOgD,KAAKmzK,oBAAoBpnE,2BACnCD,EAAG9uG,OAAO,MAGL8uG,EAAGjhG,WAGJ+oK,2BAA2B9nE,EAAmBhjF,GACpDgjF,EAAG9uG,OAAO8rB,EAAEijF,2BACZD,EAAG9uG,OAAO4zK,GAAyBmB,yBAAyBjpJ,GAAG,IAC/DgjF,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO8rB,EAAEu0F,8BAA8Bv0F,IAC1CgjF,EAAG9uG,OAAO2sG,GAAW4oE,cAAczpJ,WCzC1B+qJ,GACX12K,YAAoBusG,GAAA1pG,KAAS0pG,UAATA,EAEpBohE,SAASuI,GACP,MAAMvnE,EAAK,IAAIre,GAETyJ,EAAeyS,GAAWmqE,sCAAsC9zK,KAAK0pG,WAErE4qB,EAAoBt0H,KAAK0pG,UAAyBlwF,KACxD,IAAK86G,EACH,MAAO,wFAGT,MAAM6+C,EpN2IuB,CAACzjE,IAChC,MAAMtZ,EAAOka,GAAQZ,GACrB,OAAON,GAAgBhZ,EAAKmZ,SoN7IEwkE,CAAkBz/C,GAKxCie,EAAW,IAAIv6I,MAEf81I,EAAyB52C,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,wBAIrG6uC,EAA0B72C,EAAav9F,QAAOmvB,GAAK6gF,GAAWW,sCAAsCxhF,KAAO+1E,GAAkBI,yBAI7Ho0B,EAA0Bn8B,EAAav9F,QAAOmvB,GAAK6gF,GAAWW,sCAAsCxhF,KAAO+1E,GAAkBG,yBAE7Hg1E,EAA4BlmC,EAAuBvvI,OAAOwvI,GAAyBxvI,OAAO80H,GAC1F04C,EAAkBiI,EAA0Bh6K,OAC5Ci6K,EAA0BD,EAA0BrlJ,QAAO,CAACulJ,EAAKprJ,IAAMorJ,GAAwB,cAAjBprJ,EAAEylF,aAA4B,GAClH,IAAI6kE,EAAa,GACO,IAApBrH,EACFqH,EAAaa,EAA0B,UAAY,UAC1ClI,EAAkB,IAC3BqH,EAAaa,EAA0B,UAAY,WAGjDnmC,EAAuB9zI,QACzBu4I,EAAS79H,KAAK,IAAIg/J,GAA8B5lC,EAAwB9tI,KAAK0pG,UAAW4qB,EAAkB6+C,EAAqBC,IAG7HrlC,EAAwB/zI,QAC1Bu4I,EAAS79H,KAAK,IAAI++J,GAAgC1lC,EAAyBolC,EAAqBC,IAG9F//C,EAAwBr5H,QAC1Bu4I,EAAS79H,KAAK,IAAIw+J,GAA0B7/C,EAAyB8/C,EAAqBC,IAG5F7gC,EAAStxH,KAAKuvJ,GAAiBvyI,SAE/B,IAAI/jC,EAAI,EACR,MAAMi6K,EAAU5hC,EAASv4I,OAAS,EAClCu4I,EAASj2I,SAAQ83K,IACftoE,EAAG9uG,OAAOo3K,EAAItJ,SAASuI,EAA0B,IAANn5K,EAASA,IAAMi6K,IAC1Dj6K,OAIF8F,KAAKq0K,WAAWvoE,EAAIwoB,GACpB,MAAMggD,EAAqBp9E,EAAavoE,QAAO,CAACulJ,EAAKprJ,IAAMorJ,GAAOprJ,EAAEq2E,SAASC,oBAAsBP,GAAkBG,yBAAwB,GA8B7I,OA7BIs1E,GAEiB,KAAflB,GAAsBtnE,EAAGjhG,WAAW6I,SAAS0/J,GAG/CtnE,EAAG9uG,OAAO,KAFV8uG,EAAG9uG,OAAOo2K,GAIZtnE,EAAG9uG,OAAO,yBAGV8uG,EAAG9uG,OAAO,WACVgD,KAAKu0K,gBACHzoE,EACA5U,EAAav9F,QAAOmvB,IAAM6gF,GAAW/I,eAAe93E,IAAMu4E,GAAUv4E,OAIxEgjF,EAAG9uG,OAAO,KACVgD,KAAK4zK,2BAA2B9nE,EAAI9rG,KAAK0pG,UAAU7J,KACnDiM,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOq2K,EAAmB9jE,OAAOxD,2BACpCD,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOq2K,EAAmB/qE,MACzBtoG,KAAKw0K,WAAWzmC,EAAyB1a,GAC3CvnB,EAAG9uG,OAAO,0BAEV8uG,EAAG9uG,OAAO,KAGL2sG,GAAW8qE,gCAAgC3oE,EAAGjhG,YAG/C2pK,WAAWzmC,EAAwC1a,GACzD,QAAI0a,EAAwB/zI,UAGnBq5H,EAAwBnmH,MAAK4b,IAAMm3E,GAAUn3E,KAGhD8qJ,2BAA2B9nE,EAAmBhjF,GACpDgjF,EAAG9uG,OAAO,MAAQ8rB,EAAE2lF,uBAAuBt/F,QAC3C28F,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO4zK,GAAyBmB,yBAAyBjpJ,GAAG,IAC/DgjF,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAO8rB,EAAEu0F,8BAA8Bv0F,IAC1CgjF,EAAG9uG,OAAO2sG,GAAW4oE,cAAczpJ,IAG7BurJ,WAAWvoE,EAAmB4D,GACpC5D,EAAG9uG,OAAOy0G,GAA6B/B,IAGjC6kE,gBAAgBzoE,EAAmB5U,GACzC,MAAMg7E,EAASh7E,EAAal9F,OAAS,EAC/B06K,EAAWx9E,EAAav9F,QAAOmvB,GAAKA,EAAEylF,aAAeU,GAAeV,aAAYv0G,SAAWk9F,EAAal9F,OAC9G8xG,EAAG9uG,OAAO,WAAa03K,EAAW,IAAM,MAAQxC,EAAS,IAAM,MC5H7D,MAAOyC,WAAqBnE,GAChCrzK,YAAsB+5F,GAEpBn3F,MADAm3F,EAAeyS,GAAWirE,0CAA0C19E,IADhDl3F,KAAYk3F,aAAZA,EAKtB4zE,SAASuI,EAAmCC,EAAqB5F,GAgB/D,MAAM5hE,EAAK,IAAIre,GAGf,IAAIwd,GADc,IAAI2kE,IACKC,cAAc7vK,KAAKk3F,cAG9C,GAFA+T,EAAajrG,KAAK60K,4BAA4B5pE,GAE1CqoE,GAAc5F,GAAY1tK,KAAK80K,sDAAsDhpE,EAAIunE,EAAoBpoE,GAC/G,OAAOa,EAAGjhG,WAIZ,MAAMqnK,EAASvoE,GAAWgqE,mBAAmB1oE,GACzCqoE,EACFxnE,EAAG9uG,OAAOk1K,EAAS,kBAAoB,mBAEvCpmE,EAAG9uG,OAAO0wK,EAAW,OAAS,MAC9B5hE,EAAG9uG,OAAOk1K,EAAS,kBAAoB,mBAIzC,MAAMqB,EAAqB,IAAI3C,GAK/B,GAJA2C,EAAmBxC,wBAA0BJ,GAAwBiB,OACrE9lE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,IAGlCyiE,EAAU,CACZ,MAAMqH,EAAkB9pE,EAAWA,EAAWjxG,OAAS,GACjDg7K,EAAqBD,EAAgB1F,0BACtC7vE,GAASw1E,IAAuBD,EAAgB5F,qBACnDrjE,EAAG9uG,OAAOq2K,EAAmB9jE,OAAOxD,2BAEpCD,EAAG9uG,OAAOq2K,EAAmB9jE,OAAOX,4CAEtC9C,EAAG9uG,OAAOq2K,EAAmB/qE,MAC7BwD,EAAG9uG,OAAOs2K,EAAa,4BAA8B,0BAGvD,OAAOxnE,EAAGjhG,WAGJgqK,4BAA4B5pE,GAClC,MAAMjuD,EAAM,IAAIhlD,MAEhB,IAAK,MAAMozG,KAAaH,EAAY,CAClC,MAAMjB,EAAWoB,EAAUikE,yBACvB7vE,GAASwK,GACXhtD,EAAItoC,QAAQ1U,KAAKi1K,qCAAqC7pE,IAEtDpuD,EAAItoC,KAAK02F,GAIb,OAAOpuD,EAGDi4H,qCAAqC7pE,GAC3C,MAAMH,EAAa,IAAIjzG,MAGjBk/F,EAAe,IAAIl/F,MACzB,IAAK,MAAM8/B,KAASszE,EAAUmkE,YAC5Br4E,EAAaxiF,QAAQojB,EAAMm3I,mBAI7B,IAAIiG,GAAY,EAChB,IAAK,MAAMnzE,KAAQ7K,EACjB,GAAIl3F,KAAKm1K,oCAAoCpzE,GAAO,CAClDmzE,GAAY,EACZ,MAKJ,IAAKA,EAEH,OADAjqE,EAAWv2F,KAAK02F,GACTH,EAIT,IAAIrjG,EAAI,IAAIsnK,GACZtnK,EAAEunK,sBAAuB,EACzBlkE,EAAWv2F,KAAK9M,GAEhB,IAGIwtK,EAHAlkH,EAAI,IAAIm8G,GACZzlK,EAAE/K,IAAIq0D,GAGN,IAAK,MAAM6wC,KAAQ7K,EACZhmC,EAAE29G,YACD9sE,EAAKlC,MAASu1E,EAA4Bv1E,KAC5Cj4F,EAAI,IAAIsnK,GACRtnK,EAAEunK,sBAAuB,EACzBlkE,EAAWv2F,KAAK9M,GAEhBspD,EAAI,IAAIm8G,GACRzlK,EAAE/K,IAAIq0D,IACGy4C,GAAW0rE,6BAA6BD,KAAgCrzE,IACjF7wC,EAAI,IAAIm8G,GACRzlK,EAAE/K,IAAIq0D,KAIVA,EAAEr0D,IAAIklG,GAENqzE,EAAcrzE,EAIhB,IAAK,MAAM1xC,KAAM46C,EACf56C,EAAGm/G,UAAUI,GAA4BG,+BAA+B1/G,EAAGk/G,cAG7E,OAAOtkE,EAGDkqE,oCAAoCp9E,GAC1C,OAAO/3F,KAAKs1K,8BAA8Bv9E,IAAW/3F,KAAKu1K,wCAAwCx9E,GAG5Fu9E,8BAA8Bv9E,GAEpC,MAAM8H,EAAM9H,EAAO8H,IACnB,QAAI4C,GAAkB5C,KAASK,GAAYL,KAKL,IAA/BA,EAAImB,OAAO1iG,QAAQy5F,GAGpBw9E,wCAAwCxzE,GAI9C,MAAMlC,EAAMkC,EAAKlC,IACXgM,EAAQlC,GAAW0rE,6BAA6BtzE,GAGtD,QAAS8J,GAAShM,IAAQgM,EAAMhM,IAUlCi1E,sDAAsDhpE,EAAmBunE,EAAmCpoE,GAE1G,MAAMG,EAAYH,EAAW,GACvBlM,EAAcqM,EAAUikE,yBAC9B,GAA0B,IAAtBpkE,EAAWjxG,QAAgBmmG,GAA0BpB,GAAc,CAErE,MAAMgvE,EAAS3iE,EAAUmkE,YACzB,GACoB,IAAlBxB,EAAO/zK,QACY,IAAlB+zK,EAAO/zK,QACiC,IAAvC+zK,EAAO,GAAGkB,kBAAkBj1K,QACW,IAAvC+zK,EAAO,GAAGkB,kBAAkBj1K,QAC5B2vG,GAAWqlE,0CAA0CjB,EAAO,GAAGJ,cAAeI,EAAO,GAAGJ,eAC1F,CACA,MAAMuE,EAASvoE,GAAWgqE,mBAAmB1oE,GAC7Ca,EAAG9uG,OAAOk1K,EAAS,kBAAoB,kBACvCpmE,EAAG9uG,OAAO4zK,GAAyBqB,0BAA0BlE,IAC7DjiE,EAAG9uG,OAAOq2K,EAAmB9jE,OAAOxD,2BACpCD,EAAG9uG,OAAO,KACV8uG,EAAG9uG,OAAOq2K,EAAmB/qE,MAC7BwD,EAAG9uG,OAAO,MACV8uG,EAAG9uG,OAAO+hG,EAAYuO,gBACtBxB,EAAG9uG,OAAOk1K,EAAS,eAAiB,cACpC,MAAMqB,EAAqB,IAAI3C,GAG/B,OAFA9kE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,GAAY,IAClDa,EAAG9uG,OAAO,MACH,GAGX,OAAO,SChNEw4K,GACXr4K,YAAoB+5F,GAAAl3F,KAAYk3F,aAAZA,EAEpB4zE,SAASuI,eAIP,IAAKrzK,KAAKk3F,aAAal9F,OACrB,MAAO,GAGT,MAAMy7K,EAAgBpC,EAAmB9jE,OAAOT,kCAAoC,IAAMukE,EAAmB/qE,KAEvGotE,EAAa11K,KAAKk3F,aAAav9F,QAAOmvB,GAAK02E,GAAS12E,KAAOq3E,GAA0Br3E,EAAE+2E,OAAO7lG,OAC9F27K,EAAiB31K,KAAKk3F,aAAav9F,QAAOmvB,GAAKq3E,GAA0Br3E,KAAI9uB,OAE7E8xG,EAAK,IAAIre,GAETmoF,EAAcF,EAAaC,EAAiB,EAC9CC,EACF9pE,EAAG9uG,OAAO,gCAAkCy4K,EAAgB,KAE5D3pE,EAAG9uG,OAAO,+BAAiCy4K,EAAgB,KAG7D,MAAMI,EAAaH,EAAa,EAMhC,GALIG,IACF/pE,EAAG9uG,OAAO44K,EAAc,gBAAkB,eAC1C9pE,EAAG9uG,OAAO04K,EAAa,EAAI,UAAY,WAGrCC,EAAiB,EAAG,CACtB,MAAMlpE,EAAYzsG,KAAKk3F,aAAahqF,MAAK4b,GAAKq3E,GAA0Br3E,KACpE+sJ,GACF/pE,EAAG9uG,OAAO,OACV8uG,EAAG9uG,OAAO24K,EAAiB,EAA+B,QAA3BlsI,EAAAgjE,EAAUnV,uBAAiB,IAAA7tD,OAAA,EAAAA,EAAA2zE,oBAA2C,QAArBp4C,EAAAynC,EAAUxW,iBAAW,IAAAjxB,OAAA,EAAAA,EAAAo4C,sBAC5Fu4D,EAAiB,EAC1B7pE,EAAG9uG,OAAOyvG,EAAUiC,qBAAuB,eAAyC,QAAzB9xB,EAAA6vB,EAAUnV,uBAAe,IAAA1a,OAAA,EAAAA,EAAEwgC,sBAEtFtR,EAAG9uG,OAAOyvG,EAAUa,eAAiB,cAAkC,QAAnB93E,EAAAi3E,EAAUxW,iBAAS,IAAAzgE,OAAA,EAAAA,EAAE4nF,sBAM7E,OAFAtR,EAAG9uG,OAAO,KAEH+vF,GAAwB+e,EAAGjhG,aC3ChC,MAAOirK,WAA0BtF,GACrCrzK,YAAsB+5F,GACpBn3F,MAAMm3F,GADcl3F,KAAYk3F,aAAZA,EAItB4zE,SAASuI,EAAmCC,EAAqB5F,GAG/D,MAAM5hE,EAAK,IAAIre,GAGTwd,GADY,IAAI2kE,IACOC,cAAc7vK,KAAKk3F,cAG5Co8E,GACFxnE,EAAG9uG,OAAO,UACL0wK,GACH5hE,EAAG9uG,OAAO,mBAGZ8uG,EAAG9uG,OAAO0wK,EAAW,OAAS,MAC9B5hE,EAAG9uG,OAAO,wBAIZ,MAAMu2K,EAAqB,IAAI3C,GAW/B,OAVA2C,EAAmB1C,uBAAyBH,GAAuB2B,0BACnEkB,EAAmBxC,wBAA0BJ,GAAwBW,yBACrExlE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,GAAY97F,QAG9Cu+J,IACF5hE,EAAG9uG,OAAO,IAAMq2K,EAAmB9jE,OAAOxD,0BAA4B,IAAMsnE,EAAmB/qE,MAC/FwD,EAAG9uG,OAAOs2K,EAAa,uBAAyB,2BAG3CxnE,EAAGjhG,YCnCR,MAAOkrK,WAAwBvF,GACnCrzK,YAAsB+5F,GACpBn3F,MAAMm3F,GADcl3F,KAAYk3F,aAAZA,EAItB4zE,SAASuI,EAAmCC,EAAqB5F,GAa/D,MAAM5hE,EAAK,IAAIre,GAGTwd,GADY,IAAI2kE,IACOC,cAAc7vK,KAAKk3F,cAG1Cg7E,EAASvoE,GAAWgqE,mBAAmB1oE,GACzCqoE,EACFxnE,EAAG9uG,OAAOk1K,EAAS,eAAiB,gBAEpCpmE,EAAG9uG,OAAO0wK,EAAW,OAAS,MAC9B5hE,EAAG9uG,OAAOk1K,EAAS,eAAiB,gBAItC,MAAMqB,EAAqB,IAAI3C,GAW/B,OAVA2C,EAAmB1C,uBAAyBH,GAAuB0B,SACnEmB,EAAmBxC,wBAA0BJ,GAAwBa,eACrE1lE,EAAG9uG,OAAOu2K,EAAmBzI,SAAS7/D,IAGlCyiE,IACF5hE,EAAG9uG,OAAO,IAAMq2K,EAAmB9jE,OAAOxD,0BAA4B,IAAMsnE,EAAmB/qE,MAC/FwD,EAAG9uG,OAAOs2K,EAAa,IAAM,2BAGxBxnE,EAAGjhG,kBCrCDmrK,GACX74K,YAAoBysG,GAAA5pG,KAAkB4pG,mBAAlBA,EAEpBkhE,SAASuI,GACP,IAAIpmF,EAAQ,GAEZ,MAAMiK,EAAeyS,GAAWssE,uBAAuBj2K,KAAK4pG,oBAEtDssE,EAAoBh/E,EAAav9F,QAAOmvB,GACrCA,EAAEq2E,oBAAoBogB,IAA0Bz2F,EAAEq2E,SAAmCwO,aAAe9M,GAAuB+M,4BAGpI,GAAIsoE,EAAkBl8K,OAAQ,CAC5B,GAAIk8K,EAAkBl8K,OAASk9F,EAAal9F,OAC1C,MAAM,IAAI8xB,MAAM,sEAIlB,OADY,IAAI0pJ,GAAmCU,GACxCpL,SAASuI,GAItB,MAAM9gC,EAA+B,GAE/BzE,EAAyB52C,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,wBACvG4uC,EAAuB9zI,QACzBu4I,EAAS79H,KAAK,IAAIqhK,GAAgBjoC,IAGpC,MAAMC,EAA0B72C,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBI,yBACxG8uC,EAAwB/zI,QAC1Bu4I,EAAS79H,KAAK,IAAIohK,GAAkB/nC,IAGtC,MAAM1a,EAA0Bn8B,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,yBACxGq0B,EAAwBr5H,QAC1Bu4I,EAAS79H,KAAK,IAAIigK,GAAathD,IAGjCkf,EAAStxH,KAAKuvJ,GAAiBvyI,SAE/B,IAAI/jC,EAAI,EACR,MAAMi6K,EAAU5hC,EAASv4I,OAAS,EAMlC,OALAu4I,EAASj2I,SAAQ83K,IACfnnF,GAASmnF,EAAItJ,SAASuI,EAA0B,IAANn5K,EAASA,IAAMi6K,GACzDj6K,OAGKyvG,GAAW8qE,gCAAgCxnF,UC5DzCkpF,GACXh5K,YAAoBi5K,EAA8C1mE,GAA9C1vG,KAAiBo2K,kBAAjBA,EAA8Cp2K,KAAG0vG,IAAHA,EAE1D2mE,sBAAsB7L,EAAuBC,GACnD,MAAM6L,EAAoB,GAG1B,OAFA9L,GAAgB8L,EAAQ5hK,KAAK,UAC7B+1J,GAAgB6L,EAAQ5hK,KAAK,UACtB4hK,EAAQt8K,OAAS,8BAA8Bs8K,EAAQvnK,KAAK,qBAAuB,GAG5F+7J,WACE,MAAM10E,KAAEA,EAAIk0E,MAAEA,EAAKC,UAAEA,EAASC,aAAEA,EAAYC,aAAEA,GAAiBzqK,KAAKo2K,kBAC9DG,EAAarkE,GAAsBlyG,KAAK0vG,KACxCpC,EAAuC,UAAtBlX,EAAKx/F,cAA4B,IAAM,IAC9D,MAAO,iBAAiB2/K,EAAWhnE,OAAOjC,kBAAkBipE,EAAWjuE,QAAQgF,KAAkBlX,EAAKx/F,kBAAkB0zK,WAAeC,KAAavqK,KAAKq2K,sBACvJ7L,EACAC,aCCO+L,GACXr5K,YAAoBuyG,EAAqBqlD,GAArB/0J,KAAG0vG,IAAHA,EAAqB1vG,KAAO+0J,QAAPA,EAEzC0hB,mBACE,MANkC,EAAC1hB,EAAe,KAAgB,UAAWA,EAMzE2hB,CAA8B12K,KAAK+0J,SAC9B/0J,KAAK22K,oCAEL32K,KAAK42K,8BAIRD,oCACN,MAAM35H,EAAM,IAAIwrH,GACVqO,EAA0B,IAAIV,GAAwBn2K,KAAK+0J,QAA8B/0J,KAAK0vG,KAEpG,OADA1yD,EAAIu1F,SAAS79H,KAAK,IAAIi1J,GAAkBkN,EAAwB/L,WAAY,KACrE9tH,EAGD45H,8BACN,MAAM9+E,EAAc93F,KAAK+0J,QACnB/3G,EAAM,IAAIwrH,GAEV5+D,EAAqBD,GAAWmjE,4BAA4Bh1E,GAE5D5yE,EAAOllB,KAAK82K,4CAA4CltE,GAG9D,GAFA1kF,EAAKjE,KAAK4nF,GAAsB5qE,UAE3B/Y,EAAKlrB,OACR,OAAOgjD,EAGT,MAAMu5H,EAAarkE,GAAsBlyG,KAAK0vG,KAuC9C,OArCAxqF,EAAK5oB,SAAQwsB,IACX,IAAI4pH,EACAE,EACAnwB,EAEJ,GAAInjB,GAAcx2E,GAAI,CAEpB4pH,EADY,IAAImhC,GAAuB/qJ,GACvBgiJ,SAASyL,GAGzB3jC,GADY,IAAIk5B,IACFhB,SAAShiJ,GAEvB25F,EAAcziH,KAAK+2K,iCAAiCjuJ,OAC/C,CAEL4pH,EADY,IAAIsjC,GAAcpsE,GACdkhE,SAASyL,GAGzB3jC,EADY,IAAI+5B,GAAsB70E,GACxBgzE,WAEdroD,EAAcziH,KAAKg3K,kCAAkCptE,GAGvD,MAAMxxG,EAAO,IAAIuxK,GAAkBj3B,EAAWE,GAC1CnwB,IACFrqH,EAAKqqH,YAAcA,GAErBzlE,EAAIu1F,SAAS79H,KAAKtc,MAGhB4kD,EAAIu1F,SAASv4I,OAAS,IACxBgjD,EAAI61F,eAAiB7yI,KAAKi3K,oBAAoBV,EAAYv5H,EAAIu1F,SAASv4I,QACvEgjD,EAAIu1F,SAASj2I,SAAQ,CAACusB,EAAG3uB,KACvB2uB,EAAE0jF,OAAS,QAAQryG,EAAI,UAIpB8iD,EAGD85H,4CAA4CltE,GAClD,MAAM5sD,EAAqB,GAE3B,IAAIk6H,GAA0B,EAmB9B,OAjBAttE,EAAmBttG,SAAQwsB,IACzB,MAAMgvE,EAAcgJ,GAAeh4E,GAE/BgvE,GAAemK,GAAuBnK,GAErC96C,EAAItpC,SAASokF,IACdA,EAAY+H,IAAKV,SAASC,oBAAsBP,GAAkBG,wBAClElH,EAAY+H,IAAKV,SAASC,oBAAsBP,GAAkBK,uBAElEliD,EAAItoC,KAAKojF,GAEDo/E,IACVA,GAA0B,EAC1Bl6H,EAAItoC,KAAKoU,OAINk0B,EAGTi6H,oBAAoBV,EAA2BY,GAC7C,MAAO,sBAAsBZ,EAAWhnE,OAAOX,8CAA8C2nE,EAAWjuE,6BAA6BtoG,KAAKo3K,YAAYD,eAGxJC,YAAYD,GACV,OAAOn/K,MAAMm/K,GACVjsH,KAAK,GACL/sD,KAAI,CAACotC,EAAGrxC,IAAMA,EAAI,IAClB6U,KAAK,MACLtT,QAAQ,YAAa,SAG1Bu7K,kCAAkCK,GAEhC,MAAMC,EAAwBD,EAAyB19K,QACrDmvB,IACG+vE,GAAuB/vE,IACxBA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,wBAClDl2E,EAAEq2E,SAAmCwO,aAAe9M,GAAuB+M,2BAC5E9kF,EAAE+2E,IAAKV,SAASC,oBAAsBP,GAAkBG,yBAE5D,GAAIs4E,EAAsBt9K,QAAU2vG,GAAWkE,2CAA2CypE,GACxF,MAAO,qKAMXP,iCAAiCj/E,GAE/B,MAAMy/E,EAAwB/xE,GAA8B1N,GAAahvE,GAChEq3E,GAA0Br3E,IAAMA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,wBAG5F,GAAIq4E,EACF,MAAO,gGC7HAC,GACXr6K,YAAoBwwG,EAAsC+B,EAAqB5X,GAA3D93F,KAAU2tG,WAAVA,EAAsC3tG,KAAG0vG,IAAHA,EAAqB1vG,KAAW83F,YAAXA,EAE/Ew8D,wBACE,MAAMp9D,EAAe,IAAIoyE,GAEzB,OADAtpK,KAAKy3K,qBAAqBvgF,GACnBA,EAGDugF,qBAAqB7tE,GAC3B,MAAM1S,EAAeyS,GAAWmjE,4BAA4B9sK,KAAK83F,aAE3Dg2C,EAAyB52C,EAAav9F,QAC1CmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBK,uBAAyBp2E,EAAE+2E,IAAKV,SAASC,oBAAsBP,GAAkBK,wBAE3I,GAAI4uC,EAAuB9zI,OACzB,IAAK,MAAM8uB,KAAKglH,EAAwB,CACtC,MAAMpb,EAAK,IAAI82C,GACf92C,EAAGt8B,KAAOp2F,KAAK03K,6BAA6B5uJ,GAC5C4pG,EAAGnzH,GAAKupB,EAAEvpB,GACVmzH,EAAGnmB,OAASzjF,EAAEyjF,OACdvsG,KAAK23K,gCAAgC7uJ,EAAG4pG,GACxC9oB,EAAmBkkC,uBAAuBp5H,KAAKg+G,GAInD,MAAMqb,EAA0B72C,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBI,yBAC5G,GAAI8uC,EAAwB/zI,OAC1B,IAAK,MAAM8uB,KAAKilH,EAAyB,CACvC,MAAM6pC,EAAK,IAAInO,GACf,GAAIjqE,GAAS12E,GAAI,CACf,MAAMmvE,EAASnvE,EAAamvE,MAC5B2/E,EAAGxhF,KAAOp2F,KAAK03K,6BAA6Bz/E,GAC5C2/E,EAAGr4K,GAAK04F,EAAM14F,GACdq4K,EAAGrrE,OAASzjF,EAAEyjF,OACdqrE,EAAG3qF,MAAQjtF,KAAK63K,WAAW5/E,EAAMhL,YAEjC2qF,EAAGxhF,KAAOp2F,KAAK03K,6BAA6B5uJ,GAC5C8uJ,EAAGr4K,GAAKupB,EAAEvpB,GACVq4K,EAAGrrE,OAASzjF,EAAEyjF,OACdqrE,EAAG3qF,MAAQjtF,KAAK63K,WAAW/uJ,EAAEmkE,OAE3BnkE,EAAE+vE,wBACJ74F,KAAK83K,2BAA2BhvJ,EAAG8uJ,GAErC53K,KAAK23K,gCAAgC7uJ,EAAG8uJ,GACxChuE,EAAmBmkC,wBAAwBr5H,KAAKkjK,GAIpD,MAAMvkD,EAA0BrzH,KAAK+3K,kBACnC7gF,EAAav9F,QAAOmvB,GAAKA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,yBAA2Bh/F,KAAKg4K,+BAA+BlvJ,MAG7I,GAAIuqG,EAAwBr5H,OAC1B,IAAK,MAAM8uB,KAAKuqG,EAAyB,CACvC,MAAMD,EAAKpzH,KAAKi4K,gCAAgCnvJ,GAChD9oB,KAAK23K,gCAAgC7uJ,EAAGsqG,GACxCxpB,EAAmBypB,wBAAwB3+G,KAAK0+G,IAK9C2kD,kBAAkBG,GACxB,MAAMC,EAAcrvJ,GACdA,EAAEq2E,SAASC,oBAAsBP,GAAkBG,uBAC9C,GAELmB,GAA0Br3E,GACrB,CAACA,KAAMA,EAAEk4E,OAAO0Y,SAAQ9iD,GAAKuhH,EAAWvhH,MAE1C,CAAC9tC,GAGV,OAAOovJ,EAAMx+D,SAAQ5wF,GAAKqvJ,EAAWrvJ,KAG/BkvJ,+BAA+BlvJ,GACrC,SACEA,EAAE+2E,IAAKV,SAASC,oBAAsBP,GAAkBG,wBACvDS,GAAQ32E,EAAE+2E,MAAS/2E,EAAE+2E,IAAKA,IAAKV,SAASC,oBAAsBP,GAAkBG,wBAChFl2E,EAAE+vE,wBAA0B2G,GAAS12E,IAAMA,EAAE+2E,IAAKA,IAAKV,SAASC,oBAAsBP,GAAkBG,wBAIrGi5E,gCAAgCnvJ,EAAgBsvJ,GAAa,aACnE,MAAMhlD,EAAK,IAAIs2C,GAgBf,GAdAt2C,EAAGh9B,KAAOp2F,KAAK03K,6BAA6B5uJ,GAEvCA,EAAEvpB,KACLupB,EAAEvpB,GAAKo4G,GAAQ7uF,IAEjBsqG,EAAG7zH,GAAKupB,EAAEvpB,GAELkgG,GAAQ32E,IAAOm5E,GAAuBn5E,IAAOm3E,GAAUn3E,KAC1DsqG,EAAG7mB,OAASzjF,EAAEyjF,QAEX/M,GAAS12E,IAAOm5E,GAAuBn5E,KAC1CsqG,EAAGnmC,MAAQjtF,KAAK63K,WAAW/uJ,EAAEmkE,QAG3BmrF,EACF,GAAI34E,GAAQ32E,IAAMm5E,GAAuBn5E,GACvCsqG,EAAGY,MAAe,QAAPvqF,EAAA3gB,EAAE+2E,WAAK,IAAAp2D,OAAA,EAAAA,EAAAlqC,QACb,GAAI4gG,GAA0Br3E,GACnCsqG,EAAGM,mBAAqB1zH,KAAKq4K,wBAAwBvvJ,OAChD,CACL,MAAMq5E,EAASwH,GAAWrI,qBAAqBx4E,EAAE+2E,KAC7C/2E,IAAMq5E,EAAO,GACfixB,EAAGgB,gBAAkBjyB,EAAOA,EAAO7jG,QAAQwqB,GAAK,GAAGvpB,GACzCkjG,GAAkB35E,EAAE+2E,OAC9BuzB,EAAGY,MAAe,QAAPhvD,EAAAl8C,EAAE+2E,WAAK,IAAA76B,OAAA,EAAAA,EAAAzlE,IAKxB,GAAI0iG,GAAuBn5E,GAAI,CAC7B,MAAMtP,EAAQsP,EAAiBtP,KAC3BA,IACF45G,EAAGkB,iBAAmB96G,QAEfsP,EAAE+vE,yBACXu6B,EAAG53B,sBAA+D,QAAvC5e,EAAC9zD,EAAEq2E,gBAAoC,IAAAviB,OAAA,EAAAA,EAAA4e,sBAClEx7F,KAAK83K,2BAA2BhvJ,EAAGsqG,IAIrC,MAAMpyB,EAAS2I,GAAWrI,qBAAqBx4E,GAe/C,OAbI22E,GAAQ32E,IAAMA,EAAE+2E,IAAKqB,YACvBF,EAAOtsF,KAAKoU,EAAE+2E,IAAKqB,YAEjBF,EAAOhnG,SACTo5H,EAAGpyB,OAAS,GACZA,EAAO1kG,SAAQs6D,KAET6oC,GAAQ7oC,IAAMqrC,GAAuBrrC,IAAMA,EAAEuoC,SAASC,oBAAsBP,GAAkBG,yBAChGo0B,EAAGpyB,OAAQtsF,KAAK1U,KAAKi4K,gCAAgCrhH,GAAG,QAKvDw8D,EAGDilD,wBAAwBvvJ,GAC9B,MAAMwvJ,EAAO/0E,GAA6Bz6E,GAC1C,GAAKwvJ,IAAQ71E,GAAkB61E,GAG/B,OAAIn4E,GAA0Bm4E,IAAS94E,GAAS84E,GACvCA,EAAK/4K,GAEPqiG,GAAU02E,GAAM/4K,GAGjBm4K,6BAA6B5uJ,GACnC,OAAOw2E,GAAcx2E,GAAK,YAAcA,EAAEstE,KAGpC0hF,2BAA2BhvJ,EAAgB8uJ,GAOjD,IANK33E,GAAUn3E,IAAM8uJ,EAAG3qF,OAAS2qF,EAAG3qF,MAAM3uF,QAAQ+gG,KAAkB,IAClEu4E,EAAGt6C,cAAe,GAEhBl5B,GAA6Bt7E,KAC/B8uJ,EAAG/+D,WAAY,GAEbtU,GAAkBz7E,GAAI,CACxB8uJ,EAAGv/D,YAAa,EAChB,MAAMlU,EAAkBD,GAA8Bp7E,GACtD8uJ,EAAGl5E,cAAgByF,EAAgBzF,eAI/Bm5E,WAAWh0H,GACjB,OAAIA,EAAIvlD,QAAQ+gG,KAAkB,EACzBA,GAEFx7C,EAAI10C,OAGLwoK,gCAAgC7uJ,EAAgByvJ,aACtD,GAAI1/E,GAAuB/vE,GAAI,CAC7B,MAAMtP,EAAyC,QAAlCojE,EAAsB,QAAtB5X,YAAA87B,GAAeh4E,yBAAI+2E,WAAG,IAAA76B,OAAA,EAAAA,EAAEk8B,kBAAU,IAAAtkB,OAAA,EAAAA,EAAEpjE,KAC7CA,IACF++J,EAAGjkD,iBAAmB96G,KCvMvB,MA2ED0jH,GAAY,CAACn+B,EAA0B7tE,WAC3C,IAAI+rG,EAOJ,GALEA,EADE/8B,GAAYnB,GACP7tE,EAAIisG,OAAS,GAEbjsG,EAAIusG,oBAAsB,GAG/Bj+B,GAAST,GAAc,CACzB,MAAMtnG,EAAO+gL,GAAWz5E,EAAuB9G,OAC/CwgF,GAA2B15E,EAAatnG,EAAKd,OAE7CsmI,EAAKvoH,KAAKjd,GAEVihL,GACsB,UAApB35E,EAAYiC,cAAQ,IAAAv3D,OAAA,EAAAA,EAAA9vC,QAAOi9D,IAAM6oC,GAAQ7oC,EAAEipC,OAC3Co9B,GAGFC,GAAWn+B,EAAuB9G,MAAQxgG,EAAKd,YAE/C+hL,GAAY35E,EAAYiC,OAAQi8B,GAGlC,OAAOA,GAGHw7C,GAA6B,CAAC15E,EAA0BtnG,eACxDsnG,EAAYkC,iBACdxpG,EAAgB,UAAI,CAClBkhL,UAAW,4BACXn/J,KAAM,GACNja,GAAI,GACJ/E,QAAS,IAGX/C,EAAKiyG,UAAUlwF,KAAmC,QAA5BwrD,EAAsB,QAAtBv7B,EAAAs1D,EAAYmC,kBAAU,IAAAz3D,OAAA,EAAAA,EAAEjwB,YAAI,IAAAwrD,EAAAA,EAAI,GACtDvtE,EAAKiyG,UAAUnqG,GvNjDa,CAACw/F,IAC/B,MAAM2Y,EAAU,GAIhB,OAFAD,GAAgB1Y,EAAa2Y,GAEtBA,EAAQ3oG,KAAK,KAAO,SuN4CL6pK,CAAkB75E,EAAuB9G,eAE7Drb,EAAAmiB,EAAYmC,WAAYF,uBAAQ1kG,SAAQiuG,IACtC,MAAMthF,EAAIuvJ,GAAUjuE,GAEpB9yG,EAAKiyG,UAAUlvG,QAAQka,KAAKuU,GAE5Bi0G,GAAU3yB,EAAOthF,EAAEtyB,YAKnB+hL,GAAc,CAAC13E,EAAuBi8B,KAC1Cj8B,MAAAA,GAAAA,EAAQ1kG,SAAQiuG,IACd,MAAM9yG,EAAO+gL,GAAUjuE,GACvB0yB,EAAKvoH,KAAKjd,GAEVylI,GAAU3yB,EAAO9yG,EAAKd,WAIpB6hL,GAAaz5E,IACjB,MAAMtnG,EAAO,CACXf,KAAM,CACJmiL,aAAc,8BACdx7C,UAAWt+B,EAAY3I,KACvB75E,OAAQ,GACRxf,IAAK,gCAAgCgiG,EAAY3I,OACjD0iF,OAAQ,gCAAgC/5E,EAAY3I,QAEtDz/F,MAAO,CACLgiL,UAAW,oCAMf,OAFAh7C,GAAiB5+B,EAAatnG,EAAKd,OAE5Bc,GAGHkmI,GAAmB,CAAC5+B,EAA0BpoG,KAClDA,EAAY,KAAI8oG,GAAQV,GAAewY,GAAUxY,EAAYc,KAAQ,IAAM0X,GAAUxY,GAAewY,GAAUxY,GAE9GpoG,EAAU,GAAIghH,GAAQ5Y,GAElBqF,GAA6BrF,IAC/BpoG,EAAiB,UAAI,IACrBA,EAAM41G,OAASxN,EAAYwN,QACjB9M,GAAQV,IAAiBkB,GAAUlB,KAC7CpoG,EAAM41G,OAASxN,EAAYwN,QAG7B,MAAMwsE,EAAkBt5E,GAAQV,GAAeA,EAAYc,IAAOd,EAClE,GAAIlG,GAAuBkgF,IAAoBx0E,GAAkBw0E,GAAkB,CACjFpiL,EAAkB,WAAI,IACtB,MAAMwtG,EAAkBD,GAA8B60E,GACtDpiL,EAAqB,cAAIwtG,EAAgBzF,eAAiB,KAGxDwB,GAAYnB,GACdpoG,EAAMinI,cAAgB,CACpB+6C,UAAW,4BACXn+K,QAASoiI,GAAa79B,IAEdS,GAAST,KACfA,EAAY9R,QAAUoS,GACxB1oG,EAAoB,aAAI,IAExBA,EAAS,EAAI,CAAC,CAAEgiL,UAAW,4BAA6Bn+K,QAASoiI,GAAa79B,OAK9E69B,GAAgB79B,IACpB,MAAM5Q,EAAQ,wCACRziF,EAAgB,GAEhBstK,EAAcj6E,EAAY9R,MAAM3xF,MAAM6yF,GAE5C,GAAK6qF,EAGOj6E,EAAY9R,MAAMn0D,WAAWkgJ,EAAY,KACnDttK,EAAOgJ,KAAKqqF,EAAY9R,MAAMrtC,UAAU,EAAGm/C,EAAY9R,MAAM3uF,QAAQ06K,EAAa,UAJlE,CAChB,MAAMC,EAAMl6E,EAAY9R,MAAM3uF,QAAQ,UACtCoN,EAAOgJ,KAAKqqF,EAAY9R,MAAMrtC,UAAU,GAAY,IAATq5H,OAAa14K,EAAY04K,IAsBtE,OAjBAD,MAAAA,GAAAA,EAAa18K,SAAQ,CAACssB,EAAG1uB,aACvB,MAAMg/K,EAAOtwJ,EAAEttB,MAAM6yF,GAASvlE,EAAI,GAElCld,EAAOgJ,KAAKykK,GAAUD,MAAAA,EAAAA,EAAQ,KAE9B,MAAM7uK,GAAwB,QAAjBo/B,EAAAs1D,EAAY9R,aAAK,IAAAxjD,OAAA,EAAAA,EAAEnrC,QAAQsqB,IAAKA,EAAE5uB,OAE/C,GAAIqQ,EAAO00F,EAAY9R,MAAMjzF,OAAS,EAAG,CACvC,MAAMo/K,EAAKJ,EAAY9+K,EAAI,GAAK6kG,EAAY9R,MAAM3uF,QAAQ06K,EAAY9+K,EAAI,IAAM6kG,EAAY9R,MAAMjzF,OAClG0R,EAAOgJ,KAEiB,QADtBswD,EAAA+5B,EAAY9R,MACTrtC,UAAUv1C,EAAM+uK,UAAG,IAAAp0G,OAAA,EAAAA,EAClBvpE,QAAQ,YAAa,MACtBA,QAAQ,QAAS,WAInBiQ,GAGHytK,GAAavwJ,UACjB,MAAMywJ,EAAazwJ,EAAEttB,MAAM,mBACrBm5C,EAAO4kI,GAAcA,EAAW,GAAKA,EAAW,GAAK,GAErDC,EAAc1wJ,EAAEttB,MAAM,qCAG5B,MAAO,CACL5E,KAAM,CACJmiL,aAAc,8BACdx7C,UAAW,OACX9gH,OAAQ,GACRxf,IAAK,oCACL+7K,OAAQ,qCAEVniL,MAAO,CACLgiL,UAAW,4BACXlkI,KAAAA,EACAj6C,QAbY8+K,GAAeA,EAAY,GAAK,CAAiB,QAAhB7vI,EAAA6vI,EAAY,UAAI,IAAA7vI,OAAA,EAAAA,EAAAt6B,QAAU,CAAC,OC9OjEoqK,GAAmB,CAC9B7iL,KAAM,CACJmiL,aAAc,8BACdx7C,UAAW,QACX9gH,OAAQ,GACRxf,IAAK,qCACL+7K,OAAQ,sCAEVniL,MAAO,CACLgiL,UAAW,wBACXn8C,SAAU,CACRm8C,UAAW,2BACXl8C,cAAe,CACbk8C,UAAW,gCACXjpE,IAAK,KAGThK,aAAc,CACZizE,UAAW,+BACX1hF,MAAO,CACL0hF,UAAW,wCACXh8C,aAAc,CACZg8C,UAAW,+BACXj8C,SAAU,CACRi8C,UAAW,4BACXp5K,GAAI,WACJ/E,QAAS,CAAC,KAEZm+F,OAAQ,CACNggF,UAAW,4BACXp5K,GAAI,SACJ/E,QAAS,CAAC,KAEZqiI,UAAW,CACT87C,UAAW,4BACXp5K,GAAI,YACJ2S,EAAG,CACD,CACEymK,UAAW,4BACXn+K,QAAS,CAAC,QAKlBs9F,YAAa,CACX6gF,UAAW,8BACXx7C,OAAQ,CACN,CACEzmI,KAAM,CACJmiL,aAAc,8BACdx7C,UAAW,SACX9gH,OAAQ,GACRxf,IAAK,sCACL+7K,OAAQ,uCAEVniL,MAAO,CACLgiL,UAAW,kCACXp5K,GAAI,OACJgtG,OAAQ,UACRkxB,oBAAqB,CACnB,CACE/mI,KAAM,CACJmiL,aAAc,8BACdx7C,UAAW,QACX9gH,OAAQ,GACRxf,IAAK,qCACL+7K,OAAQ,sCAEVniL,MAAO,CACLgiL,UAAW,kCACXp5K,GAAI,WACJ2S,EAAG,CACD,CACEymK,UAAW,4BACXn+K,QAAS,CAAC,iBCpDvB,IAAAg/K,GAAb,cAAuC7lF,GAAQm9C,GAARn9C,CAAmBv4B,KAA1Dj+D,kCAC8B6C,KAAAiyI,eAAoC,IAAI99C,GAE5Dn0F,KAAIo6G,KAAQ,GAEZp6G,KAAG0vG,IAAG,GAgFN1vG,KAAgBy5K,iBAAG,EAzE3BllH,mBACE,OAAOv0D,KAGT05K,kBAAkBt/D,EAAc1K,EAAahK,EAA6Bi0E,GAAwB,GAChG35K,KAAKo6G,KAAOA,EACZp6G,KAAK0vG,IAAMA,EACPhK,IACF1lG,KAAK0lG,aAAeA,GAEtB1lG,KAAK45K,iBAAiBD,GACtBl/K,SAAS2Q,cAAc,yBAAiC,MAAEqI,QAAU,QAGtE6gJ,wBACE,GAAIt0J,KAAKo6G,OAASvZ,GAAuB2e,QAAUx/G,KAAKo6G,OAASvZ,GAAuB+M,0BACtF,OAEF,MAAM9V,EAAcg5C,GAAU78C,WAAWu5C,gBAAgB11C,YACzD,OAAO,IAAI0/E,GAA0Bx3K,KAAKo6G,KAAMp6G,KAAK0vG,IAAK5X,GAAaw8D,wBAGzEulB,+BAA+BjwE,EAAoD5O,GACjFh7F,KAAKg7F,SAAWA,EACZ4O,IACF5pG,KAAK4pG,mBAAqBA,EAC1B5pG,KAAK85K,cAITrD,mBACE,MAAM3+E,EAAcg5C,GAAU78C,WAAWu5C,gBAAgB11C,YACzD,OAAO,IAAI0+E,GAAqBx2K,KAAK0vG,IAAK5X,GAAa2+E,mBAGzDsD,uBACE,MAAMC,EAAM,IAAKh6K,KAAK0lG,cAChBu0E,GFxD6CC,EEwDkBppC,GAAU78C,WAAWu5C,gBAAgB11C,YFvDxF,CAClB6gF,UAAW,8BACXx7C,OAAQD,GAAUg9C,EAAyB,CAAEpiF,YAAa,OAHR,IAACoiF,EE0DnD,OADCF,EAAYrjL,MAAM+uG,aAAcs0E,EAAYrjL,MAAM+uG,aAAazO,MAAQ,QAAU,WAAWa,YAAYqlC,OAAS88C,EAAsB98C,OACjI68C,EAGDJ,iBAAiBD,WACvB,IAAIp9C,EAMJ,GAJKv8H,KAAK0lG,cAAiB1lG,KAAK0lG,aAAa/uG,QAC3CqJ,KAAK0lG,aAAe6zE,IAGlBv5K,KAAKo6G,OAAS0tD,GAAiBl6D,0BAA2B,CAC5D2uB,EAAYhB,GAA4Bg+C,IAAkB,GAC1D,MAAMxhF,EAASwkC,EAAUzkC,YAAa0J,QAAQ,GAC9CzJ,EAAOwU,OAAS,OAChBxU,EAAOnJ,OAAS,IAChBmJ,EAAOx4F,GAAK,OACZ,MAAM4/F,EAAW,IAAIogB,GACrBpgB,EAASwO,WAAa9M,GAAuB+M,0BAC7C7V,EAAOoH,SAAWA,EAGdw6E,GACFp9C,EAAUzkC,YAAYokB,YAAYqgB,EAAUzkC,YAAYkJ,OAAO,SAGjEu7B,EAAYhB,GAA4Bv7H,KAAK0lG,aAAc1lG,KAAKo6G,OAASvZ,GAAuB2e,QxPhGjE,IAAC1nB,EAAkBgjB,EwPmGpDyhB,EAAU7sB,IAAM1vG,KAAK0vG,IAE4C,QAAjE1qC,EAAwC,QAAxCv7B,EAAAhvC,SAAS2Q,cAAc,uBAAiB,IAAAq+B,OAAA,EAAAA,EAAAr+B,cAAc,iBAAW,IAAA45D,GAAAA,EAAA7oB,QACjE20F,GAAUW,UxPtGwB35C,EwPsGOykC,EAAUzkC,YxPtGCgjB,EwPsGa96G,KAAKo6G,KxPrGjE,CACLv3F,KAAMq5E,GACN4e,cAAAA,EACAhjB,YAAAA,KwPsGMgiF,aACF95K,KAAK4pG,qBACPuwE,cAAcn6K,KAAKy5K,kBACnBz5K,KAAKy5K,iBAAmBzxK,OAAOiN,YAAW,KACxC67H,GAAUW,SAAS32C,GAA8B5E,QAAQl2F,KAAK4pG,mBAAqB5pG,KAAKg7F,aACvF,MAIPjlG,SACE,OAAOqE,EAAI;QACPmtK;;;;;;;;;;;;;;;;;;+CAkBuCvnK,KAAKiyI;QAlHtBz+C,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAsE67K,GAAAvhL,UAAA,sBAAA,GAD7EuhL,GAAiBhmF,GAAA,CAD7B0+C,GAAc,cACFsnC,ICpBN,MCDMY,GAAarjG,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECQvBsjG,GAAmB,U5BiIzBl9K,cACE6C,KAAay8H,cAAG,GAChBz8H,KAAIsoG,KAAG,GACPtoG,KAAIs6K,KAAc,IAClBt6K,KAAYu6K,aAAG,GACfv6K,KAAOw6K,QAAG,GACVx6K,KAAoBmpK,qBAAgB,KACpCnpK,KAAKy6K,MAAG,K4BrIV,SAASC,GAAsB/qH,EAAW,KACxC,OAAO,SAAUgrH,EAAkB59K,EAAsB/B,GACvD,MAAO,CACLc,MACE,MAAM8+K,EAAY,IAAI3mK,KACpB,IAAIy7C,EAAQ,EAEZ,MAAMmrH,EAAiB,KACrBV,cAAczqH,GACV1vD,KAA8B,wBAChC0vD,EAAQ1nD,OAAOiN,YAAW,IAAM4lK,KAAkBlrH,GAIpD30D,EAAWrE,MAAM28B,MAAMtzB,KAAMiU,IAG/B4mK,KAKF,OAFAl9K,OAAOmE,eAAe9B,KAAMjD,EAAK,CAAEpG,MAAOikL,EAAW1mK,cAAc,EAAME,UAAU,IAE5EwmK,KAOf,IAAaE,GAAb,cAAsC1/G,GAAtCj+D,kCAaU6C,KAAkB+6K,mBAAa,GAG/B/6K,KAAuBg7K,yBAAG,EAE1Bh7K,KAA0Bi7K,2BAAkB,GA0D5Cj7K,KAAAk7K,4BAA6B,EAiK7Bl7K,KAAem7K,gBAAG,EAChBn7K,KAAuBo7K,yBAAG,EAkD5Bp7K,KAAyBq7K,0BAAG,EAuC5Br7K,KAA0Bs7K,4BAAG,EAC7Bt7K,KAAuBu7K,yBAAI,EApT/BvR,kBAAcrzK,GAChB,MAAMkJ,EAAWG,KAAKi7K,2BACtBj7K,KAAKi7K,2BAA6BtkL,EAClCqJ,KAAK+6K,mBAAqBpkL,EAAMwH,KAAI+T,GAAKA,EAAEo2F,OAC3CtoG,KAAKszD,cAAc,gBAAiBzzD,GAGlCmqK,oBACF,OAAOhqK,KAAKi7K,2BAMVtS,YAAQhyK,GACV,MAAMkJ,EAAWG,KAAKw7K,iBACtBx7K,KAAKw7K,iBAAmB7kL,EAExBqJ,KAAKy7K,SAAW9kL,EAAQ,IAAKA,EAAOqzK,cAAe,IAAIrzK,EAAMqzK,gBAAmB,IAAIpB,GAC/E5oK,KAAKy7K,SAASzR,cAAchwK,SAC/BgG,KAAKy7K,SAASzR,cAAgB,CAAC,IAAKqQ,MAGtCr6K,KAAKg7K,wBAA0Bh7K,KAAK07K,kBACpC17K,KAAKszD,cAAc,UAAWzzD,GAG5B8oK,cACF,OAAO3oK,KAAKw7K,iBAGdG,uBACE,MAAO,IAAK37K,KAAKy7K,SAAUzR,cAAehqK,KAAKy7K,SAASzR,cAAcrwK,QAAOuY,GAAKA,EAAEuqH,iBAGtF1mI,iBACE,OAAOqE,EAAI;;UAEL4F,KAAK47K;oCACqB57K,KAAK67K;sEAC6B77K,KAAK87K,sCAAsC97K,KAAKg7K;6BAClGvxI,EAAAzpC,KAAKy7K,+BAAUzR,cAAchwK,QAAS,QAAU;;;UAG1DgG,KAAK+7K;;;;yEAIyE,QAAf/2G,EAAAhlE,KAAKy7K,gBAAU,IAAAz2G,OAAA,EAAAA,EAAA6kG,4BAA6B95E,GAAoB/vF,KAAKg8K,0BAA0BjsF;;;;;MAS9J6rF,kCACN,OAAQ57K,KAAKk7K,2BAET9gL,EAAI;;;;;2GAKuH,iBAAT,UAAf4F,KAAKy7K,gBAAU,IAAAhyI,OAAA,EAAAA,EAAA2sD;;;;qGAIG,cAAT,UAAfp2F,KAAKy7K,gBAAU,IAAAz2G,OAAA,EAAAA,EAAAoxB;;;;;UAV5Gh8F,EAAI,cAkBFyhL,kCACN,OAAOzhL,EAAI;;;;;;QAMM,QAAbqvC,EAAAzpC,KAAKy7K,gBAAQ,IAAAhyI,OAAA,EAAAA,EAAEugI,cAAc7rK,KAAI,CAACotC,EAAGx0B,IAAU/W,KAAKi8K,oCAAoCllK;MAItFklK,oCAAoCllK,SAC1C,OAAO3c,EAAI;;;;;;qBAMM4F,KAAK+6K;oBACN/6K,KAAKy7K,SAASzR,cAAcjzJ,GAAOuxF;qBACjCvY,GAAoB/vF,KAAKk8K,wBAAwBnsF,EAAIh5E;oBACtDg5E,GAAoB/vF,KAAKk8K,wBAAwBnsF,EAAIh5E;4BAC7Cg5E,GAA0B/vF,KAAKm8K,sBAAsBpsF,EAAIh5E;qBAChEg5E,GAA4B/vF,KAAK8nJ,aAAa/3D,EAAIh5E;qBACnD/W,KAAKo8K;;;;;;;;;;;;;qBAamC,QAAxC3yI,EAAAzpC,KAAKy7K,SAASzR,cAAcjzJ,GAAO0jK,aAAK,IAAAhxI,EAAAA,EAAI;qBAC3CsmD,GAAoB/vF,KAAKq8K,gBAAgBtsF,EAAIh5E;qBAC7Cg5E,GAA4B/vF,KAAK8nJ,aAAa/3D,EAAIh5E;;;;;;;;;;;uBAWjD,IAAY/W,KAAKs8K,kBAAkBvlK,EAAO;0BACvCA,IAAU/W,KAAKy7K,SAASzR,cAAchwK,OAAS;;;;;;;;;uBASlD,IAAYgG,KAAKs8K,kBAAkBvlK,GAAQ;0BAC9B,IAAVA;;;;;;;;;uBASH,IAAY/W,KAAKu8K,oBAAoBxlK;0BACK,IAAvC/W,KAAKy7K,SAASzR,cAAchwK;;;;;;;MAU5C+hL,gDACN,OAAO3hL,EAAI;;;;;;;;;mBASsE,QAAlE4qE,EAAa,QAAbv7B,EAAAzpC,KAAKy7K,gBAAQ,IAAAhyI,OAAA,EAAAA,EAAEqgI,yCAAyCj/J,kBAAU,IAAAm6D,EAAAA,EAAI;mBACrE+qB,GAAoB/vF,KAAKw8K,4CAA4CzsF;;;;;;;;;mBASJ,QAAlEv6D,EAAa,QAAbonD,EAAA58E,KAAKy7K,gBAAQ,IAAA7+F,OAAA,EAAAA,EAAEmtF,yCAAyCl/J,kBAAU,IAAA2qB,EAAAA,EAAI;mBACrEu6D,GAAoB/vF,KAAKy8K,4CAA4C1sF;;;MAMvFp6B,UACE31D,KAAKs7K,4BAA6B,EAG5BI,kBACN,OAAO17K,KAAKy7K,SAASzR,cAAcv5H,OAAMv+B,GAAKA,EAAEuqH,gBAG1Cq/C,0BACN97K,KAAKy7K,SAASzR,cF7PgB,EAACA,EAA8B0S,KAC/D,MAAMC,EAAY,IAAI3S,GAEtB,OADA2S,EAAUjoK,KAAKgoK,GACRC,GE0PyBC,CAAmB58K,KAAKy7K,SAASzR,cAAe,IAAKqQ,KACnFr6K,KAAKg7K,yBAA0B,EAC/B/lK,YAAW,IAAMjV,KAAK68K,eAAe78K,KAAKy7K,SAASzR,cAAchwK,OAAS,GAAG+M,SAAS,KAIhFu1K,kBAAkBvlK,EAAegxE,GACvC/nF,KAAKy7K,SAASzR,cFxPc,EAACA,EAA8BjzJ,EAAegxE,KAC5E,MAAM9wE,EAAWF,EAAQgxE,EAEzB,GAAI9wE,EAAW,GAAKA,GAAY+yJ,EAAchwK,OAC5C,OAAOgwK,EAGT,MAAM2S,EAAY,IAAI3S,GAEtB,OADA2S,EAAUvuJ,OAAOnX,EAAU,EAAG0lK,EAAUvuJ,OAAOrX,EAAO,GAAG,IAClD4lK,GE+OyBG,CAAiB98K,KAAKy7K,SAASzR,cAAejzJ,EAAOgxE,GACnF/nF,KAAK+tJ,6BAA6B,cAClC/tJ,KAAKszD,gBAICipH,oBAAoBxlK,GAC1B/W,KAAKy7K,SAASzR,cFrQgB,EAACA,EAA8BjzJ,KAC/D,MAAM4lK,EAAY,IAAI3S,GAEtB,OADA2S,EAAUvuJ,OAAOrX,EAAO,GACjB4lK,GEkQyBI,CAAmB/8K,KAAKy7K,SAASzR,cAAejzJ,GACzE/W,KAAKy7K,SAASzR,cAAchwK,SAC/BgG,KAAKy7K,SAASzR,cAAgB,CAAC,IAAKqQ,MAEtCr6K,KAAKg7K,wBAA0Bh7K,KAAK07K,kBACpC17K,KAAK+tJ,6BAA6B,gBAClC/tJ,KAAKszD,gBAKC4oH,wBAAwBnsF,EAAWh5E,GACzC/W,KAAKo7K,yBAA0B,EAC/B,MAAM4B,EAAqB,SAAZjtF,EAAGltE,KAEbm6J,GACH7C,cAAcn6K,KAAKm7K,iBAOrBn7K,KAAKm7K,gBAAkBnzK,OAAOiN,YAC5B,WACE,MAAMgoK,EAA8Bj9K,KAAKg7K,wBAEnCkC,EAAsBl9K,KAAK68K,eAAe9lK,GAC1ComK,EAAan9K,KAAKy7K,SAASzR,cAAcjzJ,GAAO0jK,MAChD2C,EAAqC,QAAzB3zI,EAAAyzI,EAAoBvmL,aAAK,IAAA8yC,EAAAA,EAAI,GAEzC0kD,EAAQ,IAAI9hD,OAAO,IAAM+wI,EAAU9tI,UAAU,OAAO7zC,QAAQkyF,GAAe,IAAM,IAAK,KACtF+uF,EAAc18K,KAAKgqK,cAAc98J,MAAKgF,GAC1CA,EAAEo2F,KACCh5D,UAAU,OACV7zC,QAAQ,mBAAoB,IAC5BH,MAAM6yF,MACN,IAAKksF,GAAkB/xE,KAAM00E,EAAS,GAAKI,GAE1CC,IAAwBX,EAAYjgD,cAE1CigD,EAAYjC,MAAQuC,IAAWK,EAAsB,GAAKF,EAE1Dn9K,KAAKy7K,SAASzR,cAAcjzJ,GAAS,IAAK2lK,GAC1C18K,KAAKg7K,wBAA0BqC,GAAuBr9K,KAAK07K,kBAEvDsB,IAAWK,IACbH,EAAoBvmL,MAAQ,IAG9BqJ,KAAKo7K,yBAA0B,EAE3B6B,IAAgCj9K,KAAKg7K,yBACvCh7K,KAAK+tJ,6BAA6B,oBAG1B,SAAZh+D,EAAGltE,KAAkB,IAAM,GAKvBs5J,sBAAsBpsF,EAAiBh5E,GAC7C,MAAMumK,EAA0Bt9K,KAAKgqK,cAAc98J,MAAKgF,GAAKA,EAAEo2F,OAASvY,EAAG7mF,OAAOvS,QAClF,GAAI2mL,EAAyB,CAC3B,MAAM7C,MAAEA,GAAUz6K,KAAKy7K,SAASzR,cAAcjzJ,GAC9C/W,KAAKy7K,SAASzR,cAAcjzJ,GAAS,IAChCumK,EACH7C,MAAAA,GAGJz6K,KAAKg7K,0BAA4BsC,GAA2Bt9K,KAAK07K,kBAChE3rF,EAAGh5F,OAAuBgQ,QAC3B/G,KAAKu7K,wBAA0BxkK,EAE/B/W,KAAK+tJ,6BAA6B,kBAClC/tJ,KAAKszD,gBAGC+oH,gBAAgBtsF,EAAWh5E,GACjC,MAAMomK,EAAan9K,KAAKy7K,SAASzR,cAAcjzJ,GAAO0jK,MAChD36K,EAAYiwF,EAAGh5F,OAA4BJ,MACjDqJ,KAAKy7K,SAASzR,cAAcjzJ,GAAO0jK,MAAQ36K,EACvCq9K,IAAer9K,GACjBE,KAAK+tJ,6BAA6B,kBAI9ByuB,4CAA4CzsF,GAClD/vF,KAAKy7K,SAAS3R,yCAA2CtiK,OAAQuoF,EAAGh5F,OAA4BJ,OAG1F8lL,4CAA4C1sF,GAClD/vF,KAAKy7K,SAAS1R,yCAA2CviK,OAAQuoF,EAAGh5F,OAA4BJ,OAG1FqlL,0BAA0BjsF,GAChC/vF,KAAKy7K,SAAS5R,kBAAqB95E,EAAGh5F,OAA4BmC,QAK5D4uJ,aAAa/3D,EAAmBh5E,GACjCg5E,EAAGlzE,SAAYkzE,EAAG9zE,QAAW8zE,EAAGlpF,UAO1BkpF,EAAGlzE,SAAYkzE,EAAG9zE,QAAW8zE,EAAGlpF,WAC1B,YAAXkpF,EAAGhzF,IACAiD,KAAKs7K,6BACRt7K,KAAKs7K,4BAA6B,EAClCt7K,KAAKs8K,kBAAkBvlK,GAAQ,GAC/B/W,KAAKu9K,0BAA0BxtF,EAAGh5F,OAASggB,GAAQ,IAEjC,cAAXg5E,EAAGhzF,MACPiD,KAAKs7K,6BACRt7K,KAAKs7K,4BAA6B,EAClCt7K,KAAKs8K,kBAAkBvlK,EAAO,GAC9B/W,KAAKu9K,0BAA0BxtF,EAAGh5F,OAASggB,EAAO,MAjBvC,UAAXg5E,EAAGhzF,KAAmBiD,KAAKg7K,yBAA2BjkK,IAAU/W,KAAKu7K,yBACvEv7K,KAAKw9K,oBAAoBrhI,QACzBn8C,KAAKu7K,yBAA2B,GACvB,CAAC,UAAW,aAAa7nK,SAASq8E,EAAGhzF,MAAQiD,KAAKy7K,SAASzR,cAAcjzJ,GAAO0lH,eACzFz8H,KAAKu9K,0BAA0BxtF,EAAGh5F,OAASggB,EAAkB,YAAXg5E,EAAGhzF,KAAqB,EAAI,GAmB5EwgL,0BAA0BvlH,EAAiBjhD,EAAegxE,GAChE,MAAMlrC,EAAwC,uBAA/Bmb,EAAmBxrC,QAAmCxsB,KAAK68K,eAAiB78K,KAAKy9K,aAC1FxmK,EAAWF,EAAQgxE,EACrB9wE,EAAW,GAAKA,GAAY4lC,EAAM7iD,QAGtCib,YAAW,IAAM4nC,EAAM5lC,GAAUlQ,SAAS,GAGpCq1K,2BACNp0K,OAAOiN,YAAW,IAAOjV,KAAKu7K,yBAA2B,GAAI,GAGvDxtB,6BAA6BgG,GACnComB,cAAcn6K,KAAKq7K,2BACnBr7K,KAAKq7K,0BAA4BrzK,OAAOiN,YAAW,IAAMjV,KAAKi0J,qBAAqBF,IAAe,KAG5FE,qBAAqBF,GAC3B/zJ,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAAA,QAzXD+mB,GAAAvkI,OAAS,CAAC6jI,IAGjB5mF,GAAA,CADCppE,GAAM,wBACyC0wJ,GAAA7iL,UAAA,2BAAA,GAGhDu7F,GAAA,CADCkqF,GAAS,oBAC0C5C,GAAA7iL,UAAA,oBAAA,GAGpDu7F,GAAA,CADCkqF,GAAS,uBAC6C5C,GAAA7iL,UAAA,sBAAA,GAGvDu7F,GAAA,CADCl9F,MACyCwkL,GAAA7iL,UAAA,0BAAA,GAG1Cu7F,GAAA,CADCl9F,MACsCwkL,GAAA7iL,UAAA,+BAAA,GAIvCu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAM7qB,SAMjB8iL,GAAA7iL,UAAA,gBAAA,MASDu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMllB,UAYjBm9K,GAAA7iL,UAAA,UAAA,MA+KDu7F,GAAA,CADCknF,MAKAI,GAAA7iL,UAAA,oBAAA,MAGDu7F,GAAA,CADCknF,MASAI,GAAA7iL,UAAA,sBAAA,MA3OU6iL,GAAgBtnF,GAAA,CAD5B0+C,GAAc,kBACF4oC,ICjCb,IAAa6C,GAAb,cAAsCviH,GAAtCj+D,kCAKU6C,KAAsB49K,uBAAa,GAGnC59K,KAAmB69K,oBAAG,GACtB79K,KAAK89K,OAAG,EACR99K,KAAU+9K,YAAG,EACb/9K,KAAqBg+K,uBAAG,EAyCxBh+K,KAAiBi+K,kBAAa,GArClCjW,eAAWrxK,GAEbqJ,KAAKk+K,YAAcvnL,EACnBqJ,KAAK89K,OAAQ,EACkB,QAA3B99K,KAAKk+K,YAAYruE,QACnB7vG,KAAKm+K,qBAAqBhV,qBAAuB,KACjDnpK,KAAKm+K,qBAAqB/U,cAAgB,WAC1CppK,KAAKm+K,qBAAqBC,cAAgB,SAASp+K,KAAKk+K,YAAYtvF,UAAU5uF,KAAKk+K,YAAY/sE,MAC/FnxG,KAAKq+K,cAAc1nL,MAAQ,GAAGqJ,KAAKm+K,qBAAqBC,0DAA0Dp+K,KAAKk+K,YAAYtvF,cAAc5uF,KAAKk+K,YAAY/sE,MAClKnxG,KAAK89K,OAAQ,GAGf99K,KAAKszD,gBAGH00G,iBACF,OAAOhoK,KAAKk+K,YAKVI,cAAU3nL,GACZqJ,KAAK+9K,YAAa,EACb/9K,KAAKu+K,YAAyC,IAA3Bv+K,KAAKu+K,WAAWvkL,SACtCgG,KAAKu+K,WAAa5nL,GAAgB,GAClCqJ,KAAKi+K,kBAAoBj+K,KAAKs+K,UAAUngL,KAAIqgL,GAAY,IAAIh2B,GAAOg2B,EAAS3uE,MAAO,GAAG2uE,EAAS3uE,WAAW2uE,EAASl2E,UACnHtoG,KAAKszD,sBAEc,IAAV38D,IACTqJ,KAAK+9K,YAAa,GAIlBO,gBACF,OAAOt+K,KAAKu+K,WAOVxV,wBAAoBpyK,GAGtB,GAFAqJ,KAAKm+K,qBAAuBxnL,GAAgB,IAAIqyK,GAChDhpK,KAAKg+K,sBAAoE,aAA5Ch+K,KAAKm+K,qBAAqB/U,cACnDppK,KAAKm+K,qBAAqBC,cAAe,CAC3C,MAAMjwK,EAAiBnO,KAAKi+K,kBAAkB/wK,MAAKugB,GAAMA,EAAG92B,QAAUqJ,KAAKm+K,qBAAqBC,iBAAkB,IAAI51B,GAAO,GAAI,IACjIxoJ,KAAKq+K,cAAc1nL,MAAQwX,EAAOi5I,aAAepnJ,KAAKm+K,qBAAqBC,mBAE3Ep+K,KAAKq+K,cAAc1nL,MAAQ,GAE7BqJ,KAAKszD,gBAGHy1G,0BACF,OAAO/oK,KAAKm+K,qBAGdpoL,qBACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAwEQ,IAAY4F,KAAKy+K,oBAAoB;2BAChCrvI,IAAkB,IAAA3F,EAAC,eAAAA,EAAA2F,EAAIr4C,6BAAQmC,UAAW8G,KAAKy+K,oBAAoB;yBACzB,cAAlB,UAA3Bz+K,KAAKm+K,4BAAsB,IAAA10I,OAAA,EAAAA,EAAA2/H;;0BAE1BppK,KAAK89K,OAAS99K,KAAK+9K;;;;;uBAKtB,IAAY/9K,KAAKy+K,oBAAoB;2BAChCrvI,IAAkB,IAAA3F,EAAC,eAAAA,EAAA2F,EAAIr4C,6BAAQmC,UAAW8G,KAAKy+K,oBAAoB;yBACzB,cAAlB,UAA3Bz+K,KAAKm+K,4BAAsB,IAAAn5G,OAAA,EAAAA,EAAAokG;;0BAE1BppK,KAAK89K,OAAS99K,KAAK+9K;;;;;uBAKtB,IAAY/9K,KAAKy+K,oBAAoB;2BAChCrvI,IAAkB,IAAA3F,EAAC,eAAAA,EAAA2F,EAAIr4C,6BAAQmC,UAAW8G,KAAKy+K,oBAAoB;yBACzB,2BAAlB,UAA3Bz+K,KAAKm+K,4BAAsB,IAAAvhG,OAAA,EAAAA,EAAAwsF;;0BAE1BppK,KAAK89K,OAAS99K,KAAK+9K;;;;;;;;;sBASxB;wBACG/9K,KAAK89K,OAAS99K,KAAK+9K;;qBAEtB/9K,KAAK49K;wBACFjnL,GAASqJ,KAAK0+K,gBAAgB/nL;wBAC9BA,GAASqJ,KAAK2+K,oBAAoBhoL;oBACtCqJ,KAAK4+K;wBACD5+K,KAAK89K,OAAS99K,KAAK+9K,YAAc/9K,KAAKg+K,yBAAwC,QAAdxoJ,EAAAx1B,KAAKs+K,iBAAS,IAAA9oJ,OAAA,EAAAA,EAAEx7B;;;;MAO9FykL,oBAAoB9nL,GACrBqJ,KAAK89K,OAAU99K,KAAK+9K,aACvB/9K,KAAKm+K,qBAAqB/U,cAAgBzyK,EAC1CqJ,KAAKg+K,sBAAoE,aAA5Ch+K,KAAKm+K,qBAAqB/U,cACvDppK,KAAKszD,iBAIDqrH,oBAAoBvmL,GAC1B4H,KAAKm+K,qBAAqBC,cAAgBhmL,EAAKzB,MAGzC+nL,gBAAgBt0J,GACtB,MAAM+jE,EAAQ,IAAI9hD,OAAOjiB,EAAO,KAChCpqB,KAAK49K,uBAAyB59K,KAAKi+K,kBAAkBtkL,QAAO6kL,GAAYA,EAASp3B,YAAY9rJ,MAAM6yF,KAG7FywF,2BACa,QAAdn1I,EAAAzpC,KAAKs+K,iBAAS,IAAA70I,OAAA,EAAAA,EAAEzvC,SACrBib,YAAW,WACT,MAAMupK,EAAuC,QAA5B/0I,EAAAzpC,KAAKq+K,cAAc1nL,aAAS,IAAA8yC,EAAAA,EAAA,GACjBzpC,KAAKi+K,kBAAkB/wK,MAAK2xK,GAAcL,IAAaK,EAAWz3B,gBAG5FpnJ,KAAKq+K,cAAc1nL,MAAQ,GAC3BqJ,KAAK69K,oBAAsB,MAE5B,KAGG5pB,qBAAqBF,GAC3B/zJ,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAAA,QAhORvgE,GAAA,CADCppE,GAAM,yBACmCuzJ,GAAA1lL,UAAA,qBAAA,GAG1Cu7F,GAAA,CADCl9F,MAC6CqnL,GAAA1lL,UAAA,8BAAA,GAG9Cu7F,GAAA,CADCl9F,MACgCqnL,GAAA1lL,UAAA,2BAAA,GAOjCu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMolJ,MAcjB0V,GAAA1lL,UAAA,aAAA,MAQDu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAM7qB,MAAO1B,OAAO,KAW/BqnL,GAAA1lL,UAAA,YAAA,MAUDu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMllB,OAAQrH,OAAO,KAWhCqnL,GAAA1lL,UAAA,sBAAA,MAlEU0lL,GAAgBnqF,GAAA,CAD5B0+C,GAAc,kBACFyrC,ICHb,IAAamB,GAAb,cAAuC1jH,GAAvCj+D,kCAEE6C,KAAKjI,MAAa,GAGlBiI,KAAMqI,QAAG,EAGTrI,KAAc0mJ,eAAG,GAEjB1mJ,KAAY++K,aAAa,GAEzB/+K,KAAM8mJ,OAAQ,GAQd9mJ,KAAK+mJ,OAAG,EAER/mJ,KAAWgnJ,aAAG,EAEdjxJ,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sHA0CuG4F,KAAKrJ,OAAS;sHACdqJ,KAAKrJ,OAAS;;;wCAG5FqJ,KAAKqI,sBAAsBrI,KAAKsnJ,qCAAqCtnJ,KAAKunJ;YACtGvnJ,KAAK++K,aAAa5gL,KAAI/F,GAAQgC,EAAI,cAAc,IAAY4F,KAAKsmE,aAAaluE,MAASA;;;MAS7F8uJ,qBACF,GAAIlnJ,KAAKwnJ,SAAU,OAAOxnJ,KAAKwnJ,SAC/B,IAAKxnJ,KAAK6yD,WAAY,OAEtB,MACM40F,EADcznJ,KAAK5J,WAAYoJ,eAAe,kBAClB49D,mBAElC,OADAp9D,KAAKwnJ,SAAWC,EAAcztJ,OAASytJ,EAAc,GAAKznJ,KAAK5J,WAAYoJ,eAAe,gBACnFQ,KAAKwnJ,SAOV7wJ,YACF,OAAOqJ,KAAKknJ,gBAAkBlnJ,KAAKknJ,eAAevwJ,MAOhDA,UAAMA,GACHqJ,KAAKknJ,eAKVlnJ,KAAKknJ,eAAevwJ,MAAQA,EAJ1BqJ,KAAK0nJ,WAAa/wJ,EAOtB++D,eACE11D,KAAK2nJ,cAAgB3nJ,KAAK5J,WAAYoJ,eAAe,eACrDQ,KAAK2nJ,cAAc7qJ,MAAM2iB,MAAQ,GAAGzf,KAAKknJ,eAAetvI,wBAAwB6H,UAEhFzf,KAAK8mJ,OAAOviE,UAAYvkF,KAAK4nJ,eAAe5oI,KAAKhf,MACjDA,KAAK8mJ,OAAOe,QAAU7nJ,KAAK8nJ,aAAa9oI,KAAKhf,MAC7CA,KAAK8mJ,OAAOiB,QAAU/nJ,KAAKgoJ,aAAahpI,KAAKhf,MAC7CA,KAAK8mJ,OAAOmB,OAASjoJ,KAAKkoJ,YAAYlpI,KAAKhf,MAE3CA,KAAKknJ,eAAelgJ,iBAAiB,UAAWhH,KAAK8mJ,OAAOviE,WAC5DvkF,KAAKknJ,eAAelgJ,iBAAiB,QAAShH,KAAK8mJ,OAAOe,SAC1D7nJ,KAAKknJ,eAAelgJ,iBAAiB,QAAShH,KAAK8mJ,OAAOiB,SAC1D/nJ,KAAKknJ,eAAelgJ,iBAAiB,OAAQhH,KAAK8mJ,OAAOmB,aAEjC1nJ,IAApBP,KAAK0nJ,aACP1nJ,KAAKknJ,eAAevwJ,MAAQqJ,KAAK0nJ,YAIrC3jI,uBACO/jB,KAAKknJ,iBACVlnJ,KAAKknJ,eAAex3I,oBAAoB,UAAW1P,KAAK8mJ,OAAOviE,WAC/DvkF,KAAKknJ,eAAex3I,oBAAoB,QAAS1P,KAAK8mJ,OAAOe,SAC7D7nJ,KAAKknJ,eAAex3I,oBAAoB,QAAS1P,KAAK8mJ,OAAOiB,SAC7D/nJ,KAAKknJ,eAAex3I,oBAAoB,OAAQ1P,KAAK8mJ,OAAOmB,SAG9DlhJ,MAAMqH,GACApO,KAAKknJ,gBACPlnJ,KAAKknJ,eAAengJ,MAAMqH,GAI9BunD,QAAQ92D,GACFA,EAAQ0mD,IAAI,WAAavlD,KAAKqI,QAAUrI,KAAK2nJ,cAAcQ,oBAG7DnoJ,KAAKooJ,eAAiBpoJ,KAAK2nJ,cAAc/tJ,SAAS,GAClDoG,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAOtCiM,OACyC,QAAnC9I,KAAK2nJ,cAAc7qJ,MAAM2iB,QAC3Bzf,KAAK2nJ,cAAc7qJ,MAAM2iB,MAAQ,GAAGzf,KAAKknJ,eAAetvI,wBAAwB6H,WAG9Ezf,KAAK++K,aAAa/kL,SACpBgG,KAAKqI,QAAS,GAOlBE,QACEvI,KAAKqI,QAAS,EACdrI,KAAKooJ,eAAiB,KAOxB42B,QAAQC,GACNj/K,KAAK++K,aAAeE,GAAe,GAEnCj/K,KAAK++K,aAAa/kL,OAAS,GAAmC,IAA7BgG,KAAK++K,aAAa/kL,QAAgBgG,KAAK++K,aAAa,KAAO/+K,KAAKknJ,eAAevwJ,MAASqJ,KAAK8I,OAAS9I,KAAKuI,QAC5IvI,KAAKszD,gBAOPgT,aAAa3vE,GACXqJ,KAAKknJ,eAAevwJ,MAAQA,EAC5BqJ,KAAKuI,QACLvI,KAAKmJ,cACH,IAAIH,YAAY,eAAgB,CAC9BE,OAAQ,CAAEvS,MAAAA,GACVqqE,UAAU,EACV/3D,SAAS,KAKfo/I,iBACOroJ,KAAKooJ,gBAAmBpoJ,KAAKooJ,eAAeE,yBAEjDtoJ,KAAKooJ,eAAezrJ,UAAUg4B,OAAO,UACrC30B,KAAKooJ,eAAiBpoJ,KAAKooJ,eAAeE,uBAC1CtoJ,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAGpC0rJ,iBACOvoJ,KAAKooJ,gBAAmBpoJ,KAAKooJ,eAAe7+F,qBAEjDvpD,KAAKooJ,eAAezrJ,UAAUg4B,OAAO,UACrC30B,KAAKooJ,eAAiBpoJ,KAAKooJ,eAAe7+F,mBAC1CvpD,KAAKooJ,eAAezrJ,UAAUE,IAAI,WAIpC+qJ,eAAe73D,GAEE,YAAXA,EAAGhzF,KAAgC,cAAXgzF,EAAGhzF,MAC7BgzF,EAAGzoF,iBACHyoF,EAAGtyE,mBAIPqqI,aAAa/3D,WACX,OAAQA,EAAGhzF,KACT,IAAK,WACoB,UAAnBiD,KAAKooJ,sBAAc,IAAA3+G,OAAA,EAAAA,EAAE6+G,0BACvBv4D,EAAGzoF,iBACHyoF,EAAGtyE,kBACHzd,KAAKqoJ,kBAEP,MACF,IAAK,aACoB,UAAnBroJ,KAAKooJ,sBAAc,IAAApjF,OAAA,EAAAA,EAAEzb,sBACvBwmC,EAAGzoF,iBACHyoF,EAAGtyE,kBACHzd,KAAKuoJ,kBAEP,MACF,IAAK,QAGHvoJ,KAAKooJ,gBAAkBpoJ,KAAKooJ,eAAejsG,QAC3C,MACF,QAEE,GAAIn8C,KAAKjI,MAAMiC,OAAQ,CACrB,MAAMrD,MAAEA,GAAUqJ,KAAKknJ,eACjBg4B,EAAkBvoL,EAAM24C,UAAU,OAAO7zC,QAAQkyF,GAAe,IACtE3tF,KAAKg/K,QAAQh/K,KAAKm/K,gBAAgBD,MAK1CC,gBAAgBxoL,EAAgByoL,EAAep/K,KAAK0mJ,gBAClD,IAAK/vJ,EACH,MAAO,GAET,IAAIsoL,EAAcj/K,KAAKq/K,iBAAiB1oL,EAAOyoL,GAI/C,OAHIH,EAAYjlL,OAASgG,KAAK0mJ,iBAC5Bu4B,EAAc,IAAIA,KAAgBj/K,KAAKs/K,gBAAgB3oL,EAAOqJ,KAAK0mJ,eAAiBu4B,EAAYjlL,QAAQL,QAAOvB,IAAS6mL,EAAYvrK,SAAStb,OAExI6mL,EAGTI,iBAAiB1oL,EAAe4oL,EAAcv/K,KAAK0mJ,gBACjD,MAAM84B,EAAiB,IAAInzI,OAAO,IAAM11C,EAAO,MAC/C,OACGA,GACCqJ,KAAKjI,MACF4B,QAAOvB,GACNA,EACGk3C,UAAU,OACV7zC,QAAQ,mBAAoB,IAC5BH,MAAMkkL,KAEVvhK,MAAM,EAAGshK,IACd,GAIJD,gBAAgB3oL,EAAe4oL,EAAcv/K,KAAK0mJ,gBAChD,MAAM+4B,EAAgB,IAAIpzI,OAAO11C,EAAO,MACxC,OACGA,GACCqJ,KAAKjI,MACF4B,QAAOvB,GACNA,EACGk3C,UAAU,OACV7zC,QAAQ,mBAAoB,IAC5BH,MAAMmkL,KAEVxhK,MAAM,EAAGshK,IACd,GAIJv3B,eACEhoJ,KAAK+mJ,OAAQ,EAEb/mJ,KAAK++K,aAAa/kL,OAAS,GAAKgG,KAAK8I,OAGvCo/I,cACEloJ,KAAK+mJ,OAAQ,EAGb9xI,YAAW,IAAMjV,KAAKuI,SAAS,KAC/BvI,KAAK++K,aAAe,GAItBz3B,wBACEtnJ,KAAKgnJ,aAAc,EAGrBO,wBACEvnJ,KAAKgnJ,aAAc,EAEnBhnJ,KAAK+mJ,OAAS9xI,YAAW,IAAMjV,KAAKuI,SAAS,OAjU/CirF,GAAA,CADChgF,GAAS,CAAEqP,KAAM7qB,SACG8mL,GAAA7mL,UAAA,aAAA,GAGrBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,QAASO,SAAS,KACrBqsH,GAAA7mL,UAAA,cAAA,GAGfu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMrb,UACEs3K,GAAA7mL,UAAA,sBAAA,GA+FpBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UAQjBkkL,GAAA7mL,UAAA,QAAA,MA9GU6mL,GAAiBtrF,GAAA,CAD7B0+C,GAAc,uBACF4sC,ICDb,IAAaY,GAAb,cAAmCtkH,GAAnCj+D,kCAmBE6C,KAAI2kC,KAAG,GAmFC3kC,KAAakzJ,cAAG,EAjFxBv9F,UACE31D,KAAK2/K,UAAUhpL,MAAQqJ,KAAK2kC,MAAQ3kC,KAAK2/K,UAAUhpL,QAAS,IAAIsI,MAAOyoK,cAAcjsK,QAAQ,OAAQ,IAChGuE,KAAK2kC,MAAS3kC,KAAK4/K,sBAAsB1mL,UAC5C8G,KAAK4/K,sBAAsB1mL,SAAU,GAIzCnD,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uDA0CwC4F,KAAK2kC,eAAe3kC,KAAKk1F;4EACJl1F,KAAK2kC,eAAe3kC,KAAKk1F;;mEAElCl1F,KAAK2kC,eAAe3kC,KAAK6/K;;;MAMlFC,iBACN,OAAO,IAAI7gL,MAAO+yG,qBAAqBnjG,MAAM,KAAKuzB,UAAUrzB,KAAK,KAG3D8wK,YACN,MAAM1jL,EAAW6D,KAAK2kC,KACtB3kC,KAAK2kC,KAAO,GACRxoC,IAAa6D,KAAK2kC,MACpB3kC,KAAK+tJ,+BAID74D,UACN,GAAIl1F,KAAK2/K,UAAW,CAClB,MAAMxjL,EAAW6D,KAAK2kC,KACtB3kC,KAAK2kC,KAAO3kC,KAAK2/K,UAAUhpL,MACvBwF,IAAa6D,KAAK2kC,MACpB3kC,KAAK+tJ,gCAMHA,+BACN90I,aAAajZ,KAAKkzJ,eAClBlzJ,KAAKkzJ,cAAgBlrJ,OAAOiN,YAAW,IAAMjV,KAAKi0J,wBAAwB,KAGpEA,uBACNj0J,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAc,aAjHf2rB,GAAMnpI,OAAGwgC,EAAG;;;;;;IASnByc,GAAA,CADCppE,GAAM,gBACsBs1J,GAAAznL,UAAA,iBAAA,GAG7Bu7F,GAAA,CADCppE,GAAM,aACqBs1J,GAAAznL,UAAA,6BAAA,GAM5Bu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACR8kL,GAAAznL,UAAA,YAAA,GAnBCynL,GAAalsF,GAAA,CADzB0+C,GAAc,eACFwtC,UCJAK,GAKX5iL,YAAYmrG,EAAe/oG,EAAUswG,GAJrC7vG,KAAIsoG,KAAG,UAKLtoG,KAAKsoG,KAAOA,GAAQ,UACpBtoG,KAAKT,GAAKA,EACVS,KAAK6vG,MAAQA,GCAjB,IAAImwE,GAAuB9uH,EAAC;IACxBsK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECUAykH,GAAU,cAAcr4K,GAC1BzK,cACE4C,SAASitB,WACThtB,KAAKshE,QAAU,UACfthE,KAAKwhE,MAAO,EACZxhE,KAAKkgL,OAAQ,EAEfnqL,SACE,OAAO+gE,EAAC;;;gBAGI9tC,GAAE,CACZm3J,OAAO,EACP,iBAAmC,YAAjBngL,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,gBAAkC,WAAjBthE,KAAKshE,QACtB,cAAethE,KAAKwhE,KACpB,eAAgBxhE,KAAKkgL;;;;;QAS3BD,GAAQ1pI,OAASypI,GACjBrjH,GAAgB,CACd1hE,GAAE,CAAEw3D,SAAS,KACZwtH,GAAQhoL,UAAW,UAAW,GACjC0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3BwtH,GAAQhoL,UAAW,OAAQ,GAC9B0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3BwtH,GAAQhoL,UAAW,QAAS,GAC/BgoL,GAAUtjH,GAAgB,CACxB1zC,GAAE,aACDg3J,ICnDH,IAAIG,GAA2BlvH,EAAC;IAC5BsK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECyBA6kH,GAAa,cAAcz4K,GAC7BzK,cACE4C,SAASitB,WACThtB,KAAKwkE,SAAW,IAAI/B,GAAmBziE,MACvCA,KAAKsgL,KAAO,GACZtgL,KAAKugL,OAAS,GACdvgL,KAAKwgL,mBAAoB,EACzBxgL,KAAKi9D,UAAY,MACjBj9D,KAAKygL,WAAa,OAClBzgL,KAAK0gL,kBAAmB,EAE1BlgL,oBACET,MAAMS,oBACNR,KAAKouE,eAAiB,IAAIC,gBAAe,KACvCruE,KAAK2gL,6BACL3gL,KAAK4gL,sBACL5gL,KAAK6gL,0BAEP7gL,KAAK8gL,iBAAmB,IAAIpjI,kBAAkB7lB,IACxCA,EAAUiS,MAAMlhB,IAAO,CAAC,kBAAmB,iBAAiBlV,SAASkV,EAAEhpB,kBACzEqV,YAAW,IAAMjV,KAAK+gL,kBAEpBlpJ,EAAUiS,MAAMlhB,GAA0B,aAApBA,EAAEhpB,iBAC1BI,KAAKghL,uBAGThhL,KAAK41D,eAAermD,MAAK,KACvBvP,KAAKghL,oBACLhhL,KAAK8gL,iBAAiBnjI,QAAQ39C,KAAM,CAAEzD,YAAY,EAAMghD,WAAW,EAAMC,SAAS,IAClFx9C,KAAKouE,eAAezwB,QAAQ39C,KAAKihL,KACJ,IAAIC,sBAAqB,CAAC7hH,EAASnxB,KAC9D,IAAIzE,EACA41B,EAAQ,GAAG8hH,kBAAoB,IACjCnhL,KAAK+gL,gBACL/gL,KAAKohL,aAA2C,OAA7B33I,EAAKzpC,KAAKqhL,gBAA0B53I,EAAKzpC,KAAKsgL,KAAK,GAAI,CAAEgB,YAAY,IACxFpzI,EAASsgC,UAAUnP,EAAQ,GAAGtoE,YAGb4mD,QAAQ39C,KAAKuhL,aAGtCx9J,uBACE/jB,KAAK8gL,iBAAiBljI,aACtB59C,KAAKouE,eAAeI,UAAUxuE,KAAKihL,KAErC30H,KAAKwgB,GACH,MAAMn6B,EAAM3yC,KAAKsgL,KAAKpzK,MAAM8qD,GAAOA,EAAG8U,QAAUA,IAC5Cn6B,GACF3yC,KAAKohL,aAAazuI,EAAK,CAAE6uI,eAAgB,WAG7CC,WAAWnxG,GAAkB,GAE3B,MAAO,IADMtwE,KAAK5J,WAAWgV,cAAc,oBAC3BgyD,oBAAoBzjE,QAAQq+D,GACnCsY,EAA+C,WAA7BtY,EAAGxrC,QAAQ51B,cAA0D,WAA7BohE,EAAGxrC,QAAQ51B,gBAA+BohE,EAAG5+D,WAGlHsoL,eAEE,MAAO,IADM1hL,KAAKkK,KAAKkB,cAAc,QACrBgyD,oBAAoBzjE,QAAQq+D,GAAoC,iBAA7BA,EAAGxrC,QAAQ51B,gBAEhEyqL,eACE,OAAOrhL,KAAKsgL,KAAKpzK,MAAM8qD,GAAOA,EAAG2pH,SAEnChgH,YAAYrpE,GACV,MACMq6C,EADSr6C,EAAMvB,OACFmY,QAAQ,WACH,MAAPyjC,OAAc,EAASA,EAAIzjC,QAAQ,mBACnClP,MAGL,OAAR2yC,GACF3yC,KAAKohL,aAAazuI,EAAK,CAAE6uI,eAAgB,WAG7C5jH,cAActlE,GACZ,MACMq6C,EADSr6C,EAAMvB,OACFmY,QAAQ,UAE3B,IADwB,MAAPyjC,OAAc,EAASA,EAAIzjC,QAAQ,mBACnClP,OAGb,CAAC,QAAS,KAAK0T,SAASpb,EAAMyE,MACpB,OAAR41C,IACF3yC,KAAKohL,aAAazuI,EAAK,CAAE6uI,eAAgB,WACzClpL,EAAMgP,kBAGN,CAAC,YAAa,aAAc,UAAW,YAAa,OAAQ,OAAOoM,SAASpb,EAAMyE,MAAM,CAC1F,MAAM6kL,EAAWnnL,SAASgM,cAC1B,GAAqE,YAApD,MAAZm7K,OAAmB,EAASA,EAASp1J,QAAQ51B,eAA6B,CAC7E,IAAImgB,EAAQ/W,KAAKsgL,KAAKhiL,QAAQsjL,GACZ,SAAdtpL,EAAMyE,IACRga,EAAQ,EACe,QAAdze,EAAMyE,IACfga,EAAQ/W,KAAKsgL,KAAKtmL,OAAS,EAClB,CAAC,MAAO,UAAU0Z,SAAS1T,KAAKi9D,YAA4B,cAAd3kE,EAAMyE,KAAuB,CAAC,QAAS,OAAO2W,SAAS1T,KAAKi9D,YAA4B,YAAd3kE,EAAMyE,IACvIga,KACS,CAAC,MAAO,UAAUrD,SAAS1T,KAAKi9D,YAA4B,eAAd3kE,EAAMyE,KAAwB,CAAC,QAAS,OAAO2W,SAAS1T,KAAKi9D,YAA4B,cAAd3kE,EAAMyE,MACxIga,IAEEA,EAAQ,IACVA,EAAQ/W,KAAKsgL,KAAKtmL,OAAS,GAEzB+c,EAAQ/W,KAAKsgL,KAAKtmL,OAAS,IAC7B+c,EAAQ,GAEV/W,KAAKsgL,KAAKvpK,GAAOhQ,MAAM,CAAE4lE,eAAe,IAChB,SAApB3sE,KAAKygL,YACPzgL,KAAKohL,aAAaphL,KAAKsgL,KAAKvpK,GAAQ,CAAEyqK,eAAgB,WAEpD,CAAC,MAAO,UAAU9tK,SAAS1T,KAAKi9D,YAClC1jC,GAAev5B,KAAKsgL,KAAKvpK,GAAQ/W,KAAKihL,IAAK,cAE7C3oL,EAAMgP,mBAIZu6K,sBACE7hL,KAAKihL,IAAIpqJ,OAAO,CACd1c,KAAMna,KAAKihL,IAAIzmK,WAAaxa,KAAKihL,IAAI30K,YACrC69D,SAAU,WAGd23G,oBACE9hL,KAAKihL,IAAIpqJ,OAAO,CACd1c,KAAMna,KAAKihL,IAAIzmK,WAAaxa,KAAKihL,IAAI30K,YACrC69D,SAAU,WAGd02G,uBACM7gL,KAAK0gL,iBACP1gL,KAAKwgL,mBAAoB,EAEzBxgL,KAAKwgL,kBAAoB,CAAC,MAAO,UAAU9sK,SAAS1T,KAAKi9D,YAAcj9D,KAAKihL,IAAI1nG,YAAcv5E,KAAKihL,IAAI30K,YAG3G80K,aAAazuI,EAAKvkC,GAKhB,GAJAA,EAAUmuD,GAAe,CACvB+kH,YAAY,EACZE,eAAgB,QACfpzK,GACCukC,IAAQ3yC,KAAK+hL,YAAcpvI,EAAIv5C,SAAU,CAC3C,MAAM4oL,EAAchiL,KAAK+hL,UACzB/hL,KAAK+hL,UAAYpvI,EACjB3yC,KAAKsgL,KAAKniL,KAAK65D,GAAOA,EAAG2pH,OAAS3pH,IAAOh4D,KAAK+hL,YAC9C/hL,KAAKugL,OAAOpiL,KAAK65D,IACf,IAAIvuB,EACJ,OAAOuuB,EAAG2pH,OAAS3pH,EAAGthE,QAAmC,OAAxB+yC,EAAKzpC,KAAK+hL,gBAAqB,EAASt4I,EAAGqjC,UAE9E9sE,KAAKiiL,gBACD,CAAC,MAAO,UAAUvuK,SAAS1T,KAAKi9D,YAClC1jC,GAAev5B,KAAK+hL,UAAW/hL,KAAKihL,IAAK,aAAc7yK,EAAQozK,gBAE7DpzK,EAAQkzK,aACNU,GACFxkJ,GAAKx9B,KAAM,cAAe,CAAEkJ,OAAQ,CAAExS,KAAMsrL,EAAYl1G,SAE1DtvC,GAAKx9B,KAAM,cAAe,CAAEkJ,OAAQ,CAAExS,KAAMsJ,KAAK+hL,UAAUj1G,WAIjEi0G,gBACE/gL,KAAKsgL,KAAKhkL,SAASq2C,IACjB,MAAMm6B,EAAQ9sE,KAAKugL,OAAOrzK,MAAM8qD,GAAOA,EAAGthE,OAASi8C,EAAIm6B,QACnDA,IACFn6B,EAAIj2C,aAAa,gBAAiBowE,EAAMrwE,aAAa,OACrDqwE,EAAMpwE,aAAa,kBAAmBi2C,EAAIl2C,aAAa,WAI7DwlL,gBACcjiL,KAAKqhL,gBAEfrhL,KAAKkiL,UAAUplL,MAAM2W,QAAU,QAC/BzT,KAAK4gL,uBAEL5gL,KAAKkiL,UAAUplL,MAAM2W,QAAU,OAGnCmtK,sBACE,MAAMuB,EAAaniL,KAAKqhL,eACxB,IAAKc,EACH,OAEF,MAAM1iK,EAAQ0iK,EAAW71K,YACnBkT,EAAS2iK,EAAW5pK,aACpB6pK,EAAUpiL,KAAKyhL,YAAW,GAE1B9lL,EADgBymL,EAAQnkK,MAAM,EAAGmkK,EAAQ9jL,QAAQ6jL,IAC1BxzJ,QAAO,CAAC0zJ,EAAUrrL,KAAa,CAC1DmjB,KAAMkoK,EAASloK,KAAOnjB,EAAQsV,YAC9BuL,IAAKwqK,EAASxqK,IAAM7gB,EAAQuhB,gBAC1B,CAAE4B,KAAM,EAAGtC,IAAK,IACpB,OAAQ7X,KAAKi9D,WACX,IAAK,MACL,IAAK,SACHj9D,KAAKkiL,UAAUplL,MAAM2iB,MAAQ,GAAGA,MAChCzf,KAAKkiL,UAAUplL,MAAM0iB,OAAS,OAC9Bxf,KAAKkiL,UAAUplL,MAAMkrB,UAAY,cAAcrsB,EAAOwe,UACtD,MACF,IAAK,QACL,IAAK,MACHna,KAAKkiL,UAAUplL,MAAM2iB,MAAQ,OAC7Bzf,KAAKkiL,UAAUplL,MAAM0iB,OAAS,GAAGA,MACjCxf,KAAKkiL,UAAUplL,MAAMkrB,UAAY,cAAcrsB,EAAOkc,UAI5D8oK,6BACE,MAAM2B,EAAkBtiL,KAAKkiL,UAAUplL,MAAMq1F,WAC7CnyF,KAAKkiL,UAAUplL,MAAMq1F,WAAa,OAClC7mB,uBAAsB,KACpBtrE,KAAKkiL,UAAUplL,MAAMq1F,WAAamwF,KAGtCtB,oBACEhhL,KAAKsgL,KAAOtgL,KAAKyhL,aACjBzhL,KAAKugL,OAASvgL,KAAK0hL,eACnB1hL,KAAKiiL,gBAEPlsL,SACE,OAAO+gE,EAAC;;;gBAGI9tC,GAAE,CACZ,aAAa,EACb,iBAAqC,QAAnBhpB,KAAKi9D,UACvB,oBAAwC,WAAnBj9D,KAAKi9D,UAC1B,mBAAuC,UAAnBj9D,KAAKi9D,UACzB,iBAAqC,QAAnBj9D,KAAKi9D,UACvB,iCAAkCj9D,KAAKwgL;iBAE5BxgL,KAAK2hE;mBACH3hE,KAAK49D;;;YAGZ59D,KAAKwgL,kBAAoB1pH,EAAC;;;;;;;0BAOZ92D,KAAKwkE,SAAS9B,KAAK;2BAClB1iE,KAAK6hL;;gBAEd;;;;;6CAK2B7hL,KAAKghL;;;;YAItChhL,KAAKwgL,kBAAoB1pH,EAAC;;;;;;;0BAOZ92D,KAAKwkE,SAAS9B,KAAK;2BAClB1iE,KAAK8hL;;gBAEd;;;;8BAIY9hL,KAAKghL;;;QAMnCX,GAAW9pI,OAAS6pI,GACpBzjH,GAAgB,CACdziE,GAAE,eACDmmL,GAAWpoL,UAAW,WAAY,GACrC0kE,GAAgB,CACdziE,GAAE,qBACDmmL,GAAWpoL,UAAW,OAAQ,GACjC0kE,GAAgB,CACdziE,GAAE,oBACDmmL,GAAWpoL,UAAW,MAAO,GAChC0kE,GAAgB,CACdziE,GAAE,0BACDmmL,GAAWpoL,UAAW,YAAa,GACtC0kE,GAAgB,CACd16D,MACCo+K,GAAWpoL,UAAW,oBAAqB,GAC9C0kE,GAAgB,CACd1hE,MACColL,GAAWpoL,UAAW,YAAa,GACtC0kE,GAAgB,CACd1hE,MACColL,GAAWpoL,UAAW,aAAc,GACvC0kE,GAAgB,CACd1hE,GAAE,CAAEuB,UAAW,qBAAsBqmB,KAAMqvC,WAC1CmuH,GAAWpoL,UAAW,mBAAoB,GAC7C0kE,GAAgB,CACd1hE,MACColL,GAAWpoL,UAAW,OAAQ,GACjC0kE,GAAgB,CACd8D,GAAM,mBAAoB,CAAEG,sBAAsB,KACjDy/G,GAAWpoL,UAAW,uBAAwB,GACjD0kE,GAAgB,CACd8D,GAAM,YAAa,CAAEG,sBAAsB,KAC1Cy/G,GAAWpoL,UAAW,gBAAiB,GAC1CooL,GAAa1jH,GAAgB,CAC3B1zC,GAAE,iBACDo3J,ICjVH,IAAIkC,GAA2BrxH,EAAC;IAC5BsK;;;;;;;;;;;;ECRAj8D,GAAK,EACT,SAASijL,KACP,QAASjjL,GCgBX,IAAIkjL,GAAa,cAAc76K,GAC7BzK,cACE4C,SAASitB,WACThtB,KAAK0iL,OAASF,KACdxiL,KAAK2iL,YAAc,gBAAgB3iL,KAAK0iL,SACxC1iL,KAAKtJ,KAAO,GACZsJ,KAAK2hL,QAAS,EAEhBnhL,oBACET,MAAMS,oBACNR,KAAKT,GAAKS,KAAKT,GAAGvF,OAAS,EAAIgG,KAAKT,GAAKS,KAAK2iL,YAEhD5sL,SAEE,OADAiK,KAAKlD,MAAM2W,QAAUzT,KAAK2hL,OAAS,QAAU,OACtC7qH,EAAC;uEAC2D92D,KAAK2hL,OAAS,QAAU;;;QAM/Fc,GAAWlsI,OAASgsI,GACpB5lH,GAAgB,CACd1hE,GAAE,CAAEw3D,SAAS,KACZgwH,GAAWxqL,UAAW,OAAQ,GACjC0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3BgwH,GAAWxqL,UAAW,SAAU,GACnCwqL,GAAa9lH,GAAgB,CAC3B1zC,GAAE,iBACDw5J,ICtCH,IAAIG,GAAqB1xH,EAAC;IACtBsK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA6BIqD;;;;;;;;;;;;;;;;;;;;;;;;;;ECZJgkH,GAAQ,cAAcj7K,GACxBzK,cACE4C,SAASitB,WACThtB,KAAKwkE,SAAW,IAAI/B,GAAmBziE,MACvCA,KAAK0iL,OAASF,KACdxiL,KAAK2iL,YAAc,UAAU3iL,KAAK0iL,SAClC1iL,KAAK8sE,MAAQ,GACb9sE,KAAK2hL,QAAS,EACd3hL,KAAKmrJ,UAAW,EAChBnrJ,KAAK5G,UAAW,EAElB2N,MAAMqH,GACJpO,KAAK2yC,IAAI5rC,MAAMqH,GAEjB8E,OACElT,KAAK2yC,IAAIz/B,OAEX4vK,mBACEtlJ,GAAKx9B,KAAM,YAEbjK,SAEE,OADAiK,KAAKT,GAAKS,KAAKT,GAAGvF,OAAS,EAAIgG,KAAKT,GAAKS,KAAK2iL,YACvC7rH,EAAC;;;gBAGI9tC,GAAE,CACZ2pB,KAAK,EACL,cAAe3yC,KAAK2hL,OACpB,gBAAiB3hL,KAAKmrJ,SACtB,gBAAiBnrJ,KAAK5G;;wBAGJ4G,KAAK5G,SAAW,OAAS;wBACzB4G,KAAK2hL,OAAS,OAAS;mBAC5B3hL,KAAK5G,WAAa4G,KAAK2hL,OAAS,KAAO;;;UAGhD3hL,KAAKmrJ,SAAWr0F,EAAC;;;;;;wBAMH92D,KAAKwkE,SAAS9B,KAAK;;yBAElB1iE,KAAK8iL;;;cAGd;;QAKhBD,GAAMtsI,OAASqsI,GACfjmH,GAAgB,CACdziE,GAAE,SACD2oL,GAAM5qL,UAAW,MAAO,GAC3B0kE,GAAgB,CACd1hE,GAAE,CAAEw3D,SAAS,KACZowH,GAAM5qL,UAAW,QAAS,GAC7B0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3BowH,GAAM5qL,UAAW,SAAU,GAC9B0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,WACT2wH,GAAM5qL,UAAW,WAAY,GAChC0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3BowH,GAAM5qL,UAAW,WAAY,GAChC0kE,GAAgB,CACd1hE,MACC4nL,GAAM5qL,UAAW,OAAQ,GAC5B4qL,GAAQlmH,GAAgB,CACtB1zC,GAAE,WACD45J,ICpGI,MAAME,GAAe3oL,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCyCnB4oL,GAAb7lL,cACE6C,KAAIo6G,KAAG,SAYPp6G,KAAM24F,OAAG,GAYT34F,KAAMg/G,OAAG,IAeE,IAAAikE,GAAb,cAA0CtvF,GAAQm9C,GAARn9C,CAAmBv4B,KA+Z3Dj+D,cACE4C,QA/Z2BC,KAAoBkjL,sBAAG,EACxBljL,KAAYmjL,aAAG,EACdnjL,KAAWojL,aAAG,EAChBpjL,KAAagqK,cAAkB,GAC/BhqK,KAASs+K,UAA2B,GACnCt+K,KAAAqjL,kBAAuC,IAAIlvF,GAE/Dn0F,KAAAo6G,KAAYvZ,GAAuB2e,OAEnCx/G,KAAG0vG,IAAG,GAEN1vG,KAAM24F,OAAG,GAIT34F,KAAMg/G,OAAG,GAETh/G,KAAuBsjL,yBAAG,EAC1BtjL,KAAmBujL,qBAAG,EAOtBvjL,KAAW8/J,YAAiB,GAGpC9/J,KAAA2oK,QAAU,IAAIC,GA2TN5oK,KAAqBwjL,sBAAG,KAC9B,GAAI1yC,GAAU78C,WAAWu5C,gBAAgB9oD,UAAW,CAClD,MAAM0iC,EAAamD,GAAyBumB,GAAU78C,WAAWu5C,gBAAgBxyC,UAC9D,IAAfosB,GACF0pB,GAAUW,SAAStqB,GAA6BjxB,QAAQkxB,MA6EtDpnH,KAAYyjL,aAAG,IACfzjL,KAAkB0jL,mBAAG,GACrB1jL,KAAQ2jL,SAAG,GA+BnB3jL,KAAYi/E,aAAG,KACbj/E,KAAK4jL,yBACL5jL,KAAK6jL,iBA3CL7jL,KAAKgH,iB5SxewB,qB4SwemBhH,KAAK8jL,qBACrD9jL,KAAKgH,iB5SxewB,qB4SwemBhH,KAAK8jL,qBAlWvDjjL,yBACE,IACE,MAAMioJ,QAAkB/gF,MAAM/nE,KAAKqjL,kBAAkBjvF,0BAErD,aAD6B00D,EAAUroB,QACjBtiI,KAAI+T,IAAM,CAC9BuqH,cAAevqH,EAAE3S,GAAK,GACtB+oG,KAAMp2F,EAAEo2F,KACRgyE,KAAMpoK,EAAEooK,KACRC,aAAcroK,EAAEqoK,aAChBC,QAAStoK,EAAEsoK,QACXrR,qBAAsBj3J,EAAE6xK,cAE1B,MAAOnuJ,GACP90B,QAAQq+B,IAAI,sDACZr+B,QAAQq+B,IAAIvJ,GACJ,QACR51B,KAAKsjL,yBAA0B,EAGjC,OAAO9hL,QAAQC,QAAQ,IAGzBZ,qBACE,IACE,IAAKb,KAAKqjL,kBAAkBW,aAC1B,OAAOxiL,QAAQC,aAAQlB,GAEzB,MAAMuoJ,QAAkB/gF,MAAM/nE,KAAKqjL,kBAAkBW,cAErD,aADyBl7B,EAAUroB,QACjBtiI,KAAI0qB,IAAM,CAC1BsgJ,qBAAsBtgJ,EAAEsgJ,qBACxBt5D,MAAOhnF,EAAEgnF,MACTvH,KAAMz/E,EAAEy/E,SAEV,MAAO1yE,GACP90B,QAAQq+B,IAAI,kDACZr+B,QAAQq+B,IAAIvJ,GACJ,QACR51B,KAAKujL,qBAAsB,EAG7B,OAAO/hL,QAAQC,QAAQ,IAazBwiL,6BACEjkL,KAAKkkL,mBAAmB30K,MAAKy6J,GAAkBhqK,KAAKgqK,cAAgBA,IAGtEma,yBACEnkL,KAAKokL,eAAe70K,MAAK+uK,GAAct+K,KAAKs+K,UAAYA,IAGlD+F,0BAA0Bx0E,EAAejhB,EAAgBuiB,GAC/D,MAA4B,QAAxBtB,EAAM3vG,cACD,CACLipK,qBAAsB,KACtBC,cAAe,WACfgV,cAAe,SAASxvF,KAAUuiB,KAI/B,CACLg4D,qBAAsB,KACtBC,cAAe,YAIXkb,mCAAmCC,GACzC,MAAmC,aAA5BA,EAAUnb,cAA+B,mBAAqB,mBAG/Dob,qBACN,MAAM1xC,EAAS,IAAI00B,GAInB,OAHA10B,EAAO+0B,WAAa7nK,KAAKo6G,KACzB04B,EAAOq1B,YAAY,GAAGz4D,IAAM1vG,KAAK0vG,IACjCojC,EAAOk1B,WAAahoK,KAAKykL,uBAAuBzkL,KAAK0vG,IAAK1vG,KAAK24F,QACxDm6C,EAGD2xC,uBAAuB/0E,EAAa/W,GAC1C,OAAI+W,EACK,CACLA,IAAKA,EACLG,MAAOQ,GAASX,GAChB9gB,OAAQ4hB,GAAUd,GAClByB,IAAKL,GAAOpB,GACZ/W,OAAQA,EACRuwE,mBAAoB,iBAGjB,IAAIjB,GAGbyc,YAEE,IAAK1kL,KAAK0vG,IACR,OAAO,IAAI83D,GAGb,MAAM10B,EAAS9yI,KAAKwkL,qBACdG,EAAmB7xC,EAAOk1B,WAAWp5E,OAAOnzF,QAAQ,MAAO,IAC7DuE,KAAK4kL,6BACP9xC,EAAOsjC,kBAAoBp2K,KAAK6kL,mBAAoBC,uBACpDhyC,EAAOy1B,cAAgBvoK,KAAK6kL,mBAAoBpO,iBAAiBz2K,KAAK0vG,KACtEojC,EAAOu1B,wBAAwBp7E,MAAQ,IAC9BjtF,KAAK+kL,sBACdjyC,EAAOu1B,wBAAwBrpD,OAASh/G,KAAKg/G,OAC7C8zB,EAAOu1B,wBAAwBp7E,MAAQjtF,KAAKglL,sBAAsB/3F,MAClE6lD,EAAO+sB,OAAS7/J,KAAKglL,sBAAsBnlB,OAC3C/sB,EAAOu1B,wBAAwB7d,kBAAoBxqJ,KAAKglL,sBAAsBx6B,oBAE9E1X,EAAOu1B,wBAAwBp7E,MAAQ,GACvC6lD,EAAOq1B,YAAY,GAAGjxE,aAAel3F,KAAKilL,UAAW3wB,wBACrDxhB,EAAOy1B,cAAgBvoK,KAAKilL,UAAWxO,oBAEzC3jC,EAAO21B,cAAgBzoK,KAAKklL,oBAAoBj4F,MAChD6lD,EAAOgtB,YAAc9/J,KAAKklL,oBAAoBplB,YAC9ChtB,EAAO61B,QAAU3oK,KAAKmlL,cAAcxJ,uBACpC7oC,EAAOnuG,KAAO3kC,KAAKolL,WAAWzgJ,WAAQpkC,EACtCuyI,EAAO+1B,gBAAkB7oK,KAAKqlL,sBAAsBxc,gBACpD/1B,EAAOi2B,oBAAsB/oK,KAAKslL,cAAcvc,oBAChDj2B,EAAOpW,SAAW,IAAIwrC,GACtBp1B,EAAOpW,SAASzvC,MAAQ,qBACyB,aAA7C6lD,EAAOi2B,oBAAoBK,eAAgCt2B,EAAOi2B,oBAAoBqV,gBACxFtrC,EAAOpW,SAASzvC,OAAS,KAAK6lD,EAAOi2B,oBAAoBqV,iBAG3D,MAAMmH,EAAmBn2E,GAAgBkB,GAAQwiC,EAAOk1B,WAAWt4D,KAAKH,QAKxE,OAJAujC,EAAOpW,SAASja,YAAc,IAAI8iE,EAAiB32E,2CAA2Cz/F,UAAU2jI,EAAOk1B,WAAWn4D,SAAS80E,KAAoB7xC,EAAOk1B,WAAW72D,OACzK2hC,EAAO41B,MAAQ1oK,KAAKskL,mCAAmCxxC,EAAOi2B,qBAC9Dj2B,EAAO93C,SAAWh7F,KAAKmmF,cACvB2sD,EAAO0yC,0BAA4BxlL,KAAKklL,oBAAoB16B,kBACrD1X,EAGD2yC,oBAAoBx4F,GAC1B,IAAIk2C,EAAY,GAQhB,MANc,KAAVl2C,IAGFk2C,EADAl2C,GADAA,EAAQA,EAAMxxF,QAAQ,4BAA6B,KACrCA,QAAQ,4BAA6B,KAI9C0nI,EAGDh9C,cACN,MAAM6U,EpL3FsB,EAACA,EAAsB,MACrD,MAAMtvF,EAAoBsvF,EAASrhG,QAAOu3D,GAAKq2D,GAAkBr2D,KAAO44D,GAAoB54D,KAG5F,OAFAxlD,EAAOgJ,QAAQw1G,GAAsClvB,IACrDtvF,EAAOgJ,QAAQsmF,EAASrhG,OAAOgwH,KACxBj+G,GoLuFYg6K,CAAiB,IAAI50C,GAAU78C,WAAWu5C,gBAAgBxyC,WAQ3E,OANAA,EAASrhG,OAAO4tH,IAAmBjrH,SAAQ40D,IACzC,MAAM/jB,EAAK+jB,EACXk5D,GAA0Bj9E,EAAGs6E,qBAC7Bt6E,EAAG66E,sBAAwBoC,GAA0Bj9E,EAAG66E,yBAGnDhtB,EAGT2qF,mBAC4B,OAAtB3lL,KAAK4lL,cACP5lL,KAAK4lL,aAAat5H,OAItBotH,kBAAkBmM,aAChB7lL,KAAK8lL,oBAAoBhzC,OAAS,GAClC9yI,KAAKo6G,KAAOyrE,EAAOzrE,KACnBp6G,KAAK0lG,aAAemgF,EAAOngF,aAE3B1lG,KAAK+lL,qBAAqBF,GAE1B7lL,KAAKg/G,OAAS6mE,EAAO7mE,OACjBh/G,KAAK+kL,sBAAwBc,EAAO/yC,SACtC9yI,KAAKg/G,OAAS6mE,EAAO/yC,OAAOu1B,wBAAwBrpD,QAAU,kCAG3Dh/G,KAAK+kL,sBAAyB/kL,KAAK4kL,6BACtC5kL,KAAKilL,UAAWvL,kBAAkB15K,KAAKo6G,KAAMp6G,KAAK0vG,IAAKm2E,EAAOngF,eAAgBmgF,EAAO/yC,QAGnF+yC,EAAO/yC,OACT9yI,KAAKgmL,UAAUH,EAAO/yC,QAEtB9yI,KAAKimL,aAAaJ,GAGpB7lL,KAAKmwI,gBAEDnwI,KAAK+kL,uBAAyB/kL,KAAKglL,sBAAsB/3F,OAC3DjtF,KAAKkmL,6BAEPlmL,KAAK2oF,WAAyB,QAAdl/C,EAAAo8I,EAAO/gG,eAAO,IAAAr7C,EAAAA,EAAIqnG,GAAU78C,WAAWu5C,gBAAgB1oD,SACvE7vE,WAAWjV,KAAKi/E,aAAc,IAEF,QAAvBrC,EAAa,QAAb5X,EAAA6gH,EAAO/yC,cAAM,IAAA9tE,OAAA,EAAAA,EAAEg2B,gBAAQ,IAAApe,OAAA,EAAAA,EAAE5iF,SAC5BgG,KAAKwjL,wBAGPxjL,KAAKmmL,cAAc75H,KAAK,aAEpBtsD,KAAKo6G,KAAKthF,WAAW,YAAc94B,KAAK+kL,qBAC1C9vK,YAAW,WACQ,QAAjBw0B,EAAAzpC,KAAKomL,oBAAY,IAAA38I,GAAAA,EAAE6iB,KAAK,cAG1Br3C,YAAW,WACQ,QAAjBw0B,EAAAzpC,KAAKomL,oBAAY,IAAA38I,GAAAA,EAAE6iB,KAAK,YAI5BtsD,KAAKqmL,aAGCN,qBAAqBF,GAC3B7lL,KAAK0vG,IAAM,GACX1vG,KAAK24F,OAAS,GAEVktF,EAAO7d,aAEThoK,KAAK0vG,IAAMwB,GAAa20E,EAAO7d,WAAWn4D,MAAOg2E,EAAO7d,WAAWp5E,OAAQi3F,EAAO7d,WAAW72D,KAC7FnxG,KAAK24F,OAASktF,EAAO7d,WAAWrvE,QAI9BktF,EAAO/yC,SACJ9yI,KAAK0vG,MACR1vG,KAAK0vG,IAAMm2E,EAAO/yC,OAAOk1B,WAAWt4D,KAEjC1vG,KAAK24F,SACR34F,KAAK24F,OAASktF,EAAO/yC,OAAOk1B,WAAWrvE,SAKvC34F,KAAK0lG,eACF1lG,KAAK0vG,MACR1vG,KAAK0vG,IAAMksB,GAAO57H,KAAK0lG,eAEpB1lG,KAAK24F,SACR34F,KAAK24F,OAAS34F,KAAKsmL,0BAA0BtmL,KAAK0lG,gBAKxD4gF,0BAA0B5gF,eACxB,OAAOk3B,GAAkE,QAArDpnG,UAAAonD,EAAkC,UAAhB,QAAlBnzC,EAAAi8D,EAAa/uG,aAAK,IAAA8yC,OAAA,EAAAA,EAAEi8D,oBAAc,IAAA1gC,OAAA,EAAAA,EAAAiyB,4BAAO0lC,oBAAY,IAAAnnG,OAAA,EAAAA,EAAEmjE,OAAOn+F,SAGpFw5F,aAAa19F,mBACX,MAAMiwL,EAAqD,QAApC3pG,EAA4B,QAA5B5X,EAAsB,UAAtB1uE,MAAAA,OAAK,EAALA,EAAOk3I,uBAAe,IAAA/jG,OAAA,EAAAA,EAAE+wE,UAAI,IAAAx1C,OAAA,EAAAA,EAAAxtC,cAAQ,IAAAolD,OAAA,EAAAA,EAAA9yC,MAAMimD,GAAmBA,EAAG0qB,YAAcR,GAAUi0B,iBACzGs4C,EAAwD,QAApCxwE,EAA4B,QAA5BvgF,EAAsB,UAAtBn/B,MAAAA,OAAK,EAALA,EAAOk3I,uBAAe,IAAAh4G,OAAA,EAAAA,EAAEglF,UAAI,IAAA/kF,OAAA,EAAAA,EAAA+B,cAAQ,IAAAw+E,OAAA,EAAAA,EAAAlsE,MAAMimD,GAAmBA,EAAG0qB,YAAcR,GAAUm2B,oBAClHm2C,GAAkBvmL,KAAKymL,kCACnBF,GAAkBC,IACpBxmL,KAAK0mL,qBAAqB51C,GAAU78C,WAAWu5C,gBAAgB9oD,WAI3DgiG,qBAAqBhiG,GAC3B1kF,KAAKmJ,cACH,IAAIH,YAAY,YAAa,CAC3BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACNw7E,UAAAA,MAeDiE,WAAW7D,EAAU,IAAIi7F,IAC9BjvC,GAAUW,SAAS1J,GAAuB7xC,QAAQpR,IAG5CkhG,UAAUlzC,GAChBhC,GAAUW,S5HvbL,CACL5uH,KAAM,mB4HwbD7iB,KAAK+kL,sBAAyB/kL,KAAK4kL,6BACtC5kL,KAAKilL,UAAWpL,+BAA+B/mC,EAAOq1B,YAAY,GAAGjxE,aAAc47C,EAAO93C,UAG5Fh7F,KAAKmlL,cAAcxc,QAAU71B,EAAO61B,QACpC3oK,KAAKqlL,sBAAsBxc,gBAAkB/1B,EAAO+1B,gBACpD7oK,KAAKklL,oBAAoBvgB,qBAAqB7xB,EAAO0yC,2BACrDxlL,KAAKslL,cAAcvc,oBAAsBj2B,EAAOi2B,oBAChD/oK,KAAKslL,cAActd,WAAal1B,EAAOk1B,WACvChoK,KAAK8/J,YAAchtB,EAAOgtB,aAAe,GACzC9/J,KAAKklL,oBAAoB/jB,WAAWruB,EAAO21B,cAAe31B,EAAOgtB,aAE7D9/J,KAAK+kL,sBACP/kL,KAAKglL,sBAAsB7jB,YAAWruB,MAAAA,OAAA,EAAAA,EAAQu1B,wBAAwBp7E,QAAS,IAC/EjtF,KAAKglL,sBAAsBnlB,OAAS/sB,EAAO+sB,QAAU,GACrD7/J,KAAKglL,sBAAsBrgB,qBAAqB7xB,EAAOu1B,wBAAwB7d,mBAC/E1Z,GAAUW,SAAS32C,GAA8B5E,QAAQ48C,EAAOq1B,YAAY,GAAGjxE,aAAc47C,EAAO93C,YAC3Fh7F,KAAK4kL,6BACd5kL,KAAK6kL,mBAAoB8B,qBAAqB7zC,EAAOsjC,mBAAqB,IAAI/L,IAEhFrqK,KAAKolL,WAAWzgJ,KAAOmuG,EAAOnuG,KAGxBshJ,aAAaJ,GACnB,MAAM/yC,EAAS,IAAI00B,GACnB10B,EAAO+0B,WAAage,EAAOzrE,KAC3B04B,EAAOk1B,WAAahoK,KAAKykL,uBAAuBzkL,KAAK0vG,IAAKm2E,EAAOltF,QACjEm6C,EAAO61B,QAAU3oK,KAAK4mL,oBAAoBf,GAC1C/yC,EAAO+1B,gBAAkB7oK,KAAK6mL,4BAA4BhB,GAC1D7lL,KAAK8lL,oBAAoBhzC,OAAS,GAClC9yI,KAAKgmL,UAAUlzC,GACfhC,GAAUW,SAASvF,GAAoBh2C,WAGjC0wF,oBAAoBf,GAC1B,MAAMld,EAAU,IAAIC,GACdke,EAAgBjB,EAAOiB,cACvBC,EAAmB/mL,KAAKgqK,cAAc98J,MAAK85K,GAAOA,EAAIvqD,iBAAkBqqD,MAAAA,OAAA,EAAAA,EAAerqD,gBAAiBuqD,EAAI7d,wBAAyB2d,MAAAA,OAAA,EAAAA,EAAe3d,wBAK1J,OAHI4d,IACFpe,EAAQqB,cAAgB,CAAC+c,IAEpBpe,EAGDke,4BAA4BhB,GAClC,MAAMhd,EAAkB,IAAIC,GAM5B,OALI+c,EAAOoB,wBACTpe,EAAgBoB,eAAiB4b,EAAOoB,sBAAsBhd,eAC9DpB,EAAgBqB,eAAiB2b,EAAOoB,sBAAsB/c,eAC9DrB,EAAgBuB,aAAeyb,EAAOoB,sBAAsB7c,cAEvDvB,EASTt0G,mBACE,OAAOv0D,KAOD4jL,uBAAuBsD,GAAc,GACrB,YAAlBlnL,KAAK2jL,WACP3jL,KAAKmnL,aAAa38K,SAAWxK,KAAK0jL,oBAGhC17K,OAAOwE,YAAcxM,KAAKyjL,eAAmC,WAAlBzjL,KAAK2jL,UAAyBuD,IAC3ElnL,KAAK2jL,SAAW,SAChB3jL,KAAKmnL,aAAa38K,SAAW,IAC7BxK,KAAKmnL,aAAazqL,aAAa,WAAY,SAClCsL,OAAOwE,WAAaxM,KAAKyjL,eAAmC,YAAlBzjL,KAAK2jL,UAA0BuD,KAClFlnL,KAAK2jL,SAAW,UAChB3jL,KAAKmnL,aAAa38K,SAAWxK,KAAK0jL,mBAClC1jL,KAAKmnL,aAAax/K,gBAAgB,aAOtCnH,oBACET,MAAMS,oBACNwH,OAAOhB,iBAAiB,SAAUhH,KAAKi/E,cAGzCl7D,uBACE/b,OAAO0H,oBAAoB,SAAU1P,KAAKi/E,cAC1Cl/E,MAAMgkB,uBAQE2xC,yBAERzgD,YAAW,IAAMjV,KAAKikL,8BAA8B,GACpDhvK,YAAW,IAAMjV,KAAKmkL,0BAA0B,GAE5B,QAApB16I,EAAAzpC,KAAKmmL,qBAAe,IAAA18I,GAAAA,EAAAziC,iBAAiB,eAAgB1O,UACnD,MAAM8uL,EAAU9uL,EAAM4Q,OAAOxS,KAC7B,GAAgB,WAAZ0wL,EAAsB,CACxB,MAAMjH,EAAS7nL,EAAMvB,OAAmBqU,cAAc,YAClD+0K,IACFA,EAAMD,OAAQ,OAEK,YAAZkH,IACqB,IAA9BpnL,KAAKgqK,cAAchwK,QAAgBgG,KAAKikL,6BACb,KAAX,QAAhBx6I,EAAAzpC,KAAKs+K,iBAAW,IAAA70I,OAAA,EAAAA,EAAAzvC,SAAgBgG,KAAKmkL,6BAIzCnkL,KAAKmnL,aAAangL,iBAAiB,iBAAiB,KAClDhH,KAAK6jL,mBAGP,MAAMwD,EAAgC,QAAjBriH,EAAAhlE,KAAKomL,oBAAY,IAAAphH,OAAA,EAAAA,EAAE55D,cAAc,iBACtD,GAAIi8K,EAAc,CACcv5E,aAAaC,QAAQ,2BAEjDs5E,EAAanH,OAAQ,EACrBmH,EAAa3qL,aAAa,UAAW,YAItB,QAAnBkgF,EAAA58E,KAAKomL,oBAAc,IAAAxpG,GAAAA,EAAA51E,iBAAiB,eAAgB1O,IAElD,GAAgB,YADAA,EAAM4Q,OAAOxS,KACF,CACzB,MAAMypL,EAAS7nL,EAAMvB,OAAmBqU,cAAc,YAClD+0K,IACFA,EAAMD,OAAQ,EACdC,EAAMzjL,aAAa,UAAW,YAEhCoxG,aAAa6c,QAAQ,wBAAyB,YAKpDh1D,WAUQ2xH,6BAA6BzhG,GACnC,GAA+B,OAA3BA,EAASozE,cAEX,OAAO,EACF,CACL,MAAMsuB,EAAYj9K,iBAAiBtK,MAAM8hF,iBAAiB,gBAAgBrmF,QAAQ,KAAM,IACxF,OAAIoqF,EAASttE,cAAgBgvK,EACpB1hG,EAASttE,aAETvY,KAAKsnL,6BAA6BzhG,EAASozE,gBAKhD4qB,cAAc2D,WACpB,MAAMC,EAAqBD,MAAAA,EAAAA,EAAUxnL,KAAKsnL,6BAA6BtnL,MACjE0nL,EAAiE,QAAlD1iH,UAAAv7B,EAAAhvC,SAAS2Q,cAAc,sCAAiBhV,kBAAU,IAAA4uE,OAAA,EAAAA,EAAE55D,cAAc,6BACjFu8K,EAAqBD,MAAAA,OAAA,EAAAA,EAAcnvK,aAEzC,IAAKovK,EAAoB,OAAO,EAEhC,MAAMC,EAAiBH,EAAqBE,EAAqB,GACjE,GAAIC,GAAkB,EAAG,OAAO,EAEhC,MAAMC,EAAct/H,GAAqB9tD,SAAS2Q,cAAcm9C,GAE1Du/H,EAAwBD,EAAW,sCACnCE,EAAiBF,EAAW,kCAC5BG,EAAyBH,EAAW,gDACpCI,EAAkBJ,EAAW,4BAE7BK,EAAmB,CACvBzf,cAAe,CACbh1J,QAASq0K,EAAsBhrL,MAAM2W,QACrC+Q,QAASsjK,EAAsBhrL,MAAM0nB,QACrC2jK,cAAeL,EAAsBhrL,MAAMqrL,eAE7Cr1C,OAAQ,CACNr/H,QAASs0K,EAAejrL,MAAM2W,QAC9B+Q,QAASujK,EAAejrL,MAAM0nB,QAC9B2jK,cAAeJ,EAAejrL,MAAMqrL,gBAIlCC,EAAoB,CAACC,EAAuBC,EAAcC,GAAc,KACxEA,GACFF,EAASvrL,MAAM0nB,QAAU,IACzB6jK,EAASvrL,MAAMqrL,cAAgB,OAC/BE,EAASvrL,MAAM2W,QAAU,UAEzB40K,EAASvrL,MAAM0nB,QAAU8jK,EAAQ9jK,QACjC6jK,EAASvrL,MAAMqrL,cAAgBG,EAAQH,cACvCE,EAASvrL,MAAM2W,QAAU60K,EAAQ70K,UAIU,SAA3Cy0K,EAAiBzf,cAAch1J,SACjC20K,EAAkBN,EAAuBI,EAAiBzf,eAAe,GAEnC,SAApCyf,EAAiBp1C,OAAOr/H,SAC1B20K,EAAkBL,EAAgBG,EAAiBp1C,QAAQ,GAG7D,MAAM01C,GAA6BR,MAAAA,OAAA,EAAAA,EAAwBzvK,cAAe,GACpEkwK,GAAsBR,MAAAA,OAAA,EAAAA,EAAiB1vK,cAAe,GAU5D,OARA6vK,EAAkBN,EAAuBI,EAAiBzf,eAC1D2f,EAAkBL,EAAgBG,EAAiBp1C,QAEnD9yI,KAAKlD,MAAMu0B,YAAY,wBAA4Bu2J,EAAiBY,EAApB,MAChDxoL,KAAKlD,MAAMu0B,YAAY,iBAAqBu2J,EAAiBa,EAApB,MACzCzoL,KAAKlD,MAAMu0B,YAAY,WAAY,GAAGu2J,OACtC5nL,KAAKlD,MAAMu0B,YAAY,aAAc,WAE9B,EAGDsrH,WACN,IAAI4rB,EAAgB,KAChBvoK,KAAK4kL,6BACPrc,EAAgBvoK,KAAK6kL,mBAAoBpO,iBAAiBz2K,KAAK0vG,KAC/D1vG,KAAK8lL,oBAAoBhzC,OAASy1B,EAClCvoK,KAAK0oL,yBAAyBC,uBAAuBpgB,IAC5CvoK,KAAK+kL,uBACT/kL,KAAKklL,oBAAoBj4F,MAG5B6jD,GAAUW,SAAS16C,GAAc,gCAFjC/2F,KAAK4oL,gBAIF5oL,KAAKglL,sBAAsB/3F,MAG9B6jD,GAAUW,SAAS16C,GAAc,qCAFjC/2F,KAAKkmL,8BAMJlmL,KAAK+kL,sBACR/kL,KAAK6oL,yBAAyBtgB,GAIlCsgB,yBAAyBtgB,SACD,OAAlBA,IACFA,EAAgBvoK,KAAKilL,UAAWxO,mBAChCz2K,KAAK8lL,oBAAoBhzC,OAASy1B,EAClCvoK,KAAK0oL,yBAAyBC,uBAAuBpgB,IAGjC,OAAlBA,IAAgD,QAAtB9+H,EAAA8+H,EAAch2B,gBAAQ,IAAA9oG,OAAA,EAAAA,EAAEzvC,QAAS,IAAMgG,KAAKklL,oBAAoBj4F,MAC5FjtF,KAAK4oL,gBAEL93C,GAAUW,SAAS16C,GAAc,gCAIrC6xF,gBAOE93C,GAAUW,SAAS/6C,GANJ,CACbn3F,GAAI,8BACJ62F,KAAM,QACNQ,SAAU,uCACVC,YAAY,KAKhBiyF,mBACE,MAAO,GAGT34C,gBACEW,GAAUW,S5HxtBL,CACL5uH,KAAM,mB4H0tBRqjK,6BAOEp1C,GAAUW,SAAS/6C,GANJ,CACbn3F,GAAI,mCACJ62F,KAAM,QACNQ,SAAU,2CACVC,YAAY,KAKhB4vF,iCpL5d4C,MAC5C,GAA4E,SAAxE34E,aAAaC,QAAQ,+CAA2D,CAClF,MAAMnhC,EAASnyE,SAASC,cAAc,aACtCkyE,EAAO33B,MAAQ,oBACf,MAAM8zI,EAAa,kFACnBn8G,EAAOjyE,UAAY,iUAKjB4D,OAAOwqL,GACTtuL,SAASyP,KAAKo4B,YAAYsqC,GAC1BA,EAAOtgB,OAEPsgB,EAAO5lE,iBAAiB,oBAAqB1O,IACf,YAAxBA,EAAM4Q,OAAOwV,QACfpmB,EAAMgP,oBAIV,MAAM0hL,EAAyBp8G,EAAOxhE,cAAc,oCACpD49K,MAAAA,GAAAA,EAAwBhiL,iBAAiB,aAAa,KACpD0jH,QAGF,MAAMu+D,EAAcr8G,EAAOxhE,cAAc,+BACzC69K,MAAAA,GAAAA,EAAajiL,iBAAiB,SAAS,KACrC4lE,EAAOzxB,OACPyxB,EAAOj4C,coLicT8xJ,GAGM1B,qBACN,OAAO/kL,KAAKo6G,MAAsB,qBAAdp6G,KAAKo6G,KAGnBwqE,4BACN,MAAqB,4BAAd5kL,KAAKo6G,KAGNisE,aACNrmL,KAAKkpL,YAAc,IAAIjqL,KAGzBlJ,SACE,OAAOqE,EAAI;QACPmtK,MAA4B/4E,MAAmBu0F;;;;;;;;;;;;;;;;;;;;;qBAqBlC/iL,KAAKo6G,KAAKthF,WAAW,YAAc94B,KAAK+kL,qBAAuB,QAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6DAmJjC/kL,KAAKmjL,aAAe,EAAI/oL,EAAI,0CAA0C4F,KAAKmjL,2BAA6B;;;;kCAIlInjL,KAAK+kL,sBAAyB/kL,KAAK4kL,4BAAwC,OAAV;;kCAElE5kL,KAAKqjL;4BACXrjL,KAAK28I;;;kCAGC38I,KAAK+kL,qBAAuB,QAAU;;;;4BAI5C/kL,KAAK28I;;0DAEyB38I,KAAK4kL,4BAA8B,QAAU,qBAAqB5kL,KAAK28I;;;;kCAI/F38I,KAAKqjL;;;;4BAIXrjL,KAAK28I;;;;;4CAKW38I,KAAKs+K;;;;gDAIDt+K,KAAKgqK;;;;;;;;;;;cAWvChqK,KAAKmpL,aAAa,WAChB/uL,EAAI;;;;;kBAMJ;cACF4F,KAAKmpL,aAAa,SAChB/uL,EAAI;;;;;;;kBAQJ;cACF4F,KAAKmpL,aAAa,SAChB/uL,EAAI;;;;;kBAMJ;cACF4F,KAAKmpL,aAAa,WAChB/uL,EAAI;;;;;;;kBAQJ;;;;;;;kBAOE4F,KAAKopL;;;;;;;;;;;;;MAgBrBD,aAAax2I,GACX,OAAa,YAARA,GAA6B,UAARA,GAAkC,4BAAd3yC,KAAKo6G,UAEhC,UAARznE,IAAoB3yC,KAAK+kL,sBAAsC,WAAd/kL,KAAKo6G,OAG1Dp6G,KAAKo6G,KAAKthF,WAAW,YAAc94B,KAAK+kL,sBAGjDjB,sBACE9jL,KAAK8/J,YAAc9/J,KAAKklL,oBAAoBplB,YAC5C9/J,KAAKqpL,WAAW,SAGlBD,oBACE,OAAQppL,KAAK8/J,YAAY9lK,OAErBI,EAAI;;cAEE4F,KAAKklL,oBAAoBplB,YAAY3hK,KACpCwxK,GACCv1K,EAAI;;2DAEuCu1K,EAAGpwK,2CAA2CowK,EAAGpwK,eAAe,IAAMS,KAAKspL,qBAAqB3Z,EAAGpwK;2CACnHowK,EAAGpwK,2BAA2BwzI,GAAW48B,EAAG1iF;;;;;;;;wCAQ/C0iF,EAAGpwK;iCACVS,KAAK6mK;;;;;;;;;;wCAUE8I,EAAGpwK;iCACVS,KAAK+mK;;;;;;;;UA5B9B3sK,EAAI,6EAwCVivL,WAAWjC,SACT,MAAMz0I,EAAM3yC,KAAKoL,cAAc,iBAAiBg8K,OAChD,GAAKz0I,IAEY,QAAjBlJ,EAAAzpC,KAAKomL,oBAAY,IAAA38I,GAAAA,EAAE6iB,KAAK,SAER,UAAZ86H,GAAqB,CACvB,MAAMmC,EAAe52I,MAAAA,OAAG,EAAHA,EAAKvnC,cAAc,YACxC,IAAKm+K,EAAc,OAEd52I,EAAIyC,aAAa,WACJ,UAAZgyI,IACFmC,EAAa7sL,aAAa,QAAS,IACnCuY,YAAW,KACTs0K,EAAa5hL,gBAAgB,WAC5B,OAMX6hL,oBAAoB33F,GAElB,MAAM43F,EAAoBzpL,KAAKoL,cAAc,0CAA0CymF,OACjFl/C,EAAM3yC,KAAK0pL,kBAAkBD,GACnCzpL,KAAKqpL,WAAW12I,EAAIl2C,aAAa,SACjCgtL,GAAqBx0K,YAAW,IAAMw0K,EAAkBlwJ,eAAe,CAAE4wC,SAAU,SAAUr2C,MAAO,YAAa,KAC7F9zB,KAAKmK,iBAAiB,0BAC9B7N,SAAQqzK,IACdA,EAAGpzK,WAAW,kBAAkB5F,QAAUk7F,EAC5C89E,MAAAA,GAAAA,EAAIhzK,UAAUE,IAAI,SAElB8yK,EAAGhzK,UAAUg4B,OAAO,YAK1B20J,qBAAqBz3F,GACnB,MAAMvQ,EAAW7mF,SAAS+E,eAAe,YAAYqyF,KACrD,GAAIvQ,EACF,GAAIA,EAASpoF,QAAS,CACDuB,SAAS0P,iBAAiB,mBAClC7N,SAAQqtL,IACbA,EAAGpqL,KAAO+hF,EAAS/hF,KACrBoqL,EAAGzwL,SAAU,MAGjB8G,KAAKwpL,oBAAoB33F,QAEzB7xF,KAAK4pL,wBAAwB/3F,GAKnC+3F,wBAAwB/3F,GACtB,MAAM43F,EAAoBzpL,KAAKoL,cAAc,0CAA0CymF,OACvF43F,MAAAA,GAAAA,EAAmB9sL,UAAUg4B,OAAO,SAGtCkyI,iBAAiBvuK,GACf,MAAMu5F,EAAev5F,EAAMvB,OAAO0F,aAAa,gBACzCgtL,EAAoBzpL,KAAKoL,cAAc,0CAA0CymF,OACjF0wE,EAAkBviK,KAAK6pL,8BAA8BJ,GAC3DlnB,MAAAA,GAAAA,EAAiBx7J,QACjBw7J,EAAgBsE,iBAAiBh1E,GAGnCk1E,kBAAkBzuK,GAChB,MAAMu5F,EAAev5F,EAAMvB,OAAO0F,aAAa,gBACzCgtL,EAAoBzpL,KAAKoL,cAAc,0CAA0CymF,OACjF0wE,EAAkBviK,KAAK6pL,8BAA8BJ,GAC3DlnB,MAAAA,GAAAA,EAAiBx7J,QACjBw7J,EAAgBwE,kBAAkBl1E,GAGpCg4F,8BAA8BhxL,GAC5B,OAAOA,EAAQqW,QAAQ,qBAGzBw6K,kBAAkB7wL,GAChB,OAAOA,EAAQqW,QAAQ,kBA3jCIskF,GAAA,CAA5BhgF,GAAS,CAAEqP,KAAMqvC,WAAwC+wH,GAAAhrL,UAAA,4BAAA,GAC9Bu7F,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMrb,UAA2By7K,GAAAhrL,UAAA,oBAAA,GAChBu7F,GAAA,CAA5BhgF,GAAS,CAAEqP,KAAMqvC,WAA8B+wH,GAAAhrL,UAAA,mBAAA,GACrBu7F,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAA2CirL,GAAAhrL,UAAA,qBAAA,GAClCu7F,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAAgDirL,GAAAhrL,UAAA,iBAAA,GACtCu7F,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMllB,UAAyEslL,GAAAhrL,UAAA,yBAAA,GAiB3Fu7F,GAAA,CADCl9F,MACwB2sL,GAAAhrL,UAAA,mBAAA,GAGzBu7F,GAAA,CADCl9F,MACsC2sL,GAAAhrL,UAAA,mBAAA,GAGvCu7F,GAAA,CADCl9F,MACuB2sL,GAAAhrL,UAAA,eAAA,GAGxBu7F,GAAA,CADCppE,GAAM,6BACyC64J,GAAAhrL,UAAA,0BAAA,GAGhDu7F,GAAA,CADCppE,GAAM,cACuB64J,GAAAhrL,UAAA,iBAAA,GAE9Bu7F,GAAA,CADCppE,GAAM,8BACe64J,GAAAhrL,UAAA,6BAAA,GAEtBu7F,GAAA,CADCppE,GAAM,qCACa64J,GAAAhrL,UAAA,2BAAA,GAEpBu7F,GAAA,CADCppE,GAAM,kBACO64J,GAAAhrL,UAAA,qBAAA,GAEdu7F,GAAA,CADCppE,GAAM,kBACO64J,GAAAhrL,UAAA,qBAAA,GAEdu7F,GAAA,CADCppE,GAAM,eACI64J,GAAAhrL,UAAA,kBAAA,GAEXu7F,GAAA,CADCppE,GAAM,2BACe64J,GAAAhrL,UAAA,6BAAA,GAEtBu7F,GAAA,CADCppE,GAAM,mBACO64J,GAAAhrL,UAAA,qBAAA,GAEdu7F,GAAA,CADCppE,GAAM,kBACM64J,GAAAhrL,UAAA,oBAAA,GAEbu7F,GAAA,CADCppE,GAAM,yBACsC64J,GAAAhrL,UAAA,2BAAA,GAG7Cu7F,GAAA,CADCppE,GAAM,+BACgD64J,GAAAhrL,UAAA,gCAAA,GAGvDu7F,GAAA,CADCppE,GAAM,mBACoB64J,GAAAhrL,UAAA,oBAAA,GAG3Bu7F,GAAA,CADCppE,GAAM,wBAC8B64J,GAAAhrL,UAAA,oBAAA,GA9D1BgrL,GAAoBzvF,GAAA,CADhC0+C,GAAc,iBACF+wC,IC5Eb,IAAI6G,GAAuB54H,EAAC;IACxBsK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EC6BAuuH,GAAapsL,OAAOqD,OAAOvG,SAASC,cAAc,OAAQ,CAAEkC,UAAW,mBACvEotL,GAAU,cAAcpiL,GAC1BzK,cACE4C,SAASitB,WACThtB,KAAKohE,kBAAoB,IAAIjB,GAAkBngE,KAAM,OAAQ,UAC7DA,KAAK8I,MAAO,EACZ9I,KAAKmrJ,UAAW,EAChBnrJ,KAAKshE,QAAU,UACfthE,KAAKunB,SAAWwH,EAAAA,EAElB2mC,eACE11D,KAAKwZ,KAAKngB,QAAU2G,KAAK8I,KAE3BjI,aACE,IAAIb,KAAK8I,KAIT,OADA9I,KAAK8I,MAAO,EACLm4D,GAAajhE,KAAM,iBAE5Ba,aACE,GAAKb,KAAK8I,KAIV,OADA9I,KAAK8I,MAAO,EACLm4D,GAAajhE,KAAM,iBAE5Ba,cACE,OAAO,IAAIW,SAASC,IACe,OAA7BsoL,GAAW9wB,eACbx+J,SAASyP,KAAKlN,OAAO+sL,IAEvBA,GAAWznJ,YAAYtiC,MACvBsrE,uBAAsB,KACpBtrE,KAAKsM,YACLtM,KAAKssD,UAEPtsD,KAAKgH,iBAAiB,iBAAiB,KACrC+iL,GAAWt+K,YAAYzL,MACvByB,IAC6C,OAAzCsoL,GAAW3+K,cAAc,aAC3B2+K,GAAWp1J,WAEZ,CAAE+G,MAAM,OAGfuuJ,kBACEhxK,aAAajZ,KAAKkqL,iBACdlqL,KAAK8I,MAAQ9I,KAAKunB,SAAWwH,EAAAA,IAC/B/uB,KAAKkqL,gBAAkBliL,OAAOiN,YAAW,IAAMjV,KAAKm7C,QAAQn7C,KAAKunB,WAGrEu7J,mBACE9iL,KAAKm7C,OAEPgvI,kBACEnqL,KAAKiqL,kBAEPppL,yBACE,GAAIb,KAAK8I,KAAM,CACb00B,GAAKx9B,KAAM,WACPA,KAAKunB,SAAWwH,EAAAA,GAClB/uB,KAAKiqL,wBAED/+G,GAAelrE,KAAKwZ,MAC1BxZ,KAAKwZ,KAAKngB,QAAS,EACnB,MAAMwxE,UAAEA,EAASz8D,QAAEA,GAAY29D,GAAa/rE,KAAM,oBAC5C4qE,GAAU5qE,KAAKwZ,KAAMqxD,EAAWz8D,GACtCovB,GAAKx9B,KAAM,qBACN,CACLw9B,GAAKx9B,KAAM,WACXiZ,aAAajZ,KAAKkqL,uBACZh/G,GAAelrE,KAAKwZ,MAC1B,MAAMqxD,UAAEA,EAASz8D,QAAEA,GAAY29D,GAAa/rE,KAAM,oBAC5C4qE,GAAU5qE,KAAKwZ,KAAMqxD,EAAWz8D,GACtCpO,KAAKwZ,KAAKngB,QAAS,EACnBmkC,GAAKx9B,KAAM,kBAGfoqL,uBACEpqL,KAAKiqL,kBAEPl0L,SACE,OAAO+gE,EAAC;;;gBAGI9tC,GAAE,CACZkiI,OAAO,EACP,cAAelrJ,KAAK8I,KACpB,kBAAmB9I,KAAKmrJ,SACxB,kBAAmBnrJ,KAAKohE,kBAAkB9yB,KAAK,QAC/C,iBAAmC,YAAjBtuC,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,iBAAmC,YAAjBthE,KAAKshE,QACvB,gBAAkC,WAAjBthE,KAAKshE;;;;sBAKNthE,KAAK8I,KAAO,QAAU;qBACvB9I,KAAKmqL;;;;;;;;;;UAUhBnqL,KAAKmrJ,SAAWr0F,EAAC;;;;;;;yBAOF92D,KAAK8iL;;cAEd;;QAKhBkH,GAAQzzI,OAASuzI,GACjBntH,GAAgB,CACdziE,GAAE,kBACD8vL,GAAQ/xL,UAAW,OAAQ,GAC9B0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3Bu3H,GAAQ/xL,UAAW,OAAQ,GAC9B0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMqvC,QAASO,SAAS,KAC3Bu3H,GAAQ/xL,UAAW,WAAY,GAClC0kE,GAAgB,CACd1hE,GAAE,CAAEw3D,SAAS,KACZu3H,GAAQ/xL,UAAW,UAAW,GACjC0kE,GAAgB,CACd1hE,GAAE,CAAE4nB,KAAMrb,UACTwiL,GAAQ/xL,UAAW,WAAY,GAClC0kE,GAAgB,CACd8D,GAAM,OAAQ,CAAEG,sBAAsB,KACrCopH,GAAQ/xL,UAAW,mBAAoB,GAC1C0kE,GAAgB,CACd8D,GAAM,aACLupH,GAAQ/xL,UAAW,uBAAwB,GAC9C+xL,GAAUrtH,GAAgB,CACxB1zC,GAAE,aACD+gK,IACHp+G,GAAoB,aAAc,CAChCf,UAAW,CACT,CAAErmD,QAAS,EAAGwD,UAAW,cACzB,CAAExD,QAAS,EAAGwD,UAAW,aAE3B5Z,QAAS,CAAEmZ,SAAU,IAAK6lD,OAAQ,UAEpCxB,GAAoB,aAAc,CAChCf,UAAW,CACT,CAAErmD,QAAS,EAAGwD,UAAW,YACzB,CAAExD,QAAS,EAAGwD,UAAW,eAE3B5Z,QAAS,CAAEmZ,SAAU,IAAK6lD,OAAQ,UC3LvB,IAAAi9G,GAAb,cAAsC12F,GAAQm9C,GAARn9C,CAAmBv4B,KAAzDj+D,kCAY6B6C,KAAO26G,QAAa,GAE/C3mB,aAAa19F,SACX0J,KAAK26G,SAAkC,UAAxBrkH,EAAMk3I,gBAAgBhzB,UAAE,IAAA/wE,OAAA,EAAAA,EAAEkxE,UAAW,GAGtD2vE,aAAal0F,GACX,MAAa,YAATA,EACKh8F,EAAI,uDACO,YAATg8F,EACFh8F,EAAI,8DACO,WAATg8F,EACFh8F,EAAI,6DAEJA,EAAI,qDAIf+1I,gBAEEW,GAAUW,S/H1CL,CACL5uH,KAAM,mB+H4CR0nK,iBAAiBhrL,GACfuxI,GAAUW,SAAS16C,GAAcx3F,IAGnCo2D,QAAQ08E,aACN,GAAIA,EAAkB9sF,IAAI,WAAY,CACxB,QAAZ9b,EAAAzpC,KAAK26G,eAAO,IAAAlxE,GAAAA,EAAEntC,SAAQq6F,oBACpB3xB,EAAiB,UAAjBhlE,KAAK5J,kBAAY,IAAAqzC,OAAA,EAAAA,EAAAjqC,eAAem3F,EAAOp3F,oBAAKyH,iBAAiB,SAAS1O,IACpEA,EAAMiP,2BACNvH,KAAKuqL,iBAAkBjyL,EAAMvB,OAAmBwI,UAGpD,MAAMirL,EAAc/vL,SAAS2Q,cAAc,gBAC3Co/K,EAAYrH,aAAenjL,KAAK26G,QAAQ3gH,OACxC,MAAM6F,GAA2C,QAAhCmlE,EAAAqtE,EAAkBv2I,IAAI,kBAAU,IAAAkpE,OAAA,EAAAA,EAAEhrE,SAAU,EAE7D,GAAIwwL,EAAYrH,aAAetjL,EAAU,CACvC,MAAMsgL,EAAmD,QAA3CvjG,EAAAniF,SAAS2Q,cAAc,0BAAoB,IAAAwxE,OAAA,EAAAA,EAAAxxE,cAAc,YACnE+0K,IACFA,EAAMD,OAAQ,KAMtBnqL,SACE,OAAOqE,EAAI;QACP4F,KAAK26G,QAAQx8G,KACbw4F,GACEv8F,EAAI,IAAIu8F,EAAOE,WACXz8F,EAAI;qCACmBu8F,EAAOP;6EACiCO,EAAOp3F;oBAChES,KAAKsqL,aAAa3zF,EAAOP,SAASO,EAAOC;;gBAG/Cx8F,EAAI,uBAAuBu8F,EAAOP,eAAep2F,KAAKsqL,aAAa3zF,EAAOP,SAASO,EAAOC;QAtE/FyzF,GAAM9zI,OAAGwgC,EAAG;;;;;;;;;IAWQyc,GAAA,CAA1BhgF,GAAS,CAAEqP,KAAM7qB,SAAgCqyL,GAAApyL,UAAA,eAAA,GAZvCoyL,GAAgB72F,GAAA,CAD5B0+C,GAAc,sBACFm4C,ICHA,IAAAI,GAAb,cAAoC92F,GAAQm9C,GAARn9C,CAAmBv4B,KAAvDj+D,kCAcU6C,KAAS89G,UAAqB,GAEtC9pB,aAAa19F,YACmB,QAA1BmzC,EAAAnzC,EAAMk3I,gBAAgBhzB,UAAI,IAAA/wE,OAAA,EAAAA,EAAAjS,SAA4D,wBAAd,QAApCwtC,EAAA1uE,EAAMk3I,gBAAgBhzB,GAAGhjF,OAAO,UAAI,IAAAwtC,OAAA,EAAAA,EAAAy1C,YAC1Ez6G,KAAK+sJ,qBAAqBz2J,EAAMk3I,gBAAgBhzB,GAAGhjF,QAI/Cu1H,qBAAqBv1H,GAC3BA,MAAAA,GAAAA,EAAQl7B,SAAShE,IACf,OAAQA,EAAMmiH,WACZ,KAAKR,GAAUqS,oBACf,KAAKrS,GAAUsS,gBACT/0F,EAAOA,EAAOx9B,OAAS,KAAO1B,GAASA,EAAMkuF,WAC/CxmF,KAAK0qL,eAAepyL,EAAMkuF,UAAU,QAOtCkkG,eAAe7kG,SACrB7lF,KAAKmiJ,oBAAsBt8D,EAC3B7lF,KAAK89G,WAAwC,QAA3Br0E,EAAAo8C,EAAS8yB,sBAAkB,IAAAlvE,EAAAA,EAAA,IAAI9vC,QAAQ29G,GAAyB0G,GAAW1G,KAG/FvhH,SACE,OAAQiK,KAAKmiJ,qBAAwBniJ,KAAK89G,UAAU9jH,OAEhDI,EAAI;;;;;;;;;;;;;;;cAeE4F,KAAK89G,UAAU3/G,KAAIwsL,GAAMvwL,EAAI,QAAQuwL,EAAG10F;;UAhB9C77F,EAAI,KAzCHqwL,GAAMl0I,OAAGwgC,EAAG;;;;;;;;IAUnByc,GAAA,CADCl9F,MACsCm0L,GAAAxyL,UAAA,2BAAA,GAGvCu7F,GAAA,CADCl9F,MACwCm0L,GAAAxyL,UAAA,iBAAA,GAd9BwyL,GAAcj3F,GAAA,CAD1B0+C,GAAc,gBACFu4C,ICNb,IAAaG,GAAb,cAAyCxvH,GAIhC9O,OACLtsD,KAAKonK,SAAS96G,OAGhBv2D,SACE,OAAOqE,EAAI;;;;;;;;4DAQ6C,IAAY4F,KAAKonK,SAASjsH;;QAfpFq4C,GAAA,CADCppE,GAAM,cACgBwgK,GAAA3yL,UAAA,gBAAA,GAFZ2yL,GAAmBp3F,GAAA,CAD/B0+C,GAAc,sBACF04C,ICCb,IAAaC,GAAb,cAA2CzvH,GAA3Cj+D,kCACsC6C,KAAIyX,KAAG,EAsBpC60C,aACL,MAAMw+H,EAAch9E,aAAaC,QAAQ,8BACnCg9E,EAAmC,QAAfthJ,EAAAzpC,KAAK5J,kBAAU,IAAAqzC,OAAA,EAAAA,EAAEr+B,cAAc,gBACrD0/K,GAAeC,IACjBA,EAAkB7xL,SAAU,GAE9B8G,KAAKonK,SAAS96G,OAGR0+H,mBAAmB1yL,GACPA,EAAMvB,OAAOmC,QAE7B40G,aAAa6c,QAAQ,6BAA8B,QAEnD7c,aAAa4nB,WAAW,8BAI5B3/H,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;mDAkBoC4F,KAAKgrL;;gDAER,IAAYhrL,KAAKonK,SAASjsH;;;QA1DjE0vI,GAAMt0I,OAAGwgC,EAAG;;;;;;;;;;;;;;;;;IAHSyc,GAAA,CAA3BhgF,GAAS,CAAEqP,KAAMrb,UAA2BqjL,GAAA5yL,UAAA,YAAA,GACzBu7F,GAAA,CAAnBppE,GAAM,cAAoCygK,GAAA5yL,UAAA,gBAAA,GAFhC4yL,GAAqBr3F,GAAA,CADjC0+C,GAAc,wBACF24C,ICCb,IAAaI,GAAb,cAAiD7vH,GAUxCutH,uBAAuBpgB,GAC5BvoK,KAAKkrL,mBAAmBp4C,OAASy1B,EAG5Bj8G,OACLtsD,KAAKonK,SAAS96G,OAGhBv2D,SACE,OAAOqE,EAAI;;;;;;;kEAOmD4F,KAAKuoK;4DACX,IAAYvoK,KAAKonK,SAASjsH;;QAzBpFq4C,GAAA,CADCppE,GAAM,cACgB6gK,GAAAhzL,UAAA,gBAAA,GAGvBu7F,GAAA,CADCppE,GAAM,0BAC6C6gK,GAAAhzL,UAAA,0BAAA,GAGpDu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMllB,UACoBstL,GAAAhzL,UAAA,qBAAA,GAR3BgzL,GAA2Bz3F,GAAA,CADvC0+C,GAAc,+BACF+4C,ICFb,IAAaE,GAAb,cAA2C/vH,GAIlC9O,OACLtsD,KAAKonK,SAAS96G,OAGhBv2D,SACE,OAAOqE,EAAI;;;;;;;;4DAQ6C,IAAY4F,KAAKonK,SAASjsH;;QAfpFq4C,GAAA,CADCppE,GAAM,cACgB+gK,GAAAlzL,UAAA,gBAAA,GAFZkzL,GAAqB33F,GAAA,CADjC0+C,GAAc,wBACFi5C,ICEb,IAAaC,GAAb,cAA8ChwH,GAA9Cj+D,kCAeU6C,KAAyBq7K,0BAAG,EAThCxS,oBAAgBlyK,GAClBqJ,KAAKqrL,iBAAmB10L,GAAgB,IAAImyK,GAC5C9oK,KAAKszD,gBAGHu1G,sBACF,OAAO7oK,KAAKqrL,iBAcJ31H,eACR11D,KAAKoqK,aAAapjK,iBAAiB,aAAc+oF,GAAc/vF,KAAKsrL,uBAAuBv7F,KAE7Fh6F,qBACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2DAmCmE,QAAvBqvC,EAAAzpC,KAAKqrL,wBAAkB,IAAA5hJ,OAAA,EAAAA,EAAAwgI,yBAA0Bl6E,GAAoB/vF,KAAKurL,yBAAyBx7F;;;;;;;;kBAQvH,QAArB/qB,EAAAhlE,KAAKqrL,wBAAgB,IAAArmH,OAAA,EAAAA,EAAEklG;mBACrBn6E,GAAoB/vF,KAAKwrL,yBAAyBz7F;;;6FAG4C,QAArBnT,EAAA58E,KAAKqrL,wBAAgB,IAAAzuG,OAAA,EAAAA,EAAEwtF;;;;;;;;;uBASxE,QAArB50I,EAAAx1B,KAAKqrL,wBAAgB,IAAA71J,OAAA,EAAAA,EAAE20I;qBACxBp6E,GAAoB/vF,KAAKyrL,mCAAmC17F;;;;;MAQxEy7F,yBAAyBz7F,GAC/B/vF,KAAKqrL,iBAAiBnhB,eAAkBn6E,EAAGh5F,OAA4BJ,MACvEqJ,KAAKszD,gBAGCi4H,yBAAyBx7F,GAC/B/vF,KAAKqrL,iBAAiBphB,eAAkBl6E,EAAGh5F,OAA4BmC,QACvE8G,KAAKszD,gBAGCg4H,uBAAuBv7F,GAC7B,MAAM27F,EAAajhL,SAAUslF,EAAGh5F,OAAoBJ,OACpDqJ,KAAKqrL,iBAAiBjhB,aAAeshB,EACrC1rL,KAAKszD,gBAGCm4H,mCAAmC17F,GACzC/vF,KAAKqrL,iBAAiBlhB,yBAA4Bp6E,EAAGh5F,OAA4BmC,QACjF8G,KAAKszD,gBAGCy6F,6BAA6BgG,GACnComB,cAAcn6K,KAAKq7K,2BACnBr7K,KAAKq7K,0BAA4BrzK,OAAOiN,YAAW,IAAMjV,KAAKi0J,qBAAqBF,IAAe,KAG5FE,qBAAqBF,GAC3B/zJ,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAAA,QA9GDq3B,GAAM70I,OAAGwgC,EAAG;;;;;;;IAfnByc,GAAA,CADCppE,GAAM,0BACiBghK,GAAAnzL,UAAA,oBAAA,GAIxBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMllB,OAAQrH,OAAO,KAIhC80L,GAAAnzL,UAAA,kBAAA,MATUmzL,GAAwB53F,GAAA,CADpC0+C,GAAc,2BACFk5C,ICIA,IAAAO,GAAb,cAA4Ch4F,GAAQm9C,GAARn9C,CAAmBv4B,KA0G7Dj+D,cACE4C,QAzGFC,KAAiB4rL,kBAAG,EAGpB5rL,KAAU6rL,WAAG,GAGb7rL,KAA0B8rL,2BAAG,GAG7B9rL,KAAc+rL,gBAAG,EAGjB/rL,KAAIo6G,KAAG,GAEPp6G,KAAA28I,SAA+B,IAAIzJ,GA8F3BlzI,KAAyBikK,0BAAG,K9LoNG,EAACjpE,EAAsB,GAAIniG,EAAcuhH,KAChF,MAAMgN,EAAahN,IAASiN,GAAK7H,OAAS32B,GAAsBmS,GAAY,EACxEniG,IACFA,EAAQ8B,UAAYysH,I8LtNpB68C,CAA0BnzB,GAAU78C,WAAWu5C,gBAAgBxyC,SAAUvgG,SAAS+E,eAAeQ,KAAK8rL,4BAAoC9rL,KAAKo6G,OASzIp6G,KAA2BwsJ,4BAAG,KACpC,MAAMC,EAA2BhyJ,SAAS+E,eAAeQ,KAAK6rL,YAC9DjhE,GAAkB6hC,EAA0B3b,GAAU78C,WAAWu5C,gBAAgB9oD,YAxGnFzsD,OAAOo6G,GACLtyI,MAAMk4B,OAAOo6G,GAGf99E,mBACE,OAAOv0D,KAGTg0F,aAAa19F,SACPA,EAAMk3I,gBAAgBhzB,IACpBlkH,EAAMk3I,gBAAgBhzB,GAAGhjF,SACvBlhC,EAAMk3I,gBAAgBhzB,GAAG5uF,SAA6D,wBAAd,QAApC6d,EAAAnzC,EAAMk3I,gBAAgBhzB,GAAGhjF,OAAO,UAAI,IAAAiS,OAAA,EAAAA,EAAAgxE,YAC1EuwC,GAAY10J,EAAMk3I,gBAAgBhzB,GAAG5uF,QAAQqqE,WAE/Cj2F,KAAK+sJ,qBAAqBz2J,EAAMk3I,gBAAgBhzB,GAAGhjF,SAKjDu1H,qBAAqBv1H,GAC3BA,MAAAA,GAAAA,EAAQl7B,SAAShE,IACf,OAAQA,EAAMmiH,WACZ,KAAKR,GAAUi0B,eACf,KAAKj0B,GAAUm2B,kBACbpwI,KAAKwsJ,8BAITxsJ,KAAKikK,+BAITluK,SACE,OAAOqE,EAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yBA+CU4F,KAAK6rL,uCAAuC,IAAY7rL,KAAKgkK;;0BAE5DhkK,KAAK8rL;;;MActB9nB,8BAA8BgoB,GAAsB,GACzD,MAAM5kE,EAAamD,GAAyBumB,GAAU78C,WAAWu5C,gBAAgBxyC,U9L2MxC,EAAC81C,EAAgB1pB,KAC5D0pB,EAAUW,SAAStqB,GAA6BjxB,QAAQkxB,K8L3MtD48C,CAA8BlzB,GAAWk7C,EAAsB5kE,EAAa,GAC5EpnH,KAAKwsJ,gCAnHPh5D,GAAA,CADChgF,GAAS,CAAEqP,KAAMrb,UACImkL,GAAA1zL,UAAA,yBAAA,GAGtBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACF+wL,GAAA1zL,UAAA,kBAAA,GAGhBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACc+wL,GAAA1zL,UAAA,kCAAA,GAGhCu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMqvC,QAASO,SAAS,KACbk5H,GAAA1zL,UAAA,sBAAA,GAGvBu7F,GAAA,CADChgF,GAAS,CAAEqP,KAAMjoB,UACR+wL,GAAA1zL,UAAA,YAAA,GAdC0zL,GAAsBn4F,GAAA,CADlC0+C,GAAc,yBACFy5C,ICJb,IAAaM,GAAb,cAAgD7wH,GAAhDj+D,kCA2DU6C,KAAyBq7K,0BAAG,EAE5B6Q,iBAAiB98I,GACvB,MAAM4oB,EAAK5oB,MAAAA,OAAA,EAAAA,EAAKr4C,OAChBihE,IAAOh4D,KAAKmsL,wBAA0BnsL,KAAKosL,6BAA6BtvL,MAAMu0B,YAAY,aAAc2mC,EAAGrhE,MAAQ,SAAW,SAC9HqhE,IAAOh4D,KAAKqsL,aAAersL,KAAKssL,kBAAkBxvL,MAAMu0B,YAAY,aAAc2mC,EAAGrhE,MAAQ,SAAW,SACxGqJ,KAAK+tJ,+BAGCA,6BAA6BgG,EAAe,sBAClDomB,cAAcn6K,KAAKq7K,2BACnBr7K,KAAKq7K,0BAA4BrzK,OAAOiN,YAAW,IAAMjV,KAAKi0J,qBAAqBF,IAAe,KAG5FE,qBAAqBF,GAC3B/zJ,KAAKmJ,cACH,IAAIH,YAAY,WAAY,CAC1BC,SAAS,EACT+3D,UAAU,EACV93D,OAAQ,CACN6qJ,aAAAA,MAMR0iB,iBAAiB/mE,GACf,OAAO,IAAI8mE,GAAqB9mE,EAAK1vG,KAAK8kL,wBAAwBrO,mBAGpEqO,6BACE,MAAM9nI,EAAM,IAAIqtH,GAMhB,OALArtH,EAAIo5C,cAAO3sD,EAACzpC,KAAKusL,wBAAwBnhL,cAAc,2CAA8BzU,QAAS,YAC9FqmD,EAAIstH,MAAQtqK,KAAKmsL,uBAAuBx1L,OAAS,4BACjDqmD,EAAIutH,UAAYvqK,KAAKqsL,YAAY11L,OAAS,eAC1CqmD,EAAIwtH,aAAexqK,KAAKwsL,eAAetzL,QACvC8jD,EAAIytH,aAAezqK,KAAKysL,eAAevzL,QAChC8jD,EAGT2pI,qBAAqBvQ,WACnBp2K,KAAKmsL,uBAAuBx1L,MAAQy/K,EAAkBhgF,KACtDp2F,KAAKmsL,uBAAuBx1L,MAAQy/K,EAAkB9L,MACtDtqK,KAAKqsL,YAAY11L,MAAQy/K,EAAkB7L,UAC3CvqK,KAAKwsL,eAAetzL,QAAUk9K,EAAkB5L,aAChDxqK,KAAKysL,eAAevzL,QAAUk9K,EAAkB3L,aACgD,QAAhGzlG,EAAgB,UAAfhlE,KAAK5J,kBAAU,IAAAqzC,OAAA,EAAAA,EAAEr+B,cAAc,mBAAmBgrK,EAAkBhgF,iBAA2B,IAAApxB,GAAAA,EAAA7oB,QAChGn8C,KAAK+tJ,+BAEqC,KAAtC/tJ,KAAKmsL,uBAAuBx1L,OAC9BqJ,KAAKosL,6BAA6BtvL,MAAMu0B,YAAY,aAAc,UAGrC,KAA3BrxB,KAAKqsL,YAAY11L,OACnBqJ,KAAKssL,kBAAkBxvL,MAAMu0B,YAAY,aAAc,UAI3Dt7B,SACE,OAAOqE,EAAI;yBACU4F,KAAKksL;;kFAEoDlsL,KAAKksL;;;;;;;;;;;;;;;;;;;QAxH9ED,GAAM11I,OAAGwgC,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsCnByc,GAAA,CADCppE,GAAM,2BACoC6hK,GAAAh0L,UAAA,+BAAA,GAG3Cu7F,GAAA,CADCppE,GAAM,0BACmC6hK,GAAAh0L,UAAA,8BAAA,GAG1Cu7F,GAAA,CADCppE,GAAM,eACwB6hK,GAAAh0L,UAAA,mBAAA,GAG/Bu7F,GAAA,CADCppE,GAAM,gCACwC6hK,GAAAh0L,UAAA,oCAAA,GAG/Cu7F,GAAA,CADCppE,GAAM,qBAC6B6hK,GAAAh0L,UAAA,yBAAA,GAGpCu7F,GAAA,CADCppE,GAAM,kBAC2B6hK,GAAAh0L,UAAA,sBAAA,GAGlCu7F,GAAA,CADCppE,GAAM,kBAC2B6hK,GAAAh0L,UAAA,sBAAA,GAzDvBg0L,GAA0Bz4F,GAAA,CADtC0+C,GAAc,6BACF+5C,ICsDb11J,MAAMlM,SAAS,sBpU1Df,MAKEltB,YAAYyiC,EAAYxxB,GAFxBpO,KAAOs5B,SAAG,EAGRt5B,KAAK4/B,MAAQA,EACb5/B,KAAKoO,QAAUA,EAEfpO,KAAK4/B,MAAMtoC,KAAK0P,iBAAiB,WAAY1O,UAC3C,MAAMw/B,EAAkB,QAAV2R,EAAAzpC,KAAK4/B,aAAK,IAAA6J,OAAA,EAAAA,EAAE9P,eACpB58B,EAAMzE,EAAMyE,IACbiD,KAAKs5B,SAAYxB,GAAU,CAAC,IAAK,KAAKpkB,SAAS3W,KAEpDiD,KAAK0sL,YAAY50J,EAAO/6B,GACxBzE,EAAMgP,qBAWVolL,YAAY50J,EAAY60J,mBACtB,IAAK3sL,KAAKs5B,QAAS,OAAO,EAE1B,MAAMszJ,EAA6B,MAAbD,EAChB9zE,EAAY+zE,EAAgB,IAAM,IAClCv0E,EAAau0E,EAAgB,IAAM,IAEnC3/F,EAAoB,QAAZxjD,EAAAzpC,KAAK4/B,aAAO,IAAA6J,OAAA,EAAAA,EAAA3tB,UAAU8jC,UAAU,EAAG9nB,EAAM/gB,OAEjD81K,GAAqB5/F,IAASA,MAAAA,OAAA,EAAAA,EAAO3xF,MAAM,SAAUu9G,EAAYR,EAEjE1kF,EAAmB,QAAVqxC,EAAAhlE,KAAK4/B,aAAK,IAAAolC,OAAA,EAAAA,EAAEpqC,UAAU9C,GAGrC,IAAIjI,GAAQ,IAAIjC,IAAQK,OAAO6J,EAAM/gB,OAAOiX,OAAO8J,EAAM99B,QAAQ8zB,OAAO6+J,EAAUh5J,GAUlF,OATU,QAAVipD,EAAA58E,KAAK4/B,aAAK,IAAAg9C,GAAAA,EAAE/pC,eAAehjB,EAAc0G,MAAMkD,QAAQ8C,MAC7C,QAAV/G,EAAAx1B,KAAK4/B,aAAK,IAAApK,GAAAA,EAAE6B,QAAQub,SAGpB/iB,GAAQ,IAAIjC,IAAQK,OAAO6J,EAAM/gB,OAAOiX,OAAO,GAAGF,OAAO++J,EAAmBl5J,GAClE,QAAV8B,EAAAz1B,KAAK4/B,aAAK,IAAAnK,GAAAA,EAAEod,eAAehjB,EAAc0G,MAAMkD,QAAQ8C,cAEvDy5E,EAAAh2G,KAAK4/B,sBAAO9F,aAAahC,EAAM/gB,MAAQ,EAAGwf,MAAMkD,QAAQM,SAEjD,EAGT+yJ,WAAWxzJ,GACTt5B,KAAKs5B,QAAUA,KoUIsC,GACzD/C,MAAMlM,SAAS,kBAAmBs6D,IAAe,GACjDpuD,MAAMlM,SAAS,qBpTSf,cAA+BsV,GAwB7BxiC,YAAYyiC,EAAOxxB,SACjBrO,MAAM6/B,EAAOxxB,GArBfpO,KAAe+sL,iBAAG,EAsBhB/sL,KAAK4/B,MAAQA,EACb5/B,KAAKoO,QAAUA,EAEfpO,KAAKoO,QAAQ4+K,cAA0C,QAA1BvjJ,EAAAzpC,KAAKoO,QAAQ4+K,qBAAa,IAAAvjJ,EAAAA,EAAI,EAE3DzpC,KAAK4/B,MAAMkgI,YAAc9/J,KAEzB,MAAMg9B,EAAUh9B,KAAK4/B,MAAMylD,UAAU,WACjCroD,GACFA,EAAQmtB,WAAW,cAAenqD,KAAKitL,eAAejuK,KAAKhf,OAG7DA,KAAKilF,sBACLjlF,KAAK4/B,MAAMrI,GAAG,cAAev3B,KAAKmlF,aAAanmE,KAAKhf,OAEpDA,KAAK4/B,MAAMtoC,KAAK0P,iBAAiB,QAAShH,KAAK+hK,QAAQ/iJ,KAAKhf,OAC5DA,KAAK4/B,MAAMtoC,KAAK0P,iBJrGY,oBIqG8BhH,KAAKktL,oBAAoBluK,KAAKhf,OArCtF6kF,qBACF,OAAO7kF,KAAK+sL,gBAEVloG,mBAAeluF,GACjBqJ,KAAK+sL,gBAAkBp2L,EAQzBgd,kBACE4iB,MAAMlM,SAAS+oE,IACf78D,MAAMlM,SAAS4oE,IACf18D,MAAMlM,SAAS6oE,IACf38D,MAAMlM,SAAS8oE,IAwBjBlO,sBACEjlF,KAAK4/B,MAAMxI,UAAUsxB,WAAW,eAAe,CAACjxD,EAAMo4B,KACpD,IAAIv0B,EAAQ2uB,GAAUG,MAAM3yB,GAC5B,GAAa,MAAT6D,GAAoC,gBAAnBA,EAAM4xB,SACzB,OAAO2C,EAGT,MAAMtwB,EAAKS,KAAK6kF,eAAiBptF,EAAKgF,aAAa,kBAAoBuD,KAAKmtL,UACtEv+F,EAASn3F,EAAKgF,aAAa,UAC3BwwF,EAAQoB,GAAW52F,EAAKgF,aAAa,UACrC42F,EAAa,IAAI1E,GAAW,CAAEpvF,GAAAA,EAAIqvF,OAAAA,EAAQ3B,MAAAA,IAEhD,OAAO,IAAIr/D,IAAQE,OAAO,CAAE,cAAeulE,OAe/ClO,aAAat1D,EAAOs4D,EAAYzpE,GAC9B,MAAM66B,EAAOv5C,KAAK4/B,MAAMvI,QAAQqiB,MAAMH,KAAKv5C,KAAK4/B,MAAMvI,QAAQqiB,MAAMH,KAAKv/C,OAAS,GAC5Ew/C,EAAOx5C,KAAK4/B,MAAMvI,QAAQqiB,MAAMF,KAAKx5C,KAAK4/B,MAAMvI,QAAQqiB,MAAMF,KAAKx/C,OAAS,IAC9EgG,KAAKotL,cAAcv9J,IAAU7vB,KAAKotL,cAAc7zI,MAAAA,OAAA,EAAAA,EAAMA,OAASv5C,KAAKotL,cAAc7zI,MAAAA,OAAI,EAAJA,EAAMC,OAASx5C,KAAKotL,cAAc5zI,MAAAA,SAAAA,EAAMA,SAC5Hx5C,KAAKqtL,sBACLrtL,KAAKstL,2CAA2CttL,KAAKotL,cAAcv9J,KAGjE7vB,KAAKotL,cAAcv9J,IACrB7vB,KAAKutL,kCAITA,kCAIgBvtL,KAAKwtL,sBACblxL,SAAQlE,iBACQ,QAApB4sE,EAAc,QAAdv7B,EAAArxC,EAAKy0B,KAAKh1B,YAAI,IAAA4xC,OAAA,EAAAA,EAAEhtB,YAAI,IAAAuoD,OAAA,EAAAA,EAAE1pE,MAAM,SAAU0E,KAAK4/B,MAAMxG,WAAWhhC,EAAK2e,MAAQ,EAAG,EAAG,WAC3D,QAApBye,EAAc,QAAdonD,EAAAxkF,EAAKy0B,KAAK0V,YAAI,IAAAq6C,OAAA,EAAAA,EAAEngE,YAAI,IAAA+Y,OAAA,EAAAA,EAAEl6B,MAAM,SAAU0E,KAAK4/B,MAAMxG,WAAWhhC,EAAK2e,MAAQ,EAAG,EAAG,aAKnFu2K,2CAA2CG,GACzCx0K,aAAajZ,KAAK0tL,mCAClB1tL,KAAK0tL,kCAAoCz4K,YAAW,KAClD,MAAM5B,EAAYo6K,EJ9JS,qBACA,qBI8J3BztL,KAAK4/B,MAAMtoC,KAAK6R,cAAc,IAAIH,YAAYqK,EAAW,CAAEpK,SAAS,OACnE,KAGLmkL,cAAcv9J,SACZ,OAAiB,QAAV4Z,EAAA5Z,MAAAA,OAAK,EAALA,EAAOhC,WAAG,IAAA4b,OAAA,EAAAA,EAAEv8B,MAAKugB,IAAM,IAAAgc,EAAA,OAAY,QAAZA,EAAAhc,EAAGK,cAAS,IAAA2b,OAAA,EAAAA,EAAA,kBAG5Cs4H,QAAQ9mK,SACN,MAAM+8D,EAAK/8D,EAAElE,OACO,iBAAhBihE,MAAAA,OAAE,EAAFA,EAAIxrC,UAA4D,iBAAZ,UAAnBwrC,MAAAA,OAAE,EAAFA,EAAIihG,qBAAe,IAAAxvH,OAAA,EAAAA,EAAAjd,WACtDvxB,EAAEqM,iBACFrM,EAAEwiB,kBACFzd,KAAKitL,eAAej1H,EAAGq7B,YAAcr7B,EAAGihG,cAAc5lE,aAI1D65F,oBAAoB50L,GAClBA,EAAMmlB,kBACN,MAAMle,GAAEA,EAAE0tF,MAAEA,GAAU30F,EAAM4Q,OACtB8uD,EAAKz4D,GAAMS,KAAK2tL,aAAapuL,GACnCS,KAAK4/B,MAAM74B,QACXixD,EAAKh4D,KAAK4tL,eAAe51H,EAAGq7B,WAAYpG,GAASjtF,KAAK6tL,UAAU5gG,GAGlEggG,eAAe55F,GAKW,IAAI1B,GAAgB,CAC1CI,kBAAmB/xF,KAAK4/B,MAAMtoC,KAC9Bu6F,aAAcwB,MAAAA,OAAA,EAAAA,EAAY9zF,GAC1BuyF,uBAAwBuB,MAAAA,OAAA,EAAAA,EAAYpG,MACpC+E,YAAmC,iBAAfqB,EAA0B,wBAA0B,6BAE1DvqF,OAGlB8kL,eAAev6F,EAAY8vC,GACzB,MAAMt9C,EAAW7lF,KAAK2tL,aAAat6F,EAAW9zF,IACxCstB,EAAO0J,MAAMrpB,KAAK24E,GAExB,OADAh5D,EAAK8G,OAAO,cAAe,IAAK0/D,EAAYpG,MAAOk2C,IAC5Ct2G,EAAK0G,QAAQ8/D,WAGtBw6F,UAAU5gG,GACR,MAAMrtD,EAAQ5/B,KAAK4/B,MACb9H,EAAQ8H,EAAMjG,eACpB,IAAK7B,EAAO,OAEZ,MAAMv4B,EAAKS,KAAKmtL,UACV95F,EAAa,IAAI1E,GAAW,CAAEpvF,GAAAA,EAAIqvF,OAAQ,EAAG3B,MAAAA,IAE7Cp9D,GAAQ,IAAIjC,IAAQK,OAAO6J,EAAM/gB,OAAOiX,OAAO8J,EAAM99B,QAAQ8zB,OAAO,CAAE,cAAeulE,IAK3F,OAHAzzD,EAAMiT,eAAehjB,EAAO,QAC5B+P,EAAM9F,aAAahC,EAAM/gB,MAAQ,EAAG,GAE7Bs8E,EAGT+kC,QAAQvmC,GACN,MAAMhM,EAAW7lF,KAAK2tL,aAAa97F,GAC7BhlE,EAAO0J,MAAMrpB,KAAK24E,GACxBh5D,MAAAA,GAAAA,EAAM8H,SAGRmyI,OAAOj1E,SACL,MAAMwB,EAA8C,QAAjC5pD,EAAAzpC,KAAK2tL,aAAa97F,UAAe,IAAApoD,OAAA,EAAAA,EAAA4pD,WACpDA,GAAcrzF,KAAKitL,eAAe55F,GAGpCuwE,SAAS9D,GACPA,EAAYxjK,SAAQwxL,IAClB,MAAMjoG,EAAW7lF,KAAK2tL,aAAaG,EAAKvuL,IACpCsmF,IACFA,EAASwN,WAAay6F,MAK5B5pB,iBACE,OAAOlkK,KAAKwtL,sBAAsBrvL,KAAI/F,GAAQA,EAAKy0B,KAAK0G,QAAQ8/D,aAGlE85F,UACE,MA3Pe,MA2PK,IAAIluL,MAAOC,UAGjCyuL,aAAapuL,GACX,OAAOS,KAAK4/B,MAAMtoC,KAAK8T,cAAc,+BAA+B7L,OAGtEiuL,sBACE,OAAOx1L,MAAMqS,KAAKrK,KAAK4/B,MAAMtoC,KAAK6S,iBAAiB,gBAAgBhM,KAAIo1B,IACrE,MAAM1G,EAAO0J,MAAMrpB,KAAKqmB,GAExB,MAAO,CACLxc,MAFY8V,EAAKlxB,OAAOqE,KAAK4/B,MAAM/I,QAGnChK,KAAAA,MAKNwgK,sBACE,MAAMv1J,EAAQ93B,KAAK4/B,MAAMjG,eACX35B,KAAKwtL,sBACblxL,SAAQ,CAAClE,EAAMqwF,WACnB,MAAMmG,EAASnG,EAAMzoF,KAAKoO,QAAQ4+K,cAC5Bv1L,EAAOW,EAAKy0B,KAAK0G,QACvB97B,EAAK4W,UAAYugF,EACjBn3F,EAAKiF,aAAa,SAAUkyF,IACT,UAAfn3F,EAAK47F,kBAAU,IAAA5pD,OAAA,EAAAA,EAAElqC,MACnB9H,EAAK47F,WAAWzE,OAASA,MAG7B92D,GAAS93B,KAAK4/B,MAAM9F,aAAahC,EAAM/gB,MAAO+gB,EAAM99B,QAGtDqqK,8BAA8BjqK,GAE5B,OAAOA,EAAKqB,QAAQ,mCAAoCwxF,GAAkBA,EAAMxxF,QAAQ,kCAAmC,aoTxOxE"}