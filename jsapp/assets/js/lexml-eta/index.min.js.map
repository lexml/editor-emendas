{"version":3,"file":"index.min.js","sources":["../node_modules/quill/dist/quill.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PEQICPKO.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KNVYX3FQ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.4CV4I4O2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.2JQPDYNA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7BXY5XRG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ICGTMF5Z.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.72DLNKYZ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PC2XE7K3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.EAHCDLY6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DASRUEHT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IVOHDN3H.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BIBTLNIT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.JHRKEMQ3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.LOYEL7IY.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.N2T2IJMA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.3IYPB6RR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.R37SUKY2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PQ5VRVXF.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.CDTZZV7W.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DB75ZXDG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.LAAROFAU.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.H2OTHIKD.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.WVVUWAAN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.O2TDYW3A.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.TZDCDFV4.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.NFF2HMIT.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.C7PPQWMA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IDYSXN6R.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.UCCHCS2E.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.RPB53XXV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.P52GZVKG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.NPYVPRSA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DDXYEXJR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.SCUNOITN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BQLXYG6H.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.H262HIXG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.OKBZWQHW.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.YBI4N56R.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6SAGALY4.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.IZTO26O3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FE67GRYM.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BN5JWAGI.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PWMZHGCP.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.XTJ7LSDZ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.24E5KUVH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.HBQXYYIH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.GX6HO7XH.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.APX6YS4T.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.R2YZVUVK.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7Z6S4O4Z.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.DIQYRTQ3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.2BK5N6NV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6RGOUGV6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.CUSQ3RKJ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.AMWHV6KC.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FTWX6OPR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.AAC6N2EB.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.43G6GBOK.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KA5CSU6G.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.RBICTPSA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BN5S5DQC.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.PF5KH6E5.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.EPLHZYQM.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.MKDCWXIR.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.BXPHLFH5.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.VJFXXZSG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7EHHFVMB.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.WVNZTNX2.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ZCXSKGAA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.MDVLR3AN.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.UZCU23EP.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.HPWFXYUR.js","../../src/components/editor-texto-rico/moduloAspasCurvas.ts","../../src/util/uuid.ts","../../src/components/editor-texto-rico/moduloRevisao.ts","../node_modules/diff/lib/index.mjs","../../src/util/string-util.ts","../node_modules/@lit/reactive-element/css-tag.js","../node_modules/@lit/reactive-element/reactive-element.js","../node_modules/lit-html/lit-html.js","../node_modules/lit-element/lit-element.js","../../src/assets/css/quill.snow.css.ts","../../src/components/editor-texto-rico/estilos-texto.ts","../../src/components/editor-texto-rico/margin-bottom.ts","../../src/components/editor-texto-rico/notaRodape.ts","../../src/components/editor-texto-rico/quill-util.ts","../../src/components/editor-texto-rico/text-indent.ts","../../src/components/editor-texto-rico/nota-rodape-modal.ts","../../src/components/editor-texto-rico/moduloNotaRodape.ts","../node_modules/tslib/tslib.es6.js","../node_modules/@lit/reactive-element/decorators/custom-element.js","../node_modules/@lit/reactive-element/decorators/property.js","../node_modules/@lit/reactive-element/decorators/state.js","../node_modules/@lit/reactive-element/decorators/base.js","../node_modules/@lit/reactive-element/decorators/query.js","../node_modules/@lit/reactive-element/decorators/query-all.js","../node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","../node_modules/pwa-helpers/connect-mixin.js","../../src/model/lexmlEmendaConfig.ts","../node_modules/redux/es/redux.js","../../src/model/lexml/acao/adicionarAgrupadorArtigoAction.ts","../../src/model/alerta/acao/adicionarAlerta.ts","../../src/model/alerta/acao/removerAlerta.ts","../../src/model/lexml/acao/adicionarAlteracaoComAssistenteAction.ts","../../src/model/lexml/tipo/tipoDispositivo.ts","../../src/model/lexml/acao/adicionarElementoAction.ts","../../src/model/lexml/acao/AdicionarElementosFromClipboardAction.ts","../../src/model/lexml/acao/agruparElementoAction.ts","../../src/model/lexml/acao/aplicarAlteracoesEmenda.ts","../../src/model/lexml/acao/atualizarReferenciaElementoAction.ts","../../src/model/lexml/acao/atualizarTextoElementoAction.ts","../../src/model/lexml/acao/autoFixAction.ts","../../src/model/lexml/acao/elementoSelecionadoAction.ts","../../src/model/lexml/acao/informarDadosAssistenteAction.ts","../../src/model/lexml/acao/informarExistenciaDoElementoNaNormaAction.ts","../../src/model/lexml/acao/informarNormaAction.ts","../../src/model/lexml/acao/moverElementoAbaixoAction.ts","../../src/model/lexml/acao/moverElementoAcimaAction.ts","../../src/model/lexml/acao/openArticulacaoAction.ts","../../src/model/lexml/acao/removerElementoAction.ts","../../src/model/lexml/acao/renumerarElementoAction.ts","../../src/model/lexml/acao/restaurarElemento.ts","../../src/model/lexml/acao/suprimirAgrupador.ts","../../src/model/lexml/acao/suprimirElemento.ts","../../src/model/lexml/acao/transformarElementoAction.ts","../../src/model/lexml/acao/validarArticulacaoAction.ts","../../src/model/lexml/acao/validarElementoAction.ts","../../src/model/lexml/acao/atualizarNotaAlteracaoAction.ts","../../src/model/lexml/acao/removerElementoSemTextoAction.ts","../../src/model/dispositivo/situacao.ts","../../src/model/lexml/conteudo/textoOmissis.ts","../../src/model/dispositivo/tipo.ts","../../src/model/documento/classificacao.ts","../../src/model/lexml/hierarquia/hierarquiaUtil.ts","../../src/util/tag-node.ts","../../src/emenda/dispositivo-comparator.ts","../../src/emenda/dispositivo-emenda-util.ts","../../src/emenda/comando-emenda-util.ts","../../src/model/lexml/util/mensagem.ts","../../src/model/lexml/conteudo/conteudoUtil.ts","../../src/model/lexml/conteudo/conteudoValidator.ts","../../src/model/dispositivo/genero.ts","../../src/model/lexml/documento/vocabulario.ts","../../src/model/lexml/documento/urnUtil.ts","../../src/model/lexml/numeracao/numeracaoUtil.ts","../../src/model/lexml/numeracao/numeracaoValidator.ts","../../src/model/lexml/dispositivo/dispositivoValidator.ts","../../src/model/lexml/hierarquia/hierarquiaValidator.ts","../../src/model/lexml/situacao/dispositivoSuprimido.ts","../../src/model/lexml/util/idUtil.ts","../../src/model/elemento/elementoUtil.ts","../../src/redux/state.ts","../../src/redux/elemento/reducer/loadArticulacao.ts","../../src/redux/elemento/reducer/abreArticulacao.ts","../../src/util/counter.ts","../../src/model/dispositivo/validacao.ts","../../src/model/lexml/acao/blocoAlteracaoAction.ts","../../src/model/lexml/alteracao/blocoAlteracaoNaoPermitido.ts","../../src/model/lexml/conteudo/tipoConteudo.ts","../../src/model/lexml/conteudo/conteudoDispositivo.ts","../../src/model/lexml/hierarquia/hierarquiaAgrupador.ts","../../src/model/lexml/hierarquia/hierarquiaDispositivo.ts","../../src/model/lexml/numeracao/numeracaoAgrupador.ts","../../src/model/lexml/numeracao/numeracaoIndisponivel.ts","../../src/model/lexml/acao/adicionarTextoOmissisAction.ts","../../src/model/lexml/acao/removerTextoOmissisAction.ts","../../src/model/lexml/acao/aceitarRevisaoAction.ts","../../src/model/lexml/acao/rejeitarRevisaoAction.ts","../../src/model/lexml/acao/exibirDiferencaAction.ts","../../src/model/lexml/acao/index.ts","../../src/model/lexml/regras/regrasUtil.ts","../../src/redux/elemento/util/stateReducerUtil.ts","../../src/model/lexml/acao/acaoUtil.ts","../../src/model/lexml/regras/regrasAgrupadores.ts","../../src/model/lexml/situacao/dispositivoNovo.ts","../../src/model/lexml/situacao/dispositivoAdicionado.ts","../../src/model/lexml/situacao/situacaoDispositivo.ts","../../src/model/lexml/tipo/tipoLexml.ts","../../src/model/lexml/dispositivo/dispositivoLexmlUtil.ts","../../src/model/lexml/dispositivo/dispositivoLexmlFactory.ts","../../src/model/lexml/regras/regrasAlinea.ts","../../src/model/lexml/numeracao/numeracaoAlinea.ts","../../src/model/lexml/regras/regrasArtigo.ts","../../src/model/lexml/alteracao/BlocoAlteracaoPermitido.ts","../../src/model/lexml/numeracao/numeracaoArtigo.ts","../../src/model/lexml/hierarquia/hierarquiaArtigo.ts","../../src/model/lexml/tipo/tipoArtigo.ts","../../src/model/lexml/regras/regrasCaput.ts","../../src/model/lexml/numeracao/numeracaoCaput.ts","../../src/model/lexml/regras/regrasDispositivoGenerico.ts","../../src/model/lexml/numeracao/numeracaoGenerico.ts","../../src/model/lexml/regras/regrasInciso.ts","../../src/model/lexml/numeracao/numeracaoInciso.ts","../../src/model/lexml/regras/regrasItem.ts","../../src/model/lexml/numeracao/numeracaoItem.ts","../../src/model/lexml/regras/regrasParagrafo.ts","../../src/model/lexml/numeracao/numeracaoParagrafo.ts","../../src/model/lexml/tipo/tipoArticulacao.ts","../../src/model/lexml/regras/regrasOmissis.ts","../../src/model/lexml/conteudo/conteudoOmissis.ts","../../src/model/lexml/regras/regrasEmenta.ts","../../src/model/lexml/numeracao/parserReferenciaDispositivo.ts","../../src/model/lexml/acao/ativarDesativarRevisaoAction.ts","../../src/redux/elemento/enum/enumUtil.ts","../../src/redux/elemento/util/revisaoUtil.ts","../../src/model/lexml/situacao/dispositivoOriginal.ts","../../src/redux/elemento/util/reducerUtil.ts","../../src/redux/elemento/evento/eventosUtil.ts","../../src/redux/elemento/evento/eventos.ts","../../src/redux/elemento/reducer/adicionaAlteracaoComAssistente.ts","../../src/redux/elemento/reducer/adicionaElemento.ts","../../src/redux/elemento/reducer/agrupaElemento.ts","../../src/model/lexml/situacao/dispositivoModificado.ts","../../src/redux/elemento/reducer/aplicaAlteracoesEmenda.ts","../../src/redux/elemento/reducer/atualizaReferenciaElemento.ts","../../src/redux/elemento/reducer/atualizaTextoElemento.ts","../../src/redux/elemento/reducer/solicitaNorma.ts","../../src/redux/elemento/reducer/informaExistenciaDoElementoNaNorma.ts","../../src/redux/elemento/reducer/transformaTipoElemento.ts","../../src/redux/elemento/reducer/removeElemento.ts","../../src/redux/elemento/util/undoRedoReducerUtil.ts","../../src/redux/elemento/reducer/redo.ts","../../src/redux/elemento/reducer/removeElementoSemTexto.ts","../../src/redux/elemento/reducer/renumeraElemento.ts","../../src/redux/elemento/reducer/restauraElemento.ts","../../src/redux/elemento/reducer/suprimeElemento.ts","../../src/redux/elemento/reducer/undo.ts","../../src/model/lexml/documento/conversor/buildProjetoNormaFromJsonix.ts","../../src/model/lexml/documento/conversor/buildDispositivoFromJsonix.ts","../../src/redux/elemento/util/colarUtil.ts","../../src/redux/elemento/reducer/adicionaElementosNaProposicaoFromClipboard.ts","../../src/redux/elemento/reducer/ativaDesativaRevisao.ts","../../src/model/revisao/revisao.ts","../../src/util/date-util.ts","../../src/model/lexml/acao/atualizarUsuarioAction.ts","../../src/redux/elemento/reducer/atualizaRevisao.ts","../../src/redux/elemento/reducer/aceitaRevisao.ts","../../src/redux/elemento/reducer/rejeitaRevisao.ts","../../src/model/lexml/acao/limparRevisoes.ts","../../src/model/lexml/acao/errorInicializarEdicaoAction.ts","../../src/redux/elemento/reducer/elementoReducer.ts","../../src/model/lexml/acao/redoAction.ts","../../src/redux/store.ts","../../src/redux/app/appReducer.ts","../../src/redux/elemento/reducer/atualizaNotaAlteracao.ts","../../src/model/lexml/acao/atualizarElementoAction.ts","../../src/redux/elemento/reducer/atualizaElemento.ts","../../src/redux/elemento/reducer/autoFixElemento.ts","../../src/redux/elemento/reducer/selecionaElemento.ts","../../src/redux/elemento/reducer/solicitaDadosAssistente.ts","../../src/redux/elemento/reducer/moveElementoAbaixo.ts","../../src/redux/elemento/reducer/moveElementoAcima.ts","../../src/redux/elemento/reducer/suprimeAgrupador.ts","../../src/model/lexml/acao/shiftTabAction.ts","../../src/model/lexml/acao/tabAction.ts","../../src/redux/elemento/reducer/modificaTipoElementoWithTab.ts","../../src/model/lexml/acao/undoAction.ts","../../src/redux/elemento/reducer/validaElemento.ts","../../src/redux/elemento/reducer/validaArticulacao.ts","../../src/redux/elemento/reducer/adicionarAlerta.ts","../../src/redux/elemento/reducer/removeAlerta.ts","../../src/model/alerta/acao/limparAlertas.ts","../../src/redux/elemento/reducer/limparAlertas.ts","../../src/redux/elemento/reducer/atualizaUsuario.ts","../../src/redux/elemento/reducer/limpaRevisao.ts","../../src/redux/elemento/reducer/erroInicializaEdicao.ts","../../src/redux/elemento/reducer/adicionaDiffMenuOpcoes.ts","../../src/components/articulacao.component.ts","../node_modules/lit-html/directive.js","../node_modules/lit-html/directives/unsafe-html.js","../../src/components/comandoEmenda/comandoEmenda.component.ts","../../src/util/observable.ts","../../src/components/editor/colarTextoArticuladoDialog.ts","../../src/model/elemento/elemento.ts","../../src/util/eta-quill/eta-blot.ts","../../src/util/eta-quill/eta-blot-menu.ts","../../src/util/eta-quill/eta-blot-menu-botao.ts","../../src/util/eta-quill/eta-blot-menu-conteudo.ts","../../src/util/eta-quill/eta-blot-menu-item.ts","../../src/util/eta-quill/eta-blot-rotulo.ts","../../src/util/eta-quill/eta-blot-abre-aspas.ts","../../src/util/eta-quill/eta-blot-revisao-recusar.ts","../../src/util/eta-quill/eta-blot-revisao-aceitar.ts","../../src/util/eta-quill/eta-container.ts","../../src/util/eta-quill/eta-blot-revisao.ts","../../src/util/eta-quill/eta-container-revisao.ts","../../src/util/eta-quill/eta-blot-quebra-linha.ts","../../src/util/eta-quill/eta-blot-tipo-omissis.ts","../../src/util/eta-quill/eta-blot-existencia.ts","../../src/util/eta-quill/eta-blot-fecha-aspas.ts","../../src/util/eta-quill/eta-blot-nota-alteracao.ts","../../src/util/eta-quill/eta-blot-espaco.ts","../../src/util/eta-quill/eta-blot-mensagem.ts","../../src/util/eta-quill/eta-container-td-direito.ts","../../src/util/eta-quill/eta-container-td-esquerdo.ts","../../src/util/eta-quill/eta-container-tr.ts","../../src/util/eta-quill/eta-blot-opcoes-diff.ts","../../src/util/eta-quill/eta-container-opcoes.ts","../../src/util/eta-quill/eta-quill-util.ts","../../src/util/eta-quill/eta-blot-conteudo.ts","../../src/util/eta-quill/eta-container-table.ts","../../src/util/event-util.ts","../../src/util/eta-quill/eta-keyboard.ts","../../assets/icons/icons.ts","../../src/util/eta-quill/eta-blot-conteudo-omissis.ts","../../src/util/eta-quill/eta-blot-mensagens.ts","../../src/util/eta-quill/eta-clipboard.ts","../../src/util/eta-quill/eta-quill-buffer.ts","../../src/util/eta-quill/eta-quill.ts","../../src/model/emenda/norma.ts","../../src/components/editor/autocomplete-async.ts","../../src/components/editor/autocomplete-norma.ts","../../src/components/editor/assistenteAlteracaoDialog.ts","../../src/components/editor/editarNotaAlteracaoDialog.ts","../../src/components/editor/exibirDiferencaDialog.ts","../../src/redux/elemento/util/alertaUtil.ts","../../src/components/editor/editor.component.ts","../../src/components/editor/adicionarAgrupadorArtigoDialog.ts","../../src/model/lexml/acao/transformarAction.ts","../../src/components/editor/informarNormaDialog.ts","../../src/components/elemento/elemento.component.ts","../../src/components/ajuda/atalhos.component.ts","../../src/components/editor-texto-rico/editor-texto-rico.css.ts","../../src/components/editor-texto-rico/quill.table.css.ts","../src/assets/js/quill1-table/js/ContainBlot.js","../src/assets/js/quill1-table/js/TableCellBlot.js","../src/assets/js/quill1-table/js/TableHistory.js","../src/assets/js/quill1-table/js/TableToolbar.js","../src/assets/js/quill1-table/js/TableSelection.js","../src/assets/js/quill1-table/js/TableTrick.js","../src/assets/js/quill1-table/js/TableRowBlot.js","../src/assets/js/quill1-table/js/TableBlot.js","../src/assets/js/quill1-table/index.js","../../src/components/editor-texto-rico/notaRodape.css.ts","../../src/redux/elemento/reducer/atualizaRevisaoJustificativa.ts","../../src/redux/elemento/reducer/atualizaRevisaoTextoLivre.ts","../../src/components/editor-texto-rico/editor-texto-rico.component.ts","../../src/components/editor-texto-rico/menu-imagem.ts","../../src/components/editor-texto-rico/texto-rico-util.ts","../../src/components/editor-texto-rico/uploadAnexoDialog.ts","../../src/components/editor-texto-rico/alterar-largura-tabela-coluna-modal.ts","../../src/components/editor-texto-rico/alterar-largura-imagem-modal.ts","../../src/assets/css/shoelace.theme.light.css.ts","../../src/model/emenda/emenda.ts","../../src/emenda/citacao-cmd-multipla-de-norma-vigente.ts","../../src/emenda/citacao-cmd-de-norma-vigente.ts","../../src/emenda/citacao-cmd-multipla.ts","../../src/emenda/citacao-cmd-disp-prj.ts","../../src/util/objeto-util.ts","../../src/emenda/range-dispositivos.ts","../../src/emenda/sequencia-range-dispositivos.ts","../../src/emenda/agrupador-dispositivos-cmd-emd.ts","../../src/emenda/cmd-emd-combinavel.ts","../../src/emenda/dispositivos-writer-cmd-emd.ts","../../src/emenda/cmd-emd-adicao-a-norma-vigente.ts","../../src/emenda/cmd-emd-modificacao-de-norma-vigente.ts","../../src/emenda/cmd-emd-supressao-norma-vigente.ts","../../src/emenda/cmd-emd-disp-norma-vigente.ts","../../src/emenda/cmd-emd-adicao.ts","../../src/emenda/cmd-emd-adicao-dispositivos-onde-couber.ts","../../src/emenda/cmd-emd-modificacao.ts","../../src/emenda/cmd-emd-supressao.ts","../../src/emenda/cmd-emd-disp-prj.ts","../../src/emenda/cmd-emd-substituicao-termo.ts","../../src/emenda/comando-emenda-builder.ts","../../src/emenda/dispositivos-emenda-builder.ts","../../src/model/lexml/documento/conversor/buildJsonixFromProjetoNorma.ts","../../src/model/lexml/documento/modelo/documentoPadrao.ts","../../src/components/lexml-eta.component.ts","../../src/model/autoria/parlamentarUtil.ts","../../src/assets/css/autoria.css.ts","../../src/components/autoria/autoria.component.ts","../../src/components/destino/destino.component.ts","../../src/components/lexml-autocomplete.ts","../../src/components/data/data.component.ts","../../src/model/revisao/usuario.ts","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.7PNSFSF6.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.6CJ2UUVA.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.55G5Z2SG.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.FDP56HU3.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.XGXDQT2J.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.KFR7NC2M.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.65B3FMMQ.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.ETKBJAAO.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.O4OVHSBA.js","../../src/assets/css/editor.css.ts","../../src/components/lexml-emenda.component.ts","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.JXDWJJGV.js","../node_modules/@shoelace-style/shoelace/dist/chunks/chunk.Y5PHNPSL.js","../../src/components/alertas/alertas.component.ts","../../src/components/ajuda/ajuda.component.ts","../../src/components/ajuda/ajuda.modal.component.ts","../../src/components/sufixos/sufixos.modal.componet.ts","../../src/components/comandoEmenda/comandoEmenda.modal.component.ts","../../src/components/ajuda/atalhos.modal.component.ts","../../src/components/opcoesImpressao/opcoesImpressao.component.ts","../../src/components/switchRevisao/switch-revisao.component.ts","../../src/components/substituicao-termo/substituicao-termo.component.ts","../../src/index.ts"],"sourcesContent":["/*!\n * Quill Editor v1.3.7\n * https://quilljs.com/\n * Copyright (c) 2014, Jason Chen\n * Copyright (c) 2013, salesforce.com\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 109);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar format_1 = __webpack_require__(18);\nvar leaf_1 = __webpack_require__(19);\nvar scroll_1 = __webpack_require__(45);\nvar inline_1 = __webpack_require__(46);\nvar block_1 = __webpack_require__(47);\nvar embed_1 = __webpack_require__(48);\nvar text_1 = __webpack_require__(49);\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar store_1 = __webpack_require__(31);\nvar Registry = __webpack_require__(1);\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar diff = __webpack_require__(51);\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\nvar op = __webpack_require__(20);\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var ops = [];\n  var firstOther = otherIter.peek();\n  if (firstOther != null && typeof firstOther.retain === 'number' && firstOther.attributes == null) {\n    var firstLeft = firstOther.retain;\n    while (thisIter.peekType() === 'insert' && thisIter.peekLength() <= firstLeft) {\n      firstLeft -= thisIter.peekLength();\n      ops.push(thisIter.next());\n    }\n    if (firstOther.retain - firstLeft > 0) {\n      otherIter.next(firstOther.retain - firstLeft);\n    }\n  }\n  var delta = new Delta(ops);\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n\n        // Optimization if rest of other is just retain\n        if (!otherIter.hasNext() && equal(delta.ops[delta.ops.length - 1], newOp)) {\n          var rest = new Delta(thisIter.rest());\n          return delta.concat(rest).chop();\n        }\n\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BlockEmbed = exports.bubbleFormats = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar NEWLINE_LENGTH = 1;\n\nvar BlockEmbed = function (_Parchment$Embed) {\n  _inherits(BlockEmbed, _Parchment$Embed);\n\n  function BlockEmbed() {\n    _classCallCheck(this, BlockEmbed);\n\n    return _possibleConstructorReturn(this, (BlockEmbed.__proto__ || Object.getPrototypeOf(BlockEmbed)).apply(this, arguments));\n  }\n\n  _createClass(BlockEmbed, [{\n    key: 'attach',\n    value: function attach() {\n      _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'attach', this).call(this);\n      this.attributes = new _parchment2.default.Attributor.Store(this.domNode);\n    }\n  }, {\n    key: 'delta',\n    value: function delta() {\n      return new _quillDelta2.default().insert(this.value(), (0, _extend2.default)(this.formats(), this.attributes.values()));\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var attribute = _parchment2.default.query(name, _parchment2.default.Scope.BLOCK_ATTRIBUTE);\n      if (attribute != null) {\n        this.attributes.attribute(attribute, value);\n      }\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      this.format(name, value);\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (typeof value === 'string' && value.endsWith('\\n')) {\n        var block = _parchment2.default.create(Block.blotName);\n        this.parent.insertBefore(block, index === 0 ? this : this.next);\n        block.insertAt(0, value.slice(0, -1));\n      } else {\n        _get(BlockEmbed.prototype.__proto__ || Object.getPrototypeOf(BlockEmbed.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n    }\n  }]);\n\n  return BlockEmbed;\n}(_parchment2.default.Embed);\n\nBlockEmbed.scope = _parchment2.default.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nvar Block = function (_Parchment$Block) {\n  _inherits(Block, _Parchment$Block);\n\n  function Block(domNode) {\n    _classCallCheck(this, Block);\n\n    var _this2 = _possibleConstructorReturn(this, (Block.__proto__ || Object.getPrototypeOf(Block)).call(this, domNode));\n\n    _this2.cache = {};\n    return _this2;\n  }\n\n  _createClass(Block, [{\n    key: 'delta',\n    value: function delta() {\n      if (this.cache.delta == null) {\n        this.cache.delta = this.descendants(_parchment2.default.Leaf).reduce(function (delta, leaf) {\n          if (leaf.length() === 0) {\n            return delta;\n          } else {\n            return delta.insert(leaf.value(), bubbleFormats(leaf));\n          }\n        }, new _quillDelta2.default()).insert('\\n', bubbleFormats(this));\n      }\n      return this.cache.delta;\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'deleteAt', this).call(this, index, length);\n      this.cache = {};\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length <= 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n        if (index + length === this.length()) {\n          this.format(name, value);\n        }\n      } else {\n        _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'formatAt', this).call(this, index, Math.min(length, this.length() - index - 1), name, value);\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, index, value, def);\n      if (value.length === 0) return;\n      var lines = value.split('\\n');\n      var text = lines.shift();\n      if (text.length > 0) {\n        if (index < this.length() - 1 || this.children.tail == null) {\n          _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertAt', this).call(this, Math.min(index, this.length() - 1), text);\n        } else {\n          this.children.tail.insertAt(this.children.tail.length(), text);\n        }\n        this.cache = {};\n      }\n      var block = this;\n      lines.reduce(function (index, line) {\n        block = block.split(index, true);\n        block.insertAt(0, line);\n        return line.length;\n      }, index + text.length);\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      var head = this.children.head;\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'insertBefore', this).call(this, blot, ref);\n      if (head instanceof _break2.default) {\n        head.remove();\n      }\n      this.cache = {};\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      if (this.cache.length == null) {\n        this.cache.length = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'length', this).call(this) + NEWLINE_LENGTH;\n      }\n      return this.cache.length;\n    }\n  }, {\n    key: 'moveChildren',\n    value: function moveChildren(target, ref) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'moveChildren', this).call(this, target, ref);\n      this.cache = {};\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'optimize', this).call(this, context);\n      this.cache = {};\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'path', this).call(this, index, true);\n    }\n  }, {\n    key: 'removeChild',\n    value: function removeChild(child) {\n      _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'removeChild', this).call(this, child);\n      this.cache = {};\n    }\n  }, {\n    key: 'split',\n    value: function split(index) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n        var clone = this.clone();\n        if (index === 0) {\n          this.parent.insertBefore(clone, this);\n          return this;\n        } else {\n          this.parent.insertBefore(clone, this.next);\n          return clone;\n        }\n      } else {\n        var next = _get(Block.prototype.__proto__ || Object.getPrototypeOf(Block.prototype), 'split', this).call(this, index, force);\n        this.cache = {};\n        return next;\n      }\n    }\n  }]);\n\n  return Block;\n}(_parchment2.default.Block);\n\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [_inline2.default, _parchment2.default.Embed, _text2.default];\n\nfunction bubbleFormats(blot) {\n  var formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = (0, _extend2.default)(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\nexports.bubbleFormats = bubbleFormats;\nexports.BlockEmbed = BlockEmbed;\nexports.default = Block;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.overload = exports.expandConfig = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n__webpack_require__(50);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _editor = __webpack_require__(14);\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _selection = __webpack_require__(15);\n\nvar _selection2 = _interopRequireDefault(_selection);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill');\n\nvar Quill = function () {\n  _createClass(Quill, null, [{\n    key: 'debug',\n    value: function debug(limit) {\n      if (limit === true) {\n        limit = 'log';\n      }\n      _logger2.default.level(limit);\n    }\n  }, {\n    key: 'find',\n    value: function find(node) {\n      return node.__quill || _parchment2.default.find(node);\n    }\n  }, {\n    key: 'import',\n    value: function _import(name) {\n      if (this.imports[name] == null) {\n        debug.error('Cannot import ' + name + '. Are you sure it was registered?');\n      }\n      return this.imports[name];\n    }\n  }, {\n    key: 'register',\n    value: function register(path, target) {\n      var _this = this;\n\n      var overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (typeof path !== 'string') {\n        var name = path.attrName || path.blotName;\n        if (typeof name === 'string') {\n          // register(Blot | Attributor, overwrite)\n          this.register('formats/' + name, path, target);\n        } else {\n          Object.keys(path).forEach(function (key) {\n            _this.register(key, path[key], target);\n          });\n        }\n      } else {\n        if (this.imports[path] != null && !overwrite) {\n          debug.warn('Overwriting ' + path + ' with', target);\n        }\n        this.imports[path] = target;\n        if ((path.startsWith('blots/') || path.startsWith('formats/')) && target.blotName !== 'abstract') {\n          _parchment2.default.register(target);\n        } else if (path.startsWith('modules') && typeof target.register === 'function') {\n          target.register();\n        }\n      }\n    }\n  }]);\n\n  function Quill(container) {\n    var _this2 = this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Quill);\n\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    var html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new _emitter4.default();\n    this.scroll = _parchment2.default.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new _editor2.default(this.scroll);\n    this.selection = new _selection2.default(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type) {\n      if (type === _emitter4.default.events.TEXT_CHANGE) {\n        _this2.root.classList.toggle('ql-blank', _this2.editor.isBlank());\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_UPDATE, function (source, mutations) {\n      var range = _this2.selection.lastRange;\n      var index = range && range.length === 0 ? range.index : undefined;\n      modify.call(_this2, function () {\n        return _this2.editor.update(null, mutations, index);\n      }, source);\n    });\n    var contents = this.clipboard.convert('<div class=\\'ql-editor\\' style=\"white-space: normal;\">' + html + '<p><br></p></div>');\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  _createClass(Quill, [{\n    key: 'addContainer',\n    value: function addContainer(container) {\n      var refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (typeof container === 'string') {\n        var className = container;\n        container = document.createElement('div');\n        container.classList.add(className);\n      }\n      this.container.insertBefore(container, refNode);\n      return container;\n    }\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.selection.setRange(null);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length, source) {\n      var _this3 = this;\n\n      var _overload = overload(index, length, source);\n\n      var _overload2 = _slicedToArray(_overload, 4);\n\n      index = _overload2[0];\n      length = _overload2[1];\n      source = _overload2[3];\n\n      return modify.call(this, function () {\n        return _this3.editor.deleteText(index, length);\n      }, source, index, -1 * length);\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      this.enable(false);\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.scroll.enable(enabled);\n      this.container.classList.toggle('ql-disabled', !enabled);\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      var scrollTop = this.scrollingContainer.scrollTop;\n      this.selection.focus();\n      this.scrollingContainer.scrollTop = scrollTop;\n      this.scrollIntoView();\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      var _this4 = this;\n\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        var range = _this4.getSelection(true);\n        var change = new _quillDelta2.default();\n        if (range == null) {\n          return change;\n        } else if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK)) {\n          change = _this4.editor.formatLine(range.index, range.length, _defineProperty({}, name, value));\n        } else if (range.length === 0) {\n          _this4.selection.format(name, value);\n          return change;\n        } else {\n          change = _this4.editor.formatText(range.index, range.length, _defineProperty({}, name, value));\n        }\n        _this4.setSelection(range, _emitter4.default.sources.SILENT);\n        return change;\n      }, source);\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length, name, value, source) {\n      var _this5 = this;\n\n      var formats = void 0;\n\n      var _overload3 = overload(index, length, name, value, source);\n\n      var _overload4 = _slicedToArray(_overload3, 4);\n\n      index = _overload4[0];\n      length = _overload4[1];\n      formats = _overload4[2];\n      source = _overload4[3];\n\n      return modify.call(this, function () {\n        return _this5.editor.formatLine(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length, name, value, source) {\n      var _this6 = this;\n\n      var formats = void 0;\n\n      var _overload5 = overload(index, length, name, value, source);\n\n      var _overload6 = _slicedToArray(_overload5, 4);\n\n      index = _overload6[0];\n      length = _overload6[1];\n      formats = _overload6[2];\n      source = _overload6[3];\n\n      return modify.call(this, function () {\n        return _this6.editor.formatText(index, length, formats);\n      }, source, index, 0);\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var bounds = void 0;\n      if (typeof index === 'number') {\n        bounds = this.selection.getBounds(index, length);\n      } else {\n        bounds = this.selection.getBounds(index.index, index.length);\n      }\n      var containerBounds = this.container.getBoundingClientRect();\n      return {\n        bottom: bounds.bottom - containerBounds.top,\n        height: bounds.height,\n        left: bounds.left - containerBounds.left,\n        right: bounds.right - containerBounds.left,\n        top: bounds.top - containerBounds.top,\n        width: bounds.width\n      };\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload7 = overload(index, length);\n\n      var _overload8 = _slicedToArray(_overload7, 2);\n\n      index = _overload8[0];\n      length = _overload8[1];\n\n      return this.editor.getContents(index, length);\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      if (typeof index === 'number') {\n        return this.editor.getFormat(index, length);\n      } else {\n        return this.editor.getFormat(index.index, index.length);\n      }\n    }\n  }, {\n    key: 'getIndex',\n    value: function getIndex(blot) {\n      return blot.offset(this.scroll);\n    }\n  }, {\n    key: 'getLength',\n    value: function getLength() {\n      return this.scroll.length();\n    }\n  }, {\n    key: 'getLeaf',\n    value: function getLeaf(index) {\n      return this.scroll.leaf(index);\n    }\n  }, {\n    key: 'getLine',\n    value: function getLine(index) {\n      return this.scroll.line(index);\n    }\n  }, {\n    key: 'getLines',\n    value: function getLines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      if (typeof index !== 'number') {\n        return this.scroll.lines(index.index, index.length);\n      } else {\n        return this.scroll.lines(index, length);\n      }\n    }\n  }, {\n    key: 'getModule',\n    value: function getModule(name) {\n      return this.theme.modules[name];\n    }\n  }, {\n    key: 'getSelection',\n    value: function getSelection() {\n      var focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (focus) this.focus();\n      this.update(); // Make sure we access getRange with editor in consistent state\n      return this.selection.getRange()[0];\n    }\n  }, {\n    key: 'getText',\n    value: function getText() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n\n      var _overload9 = overload(index, length);\n\n      var _overload10 = _slicedToArray(_overload9, 2);\n\n      index = _overload10[0];\n      length = _overload10[1];\n\n      return this.editor.getText(index, length);\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return this.selection.hasFocus();\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      var _this7 = this;\n\n      var source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n\n      return modify.call(this, function () {\n        return _this7.editor.insertEmbed(index, embed, value);\n      }, source, index);\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text, name, value, source) {\n      var _this8 = this;\n\n      var formats = void 0;\n\n      var _overload11 = overload(index, 0, name, value, source);\n\n      var _overload12 = _slicedToArray(_overload11, 4);\n\n      index = _overload12[0];\n      formats = _overload12[2];\n      source = _overload12[3];\n\n      return modify.call(this, function () {\n        return _this8.editor.insertText(index, text, formats);\n      }, source, index, text.length);\n    }\n  }, {\n    key: 'isEnabled',\n    value: function isEnabled() {\n      return !this.container.classList.contains('ql-disabled');\n    }\n  }, {\n    key: 'off',\n    value: function off() {\n      return this.emitter.off.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'on',\n    value: function on() {\n      return this.emitter.on.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'once',\n    value: function once() {\n      return this.emitter.once.apply(this.emitter, arguments);\n    }\n  }, {\n    key: 'pasteHTML',\n    value: function pasteHTML(index, html, source) {\n      this.clipboard.dangerouslyPasteHTML(index, html, source);\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length, source) {\n      var _this9 = this;\n\n      var _overload13 = overload(index, length, source);\n\n      var _overload14 = _slicedToArray(_overload13, 4);\n\n      index = _overload14[0];\n      length = _overload14[1];\n      source = _overload14[3];\n\n      return modify.call(this, function () {\n        return _this9.editor.removeFormat(index, length);\n      }, source, index);\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView() {\n      this.selection.scrollIntoView(this.scrollingContainer);\n    }\n  }, {\n    key: 'setContents',\n    value: function setContents(delta) {\n      var _this10 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        var length = _this10.getLength();\n        var deleted = _this10.editor.deleteText(0, length);\n        var applied = _this10.editor.applyDelta(delta);\n        var lastOp = applied.ops[applied.ops.length - 1];\n        if (lastOp != null && typeof lastOp.insert === 'string' && lastOp.insert[lastOp.insert.length - 1] === '\\n') {\n          _this10.editor.deleteText(_this10.getLength() - 1, 1);\n          applied.delete(1);\n        }\n        var ret = deleted.compose(applied);\n        return ret;\n      }, source);\n    }\n  }, {\n    key: 'setSelection',\n    value: function setSelection(index, length, source) {\n      if (index == null) {\n        this.selection.setRange(null, length || Quill.sources.API);\n      } else {\n        var _overload15 = overload(index, length, source);\n\n        var _overload16 = _slicedToArray(_overload15, 4);\n\n        index = _overload16[0];\n        length = _overload16[1];\n        source = _overload16[3];\n\n        this.selection.setRange(new _selection.Range(index, length), source);\n        if (source !== _emitter4.default.sources.SILENT) {\n          this.selection.scrollIntoView(this.scrollingContainer);\n        }\n      }\n    }\n  }, {\n    key: 'setText',\n    value: function setText(text) {\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      var delta = new _quillDelta2.default().insert(text);\n      return this.setContents(delta, source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n      this.selection.update(source);\n      return change;\n    }\n  }, {\n    key: 'updateContents',\n    value: function updateContents(delta) {\n      var _this11 = this;\n\n      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _emitter4.default.sources.API;\n\n      return modify.call(this, function () {\n        delta = new _quillDelta2.default(delta);\n        return _this11.editor.applyDelta(delta, source);\n      }, source, true);\n    }\n  }]);\n\n  return Quill;\n}();\n\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = _emitter4.default.events;\nQuill.sources = _emitter4.default.sources;\n// eslint-disable-next-line no-undef\nQuill.version =  false ? 'dev' : \"1.3.7\";\n\nQuill.imports = {\n  'delta': _quillDelta2.default,\n  'parchment': _parchment2.default,\n  'core/module': _module2.default,\n  'core/theme': _theme2.default\n};\n\nfunction expandConfig(container, userConfig) {\n  userConfig = (0, _extend2.default)(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = _theme2.default;\n  } else {\n    userConfig.theme = Quill.import('themes/' + userConfig.theme);\n    if (userConfig.theme == null) {\n      throw new Error('Invalid theme ' + userConfig.theme + '. Did you register it?');\n    }\n  }\n  var themeConfig = (0, _extend2.default)(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function (config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function (module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  var moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  var moduleConfig = moduleNames.reduce(function (config, name) {\n    var moduleClass = Quill.import('modules/' + name);\n    if (moduleClass == null) {\n      debug.error('Cannot load ' + name + ' module. Are you sure you registered it?');\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar && userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = (0, _extend2.default)(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function (key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function (config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === _emitter4.default.sources.USER) {\n    return new _quillDelta2.default();\n  }\n  var range = index == null ? null : this.getSelection();\n  var oldDelta = this.editor.delta;\n  var change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, _emitter4.default.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    var _emitter;\n\n    var args = [_emitter4.default.events.TEXT_CHANGE, change, oldDelta, source];\n    (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n    if (source !== _emitter4.default.sources.SILENT) {\n      var _emitter2;\n\n      (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  var formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || _emitter4.default.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  var start = void 0,\n      end = void 0;\n  if (index instanceof _quillDelta2.default) {\n    var _map = [range.index, range.index + range.length].map(function (pos) {\n      return index.transformPosition(pos, source !== _emitter4.default.sources.USER);\n    });\n\n    var _map2 = _slicedToArray(_map, 2);\n\n    start = _map2[0];\n    end = _map2[1];\n  } else {\n    var _map3 = [range.index, range.index + range.length].map(function (pos) {\n      if (pos < index || pos === index && source === _emitter4.default.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n\n    var _map4 = _slicedToArray(_map3, 2);\n\n    start = _map4[0];\n    end = _map4[1];\n  }\n  return new _selection.Range(start, end - start);\n}\n\nexports.expandConfig = expandConfig;\nexports.overload = overload;\nexports.default = Quill;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Inline = function (_Parchment$Inline) {\n  _inherits(Inline, _Parchment$Inline);\n\n  function Inline() {\n    _classCallCheck(this, Inline);\n\n    return _possibleConstructorReturn(this, (Inline.__proto__ || Object.getPrototypeOf(Inline)).apply(this, arguments));\n  }\n\n  _createClass(Inline, [{\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (Inline.compare(this.statics.blotName, name) < 0 && _parchment2.default.query(name, _parchment2.default.Scope.BLOT)) {\n        var blot = this.isolate(index, length);\n        if (value) {\n          blot.wrap(name, value);\n        }\n      } else {\n        _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'formatAt', this).call(this, index, length, name, value);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Inline.prototype.__proto__ || Object.getPrototypeOf(Inline.prototype), 'optimize', this).call(this, context);\n      if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n        var parent = this.parent.isolate(this.offset(), this.length());\n        this.moveChildren(parent);\n        parent.wrap(this);\n      }\n    }\n  }], [{\n    key: 'compare',\n    value: function compare(self, other) {\n      var selfIndex = Inline.order.indexOf(self);\n      var otherIndex = Inline.order.indexOf(other);\n      if (selfIndex >= 0 || otherIndex >= 0) {\n        return selfIndex - otherIndex;\n      } else if (self === other) {\n        return 0;\n      } else if (self < other) {\n        return -1;\n      } else {\n        return 1;\n      }\n    }\n  }]);\n\n  return Inline;\n}(_parchment2.default.Inline);\n\nInline.allowedChildren = [Inline, _parchment2.default.Embed, _text2.default];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = ['cursor', 'inline', // Must be lower\n'underline', 'strike', 'italic', 'bold', 'script', 'link', 'code' // Must be higher\n];\n\nexports.default = Inline;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TextBlot = function (_Parchment$Text) {\n  _inherits(TextBlot, _Parchment$Text);\n\n  function TextBlot() {\n    _classCallCheck(this, TextBlot);\n\n    return _possibleConstructorReturn(this, (TextBlot.__proto__ || Object.getPrototypeOf(TextBlot)).apply(this, arguments));\n  }\n\n  return TextBlot;\n}(_parchment2.default.Text);\n\nexports.default = TextBlot;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _eventemitter = __webpack_require__(54);\n\nvar _eventemitter2 = _interopRequireDefault(_eventemitter);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:events');\n\nvar EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(function (eventName) {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    [].slice.call(document.querySelectorAll('.ql-container')).forEach(function (node) {\n      // TODO use WeakMap\n      if (node.__quill && node.__quill.emitter) {\n        var _node$__quill$emitter;\n\n        (_node$__quill$emitter = node.__quill.emitter).handleDOM.apply(_node$__quill$emitter, args);\n      }\n    });\n  });\n});\n\nvar Emitter = function (_EventEmitter) {\n  _inherits(Emitter, _EventEmitter);\n\n  function Emitter() {\n    _classCallCheck(this, Emitter);\n\n    var _this = _possibleConstructorReturn(this, (Emitter.__proto__ || Object.getPrototypeOf(Emitter)).call(this));\n\n    _this.listeners = {};\n    _this.on('error', debug.error);\n    return _this;\n  }\n\n  _createClass(Emitter, [{\n    key: 'emit',\n    value: function emit() {\n      debug.log.apply(debug, arguments);\n      _get(Emitter.prototype.__proto__ || Object.getPrototypeOf(Emitter.prototype), 'emit', this).apply(this, arguments);\n    }\n  }, {\n    key: 'handleDOM',\n    value: function handleDOM(event) {\n      for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n\n      (this.listeners[event.type] || []).forEach(function (_ref) {\n        var node = _ref.node,\n            handler = _ref.handler;\n\n        if (event.target === node || node.contains(event.target)) {\n          handler.apply(undefined, [event].concat(args));\n        }\n      });\n    }\n  }, {\n    key: 'listenDOM',\n    value: function listenDOM(eventName, node, handler) {\n      if (!this.listeners[eventName]) {\n        this.listeners[eventName] = [];\n      }\n      this.listeners[eventName].push({ node: node, handler: handler });\n    }\n  }]);\n\n  return Emitter;\n}(_eventemitter2.default);\n\nEmitter.events = {\n  EDITOR_CHANGE: 'editor-change',\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n  SCROLL_OPTIMIZE: 'scroll-optimize',\n  SCROLL_UPDATE: 'scroll-update',\n  SELECTION_CHANGE: 'selection-change',\n  TEXT_CHANGE: 'text-change'\n};\nEmitter.sources = {\n  API: 'api',\n  SILENT: 'silent',\n  USER: 'user'\n};\n\nexports.default = Emitter;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Module = function Module(quill) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  _classCallCheck(this, Module);\n\n  this.quill = quill;\n  this.options = options;\n};\n\nModule.DEFAULTS = {};\n\nexports.default = Module;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar levels = ['error', 'warn', 'log', 'info'];\nvar level = 'warn';\n\nfunction debug(method) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    var _console;\n\n    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    (_console = console)[method].apply(_console, args); // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function (logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function (newLevel) {\n  level = newLevel;\n};\n\nexports.default = namespace;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar pSlice = Array.prototype.slice;\nvar objectKeys = __webpack_require__(52);\nvar isArguments = __webpack_require__(53);\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Code = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Code = function (_Inline) {\n  _inherits(Code, _Inline);\n\n  function Code() {\n    _classCallCheck(this, Code);\n\n    return _possibleConstructorReturn(this, (Code.__proto__ || Object.getPrototypeOf(Code)).apply(this, arguments));\n  }\n\n  return Code;\n}(_inline2.default);\n\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nvar CodeBlock = function (_Block) {\n  _inherits(CodeBlock, _Block);\n\n  function CodeBlock() {\n    _classCallCheck(this, CodeBlock);\n\n    return _possibleConstructorReturn(this, (CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(CodeBlock, [{\n    key: 'delta',\n    value: function delta() {\n      var _this3 = this;\n\n      var text = this.domNode.textContent;\n      if (text.endsWith('\\n')) {\n        // Should always be true\n        text = text.slice(0, -1);\n      }\n      return text.split('\\n').reduce(function (delta, frag) {\n        return delta.insert(frag).insert('\\n', _this3.formats());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (name === this.statics.blotName && value) return;\n\n      var _descendant = this.descendant(_text2.default, this.length() - 1),\n          _descendant2 = _slicedToArray(_descendant, 1),\n          text = _descendant2[0];\n\n      if (text != null) {\n        text.deleteAt(text.length() - 1, 1);\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'format', this).call(this, name, value);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, name, value) {\n      if (length === 0) return;\n      if (_parchment2.default.query(name, _parchment2.default.Scope.BLOCK) == null || name === this.statics.blotName && value === this.statics.formats(this.domNode)) {\n        return;\n      }\n      var nextNewline = this.newlineIndex(index);\n      if (nextNewline < 0 || nextNewline >= index + length) return;\n      var prevNewline = this.newlineIndex(index, true) + 1;\n      var isolateLength = nextNewline - prevNewline + 1;\n      var blot = this.isolate(prevNewline, isolateLength);\n      var next = blot.next;\n      blot.format(name, value);\n      if (next instanceof CodeBlock) {\n        next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n      }\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null) return;\n\n      var _descendant3 = this.descendant(_text2.default, index),\n          _descendant4 = _slicedToArray(_descendant3, 2),\n          text = _descendant4[0],\n          offset = _descendant4[1];\n\n      text.insertAt(offset, value);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      var length = this.domNode.textContent.length;\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        return length + 1;\n      }\n      return length;\n    }\n  }, {\n    key: 'newlineIndex',\n    value: function newlineIndex(searchIndex) {\n      var reverse = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!reverse) {\n        var offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n        return offset > -1 ? searchIndex + offset : -1;\n      } else {\n        return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      if (!this.domNode.textContent.endsWith('\\n')) {\n        this.appendChild(_parchment2.default.create('text', '\\n'));\n      }\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n        next.optimize(context);\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      _get(CodeBlock.prototype.__proto__ || Object.getPrototypeOf(CodeBlock.prototype), 'replace', this).call(this, target);\n      [].slice.call(this.domNode.querySelectorAll('*')).forEach(function (node) {\n        var blot = _parchment2.default.find(node);\n        if (blot == null) {\n          node.parentNode.removeChild(node);\n        } else if (blot instanceof _parchment2.default.Embed) {\n          blot.remove();\n        } else {\n          blot.unwrap();\n        }\n      });\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var domNode = _get(CodeBlock.__proto__ || Object.getPrototypeOf(CodeBlock), 'create', this).call(this, value);\n      domNode.setAttribute('spellcheck', false);\n      return domNode;\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return CodeBlock;\n}(_block2.default);\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\nexports.Code = Code;\nexports.default = CodeBlock;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ASCII = /^[ -~]*$/;\n\nvar Editor = function () {\n  function Editor(scroll) {\n    _classCallCheck(this, Editor);\n\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  _createClass(Editor, [{\n    key: 'applyDelta',\n    value: function applyDelta(delta) {\n      var _this = this;\n\n      var consumeNextNewline = false;\n      this.scroll.update();\n      var scrollLength = this.scroll.length();\n      this.scroll.batchStart();\n      delta = normalizeDelta(delta);\n      delta.reduce(function (index, op) {\n        var length = op.retain || op.delete || op.insert.length || 1;\n        var attributes = op.attributes || {};\n        if (op.insert != null) {\n          if (typeof op.insert === 'string') {\n            var text = op.insert;\n            if (text.endsWith('\\n') && consumeNextNewline) {\n              consumeNextNewline = false;\n              text = text.slice(0, -1);\n            }\n            if (index >= scrollLength && !text.endsWith('\\n')) {\n              consumeNextNewline = true;\n            }\n            _this.scroll.insertAt(index, text);\n\n            var _scroll$line = _this.scroll.line(index),\n                _scroll$line2 = _slicedToArray(_scroll$line, 2),\n                line = _scroll$line2[0],\n                offset = _scroll$line2[1];\n\n            var formats = (0, _extend2.default)({}, (0, _block.bubbleFormats)(line));\n            if (line instanceof _block2.default) {\n              var _line$descendant = line.descendant(_parchment2.default.Leaf, offset),\n                  _line$descendant2 = _slicedToArray(_line$descendant, 1),\n                  leaf = _line$descendant2[0];\n\n              formats = (0, _extend2.default)(formats, (0, _block.bubbleFormats)(leaf));\n            }\n            attributes = _op2.default.attributes.diff(formats, attributes) || {};\n          } else if (_typeof(op.insert) === 'object') {\n            var key = Object.keys(op.insert)[0]; // There should only be one key\n            if (key == null) return index;\n            _this.scroll.insertAt(index, key, op.insert[key]);\n          }\n          scrollLength += length;\n        }\n        Object.keys(attributes).forEach(function (name) {\n          _this.scroll.formatAt(index, length, name, attributes[name]);\n        });\n        return index + length;\n      }, 0);\n      delta.reduce(function (index, op) {\n        if (typeof op.delete === 'number') {\n          _this.scroll.deleteAt(index, op.delete);\n          return index;\n        }\n        return index + (op.retain || op.insert.length || 1);\n      }, 0);\n      this.scroll.batchEnd();\n      return this.update(delta);\n    }\n  }, {\n    key: 'deleteText',\n    value: function deleteText(index, length) {\n      this.scroll.deleteAt(index, length);\n      return this.update(new _quillDelta2.default().retain(index).delete(length));\n    }\n  }, {\n    key: 'formatLine',\n    value: function formatLine(index, length) {\n      var _this2 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      this.scroll.update();\n      Object.keys(formats).forEach(function (format) {\n        if (_this2.scroll.whitelist != null && !_this2.scroll.whitelist[format]) return;\n        var lines = _this2.scroll.lines(index, Math.max(length, 1));\n        var lengthRemaining = length;\n        lines.forEach(function (line) {\n          var lineLength = line.length();\n          if (!(line instanceof _code2.default)) {\n            line.format(format, formats[format]);\n          } else {\n            var codeIndex = index - line.offset(_this2.scroll);\n            var codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n            line.formatAt(codeIndex, codeLength, format, formats[format]);\n          }\n          lengthRemaining -= lineLength;\n        });\n      });\n      this.scroll.optimize();\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'formatText',\n    value: function formatText(index, length) {\n      var _this3 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      Object.keys(formats).forEach(function (format) {\n        _this3.scroll.formatAt(index, length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).retain(length, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'getContents',\n    value: function getContents(index, length) {\n      return this.delta.slice(index, index + length);\n    }\n  }, {\n    key: 'getDelta',\n    value: function getDelta() {\n      return this.scroll.lines().reduce(function (delta, line) {\n        return delta.concat(line.delta());\n      }, new _quillDelta2.default());\n    }\n  }, {\n    key: 'getFormat',\n    value: function getFormat(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var lines = [],\n          leaves = [];\n      if (length === 0) {\n        this.scroll.path(index).forEach(function (path) {\n          var _path = _slicedToArray(path, 1),\n              blot = _path[0];\n\n          if (blot instanceof _block2.default) {\n            lines.push(blot);\n          } else if (blot instanceof _parchment2.default.Leaf) {\n            leaves.push(blot);\n          }\n        });\n      } else {\n        lines = this.scroll.lines(index, length);\n        leaves = this.scroll.descendants(_parchment2.default.Leaf, index, length);\n      }\n      var formatsArr = [lines, leaves].map(function (blots) {\n        if (blots.length === 0) return {};\n        var formats = (0, _block.bubbleFormats)(blots.shift());\n        while (Object.keys(formats).length > 0) {\n          var blot = blots.shift();\n          if (blot == null) return formats;\n          formats = combineFormats((0, _block.bubbleFormats)(blot), formats);\n        }\n        return formats;\n      });\n      return _extend2.default.apply(_extend2.default, formatsArr);\n    }\n  }, {\n    key: 'getText',\n    value: function getText(index, length) {\n      return this.getContents(index, length).filter(function (op) {\n        return typeof op.insert === 'string';\n      }).map(function (op) {\n        return op.insert;\n      }).join('');\n    }\n  }, {\n    key: 'insertEmbed',\n    value: function insertEmbed(index, embed, value) {\n      this.scroll.insertAt(index, embed, value);\n      return this.update(new _quillDelta2.default().retain(index).insert(_defineProperty({}, embed, value)));\n    }\n  }, {\n    key: 'insertText',\n    value: function insertText(index, text) {\n      var _this4 = this;\n\n      var formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      this.scroll.insertAt(index, text);\n      Object.keys(formats).forEach(function (format) {\n        _this4.scroll.formatAt(index, text.length, format, formats[format]);\n      });\n      return this.update(new _quillDelta2.default().retain(index).insert(text, (0, _clone2.default)(formats)));\n    }\n  }, {\n    key: 'isBlank',\n    value: function isBlank() {\n      if (this.scroll.children.length == 0) return true;\n      if (this.scroll.children.length > 1) return false;\n      var block = this.scroll.children.head;\n      if (block.statics.blotName !== _block2.default.blotName) return false;\n      if (block.children.length > 1) return false;\n      return block.children.head instanceof _break2.default;\n    }\n  }, {\n    key: 'removeFormat',\n    value: function removeFormat(index, length) {\n      var text = this.getText(index, length);\n\n      var _scroll$line3 = this.scroll.line(index + length),\n          _scroll$line4 = _slicedToArray(_scroll$line3, 2),\n          line = _scroll$line4[0],\n          offset = _scroll$line4[1];\n\n      var suffixLength = 0,\n          suffix = new _quillDelta2.default();\n      if (line != null) {\n        if (!(line instanceof _code2.default)) {\n          suffixLength = line.length() - offset;\n        } else {\n          suffixLength = line.newlineIndex(offset) - offset + 1;\n        }\n        suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n      }\n      var contents = this.getContents(index, length + suffixLength);\n      var diff = contents.diff(new _quillDelta2.default().insert(text).concat(suffix));\n      var delta = new _quillDelta2.default().retain(index).concat(diff);\n      return this.applyDelta(delta);\n    }\n  }, {\n    key: 'update',\n    value: function update(change) {\n      var mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      var cursorIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n      var oldDelta = this.delta;\n      if (mutations.length === 1 && mutations[0].type === 'characterData' && mutations[0].target.data.match(ASCII) && _parchment2.default.find(mutations[0].target)) {\n        // Optimization for character changes\n        var textBlot = _parchment2.default.find(mutations[0].target);\n        var formats = (0, _block.bubbleFormats)(textBlot);\n        var index = textBlot.offset(this.scroll);\n        var oldValue = mutations[0].oldValue.replace(_cursor2.default.CONTENTS, '');\n        var oldText = new _quillDelta2.default().insert(oldValue);\n        var newText = new _quillDelta2.default().insert(textBlot.value());\n        var diffDelta = new _quillDelta2.default().retain(index).concat(oldText.diff(newText, cursorIndex));\n        change = diffDelta.reduce(function (delta, op) {\n          if (op.insert) {\n            return delta.insert(op.insert, formats);\n          } else {\n            return delta.push(op);\n          }\n        }, new _quillDelta2.default());\n        this.delta = oldDelta.compose(change);\n      } else {\n        this.delta = this.getDelta();\n        if (!change || !(0, _deepEqual2.default)(oldDelta.compose(change), this.delta)) {\n          change = oldDelta.diff(this.delta, cursorIndex);\n        }\n      }\n      return change;\n    }\n  }]);\n\n  return Editor;\n}();\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function (merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function (delta, op) {\n    if (op.insert === 1) {\n      var attributes = (0, _clone2.default)(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = (0, _clone2.default)(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      var text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new _quillDelta2.default());\n}\n\nexports.default = Editor;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Range = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _emitter3 = __webpack_require__(8);\n\nvar _emitter4 = _interopRequireDefault(_emitter3);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar debug = (0, _logger2.default)('quill:selection');\n\nvar Range = function Range(index) {\n  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n  _classCallCheck(this, Range);\n\n  this.index = index;\n  this.length = length;\n};\n\nvar Selection = function () {\n  function Selection(scroll, emitter) {\n    var _this = this;\n\n    _classCallCheck(this, Selection);\n\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = _parchment2.default.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, function () {\n      if (!_this.mouseDown) {\n        setTimeout(_this.update.bind(_this, _emitter4.default.sources.USER), 1);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.EDITOR_CHANGE, function (type, delta) {\n      if (type === _emitter4.default.events.TEXT_CHANGE && delta.length() > 0) {\n        _this.update(_emitter4.default.sources.SILENT);\n      }\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_BEFORE_UPDATE, function () {\n      if (!_this.hasFocus()) return;\n      var native = _this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === _this.cursor.textNode) return; // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      _this.emitter.once(_emitter4.default.events.SCROLL_UPDATE, function () {\n        try {\n          _this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(_emitter4.default.events.SCROLL_OPTIMIZE, function (mutations, context) {\n      if (context.range) {\n        var _context$range = context.range,\n            startNode = _context$range.startNode,\n            startOffset = _context$range.startOffset,\n            endNode = _context$range.endNode,\n            endOffset = _context$range.endOffset;\n\n        _this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(_emitter4.default.sources.SILENT);\n  }\n\n  _createClass(Selection, [{\n    key: 'handleComposition',\n    value: function handleComposition() {\n      var _this2 = this;\n\n      this.root.addEventListener('compositionstart', function () {\n        _this2.composing = true;\n      });\n      this.root.addEventListener('compositionend', function () {\n        _this2.composing = false;\n        if (_this2.cursor.parent) {\n          var range = _this2.cursor.restore();\n          if (!range) return;\n          setTimeout(function () {\n            _this2.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n          }, 1);\n        }\n      });\n    }\n  }, {\n    key: 'handleDragging',\n    value: function handleDragging() {\n      var _this3 = this;\n\n      this.emitter.listenDOM('mousedown', document.body, function () {\n        _this3.mouseDown = true;\n      });\n      this.emitter.listenDOM('mouseup', document.body, function () {\n        _this3.mouseDown = false;\n        _this3.update(_emitter4.default.sources.USER);\n      });\n    }\n  }, {\n    key: 'focus',\n    value: function focus() {\n      if (this.hasFocus()) return;\n      this.root.focus();\n      this.setRange(this.savedRange);\n    }\n  }, {\n    key: 'format',\n    value: function format(_format, value) {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[_format]) return;\n      this.scroll.update();\n      var nativeRange = this.getNativeRange();\n      if (nativeRange == null || !nativeRange.native.collapsed || _parchment2.default.query(_format, _parchment2.default.Scope.BLOCK)) return;\n      if (nativeRange.start.node !== this.cursor.textNode) {\n        var blot = _parchment2.default.find(nativeRange.start.node, false);\n        if (blot == null) return;\n        // TODO Give blot ability to not split\n        if (blot instanceof _parchment2.default.Leaf) {\n          var after = blot.split(nativeRange.start.offset);\n          blot.parent.insertBefore(this.cursor, after);\n        } else {\n          blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n        }\n        this.cursor.attach();\n      }\n      this.cursor.format(_format, value);\n      this.scroll.optimize();\n      this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n      this.update();\n    }\n  }, {\n    key: 'getBounds',\n    value: function getBounds(index) {\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n      var scrollLength = this.scroll.length();\n      index = Math.min(index, scrollLength - 1);\n      length = Math.min(index + length, scrollLength - 1) - index;\n      var node = void 0,\n          _scroll$leaf = this.scroll.leaf(index),\n          _scroll$leaf2 = _slicedToArray(_scroll$leaf, 2),\n          leaf = _scroll$leaf2[0],\n          offset = _scroll$leaf2[1];\n      if (leaf == null) return null;\n\n      var _leaf$position = leaf.position(offset, true);\n\n      var _leaf$position2 = _slicedToArray(_leaf$position, 2);\n\n      node = _leaf$position2[0];\n      offset = _leaf$position2[1];\n\n      var range = document.createRange();\n      if (length > 0) {\n        range.setStart(node, offset);\n\n        var _scroll$leaf3 = this.scroll.leaf(index + length);\n\n        var _scroll$leaf4 = _slicedToArray(_scroll$leaf3, 2);\n\n        leaf = _scroll$leaf4[0];\n        offset = _scroll$leaf4[1];\n\n        if (leaf == null) return null;\n\n        var _leaf$position3 = leaf.position(offset, true);\n\n        var _leaf$position4 = _slicedToArray(_leaf$position3, 2);\n\n        node = _leaf$position4[0];\n        offset = _leaf$position4[1];\n\n        range.setEnd(node, offset);\n        return range.getBoundingClientRect();\n      } else {\n        var side = 'left';\n        var rect = void 0;\n        if (node instanceof Text) {\n          if (offset < node.data.length) {\n            range.setStart(node, offset);\n            range.setEnd(node, offset + 1);\n          } else {\n            range.setStart(node, offset - 1);\n            range.setEnd(node, offset);\n            side = 'right';\n          }\n          rect = range.getBoundingClientRect();\n        } else {\n          rect = leaf.domNode.getBoundingClientRect();\n          if (offset > 0) side = 'right';\n        }\n        return {\n          bottom: rect.top + rect.height,\n          height: rect.height,\n          left: rect[side],\n          right: rect[side],\n          top: rect.top,\n          width: 0\n        };\n      }\n    }\n  }, {\n    key: 'getNativeRange',\n    value: function getNativeRange() {\n      var selection = document.getSelection();\n      if (selection == null || selection.rangeCount <= 0) return null;\n      var nativeRange = selection.getRangeAt(0);\n      if (nativeRange == null) return null;\n      var range = this.normalizeNative(nativeRange);\n      debug.info('getNativeRange', range);\n      return range;\n    }\n  }, {\n    key: 'getRange',\n    value: function getRange() {\n      var normalized = this.getNativeRange();\n      if (normalized == null) return [null, null];\n      var range = this.normalizedToRange(normalized);\n      return [range, normalized];\n    }\n  }, {\n    key: 'hasFocus',\n    value: function hasFocus() {\n      return document.activeElement === this.root;\n    }\n  }, {\n    key: 'normalizedToRange',\n    value: function normalizedToRange(range) {\n      var _this4 = this;\n\n      var positions = [[range.start.node, range.start.offset]];\n      if (!range.native.collapsed) {\n        positions.push([range.end.node, range.end.offset]);\n      }\n      var indexes = positions.map(function (position) {\n        var _position = _slicedToArray(position, 2),\n            node = _position[0],\n            offset = _position[1];\n\n        var blot = _parchment2.default.find(node, true);\n        var index = blot.offset(_this4.scroll);\n        if (offset === 0) {\n          return index;\n        } else if (blot instanceof _parchment2.default.Container) {\n          return index + blot.length();\n        } else {\n          return index + blot.index(node, offset);\n        }\n      });\n      var end = Math.min(Math.max.apply(Math, _toConsumableArray(indexes)), this.scroll.length() - 1);\n      var start = Math.min.apply(Math, [end].concat(_toConsumableArray(indexes)));\n      return new Range(start, end - start);\n    }\n  }, {\n    key: 'normalizeNative',\n    value: function normalizeNative(nativeRange) {\n      if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n        return null;\n      }\n      var range = {\n        start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n        end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n        native: nativeRange\n      };\n      [range.start, range.end].forEach(function (position) {\n        var node = position.node,\n            offset = position.offset;\n        while (!(node instanceof Text) && node.childNodes.length > 0) {\n          if (node.childNodes.length > offset) {\n            node = node.childNodes[offset];\n            offset = 0;\n          } else if (node.childNodes.length === offset) {\n            node = node.lastChild;\n            offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n          } else {\n            break;\n          }\n        }\n        position.node = node, position.offset = offset;\n      });\n      return range;\n    }\n  }, {\n    key: 'rangeToNative',\n    value: function rangeToNative(range) {\n      var _this5 = this;\n\n      var indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n      var args = [];\n      var scrollLength = this.scroll.length();\n      indexes.forEach(function (index, i) {\n        index = Math.min(scrollLength - 1, index);\n        var node = void 0,\n            _scroll$leaf5 = _this5.scroll.leaf(index),\n            _scroll$leaf6 = _slicedToArray(_scroll$leaf5, 2),\n            leaf = _scroll$leaf6[0],\n            offset = _scroll$leaf6[1];\n        var _leaf$position5 = leaf.position(offset, i !== 0);\n\n        var _leaf$position6 = _slicedToArray(_leaf$position5, 2);\n\n        node = _leaf$position6[0];\n        offset = _leaf$position6[1];\n\n        args.push(node, offset);\n      });\n      if (args.length < 2) {\n        args = args.concat(args);\n      }\n      return args;\n    }\n  }, {\n    key: 'scrollIntoView',\n    value: function scrollIntoView(scrollingContainer) {\n      var range = this.lastRange;\n      if (range == null) return;\n      var bounds = this.getBounds(range.index, range.length);\n      if (bounds == null) return;\n      var limit = this.scroll.length() - 1;\n\n      var _scroll$line = this.scroll.line(Math.min(range.index, limit)),\n          _scroll$line2 = _slicedToArray(_scroll$line, 1),\n          first = _scroll$line2[0];\n\n      var last = first;\n      if (range.length > 0) {\n        var _scroll$line3 = this.scroll.line(Math.min(range.index + range.length, limit));\n\n        var _scroll$line4 = _slicedToArray(_scroll$line3, 1);\n\n        last = _scroll$line4[0];\n      }\n      if (first == null || last == null) return;\n      var scrollBounds = scrollingContainer.getBoundingClientRect();\n      if (bounds.top < scrollBounds.top) {\n        scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\n      } else if (bounds.bottom > scrollBounds.bottom) {\n        scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\n      }\n    }\n  }, {\n    key: 'setNativeRange',\n    value: function setNativeRange(startNode, startOffset) {\n      var endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n      var endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n      var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n      if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n        return;\n      }\n      var selection = document.getSelection();\n      if (selection == null) return;\n      if (startNode != null) {\n        if (!this.hasFocus()) this.root.focus();\n        var native = (this.getNativeRange() || {}).native;\n        if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n\n          if (startNode.tagName == \"BR\") {\n            startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n            startNode = startNode.parentNode;\n          }\n          if (endNode.tagName == \"BR\") {\n            endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n            endNode = endNode.parentNode;\n          }\n          var range = document.createRange();\n          range.setStart(startNode, startOffset);\n          range.setEnd(endNode, endOffset);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      } else {\n        selection.removeAllRanges();\n        this.root.blur();\n        document.body.focus(); // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n      }\n    }\n  }, {\n    key: 'setRange',\n    value: function setRange(range) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _emitter4.default.sources.API;\n\n      if (typeof force === 'string') {\n        source = force;\n        force = false;\n      }\n      debug.info('setRange', range);\n      if (range != null) {\n        var args = this.rangeToNative(range);\n        this.setNativeRange.apply(this, _toConsumableArray(args).concat([force]));\n      } else {\n        this.setNativeRange(null);\n      }\n      this.update(source);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _emitter4.default.sources.USER;\n\n      var oldRange = this.lastRange;\n\n      var _getRange = this.getRange(),\n          _getRange2 = _slicedToArray(_getRange, 2),\n          lastRange = _getRange2[0],\n          nativeRange = _getRange2[1];\n\n      this.lastRange = lastRange;\n      if (this.lastRange != null) {\n        this.savedRange = this.lastRange;\n      }\n      if (!(0, _deepEqual2.default)(oldRange, this.lastRange)) {\n        var _emitter;\n\n        if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n          this.cursor.restore();\n        }\n        var args = [_emitter4.default.events.SELECTION_CHANGE, (0, _clone2.default)(this.lastRange), (0, _clone2.default)(oldRange), source];\n        (_emitter = this.emitter).emit.apply(_emitter, [_emitter4.default.events.EDITOR_CHANGE].concat(args));\n        if (source !== _emitter4.default.sources.SILENT) {\n          var _emitter2;\n\n          (_emitter2 = this.emitter).emit.apply(_emitter2, args);\n        }\n      }\n    }\n  }]);\n\n  return Selection;\n}();\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\nexports.Range = Range;\nexports.default = Selection;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Break = function (_Parchment$Embed) {\n  _inherits(Break, _Parchment$Embed);\n\n  function Break() {\n    _classCallCheck(this, Break);\n\n    return _possibleConstructorReturn(this, (Break.__proto__ || Object.getPrototypeOf(Break)).apply(this, arguments));\n  }\n\n  _createClass(Break, [{\n    key: 'insertInto',\n    value: function insertInto(parent, ref) {\n      if (parent.children.length === 0) {\n        _get(Break.prototype.__proto__ || Object.getPrototypeOf(Break.prototype), 'insertInto', this).call(this, parent, ref);\n      } else {\n        this.remove();\n      }\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return 0;\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }], [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  return Break;\n}(_parchment2.default.Embed);\n\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexports.default = Break;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = __webpack_require__(44);\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar store_1 = __webpack_require__(31);\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = __webpack_require__(30);\nvar Registry = __webpack_require__(1);\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        var _a;\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar equal = __webpack_require__(11);\nvar extend = __webpack_require__(3);\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\nIterator.prototype.rest = function () {\n  if (!this.hasNext()) {\n    return [];\n  } else if (this.offset === 0) {\n    return this.ops.slice(this.index);\n  } else {\n    var offset = this.offset;\n    var index = this.index;\n    var next = this.next();\n    var rest = this.ops.slice(this.index);\n    this.offset = offset;\n    this.index = index;\n    return [next].concat(rest);\n  }\n};\n\n\nmodule.exports = lib;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\nvar clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction isLine(blot) {\n  return blot instanceof _block2.default || blot instanceof _block.BlockEmbed;\n}\n\nvar Scroll = function (_Parchment$Scroll) {\n  _inherits(Scroll, _Parchment$Scroll);\n\n  function Scroll(domNode, config) {\n    _classCallCheck(this, Scroll);\n\n    var _this = _possibleConstructorReturn(this, (Scroll.__proto__ || Object.getPrototypeOf(Scroll)).call(this, domNode));\n\n    _this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      _this.whitelist = config.whitelist.reduce(function (whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    _this.domNode.addEventListener('DOMNodeInserted', function () {});\n    _this.optimize();\n    _this.enable();\n    return _this;\n  }\n\n  _createClass(Scroll, [{\n    key: 'batchStart',\n    value: function batchStart() {\n      this.batch = true;\n    }\n  }, {\n    key: 'batchEnd',\n    value: function batchEnd() {\n      this.batch = false;\n      this.optimize();\n    }\n  }, {\n    key: 'deleteAt',\n    value: function deleteAt(index, length) {\n      var _line = this.line(index),\n          _line2 = _slicedToArray(_line, 2),\n          first = _line2[0],\n          offset = _line2[1];\n\n      var _line3 = this.line(index + length),\n          _line4 = _slicedToArray(_line3, 1),\n          last = _line4[0];\n\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'deleteAt', this).call(this, index, length);\n      if (last != null && first !== last && offset > 0) {\n        if (first instanceof _block.BlockEmbed || last instanceof _block.BlockEmbed) {\n          this.optimize();\n          return;\n        }\n        if (first instanceof _code2.default) {\n          var newlineIndex = first.newlineIndex(first.length(), true);\n          if (newlineIndex > -1) {\n            first = first.split(newlineIndex + 1);\n            if (first === last) {\n              this.optimize();\n              return;\n            }\n          }\n        } else if (last instanceof _code2.default) {\n          var _newlineIndex = last.newlineIndex(0);\n          if (_newlineIndex > -1) {\n            last.split(_newlineIndex + 1);\n          }\n        }\n        var ref = last.children.head instanceof _break2.default ? null : last.children.head;\n        first.moveChildren(last, ref);\n        first.remove();\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n      this.domNode.setAttribute('contenteditable', enabled);\n    }\n  }, {\n    key: 'formatAt',\n    value: function formatAt(index, length, format, value) {\n      if (this.whitelist != null && !this.whitelist[format]) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'formatAt', this).call(this, index, length, format, value);\n      this.optimize();\n    }\n  }, {\n    key: 'insertAt',\n    value: function insertAt(index, value, def) {\n      if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n      if (index >= this.length()) {\n        if (def == null || _parchment2.default.query(value, _parchment2.default.Scope.BLOCK) == null) {\n          var blot = _parchment2.default.create(this.statics.defaultChild);\n          this.appendChild(blot);\n          if (def == null && value.endsWith('\\n')) {\n            value = value.slice(0, -1);\n          }\n          blot.insertAt(0, value, def);\n        } else {\n          var embed = _parchment2.default.create(value, def);\n          this.appendChild(embed);\n        }\n      } else {\n        _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertAt', this).call(this, index, value, def);\n      }\n      this.optimize();\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot.statics.scope === _parchment2.default.Scope.INLINE_BLOT) {\n        var wrapper = _parchment2.default.create(this.statics.defaultChild);\n        wrapper.appendChild(blot);\n        blot = wrapper;\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'insertBefore', this).call(this, blot, ref);\n    }\n  }, {\n    key: 'leaf',\n    value: function leaf(index) {\n      return this.path(index).pop() || [null, -1];\n    }\n  }, {\n    key: 'line',\n    value: function line(index) {\n      if (index === this.length()) {\n        return this.line(index - 1);\n      }\n      return this.descendant(isLine, index);\n    }\n  }, {\n    key: 'lines',\n    value: function lines() {\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n\n      var getLines = function getLines(blot, index, length) {\n        var lines = [],\n            lengthLeft = length;\n        blot.children.forEachAt(index, length, function (child, index, length) {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof _parchment2.default.Container) {\n            lines = lines.concat(getLines(child, index, lengthLeft));\n          }\n          lengthLeft -= length;\n        });\n        return lines;\n      };\n      return getLines(this, index, length);\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize() {\n      var mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (this.batch === true) return;\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'optimize', this).call(this, mutations, context);\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_OPTIMIZE, mutations, context);\n      }\n    }\n  }, {\n    key: 'path',\n    value: function path(index) {\n      return _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'path', this).call(this, index).slice(1); // Exclude self\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations) {\n      if (this.batch === true) return;\n      var source = _emitter2.default.sources.USER;\n      if (typeof mutations === 'string') {\n        source = mutations;\n      }\n      if (!Array.isArray(mutations)) {\n        mutations = this.observer.takeRecords();\n      }\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_BEFORE_UPDATE, source, mutations);\n      }\n      _get(Scroll.prototype.__proto__ || Object.getPrototypeOf(Scroll.prototype), 'update', this).call(this, mutations.concat([])); // pass copy\n      if (mutations.length > 0) {\n        this.emitter.emit(_emitter2.default.events.SCROLL_UPDATE, source, mutations);\n      }\n    }\n  }]);\n\n  return Scroll;\n}(_parchment2.default.Scroll);\n\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [_block2.default, _block.BlockEmbed, _container2.default];\n\nexports.default = Scroll;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SHORTKEY = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _clone = __webpack_require__(21);\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nvar _deepEqual = __webpack_require__(11);\n\nvar _deepEqual2 = _interopRequireDefault(_deepEqual);\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _op = __webpack_require__(20);\n\nvar _op2 = _interopRequireDefault(_op);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:keyboard');\n\nvar SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nvar Keyboard = function (_Module) {\n  _inherits(Keyboard, _Module);\n\n  _createClass(Keyboard, null, [{\n    key: 'match',\n    value: function match(evt, binding) {\n      binding = normalize(binding);\n      if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function (key) {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })) {\n        return false;\n      }\n      return binding.key === (evt.which || evt.keyCode);\n    }\n  }]);\n\n  function Keyboard(quill, options) {\n    _classCallCheck(this, Keyboard);\n\n    var _this = _possibleConstructorReturn(this, (Keyboard.__proto__ || Object.getPrototypeOf(Keyboard)).call(this, quill, options));\n\n    _this.bindings = {};\n    Object.keys(_this.options.bindings).forEach(function (name) {\n      if (name === 'list autofill' && quill.scroll.whitelist != null && !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (_this.options.bindings[name]) {\n        _this.addBinding(_this.options.bindings[name]);\n      }\n    });\n    _this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    _this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function () {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    _this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null }, { collapsed: true, offset: 0 }, handleBackspace);\n    _this.listen();\n    return _this;\n  }\n\n  _createClass(Keyboard, [{\n    key: 'addBinding',\n    value: function addBinding(key) {\n      var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      var binding = normalize(key);\n      if (binding == null || binding.key == null) {\n        return debug.warn('Attempted to add invalid keyboard binding', binding);\n      }\n      if (typeof context === 'function') {\n        context = { handler: context };\n      }\n      if (typeof handler === 'function') {\n        handler = { handler: handler };\n      }\n      binding = (0, _extend2.default)(binding, context, handler);\n      this.bindings[binding.key] = this.bindings[binding.key] || [];\n      this.bindings[binding.key].push(binding);\n    }\n  }, {\n    key: 'listen',\n    value: function listen() {\n      var _this2 = this;\n\n      this.quill.root.addEventListener('keydown', function (evt) {\n        if (evt.defaultPrevented) return;\n        var which = evt.which || evt.keyCode;\n        var bindings = (_this2.bindings[which] || []).filter(function (binding) {\n          return Keyboard.match(evt, binding);\n        });\n        if (bindings.length === 0) return;\n        var range = _this2.quill.getSelection();\n        if (range == null || !_this2.quill.hasFocus()) return;\n\n        var _quill$getLine = _this2.quill.getLine(range.index),\n            _quill$getLine2 = _slicedToArray(_quill$getLine, 2),\n            line = _quill$getLine2[0],\n            offset = _quill$getLine2[1];\n\n        var _quill$getLeaf = _this2.quill.getLeaf(range.index),\n            _quill$getLeaf2 = _slicedToArray(_quill$getLeaf, 2),\n            leafStart = _quill$getLeaf2[0],\n            offsetStart = _quill$getLeaf2[1];\n\n        var _ref = range.length === 0 ? [leafStart, offsetStart] : _this2.quill.getLeaf(range.index + range.length),\n            _ref2 = _slicedToArray(_ref, 2),\n            leafEnd = _ref2[0],\n            offsetEnd = _ref2[1];\n\n        var prefixText = leafStart instanceof _parchment2.default.Text ? leafStart.value().slice(0, offsetStart) : '';\n        var suffixText = leafEnd instanceof _parchment2.default.Text ? leafEnd.value().slice(offsetEnd) : '';\n        var curContext = {\n          collapsed: range.length === 0,\n          empty: range.length === 0 && line.length() <= 1,\n          format: _this2.quill.getFormat(range),\n          offset: offset,\n          prefix: prefixText,\n          suffix: suffixText\n        };\n        var prevented = bindings.some(function (binding) {\n          if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n          if (binding.empty != null && binding.empty !== curContext.empty) return false;\n          if (binding.offset != null && binding.offset !== curContext.offset) return false;\n          if (Array.isArray(binding.format)) {\n            // any format is present\n            if (binding.format.every(function (name) {\n              return curContext.format[name] == null;\n            })) {\n              return false;\n            }\n          } else if (_typeof(binding.format) === 'object') {\n            // all formats must match\n            if (!Object.keys(binding.format).every(function (name) {\n              if (binding.format[name] === true) return curContext.format[name] != null;\n              if (binding.format[name] === false) return curContext.format[name] == null;\n              return (0, _deepEqual2.default)(binding.format[name], curContext.format[name]);\n            })) {\n              return false;\n            }\n          }\n          if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n          if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n          return binding.handler.call(_this2, range, curContext) !== true;\n        });\n        if (prevented) {\n          evt.preventDefault();\n        }\n      });\n    }\n  }]);\n\n  return Keyboard;\n}(_module2.default);\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold': makeFormatHandler('bold'),\n    'italic': makeFormatHandler('italic'),\n    'underline': makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', _quill2.default.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', _quill2.default.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function handler(range) {\n        this.quill.deleteText(range.index - 1, 1, _quill2.default.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function handler(range) {\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function handler(range, context) {\n        this.quill.format('list', false, _quill2.default.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, _quill2.default.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function handler(range) {\n        var _quill$getLine3 = this.quill.getLine(range.index),\n            _quill$getLine4 = _slicedToArray(_quill$getLine3, 2),\n            line = _quill$getLine4[0],\n            offset = _quill$getLine4[1];\n\n        var formats = (0, _extend2.default)({}, line.formats(), { list: 'checked' });\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', formats).retain(line.length() - offset - 1).retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function handler(range, context) {\n        var _quill$getLine5 = this.quill.getLine(range.index),\n            _quill$getLine6 = _slicedToArray(_quill$getLine5, 2),\n            line = _quill$getLine6[0],\n            offset = _quill$getLine6[1];\n\n        var delta = new _quillDelta2.default().retain(range.index).insert('\\n', context.format).retain(line.length() - offset - 1).retain(1, { header: null });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function handler(range, context) {\n        var length = context.prefix.length;\n\n        var _quill$getLine7 = this.quill.getLine(range.index),\n            _quill$getLine8 = _slicedToArray(_quill$getLine7, 2),\n            line = _quill$getLine8[0],\n            offset = _quill$getLine8[1];\n\n        if (offset > length) return true;\n        var value = void 0;\n        switch (context.prefix.trim()) {\n          case '[]':case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        var delta = new _quillDelta2.default().retain(range.index - offset).delete(length + 1).retain(line.length() - 2 - offset).retain(1, { list: value });\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, _quill2.default.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function handler(range) {\n        var _quill$getLine9 = this.quill.getLine(range.index),\n            _quill$getLine10 = _slicedToArray(_quill$getLine9, 2),\n            line = _quill$getLine10[0],\n            offset = _quill$getLine10[1];\n\n        var delta = new _quillDelta2.default().retain(range.index + line.length() - offset - 2).retain(1, { 'code-block': null }).delete(1);\n        this.quill.updateContents(delta, _quill2.default.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  var _ref3;\n\n  var where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return _ref3 = {\n    key: key,\n    shiftKey: shiftKey,\n    altKey: null\n  }, _defineProperty(_ref3, where, /^$/), _defineProperty(_ref3, 'handler', function handler(range) {\n    var index = range.index;\n    if (key === Keyboard.keys.RIGHT) {\n      index += range.length + 1;\n    }\n\n    var _quill$getLeaf3 = this.quill.getLeaf(index),\n        _quill$getLeaf4 = _slicedToArray(_quill$getLeaf3, 1),\n        leaf = _quill$getLeaf4[0];\n\n    if (!(leaf instanceof _parchment2.default.Embed)) return true;\n    if (key === Keyboard.keys.LEFT) {\n      if (shiftKey) {\n        this.quill.setSelection(range.index - 1, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index - 1, _quill2.default.sources.USER);\n      }\n    } else {\n      if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, _quill2.default.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, _quill2.default.sources.USER);\n      }\n    }\n    return false;\n  }), _ref3;\n}\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n\n  var _quill$getLine11 = this.quill.getLine(range.index),\n      _quill$getLine12 = _slicedToArray(_quill$getLine11, 1),\n      line = _quill$getLine12[0];\n\n  var formats = {};\n  if (context.offset === 0) {\n    var _quill$getLine13 = this.quill.getLine(range.index - 1),\n        _quill$getLine14 = _slicedToArray(_quill$getLine13, 1),\n        prev = _quill$getLine14[0];\n\n    if (prev != null && prev.length() > 1) {\n      var curFormats = line.formats();\n      var prevFormats = this.quill.getFormat(range.index - 1, 1);\n      formats = _op2.default.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  var length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index - length, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index - length, length, formats, _quill2.default.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  var length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  var formats = {},\n      nextLength = 0;\n\n  var _quill$getLine15 = this.quill.getLine(range.index),\n      _quill$getLine16 = _slicedToArray(_quill$getLine15, 1),\n      line = _quill$getLine16[0];\n\n  if (context.offset >= line.length() - 1) {\n    var _quill$getLine17 = this.quill.getLine(range.index + 1),\n        _quill$getLine18 = _slicedToArray(_quill$getLine17, 1),\n        next = _quill$getLine18[0];\n\n    if (next) {\n      var curFormats = line.formats();\n      var nextFormats = this.quill.getFormat(range.index, 1);\n      formats = _op2.default.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, _quill2.default.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  var lines = this.quill.getLines(range);\n  var formats = {};\n  if (lines.length > 1) {\n    var firstFormats = lines[0].formats();\n    var lastFormats = lines[lines.length - 1].formats();\n    formats = _op2.default.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, _quill2.default.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, _quill2.default.sources.USER);\n  }\n  this.quill.setSelection(range.index, _quill2.default.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  var _this3 = this;\n\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length); // So we do not trigger text-change\n  }\n  var lineFormats = Object.keys(context.format).reduce(function (lineFormats, format) {\n    if (_parchment2.default.query(format, _parchment2.default.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, _quill2.default.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, _quill2.default.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach(function (name) {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    _this3.quill.format(name, context.format[name], _quill2.default.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler: function handler(range) {\n      var CodeBlock = _parchment2.default.query('code-block');\n      var index = range.index,\n          length = range.length;\n\n      var _quill$scroll$descend = this.quill.scroll.descendant(CodeBlock, index),\n          _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n          block = _quill$scroll$descend2[0],\n          offset = _quill$scroll$descend2[1];\n\n      if (block == null) return;\n      var scrollIndex = this.quill.getIndex(block);\n      var start = block.newlineIndex(offset, true) + 1;\n      var end = block.newlineIndex(scrollIndex + offset + length);\n      var lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach(function (line, i) {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(_quill2.default.sources.USER);\n      this.quill.setSelection(index, length, _quill2.default.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function handler(range, context) {\n      this.quill.format(format, !context.format[format], _quill2.default.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if ((typeof binding === 'undefined' ? 'undefined' : _typeof(binding)) === 'object') {\n    binding = (0, _clone2.default)(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\nexports.default = Keyboard;\nexports.SHORTKEY = SHORTKEY;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Cursor = function (_Parchment$Embed) {\n  _inherits(Cursor, _Parchment$Embed);\n\n  _createClass(Cursor, null, [{\n    key: 'value',\n    value: function value() {\n      return undefined;\n    }\n  }]);\n\n  function Cursor(domNode, selection) {\n    _classCallCheck(this, Cursor);\n\n    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this, domNode));\n\n    _this.selection = selection;\n    _this.textNode = document.createTextNode(Cursor.CONTENTS);\n    _this.domNode.appendChild(_this.textNode);\n    _this._length = 0;\n    return _this;\n  }\n\n  _createClass(Cursor, [{\n    key: 'detach',\n    value: function detach() {\n      // super.detach() will also clear domNode.__blot\n      if (this.parent != null) this.parent.removeChild(this);\n    }\n  }, {\n    key: 'format',\n    value: function format(name, value) {\n      if (this._length !== 0) {\n        return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'format', this).call(this, name, value);\n      }\n      var target = this,\n          index = 0;\n      while (target != null && target.statics.scope !== _parchment2.default.Scope.BLOCK_BLOT) {\n        index += target.offset(target.parent);\n        target = target.parent;\n      }\n      if (target != null) {\n        this._length = Cursor.CONTENTS.length;\n        target.optimize();\n        target.formatAt(index, Cursor.CONTENTS.length, name, value);\n        this._length = 0;\n      }\n    }\n  }, {\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.textNode) return 0;\n      return _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'length',\n    value: function length() {\n      return this._length;\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      return [this.textNode, this.textNode.data.length];\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      _get(Cursor.prototype.__proto__ || Object.getPrototypeOf(Cursor.prototype), 'remove', this).call(this);\n      this.parent = null;\n    }\n  }, {\n    key: 'restore',\n    value: function restore() {\n      if (this.selection.composing || this.parent == null) return;\n      var textNode = this.textNode;\n      var range = this.selection.getNativeRange();\n      var restoreText = void 0,\n          start = void 0,\n          end = void 0;\n      if (range != null && range.start.node === textNode && range.end.node === textNode) {\n        var _ref = [textNode, range.start.offset, range.end.offset];\n        restoreText = _ref[0];\n        start = _ref[1];\n        end = _ref[2];\n      }\n      // Link format will insert text outside of anchor tag\n      while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n        this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n      }\n      if (this.textNode.data !== Cursor.CONTENTS) {\n        var text = this.textNode.data.split(Cursor.CONTENTS).join('');\n        if (this.next instanceof _text2.default) {\n          restoreText = this.next.domNode;\n          this.next.insertAt(0, text);\n          this.textNode.data = Cursor.CONTENTS;\n        } else {\n          this.textNode.data = text;\n          this.parent.insertBefore(_parchment2.default.create(this.textNode), this);\n          this.textNode = document.createTextNode(Cursor.CONTENTS);\n          this.domNode.appendChild(this.textNode);\n        }\n      }\n      this.remove();\n      if (start != null) {\n        var _map = [start, end].map(function (offset) {\n          return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n        });\n\n        var _map2 = _slicedToArray(_map, 2);\n\n        start = _map2[0];\n        end = _map2[1];\n\n        return {\n          startNode: restoreText,\n          startOffset: start,\n          endNode: restoreText,\n          endOffset: end\n        };\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      if (mutations.some(function (mutation) {\n        return mutation.type === 'characterData' && mutation.target === _this2.textNode;\n      })) {\n        var range = this.restore();\n        if (range) context.range = range;\n      }\n    }\n  }, {\n    key: 'value',\n    value: function value() {\n      return '';\n    }\n  }]);\n\n  return Cursor;\n}(_parchment2.default.Embed);\n\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\n\n\nexports.default = Cursor;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Container = function (_Parchment$Container) {\n  _inherits(Container, _Parchment$Container);\n\n  function Container() {\n    _classCallCheck(this, Container);\n\n    return _possibleConstructorReturn(this, (Container.__proto__ || Object.getPrototypeOf(Container)).apply(this, arguments));\n  }\n\n  return Container;\n}(_parchment2.default.Container);\n\nContainer.allowedChildren = [_block2.default, _block.BlockEmbed, Container];\n\nexports.default = Container;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorStyle = exports.ColorClass = exports.ColorAttributor = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorAttributor = function (_Parchment$Attributor) {\n  _inherits(ColorAttributor, _Parchment$Attributor);\n\n  function ColorAttributor() {\n    _classCallCheck(this, ColorAttributor);\n\n    return _possibleConstructorReturn(this, (ColorAttributor.__proto__ || Object.getPrototypeOf(ColorAttributor)).apply(this, arguments));\n  }\n\n  _createClass(ColorAttributor, [{\n    key: 'value',\n    value: function value(domNode) {\n      var value = _get(ColorAttributor.prototype.__proto__ || Object.getPrototypeOf(ColorAttributor.prototype), 'value', this).call(this, domNode);\n      if (!value.startsWith('rgb(')) return value;\n      value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n      return '#' + value.split(',').map(function (component) {\n        return ('00' + parseInt(component).toString(16)).slice(-2);\n      }).join('');\n    }\n  }]);\n\n  return ColorAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar ColorClass = new _parchment2.default.Attributor.Class('color', 'ql-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar ColorStyle = new ColorAttributor('color', 'color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.ColorAttributor = ColorAttributor;\nexports.ColorClass = ColorClass;\nexports.ColorStyle = ColorStyle;\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitize = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Link = function (_Inline) {\n  _inherits(Link, _Inline);\n\n  function Link() {\n    _classCallCheck(this, Link);\n\n    return _possibleConstructorReturn(this, (Link.__proto__ || Object.getPrototypeOf(Link)).apply(this, arguments));\n  }\n\n  _createClass(Link, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name !== this.statics.blotName || !value) return _get(Link.prototype.__proto__ || Object.getPrototypeOf(Link.prototype), 'format', this).call(this, name, value);\n      value = this.constructor.sanitize(value);\n      this.domNode.setAttribute('href', value);\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Link.__proto__ || Object.getPrototypeOf(Link), 'create', this).call(this, value);\n      value = this.sanitize(value);\n      node.setAttribute('href', value);\n      node.setAttribute('rel', 'noopener noreferrer');\n      node.setAttribute('target', '_blank');\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.getAttribute('href');\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n    }\n  }]);\n\n  return Link;\n}(_inline2.default);\n\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\nfunction _sanitize(url, protocols) {\n  var anchor = document.createElement('a');\n  anchor.href = url;\n  var protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexports.default = Link;\nexports.sanitize = _sanitize;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _dropdown = __webpack_require__(107);\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, !(element.getAttribute(attribute) === 'true'));\n}\n\nvar Picker = function () {\n  function Picker(select) {\n    var _this = this;\n\n    _classCallCheck(this, Picker);\n\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', function () {\n      _this.togglePicker();\n    });\n    this.label.addEventListener('keydown', function (event) {\n      switch (event.keyCode) {\n        // Allows the \"Enter\" key to open the picker\n        case _keyboard2.default.keys.ENTER:\n          _this.togglePicker();\n          break;\n\n        // Allows the \"Escape\" key to close the picker\n        case _keyboard2.default.keys.ESCAPE:\n          _this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  _createClass(Picker, [{\n    key: 'togglePicker',\n    value: function togglePicker() {\n      this.container.classList.toggle('ql-expanded');\n      // Toggle aria-expanded and aria-hidden to make the picker accessible\n      toggleAriaAttribute(this.label, 'aria-expanded');\n      toggleAriaAttribute(this.options, 'aria-hidden');\n    }\n  }, {\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var _this2 = this;\n\n      var item = document.createElement('span');\n      item.tabIndex = '0';\n      item.setAttribute('role', 'button');\n\n      item.classList.add('ql-picker-item');\n      if (option.hasAttribute('value')) {\n        item.setAttribute('data-value', option.getAttribute('value'));\n      }\n      if (option.textContent) {\n        item.setAttribute('data-label', option.textContent);\n      }\n      item.addEventListener('click', function () {\n        _this2.selectItem(item, true);\n      });\n      item.addEventListener('keydown', function (event) {\n        switch (event.keyCode) {\n          // Allows the \"Enter\" key to select an item\n          case _keyboard2.default.keys.ENTER:\n            _this2.selectItem(item, true);\n            event.preventDefault();\n            break;\n\n          // Allows the \"Escape\" key to close the picker\n          case _keyboard2.default.keys.ESCAPE:\n            _this2.escape();\n            event.preventDefault();\n            break;\n          default:\n        }\n      });\n\n      return item;\n    }\n  }, {\n    key: 'buildLabel',\n    value: function buildLabel() {\n      var label = document.createElement('span');\n      label.classList.add('ql-picker-label');\n      label.innerHTML = _dropdown2.default;\n      label.tabIndex = '0';\n      label.setAttribute('role', 'button');\n      label.setAttribute('aria-expanded', 'false');\n      this.container.appendChild(label);\n      return label;\n    }\n  }, {\n    key: 'buildOptions',\n    value: function buildOptions() {\n      var _this3 = this;\n\n      var options = document.createElement('span');\n      options.classList.add('ql-picker-options');\n\n      // Don't want screen readers to read this until options are visible\n      options.setAttribute('aria-hidden', 'true');\n      options.tabIndex = '-1';\n\n      // Need a unique id for aria-controls\n      options.id = 'ql-picker-options-' + optionsCounter;\n      optionsCounter += 1;\n      this.label.setAttribute('aria-controls', options.id);\n\n      this.options = options;\n\n      [].slice.call(this.select.options).forEach(function (option) {\n        var item = _this3.buildItem(option);\n        options.appendChild(item);\n        if (option.selected === true) {\n          _this3.selectItem(item);\n        }\n      });\n      this.container.appendChild(options);\n    }\n  }, {\n    key: 'buildPicker',\n    value: function buildPicker() {\n      var _this4 = this;\n\n      [].slice.call(this.select.attributes).forEach(function (item) {\n        _this4.container.setAttribute(item.name, item.value);\n      });\n      this.container.classList.add('ql-picker');\n      this.label = this.buildLabel();\n      this.buildOptions();\n    }\n  }, {\n    key: 'escape',\n    value: function escape() {\n      var _this5 = this;\n\n      // Close menu and return focus to trigger label\n      this.close();\n      // Need setTimeout for accessibility to ensure that the browser executes\n      // focus on the next process thread and after any DOM content changes\n      setTimeout(function () {\n        return _this5.label.focus();\n      }, 1);\n    }\n  }, {\n    key: 'close',\n    value: function close() {\n      this.container.classList.remove('ql-expanded');\n      this.label.setAttribute('aria-expanded', 'false');\n      this.options.setAttribute('aria-hidden', 'true');\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item) {\n      var trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var selected = this.container.querySelector('.ql-selected');\n      if (item === selected) return;\n      if (selected != null) {\n        selected.classList.remove('ql-selected');\n      }\n      if (item == null) return;\n      item.classList.add('ql-selected');\n      this.select.selectedIndex = [].indexOf.call(item.parentNode.children, item);\n      if (item.hasAttribute('data-value')) {\n        this.label.setAttribute('data-value', item.getAttribute('data-value'));\n      } else {\n        this.label.removeAttribute('data-value');\n      }\n      if (item.hasAttribute('data-label')) {\n        this.label.setAttribute('data-label', item.getAttribute('data-label'));\n      } else {\n        this.label.removeAttribute('data-label');\n      }\n      if (trigger) {\n        if (typeof Event === 'function') {\n          this.select.dispatchEvent(new Event('change'));\n        } else if ((typeof Event === 'undefined' ? 'undefined' : _typeof(Event)) === 'object') {\n          // IE11\n          var event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n          this.select.dispatchEvent(event);\n        }\n        this.close();\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var option = void 0;\n      if (this.select.selectedIndex > -1) {\n        var item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n        option = this.select.options[this.select.selectedIndex];\n        this.selectItem(item);\n      } else {\n        this.selectItem(null);\n      }\n      var isActive = option != null && option !== this.select.querySelector('option[selected]');\n      this.label.classList.toggle('ql-active', isActive);\n    }\n  }]);\n\n  return Picker;\n}();\n\nexports.default = Picker;\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _break = __webpack_require__(16);\n\nvar _break2 = _interopRequireDefault(_break);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nvar _cursor = __webpack_require__(24);\n\nvar _cursor2 = _interopRequireDefault(_cursor);\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nvar _scroll = __webpack_require__(22);\n\nvar _scroll2 = _interopRequireDefault(_scroll);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nvar _clipboard = __webpack_require__(55);\n\nvar _clipboard2 = _interopRequireDefault(_clipboard);\n\nvar _history = __webpack_require__(42);\n\nvar _history2 = _interopRequireDefault(_history);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_quill2.default.register({\n  'blots/block': _block2.default,\n  'blots/block/embed': _block.BlockEmbed,\n  'blots/break': _break2.default,\n  'blots/container': _container2.default,\n  'blots/cursor': _cursor2.default,\n  'blots/embed': _embed2.default,\n  'blots/inline': _inline2.default,\n  'blots/scroll': _scroll2.default,\n  'blots/text': _text2.default,\n\n  'modules/clipboard': _clipboard2.default,\n  'modules/history': _history2.default,\n  'modules/keyboard': _keyboard2.default\n});\n\n_parchment2.default.register(_block2.default, _break2.default, _cursor2.default, _inline2.default, _scroll2.default, _text2.default);\n\nexports.default = _quill2.default;\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = __webpack_require__(1);\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent = Registry.create(this.statics.scope);\n            blot.wrap(parent);\n            parent.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nvar class_1 = __webpack_require__(32);\nvar style_1 = __webpack_require__(33);\nvar Registry = __webpack_require__(1);\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = __webpack_require__(12);\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Theme = function () {\n  function Theme(quill, options) {\n    _classCallCheck(this, Theme);\n\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  _createClass(Theme, [{\n    key: 'init',\n    value: function init() {\n      var _this = this;\n\n      Object.keys(this.options.modules).forEach(function (name) {\n        if (_this.modules[name] == null) {\n          _this.addModule(name);\n        }\n      });\n    }\n  }, {\n    key: 'addModule',\n    value: function addModule(name) {\n      var moduleClass = this.quill.constructor.import('modules/' + name);\n      this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n      return this.modules[name];\n    }\n  }]);\n\n  return Theme;\n}();\n\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\nexports.default = Theme;\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _text = __webpack_require__(7);\n\nvar _text2 = _interopRequireDefault(_text);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar GUARD_TEXT = '\\uFEFF';\n\nvar Embed = function (_Parchment$Embed) {\n  _inherits(Embed, _Parchment$Embed);\n\n  function Embed(node) {\n    _classCallCheck(this, Embed);\n\n    var _this = _possibleConstructorReturn(this, (Embed.__proto__ || Object.getPrototypeOf(Embed)).call(this, node));\n\n    _this.contentNode = document.createElement('span');\n    _this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(_this.domNode.childNodes).forEach(function (childNode) {\n      _this.contentNode.appendChild(childNode);\n    });\n    _this.leftGuard = document.createTextNode(GUARD_TEXT);\n    _this.rightGuard = document.createTextNode(GUARD_TEXT);\n    _this.domNode.appendChild(_this.leftGuard);\n    _this.domNode.appendChild(_this.contentNode);\n    _this.domNode.appendChild(_this.rightGuard);\n    return _this;\n  }\n\n  _createClass(Embed, [{\n    key: 'index',\n    value: function index(node, offset) {\n      if (node === this.leftGuard) return 0;\n      if (node === this.rightGuard) return 1;\n      return _get(Embed.prototype.__proto__ || Object.getPrototypeOf(Embed.prototype), 'index', this).call(this, node, offset);\n    }\n  }, {\n    key: 'restore',\n    value: function restore(node) {\n      var range = void 0,\n          textNode = void 0;\n      var text = node.data.split(GUARD_TEXT).join('');\n      if (node === this.leftGuard) {\n        if (this.prev instanceof _text2.default) {\n          var prevLength = this.prev.length();\n          this.prev.insertAt(prevLength, text);\n          range = {\n            startNode: this.prev.domNode,\n            startOffset: prevLength + text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      } else if (node === this.rightGuard) {\n        if (this.next instanceof _text2.default) {\n          this.next.insertAt(0, text);\n          range = {\n            startNode: this.next.domNode,\n            startOffset: text.length\n          };\n        } else {\n          textNode = document.createTextNode(text);\n          this.parent.insertBefore(_parchment2.default.create(textNode), this.next);\n          range = {\n            startNode: textNode,\n            startOffset: text.length\n          };\n        }\n      }\n      node.data = GUARD_TEXT;\n      return range;\n    }\n  }, {\n    key: 'update',\n    value: function update(mutations, context) {\n      var _this2 = this;\n\n      mutations.forEach(function (mutation) {\n        if (mutation.type === 'characterData' && (mutation.target === _this2.leftGuard || mutation.target === _this2.rightGuard)) {\n          var range = _this2.restore(mutation.target);\n          if (range) context.range = range;\n        }\n      });\n    }\n  }]);\n\n  return Embed;\n}(_parchment2.default.Embed);\n\nexports.default = Embed;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AlignStyle = exports.AlignClass = exports.AlignAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nvar AlignAttribute = new _parchment2.default.Attributor.Attribute('align', 'align', config);\nvar AlignClass = new _parchment2.default.Attributor.Class('align', 'ql-align', config);\nvar AlignStyle = new _parchment2.default.Attributor.Style('align', 'text-align', config);\n\nexports.AlignAttribute = AlignAttribute;\nexports.AlignClass = AlignClass;\nexports.AlignStyle = AlignStyle;\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BackgroundStyle = exports.BackgroundClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _color = __webpack_require__(26);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BackgroundClass = new _parchment2.default.Attributor.Class('background', 'ql-bg', {\n  scope: _parchment2.default.Scope.INLINE\n});\nvar BackgroundStyle = new _color.ColorAttributor('background', 'background-color', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nexports.BackgroundClass = BackgroundClass;\nexports.BackgroundStyle = BackgroundStyle;\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DirectionStyle = exports.DirectionClass = exports.DirectionAttribute = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar config = {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nvar DirectionAttribute = new _parchment2.default.Attributor.Attribute('direction', 'dir', config);\nvar DirectionClass = new _parchment2.default.Attributor.Class('direction', 'ql-direction', config);\nvar DirectionStyle = new _parchment2.default.Attributor.Style('direction', 'direction', config);\n\nexports.DirectionAttribute = DirectionAttribute;\nexports.DirectionClass = DirectionClass;\nexports.DirectionStyle = DirectionStyle;\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FontClass = exports.FontStyle = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar config = {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nvar FontClass = new _parchment2.default.Attributor.Class('font', 'ql-font', config);\n\nvar FontStyleAttributor = function (_Parchment$Attributor) {\n  _inherits(FontStyleAttributor, _Parchment$Attributor);\n\n  function FontStyleAttributor() {\n    _classCallCheck(this, FontStyleAttributor);\n\n    return _possibleConstructorReturn(this, (FontStyleAttributor.__proto__ || Object.getPrototypeOf(FontStyleAttributor)).apply(this, arguments));\n  }\n\n  _createClass(FontStyleAttributor, [{\n    key: 'value',\n    value: function value(node) {\n      return _get(FontStyleAttributor.prototype.__proto__ || Object.getPrototypeOf(FontStyleAttributor.prototype), 'value', this).call(this, node).replace(/[\"']/g, '');\n    }\n  }]);\n\n  return FontStyleAttributor;\n}(_parchment2.default.Attributor.Style);\n\nvar FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexports.FontStyle = FontStyle;\nexports.FontClass = FontClass;\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SizeStyle = exports.SizeClass = undefined;\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar SizeClass = new _parchment2.default.Attributor.Class('size', 'ql-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nvar SizeStyle = new _parchment2.default.Attributor.Style('size', 'font-size', {\n  scope: _parchment2.default.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexports.SizeClass = SizeClass;\nexports.SizeStyle = SizeStyle;\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n  'align': {\n    '': __webpack_require__(76),\n    'center': __webpack_require__(77),\n    'right': __webpack_require__(78),\n    'justify': __webpack_require__(79)\n  },\n  'background': __webpack_require__(80),\n  'blockquote': __webpack_require__(81),\n  'bold': __webpack_require__(82),\n  'clean': __webpack_require__(83),\n  'code': __webpack_require__(58),\n  'code-block': __webpack_require__(58),\n  'color': __webpack_require__(84),\n  'direction': {\n    '': __webpack_require__(85),\n    'rtl': __webpack_require__(86)\n  },\n  'float': {\n    'center': __webpack_require__(87),\n    'full': __webpack_require__(88),\n    'left': __webpack_require__(89),\n    'right': __webpack_require__(90)\n  },\n  'formula': __webpack_require__(91),\n  'header': {\n    '1': __webpack_require__(92),\n    '2': __webpack_require__(93)\n  },\n  'italic': __webpack_require__(94),\n  'image': __webpack_require__(95),\n  'indent': {\n    '+1': __webpack_require__(96),\n    '-1': __webpack_require__(97)\n  },\n  'link': __webpack_require__(98),\n  'list': {\n    'ordered': __webpack_require__(99),\n    'bullet': __webpack_require__(100),\n    'check': __webpack_require__(101)\n  },\n  'script': {\n    'sub': __webpack_require__(102),\n    'super': __webpack_require__(103)\n  },\n  'strike': __webpack_require__(104),\n  'underline': __webpack_require__(105),\n  'video': __webpack_require__(106)\n};\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLastChangeIndex = exports.default = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar History = function (_Module) {\n  _inherits(History, _Module);\n\n  function History(quill, options) {\n    _classCallCheck(this, History);\n\n    var _this = _possibleConstructorReturn(this, (History.__proto__ || Object.getPrototypeOf(History)).call(this, quill, options));\n\n    _this.lastRecorded = 0;\n    _this.ignoreChange = false;\n    _this.clear();\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (eventName, delta, oldDelta, source) {\n      if (eventName !== _quill2.default.events.TEXT_CHANGE || _this.ignoreChange) return;\n      if (!_this.options.userOnly || source === _quill2.default.sources.USER) {\n        _this.record(delta, oldDelta);\n      } else {\n        _this.transform(delta);\n      }\n    });\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, _this.undo.bind(_this));\n    _this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, _this.redo.bind(_this));\n    if (/Win/i.test(navigator.platform)) {\n      _this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, _this.redo.bind(_this));\n    }\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: 'change',\n    value: function change(source, dest) {\n      if (this.stack[source].length === 0) return;\n      var delta = this.stack[source].pop();\n      this.stack[dest].push(delta);\n      this.lastRecorded = 0;\n      this.ignoreChange = true;\n      this.quill.updateContents(delta[source], _quill2.default.sources.USER);\n      this.ignoreChange = false;\n      var index = getLastChangeIndex(delta[source]);\n      this.quill.setSelection(index);\n    }\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.stack = { undo: [], redo: [] };\n    }\n  }, {\n    key: 'cutoff',\n    value: function cutoff() {\n      this.lastRecorded = 0;\n    }\n  }, {\n    key: 'record',\n    value: function record(changeDelta, oldDelta) {\n      if (changeDelta.ops.length === 0) return;\n      this.stack.redo = [];\n      var undoDelta = this.quill.getContents().diff(oldDelta);\n      var timestamp = Date.now();\n      if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n        var delta = this.stack.undo.pop();\n        undoDelta = undoDelta.compose(delta.undo);\n        changeDelta = delta.redo.compose(changeDelta);\n      } else {\n        this.lastRecorded = timestamp;\n      }\n      this.stack.undo.push({\n        redo: changeDelta,\n        undo: undoDelta\n      });\n      if (this.stack.undo.length > this.options.maxStack) {\n        this.stack.undo.shift();\n      }\n    }\n  }, {\n    key: 'redo',\n    value: function redo() {\n      this.change('redo', 'undo');\n    }\n  }, {\n    key: 'transform',\n    value: function transform(delta) {\n      this.stack.undo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n      this.stack.redo.forEach(function (change) {\n        change.undo = delta.transform(change.undo, true);\n        change.redo = delta.transform(change.redo, true);\n      });\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.change('undo', 'redo');\n    }\n  }]);\n\n  return History;\n}(_module2.default);\n\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  var lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function (attr) {\n      return _parchment2.default.query(attr, _parchment2.default.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  var deleteLength = delta.reduce(function (length, op) {\n    length += op.delete || 0;\n    return length;\n  }, 0);\n  var changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nexports.default = History;\nexports.getLastChangeIndex = getLastChangeIndex;\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BaseTooltip = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _keyboard = __webpack_require__(23);\n\nvar _keyboard2 = _interopRequireDefault(_keyboard);\n\nvar _theme = __webpack_require__(34);\n\nvar _theme2 = _interopRequireDefault(_theme);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ALIGNS = [false, 'center', 'right', 'justify'];\n\nvar COLORS = [\"#000000\", \"#e60000\", \"#ff9900\", \"#ffff00\", \"#008a00\", \"#0066cc\", \"#9933ff\", \"#ffffff\", \"#facccc\", \"#ffebcc\", \"#ffffcc\", \"#cce8cc\", \"#cce0f5\", \"#ebd6ff\", \"#bbbbbb\", \"#f06666\", \"#ffc266\", \"#ffff66\", \"#66b966\", \"#66a3e0\", \"#c285ff\", \"#888888\", \"#a10000\", \"#b26b00\", \"#b2b200\", \"#006100\", \"#0047b2\", \"#6b24b2\", \"#444444\", \"#5c0000\", \"#663d00\", \"#666600\", \"#003700\", \"#002966\", \"#3d1466\"];\n\nvar FONTS = [false, 'serif', 'monospace'];\n\nvar HEADERS = ['1', '2', '3', false];\n\nvar SIZES = ['small', false, 'large', 'huge'];\n\nvar BaseTheme = function (_Theme) {\n  _inherits(BaseTheme, _Theme);\n\n  function BaseTheme(quill, options) {\n    _classCallCheck(this, BaseTheme);\n\n    var _this = _possibleConstructorReturn(this, (BaseTheme.__proto__ || Object.getPrototypeOf(BaseTheme)).call(this, quill, options));\n\n    var listener = function listener(e) {\n      if (!document.body.contains(quill.root)) {\n        return document.body.removeEventListener('click', listener);\n      }\n      if (_this.tooltip != null && !_this.tooltip.root.contains(e.target) && document.activeElement !== _this.tooltip.textbox && !_this.quill.hasFocus()) {\n        _this.tooltip.hide();\n      }\n      if (_this.pickers != null) {\n        _this.pickers.forEach(function (picker) {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n    return _this;\n  }\n\n  _createClass(BaseTheme, [{\n    key: 'addModule',\n    value: function addModule(name) {\n      var module = _get(BaseTheme.prototype.__proto__ || Object.getPrototypeOf(BaseTheme.prototype), 'addModule', this).call(this, name);\n      if (name === 'toolbar') {\n        this.extendToolbar(module);\n      }\n      return module;\n    }\n  }, {\n    key: 'buildButtons',\n    value: function buildButtons(buttons, icons) {\n      buttons.forEach(function (button) {\n        var className = button.getAttribute('class') || '';\n        className.split(/\\s+/).forEach(function (name) {\n          if (!name.startsWith('ql-')) return;\n          name = name.slice('ql-'.length);\n          if (icons[name] == null) return;\n          if (name === 'direction') {\n            button.innerHTML = icons[name][''] + icons[name]['rtl'];\n          } else if (typeof icons[name] === 'string') {\n            button.innerHTML = icons[name];\n          } else {\n            var value = button.value || '';\n            if (value != null && icons[name][value]) {\n              button.innerHTML = icons[name][value];\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: 'buildPickers',\n    value: function buildPickers(selects, icons) {\n      var _this2 = this;\n\n      this.pickers = selects.map(function (select) {\n        if (select.classList.contains('ql-align')) {\n          if (select.querySelector('option') == null) {\n            fillSelect(select, ALIGNS);\n          }\n          return new _iconPicker2.default(select, icons.align);\n        } else if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n          var format = select.classList.contains('ql-background') ? 'background' : 'color';\n          if (select.querySelector('option') == null) {\n            fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n          }\n          return new _colorPicker2.default(select, icons[format]);\n        } else {\n          if (select.querySelector('option') == null) {\n            if (select.classList.contains('ql-font')) {\n              fillSelect(select, FONTS);\n            } else if (select.classList.contains('ql-header')) {\n              fillSelect(select, HEADERS);\n            } else if (select.classList.contains('ql-size')) {\n              fillSelect(select, SIZES);\n            }\n          }\n          return new _picker2.default(select);\n        }\n      });\n      var update = function update() {\n        _this2.pickers.forEach(function (picker) {\n          picker.update();\n        });\n      };\n      this.quill.on(_emitter2.default.events.EDITOR_CHANGE, update);\n    }\n  }]);\n\n  return BaseTheme;\n}(_theme2.default);\n\nBaseTheme.DEFAULTS = (0, _extend2.default)(true, {}, _theme2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula: function formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image: function image() {\n          var _this3 = this;\n\n          var fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', function () {\n              if (fileInput.files != null && fileInput.files[0] != null) {\n                var reader = new FileReader();\n                reader.onload = function (e) {\n                  var range = _this3.quill.getSelection(true);\n                  _this3.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert({ image: e.target.result }), _emitter2.default.sources.USER);\n                  _this3.quill.setSelection(range.index + 1, _emitter2.default.sources.SILENT);\n                  fileInput.value = \"\";\n                };\n                reader.readAsDataURL(fileInput.files[0]);\n              }\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video: function video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\n\nvar BaseTooltip = function (_Tooltip) {\n  _inherits(BaseTooltip, _Tooltip);\n\n  function BaseTooltip(quill, boundsContainer) {\n    _classCallCheck(this, BaseTooltip);\n\n    var _this4 = _possibleConstructorReturn(this, (BaseTooltip.__proto__ || Object.getPrototypeOf(BaseTooltip)).call(this, quill, boundsContainer));\n\n    _this4.textbox = _this4.root.querySelector('input[type=\"text\"]');\n    _this4.listen();\n    return _this4;\n  }\n\n  _createClass(BaseTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this5 = this;\n\n      this.textbox.addEventListener('keydown', function (event) {\n        if (_keyboard2.default.match(event, 'enter')) {\n          _this5.save();\n          event.preventDefault();\n        } else if (_keyboard2.default.match(event, 'escape')) {\n          _this5.cancel();\n          event.preventDefault();\n        }\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.hide();\n    }\n  }, {\n    key: 'edit',\n    value: function edit() {\n      var mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n      var preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      this.root.classList.remove('ql-hidden');\n      this.root.classList.add('ql-editing');\n      if (preview != null) {\n        this.textbox.value = preview;\n      } else if (mode !== this.root.getAttribute('data-mode')) {\n        this.textbox.value = '';\n      }\n      this.position(this.quill.getBounds(this.quill.selection.savedRange));\n      this.textbox.select();\n      this.textbox.setAttribute('placeholder', this.textbox.getAttribute('data-' + mode) || '');\n      this.root.setAttribute('data-mode', mode);\n    }\n  }, {\n    key: 'restoreFocus',\n    value: function restoreFocus() {\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.quill.focus();\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n    }\n  }, {\n    key: 'save',\n    value: function save() {\n      var value = this.textbox.value;\n      switch (this.root.getAttribute('data-mode')) {\n        case 'link':\n          {\n            var scrollTop = this.quill.root.scrollTop;\n            if (this.linkRange) {\n              this.quill.formatText(this.linkRange, 'link', value, _emitter2.default.sources.USER);\n              delete this.linkRange;\n            } else {\n              this.restoreFocus();\n              this.quill.format('link', value, _emitter2.default.sources.USER);\n            }\n            this.quill.root.scrollTop = scrollTop;\n            break;\n          }\n        case 'video':\n          {\n            value = extractVideoUrl(value);\n          } // eslint-disable-next-line no-fallthrough\n        case 'formula':\n          {\n            if (!value) break;\n            var range = this.quill.getSelection(true);\n            if (range != null) {\n              var index = range.index + range.length;\n              this.quill.insertEmbed(index, this.root.getAttribute('data-mode'), value, _emitter2.default.sources.USER);\n              if (this.root.getAttribute('data-mode') === 'formula') {\n                this.quill.insertText(index + 1, ' ', _emitter2.default.sources.USER);\n              }\n              this.quill.setSelection(index + 2, _emitter2.default.sources.USER);\n            }\n            break;\n          }\n        default:\n      }\n      this.textbox.value = '';\n      this.hide();\n    }\n  }]);\n\n  return BaseTooltip;\n}(_tooltip2.default);\n\nfunction extractVideoUrl(url) {\n  var match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return (match[1] || 'https') + '://www.youtube.com/embed/' + match[2] + '?showinfo=0';\n  }\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    // eslint-disable-line no-cond-assign\n    return (match[1] || 'https') + '://player.vimeo.com/video/' + match[2] + '/';\n  }\n  return url;\n}\n\nfunction fillSelect(select, values) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n    select.appendChild(option);\n  });\n}\n\nexports.BaseTooltip = BaseTooltip;\nexports.default = BaseTheme;\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length = cur.length();\n            if (index < length ||\n                (inclusive && index === length && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = __webpack_require__(17);\nvar Registry = __webpack_require__(1);\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = __webpack_require__(18);\nvar Registry = __webpack_require__(1);\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = __webpack_require__(19);\nvar Registry = __webpack_require__(1);\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  var _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function (token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function (searchString, position) {\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function value(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports) {\n\n/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '', '\\uD83D\\uDC2F' === ''\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports) {\n\nexports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports) {\n\nvar supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.matchText = exports.matchSpacing = exports.matchNewline = exports.matchBlot = exports.matchAttributor = exports.default = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend2 = __webpack_require__(3);\n\nvar _extend3 = _interopRequireDefault(_extend2);\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _align = __webpack_require__(36);\n\nvar _background = __webpack_require__(37);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _color = __webpack_require__(26);\n\nvar _direction = __webpack_require__(38);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:clipboard');\n\nvar DOM_KEY = '__ql-matcher';\n\nvar CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchSpacing], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['b', matchAlias.bind(matchAlias, 'bold')], ['i', matchAlias.bind(matchAlias, 'italic')], ['style', matchIgnore]];\n\nvar ATTRIBUTE_ATTRIBUTORS = [_align.AlignAttribute, _direction.DirectionAttribute].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar STYLE_ATTRIBUTORS = [_align.AlignStyle, _background.BackgroundStyle, _color.ColorStyle, _direction.DirectionStyle, _font.FontStyle, _size.SizeStyle].reduce(function (memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nvar Clipboard = function (_Module) {\n  _inherits(Clipboard, _Module);\n\n  function Clipboard(quill, options) {\n    _classCallCheck(this, Clipboard);\n\n    var _this = _possibleConstructorReturn(this, (Clipboard.__proto__ || Object.getPrototypeOf(Clipboard)).call(this, quill, options));\n\n    _this.quill.root.addEventListener('paste', _this.onPaste.bind(_this));\n    _this.container = _this.quill.addContainer('ql-clipboard');\n    _this.container.setAttribute('contenteditable', true);\n    _this.container.setAttribute('tabindex', -1);\n    _this.matchers = [];\n    CLIPBOARD_CONFIG.concat(_this.options.matchers).forEach(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n          selector = _ref2[0],\n          matcher = _ref2[1];\n\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      _this.addMatcher(selector, matcher);\n    });\n    return _this;\n  }\n\n  _createClass(Clipboard, [{\n    key: 'addMatcher',\n    value: function addMatcher(selector, matcher) {\n      this.matchers.push([selector, matcher]);\n    }\n  }, {\n    key: 'convert',\n    value: function convert(html) {\n      if (typeof html === 'string') {\n        this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n        return this.convert();\n      }\n      var formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n      if (formats[_code2.default.blotName]) {\n        var text = this.container.innerText;\n        this.container.innerHTML = '';\n        return new _quillDelta2.default().insert(text, _defineProperty({}, _code2.default.blotName, formats[_code2.default.blotName]));\n      }\n\n      var _prepareMatching = this.prepareMatching(),\n          _prepareMatching2 = _slicedToArray(_prepareMatching, 2),\n          elementMatchers = _prepareMatching2[0],\n          textMatchers = _prepareMatching2[1];\n\n      var delta = traverse(this.container, elementMatchers, textMatchers);\n      // Remove trailing newline\n      if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n        delta = delta.compose(new _quillDelta2.default().retain(delta.length() - 1).delete(1));\n      }\n      debug.log('convert', this.container.innerHTML, delta);\n      this.container.innerHTML = '';\n      return delta;\n    }\n  }, {\n    key: 'dangerouslyPasteHTML',\n    value: function dangerouslyPasteHTML(index, html) {\n      var source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _quill2.default.sources.API;\n\n      if (typeof index === 'string') {\n        this.quill.setContents(this.convert(index), html);\n        this.quill.setSelection(0, _quill2.default.sources.SILENT);\n      } else {\n        var paste = this.convert(html);\n        this.quill.updateContents(new _quillDelta2.default().retain(index).concat(paste), source);\n        this.quill.setSelection(index + paste.length(), _quill2.default.sources.SILENT);\n      }\n    }\n  }, {\n    key: 'onPaste',\n    value: function onPaste(e) {\n      var _this2 = this;\n\n      if (e.defaultPrevented || !this.quill.isEnabled()) return;\n      var range = this.quill.getSelection();\n      var delta = new _quillDelta2.default().retain(range.index);\n      var scrollTop = this.quill.scrollingContainer.scrollTop;\n      this.container.focus();\n      this.quill.selection.update(_quill2.default.sources.SILENT);\n      setTimeout(function () {\n        delta = delta.concat(_this2.convert()).delete(range.length);\n        _this2.quill.updateContents(delta, _quill2.default.sources.USER);\n        // range.length contributes to delta.length()\n        _this2.quill.setSelection(delta.length() - range.length, _quill2.default.sources.SILENT);\n        _this2.quill.scrollingContainer.scrollTop = scrollTop;\n        _this2.quill.focus();\n      }, 1);\n    }\n  }, {\n    key: 'prepareMatching',\n    value: function prepareMatching() {\n      var _this3 = this;\n\n      var elementMatchers = [],\n          textMatchers = [];\n      this.matchers.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            selector = _pair[0],\n            matcher = _pair[1];\n\n        switch (selector) {\n          case Node.TEXT_NODE:\n            textMatchers.push(matcher);\n            break;\n          case Node.ELEMENT_NODE:\n            elementMatchers.push(matcher);\n            break;\n          default:\n            [].forEach.call(_this3.container.querySelectorAll(selector), function (node) {\n              // TODO use weakmap\n              node[DOM_KEY] = node[DOM_KEY] || [];\n              node[DOM_KEY].push(matcher);\n            });\n            break;\n        }\n      });\n      return [elementMatchers, textMatchers];\n    }\n  }]);\n\n  return Clipboard;\n}(_module2.default);\n\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\nfunction applyFormat(delta, format, value) {\n  if ((typeof format === 'undefined' ? 'undefined' : _typeof(format)) === 'object') {\n    return Object.keys(format).reduce(function (delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function (delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, (0, _extend3.default)({}, _defineProperty({}, format, value), op.attributes));\n      }\n    }, new _quillDelta2.default());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  var DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  var endText = \"\";\n  for (var i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    var op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\n  var style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function (delta, matcher) {\n      return matcher(node, delta);\n    }, new _quillDelta2.default());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], function (delta, childNode) {\n      var childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function (childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new _quillDelta2.default());\n  } else {\n    return new _quillDelta2.default();\n  }\n}\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  var attributes = _parchment2.default.Attributor.Attribute.keys(node);\n  var classes = _parchment2.default.Attributor.Class.keys(node);\n  var styles = _parchment2.default.Attributor.Style.keys(node);\n  var formats = {};\n  attributes.concat(classes).concat(styles).forEach(function (name) {\n    var attr = _parchment2.default.query(name, _parchment2.default.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof _parchment2.default.Embed) {\n    var embed = {};\n    var value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new _quillDelta2.default().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new _quillDelta2.default();\n}\n\nfunction matchIndent(node, delta) {\n  var match = _parchment2.default.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  var indent = -1,\n      parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((_parchment2.default.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new _quillDelta2.default().retain(delta.length() - 1).retain(1, { indent: indent }));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || delta.length() > 0 && node.nextSibling && isLine(node.nextSibling)) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    var nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight * 1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  var formats = {};\n  var style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') || parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    delta = new _quillDelta2.default().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  var text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    var replacer = function replacer(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (node.previousSibling == null && isLine(node.parentNode) || node.previousSibling != null && isLine(node.previousSibling)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (node.nextSibling == null && isLine(node.parentNode) || node.nextSibling != null && isLine(node.nextSibling)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexports.default = Clipboard;\nexports.matchAttributor = matchAttributor;\nexports.matchBlot = matchBlot;\nexports.matchNewline = matchNewline;\nexports.matchSpacing = matchSpacing;\nexports.matchText = matchText;\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Bold = function (_Inline) {\n  _inherits(Bold, _Inline);\n\n  function Bold() {\n    _classCallCheck(this, Bold);\n\n    return _possibleConstructorReturn(this, (Bold.__proto__ || Object.getPrototypeOf(Bold)).apply(this, arguments));\n  }\n\n  _createClass(Bold, [{\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(Bold.prototype.__proto__ || Object.getPrototypeOf(Bold.prototype), 'optimize', this).call(this, context);\n      if (this.domNode.tagName !== this.statics.tagName[0]) {\n        this.replaceWith(this.statics.blotName);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create() {\n      return _get(Bold.__proto__ || Object.getPrototypeOf(Bold), 'create', this).call(this);\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      return true;\n    }\n  }]);\n\n  return Bold;\n}(_inline2.default);\n\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexports.default = Bold;\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addControls = exports.default = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _quillDelta = __webpack_require__(2);\n\nvar _quillDelta2 = _interopRequireDefault(_quillDelta);\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _logger = __webpack_require__(10);\n\nvar _logger2 = _interopRequireDefault(_logger);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar debug = (0, _logger2.default)('quill:toolbar');\n\nvar Toolbar = function (_Module) {\n  _inherits(Toolbar, _Module);\n\n  function Toolbar(quill, options) {\n    _classCallCheck(this, Toolbar);\n\n    var _this = _possibleConstructorReturn(this, (Toolbar.__proto__ || Object.getPrototypeOf(Toolbar)).call(this, quill, options));\n\n    if (Array.isArray(_this.options.container)) {\n      var container = document.createElement('div');\n      addControls(container, _this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      _this.container = container;\n    } else if (typeof _this.options.container === 'string') {\n      _this.container = document.querySelector(_this.options.container);\n    } else {\n      _this.container = _this.options.container;\n    }\n    if (!(_this.container instanceof HTMLElement)) {\n      var _ret;\n\n      return _ret = debug.error('Container required for toolbar', _this.options), _possibleConstructorReturn(_this, _ret);\n    }\n    _this.container.classList.add('ql-toolbar');\n    _this.controls = [];\n    _this.handlers = {};\n    Object.keys(_this.options.handlers).forEach(function (format) {\n      _this.addHandler(format, _this.options.handlers[format]);\n    });\n    [].forEach.call(_this.container.querySelectorAll('button, select'), function (input) {\n      _this.attach(input);\n    });\n    _this.quill.on(_quill2.default.events.EDITOR_CHANGE, function (type, range) {\n      if (type === _quill2.default.events.SELECTION_CHANGE) {\n        _this.update(range);\n      }\n    });\n    _this.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      var _this$quill$selection = _this.quill.selection.getRange(),\n          _this$quill$selection2 = _slicedToArray(_this$quill$selection, 1),\n          range = _this$quill$selection2[0]; // quill.getSelection triggers update\n\n\n      _this.update(range);\n    });\n    return _this;\n  }\n\n  _createClass(Toolbar, [{\n    key: 'addHandler',\n    value: function addHandler(format, handler) {\n      this.handlers[format] = handler;\n    }\n  }, {\n    key: 'attach',\n    value: function attach(input) {\n      var _this2 = this;\n\n      var format = [].find.call(input.classList, function (className) {\n        return className.indexOf('ql-') === 0;\n      });\n      if (!format) return;\n      format = format.slice('ql-'.length);\n      if (input.tagName === 'BUTTON') {\n        input.setAttribute('type', 'button');\n      }\n      if (this.handlers[format] == null) {\n        if (this.quill.scroll.whitelist != null && this.quill.scroll.whitelist[format] == null) {\n          debug.warn('ignoring attaching to disabled format', format, input);\n          return;\n        }\n        if (_parchment2.default.query(format) == null) {\n          debug.warn('ignoring attaching to nonexistent format', format, input);\n          return;\n        }\n      }\n      var eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n      input.addEventListener(eventName, function (e) {\n        var value = void 0;\n        if (input.tagName === 'SELECT') {\n          if (input.selectedIndex < 0) return;\n          var selected = input.options[input.selectedIndex];\n          if (selected.hasAttribute('selected')) {\n            value = false;\n          } else {\n            value = selected.value || false;\n          }\n        } else {\n          if (input.classList.contains('ql-active')) {\n            value = false;\n          } else {\n            value = input.value || !input.hasAttribute('value');\n          }\n          e.preventDefault();\n        }\n        _this2.quill.focus();\n\n        var _quill$selection$getR = _this2.quill.selection.getRange(),\n            _quill$selection$getR2 = _slicedToArray(_quill$selection$getR, 1),\n            range = _quill$selection$getR2[0];\n\n        if (_this2.handlers[format] != null) {\n          _this2.handlers[format].call(_this2, value);\n        } else if (_parchment2.default.query(format).prototype instanceof _parchment2.default.Embed) {\n          value = prompt('Enter ' + format);\n          if (!value) return;\n          _this2.quill.updateContents(new _quillDelta2.default().retain(range.index).delete(range.length).insert(_defineProperty({}, format, value)), _quill2.default.sources.USER);\n        } else {\n          _this2.quill.format(format, value, _quill2.default.sources.USER);\n        }\n        _this2.update(range);\n      });\n      // TODO use weakmap\n      this.controls.push([format, input]);\n    }\n  }, {\n    key: 'update',\n    value: function update(range) {\n      var formats = range == null ? {} : this.quill.getFormat(range);\n      this.controls.forEach(function (pair) {\n        var _pair = _slicedToArray(pair, 2),\n            format = _pair[0],\n            input = _pair[1];\n\n        if (input.tagName === 'SELECT') {\n          var option = void 0;\n          if (range == null) {\n            option = null;\n          } else if (formats[format] == null) {\n            option = input.querySelector('option[selected]');\n          } else if (!Array.isArray(formats[format])) {\n            var value = formats[format];\n            if (typeof value === 'string') {\n              value = value.replace(/\\\"/g, '\\\\\"');\n            }\n            option = input.querySelector('option[value=\"' + value + '\"]');\n          }\n          if (option == null) {\n            input.value = ''; // TODO make configurable?\n            input.selectedIndex = -1;\n          } else {\n            option.selected = true;\n          }\n        } else {\n          if (range == null) {\n            input.classList.remove('ql-active');\n          } else if (input.hasAttribute('value')) {\n            // both being null should match (default values)\n            // '1' should match with 1 (headers)\n            var isActive = formats[format] === input.getAttribute('value') || formats[format] != null && formats[format].toString() === input.getAttribute('value') || formats[format] == null && !input.getAttribute('value');\n            input.classList.toggle('ql-active', isActive);\n          } else {\n            input.classList.toggle('ql-active', formats[format] != null);\n          }\n        }\n      });\n    }\n  }]);\n\n  return Toolbar;\n}(_module2.default);\n\nToolbar.DEFAULTS = {};\n\nfunction addButton(container, format, value) {\n  var input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add('ql-' + format);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(function (controls) {\n    var group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(function (control) {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        var format = Object.keys(control)[0];\n        var value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  var input = document.createElement('select');\n  input.classList.add('ql-' + format);\n  values.forEach(function (value) {\n    var option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean: function clean() {\n      var _this3 = this;\n\n      var range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length == 0) {\n        var formats = this.quill.getFormat();\n        Object.keys(formats).forEach(function (name) {\n          // Clean functionality in existing apps only clean inline formats\n          if (_parchment2.default.query(name, _parchment2.default.Scope.INLINE) != null) {\n            _this3.quill.format(name, false);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, _quill2.default.sources.USER);\n      }\n    },\n    direction: function direction(value) {\n      var align = this.quill.getFormat()['align'];\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', _quill2.default.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, _quill2.default.sources.USER);\n      }\n      this.quill.format('direction', value, _quill2.default.sources.USER);\n    },\n    indent: function indent(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      var indent = parseInt(formats.indent || 0);\n      if (value === '+1' || value === '-1') {\n        var modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, _quill2.default.sources.USER);\n      }\n    },\n    link: function link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:');\n      }\n      this.quill.format('link', value, _quill2.default.sources.USER);\n    },\n    list: function list(value) {\n      var range = this.quill.getSelection();\n      var formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats['list'] === 'checked' || formats['list'] === 'unchecked') {\n          this.quill.format('list', false, _quill2.default.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', _quill2.default.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, _quill2.default.sources.USER);\n      }\n    }\n  }\n};\n\nexports.default = Toolbar;\nexports.addControls = addControls;\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ColorPicker = function (_Picker) {\n  _inherits(ColorPicker, _Picker);\n\n  function ColorPicker(select, label) {\n    _classCallCheck(this, ColorPicker);\n\n    var _this = _possibleConstructorReturn(this, (ColorPicker.__proto__ || Object.getPrototypeOf(ColorPicker)).call(this, select));\n\n    _this.label.innerHTML = label;\n    _this.container.classList.add('ql-color-picker');\n    [].slice.call(_this.container.querySelectorAll('.ql-picker-item'), 0, 7).forEach(function (item) {\n      item.classList.add('ql-primary');\n    });\n    return _this;\n  }\n\n  _createClass(ColorPicker, [{\n    key: 'buildItem',\n    value: function buildItem(option) {\n      var item = _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'buildItem', this).call(this, option);\n      item.style.backgroundColor = option.getAttribute('value') || '';\n      return item;\n    }\n  }, {\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(ColorPicker.prototype.__proto__ || Object.getPrototypeOf(ColorPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      var colorLabel = this.label.querySelector('.ql-color-label');\n      var value = item ? item.getAttribute('data-value') || '' : '';\n      if (colorLabel) {\n        if (colorLabel.tagName === 'line') {\n          colorLabel.style.stroke = value;\n        } else {\n          colorLabel.style.fill = value;\n        }\n      }\n    }\n  }]);\n\n  return ColorPicker;\n}(_picker2.default);\n\nexports.default = ColorPicker;\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IconPicker = function (_Picker) {\n  _inherits(IconPicker, _Picker);\n\n  function IconPicker(select, icons) {\n    _classCallCheck(this, IconPicker);\n\n    var _this = _possibleConstructorReturn(this, (IconPicker.__proto__ || Object.getPrototypeOf(IconPicker)).call(this, select));\n\n    _this.container.classList.add('ql-icon-picker');\n    [].forEach.call(_this.container.querySelectorAll('.ql-picker-item'), function (item) {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    _this.defaultItem = _this.container.querySelector('.ql-selected');\n    _this.selectItem(_this.defaultItem);\n    return _this;\n  }\n\n  _createClass(IconPicker, [{\n    key: 'selectItem',\n    value: function selectItem(item, trigger) {\n      _get(IconPicker.prototype.__proto__ || Object.getPrototypeOf(IconPicker.prototype), 'selectItem', this).call(this, item, trigger);\n      item = item || this.defaultItem;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }]);\n\n  return IconPicker;\n}(_picker2.default);\n\nexports.default = IconPicker;\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tooltip = function () {\n  function Tooltip(quill, boundsContainer) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener('scroll', function () {\n        _this.root.style.marginTop = -1 * _this.quill.root.scrollTop + 'px';\n      });\n    }\n    this.hide();\n  }\n\n  _createClass(Tooltip, [{\n    key: 'hide',\n    value: function hide() {\n      this.root.classList.add('ql-hidden');\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n      // root.scrollTop should be 0 if scrollContainer !== root\n      var top = reference.bottom + this.quill.root.scrollTop;\n      this.root.style.left = left + 'px';\n      this.root.style.top = top + 'px';\n      this.root.classList.remove('ql-flip');\n      var containerBounds = this.boundsContainer.getBoundingClientRect();\n      var rootBounds = this.root.getBoundingClientRect();\n      var shift = 0;\n      if (rootBounds.right > containerBounds.right) {\n        shift = containerBounds.right - rootBounds.right;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.left < containerBounds.left) {\n        shift = containerBounds.left - rootBounds.left;\n        this.root.style.left = left + shift + 'px';\n      }\n      if (rootBounds.bottom > containerBounds.bottom) {\n        var height = rootBounds.bottom - rootBounds.top;\n        var verticalShift = reference.bottom - reference.top + height;\n        this.root.style.top = top - verticalShift + 'px';\n        this.root.classList.add('ql-flip');\n      }\n      return shift;\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.root.classList.remove('ql-editing');\n      this.root.classList.remove('ql-hidden');\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexports.default = Tooltip;\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [[{ header: ['1', '2', '3', false] }], ['bold', 'italic', 'underline', 'link'], [{ list: 'ordered' }, { list: 'bullet' }], ['clean']];\n\nvar SnowTheme = function (_BaseTheme) {\n  _inherits(SnowTheme, _BaseTheme);\n\n  function SnowTheme(quill, options) {\n    _classCallCheck(this, SnowTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (SnowTheme.__proto__ || Object.getPrototypeOf(SnowTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-snow');\n    return _this;\n  }\n\n  _createClass(SnowTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({ key: 'K', shortKey: true }, function (range, context) {\n          toolbar.handlers['link'].call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }]);\n\n  return SnowTheme;\n}(_base2.default);\n\nSnowTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (value) {\n            var range = this.quill.getSelection();\n            if (range == null || range.length == 0) return;\n            var preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = 'mailto:' + preview;\n            }\n            var tooltip = this.quill.theme.tooltip;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n      }\n    }\n  }\n});\n\nvar SnowTooltip = function (_BaseTooltip) {\n  _inherits(SnowTooltip, _BaseTooltip);\n\n  function SnowTooltip(quill, bounds) {\n    _classCallCheck(this, SnowTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (SnowTooltip.__proto__ || Object.getPrototypeOf(SnowTooltip)).call(this, quill, bounds));\n\n    _this2.preview = _this2.root.querySelector('a.ql-preview');\n    return _this2;\n  }\n\n  _createClass(SnowTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('a.ql-action').addEventListener('click', function (event) {\n        if (_this3.root.classList.contains('ql-editing')) {\n          _this3.save();\n        } else {\n          _this3.edit('link', _this3.preview.textContent);\n        }\n        event.preventDefault();\n      });\n      this.root.querySelector('a.ql-remove').addEventListener('click', function (event) {\n        if (_this3.linkRange != null) {\n          var range = _this3.linkRange;\n          _this3.restoreFocus();\n          _this3.quill.formatText(range, 'link', false, _emitter2.default.sources.USER);\n          delete _this3.linkRange;\n        }\n        event.preventDefault();\n        _this3.hide();\n      });\n      this.quill.on(_emitter2.default.events.SELECTION_CHANGE, function (range, oldRange, source) {\n        if (range == null) return;\n        if (range.length === 0 && source === _emitter2.default.sources.USER) {\n          var _quill$scroll$descend = _this3.quill.scroll.descendant(_link2.default, range.index),\n              _quill$scroll$descend2 = _slicedToArray(_quill$scroll$descend, 2),\n              link = _quill$scroll$descend2[0],\n              offset = _quill$scroll$descend2[1];\n\n          if (link != null) {\n            _this3.linkRange = new _selection.Range(range.index - offset, link.length());\n            var preview = _link2.default.formats(link.domNode);\n            _this3.preview.textContent = preview;\n            _this3.preview.setAttribute('href', preview);\n            _this3.show();\n            _this3.position(_this3.quill.getBounds(_this3.linkRange));\n            return;\n          }\n        } else {\n          delete _this3.linkRange;\n        }\n        _this3.hide();\n      });\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      _get(SnowTooltip.prototype.__proto__ || Object.getPrototypeOf(SnowTooltip.prototype), 'show', this).call(this);\n      this.root.removeAttribute('data-mode');\n    }\n  }]);\n\n  return SnowTooltip;\n}(_base.BaseTooltip);\n\nSnowTooltip.TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n\nexports.default = SnowTheme;\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _core = __webpack_require__(29);\n\nvar _core2 = _interopRequireDefault(_core);\n\nvar _align = __webpack_require__(36);\n\nvar _direction = __webpack_require__(38);\n\nvar _indent = __webpack_require__(64);\n\nvar _blockquote = __webpack_require__(65);\n\nvar _blockquote2 = _interopRequireDefault(_blockquote);\n\nvar _header = __webpack_require__(66);\n\nvar _header2 = _interopRequireDefault(_header);\n\nvar _list = __webpack_require__(67);\n\nvar _list2 = _interopRequireDefault(_list);\n\nvar _background = __webpack_require__(37);\n\nvar _color = __webpack_require__(26);\n\nvar _font = __webpack_require__(39);\n\nvar _size = __webpack_require__(40);\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nvar _italic = __webpack_require__(68);\n\nvar _italic2 = _interopRequireDefault(_italic);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nvar _script = __webpack_require__(69);\n\nvar _script2 = _interopRequireDefault(_script);\n\nvar _strike = __webpack_require__(70);\n\nvar _strike2 = _interopRequireDefault(_strike);\n\nvar _underline = __webpack_require__(71);\n\nvar _underline2 = _interopRequireDefault(_underline);\n\nvar _image = __webpack_require__(72);\n\nvar _image2 = _interopRequireDefault(_image);\n\nvar _video = __webpack_require__(73);\n\nvar _video2 = _interopRequireDefault(_video);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nvar _formula = __webpack_require__(74);\n\nvar _formula2 = _interopRequireDefault(_formula);\n\nvar _syntax = __webpack_require__(75);\n\nvar _syntax2 = _interopRequireDefault(_syntax);\n\nvar _toolbar = __webpack_require__(57);\n\nvar _toolbar2 = _interopRequireDefault(_toolbar);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nvar _picker = __webpack_require__(28);\n\nvar _picker2 = _interopRequireDefault(_picker);\n\nvar _colorPicker = __webpack_require__(59);\n\nvar _colorPicker2 = _interopRequireDefault(_colorPicker);\n\nvar _iconPicker = __webpack_require__(60);\n\nvar _iconPicker2 = _interopRequireDefault(_iconPicker);\n\nvar _tooltip = __webpack_require__(61);\n\nvar _tooltip2 = _interopRequireDefault(_tooltip);\n\nvar _bubble = __webpack_require__(108);\n\nvar _bubble2 = _interopRequireDefault(_bubble);\n\nvar _snow = __webpack_require__(62);\n\nvar _snow2 = _interopRequireDefault(_snow);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_core2.default.register({\n  'attributors/attribute/direction': _direction.DirectionAttribute,\n\n  'attributors/class/align': _align.AlignClass,\n  'attributors/class/background': _background.BackgroundClass,\n  'attributors/class/color': _color.ColorClass,\n  'attributors/class/direction': _direction.DirectionClass,\n  'attributors/class/font': _font.FontClass,\n  'attributors/class/size': _size.SizeClass,\n\n  'attributors/style/align': _align.AlignStyle,\n  'attributors/style/background': _background.BackgroundStyle,\n  'attributors/style/color': _color.ColorStyle,\n  'attributors/style/direction': _direction.DirectionStyle,\n  'attributors/style/font': _font.FontStyle,\n  'attributors/style/size': _size.SizeStyle\n}, true);\n\n_core2.default.register({\n  'formats/align': _align.AlignClass,\n  'formats/direction': _direction.DirectionClass,\n  'formats/indent': _indent.IndentClass,\n\n  'formats/background': _background.BackgroundStyle,\n  'formats/color': _color.ColorStyle,\n  'formats/font': _font.FontClass,\n  'formats/size': _size.SizeClass,\n\n  'formats/blockquote': _blockquote2.default,\n  'formats/code-block': _code2.default,\n  'formats/header': _header2.default,\n  'formats/list': _list2.default,\n\n  'formats/bold': _bold2.default,\n  'formats/code': _code.Code,\n  'formats/italic': _italic2.default,\n  'formats/link': _link2.default,\n  'formats/script': _script2.default,\n  'formats/strike': _strike2.default,\n  'formats/underline': _underline2.default,\n\n  'formats/image': _image2.default,\n  'formats/video': _video2.default,\n\n  'formats/list/item': _list.ListItem,\n\n  'modules/formula': _formula2.default,\n  'modules/syntax': _syntax2.default,\n  'modules/toolbar': _toolbar2.default,\n\n  'themes/bubble': _bubble2.default,\n  'themes/snow': _snow2.default,\n\n  'ui/icons': _icons2.default,\n  'ui/picker': _picker2.default,\n  'ui/icon-picker': _iconPicker2.default,\n  'ui/color-picker': _colorPicker2.default,\n  'ui/tooltip': _tooltip2.default\n}, true);\n\nexports.default = _core2.default;\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.IndentClass = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IdentAttributor = function (_Parchment$Attributor) {\n  _inherits(IdentAttributor, _Parchment$Attributor);\n\n  function IdentAttributor() {\n    _classCallCheck(this, IdentAttributor);\n\n    return _possibleConstructorReturn(this, (IdentAttributor.__proto__ || Object.getPrototypeOf(IdentAttributor)).apply(this, arguments));\n  }\n\n  _createClass(IdentAttributor, [{\n    key: 'add',\n    value: function add(node, value) {\n      if (value === '+1' || value === '-1') {\n        var indent = this.value(node) || 0;\n        value = value === '+1' ? indent + 1 : indent - 1;\n      }\n      if (value === 0) {\n        this.remove(node);\n        return true;\n      } else {\n        return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'add', this).call(this, node, value);\n      }\n    }\n  }, {\n    key: 'canAdd',\n    value: function canAdd(node, value) {\n      return _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, value) || _get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'canAdd', this).call(this, node, parseInt(value));\n    }\n  }, {\n    key: 'value',\n    value: function value(node) {\n      return parseInt(_get(IdentAttributor.prototype.__proto__ || Object.getPrototypeOf(IdentAttributor.prototype), 'value', this).call(this, node)) || undefined; // Don't return NaN\n    }\n  }]);\n\n  return IdentAttributor;\n}(_parchment2.default.Attributor.Class);\n\nvar IndentClass = new IdentAttributor('indent', 'ql-indent', {\n  scope: _parchment2.default.Scope.BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\n\nexports.IndentClass = IndentClass;\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Blockquote = function (_Block) {\n  _inherits(Blockquote, _Block);\n\n  function Blockquote() {\n    _classCallCheck(this, Blockquote);\n\n    return _possibleConstructorReturn(this, (Blockquote.__proto__ || Object.getPrototypeOf(Blockquote)).apply(this, arguments));\n  }\n\n  return Blockquote;\n}(_block2.default);\n\nBlockquote.blotName = 'blockquote';\nBlockquote.tagName = 'blockquote';\n\nexports.default = Blockquote;\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Header = function (_Block) {\n  _inherits(Header, _Block);\n\n  function Header() {\n    _classCallCheck(this, Header);\n\n    return _possibleConstructorReturn(this, (Header.__proto__ || Object.getPrototypeOf(Header)).apply(this, arguments));\n  }\n\n  _createClass(Header, null, [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return this.tagName.indexOf(domNode.tagName) + 1;\n    }\n  }]);\n\n  return Header;\n}(_block2.default);\n\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\nexports.default = Header;\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.ListItem = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _block = __webpack_require__(4);\n\nvar _block2 = _interopRequireDefault(_block);\n\nvar _container = __webpack_require__(25);\n\nvar _container2 = _interopRequireDefault(_container);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ListItem = function (_Block) {\n  _inherits(ListItem, _Block);\n\n  function ListItem() {\n    _classCallCheck(this, ListItem);\n\n    return _possibleConstructorReturn(this, (ListItem.__proto__ || Object.getPrototypeOf(ListItem)).apply(this, arguments));\n  }\n\n  _createClass(ListItem, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (name === List.blotName && !value) {\n        this.replaceWith(_parchment2.default.create(this.statics.scope));\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      if (this.prev == null && this.next == null) {\n        this.parent.remove();\n      } else {\n        _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'remove', this).call(this);\n      }\n    }\n  }, {\n    key: 'replaceWith',\n    value: function replaceWith(name, value) {\n      this.parent.isolate(this.offset(this.parent), this.length());\n      if (name === this.parent.statics.blotName) {\n        this.parent.replaceWith(name, value);\n        return this;\n      } else {\n        this.parent.unwrap();\n        return _get(ListItem.prototype.__proto__ || Object.getPrototypeOf(ListItem.prototype), 'replaceWith', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'formats',\n    value: function formats(domNode) {\n      return domNode.tagName === this.tagName ? undefined : _get(ListItem.__proto__ || Object.getPrototypeOf(ListItem), 'formats', this).call(this, domNode);\n    }\n  }]);\n\n  return ListItem;\n}(_block2.default);\n\nListItem.blotName = 'list-item';\nListItem.tagName = 'LI';\n\nvar List = function (_Container) {\n  _inherits(List, _Container);\n\n  _createClass(List, null, [{\n    key: 'create',\n    value: function create(value) {\n      var tagName = value === 'ordered' ? 'OL' : 'UL';\n      var node = _get(List.__proto__ || Object.getPrototypeOf(List), 'create', this).call(this, tagName);\n      if (value === 'checked' || value === 'unchecked') {\n        node.setAttribute('data-checked', value === 'checked');\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'OL') return 'ordered';\n      if (domNode.tagName === 'UL') {\n        if (domNode.hasAttribute('data-checked')) {\n          return domNode.getAttribute('data-checked') === 'true' ? 'checked' : 'unchecked';\n        } else {\n          return 'bullet';\n        }\n      }\n      return undefined;\n    }\n  }]);\n\n  function List(domNode) {\n    _classCallCheck(this, List);\n\n    var _this2 = _possibleConstructorReturn(this, (List.__proto__ || Object.getPrototypeOf(List)).call(this, domNode));\n\n    var listEventHandler = function listEventHandler(e) {\n      if (e.target.parentNode !== domNode) return;\n      var format = _this2.statics.formats(domNode);\n      var blot = _parchment2.default.find(e.target);\n      if (format === 'checked') {\n        blot.format('list', 'unchecked');\n      } else if (format === 'unchecked') {\n        blot.format('list', 'checked');\n      }\n    };\n\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n    return _this2;\n  }\n\n  _createClass(List, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (this.children.length > 0) {\n        this.children.tail.format(name, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats() {\n      // We don't inherit from FormatBlot\n      return _defineProperty({}, this.statics.blotName, this.statics.formats(this.domNode));\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(blot, ref) {\n      if (blot instanceof ListItem) {\n        _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'insertBefore', this).call(this, blot, ref);\n      } else {\n        var index = ref == null ? this.length() : ref.offset(this);\n        var after = this.split(index);\n        after.parent.insertBefore(blot, after);\n      }\n    }\n  }, {\n    key: 'optimize',\n    value: function optimize(context) {\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'optimize', this).call(this, context);\n      var next = this.next;\n      if (next != null && next.prev === this && next.statics.blotName === this.statics.blotName && next.domNode.tagName === this.domNode.tagName && next.domNode.getAttribute('data-checked') === this.domNode.getAttribute('data-checked')) {\n        next.moveChildren(this);\n        next.remove();\n      }\n    }\n  }, {\n    key: 'replace',\n    value: function replace(target) {\n      if (target.statics.blotName !== this.statics.blotName) {\n        var item = _parchment2.default.create(this.statics.defaultChild);\n        target.moveChildren(item);\n        this.appendChild(item);\n      }\n      _get(List.prototype.__proto__ || Object.getPrototypeOf(List.prototype), 'replace', this).call(this, target);\n    }\n  }]);\n\n  return List;\n}(_container2.default);\n\nList.blotName = 'list';\nList.scope = _parchment2.default.Scope.BLOCK_BLOT;\nList.tagName = ['OL', 'UL'];\nList.defaultChild = 'list-item';\nList.allowedChildren = [ListItem];\n\nexports.ListItem = ListItem;\nexports.default = List;\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _bold = __webpack_require__(56);\n\nvar _bold2 = _interopRequireDefault(_bold);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Italic = function (_Bold) {\n  _inherits(Italic, _Bold);\n\n  function Italic() {\n    _classCallCheck(this, Italic);\n\n    return _possibleConstructorReturn(this, (Italic.__proto__ || Object.getPrototypeOf(Italic)).apply(this, arguments));\n  }\n\n  return Italic;\n}(_bold2.default);\n\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexports.default = Italic;\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Script = function (_Inline) {\n  _inherits(Script, _Inline);\n\n  function Script() {\n    _classCallCheck(this, Script);\n\n    return _possibleConstructorReturn(this, (Script.__proto__ || Object.getPrototypeOf(Script)).apply(this, arguments));\n  }\n\n  _createClass(Script, null, [{\n    key: 'create',\n    value: function create(value) {\n      if (value === 'super') {\n        return document.createElement('sup');\n      } else if (value === 'sub') {\n        return document.createElement('sub');\n      } else {\n        return _get(Script.__proto__ || Object.getPrototypeOf(Script), 'create', this).call(this, value);\n      }\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      if (domNode.tagName === 'SUB') return 'sub';\n      if (domNode.tagName === 'SUP') return 'super';\n      return undefined;\n    }\n  }]);\n\n  return Script;\n}(_inline2.default);\n\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n\nexports.default = Script;\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Strike = function (_Inline) {\n  _inherits(Strike, _Inline);\n\n  function Strike() {\n    _classCallCheck(this, Strike);\n\n    return _possibleConstructorReturn(this, (Strike.__proto__ || Object.getPrototypeOf(Strike)).apply(this, arguments));\n  }\n\n  return Strike;\n}(_inline2.default);\n\nStrike.blotName = 'strike';\nStrike.tagName = 'S';\n\nexports.default = Strike;\n\n/***/ }),\n/* 71 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _inline = __webpack_require__(6);\n\nvar _inline2 = _interopRequireDefault(_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Underline = function (_Inline) {\n  _inherits(Underline, _Inline);\n\n  function Underline() {\n    _classCallCheck(this, Underline);\n\n    return _possibleConstructorReturn(this, (Underline.__proto__ || Object.getPrototypeOf(Underline)).apply(this, arguments));\n  }\n\n  return Underline;\n}(_inline2.default);\n\nUnderline.blotName = 'underline';\nUnderline.tagName = 'U';\n\nexports.default = Underline;\n\n/***/ }),\n/* 72 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _link = __webpack_require__(27);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['alt', 'height', 'width'];\n\nvar Image = function (_Parchment$Embed) {\n  _inherits(Image, _Parchment$Embed);\n\n  function Image() {\n    _classCallCheck(this, Image);\n\n    return _possibleConstructorReturn(this, (Image.__proto__ || Object.getPrototypeOf(Image)).apply(this, arguments));\n  }\n\n  _createClass(Image, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Image.prototype.__proto__ || Object.getPrototypeOf(Image.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Image.__proto__ || Object.getPrototypeOf(Image), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        node.setAttribute('src', this.sanitize(value));\n      }\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'match',\n    value: function match(url) {\n      return (/\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url)\n      );\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return (0, _link.sanitize)(url, ['http', 'https', 'data']) ? url : '//:0';\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Image;\n}(_parchment2.default.Embed);\n\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n\nexports.default = Image;\n\n/***/ }),\n/* 73 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _block = __webpack_require__(4);\n\nvar _link = __webpack_require__(27);\n\nvar _link2 = _interopRequireDefault(_link);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ATTRIBUTES = ['height', 'width'];\n\nvar Video = function (_BlockEmbed) {\n  _inherits(Video, _BlockEmbed);\n\n  function Video() {\n    _classCallCheck(this, Video);\n\n    return _possibleConstructorReturn(this, (Video.__proto__ || Object.getPrototypeOf(Video)).apply(this, arguments));\n  }\n\n  _createClass(Video, [{\n    key: 'format',\n    value: function format(name, value) {\n      if (ATTRIBUTES.indexOf(name) > -1) {\n        if (value) {\n          this.domNode.setAttribute(name, value);\n        } else {\n          this.domNode.removeAttribute(name);\n        }\n      } else {\n        _get(Video.prototype.__proto__ || Object.getPrototypeOf(Video.prototype), 'format', this).call(this, name, value);\n      }\n    }\n  }], [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(Video.__proto__ || Object.getPrototypeOf(Video), 'create', this).call(this, value);\n      node.setAttribute('frameborder', '0');\n      node.setAttribute('allowfullscreen', true);\n      node.setAttribute('src', this.sanitize(value));\n      return node;\n    }\n  }, {\n    key: 'formats',\n    value: function formats(domNode) {\n      return ATTRIBUTES.reduce(function (formats, attribute) {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      }, {});\n    }\n  }, {\n    key: 'sanitize',\n    value: function sanitize(url) {\n      return _link2.default.sanitize(url);\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('src');\n    }\n  }]);\n\n  return Video;\n}(_block.BlockEmbed);\n\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n\nexports.default = Video;\n\n/***/ }),\n/* 74 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.FormulaBlot = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _embed = __webpack_require__(35);\n\nvar _embed2 = _interopRequireDefault(_embed);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar FormulaBlot = function (_Embed) {\n  _inherits(FormulaBlot, _Embed);\n\n  function FormulaBlot() {\n    _classCallCheck(this, FormulaBlot);\n\n    return _possibleConstructorReturn(this, (FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot)).apply(this, arguments));\n  }\n\n  _createClass(FormulaBlot, null, [{\n    key: 'create',\n    value: function create(value) {\n      var node = _get(FormulaBlot.__proto__ || Object.getPrototypeOf(FormulaBlot), 'create', this).call(this, value);\n      if (typeof value === 'string') {\n        window.katex.render(value, node, {\n          throwOnError: false,\n          errorColor: '#f00'\n        });\n        node.setAttribute('data-value', value);\n      }\n      return node;\n    }\n  }, {\n    key: 'value',\n    value: function value(domNode) {\n      return domNode.getAttribute('data-value');\n    }\n  }]);\n\n  return FormulaBlot;\n}(_embed2.default);\n\nFormulaBlot.blotName = 'formula';\nFormulaBlot.className = 'ql-formula';\nFormulaBlot.tagName = 'SPAN';\n\nvar Formula = function (_Module) {\n  _inherits(Formula, _Module);\n\n  _createClass(Formula, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(FormulaBlot, true);\n    }\n  }]);\n\n  function Formula() {\n    _classCallCheck(this, Formula);\n\n    var _this2 = _possibleConstructorReturn(this, (Formula.__proto__ || Object.getPrototypeOf(Formula)).call(this));\n\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    return _this2;\n  }\n\n  return Formula;\n}(_module2.default);\n\nexports.FormulaBlot = FormulaBlot;\nexports.default = Formula;\n\n/***/ }),\n/* 75 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.CodeToken = exports.CodeBlock = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _parchment = __webpack_require__(0);\n\nvar _parchment2 = _interopRequireDefault(_parchment);\n\nvar _quill = __webpack_require__(5);\n\nvar _quill2 = _interopRequireDefault(_quill);\n\nvar _module = __webpack_require__(9);\n\nvar _module2 = _interopRequireDefault(_module);\n\nvar _code = __webpack_require__(13);\n\nvar _code2 = _interopRequireDefault(_code);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SyntaxCodeBlock = function (_CodeBlock) {\n  _inherits(SyntaxCodeBlock, _CodeBlock);\n\n  function SyntaxCodeBlock() {\n    _classCallCheck(this, SyntaxCodeBlock);\n\n    return _possibleConstructorReturn(this, (SyntaxCodeBlock.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock)).apply(this, arguments));\n  }\n\n  _createClass(SyntaxCodeBlock, [{\n    key: 'replaceWith',\n    value: function replaceWith(block) {\n      this.domNode.textContent = this.domNode.textContent;\n      this.attach();\n      _get(SyntaxCodeBlock.prototype.__proto__ || Object.getPrototypeOf(SyntaxCodeBlock.prototype), 'replaceWith', this).call(this, block);\n    }\n  }, {\n    key: 'highlight',\n    value: function highlight(_highlight) {\n      var text = this.domNode.textContent;\n      if (this.cachedText !== text) {\n        if (text.trim().length > 0 || this.cachedText == null) {\n          this.domNode.innerHTML = _highlight(text);\n          this.domNode.normalize();\n          this.attach();\n        }\n        this.cachedText = text;\n      }\n    }\n  }]);\n\n  return SyntaxCodeBlock;\n}(_code2.default);\n\nSyntaxCodeBlock.className = 'ql-syntax';\n\nvar CodeToken = new _parchment2.default.Attributor.Class('token', 'hljs', {\n  scope: _parchment2.default.Scope.INLINE\n});\n\nvar Syntax = function (_Module) {\n  _inherits(Syntax, _Module);\n\n  _createClass(Syntax, null, [{\n    key: 'register',\n    value: function register() {\n      _quill2.default.register(CodeToken, true);\n      _quill2.default.register(SyntaxCodeBlock, true);\n    }\n  }]);\n\n  function Syntax(quill, options) {\n    _classCallCheck(this, Syntax);\n\n    var _this2 = _possibleConstructorReturn(this, (Syntax.__proto__ || Object.getPrototypeOf(Syntax)).call(this, quill, options));\n\n    if (typeof _this2.options.highlight !== 'function') {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    var timer = null;\n    _this2.quill.on(_quill2.default.events.SCROLL_OPTIMIZE, function () {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        _this2.highlight();\n        timer = null;\n      }, _this2.options.interval);\n    });\n    _this2.highlight();\n    return _this2;\n  }\n\n  _createClass(Syntax, [{\n    key: 'highlight',\n    value: function highlight() {\n      var _this3 = this;\n\n      if (this.quill.selection.composing) return;\n      this.quill.update(_quill2.default.sources.USER);\n      var range = this.quill.getSelection();\n      this.quill.scroll.descendants(SyntaxCodeBlock).forEach(function (code) {\n        code.highlight(_this3.options.highlight);\n      });\n      this.quill.update(_quill2.default.sources.SILENT);\n      if (range != null) {\n        this.quill.setSelection(range, _quill2.default.sources.SILENT);\n      }\n    }\n  }]);\n\n  return Syntax;\n}(_module2.default);\n\nSyntax.DEFAULTS = {\n  highlight: function () {\n    if (window.hljs == null) return null;\n    return function (text) {\n      var result = window.hljs.highlightAuto(text);\n      return result.value;\n    };\n  }(),\n  interval: 1000\n};\n\nexports.CodeBlock = SyntaxCodeBlock;\nexports.CodeToken = CodeToken;\nexports.default = Syntax;\n\n/***/ }),\n/* 76 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 77 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 78 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 79 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";\n\n/***/ }),\n/* 80 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";\n\n/***/ }),\n/* 81 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";\n\n/***/ }),\n/* 82 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";\n\n/***/ }),\n/* 83 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";\n\n/***/ }),\n/* 84 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";\n\n/***/ }),\n/* 85 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";\n\n/***/ }),\n/* 86 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";\n\n/***/ }),\n/* 87 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 88 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 89 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>\";\n\n/***/ }),\n/* 90 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform=\\\"translate(24 18) rotate(-180)\\\"/> </svg>\";\n\n/***/ }),\n/* 91 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";\n\n/***/ }),\n/* 92 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";\n\n/***/ }),\n/* 93 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";\n\n/***/ }),\n/* 94 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";\n\n/***/ }),\n/* 95 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 96 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 97 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 98 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";\n\n/***/ }),\n/* 99 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";\n\n/***/ }),\n/* 100 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";\n\n/***/ }),\n/* 101 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";\n\n/***/ }),\n/* 102 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";\n\n/***/ }),\n/* 103 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";\n\n/***/ }),\n/* 104 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";\n\n/***/ }),\n/* 105 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";\n\n/***/ }),\n/* 106 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";\n\n/***/ }),\n/* 107 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";\n\n/***/ }),\n/* 108 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.BubbleTooltip = undefined;\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extend = __webpack_require__(3);\n\nvar _extend2 = _interopRequireDefault(_extend);\n\nvar _emitter = __webpack_require__(8);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _base = __webpack_require__(43);\n\nvar _base2 = _interopRequireDefault(_base);\n\nvar _selection = __webpack_require__(15);\n\nvar _icons = __webpack_require__(41);\n\nvar _icons2 = _interopRequireDefault(_icons);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{ header: 1 }, { header: 2 }, 'blockquote']];\n\nvar BubbleTheme = function (_BaseTheme) {\n  _inherits(BubbleTheme, _BaseTheme);\n\n  function BubbleTheme(quill, options) {\n    _classCallCheck(this, BubbleTheme);\n\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n\n    var _this = _possibleConstructorReturn(this, (BubbleTheme.__proto__ || Object.getPrototypeOf(BubbleTheme)).call(this, quill, options));\n\n    _this.quill.container.classList.add('ql-bubble');\n    return _this;\n  }\n\n  _createClass(BubbleTheme, [{\n    key: 'extendToolbar',\n    value: function extendToolbar(toolbar) {\n      this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), _icons2.default);\n      this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), _icons2.default);\n    }\n  }]);\n\n  return BubbleTheme;\n}(_base2.default);\n\nBubbleTheme.DEFAULTS = (0, _extend2.default)(true, {}, _base2.default.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function link(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\n\nvar BubbleTooltip = function (_BaseTooltip) {\n  _inherits(BubbleTooltip, _BaseTooltip);\n\n  function BubbleTooltip(quill, bounds) {\n    _classCallCheck(this, BubbleTooltip);\n\n    var _this2 = _possibleConstructorReturn(this, (BubbleTooltip.__proto__ || Object.getPrototypeOf(BubbleTooltip)).call(this, quill, bounds));\n\n    _this2.quill.on(_emitter2.default.events.EDITOR_CHANGE, function (type, range, oldRange, source) {\n      if (type !== _emitter2.default.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === _emitter2.default.sources.USER) {\n        _this2.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        _this2.root.style.left = '0px';\n        _this2.root.style.width = '';\n        _this2.root.style.width = _this2.root.offsetWidth + 'px';\n        var lines = _this2.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          _this2.position(_this2.quill.getBounds(range));\n        } else {\n          var lastLine = lines[lines.length - 1];\n          var index = _this2.quill.getIndex(lastLine);\n          var length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          var _bounds = _this2.quill.getBounds(new _selection.Range(index, length));\n          _this2.position(_bounds);\n        }\n      } else if (document.activeElement !== _this2.textbox && _this2.quill.hasFocus()) {\n        _this2.hide();\n      }\n    });\n    return _this2;\n  }\n\n  _createClass(BubbleTooltip, [{\n    key: 'listen',\n    value: function listen() {\n      var _this3 = this;\n\n      _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'listen', this).call(this);\n      this.root.querySelector('.ql-close').addEventListener('click', function () {\n        _this3.root.classList.remove('ql-editing');\n      });\n      this.quill.on(_emitter2.default.events.SCROLL_OPTIMIZE, function () {\n        // Let selection be restored by toolbar handlers before repositioning\n        setTimeout(function () {\n          if (_this3.root.classList.contains('ql-hidden')) return;\n          var range = _this3.quill.getSelection();\n          if (range != null) {\n            _this3.position(_this3.quill.getBounds(range));\n          }\n        }, 1);\n      });\n    }\n  }, {\n    key: 'cancel',\n    value: function cancel() {\n      this.show();\n    }\n  }, {\n    key: 'position',\n    value: function position(reference) {\n      var shift = _get(BubbleTooltip.prototype.__proto__ || Object.getPrototypeOf(BubbleTooltip.prototype), 'position', this).call(this, reference);\n      var arrow = this.root.querySelector('.ql-tooltip-arrow');\n      arrow.style.marginLeft = '';\n      if (shift === 0) return shift;\n      arrow.style.marginLeft = -1 * shift - arrow.offsetWidth / 2 + 'px';\n    }\n  }]);\n\n  return BubbleTooltip;\n}(_base.BaseTooltip);\n\nBubbleTooltip.TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n\nexports.BubbleTooltip = BubbleTooltip;\nexports.default = BubbleTheme;\n\n/***/ }),\n/* 109 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(63);\n\n\n/***/ })\n/******/ ])[\"default\"];\n});","// node_modules/@lit/reactive-element/css-tag.js\nvar t = window.ShadowRoot && (window.ShadyCSS === void 0 || window.ShadyCSS.nativeShadow) && \"adoptedStyleSheets\" in Document.prototype && \"replace\" in CSSStyleSheet.prototype;\nvar e = Symbol();\nvar n = /* @__PURE__ */ new Map();\nvar s = class {\n  constructor(t3, n5) {\n    if (this._$cssResult$ = true, n5 !== e)\n      throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");\n    this.cssText = t3;\n  }\n  get styleSheet() {\n    let e4 = n.get(this.cssText);\n    return t && e4 === void 0 && (n.set(this.cssText, e4 = new CSSStyleSheet()), e4.replaceSync(this.cssText)), e4;\n  }\n  toString() {\n    return this.cssText;\n  }\n};\nvar o = (t3) => new s(typeof t3 == \"string\" ? t3 : t3 + \"\", e);\nvar r = (t3, ...n5) => {\n  const o5 = t3.length === 1 ? t3[0] : n5.reduce((e4, n6, s5) => e4 + ((t4) => {\n    if (t4._$cssResult$ === true)\n      return t4.cssText;\n    if (typeof t4 == \"number\")\n      return t4;\n    throw Error(\"Value passed to 'css' function must be a 'css' function result: \" + t4 + \". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\");\n  })(n6) + t3[s5 + 1], t3[0]);\n  return new s(o5, e);\n};\nvar i = (e4, n5) => {\n  t ? e4.adoptedStyleSheets = n5.map((t3) => t3 instanceof CSSStyleSheet ? t3 : t3.styleSheet) : n5.forEach((t3) => {\n    const n6 = document.createElement(\"style\"), s5 = window.litNonce;\n    s5 !== void 0 && n6.setAttribute(\"nonce\", s5), n6.textContent = t3.cssText, e4.appendChild(n6);\n  });\n};\nvar S = t ? (t3) => t3 : (t3) => t3 instanceof CSSStyleSheet ? ((t4) => {\n  let e4 = \"\";\n  for (const n5 of t4.cssRules)\n    e4 += n5.cssText;\n  return o(e4);\n})(t3) : t3;\n\n// node_modules/@lit/reactive-element/reactive-element.js\nvar s2;\nvar e2 = window.trustedTypes;\nvar r2 = e2 ? e2.emptyScript : \"\";\nvar h = window.reactiveElementPolyfillSupport;\nvar o2 = { toAttribute(t3, i3) {\n  switch (i3) {\n    case Boolean:\n      t3 = t3 ? r2 : null;\n      break;\n    case Object:\n    case Array:\n      t3 = t3 == null ? t3 : JSON.stringify(t3);\n  }\n  return t3;\n}, fromAttribute(t3, i3) {\n  let s5 = t3;\n  switch (i3) {\n    case Boolean:\n      s5 = t3 !== null;\n      break;\n    case Number:\n      s5 = t3 === null ? null : Number(t3);\n      break;\n    case Object:\n    case Array:\n      try {\n        s5 = JSON.parse(t3);\n      } catch (t4) {\n        s5 = null;\n      }\n  }\n  return s5;\n} };\nvar n2 = (t3, i3) => i3 !== t3 && (i3 == i3 || t3 == t3);\nvar l = { attribute: true, type: String, converter: o2, reflect: false, hasChanged: n2 };\nvar a = class extends HTMLElement {\n  constructor() {\n    super(), this._$Et = /* @__PURE__ */ new Map(), this.isUpdatePending = false, this.hasUpdated = false, this._$Ei = null, this.o();\n  }\n  static addInitializer(t3) {\n    var i3;\n    (i3 = this.l) !== null && i3 !== void 0 || (this.l = []), this.l.push(t3);\n  }\n  static get observedAttributes() {\n    this.finalize();\n    const t3 = [];\n    return this.elementProperties.forEach((i3, s5) => {\n      const e4 = this._$Eh(s5, i3);\n      e4 !== void 0 && (this._$Eu.set(e4, s5), t3.push(e4));\n    }), t3;\n  }\n  static createProperty(t3, i3 = l) {\n    if (i3.state && (i3.attribute = false), this.finalize(), this.elementProperties.set(t3, i3), !i3.noAccessor && !this.prototype.hasOwnProperty(t3)) {\n      const s5 = typeof t3 == \"symbol\" ? Symbol() : \"__\" + t3, e4 = this.getPropertyDescriptor(t3, s5, i3);\n      e4 !== void 0 && Object.defineProperty(this.prototype, t3, e4);\n    }\n  }\n  static getPropertyDescriptor(t3, i3, s5) {\n    return { get() {\n      return this[i3];\n    }, set(e4) {\n      const r4 = this[t3];\n      this[i3] = e4, this.requestUpdate(t3, r4, s5);\n    }, configurable: true, enumerable: true };\n  }\n  static getPropertyOptions(t3) {\n    return this.elementProperties.get(t3) || l;\n  }\n  static finalize() {\n    if (this.hasOwnProperty(\"finalized\"))\n      return false;\n    this.finalized = true;\n    const t3 = Object.getPrototypeOf(this);\n    if (t3.finalize(), this.elementProperties = new Map(t3.elementProperties), this._$Eu = /* @__PURE__ */ new Map(), this.hasOwnProperty(\"properties\")) {\n      const t4 = this.properties, i3 = [...Object.getOwnPropertyNames(t4), ...Object.getOwnPropertySymbols(t4)];\n      for (const s5 of i3)\n        this.createProperty(s5, t4[s5]);\n    }\n    return this.elementStyles = this.finalizeStyles(this.styles), true;\n  }\n  static finalizeStyles(i3) {\n    const s5 = [];\n    if (Array.isArray(i3)) {\n      const e4 = new Set(i3.flat(1 / 0).reverse());\n      for (const i4 of e4)\n        s5.unshift(S(i4));\n    } else\n      i3 !== void 0 && s5.push(S(i3));\n    return s5;\n  }\n  static _$Eh(t3, i3) {\n    const s5 = i3.attribute;\n    return s5 === false ? void 0 : typeof s5 == \"string\" ? s5 : typeof t3 == \"string\" ? t3.toLowerCase() : void 0;\n  }\n  o() {\n    var t3;\n    this._$Ep = new Promise((t4) => this.enableUpdating = t4), this._$AL = /* @__PURE__ */ new Map(), this._$Em(), this.requestUpdate(), (t3 = this.constructor.l) === null || t3 === void 0 || t3.forEach((t4) => t4(this));\n  }\n  addController(t3) {\n    var i3, s5;\n    ((i3 = this._$Eg) !== null && i3 !== void 0 ? i3 : this._$Eg = []).push(t3), this.renderRoot !== void 0 && this.isConnected && ((s5 = t3.hostConnected) === null || s5 === void 0 || s5.call(t3));\n  }\n  removeController(t3) {\n    var i3;\n    (i3 = this._$Eg) === null || i3 === void 0 || i3.splice(this._$Eg.indexOf(t3) >>> 0, 1);\n  }\n  _$Em() {\n    this.constructor.elementProperties.forEach((t3, i3) => {\n      this.hasOwnProperty(i3) && (this._$Et.set(i3, this[i3]), delete this[i3]);\n    });\n  }\n  createRenderRoot() {\n    var t3;\n    const s5 = (t3 = this.shadowRoot) !== null && t3 !== void 0 ? t3 : this.attachShadow(this.constructor.shadowRootOptions);\n    return i(s5, this.constructor.elementStyles), s5;\n  }\n  connectedCallback() {\n    var t3;\n    this.renderRoot === void 0 && (this.renderRoot = this.createRenderRoot()), this.enableUpdating(true), (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n      var i3;\n      return (i3 = t4.hostConnected) === null || i3 === void 0 ? void 0 : i3.call(t4);\n    });\n  }\n  enableUpdating(t3) {\n  }\n  disconnectedCallback() {\n    var t3;\n    (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n      var i3;\n      return (i3 = t4.hostDisconnected) === null || i3 === void 0 ? void 0 : i3.call(t4);\n    });\n  }\n  attributeChangedCallback(t3, i3, s5) {\n    this._$AK(t3, s5);\n  }\n  _$ES(t3, i3, s5 = l) {\n    var e4, r4;\n    const h3 = this.constructor._$Eh(t3, s5);\n    if (h3 !== void 0 && s5.reflect === true) {\n      const n5 = ((r4 = (e4 = s5.converter) === null || e4 === void 0 ? void 0 : e4.toAttribute) !== null && r4 !== void 0 ? r4 : o2.toAttribute)(i3, s5.type);\n      this._$Ei = t3, n5 == null ? this.removeAttribute(h3) : this.setAttribute(h3, n5), this._$Ei = null;\n    }\n  }\n  _$AK(t3, i3) {\n    var s5, e4, r4;\n    const h3 = this.constructor, n5 = h3._$Eu.get(t3);\n    if (n5 !== void 0 && this._$Ei !== n5) {\n      const t4 = h3.getPropertyOptions(n5), l4 = t4.converter, a3 = (r4 = (e4 = (s5 = l4) === null || s5 === void 0 ? void 0 : s5.fromAttribute) !== null && e4 !== void 0 ? e4 : typeof l4 == \"function\" ? l4 : null) !== null && r4 !== void 0 ? r4 : o2.fromAttribute;\n      this._$Ei = n5, this[n5] = a3(i3, t4.type), this._$Ei = null;\n    }\n  }\n  requestUpdate(t3, i3, s5) {\n    let e4 = true;\n    t3 !== void 0 && (((s5 = s5 || this.constructor.getPropertyOptions(t3)).hasChanged || n2)(this[t3], i3) ? (this._$AL.has(t3) || this._$AL.set(t3, i3), s5.reflect === true && this._$Ei !== t3 && (this._$E_ === void 0 && (this._$E_ = /* @__PURE__ */ new Map()), this._$E_.set(t3, s5))) : e4 = false), !this.isUpdatePending && e4 && (this._$Ep = this._$EC());\n  }\n  async _$EC() {\n    this.isUpdatePending = true;\n    try {\n      await this._$Ep;\n    } catch (t4) {\n      Promise.reject(t4);\n    }\n    const t3 = this.scheduleUpdate();\n    return t3 != null && await t3, !this.isUpdatePending;\n  }\n  scheduleUpdate() {\n    return this.performUpdate();\n  }\n  performUpdate() {\n    var t3;\n    if (!this.isUpdatePending)\n      return;\n    this.hasUpdated, this._$Et && (this._$Et.forEach((t4, i4) => this[i4] = t4), this._$Et = void 0);\n    let i3 = false;\n    const s5 = this._$AL;\n    try {\n      i3 = this.shouldUpdate(s5), i3 ? (this.willUpdate(s5), (t3 = this._$Eg) === null || t3 === void 0 || t3.forEach((t4) => {\n        var i4;\n        return (i4 = t4.hostUpdate) === null || i4 === void 0 ? void 0 : i4.call(t4);\n      }), this.update(s5)) : this._$EU();\n    } catch (t4) {\n      throw i3 = false, this._$EU(), t4;\n    }\n    i3 && this._$AE(s5);\n  }\n  willUpdate(t3) {\n  }\n  _$AE(t3) {\n    var i3;\n    (i3 = this._$Eg) === null || i3 === void 0 || i3.forEach((t4) => {\n      var i4;\n      return (i4 = t4.hostUpdated) === null || i4 === void 0 ? void 0 : i4.call(t4);\n    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(t3)), this.updated(t3);\n  }\n  _$EU() {\n    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;\n  }\n  get updateComplete() {\n    return this.getUpdateComplete();\n  }\n  getUpdateComplete() {\n    return this._$Ep;\n  }\n  shouldUpdate(t3) {\n    return true;\n  }\n  update(t3) {\n    this._$E_ !== void 0 && (this._$E_.forEach((t4, i3) => this._$ES(i3, this[i3], t4)), this._$E_ = void 0), this._$EU();\n  }\n  updated(t3) {\n  }\n  firstUpdated(t3) {\n  }\n};\na.finalized = true, a.elementProperties = /* @__PURE__ */ new Map(), a.elementStyles = [], a.shadowRootOptions = { mode: \"open\" }, h == null || h({ ReactiveElement: a }), ((s2 = globalThis.reactiveElementVersions) !== null && s2 !== void 0 ? s2 : globalThis.reactiveElementVersions = []).push(\"1.2.3\");\n\n// node_modules/lit-html/lit-html.js\nvar t2;\nvar i2 = globalThis.trustedTypes;\nvar s3 = i2 ? i2.createPolicy(\"lit-html\", { createHTML: (t3) => t3 }) : void 0;\nvar e3 = `lit$${(Math.random() + \"\").slice(9)}$`;\nvar o3 = \"?\" + e3;\nvar n3 = `<${o3}>`;\nvar l2 = document;\nvar h2 = (t3 = \"\") => l2.createComment(t3);\nvar r3 = (t3) => t3 === null || typeof t3 != \"object\" && typeof t3 != \"function\";\nvar d = Array.isArray;\nvar u = (t3) => {\n  var i3;\n  return d(t3) || typeof ((i3 = t3) === null || i3 === void 0 ? void 0 : i3[Symbol.iterator]) == \"function\";\n};\nvar c = /<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g;\nvar v = /-->/g;\nvar a2 = />/g;\nvar f = />|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g;\nvar _ = /'/g;\nvar m = /\"/g;\nvar g = /^(?:script|style|textarea|title)$/i;\nvar p = (t3) => (i3, ...s5) => ({ _$litType$: t3, strings: i3, values: s5 });\nvar $ = p(1);\nvar y = p(2);\nvar b = Symbol.for(\"lit-noChange\");\nvar w = Symbol.for(\"lit-nothing\");\nvar T = /* @__PURE__ */ new WeakMap();\nvar x = (t3, i3, s5) => {\n  var e4, o5;\n  const n5 = (e4 = s5 == null ? void 0 : s5.renderBefore) !== null && e4 !== void 0 ? e4 : i3;\n  let l4 = n5._$litPart$;\n  if (l4 === void 0) {\n    const t4 = (o5 = s5 == null ? void 0 : s5.renderBefore) !== null && o5 !== void 0 ? o5 : null;\n    n5._$litPart$ = l4 = new N(i3.insertBefore(h2(), t4), t4, void 0, s5 != null ? s5 : {});\n  }\n  return l4._$AI(t3), l4;\n};\nvar A = l2.createTreeWalker(l2, 129, null, false);\nvar C = (t3, i3) => {\n  const o5 = t3.length - 1, l4 = [];\n  let h3, r4 = i3 === 2 ? \"<svg>\" : \"\", d2 = c;\n  for (let i4 = 0; i4 < o5; i4++) {\n    const s5 = t3[i4];\n    let o6, u3, p2 = -1, $2 = 0;\n    for (; $2 < s5.length && (d2.lastIndex = $2, u3 = d2.exec(s5), u3 !== null); )\n      $2 = d2.lastIndex, d2 === c ? u3[1] === \"!--\" ? d2 = v : u3[1] !== void 0 ? d2 = a2 : u3[2] !== void 0 ? (g.test(u3[2]) && (h3 = RegExp(\"</\" + u3[2], \"g\")), d2 = f) : u3[3] !== void 0 && (d2 = f) : d2 === f ? u3[0] === \">\" ? (d2 = h3 != null ? h3 : c, p2 = -1) : u3[1] === void 0 ? p2 = -2 : (p2 = d2.lastIndex - u3[2].length, o6 = u3[1], d2 = u3[3] === void 0 ? f : u3[3] === '\"' ? m : _) : d2 === m || d2 === _ ? d2 = f : d2 === v || d2 === a2 ? d2 = c : (d2 = f, h3 = void 0);\n    const y2 = d2 === f && t3[i4 + 1].startsWith(\"/>\") ? \" \" : \"\";\n    r4 += d2 === c ? s5 + n3 : p2 >= 0 ? (l4.push(o6), s5.slice(0, p2) + \"$lit$\" + s5.slice(p2) + e3 + y2) : s5 + e3 + (p2 === -2 ? (l4.push(void 0), i4) : y2);\n  }\n  const u2 = r4 + (t3[o5] || \"<?>\") + (i3 === 2 ? \"</svg>\" : \"\");\n  if (!Array.isArray(t3) || !t3.hasOwnProperty(\"raw\"))\n    throw Error(\"invalid template strings array\");\n  return [s3 !== void 0 ? s3.createHTML(u2) : u2, l4];\n};\nvar E = class {\n  constructor({ strings: t3, _$litType$: s5 }, n5) {\n    let l4;\n    this.parts = [];\n    let r4 = 0, d2 = 0;\n    const u2 = t3.length - 1, c2 = this.parts, [v2, a3] = C(t3, s5);\n    if (this.el = E.createElement(v2, n5), A.currentNode = this.el.content, s5 === 2) {\n      const t4 = this.el.content, i3 = t4.firstChild;\n      i3.remove(), t4.append(...i3.childNodes);\n    }\n    for (; (l4 = A.nextNode()) !== null && c2.length < u2; ) {\n      if (l4.nodeType === 1) {\n        if (l4.hasAttributes()) {\n          const t4 = [];\n          for (const i3 of l4.getAttributeNames())\n            if (i3.endsWith(\"$lit$\") || i3.startsWith(e3)) {\n              const s6 = a3[d2++];\n              if (t4.push(i3), s6 !== void 0) {\n                const t5 = l4.getAttribute(s6.toLowerCase() + \"$lit$\").split(e3), i4 = /([.?@])?(.*)/.exec(s6);\n                c2.push({ type: 1, index: r4, name: i4[2], strings: t5, ctor: i4[1] === \".\" ? M : i4[1] === \"?\" ? H : i4[1] === \"@\" ? I : S2 });\n              } else\n                c2.push({ type: 6, index: r4 });\n            }\n          for (const i3 of t4)\n            l4.removeAttribute(i3);\n        }\n        if (g.test(l4.tagName)) {\n          const t4 = l4.textContent.split(e3), s6 = t4.length - 1;\n          if (s6 > 0) {\n            l4.textContent = i2 ? i2.emptyScript : \"\";\n            for (let i3 = 0; i3 < s6; i3++)\n              l4.append(t4[i3], h2()), A.nextNode(), c2.push({ type: 2, index: ++r4 });\n            l4.append(t4[s6], h2());\n          }\n        }\n      } else if (l4.nodeType === 8)\n        if (l4.data === o3)\n          c2.push({ type: 2, index: r4 });\n        else {\n          let t4 = -1;\n          for (; (t4 = l4.data.indexOf(e3, t4 + 1)) !== -1; )\n            c2.push({ type: 7, index: r4 }), t4 += e3.length - 1;\n        }\n      r4++;\n    }\n  }\n  static createElement(t3, i3) {\n    const s5 = l2.createElement(\"template\");\n    return s5.innerHTML = t3, s5;\n  }\n};\nfunction P(t3, i3, s5 = t3, e4) {\n  var o5, n5, l4, h3;\n  if (i3 === b)\n    return i3;\n  let d2 = e4 !== void 0 ? (o5 = s5._$Cl) === null || o5 === void 0 ? void 0 : o5[e4] : s5._$Cu;\n  const u2 = r3(i3) ? void 0 : i3._$litDirective$;\n  return (d2 == null ? void 0 : d2.constructor) !== u2 && ((n5 = d2 == null ? void 0 : d2._$AO) === null || n5 === void 0 || n5.call(d2, false), u2 === void 0 ? d2 = void 0 : (d2 = new u2(t3), d2._$AT(t3, s5, e4)), e4 !== void 0 ? ((l4 = (h3 = s5)._$Cl) !== null && l4 !== void 0 ? l4 : h3._$Cl = [])[e4] = d2 : s5._$Cu = d2), d2 !== void 0 && (i3 = P(t3, d2._$AS(t3, i3.values), d2, e4)), i3;\n}\nvar V = class {\n  constructor(t3, i3) {\n    this.v = [], this._$AN = void 0, this._$AD = t3, this._$AM = i3;\n  }\n  get parentNode() {\n    return this._$AM.parentNode;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  p(t3) {\n    var i3;\n    const { el: { content: s5 }, parts: e4 } = this._$AD, o5 = ((i3 = t3 == null ? void 0 : t3.creationScope) !== null && i3 !== void 0 ? i3 : l2).importNode(s5, true);\n    A.currentNode = o5;\n    let n5 = A.nextNode(), h3 = 0, r4 = 0, d2 = e4[0];\n    for (; d2 !== void 0; ) {\n      if (h3 === d2.index) {\n        let i4;\n        d2.type === 2 ? i4 = new N(n5, n5.nextSibling, this, t3) : d2.type === 1 ? i4 = new d2.ctor(n5, d2.name, d2.strings, this, t3) : d2.type === 6 && (i4 = new L(n5, this, t3)), this.v.push(i4), d2 = e4[++r4];\n      }\n      h3 !== (d2 == null ? void 0 : d2.index) && (n5 = A.nextNode(), h3++);\n    }\n    return o5;\n  }\n  m(t3) {\n    let i3 = 0;\n    for (const s5 of this.v)\n      s5 !== void 0 && (s5.strings !== void 0 ? (s5._$AI(t3, s5, i3), i3 += s5.strings.length - 2) : s5._$AI(t3[i3])), i3++;\n  }\n};\nvar N = class {\n  constructor(t3, i3, s5, e4) {\n    var o5;\n    this.type = 2, this._$AH = w, this._$AN = void 0, this._$AA = t3, this._$AB = i3, this._$AM = s5, this.options = e4, this._$Cg = (o5 = e4 == null ? void 0 : e4.isConnected) === null || o5 === void 0 || o5;\n  }\n  get _$AU() {\n    var t3, i3;\n    return (i3 = (t3 = this._$AM) === null || t3 === void 0 ? void 0 : t3._$AU) !== null && i3 !== void 0 ? i3 : this._$Cg;\n  }\n  get parentNode() {\n    let t3 = this._$AA.parentNode;\n    const i3 = this._$AM;\n    return i3 !== void 0 && t3.nodeType === 11 && (t3 = i3.parentNode), t3;\n  }\n  get startNode() {\n    return this._$AA;\n  }\n  get endNode() {\n    return this._$AB;\n  }\n  _$AI(t3, i3 = this) {\n    t3 = P(this, t3, i3), r3(t3) ? t3 === w || t3 == null || t3 === \"\" ? (this._$AH !== w && this._$AR(), this._$AH = w) : t3 !== this._$AH && t3 !== b && this.$(t3) : t3._$litType$ !== void 0 ? this.T(t3) : t3.nodeType !== void 0 ? this.S(t3) : u(t3) ? this.A(t3) : this.$(t3);\n  }\n  M(t3, i3 = this._$AB) {\n    return this._$AA.parentNode.insertBefore(t3, i3);\n  }\n  S(t3) {\n    this._$AH !== t3 && (this._$AR(), this._$AH = this.M(t3));\n  }\n  $(t3) {\n    this._$AH !== w && r3(this._$AH) ? this._$AA.nextSibling.data = t3 : this.S(l2.createTextNode(t3)), this._$AH = t3;\n  }\n  T(t3) {\n    var i3;\n    const { values: s5, _$litType$: e4 } = t3, o5 = typeof e4 == \"number\" ? this._$AC(t3) : (e4.el === void 0 && (e4.el = E.createElement(e4.h, this.options)), e4);\n    if (((i3 = this._$AH) === null || i3 === void 0 ? void 0 : i3._$AD) === o5)\n      this._$AH.m(s5);\n    else {\n      const t4 = new V(o5, this), i4 = t4.p(this.options);\n      t4.m(s5), this.S(i4), this._$AH = t4;\n    }\n  }\n  _$AC(t3) {\n    let i3 = T.get(t3.strings);\n    return i3 === void 0 && T.set(t3.strings, i3 = new E(t3)), i3;\n  }\n  A(t3) {\n    d(this._$AH) || (this._$AH = [], this._$AR());\n    const i3 = this._$AH;\n    let s5, e4 = 0;\n    for (const o5 of t3)\n      e4 === i3.length ? i3.push(s5 = new N(this.M(h2()), this.M(h2()), this, this.options)) : s5 = i3[e4], s5._$AI(o5), e4++;\n    e4 < i3.length && (this._$AR(s5 && s5._$AB.nextSibling, e4), i3.length = e4);\n  }\n  _$AR(t3 = this._$AA.nextSibling, i3) {\n    var s5;\n    for ((s5 = this._$AP) === null || s5 === void 0 || s5.call(this, false, true, i3); t3 && t3 !== this._$AB; ) {\n      const i4 = t3.nextSibling;\n      t3.remove(), t3 = i4;\n    }\n  }\n  setConnected(t3) {\n    var i3;\n    this._$AM === void 0 && (this._$Cg = t3, (i3 = this._$AP) === null || i3 === void 0 || i3.call(this, t3));\n  }\n};\nvar S2 = class {\n  constructor(t3, i3, s5, e4, o5) {\n    this.type = 1, this._$AH = w, this._$AN = void 0, this.element = t3, this.name = i3, this._$AM = e4, this.options = o5, s5.length > 2 || s5[0] !== \"\" || s5[1] !== \"\" ? (this._$AH = Array(s5.length - 1).fill(new String()), this.strings = s5) : this._$AH = w;\n  }\n  get tagName() {\n    return this.element.tagName;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AI(t3, i3 = this, s5, e4) {\n    const o5 = this.strings;\n    let n5 = false;\n    if (o5 === void 0)\n      t3 = P(this, t3, i3, 0), n5 = !r3(t3) || t3 !== this._$AH && t3 !== b, n5 && (this._$AH = t3);\n    else {\n      const e5 = t3;\n      let l4, h3;\n      for (t3 = o5[0], l4 = 0; l4 < o5.length - 1; l4++)\n        h3 = P(this, e5[s5 + l4], i3, l4), h3 === b && (h3 = this._$AH[l4]), n5 || (n5 = !r3(h3) || h3 !== this._$AH[l4]), h3 === w ? t3 = w : t3 !== w && (t3 += (h3 != null ? h3 : \"\") + o5[l4 + 1]), this._$AH[l4] = h3;\n    }\n    n5 && !e4 && this.k(t3);\n  }\n  k(t3) {\n    t3 === w ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t3 != null ? t3 : \"\");\n  }\n};\nvar M = class extends S2 {\n  constructor() {\n    super(...arguments), this.type = 3;\n  }\n  k(t3) {\n    this.element[this.name] = t3 === w ? void 0 : t3;\n  }\n};\nvar k = i2 ? i2.emptyScript : \"\";\nvar H = class extends S2 {\n  constructor() {\n    super(...arguments), this.type = 4;\n  }\n  k(t3) {\n    t3 && t3 !== w ? this.element.setAttribute(this.name, k) : this.element.removeAttribute(this.name);\n  }\n};\nvar I = class extends S2 {\n  constructor(t3, i3, s5, e4, o5) {\n    super(t3, i3, s5, e4, o5), this.type = 5;\n  }\n  _$AI(t3, i3 = this) {\n    var s5;\n    if ((t3 = (s5 = P(this, t3, i3, 0)) !== null && s5 !== void 0 ? s5 : w) === b)\n      return;\n    const e4 = this._$AH, o5 = t3 === w && e4 !== w || t3.capture !== e4.capture || t3.once !== e4.once || t3.passive !== e4.passive, n5 = t3 !== w && (e4 === w || o5);\n    o5 && this.element.removeEventListener(this.name, this, e4), n5 && this.element.addEventListener(this.name, this, t3), this._$AH = t3;\n  }\n  handleEvent(t3) {\n    var i3, s5;\n    typeof this._$AH == \"function\" ? this._$AH.call((s5 = (i3 = this.options) === null || i3 === void 0 ? void 0 : i3.host) !== null && s5 !== void 0 ? s5 : this.element, t3) : this._$AH.handleEvent(t3);\n  }\n};\nvar L = class {\n  constructor(t3, i3, s5) {\n    this.element = t3, this.type = 6, this._$AN = void 0, this._$AM = i3, this.options = s5;\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AI(t3) {\n    P(this, t3);\n  }\n};\nvar z = window.litHtmlPolyfillSupport;\nz == null || z(E, N), ((t2 = globalThis.litHtmlVersions) !== null && t2 !== void 0 ? t2 : globalThis.litHtmlVersions = []).push(\"2.1.3\");\n\n// node_modules/lit-element/lit-element.js\nvar l3;\nvar o4;\nvar s4 = class extends a {\n  constructor() {\n    super(...arguments), this.renderOptions = { host: this }, this._$Dt = void 0;\n  }\n  createRenderRoot() {\n    var t3, e4;\n    const i3 = super.createRenderRoot();\n    return (t3 = (e4 = this.renderOptions).renderBefore) !== null && t3 !== void 0 || (e4.renderBefore = i3.firstChild), i3;\n  }\n  update(t3) {\n    const i3 = this.render();\n    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t3), this._$Dt = x(i3, this.renderRoot, this.renderOptions);\n  }\n  connectedCallback() {\n    var t3;\n    super.connectedCallback(), (t3 = this._$Dt) === null || t3 === void 0 || t3.setConnected(true);\n  }\n  disconnectedCallback() {\n    var t3;\n    super.disconnectedCallback(), (t3 = this._$Dt) === null || t3 === void 0 || t3.setConnected(false);\n  }\n  render() {\n    return b;\n  }\n};\ns4.finalized = true, s4._$litElement$ = true, (l3 = globalThis.litElementHydrateSupport) === null || l3 === void 0 || l3.call(globalThis, { LitElement: s4 });\nvar n4 = globalThis.litElementPolyfillSupport;\nn4 == null || n4({ LitElement: s4 });\n((o4 = globalThis.litElementVersions) !== null && o4 !== void 0 ? o4 : globalThis.litElementVersions = []).push(\"3.1.2\");\n\nexport {\n  o,\n  r,\n  $,\n  y,\n  b,\n  w,\n  s4 as s\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/styles/component.styles.ts\nvar component_styles_default = r`\n  :host {\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  [hidden] {\n    display: none !important;\n  }\n`;\n\nexport {\n  component_styles_default\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio-group/radio-group.styles.ts\nvar radio_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .radio-group {\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-radius: var(--sl-border-radius-medium);\n    padding: var(--sl-spacing-large);\n    padding-top: var(--sl-spacing-x-small);\n  }\n\n  .radio-group .radio-group__label {\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    padding: 0 var(--sl-spacing-2x-small);\n  }\n\n  ::slotted(sl-radio:not(:last-of-type)) {\n    display: block;\n    margin-bottom: var(--sl-spacing-2x-small);\n  }\n\n  .radio-group:not(.radio-group--has-fieldset) {\n    border: none;\n    padding: 0;\n    margin: 0;\n    min-width: 0;\n  }\n\n  .radio-group:not(.radio-group--has-fieldset) .radio-group__label {\n    position: absolute;\n    width: 0;\n    height: 0;\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    overflow: hidden;\n    white-space: nowrap;\n  }\n`;\n\nexport {\n  radio_group_styles_default\n};\n","// node_modules/lit-html/directive.js\nvar t = { ATTRIBUTE: 1, CHILD: 2, PROPERTY: 3, BOOLEAN_ATTRIBUTE: 4, EVENT: 5, ELEMENT: 6 };\nvar e = (t2) => (...e2) => ({ _$litDirective$: t2, values: e2 });\nvar i = class {\n  constructor(t2) {\n  }\n  get _$AU() {\n    return this._$AM._$AU;\n  }\n  _$AT(t2, e2, i2) {\n    this._$Ct = t2, this._$AM = e2, this._$Ci = i2;\n  }\n  _$AS(t2, e2) {\n    return this.update(t2, e2);\n  }\n  update(t2, e2) {\n    return this.render(...e2);\n  }\n};\n\nexport {\n  t,\n  e,\n  i\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  e,\n  i,\n  t\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  b\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directives/class-map.js\nvar o = e(class extends i {\n  constructor(t2) {\n    var i2;\n    if (super(t2), t2.type !== t.ATTRIBUTE || t2.name !== \"class\" || ((i2 = t2.strings) === null || i2 === void 0 ? void 0 : i2.length) > 2)\n      throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\");\n  }\n  render(t2) {\n    return \" \" + Object.keys(t2).filter((i2) => t2[i2]).join(\" \") + \" \";\n  }\n  update(i2, [s]) {\n    var r, o2;\n    if (this.st === void 0) {\n      this.st = /* @__PURE__ */ new Set(), i2.strings !== void 0 && (this.et = new Set(i2.strings.join(\" \").split(/\\s/).filter((t2) => t2 !== \"\")));\n      for (const t2 in s)\n        s[t2] && !((r = this.et) === null || r === void 0 ? void 0 : r.has(t2)) && this.st.add(t2);\n      return this.render(s);\n    }\n    const e2 = i2.element.classList;\n    this.st.forEach((t2) => {\n      t2 in s || (e2.remove(t2), this.st.delete(t2));\n    });\n    for (const t2 in s) {\n      const i3 = !!s[t2];\n      i3 === this.st.has(t2) || ((o2 = this.et) === null || o2 === void 0 ? void 0 : o2.has(t2)) || (i3 ? (e2.add(t2), this.st.add(t2)) : (e2.remove(t2), this.st.delete(t2)));\n    }\n    return b;\n  }\n});\n\nexport {\n  o\n};\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","var __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __reExport = (target, module, copyDefault, desc) => {\n  if (module && typeof module === \"object\" || typeof module === \"function\") {\n    for (let key of __getOwnPropNames(module))\n      if (!__hasOwnProp.call(target, key) && (copyDefault || key !== \"default\"))\n        __defProp(target, key, { get: () => module[key], enumerable: !(desc = __getOwnPropDesc(module, key)) || desc.enumerable });\n  }\n  return target;\n};\nvar __toESM = (module, isNodeMode) => {\n  return __reExport(__markAsModule(__defProp(module != null ? __create(__getProtoOf(module)) : {}, \"default\", !isNodeMode && module && module.__esModule ? { get: () => module.default, enumerable: true } : { value: module, enumerable: true })), module);\n};\nvar __decorateClass = (decorators, target, key, kind) => {\n  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key) : target;\n  for (var i = decorators.length - 1, decorator; i >= 0; i--)\n    if (decorator = decorators[i])\n      result = (kind ? decorator(target, key, result) : decorator(result)) || result;\n  if (kind && result)\n    __defProp(target, key, result);\n  return result;\n};\n\nexport {\n  __spreadValues,\n  __spreadProps,\n  __objRest,\n  __commonJS,\n  __export,\n  __toESM,\n  __decorateClass\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/@lit/reactive-element/decorators/custom-element.js\nvar n = (n3) => (e4) => typeof e4 == \"function\" ? ((n4, e5) => (window.customElements.define(n4, e5), e5))(n3, e4) : ((n4, e5) => {\n  const { kind: t2, elements: i3 } = e5;\n  return { kind: t2, elements: i3, finisher(e6) {\n    window.customElements.define(n4, e6);\n  } };\n})(n3, e4);\n\n// node_modules/@lit/reactive-element/decorators/property.js\nvar i = (i3, e4) => e4.kind === \"method\" && e4.descriptor && !(\"value\" in e4.descriptor) ? __spreadProps(__spreadValues({}, e4), { finisher(n3) {\n  n3.createProperty(e4.key, i3);\n} }) : { kind: \"field\", key: Symbol(), placement: \"own\", descriptor: {}, originalKey: e4.key, initializer() {\n  typeof e4.initializer == \"function\" && (this[e4.key] = e4.initializer.call(this));\n}, finisher(n3) {\n  n3.createProperty(e4.key, i3);\n} };\nfunction e(e4) {\n  return (n3, t2) => t2 !== void 0 ? ((i3, e5, n4) => {\n    e5.constructor.createProperty(n4, i3);\n  })(e4, n3, t2) : i(e4, n3);\n}\n\n// node_modules/@lit/reactive-element/decorators/state.js\nfunction t(t2) {\n  return e(__spreadProps(__spreadValues({}, t2), { state: true }));\n}\n\n// node_modules/@lit/reactive-element/decorators/base.js\nvar o = ({ finisher: e4, descriptor: t2 }) => (o2, n3) => {\n  var r;\n  if (n3 === void 0) {\n    const n4 = (r = o2.originalKey) !== null && r !== void 0 ? r : o2.key, i3 = t2 != null ? { kind: \"method\", placement: \"prototype\", key: n4, descriptor: t2(o2.key) } : __spreadProps(__spreadValues({}, o2), { key: n4 });\n    return e4 != null && (i3.finisher = function(t3) {\n      e4(t3, n4);\n    }), i3;\n  }\n  {\n    const r2 = o2.constructor;\n    t2 !== void 0 && Object.defineProperty(o2, n3, t2(n3)), e4 == null || e4(r2, n3);\n  }\n};\n\n// node_modules/@lit/reactive-element/decorators/query.js\nfunction i2(i3, n3) {\n  return o({ descriptor: (o2) => {\n    const t2 = { get() {\n      var o3, n4;\n      return (n4 = (o3 = this.renderRoot) === null || o3 === void 0 ? void 0 : o3.querySelector(i3)) !== null && n4 !== void 0 ? n4 : null;\n    }, enumerable: true, configurable: true };\n    if (n3) {\n      const n4 = typeof o2 == \"symbol\" ? Symbol() : \"__\" + o2;\n      t2.get = function() {\n        var o3, t3;\n        return this[n4] === void 0 && (this[n4] = (t3 = (o3 = this.renderRoot) === null || o3 === void 0 ? void 0 : o3.querySelector(i3)) !== null && t3 !== void 0 ? t3 : null), this[n4];\n      };\n    }\n    return t2;\n  } });\n}\n\n// node_modules/@lit/reactive-element/decorators/query-async.js\nfunction e2(e4) {\n  return o({ descriptor: (r) => ({ async get() {\n    var r2;\n    return await this.updateComplete, (r2 = this.renderRoot) === null || r2 === void 0 ? void 0 : r2.querySelector(e4);\n  }, enumerable: true, configurable: true }) });\n}\n\n// node_modules/@lit/reactive-element/decorators/query-assigned-elements.js\nvar n2;\nvar e3 = ((n2 = window.HTMLSlotElement) === null || n2 === void 0 ? void 0 : n2.prototype.assignedElements) != null ? (o2, n3) => o2.assignedElements(n3) : (o2, n3) => o2.assignedNodes(n3).filter((o3) => o3.nodeType === Node.ELEMENT_NODE);\n\nexport {\n  n,\n  e,\n  t,\n  i2 as i,\n  e2\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  radio_group_styles_default\n} from \"./chunk.4CV4I4O2.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio-group/radio-group.ts\nvar RADIO_CHILDREN = [\"sl-radio\", \"sl-radio-button\"];\nvar SlRadioGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasButtonGroup = false;\n    this.label = \"\";\n    this.fieldset = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radiogroup\");\n  }\n  getAllRadios() {\n    return [...this.querySelectorAll(RADIO_CHILDREN.join(\",\"))].filter((el) => RADIO_CHILDREN.includes(el.tagName.toLowerCase()));\n  }\n  handleRadioClick(event) {\n    const target = event.target;\n    const checkedRadio = target.closest(RADIO_CHILDREN.map((selector) => `${selector}:not([disabled])`).join(\",\"));\n    if (checkedRadio) {\n      const radios = this.getAllRadios();\n      radios.forEach((radio) => {\n        radio.checked = radio === checkedRadio;\n        radio.input.tabIndex = radio === checkedRadio ? 0 : -1;\n      });\n    }\n  }\n  handleKeyDown(event) {\n    var _a;\n    if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(event.key)) {\n      const radios = this.getAllRadios().filter((radio) => !radio.disabled);\n      const checkedRadio = (_a = radios.find((radio) => radio.checked)) != null ? _a : radios[0];\n      const incr = [\"ArrowUp\", \"ArrowLeft\"].includes(event.key) ? -1 : 1;\n      let index = radios.indexOf(checkedRadio) + incr;\n      if (index < 0) {\n        index = radios.length - 1;\n      }\n      if (index > radios.length - 1) {\n        index = 0;\n      }\n      this.getAllRadios().forEach((radio) => {\n        radio.checked = false;\n        radio.input.tabIndex = -1;\n      });\n      radios[index].focus();\n      radios[index].checked = true;\n      radios[index].input.tabIndex = 0;\n      event.preventDefault();\n    }\n  }\n  handleSlotChange() {\n    const radios = this.getAllRadios();\n    const checkedRadio = radios.find((radio) => radio.checked);\n    this.hasButtonGroup = !!radios.find((radio) => radio.tagName.toLowerCase() === \"sl-radio-button\");\n    radios.forEach((radio) => {\n      radio.setAttribute(\"role\", \"radio\");\n      radio.input.tabIndex = -1;\n    });\n    if (checkedRadio) {\n      checkedRadio.input.tabIndex = 0;\n    } else if (radios.length > 0) {\n      radios[0].input.tabIndex = 0;\n    }\n  }\n  render() {\n    const defaultSlot = $`\n      <slot @click=${this.handleRadioClick} @keydown=${this.handleKeyDown} @slotchange=${this.handleSlotChange}></slot>\n    `;\n    return $`\n      <fieldset\n        part=\"base\"\n        class=${o({\n      \"radio-group\": true,\n      \"radio-group--has-fieldset\": this.fieldset\n    })}\n      >\n        <legend part=\"label\" class=\"radio-group__label\">\n          <slot name=\"label\">${this.label}</slot>\n        </legend>\n        ${this.hasButtonGroup ? $`<sl-button-group part=\"button-group\">${defaultSlot}</sl-button-group>` : defaultSlot}\n      </fieldset>\n    `;\n  }\n};\nSlRadioGroup.styles = radio_group_styles_default;\n__decorateClass([\n  i(\"slot:not([name])\")\n], SlRadioGroup.prototype, \"defaultSlot\", 2);\n__decorateClass([\n  t()\n], SlRadioGroup.prototype, \"hasButtonGroup\", 2);\n__decorateClass([\n  e()\n], SlRadioGroup.prototype, \"label\", 2);\n__decorateClass([\n  e({ type: Boolean, attribute: \"fieldset\" })\n], SlRadioGroup.prototype, \"fieldset\", 2);\nSlRadioGroup = __decorateClass([\n  n(\"sl-radio-group\")\n], SlRadioGroup);\n\nexport {\n  SlRadioGroup\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/button-group/button-group.styles.ts\nvar button_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .button-group {\n    display: flex;\n    flex-wrap: nowrap;\n  }\n`;\n\nexport {\n  button_group_styles_default\n};\n","import {\n  button_group_styles_default\n} from \"./chunk.EAHCDLY6.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/button-group/button-group.ts\nvar BUTTON_CHILDREN = [\"sl-button\", \"sl-radio-button\"];\nvar SlButtonGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n  }\n  handleFocus(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.add(\"sl-button-group__button--focus\");\n  }\n  handleBlur(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.remove(\"sl-button-group__button--focus\");\n  }\n  handleMouseOver(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.add(\"sl-button-group__button--hover\");\n  }\n  handleMouseOut(event) {\n    const button = findButton(event.target);\n    button == null ? void 0 : button.classList.remove(\"sl-button-group__button--hover\");\n  }\n  handleSlotChange() {\n    const slottedElements = [...this.defaultSlot.assignedElements({ flatten: true })];\n    slottedElements.forEach((el) => {\n      const index = slottedElements.indexOf(el);\n      const button = findButton(el);\n      if (button !== null) {\n        button.classList.add(\"sl-button-group__button\");\n        button.classList.toggle(\"sl-button-group__button--first\", index === 0);\n        button.classList.toggle(\"sl-button-group__button--inner\", index > 0 && index < slottedElements.length - 1);\n        button.classList.toggle(\"sl-button-group__button--last\", index === slottedElements.length - 1);\n      }\n    });\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=\"button-group\"\n        role=\"group\"\n        aria-label=${this.label}\n        @focusout=${this.handleBlur}\n        @focusin=${this.handleFocus}\n        @mouseover=${this.handleMouseOver}\n        @mouseout=${this.handleMouseOut}\n      >\n        <slot @slotchange=${this.handleSlotChange}></slot>\n      </div>\n    `;\n  }\n};\nSlButtonGroup.styles = button_group_styles_default;\n__decorateClass([\n  i(\"slot\")\n], SlButtonGroup.prototype, \"defaultSlot\", 2);\n__decorateClass([\n  e()\n], SlButtonGroup.prototype, \"label\", 2);\nSlButtonGroup = __decorateClass([\n  n(\"sl-button-group\")\n], SlButtonGroup);\nfunction findButton(el) {\n  return BUTTON_CHILDREN.includes(el.tagName.toLowerCase()) ? el : el.querySelector(BUTTON_CHILDREN.join(\",\"));\n}\n\nexport {\n  SlButtonGroup\n};\n","import {\n  o\n} from \"./chunk.PEQICPKO.js\";\n\n// src/internal/focus-visible.ts\nvar hasFocusVisible = (() => {\n  const style = document.createElement(\"style\");\n  let isSupported;\n  try {\n    document.head.appendChild(style);\n    style.sheet.insertRule(\":focus-visible { color: inherit }\");\n    isSupported = true;\n  } catch (e) {\n    isSupported = false;\n  } finally {\n    style.remove();\n  }\n  return isSupported;\n})();\nvar focusVisibleSelector = o(hasFocusVisible ? \":focus-visible\" : \":focus\");\n\nexport {\n  hasFocusVisible,\n  focusVisibleSelector\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/button/button.styles.ts\nvar button_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n    position: relative;\n    width: auto;\n    cursor: pointer;\n  }\n\n  .button {\n    display: inline-flex;\n    align-items: stretch;\n    justify-content: center;\n    width: 100%;\n    border-style: solid;\n    border-width: var(--sl-input-border-width);\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-font-weight-semibold);\n    text-decoration: none;\n    user-select: none;\n    white-space: nowrap;\n    vertical-align: middle;\n    padding: 0;\n    transition: var(--sl-transition-x-fast) background-color, var(--sl-transition-x-fast) color,\n      var(--sl-transition-x-fast) border, var(--sl-transition-x-fast) box-shadow;\n    cursor: inherit;\n  }\n\n  .button::-moz-focus-inner {\n    border: 0;\n  }\n\n  .button:focus {\n    outline: none;\n  }\n\n  .button--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* When disabled, prevent mouse events from bubbling up */\n  .button--disabled * {\n    pointer-events: none;\n  }\n\n  .button__prefix,\n  .button__suffix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    pointer-events: none;\n  }\n\n  .button__label ::slotted(sl-icon) {\n    vertical-align: -2px;\n  }\n\n  /*\n   * Standard buttons\n   */\n\n  /* Default */\n  .button--standard.button--default {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-neutral-300);\n    color: var(--sl-color-neutral-700);\n  }\n\n  .button--standard.button--default:hover:not(.button--disabled) {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-300);\n    color: var(--sl-color-primary-700);\n  }\n\n  .button--standard.button--default${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-400);\n    color: var(--sl-color-primary-700);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--default:active:not(.button--disabled) {\n    background-color: var(--sl-color-primary-100);\n    border-color: var(--sl-color-primary-400);\n    color: var(--sl-color-primary-700);\n  }\n\n  /* Primary */\n  .button--standard.button--primary {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--primary:hover:not(.button--disabled) {\n    background-color: var(--sl-color-primary-500);\n    border-color: var(--sl-color-primary-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--primary${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-primary-500);\n    border-color: var(--sl-color-primary-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--primary:active:not(.button--disabled) {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Success */\n  .button--standard.button--success {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--success:hover:not(.button--disabled) {\n    background-color: var(--sl-color-success-500);\n    border-color: var(--sl-color-success-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--success${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--success:active:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Neutral */\n  .button--standard.button--neutral {\n    background-color: var(--sl-color-neutral-600);\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--neutral:hover:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-500);\n    border-color: var(--sl-color-neutral-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--neutral${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-500);\n    border-color: var(--sl-color-neutral-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--neutral:active:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-600);\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Warning */\n  .button--standard.button--warning {\n    background-color: var(--sl-color-warning-600);\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n  .button--standard.button--warning:hover:not(.button--disabled) {\n    background-color: var(--sl-color-warning-500);\n    border-color: var(--sl-color-warning-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--warning${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-warning-500);\n    border-color: var(--sl-color-warning-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--warning:active:not(.button--disabled) {\n    background-color: var(--sl-color-warning-600);\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Danger */\n  .button--standard.button--danger {\n    background-color: var(--sl-color-danger-600);\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--danger:hover:not(.button--disabled) {\n    background-color: var(--sl-color-danger-500);\n    border-color: var(--sl-color-danger-500);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--standard.button--danger${focusVisibleSelector}:not(.button--disabled) {\n    background-color: var(--sl-color-danger-500);\n    border-color: var(--sl-color-danger-500);\n    color: var(--sl-color-neutral-0);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--standard.button--danger:active:not(.button--disabled) {\n    background-color: var(--sl-color-danger-600);\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /*\n   * Outline buttons\n   */\n\n  .button--outline {\n    background: none;\n    border: solid 1px;\n  }\n\n  /* Default */\n  .button--outline.button--default {\n    border-color: var(--sl-color-neutral-300);\n    color: var(--sl-color-neutral-700);\n  }\n\n  .button--outline.button--default:hover:not(.button--disabled),\n  .button--outline.button--default.button--checked:not(.button--disabled) {\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--default${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--default:active:not(.button--disabled) {\n    border-color: var(--sl-color-primary-700);\n    background-color: var(--sl-color-primary-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Primary */\n  .button--outline.button--primary {\n    border-color: var(--sl-color-primary-600);\n    color: var(--sl-color-primary-600);\n  }\n\n  .button--outline.button--primary:hover:not(.button--disabled),\n  .button--outline.button--primary.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--primary${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--primary:active:not(.button--disabled) {\n    border-color: var(--sl-color-primary-700);\n    background-color: var(--sl-color-primary-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Success */\n  .button--outline.button--success {\n    border-color: var(--sl-color-success-600);\n    color: var(--sl-color-success-600);\n  }\n\n  .button--outline.button--success:hover:not(.button--disabled),\n  .button--outline.button--success.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--success${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-success-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--success:active:not(.button--disabled) {\n    border-color: var(--sl-color-success-700);\n    background-color: var(--sl-color-success-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Neutral */\n  .button--outline.button--neutral {\n    border-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-600);\n  }\n\n  .button--outline.button--neutral:hover:not(.button--disabled),\n  .button--outline.button--neutral.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--neutral${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-neutral-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--neutral:active:not(.button--disabled) {\n    border-color: var(--sl-color-neutral-700);\n    background-color: var(--sl-color-neutral-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Warning */\n  .button--outline.button--warning {\n    border-color: var(--sl-color-warning-600);\n    color: var(--sl-color-warning-600);\n  }\n\n  .button--outline.button--warning:hover:not(.button--disabled),\n  .button--outline.button--warning.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--warning${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-warning-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--warning:active:not(.button--disabled) {\n    border-color: var(--sl-color-warning-700);\n    background-color: var(--sl-color-warning-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Danger */\n  .button--outline.button--danger {\n    border-color: var(--sl-color-danger-600);\n    color: var(--sl-color-danger-600);\n  }\n\n  .button--outline.button--danger:hover:not(.button--disabled),\n  .button--outline.button--danger.button--checked:not(.button--disabled) {\n    background-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .button--outline.button--danger${focusVisibleSelector}:not(.button--disabled) {\n    border-color: var(--sl-color-danger-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--outline.button--danger:active:not(.button--disabled) {\n    border-color: var(--sl-color-danger-700);\n    background-color: var(--sl-color-danger-700);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /*\n   * Text buttons\n   */\n\n  .button--text {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-600);\n  }\n\n  .button--text:hover:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-500);\n  }\n\n  .button--text${focusVisibleSelector}:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .button--text:active:not(.button--disabled) {\n    background-color: transparent;\n    border-color: transparent;\n    color: var(--sl-color-primary-700);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .button--small {\n    font-size: var(--sl-button-font-size-small);\n    height: var(--sl-input-height-small);\n    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-small);\n  }\n\n  .button--medium {\n    font-size: var(--sl-button-font-size-medium);\n    height: var(--sl-input-height-medium);\n    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-medium);\n  }\n\n  .button--large {\n    font-size: var(--sl-button-font-size-large);\n    height: var(--sl-input-height-large);\n    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-large);\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .button--pill.button--small {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .button--pill.button--medium {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .button--pill.button--large {\n    border-radius: var(--sl-input-height-large);\n  }\n\n  /*\n   * Circle modifier\n   */\n\n  .button--circle {\n    padding-left: 0;\n    padding-right: 0;\n  }\n\n  .button--circle.button--small {\n    width: var(--sl-input-height-small);\n    border-radius: 50%;\n  }\n\n  .button--circle.button--medium {\n    width: var(--sl-input-height-medium);\n    border-radius: 50%;\n  }\n\n  .button--circle.button--large {\n    width: var(--sl-input-height-large);\n    border-radius: 50%;\n  }\n\n  .button--circle .button__prefix,\n  .button--circle .button__suffix,\n  .button--circle .button__caret {\n    display: none;\n  }\n\n  /*\n   * Caret modifier\n   */\n\n  .button--caret .button__suffix {\n    display: none;\n  }\n\n  .button--caret .button__caret {\n    display: flex;\n    align-items: center;\n  }\n\n  .button--caret .button__caret svg {\n    width: 1em;\n    height: 1em;\n  }\n\n  /*\n   * Loading modifier\n   */\n\n  .button--loading {\n    position: relative;\n    cursor: wait;\n  }\n\n  .button--loading .button__prefix,\n  .button--loading .button__label,\n  .button--loading .button__suffix,\n  .button--loading .button__caret {\n    visibility: hidden;\n  }\n\n  .button--loading sl-spinner {\n    --indicator-color: currentColor;\n    position: absolute;\n    font-size: 1em;\n    height: 1em;\n    width: 1em;\n    top: calc(50% - 0.5em);\n    left: calc(50% - 0.5em);\n  }\n\n  /*\n   * Badges\n   */\n\n  .button ::slotted(sl-badge) {\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translateY(-50%) translateX(50%);\n    pointer-events: none;\n  }\n\n  /*\n   * Button spacing\n   */\n\n  .button--has-label.button--small .button__label {\n    padding: 0 var(--sl-spacing-small);\n  }\n\n  .button--has-label.button--medium .button__label {\n    padding: 0 var(--sl-spacing-medium);\n  }\n\n  .button--has-label.button--large .button__label {\n    padding: 0 var(--sl-spacing-large);\n  }\n\n  .button--has-prefix.button--small {\n    padding-left: var(--sl-spacing-x-small);\n  }\n\n  .button--has-prefix.button--small .button__label {\n    padding-left: var(--sl-spacing-x-small);\n  }\n\n  .button--has-prefix.button--medium {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--medium .button__label {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--large {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-prefix.button--large .button__label {\n    padding-left: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--small,\n  .button--caret.button--small {\n    padding-right: var(--sl-spacing-x-small);\n  }\n\n  .button--has-suffix.button--small .button__label,\n  .button--caret.button--small .button__label {\n    padding-right: var(--sl-spacing-x-small);\n  }\n\n  .button--has-suffix.button--medium,\n  .button--caret.button--medium {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--medium .button__label,\n  .button--caret.button--medium .button__label {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--large,\n  .button--caret.button--large {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .button--has-suffix.button--large .button__label,\n  .button--caret.button--large .button__label {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  /*\n   * Button groups support a variety of button types (e.g. buttons with tooltips, buttons as dropdown triggers, etc.).\n   * This means buttons aren't always direct descendants of the button group, thus we can't target them with the\n   * ::slotted selector. To work around this, the button group component does some magic to add these special classes to\n   * buttons and we style them here instead.\n   */\n\n  :host(.sl-button-group__button--first:not(.sl-button-group__button--last)) .button {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  :host(.sl-button-group__button--inner) .button {\n    border-radius: 0;\n  }\n\n  :host(.sl-button-group__button--last:not(.sl-button-group__button--first)) .button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  /* All except the first */\n  :host(.sl-button-group__button:not(.sl-button-group__button--first)) {\n    margin-left: calc(-1 * var(--sl-input-border-width));\n  }\n\n  /* Add a visual separator between solid buttons */\n  :host(.sl-button-group__button:not(.sl-button-group__button--focus, .sl-button-group__button--first, [variant='default']):not(:hover, :active, :focus))\n    .button:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: solid 1px rgb(128 128 128 / 33%);\n    mix-blend-mode: multiply;\n  }\n\n  /* Bump hovered, focused, and checked buttons up so their focus ring isn't clipped */\n  :host(.sl-button-group__button--hover) {\n    z-index: 1;\n  }\n\n  :host(.sl-button-group__button--focus),\n  :host(.sl-button-group__button[checked]) {\n    z-index: 2;\n  }\n`;\n\nexport {\n  button_styles_default\n};\n","import {\n  button_styles_default\n} from \"./chunk.BIBTLNIT.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio-button/radio-button.styles.ts\nvar radio_button_styles_default = r`\n  ${button_styles_default}\n  label {\n    display: inline-block;\n    position: relative;\n  }\n  /* We use a hidden input so constraint validation errors work, since they don't appear to show when used with buttons.\n    We can't actually hide it, though, otherwise the messages will be suppressed by the browser. */\n  .hidden-input {\n    all: unset;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    outline: dotted 1px red;\n    opacity: 0;\n    z-index: -1;\n  }\n`;\n\nexport {\n  radio_button_styles_default\n};\n","import {\n  $,\n  y\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/static.js\nvar r = (t, ...e) => ({ _$litStatic$: e.reduce((e2, o, r2) => e2 + ((t2) => {\n  if (t2._$litStatic$ !== void 0)\n    return t2._$litStatic$;\n  throw Error(`Value passed to 'literal' function must be a 'literal' result: ${t2}. Use 'unsafeStatic' to pass non-literal values, but\n            take care to ensure page security.`);\n})(o) + t[r2 + 1], t[0]) });\nvar i = /* @__PURE__ */ new Map();\nvar a = (t) => (e, ...o) => {\n  var r2;\n  const a2 = o.length;\n  let l2, s2;\n  const n = [], u = [];\n  let c, $2 = 0, v = false;\n  for (; $2 < a2; ) {\n    for (c = e[$2]; $2 < a2 && (s2 = o[$2], l2 = (r2 = s2) === null || r2 === void 0 ? void 0 : r2._$litStatic$) !== void 0; )\n      c += l2 + e[++$2], v = true;\n    u.push(s2), n.push(c), $2++;\n  }\n  if ($2 === a2 && n.push(e[a2]), v) {\n    const t2 = n.join(\"$$lit$$\");\n    (e = i.get(t2)) === void 0 && (n.raw = n, i.set(t2, e = n)), o = u;\n  }\n  return t(e, ...o);\n};\nvar l = a($);\nvar s = a(y);\n\nexport {\n  r,\n  l\n};\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/formdata-event-polyfill.ts\nvar FormDataEventPolyfill = class extends Event {\n  constructor(formData) {\n    super(\"formdata\");\n    this.formData = formData;\n  }\n};\nvar FormDataPolyfill = class extends FormData {\n  constructor(form) {\n    super(form);\n    this.form = form;\n    form.dispatchEvent(new FormDataEventPolyfill(this));\n  }\n  append(name, value) {\n    let input = this.form.elements[name];\n    if (!input) {\n      input = document.createElement(\"input\");\n      input.type = \"hidden\";\n      input.name = name;\n      this.form.appendChild(input);\n    }\n    if (this.has(name)) {\n      const entries = this.getAll(name);\n      const index = entries.indexOf(input.value);\n      if (index !== -1) {\n        entries.splice(index, 1);\n      }\n      entries.push(value);\n      this.set(name, entries);\n    } else {\n      super.append(name, value);\n    }\n    input.value = value;\n  }\n};\nfunction supportsFormDataEvent() {\n  const form = document.createElement(\"form\");\n  let isSupported = false;\n  document.body.append(form);\n  form.addEventListener(\"submit\", (event) => {\n    new FormData(event.target);\n    event.preventDefault();\n  });\n  form.addEventListener(\"formdata\", () => isSupported = true);\n  form.dispatchEvent(new Event(\"submit\", { cancelable: true }));\n  form.remove();\n  return isSupported;\n}\nfunction polyfillFormData() {\n  if (!window.FormData || supportsFormDataEvent()) {\n    return;\n  }\n  window.FormData = FormDataPolyfill;\n  window.addEventListener(\"submit\", (event) => {\n    if (!event.defaultPrevented) {\n      new FormData(event.target);\n    }\n  });\n}\nif (document.readyState === \"complete\") {\n  polyfillFormData();\n} else {\n  window.addEventListener(\"DOMContentLoaded\", () => polyfillFormData());\n}\n\n// src/internal/form.ts\nvar FormSubmitController = class {\n  constructor(host, options) {\n    (this.host = host).addController(this);\n    this.options = __spreadValues({\n      form: (input) => input.closest(\"form\"),\n      name: (input) => input.name,\n      value: (input) => input.value,\n      disabled: (input) => input.disabled,\n      reportValidity: (input) => {\n        return typeof input.reportValidity === \"function\" ? input.reportValidity() : true;\n      }\n    }, options);\n    this.handleFormData = this.handleFormData.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n  hostConnected() {\n    document.addEventListener(\"formdata\", this.handleFormData, { capture: true });\n    document.addEventListener(\"submit\", this.handleFormSubmit, { capture: true });\n  }\n  hostDisconnected() {\n    document.removeEventListener(\"formdata\", this.handleFormData, { capture: true });\n    document.removeEventListener(\"submit\", this.handleFormSubmit, { capture: true });\n  }\n  handleFormData(event) {\n    const disabled = this.options.disabled(this.host);\n    const name = this.options.name(this.host);\n    const value = this.options.value(this.host);\n    if (!disabled && typeof name === \"string\" && typeof value !== \"undefined\") {\n      if (Array.isArray(value)) {\n        value.forEach((val) => {\n          event.formData.append(name, val.toString());\n        });\n      } else {\n        event.formData.append(name, value.toString());\n      }\n    }\n  }\n  handleFormSubmit(event) {\n    const form = this.options.form(this.host);\n    const disabled = this.options.disabled(this.host);\n    const reportValidity = this.options.reportValidity;\n    if (event.target === form && !disabled && !(form == null ? void 0 : form.noValidate) && !reportValidity(this.host)) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    }\n  }\n  submit(submitter) {\n    const form = this.options.form(this.host);\n    if (form) {\n      const button = document.createElement(\"button\");\n      button.type = \"submit\";\n      button.style.position = \"absolute\";\n      button.style.width = \"0\";\n      button.style.height = \"0\";\n      button.style.clipPath = \"inset(50%)\";\n      button.style.overflow = \"hidden\";\n      button.style.whiteSpace = \"nowrap\";\n      if (submitter) {\n        [\"formaction\", \"formmethod\", \"formnovalidate\", \"formtarget\"].forEach((attr) => {\n          if (submitter.hasAttribute(attr)) {\n            button.setAttribute(attr, submitter.getAttribute(attr));\n          }\n        });\n      }\n      form.append(button);\n      button.click();\n      button.remove();\n    }\n  }\n};\n\nexport {\n  FormSubmitController\n};\n","// src/internal/slot.ts\nvar HasSlotController = class {\n  constructor(host, ...slotNames) {\n    this.slotNames = [];\n    (this.host = host).addController(this);\n    this.slotNames = slotNames;\n    this.handleSlotChange = this.handleSlotChange.bind(this);\n  }\n  hasDefaultSlot() {\n    return [...this.host.childNodes].some((node) => {\n      if (node.nodeType === node.TEXT_NODE && node.textContent.trim() !== \"\") {\n        return true;\n      }\n      if (node.nodeType === node.ELEMENT_NODE) {\n        const el = node;\n        const tagName = el.tagName.toLowerCase();\n        if (tagName === \"sl-visually-hidden\") {\n          return false;\n        }\n        if (!el.hasAttribute(\"slot\")) {\n          return true;\n        }\n      }\n      return false;\n    });\n  }\n  hasNamedSlot(name) {\n    return this.host.querySelector(`:scope > [slot=\"${name}\"]`) !== null;\n  }\n  test(slotName) {\n    return slotName === \"[default]\" ? this.hasDefaultSlot() : this.hasNamedSlot(slotName);\n  }\n  hostConnected() {\n    this.host.shadowRoot.addEventListener(\"slotchange\", this.handleSlotChange);\n  }\n  hostDisconnected() {\n    this.host.shadowRoot.removeEventListener(\"slotchange\", this.handleSlotChange);\n  }\n  handleSlotChange(event) {\n    const slot = event.target;\n    if (this.slotNames.includes(\"[default]\") && !slot.name || slot.name && this.slotNames.includes(slot.name)) {\n      this.host.requestUpdate();\n    }\n  }\n};\nfunction getTextContent(slot) {\n  if (!slot) {\n    return \"\";\n  }\n  const nodes = slot.assignedNodes({ flatten: true });\n  let text = \"\";\n  [...nodes].forEach((node) => {\n    if (node.nodeType === Node.TEXT_NODE) {\n      text += node.textContent;\n    }\n  });\n  return text;\n}\n\nexport {\n  HasSlotController,\n  getTextContent\n};\n","import {\n  w\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directives/if-defined.js\nvar l = (l2) => l2 != null ? l2 : w;\n\nexport {\n  l\n};\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/watch.ts\nfunction watch(propName, options) {\n  const resolvedOptions = __spreadValues({\n    waitUntilFirstUpdate: false\n  }, options);\n  return (proto, decoratedFnName) => {\n    const { update } = proto;\n    if (propName in proto) {\n      const propNameKey = propName;\n      proto.update = function(changedProps) {\n        if (changedProps.has(propNameKey)) {\n          const oldValue = changedProps.get(propNameKey);\n          const newValue = this[propNameKey];\n          if (oldValue !== newValue) {\n            if (!resolvedOptions.waitUntilFirstUpdate || this.hasUpdated) {\n              this[decoratedFnName](oldValue, newValue);\n            }\n          }\n        }\n        update.call(this, changedProps);\n      };\n    }\n  };\n}\n\nexport {\n  watch\n};\n","import {\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/event.ts\nfunction emit(el, name, options) {\n  const event = new CustomEvent(name, __spreadValues({\n    bubbles: true,\n    cancelable: false,\n    composed: true,\n    detail: {}\n  }, options));\n  el.dispatchEvent(event);\n  return event;\n}\nfunction waitForEvent(el, eventName) {\n  return new Promise((resolve) => {\n    function done(event) {\n      if (event.target === el) {\n        el.removeEventListener(eventName, done);\n        resolve();\n      }\n    }\n    el.addEventListener(eventName, done);\n  });\n}\n\nexport {\n  emit,\n  waitForEvent\n};\n","import {\n  radio_button_styles_default\n} from \"./chunk.JHRKEMQ3.js\";\nimport {\n  l as l2\n} from \"./chunk.LOYEL7IY.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio-button/radio-button.ts\nvar SlRadioButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasSlotController = new HasSlotController(this, \"[default]\", \"prefix\", \"suffix\");\n    this.hasFocus = false;\n    this.disabled = false;\n    this.checked = false;\n    this.invalid = false;\n    this.variant = \"default\";\n    this.size = \"medium\";\n    this.pill = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radio\");\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.hiddenInput.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.hiddenInput.setCustomValidity(message);\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleClick() {\n    if (!this.disabled) {\n      this.checked = true;\n    }\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      emit(this, \"sl-change\");\n    }\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      this.input.disabled = this.disabled;\n      this.invalid = !this.input.checkValidity();\n    }\n  }\n  render() {\n    return l2`\n      <div part=\"base\">\n        <input class=\"hidden-input\" type=\"radio\" aria-hidden=\"true\" tabindex=\"-1\" />\n        <button\n          part=\"button\"\n          class=${o({\n      button: true,\n      \"button--default\": this.variant === \"default\",\n      \"button--primary\": this.variant === \"primary\",\n      \"button--success\": this.variant === \"success\",\n      \"button--neutral\": this.variant === \"neutral\",\n      \"button--warning\": this.variant === \"warning\",\n      \"button--danger\": this.variant === \"danger\",\n      \"button--small\": this.size === \"small\",\n      \"button--medium\": this.size === \"medium\",\n      \"button--large\": this.size === \"large\",\n      \"button--checked\": this.checked,\n      \"button--disabled\": this.disabled,\n      \"button--focused\": this.hasFocus,\n      \"button--outline\": true,\n      \"button--pill\": this.pill,\n      \"button--has-label\": this.hasSlotController.test(\"[default]\"),\n      \"button--has-prefix\": this.hasSlotController.test(\"prefix\"),\n      \"button--has-suffix\": this.hasSlotController.test(\"suffix\")\n    })}\n          ?disabled=${this.disabled}\n          type=\"button\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n          @click=${this.handleClick}\n        >\n          <span part=\"prefix\" class=\"button__prefix\">\n            <slot name=\"prefix\"></slot>\n          </span>\n          <span part=\"label\" class=\"button__label\">\n            <slot></slot>\n          </span>\n          <span part=\"suffix\" class=\"button__suffix\">\n            <slot name=\"suffix\"></slot>\n          </span>\n        </button>\n      </div>\n    `;\n  }\n};\nSlRadioButton.styles = radio_button_styles_default;\n__decorateClass([\n  i(\".button\")\n], SlRadioButton.prototype, \"input\", 2);\n__decorateClass([\n  i(\".hidden-input\")\n], SlRadioButton.prototype, \"hiddenInput\", 2);\n__decorateClass([\n  t()\n], SlRadioButton.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlRadioButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlRadioButton.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlRadioButton.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlRadioButton.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  e({ reflect: true })\n], SlRadioButton.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlRadioButton.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadioButton.prototype, \"pill\", 2);\nSlRadioButton = __decorateClass([\n  n(\"sl-radio-button\")\n], SlRadioButton);\n\nexport {\n  SlRadioButton\n};\n","import {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/styles/form-control.styles.ts\nvar form_control_styles_default = r`\n  .form-control .form-control__label {\n    display: none;\n  }\n\n  .form-control .form-control__help-text {\n    display: none;\n  }\n\n  /* Label */\n  .form-control--has-label .form-control__label {\n    display: inline-block;\n    color: var(--sl-input-label-color);\n    margin-bottom: var(--sl-spacing-3x-small);\n  }\n\n  .form-control--has-label.form-control--small .form-control__label {\n    font-size: var(--sl-input-label-font-size-small);\n  }\n\n  .form-control--has-label.form-control--medium .form-control__label {\n    font-size: var(--sl-input-label-font-size-medium);\n  }\n\n  .form-control--has-label.form-control--large .form-control_label {\n    font-size: var(--sl-input-label-font-size-large);\n  }\n\n  /* Help text */\n  .form-control--has-help-text .form-control__help-text {\n    display: block;\n    color: var(--sl-input-help-text-color);\n  }\n\n  .form-control--has-help-text .form-control__help-text ::slotted(*) {\n    margin-top: var(--sl-spacing-3x-small);\n  }\n\n  .form-control--has-help-text.form-control--small .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-small);\n  }\n\n  .form-control--has-help-text.form-control--medium .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-medium);\n  }\n\n  .form-control--has-help-text.form-control--large .form-control__help-text {\n    font-size: var(--sl-input-help-text-font-size-large);\n  }\n`;\n\nexport {\n  form_control_styles_default\n};\n","// node_modules/@shoelace-style/localize/dist/index.js\nvar connectedElements = /* @__PURE__ */ new Set();\nvar documentElementObserver = new MutationObserver(update);\nvar translations = /* @__PURE__ */ new Map();\nvar documentLanguage = document.documentElement.lang || navigator.language;\nvar fallback;\ndocumentElementObserver.observe(document.documentElement, {\n  attributes: true,\n  attributeFilter: [\"lang\"]\n});\nfunction registerTranslation(...translation2) {\n  translation2.map((t) => {\n    const code = t.$code.toLowerCase();\n    translations.set(code, t);\n    if (!fallback) {\n      fallback = t;\n    }\n  });\n  update();\n}\nfunction term(lang, key, ...args) {\n  const code = lang.toLowerCase().slice(0, 2);\n  const subcode = lang.length > 2 ? lang.toLowerCase() : \"\";\n  const primary = translations.get(subcode);\n  const secondary = translations.get(code);\n  let term2;\n  if (primary && primary[key]) {\n    term2 = primary[key];\n  } else if (secondary && secondary[key]) {\n    term2 = secondary[key];\n  } else if (fallback && fallback[key]) {\n    term2 = fallback[key];\n  } else {\n    console.error(`No translation found for: ${key}`);\n    return key;\n  }\n  if (typeof term2 === \"function\") {\n    return term2(...args);\n  }\n  return term2;\n}\nfunction date(lang, dateToFormat, options) {\n  dateToFormat = new Date(dateToFormat);\n  return new Intl.DateTimeFormat(lang, options).format(dateToFormat);\n}\nfunction number(lang, numberToFormat, options) {\n  numberToFormat = Number(numberToFormat);\n  return isNaN(numberToFormat) ? \"\" : new Intl.NumberFormat(lang, options).format(numberToFormat);\n}\nfunction relativeTime(lang, value, unit, options) {\n  return new Intl.RelativeTimeFormat(lang, options).format(value, unit);\n}\nfunction update() {\n  documentLanguage = document.documentElement.lang || navigator.language;\n  [...connectedElements.keys()].map((el) => {\n    if (typeof el.requestUpdate === \"function\") {\n      el.requestUpdate();\n    }\n  });\n}\nvar LocalizeController = class {\n  constructor(host) {\n    this.host = host;\n    this.host.addController(this);\n  }\n  hostConnected() {\n    connectedElements.add(this.host);\n  }\n  hostDisconnected() {\n    connectedElements.delete(this.host);\n  }\n  term(key, ...args) {\n    return term(this.host.lang || documentLanguage, key, ...args);\n  }\n  date(dateToFormat, options) {\n    return date(this.host.lang || documentLanguage, dateToFormat, options);\n  }\n  number(numberToFormat, options) {\n    return number(this.host.lang || documentLanguage, numberToFormat, options);\n  }\n  relativeTime(value, unit, options) {\n    return relativeTime(this.host.lang || documentLanguage, value, unit, options);\n  }\n};\n\n// src/translations/en.ts\nvar translation = {\n  $code: \"en\",\n  $name: \"English\",\n  $dir: \"ltr\",\n  clearEntry: \"Clear entry\",\n  close: \"Close\",\n  copy: \"Copy\",\n  currentValue: \"Current value\",\n  hidePassword: \"Hide password\",\n  progress: \"Progress\",\n  remove: \"Remove\",\n  resize: \"Resize\",\n  scrollToEnd: \"Scroll to end\",\n  scrollToStart: \"Scroll to start\",\n  selectAColorFromTheScreen: \"Select a color from the screen\",\n  showPassword: \"Show password\",\n  toggleColorFormat: \"Toggle color format\"\n};\nregisterTranslation(translation);\nvar en_default = translation;\n\nexport {\n  en_default,\n  registerTranslation,\n  term,\n  date,\n  number,\n  relativeTime,\n  update,\n  LocalizeController\n};\n","import {\n  form_control_styles_default\n} from \"./chunk.LAAROFAU.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/input/input.styles.ts\nvar input_styles_default = r`\n  ${component_styles_default}\n  ${form_control_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .input {\n    flex: 1 1 auto;\n    display: inline-flex;\n    align-items: stretch;\n    justify-content: start;\n    position: relative;\n    width: 100%;\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-input-font-weight);\n    letter-spacing: var(--sl-input-letter-spacing);\n    vertical-align: middle;\n    overflow: hidden;\n    cursor: text;\n    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow,\n      var(--sl-transition-fast) background-color;\n  }\n\n  /* Standard inputs */\n  .input--standard {\n    background-color: var(--sl-input-background-color);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n  }\n\n  .input--standard:hover:not(.input--disabled) {\n    background-color: var(--sl-input-background-color-hover);\n    border-color: var(--sl-input-border-color-hover);\n  }\n\n  .input--standard.input--focused:not(.input--disabled) {\n    background-color: var(--sl-input-background-color-focus);\n    border-color: var(--sl-input-border-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .input--standard.input--focused:not(.input--disabled) .input__control {\n    color: var(--sl-input-color-focus);\n  }\n\n  .input--standard.input--disabled {\n    background-color: var(--sl-input-background-color-disabled);\n    border-color: var(--sl-input-border-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .input--standard.input--disabled .input__control {\n    color: var(--sl-input-color-disabled);\n  }\n\n  .input--standard.input--disabled .input__control::placeholder {\n    color: var(--sl-input-placeholder-color-disabled);\n  }\n\n  /* Filled inputs */\n  .input--filled {\n    border: none;\n    background-color: var(--sl-input-filled-background-color);\n    color: var(--sl-input-color);\n  }\n\n  .input--filled:hover:not(.input--disabled) {\n    background-color: var(--sl-input-filled-background-color-hover);\n  }\n\n  .input--filled.input--focused:not(.input--disabled) {\n    background-color: var(--sl-input-filled-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .input--filled.input--disabled {\n    background-color: var(--sl-input-filled-background-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .input__control {\n    flex: 1 1 auto;\n    font-family: inherit;\n    font-size: inherit;\n    font-weight: inherit;\n    min-width: 0;\n    height: 100%;\n    color: var(--sl-input-color);\n    border: none;\n    background: none;\n    box-shadow: none;\n    padding: 0;\n    margin: 0;\n    cursor: inherit;\n    -webkit-appearance: none;\n  }\n\n  .input__control::-webkit-search-decoration,\n  .input__control::-webkit-search-cancel-button,\n  .input__control::-webkit-search-results-button,\n  .input__control::-webkit-search-results-decoration {\n    -webkit-appearance: none;\n  }\n\n  .input__control:-webkit-autofill,\n  .input__control:-webkit-autofill:hover,\n  .input__control:-webkit-autofill:focus,\n  .input__control:-webkit-autofill:active {\n    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-background-color-hover) inset !important;\n    -webkit-text-fill-color: var(--sl-color-primary-500);\n    caret-color: var(--sl-input-color);\n  }\n\n  .input--filled .input__control:-webkit-autofill,\n  .input--filled .input__control:-webkit-autofill:hover,\n  .input--filled .input__control:-webkit-autofill:focus,\n  .input--filled .input__control:-webkit-autofill:active {\n    box-shadow: 0 0 0 var(--sl-input-height-large) var(--sl-input-filled-background-color) inset !important;\n  }\n\n  .input__control::placeholder {\n    color: var(--sl-input-placeholder-color);\n    user-select: none;\n  }\n\n  .input:hover:not(.input--disabled) .input__control {\n    color: var(--sl-input-color-hover);\n  }\n\n  .input__control:focus {\n    outline: none;\n  }\n\n  .input__prefix,\n  .input__suffix {\n    display: inline-flex;\n    flex: 0 0 auto;\n    align-items: center;\n    cursor: default;\n  }\n\n  .input__prefix ::slotted(sl-icon),\n  .input__suffix ::slotted(sl-icon) {\n    color: var(--sl-input-icon-color);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .input--small {\n    border-radius: var(--sl-input-border-radius-small);\n    font-size: var(--sl-input-font-size-small);\n    height: var(--sl-input-height-small);\n  }\n\n  .input--small .input__control {\n    height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-small);\n  }\n\n  .input--small .input__clear,\n  .input--small .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-small) * 2);\n  }\n\n  .input--small .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-small);\n  }\n\n  .input--small .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-small);\n  }\n\n  .input--medium {\n    border-radius: var(--sl-input-border-radius-medium);\n    font-size: var(--sl-input-font-size-medium);\n    height: var(--sl-input-height-medium);\n  }\n\n  .input--medium .input__control {\n    height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-medium);\n  }\n\n  .input--medium .input__clear,\n  .input--medium .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-medium) * 2);\n  }\n\n  .input--medium .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-medium);\n  }\n\n  .input--medium .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-medium);\n  }\n\n  .input--large {\n    border-radius: var(--sl-input-border-radius-large);\n    font-size: var(--sl-input-font-size-large);\n    height: var(--sl-input-height-large);\n  }\n\n  .input--large .input__control {\n    height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    padding: 0 var(--sl-input-spacing-large);\n  }\n\n  .input--large .input__clear,\n  .input--large .input__password-toggle {\n    width: calc(1em + var(--sl-input-spacing-large) * 2);\n  }\n\n  .input--large .input__prefix ::slotted(*) {\n    padding-left: var(--sl-input-spacing-large);\n  }\n\n  .input--large .input__suffix ::slotted(*) {\n    padding-right: var(--sl-input-spacing-large);\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .input--pill.input--small {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .input--pill.input--medium {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .input--pill.input--large {\n    border-radius: var(--sl-input-height-large);\n  }\n\n  /*\n   * Clearable + Password Toggle\n   */\n\n  .input__clear,\n  .input__password-toggle {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: inherit;\n    color: var(--sl-input-icon-color);\n    border: none;\n    background: none;\n    padding: 0;\n    transition: var(--sl-transition-fast) color;\n    cursor: pointer;\n  }\n\n  .input__clear:hover,\n  .input__password-toggle:hover {\n    color: var(--sl-input-icon-color-hover);\n  }\n\n  .input__clear:focus,\n  .input__password-toggle:focus {\n    outline: none;\n  }\n\n  .input--empty .input__clear {\n    visibility: hidden;\n  }\n\n  /* Don't show the browser's password toggle in Edge */\n  ::-ms-reveal {\n    display: none;\n  }\n`;\n\nexport {\n  input_styles_default\n};\n","import {\n  e,\n  i,\n  t\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  b,\n  w\n} from \"./chunk.PEQICPKO.js\";\n\n// node_modules/lit-html/directive-helpers.js\nvar r = (o) => o.strings === void 0;\nvar f = {};\nvar s = (o, i2 = f) => o._$AH = i2;\n\n// node_modules/lit-html/directives/live.js\nvar l = e(class extends i {\n  constructor(r2) {\n    if (super(r2), r2.type !== t.PROPERTY && r2.type !== t.ATTRIBUTE && r2.type !== t.BOOLEAN_ATTRIBUTE)\n      throw Error(\"The `live` directive is not allowed on child or event bindings\");\n    if (!r(r2))\n      throw Error(\"`live` bindings can only contain a single expression\");\n  }\n  render(r2) {\n    return r2;\n  }\n  update(i2, [t2]) {\n    if (t2 === b || t2 === w)\n      return t2;\n    const o = i2.element, l2 = i2.name;\n    if (i2.type === t.PROPERTY) {\n      if (t2 === o[l2])\n        return b;\n    } else if (i2.type === t.BOOLEAN_ATTRIBUTE) {\n      if (!!t2 === o.hasAttribute(l2))\n        return b;\n    } else if (i2.type === t.ATTRIBUTE && o.getAttribute(l2) === t2 + \"\")\n      return b;\n    return s(i2), t2;\n  }\n});\n\nexport {\n  l\n};\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","import {\n  input_styles_default\n} from \"./chunk.WVVUWAAN.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/input/input.ts\nvar SlInput = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this);\n    this.hasSlotController = new HasSlotController(this, \"help-text\", \"label\");\n    this.localize = new LocalizeController(this);\n    this.hasFocus = false;\n    this.isPasswordVisible = false;\n    this.type = \"text\";\n    this.size = \"medium\";\n    this.value = \"\";\n    this.filled = false;\n    this.pill = false;\n    this.label = \"\";\n    this.helpText = \"\";\n    this.clearable = false;\n    this.togglePassword = false;\n    this.disabled = false;\n    this.readonly = false;\n    this.required = false;\n    this.invalid = false;\n  }\n  get valueAsDate() {\n    var _a, _b;\n    return (_b = (_a = this.input) == null ? void 0 : _a.valueAsDate) != null ? _b : null;\n  }\n  set valueAsDate(newValue) {\n    this.updateComplete.then(() => {\n      this.input.valueAsDate = newValue;\n      this.value = this.input.value;\n    });\n  }\n  get valueAsNumber() {\n    var _a, _b;\n    return (_b = (_a = this.input) == null ? void 0 : _a.valueAsNumber) != null ? _b : parseFloat(this.value);\n  }\n  set valueAsNumber(newValue) {\n    this.updateComplete.then(() => {\n      this.input.valueAsNumber = newValue;\n      this.value = this.input.value;\n    });\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  select() {\n    this.input.select();\n  }\n  setSelectionRange(selectionStart, selectionEnd, selectionDirection = \"none\") {\n    this.input.setSelectionRange(selectionStart, selectionEnd, selectionDirection);\n  }\n  setRangeText(replacement, start, end, selectMode = \"preserve\") {\n    this.input.setRangeText(replacement, start, end, selectMode);\n    if (this.value !== this.input.value) {\n      this.value = this.input.value;\n      emit(this, \"sl-input\");\n      emit(this, \"sl-change\");\n    }\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleChange() {\n    this.value = this.input.value;\n    emit(this, \"sl-change\");\n  }\n  handleClearClick(event) {\n    this.value = \"\";\n    emit(this, \"sl-clear\");\n    emit(this, \"sl-input\");\n    emit(this, \"sl-change\");\n    this.input.focus();\n    event.stopPropagation();\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleInput() {\n    this.value = this.input.value;\n    emit(this, \"sl-input\");\n  }\n  handleInvalid() {\n    this.invalid = true;\n  }\n  handleKeyDown(event) {\n    const hasModifier = event.metaKey || event.ctrlKey || event.shiftKey || event.altKey;\n    if (event.key === \"Enter\" && !hasModifier) {\n      this.formSubmitController.submit();\n    }\n  }\n  handlePasswordToggle() {\n    this.isPasswordVisible = !this.isPasswordVisible;\n  }\n  handleValueChange() {\n    this.invalid = !this.input.checkValidity();\n  }\n  render() {\n    const hasLabelSlot = this.hasSlotController.test(\"label\");\n    const hasHelpTextSlot = this.hasSlotController.test(\"help-text\");\n    const hasLabel = this.label ? true : !!hasLabelSlot;\n    const hasHelpText = this.helpText ? true : !!hasHelpTextSlot;\n    return $`\n      <div\n        part=\"form-control\"\n        class=${o({\n      \"form-control\": true,\n      \"form-control--small\": this.size === \"small\",\n      \"form-control--medium\": this.size === \"medium\",\n      \"form-control--large\": this.size === \"large\",\n      \"form-control--has-label\": hasLabel,\n      \"form-control--has-help-text\": hasHelpText\n    })}\n      >\n        <label\n          part=\"form-control-label\"\n          class=\"form-control__label\"\n          for=\"input\"\n          aria-hidden=${hasLabel ? \"false\" : \"true\"}\n        >\n          <slot name=\"label\">${this.label}</slot>\n        </label>\n\n        <div part=\"form-control-input\" class=\"form-control-input\">\n          <div\n            part=\"base\"\n            class=${o({\n      input: true,\n      \"input--small\": this.size === \"small\",\n      \"input--medium\": this.size === \"medium\",\n      \"input--large\": this.size === \"large\",\n      \"input--pill\": this.pill,\n      \"input--standard\": !this.filled,\n      \"input--filled\": this.filled,\n      \"input--disabled\": this.disabled,\n      \"input--focused\": this.hasFocus,\n      \"input--empty\": this.value.length === 0,\n      \"input--invalid\": this.invalid\n    })}\n          >\n            <span part=\"prefix\" class=\"input__prefix\">\n              <slot name=\"prefix\"></slot>\n            </span>\n\n            <input\n              part=\"input\"\n              id=\"input\"\n              class=\"input__control\"\n              type=${this.type === \"password\" && this.isPasswordVisible ? \"text\" : this.type}\n              name=${l(this.name)}\n              ?disabled=${this.disabled}\n              ?readonly=${this.readonly}\n              ?required=${this.required}\n              placeholder=${l(this.placeholder)}\n              minlength=${l(this.minlength)}\n              maxlength=${l(this.maxlength)}\n              min=${l(this.min)}\n              max=${l(this.max)}\n              step=${l(this.step)}\n              .value=${l2(this.value)}\n              autocapitalize=${l(this.autocapitalize)}\n              autocomplete=${l(this.autocomplete)}\n              autocorrect=${l(this.autocorrect)}\n              ?autofocus=${this.autofocus}\n              spellcheck=${l(this.spellcheck)}\n              pattern=${l(this.pattern)}\n              enterkeyhint=${l(this.enterkeyhint)}\n              inputmode=${l(this.inputmode)}\n              aria-describedby=\"help-text\"\n              aria-invalid=${this.invalid ? \"true\" : \"false\"}\n              @change=${this.handleChange}\n              @input=${this.handleInput}\n              @invalid=${this.handleInvalid}\n              @keydown=${this.handleKeyDown}\n              @focus=${this.handleFocus}\n              @blur=${this.handleBlur}\n            />\n\n            ${this.clearable && this.value.length > 0 ? $`\n                  <button\n                    part=\"clear-button\"\n                    class=\"input__clear\"\n                    type=\"button\"\n                    aria-label=${this.localize.term(\"clearEntry\")}\n                    @click=${this.handleClearClick}\n                    tabindex=\"-1\"\n                  >\n                    <slot name=\"clear-icon\">\n                      <sl-icon name=\"x-circle-fill\" library=\"system\"></sl-icon>\n                    </slot>\n                  </button>\n                ` : \"\"}\n            ${this.togglePassword ? $`\n                  <button\n                    part=\"password-toggle-button\"\n                    class=\"input__password-toggle\"\n                    type=\"button\"\n                    aria-label=${this.localize.term(this.isPasswordVisible ? \"hidePassword\" : \"showPassword\")}\n                    @click=${this.handlePasswordToggle}\n                    tabindex=\"-1\"\n                  >\n                    ${this.isPasswordVisible ? $`\n                          <slot name=\"show-password-icon\">\n                            <sl-icon name=\"eye-slash\" library=\"system\"></sl-icon>\n                          </slot>\n                        ` : $`\n                          <slot name=\"hide-password-icon\">\n                            <sl-icon name=\"eye\" library=\"system\"></sl-icon>\n                          </slot>\n                        `}\n                  </button>\n                ` : \"\"}\n\n            <span part=\"suffix\" class=\"input__suffix\">\n              <slot name=\"suffix\"></slot>\n            </span>\n          </div>\n        </div>\n\n        <div\n          part=\"form-control-help-text\"\n          id=\"help-text\"\n          class=\"form-control__help-text\"\n          aria-hidden=${hasHelpText ? \"false\" : \"true\"}\n        >\n          <slot name=\"help-text\">${this.helpText}</slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlInput.styles = input_styles_default;\n__decorateClass([\n  i(\".input__control\")\n], SlInput.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlInput.prototype, \"hasFocus\", 2);\n__decorateClass([\n  t()\n], SlInput.prototype, \"isPasswordVisible\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlInput.prototype, \"type\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlInput.prototype, \"size\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"filled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"pill\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"label\", 2);\n__decorateClass([\n  e({ attribute: \"help-text\" })\n], SlInput.prototype, \"helpText\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"clearable\", 2);\n__decorateClass([\n  e({ attribute: \"toggle-password\", type: Boolean })\n], SlInput.prototype, \"togglePassword\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"placeholder\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"readonly\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"minlength\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"maxlength\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"min\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"max\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlInput.prototype, \"step\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"pattern\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlInput.prototype, \"invalid\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocapitalize\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocorrect\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"autocomplete\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"autofocus\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"enterkeyhint\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlInput.prototype, \"spellcheck\", 2);\n__decorateClass([\n  e()\n], SlInput.prototype, \"inputmode\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlInput.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"value\", { waitUntilFirstUpdate: true })\n], SlInput.prototype, \"handleValueChange\", 1);\nSlInput = __decorateClass([\n  n(\"sl-input\")\n], SlInput);\n\nexport {\n  SlInput\n};\n","// src/utilities/base-path.ts\nvar basePath = \"\";\nfunction setBasePath(path) {\n  basePath = path;\n}\nfunction getBasePath() {\n  return basePath.replace(/\\/$/, \"\");\n}\nvar scripts = [...document.getElementsByTagName(\"script\")];\nvar configScript = scripts.find((script) => script.hasAttribute(\"data-shoelace\"));\nif (configScript) {\n  setBasePath(configScript.getAttribute(\"data-shoelace\"));\n} else {\n  const fallbackScript = scripts.find((s) => /shoelace(\\.min)?\\.js($|\\?)/.test(s.src));\n  let path = \"\";\n  if (fallbackScript) {\n    path = fallbackScript.getAttribute(\"src\");\n  }\n  setBasePath(path.split(\"/\").slice(0, -1).join(\"/\"));\n}\n\nexport {\n  setBasePath,\n  getBasePath\n};\n","import {\n  getBasePath\n} from \"./chunk.NFF2HMIT.js\";\n\n// src/components/icon/library.default.ts\nvar library = {\n  name: \"default\",\n  resolver: (name) => `${getBasePath()}/assets/icons/${name}.svg`\n};\nvar library_default_default = library;\n\nexport {\n  library_default_default\n};\n","// src/components/icon/library.system.ts\nvar icons = {\n  \"check-lg\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check-lg\" viewBox=\"0 0 16 16\">\n      <path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"></path>\n    </svg>\n  `,\n  \"chevron-down\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-down\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  \"chevron-left\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-left\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z\"/>\n    </svg>\n  `,\n  \"chevron-right\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chevron-right\" viewBox=\"0 0 16 16\">\n      <path fill-rule=\"evenodd\" d=\"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  eye: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eye\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z\"/>\n      <path d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\n    </svg>\n  `,\n  \"eye-slash\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eye-slash\" viewBox=\"0 0 16 16\">\n      <path d=\"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"/>\n      <path d=\"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"/>\n      <path d=\"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z\"/>\n    </svg>\n  `,\n  eyedropper: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-eyedropper\" viewBox=\"0 0 16 16\">\n      <path d=\"M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z\"></path>\n    </svg>\n  `,\n  \"grip-vertical\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-grip-vertical\" viewBox=\"0 0 16 16\">\n      <path d=\"M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z\"/>\n    </svg>\n  `,\n  \"person-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-person-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z\"/>\n    </svg>\n  `,\n  \"play-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-play-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z\"></path>\n    </svg>\n  `,\n  \"pause-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-pause-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z\"></path>\n    </svg>\n  `,\n  \"star-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-star-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z\"/>\n    </svg>\n  `,\n  x: `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x\" viewBox=\"0 0 16 16\">\n      <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z\"/>\n    </svg>\n  `,\n  \"x-circle-fill\": `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x-circle-fill\" viewBox=\"0 0 16 16\">\n      <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"></path>\n    </svg>\n  `\n};\nvar systemLibrary = {\n  name: \"system\",\n  resolver: (name) => {\n    if (name in icons) {\n      return `data:image/svg+xml,${encodeURIComponent(icons[name])}`;\n    }\n    return \"\";\n  }\n};\nvar library_system_default = systemLibrary;\n\nexport {\n  library_system_default\n};\n","import {\n  library_default_default\n} from \"./chunk.C7PPQWMA.js\";\nimport {\n  library_system_default\n} from \"./chunk.IDYSXN6R.js\";\n\n// src/components/icon/library.ts\nvar registry = [library_default_default, library_system_default];\nvar watchedIcons = [];\nfunction watchIcon(icon) {\n  watchedIcons.push(icon);\n}\nfunction unwatchIcon(icon) {\n  watchedIcons = watchedIcons.filter((el) => el !== icon);\n}\nfunction getIconLibrary(name) {\n  return registry.find((lib) => lib.name === name);\n}\nfunction registerIconLibrary(name, options) {\n  unregisterIconLibrary(name);\n  registry.push({\n    name,\n    resolver: options.resolver,\n    mutator: options.mutator\n  });\n  watchedIcons.forEach((icon) => {\n    if (icon.library === name) {\n      icon.redraw();\n    }\n  });\n}\nfunction unregisterIconLibrary(name) {\n  registry = registry.filter((lib) => lib.name !== name);\n}\n\nexport {\n  watchIcon,\n  unwatchIcon,\n  getIconLibrary,\n  registerIconLibrary,\n  unregisterIconLibrary\n};\n","// src/components/include/request.ts\nvar includeFiles = /* @__PURE__ */ new Map();\nfunction requestInclude(src, mode = \"cors\") {\n  if (includeFiles.has(src)) {\n    return includeFiles.get(src);\n  }\n  const fileDataPromise = fetch(src, { mode }).then(async (response) => {\n    return {\n      ok: response.ok,\n      status: response.status,\n      html: await response.text()\n    };\n  });\n  includeFiles.set(src, fileDataPromise);\n  return fileDataPromise;\n}\n\nexport {\n  requestInclude\n};\n","import {\n  requestInclude\n} from \"./chunk.RPB53XXV.js\";\n\n// src/components/icon/request.ts\nvar iconFiles = /* @__PURE__ */ new Map();\nasync function requestIcon(url) {\n  if (iconFiles.has(url)) {\n    return iconFiles.get(url);\n  }\n  const fileData = await requestInclude(url);\n  const iconFileData = {\n    ok: fileData.ok,\n    status: fileData.status,\n    svg: null\n  };\n  if (fileData.ok) {\n    const div = document.createElement(\"div\");\n    div.innerHTML = fileData.html;\n    const svg = div.firstElementChild;\n    iconFileData.svg = (svg == null ? void 0 : svg.tagName.toLowerCase()) === \"svg\" ? svg.outerHTML : \"\";\n  }\n  iconFiles.set(url, iconFileData);\n  return iconFileData;\n}\n\nexport {\n  requestIcon\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/icon/icon.styles.ts\nvar icon_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n    width: 1em;\n    height: 1em;\n    contain: strict;\n    box-sizing: content-box !important;\n  }\n\n  .icon,\n  svg {\n    display: block;\n    height: 100%;\n    width: 100%;\n  }\n`;\n\nexport {\n  icon_styles_default\n};\n","import {\n  getIconLibrary,\n  unwatchIcon,\n  watchIcon\n} from \"./chunk.UCCHCS2E.js\";\nimport {\n  requestIcon\n} from \"./chunk.P52GZVKG.js\";\nimport {\n  icon_styles_default\n} from \"./chunk.NPYVPRSA.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  e as e2,\n  i,\n  t as t2\n} from \"./chunk.2JQPDYNA.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  b,\n  s,\n  w\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/lit-html/directives/unsafe-html.js\nvar e3 = class extends i {\n  constructor(i2) {\n    if (super(i2), this.it = w, i2.type !== t2.CHILD)\n      throw Error(this.constructor.directiveName + \"() can only be used in child bindings\");\n  }\n  render(r) {\n    if (r === w || r == null)\n      return this.vt = void 0, this.it = r;\n    if (r === b)\n      return r;\n    if (typeof r != \"string\")\n      throw Error(this.constructor.directiveName + \"() called with a non-string value\");\n    if (r === this.it)\n      return this.vt;\n    this.it = r;\n    const s2 = [r];\n    return s2.raw = s2, this.vt = { _$litType$: this.constructor.resultType, strings: s2, values: [] };\n  }\n};\ne3.directiveName = \"unsafeHTML\", e3.resultType = 1;\nvar o = e2(e3);\n\n// node_modules/lit-html/directives/unsafe-svg.js\nvar t3 = class extends e3 {\n};\nt3.directiveName = \"unsafeSVG\", t3.resultType = 2;\nvar o2 = e2(t3);\n\n// src/components/icon/icon.ts\nvar parser = new DOMParser();\nvar SlIcon = class extends s {\n  constructor() {\n    super(...arguments);\n    this.svg = \"\";\n    this.label = \"\";\n    this.library = \"default\";\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    watchIcon(this);\n  }\n  firstUpdated() {\n    this.setIcon();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    unwatchIcon(this);\n  }\n  getUrl() {\n    const library = getIconLibrary(this.library);\n    if (this.name && library) {\n      return library.resolver(this.name);\n    }\n    return this.src;\n  }\n  redraw() {\n    this.setIcon();\n  }\n  async setIcon() {\n    var _a;\n    const library = getIconLibrary(this.library);\n    const url = this.getUrl();\n    if (url) {\n      try {\n        const file = await requestIcon(url);\n        if (url !== this.getUrl()) {\n          return;\n        } else if (file.ok) {\n          const doc = parser.parseFromString(file.svg, \"text/html\");\n          const svgEl = doc.body.querySelector(\"svg\");\n          if (svgEl !== null) {\n            (_a = library == null ? void 0 : library.mutator) == null ? void 0 : _a.call(library, svgEl);\n            this.svg = svgEl.outerHTML;\n            emit(this, \"sl-load\");\n          } else {\n            this.svg = \"\";\n            emit(this, \"sl-error\");\n          }\n        } else {\n          this.svg = \"\";\n          emit(this, \"sl-error\");\n        }\n      } catch (e4) {\n        emit(this, \"sl-error\");\n      }\n    } else if (this.svg.length > 0) {\n      this.svg = \"\";\n    }\n  }\n  handleChange() {\n    this.setIcon();\n  }\n  render() {\n    const hasLabel = typeof this.label === \"string\" && this.label.length > 0;\n    return $` <div\n      part=\"base\"\n      class=\"icon\"\n      role=${l(hasLabel ? \"img\" : void 0)}\n      aria-label=${l(hasLabel ? this.label : void 0)}\n      aria-hidden=${l(hasLabel ? void 0 : \"true\")}\n    >\n      ${o2(this.svg)}\n    </div>`;\n  }\n};\nSlIcon.styles = icon_styles_default;\n__decorateClass([\n  t()\n], SlIcon.prototype, \"svg\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"src\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"label\", 2);\n__decorateClass([\n  e()\n], SlIcon.prototype, \"library\", 2);\n__decorateClass([\n  watch(\"name\"),\n  watch(\"src\"),\n  watch(\"library\")\n], SlIcon.prototype, \"setIcon\", 1);\nSlIcon = __decorateClass([\n  n(\"sl-icon\")\n], SlIcon);\n\nexport {\n  o,\n  SlIcon\n};\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\n","// src/internal/tabbable.ts\nfunction isTabbable(el) {\n  const tag = el.tagName.toLowerCase();\n  if (el.getAttribute(\"tabindex\") === \"-1\") {\n    return false;\n  }\n  if (el.hasAttribute(\"disabled\")) {\n    return false;\n  }\n  if (el.hasAttribute(\"aria-disabled\") && el.getAttribute(\"aria-disabled\") !== \"false\") {\n    return false;\n  }\n  if (tag === \"input\" && el.getAttribute(\"type\") === \"radio\" && !el.hasAttribute(\"checked\")) {\n    return false;\n  }\n  if (el.offsetParent === null) {\n    return false;\n  }\n  if (window.getComputedStyle(el).visibility === \"hidden\") {\n    return false;\n  }\n  if ((tag === \"audio\" || tag === \"video\") && el.hasAttribute(\"controls\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"tabindex\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"contenteditable\") && el.getAttribute(\"contenteditable\") !== \"false\") {\n    return true;\n  }\n  return [\"button\", \"input\", \"select\", \"textarea\", \"a\", \"audio\", \"video\", \"summary\"].includes(tag);\n}\nfunction getTabbableBoundary(root) {\n  var _a, _b;\n  const allElements = [];\n  function walk(el) {\n    if (el instanceof HTMLElement) {\n      allElements.push(el);\n      if (el.shadowRoot !== null && el.shadowRoot.mode === \"open\") {\n        walk(el.shadowRoot);\n      }\n    }\n    [...el.querySelectorAll(\"*\")].forEach((e) => walk(e));\n  }\n  walk(root);\n  const start = (_a = allElements.find((el) => isTabbable(el))) != null ? _a : null;\n  const end = (_b = allElements.reverse().find((el) => isTabbable(el))) != null ? _b : null;\n  return { start, end };\n}\n\nexport {\n  getTabbableBoundary\n};\n","import {\n  getTabbableBoundary\n} from \"./chunk.SCUNOITN.js\";\n\n// src/internal/modal.ts\nvar activeModals = [];\nvar Modal = class {\n  constructor(element) {\n    this.tabDirection = \"forward\";\n    this.element = element;\n    this.handleFocusIn = this.handleFocusIn.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleKeyUp = this.handleKeyUp.bind(this);\n  }\n  activate() {\n    activeModals.push(this.element);\n    document.addEventListener(\"focusin\", this.handleFocusIn);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"keyup\", this.handleKeyUp);\n  }\n  deactivate() {\n    activeModals = activeModals.filter((modal) => modal !== this.element);\n    document.removeEventListener(\"focusin\", this.handleFocusIn);\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"keyup\", this.handleKeyUp);\n  }\n  isActive() {\n    return activeModals[activeModals.length - 1] === this.element;\n  }\n  checkFocus() {\n    if (this.isActive()) {\n      if (!this.element.matches(\":focus-within\")) {\n        const { start, end } = getTabbableBoundary(this.element);\n        const target = this.tabDirection === \"forward\" ? start : end;\n        if (typeof (target == null ? void 0 : target.focus) === \"function\") {\n          target.focus({ preventScroll: true });\n        }\n      }\n    }\n  }\n  handleFocusIn() {\n    this.checkFocus();\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Tab\" && event.shiftKey) {\n      this.tabDirection = \"backward\";\n    }\n    requestAnimationFrame(() => this.checkFocus());\n  }\n  handleKeyUp() {\n    this.tabDirection = \"forward\";\n  }\n};\n\nexport {\n  Modal\n};\n","// src/internal/offset.ts\nfunction getOffset(element, parent) {\n  return {\n    top: Math.round(element.getBoundingClientRect().top - parent.getBoundingClientRect().top),\n    left: Math.round(element.getBoundingClientRect().left - parent.getBoundingClientRect().left)\n  };\n}\n\n// src/internal/scroll.ts\nvar locks = /* @__PURE__ */ new Set();\nfunction lockBodyScrolling(lockingEl) {\n  locks.add(lockingEl);\n  document.body.classList.add(\"sl-scroll-lock\");\n}\nfunction unlockBodyScrolling(lockingEl) {\n  locks.delete(lockingEl);\n  if (locks.size === 0) {\n    document.body.classList.remove(\"sl-scroll-lock\");\n  }\n}\nfunction scrollIntoView(element, container, direction = \"vertical\", behavior = \"smooth\") {\n  const offset = getOffset(element, container);\n  const offsetTop = offset.top + container.scrollTop;\n  const offsetLeft = offset.left + container.scrollLeft;\n  const minX = container.scrollLeft;\n  const maxX = container.scrollLeft + container.offsetWidth;\n  const minY = container.scrollTop;\n  const maxY = container.scrollTop + container.offsetHeight;\n  if (direction === \"horizontal\" || direction === \"both\") {\n    if (offsetLeft < minX) {\n      container.scrollTo({ left: offsetLeft, behavior });\n    } else if (offsetLeft + element.clientWidth > maxX) {\n      container.scrollTo({ left: offsetLeft - container.offsetWidth + element.clientWidth, behavior });\n    }\n  }\n  if (direction === \"vertical\" || direction === \"both\") {\n    if (offsetTop < minY) {\n      container.scrollTo({ top: offsetTop, behavior });\n    } else if (offsetTop + element.clientHeight > maxY) {\n      container.scrollTo({ top: offsetTop - container.offsetHeight + element.clientHeight, behavior });\n    }\n  }\n}\n\nexport {\n  lockBodyScrolling,\n  unlockBodyScrolling,\n  scrollIntoView\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/dialog/dialog.styles.ts\nvar dialog_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --width: 31rem;\n    --header-spacing: var(--sl-spacing-large);\n    --body-spacing: var(--sl-spacing-large);\n    --footer-spacing: var(--sl-spacing-large);\n\n    display: contents;\n  }\n\n  .dialog {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    z-index: var(--sl-z-index-dialog);\n  }\n\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    z-index: 2;\n    width: var(--width);\n    max-width: calc(100% - var(--sl-spacing-2x-large));\n    max-height: calc(100% - var(--sl-spacing-2x-large));\n    background-color: var(--sl-panel-background-color);\n    border-radius: var(--sl-border-radius-medium);\n    box-shadow: var(--sl-shadow-x-large);\n  }\n\n  .dialog__panel:focus {\n    outline: none;\n  }\n\n  /* Ensure there's enough vertical padding for phones that don't update vh when chrome appears (e.g. iPhone) */\n  @media screen and (max-width: 420px) {\n    .dialog__panel {\n      max-height: 80vh;\n    }\n  }\n\n  .dialog--open .dialog__panel {\n    display: flex;\n    opacity: 1;\n    transform: none;\n  }\n\n  .dialog__header {\n    flex: 0 0 auto;\n    display: flex;\n  }\n\n  .dialog__title {\n    flex: 1 1 auto;\n    font: inherit;\n    font-size: var(--sl-font-size-large);\n    line-height: var(--sl-line-height-dense);\n    padding: var(--header-spacing);\n    margin: 0;\n  }\n\n  .dialog__close {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-x-large);\n    padding: 0 var(--header-spacing);\n  }\n\n  .dialog__body {\n    flex: 1 1 auto;\n    padding: var(--body-spacing);\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: right;\n    padding: var(--footer-spacing);\n  }\n\n  .dialog__footer ::slotted(sl-button:not(:first-of-type)) {\n    margin-left: var(--sl-spacing-x-small);\n  }\n\n  .dialog:not(.dialog--has-footer) .dialog__footer {\n    display: none;\n  }\n\n  .dialog__overlay {\n    position: fixed;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-color: var(--sl-overlay-background-color);\n  }\n`;\n\nexport {\n  dialog_styles_default\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/internal/animate.ts\nfunction animateTo(el, keyframes, options) {\n  return new Promise((resolve) => {\n    if ((options == null ? void 0 : options.duration) === Infinity) {\n      throw new Error(\"Promise-based animations must be finite.\");\n    }\n    const animation = el.animate(keyframes, __spreadProps(__spreadValues({}, options), {\n      duration: prefersReducedMotion() ? 0 : options.duration\n    }));\n    animation.addEventListener(\"cancel\", resolve, { once: true });\n    animation.addEventListener(\"finish\", resolve, { once: true });\n  });\n}\nfunction parseDuration(delay) {\n  delay = delay.toString().toLowerCase();\n  if (delay.indexOf(\"ms\") > -1) {\n    return parseFloat(delay);\n  }\n  if (delay.indexOf(\"s\") > -1) {\n    return parseFloat(delay) * 1e3;\n  }\n  return parseFloat(delay);\n}\nfunction prefersReducedMotion() {\n  const query = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n  return query.matches;\n}\nfunction stopAnimations(el) {\n  return Promise.all(el.getAnimations().map((animation) => {\n    return new Promise((resolve) => {\n      const handleAnimationEvent = requestAnimationFrame(resolve);\n      animation.addEventListener(\"cancel\", () => handleAnimationEvent, { once: true });\n      animation.addEventListener(\"finish\", () => handleAnimationEvent, { once: true });\n      animation.cancel();\n    });\n  }));\n}\nfunction shimKeyframesHeightAuto(keyframes, calculatedHeight) {\n  return keyframes.map((keyframe) => __spreadProps(__spreadValues({}, keyframe), {\n    height: keyframe.height === \"auto\" ? `${calculatedHeight}px` : keyframe.height\n  }));\n}\n\nexport {\n  animateTo,\n  parseDuration,\n  stopAnimations,\n  shimKeyframesHeightAuto\n};\n","import {\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/utilities/animation-registry.ts\nvar defaultAnimationRegistry = /* @__PURE__ */ new Map();\nvar customAnimationRegistry = /* @__PURE__ */ new WeakMap();\nfunction ensureAnimation(animation) {\n  return animation != null ? animation : { keyframes: [], options: { duration: 0 } };\n}\nfunction setDefaultAnimation(animationName, animation) {\n  defaultAnimationRegistry.set(animationName, ensureAnimation(animation));\n}\nfunction setAnimation(el, animationName, animation) {\n  customAnimationRegistry.set(el, __spreadProps(__spreadValues({}, customAnimationRegistry.get(el)), { [animationName]: ensureAnimation(animation) }));\n}\nfunction getAnimation(el, animationName) {\n  const customAnimation = customAnimationRegistry.get(el);\n  if (customAnimation == null ? void 0 : customAnimation[animationName]) {\n    return customAnimation[animationName];\n  }\n  const defaultAnimation = defaultAnimationRegistry.get(animationName);\n  if (defaultAnimation) {\n    return defaultAnimation;\n  }\n  return {\n    keyframes: [],\n    options: { duration: 0 }\n  };\n}\n\nexport {\n  setDefaultAnimation,\n  setAnimation,\n  getAnimation\n};\n","import {\n  Modal\n} from \"./chunk.BQLXYG6H.js\";\nimport {\n  lockBodyScrolling,\n  unlockBodyScrolling\n} from \"./chunk.H262HIXG.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  dialog_styles_default\n} from \"./chunk.OKBZWQHW.js\";\nimport {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/dialog/dialog.ts\nvar SlDialog = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"footer\");\n    this.localize = new LocalizeController(this);\n    this.open = false;\n    this.label = \"\";\n    this.noHeader = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.modal = new Modal(this);\n  }\n  firstUpdated() {\n    this.dialog.hidden = !this.open;\n    if (this.open) {\n      this.modal.activate();\n      lockBodyScrolling(this);\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    unlockBodyScrolling(this);\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  requestClose(source) {\n    const slRequestClose = emit(this, \"sl-request-close\", {\n      cancelable: true,\n      detail: { source }\n    });\n    if (slRequestClose.defaultPrevented) {\n      const animation = getAnimation(this, \"dialog.denyClose\");\n      animateTo(this.panel, animation.keyframes, animation.options);\n      return;\n    }\n    this.hide();\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Escape\") {\n      event.stopPropagation();\n      this.requestClose(\"keyboard\");\n    }\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      this.originalTrigger = document.activeElement;\n      this.modal.activate();\n      lockBodyScrolling(this);\n      const autoFocusTarget = this.querySelector(\"[autofocus]\");\n      if (autoFocusTarget) {\n        autoFocusTarget.removeAttribute(\"autofocus\");\n      }\n      await Promise.all([stopAnimations(this.dialog), stopAnimations(this.overlay)]);\n      this.dialog.hidden = false;\n      requestAnimationFrame(() => {\n        const slInitialFocus = emit(this, \"sl-initial-focus\", { cancelable: true });\n        if (!slInitialFocus.defaultPrevented) {\n          if (autoFocusTarget) {\n            autoFocusTarget.focus({ preventScroll: true });\n          } else {\n            this.panel.focus({ preventScroll: true });\n          }\n        }\n        if (autoFocusTarget) {\n          autoFocusTarget.setAttribute(\"autofocus\", \"\");\n        }\n      });\n      const panelAnimation = getAnimation(this, \"dialog.show\");\n      const overlayAnimation = getAnimation(this, \"dialog.overlay.show\");\n      await Promise.all([\n        animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\n        animateTo(this.overlay, overlayAnimation.keyframes, overlayAnimation.options)\n      ]);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      this.modal.deactivate();\n      await Promise.all([stopAnimations(this.dialog), stopAnimations(this.overlay)]);\n      const panelAnimation = getAnimation(this, \"dialog.hide\");\n      const overlayAnimation = getAnimation(this, \"dialog.overlay.hide\");\n      await Promise.all([\n        animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\n        animateTo(this.overlay, overlayAnimation.keyframes, overlayAnimation.options)\n      ]);\n      this.dialog.hidden = true;\n      unlockBodyScrolling(this);\n      const trigger = this.originalTrigger;\n      if (typeof (trigger == null ? void 0 : trigger.focus) === \"function\") {\n        setTimeout(() => trigger.focus());\n      }\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      dialog: true,\n      \"dialog--open\": this.open,\n      \"dialog--has-footer\": this.hasSlotController.test(\"footer\")\n    })}\n        @keydown=${this.handleKeyDown}\n      >\n        <div part=\"overlay\" class=\"dialog__overlay\" @click=${() => this.requestClose(\"overlay\")} tabindex=\"-1\"></div>\n\n        <div\n          part=\"panel\"\n          class=\"dialog__panel\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          aria-hidden=${this.open ? \"false\" : \"true\"}\n          aria-label=${l(this.noHeader ? this.label : void 0)}\n          aria-labelledby=${l(!this.noHeader ? \"title\" : void 0)}\n          tabindex=\"0\"\n        >\n          ${!this.noHeader ? $`\n                <header part=\"header\" class=\"dialog__header\">\n                  <h2 part=\"title\" class=\"dialog__title\" id=\"title\">\n                    <slot name=\"label\"> ${this.label.length > 0 ? this.label : String.fromCharCode(65279)} </slot>\n                  </h2>\n                  <sl-icon-button\n                    part=\"close-button\"\n                    exportparts=\"base:close-button__base\"\n                    class=\"dialog__close\"\n                    name=\"x\"\n                    label=${this.localize.term(\"close\")}\n                    library=\"system\"\n                    @click=\"${() => this.requestClose(\"close-button\")}\"\n                  ></sl-icon-button>\n                </header>\n              ` : \"\"}\n\n          <div part=\"body\" class=\"dialog__body\">\n            <slot></slot>\n          </div>\n\n          <footer part=\"footer\" class=\"dialog__footer\">\n            <slot name=\"footer\"></slot>\n          </footer>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDialog.styles = dialog_styles_default;\n__decorateClass([\n  i(\".dialog\")\n], SlDialog.prototype, \"dialog\", 2);\n__decorateClass([\n  i(\".dialog__panel\")\n], SlDialog.prototype, \"panel\", 2);\n__decorateClass([\n  i(\".dialog__overlay\")\n], SlDialog.prototype, \"overlay\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDialog.prototype, \"open\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlDialog.prototype, \"label\", 2);\n__decorateClass([\n  e({ attribute: \"no-header\", type: Boolean, reflect: true })\n], SlDialog.prototype, \"noHeader\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDialog.prototype, \"handleOpenChange\", 1);\nSlDialog = __decorateClass([\n  n(\"sl-dialog\")\n], SlDialog);\nsetDefaultAnimation(\"dialog.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dialog.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dialog.denyClose\", {\n  keyframes: [{ transform: \"scale(1)\" }, { transform: \"scale(1.02)\" }, { transform: \"scale(1)\" }],\n  options: { duration: 250 }\n});\nsetDefaultAnimation(\"dialog.overlay.show\", {\n  keyframes: [{ opacity: 0 }, { opacity: 1 }],\n  options: { duration: 250 }\n});\nsetDefaultAnimation(\"dialog.overlay.hide\", {\n  keyframes: [{ opacity: 1 }, { opacity: 0 }],\n  options: { duration: 250 }\n});\n\nexport {\n  SlDialog\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/icon-button/icon-button.styles.ts\nvar icon_button_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .icon-button {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    background: none;\n    border: none;\n    border-radius: var(--sl-border-radius-medium);\n    font-size: inherit;\n    color: var(--sl-color-neutral-600);\n    padding: var(--sl-spacing-x-small);\n    cursor: pointer;\n    transition: var(--sl-transition-medium) color;\n    -webkit-appearance: none;\n  }\n\n  .icon-button:hover:not(.icon-button--disabled),\n  .icon-button:focus:not(.icon-button--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .icon-button:active:not(.icon-button--disabled) {\n    color: var(--sl-color-primary-700);\n  }\n\n  .icon-button:focus {\n    outline: none;\n  }\n\n  .icon-button--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .icon-button${focusVisibleSelector} {\n    box-shadow: var(--sl-focus-ring);\n  }\n`;\n\nexport {\n  icon_button_styles_default\n};\n","import {\n  icon_button_styles_default\n} from \"./chunk.FE67GRYM.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/icon-button/icon-button.ts\nvar SlIconButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n    this.disabled = false;\n  }\n  render() {\n    const isLink = this.href ? true : false;\n    const interior = $`\n      <sl-icon\n        name=${l(this.name)}\n        library=${l(this.library)}\n        src=${l(this.src)}\n        aria-hidden=\"true\"\n      ></sl-icon>\n    `;\n    return isLink ? $`\n          <a\n            part=\"base\"\n            class=\"icon-button\"\n            href=${l(this.href)}\n            target=${l(this.target)}\n            download=${l(this.download)}\n            rel=${l(this.target ? \"noreferrer noopener\" : void 0)}\n            role=\"button\"\n            aria-disabled=${this.disabled ? \"true\" : \"false\"}\n            aria-label=\"${this.label}\"\n            tabindex=${this.disabled ? \"-1\" : \"0\"}\n          >\n            ${interior}\n          </a>\n        ` : $`\n          <button\n            part=\"base\"\n            class=${o({\n      \"icon-button\": true,\n      \"icon-button--disabled\": this.disabled\n    })}\n            ?disabled=${this.disabled}\n            type=\"button\"\n            aria-label=${this.label}\n          >\n            ${interior}\n          </button>\n        `;\n  }\n};\nSlIconButton.styles = icon_button_styles_default;\n__decorateClass([\n  i(\".icon-button\")\n], SlIconButton.prototype, \"button\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"library\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"src\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"href\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"target\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"download\", 2);\n__decorateClass([\n  e()\n], SlIconButton.prototype, \"label\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlIconButton.prototype, \"disabled\", 2);\nSlIconButton = __decorateClass([\n  n(\"sl-icon-button\")\n], SlIconButton);\n\nexport {\n  SlIconButton\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/menu-item/menu-item.styles.ts\nvar menu_item_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .menu-item {\n    position: relative;\n    display: flex;\n    align-items: stretch;\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-medium);\n    font-weight: var(--sl-font-weight-normal);\n    line-height: var(--sl-line-height-normal);\n    letter-spacing: var(--sl-letter-spacing-normal);\n    text-align: left;\n    color: var(--sl-color-neutral-700);\n    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);\n    transition: var(--sl-transition-fast) fill;\n    user-select: none;\n    white-space: nowrap;\n    cursor: pointer;\n  }\n\n  .menu-item.menu-item--disabled {\n    outline: none;\n    color: var(--sl-color-neutral-400);\n    cursor: not-allowed;\n  }\n\n  .menu-item .menu-item__label {\n    flex: 1 1 auto;\n  }\n\n  .menu-item .menu-item__prefix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .menu-item .menu-item__prefix ::slotted(*) {\n    margin-right: var(--sl-spacing-x-small);\n  }\n\n  .menu-item .menu-item__suffix {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .menu-item .menu-item__suffix ::slotted(*) {\n    margin-left: var(--sl-spacing-x-small);\n  }\n\n  :host(:focus) {\n    outline: none;\n  }\n\n  :host(:hover:not([aria-disabled='true'])) .menu-item,\n  :host(${focusVisibleSelector}:not(.sl-focus-invisible):not([aria-disabled='true'])) .menu-item {\n    outline: none;\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .menu-item .menu-item__check,\n  .menu-item .menu-item__chevron {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 1.5em;\n    visibility: hidden;\n  }\n\n  .menu-item--checked .menu-item__check,\n  .menu-item--has-submenu .menu-item__chevron {\n    visibility: visible;\n  }\n`;\n\nexport {\n  menu_item_styles_default\n};\n","import {\n  menu_item_styles_default\n} from \"./chunk.PWMZHGCP.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/menu-item/menu-item.ts\nvar SlMenuItem = class extends s {\n  constructor() {\n    super(...arguments);\n    this.checked = false;\n    this.value = \"\";\n    this.disabled = false;\n  }\n  firstUpdated() {\n    this.setAttribute(\"role\", \"menuitem\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      \"menu-item\": true,\n      \"menu-item--checked\": this.checked,\n      \"menu-item--disabled\": this.disabled,\n      \"menu-item--has-submenu\": false\n    })}\n      >\n        <span class=\"menu-item__check\">\n          <sl-icon name=\"check-lg\" library=\"default\" aria-hidden=\"true\"></sl-icon>\n        </span>\n\n        <span part=\"prefix\" class=\"menu-item__prefix\">\n          <slot name=\"prefix\"></slot>\n        </span>\n\n        <span part=\"label\" class=\"menu-item__label\">\n          <slot></slot>\n        </span>\n\n        <span part=\"suffix\" class=\"menu-item__suffix\">\n          <slot name=\"suffix\"></slot>\n        </span>\n\n        <span class=\"menu-item__chevron\">\n          <sl-icon name=\"chevron-right\" library=\"default\" aria-hidden=\"true\"></sl-icon>\n        </span>\n      </div>\n    `;\n  }\n};\nSlMenuItem.styles = menu_item_styles_default;\n__decorateClass([\n  i(\".menu-item\")\n], SlMenuItem.prototype, \"menuItem\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlMenuItem.prototype, \"checked\", 2);\n__decorateClass([\n  e()\n], SlMenuItem.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlMenuItem.prototype, \"disabled\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlMenuItem.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\")\n], SlMenuItem.prototype, \"handleDisabledChange\", 1);\nSlMenuItem = __decorateClass([\n  n(\"sl-menu-item\")\n], SlMenuItem);\n\nexport {\n  SlMenuItem\n};\n","import {\n  form_control_styles_default\n} from \"./chunk.LAAROFAU.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/select/select.styles.ts\nvar select_styles_default = r`\n  ${component_styles_default}\n  ${form_control_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .select {\n    display: block;\n  }\n\n  .select__control {\n    display: inline-flex;\n    align-items: center;\n    justify-content: start;\n    position: relative;\n    width: 100%;\n    font-family: var(--sl-input-font-family);\n    font-weight: var(--sl-input-font-weight);\n    letter-spacing: var(--sl-input-letter-spacing);\n    vertical-align: middle;\n    overflow: hidden;\n    transition: var(--sl-transition-fast) color, var(--sl-transition-fast) border, var(--sl-transition-fast) box-shadow;\n    cursor: pointer;\n  }\n\n  .select__menu {\n    max-height: 50vh;\n    overflow: auto;\n  }\n\n  /* Standard selects */\n  .select--standard .select__control {\n    background-color: var(--sl-input-background-color);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    color: var(--sl-input-color);\n  }\n\n  .select--standard:not(.select--disabled) .select__control:hover {\n    background-color: var(--sl-input-background-color-hover);\n    border-color: var(--sl-input-border-color-hover);\n    color: var(--sl-input-color-hover);\n  }\n\n  .select--standard.select--focused:not(.select--disabled) .select__control {\n    background-color: var(--sl-input-background-color-focus);\n    border-color: var(--sl-input-border-color-focus);\n    box-shadow: var(--sl-focus-ring);\n    outline: none;\n    color: var(--sl-input-color-focus);\n  }\n\n  .select--standard.select--disabled .select__control {\n    background-color: var(--sl-input-background-color-disabled);\n    border-color: var(--sl-input-border-color-disabled);\n    color: var(--sl-input-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n    outline: none;\n  }\n\n  /* Filled selects */\n  .select--filled .select__control {\n    border: none;\n    background-color: var(--sl-input-filled-background-color);\n    color: var(--sl-input-color);\n  }\n\n  .select--filled:hover:not(.select--disabled) .select__control {\n    background-color: var(--sl-input-filled-background-color-hover);\n  }\n\n  .select--filled.select--focused:not(.select--disabled) .select__control {\n    outline: none;\n    background-color: var(--sl-input-filled-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .select--filled.select--disabled .select__control {\n    background-color: var(--sl-input-filled-background-color-disabled);\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .select--disabled .select__tags,\n  .select--disabled .select__clear {\n    pointer-events: none;\n  }\n\n  .select__prefix {\n    display: inline-flex;\n    align-items: center;\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select__label {\n    flex: 1 1 auto;\n    display: flex;\n    align-items: center;\n    user-select: none;\n    overflow-x: auto;\n    overflow-y: hidden;\n    white-space: nowrap;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .select__label::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .select__clear {\n    flex: 0 0 auto;\n    display: inline-flex;\n    align-items: center;\n    width: 1.25em;\n    font-size: inherit;\n    color: var(--sl-input-icon-color);\n    border: none;\n    background: none;\n    padding: 0;\n    transition: var(--sl-transition-fast) color;\n    cursor: pointer;\n  }\n\n  .select__clear:hover {\n    color: var(--sl-input-icon-color-hover);\n  }\n\n  .select__suffix {\n    display: inline-flex;\n    align-items: center;\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select__icon {\n    flex: 0 0 auto;\n    display: inline-flex;\n    transition: var(--sl-transition-medium) transform ease;\n  }\n\n  .select--open .select__icon {\n    transform: rotate(-180deg);\n  }\n\n  /* Placeholder */\n  .select--placeholder-visible .select__label {\n    color: var(--sl-input-placeholder-color);\n  }\n\n  .select--disabled.select--placeholder-visible .select__label {\n    color: var(--sl-input-placeholder-color-disabled);\n  }\n\n  /* Tags */\n  .select__tags {\n    display: inline-flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: left;\n    margin-left: var(--sl-spacing-2x-small);\n  }\n\n  /* Hidden input (for form control validation to show) */\n  .select__hidden-select {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    overflow: hidden;\n    white-space: nowrap;\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  /* Small */\n  .select--small .select__control {\n    border-radius: var(--sl-input-border-radius-small);\n    font-size: var(--sl-input-font-size-small);\n    min-height: var(--sl-input-height-small);\n  }\n\n  .select--small .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__label {\n    margin: 0 var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__clear {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__icon {\n    margin-right: var(--sl-input-spacing-small);\n  }\n\n  .select--small .select__tags {\n    padding-bottom: 2px;\n  }\n\n  .select--small .select__tags sl-tag {\n    padding-top: 2px;\n  }\n\n  .select--small .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--small.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /* Medium */\n  .select--medium .select__control {\n    border-radius: var(--sl-input-border-radius-medium);\n    font-size: var(--sl-input-font-size-medium);\n    min-height: var(--sl-input-height-medium);\n  }\n\n  .select--medium .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__label {\n    margin: 0 var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__clear {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__icon {\n    margin-right: var(--sl-input-spacing-medium);\n  }\n\n  .select--medium .select__tags {\n    padding-bottom: 3px;\n  }\n\n  .select--medium .select__tags sl-tag {\n    padding-top: 3px;\n  }\n\n  .select--medium .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--medium.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /* Large */\n  .select--large .select__control {\n    border-radius: var(--sl-input-border-radius-large);\n    font-size: var(--sl-input-font-size-large);\n    min-height: var(--sl-input-height-large);\n  }\n\n  .select--large .select__prefix ::slotted(*) {\n    margin-left: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__label {\n    margin: 0 var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__clear {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__suffix ::slotted(*) {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__icon {\n    margin-right: var(--sl-input-spacing-large);\n  }\n\n  .select--large .select__tags {\n    padding-bottom: 4px;\n  }\n  .select--large .select__tags sl-tag {\n    padding-top: 4px;\n  }\n\n  .select--large .select__tags sl-tag:not(:last-of-type) {\n    margin-right: var(--sl-spacing-2x-small);\n  }\n\n  .select--large.select--has-tags .select__label {\n    margin-left: 0;\n  }\n\n  /*\n   * Pill modifier\n   */\n  .select--pill.select--small .select__control {\n    border-radius: var(--sl-input-height-small);\n  }\n\n  .select--pill.select--medium .select__control {\n    border-radius: var(--sl-input-height-medium);\n  }\n\n  .select--pill.select--large .select__control {\n    border-radius: var(--sl-input-height-large);\n  }\n`;\n\nexport {\n  select_styles_default\n};\n","import {\n  select_styles_default\n} from \"./chunk.24E5KUVH.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController,\n  getTextContent\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/select/select.ts\nvar SlSelect = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this);\n    this.hasSlotController = new HasSlotController(this, \"help-text\", \"label\");\n    this.localize = new LocalizeController(this);\n    this.hasFocus = false;\n    this.isOpen = false;\n    this.displayLabel = \"\";\n    this.displayTags = [];\n    this.multiple = false;\n    this.maxTagsVisible = 3;\n    this.disabled = false;\n    this.name = \"\";\n    this.placeholder = \"\";\n    this.size = \"medium\";\n    this.hoist = false;\n    this.value = \"\";\n    this.filled = false;\n    this.pill = false;\n    this.label = \"\";\n    this.placement = \"bottom\";\n    this.helpText = \"\";\n    this.required = false;\n    this.clearable = false;\n    this.invalid = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleMenuSlotChange = this.handleMenuSlotChange.bind(this);\n    this.resizeObserver = new ResizeObserver(() => this.resizeMenu());\n    this.updateComplete.then(() => {\n      this.resizeObserver.observe(this);\n      this.syncItemsFromValue();\n    });\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.resizeObserver.unobserve(this);\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  getItemLabel(item) {\n    const slot = item.shadowRoot.querySelector(\"slot:not([name])\");\n    return getTextContent(slot);\n  }\n  getItems() {\n    return [...this.querySelectorAll(\"sl-menu-item\")];\n  }\n  getValueAsArray() {\n    if (this.multiple && this.value === \"\") {\n      return [];\n    }\n    return Array.isArray(this.value) ? this.value : [this.value];\n  }\n  focus(options) {\n    this.control.focus(options);\n  }\n  blur() {\n    this.control.blur();\n  }\n  handleBlur() {\n    if (!this.isOpen) {\n      this.hasFocus = false;\n      emit(this, \"sl-blur\");\n    }\n  }\n  handleClearClick(event) {\n    event.stopPropagation();\n    this.value = this.multiple ? [] : \"\";\n    emit(this, \"sl-clear\");\n    this.syncItemsFromValue();\n  }\n  handleDisabledChange() {\n    if (this.disabled && this.isOpen) {\n      this.dropdown.hide();\n    }\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    if (!this.hasFocus) {\n      this.hasFocus = true;\n      emit(this, \"sl-focus\");\n    }\n  }\n  handleKeyDown(event) {\n    const target = event.target;\n    const items = this.getItems();\n    const firstItem = items[0];\n    const lastItem = items[items.length - 1];\n    if (target.tagName.toLowerCase() === \"sl-tag\") {\n      return;\n    }\n    if (event.key === \"Tab\") {\n      if (this.isOpen) {\n        this.dropdown.hide();\n      }\n      return;\n    }\n    if ([\"ArrowDown\", \"ArrowUp\"].includes(event.key)) {\n      event.preventDefault();\n      if (!this.isOpen) {\n        this.dropdown.show();\n      }\n      if (event.key === \"ArrowDown\") {\n        this.menu.setCurrentItem(firstItem);\n        firstItem.focus();\n        return;\n      }\n      if (event.key === \"ArrowUp\") {\n        this.menu.setCurrentItem(lastItem);\n        lastItem.focus();\n        return;\n      }\n    }\n    if (event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (!this.isOpen && event.key.length === 1) {\n      event.stopPropagation();\n      event.preventDefault();\n      this.dropdown.show();\n      this.menu.typeToSelect(event);\n    }\n  }\n  handleLabelClick() {\n    this.focus();\n  }\n  handleMenuSelect(event) {\n    const item = event.detail.item;\n    if (this.multiple) {\n      this.value = this.value.includes(item.value) ? this.value.filter((v) => v !== item.value) : [...this.value, item.value];\n    } else {\n      this.value = item.value;\n    }\n    this.syncItemsFromValue();\n  }\n  handleMenuShow() {\n    this.resizeMenu();\n    this.isOpen = true;\n  }\n  handleMenuHide() {\n    this.isOpen = false;\n    this.control.focus();\n  }\n  handleMultipleChange() {\n    var _a;\n    const value = this.getValueAsArray();\n    this.value = this.multiple ? value : (_a = value[0]) != null ? _a : \"\";\n    this.syncItemsFromValue();\n  }\n  async handleMenuSlotChange() {\n    const items = this.getItems();\n    const values = [];\n    items.forEach((item) => {\n      if (values.includes(item.value)) {\n        console.error(`Duplicate value found in <sl-select> menu item: '${item.value}'`, item);\n      }\n      values.push(item.value);\n    });\n    await Promise.all(items.map((item) => item.render)).then(() => this.syncItemsFromValue());\n  }\n  handleTagInteraction(event) {\n    const path = event.composedPath();\n    const clearButton = path.find((el) => {\n      if (el instanceof HTMLElement) {\n        const element = el;\n        return element.classList.contains(\"tag__remove\");\n      }\n      return false;\n    });\n    if (clearButton) {\n      event.stopPropagation();\n    }\n  }\n  async handleValueChange() {\n    this.syncItemsFromValue();\n    await this.updateComplete;\n    this.invalid = !this.input.checkValidity();\n    emit(this, \"sl-change\");\n  }\n  resizeMenu() {\n    this.menu.style.width = `${this.control.clientWidth}px`;\n    this.dropdown.reposition();\n  }\n  syncItemsFromValue() {\n    const items = this.getItems();\n    const value = this.getValueAsArray();\n    items.map((item) => item.checked = value.includes(item.value));\n    if (this.multiple) {\n      const checkedItems = items.filter((item) => value.includes(item.value));\n      this.displayLabel = checkedItems.length > 0 ? this.getItemLabel(checkedItems[0]) : \"\";\n      this.displayTags = checkedItems.map((item) => {\n        return $`\n          <sl-tag\n            part=\"tag\"\n            exportparts=\"\n              base:tag__base,\n              content:tag__content,\n              remove-button:tag__remove-button\n            \"\n            variant=\"neutral\"\n            size=${this.size}\n            ?pill=${this.pill}\n            removable\n            @click=${this.handleTagInteraction}\n            @keydown=${this.handleTagInteraction}\n            @sl-remove=${(event) => {\n          event.stopPropagation();\n          if (!this.disabled) {\n            item.checked = false;\n            this.syncValueFromItems();\n          }\n        }}\n          >\n            ${this.getItemLabel(item)}\n          </sl-tag>\n        `;\n      });\n      if (this.maxTagsVisible > 0 && this.displayTags.length > this.maxTagsVisible) {\n        const total = this.displayTags.length;\n        this.displayLabel = \"\";\n        this.displayTags = this.displayTags.slice(0, this.maxTagsVisible);\n        this.displayTags.push($`\n          <sl-tag\n            part=\"tag\"\n            exportparts=\"\n              base:tag__base,\n              content:tag__content,\n              remove-button:tag__remove-button\n            \"\n            variant=\"neutral\"\n            size=${this.size}\n          >\n            +${total - this.maxTagsVisible}\n          </sl-tag>\n        `);\n      }\n    } else {\n      const checkedItem = items.find((item) => item.value === value[0]);\n      this.displayLabel = checkedItem ? this.getItemLabel(checkedItem) : \"\";\n      this.displayTags = [];\n    }\n  }\n  syncValueFromItems() {\n    const items = this.getItems();\n    const checkedItems = items.filter((item) => item.checked);\n    const checkedValues = checkedItems.map((item) => item.value);\n    if (this.multiple) {\n      this.value = this.value.filter((val) => checkedValues.includes(val));\n    } else {\n      this.value = checkedValues.length > 0 ? checkedValues[0] : \"\";\n    }\n  }\n  render() {\n    const hasLabelSlot = this.hasSlotController.test(\"label\");\n    const hasHelpTextSlot = this.hasSlotController.test(\"help-text\");\n    const hasSelection = this.multiple ? this.value.length > 0 : this.value !== \"\";\n    const hasLabel = this.label ? true : !!hasLabelSlot;\n    const hasHelpText = this.helpText ? true : !!hasHelpTextSlot;\n    return $`\n      <div\n        part=\"form-control\"\n        class=${o({\n      \"form-control\": true,\n      \"form-control--small\": this.size === \"small\",\n      \"form-control--medium\": this.size === \"medium\",\n      \"form-control--large\": this.size === \"large\",\n      \"form-control--has-label\": hasLabel,\n      \"form-control--has-help-text\": hasHelpText\n    })}\n      >\n        <label\n          part=\"form-control-label\"\n          class=\"form-control__label\"\n          for=\"input\"\n          aria-hidden=${hasLabel ? \"false\" : \"true\"}\n          @click=${this.handleLabelClick}\n        >\n          <slot name=\"label\">${this.label}</slot>\n        </label>\n\n        <div part=\"form-control-input\" class=\"form-control-input\">\n          <sl-dropdown\n            part=\"base\"\n            .hoist=${this.hoist}\n            .placement=${this.placement}\n            .stayOpenOnSelect=${this.multiple}\n            .containingElement=${this}\n            ?disabled=${this.disabled}\n            class=${o({\n      select: true,\n      \"select--open\": this.isOpen,\n      \"select--empty\": this.value.length === 0,\n      \"select--focused\": this.hasFocus,\n      \"select--clearable\": this.clearable,\n      \"select--disabled\": this.disabled,\n      \"select--multiple\": this.multiple,\n      \"select--standard\": !this.filled,\n      \"select--filled\": this.filled,\n      \"select--has-tags\": this.multiple && this.displayTags.length > 0,\n      \"select--placeholder-visible\": this.displayLabel === \"\",\n      \"select--small\": this.size === \"small\",\n      \"select--medium\": this.size === \"medium\",\n      \"select--large\": this.size === \"large\",\n      \"select--pill\": this.pill,\n      \"select--invalid\": this.invalid\n    })}\n            @sl-show=${this.handleMenuShow}\n            @sl-hide=${this.handleMenuHide}\n          >\n            <div\n              part=\"control\"\n              slot=\"trigger\"\n              id=\"input\"\n              class=\"select__control\"\n              role=\"combobox\"\n              aria-describedby=\"help-text\"\n              aria-haspopup=\"true\"\n              aria-disabled=${this.disabled ? \"true\" : \"false\"}\n              aria-expanded=${this.isOpen ? \"true\" : \"false\"}\n              aria-controls=\"menu\"\n              tabindex=${this.disabled ? \"-1\" : \"0\"}\n              @blur=${this.handleBlur}\n              @focus=${this.handleFocus}\n              @keydown=${this.handleKeyDown}\n            >\n              <span part=\"prefix\" class=\"select__prefix\">\n                <slot name=\"prefix\"></slot>\n              </span>\n\n              <div part=\"display-label\" class=\"select__label\">\n                ${this.displayTags.length > 0 ? $` <span part=\"tags\" class=\"select__tags\"> ${this.displayTags} </span> ` : this.displayLabel.length > 0 ? this.displayLabel : this.placeholder}\n              </div>\n\n              ${this.clearable && hasSelection ? $`\n                    <button\n                      part=\"clear-button\"\n                      class=\"select__clear\"\n                      @click=${this.handleClearClick}\n                      aria-label=${this.localize.term(\"clearEntry\")}\n                      tabindex=\"-1\"\n                    >\n                      <slot name=\"clear-icon\">\n                        <sl-icon name=\"x-circle-fill\" library=\"system\"></sl-icon>\n                      </slot>\n                    </button>\n                  ` : \"\"}\n\n              <span part=\"suffix\" class=\"select__suffix\">\n                <slot name=\"suffix\"></slot>\n              </span>\n\n              <span part=\"icon\" class=\"select__icon\" aria-hidden=\"true\">\n                <sl-icon name=\"chevron-down\" library=\"system\"></sl-icon>\n              </span>\n\n              <!-- The hidden input tricks the browser's built-in validation so it works as expected. We use an input\n              instead of a select because, otherwise, iOS will show a list of options during validation. The focus\n              handler is used to move focus to the primary control when it's marked invalid.  -->\n              <input\n                class=\"select__hidden-select\"\n                aria-hidden=\"true\"\n                ?required=${this.required}\n                .value=${hasSelection ? \"1\" : \"\"}\n                tabindex=\"-1\"\n                @focus=${() => this.control.focus()}\n              />\n            </div>\n\n            <sl-menu part=\"menu\" id=\"menu\" class=\"select__menu\" @sl-select=${this.handleMenuSelect}>\n              <slot @slotchange=${this.handleMenuSlotChange}></slot>\n            </sl-menu>\n          </sl-dropdown>\n        </div>\n\n        <div\n          part=\"form-control-help-text\"\n          id=\"help-text\"\n          class=\"form-control__help-text\"\n          aria-hidden=${hasHelpText ? \"false\" : \"true\"}\n        >\n          <slot name=\"help-text\">${this.helpText}</slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlSelect.styles = select_styles_default;\n__decorateClass([\n  i(\".select\")\n], SlSelect.prototype, \"dropdown\", 2);\n__decorateClass([\n  i(\".select__control\")\n], SlSelect.prototype, \"control\", 2);\n__decorateClass([\n  i(\".select__hidden-select\")\n], SlSelect.prototype, \"input\", 2);\n__decorateClass([\n  i(\".select__menu\")\n], SlSelect.prototype, \"menu\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"hasFocus\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"isOpen\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"displayLabel\", 2);\n__decorateClass([\n  t()\n], SlSelect.prototype, \"displayTags\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"multiple\", 2);\n__decorateClass([\n  e({ attribute: \"max-tags-visible\", type: Number })\n], SlSelect.prototype, \"maxTagsVisible\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"placeholder\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlSelect.prototype, \"hoist\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"filled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"pill\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"label\", 2);\n__decorateClass([\n  e()\n], SlSelect.prototype, \"placement\", 2);\n__decorateClass([\n  e({ attribute: \"help-text\" })\n], SlSelect.prototype, \"helpText\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlSelect.prototype, \"clearable\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSelect.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlSelect.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"multiple\")\n], SlSelect.prototype, \"handleMultipleChange\", 1);\n__decorateClass([\n  watch(\"value\", { waitUntilFirstUpdate: true })\n], SlSelect.prototype, \"handleValueChange\", 1);\nSlSelect = __decorateClass([\n  n(\"sl-select\")\n], SlSelect);\n\nexport {\n  SlSelect\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tag/tag.styles.ts\nvar tag_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .tag {\n    display: flex;\n    align-items: center;\n    border: solid 1px;\n    line-height: 1;\n    white-space: nowrap;\n    user-select: none;\n    cursor: default;\n  }\n\n  .tag__remove::part(base) {\n    color: inherit;\n    padding: 0;\n  }\n\n  /*\n   * Variant modifiers\n   */\n\n  .tag--primary {\n    background-color: var(--sl-color-primary-50);\n    border-color: var(--sl-color-primary-200);\n    color: var(--sl-color-primary-800);\n  }\n\n  .tag--success {\n    background-color: var(--sl-color-success-50);\n    border-color: var(--sl-color-success-200);\n    color: var(--sl-color-success-800);\n  }\n\n  .tag--neutral {\n    background-color: var(--sl-color-neutral-50);\n    border-color: var(--sl-color-neutral-200);\n    color: var(--sl-color-neutral-800);\n  }\n\n  .tag--warning {\n    background-color: var(--sl-color-warning-50);\n    border-color: var(--sl-color-warning-200);\n    color: var(--sl-color-warning-800);\n  }\n\n  .tag--danger {\n    background-color: var(--sl-color-danger-50);\n    border-color: var(--sl-color-danger-200);\n    color: var(--sl-color-danger-800);\n  }\n\n  /*\n   * Size modifiers\n   */\n\n  .tag--small {\n    font-size: var(--sl-button-font-size-small);\n    height: calc(var(--sl-input-height-small) * 0.8);\n    line-height: calc(var(--sl-input-height-small) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-small);\n    padding: 0 var(--sl-spacing-x-small);\n  }\n\n  .tag--small .tag__remove {\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-3x-small));\n  }\n\n  .tag--medium {\n    font-size: var(--sl-button-font-size-medium);\n    height: calc(var(--sl-input-height-medium) * 0.8);\n    line-height: calc(var(--sl-input-height-medium) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-medium);\n    padding: 0 var(--sl-spacing-small);\n  }\n\n  .tag__remove {\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-2x-small));\n  }\n\n  .tag--large {\n    font-size: var(--sl-button-font-size-large);\n    height: calc(var(--sl-input-height-large) * 0.8);\n    line-height: calc(var(--sl-input-height-large) - var(--sl-input-border-width) * 2);\n    border-radius: var(--sl-input-border-radius-large);\n    padding: 0 var(--sl-spacing-medium);\n  }\n\n  .tag__remove {\n    font-size: 1.4em;\n    margin-left: var(--sl-spacing-2x-small);\n    margin-right: calc(-1 * var(--sl-spacing-x-small));\n  }\n\n  /*\n   * Pill modifier\n   */\n\n  .tag--pill {\n    border-radius: var(--sl-border-radius-pill);\n  }\n`;\n\nexport {\n  tag_styles_default\n};\n","import {\n  tag_styles_default\n} from \"./chunk.GX6HO7XH.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tag/tag.ts\nvar SlTag = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.variant = \"neutral\";\n    this.size = \"medium\";\n    this.pill = false;\n    this.removable = false;\n  }\n  handleRemoveClick() {\n    emit(this, \"sl-remove\");\n  }\n  render() {\n    return $`\n      <span\n        part=\"base\"\n        class=${o({\n      tag: true,\n      \"tag--primary\": this.variant === \"primary\",\n      \"tag--success\": this.variant === \"success\",\n      \"tag--neutral\": this.variant === \"neutral\",\n      \"tag--warning\": this.variant === \"warning\",\n      \"tag--danger\": this.variant === \"danger\",\n      \"tag--text\": this.variant === \"text\",\n      \"tag--small\": this.size === \"small\",\n      \"tag--medium\": this.size === \"medium\",\n      \"tag--large\": this.size === \"large\",\n      \"tag--pill\": this.pill,\n      \"tag--removable\": this.removable\n    })}\n      >\n        <span part=\"content\" class=\"tag__content\">\n          <slot></slot>\n        </span>\n\n        ${this.removable ? $`\n              <sl-icon-button\n                part=\"remove-button\"\n                exportparts=\"base:remove-button__base\"\n                name=\"x\"\n                library=\"system\"\n                label=${this.localize.term(\"remove\")}\n                class=\"tag__remove\"\n                @click=${this.handleRemoveClick}\n              ></sl-icon-button>\n            ` : \"\"}\n      </span>\n    `;\n  }\n};\nSlTag.styles = tag_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlTag.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlTag.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTag.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTag.prototype, \"removable\", 2);\nSlTag = __decorateClass([\n  n(\"sl-tag\")\n], SlTag);\n\nexport {\n  SlTag\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/menu/menu.styles.ts\nvar menu_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .menu {\n    background: var(--sl-panel-background-color);\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-radius: var(--sl-border-radius-medium);\n    background: var(--sl-panel-background-color);\n    padding: var(--sl-spacing-x-small) 0;\n  }\n\n  ::slotted(sl-divider) {\n    --spacing: var(--sl-spacing-x-small);\n  }\n`;\n\nexport {\n  menu_styles_default\n};\n","import {\n  menu_styles_default\n} from \"./chunk.R2YZVUVK.js\";\nimport {\n  getTextContent\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  hasFocusVisible\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/menu/menu.ts\nvar SlMenu = class extends s {\n  constructor() {\n    super(...arguments);\n    this.typeToSelectString = \"\";\n  }\n  firstUpdated() {\n    this.setAttribute(\"role\", \"menu\");\n  }\n  getAllItems(options = { includeDisabled: true }) {\n    return [...this.defaultSlot.assignedElements({ flatten: true })].filter((el) => {\n      if (el.getAttribute(\"role\") !== \"menuitem\") {\n        return false;\n      }\n      if (!options.includeDisabled && el.disabled) {\n        return false;\n      }\n      return true;\n    });\n  }\n  getCurrentItem() {\n    return this.getAllItems({ includeDisabled: false }).find((i2) => i2.getAttribute(\"tabindex\") === \"0\");\n  }\n  setCurrentItem(item) {\n    const items = this.getAllItems({ includeDisabled: false });\n    const activeItem = item.disabled ? items[0] : item;\n    items.forEach((i2) => {\n      i2.setAttribute(\"tabindex\", i2 === activeItem ? \"0\" : \"-1\");\n    });\n  }\n  typeToSelect(event) {\n    var _a;\n    const items = this.getAllItems({ includeDisabled: false });\n    clearTimeout(this.typeToSelectTimeout);\n    this.typeToSelectTimeout = window.setTimeout(() => this.typeToSelectString = \"\", 1e3);\n    if (event.key === \"Backspace\") {\n      if (event.metaKey || event.ctrlKey) {\n        this.typeToSelectString = \"\";\n      } else {\n        this.typeToSelectString = this.typeToSelectString.slice(0, -1);\n      }\n    } else {\n      this.typeToSelectString += event.key.toLowerCase();\n    }\n    if (!hasFocusVisible) {\n      items.forEach((item) => item.classList.remove(\"sl-focus-invisible\"));\n    }\n    for (const item of items) {\n      const slot = (_a = item.shadowRoot) == null ? void 0 : _a.querySelector(\"slot:not([name])\");\n      const label = getTextContent(slot).toLowerCase().trim();\n      if (label.startsWith(this.typeToSelectString)) {\n        this.setCurrentItem(item);\n        item.focus();\n        break;\n      }\n    }\n  }\n  handleClick(event) {\n    const target = event.target;\n    const item = target.closest(\"sl-menu-item\");\n    if ((item == null ? void 0 : item.disabled) === false) {\n      emit(this, \"sl-select\", { detail: { item } });\n    }\n  }\n  handleKeyUp() {\n    if (!hasFocusVisible) {\n      const items = this.getAllItems();\n      items.forEach((item) => {\n        item.classList.remove(\"sl-focus-invisible\");\n      });\n    }\n  }\n  handleKeyDown(event) {\n    if (event.key === \"Enter\") {\n      const item = this.getCurrentItem();\n      event.preventDefault();\n      item == null ? void 0 : item.click();\n    }\n    if (event.key === \" \") {\n      event.preventDefault();\n    }\n    if ([\"ArrowDown\", \"ArrowUp\", \"Home\", \"End\"].includes(event.key)) {\n      const items = this.getAllItems({ includeDisabled: false });\n      const activeItem = this.getCurrentItem();\n      let index = activeItem ? items.indexOf(activeItem) : 0;\n      if (items.length > 0) {\n        event.preventDefault();\n        if (event.key === \"ArrowDown\") {\n          index++;\n        } else if (event.key === \"ArrowUp\") {\n          index--;\n        } else if (event.key === \"Home\") {\n          index = 0;\n        } else if (event.key === \"End\") {\n          index = items.length - 1;\n        }\n        if (index < 0) {\n          index = items.length - 1;\n        }\n        if (index > items.length - 1) {\n          index = 0;\n        }\n        this.setCurrentItem(items[index]);\n        items[index].focus();\n        return;\n      }\n    }\n    this.typeToSelect(event);\n  }\n  handleMouseDown(event) {\n    const target = event.target;\n    if (target.getAttribute(\"role\") === \"menuitem\") {\n      this.setCurrentItem(target);\n      if (!hasFocusVisible) {\n        target.classList.add(\"sl-focus-invisible\");\n      }\n    }\n  }\n  handleSlotChange() {\n    const items = this.getAllItems({ includeDisabled: false });\n    if (items.length > 0) {\n      this.setCurrentItem(items[0]);\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=\"menu\"\n        @click=${this.handleClick}\n        @keydown=${this.handleKeyDown}\n        @keyup=${this.handleKeyUp}\n        @mousedown=${this.handleMouseDown}\n      >\n        <slot @slotchange=${this.handleSlotChange}></slot>\n      </div>\n    `;\n  }\n};\nSlMenu.styles = menu_styles_default;\n__decorateClass([\n  i(\".menu\")\n], SlMenu.prototype, \"menu\", 2);\n__decorateClass([\n  i(\"slot\")\n], SlMenu.prototype, \"defaultSlot\", 2);\nSlMenu = __decorateClass([\n  n(\"sl-menu\")\n], SlMenu);\n\nexport {\n  SlMenu\n};\n","import {\n  __objRest,\n  __spreadProps,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// node_modules/@floating-ui/core/dist/floating-ui.core.esm.js\nfunction getSide(placement) {\n  return placement.split(\"-\")[0];\n}\nfunction getAlignment(placement) {\n  return placement.split(\"-\")[1];\n}\nfunction getMainAxisFromPlacement(placement) {\n  return [\"top\", \"bottom\"].includes(getSide(placement)) ? \"x\" : \"y\";\n}\nfunction getLengthFromAxis(axis) {\n  return axis === \"y\" ? \"height\" : \"width\";\n}\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  const commonAlign = reference[length] / 2 - floating[length] / 2;\n  const side = getSide(placement);\n  const isVertical = mainAxis === \"x\";\n  let coords;\n  switch (side) {\n    case \"top\":\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case \"bottom\":\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case \"right\":\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case \"left\":\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case \"start\":\n      coords[mainAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case \"end\":\n      coords[mainAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\nvar computePosition = async (reference, floating, config) => {\n  const {\n    placement = \"bottom\",\n    strategy = \"absolute\",\n    middleware = [],\n    platform: platform2\n  } = config;\n  const rtl = await (platform2.isRTL == null ? void 0 : platform2.isRTL(floating));\n  if (false) {\n    if (platform2 == null) {\n      console.error([\"Floating UI: `platform` property was not passed to config. If you\", \"want to use Floating UI on the web, install @floating-ui/dom\", \"instead of the /core package. Otherwise, you can create your own\", \"`platform`: https://floating-ui.com/docs/platform\"].join(\" \"));\n    }\n    if (middleware.filter((_ref) => {\n      let {\n        name\n      } = _ref;\n      return name === \"autoPlacement\" || name === \"flip\";\n    }).length > 1) {\n      throw new Error([\"Floating UI: duplicate `flip` and/or `autoPlacement`\", \"middleware detected. This will lead to an infinite loop. Ensure only\", \"one of either has been passed to the `middleware` array.\"].join(\" \"));\n    }\n  }\n  let rects = await platform2.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  const skippedMiddlewareNames = /* @__PURE__ */ new Set();\n  let _debug_loop_count_ = 0;\n  for (let i = 0; i < middleware.length; i++) {\n    if (false) {\n      _debug_loop_count_++;\n      if (_debug_loop_count_ > 100) {\n        throw new Error([\"Floating UI: The middleware lifecycle appears to be\", \"running in an infinite loop. This is usually caused by a `reset`\", \"continually being returned without a break condition.\"].join(\" \"));\n      }\n    }\n    const {\n      name,\n      fn\n    } = middleware[i];\n    if (skippedMiddlewareNames.has(name)) {\n      continue;\n    }\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform: platform2,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = __spreadProps(__spreadValues({}, middlewareData), {\n      [name]: __spreadValues(__spreadValues({}, middlewareData[name]), data)\n    });\n    if (reset) {\n      if (typeof reset === \"object\") {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform2.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n        if (reset.skip !== false) {\n          skippedMiddlewareNames.add(name);\n        }\n      }\n      i = -1;\n      continue;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\nfunction expandPaddingObject(padding) {\n  return __spreadValues({\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }, padding);\n}\nfunction getSideObjectFromPadding(padding) {\n  return typeof padding !== \"number\" ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  return __spreadProps(__spreadValues({}, rect), {\n    top: rect.y,\n    left: rect.x,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}\nasync function detectOverflow(middlewareArguments, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform: platform2,\n    rects,\n    elements,\n    strategy\n  } = middlewareArguments;\n  const {\n    boundary = \"clippingAncestors\",\n    rootBoundary = \"viewport\",\n    elementContext = \"floating\",\n    altBoundary = false,\n    padding = 0\n  } = options;\n  const paddingObject = getSideObjectFromPadding(padding);\n  const altContext = elementContext === \"floating\" ? \"reference\" : \"floating\";\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform2.getClippingRect({\n    element: ((_await$platform$isEle = await (platform2.isElement == null ? void 0 : platform2.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || await (platform2.getDocumentElement == null ? void 0 : platform2.getDocumentElement(elements.floating)),\n    boundary,\n    rootBoundary\n  }));\n  const elementClientRect = rectToClientRect(platform2.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform2.convertOffsetParentRelativeRectToViewportRelativeRect({\n    rect: elementContext === \"floating\" ? __spreadProps(__spreadValues({}, rects.floating), {\n      x,\n      y\n    }) : rects.reference,\n    offsetParent: await (platform2.getOffsetParent == null ? void 0 : platform2.getOffsetParent(elements.floating)),\n    strategy\n  }) : rects[elementContext]);\n  return {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n}\nvar min = Math.min;\nvar max = Math.max;\nfunction within(min$1, value, max$1) {\n  return max(min$1, min(value, max$1));\n}\nvar arrow = (options) => ({\n  name: \"arrow\",\n  options,\n  async fn(middlewareArguments) {\n    const {\n      element,\n      padding = 0\n    } = options != null ? options : {};\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform: platform2\n    } = middlewareArguments;\n    if (element == null) {\n      if (false) {\n        console.warn(\"Floating UI: No `element` was passed to the `arrow` middleware.\");\n      }\n      return {};\n    }\n    const paddingObject = getSideObjectFromPadding(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getMainAxisFromPlacement(placement);\n    const length = getLengthFromAxis(axis);\n    const arrowDimensions = await platform2.getDimensions(element);\n    const minProp = axis === \"y\" ? \"top\" : \"left\";\n    const maxProp = axis === \"y\" ? \"bottom\" : \"right\";\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform2.getOffsetParent == null ? void 0 : platform2.getOffsetParent(element));\n    const clientSize = arrowOffsetParent ? axis === \"y\" ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n    const centerToReference = endDiff / 2 - startDiff / 2;\n    const min3 = paddingObject[minProp];\n    const max3 = clientSize - arrowDimensions[length] - paddingObject[maxProp];\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset2 = within(min3, center, max3);\n    return {\n      data: {\n        [axis]: offset2,\n        centerOffset: center - offset2\n      }\n    };\n  }\n});\nvar hash$1 = {\n  left: \"right\",\n  right: \"left\",\n  bottom: \"top\",\n  top: \"bottom\"\n};\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, (matched) => hash$1[matched]);\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const mainAxis = getMainAxisFromPlacement(placement);\n  const length = getLengthFromAxis(mainAxis);\n  let mainAlignmentSide = mainAxis === \"x\" ? alignment === (rtl ? \"end\" : \"start\") ? \"right\" : \"left\" : alignment === \"start\" ? \"bottom\" : \"top\";\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return {\n    main: mainAlignmentSide,\n    cross: getOppositePlacement(mainAlignmentSide)\n  };\n}\nvar hash = {\n  start: \"end\",\n  end: \"start\"\n};\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, (matched) => hash[matched]);\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nvar flip = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"flip\",\n    options,\n    async fn(middlewareArguments) {\n      var _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const _a = options, {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = \"bestFit\",\n        flipAlignment = true\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"mainAxis\",\n        \"crossAxis\",\n        \"fallbackPlacements\",\n        \"fallbackStrategy\",\n        \"flipAlignment\"\n      ]);\n      const side = getSide(placement);\n      const isBasePlacement = side === initialPlacement;\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const {\n          main,\n          cross\n        } = getAlignmentSides(placement, rects, await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)));\n        overflows.push(overflow[main], overflow[cross]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n      if (!overflows.every((side2) => side2 <= 0)) {\n        var _middlewareData$flip$, _middlewareData$flip2;\n        const nextIndex = ((_middlewareData$flip$ = (_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) != null ? _middlewareData$flip$ : 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              skip: false,\n              placement: nextPlacement\n            }\n          };\n        }\n        let resetPlacement = \"bottom\";\n        switch (fallbackStrategy) {\n          case \"bestFit\": {\n            var _overflowsData$slice$;\n            const placement2 = (_overflowsData$slice$ = overflowsData.slice().sort((a, b) => a.overflows.filter((overflow2) => overflow2 > 0).reduce((acc, overflow2) => acc + overflow2, 0) - b.overflows.filter((overflow2) => overflow2 > 0).reduce((acc, overflow2) => acc + overflow2, 0))[0]) == null ? void 0 : _overflowsData$slice$.placement;\n            if (placement2) {\n              resetPlacement = placement2;\n            }\n            break;\n          }\n          case \"initialPlacement\":\n            resetPlacement = initialPlacement;\n            break;\n        }\n        return {\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\nfunction convertValueToCoords(placement, rects, value, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getMainAxisFromPlacement(placement) === \"x\";\n  const mainAxisMulti = [\"left\", \"top\"].includes(side) ? -1 : 1;\n  let crossAxisMulti = 1;\n  if (alignment === \"end\") {\n    crossAxisMulti = -1;\n  }\n  if (rtl && isVertical) {\n    crossAxisMulti *= -1;\n  }\n  const rawValue = typeof value === \"function\" ? value(__spreadProps(__spreadValues({}, rects), {\n    placement\n  })) : value;\n  const {\n    mainAxis,\n    crossAxis\n  } = typeof rawValue === \"number\" ? {\n    mainAxis: rawValue,\n    crossAxis: 0\n  } : __spreadValues({\n    mainAxis: 0,\n    crossAxis: 0\n  }, rawValue);\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\nvar offset = function(value) {\n  if (value === void 0) {\n    value = 0;\n  }\n  return {\n    name: \"offset\",\n    options: value,\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const diffCoords = convertValueToCoords(placement, rects, value, await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)));\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: diffCoords\n      };\n    }\n  };\n};\nfunction getCrossAxis(axis) {\n  return axis === \"x\" ? \"y\" : \"x\";\n}\nvar shift = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"shift\",\n    options,\n    async fn(middlewareArguments) {\n      const {\n        x,\n        y,\n        placement\n      } = middlewareArguments;\n      const _a = options, {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: (_ref) => {\n            let {\n              x: x2,\n              y: y2\n            } = _ref;\n            return {\n              x: x2,\n              y: y2\n            };\n          }\n        }\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"mainAxis\",\n        \"crossAxis\",\n        \"limiter\"\n      ]);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const mainAxis = getMainAxisFromPlacement(getSide(placement));\n      const crossAxis = getCrossAxis(mainAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === \"y\" ? \"top\" : \"left\";\n        const maxSide = mainAxis === \"y\" ? \"bottom\" : \"right\";\n        const min3 = mainAxisCoord + overflow[minSide];\n        const max3 = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = within(min3, mainAxisCoord, max3);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === \"y\" ? \"top\" : \"left\";\n        const maxSide = crossAxis === \"y\" ? \"bottom\" : \"right\";\n        const min3 = crossAxisCoord + overflow[minSide];\n        const max3 = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = within(min3, crossAxisCoord, max3);\n      }\n      const limitedCoords = limiter.fn(__spreadProps(__spreadValues({}, middlewareArguments), {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      }));\n      return __spreadProps(__spreadValues({}, limitedCoords), {\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y\n        }\n      });\n    }\n  };\n};\nvar size = function(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: \"size\",\n    options,\n    async fn(middlewareArguments) {\n      const {\n        placement,\n        rects,\n        platform: platform2,\n        elements\n      } = middlewareArguments;\n      const _a = options, {\n        apply\n      } = _a, detectOverflowOptions = __objRest(_a, [\n        \"apply\"\n      ]);\n      const overflow = await detectOverflow(middlewareArguments, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      let heightSide;\n      let widthSide;\n      if (side === \"top\" || side === \"bottom\") {\n        heightSide = side;\n        widthSide = alignment === (await (platform2.isRTL == null ? void 0 : platform2.isRTL(elements.floating)) ? \"start\" : \"end\") ? \"left\" : \"right\";\n      } else {\n        widthSide = side;\n        heightSide = alignment === \"end\" ? \"top\" : \"bottom\";\n      }\n      const xMin = max(overflow.left, 0);\n      const xMax = max(overflow.right, 0);\n      const yMin = max(overflow.top, 0);\n      const yMax = max(overflow.bottom, 0);\n      const dimensions = {\n        height: rects.floating.height - ([\"left\", \"right\"].includes(placement) ? 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom)) : overflow[heightSide]),\n        width: rects.floating.width - ([\"top\", \"bottom\"].includes(placement) ? 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right)) : overflow[widthSide])\n      };\n      apply == null ? void 0 : apply(__spreadValues(__spreadValues({}, dimensions), rects));\n      return {\n        reset: {\n          rects: true\n        }\n      };\n    }\n  };\n};\n\n// node_modules/@floating-ui/dom/dist/floating-ui.dom.esm.js\nfunction isWindow(value) {\n  return (value == null ? void 0 : value.toString()) === \"[object Window]\";\n}\nfunction getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n  if (!isWindow(node)) {\n    const ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n  return node;\n}\nfunction getComputedStyle$1(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeName(node) {\n  return isWindow(node) ? \"\" : node ? (node.nodeName || \"\").toLowerCase() : \"\";\n}\nfunction isHTMLElement(value) {\n  return value instanceof getWindow(value).HTMLElement;\n}\nfunction isElement(value) {\n  return value instanceof getWindow(value).Element;\n}\nfunction isNode(value) {\n  return value instanceof getWindow(value).Node;\n}\nfunction isShadowRoot(node) {\n  const OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY\n  } = getComputedStyle$1(element);\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}\nfunction isTableElement(element) {\n  return [\"table\", \"td\", \"th\"].includes(getNodeName(element));\n}\nfunction isContainingBlock(element) {\n  const isFirefox = navigator.userAgent.toLowerCase().includes(\"firefox\");\n  const css = getComputedStyle$1(element);\n  return css.transform !== \"none\" || css.perspective !== \"none\" || css.contain === \"paint\" || [\"transform\", \"perspective\"].includes(css.willChange) || isFirefox && css.willChange === \"filter\" || isFirefox && (css.filter ? css.filter !== \"none\" : false);\n}\nvar min2 = Math.min;\nvar max2 = Math.max;\nvar round = Math.round;\nfunction getBoundingClientRect(element, includeScale) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  let scaleX = 1;\n  let scaleY = 1;\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n  return {\n    width: clientRect.width / scaleX,\n    height: clientRect.height / scaleY,\n    top: clientRect.top / scaleY,\n    right: clientRect.right / scaleX,\n    bottom: clientRect.bottom / scaleY,\n    left: clientRect.left / scaleX,\n    x: clientRect.left / scaleX,\n    y: clientRect.top / scaleY\n  };\n}\nfunction getDocumentElement(node) {\n  return ((isNode(node) ? node.ownerDocument : node.document) || window.document).documentElement;\n}\nfunction getNodeScroll(element) {\n  if (isWindow(element)) {\n    return {\n      scrollLeft: element.pageXOffset,\n      scrollTop: element.pageYOffset\n    };\n  }\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}\nfunction getWindowScrollBarX(element) {\n  return getBoundingClientRect(getDocumentElement(element)).left + getNodeScroll(element).scrollLeft;\n}\nfunction isScaled(element) {\n  const rect = getBoundingClientRect(element);\n  return round(rect.width) !== element.offsetWidth || round(rect.height) !== element.offsetHeight;\n}\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const rect = getBoundingClientRect(element, isOffsetParentAnElement && isScaled(offsetParent));\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== \"fixed\") {\n    if (getNodeName(offsetParent) !== \"body\" || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === \"html\") {\n    return node;\n  }\n  return node.assignedSlot || node.parentNode || (isShadowRoot(node) ? node.host : null) || getDocumentElement(node);\n}\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === \"fixed\") {\n    return null;\n  }\n  return element.offsetParent;\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n  while (isHTMLElement(currentNode) && ![\"html\", \"body\"].includes(getNodeName(currentNode))) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n  return null;\n}\nfunction getOffsetParent(element) {\n  const window2 = getWindow(element);\n  let offsetParent = getTrueOffsetParent(element);\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === \"static\") {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n  if (offsetParent && (getNodeName(offsetParent) === \"html\" || getNodeName(offsetParent) === \"body\" && getComputedStyle(offsetParent).position === \"static\" && !isContainingBlock(offsetParent))) {\n    return window2;\n  }\n  return offsetParent || getContainingBlock(element) || window2;\n}\nfunction getDimensions(element) {\n  if (isHTMLElement(element)) {\n    return {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n  }\n  const rect = getBoundingClientRect(element);\n  return {\n    width: rect.width,\n    height: rect.height\n  };\n}\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  if (offsetParent === documentElement) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = {\n    x: 0,\n    y: 0\n  };\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && strategy !== \"fixed\") {\n    if (getNodeName(offsetParent) !== \"body\" || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent, true);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  return __spreadProps(__spreadValues({}, rect), {\n    x: rect.x - scroll.scrollLeft + offsets.x,\n    y: rect.y - scroll.scrollTop + offsets.y\n  });\n}\nfunction getViewportRect(element) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    if (Math.abs(win.innerWidth / visualViewport.scale - visualViewport.width) < 0.01) {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getDocumentRect(element) {\n  var _element$ownerDocumen;\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  const width = max2(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  const height = max2(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle$1(body || html).direction === \"rtl\") {\n    x += max2(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getNearestOverflowAncestor(node) {\n  if ([\"html\", \"body\", \"#document\"].includes(getNodeName(node))) {\n    return node.ownerDocument.body;\n  }\n  if (isHTMLElement(node) && isOverflowElement(node)) {\n    return node;\n  }\n  return getNearestOverflowAncestor(getParentNode(node));\n}\nfunction getOverflowAncestors(node, list) {\n  var _node$ownerDocument;\n  if (list === void 0) {\n    list = [];\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.body);\n  const win = getWindow(scrollableAncestor);\n  const target = isBody ? [win].concat(win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : []) : scrollableAncestor;\n  const updatedList = list.concat(target);\n  return isBody ? updatedList : updatedList.concat(getOverflowAncestors(getParentNode(target)));\n}\nfunction contains(parent, child) {\n  const rootNode = child.getRootNode == null ? void 0 : child.getRootNode();\n  if (parent.contains(child)) {\n    return true;\n  } else if (rootNode && isShadowRoot(rootNode)) {\n    let next = child;\n    do {\n      if (next && parent === next) {\n        return true;\n      }\n      next = next.parentNode || next.host;\n    } while (next);\n  }\n  return false;\n}\nfunction getInnerBoundingClientRect(element) {\n  const clientRect = getBoundingClientRect(element);\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  return {\n    top,\n    left,\n    x: left,\n    y: top,\n    right: left + element.clientWidth,\n    bottom: top + element.clientHeight,\n    width: element.clientWidth,\n    height: element.clientHeight\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingParent) {\n  if (clippingParent === \"viewport\") {\n    return rectToClientRect(getViewportRect(element));\n  }\n  if (isElement(clippingParent)) {\n    return getInnerBoundingClientRect(clippingParent);\n  }\n  return rectToClientRect(getDocumentRect(getDocumentElement(element)));\n}\nfunction getClippingAncestors(element) {\n  const clippingAncestors = getOverflowAncestors(getParentNode(element));\n  const canEscapeClipping = [\"absolute\", \"fixed\"].includes(getComputedStyle$1(element).position);\n  const clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n  if (!isElement(clipperElement)) {\n    return [];\n  }\n  return clippingAncestors.filter((clippingAncestors2) => isElement(clippingAncestors2) && contains(clippingAncestors2, clipperElement) && getNodeName(clippingAncestors2) !== \"body\");\n}\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary\n  } = _ref;\n  const mainClippingAncestors = boundary === \"clippingAncestors\" ? getClippingAncestors(element) : [].concat(boundary);\n  const clippingAncestors = [...mainClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor);\n    accRect.top = max2(rect.top, accRect.top);\n    accRect.right = min2(rect.right, accRect.right);\n    accRect.bottom = min2(rect.bottom, accRect.bottom);\n    accRect.left = max2(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\nvar platform = {\n  getClippingRect,\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  isElement,\n  getDimensions,\n  getOffsetParent,\n  getDocumentElement,\n  getElementRects: (_ref) => {\n    let {\n      reference,\n      floating,\n      strategy\n    } = _ref;\n    return {\n      reference: getRectRelativeToOffsetParent(reference, getOffsetParent(floating), strategy),\n      floating: __spreadProps(__spreadValues({}, getDimensions(floating)), {\n        x: 0,\n        y: 0\n      })\n    };\n  },\n  getClientRects: (element) => Array.from(element.getClientRects()),\n  isRTL: (element) => getComputedStyle$1(element).direction === \"rtl\"\n};\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll: _ancestorScroll = true,\n    ancestorResize: _ancestorResize = true,\n    elementResize: _elementResize = true,\n    animationFrame = false\n  } = options;\n  let cleanedUp = false;\n  const ancestorScroll = _ancestorScroll && !animationFrame;\n  const ancestorResize = _ancestorResize && !animationFrame;\n  const elementResize = _elementResize && !animationFrame;\n  const ancestors = ancestorScroll || ancestorResize ? [...isElement(reference) ? getOverflowAncestors(reference) : [], ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach((ancestor) => {\n    ancestorScroll && ancestor.addEventListener(\"scroll\", update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener(\"resize\", update);\n  });\n  let observer = null;\n  if (elementResize) {\n    observer = new ResizeObserver(update);\n    isElement(reference) && observer.observe(reference);\n    observer.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    if (cleanedUp) {\n      return;\n    }\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  return () => {\n    var _observer;\n    cleanedUp = true;\n    ancestors.forEach((ancestor) => {\n      ancestorScroll && ancestor.removeEventListener(\"scroll\", update);\n      ancestorResize && ancestor.removeEventListener(\"resize\", update);\n    });\n    (_observer = observer) == null ? void 0 : _observer.disconnect();\n    observer = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\nvar computePosition2 = (reference, floating, options) => computePosition(reference, floating, __spreadValues({\n  platform\n}, options));\n\nexport {\n  arrow,\n  flip,\n  offset,\n  shift,\n  size,\n  autoUpdate,\n  computePosition2 as computePosition\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/dropdown/dropdown.styles.ts\nvar dropdown_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .dropdown {\n    position: relative;\n  }\n\n  .dropdown__trigger {\n    display: block;\n  }\n\n  .dropdown__positioner {\n    position: absolute;\n    z-index: var(--sl-z-index-dropdown);\n  }\n\n  .dropdown__panel {\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-medium);\n    font-weight: var(--sl-font-weight-normal);\n    color: var(--color);\n    box-shadow: var(--sl-shadow-large);\n    overflow: auto;\n    overscroll-behavior: none;\n    pointer-events: none;\n  }\n\n  .dropdown--open .dropdown__panel {\n    pointer-events: all;\n  }\n\n  .dropdown__positioner[data-placement^='top'] .dropdown__panel {\n    transform-origin: bottom;\n  }\n\n  .dropdown__positioner[data-placement^='bottom'] .dropdown__panel {\n    transform-origin: top;\n  }\n\n  .dropdown__positioner[data-placement^='left'] .dropdown__panel {\n    transform-origin: right;\n  }\n\n  .dropdown__positioner[data-placement^='right'] .dropdown__panel {\n    transform-origin: left;\n  }\n`;\n\nexport {\n  dropdown_styles_default\n};\n","import {\n  autoUpdate,\n  computePosition,\n  flip,\n  offset,\n  shift,\n  size\n} from \"./chunk.DIQYRTQ3.js\";\nimport {\n  dropdown_styles_default\n} from \"./chunk.2BK5N6NV.js\";\nimport {\n  getTabbableBoundary\n} from \"./chunk.SCUNOITN.js\";\nimport {\n  scrollIntoView\n} from \"./chunk.H262HIXG.js\";\nimport {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/dropdown/dropdown.ts\nvar SlDropdown = class extends s {\n  constructor() {\n    super(...arguments);\n    this.open = false;\n    this.placement = \"bottom-start\";\n    this.disabled = false;\n    this.stayOpenOnSelect = false;\n    this.distance = 0;\n    this.skidding = 0;\n    this.hoist = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleMenuItemActivate = this.handleMenuItemActivate.bind(this);\n    this.handlePanelSelect = this.handlePanelSelect.bind(this);\n    this.handleDocumentKeyDown = this.handleDocumentKeyDown.bind(this);\n    this.handleDocumentMouseDown = this.handleDocumentMouseDown.bind(this);\n    if (!this.containingElement) {\n      this.containingElement = this;\n    }\n  }\n  async firstUpdated() {\n    this.panel.hidden = !this.open;\n    if (this.open) {\n      await this.updateComplete;\n      this.addOpenListeners();\n      this.startPositioner();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeOpenListeners();\n    this.hide();\n    this.stopPositioner();\n  }\n  focusOnTrigger() {\n    const slot = this.trigger.querySelector(\"slot\");\n    const trigger = slot.assignedElements({ flatten: true })[0];\n    if (typeof (trigger == null ? void 0 : trigger.focus) === \"function\") {\n      trigger.focus();\n    }\n  }\n  getMenu() {\n    const slot = this.panel.querySelector(\"slot\");\n    return slot.assignedElements({ flatten: true }).find((el) => el.tagName.toLowerCase() === \"sl-menu\");\n  }\n  handleDocumentKeyDown(event) {\n    var _a;\n    if (event.key === \"Escape\") {\n      this.hide();\n      this.focusOnTrigger();\n      return;\n    }\n    if (event.key === \"Tab\") {\n      if (this.open && ((_a = document.activeElement) == null ? void 0 : _a.tagName.toLowerCase()) === \"sl-menu-item\") {\n        event.preventDefault();\n        this.hide();\n        this.focusOnTrigger();\n        return;\n      }\n      setTimeout(() => {\n        var _a2, _b, _c;\n        const activeElement = ((_a2 = this.containingElement) == null ? void 0 : _a2.getRootNode()) instanceof ShadowRoot ? (_c = (_b = document.activeElement) == null ? void 0 : _b.shadowRoot) == null ? void 0 : _c.activeElement : document.activeElement;\n        if (!this.containingElement || (activeElement == null ? void 0 : activeElement.closest(this.containingElement.tagName.toLowerCase())) !== this.containingElement) {\n          this.hide();\n        }\n      });\n    }\n  }\n  handleDocumentMouseDown(event) {\n    const path = event.composedPath();\n    if (this.containingElement && !path.includes(this.containingElement)) {\n      this.hide();\n    }\n  }\n  handleMenuItemActivate(event) {\n    const item = event.target;\n    scrollIntoView(item, this.panel);\n  }\n  handlePanelSelect(event) {\n    const target = event.target;\n    if (!this.stayOpenOnSelect && target.tagName.toLowerCase() === \"sl-menu\") {\n      this.hide();\n      this.focusOnTrigger();\n    }\n  }\n  handlePopoverOptionsChange() {\n    this.updatePositioner();\n  }\n  handleTriggerClick() {\n    if (this.open) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  handleTriggerKeyDown(event) {\n    if (event.key === \"Escape\") {\n      this.focusOnTrigger();\n      this.hide();\n      return;\n    }\n    if ([\" \", \"Enter\"].includes(event.key)) {\n      event.preventDefault();\n      this.handleTriggerClick();\n      return;\n    }\n    const menu = this.getMenu();\n    if (menu) {\n      const menuItems = menu.defaultSlot.assignedElements({ flatten: true });\n      const firstMenuItem = menuItems[0];\n      const lastMenuItem = menuItems[menuItems.length - 1];\n      if ([\"ArrowDown\", \"ArrowUp\", \"Home\", \"End\"].includes(event.key)) {\n        event.preventDefault();\n        if (!this.open) {\n          this.show();\n        }\n        if (menuItems.length > 0) {\n          requestAnimationFrame(() => {\n            if (event.key === \"ArrowDown\" || event.key === \"Home\") {\n              menu.setCurrentItem(firstMenuItem);\n              firstMenuItem.focus();\n            }\n            if (event.key === \"ArrowUp\" || event.key === \"End\") {\n              menu.setCurrentItem(lastMenuItem);\n              lastMenuItem.focus();\n            }\n          });\n        }\n      }\n      const ignoredKeys = [\"Tab\", \"Shift\", \"Meta\", \"Ctrl\", \"Alt\"];\n      if (this.open && !ignoredKeys.includes(event.key)) {\n        menu.typeToSelect(event);\n      }\n    }\n  }\n  handleTriggerKeyUp(event) {\n    if (event.key === \" \") {\n      event.preventDefault();\n    }\n  }\n  handleTriggerSlotChange() {\n    this.updateAccessibleTrigger();\n  }\n  updateAccessibleTrigger() {\n    const slot = this.trigger.querySelector(\"slot\");\n    const assignedElements = slot.assignedElements({ flatten: true });\n    const accessibleTrigger = assignedElements.find((el) => getTabbableBoundary(el).start);\n    let target;\n    if (accessibleTrigger) {\n      switch (accessibleTrigger.tagName.toLowerCase()) {\n        case \"sl-button\":\n        case \"sl-icon-button\":\n          target = accessibleTrigger.button;\n          break;\n        default:\n          target = accessibleTrigger;\n      }\n      target.setAttribute(\"aria-haspopup\", \"true\");\n      target.setAttribute(\"aria-expanded\", this.open ? \"true\" : \"false\");\n    }\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  reposition() {\n    this.updatePositioner();\n  }\n  addOpenListeners() {\n    this.panel.addEventListener(\"sl-activate\", this.handleMenuItemActivate);\n    this.panel.addEventListener(\"sl-select\", this.handlePanelSelect);\n    document.addEventListener(\"keydown\", this.handleDocumentKeyDown);\n    document.addEventListener(\"mousedown\", this.handleDocumentMouseDown);\n  }\n  removeOpenListeners() {\n    this.panel.removeEventListener(\"sl-activate\", this.handleMenuItemActivate);\n    this.panel.removeEventListener(\"sl-select\", this.handlePanelSelect);\n    document.removeEventListener(\"keydown\", this.handleDocumentKeyDown);\n    document.removeEventListener(\"mousedown\", this.handleDocumentMouseDown);\n  }\n  async handleOpenChange() {\n    if (this.disabled) {\n      this.open = false;\n      return;\n    }\n    this.updateAccessibleTrigger();\n    if (this.open) {\n      emit(this, \"sl-show\");\n      this.addOpenListeners();\n      await stopAnimations(this);\n      this.startPositioner();\n      this.panel.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"dropdown.show\");\n      await animateTo(this.panel, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      this.removeOpenListeners();\n      await stopAnimations(this);\n      const { keyframes, options } = getAnimation(this, \"dropdown.hide\");\n      await animateTo(this.panel, keyframes, options);\n      this.panel.hidden = true;\n      this.stopPositioner();\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  startPositioner() {\n    this.stopPositioner();\n    this.updatePositioner();\n    this.positionerCleanup = autoUpdate(this.trigger, this.positioner, this.updatePositioner.bind(this));\n  }\n  updatePositioner() {\n    if (!this.open || !this.trigger || !this.positioner) {\n      return;\n    }\n    computePosition(this.trigger, this.positioner, {\n      placement: this.placement,\n      middleware: [\n        offset({ mainAxis: this.distance, crossAxis: this.skidding }),\n        flip(),\n        shift(),\n        size({\n          apply: ({ width, height }) => {\n            Object.assign(this.panel.style, {\n              maxWidth: `${width}px`,\n              maxHeight: `${height}px`\n            });\n          },\n          padding: 8\n        })\n      ],\n      strategy: this.hoist ? \"fixed\" : \"absolute\"\n    }).then(({ x, y, placement }) => {\n      this.positioner.setAttribute(\"data-placement\", placement);\n      Object.assign(this.positioner.style, {\n        position: this.hoist ? \"fixed\" : \"absolute\",\n        left: `${x}px`,\n        top: `${y}px`\n      });\n    });\n  }\n  stopPositioner() {\n    if (this.positionerCleanup) {\n      this.positionerCleanup();\n      this.positionerCleanup = void 0;\n      this.positioner.removeAttribute(\"data-placement\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        id=\"dropdown\"\n        class=${o({\n      dropdown: true,\n      \"dropdown--open\": this.open\n    })}\n      >\n        <span\n          part=\"trigger\"\n          class=\"dropdown__trigger\"\n          @click=${this.handleTriggerClick}\n          @keydown=${this.handleTriggerKeyDown}\n          @keyup=${this.handleTriggerKeyUp}\n        >\n          <slot name=\"trigger\" @slotchange=${this.handleTriggerSlotChange}></slot>\n        </span>\n\n        <!-- Position the panel with a wrapper since the popover makes use of translate. This let's us add animations\n        on the panel without interfering with the position. -->\n        <div class=\"dropdown__positioner\">\n          <div\n            part=\"panel\"\n            class=\"dropdown__panel\"\n            aria-hidden=${this.open ? \"false\" : \"true\"}\n            aria-labelledby=\"dropdown\"\n          >\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDropdown.styles = dropdown_styles_default;\n__decorateClass([\n  i(\".dropdown__trigger\")\n], SlDropdown.prototype, \"trigger\", 2);\n__decorateClass([\n  i(\".dropdown__panel\")\n], SlDropdown.prototype, \"panel\", 2);\n__decorateClass([\n  i(\".dropdown__positioner\")\n], SlDropdown.prototype, \"positioner\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDropdown.prototype, \"open\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlDropdown.prototype, \"placement\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlDropdown.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ attribute: \"stay-open-on-select\", type: Boolean, reflect: true })\n], SlDropdown.prototype, \"stayOpenOnSelect\", 2);\n__decorateClass([\n  e({ attribute: false })\n], SlDropdown.prototype, \"containingElement\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlDropdown.prototype, \"distance\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlDropdown.prototype, \"skidding\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlDropdown.prototype, \"hoist\", 2);\n__decorateClass([\n  watch(\"distance\"),\n  watch(\"hoist\"),\n  watch(\"placement\"),\n  watch(\"skidding\")\n], SlDropdown.prototype, \"handlePopoverOptionsChange\", 1);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDropdown.prototype, \"handleOpenChange\", 1);\nSlDropdown = __decorateClass([\n  n(\"sl-dropdown\")\n], SlDropdown);\nsetDefaultAnimation(\"dropdown.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.9)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 100, easing: \"ease\" }\n});\nsetDefaultAnimation(\"dropdown.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.9)\" }\n  ],\n  options: { duration: 100, easing: \"ease\" }\n});\n\nexport {\n  SlDropdown\n};\n","import {\n  l as l2,\n  r\n} from \"./chunk.LOYEL7IY.js\";\nimport {\n  button_styles_default\n} from \"./chunk.BIBTLNIT.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/button/button.ts\nvar SlButton = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      form: (input) => {\n        if (input.hasAttribute(\"form\")) {\n          const doc = input.getRootNode();\n          const formId = input.getAttribute(\"form\");\n          return doc.getElementById(formId);\n        }\n        return input.closest(\"form\");\n      }\n    });\n    this.hasSlotController = new HasSlotController(this, \"[default]\", \"prefix\", \"suffix\");\n    this.hasFocus = false;\n    this.variant = \"default\";\n    this.size = \"medium\";\n    this.caret = false;\n    this.disabled = false;\n    this.loading = false;\n    this.outline = false;\n    this.pill = false;\n    this.circle = false;\n    this.type = \"button\";\n  }\n  click() {\n    this.button.click();\n  }\n  focus(options) {\n    this.button.focus(options);\n  }\n  blur() {\n    this.button.blur();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleClick(event) {\n    if (this.disabled || this.loading) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n    if (this.type === \"submit\") {\n      this.formSubmitController.submit(this);\n    }\n  }\n  render() {\n    const isLink = this.href ? true : false;\n    const tag = isLink ? r`a` : r`button`;\n    return l2`\n      <${tag}\n        part=\"base\"\n        class=${o({\n      button: true,\n      \"button--default\": this.variant === \"default\",\n      \"button--primary\": this.variant === \"primary\",\n      \"button--success\": this.variant === \"success\",\n      \"button--neutral\": this.variant === \"neutral\",\n      \"button--warning\": this.variant === \"warning\",\n      \"button--danger\": this.variant === \"danger\",\n      \"button--text\": this.variant === \"text\",\n      \"button--small\": this.size === \"small\",\n      \"button--medium\": this.size === \"medium\",\n      \"button--large\": this.size === \"large\",\n      \"button--caret\": this.caret,\n      \"button--circle\": this.circle,\n      \"button--disabled\": this.disabled,\n      \"button--focused\": this.hasFocus,\n      \"button--loading\": this.loading,\n      \"button--standard\": !this.outline,\n      \"button--outline\": this.outline,\n      \"button--pill\": this.pill,\n      \"button--has-label\": this.hasSlotController.test(\"[default]\"),\n      \"button--has-prefix\": this.hasSlotController.test(\"prefix\"),\n      \"button--has-suffix\": this.hasSlotController.test(\"suffix\")\n    })}\n        ?disabled=${l(isLink ? void 0 : this.disabled)}\n        type=${this.type}\n        name=${l(isLink ? void 0 : this.name)}\n        value=${l(isLink ? void 0 : this.value)}\n        href=${l(this.href)}\n        target=${l(this.target)}\n        download=${l(this.download)}\n        rel=${l(this.target ? \"noreferrer noopener\" : void 0)}\n        role=\"button\"\n        aria-disabled=${this.disabled ? \"true\" : \"false\"}\n        tabindex=${this.disabled ? \"-1\" : \"0\"}\n        @blur=${this.handleBlur}\n        @focus=${this.handleFocus}\n        @click=${this.handleClick}\n      >\n        <span part=\"prefix\" class=\"button__prefix\">\n          <slot name=\"prefix\"></slot>\n        </span>\n        <span part=\"label\" class=\"button__label\">\n          <slot></slot>\n        </span>\n        <span part=\"suffix\" class=\"button__suffix\">\n          <slot name=\"suffix\"></slot>\n        </span>\n        ${this.caret ? l2`\n                <span part=\"caret\" class=\"button__caret\">\n                  <svg\n                    viewBox=\"0 0 24 24\"\n                    fill=\"none\"\n                    stroke=\"currentColor\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  >\n                    <polyline points=\"6 9 12 15 18 9\"></polyline>\n                  </svg>\n                </span>\n              ` : \"\"}\n        ${this.loading ? l2`<sl-spinner></sl-spinner>` : \"\"}\n      </${tag}>\n    `;\n  }\n};\nSlButton.styles = button_styles_default;\n__decorateClass([\n  i(\".button\")\n], SlButton.prototype, \"button\", 2);\n__decorateClass([\n  t()\n], SlButton.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlButton.prototype, \"variant\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlButton.prototype, \"size\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"caret\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"loading\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"outline\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlButton.prototype, \"circle\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"type\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"value\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"href\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"target\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"download\", 2);\n__decorateClass([\n  e()\n], SlButton.prototype, \"form\", 2);\n__decorateClass([\n  e({ attribute: \"formaction\" })\n], SlButton.prototype, \"formAction\", 2);\n__decorateClass([\n  e({ attribute: \"formmethod\" })\n], SlButton.prototype, \"formMethod\", 2);\n__decorateClass([\n  e({ attribute: \"formnovalidate\", type: Boolean })\n], SlButton.prototype, \"formNoValidate\", 2);\n__decorateClass([\n  e({ attribute: \"formtarget\" })\n], SlButton.prototype, \"formTarget\", 2);\nSlButton = __decorateClass([\n  n(\"sl-button\")\n], SlButton);\n\nexport {\n  SlButton\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/spinner/spinner.styles.ts\nvar spinner_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --track-width: 2px;\n    --track-color: rgb(128 128 128 / 25%);\n    --indicator-color: var(--sl-color-primary-600);\n    --speed: 2s;\n\n    display: inline-flex;\n    width: 1em;\n    height: 1em;\n  }\n\n  .spinner {\n    flex: 1 1 auto;\n    height: 100%;\n    width: 100%;\n  }\n\n  .spinner__track,\n  .spinner__indicator {\n    fill: none;\n    stroke-width: var(--track-width);\n    r: calc(0.5em - var(--track-width) / 2);\n    cx: 0.5em;\n    cy: 0.5em;\n    transform-origin: 50% 50%;\n  }\n\n  .spinner__track {\n    stroke: var(--track-color);\n    transform-origin: 0% 0%;\n    mix-blend-mode: multiply;\n  }\n\n  .spinner__indicator {\n    stroke: var(--indicator-color);\n    stroke-linecap: round;\n    stroke-dasharray: 150% 75%;\n    animation: spin var(--speed) linear infinite;\n  }\n\n  @keyframes spin {\n    0% {\n      transform: rotate(0deg);\n      stroke-dasharray: 0.01em, 2.75em;\n    }\n\n    50% {\n      transform: rotate(450deg);\n      stroke-dasharray: 1.375em, 1.375em;\n    }\n\n    100% {\n      transform: rotate(1080deg);\n      stroke-dasharray: 0.01em, 2.75em;\n    }\n  }\n`;\n\nexport {\n  spinner_styles_default\n};\n","import {\n  spinner_styles_default\n} from \"./chunk.AMWHV6KC.js\";\nimport {\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/spinner/spinner.ts\nvar SlSpinner = class extends s {\n  render() {\n    return $`\n      <svg part=\"base\" class=\"spinner\" role=\"status\">\n        <circle class=\"spinner__track\"></circle>\n        <circle class=\"spinner__indicator\"></circle>\n      </svg>\n    `;\n  }\n};\nSlSpinner.styles = spinner_styles_default;\nSlSpinner = __decorateClass([\n  n(\"sl-spinner\")\n], SlSpinner);\n\nexport {\n  SlSpinner\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/split-panel/split-panel.styles.ts\nvar split_panel_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --divider-width: 4px;\n    --divider-hit-area: 12px;\n    --min: 0%;\n    --max: 100%;\n\n    display: grid;\n  }\n\n  .start,\n  .end {\n    overflow: hidden;\n  }\n\n  .divider {\n    flex: 0 0 var(--divider-width);\n    display: flex;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    background-color: var(--sl-color-neutral-200);\n    color: var(--sl-color-neutral-900);\n    z-index: 1;\n  }\n\n  .divider:focus {\n    outline: none;\n  }\n\n  :host(:not([disabled])) .divider${focusVisibleSelector} {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  :host([disabled]) .divider {\n    cursor: not-allowed;\n  }\n\n  /* Horizontal */\n  :host(:not([vertical], [disabled])) .divider {\n    cursor: col-resize;\n  }\n\n  :host(:not([vertical])) .divider::after {\n    display: flex;\n    content: '';\n    position: absolute;\n    height: 100%;\n    left: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);\n    width: var(--divider-hit-area);\n  }\n\n  /* Vertical */\n  :host([vertical]) {\n    flex-direction: column;\n  }\n\n  :host([vertical]:not([disabled])) .divider {\n    cursor: row-resize;\n  }\n\n  :host([vertical]) .divider::after {\n    content: '';\n    position: absolute;\n    width: 100%;\n    top: calc(var(--divider-hit-area) / -2 + var(--divider-width) / 2);\n    height: var(--divider-hit-area);\n  }\n`;\n\nexport {\n  split_panel_styles_default\n};\n","// src/internal/math.ts\nfunction clamp(value, min, max) {\n  if (value < min) {\n    return min;\n  }\n  if (value > max) {\n    return max;\n  }\n  return value;\n}\n\nexport {\n  clamp\n};\n","import {\n  split_panel_styles_default\n} from \"./chunk.AAC6N2EB.js\";\nimport {\n  drag\n} from \"./chunk.RBICTPSA.js\";\nimport {\n  clamp\n} from \"./chunk.43G6GBOK.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/split-panel/split-panel.ts\nvar SlSplitPanel = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.position = 50;\n    this.vertical = false;\n    this.disabled = false;\n    this.snapThreshold = 12;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.resizeObserver = new ResizeObserver((entries) => this.handleResize(entries));\n    this.updateComplete.then(() => this.resizeObserver.observe(this));\n    this.detectSize();\n    this.cachedPositionInPixels = this.percentageToPixels(this.position);\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.resizeObserver.unobserve(this);\n  }\n  detectSize() {\n    const { width, height } = this.getBoundingClientRect();\n    this.size = this.vertical ? height : width;\n  }\n  percentageToPixels(value) {\n    return this.size * (value / 100);\n  }\n  pixelsToPercentage(value) {\n    return value / this.size * 100;\n  }\n  handleDrag(event) {\n    if (this.disabled) {\n      return;\n    }\n    event.preventDefault();\n    drag(this, (x, y) => {\n      let newPositionInPixels = this.vertical ? y : x;\n      if (this.primary === \"end\") {\n        newPositionInPixels = this.size - newPositionInPixels;\n      }\n      if (this.snap) {\n        const snaps = this.snap.split(\" \");\n        snaps.forEach((value) => {\n          let snapPoint;\n          if (value.endsWith(\"%\")) {\n            snapPoint = this.size * (parseFloat(value) / 100);\n          } else {\n            snapPoint = parseFloat(value);\n          }\n          if (newPositionInPixels >= snapPoint - this.snapThreshold && newPositionInPixels <= snapPoint + this.snapThreshold) {\n            newPositionInPixels = snapPoint;\n          }\n        });\n      }\n      this.position = clamp(this.pixelsToPercentage(newPositionInPixels), 0, 100);\n    });\n  }\n  handleKeyDown(event) {\n    if (this.disabled) {\n      return;\n    }\n    if ([\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n      let newPosition = this.position;\n      const incr = (event.shiftKey ? 10 : 1) * (this.primary === \"end\" ? -1 : 1);\n      event.preventDefault();\n      if (event.key === \"ArrowLeft\" && !this.vertical || event.key === \"ArrowUp\" && this.vertical) {\n        newPosition -= incr;\n      }\n      if (event.key === \"ArrowRight\" && !this.vertical || event.key === \"ArrowDown\" && this.vertical) {\n        newPosition += incr;\n      }\n      if (event.key === \"Home\") {\n        newPosition = this.primary === \"end\" ? 100 : 0;\n      }\n      if (event.key === \"End\") {\n        newPosition = this.primary === \"end\" ? 0 : 100;\n      }\n      this.position = clamp(newPosition, 0, 100);\n    }\n  }\n  handlePositionChange() {\n    this.cachedPositionInPixels = this.percentageToPixels(this.position);\n    this.positionInPixels = this.percentageToPixels(this.position);\n    emit(this, \"sl-reposition\");\n  }\n  handlePositionInPixelsChange() {\n    this.position = this.pixelsToPercentage(this.positionInPixels);\n  }\n  handleVerticalChange() {\n    this.detectSize();\n  }\n  handleResize(entries) {\n    const { width, height } = entries[0].contentRect;\n    this.size = this.vertical ? height : width;\n    if (this.primary) {\n      this.position = this.pixelsToPercentage(this.cachedPositionInPixels);\n    }\n  }\n  render() {\n    const gridTemplate = this.vertical ? \"gridTemplateRows\" : \"gridTemplateColumns\";\n    const gridTemplateAlt = this.vertical ? \"gridTemplateColumns\" : \"gridTemplateRows\";\n    const primary = `\n      clamp(\n        0%,\n        clamp(\n          var(--min),\n          ${this.position}% - var(--divider-width) / 2,\n          var(--max)\n        ),\n        calc(100% - var(--divider-width))\n      )\n    `;\n    const secondary = \"auto\";\n    if (this.primary === \"end\") {\n      this.style[gridTemplate] = `${secondary} var(--divider-width) ${primary}`;\n    } else {\n      this.style[gridTemplate] = `${primary} var(--divider-width) ${secondary}`;\n    }\n    this.style[gridTemplateAlt] = \"\";\n    return $`\n      <div part=\"panel start\" class=\"start\">\n        <slot name=\"start\"></slot>\n      </div>\n\n      <div\n        part=\"divider\"\n        class=\"divider\"\n        tabindex=${l(this.disabled ? void 0 : \"0\")}\n        role=\"separator\"\n        aria-label=${this.localize.term(\"resize\")}\n        @keydown=${this.handleKeyDown}\n        @mousedown=${this.handleDrag}\n        @touchstart=${this.handleDrag}\n      >\n        <slot name=\"handle\"></slot>\n      </div>\n\n      <div part=\"panel end\" class=\"end\">\n        <slot name=\"end\"></slot>\n      </div>\n    `;\n  }\n};\nSlSplitPanel.styles = split_panel_styles_default;\n__decorateClass([\n  i(\".divider\")\n], SlSplitPanel.prototype, \"divider\", 2);\n__decorateClass([\n  e({ type: Number, reflect: true })\n], SlSplitPanel.prototype, \"position\", 2);\n__decorateClass([\n  e({ attribute: \"position-in-pixels\", type: Number })\n], SlSplitPanel.prototype, \"positionInPixels\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSplitPanel.prototype, \"vertical\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSplitPanel.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlSplitPanel.prototype, \"primary\", 2);\n__decorateClass([\n  e()\n], SlSplitPanel.prototype, \"snap\", 2);\n__decorateClass([\n  e({ type: Number, attribute: \"snap-threshold\" })\n], SlSplitPanel.prototype, \"snapThreshold\", 2);\n__decorateClass([\n  watch(\"position\")\n], SlSplitPanel.prototype, \"handlePositionChange\", 1);\n__decorateClass([\n  watch(\"positionInPixels\")\n], SlSplitPanel.prototype, \"handlePositionInPixelsChange\", 1);\n__decorateClass([\n  watch(\"vertical\")\n], SlSplitPanel.prototype, \"handleVerticalChange\", 1);\nSlSplitPanel = __decorateClass([\n  n(\"sl-split-panel\")\n], SlSplitPanel);\n\nexport {\n  SlSplitPanel\n};\n","// src/internal/drag.ts\nfunction drag(container, onMove) {\n  function move(pointerEvent) {\n    const dims = container.getBoundingClientRect();\n    const defaultView = container.ownerDocument.defaultView;\n    const offsetX = dims.left + defaultView.pageXOffset;\n    const offsetY = dims.top + defaultView.pageYOffset;\n    const x = pointerEvent.pageX - offsetX;\n    const y = pointerEvent.pageY - offsetY;\n    onMove(x, y);\n  }\n  function stop() {\n    document.removeEventListener(\"pointermove\", move);\n    document.removeEventListener(\"pointerup\", stop);\n  }\n  document.addEventListener(\"pointermove\", move, { passive: true });\n  document.addEventListener(\"pointerup\", stop);\n}\n\nexport {\n  drag\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/radio/radio.styles.ts\nvar radio_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .radio {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .radio__icon {\n    display: inline-flex;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n  }\n\n  .radio__icon svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  .radio__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    border-radius: 50%;\n    background-color: var(--sl-input-background-color);\n    color: transparent;\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .radio__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  /* Hover */\n  .radio:not(.radio--checked):not(.radio--disabled) .radio__control:hover {\n    border-color: var(--sl-input-border-color-hover);\n    background-color: var(--sl-input-background-color-hover);\n  }\n\n  /* Focus */\n  .radio:not(.radio--checked):not(.radio--disabled) .radio__input${focusVisibleSelector} ~ .radio__control {\n    border-color: var(--sl-input-border-color-focus);\n    background-color: var(--sl-input-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked */\n  .radio--checked .radio__control {\n    color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked + hover */\n  .radio.radio--checked:not(.radio--disabled) .radio__control:hover {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n  }\n\n  /* Checked + focus */\n  .radio.radio--checked:not(.radio--disabled) .radio__input${focusVisibleSelector} ~ .radio__control {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .radio--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  /* When the control isn't checked, hide the circle for Windows High Contrast mode a11y */\n  .radio:not(.radio--checked) svg circle {\n    opacity: 0;\n  }\n\n  .radio__label {\n    line-height: var(--sl-toggle-size);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  radio_styles_default\n};\n","import {\n  radio_styles_default\n} from \"./chunk.BN5S5DQC.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/radio/radio.ts\nvar SlRadio = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.checked = false;\n    this.invalid = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.setAttribute(\"role\", \"radio\");\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleClick() {\n    if (!this.disabled) {\n      this.checked = true;\n    }\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleCheckedChange() {\n    this.setAttribute(\"aria-checked\", this.checked ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      emit(this, \"sl-change\");\n    }\n  }\n  handleDisabledChange() {\n    this.setAttribute(\"aria-disabled\", this.disabled ? \"true\" : \"false\");\n    if (this.hasUpdated) {\n      this.input.disabled = this.disabled;\n      this.invalid = !this.input.checkValidity();\n    }\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      radio: true,\n      \"radio--checked\": this.checked,\n      \"radio--disabled\": this.disabled,\n      \"radio--focused\": this.hasFocus\n    })}\n      >\n        <input\n          class=\"radio__input\"\n          type=\"radio\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n        />\n        <span part=\"control\" class=\"radio__control\">\n          <span part=\"checked-icon\" class=\"radio__icon\">\n            <svg viewBox=\"0 0 16 16\">\n              <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                <g fill=\"currentColor\">\n                  <circle cx=\"8\" cy=\"8\" r=\"3.42857143\"></circle>\n                </g>\n              </g>\n            </svg>\n          </span>\n        </span>\n\n        <span part=\"label\" class=\"radio__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlRadio.styles = radio_styles_default;\n__decorateClass([\n  i(\".radio__input\")\n], SlRadio.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlRadio.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlRadio.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlRadio.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlRadio.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\")\n], SlRadio.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlRadio.prototype, \"handleDisabledChange\", 1);\nSlRadio = __decorateClass([\n  n(\"sl-radio\")\n], SlRadio);\n\nexport {\n  SlRadio\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/details/details.styles.ts\nvar details_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: block;\n  }\n\n  .details {\n    border: solid 1px var(--sl-color-neutral-200);\n    border-radius: var(--sl-border-radius-medium);\n    background-color: var(--sl-color-neutral-0);\n    overflow-anchor: none;\n  }\n\n  .details--disabled {\n    opacity: 0.5;\n  }\n\n  .details__header {\n    display: flex;\n    align-items: center;\n    border-radius: inherit;\n    padding: var(--sl-spacing-medium);\n    user-select: none;\n    cursor: pointer;\n  }\n\n  .details__header:focus {\n    outline: none;\n  }\n\n  .details__header${focusVisibleSelector} {\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  .details--disabled .details__header {\n    cursor: not-allowed;\n  }\n\n  .details--disabled .details__header${focusVisibleSelector} {\n    outline: none;\n    box-shadow: none;\n  }\n\n  .details__summary {\n    flex: 1 1 auto;\n    display: flex;\n    align-items: center;\n  }\n\n  .details__summary-icon {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    transition: var(--sl-transition-medium) transform ease;\n  }\n\n  .details--open .details__summary-icon {\n    transform: rotate(90deg);\n  }\n\n  .details__body {\n    overflow: hidden;\n  }\n\n  .details__content {\n    padding: var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  details_styles_default\n};\n","import {\n  details_styles_default\n} from \"./chunk.EPLHZYQM.js\";\nimport {\n  animateTo,\n  shimKeyframesHeightAuto,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/details/details.ts\nvar SlDetails = class extends s {\n  constructor() {\n    super(...arguments);\n    this.open = false;\n    this.disabled = false;\n  }\n  firstUpdated() {\n    this.body.hidden = !this.open;\n    this.body.style.height = this.open ? \"auto\" : \"0\";\n  }\n  async show() {\n    if (this.open || this.disabled) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open || this.disabled) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  handleSummaryClick() {\n    if (!this.disabled) {\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n      this.header.focus();\n    }\n  }\n  handleSummaryKeyDown(event) {\n    if (event.key === \"Enter\" || event.key === \" \") {\n      event.preventDefault();\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n    if (event.key === \"ArrowUp\" || event.key === \"ArrowLeft\") {\n      event.preventDefault();\n      this.hide();\n    }\n    if (event.key === \"ArrowDown\" || event.key === \"ArrowRight\") {\n      event.preventDefault();\n      this.show();\n    }\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      await stopAnimations(this.body);\n      this.body.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"details.show\");\n      await animateTo(this.body, shimKeyframesHeightAuto(keyframes, this.body.scrollHeight), options);\n      this.body.style.height = \"auto\";\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      await stopAnimations(this.body);\n      const { keyframes, options } = getAnimation(this, \"details.hide\");\n      await animateTo(this.body, shimKeyframesHeightAuto(keyframes, this.body.scrollHeight), options);\n      this.body.hidden = true;\n      this.body.style.height = \"auto\";\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      details: true,\n      \"details--open\": this.open,\n      \"details--disabled\": this.disabled\n    })}\n      >\n        <header\n          part=\"header\"\n          id=\"header\"\n          class=\"details__header\"\n          role=\"button\"\n          aria-expanded=${this.open ? \"true\" : \"false\"}\n          aria-controls=\"content\"\n          aria-disabled=${this.disabled ? \"true\" : \"false\"}\n          tabindex=${this.disabled ? \"-1\" : \"0\"}\n          @click=${this.handleSummaryClick}\n          @keydown=${this.handleSummaryKeyDown}\n        >\n          <div part=\"summary\" class=\"details__summary\">\n            <slot name=\"summary\">${this.summary}</slot>\n          </div>\n\n          <span part=\"summary-icon\" class=\"details__summary-icon\">\n            <sl-icon name=\"chevron-right\" library=\"system\"></sl-icon>\n          </span>\n        </header>\n\n        <div class=\"details__body\">\n          <div part=\"content\" id=\"content\" class=\"details__content\" role=\"region\" aria-labelledby=\"header\">\n            <slot></slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlDetails.styles = details_styles_default;\n__decorateClass([\n  i(\".details\")\n], SlDetails.prototype, \"details\", 2);\n__decorateClass([\n  i(\".details__header\")\n], SlDetails.prototype, \"header\", 2);\n__decorateClass([\n  i(\".details__body\")\n], SlDetails.prototype, \"body\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDetails.prototype, \"open\", 2);\n__decorateClass([\n  e()\n], SlDetails.prototype, \"summary\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlDetails.prototype, \"disabled\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlDetails.prototype, \"handleOpenChange\", 1);\nSlDetails = __decorateClass([\n  n(\"sl-details\")\n], SlDetails);\nsetDefaultAnimation(\"details.show\", {\n  keyframes: [\n    { height: \"0\", opacity: \"0\" },\n    { height: \"auto\", opacity: \"1\" }\n  ],\n  options: { duration: 250, easing: \"linear\" }\n});\nsetDefaultAnimation(\"details.hide\", {\n  keyframes: [\n    { height: \"auto\", opacity: \"1\" },\n    { height: \"0\", opacity: \"0\" }\n  ],\n  options: { duration: 250, easing: \"linear\" }\n});\n\nexport {\n  SlDetails\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/checkbox/checkbox.styles.ts\nvar checkbox_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .checkbox {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .checkbox__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n    border: solid var(--sl-input-border-width) var(--sl-input-border-color);\n    border-radius: 2px;\n    background-color: var(--sl-input-background-color);\n    color: var(--sl-color-neutral-0);\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .checkbox__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  .checkbox__control .checkbox__icon {\n    display: inline-flex;\n    width: var(--sl-toggle-size);\n    height: var(--sl-toggle-size);\n  }\n\n  .checkbox__control .checkbox__icon svg {\n    width: 100%;\n    height: 100%;\n  }\n\n  /* Hover */\n  .checkbox:not(.checkbox--checked):not(.checkbox--disabled) .checkbox__control:hover {\n    border-color: var(--sl-input-border-color-hover);\n    background-color: var(--sl-input-background-color-hover);\n  }\n\n  /* Focus */\n  .checkbox:not(.checkbox--checked):not(.checkbox--disabled)\n    .checkbox__input${focusVisibleSelector}\n    ~ .checkbox__control {\n    border-color: var(--sl-input-border-color-focus);\n    background-color: var(--sl-input-background-color-focus);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked/indeterminate */\n  .checkbox--checked .checkbox__control,\n  .checkbox--indeterminate .checkbox__control {\n    border-color: var(--sl-color-primary-600);\n    background-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked/indeterminate + hover */\n  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__control:hover,\n  .checkbox.checkbox--indeterminate:not(.checkbox--disabled) .checkbox__control:hover {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n  }\n\n  /* Checked/indeterminate + focus */\n  .checkbox.checkbox--checked:not(.checkbox--disabled) .checkbox__input${focusVisibleSelector} ~ .checkbox__control,\n  .checkbox.checkbox--indeterminate:not(.checkbox--disabled)\n    .checkbox__input${focusVisibleSelector}\n    ~ .checkbox__control {\n    border-color: var(--sl-color-primary-500);\n    background-color: var(--sl-color-primary-500);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .checkbox--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .checkbox__label {\n    line-height: var(--sl-toggle-size);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  checkbox_styles_default\n};\n","import {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  checkbox_styles_default\n} from \"./chunk.BXPHLFH5.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/checkbox/checkbox.ts\nvar SlCheckbox = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.required = false;\n    this.checked = false;\n    this.indeterminate = false;\n    this.invalid = false;\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleClick() {\n    this.checked = !this.checked;\n    this.indeterminate = false;\n    emit(this, \"sl-change\");\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleStateChange() {\n    this.invalid = !this.input.checkValidity();\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      checkbox: true,\n      \"checkbox--checked\": this.checked,\n      \"checkbox--disabled\": this.disabled,\n      \"checkbox--focused\": this.hasFocus,\n      \"checkbox--indeterminate\": this.indeterminate\n    })}\n      >\n        <input\n          class=\"checkbox__input\"\n          type=\"checkbox\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .indeterminate=${l2(this.indeterminate)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          .required=${this.required}\n          aria-checked=${this.checked ? \"true\" : \"false\"}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n        />\n\n        <span part=\"control\" class=\"checkbox__control\">\n          ${this.checked ? $`\n                <span part=\"checked-icon\" class=\"checkbox__icon\">\n                  <svg viewBox=\"0 0 16 16\">\n                    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\">\n                      <g stroke=\"currentColor\" stroke-width=\"2\">\n                        <g transform=\"translate(3.428571, 3.428571)\">\n                          <path d=\"M0,5.71428571 L3.42857143,9.14285714\"></path>\n                          <path d=\"M9.14285714,0 L3.42857143,9.14285714\"></path>\n                        </g>\n                      </g>\n                    </g>\n                  </svg>\n                </span>\n              ` : \"\"}\n          ${!this.checked && this.indeterminate ? $`\n                <span part=\"indeterminate-icon\" class=\"checkbox__icon\">\n                  <svg viewBox=\"0 0 16 16\">\n                    <g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\" stroke-linecap=\"round\">\n                      <g stroke=\"currentColor\" stroke-width=\"2\">\n                        <g transform=\"translate(2.285714, 6.857143)\">\n                          <path d=\"M10.2857143,1.14285714 L1.14285714,1.14285714\"></path>\n                        </g>\n                      </g>\n                    </g>\n                  </svg>\n                </span>\n              ` : \"\"}\n        </span>\n\n        <span part=\"label\" class=\"checkbox__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlCheckbox.styles = checkbox_styles_default;\n__decorateClass([\n  i('input[type=\"checkbox\"]')\n], SlCheckbox.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlCheckbox.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlCheckbox.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlCheckbox.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"indeterminate\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlCheckbox.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlCheckbox.prototype, \"handleDisabledChange\", 1);\n__decorateClass([\n  watch(\"checked\", { waitUntilFirstUpdate: true }),\n  watch(\"indeterminate\", { waitUntilFirstUpdate: true })\n], SlCheckbox.prototype, \"handleStateChange\", 1);\nSlCheckbox = __decorateClass([\n  n(\"sl-checkbox\")\n], SlCheckbox);\n\nexport {\n  SlCheckbox\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/switch/switch.styles.ts\nvar switch_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --height: var(--sl-toggle-size);\n    --thumb-size: calc(var(--sl-toggle-size) + 4px);\n    --width: calc(var(--height) * 2);\n\n    display: inline-block;\n  }\n\n  .switch {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-input-font-family);\n    font-size: var(--sl-input-font-size-medium);\n    font-weight: var(--sl-input-font-weight);\n    color: var(--sl-input-color);\n    vertical-align: middle;\n    cursor: pointer;\n  }\n\n  .switch__control {\n    flex: 0 0 auto;\n    position: relative;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    width: var(--width);\n    height: var(--height);\n    background-color: var(--sl-color-neutral-400);\n    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);\n    border-radius: var(--height);\n    transition: var(--sl-transition-fast) border-color, var(--sl-transition-fast) background-color;\n  }\n\n  .switch__control .switch__thumb {\n    width: var(--thumb-size);\n    height: var(--thumb-size);\n    background-color: var(--sl-color-neutral-0);\n    border-radius: 50%;\n    border: solid var(--sl-input-border-width) var(--sl-color-neutral-400);\n    transform: translateX(calc((var(--width) - var(--height)) / -2));\n    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) background-color,\n      var(--sl-transition-fast) border-color, var(--sl-transition-fast) box-shadow;\n  }\n\n  .switch__input {\n    position: absolute;\n    opacity: 0;\n    padding: 0;\n    margin: 0;\n    pointer-events: none;\n  }\n\n  /* Hover */\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover {\n    background-color: var(--sl-color-neutral-400);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__control:hover .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  /* Focus */\n  .switch:not(.switch--checked):not(.switch--disabled) .switch__input${focusVisibleSelector} ~ .switch__control {\n    background-color: var(--sl-color-neutral-400);\n    border-color: var(--sl-color-neutral-400);\n  }\n\n  .switch:not(.switch--checked):not(.switch--disabled)\n    .switch__input${focusVisibleSelector}\n    ~ .switch__control\n    .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Checked */\n  .switch--checked .switch__control {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch--checked .switch__control .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    transform: translateX(calc((var(--width) - var(--height)) / 2));\n  }\n\n  /* Checked + hover */\n  .switch.switch--checked:not(.switch--disabled) .switch__control:hover {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch.switch--checked:not(.switch--disabled) .switch__control:hover .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  /* Checked + focus */\n  .switch.switch--checked:not(.switch--disabled) .switch__input${focusVisibleSelector} ~ .switch__control {\n    background-color: var(--sl-color-primary-600);\n    border-color: var(--sl-color-primary-600);\n  }\n\n  .switch.switch--checked:not(.switch--disabled)\n    .switch__input${focusVisibleSelector}\n    ~ .switch__control\n    .switch__thumb {\n    background-color: var(--sl-color-neutral-0);\n    border-color: var(--sl-color-primary-600);\n    box-shadow: var(--sl-focus-ring);\n  }\n\n  /* Disabled */\n  .switch--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .switch__label {\n    line-height: var(--height);\n    margin-left: 0.5em;\n    user-select: none;\n  }\n`;\n\nexport {\n  switch_styles_default\n};\n","import {\n  switch_styles_default\n} from \"./chunk.7EHHFVMB.js\";\nimport {\n  l as l2\n} from \"./chunk.O2TDYW3A.js\";\nimport {\n  FormSubmitController\n} from \"./chunk.N2T2IJMA.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  l\n} from \"./chunk.R37SUKY2.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/switch/switch.ts\nvar SlSwitch = class extends s {\n  constructor() {\n    super(...arguments);\n    this.formSubmitController = new FormSubmitController(this, {\n      value: (control) => control.checked ? control.value : void 0\n    });\n    this.hasFocus = false;\n    this.disabled = false;\n    this.required = false;\n    this.checked = false;\n    this.invalid = false;\n  }\n  firstUpdated() {\n    this.invalid = !this.input.checkValidity();\n  }\n  click() {\n    this.input.click();\n  }\n  focus(options) {\n    this.input.focus(options);\n  }\n  blur() {\n    this.input.blur();\n  }\n  reportValidity() {\n    return this.input.reportValidity();\n  }\n  setCustomValidity(message) {\n    this.input.setCustomValidity(message);\n    this.invalid = !this.input.checkValidity();\n  }\n  handleBlur() {\n    this.hasFocus = false;\n    emit(this, \"sl-blur\");\n  }\n  handleCheckedChange() {\n    this.input.checked = this.checked;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleClick() {\n    this.checked = !this.checked;\n    emit(this, \"sl-change\");\n  }\n  handleDisabledChange() {\n    this.input.disabled = this.disabled;\n    this.invalid = !this.input.checkValidity();\n  }\n  handleFocus() {\n    this.hasFocus = true;\n    emit(this, \"sl-focus\");\n  }\n  handleKeyDown(event) {\n    if (event.key === \"ArrowLeft\") {\n      event.preventDefault();\n      this.checked = false;\n      emit(this, \"sl-change\");\n    }\n    if (event.key === \"ArrowRight\") {\n      event.preventDefault();\n      this.checked = true;\n      emit(this, \"sl-change\");\n    }\n  }\n  render() {\n    return $`\n      <label\n        part=\"base\"\n        class=${o({\n      switch: true,\n      \"switch--checked\": this.checked,\n      \"switch--disabled\": this.disabled,\n      \"switch--focused\": this.hasFocus\n    })}\n      >\n        <input\n          class=\"switch__input\"\n          type=\"checkbox\"\n          name=${l(this.name)}\n          value=${l(this.value)}\n          .checked=${l2(this.checked)}\n          .disabled=${this.disabled}\n          .required=${this.required}\n          role=\"switch\"\n          aria-checked=${this.checked ? \"true\" : \"false\"}\n          @click=${this.handleClick}\n          @blur=${this.handleBlur}\n          @focus=${this.handleFocus}\n          @keydown=${this.handleKeyDown}\n        />\n\n        <span part=\"control\" class=\"switch__control\">\n          <span part=\"thumb\" class=\"switch__thumb\"></span>\n        </span>\n\n        <span part=\"label\" class=\"switch__label\">\n          <slot></slot>\n        </span>\n      </label>\n    `;\n  }\n};\nSlSwitch.styles = switch_styles_default;\n__decorateClass([\n  i('input[type=\"checkbox\"]')\n], SlSwitch.prototype, \"input\", 2);\n__decorateClass([\n  t()\n], SlSwitch.prototype, \"hasFocus\", 2);\n__decorateClass([\n  e()\n], SlSwitch.prototype, \"name\", 2);\n__decorateClass([\n  e()\n], SlSwitch.prototype, \"value\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"required\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"checked\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlSwitch.prototype, \"invalid\", 2);\n__decorateClass([\n  watch(\"checked\", { waitUntilFirstUpdate: true })\n], SlSwitch.prototype, \"handleCheckedChange\", 1);\n__decorateClass([\n  watch(\"disabled\", { waitUntilFirstUpdate: true })\n], SlSwitch.prototype, \"handleDisabledChange\", 1);\nSlSwitch = __decorateClass([\n  n(\"sl-switch\")\n], SlSwitch);\n\nexport {\n  SlSwitch\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tooltip/tooltip.styles.ts\nvar tooltip_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --max-width: 20rem;\n    --hide-delay: 0ms;\n    --show-delay: 150ms;\n\n    display: contents;\n  }\n\n  .tooltip-target {\n    display: contents;\n  }\n\n  .tooltip-positioner {\n    position: absolute;\n    z-index: var(--sl-z-index-tooltip);\n    pointer-events: none;\n  }\n\n  .tooltip-positioner[data-placement^='top'] .tooltip {\n    transform-origin: bottom;\n  }\n\n  .tooltip-positioner[data-placement^='bottom'] .tooltip {\n    transform-origin: top;\n  }\n\n  .tooltip-positioner[data-placement^='left'] .tooltip {\n    transform-origin: right;\n  }\n\n  .tooltip-positioner[data-placement^='right'] .tooltip {\n    transform-origin: left;\n  }\n\n  .tooltip__content {\n    max-width: var(--max-width);\n    border-radius: var(--sl-tooltip-border-radius);\n    background-color: var(--sl-tooltip-background-color);\n    font-family: var(--sl-tooltip-font-family);\n    font-size: var(--sl-tooltip-font-size);\n    font-weight: var(--sl-tooltip-font-weight);\n    line-height: var(--sl-tooltip-line-height);\n    color: var(--sl-tooltip-color);\n    padding: var(--sl-tooltip-padding);\n  }\n\n  .tooltip__arrow {\n    position: absolute;\n    background: var(--sl-tooltip-background-color);\n    width: calc(var(--sl-tooltip-arrow-size) * 2);\n    height: calc(var(--sl-tooltip-arrow-size) * 2);\n    transform: rotate(45deg);\n    z-index: -1;\n  }\n`;\n\nexport {\n  tooltip_styles_default\n};\n","import {\n  tooltip_styles_default\n} from \"./chunk.ZCXSKGAA.js\";\nimport {\n  arrow,\n  autoUpdate,\n  computePosition,\n  flip,\n  offset,\n  shift\n} from \"./chunk.DIQYRTQ3.js\";\nimport {\n  animateTo,\n  parseDuration,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tooltip/tooltip.ts\nvar SlTooltip = class extends s {\n  constructor() {\n    super(...arguments);\n    this.content = \"\";\n    this.placement = \"top\";\n    this.disabled = false;\n    this.distance = 10;\n    this.open = false;\n    this.skidding = 0;\n    this.trigger = \"hover focus\";\n    this.hoist = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.handleBlur = this.handleBlur.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleMouseOver = this.handleMouseOver.bind(this);\n    this.handleMouseOut = this.handleMouseOut.bind(this);\n    this.updateComplete.then(() => {\n      this.addEventListener(\"blur\", this.handleBlur, true);\n      this.addEventListener(\"focus\", this.handleFocus, true);\n      this.addEventListener(\"click\", this.handleClick);\n      this.addEventListener(\"keydown\", this.handleKeyDown);\n      this.addEventListener(\"mouseover\", this.handleMouseOver);\n      this.addEventListener(\"mouseout\", this.handleMouseOut);\n      this.target = this.getTarget();\n    });\n  }\n  async firstUpdated() {\n    this.tooltip.hidden = !this.open;\n    if (this.open) {\n      await this.updateComplete;\n      this.updatePositioner();\n    }\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener(\"blur\", this.handleBlur, true);\n    this.removeEventListener(\"focus\", this.handleFocus, true);\n    this.removeEventListener(\"click\", this.handleClick);\n    this.removeEventListener(\"keydown\", this.handleKeyDown);\n    this.removeEventListener(\"mouseover\", this.handleMouseOver);\n    this.removeEventListener(\"mouseout\", this.handleMouseOut);\n    this.stopPositioner();\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  getTarget() {\n    const target = [...this.children].find((el) => el.tagName.toLowerCase() !== \"style\" && el.getAttribute(\"slot\") !== \"content\");\n    if (!target) {\n      throw new Error(\"Invalid tooltip target: no child element was found.\");\n    }\n    return target;\n  }\n  handleBlur() {\n    if (this.hasTrigger(\"focus\")) {\n      this.hide();\n    }\n  }\n  handleClick() {\n    if (this.hasTrigger(\"click\")) {\n      if (this.open) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n  }\n  handleFocus() {\n    if (this.hasTrigger(\"focus\")) {\n      this.show();\n    }\n  }\n  handleKeyDown(event) {\n    if (this.open && event.key === \"Escape\") {\n      event.stopPropagation();\n      this.hide();\n    }\n  }\n  handleMouseOver() {\n    if (this.hasTrigger(\"hover\")) {\n      const delay = parseDuration(getComputedStyle(this).getPropertyValue(\"--show-delay\"));\n      clearTimeout(this.hoverTimeout);\n      this.hoverTimeout = window.setTimeout(() => void this.show(), delay);\n    }\n  }\n  handleMouseOut() {\n    if (this.hasTrigger(\"hover\")) {\n      const delay = parseDuration(getComputedStyle(this).getPropertyValue(\"--hide-delay\"));\n      clearTimeout(this.hoverTimeout);\n      this.hoverTimeout = window.setTimeout(() => void this.hide(), delay);\n    }\n  }\n  async handleOpenChange() {\n    if (this.disabled) {\n      return;\n    }\n    if (this.open) {\n      emit(this, \"sl-show\");\n      await stopAnimations(this.tooltip);\n      this.startPositioner();\n      this.tooltip.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"tooltip.show\");\n      await animateTo(this.tooltip, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      await stopAnimations(this.tooltip);\n      const { keyframes, options } = getAnimation(this, \"tooltip.hide\");\n      await animateTo(this.tooltip, keyframes, options);\n      this.tooltip.hidden = true;\n      this.stopPositioner();\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  handleOptionsChange() {\n    this.updatePositioner();\n  }\n  handleDisabledChange() {\n    if (this.disabled && this.open) {\n      this.hide();\n    }\n  }\n  hasTrigger(triggerType) {\n    const triggers = this.trigger.split(\" \");\n    return triggers.includes(triggerType);\n  }\n  startPositioner() {\n    this.stopPositioner();\n    this.updatePositioner();\n    this.positionerCleanup = autoUpdate(this.target, this.positioner, this.updatePositioner.bind(this));\n  }\n  updatePositioner() {\n    if (!this.open || !this.target || !this.positioner) {\n      return;\n    }\n    computePosition(this.target, this.positioner, {\n      placement: this.placement,\n      middleware: [\n        offset({ mainAxis: this.distance, crossAxis: this.skidding }),\n        flip(),\n        shift(),\n        arrow({\n          element: this.arrow,\n          padding: 10\n        })\n      ],\n      strategy: this.hoist ? \"fixed\" : \"absolute\"\n    }).then(({ x, y, middlewareData, placement }) => {\n      const arrowX = middlewareData.arrow.x;\n      const arrowY = middlewareData.arrow.y;\n      const staticSide = { top: \"bottom\", right: \"left\", bottom: \"top\", left: \"right\" }[placement.split(\"-\")[0]];\n      this.positioner.setAttribute(\"data-placement\", placement);\n      Object.assign(this.positioner.style, {\n        position: this.hoist ? \"fixed\" : \"absolute\",\n        left: `${x}px`,\n        top: `${y}px`\n      });\n      Object.assign(this.arrow.style, {\n        left: typeof arrowX === \"number\" ? `${arrowX}px` : \"\",\n        top: typeof arrowY === \"number\" ? `${arrowY}px` : \"\",\n        right: \"\",\n        bottom: \"\",\n        [staticSide]: \"calc(var(--sl-tooltip-arrow-size) * -1)\"\n      });\n    });\n  }\n  stopPositioner() {\n    if (this.positionerCleanup) {\n      this.positionerCleanup();\n      this.positionerCleanup = void 0;\n      this.positioner.removeAttribute(\"data-placement\");\n    }\n  }\n  render() {\n    return $`\n      <div class=\"tooltip-target\" aria-describedby=\"tooltip\">\n        <slot></slot>\n      </div>\n\n      <div class=\"tooltip-positioner\">\n        <div\n          part=\"base\"\n          id=\"tooltip\"\n          class=${o({\n      tooltip: true,\n      \"tooltip--open\": this.open\n    })}\n          role=\"tooltip\"\n          aria-hidden=${this.open ? \"false\" : \"true\"}\n        >\n          <div class=\"tooltip__arrow\"></div>\n          <div class=\"tooltip__content\" aria-live=${this.open ? \"polite\" : \"off\"}>\n            <slot name=\"content\"> ${this.content} </slot>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n};\nSlTooltip.styles = tooltip_styles_default;\n__decorateClass([\n  i(\".tooltip-positioner\")\n], SlTooltip.prototype, \"positioner\", 2);\n__decorateClass([\n  i(\".tooltip\")\n], SlTooltip.prototype, \"tooltip\", 2);\n__decorateClass([\n  i(\".tooltip__arrow\")\n], SlTooltip.prototype, \"arrow\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"content\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"placement\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTooltip.prototype, \"disabled\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlTooltip.prototype, \"distance\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTooltip.prototype, \"open\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlTooltip.prototype, \"skidding\", 2);\n__decorateClass([\n  e()\n], SlTooltip.prototype, \"trigger\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTooltip.prototype, \"hoist\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlTooltip.prototype, \"handleOpenChange\", 1);\n__decorateClass([\n  watch(\"content\"),\n  watch(\"distance\"),\n  watch(\"hoist\"),\n  watch(\"placement\"),\n  watch(\"skidding\")\n], SlTooltip.prototype, \"handleOptionsChange\", 1);\n__decorateClass([\n  watch(\"disabled\")\n], SlTooltip.prototype, \"handleDisabledChange\", 1);\nSlTooltip = __decorateClass([\n  n(\"sl-tooltip\")\n], SlTooltip);\nsetDefaultAnimation(\"tooltip.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 150, easing: \"ease\" }\n});\nsetDefaultAnimation(\"tooltip.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 150, easing: \"ease\" }\n});\n\nexport {\n  SlTooltip\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/card/card.styles.ts\nvar card_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --border-color: var(--sl-color-neutral-200);\n    --border-radius: var(--sl-border-radius-medium);\n    --border-width: 1px;\n    --padding: var(--sl-spacing-large);\n\n    display: inline-block;\n  }\n\n  .card {\n    display: flex;\n    flex-direction: column;\n    background-color: var(--sl-panel-background-color);\n    box-shadow: var(--sl-shadow-x-small);\n    border: solid var(--border-width) var(--border-color);\n    border-radius: var(--border-radius);\n  }\n\n  .card__image {\n    border-top-left-radius: var(--border-radius);\n    border-top-right-radius: var(--border-radius);\n    margin: calc(-1 * var(--border-width));\n    overflow: hidden;\n  }\n\n  .card__image ::slotted(img) {\n    display: block;\n    width: 100%;\n  }\n\n  .card:not(.card--has-image) .card__image {\n    display: none;\n  }\n\n  .card__header {\n    border-bottom: solid var(--border-width) var(--border-color);\n    padding: calc(var(--padding) / 2) var(--padding);\n  }\n\n  .card:not(.card--has-header) .card__header {\n    display: none;\n  }\n\n  .card__body {\n    padding: var(--padding);\n  }\n\n  .card--has-footer .card__footer {\n    border-top: solid var(--border-width) var(--border-color);\n    padding: var(--padding);\n  }\n\n  .card:not(.card--has-footer) .card__footer {\n    display: none;\n  }\n`;\n\nexport {\n  card_styles_default\n};\n","import {\n  card_styles_default\n} from \"./chunk.UZCU23EP.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/card/card.ts\nvar SlCard = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"footer\", \"header\", \"image\");\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      card: true,\n      \"card--has-footer\": this.hasSlotController.test(\"footer\"),\n      \"card--has-image\": this.hasSlotController.test(\"image\"),\n      \"card--has-header\": this.hasSlotController.test(\"header\")\n    })}\n      >\n        <div part=\"image\" class=\"card__image\">\n          <slot name=\"image\"></slot>\n        </div>\n\n        <div part=\"header\" class=\"card__header\">\n          <slot name=\"header\"></slot>\n        </div>\n\n        <div part=\"body\" class=\"card__body\">\n          <slot></slot>\n        </div>\n\n        <div part=\"footer\" class=\"card__footer\">\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlCard.styles = card_styles_default;\nSlCard = __decorateClass([\n  n(\"sl-card\")\n], SlCard);\n\nexport {\n  SlCard\n};\n","const Delta = Quill.import('delta');\n\nclass ModuloAspasCurvas {\n  quill: Quill;\n  options: any;\n  enabled = true;\n\n  constructor(quill: any, options: any) {\n    this.quill = quill;\n    this.options = options;\n\n    this.quill.root.addEventListener('keydown', (event: any): any => {\n      const range = this.quill?.getSelection();\n      const key = event.key;\n      if (!this.enabled || !range || !['\"', \"'\"].includes(key)) return;\n\n      this.tratarAspas(range, key);\n      event.preventDefault();\n    });\n\n    // O cdigo abaixo  uma outra forma de fazer a mesma coisa.\n    // Se o cdigo abaixo for usado, o cdigo acima (addEventListener e todo o seu contedo) deve ser comentado.\n\n    // this.quill.keyboard.addBinding({ key: 192 }, { shiftKey: true }, (range: any, context: any): boolean => this.tratarAspas(range, '\"'));\n    // this.quill.keyboard.addBinding({ key: 192 }, { shiftKey: false }, (range: any, context: any): boolean => this.tratarAspas(range, \"'\"));\n  }\n\n  // Imita autoformao de aspas curvas do Word\n  tratarAspas(range: any, caracter: string): boolean {\n    if (!this.enabled) return true;\n\n    const isAspasDuplas = caracter === '\"';\n    const abreAspas = isAspasDuplas ? '' : '';\n    const fechaAspas = isAspasDuplas ? '' : '';\n\n    const texto = this.quill?.getText().substring(0, range.index);\n\n    const aspasTransformada = !texto || texto?.match(/\\s$/g) ? abreAspas : fechaAspas;\n\n    const format = this.quill?.getFormat(range);\n\n    // Insere o caracter normalmente\n    let delta = new Delta().retain(range.index).delete(range.length).insert(caracter, format);\n    this.quill?.updateContents(delta as any, Quill.sources.USER);\n    this.quill?.history.cutoff();\n\n    // Troca por aspas curvas\n    delta = new Delta().retain(range.index).delete(1).insert(aspasTransformada, format);\n    this.quill?.updateContents(delta as any, Quill.sources.USER);\n\n    this.quill?.setSelection(range.index + 1, Quill.sources.SILENT);\n\n    return false;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n}\n\nexport { ModuloAspasCurvas };\n","export const generateUUID = (): string => {\n  let uuid = '';\n\n  for (let i = 0; i < 32; i++) {\n    const randomNumber = (Math.random() * 16) | 0;\n    const value = (i === 12 ? 4 : i === 16 ? (randomNumber & 3) | 8 : randomNumber).toString(16);\n\n    uuid += (i === 8 || i === 12 || i === 16 || i === 20 ? '-' : '') + value;\n  }\n\n  return uuid;\n};\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable eqeqeq */\n\nimport { generateUUID } from '../../util/uuid';\n\n/* eslint-disable prefer-const */\nconst Delta = Quill.import('delta');\nconst Parchment = Quill.import('parchment');\nconst Module = Quill.import('core/module');\nconst Inline = Quill.import('blots/inline');\nconst Clipboard = Quill.import('modules/clipboard');\nconst Keyboard = Quill.import('modules/keyboard');\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\nclass RevisaoUtil {\n  static valueToAttributes(value, domNode) {\n    if (!value) return;\n    const partes = value.split('|');\n    domNode.setAttribute('usuario', partes[0]);\n    domNode.setAttribute('date', partes[1]);\n    domNode.setAttribute('title', 'Reviso de ' + partes[0] + ' em ' + this.formatDDMMYYYYAndTime(new Date(partes[1])));\n    domNode.setAttribute('id-revisao', partes[2]);\n  }\n\n  static formats(domNode) {\n    if (domNode?.hasAttribute('usuario') && domNode?.hasAttribute('date')) {\n      return [domNode.getAttribute('usuario'), domNode.getAttribute('date'), domNode.getAttribute('id-revisao')].join('|');\n    }\n  }\n\n  static padTo2Digits(num) {\n    return num.toString().padStart(2, '0');\n  }\n\n  static formatDate(date) {\n    return (\n      [date.getFullYear(), RevisaoUtil.padTo2Digits(date.getMonth() + 1), RevisaoUtil.padTo2Digits(date.getDate())].join('-') +\n      ' ' +\n      [\n        RevisaoUtil.padTo2Digits(date.getHours()),\n        RevisaoUtil.padTo2Digits(date.getMinutes()),\n        // RevisaoUtil.padTo2Digits(date.getSeconds()),\n        '00',\n      ].join(':')\n    );\n  }\n\n  static formatDDMMYYYYAndTime(date: Date): string {\n    const data = [this.padTo2Digits(date.getDate()), this.padTo2Digits(date.getMonth() + 1), date.getFullYear()].join('/');\n    const hora = [this.padTo2Digits(date.getHours()), this.padTo2Digits(date.getMinutes())].join(':');\n    return `${data} ${hora}`;\n  }\n}\n\n// --------------------------------------------------------------------------------------------------------------------\n// Fornatos de reviso inline\n\nclass InlineRevisionBaseFormat extends Inline {\n  static blotName = 'revisionBaseFormat';\n  static tagName = '';\n\n  static create(value) {\n    let node = super.create();\n    RevisaoUtil.valueToAttributes(value, node);\n    return node;\n  }\n\n  static formats(domNode) {\n    return RevisaoUtil.formats(domNode);\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) return super.format(name, value);\n    RevisaoUtil.valueToAttributes(value, this.domNode);\n  }\n\n  optimize(context) {\n    const blotName = this.statics.blotName;\n\n    if (blotName === this.next?.statics?.blotName) {\n      const formatoAtual = this.formats();\n      this.next.domNode.setAttribute('date', this.domNode.getAttribute('date'));\n      this.next.domNode.setAttribute('usuario', this.domNode.getAttribute('usuario'));\n      this.next.format(blotName, formatoAtual[blotName]);\n    }\n\n    super.optimize(context);\n  }\n}\n\nclass InsBlot extends InlineRevisionBaseFormat {}\nInsBlot.blotName = 'added';\nInsBlot.tagName = 'ins';\n\nclass DelBlot extends InlineRevisionBaseFormat {}\nDelBlot.blotName = 'removed';\nDelBlot.tagName = 'del';\n\nconst cursorEstaSobreBlotDel = quill => {\n  const range = quill.getSelection();\n  const blot = range && quill.getLeaf(range.index)[0];\n  return blot?.statics.blotName === DelBlot.blotName || blot?.parent?.statics.blotName === DelBlot.blotName;\n};\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\n// --------------------------------------------------------------------------------------------------------------------\n// Mdulo de reviso\n\n// A classe abaixo adiciona um listener para o evento keydown para ser executado antes do listener padro do Quill\nclass CustomKeyboard extends Keyboard {\n  listen() {\n    this.quill.root.addEventListener('keydown', this.onKeyDown.bind(this));\n    this.quill.root.addEventListener('keypress', this.onKeyPress.bind(this));\n    super.listen();\n  }\n\n  onKeyDown(e) {\n    if (this.quill?.revisao?.gerenciarKeydown && this.quill?.revisao?.emRevisao) {\n      this.quill.revisao.handleKeyDown(e);\n    }\n  }\n\n  onKeyPress(e) {\n    if (cursorEstaSobreBlotDel(this.quill)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n  }\n}\n\nclass CustomClipboard extends Clipboard {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('cut', this.onCut.bind(this));\n  }\n\n  onCut(e) {\n    if (this.quill?.revisao?.emRevisao) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      const range = this.quill.getSelection();\n      if (range?.length) {\n        this.copiarSelecaoParaClipboard();\n        this.quill?.revisao?.handleRemove(range, null, null);\n      }\n    }\n  }\n\n  onPaste(e) {\n    if (cursorEstaSobreBlotDel(this.quill)) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n    super.onPaste(e);\n  }\n\n  copiarSelecaoParaClipboard() {\n    const selection = window.getSelection();\n\n    if (selection) {\n      if (navigator.clipboard) {\n        // Cria um elemento div temporrio para armazenar a seleo\n        const tempElement = document.createElement('div');\n\n        // Clona a seleo e a insere no elemento div temporrio\n        for (let i = 0; i < selection.rangeCount; i++) {\n          tempElement.appendChild(selection.getRangeAt(i).cloneContents());\n        }\n\n        // Copia o contedo do elemento div temporrio para a rea de transferncia\n        navigator.clipboard\n          .write([\n            new ClipboardItem({\n              'text/plain': new Blob([tempElement.innerText], { type: 'text/plain' }),\n              'text/html': new Blob([tempElement.outerHTML], { type: 'text/html' }),\n            }),\n          ])\n          .finally(() => tempElement.remove());\n      } else {\n        console.log('Clipboard API no suportada');\n        document.execCommand('copy'); // Alternativa para o caso de no suportar a Clipboard API\n      }\n    }\n  }\n}\n\nclass ModuloRevisao extends Module {\n  quill;\n  options;\n  ignorarEventoTextChange = false;\n  emRevisao = false;\n  gerenciarKeydown = true;\n  usuario;\n  tableModule;\n  tableTrick;\n  isAbrindoTexto = false;\n\n  static register() {\n    Quill.register('modules/keyboard', CustomKeyboard, true);\n    Quill.register('modules/clipboard', CustomClipboard, true);\n    Quill.register(InsBlot, true);\n    Quill.register(DelBlot, true);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill = quill;\n    this.options = options;\n\n    if (!options || !Object.keys(options).length) return;\n\n    // this.quill.options.formats.push(...['added', 'removed']);\n\n    this.usuario = options.usuario;\n    this.emRevisao = options.emRevisao ?? false;\n    this.gerenciarKeydown = options.gerenciarKeydown ?? true;\n    this.tableModule = options.tableModule;\n    this.tableTrick = options.tableTrick;\n\n    this.quill.revisao = this;\n\n    this.addClipboardMatcher();\n    this.addKeyboardBindings(this.quill);\n\n    this.quill.on('text-change', this.onTextChange.bind(this));\n\n    this.quill.root.addEventListener('click', this.tratarClick.bind(this));\n\n    if (this.tableModule) {\n      const toolbar = this.quill?.getModule('toolbar');\n\n      toolbar.addHandler('table', (value: any): any => {\n        const quill = this.quill as any;\n        const isInsertTable = (value = ''): any => value.includes('newtable_');\n        const isInTable = (quill: any): any => quill && quill.getSelection(true) && quill.getFormat(quill.getSelection(true)).td;\n\n        if (isInsertTable(value) && isInTable(quill)) {\n          return false;\n        }\n        quill?.revisao?.setIgnorarEventoTextChange(true);\n        return this.tableTrick.table_handler(value, quill);\n      });\n    }\n  }\n\n  isTagRevisao(param: HTMLElement | string) {\n    const tagName = typeof param === 'string' ? param : param?.tagName;\n    return ['INS', 'DEL'].includes(tagName);\n  }\n\n  getTagRevisaoMaisProxima(elemento: any) {\n    if (!elemento || ['BODY', 'HTML'].includes(elemento.tagName)) return null;\n    if (this.isTagRevisao(elemento)) return elemento;\n    return this.getTagRevisaoMaisProxima(elemento.parentNode);\n  }\n\n  tratarClick(event: any) {\n    const elRevisao = this.getTagRevisaoMaisProxima(event.target);\n    elRevisao && this.mostrarTooltipRevisao(elRevisao);\n  }\n\n  revisarTodos(aceitar: boolean) {\n    this.revisar(this.getRevisoes(), aceitar, true);\n  }\n\n  revisar(elementosRevisao: HTMLElement[], aceitar: boolean, todos = false) {\n    if (!this.emRevisao) return;\n\n    elementosRevisao\n      .filter(el => this.isTagRevisao(el))\n      .forEach(elRevisao => {\n        const isTagIns = elRevisao.tagName === 'INS';\n        const blot = Quill.find(elRevisao);\n        this.ignorarEventoTextChange = true;\n\n        if (blot !== null) {\n          if ((aceitar && !isTagIns) || (!aceitar && isTagIns)) {\n            const index = this.quill.getIndex(blot);\n            const length = blot.length();\n            this.quill.updateContents(new Delta().retain(index).delete(length), 'user');\n          } else {\n            blot.format(isTagIns ? 'added' : 'removed', false, 'user');\n          }\n        }\n      });\n\n    //fora o revisar quando  \"todos\" e ainda sobrou revises no quill\n    if (todos && this.getRevisoes().length > 0) {\n      this.revisar(this.getRevisoes(), aceitar);\n    }\n  }\n\n  padTo2Digits(num: number): string {\n    return num.toString().padStart(2, '0');\n  }\n\n  private mostrarTooltipRevisao(elRevisao: HTMLElement): void {\n    if (!elRevisao) return;\n\n    const tooltip = document.createElement('div');\n    tooltip.classList.add('tooltip-revisao');\n\n    const data = new Date(elRevisao.getAttribute('date') || '');\n\n    tooltip.innerHTML = `\n        <style>\n        .tooltip-revisao {\n          position: absolute;\n          border: 1px solid black;\n          background-color: white;\n          padding: 10px;\n          border-radius: 4px;\n          z-index: 9999;\n          font-size: 0.9rem;\n          box-shadow: 0 2px 10px rgba(0,0,0,0.3);\n          max-width: 300px;\n          transition: all 0.3s ease-in-out;\n        }\n        .tooltip-revisao__actions {\n          display: flex;\n          flex-direction: row;\n          gap: 0.5rem;\n          align-items: center;\n          justify-content: center;\n        }\n        .tooltip-revisao__actions button {\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border: 1px solid #ccc;\n          border-radius: 15px;\n          background-color: #eee;\n          cursor: pointer;\n          padding: 0;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao__actions svg {\n          fill: currentColor;\n          width: 24px;\n          height: 24px;\n        }\n        .tooltip-revisao button:hover {\n          background-color: #ddd;\n        }\n        .tooltip-revisao button:active {\n          background-color: #ccc;\n        }\n        .tooltip-revisao__body {\n          display: flex;\n          flex-direction: row;\n          gap: 1rem;\n        }\n        .tooltip-revisao__autor {\n          font-weight: bold;\n        }\n        .tooltip-revisao__data {\n          font-size: 0.8rem;\n          color: #666;\n        }\n      </style>\n      <div class=\"tooltip-revisao__body\" role=\"tooltip\">\n        <div>\n          <div class=\"tooltip-revisao__autor\">${elRevisao.getAttribute('usuario')}</div>\n          <div class=\"tooltip-revisao__data\">${RevisaoUtil.formatDDMMYYYYAndTime(data)}</div>\n        </div>\n        <div class=\"tooltip-revisao__actions\">\n          <button id=\"button-rejeitar-revisao\" aria-label=\"Rejeitar reviso\" title=\"Rejeitar reviso\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-x\" viewBox=\"0 0 16 16\">\n              <path d=\"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708\"/>\n            </svg>\n          </button>\n          <button id=\"button-aceitar-revisao\" aria-label=\"Aceitar reviso\" title=\"Aceitar reviso\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-check\" viewBox=\"0 0 16 16\">\n              <path d=\"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n      `;\n\n    tooltip.style.opacity = '0';\n    document.body.appendChild(tooltip);\n\n    const fnActionRevisao = (event: any, aceitar: boolean) => {\n      const elementos = [...this.quill.root.querySelectorAll(`${elRevisao.tagName}[id-revisao=\"${elRevisao.getAttribute('id-revisao')}\"]`)];\n      this.revisar(elementos, aceitar);\n      closeTooltip(event);\n    };\n\n    tooltip.querySelector('#button-rejeitar-revisao')!.addEventListener('click', (event: any) => fnActionRevisao(event, false));\n    tooltip.querySelector('#button-aceitar-revisao')!.addEventListener('click', (event: any) => fnActionRevisao(event, true));\n\n    this.ajustaPosicaoTooltip(tooltip, elRevisao);\n\n    const closeTooltip = (e: Event) => {\n      if (e.type === 'click') {\n        limpaTooltip();\n      } else if (e.type === 'keydown' && (e as KeyboardEvent).key === 'Escape') {\n        limpaTooltip();\n      }\n      setTimeout(() => this.quill.root.focus(), 0);\n    };\n\n    const limpaTooltip = () => {\n      tooltip.style.opacity = '0';\n      setTimeout(() => {\n        tooltip.remove();\n        document.removeEventListener('click', closeTooltip);\n        document.removeEventListener('keydown', closeTooltip);\n      }, 300);\n    };\n\n    setTimeout(() => {\n      document.addEventListener('click', closeTooltip);\n      document.addEventListener('keydown', closeTooltip);\n      tooltip.style.opacity = '1';\n    }, 0);\n\n    window.addEventListener('resize', () => this.ajustaPosicaoTooltip(tooltip, elRevisao));\n  }\n\n  private ajustaPosicaoTooltip(tooltip: HTMLElement, button: HTMLElement): void {\n    const rect = button.getBoundingClientRect();\n    const offset = 10;\n\n    // Abrir para cima por padro, a menos que no haja espao suficiente\n    let topOffset = rect.top - tooltip.clientHeight - offset;\n    if (topOffset < window.scrollY) {\n      topOffset = rect.bottom + offset;\n    }\n    tooltip.style.top = `${topOffset + window.scrollY}px`;\n\n    // Ajustar horizontalmente se estiver muito prximo  borda direita\n    let leftOffset = rect.left + rect.width / 2 - tooltip.clientWidth / 2;\n    if (leftOffset + tooltip.clientWidth > window.innerWidth) {\n      leftOffset = window.innerWidth - tooltip.clientWidth - offset;\n    } else if (leftOffset < 0) {\n      leftOffset = offset;\n    }\n    tooltip.style.left = `${leftOffset + window.scrollX}px`;\n  }\n\n  createTooltip() {\n    Array.from(this.querySelectorAll('#tooltipAcceptRefuse')).forEach(el => this.removeChild(el));\n\n    const tooltipElem = document.createElement('tooltip');\n    tooltipElem.id = 'tooltipAcceptRefuse';\n\n    document.body.appendChild(tooltipElem);\n\n    const content = document.createRange().createContextualFragment(`\n    <style>\n    .tooltip {\n      position: relative;\n      display: inline-block;\n      cursor: pointer;\n    }\n\n    .tooltip .tooltiptext {\n      display: none;\n      width: 120px;\n      background-color: #333;\n      color: #fff;\n      text-align: center;\n      border-radius: 6px;\n      padding: 5px;\n      position: absolute;\n      z-index: 1;\n      top: calc(100% + 5px);\n      left: 50%;\n      margin-left: -60px;\n    }\n\n    </style>\n    <div class=\"tooltip\" id=\"tooltip\">\n      Hover sobre mim\n      <span class=\"tooltiptext\" id=\"tooltipContent\">\n        <button onclick=\"botaoClicado(1)\">Boto 1</button>\n        <button onclick=\"botaoClicado(2)\">Boto 2</button>\n      </span>\n    </div>\n\n    <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n  `);\n  }\n\n  handleKeyDown(e) {\n    // No implementado\n  }\n\n  addClipboardMatcher() {\n    // Handle para tratar colagem de trechos com tag <del>\n    this.quill.clipboard.addMatcher('DEL', (node, delta) => {\n      if (this.isAbrindoTexto) {\n        return delta;\n      } else {\n        let match = Parchment.query(node);\n        if (match == null || match.blotName !== 'removed') {\n          return delta;\n        }\n\n        const id = generateUUID();\n        const ops = delta.ops.reduce((acc, op) => {\n          if (op.insert) {\n            delete op.attributes.background;\n            delete op.attributes.removed;\n            if (this.emRevisao) {\n              op.attributes.added = this.buildAttributes(id);\n            }\n            acc.push(op);\n          }\n          return acc;\n        }, []);\n\n        return new Delta(ops);\n      }\n    });\n  }\n\n  addKeyboardBindings(quill) {\n    function addBindingOnTop(keyBinding, context, handler) {\n      quill.keyboard.addBinding(keyBinding, context, handler);\n      const key = Object.keys(quill.keyboard.bindings)\n        .map(k => quill.keyboard.bindings[k])\n        .flat()\n        .find(binding => binding.handler === handler).key;\n      const newBinding = (quill.keyboard.bindings[key] || []).pop();\n      quill.keyboard.bindings[key].unshift(newBinding);\n    }\n\n    addBindingOnTop({ key: 'Backspace' }, null, (range, context) => this.handleRemove(range, context, 'Backspace'));\n    addBindingOnTop({ key: 'Delete' }, null, (range, context) => this.handleRemove(range, context, 'Delete'));\n\n    // Undo\n    addBindingOnTop({ key: 'z', shortKey: true }, null, (range, context) => this.handleUndo(range, context));\n\n    // Redo\n    addBindingOnTop({ key: 'z', shortKey: true, shiftKey: true }, null, (range, context) => this.handleRedo(range, context));\n    addBindingOnTop({ key: 'y', shortKey: true }, null, (range, context) => this.handleRedo(range, context));\n  }\n\n  handleUndo(range, context) {\n    const hasModuloTabela = this.quill.getModule('table') && this.tableModule;\n\n    if (this.emRevisao) {\n      this.ignorarEventoTextChange = true;\n    }\n\n    if (hasModuloTabela) {\n      return this.tableModule.keyboardHandler(this.quill, 'undo', range, context);\n    } else {\n      this.quill.history.undo();\n    }\n  }\n\n  handleRedo(range, context) {\n    const hasModuloTabela = this.quill.getModule('table') && this.tableModule;\n\n    if (this.emRevisao) {\n      this.ignorarEventoTextChange = true;\n    }\n\n    if (hasModuloTabela) {\n      return this.tableModule.keyboardHandler(this.quill, 'redo', range, context);\n    } else {\n      this.quill.history.redo();\n    }\n  }\n\n  buildAttributes(id = '') {\n    return this.usuario + '|' + RevisaoUtil.formatDate(new Date()) + ' |' + id;\n  }\n\n  handleRemove(range, context, key) {\n    const deslocamento = key === 'Delete' ? 1 : -1;\n    const quill = this.quill;\n    if (this.emRevisao) {\n      const blot = quill.getLeaf(range.index)[0];\n      const isEmbedBlot = ['image'].includes(blot.statics.blotName);\n      const index = (blot.text || isEmbedBlot) && deslocamento === -1 && !range.length ? range.index - 1 : range.index;\n      let posicao = index;\n\n      if (index < 0 || index >= quill.getLength()) return true;\n      const delta = quill.getContents(index, range.length || 1);\n      const id = generateUUID();\n      const ops = delta.ops.reduce((acc, op) => {\n        const numChars = typeof op.insert === 'string' ? op.insert.length : 1;\n        if (op.attributes?.added) {\n          acc.push({ delete: numChars });\n        } else {\n          if (op.attributes?.list && !blot.text) {\n            acc.push({ retain: numChars, attributes: { list: false } });\n          } else if (!blot.text && !isEmbedBlot) {\n            acc.push({ delete: numChars });\n          } else {\n            acc.push({\n              retain: numChars,\n              attributes: { ...(op.attributes || {}), removed: this.buildAttributes(id) },\n            });\n\n            if (deslocamento === 1) {\n              posicao += numChars;\n            }\n          }\n        }\n        return acc;\n      }, []);\n      index && ops.unshift({ retain: index });\n\n      this.ignorarEventoTextChange = true;\n\n      quill.updateContents({ ops }, 'user');\n      quill.setSelection(posicao);\n      return false;\n    }\n\n    return true;\n  }\n\n  onTextChange(delta, oldContent, source) {\n    const isInsertJaFormatadoEmModoDeRevisao = delta.ops.find(op => op.insert)?.attributes?.added;\n    const apenasNovaLinha = delta.ops.length === 2 && delta.ops[0].retain && delta.ops[1].insert === '\\n';\n    const quill = this.quill;\n    if (this.ignorarEventoTextChange || !this.emRevisao || isInsertJaFormatadoEmModoDeRevisao || !delta.ops.length || apenasNovaLinha) {\n      this.ignorarEventoTextChange = false;\n      return;\n    }\n\n    if (quill.history.stack.undo.length === 0) return;\n\n    let numCaracteresRemovidos = 0;\n\n    this.ignorarEventoTextChange = true;\n\n    let itemUndo = quill.history.stack.undo.pop();\n\n    const redo = JSON.parse(JSON.stringify(itemUndo.redo));\n\n    quill.history.cutoff();\n    quill.history.ignoreChange = true;\n    quill.updateContents(itemUndo.undo, 'silent');\n    quill.history.ignoreChange = false;\n\n    if (!quill.history.options?.userOnly) quill.history.stack.undo.pop();\n\n    this.ignorarEventoTextChange = true;\n\n    let rev = { ops: [] };\n    let idx = 0;\n    const id = generateUUID();\n    rev = redo.ops.reduce((acc, op) => {\n      const length = op.retain || op.delete || (typeof op.insert === 'string' ? op.insert.length : 1);\n      if (op.retain && op.attributes?.list) {\n        // idx += 1;\n        acc.ops.push({ retain: op.retain, attributes: { ...(op.attributes || {}) } });\n        idx += op.retain;\n      } else if (op.retain) {\n        acc.ops.push({ retain: op.retain, attributes: { ...(op.attributes || {}) } });\n        idx += op.retain;\n      } else if (op.delete) {\n        // Para refazer trechos removidos em modo de reviso  preciso identificar o que est sendo removido\n        const contentDeletedRange = quill.getContents(idx, op.delete);\n        contentDeletedRange.ops.forEach(op2 => {\n          if (op2.insert && op2.attributes?.added) {\n            // Deixa remover contedo adicionado em modo de reviso\n            acc.ops.push({ delete: op2.insert.length });\n          } else if (op2.insert && !op2.attributes?.added) {\n            // No deixa remover contedo adicionado FORA modo de reviso\n            // Formata como removido em modo de reviso\n            acc.ops.push({ retain: op2.insert.length, attributes: { removed: this.buildAttributes(id) } });\n            idx += op2.insert.length;\n            numCaracteresRemovidos += op2.insert.length;\n          } else {\n            acc.ops.push({ retain: op2.retain || op2.delete, attributes: { removed: this.buildAttributes(id) } });\n            idx += op2.retain || op2.delete;\n          }\n        });\n      } else if (op.insert && !op.attributes?.added) {\n        op.attributes = { ...(op.attributes || {}), added: this.buildAttributes(id), removed: false };\n        acc.ops.push(op);\n        idx += length;\n      }\n      return acc;\n    }, rev);\n\n    quill.history.cutoff();\n    quill.updateContents(rev, 'user');\n\n    setTimeout(() => {\n      quill.setSelection(idx - numCaracteresRemovidos, 0);\n      this.ignorarEventoTextChange = false;\n    }, 0);\n  }\n\n  setUsuario(usuario) {\n    this.usuario = usuario;\n  }\n\n  setEmRevisao(emRevisao) {\n    this.emRevisao = emRevisao;\n  }\n\n  setIgnorarEventoTextChange(ignorarEventoTextChange) {\n    this.ignorarEventoTextChange = ignorarEventoTextChange;\n  }\n\n  getQuantidadeRevisoes() {\n    return this.getRevisoesSemDuplicidade(this.getRevisoes()).length;\n  }\n\n  getRevisoes() {\n    const cursorCode = 65279;\n    return [...this.quill.root.querySelectorAll('ins, del')].filter(el => el.innerText?.charCodeAt(0) !== cursorCode);\n  }\n\n  private getRevisoesSemDuplicidade(listElements: any[]) {\n    const revisoesSemDuplicidade = [] as any;\n\n    listElements.forEach(element => {\n      if (!revisoesSemDuplicidade.find(r => r.getAttribute('id-revisao') === element.getAttribute('id-revisao') && r.nodeName === element.nodeName)) {\n        revisoesSemDuplicidade.push(element);\n      }\n    });\n\n    return revisoesSemDuplicidade;\n  }\n}\n\n// --------------------------------------------------------------------------------------------------------------------\n// --------------------------------------------------------------------------------------------------------------------\n\nQuill.register('modules/revisao', ModuloRevisao, true);\n\n// --------------------------------------------------------------------------------------------------------------------\n\nexport { ModuloRevisao };\n","function Diff() {}\nDiff.prototype = {\n  diff: function diff(oldString, newString) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = options;\n    var self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function () {\n          callback(undefined, value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    } // Allow subclasses to massage the input prior to running\n\n\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n    var newLen = newString.length,\n        oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n\n    if (options.maxEditLength) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{\n        value: this.join(newString),\n        count: newString.length\n      }]);\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath = void 0;\n\n        var addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n\n\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  pushComponent: function pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n    var newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n        commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n  equals: function equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n\n    return ret;\n  },\n  castInput: function castInput(value) {\n    return value;\n  },\n  tokenize: function tokenize(value) {\n    return value.split('');\n  },\n  join: function join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  var componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n\n      if (componentPos && components[componentPos - 1].added) {\n        var tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  } // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n\n\n  var lastComponent = components[componentLen - 1];\n\n  if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\nvar characterDiff = new Diff();\nfunction diffChars(oldStr, newStr, options) {\n  return characterDiff.diff(oldStr, newStr, options);\n}\n\nfunction generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (var name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n\n  return defaults;\n}\n\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\n\nvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\nvar reWhitespace = /\\S/;\nvar wordDiff = new Diff();\n\nwordDiff.equals = function (left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n\n  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n};\n\nwordDiff.tokenize = function (value) {\n  // All whitespace symbols except newline group into one token, each newline - in separate token\n  var tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n  for (var i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nfunction diffWords(oldStr, newStr, options) {\n  options = generateOptions(options, {\n    ignoreWhitespace: true\n  });\n  return wordDiff.diff(oldStr, newStr, options);\n}\nfunction diffWordsWithSpace(oldStr, newStr, options) {\n  return wordDiff.diff(oldStr, newStr, options);\n}\n\nvar lineDiff = new Diff();\n\nlineDiff.tokenize = function (value) {\n  var retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  } // Merge the content and line separators into single tokens\n\n\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\nfunction diffTrimmedLines(oldStr, newStr, callback) {\n  var options = generateOptions(callback, {\n    ignoreWhitespace: true\n  });\n  return lineDiff.diff(oldStr, newStr, options);\n}\n\nvar sentenceDiff = new Diff();\n\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nfunction diffSentences(oldStr, newStr, callback) {\n  return sentenceDiff.diff(oldStr, newStr, callback);\n}\n\nvar cssDiff = new Diff();\n\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nfunction diffCss(oldStr, newStr, callback) {\n  return cssDiff.diff(oldStr, newStr, callback);\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar objectPrototypeToString = Object.prototype.toString;\nvar jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\njsonDiff.useLongestToken = true;\njsonDiff.tokenize = lineDiff.tokenize;\n\njsonDiff.castInput = function (value) {\n  var _this$options = this.options,\n      undefinedReplacement = _this$options.undefinedReplacement,\n      _this$options$stringi = _this$options.stringifyReplacer,\n      stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n    return typeof v === 'undefined' ? undefinedReplacement : v;\n  } : _this$options$stringi;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\n\njsonDiff.equals = function (left, right) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n};\n\nfunction diffJson(oldObj, newObj, options) {\n  return jsonDiff.diff(oldObj, newObj, options);\n} // This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  var i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  var canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (_typeof(obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n\n    var sortedKeys = [],\n        _key;\n\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(_key)) {\n        sortedKeys.push(_key);\n      }\n    }\n\n    sortedKeys.sort();\n\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n\n  return canonicalizedObj;\n}\n\nvar arrayDiff = new Diff();\n\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\n\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\n\nfunction diffArrays(oldArr, newArr, callback) {\n  return arrayDiff.diff(oldArr, newArr, callback);\n}\n\nfunction parsePatch(uniDiff) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      list = [],\n      i = 0;\n\n  function parseIndex() {\n    var index = {};\n    list.push(index); // Parse diff metadata\n\n    while (i < diffstr.length) {\n      var line = diffstr[i]; // File header found, end parsing diff metadata\n\n      if (/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/.test(line)) {\n        break;\n      } // Diff index\n\n\n      var header = /^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/.exec(line);\n\n      if (header) {\n        index.index = header[1];\n      }\n\n      i++;\n    } // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n\n\n    parseFileHeader(index);\n    parseFileHeader(index); // Parse hunks\n\n    index.hunks = [];\n\n    while (i < diffstr.length) {\n      var _line = diffstr[i];\n\n      if (/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/.test(_line)) {\n        break;\n      } else if (/^@@/.test(_line)) {\n        index.hunks.push(parseHunk());\n      } else if (_line && options.strict) {\n        // Ignore unexpected content unless in strict mode\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(_line));\n      } else {\n        i++;\n      }\n    }\n  } // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n\n\n  function parseFileHeader(index) {\n    var fileHeader = /^(---|\\+\\+\\+)\\s+(.*)$/.exec(diffstr[i]);\n\n    if (fileHeader) {\n      var keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      var data = fileHeader[2].split('\\t', 2);\n      var fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n\n      if (/^\".*\"$/.test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n      i++;\n    }\n  } // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n\n\n  function parseHunk() {\n    var chunkHeaderIndex = i,\n        chunkHeaderLine = diffstr[i++],\n        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n    var hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: [],\n      linedelimiters: []\n    }; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n\n    var addCount = 0,\n        removeCount = 0;\n\n    for (; i < diffstr.length; i++) {\n      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n      // But they could be the header for the next file. Therefore prune such cases out.\n      if (diffstr[i].indexOf('--- ') === 0 && i + 2 < diffstr.length && diffstr[i + 1].indexOf('+++ ') === 0 && diffstr[i + 2].indexOf('@@') === 0) {\n        break;\n      }\n\n      var operation = diffstr[i].length == 0 && i != diffstr.length - 1 ? ' ' : diffstr[i][0];\n\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        break;\n      }\n    } // Handle the empty block count case\n\n\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    } // Perform optional sanity checking\n\n\n    if (options.strict) {\n      if (addCount !== hunk.newLines) {\n        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n\n      if (removeCount !== hunk.oldLines) {\n        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n    }\n\n    return hunk;\n  }\n\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n\n  return list;\n}\n\n// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nfunction distanceIterator (start, minLine, maxLine) {\n  var wantForward = true,\n      backwardExhausted = false,\n      forwardExhausted = false,\n      localOffset = 1;\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      } // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n\n\n      if (start + localOffset <= maxLine) {\n        return localOffset;\n      }\n\n      forwardExhausted = true;\n    }\n\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      } // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n\n\n      if (minLine <= start - localOffset) {\n        return -localOffset++;\n      }\n\n      backwardExhausted = true;\n      return iterator();\n    } // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n\n  };\n}\n\nfunction applyPatch(source, uniDiff) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n\n    uniDiff = uniDiff[0];\n  } // Apply the diff to the input\n\n\n  var lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      hunks = uniDiff.hunks,\n      compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {\n    return line === patchContent;\n  },\n      errorCount = 0,\n      fuzzFactor = options.fuzzFactor || 0,\n      minLine = 0,\n      offset = 0,\n      removeEOFNL,\n      addEOFNL;\n  /**\n   * Checks if the hunk exactly fits on the provided location\n   */\n\n\n  function hunkFits(hunk, toPos) {\n    for (var j = 0; j < hunk.lines.length; j++) {\n      var line = hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line;\n\n      if (operation === ' ' || operation === '-') {\n        // Context sanity check\n        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n          errorCount++;\n\n          if (errorCount > fuzzFactor) {\n            return false;\n          }\n        }\n\n        toPos++;\n      }\n    }\n\n    return true;\n  } // Search best fit offsets for each hunk based on the previous ones\n\n\n  for (var i = 0; i < hunks.length; i++) {\n    var hunk = hunks[i],\n        maxLine = lines.length - hunk.oldLines,\n        localOffset = 0,\n        toPos = offset + hunk.oldStart - 1;\n    var iterator = distanceIterator(toPos, minLine, maxLine);\n\n    for (; localOffset !== undefined; localOffset = iterator()) {\n      if (hunkFits(hunk, toPos + localOffset)) {\n        hunk.offset = offset += localOffset;\n        break;\n      }\n    }\n\n    if (localOffset === undefined) {\n      return false;\n    } // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n\n\n    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n  } // Apply patch hunks\n\n\n  var diffOffset = 0;\n\n  for (var _i = 0; _i < hunks.length; _i++) {\n    var _hunk = hunks[_i],\n        _toPos = _hunk.oldStart + _hunk.offset + diffOffset - 1;\n\n    diffOffset += _hunk.newLines - _hunk.oldLines;\n\n    for (var j = 0; j < _hunk.lines.length; j++) {\n      var line = _hunk.lines[j],\n          operation = line.length > 0 ? line[0] : ' ',\n          content = line.length > 0 ? line.substr(1) : line,\n          delimiter = _hunk.linedelimiters[j];\n\n      if (operation === ' ') {\n        _toPos++;\n      } else if (operation === '-') {\n        lines.splice(_toPos, 1);\n        delimiters.splice(_toPos, 1);\n        /* istanbul ignore else */\n      } else if (operation === '+') {\n        lines.splice(_toPos, 0, content);\n        delimiters.splice(_toPos, 0, delimiter);\n        _toPos++;\n      } else if (operation === '\\\\') {\n        var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;\n\n        if (previousOperation === '+') {\n          removeEOFNL = true;\n        } else if (previousOperation === '-') {\n          addEOFNL = true;\n        }\n      }\n    }\n  } // Handle EOFNL insertion/removal\n\n\n  if (removeEOFNL) {\n    while (!lines[lines.length - 1]) {\n      lines.pop();\n      delimiters.pop();\n    }\n  } else if (addEOFNL) {\n    lines.push('');\n    delimiters.push('\\n');\n  }\n\n  for (var _k = 0; _k < lines.length - 1; _k++) {\n    lines[_k] = lines[_k] + delimiters[_k];\n  }\n\n  return lines.join('');\n} // Wrapper that supports multiple file patches via callbacks.\n\nfunction applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  var currentIndex = 0;\n\n  function processIndex() {\n    var index = uniDiff[currentIndex++];\n\n    if (!index) {\n      return options.complete();\n    }\n\n    options.loadFile(index, function (err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n\n      var updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function (err) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        processIndex();\n      });\n    });\n  }\n\n  processIndex();\n}\n\nfunction structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n\n  var diff = diffLines(oldStr, newStr, options);\n\n  if (!diff) {\n    return;\n  }\n\n  diff.push({\n    value: '',\n    lines: []\n  }); // Append an empty value to make cleanup easier\n\n  function contextLines(lines) {\n    return lines.map(function (entry) {\n      return ' ' + entry;\n    });\n  }\n\n  var hunks = [];\n  var oldRangeStart = 0,\n      newRangeStart = 0,\n      curRange = [],\n      oldLine = 1,\n      newLine = 1;\n\n  var _loop = function _loop(i) {\n    var current = diff[i],\n        lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n    current.lines = lines;\n\n    if (current.added || current.removed) {\n      var _curRange;\n\n      // If we have previous context, start with that\n      if (!oldRangeStart) {\n        var prev = diff[i - 1];\n        oldRangeStart = oldLine;\n        newRangeStart = newLine;\n\n        if (prev) {\n          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n          oldRangeStart -= curRange.length;\n          newRangeStart -= curRange.length;\n        }\n      } // Output our changes\n\n\n      (_curRange = curRange).push.apply(_curRange, _toConsumableArray(lines.map(function (entry) {\n        return (current.added ? '+' : '-') + entry;\n      }))); // Track the updated file position\n\n\n      if (current.added) {\n        newLine += lines.length;\n      } else {\n        oldLine += lines.length;\n      }\n    } else {\n      // Identical context lines. Track line changes\n      if (oldRangeStart) {\n        // Close out any changes that have been output (or join overlapping)\n        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n          var _curRange2;\n\n          // Overlapping\n          (_curRange2 = curRange).push.apply(_curRange2, _toConsumableArray(contextLines(lines)));\n        } else {\n          var _curRange3;\n\n          // end the range and output\n          var contextSize = Math.min(lines.length, options.context);\n\n          (_curRange3 = curRange).push.apply(_curRange3, _toConsumableArray(contextLines(lines.slice(0, contextSize))));\n\n          var hunk = {\n            oldStart: oldRangeStart,\n            oldLines: oldLine - oldRangeStart + contextSize,\n            newStart: newRangeStart,\n            newLines: newLine - newRangeStart + contextSize,\n            lines: curRange\n          };\n\n          if (i >= diff.length - 2 && lines.length <= options.context) {\n            // EOF is inside this hunk\n            var oldEOFNewline = /\\n$/.test(oldStr);\n            var newEOFNewline = /\\n$/.test(newStr);\n            var noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n\n            if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n              // special case: old has no eol and no trailing context; no-nl can end up before adds\n              // however, if the old file is empty, do not output the no-nl line\n              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n            }\n\n            if (!oldEOFNewline && !noNlBeforeAdds || !newEOFNewline) {\n              curRange.push('\\\\ No newline at end of file');\n            }\n          }\n\n          hunks.push(hunk);\n          oldRangeStart = 0;\n          newRangeStart = 0;\n          curRange = [];\n        }\n      }\n\n      oldLine += lines.length;\n      newLine += lines.length;\n    }\n  };\n\n  for (var i = 0; i < diff.length; i++) {\n    _loop(i);\n  }\n\n  return {\n    oldFileName: oldFileName,\n    newFileName: newFileName,\n    oldHeader: oldHeader,\n    newHeader: newHeader,\n    hunks: hunks\n  };\n}\nfunction formatPatch(diff) {\n  var ret = [];\n\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n  for (var i = 0; i < diff.hunks.length; i++) {\n    var hunk = diff.hunks[i]; // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n\n    ret.push('@@ -' + hunk.oldStart + ',' + hunk.oldLines + ' +' + hunk.newStart + ',' + hunk.newLines + ' @@');\n    ret.push.apply(ret, hunk.lines);\n  }\n\n  return ret.join('\\n') + '\\n';\n}\nfunction createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n}\nfunction createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n\nfunction arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  return arrayStartsWith(a, b);\n}\nfunction arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n\n  for (var i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction calcLineCount(hunk) {\n  var _calcOldNewLineCount = calcOldNewLineCount(hunk.lines),\n      oldLines = _calcOldNewLineCount.oldLines,\n      newLines = _calcOldNewLineCount.newLines;\n\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\nfunction merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n  var ret = {}; // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n\n  ret.hunks = [];\n  var mineIndex = 0,\n      theirsIndex = 0,\n      mineOffset = 0,\n      theirsOffset = 0;\n\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    var mineCurrent = mine.hunks[mineIndex] || {\n      oldStart: Infinity\n    },\n        theirsCurrent = theirs.hunks[theirsIndex] || {\n      oldStart: Infinity\n    };\n\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      var mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n      ret.hunks.push(mergedHunk);\n    }\n  }\n\n  return ret;\n}\n\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if (/^@@/m.test(param) || /^Index:/m.test(param)) {\n      return parsePatch(param)[0];\n    }\n\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n\n    return structuredPatch(undefined, undefined, base, param);\n  }\n\n  return param;\n}\n\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\n\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {\n      mine: mine,\n      theirs: theirs\n    };\n  }\n}\n\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart && test.oldStart + test.oldLines < check.oldStart;\n}\n\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart,\n    oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset,\n    newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\n\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  var mine = {\n    offset: mineOffset,\n    lines: mineLines,\n    index: 0\n  },\n      their = {\n    offset: theirOffset,\n    lines: theirLines,\n    index: 0\n  }; // Handle any leading content\n\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine); // Now in the overlap content. Scan through and select the best changes from each.\n\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    var mineCurrent = mine.lines[mine.index],\n        theirCurrent = their.lines[their.index];\n\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+') && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      var _hunk$lines;\n\n      // Mine inserted\n      (_hunk$lines = hunk.lines).push.apply(_hunk$lines, _toConsumableArray(collectChange(mine)));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      var _hunk$lines2;\n\n      // Theirs inserted\n      (_hunk$lines2 = hunk.lines).push.apply(_hunk$lines2, _toConsumableArray(collectChange(their)));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  } // Now push anything that may be remaining\n\n\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n  calcLineCount(hunk);\n}\n\nfunction mutualChange(hunk, mine, their) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectChange(their);\n\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (arrayStartsWith(myChanges, theirChanges) && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      var _hunk$lines3;\n\n      (_hunk$lines3 = hunk.lines).push.apply(_hunk$lines3, _toConsumableArray(myChanges));\n\n      return;\n    } else if (arrayStartsWith(theirChanges, myChanges) && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      var _hunk$lines4;\n\n      (_hunk$lines4 = hunk.lines).push.apply(_hunk$lines4, _toConsumableArray(theirChanges));\n\n      return;\n    }\n  } else if (arrayEqual(myChanges, theirChanges)) {\n    var _hunk$lines5;\n\n    (_hunk$lines5 = hunk.lines).push.apply(_hunk$lines5, _toConsumableArray(myChanges));\n\n    return;\n  }\n\n  conflict(hunk, myChanges, theirChanges);\n}\n\nfunction removal(hunk, mine, their, swap) {\n  var myChanges = collectChange(mine),\n      theirChanges = collectContext(their, myChanges);\n\n  if (theirChanges.merged) {\n    var _hunk$lines6;\n\n    (_hunk$lines6 = hunk.lines).push.apply(_hunk$lines6, _toConsumableArray(theirChanges.merged));\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\n\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\n\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\n\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    var line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\n\nfunction collectChange(state) {\n  var ret = [],\n      operation = state.lines[state.index][0];\n\n  while (state.index < state.lines.length) {\n    var line = state.lines[state.index]; // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction collectContext(state, matchChanges) {\n  var changes = [],\n      merged = [],\n      matchIndex = 0,\n      contextChanges = false,\n      conflicted = false;\n\n  while (matchIndex < matchChanges.length && state.index < state.lines.length) {\n    var change = state.lines[state.index],\n        match = matchChanges[matchIndex]; // Once we've hit our add, then we are done\n\n    if (match[0] === '+') {\n      break;\n    }\n\n    contextChanges = contextChanges || change[0] !== ' ';\n    merged.push(match);\n    matchIndex++; // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n\n    if (change[0] === '+') {\n      conflicted = true;\n\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n\n  if ((matchChanges[matchIndex] || '')[0] === '+' && contextChanges) {\n    conflicted = true;\n  }\n\n  if (conflicted) {\n    return changes;\n  }\n\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n\n  return {\n    merged: merged,\n    changes: changes\n  };\n}\n\nfunction allRemoves(changes) {\n  return changes.reduce(function (prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\n\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (var i = 0; i < delta; i++) {\n    var changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n\n  state.index += delta;\n  return true;\n}\n\nfunction calcOldNewLineCount(lines) {\n  var oldLines = 0;\n  var newLines = 0;\n  lines.forEach(function (line) {\n    if (typeof line !== 'string') {\n      var myCount = calcOldNewLineCount(line.mine);\n      var theirCount = calcOldNewLineCount(line.theirs);\n\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n  return {\n    oldLines: oldLines,\n    newLines: newLines\n  };\n}\n\n// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nfunction convertChangesToDMP(changes) {\n  var ret = [],\n      change,\n      operation;\n\n  for (var i = 0; i < changes.length; i++) {\n    change = changes[i];\n\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n\n    ret.push([operation, change.value]);\n  }\n\n  return ret;\n}\n\nfunction convertChangesToXML(changes) {\n  var ret = [];\n\n  for (var i = 0; i < changes.length; i++) {\n    var change = changes[i];\n\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  var n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n  return n;\n}\n\nexport { Diff, applyPatch, applyPatches, canonicalize, convertChangesToDMP, convertChangesToXML, createPatch, createTwoFilesPatch, diffArrays, diffChars, diffCss, diffJson, diffLines, diffSentences, diffTrimmedLines, diffWords, diffWordsWithSpace, merge, parsePatch, structuredPatch };\n","import { diffChars, diffWords } from 'diff';\n\nexport function containsTags(text: string): boolean {\n  return /<.+>/g.test(text?.trim());\n}\n\nexport function endsWithPunctuation(texto: string): boolean {\n  return /[.,:]\\s*$/.test(texto);\n}\n\nexport function isValidHTML(html: string): boolean {\n  const doc = document.createElement('div');\n  doc.innerHTML = html;\n  return doc.innerHTML === html;\n}\n\nexport function isHTMLParagraph(html: string): boolean {\n  return html.trim() !== '' && html.trim().startsWith('<p>') && html.trim().endsWith('</p>');\n}\n\nexport function isValidHtmlParagraph(html: string): boolean {\n  return isHTMLParagraph(html) && isValidHTML(html);\n}\n\nexport function getTextoSemHtml(html: string): string {\n  return removeEspacosDuplicados(html.replace(/(<([^>]+)>)/gi, '').trim());\n}\n\nexport function getLastCharacter(texto: string): string {\n  const soTexto = texto.replace(/(<([^>]+)>)/gi, '').trim();\n  return soTexto.length > 0 ? soTexto.charAt(soTexto.length - 1) : '';\n}\n\nexport function endsWithWord(texto: string, indicadores: string[]): boolean {\n  return indicadores.map(word => new RegExp(addSpaceRegex(escapeRegex(word)) + '\\\\s*$').test(getTextoSemHtml(texto))).filter(r => r)[0] === true;\n}\n\nexport function converteIndicadorParaTexto(indicadores: string[]): string {\n  switch (indicadores[0].trim()) {\n    case '.':\n      return 'ponto';\n    case ':':\n      return 'dois pontos';\n    case ';':\n      return 'ponto e vrgula';\n    case ',':\n      return 'vrgula';\n    default:\n      return indicadores[0].trim();\n  }\n}\n\nexport function escapeRegex(str: string): string {\n  return str.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n\nexport function addSpaceRegex(str: string): string {\n  return str.replace(/\\s+/g, '\\\\s+');\n}\n\nexport function primeiraLetraMaiuscula(str: string): string {\n  if (!str) {\n    return '';\n  }\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}\n\nexport function join(list: string[]): string {\n  let str = '';\n  list.forEach(s => {\n    str += s;\n  });\n  return str;\n}\n\nexport function removeEspacosDuplicados(str: string): string {\n  return str.replace(/\\s{2,}/g, ' ');\n}\n\nexport function removeAllHtmlTags(texto: string): string {\n  return texto.replace(/(<([^>]+)>)/gi, '');\n}\n\nexport const removeAllHtmlTagsExcept = (texto: string, tags: string[]): string => {\n  // const regex = new RegExp(`(<(?!${tags.join('|')})[^>]+>)`, 'gi');\n  const regex = new RegExp(`<(?!(?:/?(${tags.join('|')})\\\\b))[^>]*>`, 'gi');\n  return texto.replace(regex, '');\n};\n\nexport class StringBuilder {\n  private strs = new Array<string>();\n\n  constructor(str?: string) {\n    if (str) {\n      this.append(str);\n    }\n  }\n\n  append(str: string | undefined): void {\n    if (str) {\n      this.strs.push(str);\n    }\n  }\n\n  toString(): string {\n    return join(this.strs);\n  }\n}\n\nexport const REGEX_ACCENTS = /[\\u0300-\\u036f]/g;\n\nexport const removeTagEConteudo = (texto: string, tag: string): string => {\n  return texto.replace(new RegExp(`<${tag}[^<]*(?:(?!</${tag}>)<[^<]*)*</${tag}>`, 'gi'), '');\n};\n\nexport const removeTagStyle = (texto: string): string => removeTagEConteudo(texto, 'style');\n\nexport const removeTagScript = (texto: string): string => removeTagEConteudo(texto, 'script');\n\nexport const removeTagHead = (texto: string): string => removeTagEConteudo(texto, 'head');\n\nexport const getIniciais = (texto = ''): string => {\n  return (\n    texto\n      .match(/\\b[A-Z][a-z]*\\b/g)\n      ?.map(word => word.charAt(0))\n      .filter((_, i, arr) => i === 0 || i === arr.length - 1)\n      .join('') || ''\n  );\n};\n\nexport const textoDiffAsHtml = (texto1: string, texto2: string, typeDiff: 'diffChars' | 'diffWords'): string => {\n  const fn = typeDiff === 'diffChars' ? diffChars : diffWords;\n  const buildPartAdded = (str: string): string => `<ins>${str}</ins>`; //`<span class=\"texto-inserido\">${str}</span>`;\n  const buildPartRemoved = (str: string): string => `<del>${str}</del>`; //`<span classs=\"texto-removido\">${str}</span>`;\n\n  const diff = fn(texto1, texto2);\n  return diff.map(part => (part.added ? buildPartAdded(part.value) : part.removed ? buildPartRemoved(part.value) : part.value)).join('');\n};\n\nexport const substituiEspacosEntreTagsPorNbsp = (texto: string, tags?: string[]): string => {\n  if (tags) {\n    const regex = new RegExp(`(?<=<(${tags.join('|')})>) +(?=</\\\\1>)`, 'gi');\n    return texto.replace(regex, texto => texto.replace(/ /g, '&nbsp;'));\n  } else {\n    return texto.replace(/ /g, '&nbsp;');\n  }\n};\n\nexport const substituiMultiplosEspacosPorNbsp = (texto: string): string => {\n  return texto.replace(/ +/g, texto => texto.replace(/ /g, '&nbsp;'));\n};\n\n/**\n * Faz escape de caracteres especiais do html\n *\n * @param texto\n */\nexport const encodeHtml = (texto: string): string => {\n  const p = document.createElement('p');\n  p.textContent = texto;\n  return p.innerHTML || '';\n};\n\n/**\n * Desfaz escape de caracteres especiais do html\n *\n * @param texto\n */\nexport const decodeHtml = (texto: string): string => {\n  const txt = document.createElement('textarea');\n  txt.innerHTML = texto;\n  return txt.value;\n};\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,e=Symbol(),n=new Map;class s{constructor(t,n){if(this._$cssResult$=!0,n!==e)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t}get styleSheet(){let e=n.get(this.cssText);return t&&void 0===e&&(n.set(this.cssText,e=new CSSStyleSheet),e.replaceSync(this.cssText)),e}toString(){return this.cssText}}const o=t=>new s(\"string\"==typeof t?t:t+\"\",e),r=(t,...n)=>{const o=1===t.length?t[0]:n.reduce(((e,n,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(n)+t[s+1]),t[0]);return new s(o,e)},i=(e,n)=>{t?e.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((t=>{const n=document.createElement(\"style\"),s=window.litNonce;void 0!==s&&n.setAttribute(\"nonce\",s),n.textContent=t.cssText,e.appendChild(n)}))},S=t?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const n of t.cssRules)e+=n.cssText;return o(e)})(t):t;export{s as CSSResult,i as adoptStyles,r as css,S as getCompatibleStyle,t as supportsAdoptingStyleSheets,o as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window.trustedTypes,r=e?e.emptyScript:\"\",h=window.reactiveElementPolyfillSupport,o={toAttribute(t,i){switch(i){case Boolean:t=t?r:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},n=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:o,reflect:!1,hasChanged:n};class a extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var i;null!==(i=this.l)&&void 0!==i||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Eh(s,i);void 0!==e&&(this._$Eu.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Eh(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$Eg)&&void 0!==i?i:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$Eg)||void 0===i||i.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Et.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$ES(t,i,s=l){var e,r;const h=this.constructor._$Eh(t,s);if(void 0!==h&&!0===s.reflect){const n=(null!==(r=null===(e=s.converter)||void 0===e?void 0:e.toAttribute)&&void 0!==r?r:o.toAttribute)(i,s.type);this._$Ei=t,null==n?this.removeAttribute(h):this.setAttribute(h,n),this._$Ei=null}}_$AK(t,i){var s,e,r;const h=this.constructor,n=h._$Eu.get(t);if(void 0!==n&&this._$Ei!==n){const t=h.getPropertyOptions(n),l=t.converter,a=null!==(r=null!==(e=null===(s=l)||void 0===s?void 0:s.fromAttribute)&&void 0!==e?e:\"function\"==typeof l?l:null)&&void 0!==r?r:o.fromAttribute;this._$Ei=n,this[n]=a(i,t.type),this._$Ei=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||n)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,i)=>this[i]=t)),this._$Et=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$EU()}catch(t){throw i=!1,this._$EU(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$Eg)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$ES(i,this[i],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}a.finalized=!0,a.elementProperties=new Map,a.elementStyles=[],a.shadowRootOptions={mode:\"open\"},null==h||h({ReactiveElement:a}),(null!==(s=globalThis.reactiveElementVersions)&&void 0!==s?s:globalThis.reactiveElementVersions=[]).push(\"1.3.1\");export{a as ReactiveElement,o as defaultConverter,n as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=globalThis.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=`lit$${(Math.random()+\"\").slice(9)}$`,o=\"?\"+e,n=`<${o}>`,l=document,h=(t=\"\")=>l.createComment(t),r=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,d=Array.isArray,u=t=>{var i;return d(t)||\"function\"==typeof(null===(i=t)||void 0===i?void 0:i[Symbol.iterator])},c=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,a=/>/g,f=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,_=/'/g,m=/\"/g,g=/^(?:script|style|textarea|title)$/i,p=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),$=p(1),y=p(2),b=Symbol.for(\"lit-noChange\"),w=Symbol.for(\"lit-nothing\"),T=new WeakMap,x=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new N(i.insertBefore(h(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},A=l.createTreeWalker(l,129,null,!1),C=(t,i)=>{const o=t.length-1,l=[];let h,r=2===i?\"<svg>\":\"\",d=c;for(let i=0;i<o;i++){const s=t[i];let o,u,p=-1,$=0;for(;$<s.length&&(d.lastIndex=$,u=d.exec(s),null!==u);)$=d.lastIndex,d===c?\"!--\"===u[1]?d=v:void 0!==u[1]?d=a:void 0!==u[2]?(g.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=f):void 0!==u[3]&&(d=f):d===f?\">\"===u[0]?(d=null!=h?h:c,p=-1):void 0===u[1]?p=-2:(p=d.lastIndex-u[2].length,o=u[1],d=void 0===u[3]?f:'\"'===u[3]?m:_):d===m||d===_?d=f:d===v||d===a?d=c:(d=f,h=void 0);const y=d===f&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===c?s+n:p>=0?(l.push(o),s.slice(0,p)+\"$lit$\"+s.slice(p)+e+y):s+e+(-2===p?(l.push(void 0),i):y)}const u=r+(t[o]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==s?s.createHTML(u):u,l]};class E{constructor({strings:t,_$litType$:s},n){let l;this.parts=[];let r=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,s);if(this.el=E.createElement(v,n),A.currentNode=this.el.content,2===s){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=A.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(e)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(e),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:r,name:i[2],strings:t,ctor:\".\"===i[1]?M:\"?\"===i[1]?H:\"@\"===i[1]?I:S})}else c.push({type:6,index:r})}for(const i of t)l.removeAttribute(i)}if(g.test(l.tagName)){const t=l.textContent.split(e),s=t.length-1;if(s>0){l.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)l.append(t[i],h()),A.nextNode(),c.push({type:2,index:++r});l.append(t[s],h())}}}else if(8===l.nodeType)if(l.data===o)c.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(e,t+1));)c.push({type:7,index:r}),t+=e.length-1}r++}}static createElement(t,i){const s=l.createElement(\"template\");return s.innerHTML=t,s}}function P(t,i,s=t,e){var o,n,l,h;if(i===b)return i;let d=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=r(i)?void 0:i._$litDirective$;return(null==d?void 0:d.constructor)!==u&&(null===(n=null==d?void 0:d._$AO)||void 0===n||n.call(d,!1),void 0===u?d=void 0:(d=new u(t),d._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=d:s._$Cu=d),void 0!==d&&(i=P(t,d._$AS(t,i.values),d,e)),i}class V{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:l).importNode(s,!0);A.currentNode=o;let n=A.nextNode(),h=0,r=0,d=e[0];for(;void 0!==d;){if(h===d.index){let i;2===d.type?i=new N(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}h!==(null==d?void 0:d.index)&&(n=A.nextNode(),h++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class N{constructor(t,i,s,e){var o;this.type=2,this._$AH=w,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cg=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=P(this,t,i),r(t)?t===w||null==t||\"\"===t?(this._$AH!==w&&this._$AR(),this._$AH=w):t!==this._$AH&&t!==b&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):u(t)?this.S(t):this.$(t)}M(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==w&&r(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=E.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new V(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new E(t)),i}S(t){d(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new N(this.M(h()),this.M(h()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$Cg=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class S{constructor(t,i,s,e,o){this.type=1,this._$AH=w,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=w}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=P(this,t,i,0),n=!r(t)||t!==this._$AH&&t!==b,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=P(this,e[s+l],i,l),h===b&&(h=this._$AH[l]),n||(n=!r(h)||h!==this._$AH[l]),h===w?t=w:t!==w&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.C(t)}C(t){t===w?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class M extends S{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===w?void 0:t}}const k=i?i.emptyScript:\"\";class H extends S{constructor(){super(...arguments),this.type=4}C(t){t&&t!==w?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=P(this,t,i,0))&&void 0!==s?s:w)===b)return;const e=this._$AH,o=t===w&&e!==w||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==w&&(e===w||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){P(this,t)}}const R={L:\"$lit$\",P:e,V:o,I:1,N:C,R:V,j:u,D:P,H:N,F:S,O:H,W:I,B:M,Z:L},z=window.litHtmlPolyfillSupport;null==z||z(E,N),(null!==(t=globalThis.litHtmlVersions)&&void 0!==t?t:globalThis.litHtmlVersions=[]).push(\"2.2.2\");export{R as _$LH,$ as html,b as noChange,w as nothing,x as render,y as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.0\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","import { html } from 'lit';\n// Foi utilizado TemplateResult porque o editor.component.ts no usa ShadowDom\nexport const quillSnowStyles = html`\n  <style>\n    /*!\n    * Quill Editor v1.3.7\n    * https://quilljs.com/\n    * Copyright (c) 2014, Jason Chen\n    * Copyright (c) 2013, salesforce.com\n    */\n    .ql-container {\n      box-sizing: border-box;\n      /* font-family: Helvetica, Arial, sans-serif; */\n      font-family: var(--eta-font-serif);\n      font-size: 13px;\n      height: 100%;\n      margin: 0px;\n      position: relative;\n    }\n    .ql-container.ql-disabled .ql-tooltip {\n      visibility: hidden;\n    }\n    .ql-container.ql-disabled .ql-editor ul[data-checked] > li::before {\n      pointer-events: none;\n    }\n    .ql-clipboard {\n      left: -100000px;\n      height: 1px;\n      overflow-y: hidden;\n      position: absolute;\n      top: 50%;\n    }\n    .ql-clipboard p {\n      margin: 0;\n      padding: 0;\n    }\n    .ql-editor {\n      box-sizing: border-box;\n      line-height: 1.42;\n      height: 100%;\n      outline: none;\n      overflow-y: auto;\n      padding: 12px 15px;\n      tab-size: 4;\n      -moz-tab-size: 4;\n      text-align: left;\n      white-space: pre-wrap;\n      word-wrap: break-word;\n    }\n    .ql-editor > * {\n      cursor: text;\n    }\n    .ql-editor p,\n    .ql-editor ol,\n    .ql-editor ul,\n    .ql-editor pre,\n    .ql-editor blockquote,\n    .ql-editor h1,\n    .ql-editor h2,\n    .ql-editor h3,\n    .ql-editor h4,\n    .ql-editor h5,\n    .ql-editor h6 {\n      margin: 0;\n      padding: 0;\n      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor p {\n      line-height: 1.42;\n      font-size: 18px;\n    }\n    .ql-editor ol,\n    .ql-editor ul {\n      padding-left: 1.5em;\n    }\n    .ql-editor ol > li,\n    .ql-editor ul > li {\n      list-style-type: none;\n    }\n    .ql-editor ul > li::before {\n      content: '\\\\2022';\n    }\n    .ql-editor ul[data-checked='true'],\n    .ql-editor ul[data-checked='false'] {\n      pointer-events: none;\n    }\n    .ql-editor ul[data-checked='true'] > li *,\n    .ql-editor ul[data-checked='false'] > li * {\n      pointer-events: all;\n    }\n    .ql-editor ul[data-checked='true'] > li::before,\n    .ql-editor ul[data-checked='false'] > li::before {\n      color: #777;\n      cursor: pointer;\n      pointer-events: all;\n    }\n    .ql-editor ul[data-checked='true'] > li::before {\n      content: '\\\\2611';\n    }\n    .ql-editor ul[data-checked='false'] > li::before {\n      content: '\\\\2610';\n    }\n    .ql-editor li::before {\n      display: inline-block;\n      white-space: nowrap;\n      width: 1.2em;\n    }\n    .ql-editor li:not(.ql-direction-rtl)::before {\n      margin-left: -1.5em;\n      margin-right: 0.3em;\n      text-align: right;\n    }\n    .ql-editor li.ql-direction-rtl::before {\n      margin-left: 0.3em;\n      margin-right: -1.5em;\n    }\n    .ql-editor ol li:not(.ql-direction-rtl),\n    .ql-editor ul li:not(.ql-direction-rtl) {\n      padding-left: 1.5em;\n    }\n    .ql-editor ol li.ql-direction-rtl,\n    .ql-editor ul li.ql-direction-rtl {\n      padding-right: 1.5em;\n    }\n    .ql-editor ol li {\n      counter-reset: list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n      counter-increment: list-0;\n    }\n    .ql-editor ol li:before {\n      content: counter(list-0, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-1 {\n      counter-increment: list-1;\n    }\n    .ql-editor ol li.ql-indent-1:before {\n      content: counter(list-1, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-1 {\n      counter-reset: list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-2 {\n      counter-increment: list-2;\n    }\n    .ql-editor ol li.ql-indent-2:before {\n      content: counter(list-2, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-2 {\n      counter-reset: list-3 list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-3 {\n      counter-increment: list-3;\n    }\n    .ql-editor ol li.ql-indent-3:before {\n      content: counter(list-3, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-3 {\n      counter-reset: list-4 list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-4 {\n      counter-increment: list-4;\n    }\n    .ql-editor ol li.ql-indent-4:before {\n      content: counter(list-4, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-4 {\n      counter-reset: list-5 list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-5 {\n      counter-increment: list-5;\n    }\n    .ql-editor ol li.ql-indent-5:before {\n      content: counter(list-5, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-5 {\n      counter-reset: list-6 list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-6 {\n      counter-increment: list-6;\n    }\n    .ql-editor ol li.ql-indent-6:before {\n      content: counter(list-6, decimal) '. ';\n    }\n    .ql-editor ol li.ql-indent-6 {\n      counter-reset: list-7 list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-7 {\n      counter-increment: list-7;\n    }\n    .ql-editor ol li.ql-indent-7:before {\n      content: counter(list-7, lower-alpha) '. ';\n    }\n    .ql-editor ol li.ql-indent-7 {\n      counter-reset: list-8 list-9;\n    }\n    .ql-editor ol li.ql-indent-8 {\n      counter-increment: list-8;\n    }\n    .ql-editor ol li.ql-indent-8:before {\n      content: counter(list-8, lower-roman) '. ';\n    }\n    .ql-editor ol li.ql-indent-8 {\n      counter-reset: list-9;\n    }\n    .ql-editor ol li.ql-indent-9 {\n      counter-increment: list-9;\n    }\n    .ql-editor ol li.ql-indent-9:before {\n      content: counter(list-9, decimal) '. ';\n    }\n    .ql-editor .ql-indent-1:not(.ql-direction-rtl) {\n      padding-left: 3em;\n    }\n    .ql-editor li.ql-indent-1:not(.ql-direction-rtl) {\n      padding-left: 4.5em;\n    }\n    .ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right {\n      padding-right: 3em;\n    }\n    .ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right {\n      padding-right: 4.5em;\n    }\n    .ql-editor .ql-indent-2:not(.ql-direction-rtl) {\n      padding-left: 6em;\n    }\n    .ql-editor li.ql-indent-2:not(.ql-direction-rtl) {\n      padding-left: 7.5em;\n    }\n    .ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right {\n      padding-right: 6em;\n    }\n    .ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right {\n      padding-right: 7.5em;\n    }\n    .ql-editor .ql-indent-3:not(.ql-direction-rtl) {\n      padding-left: 9em;\n    }\n    .ql-editor li.ql-indent-3:not(.ql-direction-rtl) {\n      padding-left: 10.5em;\n    }\n    .ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right {\n      padding-right: 9em;\n    }\n    .ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right {\n      padding-right: 10.5em;\n    }\n    .ql-editor .ql-indent-4:not(.ql-direction-rtl) {\n      padding-left: 12em;\n    }\n    .ql-editor li.ql-indent-4:not(.ql-direction-rtl) {\n      padding-left: 13.5em;\n    }\n    .ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right {\n      padding-right: 12em;\n    }\n    .ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right {\n      padding-right: 13.5em;\n    }\n    .ql-editor .ql-indent-5:not(.ql-direction-rtl) {\n      padding-left: 15em;\n    }\n    .ql-editor li.ql-indent-5:not(.ql-direction-rtl) {\n      padding-left: 16.5em;\n    }\n    .ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right {\n      padding-right: 15em;\n    }\n    .ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right {\n      padding-right: 16.5em;\n    }\n    .ql-editor .ql-indent-6:not(.ql-direction-rtl) {\n      padding-left: 18em;\n    }\n    .ql-editor li.ql-indent-6:not(.ql-direction-rtl) {\n      padding-left: 19.5em;\n    }\n    .ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right {\n      padding-right: 18em;\n    }\n    .ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right {\n      padding-right: 19.5em;\n    }\n    .ql-editor .ql-indent-7:not(.ql-direction-rtl) {\n      padding-left: 21em;\n    }\n    .ql-editor li.ql-indent-7:not(.ql-direction-rtl) {\n      padding-left: 22.5em;\n    }\n    .ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right {\n      padding-right: 21em;\n    }\n    .ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right {\n      padding-right: 22.5em;\n    }\n    .ql-editor .ql-indent-8:not(.ql-direction-rtl) {\n      padding-left: 24em;\n    }\n    .ql-editor li.ql-indent-8:not(.ql-direction-rtl) {\n      padding-left: 25.5em;\n    }\n    .ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right {\n      padding-right: 24em;\n    }\n    .ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right {\n      padding-right: 25.5em;\n    }\n    .ql-editor .ql-indent-9:not(.ql-direction-rtl) {\n      padding-left: 27em;\n    }\n    .ql-editor li.ql-indent-9:not(.ql-direction-rtl) {\n      padding-left: 28.5em;\n    }\n    .ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right {\n      padding-right: 27em;\n    }\n    .ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right {\n      padding-right: 28.5em;\n    }\n    .ql-editor .ql-video {\n      display: block;\n      max-width: 100%;\n    }\n    .ql-editor .ql-video.ql-align-center {\n      margin: 0 auto;\n    }\n    .ql-editor .ql-video.ql-align-right {\n      margin: 0 0 0 auto;\n    }\n    .ql-editor .ql-bg-black {\n      background-color: #000;\n    }\n    .ql-editor .ql-bg-red {\n      background-color: #e60000;\n    }\n    .ql-editor .ql-bg-orange {\n      background-color: #f90;\n    }\n    .ql-editor .ql-bg-yellow {\n      background-color: #ff0;\n    }\n    .ql-editor .ql-bg-green {\n      background-color: #008a00;\n    }\n    .ql-editor .ql-bg-blue {\n      background-color: #06c;\n    }\n    .ql-editor .ql-bg-purple {\n      background-color: #93f;\n    }\n    .ql-editor .ql-color-white {\n      color: #fff;\n    }\n    .ql-editor .ql-color-red {\n      color: #e60000;\n    }\n    .ql-editor .ql-color-orange {\n      color: #f90;\n    }\n    .ql-editor .ql-color-yellow {\n      color: #ff0;\n    }\n    .ql-editor .ql-color-green {\n      color: #008a00;\n    }\n    .ql-editor .ql-color-blue {\n      color: #06c;\n    }\n    .ql-editor .ql-color-purple {\n      color: #93f;\n    }\n    .ql-editor .ql-font-serif {\n      font-family: Georgia, Times New Roman, serif;\n    }\n    .ql-editor .ql-font-monospace {\n      font-family: Monaco, Courier New, monospace;\n    }\n    .ql-editor .ql-size-small {\n      font-size: 0.75em;\n    }\n    .ql-editor .ql-size-large {\n      font-size: 1.5em;\n    }\n    .ql-editor .ql-size-huge {\n      font-size: 2.5em;\n    }\n    .ql-editor .ql-direction-rtl {\n      direction: rtl;\n      text-align: inherit;\n    }\n    .ql-editor .ql-align-center {\n      text-align: center;\n    }\n    .ql-editor .ql-align-justify {\n      text-align: justify;\n    }\n    .ql-editor .ql-align-right {\n      text-align: right;\n    }\n    .ql-editor.ql-blank::before {\n      color: rgba(0, 0, 0, 0.6);\n      content: attr(data-placeholder);\n      font-style: italic;\n      left: 15px;\n      pointer-events: none;\n      position: absolute;\n      right: 15px;\n    }\n    .ql-snow.ql-toolbar:after,\n    .ql-snow .ql-toolbar:after {\n      clear: both;\n      content: '';\n      display: table;\n    }\n    .ql-snow.ql-toolbar button,\n    .ql-snow .ql-toolbar button {\n      background: none;\n      border: none;\n      cursor: pointer;\n      display: inline-block;\n      float: left;\n      height: 24px;\n      padding: 3px 5px;\n      width: 28px;\n    }\n    .ql-snow.ql-toolbar button svg,\n    .ql-snow .ql-toolbar button svg {\n      float: left;\n      height: 100%;\n    }\n    .ql-snow.ql-toolbar button:active:hover,\n    .ql-snow .ql-toolbar button:active:hover {\n      outline: none;\n    }\n    .ql-snow.ql-toolbar input.ql-image[type='file'],\n    .ql-snow .ql-toolbar input.ql-image[type='file'] {\n      display: none;\n    }\n    .ql-snow.ql-toolbar button:hover,\n    .ql-snow .ql-toolbar button:hover,\n    .ql-snow.ql-toolbar button:focus,\n    .ql-snow .ql-toolbar button:focus,\n    .ql-snow.ql-toolbar button.ql-active,\n    .ql-snow .ql-toolbar button.ql-active,\n    .ql-snow.ql-toolbar .ql-picker-label:hover,\n    .ql-snow .ql-toolbar .ql-picker-label:hover,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active,\n    .ql-snow.ql-toolbar .ql-picker-item:hover,\n    .ql-snow .ql-toolbar .ql-picker-item:hover,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected {\n      color: #06c;\n    }\n    .ql-snow.ql-toolbar button:hover .ql-fill,\n    .ql-snow .ql-toolbar button:hover .ql-fill,\n    .ql-snow.ql-toolbar button:focus .ql-fill,\n    .ql-snow .ql-toolbar button:focus .ql-fill,\n    .ql-snow.ql-toolbar button.ql-active .ql-fill,\n    .ql-snow .ql-toolbar button.ql-active .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n    .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {\n      fill: #06c;\n    }\n    .ql-snow.ql-toolbar button:hover .ql-stroke,\n    .ql-snow .ql-toolbar button:hover .ql-stroke,\n    .ql-snow.ql-toolbar button:focus .ql-stroke,\n    .ql-snow .ql-toolbar button:focus .ql-stroke,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n    .ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n    .ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n    .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n    .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n    .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n    .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {\n      stroke: #06c;\n    }\n    @media (pointer: coarse) {\n      .ql-snow.ql-toolbar button:hover:not(.ql-active),\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) {\n        color: #444;\n      }\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {\n        fill: #444;\n      }\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n      .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n      .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {\n        stroke: #444;\n      }\n    }\n    .ql-snow {\n      box-sizing: border-box;\n    }\n    .ql-snow * {\n      box-sizing: border-box;\n    }\n    .ql-snow .ql-hidden {\n      display: none;\n    }\n    .ql-snow .ql-out-bottom,\n    .ql-snow .ql-out-top {\n      visibility: hidden;\n    }\n    .ql-snow .ql-tooltip {\n      position: absolute;\n      transform: translateY(10px);\n    }\n    .ql-snow .ql-tooltip a {\n      cursor: pointer;\n      text-decoration: none;\n    }\n    .ql-snow .ql-tooltip.ql-flip {\n      transform: translateY(-10px);\n    }\n    .ql-snow .ql-formats {\n      display: inline-block;\n      vertical-align: middle;\n    }\n    .ql-snow .ql-formats:after {\n      clear: both;\n      content: '';\n      display: table;\n    }\n    .ql-snow .ql-stroke {\n      fill: none;\n      stroke: #444;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-width: 2;\n    }\n    .ql-snow .ql-stroke-miter {\n      fill: none;\n      stroke: #444;\n      stroke-miterlimit: 10;\n      stroke-width: 2;\n    }\n    .ql-snow .ql-fill,\n    .ql-snow .ql-stroke.ql-fill {\n      fill: #444;\n    }\n    .ql-snow .ql-empty {\n      fill: none;\n    }\n    .ql-snow .ql-even {\n      fill-rule: evenodd;\n    }\n    .ql-snow .ql-thin,\n    .ql-snow .ql-stroke.ql-thin {\n      stroke-width: 1;\n    }\n    .ql-snow .ql-transparent {\n      opacity: 0.4;\n    }\n    .ql-snow .ql-direction svg:last-child {\n      display: none;\n    }\n    .ql-snow .ql-direction.ql-active svg:last-child {\n      display: inline;\n    }\n    .ql-snow .ql-direction.ql-active svg:first-child {\n      display: none;\n    }\n    .ql-snow .ql-editor h1 {\n      font-size: 2em;\n    }\n    .ql-snow .ql-editor h2 {\n      font-size: 1.5em;\n    }\n    .ql-snow .ql-editor h3 {\n      font-size: 1.17em;\n    }\n    .ql-snow .ql-editor h4 {\n      font-size: 1em;\n    }\n    .ql-snow .ql-editor h5 {\n      font-size: 0.83em;\n    }\n    .ql-snow .ql-editor h6 {\n      font-size: 0.67em;\n    }\n    .ql-snow .ql-editor a {\n      text-decoration: underline;\n    }\n    .ql-snow .ql-editor blockquote {\n      border-left: 4px solid #ccc;\n      margin-bottom: 5px;\n      margin-top: 5px;\n      padding-left: 16px;\n    }\n    .ql-snow .ql-editor code,\n    .ql-snow .ql-editor pre {\n      background-color: #f0f0f0;\n      border-radius: 3px;\n    }\n    .ql-snow .ql-editor pre {\n      white-space: pre-wrap;\n      margin-bottom: 5px;\n      margin-top: 5px;\n      padding: 5px 10px;\n    }\n    .ql-snow .ql-editor code {\n      font-size: 85%;\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-editor pre.ql-syntax {\n      background-color: #23241f;\n      color: #f8f8f2;\n      overflow: visible;\n    }\n    .ql-snow .ql-editor img {\n      max-width: 100%;\n    }\n    .ql-snow .ql-picker {\n      color: #444;\n      display: inline-block;\n      float: left;\n      font-size: 14px;\n      font-weight: 500;\n      height: 24px;\n      position: relative;\n      vertical-align: middle;\n    }\n    .ql-snow .ql-picker-label {\n      cursor: pointer;\n      display: inline-block;\n      height: 100%;\n      padding-left: 8px;\n      padding-right: 2px;\n      position: relative;\n      width: 100%;\n    }\n    .ql-snow .ql-picker-label::before {\n      display: inline-block;\n      line-height: 22px;\n    }\n    .ql-snow .ql-picker-options {\n      background-color: #fff;\n      display: none;\n      min-width: 100%;\n      padding: 4px 8px;\n      position: absolute;\n      white-space: nowrap;\n    }\n    .ql-snow .ql-picker-options .ql-picker-item {\n      cursor: pointer;\n      display: block;\n      padding-bottom: 5px;\n      padding-top: 5px;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label {\n      color: #ccc;\n      z-index: 2;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {\n      fill: #ccc;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {\n      stroke: #ccc;\n    }\n    .ql-snow .ql-picker.ql-expanded .ql-picker-options {\n      display: block;\n      margin-top: -1px;\n      top: 100%;\n      z-index: 1;\n    }\n    .ql-snow .ql-color-picker,\n    .ql-snow .ql-icon-picker {\n      width: 28px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-label,\n    .ql-snow .ql-icon-picker .ql-picker-label {\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-label svg,\n    .ql-snow .ql-icon-picker .ql-picker-label svg {\n      right: 4px;\n    }\n    .ql-snow .ql-icon-picker .ql-picker-options {\n      padding: 4px 0px;\n    }\n    .ql-snow .ql-icon-picker .ql-picker-item {\n      height: 24px;\n      width: 24px;\n      padding: 2px 4px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-options {\n      padding: 3px 5px;\n      width: 152px;\n    }\n    .ql-snow .ql-color-picker .ql-picker-item {\n      border: 1px solid transparent;\n      float: left;\n      height: 16px;\n      margin: 2px;\n      padding: 0px;\n      width: 16px;\n    }\n    .ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg {\n      position: absolute;\n      margin-top: -9px;\n      right: 0;\n      top: 50%;\n      width: 18px;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before {\n      content: attr(data-label);\n    }\n    .ql-snow .ql-picker.ql-header {\n      width: 98px;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item::before {\n      content: 'Normal';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n      content: 'Heading 1';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n      content: 'Heading 2';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n      content: 'Heading 3';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n      content: 'Heading 4';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n      content: 'Heading 5';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n      content: 'Heading 6';\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before {\n      font-size: 2em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before {\n      font-size: 1.5em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before {\n      font-size: 1.17em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before {\n      font-size: 1em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before {\n      font-size: 0.83em;\n    }\n    .ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before {\n      font-size: 0.67em;\n    }\n    .ql-snow .ql-picker.ql-font {\n      width: 108px;\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item::before {\n      content: 'Sans Serif';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n      content: 'Serif';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n      content: 'Monospace';\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before {\n      font-family: Georgia, Times New Roman, serif;\n    }\n    .ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before {\n      font-family: Monaco, Courier New, monospace;\n    }\n    .ql-snow .ql-picker.ql-size {\n      width: 98px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item::before {\n      content: 'Normal';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n      content: 'Small';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n      content: 'Large';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n      content: 'Huge';\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before {\n      font-size: 10px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before {\n      font-size: 18px;\n    }\n    .ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before {\n      font-size: 32px;\n    }\n    .ql-snow .ql-color-picker.ql-background .ql-picker-item {\n      background-color: #fff;\n    }\n    .ql-snow .ql-color-picker.ql-color .ql-picker-item {\n      background-color: #000;\n    }\n    .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n      padding: 8px;\n    }\n    .ql-toolbar.ql-snow .ql-formats {\n      margin-right: 15px;\n    }\n    .ql-toolbar.ql-snow .ql-picker-label {\n      border: 1px solid transparent;\n    }\n    .ql-toolbar.ql-snow .ql-picker-options {\n      border: 1px solid transparent;\n      box-shadow: rgba(0, 0, 0, 0.2) 0 2px 8px;\n    }\n    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {\n      border-color: #ccc;\n    }\n    .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {\n      border-color: #ccc;\n    }\n    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n    .ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover {\n      border-color: #000;\n    }\n    .ql-toolbar.ql-snow + .ql-container.ql-snow {\n      border-top: 0px;\n    }\n    .ql-snow .ql-tooltip {\n      background-color: #fff;\n      border: 1px solid #ccc;\n      box-shadow: 0px 0px 5px #ddd;\n      color: #444;\n      padding: 5px 12px;\n      white-space: nowrap;\n    }\n    .ql-snow .ql-tooltip::before {\n      content: 'Visit URL:';\n      line-height: 26px;\n      margin-right: 8px;\n    }\n    .ql-snow .ql-tooltip input[type='text'] {\n      display: none;\n      border: 1px solid #ccc;\n      font-size: 13px;\n      height: 26px;\n      margin: 0px;\n      padding: 3px 5px;\n      width: 170px;\n    }\n    .ql-snow .ql-tooltip a.ql-preview {\n      display: inline-block;\n      max-width: 200px;\n      overflow-x: hidden;\n      text-overflow: ellipsis;\n      vertical-align: top;\n    }\n    .ql-snow .ql-tooltip a.ql-action::after {\n      border-right: 1px solid #ccc;\n      content: 'Edit';\n      margin-left: 16px;\n      padding-right: 8px;\n    }\n    .ql-snow .ql-tooltip a.ql-remove::before {\n      content: 'Remove';\n      margin-left: 8px;\n    }\n    .ql-snow .ql-tooltip a {\n      line-height: 26px;\n    }\n    .ql-snow .ql-tooltip.ql-editing a.ql-preview,\n    .ql-snow .ql-tooltip.ql-editing a.ql-remove {\n      display: none;\n    }\n    .ql-snow .ql-tooltip.ql-editing input[type='text'] {\n      display: inline-block;\n    }\n    .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n      border-right: 0px;\n      content: 'Save';\n      padding-right: 0px;\n    }\n    .ql-snow .ql-tooltip[data-mode='link']::before {\n      content: 'Enter link:';\n    }\n    .ql-snow .ql-tooltip[data-mode='formula']::before {\n      content: 'Enter formula:';\n    }\n    .ql-snow .ql-tooltip[data-mode='video']::before {\n      content: 'Enter video:';\n    }\n    .ql-snow a {\n      color: #06c;\n    }\n    .ql-container.ql-snow {\n      border: 1px solid #ccc;\n    }\n  </style>\n`;\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['ementa', 'norma-alterada'],\n};\n\nconst EstiloTextoClass = new Parchment.Attributor.Class('estilo', 'estilo', config);\nexport { EstiloTextoClass };\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['0px'],\n};\n\n// const MarginBottomStyle = new Parchment.Attributor.Style('margin-bottom', 'margin-bottom', config);\nconst MarginBottomClass = new Parchment.Attributor.Class('margin-bottom', 'ql-margin-bottom', config);\nexport { MarginBottomClass };\n","class NotaRodape {\n  id;\n  numero;\n  texto;\n\n  constructor({ id, numero, texto }) {\n    this.id = id;\n    this.numero = numero;\n    this.texto = texto;\n  }\n}\n\nconst NOTA_RODAPE_INPUT_EVENT = 'nota-rodape:input';\nconst NOTA_RODAPE_CHANGE_EVENT = 'nota-rodape:change';\nconst NOTA_RODAPE_REMOVE_EVENT = 'nota-rodape:remove';\n\nexport { NotaRodape, NOTA_RODAPE_INPUT_EVENT, NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT };\n","export class QuillUtil {\n  static configurarAcoesLink(quill: Quill): void {\n    const theme = (quill as any).theme;\n\n    const div = document.createElement('div');\n    div.setAttribute('class', 'tooltip-invalid-message');\n    theme.tooltip.root.appendChild(div);\n\n    // Sobrescreve o mtodo de criao do tooltip para adicionar a validao do link\n    const originalEditTooltip = theme.tooltip.edit.bind(theme.tooltip);\n    theme.tooltip.edit = (mode = 'link', preview = null): void => {\n      theme.tooltip.textbox?.setAttribute('pattern', mode === 'link' ? 'https?://.+' : '');\n      originalEditTooltip(mode, preview);\n    };\n\n    // Sobrescreve o mtodo de salvamento do tooltip para adicionar a validao do link\n    const originalSaveTooltip = theme.tooltip.save.bind(theme.tooltip);\n    theme.tooltip.save = (): void => {\n      const el = quill.root.querySelector('.ql-tooltip[data-mode=\"link\"]') || quill.root.parentNode?.querySelector('.ql-tooltip[data-mode=\"link\"]');\n      const url = theme.tooltip.textbox?.value ?? '';\n      if (el && !url.match(/https?:\\/\\//)) {\n        el.classList.add('ql-tooltip-invalid');\n        return;\n      }\n      originalSaveTooltip();\n    };\n  }\n}\n","const Parchment: any = Quill.import('parchment');\n\nconst config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['0px'],\n};\n\n// const NoIndentStyle = new Parchment.Attributor.Style('text-indent', 'text-indent', config);\nconst NoIndentClass = new Parchment.Attributor.Class('text-indent', 'ql-text-indent', config);\nexport { NoIndentClass };\n","import { quillSnowStyles } from '../../assets/css/quill.snow.css';\nimport { EstiloTextoClass } from './estilos-texto';\nimport { MarginBottomClass } from './margin-bottom';\nimport { NOTA_RODAPE_INPUT_EVENT } from './notaRodape';\nimport { QuillUtil } from './quill-util';\nimport { NoIndentClass } from './text-indent';\n\nconst DefaultKeyboardModule = Quill.import('modules/keyboard');\nconst DefaultClipboardModule = Quill.import('modules/clipboard');\n\nexport class NotaRodapeModal {\n  private modalElement: HTMLElement;\n  private overlayElement: HTMLElement;\n  private shadowRoot: HTMLElement;\n  private keydownListener: (event: KeyboardEvent) => void;\n\n  quill: any;\n  idNotaRodape?: string;\n  textoInicialNotaRodape: string;\n  domNodeNotaRodape: HTMLElement;\n  tituloModal?: string;\n\n  constructor(options: { domNodeNotaRodape: HTMLElement; idNotaRodape?: string; textoInicialNotaRodape?: string; tituloModal?: string }) {\n    this.idNotaRodape = options.idNotaRodape;\n    this.textoInicialNotaRodape = options.textoInicialNotaRodape ?? '';\n    this.domNodeNotaRodape = options.domNodeNotaRodape;\n    this.tituloModal = options.tituloModal;\n\n    this.modalElement = document.createElement('div');\n    this.modalElement.classList.add('modal');\n    this.modalElement.classList.add('modal-nota-rodape');\n\n    this.shadowRoot = document.createElement('div');\n    this.shadowRoot.classList.add('d-flex');\n\n    this.modalElement.appendChild(this.shadowRoot);\n\n    this.shadowRoot.innerHTML = `\n      ${quillSnowStyles.strings.join('')}\n      <style>\n\n        .modal-nota-rodape {\n          display: inline-table;\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          min-width: 100px;\n          max-width: 640px;\n          width: 80%;\n          background-color: white;\n          padding: 20px;\n          border-radius: 10px;\n          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n          z-index: 1010;\n          opacity: 0;\n          transform: translate(-50%, -50%) scale(0.95);\n          transition: opacity 0.3s, transform 0.3s;\n        }\n\n        .modal-body .ql-editor {\n          min-height: 400px;\n        }\n        .modal-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .modal-title {\n          margin: 0;\n          width: 100%;\n          font-size: var(--sl-font-size-large);\n        }\n\n        .modal-footer {\n          display: flex;\n          gap: 10px;\n          justify-content: flex-end;\n        }\n\n        .modal-textarea {\n          width: 100%;\n          height: 100px;\n          margin-bottom: 15px;\n          font-family: inherit;\n          font-size: inherit;\n          padding: 10px;\n          box-sizing: border-box;\n        }\n\n        .modal-close-button {\n          cursor: pointer;\n          background-color: #eee;\n          padding: 5px 10px;\n          border-radius: 5px;\n          transition: background-color 0.3s;\n          border: none;\n        }\n\n        .header-close-button {\n          background-color: transparent;\n          font-size: 30px;\n        }\n\n        .modal-save-button {\n          cursor: pointer;\n          background-color: #0284c7;\n          color: white;\n          padding: 9px 14px;\n          border-radius: 5px;\n          border: none;\n        }\n\n        .modal-save-button:hover {\n          background-color: #0ea5e9;\n        }\n\n        .modal-close-button: hover {\n          background-color: #ddd;\n        }\n\n        @media (max-width: 600px) {\n          :host {\n            width: 80%;\n            min-width: 0;\n          }\n        }\n\n        .ql-snow .ql-tooltip {\n          font-family: var(--eta-font-sans);\n          font-size: 0.9rem;\n        }\n        .ql-tooltip .ql-action,\n        .ql-tooltip .ql-remove {\n          background-color: var(--sl-color-gray-100);\n          border: 1px solid var(--sl-color-gray-500);\n          border-radius: 3px;\n          color: var(--sl-color-gray-900);\n          width: fit-content !important;\n          padding: 0 15px;\n          margin: 0 0 0 10px;\n        }\n        .ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n          content: 'Salvar';\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        .ql-snow .ql-tooltip a.ql-action::after {\n          display: inline;\n          content: 'Editar';\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        .ql-snow .ql-tooltip a.ql-remove::before {\n          display: inline;\n          content: 'Remover';\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        .ql-snow .ql-tooltip[data-mode='link']::before {\n          content: 'Insira o link:';\n        }\n        .ql-snow .ql-tooltip::before {\n          content: 'Visite o link:';\n        }\n        @media (max-width: 600px) {\n          .ql-snow .ql-tooltip {\n            display: flex;\n            gap: 5px;\n            flex-direction: column;\n          }\n          .ql-tooltip .ql-action,\n          .ql-tooltip .ql-remove {\n            margin: 0;\n          }\n          .ql-snow .ql-tooltip.ql-hidden {\n            display: none;\n          }\n        }\n\n        .modal-nota-rodape .ql-tooltip input:invalid {\n          color: red;\n        }\n\n        .modal-nota-rodape .ql-tooltip div.tooltip-invalid-message {\n          color: red;\n          display: none;\n          font-family: var(--eta-font-sans);\n          font-size: 0.9rem;\n        }\n\n        .modal-nota-rodape .ql-tooltip[data-mode='link'] div.tooltip-invalid-message::after {\n          content: 'A URL deve iniciar com http:// ou https://';\n        }\n\n        .modal-nota-rodape .ql-tooltip[data-mode='link'] input:invalid ~ div.tooltip-invalid-message {\n          display: block;\n        }\n        .d-flex {\n          display: flex;\n          flex-direction: column;\n          gap: 20px;\n        }\n\n      </style>\n      <div class=\"modal-header\">\n        <h1 id=\"modalTitle\" class=\"modal-title\">Editar nota de rodap</h1>\n        <button class=\"modal-close-button header-close-button\" aria-label=\"Fechar\" title=\"Fechar\">&times;</button>\n      </div>\n      <div class=\"modal-body\">\n        <div id=\"editor-nota-rodape-container\"></div>\n      </div>\n      <div class=\"modal-footer\">\n        <button class=\"modal-save-button\" aria-label=\"Salvar\">Salvar</button>\n        <button class=\"modal-close-button\" aria-label=\"Fechar\">Fechar</button>\n      </div>\n    `;\n\n    this.overlayElement = document.createElement('div');\n    this.overlayElement.classList.add('overlay');\n    this.overlayElement.style.opacity = '0';\n    this.overlayElement.style.transition = 'opacity 0.3s';\n    this.overlayElement.style.position = 'fixed';\n    this.overlayElement.style.top = '0';\n    this.overlayElement.style.left = '0';\n    this.overlayElement.style.width = '100%';\n    this.overlayElement.style.height = '100%';\n    this.overlayElement.style.backgroundColor = 'rgba(0, 0, 0, 0.2)';\n    this.overlayElement.style.zIndex = '1000';\n\n    document.body.appendChild(this.overlayElement);\n    document.body.appendChild(this.modalElement);\n\n    this.keydownListener = (event: KeyboardEvent): void => {\n      if (event.key === 'Escape') {\n        this.close();\n      }\n    };\n\n    document.addEventListener('keydown', this.keydownListener);\n\n    Array.from(this.shadowRoot.querySelectorAll('.modal-close-button')).forEach(element => element.addEventListener('click', () => this.close()));\n\n    this.shadowRoot.querySelector('.modal-save-button')?.addEventListener('click', this.save.bind(this));\n\n    const quillContainer = this.shadowRoot.querySelector('#editor-nota-rodape-container') as HTMLElement;\n    Quill.register('modules/keyboard', DefaultKeyboardModule, true);\n    Quill.register('modules/clipboard', DefaultClipboardModule, true);\n    Quill.register('formats/estilo-texto', EstiloTextoClass, true);\n    Quill.register('formats/text-indent', NoIndentClass, true);\n    Quill.register('formats/margin-bottom', MarginBottomClass, true);\n\n    this.quill = new Quill(quillContainer, {\n      formats: ['bold', 'italic', 'underline', 'link'],\n      modules: {\n        toolbar: {\n          container: [['bold', 'italic', 'underline'], ['link']],\n        },\n      },\n      placeholder: 'Digite a nota de rodap aqui...',\n      theme: 'snow',\n    });\n\n    QuillUtil.configurarAcoesLink(this.quill!);\n  }\n\n  ajustaHtml = (html = ''): string => {\n    return html\n      .replace(/ql-indent/g, 'indent')\n      .replace(/ql-align-justify/g, 'align-justify')\n      .replace(/ql-align-center/g, 'align-center')\n      .replace(/ql-align-right/g, 'align-right');\n  };\n\n  open(): void {\n    this.overlayElement.style.display = 'block';\n    setTimeout(() => {\n      this.overlayElement.style.opacity = '1';\n      this.modalElement.style.opacity = '1';\n      this.modalElement.style.transform = 'translate(-50%, -50%) scale(1)';\n    }, 10);\n\n    this.quill.root.innerHTML = this.textoInicialNotaRodape ?? '';\n    this.quill.root.focus();\n\n    const modalTitle = this.shadowRoot.querySelector('.modal-title');\n    if (modalTitle) {\n      modalTitle.innerHTML = this.tituloModal ?? modalTitle.innerHTML;\n    }\n  }\n\n  close(fromSave = false): void {\n    if (fromSave || this.shouldClose()) {\n      this.modalElement.style.opacity = '0';\n      this.overlayElement.style.opacity = '0';\n      setTimeout(() => this.removeModal(), 300); // Tempo de transio\n    }\n  }\n\n  private shouldClose(): boolean {\n    const texto = this.quill.root.innerHTML;\n    console.log(texto, this.textoInicialNotaRodape);\n    if (texto !== this.textoInicialNotaRodape) {\n      return confirm('Tem certeza que deseja fechar? As alteraes no salvas sero perdidas.');\n    }\n    return true;\n  }\n\n  private removeModal(): void {\n    document.removeEventListener('keydown', this.keydownListener);\n    this.modalElement.remove();\n    this.overlayElement.remove();\n  }\n\n  save(): void {\n    const texto = this.quill.root.innerHTML;\n    if (texto === this.textoInicialNotaRodape || !texto) {\n      this.close(true);\n      return;\n    }\n\n    this.domNodeNotaRodape.dispatchEvent(new CustomEvent(NOTA_RODAPE_INPUT_EVENT, { detail: { id: this.idNotaRodape, texto: this.quill.root.innerHTML } }));\n    this.close(true);\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\n/* eslint-disable eqeqeq */\n/* eslint-disable prefer-const */\nimport { decodeHtml, encodeHtml } from '../../util/string-util';\nimport { NotaRodapeModal } from './nota-rodape-modal';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_INPUT_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './notaRodape';\n\nconst PREFIXO_ID = 'nr';\n\nconst Delta = Quill.import('delta');\nconst Module = Quill.import('core/module');\nconst Embed = Quill.import('blots/embed'); // Inline Embed\nconst Text = Quill.import('blots/text'); // Inline Text\nconst Parchment = Quill.import('parchment');\n\nconst cfgInline = {\n  scope: Parchment.Scope.INLINE_ATTRIBUTE,\n};\n\nconst IdNotaRodapeAttribute = new Parchment.Attributor.Attribute('id-nota-rodape', 'id-nota-rodape', cfgInline);\nconst NumeroAttribute = new Parchment.Attributor.Attribute('numero', 'numero', cfgInline);\nconst TextoAttribute = new Parchment.Attributor.Attribute('texto', 'texto', cfgInline);\n\nclass NotaRodapeBlot extends Embed {\n  static create(value) {\n    let node = super.create(value);\n    node.setAttribute('class', 'nota-rodape');\n    node.setAttribute('contenteditable', 'false');\n    NotaRodapeBlot.valueToAttributes(value, node);\n    return node;\n  }\n\n  static value(domNode) {\n    return domNode.notaRodape || NotaRodapeBlot.buildNotaRodape(domNode);\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) return super.format(name, value);\n    NotaRodapeBlot.valueToAttributes(value, this.domNode);\n  }\n\n  // static formats(domNode) {\n  //   return { 'nota-rodape': domNode.notaRodape || NotaRodapeBlot.buildNotaRodape(domNode) };\n  // }\n\n  static buildNotaRodape(domNode) {\n    return {\n      // id: domNode.getAttribute('id'),\n      id: domNode.getAttribute('id-nota-rodape'),\n      numero: domNode.getAttribute('numero'),\n      texto: decodeHtml(domNode.getAttribute('texto')),\n    };\n  }\n\n  static valueToAttributes(value, domNode) {\n    if (!value || typeof value === 'boolean') return;\n    // value.id && domNode.setAttribute('id', value.id);\n    value.id && domNode.setAttribute('id-nota-rodape', value.id);\n    value.numero && domNode.setAttribute('numero', value.numero);\n    domNode.notaRodape = value;\n\n    domNode.innerText = value.numero;\n    domNode.setAttribute('texto', encodeHtml(value.texto));\n  }\n}\n\nNotaRodapeBlot.blotName = 'nota-rodape';\nNotaRodapeBlot.tagName = 'nota-rodape';\nNotaRodapeBlot.allowedChildren = [Text];\n\nclass ModuloNotaRodape extends Module {\n  quill;\n  options;\n\n  _isAbrindoTexto = false;\n  get isAbrindoTexto() {\n    return this._isAbrindoTexto;\n  }\n  set isAbrindoTexto(value) {\n    this._isAbrindoTexto = value;\n    // if (!value) {\n    //   setTimeout(() => {\n    //     this.quill.root.innerHTML = this.ajustarConteudoTagsNotaRodape(this.quill.root.innerHTML);\n    //   }, 0);\n    // }\n  }\n\n  static register() {\n    Quill.register(NotaRodapeBlot);\n    Quill.register(IdNotaRodapeAttribute);\n    Quill.register(NumeroAttribute);\n    Quill.register(TextoAttribute);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill = quill;\n    this.options = options;\n\n    this.options.numeroInicial = this.options.numeroInicial ?? 1;\n\n    this.quill.notasRodape = this;\n\n    const toolbar = this.quill.getModule('toolbar');\n    if (toolbar) {\n      toolbar.addHandler('nota-rodape', this.solicitarTexto.bind(this));\n    }\n\n    this.addClipboardMatcher();\n    this.quill.on('text-change', this.onTextChange.bind(this));\n\n    this.quill.root.addEventListener('click', this.onClick.bind(this));\n    this.quill.root.addEventListener(NOTA_RODAPE_INPUT_EVENT, this.tratarRespostaModal.bind(this));\n  }\n\n  addClipboardMatcher() {\n    this.quill.clipboard.addMatcher('nota-rodape', (node, delta) => {\n      let match = Parchment.query(node);\n      if (match == null || match.blotName !== 'nota-rodape') {\n        return delta;\n      }\n\n      const id = this.isAbrindoTexto ? node.getAttribute('id-nota-rodape') : this.gerarId();\n      const numero = node.getAttribute('numero');\n      const texto = decodeHtml(node.getAttribute('texto'));\n      const notaRodape = new NotaRodape({ id, numero, texto });\n\n      return new Delta().insert({ 'nota-rodape': notaRodape });\n\n      // const ops = delta.ops.reduce((acc, op) => {\n      //   if (op.insert && op.attributes?.['id-nota-rodape']) {\n      //     const { 'id-nota-rodape': id, numero, texto } = op.attributes || {};\n      //     const notaRodape = new NotaRodape({ id, numero: +numero, texto });\n      //     acc.push({ insert: { 'nota-rodape': notaRodape } });\n      //   }\n      //   return acc;\n      // }, []);\n\n      // return new Delta(ops);\n    });\n  }\n\n  onTextChange(delta, oldContent, source) {\n    const undo = this.quill.history.stack.undo[this.quill.history.stack.undo.length - 1];\n    const redo = this.quill.history.stack.redo[this.quill.history.stack.redo.length - 1];\n    if (this.hasNotaRodape(delta) || this.hasNotaRodape(undo?.undo) || this.hasNotaRodape(undo?.redo) || this.hasNotaRodape(redo?.redo)) {\n      this.renumerarTodasNotas();\n      this.emitirEventoNotaRodapeAdicionadaOuRemovida(this.hasNotaRodape(delta));\n    }\n\n    if (this.hasNotaRodape(delta)) {\n      this.removerEspacosAoRedorNotaRodape();\n    }\n  }\n\n  removerEspacosAoRedorNotaRodape() {\n    // A operao de colar texto que possua nota de rodap est adicionando \\t antes e depois do nmero da nota\n    // O cdigo abaixo remove esses espaos\n\n    const notas = this.findBlotsNotaRodape();\n    notas.forEach(item => {\n      item.blot.next?.text?.match(/^\\t/) && this.quill.deleteText(item.index + 1, 1, 'silent');\n      item.blot.prev?.text?.match(/\\s$/) && this.quill.deleteText(item.index - 1, 1, 'silent');\n    });\n  }\n\n  timerEmitirEventoNotaRodapeChange;\n  emitirEventoNotaRodapeAdicionadaOuRemovida(isAdicionadaOuAtualizada) {\n    clearTimeout(this.timerEmitirEventoNotaRodapeChange);\n    this.timerEmitirEventoNotaRodapeChange = setTimeout(() => {\n      const eventName = isAdicionadaOuAtualizada ? NOTA_RODAPE_CHANGE_EVENT : NOTA_RODAPE_REMOVE_EVENT;\n      this.quill.root.dispatchEvent(new CustomEvent(eventName, { bubbles: true }));\n    }, 100);\n  }\n\n  hasNotaRodape(delta) {\n    return delta?.ops?.find(op => op.insert?.['nota-rodape']);\n  }\n\n  onClick(e) {\n    const el = e.target;\n    const elRev = el?.closest('ins, del');\n    if (!elRev && (el?.tagName === 'NOTA-RODAPE' || el?.parentElement?.tagName === 'NOTA-RODAPE')) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.solicitarTexto(el.notaRodape || el.parentElement.notaRodape);\n    }\n  }\n\n  tratarRespostaModal(event) {\n    event.stopPropagation();\n    const { id, texto } = event.detail;\n    const el = id && this.findNodeById(id);\n    this.quill.focus();\n    el ? this.atualizarTexto(el.notaRodape, texto) : this.adicionar(texto);\n  }\n\n  solicitarTexto(notaRodape) {\n    // const texto = prompt('Texto da nota', notaRodape?.texto);\n    // if (!texto) return;\n    // typeof notaRodape === 'object' ? this.atualizarTexto(notaRodape, texto) : this.adicionar(texto);\n\n    const notaRodapeModal = new NotaRodapeModal({\n      domNodeNotaRodape: this.quill.root,\n      idNotaRodape: notaRodape?.id,\n      textoInicialNotaRodape: notaRodape?.texto,\n      tituloModal: typeof notaRodape === 'object' ? 'Editar nota de rodap' : 'Adicionar nota de rodap',\n    });\n    notaRodapeModal.open();\n  }\n\n  atualizarTexto(notaRodape, novoTexto) {\n    const elemento = this.findNodeById(notaRodape.id);\n    const blot = Quill.find(elemento);\n    blot.format('nota-rodape', { ...notaRodape, texto: novoTexto });\n    return blot.domNode.notaRodape;\n  }\n\n  adicionar(texto) {\n    const quill = this.quill;\n    const range = quill.getSelection();\n    if (!range) return;\n\n    const id = this.gerarId();\n    const notaRodape = new NotaRodape({ id, numero: 0, texto });\n\n    const delta = new Delta().retain(range.index).delete(range.length).insert({ 'nota-rodape': notaRodape });\n\n    quill.updateContents(delta, 'user');\n    quill.setSelection(range.index + 1, 0);\n\n    return notaRodape;\n  }\n\n  remover(idNotaRodape) {\n    const elemento = this.findNodeById(idNotaRodape);\n    const blot = Quill.find(elemento);\n    blot?.remove();\n  }\n\n  editar(idNotaRodape) {\n    const notaRodape = this.findNodeById(idNotaRodape)?.notaRodape;\n    notaRodape && this.solicitarTexto(notaRodape);\n  }\n\n  associar(notasRodape) {\n    notasRodape.forEach(nota => {\n      const elemento = this.findNodeById(nota.id);\n      if (elemento) {\n        elemento.notaRodape = nota;\n      }\n    });\n  }\n\n  getNotasRodape() {\n    return this.findBlotsNotaRodape().map(item => item.blot.domNode.notaRodape);\n  }\n\n  gerarId() {\n    return PREFIXO_ID + new Date().getTime();\n  }\n\n  findNodeById(id) {\n    return this.quill.root.querySelector(`nota-rodape[id-nota-rodape=\"${id}\"]`);\n  }\n\n  findBlotsNotaRodape() {\n    return Array.from(this.quill.root.querySelectorAll('nota-rodape')).map(domNode => {\n      const blot = Quill.find(domNode as any);\n      const index = blot.offset(this.quill.scroll);\n      return {\n        index,\n        blot,\n      };\n    });\n  }\n\n  renumerarTodasNotas() {\n    const range = this.quill.getSelection();\n    const notas = this.findBlotsNotaRodape();\n    notas.forEach((item, idx) => {\n      const numero = idx + this.options.numeroInicial;\n      const node = item.blot.domNode;\n      node.innerText = numero;\n      node.setAttribute('numero', numero);\n      if (node.notaRodape?.id) {\n        node.notaRodape.numero = numero;\n      }\n    });\n    range && this.quill.setSelection(range.index, range.length);\n  }\n\n  ajustarConteudoTagsNotaRodape(html) {\n    // Ajusta o contedo das tags <nota-rodape> para que o nmero da nota fique dentro da tag <nota-rodape>\n    return html.replace(/<nota-rodape.+?<\\/nota-rodape>/g, (texto: string) => texto.replace(/>.?<span[^>]*>(\\d+)<\\/span>.?</g, '>$1<'));\n  }\n}\n\nexport { ModuloNotaRodape };\n","/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    function next() {\r\n        while (env.stack.length) {\r\n            var rec = env.stack.pop();\r\n            try {\r\n                var result = rec.dispose && rec.dispose.call(rec.value);\r\n                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n};\r\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst n=n=>e=>\"function\"==typeof e?((n,e)=>(window.customElements.define(n,e),e))(n,e):((n,e)=>{const{kind:t,elements:i}=e;return{kind:t,elements:i,finisher(e){window.customElements.define(n,e)}}})(n,e);export{n as customElement};\n//# sourceMappingURL=custom-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst i=(i,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}};function e(e){return(n,t)=>void 0!==t?((i,e,n)=>{e.constructor.createProperty(n,i)})(e,n,t):i(e,n)}export{e as property};\n//# sourceMappingURL=property.js.map\n","import{property as r}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function t(t){return r({...t,state:!0})}export{t as state};\n//# sourceMappingURL=state.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=(e,t,o)=>{Object.defineProperty(t,o,e)},t=(e,t)=>({kind:\"method\",placement:\"prototype\",key:t.key,descriptor:e}),o=({finisher:e,descriptor:t})=>(o,n)=>{var r;if(void 0===n){const n=null!==(r=o.originalKey)&&void 0!==r?r:o.key,i=null!=t?{kind:\"method\",placement:\"prototype\",key:n,descriptor:t(o.key)}:{...o,key:n};return null!=e&&(i.finisher=function(t){e(t,n)}),i}{const r=o.constructor;void 0!==t&&Object.defineProperty(o,n,t(n)),null==e||e(r,n)}};export{o as decorateProperty,e as legacyPrototypeMethod,t as standardPrototypeMethod};\n//# sourceMappingURL=base.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function i(i,n){return o({descriptor:o=>{const t={get(){var o,n;return null!==(n=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(n){const n=\"symbol\"==typeof o?Symbol():\"__\"+o;t.get=function(){var o,t;return void 0===this[n]&&(this[n]=null!==(t=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==t?t:null),this[n]}}return t}})}export{i as query};\n//# sourceMappingURL=query.js.map\n","import{decorateProperty as r}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function e(e){return r({descriptor:r=>({get(){var r,o;return null!==(o=null===(r=this.renderRoot)||void 0===r?void 0:r.querySelectorAll(e))&&void 0!==o?o:[]},enumerable:!0,configurable:!0})})}export{e as queryAll};\n//# sourceMappingURL=query-all.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var n;const e=null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));function l(n){const{slot:l,selector:t}=null!=n?n:{};return o({descriptor:o=>({get(){var o;const r=\"slot\"+(l?`[name=${l}]`:\":not([name])\"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(r),s=null!=i?e(i,n):[];return t?s.filter((o=>o.matches(t))):s},enumerable:!0,configurable:!0})})}export{l as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","/**\n@license\nCopyright (c) 2018 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n/**\n  This is a JavaScript mixin that you can use to connect a Custom Element base\n  class to a Redux store. The `stateChanged(state)` method will be called when\n  the state is updated.\n\n  Example:\n\n      import { connect } from 'pwa-helpers/connect-mixin.js';\n\n      class MyElement extends connect(store)(HTMLElement) {\n        stateChanged(state) {\n          this.textContent = state.data.count.toString();\n        }\n      }\n*/\nexport const connect = (store) => (baseElement) => class extends baseElement {\n    connectedCallback() {\n        if (super.connectedCallback) {\n            super.connectedCallback();\n        }\n        this._storeUnsubscribe = store.subscribe(() => this.stateChanged(store.getState()));\n        this.stateChanged(store.getState());\n    }\n    disconnectedCallback() {\n        this._storeUnsubscribe();\n        if (super.disconnectedCallback) {\n            super.disconnectedCallback();\n        }\n    }\n    /**\n     * The `stateChanged(state)` method will be called when the state is updated.\n     */\n    stateChanged(_state) { }\n};\n//# sourceMappingURL=connect-mixin.js.map","export class LexmlEmendaConfig {\n  urlConsultaParlamentares = 'api/parlamentares';\n  urlAutocomplete = 'api/autocomplete-norma';\n  urlComissoes?: string;\n  tamanhoMaximoAnexo = 5120; //5MB\n  tamanhoMaximoImagem = 2048; //2MB\n}\n","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","import { Referencia } from '../../elemento';\nimport { ElementoAction } from './index';\n\nexport const ADICIONAR_AGRUPADOR_ARTIGO = 'ADICIONAR_AGRUPADOR_ARTIGO';\n\nexport class AdicionarAgrupadorArtigo implements ElementoAction {\n  descricao: string;\n  posicao?: string;\n  hotkey = '(Ctrl+Alt+G)';\n\n  constructor(posicao?: string) {\n    this.descricao = 'Adicionar Ttulo, Captulo, Seo e outros' + (posicao ? ' ' + posicao : '');\n    this.posicao = posicao;\n  }\n\n  execute(atual: Referencia, tipo: string, refAux: any, posicao: string, manterNoMesmoGrupoDeAspas: boolean): any {\n    return {\n      type: ADICIONAR_AGRUPADOR_ARTIGO,\n      atual,\n      novo: {\n        tipo,\n        posicao,\n        manterNoMesmoGrupoDeAspas,\n      },\n    };\n  }\n}\n\nexport const adicionarAgrupadorArtigoAction = new AdicionarAgrupadorArtigo();\nexport const adicionarAgrupadorArtigoAntesAction = new AdicionarAgrupadorArtigo('antes');\n","import { Alerta } from '../alerta';\n\nexport const ADICIONAR_ALERTA = 'ADICIONAR_ALERTA';\n\nexport function adicionarAlerta(alerta: Alerta): any {\n  return {\n    type: ADICIONAR_ALERTA,\n    alerta: {\n      id: alerta.id,\n      tipo: alerta.tipo,\n      mensagem: alerta.mensagem,\n      podeFechar: alerta.podeFechar,\n      exibirComandoEmenda: alerta.exibirComandoEmenda,\n    },\n  };\n}\n","export const REMOVER_ALERTA = 'REMOVER_ALERTA';\n\nexport function removerAlerta(id: string): any {\n  return {\n    type: 'REMOVER_ALERTA',\n    id,\n  };\n}\n","import { Referencia } from '../../elemento';\n\nexport const ASSISTENTE_ALTERACAO = 'ASSISTENTE_ALTERACAO';\n\nexport class AdicionarAlteracaoComAssistenteAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Alterao com Assistente';\n  }\n\n  execute(atual: Referencia, norma?: string, dispositivos?: string): any {\n    return {\n      type: ASSISTENTE_ALTERACAO,\n      atual,\n      norma,\n      dispositivos,\n    };\n  }\n}\n\nexport const adicionarAlteracaoComAssistenteAction = new AdicionarAlteracaoComAssistenteAction();\n","import { Tipo } from '../../dispositivo/tipo';\n\nexport const TipoDispositivo: Record<string, Tipo> = {\n  agrupadorGenerico: {\n    tipo: 'DispositivoAgrupadorGenerico',\n    name: undefined,\n    tagId: 'dg',\n    descricao: undefined,\n    descricaoPlural: undefined,\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  alinea: {\n    tipo: 'Alinea',\n    name: 'Alinea',\n    tagId: 'ali',\n    descricao: 'Alnea',\n    descricaoPlural: 'Alneas',\n    tiposPermitidosPai: ['Inciso'],\n    tiposPermitidosFilhos: ['Item'],\n    tipoProvavelFilho: 'Item',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  articulacao: {\n    tipo: 'Articulacao',\n    name: 'Articulacao',\n    tagId: '',\n    descricao: 'Articulao',\n    descricaoPlural: 'Articulaes',\n    tiposPermitidosPai: [],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  artigo: {\n    tipo: 'Artigo',\n    name: 'Artigo',\n    tagId: 'art',\n    descricao: 'Artigo',\n    descricaoPlural: 'Artigos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  capitulo: {\n    tipo: 'Capitulo',\n    name: 'Capitulo',\n    tagId: 'cap',\n    descricao: 'Captulo',\n    descricaoPlural: 'Captulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo'],\n    tiposPermitidosFilhos: ['Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  caput: {\n    tipo: 'Caput',\n    name: 'Caput',\n    tagId: 'cpt',\n    descricao: 'Caput',\n    descricaoPlural: 'Capita',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  generico: {\n    tipo: 'DispositivoGenerico',\n    name: undefined,\n    tagId: 'gen',\n    descricao: 'Dispositivo genrico',\n    descricaoPlural: 'Dispositivos genricos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'],\n    tiposPermitidosFilhos: ['Paragrafo', 'Inciso', 'Alinea', 'Item'],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  inciso: {\n    tipo: 'Inciso',\n    name: 'Inciso',\n    tagId: 'inc',\n    descricao: 'Inciso',\n    descricaoPlural: 'Incisos',\n    tiposPermitidosPai: ['Artigo', 'Caput', 'Paragrafo'],\n    tiposPermitidosFilhos: ['Alinea'],\n    tipoProvavelFilho: 'Alinea',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  item: {\n    tipo: 'Item',\n    name: 'Item',\n    tagId: 'ite',\n    descricao: 'Item',\n    descricaoPlural: 'Itens',\n    tiposPermitidosPai: ['Alinea'],\n    tiposPermitidosFilhos: [],\n    tipoProvavelFilho: 'DispositivoGenerico',\n    INDICADOR_SEQUENCIA: [';', '; e', '; ou'],\n    INDICADOR_FIM_SEQUENCIA: ['.'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  livro: {\n    tipo: 'Livro',\n    name: 'Livro',\n    tagId: 'liv',\n    descricao: 'Livro',\n    descricaoPlural: 'Livros',\n    tiposPermitidosPai: ['Articulacao', 'Parte'],\n    tiposPermitidosFilhos: ['Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  omissis: {\n    tipo: 'Omissis',\n    name: 'Omissis',\n    tagId: 'omi',\n    descricao: 'Linha pontilhada (omissis)',\n    descricaoPlural: 'Linhas pontilhadas (omissis)',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Caput', 'Paragrafo', 'Alinea', 'Inciso'],\n    tiposPermitidosFilhos: ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo', 'Paragrafo', 'Alinea', 'Inciso', 'Item'],\n    tipoProvavelFilho: undefined,\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  paragrafo: {\n    tipo: 'Paragrafo',\n    name: 'Paragrafo',\n    tagId: 'par',\n    descricao: 'Pargrafo',\n    descricaoPlural: 'Pargrafos',\n    tiposPermitidosPai: ['Artigo'],\n    tiposPermitidosFilhos: ['Inciso'],\n    tipoProvavelFilho: 'Inciso',\n    INDICADOR_SEQUENCIA: ['.'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: [':'],\n  },\n  parte: {\n    tipo: 'Parte',\n    name: 'Parte',\n    tagId: 'prt',\n    descricao: 'Parte',\n    descricaoPlural: 'Partes',\n    tiposPermitidosPai: ['Articulacao'],\n    tiposPermitidosFilhos: ['Livro', 'Titulo', 'Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  secao: {\n    tipo: 'Secao',\n    name: 'Secao',\n    tagId: 'sec',\n    descricao: 'Seo',\n    descricaoPlural: 'Sees',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro', 'Titulo', 'Capitulo'],\n    tiposPermitidosFilhos: ['Subsecao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  subsecao: {\n    tipo: 'Subsecao',\n    name: 'Subsecao',\n    tagId: 'sub',\n    descricao: 'Subseo',\n    descricaoPlural: 'Subsees',\n    tiposPermitidosPai: ['Secao'],\n    tiposPermitidosFilhos: ['Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  titulo: {\n    tipo: 'Titulo',\n    name: 'Titulo',\n    tagId: 'tit',\n    descricao: 'Ttulo',\n    descricaoPlural: 'Ttulos',\n    tiposPermitidosPai: ['Articulacao', 'Parte', 'Livro'],\n    tiposPermitidosFilhos: ['Capitulo', 'Secao', 'Artigo'],\n    tipoProvavelFilho: 'Artigo',\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: [''],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n  ementa: {\n    tipo: 'Ementa',\n    name: 'Ementa',\n    tagId: 'eme',\n    descricao: 'Ementa',\n    descricaoPlural: 'Ementas',\n    tiposPermitidosPai: ['Articulacao'],\n    tiposPermitidosFilhos: [],\n    tipoProvavelFilho: undefined,\n    INDICADOR_SEQUENCIA: ['NA'],\n    INDICADOR_FIM_SEQUENCIA: ['NA'],\n    INDICADOR_DESDOBRAMENTO: ['NA'],\n  },\n};\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const ADICIONAR_ELEMENTO = 'ADICIONAR_ELEMENTO';\n\nexport class AdicionarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  isDispositivoAlteracao = false;\n  posicao?: string;\n  constructor(tipo?: Tipo, posicao?: string) {\n    this.descricao = `Adicionar ${tipo?.descricao?.toLowerCase() ?? ''} ${posicao && posicao !== 'filho' ? posicao : ''}`;\n    this.tipo = tipo?.tipo;\n    this.posicao = posicao;\n  }\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo: tipo ?? this.tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n      posicao: this.posicao,\n    };\n  }\n}\n\nexport const adicionarElementoAction = new AdicionarElemento();\n\nexport const adicionarArtigo = new AdicionarElemento(TipoDispositivo.artigo);\nexport const adicionarArtigoAntes = new AdicionarElemento(TipoDispositivo.artigo, 'antes');\nexport const adicionarArtigoDepois = new AdicionarElemento(TipoDispositivo.artigo, 'depois');\nexport const adicionarArtigoFilho = new AdicionarElemento(TipoDispositivo.artigo, 'filho');\n\nexport const adicionarAlinea = new AdicionarElemento(TipoDispositivo.alinea);\nexport const adicionarAlineaAntes = new AdicionarElemento(TipoDispositivo.alinea, 'antes');\nexport const adicionarAlineaDepois = new AdicionarElemento(TipoDispositivo.alinea, 'depois');\nexport const adicionarAlineaFilho = new AdicionarElemento(TipoDispositivo.alinea, 'filho');\n\nexport const adicionarInciso = new AdicionarElemento(TipoDispositivo.inciso);\nexport const adicionarIncisoAntes = new AdicionarElemento(TipoDispositivo.inciso, 'antes');\nexport const adicionarIncisoDepois = new AdicionarElemento(TipoDispositivo.inciso, 'depois');\nexport const adicionarIncisoFilho = new AdicionarElemento(TipoDispositivo.inciso, 'filho');\n\nexport const adicionarItem = new AdicionarElemento(TipoDispositivo.item);\nexport const adicionarItemAntes = new AdicionarElemento(TipoDispositivo.item, 'antes');\nexport const adicionarItemDepois = new AdicionarElemento(TipoDispositivo.item, 'depois');\nexport const adicionarItemFilho = new AdicionarElemento(TipoDispositivo.item, 'filho');\n\nexport const omissis = new AdicionarElemento(TipoDispositivo.omissis);\n\nexport const adicionarParagrafo = new AdicionarElemento(TipoDispositivo.paragrafo);\nexport const adicionarParagrafoAntes = new AdicionarElemento(TipoDispositivo.paragrafo, 'antes');\nexport const adicionarParagrafoDepois = new AdicionarElemento(TipoDispositivo.paragrafo, 'depois');\nexport const adicionarParagrafoFilho = new AdicionarElemento(TipoDispositivo.paragrafo, 'filho');\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ADICIONAR_ELEMENTOS_FROM_CLIPBOARD = 'ADICIONAR_ELEMENTOS_FROM_CLIPBOARD';\n\nexport class AdicionarElementosFromClipboardAction implements ElementoAction {\n  descricao: string;\n  constructor() {\n    this.descricao = `Adicionar Elemento from Clipboard`;\n  }\n  execute(atual: Referencia, conteudo?: string, _?: Referencia, isDispositivoAlteracao = false, isColarSubstituindo = true, posicao = 'depois'): any {\n    return {\n      type: ADICIONAR_ELEMENTOS_FROM_CLIPBOARD,\n      atual,\n      novo: {\n        isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      isColarSubstituindo,\n      posicao,\n    };\n  }\n}\n\nexport const adicionarElementoFromClipboardAction = new AdicionarElementosFromClipboardAction();\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const AGRUPAR_ELEMENTO = 'AGRUPAR_ELEMENTO';\n\nexport class AgruparElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n\n  constructor(tipo: Tipo) {\n    this.descricao = 'Adicionar ' + tipo.descricao;\n    this.tipo = tipo.tipo;\n  }\n\n  execute(atual: Referencia, uuid: string): any {\n    return {\n      type: AGRUPAR_ELEMENTO,\n      atual,\n      novo: {\n        tipo: this.tipo,\n        uuid: +uuid,\n      },\n    };\n  }\n}\nexport const adicionarParte = new AgruparElemento(TipoDispositivo.parte);\nexport const adicionarLivro = new AgruparElemento(TipoDispositivo.livro);\nexport const adicionarTitulo = new AgruparElemento(TipoDispositivo.titulo);\nexport const adicionarCapitulo = new AgruparElemento(TipoDispositivo.capitulo);\nexport const adicionarSecao = new AgruparElemento(TipoDispositivo.secao);\nexport const adicionarSubsecao = new AgruparElemento(TipoDispositivo.subsecao);\n","import { Revisao } from '../../revisao/revisao';\nimport { DispositivosEmenda } from './../../emenda/emenda';\n\nexport const APLICAR_ALTERACOES_EMENDA = 'APLICAR_ALTERACOES_EMENDA';\n\nexport class AplicarAlteracoesEmenda {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar';\n  }\n\n  execute(alteracoesEmenda: DispositivosEmenda, revisoes: Revisao[] = []): any {\n    return {\n      type: APLICAR_ALTERACOES_EMENDA,\n      alteracoesEmenda,\n      revisoes,\n    };\n  }\n}\n\nexport const aplicarAlteracoesEmendaAction = new AplicarAlteracoesEmenda();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_REFERENCIA_ELEMENTO = 'ATUALIZAR_REFERENCIA_ELEMENTO';\n\nexport class AtualizarReferenciaElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar Norma Referenciada';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_REFERENCIA_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarReferenciaElementoAction = new AtualizarReferenciaElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_TEXTO_ELEMENTO = 'ATUALIZAR_TEXTO_ELEMENTO';\n\nexport class AtualizarTextoElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_TEXTO_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarTextoElementoAction = new AtualizarTextoElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const AUTO_FIX = 'AUTO_FIX';\n\nexport class AutoFixAction implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Corrigir automaticamente';\n  }\n\n  execute(atual: Referencia, mensagem: string): any {\n    return {\n      type: AUTO_FIX,\n      atual,\n      mensagem,\n    };\n  }\n}\nexport const autofixAction = new AutoFixAction();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ELEMENTO_SELECIONADO = 'ELEMENTO_SELECIONADO';\n\nclass ElementoSelecionado implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento selecionado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: ELEMENTO_SELECIONADO,\n      atual,\n    };\n  }\n}\nexport const elementoSelecionadoAction = new ElementoSelecionado();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nexport const INFORMAR_DADOS_ASSISTENTE = 'INFORMAR_DADOS_ASSISTENTE';\n\nexport class InformarDadosAssistente implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Adicionar artigo para alterar outra norma';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_DADOS_ASSISTENTE,\n      atual,\n    };\n  }\n}\nexport const InformarDadosAssistenteAction = new InformarDadosAssistente();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const INFORMAR_EXISTENCIA_NA_NORMA = 'INFORMAR_EXISTENCIA_NA_NORMA';\n\nexport class InformarExistenciaDoElementoNaNorma implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  nomeAcao?: string;\n  hotkey?: string;\n  existeNaNormaAlterada: boolean;\n\n  constructor(descricao: string, nomeAcao: string, hotkey: string, existeNaNormaAlterada: boolean) {\n    this.descricao = descricao;\n    this.nomeAcao = nomeAcao;\n    this.hotkey = hotkey;\n    this.existeNaNormaAlterada = existeNaNormaAlterada;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_EXISTENCIA_NA_NORMA,\n      subType: this.nomeAcao,\n      atual,\n      existeNaNormaAlterada: this.existeNaNormaAlterada,\n    };\n  }\n}\n\nexport const considerarElementoExistenteNaNorma = new InformarExistenciaDoElementoNaNorma('Considerar existente na norma', 'considerarExistenteNaNorma', '(Ctrl+Alt+X)', true);\nexport const considerarElementoNovoNaNorma = new InformarExistenciaDoElementoNaNorma('Considerar novo na norma', 'considerarNovoNaNorma', '(Ctrl+Alt+X)', false);\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nexport const INFORMAR_NORMA = 'INFORMAR_NORMA';\n\nexport class InformarNorma implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Informar norma alterada';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: INFORMAR_NORMA,\n      atual,\n    };\n  }\n}\nexport const informarNormaAction = new InformarNorma();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ABAIXO = 'Mover para baixo';\n\nexport class MoverElementoAbaixo implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Alt+)';\n\n  constructor() {\n    this.descricao = 'Mover para baixo';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ABAIXO,\n      atual,\n    };\n  }\n}\nexport const moverElementoAbaixoAction = new MoverElementoAbaixo();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const MOVER_ELEMENTO_ACIMA = 'Mover para cima';\n\nexport class MoverElementoAcima implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Alt+)';\n\n  constructor() {\n    this.descricao = 'Mover para cima';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: MOVER_ELEMENTO_ACIMA,\n      atual,\n    };\n  }\n}\nexport const moverElementoAcimaAction = new MoverElementoAcima();\n","export const ABRIR_ARTICULACAO = 'ABRIR_ARTICULACAO';\n\nexport const openArticulacaoAction = (articulacao: any, classificacao?: string): any => {\n  return {\n    type: ABRIR_ARTICULACAO,\n    classificacao,\n    articulacao,\n  };\n};\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const REMOVER_ELEMENTO = 'REMOVER_ELEMENTO';\n\nexport class RemoverElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Ctrl+D)';\n\n  constructor() {\n    this.descricao = 'Remover';\n  }\n\n  execute(atual: Referencia, elementoLinhaAnterior: any): any {\n    return {\n      type: REMOVER_ELEMENTO,\n      atual,\n      elementoLinhaAnterior,\n    };\n  }\n}\nexport const removerElementoAction = new RemoverElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RENUMERAR_ELEMENTO = 'RENUMERAR_ELEMENTO';\n\nexport class RenumerarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n  hotkey = '(Ctrl+Alt+N)';\n\n  constructor() {\n    this.descricao = 'Numerar dispositivo';\n  }\n\n  execute(atual: Referencia, numero: string): any {\n    this.tipo = atual.tipo;\n    return {\n      type: RENUMERAR_ELEMENTO,\n      atual,\n      novo: {\n        numero,\n      },\n    };\n  }\n}\nexport const renumerarElementoAction = new RenumerarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const RESTAURAR_ELEMENTO = 'RESTAURAR_ELEMENTO';\n\nexport class RestaurarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Restaurar texto original';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: RESTAURAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const restaurarElementoAction = new RestaurarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const SUPRIMIR_AGRUPADOR = 'SUPRIMIR_AGRUPADOR';\n\nclass SuprimirAgrupador implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Suprimir apenas o Agrupador';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: SUPRIMIR_AGRUPADOR,\n      atual,\n    };\n  }\n}\nexport const suprimirAgrupadorAction = new SuprimirAgrupador();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const SUPRIMIR_ELEMENTO = 'SUPRIMIR_ELEMENTO';\n\nclass SuprimirElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Suprimir';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: SUPRIMIR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const suprimirElementoAction = new SuprimirElemento();\n","import { ElementoAction } from '.';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { Referencia } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const TRANSFORMAR_TIPO_ELEMENTO = 'TRANSFORMAR_TIPO_ELEMENTO';\n\nexport class TransformarElemento implements ElementoAction {\n  descricao: string;\n  tipo: string;\n  nomeAcao?: string;\n  hotkey?: string;\n\n  constructor(tipo: Tipo, descricao: string, nomeAcao: string, hotkey?: string) {\n    this.descricao = descricao;\n    this.tipo = tipo.tipo;\n    this.nomeAcao = nomeAcao;\n    this.hotkey = hotkey;\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: TRANSFORMAR_TIPO_ELEMENTO,\n      subType: this.nomeAcao,\n      atual,\n      novo: {\n        tipo: this.tipo,\n      },\n    };\n  }\n}\nexport const transformarEmOmissisAlinea = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Alneas', 'transformarAlineaEmOmissisAlinea', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisIncisoCaput = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Incisos', 'transformarIncisoCaputEmOmissisIncisoCaput', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisItem = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Itens', 'transformarItemEmOmissisItem', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisParagrafo = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Pargrafos', 'transformarParagrafoEmOmissisParagrafo', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisArtigo = new TransformarElemento(TipoDispositivo.omissis, 'Omitir Artigos', 'transformarArtigoEmOmissisArtigo', '(Ctrl+Alt+O)');\nexport const transformarEmOmissisIncisoParagrafo = new TransformarElemento(\n  TipoDispositivo.omissis,\n  'Omitir Incisos',\n  'transformarIncisoParagrafoEmOmissisIncisoParagrafo',\n  '(Ctrl+Alt+O)'\n);\n\nexport const transformarAlineaEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarAlineaEmIncisoCaput', '(Shift+Tab)');\nexport const transformarAlineaEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarAlineaEmIncisoParagrafo', '(Shift+Tab)');\nexport const transformaAlineaEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarAlineaEmItem', '(Tab)');\nexport const transformarArtigoEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Pargrafo', 'transformarArtigoEmParagrafo', '(Tab)');\nexport const transformarGenericoEmInciso = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarDispositivoGenericoEmInciso');\nexport const transformarGenericoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarDispositivoGenericoEmAlinea');\nexport const transformarGenericoEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarDispositivoGenericoEmItem');\nexport const transformarIncisoParagrafoEmParagrafo = new TransformarElemento(\n  TipoDispositivo.paragrafo,\n  'Transformar em Pargrafo',\n  'transformarIncisoParagrafoEmParagrafo',\n  '(Shift+Tab)'\n);\nexport const transformarIncisoCaputEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Pargrafo', 'transformarIncisoCaputEmParagrafo', '(Shift+Tab)');\nexport const transformarIncisoCaputEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarIncisoCaputEmAlinea', '(Tab)');\nexport const transformarIncisoParagrafoEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarIncisoParagrafoEmAlinea', '(Tab)');\n\nexport const transformarOmissisEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarOmissisEmAlinea');\nexport const transformarOmissisEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar em Artigo', 'transformarOmissisEmArtigo');\nexport const transformarOmissisEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarOmissisEmIncisoCaput');\nexport const transformarOmissisEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarOmissisEmIncisoParagrafo');\nexport const transformarOmissisEmItem = new TransformarElemento(TipoDispositivo.item, 'Transformar em Item', 'transformarOmissisEmItem');\nexport const transformarOmissisEmParagrafo = new TransformarElemento(TipoDispositivo.paragrafo, 'Transformar em Pargrafo', 'transformarOmissisEmParagrafo');\n\nexport const transformarItemEmAlinea = new TransformarElemento(TipoDispositivo.alinea, 'Transformar em Alnea', 'transformarItemEmAlinea', '(Shift+Tab)');\nexport const transformarParagrafoEmArtigo = new TransformarElemento(TipoDispositivo.artigo, 'Transformar em Artigo', 'transformarParagrafoEmArtigo', '(Shift+Tab)');\nexport const transformarParagrafoEmIncisoParagrafo = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarParagrafoEmIncisoParagrafo', '(Tab)');\nexport const transformarParagrafoEmIncisoCaput = new TransformarElemento(TipoDispositivo.inciso, 'Transformar em Inciso', 'transformarParagrafoEmIncisoCaput', '(Tab)');\n","import { ElementoAction } from '.';\n\nexport const VALIDAR_ARTICULACAO = 'VALIDAR_ARTICULACAO';\n\nclass ValidarArticulacao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Articulao validada';\n  }\n\n  execute(): any {\n    return {\n      type: VALIDAR_ARTICULACAO,\n    };\n  }\n}\nexport const validarArticulacaAction = new ValidarArticulacao();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const VALIDAR_ELEMENTO = 'VALIDAR_ELEMENTO';\n\nclass ValidarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Elemento validado';\n  }\n\n  execute(atual: Referencia): any {\n    return {\n      type: VALIDAR_ELEMENTO,\n      atual,\n    };\n  }\n}\nexport const validarElementoAction = new ValidarElemento();\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_NOTA_ALTERACAO = 'ATUALIZAR_NOTA_ALTERACAO';\n\nexport class AtualizarNotaAlteracao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar nota de alterao';\n  }\n\n  execute(atual: Referencia, notaAlteracao: string): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_NOTA_ALTERACAO,\n      atual,\n      notaAlteracao,\n    };\n  }\n}\n\nexport const atualizarNotaAlteracaoAction = new AtualizarNotaAlteracao();\n","import { Referencia } from '../../elemento';\n\nexport const REMOVER_ELEMENTO_SEM_TEXTO = 'REMOVER_ELEMENTO_SEM_TEXTO';\n\nexport class RemoverElementoSemTexto {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Remover dispositivo sem texto';\n  }\n\n  execute(atual: Referencia, key: string): any {\n    return {\n      type: REMOVER_ELEMENTO_SEM_TEXTO,\n      atual,\n      key,\n    };\n  }\n}\nexport const removerElementoSemTextoAction = new RemoverElementoSemTexto();\n","import { Elemento } from '../elemento';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Situacao {\n  situacao: TipoSituacao;\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[];\n}\n\nexport interface TipoSituacao {\n  descricaoSituacao: string;\n  dispositivoOriginal?: Partial<Elemento>;\n}\n\nexport enum DescricaoSituacao {\n  DISPOSITIVO_ADICIONADO = 'Dispositivo Adicionado',\n  DISPOSITIVO_NOVO = 'Dispositivo Novo',\n  DISPOSITIVO_MODIFICADO = 'Dispositivo Modificado',\n  DISPOSITIVO_ORIGINAL = 'Dispositivo Original',\n  DISPOSITIVO_SUPRIMIDO = 'Dispositivo Suprimido',\n}\n\nexport const isSituacaoExclusivaDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  return [DescricaoSituacao.DISPOSITIVO_ADICIONADO.toString(), DescricaoSituacao.DISPOSITIVO_MODIFICADO.toString(), DescricaoSituacao.DISPOSITIVO_SUPRIMIDO.toString()].includes(\n    dispositivo.situacao.descricaoSituacao\n  );\n};\n\nexport const isDispositivoEmenda = (dispositivo: Dispositivo): boolean => {\n  if (isSituacaoExclusivaDispositivoEmenda(dispositivo)) {\n    return true;\n  }\n\n  if (dispositivo.pai === undefined) {\n    return false;\n  }\n\n  return isDispositivoEmenda(dispositivo.pai!);\n};\n\nexport const isAlteracaoIntegral = (dispositivo: Dispositivo): boolean => {\n  if (dispositivo.tipo !== TipoDispositivo.artigo.tipo && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return false;\n  }\n  if (dispositivo.filhos.length) {\n    for (const filho of dispositivo.filhos) {\n      if (!isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (dispositivo.tipo === TipoDispositivo.caput.tipo && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return true;\n  }\n  return false;\n};\n","// export const TEXTO_OMISSIS = '...........................................................................................';\nexport const TEXTO_OMISSIS =\n  '.................................................................................................................................................................................................................................................................................';\n","import { TEXTO_OMISSIS } from '../lexml/conteudo/textoOmissis';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { Dispositivo } from './dispositivo';\n\nexport interface Tipo {\n  tipo: string;\n  name?: string;\n  tagId?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n}\n\nexport const isArticulacao = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const isDispositivoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.generico.tipo;\n};\n\nexport const isArtigo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.artigo.tipo;\n};\n\nexport const isCaput = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.caput.tipo;\n};\n\nexport const isParagrafo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.paragrafo.tipo;\n};\n\nexport const isInciso = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.inciso.tipo;\n};\n\nexport const isIncisoCaput = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isCaput(dispositivo.pai!);\n};\n\nexport const isIncisoParagrafo = (dispositivo: Dispositivo): boolean => {\n  return isInciso(dispositivo) && isParagrafo(dispositivo.pai!);\n};\n\nexport const isAlinea = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.alinea.tipo;\n};\n\nexport const isItem = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.item.tipo;\n};\n\nexport const isOmissis = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.omissis.tipo;\n};\n\nexport const isLivro = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.livro.tipo;\n};\n\nexport const isTitulo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.titulo.tipo;\n};\n\nexport const isParte = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.parte.tipo;\n};\n\nexport const isCapitulo = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.capitulo.tipo;\n};\n\nexport const isAgrupador = (dispositivo: Dispositivo): boolean => {\n  return [\n    TipoDispositivo.articulacao.tipo,\n    TipoDispositivo.agrupadorGenerico.tipo,\n    TipoDispositivo.capitulo.tipo,\n    TipoDispositivo.livro.tipo,\n    TipoDispositivo.parte.tipo,\n    TipoDispositivo.secao.tipo,\n    TipoDispositivo.subsecao.tipo,\n    TipoDispositivo.titulo.tipo,\n  ].includes(dispositivo.tipo);\n};\n\nexport const isAgrupadorNaoArticulacao = (dispositivo: Dispositivo): boolean => {\n  return isAgrupador(dispositivo) && !isArticulacao(dispositivo);\n};\n\nexport const isAgrupadorGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.agrupadorGenerico.tipo;\n};\n\nexport const isDispositivoDeArtigo = (dispositivo: Dispositivo): boolean => {\n  return [TipoDispositivo.paragrafo.tipo, TipoDispositivo.inciso.tipo, TipoDispositivo.alinea.tipo, TipoDispositivo.item.tipo].includes(dispositivo.tipo);\n};\n\nexport const isEmenta = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.tipo === TipoDispositivo.ementa.tipo;\n};\n\nexport const isTextoMaiusculo = (dispositivo?: Dispositivo): boolean => {\n  if (dispositivo === undefined) {\n    return false;\n  }\n  return isCapitulo(dispositivo) || isParte(dispositivo) || isLivro(dispositivo) || isTitulo(dispositivo);\n};\n\nexport const isTextoOmitido = (d: Dispositivo): boolean => {\n  return isOmissis(d) || d.texto.startsWith(TEXTO_OMISSIS) || d.texto.indexOf(TEXTO_OMISSIS) > -1;\n};\n","export enum ClassificacaoDocumento {\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n  NORMA = 'norma',\n  PROJETO = 'projeto',\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoDeArtigo, isDispositivoGenerico, isEmenta, isIncisoCaput, isParagrafo, Tipo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { omissis } from '../acao/adicionarElementoAction';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao, isCaput, isOmissis } from './../../dispositivo/tipo';\nimport { TipoDispositivo } from './../tipo/tipoDispositivo';\n\nexport function getArticulacao(dispositivo: Dispositivo): Articulacao {\n  if (!dispositivo) {\n    return dispositivo as Articulacao;\n  }\n  if (isArticulacao(dispositivo)) {\n    return dispositivo as Articulacao;\n  }\n  if (dispositivo.pai === undefined) {\n    throw new Error('No foi encontrada a articulao');\n  }\n  return getArticulacao(dispositivo.pai);\n}\n\nexport function getArticulacaoAlteracao(dispositivo: Dispositivo): Articulacao {\n  if (isArticulacaoAlteracao(dispositivo)) {\n    return dispositivo as Articulacao;\n  }\n  if (dispositivo.pai === undefined) {\n    throw new Error('No foi encontrada a articulao alterao');\n  }\n  return getArticulacaoAlteracao(dispositivo.pai);\n}\n\nexport function getDispositivo(uuid: number, dispositivo: Dispositivo | Articulacao): Dispositivo | Articulacao | null {\n  if (dispositivo.uuid === uuid) {\n    return dispositivo;\n  } else if (dispositivo.filhos !== null) {\n    let result: any = null;\n\n    const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n\n    for (let i = 0; result === null && i < filhos.length; i++) {\n      result = getDispositivo(uuid, filhos[i]);\n    }\n    return result;\n  }\n  return null;\n}\n\nexport const findDispositivoByUuid = (dispositivo: Dispositivo, uuid: number): Dispositivo | null => {\n  if (uuid === undefined) {\n    throw new Error('uuid no foi informado');\n  }\n  return getDispositivo(uuid, dispositivo);\n};\n\nexport const getUltimoFilho = (dispositivo: Dispositivo): Dispositivo => {\n  if (hasFilhos(dispositivo)) {\n    return getUltimoFilho(dispositivo.filhos[dispositivo.filhos.length - 1]);\n  } else if (dispositivo?.hasAlteracao() && dispositivo.alteracoes?.filhos.length) {\n    return getUltimoFilho(dispositivo.alteracoes.filhos[dispositivo.alteracoes.filhos.length - 1]);\n  } else {\n    return dispositivo;\n  }\n};\n\nexport const getFilhosEstiloLexML = (d: Dispositivo): Dispositivo[] => {\n  if (isArtigo(d)) {\n    const artigo = d as Artigo;\n    return [artigo.caput as Dispositivo, ...artigo.filhos.filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))];\n  }\n  return [...d.filhos];\n};\n\nexport const irmaosMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  return isArtigo(dispositivo)\n    ? getArticulacao(dispositivo).artigos.filter(f => f.tipo === dispositivo.tipo)\n    : dispositivo.pai\n    ? dispositivo.pai!.filhos.filter(f => f.tipo === dispositivo.tipo)\n    : [dispositivo];\n};\n\nexport const getAgrupadoresPosterioresTipoAcima = (dispositivo: Dispositivo, tipo: Tipo): Dispositivo[] => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d) && dispositivo.tiposPermitidosPai!.indexOf(tipo.tipo) > 0);\n};\n\nexport const getAgrupadoresAcima = (pai: Dispositivo, referencia: Dispositivo, agrupadores: Dispositivo[]): Dispositivo[] => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia); i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isAgrupador(d)) {\n        agrupadores.push(d);\n      }\n    }\n    if (pai?.pai) {\n      return getAgrupadoresAcima(pai.pai, referencia.pai!, agrupadores);\n    }\n  }\n  return agrupadores;\n};\n\nexport const hasAgrupador = (pai: Dispositivo): boolean => {\n  return pai.filhos.filter(a => isAgrupador(a)).length > 0;\n};\n\nexport const hasAgrupadoresAcima = (dispositivo: Dispositivo): boolean => {\n  const agrupadores: Dispositivo[] = [];\n  if (dispositivo.pai?.pai === undefined) {\n    return false;\n  }\n\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai, agrupadores).length > 0;\n};\n\nexport const getAgrupadorAcimaByTipo = (referencia: Dispositivo, tipo: string): Dispositivo | undefined => {\n  return [...new Set(getAgrupadoresAcima(referencia.pai!, referencia, []))].filter(a => a.tipo === tipo).reverse()[0];\n};\n\nexport const hasAgrupadoresAnterioresByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).filter(d => d.tipo === tipo).length > 0;\n};\n\nexport const getAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): Dispositivo | undefined => {\n  if (!dispositivo || !dispositivo.pai) {\n    return undefined;\n  }\n  if (dispositivo.pai && dispositivo.pai.tipo === tipo) {\n    return dispositivo.pai;\n  }\n  return getAgrupadoresAcimaByTipo(dispositivo.pai!, tipo);\n};\n\nexport const hasAgrupadoresAcimaByTipo = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return getAgrupadoresAcimaByTipo(dispositivo, tipo) !== undefined;\n};\n\nexport const getArtigo = (dispositivo: Dispositivo): Dispositivo => {\n  if (isArtigo(dispositivo.pai!)) {\n    return dispositivo.pai!;\n  }\n  return getArtigo(dispositivo.pai!);\n};\n\nexport const getArtigoDoProjeto = (dispositivo: Dispositivo): Dispositivo => {\n  const pai = dispositivo.pai!;\n  if (isArtigo(pai) && !isDispositivoAlteracao(pai)) {\n    return dispositivo.pai!;\n  }\n  return getArtigoDoProjeto(dispositivo.pai!);\n};\n\nexport const getArtigosAnterioresIndependenteAgrupador = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo);\n\n  if (pos < 1) {\n    return [];\n  }\n  return getArticulacao(dispositivo).artigos.filter((artigo, index) => index < pos);\n};\n\nexport const getArtigosPosterioresIndependenteAgrupador = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo);\n\n  if (pos === -1 || getArticulacao(dispositivo).artigos.length === pos + 1) {\n    return [];\n  }\n  return getArticulacao(dispositivo).artigos.filter((artigo, index) => index > pos);\n};\n\n// Retorna o dispositivo imediatamente anterior na sequncia de leitura ou primeiro dispositivo anterior aceito por \"accept\" na sequncia de leitura\n// Considera caput. No considera incisos de caput como filhos de artigo.\nexport const getDispositivoAnteriorNaSequenciaDeLeitura = (disp: Dispositivo, accept?: (d: Dispositivo) => boolean): Dispositivo | undefined => {\n  if (!disp.pai) {\n    return undefined;\n  }\n  if (isArticulacaoAlteracao(disp)) {\n    const anterior = (disp.pai! as Artigo).caput!;\n    return !accept || accept(anterior) ? anterior : getDispositivoAnteriorNaSequenciaDeLeitura(anterior, accept);\n  }\n  const irmaos = isArtigo(disp.pai) ? getFilhosArtigoEstiloLexML(disp.pai as Artigo) : disp.pai.filhos;\n  const pos = irmaos.indexOf(disp);\n  // Busca dispositivo mais  direita na rvore do irmo anterior ou o pai se no houver irmo anterior\n  const anterior = pos ? getUltimoFilho(irmaos[pos - 1]) : disp.pai;\n  return !accept || accept(anterior) ? anterior : getDispositivoAnteriorNaSequenciaDeLeitura(anterior, accept);\n};\n\n// Retorna o dispositivo imediatamente posterior na sequncia de leitura ou primeiro dispositivo posterior aceito por \"accept\" na sequncia de leitura\n// Considera caput. No considera incisos de caput como filhos de artigo.\nexport const getDispositivoPosteriorNaSequenciaDeLeitura = (disp: Dispositivo, accept?: (d: Dispositivo) => boolean, aPartirDe?: Dispositivo): Dispositivo | undefined => {\n  if (!disp) {\n    return undefined;\n  }\n  let proximo: Dispositivo | undefined = undefined;\n  if (aPartirDe) {\n    proximo = getIrmaoPosteriorIndependenteDeTipo(aPartirDe);\n  } else {\n    const filhos = isArtigo(disp) ? getFilhosArtigoEstiloLexML(disp as Artigo) : disp.filhos;\n    if (filhos.length) {\n      proximo = filhos[0];\n    }\n  }\n  if (!proximo && !isDispositivoRaiz(disp)) {\n    return getDispositivoPosteriorNaSequenciaDeLeitura(disp.pai!, accept, disp);\n  }\n  return proximo ? (!accept || accept(proximo) ? proximo : getDispositivoPosteriorNaSequenciaDeLeitura(proximo, accept)) : undefined;\n};\n\nexport const getFilhosArtigoEstiloLexML = (art: Artigo): Dispositivo[] => {\n  // Adiciona o caput e remove os incisos do caput\n  return [art.caput!, ...getParagrafosEOmissis(art)];\n};\n\nexport const getProximoArtigoAnterior = (pai: Dispositivo, referencia: Dispositivo): Dispositivo | undefined => {\n  if (pai?.filhos) {\n    for (let i = pai?.indexOf(referencia) - 1; i >= 0; i--) {\n      const d = pai?.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n    if (pai?.pai) {\n      return getProximoArtigoAnterior(pai.pai, referencia.pai!);\n    }\n  }\n  return undefined;\n};\n\nconst buscaArtigoAnteriorAbaixo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (dispositivo === undefined) {\n    return undefined;\n  }\n\n  if (dispositivo.filhos) {\n    for (let i = dispositivo.filhos.length - 1; i >= 0; i--) {\n      const d = dispositivo.filhos[i];\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return buscaArtigoAnteriorAbaixo(d);\n      }\n    }\n  }\n  return undefined;\n};\n\nexport const getAgrupadorPosterior = (dispositivo: Dispositivo): Dispositivo => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d))[0];\n};\n\nexport const hasAgrupadoresPosteriores = (dispositivo: Dispositivo): boolean => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((d, i) => i > pos && isAgrupador(d)).length > 0;\n};\n\nexport const hasFilhoGenerico = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos?.filter(d => isDispositivoGenerico(d)).length > 0;\n};\n\nexport const isUnicoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length === 1;\n};\n\nexport const isUltimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[f.length - 1] === dispositivo;\n};\n\nexport const isPenultimoMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f.length > 1 && f[f.length - 2] === dispositivo;\n};\n\nexport const isPrimeiroMesmoTipo = (dispositivo: Dispositivo): boolean => {\n  const f = irmaosMesmoTipo(dispositivo);\n  return f[0] === dispositivo;\n};\n\nexport const hasFilhos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos && dispositivo.filhos.length > 0;\n};\n\nexport const getDispositivoAnterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return pos && pos > 0 ? dispositivo.pai!.filhos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos > 0 ? irmaos[pos - 1] : undefined;\n};\n\nexport const getDispositivoAnteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === 0) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index < pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos.pop();\n};\n\n// Diferencia do getDispositivoAnteriorMesmoTipoInclusiveOmissis por identificar dispositivo irmo anterior de omissis\n// [FRAGO] Provavelmente o ideal seria alterar o outro mtodo mas no tive confiana nem tempo para verificar as implicaes.\nexport const getIrmaoAnteriorIndependenteDeTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === 0) {\n    return undefined;\n  }\n\n  // A restrio pelo mesmo pai diferencia incisos de caput (e omissis) de pargrafos (e omissis).\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index < pos && f.pai === dispositivo.pai);\n  return irmaos.pop();\n};\n\n// Retorna dispositivo imediatamente anterior na sequncia de leitura.\nexport const getDispositivoAnteriorDireto = (d: Dispositivo): Dispositivo => {\n  const pai = d.pai as Dispositivo;\n  const irmaos = getFilhosEstiloLexML(pai);\n  const i = irmaos.indexOf(d);\n  if (i > 0) {\n    d = irmaos[i - 1];\n  } else {\n    return pai;\n  }\n  let filhos = getFilhosEstiloLexML(d);\n  while (filhos.length) {\n    d = filhos[filhos.length - 1];\n    filhos = getFilhosEstiloLexML(d);\n  }\n  return d;\n};\n\nexport const getDispositivoPosterior = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (!dispositivo.pai) {\n    return undefined;\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return pos < dispositivo.pai!.filhos.length - 1 ? dispositivo.pai!.filhos[pos + 1] : undefined;\n};\n\nexport const getDispositivoPosteriorMesmoTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const irmaos = irmaosMesmoTipo(dispositivo);\n  const pos = irmaos.indexOf(dispositivo);\n  return pos < irmaos.length - 1 ? irmaos[pos + 1] : undefined;\n};\n\nexport const getDispositivosAnterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index < pos! && f.tipo === dispositivo.tipo && f.pai === dispositivo.pai) ?? [];\n};\n\nexport const getDispositivosPosterioresMesmoTipo = (dispositivo: Dispositivo): Dispositivo[] => {\n  const pos = dispositivo.pai?.indexOf(dispositivo);\n  return dispositivo.pai?.filhos.filter((f, index) => index > pos! && f.tipo === dispositivo.tipo) ?? [];\n};\n\nexport const getDispositivoPosteriorMesmoTipoInclusiveOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === dispositivo.pai!.filhos.length - 1) {\n    return undefined;\n  }\n\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index > pos && (f.tipo === dispositivo.tipo || f.tipo === omissis.tipo));\n  return irmaos[0];\n};\n\n// Diferencia do getDispositivoPosteriorMesmoTipoInclusiveOmissis por identificar dispositivo irmo posterior de omissis\n// [FRAGO] Provavelmente o ideal seria alterar o outro mtodo mas no tive confiana nem tempo para verificar as implicaes.\nexport const getIrmaoPosteriorIndependenteDeTipo = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n\n  if (pos === dispositivo.pai!.filhos.length - 1) {\n    return undefined;\n  }\n\n  // A restrio pelo mesmo pai diferencia incisos de caput (e omissis) de pargrafos (e omissis).\n  const irmaos = dispositivo.pai!.filhos.filter((f, index) => index > pos && f.pai === dispositivo.pai);\n  return irmaos[0];\n};\n\nexport const getDispositivosAnteriores = (dispositivo: Dispositivo, isExclusao = false): Dispositivo[] => {\n  if (isArtigo(dispositivo)) {\n    const articulacao = getArticulacao(dispositivo);\n    const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo);\n    return articulacao.artigos.filter((artigo, index) => index < pos);\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((disp, index) => (isExclusao ? index > pos : index >= pos)).filter(d => dispositivo.tipo === d.tipo);\n};\n\nexport const getDispositivosPosteriores = (dispositivo: Dispositivo, isExclusao = false): Dispositivo[] => {\n  if (isArtigo(dispositivo)) {\n    const articulacao = getArticulacao(dispositivo);\n    const pos = getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo);\n    return articulacao.artigos.filter((artigo, index) => index > pos);\n  }\n  const pos = dispositivo.pai!.indexOf(dispositivo);\n  return dispositivo.pai!.filhos.filter((disp, index) => (isExclusao ? index > pos : index >= pos)).filter(d => dispositivo.tipo === d.tipo);\n};\n\nexport const isArtigoUnico = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const isParagrafoUnico = (dispositivo: Dispositivo): boolean => {\n  return isParagrafo(dispositivo) && isUnicoMesmoTipo(dispositivo);\n};\n\nexport const getDispositivoCabecaAlteracao = (dispositivo: Dispositivo): Dispositivo => {\n  return dispositivo.cabecaAlteracao || isDispositivoCabecaAlteracao(dispositivo) ? dispositivo : getDispositivoCabecaAlteracao(dispositivo.pai!);\n};\n\nexport const isDispositivoCabecaAlteracao = (dispositivo: Dispositivo): boolean => {\n  return !!dispositivo.pai && isArticulacaoAlteracao(dispositivo.pai);\n};\n\nexport const isAntesDoPrimeiroDispositivoOriginal = (dispositivo: Dispositivo): boolean => {\n  return getDispositivosPosterioresMesmoTipo(dispositivo).filter(d => isOriginal(d) && d.numero === '1').length > 0;\n};\n\nexport const isUltimaAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getDispositivoCabecaAlteracao(dispositivo);\n\n  const lista = getDispositivoAndFilhosAsLista(atual);\n\n  const ultimoLista = lista[lista.length - 1];\n  const dispTeste = isCaput(dispositivo) ? dispositivo.pai! : dispositivo;\n  if (ultimoLista === dispTeste) {\n    if (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !isArticulacaoAlteracao(atual.pai!)) {\n      const proximo = getDispositivoPosteriorNaSequenciaDeLeitura(atual, d => {\n        return isArtigo(d) || isAgrupadorNaoArticulacao(d) || !isDispositivoAlteracao(d);\n      });\n      return !(\n        proximo &&\n        isDispositivoAlteracao(proximo) &&\n        !isArticulacaoAlteracao(proximo.pai!) &&\n        proximo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n      );\n    }\n    return true;\n  }\n\n  return false;\n};\n\nconst buscaDispositivoDeArtigoPosterior = (pai: Dispositivo, index: number): Dispositivo | undefined => {\n  if (pai === undefined || isArtigo(pai)) {\n    return undefined;\n  }\n\n  for (let i = index + 1; i < pai.filhos.length; i++) {\n    const d = pai.filhos[i];\n    if (isDispositivoDeArtigo(d)) {\n      return d;\n    }\n  }\n\n  return buscaDispositivoDeArtigoPosterior(pai.pai!, pai.pai!.indexOf(pai!));\n};\n\nexport const isUltimaEnumeracao = (dispositivo: Dispositivo): boolean => {\n  if (getDispositivoPosterior(dispositivo)) {\n    return false;\n  }\n\n  if (isParagrafo(dispositivo) || !isDispositivoDeArtigo(dispositivo)) {\n    return false;\n  }\n\n  const proximoDispositivoDeArtigo = buscaDispositivoDeArtigoPosterior(dispositivo.pai!, dispositivo.pai!.indexOf(dispositivo));\n\n  if (!proximoDispositivoDeArtigo || isParagrafo(proximoDispositivoDeArtigo)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const hasDispositivosPosterioresAlteracao = (dispositivo: Dispositivo): boolean => {\n  const atual = getArticulacao(dispositivo).pai;\n\n  if (!atual) {\n    return false;\n  }\n\n  const articulacao = getArticulacao(atual!);\n\n  return isUnicoMesmoTipo(atual) || articulacao.indexOfArtigo(atual) < articulacao.artigos.length - 1;\n};\n\n// Verifica se todos os filhos dos tipos (inciso, alnea ou item) esto suprimidos.\nexport const isTodosFilhosTipoEnumeracaoSuprimidos = (dispositivo: Dispositivo): boolean => {\n  if (isAgrupador(dispositivo)) {\n    // No deveria ser chamado para agrupadores\n    return false;\n  }\n  if (isArtigo(dispositivo)) {\n    // Evita listar pargrafos\n    dispositivo = (dispositivo as Artigo).caput!;\n  }\n  return !getSomenteFilhosDispositivoAsLista([], dispositivo.filhos).some(d => !isSuprimido(d));\n};\n\nexport const isArticulacaoAlteracao = (articulacao: Dispositivo): boolean => {\n  return isArticulacao(articulacao) && articulacao.pai !== undefined;\n};\n\nexport const isDispositivoAlteracao = (dispositivo: Dispositivo): boolean => {\n  const r = !!dispositivo.isDispositivoAlteracao;\n\n  if (r) {\n    return true;\n  }\n\n  try {\n    return getArticulacao(dispositivo).pai !== undefined;\n  } catch (error) {\n    return false;\n  }\n};\n\nexport const podemSerRenumerados = (dispositivos: Dispositivo[]): boolean => {\n  return (\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO).length === dispositivos.length ||\n    dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === dispositivos.length\n  );\n};\n\nexport const getDispositivosAdicionados = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n};\n\nexport const hasDispositivosBySituacao = (dispositivos: Dispositivo[], descricaoSituacao: string): boolean => {\n  return dispositivos?.filter(d => d.situacao.descricaoSituacao === descricaoSituacao).length > 0;\n};\n\nexport const isOriginal = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const isAdicionado = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO;\n};\n\nexport const isModificado = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO;\n};\n\nexport const isSuprimido = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n};\n\nexport const isModificadoOuSuprimido = (dispositivo: Dispositivo): boolean => {\n  return isModificado(dispositivo) || isSuprimido(dispositivo);\n};\n\nexport const getSomenteFilhosDispositivoAsLista = (dispositivos: Dispositivo[], filhos: Dispositivo[]): Dispositivo[] => {\n  filhos?.forEach(f => {\n    dispositivos.push(f);\n    if (hasFilhos(f)) {\n      getSomenteFilhosDispositivoAsLista(dispositivos, f.filhos);\n    }\n  });\n\n  return dispositivos;\n};\n\nexport const getDispositivoAndFilhosAsLista = (dispositivo: Dispositivo): Dispositivo[] => {\n  return buildListaDispositivos(dispositivo, []);\n};\n\nexport const buildListaDispositivos = (dispositivo: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  dispositivos.push(dispositivo);\n  const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n  filhos.length ? filhos.forEach(d => buildListaDispositivos(d, dispositivos)) : undefined;\n  return dispositivos;\n};\n\nexport const percorreHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => void): void => {\n  if (!d) return;\n  visit(d);\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      percorreHierarquiaDispositivos(artigo.caput, visit);\n      if (d.alteracoes) {\n        percorreHierarquiaDispositivos(d.alteracoes, visit);\n      }\n      d.filhos\n        .filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))\n        .forEach(f => {\n          percorreHierarquiaDispositivos(f, visit);\n        });\n    }\n  } else {\n    if (d.alteracoes) {\n      percorreHierarquiaDispositivos(d.alteracoes, visit);\n    }\n    d.filhos.forEach(f => {\n      percorreHierarquiaDispositivos(f, visit);\n    });\n  }\n};\n\nexport const buscaNaHierarquiaDispositivos = (d: Dispositivo, visit: (d: Dispositivo) => any): any => {\n  if (!d) return undefined;\n  let ret = visit(d);\n  if (ret) return ret;\n  if (d.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = d as Artigo;\n    if (artigo.caput) {\n      ret = buscaNaHierarquiaDispositivos(artigo.caput, visit);\n      if (ret) return ret;\n      if (d.alteracoes) {\n        ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n        if (ret) return ret;\n      }\n      for (const f of d.filhos.filter(f => isParagrafo(f) || (isOmissis(f) && !isCaput(f.pai!)))) {\n        ret = buscaNaHierarquiaDispositivos(f, visit);\n        if (ret) return ret;\n      }\n    }\n  } else {\n    if (d.alteracoes) {\n      ret = buscaNaHierarquiaDispositivos(d.alteracoes, visit);\n      if (ret) return ret;\n    }\n    for (const f of d.filhos) {\n      ret = buscaNaHierarquiaDispositivos(f, visit);\n      if (ret) return ret;\n    }\n  }\n};\n\nexport const isDispositivoRaiz = (d: Dispositivo): boolean => {\n  return d && !d.pai && d.tipo === TipoDispositivo.articulacao.tipo;\n};\n\nexport const buscaDispositivoById = (articulacao: Articulacao, id: string): Dispositivo | undefined => {\n  if (id === 'ementa') {\n    return articulacao.projetoNorma?.ementa;\n  }\n\n  const idArtigo = extraiIdArtigo(id);\n  let raiz: Dispositivo = articulacao;\n  if (idArtigo) {\n    const artigo = articulacao.artigos.find(a => idArtigo === a.id);\n    if (artigo) {\n      if (id === idArtigo || id === idArtigo + '_cpt') {\n        return artigo;\n      } else {\n        raiz = artigo;\n      }\n    }\n  }\n  return buscaNaHierarquiaDispositivos(raiz, d => {\n    return id === d.id ? d : undefined;\n  });\n};\n\nexport const extraiIdArtigo = (id: string): string | undefined => {\n  const l = /^art\\d+(-\\d+)*/.exec(id);\n  return l?.length ? l[0] : undefined;\n};\n\nexport const isAscendente = (d: Dispositivo, dAscendente: Dispositivo): boolean => {\n  if (!d || !dAscendente) {\n    return false;\n  }\n  let pai = d.pai;\n  while (pai) {\n    if (pai === dAscendente) {\n      return true;\n    }\n    pai = pai.pai;\n  }\n  return false;\n};\n\nexport const isDescendenteDeSuprimido = (d: Dispositivo): boolean => {\n  if (!d) {\n    return false;\n  }\n  let pai = d.pai;\n  while (pai) {\n    if (pai.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return true;\n    }\n    pai = pai.pai;\n  }\n  return false;\n};\n\nexport const verificaNaoPrecisaInformarSituacaoNormaVigente = (d: Dispositivo): boolean => {\n  const parent = isIncisoCaput(d) ? d.pai!.pai : d.pai;\n\n  if (parent === undefined || !isDispositivoAlteracao(d) || d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return true;\n  }\n\n  if (parent.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return false;\n  }\n\n  const paiExisteNaNormaAlterada = (parent.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  if (paiExisteNaNormaAlterada !== undefined && !paiExisteNaNormaAlterada) {\n    return true;\n  }\n\n  return verificaNaoPrecisaInformarSituacaoNormaVigente(parent);\n};\n\n// export const validaOrdemDispositivo = (anterior: Dispositivo, atual: Dispositivo): boolean => {\n//   if (anterior.numero!.indexOf('-') === -1 && atual.numero!.indexOf('-') === -1) {\n//     return +anterior.numero! + 1 === +atual.numero!;\n//   }\n//   const partesA = anterior.numero!.split('-');\n//   const partesB = atual.numero!.split('-');\n\n//   const [numA, ...remainingA] = partesA!;\n//   const [numB, ...remainingB] = partesB!;\n\n//   if (+numA + 1 === +numB) {\n//     return true;\n//   }\n\n//   for (let i = 0; i < 3; i++) {\n//     const rA = i >= remainingA?.length ? 0 : remainingA[i];\n//     for (let j = 0; i < 3; i++) {\n//       const rB = j >= remainingB?.length ? 0 : remainingB[j];\n//       if (+rA === +rB) {\n//         continue;\n//       }\n//       if (+rA + 1 === +rB) {\n//         return true;\n//       }\n//       return false;\n//     }\n//   }\n//   return true;\n// };\n\nexport const validaOrdemDispositivo = (anterior: Dispositivo, atual: Dispositivo): boolean => {\n  if (anterior.numero!.indexOf('-') === -1 && atual.numero!.indexOf('-') === -1) {\n    return +anterior.numero! + 1 === +atual.numero!;\n  }\n\n  const partesA = anterior.numero!.split('-');\n  const partesB = atual.numero!.split('-');\n\n  if (partesB.length > partesA.length) {\n    // dispositivo atual possui mais um nvel de sufixo de encaixe\n    const numB = partesB.pop();\n    return partesA.join('-') === partesB.join('-') && numB === '1';\n  } else {\n    if (partesA.length > partesB.length) {\n      // dispositivo atual possui menos um nvel de sufixo de encaixe\n      partesA.pop();\n    }\n    const numA = partesA.pop()!;\n    const numB = partesB.pop()!;\n    return partesA.join('-') === partesB.join('-') && +numA + 1 === +numB;\n  }\n};\n\nexport const buscaProximoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  if (!dispositivo || !dispositivo.pai || isAgrupador(dispositivo.pai!)) {\n    return undefined;\n  }\n\n  const posterior = getDispositivoPosterior(dispositivo);\n\n  if (posterior && isOmissis(posterior)) {\n    return posterior;\n  }\n\n  if (isCaput(dispositivo)) {\n    const p = dispositivo.pai.filhos.filter(f => isParagrafo(f) || isOmissis(f));\n    if (p.length > 0 && isOmissis(p[0])) {\n      return p[0];\n    }\n    return undefined;\n  }\n\n  return dispositivo.pai ? buscaProximoOmissis(dispositivo.pai!) : undefined;\n};\n\nexport const isDispositivoNovoNaNormaAlterada = (dispositivo: Dispositivo): boolean | undefined => {\n  const value = (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  if (!isDispositivoAlteracao(dispositivo) || value === undefined) {\n    return;\n  }\n  const situacoes = [DescricaoSituacao.DISPOSITIVO_ADICIONADO + ''];\n  return situacoes.includes(dispositivo.situacao?.descricaoSituacao) && !value;\n};\n\nexport const podeRenumerarFilhosAutomaticamente = (dispositivo: Dispositivo): boolean => {\n  const d = dispositivo.tipo === 'Caput' ? dispositivo.pai! : dispositivo;\n  return !isDispositivoAlteracao(d) || (isDispositivoNovoNaNormaAlterada(d) ?? false);\n};\n\nexport const podeEditarNotaAlteracao = (dispositivo: Dispositivo): boolean => {\n  const isUltAlteracao = dispositivo.tipo !== 'Articulacao' && isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo);\n  if (!isUltAlteracao) {\n    return false;\n  } else {\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n    return cabecaAlteracao.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  }\n};\n\nexport const isDispositivosSequenciais = (dispositivo1: Dispositivo, dispositivo2: Dispositivo): boolean => {\n  const pos1 = dispositivo1.pai!.indexOf(dispositivo1);\n  const pos2 = dispositivo2.pai!.indexOf(dispositivo2);\n  return pos1 + 1 === pos2;\n};\n\nexport const isDispositivosSequenciaisMesmoPai = (dispositivo1: Dispositivo, dispositivo2: Dispositivo): boolean => {\n  return dispositivo1.pai === dispositivo2.pai && isDispositivosSequenciais(dispositivo1, dispositivo2);\n};\n\n// Retorna o primeiro agrupador de artigo (no articulao) que segue um agrupador de artigo na sequncia de leitura\nexport const getProximoAgrupadorAposAgrupador = (d: Dispositivo, ignorarFilhos = false): Dispositivo | undefined => {\n  if (!isAgrupador(d)) {\n    return undefined;\n  }\n  if (!ignorarFilhos) {\n    const filhoAgrupador = d.filhos.find(f => isAgrupadorNaoArticulacao(f));\n    if (filhoAgrupador) {\n      return filhoAgrupador;\n    }\n  }\n  if (d.pai) {\n    const proximoIrmao = getDispositivoPosteriorMesmoTipo(d);\n    if (proximoIrmao) {\n      return proximoIrmao;\n    }\n    return getProximoAgrupadorAposAgrupador(d.pai!, true);\n  }\n  return undefined;\n};\n\n// Retorna o primeiro agrupador de artigo (no articulao) que segue um artigo na sequncia contrria de leitura\nexport const getProximoAgrupadorAposArtigo = (art: Artigo): Dispositivo | undefined => {\n  return getProximoAgrupadorAposAgrupador(art.pai!);\n};\n\nexport const getAnteriorAgrupadorAntesAgrupador = (d: Dispositivo, ignorarFilhos = false): Dispositivo | undefined => {\n  if (!isAgrupador(d)) {\n    return undefined;\n  }\n  if (!ignorarFilhos) {\n    const filhoAgrupador = d.filhos.reverse().find(f => isAgrupadorNaoArticulacao(f));\n    if (filhoAgrupador) {\n      return filhoAgrupador;\n    }\n  }\n  if (d.pai) {\n    const anteriorIrmao = getDispositivoAnteriorMesmoTipo(d);\n    if (anteriorIrmao) {\n      return anteriorIrmao;\n    }\n    return getAnteriorAgrupadorAntesAgrupador(d.pai!, true);\n  }\n  return undefined;\n};\n\n// Retorna o primeiro agrupador de artigo (no articulao) que segue um artigo na sequncia contrria de leitura\nexport const getAnteriorAgrupadorAntesArtigo = (art: Artigo): Dispositivo | undefined => {\n  return getAnteriorAgrupadorAntesAgrupador(art.pai!);\n};\n\nexport const getTiposAgrupadorArtigoOrdenados = (): string[] => ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao'];\n\nexport const getTiposAgrupadorArtigoPermitidosNaArticulacao = (): string[] => ['Parte', 'Livro', 'Titulo', 'Capitulo'];\n\nexport const getTiposAgrupadoresQuePodemSerInseridosDepois = (dispositivo: Dispositivo): string[] => {\n  if (!isAgrupador(dispositivo) && !isArtigo(dispositivo) && !isEmenta(dispositivo)) {\n    return [];\n  }\n\n  if (isDispositivoAlteracao(dispositivo)) {\n    return getTiposAgrupadorArtigoOrdenados();\n  }\n\n  const primeiroAgrupador = getPrimeiroAgrupadorNaArticulacao(dispositivo);\n\n  if (!primeiroAgrupador) {\n    return getTiposAgrupadorArtigoPermitidosNaArticulacao();\n  }\n\n  const agrupadorDepois = getPrimeiroAgrupadorDepois(dispositivo);\n\n  if (!isAgrupador(dispositivo) && agrupadorDepois === primeiroAgrupador) {\n    return [primeiroAgrupador.tipo, getTipoAgrupadorNivelAcima(primeiroAgrupador.tipo)!].filter(Boolean);\n  }\n\n  const agrupadorRef = isAgrupador(dispositivo) ? dispositivo : dispositivo.pai!;\n\n  if (!agrupadorDepois) {\n    return getRangeTiposAgrupador(primeiroAgrupador.tipo, getTipoAgrupadorNivelAbaixo(agrupadorRef.tipo) ?? agrupadorRef.tipo);\n  }\n\n  const tipos = getRangeTiposAgrupador(getTipoAgrupadorNivelAcima(agrupadorDepois.tipo), getTipoAgrupadorNivelAbaixo(agrupadorRef.tipo) ?? agrupadorRef.tipo);\n  const indexPrimeiroAgrupador = getIndexTipoAgrupador(primeiroAgrupador.tipo);\n  return tipos.filter(t => t && getIndexTipoAgrupador(t) >= indexPrimeiroAgrupador);\n};\n\nexport const getTiposAgrupadoresQuePodemSerInseridosAntes = (dispositivo: Dispositivo): string[] => {\n  const result: (string | undefined)[] = [];\n\n  if (isEmenta(dispositivo)) {\n    return [];\n  }\n\n  if (!isAgrupador(dispositivo)) {\n    return getTiposAgrupadoresQuePodemSerInseridosDepois(dispositivo);\n  }\n\n  if (isDispositivoAlteracao(dispositivo)) {\n    return getTiposAgrupadorArtigoOrdenados();\n  }\n\n  result.push(dispositivo.tipo);\n\n  const primeiroAgrupador = getPrimeiroAgrupadorNaArticulacao(dispositivo)!;\n  const tipoAgrupadorNivelAcima = getTipoAgrupadorNivelAcima(dispositivo.tipo);\n  if (!primeiroAgrupador || dispositivo === primeiroAgrupador || getIndexTipoAgrupador(tipoAgrupadorNivelAcima ?? '') >= getIndexTipoAgrupador(primeiroAgrupador.tipo)) {\n    result.push(tipoAgrupadorNivelAcima);\n  }\n\n  const getAgrupadorAntes = (d: Dispositivo): Dispositivo | undefined => {\n    const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d)).filter(isAgrupador);\n    return dispositivos[dispositivos.indexOf(d) - 1];\n  };\n\n  const agrupadorAntes = getAgrupadorAntes(dispositivo);\n  if (agrupadorAntes) {\n    result.push(...getTiposAgrupadoresQuePodemSerInseridosDepois(agrupadorAntes));\n  }\n\n  return [...new Set(result)] as string[];\n};\n\nconst getRangeTiposAgrupador = (tipoInicial = '', tipoFinal = ''): string[] => {\n  return getTiposAgrupadorArtigoOrdenados().slice(getIndexTipoAgrupador(tipoInicial), getIndexTipoAgrupador(tipoFinal) + 1);\n};\n\nconst getIndexTipoAgrupador = (tipo: string): number => {\n  return getTiposAgrupadorArtigoOrdenados().indexOf(tipo);\n};\n\nconst getTipoAgrupadorNivelAcima = (tipoAgrupador: string): string | undefined => {\n  const tiposAgrupadorArtigoOrdenados = getTiposAgrupadorArtigoOrdenados();\n  return tiposAgrupadorArtigoOrdenados[tiposAgrupadorArtigoOrdenados.indexOf(tipoAgrupador) - 1];\n};\n\nconst getTipoAgrupadorNivelAbaixo = (tipoAgrupador: string): string | undefined => {\n  const tiposAgrupadorArtigoOrdenados = getTiposAgrupadorArtigoOrdenados();\n  const index = tiposAgrupadorArtigoOrdenados.indexOf(tipoAgrupador);\n  return index === -1 ? undefined : tiposAgrupadorArtigoOrdenados[index + 1];\n};\n\nexport const getPrimeiroAgrupadorDepois = (d: Dispositivo): Dispositivo | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d));\n  const indexRef = dispositivos.indexOf(d);\n  return dispositivos.filter((d, index) => index > indexRef && isAgrupador(d) && !isArticulacao(d))[0];\n};\n\nexport const getAgrupadorAntes = (d: Dispositivo): Dispositivo | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(d));\n  const indexRef = dispositivos.indexOf(d);\n  return dispositivos.filter((d, index) => index < indexRef && isAgrupador(d) && !isArticulacao(d)).reverse()[0];\n};\n\nexport const getPrimeiroAgrupadorNaArticulacao = (d: Dispositivo): Dispositivo | undefined => {\n  return getArticulacao(d).filhos.filter(isAgrupador)[0];\n};\n\nexport const getParagrafosEOmissis = (art: Artigo): Dispositivo[] => {\n  // Os incisos e omissis de incisos de caput so filhos do caput\n  return art.filhos.filter(d => d.pai === art);\n};\n\nexport const hasEmenta = (referencia: Dispositivo): boolean => {\n  return !!getArticulacao(referencia).projetoNorma?.ementa?.texto;\n};\n\nexport const isEmendaArtigoOndeCouber = (referencia: Dispositivo): boolean => {\n  return getDispositivoAndFilhosAsLista(getArticulacao(referencia)).some(\n    d => (d.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER\n  );\n};\n\nexport const findDispositivoByUuid2 = (dispositivo: Dispositivo, uuid2: string): Dispositivo | null => {\n  if (!uuid2) {\n    throw new Error('uuid no foi informado');\n  }\n  return getDispositivoByUuid2(dispositivo, uuid2);\n};\n\nexport function getDispositivoByUuid2(dispositivo: Dispositivo, uuid2: string): Dispositivo | Articulacao | null {\n  if (dispositivo.uuid2 === uuid2) {\n    return dispositivo;\n  } else if (dispositivo.filhos !== null) {\n    let result: any = null;\n\n    const filhos = dispositivo.hasAlteracao() ? dispositivo.alteracoes!.filhos : dispositivo.filhos;\n\n    for (let i = 0; result === null && i < filhos.length; i++) {\n      result = getDispositivoByUuid2(filhos[i], uuid2);\n    }\n    return result;\n  }\n  return null;\n}\n","import { StringBuilder } from './string-util';\n/**\n * Utilitrio para montar uma tag usando o pattern composite. Essa classe foi retirada do livro\n * Refactoring to Patterns\n */\nexport class TagNode {\n  private valores = new Array<any>();\n\n  private atributos = new StringBuilder();\n\n  public constructor(private nome: string) {}\n\n  toString(): string {\n    if (!this.valores.length) {\n      return '<' + this.nome + this.atributos + '/>';\n    }\n    const resultado = new StringBuilder('<' + this.nome + this.atributos + '>');\n    this.valores.forEach(valor => {\n      resultado.append(valor);\n    });\n    resultado.append('</' + this.nome + '>');\n    return resultado.toString();\n  }\n\n  add(valor?: any): TagNode {\n    if (valor) {\n      this.valores.push(valor);\n    }\n    return this;\n  }\n\n  addAtributo(atributo: string, valor?: string): TagNode {\n    this.atributos.append(' ');\n    this.atributos.append(atributo);\n    if (valor) {\n      this.atributos.append('=\"');\n      this.atributos.append(valor);\n      this.atributos.append('\"');\n    }\n    return this;\n  }\n}\n","import { Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo, isOmissis } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\n\nexport class DispositivoComparator {\n  static compare(d1: Dispositivo, d2: Dispositivo): number {\n    if (!d1 || !d2) {\n      throw new Error('Tentativa de comparao de dispositivo nulo.');\n    }\n\n    if (!d1.pai) {\n      return -1;\n    }\n\n    if (!d2.pai) {\n      return 1;\n    }\n\n    const i1 = DispositivoComparator.getIndices(d1);\n    const i2 = DispositivoComparator.getIndices(d2);\n    return DispositivoComparator.comparaIndices(i1, i2);\n  }\n\n  private static getIndices(d: Dispositivo): number[] {\n    const indices: number[] = [];\n\n    // Considera alterao como filha do caput\n    let pai = this.getPaiParaComparacao(d);\n    while (pai) {\n      indices.push(this.getIndexDoFilho(pai, d));\n      d = pai;\n      pai = this.getPaiParaComparacao(d);\n    }\n    indices.reverse();\n\n    return indices;\n  }\n\n  // Considera alterao em artigo como filha do caput\n  private static getPaiParaComparacao(d: Dispositivo): Dispositivo | undefined {\n    if (!d.pai) {\n      return undefined;\n    }\n    if (isArtigo(d.pai!) && isArticulacaoAlteracao(d)) {\n      return (d.pai! as Artigo).caput!;\n    }\n    return d.pai!;\n  }\n\n  private static getIndexDoFilho(pai: Dispositivo, d: Dispositivo): number {\n    if (isCaput(d)) {\n      return 0;\n    }\n    if (isParagrafo(d) || (isOmissis(d) && isArtigo(pai))) {\n      // Aps o caput\n      return pai.filhos.indexOf(d) + 1;\n    }\n    if (isArticulacaoAlteracao(d)) {\n      // Antes dos filhos\n      return -1;\n    }\n    return pai.filhos.indexOf(d);\n  }\n\n  private static comparaIndices(indices1: number[], indices2: number[]): number {\n    let ret = 0;\n    const size1 = indices1.length;\n    const size2 = indices2.length;\n    for (let i = 0; i < size1 && i < size2 && ret === 0; i++) {\n      ret = indices1[i] - indices2[i];\n    }\n    if (ret === 0) {\n      ret = size1 - size2;\n    }\n    return ret;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isDispositivoAlteracao } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\n\nexport class DispositivoEmendaUtil {\n  static getAlteracao(dispositivo: Dispositivo): Dispositivo | undefined {\n    let d: Dispositivo | undefined = dispositivo;\n\n    if (d.tipo === TipoDispositivo.alteracao.tipo) {\n      return d;\n    }\n\n    if (!isDispositivoAlteracao(d)) {\n      return undefined;\n    }\n\n    while (d && d.tipo !== TipoDispositivo.alteracao.tipo) {\n      d = d.pai;\n    }\n    return d;\n  }\n\n  static existeNaNormaAlterada(dispositivo: Dispositivo): boolean {\n    return (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  }\n}\n","import { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { TEXTO_OMISSIS } from '../model/lexml/conteudo/textoOmissis';\nimport {\n  getDispositivoAnteriorDireto,\n  getDispositivoPosterior,\n  getFilhosEstiloLexML,\n  isUltimaAlteracao,\n  percorreHierarquiaDispositivos,\n} from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { StringBuilder, removeEspacosDuplicados } from '../util/string-util';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isAgrupador, isAgrupadorNaoArticulacao, isArtigo, isCaput, isOmissis, isParagrafo } from './../model/dispositivo/tipo';\nimport {\n  buscaNaHierarquiaDispositivos,\n  getIrmaoPosteriorIndependenteDeTipo,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n  isDispositivoRaiz,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TagNode } from './../util/tag-node';\nimport { DispositivoComparator } from './dispositivo-comparator';\nimport { DispositivoEmendaUtil } from './dispositivo-emenda-util';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class CmdEmdUtil {\n  static getDispositivosNaoOriginais(articulacao: Articulacao): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n\n    if (articulacao?.projetoNorma?.ementa?.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n      ret.push(articulacao.projetoNorma.ementa);\n    }\n\n    percorreHierarquiaDispositivos(articulacao, d => {\n      if (d.pai && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        ret.push(d);\n      }\n    });\n    return ret;\n  }\n\n  static getDispositivosAdicionados(articulacao: Articulacao): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n    percorreHierarquiaDispositivos(articulacao, d => {\n      if (d.pai && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        ret.push(d);\n      }\n    });\n    return ret;\n  }\n\n  static getDispositivosComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const dispositivos = new Array<Dispositivo>();\n\n    for (const d of dispositivosEmenda) {\n      if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL || isDispositivoAlteracao(d) || isArticulacaoAlteracao(d)) {\n        continue;\n      }\n      const dispositivoAfetado = CmdEmdUtil.getDispositivoAfetado(d);\n      if (dispositivoAfetado && !dispositivos.includes(dispositivoAfetado)) {\n        dispositivos.push(dispositivoAfetado);\n      }\n    }\n\n    return dispositivos;\n  }\n\n  private static getDispositivoAfetado(d: Dispositivo): Dispositivo {\n    const pai = d.pai!;\n\n    if (isDispositivoRaiz(pai)) {\n      return d;\n    }\n\n    // Verifica alterao integral de caput\n    if (isCaput(pai) && pai.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      if (pai.filhos.find(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL)) {\n        // No  alterao integral de caput\n        return d;\n      }\n      //  alterao integral de caput\n      return CmdEmdUtil.getDispositivoAfetado(pai.pai!);\n    }\n\n    // O caso de artigos adicionados junto com seu agrupador j foi tratado antes. Ver uso de retiraPrimeirosFilhosAdicionadosAgrupador\n    if (isArtigo(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return d;\n    }\n\n    // Se o pai for uma alterao integral\n    if (CmdEmdUtil.isAlteracaoIntegral(pai)) {\n      // Chama recursivamente para o pai\n      return CmdEmdUtil.getDispositivoAfetado(pai);\n    }\n\n    return d;\n  }\n\n  // Retira da lista de dispositivos os primeiros artigos e agrupadores adicionados, filhos de um agrupador adicionado.\n  // Considera que os dispositivos estejam ordenados\n  static retiraPrimeirosFilhosAdicionadosAgrupador(dispositivos: Dispositivo[]): Dispositivo[] {\n    const primeiro = dispositivos[0];\n    if (isDispositivoAlteracao(primeiro) || primeiro.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return dispositivos;\n    }\n    if (!dispositivos.find(d => isAgrupadorNaoArticulacao(d))) {\n      return dispositivos;\n    }\n    const ret: Dispositivo[] = [];\n    let filhosAdicionadosComAgrupador: Dispositivo[] = [];\n    dispositivos.forEach(d => {\n      if (filhosAdicionadosComAgrupador.indexOf(d) < 0) {\n        ret.push(d);\n        if (isAgrupadorNaoArticulacao(d)) {\n          filhosAdicionadosComAgrupador = this.listaFilhosAdicionadosComAgrupador(d);\n        }\n      }\n    });\n    return ret;\n  }\n\n  private static listaFilhosAdicionadosComAgrupador(d: Dispositivo): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n    buscaNaHierarquiaDispositivos(d, f => {\n      if (f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || isCaput(f) || isArticulacaoAlteracao(f)) {\n        ret.push(f);\n        return false;\n      }\n      return true;\n    });\n    return ret;\n  }\n\n  static getDispositivoAfetadoEmAlteracao(d: Dispositivo): Dispositivo | undefined {\n    if (isOmissis(d)) {\n      if (CmdEmdUtil.isOmissisAdjacenteADispositivoDeEmenda(d)) {\n        return undefined;\n      }\n    } else if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && CmdEmdUtil.isTextoOmitido(d)) {\n      return undefined;\n    }\n\n    const pai = isCaput(d.pai!) ? d.pai!.pai! : d.pai!;\n    // Se o pai for uma alterao integral\n    if (CmdEmdUtil.isAlteracaoIntegralEmAlteracao(pai)) {\n      // Chama recursivamente para o pai\n      return CmdEmdUtil.getDispositivoAfetadoEmAlteracao(pai);\n    }\n\n    return d;\n  }\n\n  // Considero texto omitido do Artigo se o seu caput tiver o texto omitido.\n  static isTextoOmitido(d: Dispositivo): boolean {\n    return isOmissis(d) || d.texto.startsWith(TEXTO_OMISSIS) || (isAgrupador(d) && !!(d as Artigo).caput?.texto.startsWith(TEXTO_OMISSIS));\n  }\n\n  static getDescricaoSituacaoParaComandoEmenda(d: Dispositivo): string {\n    // Trata dispositivo j existente na norma adicionado em bloco de alterao como dispositivo modificado\n    return d.isDispositivoAlteracao && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && DispositivoEmendaUtil.existeNaNormaAlterada(d) && !isOmissis(d)\n      ? DescricaoSituacao.DISPOSITIVO_MODIFICADO\n      : d.situacao.descricaoSituacao;\n  }\n\n  static isMesmaSituacaoParaComandoEmenda(d1: Dispositivo, d2: Dispositivo): boolean {\n    return this.getDescricaoSituacaoParaComandoEmenda(d1) === this.getDescricaoSituacaoParaComandoEmenda(d2);\n  }\n\n  static isAlteracaoIntegral(d: Dispositivo): boolean {\n    const descricaoSituacao = this.getDescricaoSituacaoParaComandoEmenda(d);\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return false;\n    }\n\n    if (isDispositivoAlteracao(d) && isAgrupadorNaoArticulacao(d) && descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return false;\n    }\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return true;\n    }\n\n    if (descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      return !isAgrupadorNaoArticulacao(d);\n    }\n\n    if (!d.filhos.length) {\n      if (isArtigo(d)) {\n        return descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n      }\n      return true;\n    }\n\n    for (const filho of d.filhos) {\n      if (!CmdEmdUtil.isAlteracaoIntegral(filho)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  static isAlteracaoIntegralEmAlteracao(d: Dispositivo): boolean {\n    if (isArticulacaoAlteracao(d)) {\n      return false;\n    }\n\n    if (isAgrupadorNaoArticulacao(d)) {\n      return this.getDescricaoSituacaoParaComandoEmenda(d) === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n    }\n\n    return (\n      (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !CmdEmdUtil.isTextoOmitido(d)) ||\n      d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n    );\n  }\n\n  static getArvoreDispositivos(dispositivos: Dispositivo[]): Map<Dispositivo, any> {\n    const mapa = new Map<Dispositivo, any>();\n\n    if (!dispositivos.length) {\n      return mapa;\n    }\n\n    dispositivos.forEach(dispositivo => {\n      this.atualizaMapa(dispositivo, mapa);\n    });\n\n    return mapa;\n  }\n\n  private static atualizaMapa(dispositivo: Dispositivo, mapa: Map<Dispositivo, any>): void {\n    const hierarquia = this.getHierarquiaDispositivosDeUmDispositivo(dispositivo);\n    let mapaAtual = mapa;\n\n    hierarquia.forEach(dispositivoAtual => {\n      const mapaFilho = mapaAtual.get(dispositivoAtual) as Map<Dispositivo, any>;\n      if (mapaFilho) {\n        mapaAtual = mapaFilho;\n      } else {\n        const novoMapa = new Map<Dispositivo, any>();\n        mapaAtual.set(dispositivoAtual, novoMapa);\n        mapaAtual = novoMapa;\n      }\n    });\n  }\n\n  private static getHierarquiaDispositivosDeUmDispositivo(dispositivo: Dispositivo): Dispositivo[] {\n    const hierarquia = new Array<Dispositivo>();\n    hierarquia.push(dispositivo);\n\n    let pai = dispositivo.pai;\n    while (pai && !isDispositivoRaiz(pai) && !isAgrupadorNaoArticulacao(pai)) {\n      hierarquia.push(pai);\n      pai = pai.pai;\n    }\n    hierarquia.reverse();\n\n    return hierarquia;\n  }\n\n  static getArvoreDispositivosDeAlteracaoDeNorma(dispositivos: Dispositivo[]): Map<Dispositivo, any> {\n    const mapa = new Map<Dispositivo, any>();\n\n    if (!dispositivos.length) {\n      return mapa;\n    }\n\n    for (const dispositivo of dispositivos) {\n      this.atualizaMapaDeAlteracaoDeNorma(dispositivo, mapa);\n    }\n\n    return mapa;\n  }\n\n  static atualizaMapaDeAlteracaoDeNorma(dispositivo: Dispositivo, mapa: Map<Dispositivo, any>): void {\n    const hierarquia = this.getHierarquiaDispositivosDeUmDispositivo(dispositivo);\n    let mapaAtual = mapa;\n\n    for (const dispositivoAtual of hierarquia) {\n      if (!isDispositivoAlteracao(dispositivoAtual) || isArticulacaoAlteracao(dispositivoAtual)) {\n        continue;\n      }\n\n      if (mapaAtual.has(dispositivoAtual)) {\n        mapaAtual = mapaAtual.get(dispositivoAtual);\n      } else {\n        const novoMapa = new Map<Dispositivo, any>();\n        mapaAtual.set(dispositivoAtual, novoMapa);\n        mapaAtual = novoMapa;\n      }\n    }\n  }\n\n  // public static List<Dispositivo> filtraDispositivosModificados(final List<Dispositivo> dispositivos) {\n\n  //     List<Dispositivo> ret = new ArrayList<Dispositivo>();\n\n  //     // No caso de dispositivo modificado pode ocorrer o caso de alterao integral de artigo,\n  //     // onde o prprio artigo no est marcado como modificado.\n  //     for (Dispositivo d : dispositivos) {\n  //         if (d.isSituacao(DispositivoModificado.class) || d.isSituacao(DispositivoOriginal.class)\n  //             && CmdEmdUtil.isAlteracaoIntegral(d)) {\n  //             ret.add(d);\n  //         }\n  //     }\n\n  //     return ret;\n  // }\n\n  static isSequenciasPlural(sequencias: SequenciaRangeDispositivos[]): boolean {\n    const qtdSequencias = sequencias.length;\n    if (qtdSequencias === 0) {\n      return false;\n    }\n    return qtdSequencias > 1 || CmdEmdUtil.isSequenciaPlural(sequencias[0]);\n  }\n\n  static isSequenciaPlural(sequencia: SequenciaRangeDispositivos): boolean {\n    const qtdRanges = sequencia.getQuantidadeRanges();\n    if (qtdRanges === 0) {\n      return false;\n    }\n    return qtdRanges > 1 || sequencia.getPrimeiroRange().getQuantidadeDispositivos() > 1;\n  }\n\n  static getProximoAgrupador(disp: Dispositivo): Dispositivo | undefined {\n    let ret: Dispositivo | undefined = disp;\n    do {\n      ret = getDispositivoPosterior(ret as Dispositivo);\n    } while (ret && !isAgrupador(ret));\n    return ret;\n  }\n\n  static getDispositivoIrmaoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    if (isArtigo(dispositivo) || isAgrupador(dispositivo)) {\n      return this.getArtigoPosterior(dispositivo);\n    }\n    if (!this.isUltimoDispositivoDoMesmoTipo(dispositivo)) {\n      const pai = dispositivo.pai as Dispositivo;\n      const index = pai.filhos.indexOf(dispositivo) + 1;\n      return pai.filhos[index];\n    }\n    return undefined;\n  }\n\n  private static getArtigoPosterior(dispositivo: Dispositivo): Dispositivo | undefined {\n    const pai = dispositivo.pai as Dispositivo;\n    if (pai.filhos.length) {\n      const iFilho = pai.filhos.indexOf(dispositivo);\n      for (let i = iFilho + 1; i < pai.filhos.length; i++) {\n        const d = pai.filhos[i];\n        if (isArtigo(d)) {\n          return d;\n        } else if (isAgrupador(d)) {\n          const atual = this.buscaProximoArtigo(d);\n          if (atual) {\n            return atual;\n          }\n        }\n      }\n      if (pai.pai) {\n        return this.getArtigoPosterior(pai);\n      }\n    }\n\n    return undefined;\n  }\n\n  private static buscaProximoArtigo(dispositivo: Dispositivo): Dispositivo | undefined {\n    const filhos = dispositivo.filhos;\n    for (const d of filhos) {\n      if (isArtigo(d)) {\n        return d;\n      }\n      if (isAgrupador(d)) {\n        return this.buscaProximoArtigo(d);\n      }\n    }\n    return undefined;\n  }\n\n  public static isUltimoDispositivoDoMesmoTipo(dispositivo: Dispositivo): boolean {\n    if (!dispositivo.pai) {\n      return true;\n    }\n    const pai = dispositivo.pai as Dispositivo;\n    const index = pai.filhos.indexOf(dispositivo);\n    if (pai.filhos.length === index + 1) {\n      return true;\n    }\n    if (pai.filhos[index + 1].tipo === dispositivo.tipo) {\n      return false;\n    }\n    return true;\n  }\n\n  // TODO Alterar referncias a este mtodo para funo na hierarquiaUtil e excluir o mtodo\n  static getFilhosEstiloLexML(d: Dispositivo): Dispositivo[] {\n    return getFilhosEstiloLexML(d);\n  }\n\n  // TODO Alterar referncias a este mtodo para funo na hierarquiaUtil e excluir o mtodo\n  static getDispositivoAnteriorDireto(d: Dispositivo): Dispositivo {\n    return getDispositivoAnteriorDireto(d);\n  }\n\n  static getDispositivoPosteriorDireto(d: Dispositivo): Dispositivo | undefined {\n    // primeiro o primeiro filho ou o primeiro irmo do pai (recursivamente)\n    const filhos = this.getFilhosEstiloLexML(d);\n    if (filhos.length) {\n      return filhos[0];\n    } else {\n      return this.getProximoIrmaoRecursivo(d);\n    }\n  }\n\n  private static getProximoIrmaoRecursivo(d: Dispositivo | undefined): Dispositivo | undefined {\n    if (!d) return;\n\n    const irmao = getDispositivoPosterior(d);\n\n    if (irmao) {\n      return irmao;\n    } else {\n      const pai = d.pai;\n      return pai ? undefined : this.getProximoIrmaoRecursivo(pai);\n    }\n  }\n\n  // /**\n  //  * Retorna rtulo do dispositivo gerado pelo numerador. No confia no rtulo informado pelo\n  //  * dispositivo original.\n  //  */\n  // public static String getRotulo(final Dispositivo d) {\n  //     return d.getNumeradorDispositivo().getRotulo(d);\n  // }\n\n  static getRotuloPais(disp: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    let pai: Dispositivo;\n    while (disp && !isArtigo(disp)) {\n      pai = disp.pai!;\n      sb.append(pai.pronomePossessivoSingular);\n      sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(disp));\n      disp = pai;\n    }\n\n    return sb.toString();\n  }\n\n  static getDispositivosNaAlteracaoParaComando(alteracao: Dispositivo): Dispositivo[] {\n    const dispositivosAlterados = new Array<Dispositivo>();\n    percorreHierarquiaDispositivos(alteracao, d => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        dispositivosAlterados.push(d);\n      }\n    });\n\n    const dispositivos = new Array<Dispositivo>();\n    dispositivosAlterados.forEach(d => {\n      const dispositivoAfetado = CmdEmdUtil.getDispositivoAfetadoEmAlteracao(d);\n      if (dispositivoAfetado && !dispositivos.includes(dispositivoAfetado)) {\n        dispositivos.push(dispositivoAfetado);\n      }\n    });\n\n    dispositivos.sort(DispositivoComparator.compare);\n\n    return dispositivos;\n  }\n\n  static isOmissisAdjacenteADispositivoDeEmenda(d: Dispositivo): boolean {\n    if (!isOmissis(d)) {\n      return false;\n    }\n    let anterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n    if (isCaput(anterior)) {\n      anterior = anterior.pai!;\n    }\n    if (anterior && anterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return true;\n    }\n    const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n    if (posterior && posterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n      return true;\n    }\n    return false;\n  }\n\n  static isMesmoTipoParaComandoEmenda(d1: Dispositivo, d2: Dispositivo): boolean {\n    if (d1.tipo !== d2.tipo) {\n      return false;\n    }\n    if (isArtigo(d1) && CmdEmdUtil.isAlteracaoIntegral(d1) !== CmdEmdUtil.isAlteracaoIntegral(d2)) {\n      return false;\n    }\n    return true;\n  }\n\n  static getTextoDoDispositivoOuOmissis(d: Dispositivo, alteracaoNormaVigente = false): string {\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO || isCaput(d)) {\n      return ' ' + CmdEmdUtil.trataTextoParaCitacao(d, alteracaoNormaVigente);\n    } else if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return isOmissis(d) ? ' (Suprimir linha pontilhada)' : ' (Suprimir)';\n    } else {\n      return ' ' + new TagNode('Omissis');\n    }\n  }\n\n  static trataTextoParaCitacao(d: Dispositivo, alteracaoNormaVigente = false): string {\n    let texto = isArtigo(d) ? (d as Artigo).caput!.texto : d.texto ?? '';\n    if (texto.includes(TEXTO_OMISSIS)) {\n      texto = texto.replace(TEXTO_OMISSIS, new TagNode('Omissis').toString());\n    }\n    if (alteracaoNormaVigente) {\n      texto = texto.replace(/( *(?:\\(NR\\)) *)?/, '');\n    } else {\n      texto = texto.replace(/( *(?:\\(NR\\)) *)?/, '$1 ');\n    }\n    return texto\n      .trim()\n      .replace(/\\s{2,}/g, ' ')\n      .replace(/^<p>\\s?/i, '')\n      .replace(/\\s?<\\/p>$/i, '')\n      .replace(/<\\/?a.*?>/gi, '')\n      .replace(/\\s([\\\\.,:?!])/g, '$1');\n  }\n\n  static isFechaAspas(d: Dispositivo): boolean {\n    return isUltimaAlteracao(d);\n  }\n\n  // Considera que dispositivosAdicionadosProposicao  uma lista de dispositivos adicionados  proposio\n  // e que no contm dispositivos adicionados em bloco de alterao.\n  // Podem ser utilizados apenas os dispositivos raiz em um grupo de dispositivos adicionados.\n  static verificaNecessidadeRenumeracaoRedacaoFinal(dispositivosAdicionadosProposicao: Dispositivo[]): boolean {\n    for (const d of dispositivosAdicionadosProposicao) {\n      if (CmdEmdUtil.implicaEmRenumeracaoRedacaoFinal(d)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Testa caractersticas do dispositivo (considerado fora de bloco de alterao) que implicam\n  // em necessidade de renumerao na redao final.\n  static implicaEmRenumeracaoRedacaoFinal(d: Dispositivo): boolean {\n    // rtulo 0 (zero) ou possui sufixo de encaixe (-A, -B...)\n    if (d.rotulo && (d.numero === '0' || /.*(?:-\\d).*/i.test(d.rotulo))) {\n      return true;\n    }\n    // adjacente a pargrafo ou artigo nico\n    if (isArtigo(d) || isParagrafo(d)) {\n      // Se o dispositivo tiver sido adicionado antes do nico cair no caso anterior de rtulo com 0 (zero)\n      // No  possvel testar pelo rtulo porque o pargrafo nico est sendo renumerado.\n      if (irmaosMesmoTipo(d).filter(i => i.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL).length === 1) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  static normalizaCabecalhoComandoEmenda(texto: string): string {\n    return removeEspacosDuplicados(texto.replace(/caput/g, '<i>caput</i>'));\n  }\n\n  /*\n  Dados dois agrupadores adicionados, verifica se so sequenciais e no existe artigo ou agrupador no adicionado entre eles.\n  */\n  static verificaAgrupadoresAdicionadosEmSequencia(a1: Dispositivo, a2: Dispositivo): boolean {\n    if (!isAgrupadorNaoArticulacao(a1) && !isAgrupadorNaoArticulacao(a2)) {\n      return false;\n    }\n    const filhoNaoAdicionado = this.getFilhoNaoAdicionadoDeAgrupadorAdicionado(a1);\n    return !filhoNaoAdicionado && getIrmaoPosteriorIndependenteDeTipo(a1) === a2;\n  }\n\n  /*\n  Dado um agrupador adicionado retorna o primeiro artigo ou agrupador em sua hierarquia que no seja adicionado.\n  Retorna undefined se todos forem adicionados.\n  */\n  static getFilhoNaoAdicionadoDeAgrupadorAdicionado(agrupador: Dispositivo): Dispositivo | undefined {\n    return buscaNaHierarquiaDispositivos(agrupador, f => {\n      return (isArtigo(f) || isAgrupadorNaoArticulacao(f)) && f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO ? f : undefined;\n    });\n  }\n}\n","// Tipo string para salvar o nome em vez do ndice\nexport enum TipoMensagem {\n  INFO = 'INFO',\n  WARNING = 'WARNING',\n  ERROR = 'ERROR',\n}\n\nexport enum AutoFix {\n  INFORMAR_NORMA = ' necessrio informar a norma a ser alterada',\n  OMISSIS_ANTES = ` necessrio uma linha pontilhada antes deste dispositivo`,\n  OMISSIS_SEQUENCIAIS = `No pode haver mais de uma linha pontilhada sequencialmente`,\n  RENUMERAR_DISPOSITIVO = 'Numere o dispositivo',\n}\n\nexport interface Mensagem {\n  tipo: TipoMensagem;\n  descricao?: string;\n  detalhe?: any;\n  fix?: any;\n  nomeEvento?: string;\n}\n\nexport interface MensagemErro extends Mensagem {\n  tipo: TipoMensagem.ERROR;\n}\n","import { addSpaceRegex, endsWithWord, escapeRegex } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nexport const hasIndicativoDesdobramento = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_DESDOBRAMENTO ?? []);\n};\n\nexport const hasIndicativoFinalSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_FIM_SEQUENCIA ?? []);\n};\n\nexport const hasIndicativoContinuacaoSequencia = (dispositivo: Dispositivo): boolean => {\n  const d = isArtigo(dispositivo) ? (dispositivo as Artigo).caput! : dispositivo;\n\n  return endsWithWord(d.texto, d.INDICADOR_SEQUENCIA ?? []);\n};\n\nexport const TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO = TEXTO_OMISSIS; // + '. (NR)';\n\nexport const hasIndicativoInicioAlteracao = (texto: string): boolean => {\n  return (\n    new RegExp(addSpaceRegex(escapeRegex('o seguinte acrscimo:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('os seguintes acrscimos:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com a seguinte alterao:')) + '\\\\s*$').test(texto) ||\n    new RegExp(addSpaceRegex(escapeRegex('passa a vigorar com as seguintes alteraes:')) + '\\\\s*$').test(texto)\n  );\n};\n\nexport const normalizaSeForOmissis = (texto: string): string => {\n  if (/^[.]*(?:\\s*)[\"]?(\\s*)?\\(NR\\)\\s*$/.test(texto)) {\n    return TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO;\n  }\n\n  if (/[\"]?(\\s*)?\\(NR\\)?\\s*$/.test(texto)) {\n    return texto.replace(/[\"](?!.*[\"])/, '');\n  }\n\n  if (texto === TEXTO_OMISSIS || texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || !new RegExp('^[.]+$').test(texto)) {\n    return texto;\n  }\n\n  return TEXTO_OMISSIS;\n};\n\nexport const hasIndicativoFimAlteracao = (texto: string): boolean => {\n  return /\\.[\"](?:\\s*\\(NR\\))\\s*$/.test(texto);\n};\n","import { CmdEmdUtil } from '../../../emenda/comando-emenda-util';\nimport { containsTags, converteIndicadorParaTexto, endsWithPunctuation, getTextoSemHtml, isValidHTML } from '../../../util/string-util';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isDispositivoDeArtigo, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport {\n  getDispositivoCabecaAlteracao,\n  getDispositivoPosterior,\n  getDispositivoPosteriorNaSequenciaDeLeitura,\n  hasFilhoGenerico,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isTodosFilhosTipoEnumeracaoSuprimidos,\n  isUltimaEnumeracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport {\n  hasIndicativoContinuacaoSequencia,\n  hasIndicativoDesdobramento,\n  hasIndicativoFinalSequencia,\n  hasIndicativoInicioAlteracao,\n  TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO,\n} from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\n\nconst hasCitacaoAoFinalFrase = (texto: string): boolean => {\n  return texto !== undefined && /.*:[\\s]{1,2}[\"].*[.][\"]$/.test(texto);\n};\n\nexport const validaTextoAgrupador = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (!isArticulacao(dispositivo) && (!dispositivo.texto || dispositivo.texto.trim().length === 0)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `No foi informado um texto para ${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && endsWithPunctuation(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `No pode haver sinal de pontuao ao final do texto d${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && containsTags(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `Texto d${dispositivo.artigoDefinido} ${dispositivo.descricao?.toLowerCase()} no pode possuir formatao.`);\n  }\n  return mensagens;\n};\n\nexport const validaTextoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  //\n  // validaes comuns a dispositivos de texto\n  //\n  if ((!isArticulacao(dispositivo) && !dispositivo.texto) || dispositivo.texto.trim().length === 0) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `No foi informado um texto para ${dispositivo.artigoDefinido + ' ' + dispositivo.descricao?.toLowerCase()}.`);\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && !isValidHTML(dispositivo.texto)) {\n    addMensagem(mensagens, TipoMensagem.ERROR, 'O contedo do dispositivo no  um HTML vlido.');\n  }\n  if (!isArticulacao(dispositivo) && dispositivo.texto && dispositivo.texto.trim().length > 500) {\n    addMensagem(mensagens, TipoMensagem.WARNING, `Pelo princpio da conciso, o texto dos dispositivos no deve ser extenso, devendo ser utilizadas frases curtas e concisas.`);\n  }\n\n  // Verifica se o texto tem r$ (com letra minuscula)\n  if (dispositivo.texto && dispositivo.texto.indexOf('r$') !== -1) {\n    addMensagem(mensagens, TipoMensagem.WARNING, `O texto do dispositivo possui r$ (real brasileiro) com letra minscula. Deveria ser R$ com letra maiscula.`);\n  }\n\n  //\n  // validaes comuns a dispositivos de artigo\n  //\n  if (\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    /^[A-Z-]/.test(getTextoSemHtml(dispositivo.texto)) &&\n    dispositivo.texto.indexOf('R$') !== 0\n  ) {\n    addMensagem(\n      mensagens,\n      TipoMensagem.WARNING,\n      `${dispositivo.descricao} deveria iniciar com letra minscula, a no ser que se trate de uma situao especial, como nome prprio.`\n    );\n  }\n\n  if (\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !isUltimaEnumeracao(dispositivo) &&\n    dispositivo.INDICADOR_SEQUENCIA !== undefined &&\n    !hasIndicativoContinuacaoSequencia(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ponto e vrgula.`);\n  }\n\n  //\n  // validaes comuns a Artigo e Pargrafo\n  //\n  if (\n    (isArtigo(dispositivo) || isParagrafo(dispositivo)) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !/^[...]{3,}/.test(dispositivo.texto) &&\n    !/^[A-Z-]/.test(getTextoSemHtml(dispositivo.texto))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria iniciar com letra maiscula.`);\n  }\n\n  //\n  // validaes de dispositivos que no sejam de alterao\n  //\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    ((!isArtigo(dispositivo) && hasFilhos(dispositivo)) || (isArtigo(dispositivo) && hasFilhos((dispositivo as Artigo).caput!))) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  // dispositivos de artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    isUltimaEnumeracao(dispositivo) &&\n    !hasIndicativoFinalSequencia(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `ltimo dispositivo de uma sequncia deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}.`);\n  }\n\n  // Artigo e Pargrafo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigo(dispositivo) || isParagrafo(dispositivo)) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !dispositivo.alteracoes &&\n    !hasIndicativoContinuacaoSequencia(dispositivo) &&\n    !hasCitacaoAoFinalFrase(dispositivo.texto)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  // Artigo\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    dispositivo.hasAlteracao() &&\n    !hasIndicativoDesdobramento(dispositivo) &&\n    !hasIndicativoInicioAlteracao(dispositivo.texto)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !dispositivo.alteracoes &&\n    (!hasFilhos(dispositivo) || !hasFilhos((dispositivo as Artigo).caput!)) &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  if (\n    isArtigo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    (!hasFilhos(dispositivo) || !hasFilhos((dispositivo as Artigo).caput!)) &&\n    dispositivo.alteracoes &&\n    !dispositivo.hasAlteracao() &&\n    hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria informar alteraes propostas.`);\n  }\n\n  if (!isDispositivoAlteracao(dispositivo) && isArtigo(dispositivo) && dispositivo.hasAlteracao() && !dispositivo.alteracoes?.base) {\n    addMensagem(mensagens, TipoMensagem.ERROR, AutoFix.INFORMAR_NORMA, true);\n  }\n\n  //\n  // Validaes de dispositivos de alterao\n  //\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !isArtigo(dispositivo) &&\n    hasFilhos(dispositivo) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    isArtigo(dispositivo) &&\n    hasFilhos((dispositivo as Artigo).caput!) &&\n    !hasIndicativoDesdobramento(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    !isAgrupador(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo) &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    hasIndicativoDesdobramento(dispositivo) &&\n    ((isArtigo(dispositivo) && !hasFilhos((dispositivo as Artigo).caput!)) || !hasFilhos(dispositivo))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} no deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_DESDOBRAMENTO!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    isParagrafo(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    !hasFilhos(dispositivo) &&\n    !isUnicoMesmoTipo(dispositivo) &&\n    !isUltimoMesmoTipo(dispositivo) &&\n    !hasIndicativoContinuacaoSequencia(dispositivo) &&\n    (!getDispositivoPosterior(dispositivo) || !isOmissis(getDispositivoPosterior(dispositivo)!))\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `${dispositivo.descricao} deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_SEQUENCIA!)}.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo === getDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.filhos.length === 0 &&\n    (dispositivo.texto === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO || dispositivo.texto.indexOf(TEXTO_OMISSIS) >= 0)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `No foi informada nenhuma alterao.`);\n  }\n\n  if (\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.texto &&\n    dispositivo.texto.indexOf(TEXTO_OMISSIS) === -1 &&\n    !/^[.]+$/.test(dispositivo.texto) &&\n    isDispositivoDeArtigo(dispositivo) &&\n    !isParagrafo(dispositivo) &&\n    !isOmissis(dispositivo) &&\n    !hasFilhoGenerico(dispositivo.pai!) &&\n    (!hasFilhos(dispositivo) || isTodosFilhosTipoEnumeracaoSuprimidos(dispositivo)) &&\n    !hasIndicativoFinalSequencia(dispositivo) &&\n    //isUltimaAlteracao(dispositivo) &&\n    isUltimaEnumeracao(dispositivo) &&\n    !isSeguidoDeOmissis(dispositivo)\n  ) {\n    addMensagem(mensagens, TipoMensagem.ERROR, `ltimo dispositivo de uma sequncia deveria terminar com ${converteIndicadorParaTexto(dispositivo.INDICADOR_FIM_SEQUENCIA!)}.`);\n  }\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    (dispositivo.situacao as DispositivoAdicionado).tipoEmenda !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n    dispositivo.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    const dispositivos = [] as any;\n    dispositivos.push(dispositivo);\n\n    if (CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(dispositivos)) {\n      if (localStorage.getItem('naoMostrarExplicacaoSufixo') === null) {\n        addMensagem(mensagens, TipoMensagem.WARNING, `Como interpretar sufixos (-1, -2,...)?`, undefined, 'onmodalsufixos');\n      }\n    }\n  }\n\n  return [...new Set(mensagens)];\n};\n\nconst isSeguidoDeOmissis = (dispositivo: Dispositivo): boolean => {\n  const proximo = getDispositivoPosteriorNaSequenciaDeLeitura(dispositivo);\n\n  if (proximo !== undefined) {\n    return proximo.tipo === TipoDispositivo.omissis.name;\n  }\n\n  return false;\n};\n\nconst addMensagem = (mensagens: Mensagem[], tipo: TipoMensagem, descricao: string | AutoFix, fix?: boolean, nomeEvento = ''): void => {\n  const existe = mensagens.filter(m => m.descricao === descricao).length > 0;\n  if (!existe) {\n    if (fix === undefined) {\n      mensagens.push({ tipo, descricao, nomeEvento });\n    } else {\n      mensagens.push({ tipo, descricao, fix });\n    }\n  }\n};\n\nexport const validaTexto = (dispositivo: Dispositivo): Mensagem[] => {\n  return isAgrupador(dispositivo) ? validaTextoAgrupador(dispositivo) : validaTextoDispositivo(dispositivo);\n};\n","export enum TipoGenero {\n  MASCULINO = 'masculino',\n  FEMININO = 'feminino',\n  INDEFINIDO = 'indefinido',\n}\n\n/* eslint-disable @typescript-eslint/explicit-function-return-type */\nexport interface Genero {\n  tipoGenero: string;\n  artigoDefinido: string;\n  pronomePossessivoSingular: string;\n  pronomePossessivoPlural: string;\n  artigoDefinidoSingular: string;\n  artigoDefinidoPlural: string;\n  artigoIndefinidoSingular: string;\n  artigoDefinidoPrecedidoPreposicaoASingular: string;\n  artigoDefinidoPrecedidoPreposicaoAPlural: string;\n  contracaoEmArtigoDefinidoSingular: string;\n}\n\nexport function GeneroFeminino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'feminino';\n    artigoDefinido = 'a';\n    pronomePossessivoSingular = ' da ';\n    pronomePossessivoPlural = ' das ';\n    artigoDefinidoSingular = ' a ';\n    artigoDefinidoPlural = ' as ';\n    artigoIndefinidoSingular = ' uma ';\n    artigoDefinidoPrecedidoPreposicaoASingular = '  ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' s ';\n    contracaoEmArtigoDefinidoSingular = ' na ';\n  };\n}\n\nexport function GeneroIndefinido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'indefinido';\n    artigoDefinido = '';\n    pronomePossessivoSingular = '';\n    pronomePossessivoPlural = '';\n    artigoDefinidoSingular = '';\n    artigoDefinidoPlural = '';\n    artigoIndefinidoSingular = '';\n    artigoDefinidoPrecedidoPreposicaoASingular = '';\n    artigoDefinidoPrecedidoPreposicaoAPlural = '';\n    contracaoEmArtigoDefinidoSingular = '';\n  };\n}\n\nexport function GeneroMasculino<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Genero {\n    tipoGenero = 'masculino';\n    artigoDefinido = 'o';\n    pronomePossessivoSingular = ' do ';\n    pronomePossessivoPlural = ' dos ';\n    artigoDefinidoSingular = ' o ';\n    artigoDefinidoPlural = ' os ';\n    artigoIndefinidoSingular = ' um ';\n    artigoDefinidoPrecedidoPreposicaoASingular = ' ao ';\n    artigoDefinidoPrecedidoPreposicaoAPlural = ' aos ';\n    contracaoEmArtigoDefinidoSingular = ' no ';\n  };\n}\n\nexport const generoFeminino = new (GeneroFeminino(Object))();\nexport const generoMasculino = new (GeneroMasculino(Object))();\nexport const generoIndefinido = new (GeneroIndefinido(Object))();\n\nexport const generoFromLetra = (letraGenero: string): Genero => {\n  return letraGenero === 'F' ? generoFeminino : letraGenero === 'M' ? generoMasculino : generoIndefinido;\n};\n\nexport class NomeComGenero {\n  genero: Genero;\n\n  constructor(public nome: string, genero: string | Genero) {\n    this.genero = typeof genero === 'string' ? generoFromLetra(genero as string) : (genero as Genero);\n  }\n}\n","export const VOCABULARIO = {\n  autoridades: [\n    {\n      urn: 'federal',\n      descricao: 'Federal',\n    },\n    {\n      urn: 'senado.federal',\n      descricao: 'Senado Federal',\n    },\n    {\n      urn: 'congresso.nacional',\n      descricao: 'Congresso Nacional',\n    },\n  ],\n  tiposDocumento: [\n    {\n      urn: 'lei',\n      descricao: 'Lei',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.complementar',\n      descricao: 'Lei Complementar',\n      genero: 'F',\n    },\n    {\n      urn: 'lei.delegada',\n      descricao: 'Lei Delegada',\n      genero: 'F',\n    },\n    {\n      urn: 'decreto.legislativo',\n      descricao: 'Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto.lei',\n      descricao: 'Decreto-Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'decreto',\n      descricao: 'Decreto',\n      genero: 'M',\n    },\n    {\n      urn: 'consolidacao.leis.trabalho',\n      descricao: 'Consolidao das Leis do Trabalho',\n      genero: 'F',\n    },\n    {\n      urn: 'resolucao',\n      descricao: 'Resoluo',\n      genero: 'F',\n    },\n    {\n      urn: 'regimento.interno',\n      descricao: 'Regimento Interno',\n      genero: 'M',\n    },\n    {\n      urn: 'constituicao',\n      descricao: 'Constituio',\n      genero: 'F',\n    },\n    {\n      urn: 'ato.disposicoes.constitucionais.transitorias',\n      descricao: 'Ato das Disposies Constitucionais Transitrias',\n      genero: 'M',\n    },\n    {\n      urn: 'medida.provisoria',\n      descricao: 'Medida Provisria',\n      genero: 'F',\n    },\n    {\n      urn: 'medida.provisoria;mpv',\n      descricao: 'Medida Provisria',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional',\n      descricao: 'Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'emenda.constitucional.revisao',\n      descricao: 'Emenda Constitucional de Reviso',\n      genero: 'F',\n    },\n    {\n      urn: 'proposta.emenda.constitucional;pec',\n      descricao: 'Proposta de Emenda Constitucional',\n      genero: 'F',\n    },\n    {\n      urn: 'projeto.lei;pl',\n      descricao: 'Projeto de Lei',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;pls',\n      descricao: 'Projeto de Lei do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plp',\n      descricao: 'Projeto de Lei Complementar',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;pl',\n      descricao: 'Projeto de Lei Complementar',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;pls',\n      descricao: 'Projeto de Lei Complementar do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei;plc',\n      descricao: 'Projeto de Lei da Cmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.complementar;plc',\n      descricao: 'Projeto de Lei Complementar da Cmara',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.lei.conversao;plv',\n      descricao: 'Projeto de Lei de Converso',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.resolucao;prs',\n      descricao: 'Projeto de Resoluo do Senado',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pds',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'projeto.decreto.legislativo;pdl',\n      descricao: 'Projeto de Decreto Legislativo',\n      genero: 'M',\n    },\n    {\n      urn: 'substitutivo.projeto.lei.senado;scd',\n      descricao: 'Substitutivo da Cmara dos Deputados',\n      genero: 'M',\n    },\n    {\n      urn: 'emenda.projeto.lei.senado;ecd',\n      descricao: 'Emenda(s) da Cmara dos Deputados',\n      genero: 'F',\n    },\n  ],\n  fakeUrns: [\n    {\n      sigla: 'PEC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'proposta.emenda.constitucional;pec',\n    },\n    {\n      sigla: 'PL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pl',\n    },\n    {\n      sigla: 'PLS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;pls',\n    },\n    {\n      sigla: 'PLP',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.complementar;plp',\n    },\n    {\n      sigla: 'PLC',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei;plc',\n    },\n    {\n      sigla: 'PLV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.conversao;plv',\n    },\n    {\n      sigla: 'PRS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.resolucao;prs',\n    },\n    {\n      sigla: 'PDS',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pds',\n    },\n    {\n      sigla: 'PDL',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.decreto.legislativo;pdl',\n    },\n    {\n      sigla: 'SCD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'substitutivo.projeto.lei.senado;scd',\n    },\n    {\n      sigla: 'ECD',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'emenda.projeto.lei.senado;ecd',\n    },\n    {\n      sigla: 'MPV',\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'medida.provisoria;mpv',\n    },\n  ],\n  siglas: [\n    {\n      urnAutoridade: 'federal',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLN',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'congresso.nacional',\n      urnTipoDocumento: 'medida.provisoria',\n      sigla: 'MPV',\n    },\n    {\n      urnAutoridade: 'senado.federal',\n      urnTipoDocumento: 'projeto.lei.senado.federal',\n      sigla: 'PLS',\n    },\n    {\n      urnAutoridade: 'camara.deputados',\n      urnTipoDocumento: 'projeto.lei',\n      sigla: 'PLC',\n    },\n  ],\n  atalhosUrn: [\n    {\n      urnTipoDocumento: 'constituicao',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:constituicao:1988-10-05;1988',\n      nome: 'Constituio Federal',\n    },\n    {\n      urnTipoDocumento: 'ato.disposicoes.constitucionais.transitorias',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:ato.disposicoes.constitucionais.transitorias:1988-10-05;1988',\n      nome: 'Ato das Disposies Constitucionais Transitrias - ADCT',\n    },\n    {\n      urnTipoDocumento: 'consolidacao.leis.trabalho',\n      urnAutoridade: 'federal',\n      urn: 'urn:lex:br:federal:decreto.lei:1943-05-01;5452',\n      nome: 'Consolidao das Leis do Trabalho - CLT, aprovada pelo Decreto-Lei n 5.452, de 1 de maio de 1943',\n      genero: 'F',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'senado.federal',\n      urn: 'urn:lex:br:senado.federal:resolucao:1970-11-27;93',\n      nome: 'Regimento Interno do Senado Federal',\n      genero: 'M',\n    },\n    {\n      urnTipoDocumento: 'regimento.interno',\n      urnAutoridade: 'congresso.nacional',\n      urn: 'urn:lex:br:congresso.nacional:resolucao:1970-08-11;1',\n      nome: 'Regimento Comum do Congresso Nacional',\n      genero: 'M',\n    },\n  ],\n  eventos: [\n    {\n      urn: 'leitura',\n      tipoTextoProcessoLegislativo: 'Texto inicial',\n      genero: 'M',\n    },\n    {\n      urn: 'aprovacao.substitutivo.decisao.terminativa',\n      tipoTextoProcessoLegislativo: 'Redao do vencido em turno suplementar na Comisso',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'aprovacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Redao do vencido em turno suplementar no Plenrio',\n      substitutivo: 's',\n      genero: 'F',\n    },\n    {\n      urn: 'apresentacao.substitutivo',\n      tipoTextoProcessoLegislativo: 'Texto do substitutivo',\n      substitutivo: 's',\n      genero: 'M',\n    },\n  ],\n};\n","import { generoFromLetra } from '../../dispositivo/genero';\nimport { Autoridade } from '../../documento/autoridade';\nimport { Genero, generoFeminino, generoMasculino, NomeComGenero } from './../../dispositivo/genero';\nimport { VOCABULARIO } from './vocabulario';\n\nexport const getAutoridade = (urn: string): Autoridade | undefined => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.autoridades.filter(t => t.urn === partes[0])[0];\n};\n\nexport const getSigla = (urn: string): string => {\n  const tipo = getTipo(urn) ?? {};\n  const fnProcurarPorUrnTipoDocumento = (item: any): any => item.urnTipoDocumento === tipo.urn;\n  return VOCABULARIO.siglas.find(fnProcurarPorUrnTipoDocumento)?.sigla ?? VOCABULARIO.fakeUrns.find(fnProcurarPorUrnTipoDocumento)?.sigla ?? '';\n};\n\nexport const getTipo = (urn: string): any => {\n  const tipo = urn.replace('urn:lex:br:', '')?.split(':');\n  return VOCABULARIO.tiposDocumento.filter(t => t.urn === tipo[1])[0];\n};\n\nexport const getNumero = (urn: string): string => {\n  // urn:lex:br:federal:medida.provisoria:2019-11-11;905\n  // urn:lex:br:senado.federal:proposta.emenda.constitucional;pec:2019;16@data.evento;leitura;2019-03-19t14.00\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n  const anoNumero = partes[2].replace(/@.+$/, '').split(';');\n  return anoNumero.length > 1 ? anoNumero[1] : '';\n};\n\nexport const formataNumero = (numero: string): string => {\n  return new Intl.NumberFormat('pt-BR', { style: 'decimal' }).format(+numero);\n};\n\nexport const getData = (urn: string): string => {\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n\n  if (partes.length < 3) {\n    return '';\n  }\n\n  // Sem identificao (nem data nem nmero)\n  // Ex: federal:lei:LEXML_URN_ID\n  if (partes[2] === 'LEXML_URN_ID') {\n    return '';\n  }\n\n  // Apenas ano\n  // Ex: federal:lei:2020;123\n  if (/^\\d{4};$/.test(partes[2])) {\n    return partes[2].split(';')[0];\n  }\n\n  // Data completa\n  // Ex: federal:lei:2020-10-22;123\n  const d = partes[2]?.substring(0, partes[2].indexOf(';'))?.split('-')?.reverse();\n  return d ? d.join('/') : '';\n};\n\nexport const getDataPorExtenso = (urn: string): string => {\n  const mes = ['janeiro', 'fevereiro', 'maro', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];\n\n  const partes = urn.replace('urn:lex:br:', '')?.split(':');\n\n  const dataInformada = partes[2]?.substring(0, partes[2].indexOf(';'));\n\n  if (/^\\d{4}$/.test(dataInformada) || /\\d{4}$/.test(dataInformada)) {\n    return dataInformada;\n  }\n  const d = partes[2]?.substring(0, partes[2].indexOf(';'))?.split('-')?.reverse();\n\n  if (d) {\n    d[1] = mes[+d[1] - 1];\n    return d.join(' de ');\n  }\n  return '';\n};\n\nexport const getAno = (urn: string): string => (/^\\d{4}$/.test(getData(urn)) ? getData(urn) : getData(urn).split('/').slice(-1)[0]);\n\nconst retiraFragmento = (urn: string): string => {\n  const i = urn.indexOf('!');\n\n  if (i !== -1) {\n    return urn.substring(0, i);\n  }\n  return urn;\n};\n\nexport const converteDataFormatoBrasileiroParaUrn = (data: string): string => {\n  const dataRegex = data.match(/^(0[1-9]|[12][0-9]|3[01])[-/](0[1-9]|1[012])[-/](\\d{4})$/);\n  return dataRegex ? `${dataRegex[3]}-${dataRegex[2]}-${dataRegex[1]}` : '';\n};\n\nexport const buildUrn = (autoridade: string, tipo: string, numero: string, data: string): string => {\n  const dataPadrao = /\\d{4}[-]/.test(data) || /^\\d{4}$/.test(data) ? data : converteDataFormatoBrasileiroParaUrn(data);\n  return `urn:lex:br:${autoridade}:${tipo}:${dataPadrao};${numero}`;\n};\n\n// Para inicializao de edio de emenda sem texto lexml\nexport const buildFakeUrn = (sigla: string, numero: string, ano: string): string => {\n  const fake = VOCABULARIO.fakeUrns.find(f => f.sigla === sigla.toUpperCase());\n  if (fake) {\n    return buildUrn(fake.urnAutoridade, fake.urnTipoDocumento, numero, ano);\n  }\n  throw `Sigla '${sigla}' no encontrada no vocabulrio para montagem da urn.`;\n};\n\nexport const validaUrn = (urn: string): boolean => {\n  const autoridade = getAutoridade(urn)?.urn;\n  const tipo = getTipo(urn)?.urn;\n  const numero = /^\\d{1,5}$/.test(getNumero(urn));\n  const data = /\\d{4}[-]/.test(getData(urn)) || /^\\d{4}$/.test(getData(urn)) ? getData(urn) : converteDataFormatoBrasileiroParaUrn(getData(urn));\n  return urn?.startsWith('urn:lex:br:') && autoridade && tipo && numero && data;\n};\n\nexport const getNomeExtenso = (urn: string): string => {\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const data = getData(u);\n  return (tipo ? tipo : '') + (numero ? ' n ' + numero : '') + (data.length > 7 ? ' de ' + data : '');\n};\n\nexport const getNomeExtensoComDataExtenso = (urn: string): string => {\n  const atalho = VOCABULARIO.atalhosUrn.find(a => a.urn === urn);\n  if (atalho) {\n    return atalho.nome;\n  }\n  const u = retiraFragmento(urn);\n  const numero = getNumero(u);\n  const tipo = getTipo(u)?.descricao;\n  const dataString = getData(u);\n  const [diaOuApenasAno, mes, ano] = dataString.split('/').map(p => parseInt(p));\n  const dataExtenso = dataString.includes('/') ? getDataExtenso(new Date(ano, mes - 1, diaOuApenasAno)) : diaOuApenasAno;\n  return (tipo ? tipo : '') + (numero ? ' n ' + parseInt(numero).toLocaleString('pt-BR') : '') + ', de ' + dataExtenso;\n};\n\nexport const buildHtmlLink = (urn: string): string => {\n  const nomeExtenso = getNomeExtensoComDataExtenso(urn);\n  return `<a href=\"${urn}\">${nomeExtenso}</a>`;\n};\n\nconst getDataExtenso = (data: Date) => {\n  return data ? data.getDate() + ' de ' + data.toLocaleDateString('pt-BR', { month: 'long' }) + ' de ' + data.getFullYear() : undefined;\n};\n\nexport const getRefGenericaProjeto = (urn: string): NomeComGenero => {\n  const tipo = getTipo(urn);\n  let genero = generoFromLetra(tipo.genero);\n  // TODO - Implementar UrnService.isSubstitutivo\n  const substitutivo = false;\n\n  let nome = 'Projeto';\n  if (genero === generoFeminino) {\n    if (tipo.urn.startsWith('medida.provisoria')) {\n      nome = 'Medida Provisria';\n    } else {\n      nome = 'Proposta';\n    }\n  }\n\n  if (substitutivo) {\n    if (genero === generoFeminino) {\n      nome = 'Substitutivo  ' + nome;\n    } else {\n      nome = 'Substitutivo ao ' + nome;\n    }\n    genero = generoMasculino;\n  }\n\n  return new NomeComGenero(nome, genero);\n};\n\nexport const getGeneroUrnNorma = (urn: string): Genero => {\n  const tipo = getTipo(urn);\n  return generoFromLetra(tipo.genero);\n};\n","import { Articulacao, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo, isOmissis } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport { getDispositivoFromElemento } from '../../elemento/elementoUtil';\nimport {\n  getArtigosAnterioresIndependenteAgrupador,\n  getArtigosPosterioresIndependenteAgrupador,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosterioresMesmoTipo,\n  getProximoArtigoAnterior,\n  isDispositivoAlteracao,\n  isModificadoOuSuprimido,\n  isOriginal,\n} from '../hierarquia/hierarquiaUtil';\n\nconst I = 1,\n  V = 5,\n  X = 10,\n  L = 50,\n  C = 100,\n  D = 500,\n  M = 1000;\n\nconst ALGARISMOS_ROMANOS: { [key: string]: number } = {\n  M: 1000,\n  CM: 900,\n  D: 500,\n  CD: 400,\n  C: 100,\n  XC: 90,\n  L: 50,\n  XL: 40,\n  X: 10,\n  IX: 9,\n  V: 5,\n  IV: 4,\n  I: 1,\n};\n\nexport const isNumeracaoZero = (numero: string): boolean => {\n  return /^0(-[a-z]+)?$/i.test(numero);\n};\n\nexport const isNumero = (numero: string): boolean => {\n  return /^\\d+$/.test(numero);\n};\n\nexport const isNumeracaoValida = (numero: string): boolean => {\n  return /^\\d{1,}(([-]?[1-9]+){0,2})$/.test(numero);\n};\n\nexport const isLetra = (letra: string): boolean => {\n  return /[a-zA-Z]+/.test(letra);\n};\n\nexport const isRomano = (numero: string): boolean => {\n  return /^(?=[MDCLXVI])M*(C[MD]|D?C{0,3})(X[CL]|L?X{0,3})(I[XV]|V?I{0,3})$/i.test(numero);\n};\n\nexport const converteLetraParaNumeroArabico = (s: string): string => {\n  if (!isLetra(s)) {\n    return s;\n  }\n\n  s = s.toLowerCase();\n\n  let acumulador = 0;\n\n  [...s].forEach(atual => (acumulador = atual.toLowerCase().charCodeAt(0) - 97 + 1 + acumulador * 26));\n\n  return acumulador.toString();\n};\n\nexport const converteNumeroArabicoParaLetra = (strNumero: string): string => {\n  const number = parseInt(strNumero);\n  return number ? intToAlpha(number) : strNumero;\n};\n\nexport const intToAlpha = (numero: number): string => {\n  let str = '';\n\n  let d = 0;\n  while (numero > 0) {\n    d = (numero - 1) % 26;\n    numero = (numero - d - 1) / 26;\n    str = str.replace(/^/, String.fromCharCode(97 + d));\n  }\n  return str;\n};\n\nexport const converteNumeroRomanoParaArabico = (numeroRomano: string): string => {\n  if (numeroRomano.startsWith('0')) {\n    return '0';\n  }\n  if (!isRomano(numeroRomano)) {\n    throw new Error(\"O valor '\" + numeroRomano + \"' no  um nmero em algarismo romano vlido.\");\n  }\n\n  numeroRomano = numeroRomano.toLowerCase();\n\n  let tot = 0;\n  let mode = I;\n  for (let i = numeroRomano.length - 1; i >= 0; i--) {\n    const value = numberCharToInt(numeroRomano.charAt(i));\n\n    if (value > mode) {\n      mode = value;\n    }\n    if (value < mode) {\n      tot -= value;\n    } else {\n      tot += value;\n    }\n  }\n\n  return tot.toString();\n};\n\nconst numberCharToInt = (numeroRomano: string): number => {\n  switch (numeroRomano.toLowerCase()) {\n    case 'i':\n      return I;\n    case 'v':\n      return V;\n    case 'x':\n      return X;\n    case 'l':\n      return L;\n    case 'c':\n      return C;\n    case 'd':\n      return D;\n    case 'm':\n      return M;\n    default:\n      return 0;\n  }\n};\n\nexport const converteNumeroArabicoParaRomano = (numero: string): string => {\n  let resultado = '';\n  let temp;\n  let num = numero.search(/-/) === -1 ? parseInt(numero) : parseInt(numero.substring(0, numero.search(/-/)));\n  const resto = numero.search(/-/) === -1 ? '' : numero.substring(numero.search(/-/));\n\n  for (const key in ALGARISMOS_ROMANOS) {\n    temp = Math.floor(num / ALGARISMOS_ROMANOS[key]);\n    if (temp >= 0) {\n      for (let i = 0; i < temp; i++) {\n        resultado += key;\n      }\n    }\n    num = num % ALGARISMOS_ROMANOS[key];\n  }\n  return resultado + resto;\n};\n\nexport const trataNumeroAndComplemento = (numero: string, funcNumero?: any, funcComplemento?: any): string => {\n  const num = numero.search(/-/) === -1 ? numero.replace('', '') : numero.substring(0, numero.search(/-/)).replace('', '');\n  const resto = numero.search(/-/) === -1 ? '' : numero.substring(numero.search(/-/));\n\n  const converted = num === '0' ? '0' : funcNumero ? funcNumero(num) : num;\n\n  return converted + (resto ? (funcComplemento ? funcComplemento(resto) : resto) : '');\n};\n\nexport const converteNumerosComplementoParaLetra = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  const novo = partes?.map(r => r && (isNumero(r) ? converteNumeroArabicoParaLetra(r)?.toUpperCase() : r));\n\n  return novo?.length > 0 ? novo?.join('-') : '';\n};\n\nexport const converteLetrasComplementoParaNumero = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  const novo = partes?.map(r => r && (isLetra(r) ? converteLetraParaNumeroArabico(r) : r));\n\n  return novo?.length > 0 ? novo?.join('-') : '';\n};\n\nexport const comparaNumeracao = (a?: string, b?: string): number => {\n  if (a === b) {\n    return 0;\n  }\n  const partesA = a?.split('-');\n  const partesB = b?.split('-');\n\n  const [numA, ...remainingA] = partesA!;\n  const [numB, ...remainingB] = partesB!;\n\n  if (!numA || (numB && parseInt(numA) < parseInt(numB))) {\n    return 1;\n  }\n  if (!numB || (numA && parseInt(numA) > parseInt(numB))) {\n    return -1;\n  }\n\n  if (a && b && b.includes(a)) {\n    return 1;\n  }\n\n  for (let i = 0; i < 3; i++) {\n    const rA = i >= remainingA?.length ? 0 : remainingA[i];\n    const rB = i >= remainingB?.length ? 0 : remainingB[i];\n\n    if (+rA > +rB) {\n      return -1;\n    }\n    if (+rA < +rB) {\n      return 1;\n    }\n  }\n\n  return 0;\n};\n\nexport const rotuloParaEdicao = (texto: string): string => {\n  return texto\n    .replace(/\\./g, '')\n    .replace(/[\"]/g, '')\n    .replace(/^Parte/i, '')\n    .replace(/^Livro/i, '')\n    .replace(/^T[i]tulo/i, '')\n    .replace(/^Cap[i]tulo/i, '')\n    .replace(/^Se[c][a]o/i, '')\n    .replace(/^Subse[c][a]o/i, '')\n    .replace(/^Artigo$/i, '')\n    .replace(/^Par[a]grafo$/i, '')\n    .replace(/^Inciso$/i, '')\n    .replace(/^Al[i]nea$/i, '')\n    .replace(/^Item$/i, '')\n    .replace(/Art/i, '')\n    .replace(//i, '')\n    .replace(//i, '')\n    .replace(/[]/i, '')\n    .replace(/[-][/s]*$/, '')\n    .replace(/[)][/s]*$/, '')\n    .trim();\n};\n\nexport const podeRenumerar = (articulacao: Articulacao, elemento: Elemento): boolean => {\n  const dispositivo = getDispositivoFromElemento(articulacao, elemento);\n\n  if (dispositivo === undefined) {\n    return false;\n  }\n\n  if (isOmissis(dispositivo)) {\n    return false;\n  }\n\n  return (\n    elemento.hierarquia?.pai?.uuidAlteracao !== undefined &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO &&\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO &&\n    !(\n      isDispositivoAlteracao(dispositivo) &&\n      dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    )\n  );\n};\n\nexport const calculaSeqOrdem = (d: Dispositivo): SeqOrdem => {\n  const seqOriginal = contaIrmaosOriginaisAte(d);\n\n  if (isOriginal(d)) {\n    return new SeqOrdem(seqOriginal);\n  }\n\n  const seqDispEmenda = contaIrmaosNaoOriginaisConsecutivosAte(d);\n\n  const temOriginalAntes = seqOriginal > 0;\n  const temOriginalDepois = hasIrmaoOriginalDepois(d);\n\n  if (!temOriginalAntes && !temOriginalDepois) {\n    return new SeqOrdem(seqDispEmenda);\n  }\n\n  if (!temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(0);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  if (temOriginalAntes && temOriginalDepois) {\n    const seqOrdem = new SeqOrdem(seqOriginal);\n    seqOrdem.addNovoSeqOrdem(seqDispEmenda);\n\n    return seqOrdem;\n  }\n\n  // if(temOriginalAntes && !temOriginalDepois)\n  return new SeqOrdem(seqOriginal + seqDispEmenda);\n};\n\nexport const hasIrmaoOriginalDepois = (d: Dispositivo): boolean => {\n  const lista = isArtigo(d) ? getArtigosPosterioresIndependenteAgrupador(d) ?? [] : getDispositivosPosterioresMesmoTipo(d);\n  return lista.filter((dispositivo: Dispositivo) => isOriginal(dispositivo)).length > 0;\n};\n\nexport const contaIrmaosOriginaisAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  do {\n    if ((isOriginal(d) || isModificadoOuSuprimido(d)) && d.tipo === tipo) {\n      i++;\n    }\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  } while (d !== undefined);\n  return i;\n};\n\nexport const contaIrmaosNaoOriginaisConsecutivosAte = (d: Dispositivo): number => {\n  let i = 0;\n  const tipo = d.tipo;\n\n  while (d !== undefined && !isOriginal(d) && !isModificadoOuSuprimido(d) && d.tipo === tipo) {\n    i++;\n    d = isArtigo(d) ? getProximoArtigoAnterior(d.pai!, d)! : getDispositivoAnterior(d)!;\n  }\n  return i;\n};\n\nexport const calculaNumeracao = (d: Dispositivo): string => {\n  return getNumeracao(d);\n};\n\nconst mapValidacaoNumeracao = {\n  Artigo: (numero: string): boolean => isNumero(numero.replace('', '')) || /^(artigo )?[u]nico$/i.test(numero),\n  Paragrafo: (numero: string): boolean => isNumero(numero.replace('', '')) || /^(par[a]grafo )?[u]nico$/i.test(numero),\n  Inciso: isRomano,\n  Alinea: isLetra,\n  Item: isNumero,\n};\n\nexport const isNumeracaoValidaPorTipo = (numero: string, tipo: string): boolean => {\n  const partes = numero.split('-');\n  const partePrincipal = partes[0];\n  const parteSufixo = '-' + partes.slice(1, partes.length).join('-');\n  const fnValidacao = mapValidacaoNumeracao[tipo] || isRomano;\n  const resultPartePrincipal = fnValidacao(partePrincipal) && partePrincipal !== '0';\n\n  const regexSufixoEncaixeComAteDuasLetrasEAteDoisNiveis = /^(-[a-z]{1,2}){1,2}$/i;\n  return partes.length === 1 ? resultPartePrincipal : resultPartePrincipal && regexSufixoEncaixeComAteDuasLetrasEAteDoisNiveis.test(parteSufixo);\n};\n\nclass SeqOrdem {\n  seq: number;\n  letras?: string;\n\n  constructor(seq: number) {\n    this.seq = seq;\n  }\n\n  addNovoSeqOrdem(seq2: number): void {\n    if (this.seq > 0) {\n      this.letras = '' + seq2;\n    } else if (seq2 > 1) {\n      this.letras = '' + --seq2;\n    }\n  }\n  getNumeracao(isDispositivoEmenda: boolean): string {\n    return '' + this.seq + (isDispositivoEmenda && this.letras ? '-' : '') + (this.letras ?? '');\n  }\n}\n\n//\n//\n//\n\nexport const getProximoNumero = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  if (numero && isNumero(partes[0]) && partes.length === 1) {\n    partes[0] = '' + (+partes[0] + 1);\n    return partes.join('-');\n  }\n  if (numero && isNumero(partes[partes.length - 1])) {\n    partes[partes.length - 1] = '' + (+partes[partes.length - 1] + 1);\n    return partes.join('-');\n  }\n  return numero;\n};\n\nexport const getNumeroAbaixo = (numero: string): string => {\n  const partes = numero?.split('-');\n\n  if (numero && isNumero(partes[partes.length - 1])) {\n    partes[partes.length - 1] = '' + partes[partes.length - 1] + '-1';\n    return partes.join('-');\n  }\n  return numero;\n};\n\nconst getNumeracao = (d: Dispositivo): string => {\n  const dispositivosAnteriores = isArtigo(d) ? getArtigosAnterioresIndependenteAgrupador(d) : getDispositivosAnterioresMesmoTipo(d);\n  const dispositivoPosteriores = isArtigo(d) ? getArtigosPosterioresIndependenteAgrupador(d) : getDispositivosPosterioresMesmoTipo(d);\n\n  const dispositivoOriginalAnterior = dispositivosAnteriores && dispositivosAnteriores.filter(f => isOriginal(f) || isModificadoOuSuprimido(f)).reverse()[0];\n  const dispositivoOriginalPosterior = dispositivoPosteriores && dispositivoPosteriores.filter(f => isOriginal(f) || isModificadoOuSuprimido(f))[0];\n\n  const dispositivoAnteriorAdicionado = dispositivosAnteriores?.filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO).reverse()[0];\n\n  if (!getDispositivoAnteriorMesmoTipo(d) && !dispositivoOriginalPosterior) {\n    return '1';\n  }\n\n  if (!dispositivoOriginalAnterior && dispositivoOriginalPosterior) {\n    return dispositivoAnteriorAdicionado ? (dispositivoAnteriorAdicionado.numero! === '0' ? getNumeroAbaixo('0') : getProximoNumero(dispositivoAnteriorAdicionado.numero!)) : '0';\n  }\n\n  if (dispositivoOriginalAnterior && !dispositivoOriginalPosterior) {\n    return getProximoNumero(getDispositivoAnteriorMesmoTipo(d)!.numero!);\n  }\n\n  if (dispositivoOriginalAnterior && dispositivoOriginalPosterior) {\n    if (dispositivoOriginalAnterior === getDispositivoAnteriorMesmoTipo(d)) {\n      return getNumeroAbaixo(dispositivoOriginalAnterior.numero!);\n    }\n    return getProximoNumero(getDispositivoAnteriorMesmoTipo(d)!.numero!);\n  }\n\n  const seqDispEmenda = contaIrmaosNaoOriginaisConsecutivosAte(d);\n\n  return '' + seqDispEmenda;\n};\n","import { TipoDispositivo } from './../tipo/tipoDispositivo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isDispositivoGenerico, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoAnteriorNaSequenciaDeLeitura,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosteriores,\n  getUltimoFilho,\n  irmaosMesmoTipo,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isPrimeiroMesmoTipo,\n  isUnicoMesmoTipo,\n  validaOrdemDispositivo,\n} from '../hierarquia/hierarquiaUtil';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport { comparaNumeracao } from './numeracaoUtil';\n\nexport const getDispositivoAnteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoAnteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoAnteriorIgnorandoOmissis(d);\n};\n\nexport const getDispositivoPosteriorIgnorandoOmissis = (dispositivo: Dispositivo): Dispositivo | undefined => {\n  const d = getDispositivoPosteriorMesmoTipo(dispositivo);\n\n  if (!d) {\n    return d;\n  }\n  return getDispositivoPosteriorIgnorandoOmissis(d);\n};\n\nexport const validaNumeracaoDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm numerao',\n    });\n  }\n  if (dispositivo !== null && !isOmissis(dispositivo) && dispositivo.rotulo && dispositivo.rotulo.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm rtulo',\n    });\n  }\n  return mensagens;\n};\n\nexport const validaNumeracaoDispositivoAlteracao = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero !== undefined && dispositivo.numero.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm numerao',\n    });\n  }\n  if (dispositivo !== null && !isOmissis(dispositivo) && dispositivo.rotulo?.trim().length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no contm rtulo',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoGenerico(dispositivo) &&\n    (dispositivo.rotulo?.endsWith(dispositivo.tipo) || dispositivo.rotulo?.toLowerCase() === TipoDispositivo[dispositivo.tipo.toLowerCase()].descricao?.toLowerCase()) &&\n    !(\n      dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' &&\n      getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    )\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.RENUMERAR_DISPOSITIVO,\n      fix: true,\n    });\n  }\n  if (dispositivo !== null && isDispositivoAlteracao(dispositivo) && isParagrafo(dispositivo) && !isUnicoMesmoTipo(dispositivo) && dispositivo.rotulo?.endsWith('nico.')) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Quando houver mais de um ${dispositivo.descricao}, no pode se tratar de '${dispositivo.descricao} nico'`,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    isPrimeiroMesmoTipo(dispositivo) &&\n    !isAgrupador(dispositivo.pai!) &&\n    !isOmissis(dispositivo) &&\n    (!getDispositivoAnterior(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getUltimoFilho(getDispositivoAnterior(dispositivo)!)))) &&\n    dispositivo.numero !== '1' &&\n    dispositivo.numero !== '1u'\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_ANTES,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    !isDispositivoCabecaAlteracao(dispositivo) &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivoAnteriorMesmoTipo(dispositivo) &&\n    dispositivo.tipo !== getDispositivoAnteriorMesmoTipo(dispositivo)?.rotulo &&\n    !isOmissis(getDispositivoAnterior(dispositivo)!) &&\n    !isOmissis(getDispositivoAnteriorNaSequenciaDeLeitura(dispositivo)!) &&\n    !validaOrdemDispositivo(getDispositivoAnterior(dispositivo)!, dispositivo) &&\n    dispositivo.numero !== getDispositivoAnteriorMesmoTipo(dispositivo)?.numero\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_ANTES,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    dispositivo.pai!.indexOf(dispositivo) > 0 &&\n    getDispositivosAnterioresMesmoTipo(dispositivo)\n      .filter(d => d.numero !== undefined)\n      .filter(d => d !== dispositivo)\n      .filter(anterior => dispositivo.numero !== anterior.numero && comparaNumeracao(dispositivo.numero, anterior.numero) === 1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero menor ao de algum dispositivo anterior',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.numero !== undefined &&\n    !dispositivo.pai!.isLastFilho(dispositivo) &&\n    getDispositivosPosteriores(dispositivo)\n      .filter(d => d !== dispositivo && dispositivo.pai === d.pai && d.numero !== undefined)\n      .filter(posterior => comparaNumeracao(posterior.numero, dispositivo.numero) === 1).length > 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero maior do que algum dispositivo posterior',\n    });\n  }\n  if (dispositivo !== null && dispositivo.numero !== undefined && irmaosMesmoTipo(dispositivo).filter(d => d.numero && d.numero === dispositivo.numero).length > 1) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo tem nmero igual ao de outro dispositivo',\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaNumeracao = (dispositivo: Dispositivo): Mensagem[] => {\n  return isDispositivoAlteracao(dispositivo) ? validaNumeracaoDispositivoAlteracao(dispositivo) : validaNumeracaoDispositivo(dispositivo);\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArticulacao } from '../../dispositivo/tipo';\nimport { validaTexto } from '../conteudo/conteudoValidator';\nimport { validaUrn } from '../documento/urnUtil';\nimport { isOriginal } from '../hierarquia/hierarquiaUtil';\nimport { validaHierarquia } from '../hierarquia/hierarquiaValidator';\nimport { validaNumeracao } from '../numeracao/numeracaoValidator';\nimport { Mensagem, TipoMensagem } from '../util/mensagem';\n\nconst validaReferencia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n\n  if (!dispositivo.alteracoes || !dispositivo.alteracoes.base) {\n    return [];\n  }\n\n  if (!validaUrn(dispositivo.alteracoes.base)) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi informada uma norma alterada vlida`,\n    });\n  }\n\n  return mensagens;\n};\n\nexport const validaDispositivo = (dispositivo: Dispositivo): Mensagem[] => {\n  if (\n    (isArticulacao(dispositivo) && dispositivo.pai === undefined) ||\n    isOriginal(dispositivo) ||\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n  ) {\n    return [];\n  }\n  return validaHierarquia(dispositivo).concat(validaTexto(dispositivo), validaNumeracao(dispositivo), validaReferencia(dispositivo));\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupadorGenerico, isCaput, isDispositivoGenerico, isOmissis } from '../../dispositivo/tipo';\nimport { comparaNumeracao } from '../numeracao/numeracaoUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { AutoFix, Mensagem, TipoMensagem } from '../util/mensagem';\nimport {\n  getDispositivoAnterior,\n  getDispositivoPosterior,\n  getDispositivoPosteriorMesmoTipo,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  getUltimoFilho,\n  isDispositivoAlteracao,\n  isDispositivosSequenciaisMesmoPai,\n  isOriginal,\n} from './hierarquiaUtil';\n\nexport const validaHierarquia = (dispositivo: Dispositivo): Mensagem[] => {\n  const mensagens: Mensagem[] = [];\n  if (dispositivo === null) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'O dispositivo no foi informado',\n    });\n  }\n  if (dispositivo !== null && dispositivo.filhos.length > 0 && dispositivo.tiposPermitidosFilhos!.length === 0) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} no poderia possuir filhos`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isDispositivoAlteracao(dispositivo) &&\n    dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    (getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1' || getDispositivoPosteriorMesmoTipo(dispositivo)?.numero === '1u') &&\n    getDispositivoPosteriorMesmoTipo(dispositivo)?.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No  permitido um dispositivo de alterao da norma antes do primeiro dispositivo`,\n    });\n  }\n  if (dispositivo !== null && (isDispositivoGenerico(dispositivo) || isAgrupadorGenerico(dispositivo))) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `No foi possvel validar a natureza deste dispositivo com base na legislao vigente`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    dispositivo.pai &&\n    !isAgrupadorGenerico(dispositivo.pai) &&\n    !isOmissis(dispositivo) &&\n    !isDispositivoGenerico(dispositivo) &&\n    !dispositivo.tiposPermitidosPai!.includes(dispositivo.pai.tipo)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} somente poderia pertencer a ${dispositivo.tiposPermitidosPai!.join(', ')}`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    !isDispositivoGenerico &&\n    dispositivo.filhos.length > 0 &&\n    (dispositivo.tiposPermitidosFilhos!.length === 0 || dispositivo.filhos.filter(filho => !dispositivo.tiposPermitidosFilhos!.includes(filho.tipo)).length > 0)\n  ) {\n    const relacaoFilhos =\n      dispositivo.tiposPermitidosFilhos!.length === 0 ? 'no poderia possuir filhos' : `somente poderia possuir ${dispositivo.tiposPermitidosFilhos!.join(', ')}`;\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: `Segundo a Legislao vigente, ${dispositivo.descricao} ${relacaoFilhos}`,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    getDispositivoAnterior(dispositivo) !== undefined &&\n    isOmissis(getUltimoFilho(getDispositivoAnterior(dispositivo)!) || isOmissis(getDispositivoAnterior(dispositivo)!))\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No pode haver mais de uma linha pontilhada sequencialmente',\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    dispositivo.pai! &&\n    isOmissis(dispositivo) &&\n    isCaput(dispositivo.pai!) &&\n    getDispositivoPosterior(dispositivo) === undefined &&\n    TipoDispositivo.omissis.tipo === dispositivo.pai!.pai!.filhos.filter(f => !isCaput(f.pai!))[0]?.tipo\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    dispositivo.pai! &&\n    !getDispositivoPosterior(dispositivo) &&\n    dispositivo.pai &&\n    getDispositivoPosterior(isCaput(dispositivo.pai) ? dispositivo.pai.pai! : dispositivo.pai) !== undefined &&\n    isOmissis(getDispositivoPosterior(isCaput(dispositivo.pai) ? dispositivo.pai.pai! : dispositivo.pai)!)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    dispositivo.pai &&\n    getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined &&\n    isOmissis(getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo)!) &&\n    isDispositivosSequenciaisMesmoPai(dispositivo, getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo)!)\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: AutoFix.OMISSIS_SEQUENCIAIS,\n      fix: true,\n    });\n  }\n\n  if (\n    dispositivo !== null &&\n    isOmissis(dispositivo) &&\n    getDispositivoAnterior(dispositivo) !== undefined &&\n    isOriginal(getDispositivoAnterior(dispositivo)!) &&\n    getDispositivoAnterior(dispositivo)!.numero !== undefined &&\n    getDispositivoPosterior(dispositivo) !== undefined &&\n    isOriginal(getDispositivoPosterior(dispositivo)!) &&\n    getDispositivoPosterior(dispositivo)!.numero !== undefined &&\n    comparaNumeracao('' + (+getDispositivoAnterior(dispositivo)!.numero! + 1), getDispositivoPosterior(dispositivo)!.numero) === 0\n  ) {\n    mensagens.push({\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No pode haver linha pontilhada entre dispositivos originais sequenciais',\n    });\n  }\n\n  return mensagens;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { isIncisoCaput } from '../../dispositivo/tipo';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\n\nexport class DispositivoSuprimido implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const a: ElementoAction[] = [];\n\n    if ((isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!).situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      a.push(...acoes.filter(acao => acao.descricao.startsWith('Adicionar') && dispositivo.tipo === acao.tipo));\n      a.push(restaurarElementoAction);\n    }\n\n    return a;\n  }\n}\n","import { DescricaoSituacao } from './../../dispositivo/situacao';\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArticulacao, isCaput, isOmissis } from '../../dispositivo/tipo';\nimport { getDispositivosAnterioresMesmoTipo, isUnicoMesmoTipo } from '../hierarquia/hierarquiaUtil';\nimport { isArtigo, isParagrafo } from './../../dispositivo/tipo';\nimport { getArticulacao, isDispositivoAlteracao, irmaosMesmoTipo } from './../hierarquia/hierarquiaUtil';\n\nexport const buildHref = (dispositivo: Dispositivo): string | undefined => {\n  if (isArticulacao(dispositivo)) {\n    return 'cpt_alt1';\n  }\n\n  if (dispositivo.tagId) {\n    return (\n      dispositivo.tagId +\n      (isCaput(dispositivo)\n        ? ''\n        : isOmissis(dispositivo)\n        ? calculaSequencialOmissis(dispositivo)\n        : dispositivo.numero\n        ? (isArtigo(dispositivo) || isParagrafo(dispositivo)) && dispositivo.numero === '1' && isUnicoMesmoTipo(dispositivo)\n          ? '1u'\n          : dispositivo.numero!\n        : `[sn:${dispositivo.uuid}]`)\n    );\n  }\n\n  return undefined;\n};\n\nfunction calculaSequencialOmissis(dispositivo: Dispositivo): number {\n  if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    // Diferencia omissis de incisos de caput de omissis de pargrafo\n    const irmaos = irmaosMesmoTipo(dispositivo).filter(d => d.pai === dispositivo.pai);\n    // Dispositivos no adicionados primeiro.\n    irmaos.sort((d1, d2) => {\n      const s1 = d1.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ? 1 : 0;\n      const s2 = d2.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ? 1 : 0;\n      const order = s1 - s2;\n      return order ? order : dispositivo.pai!.indexOf(d1) - dispositivo.pai!.indexOf(d2);\n    });\n    return irmaos.indexOf(dispositivo) + 1;\n  }\n  return getDispositivosAnterioresMesmoTipo(dispositivo).length + 1;\n}\n\nconst buildHierarquia = (dispositivo: Dispositivo, idArray: string[] = []): void => {\n  if (isArticulacao(dispositivo) && dispositivo.pai === undefined) {\n    return;\n  }\n\n  const href = buildHref(dispositivo);\n\n  if (href) {\n    idArray.unshift(href);\n  }\n\n  // ID de artigo e de dispositivos de artigo no incluem ids de agrupadores de artigo.\n  if (isArtigo(dispositivo)) {\n    if (isDispositivoAlteracao(dispositivo)) {\n      // Pula agrupadores de artigo dentro do bloco de alterao\n      const alteracao = getArticulacao(dispositivo);\n      buildHierarquia(alteracao, idArray);\n    }\n    return;\n  }\n\n  buildHierarquia(dispositivo.pai!, idArray);\n};\n\nexport const buildId = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_');\n};\n\nexport const buildIdAlteracao = (dispositivo: Dispositivo): string => {\n  const idArray = [];\n\n  buildHierarquia(dispositivo, idArray);\n\n  return idArray.join('_') + '_alt1';\n};\n\nexport const buildIdCaputEAlteracao = (dispositivo: Dispositivo): void => {\n  const caput = (dispositivo as Artigo).caput;\n  caput && (caput.id = buildId(caput));\n  dispositivo.alteracoes && (dispositivo.alteracoes.id = buildId(dispositivo.alteracoes));\n};\n\n/* export const gHref = (dispositivo: Dispositivo): string => {\n  if (!dispositivo.numero && dispositivo.rotulo) {\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n  }\n  return dispositivo.numero ?? '';\n}; */\n","import { isEmendaArtigoOndeCouber, isAdicionado, getDispositivoAnteriorNaSequenciaDeLeitura } from './../lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isCaput, isDispositivoDeArtigo, isDispositivoGenerico, isIncisoCaput, isOmissis, isParagrafo } from '../dispositivo/tipo';\nimport { validaDispositivo } from '../lexml/dispositivo/dispositivoValidator';\nimport {\n  buildListaDispositivos,\n  findDispositivoByUuid,\n  getArticulacao,\n  getDispositivoAnterior,\n  getDispositivosPosteriores,\n  hasFilhos,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isOriginal,\n  verificaNaoPrecisaInformarSituacaoNormaVigente,\n  getDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n  getTiposAgrupadoresQuePodemSerInseridosAntes,\n  getTiposAgrupadoresQuePodemSerInseridosDepois,\n  hasEmenta,\n} from '../lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../lexml/situacao/dispositivoAdicionado';\nimport { DispositivoSuprimido } from '../lexml/situacao/dispositivoSuprimido';\nimport { TipoDispositivo } from '../lexml/tipo/tipoDispositivo';\nimport { buildId } from '../lexml/util/idUtil';\nimport { Elemento, Referencia } from './elemento';\n\nexport const isValid = (elemento?: Referencia): void => {\n  if (elemento === undefined || elemento.uuid === undefined) {\n    throw new Error('No foi informado um elemento vlido');\n  }\n};\n\nexport const isElementoDispositivoAlteracao = (elemento: Partial<Elemento>): boolean => {\n  return elemento.hierarquia?.pai?.uuidAlteracao !== undefined || elemento.uuidAlteracao !== undefined;\n};\n\nconst getNivel = (dispositivo: Dispositivo, atual = 0): number => {\n  if (dispositivo?.pai === undefined || isAgrupador(dispositivo)) {\n    return atual;\n  }\n\n  if (isArtigo(dispositivo)) {\n    return isDispositivoAlteracao(dispositivo) ? ++atual : atual;\n  }\n\n  atual = isDispositivoCabecaAlteracao(dispositivo?.pai) ? atual + 2 : ++atual;\n  return isArtigo(dispositivo?.pai) ? atual : getNivel(dispositivo.pai, atual);\n};\n\nconst buildElementoPai = (dispositivo: Dispositivo): Referencia | undefined => {\n  const pai = dispositivo.pai ? (isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai) : undefined;\n  const articulacaoAlteracao = pai && isDispositivoAlteracao(dispositivo) ? getArticulacao(dispositivo).pai : undefined;\n  return {\n    tipo: pai?.tipo,\n    uuid: pai?.uuid,\n    uuid2: pai?.uuid2,\n    lexmlId: pai?.id,\n    uuidAlteracao: articulacaoAlteracao?.uuid,\n    uuid2Alteracao: articulacaoAlteracao?.uuid2,\n    existeNaNormaAlterada: pai && isAdicionado(pai) ? (pai.situacao as DispositivoAdicionado).existeNaNormaAlterada : undefined,\n    descricaoSituacao: pai?.situacao?.descricaoSituacao,\n  };\n};\n\nexport const createElemento = (dispositivo: Dispositivo, acoes = true, procurarElementoAnterior = false): Elemento => {\n  const pai = dispositivo.pai!;\n  const fechaAspas = dispositivo.tipo !== 'Articulacao' && isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo);\n  let notaAlteracao: string | undefined;\n  let podeEditarNotaAlteracao: boolean | undefined;\n\n  if (fechaAspas) {\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n    notaAlteracao = cabecaAlteracao.notaAlteracao;\n    podeEditarNotaAlteracao = cabecaAlteracao.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  }\n\n  let elementoAnteriorNaSequenciaDeLeitura: Elemento | undefined;\n\n  if (procurarElementoAnterior) {\n    let dispositivoAnteriorNaSequenciaDeLeitura = getDispositivoAnteriorNaSequenciaDeLeitura(dispositivo);\n    if (dispositivoAnteriorNaSequenciaDeLeitura) {\n      if (\n        isArticulacao(dispositivoAnteriorNaSequenciaDeLeitura) &&\n        !isArticulacaoAlteracao(dispositivoAnteriorNaSequenciaDeLeitura) &&\n        hasEmenta(dispositivoAnteriorNaSequenciaDeLeitura)\n      ) {\n        dispositivoAnteriorNaSequenciaDeLeitura = (dispositivoAnteriorNaSequenciaDeLeitura as Articulacao).projetoNorma!.ementa!;\n      }\n\n      elementoAnteriorNaSequenciaDeLeitura = createElemento(\n        isCaput(dispositivoAnteriorNaSequenciaDeLeitura) || isArticulacaoAlteracao(dispositivoAnteriorNaSequenciaDeLeitura)\n          ? dispositivoAnteriorNaSequenciaDeLeitura.pai!\n          : dispositivoAnteriorNaSequenciaDeLeitura\n      );\n    }\n  }\n\n  return {\n    tipo: dispositivo.tipo,\n    nivel: getNivel(dispositivo),\n    agrupador: isAgrupador(dispositivo),\n    hierarquia: {\n      pai: pai ? buildElementoPai(dispositivo) : undefined,\n      posicao: pai ? pai.indexOf(dispositivo) : undefined,\n      numero: dispositivo.numero,\n    },\n    editavel: isArticulacao(dispositivo) || dispositivo.situacao instanceof DispositivoSuprimido ? false : true,\n    sendoEditado: false,\n    uuid: dispositivo.uuid,\n    uuid2: dispositivo.uuid2,\n    lexmlId: (dispositivo.numero && buildId(dispositivo)) || dispositivo.id,\n    numero: dispositivo.numero,\n    rotulo: dispositivo.rotulo ?? '',\n    conteudo: {\n      texto: dispositivo.texto,\n    },\n    norma: dispositivo.alteracoes?.base,\n    existeNaNormaAlterada: isAdicionado(dispositivo) ? (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada : undefined,\n    index: 0,\n    acoesPossiveis: acoes ? dispositivo.getAcoesPossiveis(dispositivo) : [],\n    descricaoSituacao: dispositivo.situacao?.descricaoSituacao,\n    mensagens: isOriginal(dispositivo) ? [] : dispositivo.mensagens,\n    abreAspas: isDispositivoCabecaAlteracao(dispositivo),\n    fechaAspas,\n    notaAlteracao,\n    dispositivoAlteracao: isDispositivoAlteracao(dispositivo),\n    tipoOmissis: dispositivo.tipo === 'Omissis' ? tipoOmissis(pai) : undefined,\n    podeEditarNotaAlteracao,\n    tiposAgrupadoresQuePodemSerInseridosAntes: getTiposAgrupadoresQuePodemSerInseridosAntes(dispositivo),\n    tiposAgrupadoresQuePodemSerInseridosDepois: getTiposAgrupadoresQuePodemSerInseridosDepois(dispositivo),\n    artigoDefinido: dispositivo.artigoDefinido,\n    elementoAnteriorNaSequenciaDeLeitura,\n    manterNoMesmoGrupoDeAspas: isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo) && isAgrupador(dispositivo.pai!) && !isArticulacaoAlteracao(dispositivo.pai!),\n    ultimoFilhoDireto:\n      isAgrupador(dispositivo) && isDispositivoAlteracao(dispositivo) && dispositivo.filhos.length ? createElemento(dispositivo.filhos[dispositivo.filhos.length - 1]) : undefined,\n  };\n};\n\nexport const createElementoValidado = (dispositivo: Dispositivo, procurarElementoAnterior = false): Elemento => {\n  const el = createElemento(dispositivo, true, procurarElementoAnterior);\n  el.mensagens = validaDispositivo(dispositivo);\n\n  return el;\n};\n\nexport const createElementos = (elementos: Elemento[], dispositivo: Dispositivo, validados = false, procurarElementoAnterior = false): void => {\n  const fnCreateElemento = validados ? createElementoValidado : createElemento;\n\n  if (dispositivo.filhos === undefined) {\n    return;\n  }\n  dispositivo.filhos.forEach(d => {\n    const el = fnCreateElemento(d, true, procurarElementoAnterior);\n\n    if (isArtigo(d)) {\n      el.conteudo!.texto = (d as Artigo).caput!.texto;\n    }\n    elementos.push(el);\n\n    if (isArtigo(d) && (d as Artigo).hasAlteracao()) {\n      (d as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(fnCreateElemento(f, true, procurarElementoAnterior));\n        createElementos(elementos, f, validados, procurarElementoAnterior);\n      });\n    }\n    createElementos(elementos, d, validados, procurarElementoAnterior);\n  });\n};\n\nexport const getElementos = (dispositivo: Dispositivo, validados = false, procurarElementoAnterior = false): Elemento[] => {\n  const fnCreateElemento = validados ? createElementoValidado : createElemento;\n\n  const elementos: Elemento[] = [];\n  elementos.push(fnCreateElemento(dispositivo, true, procurarElementoAnterior));\n\n  if (isArticulacao(dispositivo) && !isDispositivoAlteracao(dispositivo) && hasEmenta(dispositivo) && !isEmendaArtigoOndeCouber(dispositivo)) {\n    elementos.push(fnCreateElemento((dispositivo as Articulacao).projetoNorma!.ementa!, true));\n  }\n\n  if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n    if (isArtigo(dispositivo) && (dispositivo as Artigo).hasAlteracao()) {\n      (dispositivo as Artigo).alteracoes?.filhos.forEach(f => {\n        elementos.push(fnCreateElemento(f, true, procurarElementoAnterior));\n        createElementos(elementos, f, validados, procurarElementoAnterior);\n      });\n    }\n  }\n\n  createElementos(elementos, dispositivo, validados, procurarElementoAnterior);\n\n  return elementos;\n};\n\nexport const getArticulacaoFromElemento = (articulacao: Articulacao, elemento: Elemento | Referencia): Articulacao => {\n  if (!isElementoDispositivoAlteracao(elemento) || isArticulacaoAlteracao(articulacao)) {\n    return articulacao;\n  }\n\n  return (\n    getDispositivoFromElemento(articulacao!, {\n      uuid: (elemento as Elemento).hierarquia ? (elemento as Elemento).hierarquia!.pai!.uuidAlteracao : elemento.uuidAlteracao,\n    })?.alteracoes ?? articulacao\n  );\n};\n\nexport const getDispositivoFromElemento = (art: Articulacao, referencia: Partial<Elemento>, ignorarElementoAlteracao = false): Dispositivo | undefined => {\n  if (referencia.tipo === 'Ementa') {\n    return art.projetoNorma?.ementa;\n  }\n\n  const articulacao = getArticulacaoFromElemento(art, referencia);\n\n  if (!ignorarElementoAlteracao && isElementoDispositivoAlteracao(referencia)) {\n    const ref = articulacao.pai\n      ? articulacao.pai\n      : getDispositivoFromElemento(articulacao, {\n          uuid: referencia.hierarquia ? referencia.hierarquia!.pai!.uuidAlteracao : referencia.uuidAlteracao,\n        });\n\n    if (!ref?.alteracoes) {\n      return undefined;\n    }\n\n    return ref.alteracoes?.filhos\n      .flatMap(f => {\n        const lista: Dispositivo[] = [];\n        buildListaDispositivos(f, lista);\n        return lista;\n      })\n      .filter((el: Referencia) => el.uuid === referencia.uuid)[0];\n  }\n\n  if (referencia?.tipo === TipoDispositivo.artigo.tipo) {\n    const artigo = articulacao.filhos!.find(a => a.uuid === referencia.uuid);\n    if (artigo) {\n      return artigo;\n    }\n  }\n\n  const dispositivo = referencia?.tipo === TipoDispositivo.articulacao.tipo || referencia?.uuid === undefined ? articulacao : findDispositivoByUuid(articulacao, referencia.uuid!);\n\n  if (dispositivo === null) {\n    return undefined;\n  }\n  return dispositivo;\n};\n\nconst criaElementoValidadoSeNecessario = (validados: Elemento[], dispositivo: Dispositivo, incluiAcoes?: boolean): void => {\n  const mensagens = validaDispositivo(dispositivo);\n\n  if (mensagens.length > 0 || (dispositivo.mensagens && dispositivo.mensagens?.length > 0)) {\n    dispositivo.mensagens = mensagens;\n    const elemento = createElemento(dispositivo, incluiAcoes);\n    elemento.mensagens = validaDispositivo(dispositivo);\n    validados.push(elemento);\n  }\n};\n\nexport const criaListaElementosAfinsValidados = (dispositivo: Dispositivo | undefined, incluiDispositivo = true): Elemento[] => {\n  const validados: Elemento[] = [];\n\n  if (!dispositivo) {\n    return [];\n  }\n  if (isDispositivoAlteracao(dispositivo) && hasFilhos(dispositivo) && dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).length > 0) {\n    criaElementoValidadoSeNecessario(validados, dispositivo);\n    dispositivo.filhos.filter(d => d.tipo === TipoDispositivo.omissis.tipo).forEach(o => criaElementoValidadoSeNecessario(validados, o));\n  }\n\n  if (isDispositivoDeArtigo(dispositivo) || isDispositivoGenerico(dispositivo)) {\n    const parent = isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!;\n    criaElementoValidadoSeNecessario(validados, parent);\n    if (isAgrupador(parent)) {\n      criaElementoValidadoSeNecessario(validados, isIncisoCaput(dispositivo) ? dispositivo.pai!.pai! : dispositivo.pai!);\n    }\n    irmaosMesmoTipo(dispositivo).forEach(filho => {\n      !incluiDispositivo && filho === dispositivo ? undefined : criaElementoValidadoSeNecessario(validados, filho, true);\n    });\n  } else if (incluiDispositivo && !isArticulacao(dispositivo) && !isAgrupador(dispositivo)) {\n    criaElementoValidadoSeNecessario(validados, dispositivo, true);\n  }\n\n  const anterior = getDispositivoAnterior(dispositivo);\n  if (anterior !== undefined && isOmissis(anterior)) {\n    criaElementoValidadoSeNecessario(validados, anterior, false);\n  }\n\n  return validados;\n};\n\nexport const listaDispositivosRenumerados = (dispositivo: Dispositivo): Dispositivo[] => {\n  return (isArtigo(dispositivo) || isParagrafo(dispositivo)) && irmaosMesmoTipo(dispositivo).length <= 2\n    ? irmaosMesmoTipo(dispositivo).filter(d => dispositivo.uuid !== d.uuid)\n    : getDispositivosPosteriores(dispositivo, true).filter(d => d.tipo === dispositivo.tipo);\n};\n\nexport const buildListaElementosRenumerados = (dispositivo: Dispositivo): Elemento[] => {\n  return listaDispositivosRenumerados(dispositivo).map(d => {\n    d.mensagens = validaDispositivo(d);\n    const el = createElemento(d);\n    return el;\n  });\n};\n\nexport const validaFilhos = (validados: Elemento[], filhos: Dispositivo[]): void => {\n  filhos.forEach(filho => {\n    criaElementoValidadoSeNecessario(validados, filho);\n    filhos ? validaFilhos(validados, filho.filhos) : undefined;\n  });\n};\n\nexport const hasElementoAscendenteAdicionado = (articulacao: Articulacao, referencia: Partial<Elemento>): boolean => {\n  const d = getDispositivoFromElemento(articulacao, referencia);\n\n  return d ? verificaNaoPrecisaInformarSituacaoNormaVigente(d) : false;\n};\n\nexport const tipoOmissis = (pai: Dispositivo | undefined): string => {\n  switch (pai?.tipo) {\n    case 'Caput':\n      return 'inciso-caput';\n    case 'Inciso':\n      return 'alinea';\n    case 'Alinea':\n      return 'item';\n    case 'Artigo':\n      return 'paragrafo';\n    case 'Paragrafo':\n      return 'inciso-paragrafo';\n    default:\n      return '';\n  }\n};\n\nexport const podeAdicionarAtributoDeExistencia = (elemento: Elemento): boolean => {\n  if (\n    !elemento.dispositivoAlteracao ||\n    elemento.existeNaNormaAlterada === undefined ||\n    elemento.tipo === 'Omissis' ||\n    elemento.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n  ) {\n    return false;\n  } else {\n    return elemento.hierarquia?.pai?.existeNaNormaAlterada ?? true;\n  }\n};\n","import { Alerta } from '../model/alerta/alerta';\nimport { Articulacao } from '../model/dispositivo/dispositivo';\nimport { Elemento } from '../model/elemento';\nimport { Mensagem } from '../model/lexml/util/mensagem';\nimport { Revisao } from '../model/revisao/revisao';\nimport { Usuario } from '../model/revisao/usuario';\n\nexport enum StateType {\n  ArticulacaoAtualizada = 'ArticulacaoAtualizada',\n  ComandoEmendaGerado = 'ComandoEmendaGerado',\n  DocumentoCarregado = 'DocumentoCarregado',\n  InformarDadosAssistente = 'InformarDadosAssistente',\n  InformarNorma = 'InformarNorma',\n  ElementoModificado = 'ElementoModificado',\n  ElementoIncluido = 'ElementoIncluido',\n  ElementoRemovido = 'ElementoRemovido',\n  ElementoRenumerado = 'ElementoRenumerado',\n  ElementoRestaurado = 'ElementoRestaurado',\n  ElementoSuprimido = 'ElementoSuprimido',\n  ElementoValidado = 'ElementoValidado',\n  ElementoSelecionado = 'ElementoSelecionado',\n  ElementoMarcado = 'ElementoMarcado',\n  SituacaoElementoModificada = 'SituacaoElementoModificada',\n  AtualizacaoAlertas = 'AtualizacaoAlertas',\n  ElementoReferenciado = 'ElementoReferenciado',\n  RevisaoAtivada = 'RevisaoAtivada',\n  RevisaoDesativada = 'RevisaoDesativada',\n  AtualizaUsuario = 'AtualizaUsuario',\n  RevisaoAceita = 'RevisaoAceita',\n  RevisaoRejeitada = 'RevisaoRejeitada',\n  RevisaoAdicionalRejeitada = 'RevisaoAdicionalRejeitada',\n  AdicionarAnexoEmendaTextoLivre = 'AdicionarAnexoEmendaTextoLivre',\n  RemoverAnexoEmendaTextoLivre = 'RemoverAnexoEmendaTextoLivre',\n}\nexport interface StateEvent {\n  stateType: StateType;\n  referencia?: Elemento;\n  pai?: Elemento;\n  moverParaFimLinha?: boolean;\n  elementos?: Elemento[];\n}\n\nexport interface State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n    alertas?: Alerta[];\n  };\n  emRevisao?: boolean;\n  usuario?: Usuario;\n  revisoes?: Revisao[];\n  numEventosPassadosAntesDaRevisao?: number;\n}\n\nexport const createState = (state: any, events: StateEvent[], past: StateEvent[], present: StateEvent[], future: StateEvent[]): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: undefined,\n    past: past,\n    present: present,\n    future: future,\n    ui: {\n      events,\n    },\n  };\n};\n\nexport class DefaultState implements State {\n  articulacao?: Articulacao;\n  modo: string | undefined;\n  past?: StateEvent[];\n  present: StateEvent[] = [];\n  future?: StateEvent[];\n  ui?: {\n    events: StateEvent[];\n    message?: Mensagem;\n    alertas?: Alerta[];\n  };\n}\n","import { Articulacao } from '../../../model/dispositivo/dispositivo';\nimport { getElementos } from '../../../model/elemento/elementoUtil';\nimport { State, StateType } from '../../state';\n\nexport const load = (articulacao: Articulacao, modo?: string): State => {\n  const elementos = getElementos(articulacao);\n  return {\n    articulacao,\n    modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [\n        {\n          stateType: StateType.DocumentoCarregado,\n          elementos: elementos,\n        },\n      ],\n      alertas: [],\n    },\n    revisoes: [],\n    numEventosPassadosAntesDaRevisao: 0,\n  };\n};\n","import { State } from '../../state';\nimport { load } from './loadArticulacao';\n\nexport const abreArticulacao = (state: any, action: any): State => {\n  return load(action.articulacao!, action.classificacao);\n};\n","export interface Counter {\n  next(): number;\n}\n\nexport function generateId(init = 0): Counter {\n  return {\n    next: (): number => ++init,\n  };\n}\n\nexport const Counter = generateId();\n","/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { Mensagem } from '../lexml/util/mensagem';\n\nexport interface Validacao {\n  mensagens?: Mensagem[];\n}\n\nexport function ValidacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Validacao {\n    mensagens: Mensagem[] = [];\n  };\n}\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\nimport { ADICIONAR_ELEMENTO } from './adicionarElementoAction';\n\nexport const INICIAR_BLOCO = 'INICIAR_BLOCO';\nexport const FINALIZAR_BLOCO = 'FINALIZAR_BLOCO';\n\nclass BlocoAlteracao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  isDispositivoAlteracao = true;\n  constructor(private tipoAcao: string) {\n    this.descricao = tipoAcao === INICIAR_BLOCO ? `Adicionar alterao de norma` : `Finalizar alterao de norma`;\n  }\n\n  execute(atual: Referencia, conteudo?: string, tipo?: Referencia, hasDesmembramento = false): any {\n    return {\n      type: ADICIONAR_ELEMENTO,\n      subType: this.tipoAcao,\n      atual,\n      novo: {\n        tipo,\n        isDispositivoAlteracao: this.isDispositivoAlteracao,\n        conteudo: {\n          texto: conteudo,\n        },\n      },\n      hasDesmembramento,\n    };\n  }\n}\nexport const iniciarBlocoAlteracao = new BlocoAlteracao(INICIAR_BLOCO);\nexport const finalizarBlocoAlteracao = new BlocoAlteracao(FINALIZAR_BLOCO);\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoNaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    get alteracoes(): Alteracoes | undefined {\n      return undefined;\n    }\n    hasAlteracao(): boolean {\n      return false;\n    }\n  };\n}\n","export enum TipoConteudo {\n  ConteudoTexto = 'Contedo de Texto',\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    texto = '';\n  };\n}\n","import { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport {\n  getArticulacao,\n  getDispositivoAnterior,\n  getProximoArtigoAnterior,\n  isAntesDoPrimeiroDispositivoOriginal,\n  isDispositivoAlteracao,\n  podeRenumerarFilhosAutomaticamente,\n} from './hierarquiaUtil';\n\nexport function HierarquiaAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia && this.filhos.indexOf(referencia) >= 0) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n      isArtigo(filho) ? getArticulacao(filho).addArtigo(filho, referencia) : null;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      filho.pai = this as unknown as Dispositivo;\n      this.filhos.splice(posicao, 0, filho);\n      if (isArtigo(filho)) {\n        const anterior = getDispositivoAnterior(filho) ?? getProximoArtigoAnterior(filho.pai!.pai!, filho.pai!);\n        const articulacao = getArticulacao(filho);\n        const pos = anterior ? articulacao.indexOfArtigo(anterior as Artigo) + 1 : 0;\n        articulacao.addArtigoOnPosition(filho, pos);\n      }\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n      isArtigo(filho) ? (getArticulacao(filho) as Articulacao).removeArtigo(filho as Artigo) : null;\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        return;\n      }\n      this.filhos\n        .filter(\n          f =>\n            (isDispositivoAlteracao(f) && isAntesDoPrimeiroDispositivoOriginal(f)) ||\n            f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n            f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        )\n        .filter(f => !isArtigo(f))\n        .forEach(filho => {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        });\n      (getArticulacao(this.filhos[0]) as Articulacao)?.renumeraArtigos();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isArtigo } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { getDispositivoAndFilhosAsLista, isAntesDoPrimeiroDispositivoOriginal, isDispositivoAlteracao, podeRenumerarFilhosAutomaticamente } from './hierarquiaUtil';\n\nexport function HierarquiaDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _filhos?: Dispositivo[];\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.filhos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.filhos.push(filho) : this.filhos.splice(posicao, 0, filho);\n      } else {\n        this.filhos.push(filho);\n      }\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      filho.pai = this as unknown as Dispositivo;\n      this.filhos.splice(posicao, 0, filho);\n    }\n\n    hasArtigos(): boolean {\n      return this.filhos.filter(f => isArtigo(f)).length > 0;\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.filhos.indexOf(filho) === this.filhos.length - 1;\n    }\n\n    get filhos(): Dispositivo[] {\n      this._filhos = this._filhos ?? [];\n      return this._filhos;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return this.filhos.indexOf(filho);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      this._filhos = this.filhos.filter(f => f.uuid !== filho.uuid);\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        return;\n      }\n      this.filhos.forEach(filho => {\n        if (\n          (isDispositivoAlteracao(filho) && isAntesDoPrimeiroDispositivoOriginal(filho)) ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        ) {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          const novoId = buildId(filho);\n          if (filho.id !== novoId) {\n            getDispositivoAndFilhosAsLista(filho).forEach(d => (d.id = buildId(d)));\n          }\n        } else {\n          //filho.createRotulo(filho);\n        }\n      });\n    }\n  };\n}\n","// import { TipoDispositivo } from './../tipo/tipoDispositivo';\nimport { addSpaceRegex, primeiraLetraMaiuscula, StringBuilder } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { irmaosMesmoTipo, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport {\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaRomano,\n  converteNumeroRomanoParaArabico,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoValida,\n  isNumeracaoZero,\n  isRomano,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoAgrupador<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAgrupadorLcp95';\n    numero?: string;\n    rotulo?: string;\n    informouAgrupadorUnico = false;\n    private getNomeAgrupadorUnico(dispositivo: Dispositivo): string {\n      const label = `${dispositivo.descricao} nic${dispositivo.artigoDefinido}`;\n      return !['Secao', 'Subsecao'].includes(dispositivo.tipo) ? label.toUpperCase() : label;\n    }\n\n    private normalizaNumeracao(numero: string): string {\n      const numeracao = numero.split(' ')[1] ?? numero;\n      const num = /[CDILMVX]+(-[a-zA-Z]+)*/.exec(numeracao);\n      return num ? num[0] : addSpaceRegex(numeracao).trim().replace(/-$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      if (!rotulo || ['parte', 'livro', 'ttulo', 'captulo', 'seo', 'subseo'].some(s => s === rotulo.toLowerCase())) {\n        return;\n      }\n      this.informouAgrupadorUnico = /.*[u]nic[ao]/i.test(rotulo);\n      if (this.informouAgrupadorUnico) {\n        this.numero = '1';\n      } else {\n        const numAux = this.normalizaNumeracao(rotulo!);\n        if (!numAux) {\n          this.numero = undefined;\n          return;\n        }\n        const temp = trataNumeroAndComplemento(numAux, isNumeracaoZero(rotulo) ? null : converteNumeroRomanoParaArabico, converteLetrasComplementoParaNumero);\n        this.numero = isNumeracaoValida(temp) ? temp : undefined;\n      }\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      // const prefixo = dispositivo.descricao === undefined ? dispositivo.name ?? '' : dispositivo.descricao.toLocaleUpperCase();\n      const prefixo =\n        dispositivo.descricao === undefined\n          ? dispositivo.name ?? ''\n          : ['Secao', 'Subsecao'].includes(dispositivo.tipo)\n          ? dispositivo.descricao\n          : dispositivo.descricao.toLocaleUpperCase();\n\n      if (\n        this.numero === undefined ||\n        (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          (dispositivo.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n          dispositivo.pai?.tipo === 'Articulacao')\n      ) {\n        this.rotulo = prefixo; //TipoDispositivo[dispositivo.tipo.toLowerCase()].descricao?.toUpperCase() ?? dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = prefixo + ' ' + this.numero;\n      } else if (dispositivo.isDispositivoAlteracao && isDispositivoCabecaAlteracao(dispositivo)) {\n        this.rotulo = this.informouAgrupadorUnico\n          ? this.getNomeAgrupadorUnico(dispositivo)\n          : prefixo +\n            ' ' +\n            trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined);\n      } else {\n        irmaosMesmoTipo(dispositivo).length === 1 && !(dispositivo.pai?.situacao as DispositivoAdicionado).existeNaNormaAlterada\n          ? (this.rotulo = this.getNomeAgrupadorUnico(dispositivo))\n          : (this.rotulo =\n              prefixo +\n              ' ' +\n              trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined));\n      }\n    }\n\n    setMaiusculaPrimeiraLetraDaDescricao(s: string): string {\n      const partes = s.split('-');\n      const [main, ...remaining] = partes!;\n      const palavras = main.toLocaleLowerCase().split(' ');\n\n      for (let i = 0; i < palavras.length; i++) {\n        palavras[i] = isRomano(palavras[i]) ? palavras[1].toUpperCase() : primeiraLetraMaiuscula(palavras[i]);\n      }\n\n      return palavras.join(' ') + (remaining.length > 0 ? '-' + remaining.join('') : '');\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerado]';\n      }\n      const numeracao = this.rotulo!.trim().replace(/^.+? +/, '');\n      return numeracao.toLowerCase().startsWith('nic') ? this.setMaiusculaPrimeiraLetraDaDescricao(numeracao) : numeracao;\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      const sb = new StringBuilder();\n\n      sb.append(this.setMaiusculaPrimeiraLetraDaDescricao(this.rotulo!));\n\n      return sb.toString();\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoIndisponivel<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return '';\n    }\n  };\n}\n","import { Referencia } from '../../elemento';\nimport { TEXTO_OMISSIS } from '../conteudo/textoOmissis';\nimport { atualizarTextoElementoAction } from './atualizarTextoElementoAction';\nimport { ElementoAction } from './index';\n\nexport const ADICIONAR_TEXTO_OMISSIS = 'ADICIONAR_TEXTO_OMISSIS';\n\nexport class AdicionarTextoOmissisAction implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Linha pontilhada';\n  }\n\n  execute(atual: Referencia): any {\n    atual.conteudo!.texto = TEXTO_OMISSIS;\n    return atualizarTextoElementoAction.execute(atual);\n  }\n}\n\nexport const adicionarTextoOmissisAction = new AdicionarTextoOmissisAction();\n","import { Referencia } from '../../elemento';\nimport { atualizarTextoElementoAction } from './atualizarTextoElementoAction';\nimport { ElementoAction } from './index';\n\nexport const REMOVER_TEXTO_OMISSIS = 'REMOVER_TEXTO_OMISSIS';\n\nexport class RemoverTextoOmissisAction implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Remover linha pontilhada';\n  }\n\n  execute(atual: Referencia): any {\n    atual.conteudo!.texto = '';\n    return atualizarTextoElementoAction.execute(atual);\n  }\n}\n\nexport const removerTextoOmissisAction = new RemoverTextoOmissisAction();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const ACEITAR_REVISAO = 'ACEITAR_REVISAO';\n\nexport class AceitarRevisao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Aceitar reviso';\n  }\n\n  execute(elemento: Elemento, revisao: any): any {\n    return {\n      type: ACEITAR_REVISAO,\n      elemento,\n      revisao,\n    };\n  }\n}\n\nexport const aceitarRevisaoAction = new AceitarRevisao();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const REJEITAR_REVISAO = 'REJEITAR_REVISAO';\n\nexport class RejeitarRevisao implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Rejeitar reviso';\n  }\n\n  execute(elemento: Elemento, revisao: any): any {\n    return {\n      type: REJEITAR_REVISAO,\n      elemento,\n      revisao,\n    };\n  }\n}\n\nexport const rejeitarRevisaoAction = new RejeitarRevisao();\n","import { ElementoAction } from '.';\nimport { Elemento } from '../../elemento/elemento';\n\nexport const EXIBIR_DIFERENCA = 'EXIBIR_DIFERENCA';\n\nexport class ExibirDiferenca implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Exibir diferenas';\n  }\n\n  execute(elemento: Elemento): any {\n    return {\n      type: EXIBIR_DIFERENCA,\n      elemento,\n    };\n  }\n}\n\nexport const exibirDiferencaAction = new ExibirDiferenca();\n","import { adicionarAgrupadorArtigoAction, adicionarAgrupadorArtigoAntesAction } from './adicionarAgrupadorArtigoAction';\nimport { atualizarNotaAlteracaoAction } from './atualizarNotaAlteracaoAction';\nimport { Referencia } from '../../elemento';\nimport {\n  adicionarAlinea,\n  adicionarAlineaAntes,\n  adicionarAlineaDepois,\n  adicionarAlineaFilho,\n  adicionarArtigo,\n  adicionarArtigoAntes,\n  adicionarArtigoDepois,\n  adicionarElementoAction,\n  adicionarInciso,\n  adicionarIncisoAntes,\n  adicionarIncisoDepois,\n  adicionarIncisoFilho,\n  adicionarItem,\n  adicionarItemAntes,\n  adicionarItemDepois,\n  adicionarItemFilho,\n  adicionarParagrafo,\n  adicionarParagrafoAntes,\n  adicionarParagrafoDepois,\n  adicionarParagrafoFilho,\n} from './adicionarElementoAction';\nimport { adicionarCapitulo, adicionarLivro, adicionarParte, adicionarSecao, adicionarSubsecao, adicionarTitulo, AgruparElemento } from './agruparElementoAction';\nimport { finalizarBlocoAlteracao, iniciarBlocoAlteracao } from './blocoAlteracaoAction';\nimport { InformarDadosAssistenteAction } from './informarDadosAssistenteAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from './informarExistenciaDoElementoNaNormaAction';\nimport { informarNormaAction } from './informarNormaAction';\nimport { moverElementoAbaixoAction } from './moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from './moverElementoAcimaAction';\nimport { removerElementoAction } from './removerElementoAction';\nimport { renumerarElementoAction } from './renumerarElementoAction';\nimport { restaurarElementoAction } from './restaurarElemento';\nimport { suprimirAgrupadorAction } from './suprimirAgrupador';\nimport { suprimirElementoAction } from './suprimirElemento';\nimport {\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  transformarEmOmissisAlinea,\n  transformarEmOmissisArtigo,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarEmOmissisItem,\n  transformarEmOmissisParagrafo,\n  transformarGenericoEmAlinea,\n  transformarGenericoEmInciso,\n  transformarGenericoEmItem,\n  transformarIncisoCaputEmAlinea,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmAlinea,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarItemEmAlinea,\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from './transformarElementoAction';\nimport { validarArticulacaAction } from './validarArticulacaoAction';\nimport { validarElementoAction } from './validarElementoAction';\nimport { adicionarTextoOmissisAction } from './adicionarTextoOmissisAction';\nimport { removerTextoOmissisAction } from './removerTextoOmissisAction';\nimport { aceitarRevisaoAction } from './aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from './rejeitarRevisaoAction';\nimport { exibirDiferencaAction } from './exibirDiferencaAction';\n\nexport interface ElementoAction {\n  descricao?: string;\n  tipo?: string;\n  hotkey?: string;\n  execute(atual: Referencia, conteudo?: string, novo?: Referencia, ...outros: any): any;\n}\n\nexport const acoesMenu: ElementoAction[] = [];\n\nacoesMenu.push(informarNormaAction);\nacoesMenu.push(InformarDadosAssistenteAction);\nacoesMenu.push(considerarElementoExistenteNaNorma);\nacoesMenu.push(considerarElementoNovoNaNorma);\nacoesMenu.push(atualizarNotaAlteracaoAction);\nacoesMenu.push(moverElementoAbaixoAction);\nacoesMenu.push(moverElementoAcimaAction);\nacoesMenu.push(renumerarElementoAction);\nacoesMenu.push(iniciarBlocoAlteracao);\nacoesMenu.push(finalizarBlocoAlteracao);\nacoesMenu.push(transformarEmOmissisAlinea);\nacoesMenu.push(transformarEmOmissisIncisoCaput);\nacoesMenu.push(transformarEmOmissisItem);\nacoesMenu.push(transformarEmOmissisParagrafo);\nacoesMenu.push(transformarEmOmissisIncisoParagrafo);\nacoesMenu.push(transformarEmOmissisArtigo);\n\nacoesMenu.push(transformarAlineaEmIncisoCaput);\nacoesMenu.push(transformarAlineaEmIncisoParagrafo);\nacoesMenu.push(transformaAlineaEmItem);\nacoesMenu.push(transformarArtigoEmParagrafo);\nacoesMenu.push(transformarGenericoEmInciso);\nacoesMenu.push(transformarGenericoEmAlinea);\nacoesMenu.push(transformarGenericoEmItem);\nacoesMenu.push(transformarIncisoParagrafoEmAlinea);\nacoesMenu.push(transformarIncisoParagrafoEmParagrafo);\nacoesMenu.push(transformarItemEmAlinea);\nacoesMenu.push(transformarIncisoCaputEmParagrafo);\nacoesMenu.push(transformarIncisoCaputEmAlinea);\n\nacoesMenu.push(transformarOmissisEmAlinea);\nacoesMenu.push(transformarOmissisEmArtigo);\nacoesMenu.push(transformarOmissisEmIncisoCaput);\nacoesMenu.push(transformarOmissisEmIncisoParagrafo);\nacoesMenu.push(transformarOmissisEmItem);\nacoesMenu.push(transformarOmissisEmParagrafo);\nacoesMenu.push(transformarParagrafoEmArtigo);\nacoesMenu.push(transformarParagrafoEmIncisoParagrafo);\nacoesMenu.push(transformarParagrafoEmIncisoCaput);\nacoesMenu.push(removerElementoAction);\nacoesMenu.push(restaurarElementoAction);\nacoesMenu.push(suprimirElementoAction);\nacoesMenu.push(suprimirAgrupadorAction);\nacoesMenu.push(validarElementoAction);\nacoesMenu.push(adicionarParte);\nacoesMenu.push(adicionarLivro);\nacoesMenu.push(adicionarTitulo);\nacoesMenu.push(adicionarCapitulo);\nacoesMenu.push(adicionarSecao);\nacoesMenu.push(adicionarSubsecao);\n\nacoesMenu.push(adicionarArtigoAntes);\nacoesMenu.push(adicionarArtigoDepois);\nacoesMenu.push(adicionarIncisoAntes);\nacoesMenu.push(adicionarIncisoDepois);\nacoesMenu.push(adicionarIncisoFilho);\nacoesMenu.push(adicionarAlineaAntes);\nacoesMenu.push(adicionarAlineaDepois);\nacoesMenu.push(adicionarAlineaFilho);\nacoesMenu.push(adicionarItemAntes);\nacoesMenu.push(adicionarItemDepois);\nacoesMenu.push(adicionarItemFilho);\nacoesMenu.push(adicionarParagrafoAntes);\nacoesMenu.push(adicionarParagrafoDepois);\nacoesMenu.push(adicionarParagrafoFilho);\n\nacoesMenu.push(adicionarAgrupadorArtigoAction);\nacoesMenu.push(adicionarAgrupadorArtigoAntesAction);\nacoesMenu.push(adicionarTextoOmissisAction);\nacoesMenu.push(removerTextoOmissisAction);\n\nacoesMenu.push(aceitarRevisaoAction);\nacoesMenu.push(rejeitarRevisaoAction);\n\nacoesMenu.push(exibirDiferencaAction);\n\nexport const acoesExclusivasEdicao: ElementoAction[] = [];\nacoesExclusivasEdicao.push(adicionarElementoAction);\nacoesExclusivasEdicao.push(adicionarArtigo);\nacoesExclusivasEdicao.push(adicionarInciso);\nacoesExclusivasEdicao.push(adicionarParagrafo);\nacoesExclusivasEdicao.push(adicionarItem);\nacoesExclusivasEdicao.push(adicionarAlinea);\n\nexport const isAcaoMenu = (acao: ElementoAction): boolean => {\n  return acoesMenu.includes(acao);\n};\n\nexport const acoesDisponiveis = [...acoesMenu, ...acoesExclusivasEdicao, validarArticulacaAction];\n\nexport const getAcao = (descricao: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao.descricao === descricao.trim())[0];\n};\n\nexport const getAcaoAgrupamento = (tipo: string): ElementoAction => {\n  return acoesDisponiveis.filter(acao => acao instanceof AgruparElemento && acao.tipo === tipo)[0];\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\nimport { getDispositivoAnterior, getDispositivoPosterior, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\n\nexport const podeConverterEmOmissis = (dispositivo: Dispositivo): boolean => {\n  return (\n    isDispositivoAlteracao(dispositivo.pai!) &&\n    dispositivo.filhos.length === 0 &&\n    dispositivo.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoAnterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name &&\n    getDispositivoPosterior(dispositivo)?.tipo !== TipoDispositivo.omissis.name\n  );\n};\n\nexport const removeAcaoExclusaoDispositivo = (acoes: any[]): void => {\n  const i: number = acoes.findIndex((acao: ElementoAction) => acao.descricao === 'Remover dispositivo');\n  if (i > -1) {\n    acoes = acoes.slice(i, 1);\n  }\n};\n\nexport const hasApenasDispositivosIrmaosNovos = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.pai!.filhos?.filter(f => f.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO).length === 0;\n};\n\nexport enum MotivosOperacaoNaoPermitida {\n  AGRUPADOR = 'No  possvel mover agrupadores de artigo.',\n  ORIGINAL = 'No  possvel mover um dispositivo original.',\n  PROXIMO_DIFERENTE_PARAGRAFO = 'O prximo dispositivo no  um pargrafo.',\n  PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA = 'O tipo do prximo dispositivo no corresponde ao tipo do dispositivo atual (alterao de norma).',\n  PROXIMO_DIFERENTE_ALINEA = 'O prximo dispositivo no  uma alnea.',\n  PROXIMO_DIFERENTE_INCISO = 'O prximo dispositivo no  um inciso.',\n}\n","import { Mensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent } from '../../state';\n\nconst count = 0;\n\nexport const buildPast = (state: any, events: any): StateEvent[] => {\n  const past = state.past ? state.past : [];\n  past.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? past.shift() : past;\n};\n\nexport const buildFuture = (state: any, events: any): StateEvent[] => {\n  const future = state.future ? state.future : [];\n  future.push(JSON.parse(JSON.stringify(events)));\n\n  return count > 50 ? future.shift() : future;\n};\n\nexport const retornaEstadoAtualComMensagem = (state: any, mensagem: Mensagem): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: state.ui?.events,\n      alertas: state.ui?.alertas,\n      message: mensagem,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\nimport { retornaEstadoAtualComMensagem } from '../../../redux/elemento/util/stateReducerUtil';\nimport { State } from '../../../redux/state';\nimport { TipoMensagem } from '../util/mensagem';\nimport { MotivosOperacaoNaoPermitida } from '../regras/regrasUtil';\n\nexport const normalizaNomeAcaoTransformacao = (dispositivo: Dispositivo, tipo: string): any => {\n  let t: string;\n\n  if (tipo.endsWith('EmOmissis')) {\n    const tipoDispositivo = tipo.replace('transformar', '').replace('EmOmissis', '');\n    t = 'transformar' + tipoDispositivo + 'EmOmissis' + tipoDispositivo;\n  } else {\n    t = tipo;\n  }\n\n  const acoes: any = dispositivo\n    .getAcoesPossiveis(dispositivo)\n    .filter(a => a instanceof TransformarElemento)\n    .filter((a: any) => a.nomeAcao === tipo || a.nomeAcao.replaceAll('IncisoCaput', 'Inciso').replaceAll('IncisoParagrafo', 'Inciso') === t);\n\n  return acoes[0]?.nomeAcao;\n};\n\nexport const isAcaoPermitida = (dispositivo: Dispositivo, tipo: any): boolean => {\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof tipo).length > 0;\n};\n\nexport const isAcaoTransformacaoPermitida = (dispositivo: Dispositivo, action: any): boolean => {\n  const nomeAcao = normalizaNomeAcaoTransformacao(dispositivo, action.subType);\n  return dispositivo.getAcoesPossiveis(dispositivo).filter(a => a instanceof TransformarElemento && a.nomeAcao && a.nomeAcao === nomeAcao).length > 0;\n};\n\nexport const montaEMostraMensagensErro = (dispositivo: Dispositivo, state: any): State => {\n  if (dispositivo.situacao.descricaoSituacao === 'Dispositivo Original') {\n    verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.ORIGINAL);\n  }\n  return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Operao no permitida. <br>' + buildMessages(dispositivo.motivosOperacaoNaoPermitida!) });\n};\n\nexport const buildMessages = (mensagens: string[]): string => (mensagens !== undefined ? mensagens.join('<br>') : '');\n\nexport const verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida = (dispositivo: Dispositivo, motivo: string) => {\n  if (dispositivo.motivosOperacaoNaoPermitida !== undefined) {\n    if (!dispositivo.motivosOperacaoNaoPermitida.includes(motivo)) {\n      dispositivo.motivosOperacaoNaoPermitida.push(motivo);\n    }\n  } else {\n    dispositivo.motivosOperacaoNaoPermitida = [];\n    dispositivo.motivosOperacaoNaoPermitida.push(motivo);\n  }\n};\n","import { DescricaoSituacao } from './../../dispositivo/situacao';\n// import { adicionarAgrupadorArtigoAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isArticulacao } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { adicionarAgrupadorArtigoAction } from '../acao/adicionarAgrupadorArtigoAction';\nimport { adicionarArtigoAntes, adicionarArtigoDepois } from '../acao/adicionarElementoAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivosAnterioresMesmoTipo,\n  getDispositivosPosterioresMesmoTipo,\n  hasAgrupador,\n  isDispositivoAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { MotivosOperacaoNaoPermitida } from './regrasUtil';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\n\nexport function RegrasAgrupadores<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n      if (!isAgrupador(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarArtigoAntes);\n      acoes.push(adicionarArtigoDepois);\n\n      if (\n        getDispositivosAnterioresMesmoTipo(dispositivo).length === 0 &&\n        getDispositivosPosterioresMesmoTipo(dispositivo).length > 0 &&\n        hasAgrupador(dispositivo) &&\n        dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n      ) {\n        //\n      } else {\n        acoes.push(removerElementoAction);\n      }\n\n      if (dispositivo.pai && isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && getDispositivoAnteriorMesmoTipo(dispositivo) === undefined) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (dispositivo.pai && !isArticulacao(dispositivo.pai) && isAgrupador(dispositivo.pai) && dispositivo.pai!.indexOf(dispositivo) === 0) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo);\n        dispositivo.tiposPermitidosPai?.filter((tipo, index) => index > pos!).forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      /*       if (dispositivo.pai && dispositivo.pai!.indexOf(dispositivo) > 0 && isAgrupador(dispositivo.pai!) && !isArticulacao(dispositivo.pai)) {\n        acoes.push(getAcaoAgrupamento(dispositivo.pai!.tipo));\n      } */\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n\n      acoes.push(adicionarAgrupadorArtigoAction);\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.AGRUPADOR);\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes.filter(Boolean));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { ElementoAction } from '../acao';\n\nexport class DispositivoNovo implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_NOVO;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from './../acao/agruparElementoAction';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport class DispositivoAdicionado extends DispositivoNovo {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n  tipoEmenda = ClassificacaoDocumento.EMENDA;\n  existeNaNormaAlterada?;\n\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesSemDuplicidade = [...new Set(acoes)];\n\n    return acoesSemDuplicidade\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter(a => a !== undefined)\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Situacao } from '../../dispositivo/situacao';\nimport { DispositivoNovo } from './dispositivoNovo';\n\nexport function SituacaoDispositivo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Situacao {\n    situacao = new DispositivoNovo();\n\n    getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n      return this.situacao?.getAcoesPermitidas(dispositivo, acoes);\n    }\n  };\n}\n","import { Genero } from '../../dispositivo/genero';\nimport { Tipo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from './tipoDispositivo';\n\nexport class TipoLexml implements Tipo {\n  tipo: string;\n  name?: string;\n  descricao?: string;\n  descricaoPlural?: string;\n  genero?: Genero;\n\n  tagId?: string;\n\n  tiposPermitidosPai?: string[];\n  tiposPermitidosFilhos?: string[];\n\n  tipoProvavelFilho?: string;\n\n  INDICADOR_SEQUENCIA?: string[];\n  INDICADOR_FIM_SEQUENCIA?: string[];\n  INDICADOR_DESDOBRAMENTO?: string[];\n\n  constructor(tipo: string) {\n    this.tipo = TipoDispositivo[tipo].tipo;\n    this.tagId = TipoDispositivo[tipo].tagId;\n    this.name = TipoDispositivo[tipo].name;\n    this.descricao = TipoDispositivo[tipo].descricao;\n    this.descricaoPlural = TipoDispositivo[tipo].descricaoPlural;\n\n    this.tiposPermitidosPai = TipoDispositivo[tipo].tiposPermitidosPai;\n    this.tiposPermitidosFilhos = TipoDispositivo[tipo].tiposPermitidosFilhos;\n\n    this.tipoProvavelFilho = TipoDispositivo[tipo].tipoProvavelFilho;\n\n    this.INDICADOR_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_SEQUENCIA;\n    this.INDICADOR_FIM_SEQUENCIA = TipoDispositivo[tipo].INDICADOR_FIM_SEQUENCIA;\n    this.INDICADOR_DESDOBRAMENTO = TipoDispositivo[tipo].INDICADOR_DESDOBRAMENTO;\n  }\n}\n","import { isDispositivoCabecaAlteracao } from './../hierarquia/hierarquiaUtil';\n/* eslint-disable indent */\nimport { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { isArtigo, isCaput, isParagrafo } from '../../dispositivo/tipo';\nimport { hasIndicativoFimAlteracao, normalizaSeForOmissis } from '../conteudo/conteudoUtil';\nimport {\n  getArtigo,\n  getDispositivoAnterior,\n  isDispositivoAlteracao,\n  isPrimeiroMesmoTipo,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { criaDispositivo } from './dispositivoLexmlFactory';\nimport { validaDispositivo } from './dispositivoValidator';\n\nconst converteFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (destino.tipoProvavelFilho! === undefined) {\n    return;\n  }\n  atual.filhos.forEach((filho, index) => {\n    const novo = criaDispositivo(\n      isArtigo(destino) && TipoDispositivo.inciso.name === destino.tipoProvavelFilho! ? (destino as Artigo).caput! : destino,\n      destino.tipoProvavelFilho!\n    );\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    novo.mensagens = validaDispositivo(novo);\n    novo.createRotulo(novo);\n    filho.filhos ? converteFilhos(filho, novo) : undefined;\n    index === atual.filhos.length - 1 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const converteDispositivo = (atual: Dispositivo, action: any): Dispositivo => {\n  const paiAtual = atual.pai;\n  let novo: Dispositivo;\n  let paiNovo: Dispositivo;\n\n  switch (action.subType) {\n    case 'transformarAlineaEmItem':\n    case 'transformarIncisoCaputEmAlinea':\n    case 'transformarIncisoParagrafoEmAlinea':\n    case 'transformarParagrafoEmIncisoParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarDispositivoGenericoEmInciso':\n    case 'transformarDispositivoGenericoEmAlinea':\n    case 'transformarDispositivoGenericoEmItem':\n    case 'transformarOmissisEmAlinea':\n    case 'transformarOmissisEmArtigo':\n    case 'transformarOmissisEmIncisoCaput':\n    case 'transformarOmissisEmIncisoParagrafo':\n    case 'transformarOmissisEmItem':\n    case 'transformarOmissisEmParagrafo':\n    case 'transformarAlineaEmOmissisAlinea':\n    case 'transformarItemEmOmissisItem':\n    case 'transformarParagrafoEmOmissisParagrafo':\n    case 'transformarArtigoEmOmissisArtigo':\n    case 'transformarIncisoCaputEmOmissisIncisoCaput':\n    case 'transformarIncisoParagrafoEmOmissisIncisoParagrafo':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo(paiAtual!, action.novo.tipo, undefined, paiAtual?.indexOf(atual));\n      break;\n    case 'transformarParagrafoEmInciso':\n      if (isParagrafo(atual) && (isPrimeiroMesmoTipo(atual) || isUnicoMesmoTipo(atual))) {\n        paiNovo = paiAtual!;\n        novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n        break;\n      }\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    case 'transformarParagrafoEmIncisoCaput':\n      paiNovo = paiAtual!;\n      novo = criaDispositivo((paiNovo as Artigo).caput!, action.novo.tipo);\n      break;\n    case 'transformarArtigoEmParagrafo':\n      paiNovo = getDispositivoAnterior(atual)!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo);\n      break;\n    default:\n      paiNovo = atual.pai!.pai!;\n      novo = criaDispositivo(paiNovo, action.novo.tipo, atual.pai!);\n      break;\n  }\n  novo!.texto = action.atual.conteudo?.texto ?? atual.texto;\n  novo.createRotulo(novo);\n  novo.situacao = atual.situacao;\n  if (isDispositivoCabecaAlteracao(novo)) {\n    novo.notaAlteracao = 'NR';\n  }\n  novo.mensagens = validaDispositivo(novo);\n  paiAtual?.removeFilho(atual);\n  paiAtual?.renumeraFilhos();\n  paiNovo?.renumeraFilhos();\n  converteFilhos(atual, novo!);\n\n  return novo!;\n};\n\nexport const copiaFilhos = (atual: Dispositivo, destino: Dispositivo): void => {\n  if (atual.tipo !== destino.tipo) {\n    return;\n  }\n  atual.filhos.forEach(filho => {\n    const novo = criaDispositivo(isArtigo(destino) && isCaput(filho.pai!) ? (destino as Artigo).caput! : destino, filho.tipo);\n    filho.rotulo ? (novo.rotulo = filho.rotulo) : novo.createRotulo(novo);\n    novo.texto = filho.texto ?? '';\n    novo.situacao = filho.situacao;\n    atual.removeFilho(filho);\n    novo.mensagens = validaDispositivo(filho);\n\n    filho.filhos ? (atual.tipo === destino.tipo ? copiaFilhos(filho, novo) : converteFilhos(filho, novo)) : undefined;\n\n    atual.filhos.length === 0 ? destino.renumeraFilhos() : undefined;\n  });\n};\n\nexport const podeSerUltimaalteracao = (dispositivo: Dispositivo, action: any): boolean => {\n  if (!isDispositivoAlteracao(dispositivo)) {\n    return false;\n  }\n  const artigo = getArtigo(dispositivo);\n  return isUltimoMesmoTipo(artigo) && hasIndicativoFimAlteracao(normalizaSeForOmissis(action.atual?.conteudo?.texto ?? '')) && isUltimaAlteracao(dispositivo);\n};\n","import { Counter } from '../../../util/counter';\nimport { generateUUID } from '../../../util/uuid';\nimport { Alteracoes } from '../../dispositivo/blocoAlteracao';\nimport { Articulacao, Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { GeneroFeminino, GeneroIndefinido, GeneroMasculino } from '../../dispositivo/genero';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isArtigo, isEmenta, isInciso, isIncisoCaput, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ValidacaoDispositivo } from '../../dispositivo/validacao';\nimport { FINALIZAR_BLOCO, INICIAR_BLOCO } from '../acao/blocoAlteracaoAction';\nimport { BlocoAlteracaoNaoPermitido } from '../alteracao/blocoAlteracaoNaoPermitido';\nimport { BlocoAlteracaoPermitido } from '../alteracao/BlocoAlteracaoPermitido';\nimport { ConteudoDispositivo } from '../conteudo/conteudoDispositivo';\nimport { ConteudoOmissis } from '../conteudo/conteudoOmissis';\nimport {\n  hasIndicativoContinuacaoSequencia,\n  hasIndicativoDesdobramento,\n  hasIndicativoFinalSequencia,\n  hasIndicativoInicioAlteracao,\n  normalizaSeForOmissis,\n} from '../conteudo/conteudoUtil';\nimport { HierarquiaAgrupador } from '../hierarquia/hierarquiaAgrupador';\nimport { HierarquiaArtigo } from '../hierarquia/hierarquiaArtigo';\nimport { HierarquiaDispositivo } from '../hierarquia/hierarquiaDispositivo';\nimport { getArticulacao, hasFilhos, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { NumeracaoAgrupador } from '../numeracao/numeracaoAgrupador';\nimport { NumeracaoAlinea } from '../numeracao/numeracaoAlinea';\nimport { NumeracaoArtigo } from '../numeracao/numeracaoArtigo';\nimport { NumeracaoCaput } from '../numeracao/numeracaoCaput';\nimport { NumeracaoGenerico } from '../numeracao/numeracaoGenerico';\nimport { NumeracaoInciso } from '../numeracao/numeracaoInciso';\nimport { NumeracaoIndisponivel } from '../numeracao/numeracaoIndisponivel';\nimport { NumeracaoItem } from '../numeracao/numeracaoItem';\nimport { NumeracaoParagrafo } from '../numeracao/numeracaoParagrafo';\nimport { RegrasAgrupadores } from '../regras/regrasAgrupadores';\nimport { RegrasAlinea } from '../regras/regrasAlinea';\nimport { RegrasArtigo } from '../regras/regrasArtigo';\nimport { RegrasCaput } from '../regras/regrasCaput';\nimport { RegrasDispositivoGenerico } from '../regras/regrasDispositivoGenerico';\nimport { RegrasEmenta } from '../regras/regrasEmenta';\nimport { RegrasInciso } from '../regras/regrasInciso';\nimport { RegrasItem } from '../regras/regrasItem';\nimport { RegrasOmissis } from '../regras/regrasOmissis';\nimport { RegrasParagrafo } from '../regras/regrasParagrafo';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { SituacaoDispositivo } from '../situacao/situacaoDispositivo';\nimport { TipoArticulacao } from '../tipo/tipoArticulacao';\nimport { TipoArtigo } from '../tipo/tipoArtigo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TipoLexml } from '../tipo/tipoLexml';\nimport { TipoMensagem } from '../util/mensagem';\nimport { podeSerUltimaalteracao } from './dispositivoLexmlUtil';\n\nconst AlineaLexml = SituacaoDispositivo(\n  RegrasAlinea(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAlinea(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArtigoLexml = SituacaoDispositivo(RegrasArtigo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoPermitido(NumeracaoArtigo(HierarquiaArtigo(TipoArtigo)))))));\nconst CaputLexml = SituacaoDispositivo(\n  RegrasCaput(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoCaput(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst DispositivoGenericoLexml = SituacaoDispositivo(\n  RegrasDispositivoGenerico(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoGenerico(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst IncisoLexml = SituacaoDispositivo(\n  RegrasInciso(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoInciso(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ItemLexml = SituacaoDispositivo(\n  RegrasItem(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoItem(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ParagrafoLexml = SituacaoDispositivo(\n  RegrasParagrafo(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoParagrafo(HierarquiaDispositivo(TipoLexml)))))))\n);\nconst ArticulacaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoArticulacao)))))))\n);\nconst CapituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst DispositivoAgrupadorGenericoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroIndefinido(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst LivroLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst ParteLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SubsecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst SecaoLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\nconst TituloLexml = SituacaoDispositivo(\n  RegrasAgrupadores(ValidacaoDispositivo(GeneroMasculino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoAgrupador(HierarquiaAgrupador(TipoLexml)))))))\n);\n\nconst OmissisLexml = SituacaoDispositivo(RegrasOmissis(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoOmissis(NumeracaoIndisponivel(HierarquiaDispositivo(TipoLexml)))))));\n\nconst EmentaLexml = SituacaoDispositivo(RegrasEmenta(GeneroFeminino(BlocoAlteracaoNaoPermitido(ConteudoDispositivo(NumeracaoIndisponivel(HierarquiaDispositivo(TipoLexml)))))));\n\nexport const criaDispositivo = (parent: Dispositivo, tipo: string, referencia?: Dispositivo, posicao?: number): Dispositivo => {\n  const dispositivo = create(tipo, parent);\n  posicao !== undefined && posicao >= 0 ? parent!.addFilhoOnPosition(dispositivo, posicao) : referencia ? parent!.addFilho(dispositivo, referencia) : parent!.addFilho(dispositivo);\n\n  return dispositivo;\n};\n\nconst create = (name: string, parent: Dispositivo): Dispositivo => {\n  let dispositivo: Dispositivo;\n\n  switch (name.toLowerCase()) {\n    case 'alinea':\n      dispositivo = new AlineaLexml(name.toLowerCase());\n      break;\n    case 'artigo':\n      dispositivo = new ArtigoLexml();\n      (dispositivo as Artigo).caput = create(TipoDispositivo.caput.tipo, dispositivo);\n      break;\n    case 'capitulo':\n      dispositivo = new CapituloLexml(name.toLowerCase());\n      break;\n    case 'caput':\n      dispositivo = new CaputLexml(name.toLowerCase());\n      break;\n    case 'inciso':\n      dispositivo = new IncisoLexml(name.toLowerCase());\n      break;\n    case 'item':\n      dispositivo = new ItemLexml(name.toLowerCase());\n      break;\n    case 'livro':\n      dispositivo = new LivroLexml(name.toLowerCase());\n      break;\n    case 'omissis':\n      dispositivo = new OmissisLexml(name.toLowerCase());\n      break;\n    case 'paragrafo':\n      dispositivo = new ParagrafoLexml(name.toLowerCase());\n      break;\n    case 'parte':\n      dispositivo = new ParteLexml(name.toLowerCase());\n      break;\n    case 'secao':\n      dispositivo = new SecaoLexml(name.toLowerCase());\n      break;\n    case 'subsecao':\n      dispositivo = new SubsecaoLexml(name.toLowerCase());\n      break;\n    case 'titulo':\n      dispositivo = new TituloLexml(name.toLowerCase());\n      break;\n    case 'ementa':\n      dispositivo = new EmentaLexml(name.toLowerCase());\n      break;\n    default: {\n      dispositivo = parent && isAgrupador(parent) ? new DispositivoAgrupadorGenericoLexml('agrupadorGenerico') : new DispositivoGenericoLexml('generico');\n      dispositivo.mensagens = [];\n      dispositivo.mensagens.push({ tipo: TipoMensagem.WARNING, descricao: 'No foi possvel validar a natureza deste dispositivo com base na legislao vigente' });\n    }\n  }\n\n  dispositivo.uuid = Counter.next();\n  dispositivo.uuid2 = generateUUID();\n  dispositivo.name = name;\n  dispositivo.pai = isInciso(dispositivo) && isArtigo(parent) ? (parent as Artigo).caput : parent;\n  dispositivo.isDispositivoAlteracao = isDispositivoAlteracao(dispositivo);\n\n  desativaRotuloAutomaticoSeDispositivoAlteracao(dispositivo);\n\n  return dispositivo;\n};\n\nexport const createArticulacao = (): Articulacao => {\n  const articulacao = new ArticulacaoLexml();\n  articulacao.uuid = Counter.next();\n  articulacao.uuid2 = generateUUID();\n  return articulacao;\n};\n\nexport const createAlteracao = (atual: Artigo): void => {\n  atual.alteracoes = createArticulacao();\n  atual.alteracoes.pai = atual;\n};\n\nexport const createByInferencia = (referencia: Dispositivo, action: any): Dispositivo => {\n  let novo;\n\n  if (isDispositivoAlteracao(referencia)) {\n    if (action.subType === INICIAR_BLOCO) {\n      novo = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, getArticulacao(referencia));\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else if (action.subType === FINALIZAR_BLOCO) {\n      const ref = getArticulacao(referencia);\n      novo = createFromReferencia(ref.pai!);\n      novo!.texto = normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else if (podeSerUltimaalteracao(referencia, action)) {\n      const ref = getArticulacao(referencia);\n      novo = action.subType === INICIAR_BLOCO ? criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, ref!) : createFromReferencia(ref.pai!);\n      novo!.texto = action.subType === INICIAR_BLOCO ? '' : normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '');\n    } else {\n      novo = createFromReferencia(referencia);\n      novo.createRotulo();\n      novo!.texto = action.novo?.conteudo?.texto?.length > 0 ? normalizaSeForOmissis(action.novo?.conteudo?.texto ?? '') : '';\n    }\n  } else {\n    if (referencia.alteracoes || hasIndicativoInicioAlteracao(action.atual?.conteudo?.texto) || action.novo?.isDispositivoAlteracao) {\n      if (!referencia.hasAlteracao()) {\n        createAlteracao(referencia);\n      }\n      novo = criaDispositivoCabecaAlteracao(referencia.tipo, referencia.alteracoes!);\n      novo.texto = action.novo?.conteudo?.texto?.length > 0 ? action.novo?.conteudo?.texto : '';\n    } else {\n      novo = createFromReferencia(referencia);\n      novo!.texto = action.novo?.conteudo?.texto ?? '';\n    }\n  }\n  return novo;\n};\n\nexport const createFromReferencia = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.hasAlteracao()) {\n    return createWhenReferenciaBlocoAlteracao(referencia);\n  }\n\n  if (isArtigo(referencia)) {\n    if (!isDispositivoAlteracao(referencia)) {\n      return createWhenReferenciaIsArtigo(referencia);\n    }\n    return criaDispositivo((referencia as Artigo).caput!, TipoDispositivo.inciso.tipo, undefined, 0);\n  }\n\n  if (isAgrupador(referencia)) {\n    return createWhenReferenciaIsAgrupador(referencia);\n  }\n\n  if (isDispositivoAlteracao(referencia)) {\n    if (isOmissis(referencia)) {\n      return criaDispositivo(referencia.pai!, isArtigo(referencia.pai!) ? TipoDispositivo.paragrafo.tipo : referencia.pai!.tipoProvavelFilho!, referencia);\n    }\n    return hasFilhos(referencia) || hasIndicativoDesdobramento(referencia)\n      ? criaDispositivo(referencia, referencia.tipoProvavelFilho!, referencia)\n      : criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n  }\n\n  if (isEmenta(referencia)) {\n    return criaDispositivo(referencia.pai!, TipoDispositivo.artigo.tipo, undefined, 0);\n  }\n\n  return createFromReferenciaDefault(referencia);\n};\n\nconst createWhenReferenciaBlocoAlteracao = (referencia: Dispositivo): Dispositivo => {\n  if (referencia.pai!.isLastFilho(referencia) && referencia?.pai?.pai) {\n    return criaDispositivo(referencia.pai.pai, referencia.pai.tipo, referencia.pai);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createFromReferenciaDefault = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n  if (referencia.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL && hasIndicativoFinalSequencia(referencia) && referencia.pai!.isLastFilho(referencia)) {\n    if (isIncisoCaput(referencia)) {\n      const artigo: Artigo = referencia.pai!.pai! as Artigo;\n      return artigo!.filhos!.filter(filho => isParagrafo(filho)).length > 0\n        ? criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo, undefined, 0)\n        : criaDispositivo(artigo, TipoDispositivo.paragrafo.tipo);\n    } else {\n      return criaDispositivo(referencia!.pai!.pai!, referencia.pai!.tipo, referencia!.pai!);\n    }\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsArtigo = (referencia: Dispositivo): Dispositivo => {\n  if (hasIndicativoDesdobramento(referencia)) {\n    const type = referencia.tipoProvavelFilho!;\n\n    if (type === TipoDispositivo.inciso.tipo) {\n      const parent = (referencia as Artigo).caput;\n      return parent!.filhos!.length > 0 ? criaDispositivo(parent!, type, undefined, 0) : criaDispositivo(parent!, type);\n    }\n    return referencia.pai!.filhos!.length > 0 ? criaDispositivo(referencia, type, undefined, 0) : criaDispositivo(referencia, type);\n  }\n\n  if (hasIndicativoContinuacaoSequencia(referencia) && referencia.filhos.length > 0 && isParagrafo(referencia.filhos[0])) {\n    return criaDispositivo(referencia!, TipoDispositivo.paragrafo.tipo, undefined, 0);\n  }\n  return criaDispositivo(referencia.pai!, referencia.tipo, referencia);\n};\n\nconst createWhenReferenciaIsAgrupador = (referencia: Dispositivo): Dispositivo => {\n  return criaDispositivo(referencia, TipoDispositivo.artigo.tipo, undefined, 0);\n};\n\nexport const criaDispositivoCabecaAlteracao = (tipo: string, alteracoes: Alteracoes, referencia?: Dispositivo, posicao?: number): Dispositivo => {\n  const dispositivo = criaDispositivo(alteracoes!, tipo, referencia, posicao);\n\n  dispositivo.situacao = new DispositivoAdicionado();\n  dispositivo.isDispositivoAlteracao = true;\n  dispositivo.notaAlteracao = 'NR';\n  dispositivo.createRotulo(dispositivo);\n\n  return dispositivo;\n};\n\nconst desativaRotuloAutomaticoSeDispositivoAlteracao = (dispositivo: Dispositivo): void => {\n  if (isDispositivoAlteracao(dispositivo)) {\n    // dispositivo.renumeraFilhos = (): void => undefined;\n    // if (isArtigo(dispositivo)) {\n    //   (dispositivo as Artigo).caput!.renumeraFilhos = (): void => undefined;\n    // }\n    getArticulacao(dispositivo).renumeraFilhos = (): void => undefined;\n    getArticulacao(dispositivo).renumeraArtigos = (): void => undefined;\n  }\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAlinea, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarAlineaAntes, adicionarAlineaDepois, adicionarItemFilho } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformaAlineaEmItem,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarEmOmissisAlinea,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { atualizarNotaAlteracaoAction } from './../acao/atualizarNotaAlteracaoAction';\nimport { podeEditarNotaAlteracao } from './../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isAlinea(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarAlineaAntes);\n      }\n\n      acoes.push(adicionarAlineaDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ALINEA);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ALINEA);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarItemFilho);\n      }\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput);\n      }\n      if (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getDispositivoAnterior(dispositivo)!))) {\n        acoes.push(transformaAlineaEmItem);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisAlinea);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isAlinea(dispositivo)) {\n        return undefined;\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport {\n  converteLetraParaNumeroArabico,\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaLetra,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoZero,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoAlinea<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoAlineaLcp95';\n    private SUFIXO = ')';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[a-z]+(-[a-zA-Z0-9]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\)$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      this.numero = trataNumeroAndComplemento(\n        this.normalizaNumeracao(rotulo!),\n        isNumeracaoZero(rotulo) ? null : converteLetraParaNumeroArabico,\n        converteLetrasComplementoParaNumero\n      );\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.alinea.name\n          : trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaLetra, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) +\n            this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerada]'; // TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + '';\n      }\n      return '' + this.rotulo!.trim().replace(this.SUFIXO, '') + '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + ' [ainda no numerada]';\n      }\n      return TipoDispositivo.alinea.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isAlinea, isArticulacao, isArtigo, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction, getAcaoAgrupamento } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport {\n  adicionarArtigo,\n  adicionarArtigoAntes,\n  adicionarArtigoDepois,\n  adicionarElementoAction,\n  adicionarIncisoFilho,\n  adicionarParagrafoFilho,\n} from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { adicionarCapitulo } from '../acao/agruparElementoAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { InformarDadosAssistenteAction } from '../acao/informarDadosAssistenteAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { informarNormaAction } from '../acao/informarNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  transformarArtigoEmParagrafo,\n  transformarEmOmissisArtigo,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoDesdobramento } from '../conteudo/conteudoUtil';\nimport {\n  getAgrupadorPosterior,\n  getAgrupadoresAcima,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  hasAgrupadoresAcima,\n  hasAgrupadoresPosteriores,\n  hasFilhos,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isSuprimido,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao } from './../../dispositivo/tipo';\nimport { adicionarAgrupadorArtigoAntesAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { getProximoAgrupadorAposArtigo } from './../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isArtigo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarElementoAction);\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) || getProximoAgrupadorAposArtigo(dispositivo)) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) || isAgrupadorNaoArticulacao(dispositivo.pai!)) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA);\n      }\n\n      if (\n        !isDispositivoCabecaAlteracao(dispositivo) ||\n        !isDispositivoAlteracao(dispositivo) ||\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ||\n        dispositivo.numero !== '1'\n      ) {\n        acoes.push(adicionarArtigoAntes);\n      }\n      acoes.push(adicionarArtigoDepois);\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarParagrafoFilho);\n        acoes.push(adicionarIncisoFilho);\n      }\n\n      if (!isDispositivoAlteracao(dispositivo)) {\n        acoes.push(InformarDadosAssistenteAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (dispositivo.alteracoes && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n        acoes.push(informarNormaAction);\n      }\n      if (!dispositivo.hasAlteracao() && !isDispositivoAlteracao(dispositivo) && (dispositivo.texto.length === 0 || !hasIndicativoDesdobramento(dispositivo))) {\n        acoes.push(adicionarArtigo);\n      }\n      if (\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        !dispositivo.hasAlteracao() &&\n        !isDispositivoAlteracao(dispositivo) &&\n        !hasFilhos(dispositivo)\n      ) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n      if (\n        dispositivo.pai!.indexOf(dispositivo) > 0 &&\n        getDispositivoAnterior(dispositivo) !== undefined &&\n        !getDispositivoAnterior(dispositivo)?.hasAlteracao() &&\n        !isOmissis(getDispositivoAnterior(dispositivo)!) &&\n        (!isDispositivoAlteracao(dispositivo) || !getDispositivoAnterior(dispositivo) || !isAgrupador(getDispositivoAnterior(dispositivo)!))\n      ) {\n        acoes.push(transformarArtigoEmParagrafo);\n      }\n      if (dispositivo.pai && !isDispositivoAlteracao(dispositivo) && isArticulacao(dispositivo.pai) && dispositivo.pai!.filhos.filter(d => isAgrupador(d)).length === 0) {\n        acoes.push(adicionarCapitulo);\n      }\n      if (dispositivo.pai && isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai)) {\n        acoes.push(adicionarCapitulo);\n      }\n      if (!isDispositivoAlteracao(dispositivo) && dispositivo.pai && hasAgrupadoresPosteriores(dispositivo)) {\n        acoes.push(getAcaoAgrupamento(getAgrupadorPosterior(dispositivo).tipo));\n      }\n      if (!isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!)) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter((tipo, index) => (dispositivo.pai!.indexOf(dispositivo) > 0 ? index >= pos! : index > pos!))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (\n        !isDispositivoAlteracao(dispositivo) &&\n        isAgrupador(dispositivo.pai!) &&\n        !isArticulacao(dispositivo.pai!) &&\n        dispositivo.pai!.indexOf(dispositivo) > 0 &&\n        hasAgrupadoresAcima(dispositivo)\n      ) {\n        const pos = dispositivo.tiposPermitidosPai?.indexOf(dispositivo.pai!.tipo) ?? 0;\n\n        const tiposExistentes = getAgrupadoresAcima(dispositivo.pai!.pai!, dispositivo.pai!, []).reduce(\n          (lista: string[], dispositivo: Dispositivo) =>\n            lista.includes(dispositivo.tipo) && getAgrupadorPosterior(dispositivo) !== undefined ? lista : lista.concat(dispositivo.tipo),\n          []\n        );\n        dispositivo.tiposPermitidosPai\n          ?.filter(() => pos > 0)\n          .filter(t => tiposExistentes.includes(t))\n          .forEach(t => acoes.push(getAcaoAgrupamento(t)));\n      }\n\n      if (podeConverterEmOmissis(dispositivo) && !isArticulacao(dispositivo.pai!)) {\n        acoes.push(transformarEmOmissisArtigo);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      acoes.push(adicionarAgrupadorArtigoAntesAction);\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isArtigo(dispositivo)) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Alteracoes, BlocoAlteracao } from '../../dispositivo/blocoAlteracao';\n\nexport function BlocoAlteracaoPermitido<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements BlocoAlteracao {\n    alteracoes?: Alteracoes;\n\n    hasAlteracao(): boolean {\n      return this.alteracoes ? this.alteracoes.filhos?.length > 0 : false;\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { getArticulacao, isDispositivoCabecaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isDispositivoAlteracao } from './../hierarquia/hierarquiaUtil';\nimport { converteLetrasComplementoParaNumero, converteNumeroArabicoParaLetra, isNumeracaoValida, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoArtigoLcp95';\n    PREFIXO = 'Art. ';\n    SUFIXO = '';\n    private ARTIGO_UNICO = 'Artigo nico.';\n    numero?: string;\n    rotulo?: string;\n    informouArtigoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .replace(/[\"]/g, '')\n        .replace(/\\./g, '')\n        .replace(/artigo [u]nico/i, '1')\n        .replace(/(art[.]{0,1})/i, '')\n        .replace(/[]/i, '')\n        .trim();\n    }\n\n    private isNumeracaoComComplementoAlfabetico(numero: string): boolean {\n      return /^\\d{1,}[]?(([-]?[a-zA-Z]+){0,2})$/.test(numero);\n    }\n\n    private isNumeracaoComComplementoNumerico(numero: string): boolean {\n      return /^\\d{1,}[]?(([-]?[1-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouArtigoUnico = /.*[u]nico/i.test(rotulo);\n      this.numero = this.informouArtigoUnico\n        ? '1'\n        : this.isNumeracaoComComplementoAlfabetico(temp)\n        ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero)\n        : this.isNumeracaoComComplementoNumerico(temp)\n        ? temp\n        : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (dispositivo === undefined) {\n        this.rotulo = TipoDispositivo.artigo.descricao;\n      } else if (\n        dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        (dispositivo.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n        !isDispositivoAlteracao(dispositivo)\n      ) {\n        this.rotulo = 'Art.';\n      } else if (this.numero === undefined) {\n        this.rotulo = dispositivo.tipo;\n      } else if (this.numero !== undefined && !isNumeracaoValida(this.numero)) {\n        this.rotulo = this.PREFIXO + this.numero + this.SUFIXO;\n      } else if (isDispositivoCabecaAlteracao(dispositivo) || (isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!) && dispositivo.pai!.filhos.length === 1)) {\n        this.rotulo = this.informouArtigoUnico ? this.ARTIGO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo);\n      } else {\n        getArticulacao(dispositivo).artigos.length === 1\n          ? (this.rotulo = this.ARTIGO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(dispositivo: Dispositivo, paraComandoEmenda = false): string {\n      const partes = this.numero?.split('-');\n      const [num, ...remaining] = partes!;\n      const ordinal = +(num ?? '1') > 0 && parseInt(num ?? '1', 10) < 10;\n      return (\n        (ordinal ? num + this.SUFIXO : num) +\n        (remaining.length > 0\n          ? '-' +\n            remaining\n              ?.map(str => (dispositivo.isDispositivoAlteracao ? converteNumeroArabicoParaLetra(str) : str))\n              .join('-')\n              .toUpperCase()\n          : '') +\n        (!paraComandoEmenda && (!ordinal || remaining.length) ? '.' : '')\n      );\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerado]'; //TipoDispositivo.artigo.descricao?.toLowerCase() + '';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo nico';\n      }\n      return this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.artigo.descricao?.toLowerCase() + ' [ainda no numerado]';\n      }\n      if (this.informouArtigoUnico) {\n        return 'artigo nico';\n      }\n      return 'art. ' + this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n  };\n}\n","import { isOmissis } from './../../dispositivo/tipo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Hierarquia } from '../../dispositivo/hierarquia';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isCaput, isInciso } from '../../dispositivo/tipo';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { isAntesDoPrimeiroDispositivoOriginal, isDispositivoAlteracao, podeRenumerarFilhosAutomaticamente } from './hierarquiaUtil';\n\nexport function HierarquiaArtigo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Hierarquia {\n    pai?: Dispositivo;\n    private _paragrafos?: Dispositivo[];\n\n    caput?: Dispositivo;\n\n    get filhos(): Dispositivo[] {\n      const incisos = this.getIncisosCaput();\n      const paragrafos = this.paragrafos;\n\n      return incisos.concat(paragrafos);\n    }\n\n    private getIncisosCaput(): Dispositivo[] {\n      return this.caput?.filhos ?? [];\n    }\n\n    get paragrafos(): Dispositivo[] {\n      this._paragrafos = this._paragrafos ?? [];\n      return this._paragrafos;\n    }\n\n    addFilhoOnPosition(filho: Dispositivo, posicao: number): void {\n      if (isInciso(filho)) {\n        this.caput!.addFilhoOnPosition(filho, posicao);\n      } else {\n        filho.pai = this as unknown as Dispositivo;\n        this.paragrafos.splice(posicao - this.getIncisosCaput().length, 0, filho);\n      }\n    }\n\n    addFilho(filho: Dispositivo, referencia?: Dispositivo): void {\n      isCaput(filho) ? (this.caput = filho) : isInciso(filho) ? this.addIncisoCaput(filho, referencia) : this.addParagrafo(filho, referencia);\n    }\n\n    removeFilho(filho: Dispositivo): void {\n      isInciso(filho) ? this.caput?.removeFilho(filho) : this.removeParagrafo(filho);\n    }\n\n    private addIncisoCaput(filho: Dispositivo, referencia?: Dispositivo): void {\n      this.caput!.addFilho(filho, referencia);\n    }\n\n    private addParagrafo(filho: Dispositivo, referencia?: Dispositivo): void {\n      if (referencia) {\n        const posicao = this.paragrafos.indexOf(referencia) + 1;\n        this.isLastFilho(referencia) ? this.paragrafos.push(filho) : this.paragrafos.splice(posicao, 0, filho);\n      } else {\n        this.paragrafos.push(filho);\n      }\n    }\n\n    private removeParagrafo(filho: Dispositivo): void {\n      this._paragrafos = this._paragrafos?.filter(f => (f.uuid !== filho.uuid ? f : (f.pai = undefined)));\n    }\n\n    isLastFilho(filho: Dispositivo): boolean {\n      return this.paragrafos.indexOf(filho) === this.paragrafos.length - 1;\n    }\n\n    indexOf(filho: Dispositivo): number {\n      return isInciso(filho) ? this.caput!.indexOf(filho) : this.filhos.indexOf(filho);\n    }\n\n    private renumeraIncisos(): void {\n      this.caput?.renumeraFilhos();\n    }\n\n    private renumeraParagrafos(): void {\n      this.paragrafos.forEach(filho => {\n        if (\n          (isDispositivoAlteracao(filho) && isAntesDoPrimeiroDispositivoOriginal(filho)) ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO ||\n          filho.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO\n        ) {\n          filho.numero = calculaNumeracao(filho);\n          filho.createRotulo(filho);\n          filho.id = buildId(filho);\n        } else {\n          filho.createRotulo(filho);\n        }\n      });\n    }\n\n    isParagrafoUnico(): boolean {\n      return this.paragrafos.length === 1;\n    }\n\n    renumeraFilhos(): void {\n      if (!podeRenumerarFilhosAutomaticamente(this as any)) {\n        this.ajustaRotuloParagrafoUnicoSeNecessario();\n        return;\n      }\n      this.renumeraIncisos();\n      this.renumeraParagrafos();\n    }\n\n    ajustaRotuloParagrafoUnicoSeNecessario(): void {\n      const nParagrafos = this.paragrafos.filter(p => !isOmissis(p)).length;\n      const paragrafoUnico = this.paragrafos.filter(p => !isOmissis(p)).find(p => p.id?.endsWith('par1u'));\n      if (paragrafoUnico) {\n        paragrafoUnico.rotulo = nParagrafos === 1 ? 'Pargrafo nico.' : ' 1';\n      }\n    }\n  };\n}\n","import { Articulacao, Dispositivo } from '../../dispositivo/dispositivo';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArtigo extends TipoLexml {\n  _blocoAlteracao?: Articulacao;\n\n  constructor() {\n    super('artigo');\n  }\n\n  caput?: Dispositivo;\n\n  get texto(): string {\n    return this.caput?.texto ?? '';\n  }\n\n  set texto(texto: string) {\n    this.caput!.texto = texto;\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { ElementoAction } from '../acao';\nimport { Regras } from './regras';\n\nexport function RegrasCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      return [];\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoCaput<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIndisponivel';\n\n    numero?: string;\n    rotulo?: string;\n\n    createRotulo(): void {\n      this.rotulo = undefined;\n    }\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return '';\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return 'caput';\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isCaput, isDispositivoGenerico, isInciso, isParagrafo } from '../../dispositivo/tipo';\nimport { acoesDisponiveis, ElementoAction } from '../acao';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { isDispositivoAlteracao, isUltimaAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasDispositivoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isDispositivoGenerico(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (\n        (isParagrafo(dispositivo.pai!) || isCaput(dispositivo.pai!) || isInciso(dispositivo.pai!) || isAlinea(dispositivo.pai!)) &&\n        dispositivo.pai!.tipoProvavelFilho!.length > 0\n      ) {\n        acoes.push(acoesDisponiveis.filter(a => a instanceof TransformarElemento && a.nomeAcao === 'transformarDispositivoGenericoEm' + dispositivo.pai!.tipoProvavelFilho)[0]);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Numeracao } from '../../dispositivo/numeracao';\n\nexport function NumeracaoGenerico<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoDispositivoGenericoLcp95';\n    private SUFIXO = ' -';\n\n    numero?: string;\n    rotulo?: string;\n\n    createNumeroFromRotulo(): void {\n      //\n    }\n\n    createRotulo(): void {\n      this.rotulo = this.numero === undefined ? 'dg' : this.numero + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      return this.numero === undefined ? 'dg' : this.numero;\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      return this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isInciso, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarAlineaFilho, adicionarElementoAction, adicionarIncisoAntes, adicionarIncisoDepois, adicionarParagrafo } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  TransformarElemento,\n  transformarEmOmissisIncisoCaput,\n  transformarEmOmissisIncisoParagrafo,\n  transformarIncisoCaputEmAlinea,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmAlinea,\n  transformarIncisoParagrafoEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport { hasIndicativoFinalSequencia } from '../conteudo/conteudoUtil';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isInciso(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarElementoAction);\n      acoes.push(removerElementoAction);\n\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarIncisoAntes);\n      }\n      acoes.push(adicionarIncisoDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_INCISO);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_INCISO);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarAlineaFilho);\n      }\n      if (hasIndicativoFinalSequencia(dispositivo) && isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(adicionarParagrafo);\n      }\n\n      if (\n        isIncisoCaput(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && !isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoCaputEmAlinea);\n      }\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoCaputEmParagrafo);\n      }\n      if (isIncisoCaput(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoCaput);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isPrimeiroMesmoTipo(dispositivo))) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (\n        isIncisoParagrafo(dispositivo) &&\n        (!isPrimeiroMesmoTipo(dispositivo) || (getDispositivoAnterior(dispositivo) !== undefined && isOmissis(getDispositivoAnterior(dispositivo)!)))\n      ) {\n        acoes.push(transformarIncisoParagrafoEmAlinea);\n      }\n      if (isIncisoParagrafo(dispositivo) && podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisIncisoParagrafo);\n      }\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        acoes.push(transformarIncisoParagrafoEmParagrafo);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmAlinea;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmAlinea;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const complemento = isInciso(dispositivo) ? dispositivo.pai!.tipo : '';\n\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && (!isUnicoMesmoTipo(dispositivo) || !isPrimeiroMesmoTipo(dispositivo))\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + complemento + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!isInciso(dispositivo)) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport {\n  converteLetrasComplementoParaNumero,\n  converteNumeroArabicoParaRomano,\n  converteNumeroRomanoParaArabico,\n  converteNumerosComplementoParaLetra,\n  isNumeracaoValida,\n  isNumeracaoZero,\n  trataNumeroAndComplemento,\n} from './numeracaoUtil';\n\nexport function NumeracaoInciso<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoIncisoLcp95';\n    private SUFIXO = ' ';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /[CDILMVX]+(-[a-zA-Z0-9]+)*/.exec(numero);\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/-$/, '').trim();\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = trataNumeroAndComplemento(\n        this.normalizaNumeracao(rotulo!),\n        isNumeracaoZero(rotulo) ? null : converteNumeroRomanoParaArabico,\n        converteLetrasComplementoParaNumero\n      );\n      this.numero = isNumeracaoValida(temp) ? temp : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.inciso.name\n          : trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) +\n            this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerado]'; // TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + '';\n      }\n      return trataNumeroAndComplemento(this.numero, converteNumeroArabicoParaRomano, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + ' [ainda no numerado]';\n      }\n      return TipoDispositivo.inciso.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda(dispositivo);\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isItem, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarItemAntes, adicionarItemDepois } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport { TransformarElemento, transformarEmOmissisItem, transformarItemEmAlinea } from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { Regras } from './regras';\nimport { podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isItem(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarItemAntes);\n      }\n      acoes.push(adicionarItemDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo)) {\n        acoes.push(transformarItemEmAlinea);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisItem);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isItem) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { addSpaceRegex } from '../../../util/string-util';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { converteLetrasComplementoParaNumero, converteNumerosComplementoParaLetra, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoItem<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoItemLcp95';\n    private SUFIXO = '.';\n    numero?: string;\n    rotulo?: string;\n\n    private normalizaNumeracao(numero: string): string {\n      const num = /\\d+(-[a-zA-Z0-9]+)*/.exec(numero.trim());\n      return num ? num[0] : addSpaceRegex(numero).trim().replace(/\\.$/, '').trim();\n    }\n\n    private isNumeracaoValidaParaRotulo(numero: string): boolean {\n      return /^\\d{1,}(([-]?[a-zA-Z0-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.numero = this.isNumeracaoValidaParaRotulo(temp) ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero) : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      this.rotulo =\n        this.numero === undefined\n          ? TipoDispositivo.item.name\n          : trataNumeroAndComplemento(this.numero, undefined, dispositivo.isDispositivoAlteracao ? converteNumerosComplementoParaLetra : undefined) + this.SUFIXO;\n    }\n\n    getNumeracaoParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerado]'; // TipoDispositivo.item.descricao?.toLowerCase() + '';\n      }\n      return this.rotulo!.trim().replace('.', '');\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.item.descricao?.toLocaleLowerCase() + ' [ainda no numerado]';\n      }\n      return TipoDispositivo.item.descricao?.toLocaleLowerCase() + ' ' + this.getNumeracaoParaComandoEmenda();\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isAlinea, isIncisoCaput, isIncisoParagrafo, isOmissis, isParagrafo, isTextoOmitido } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida } from '../acao/acaoUtil';\nimport { adicionarIncisoFilho, adicionarParagrafoAntes, adicionarParagrafoDepois } from '../acao/adicionarElementoAction';\nimport { adicionarTextoOmissisAction } from '../acao/adicionarTextoOmissisAction';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport { removerTextoOmissisAction } from '../acao/removerTextoOmissisAction';\nimport { renumerarElementoAction } from '../acao/renumerarElementoAction';\nimport {\n  transformarAlineaEmIncisoCaput,\n  transformarAlineaEmIncisoParagrafo,\n  TransformarElemento,\n  transformarEmOmissisParagrafo,\n  transformarIncisoCaputEmParagrafo,\n  transformarIncisoParagrafoEmParagrafo,\n  transformarParagrafoEmArtigo,\n  transformarParagrafoEmIncisoCaput,\n  transformarParagrafoEmIncisoParagrafo,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isDispositivoNovoNaNormaAlterada,\n  isPrimeiroMesmoTipo,\n  isSuprimido,\n  isUltimaAlteracao,\n  isUltimoMesmoTipo,\n  isUnicoMesmoTipo,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { Regras } from './regras';\nimport { MotivosOperacaoNaoPermitida, podeConverterEmOmissis } from './regrasUtil';\n\nexport function RegrasParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isParagrafo(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n      if (!isDispositivoAlteracao(dispositivo) || dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || dispositivo.numero !== '1') {\n        acoes.push(adicionarParagrafoAntes);\n      }\n      acoes.push(adicionarParagrafoDepois);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_PARAGRAFO);\n      }\n\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      } else {\n        verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida(dispositivo, MotivosOperacaoNaoPermitida.PROXIMO_DIFERENTE_PARAGRAFO);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && !isDispositivoNovoNaNormaAlterada(dispositivo.pai!)) {\n        acoes.push(renumerarElementoAction);\n      }\n      if (!isSuprimido(dispositivo)) {\n        acoes.push(adicionarIncisoFilho);\n      }\n      if ((isPrimeiroMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) && (!getDispositivoAnterior(dispositivo) || !isOmissis(getDispositivoAnterior(dispositivo)!))) {\n        acoes.push(transformarParagrafoEmIncisoCaput);\n      }\n      if (!isPrimeiroMesmoTipo(dispositivo) && isParagrafo(getDispositivoAnterior(dispositivo)!)) {\n        acoes.push(transformarParagrafoEmIncisoParagrafo);\n      }\n      if (isUltimoMesmoTipo(dispositivo) || isUnicoMesmoTipo(dispositivo)) {\n        acoes.push(transformarParagrafoEmArtigo);\n      }\n      if (podeConverterEmOmissis(dispositivo)) {\n        acoes.push(transformarEmOmissisParagrafo);\n      }\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada ? acoes.push(considerarElementoNovoNaNorma) : acoes.push(considerarElementoExistenteNaNorma);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && !isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(adicionarTextoOmissisAction);\n      }\n\n      if (dispositivo.isDispositivoAlteracao && isTextoOmitido(dispositivo) && !isSuprimido(dispositivo)) {\n        acoes.push(removerTextoOmissisAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      if (!isParagrafo(dispositivo)) {\n        return undefined;\n      }\n      return dispositivo.tiposPermitidosFilhos?.map(tipo => {\n        const destino = tipo.endsWith(TipoDispositivo.inciso.name!)\n          ? isParagrafo(dispositivo) && !isUnicoMesmoTipo(dispositivo) && !isPrimeiroMesmoTipo(dispositivo) && isParagrafo(getDispositivoAnterior(dispositivo)!)\n            ? 'IncisoParagrafo'\n            : 'IncisoCaput'\n          : tipo;\n\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + destino;\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      if (!dispositivo.tiposPermitidosFilhos) {\n        return undefined;\n      }\n\n      if (isIncisoCaput(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoCaputEmParagrafo;\n      }\n\n      if (isIncisoParagrafo(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return transformarIncisoParagrafoEmParagrafo;\n      }\n\n      if (isAlinea(dispositivo) && (isUnicoMesmoTipo(dispositivo) || isUltimoMesmoTipo(dispositivo))) {\n        return isParagrafo(dispositivo.pai!.pai!) ? transformarAlineaEmIncisoParagrafo : transformarAlineaEmIncisoCaput;\n      }\n\n      return dispositivo.tiposPermitidosPai?.map(tipo => {\n        const acao = 'transformar' + dispositivo.tipo + 'Em' + tipo;\n\n        return dispositivo\n          .getAcoesPossiveis(dispositivo)\n          .filter(a => a instanceof TransformarElemento)\n          .filter(a => a instanceof TransformarElemento && a.nomeAcao && acao && a.nomeAcao === acao)[0];\n      })[0];\n    }\n  };\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { Numeracao } from '../../dispositivo/numeracao';\nimport { isParagrafo } from '../../dispositivo/tipo';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { isDispositivoNovoNaNormaAlterada } from './../hierarquia/hierarquiaUtil';\nimport { converteLetrasComplementoParaNumero, converteNumeroArabicoParaLetra, isNumeracaoValida, trataNumeroAndComplemento } from './numeracaoUtil';\n\nexport function NumeracaoParagrafo<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Numeracao {\n    type = 'NumeracaoParagrafoLcp95';\n    private PREFIXO = ' ';\n    private SUFIXO = '';\n    private PARAGRAFO_UNICO = 'Pargrafo nico.';\n    numero?: string;\n    rotulo?: string;\n    informouParagrafoUnico = false;\n\n    private normalizaNumeracao(numero: string): string {\n      return numero\n        .trim()\n        .replace(/\\./g, '')\n        .replace(//i, '')\n        .replace(/par[a]grafo [u]nico/i, '1')\n        .replace(/[]/i, '')\n        .trim();\n    }\n\n    private isNumeracaoComComplementoAlfabetico(numero: string): boolean {\n      return /^\\d{1,}[]?(([-]?[a-zA-Z]+){0,2})$/.test(numero);\n    }\n\n    private isNumeracaoComComplementoNumerico(numero: string): boolean {\n      return /^\\d{1,}[]?(([-]?[1-9]+){0,2})$/.test(numero);\n    }\n\n    createNumeroFromRotulo(rotulo: string): void {\n      const temp = this.normalizaNumeracao(rotulo!);\n      this.informouParagrafoUnico = /.*[u]nico/i.test(rotulo);\n      this.numero = this.informouParagrafoUnico\n        ? '1'\n        : this.isNumeracaoComComplementoAlfabetico(temp)\n        ? trataNumeroAndComplemento(temp, undefined, converteLetrasComplementoParaNumero)\n        : this.isNumeracaoComComplementoNumerico(temp)\n        ? temp\n        : undefined;\n    }\n\n    createRotulo(dispositivo: Dispositivo): void {\n      if (this.numero === undefined || !dispositivo) {\n        this.rotulo = TipoDispositivo.paragrafo.name;\n      } else if (!isNumeracaoValida(this.numero)) {\n        this.rotulo = this.getNumeroAndSufixoNumeracao(dispositivo);\n      } else if (dispositivo.isDispositivoAlteracao) {\n        if (isDispositivoNovoNaNormaAlterada(dispositivo)) {\n          dispositivo.pai?.filhos.filter(f => isParagrafo(f)).length === 1\n            ? (this.rotulo = this.PARAGRAFO_UNICO)\n            : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n        } else {\n          this.rotulo = this.informouParagrafoUnico ? this.PARAGRAFO_UNICO : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo);\n        }\n      } else {\n        dispositivo.pai?.filhos.filter(f => isParagrafo(f)).length === 1\n          ? (this.rotulo = this.PARAGRAFO_UNICO)\n          : (this.rotulo = this.PREFIXO + this.numero === undefined ? undefined : this.PREFIXO + this.getNumeroAndSufixoNumeracao(dispositivo));\n      }\n    }\n\n    private getNumeroAndSufixoNumeracao(dispositivo: Dispositivo, paraComandoEmenda = false): string {\n      const partes = this.numero?.split('-');\n      const [num, ...remaining] = partes!;\n      const ordinal = parseInt(num ?? '1', 10) < 10;\n      return (\n        (ordinal ? num + this.SUFIXO : num) +\n        (remaining.length > 0\n          ? '-' +\n            remaining\n              ?.map(str => (dispositivo.isDispositivoAlteracao ? converteNumeroArabicoParaLetra(str) : str))\n              .join('-')\n              .toUpperCase()\n          : '') +\n        (!paraComandoEmenda && (!ordinal || remaining.length) ? '.' : '')\n      );\n    }\n\n    getNumeracaoParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return '[ainda no numerado]'; // TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + '';\n      }\n      return this.isParagrafoUnico() ? 'pargrafo nico' : this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    getNumeracaoComRotuloParaComandoEmenda(dispositivo: Dispositivo): string {\n      if (this.numero === undefined) {\n        return TipoDispositivo.paragrafo.descricao?.toLocaleLowerCase() + ' [ainda no numerado]';\n      }\n      return this.isParagrafoUnico() ? 'pargrafo nico' : ' ' + this.getNumeroAndSufixoNumeracao(dispositivo, true);\n    }\n\n    private isParagrafoUnico(): boolean {\n      return (this.isDispositivoAlteracao && this.rotulo?.includes('nico')) || (!this.isDispositivoAlteracao && this.pai?.filhos.filter(f => isParagrafo(f)).length === 1);\n    }\n  };\n}\n","import { Artigo, Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../dispositivo/situacao';\nimport { isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\nimport { calculaNumeracao } from '../numeracao/numeracaoUtil';\nimport { buildId } from '../util/idUtil';\nimport { TipoLexml } from './tipoLexml';\n\nexport class TipoArticulacao extends TipoLexml {\n  _artigos?: Artigo[];\n\n  constructor() {\n    super('articulacao');\n  }\n\n  get artigos(): Artigo[] {\n    return this._artigos ?? [];\n  }\n\n  addArtigo(artigo: Artigo, referencia?: Dispositivo): void {\n    this._artigos = this._artigos ?? [];\n    referencia !== undefined ? this._artigos.splice(this._artigos.indexOf(referencia as Artigo) + 1, 0, artigo) : this._artigos.push(artigo);\n  }\n\n  addArtigoOnPosition(filho: Dispositivo, posicao: number): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos.splice(posicao, 0, filho as Artigo);\n  }\n\n  removeArtigo(artigo: Artigo): void {\n    this._artigos = this._artigos ?? [];\n    this._artigos = this._artigos.filter(f => f.uuid !== artigo.uuid);\n  }\n\n  renumeraArtigos(): void {\n    this.artigos\n      .filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n      .forEach(filho => {\n        if (!isDispositivoAlteracao(filho)) {\n          filho.numero = calculaNumeracao(filho);\n        }\n        filho.createRotulo(filho);\n        filho.id = buildId(filho);\n        const caput = (filho as Artigo).caput;\n        if (caput) {\n          caput.id = buildId(caput);\n        }\n      });\n  }\n\n  indexOfArtigo(artigo: Artigo): number {\n    return this.artigos.indexOf(artigo);\n  }\n}\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAgrupador, isAlinea, isArticulacao, isArtigo, isCaput, isInciso, isOmissis, isParagrafo } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { atualizarNotaAlteracaoAction } from '../acao/atualizarNotaAlteracaoAction';\nimport { iniciarBlocoAlteracao } from '../acao/blocoAlteracaoAction';\nimport { moverElementoAbaixoAction } from '../acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../acao/moverElementoAcimaAction';\nimport { removerElementoAction } from '../acao/removerElementoAction';\nimport {\n  transformarOmissisEmAlinea,\n  transformarOmissisEmArtigo,\n  transformarOmissisEmIncisoCaput,\n  transformarOmissisEmIncisoParagrafo,\n  transformarOmissisEmItem,\n  transformarOmissisEmParagrafo,\n} from '../acao/transformarElementoAction';\nimport {\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipoInclusiveOmissis,\n  getDispositivoPosteriorMesmoTipoInclusiveOmissis,\n  isDispositivoAlteracao,\n  isUltimaAlteracao,\n  podeEditarNotaAlteracao,\n} from '../hierarquia/hierarquiaUtil';\nimport { Regras } from './regras';\n\nexport function RegrasOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isOmissis(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(removerElementoAction);\n\n      if (getDispositivoPosteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAbaixoAction);\n      }\n      if (getDispositivoAnteriorMesmoTipoInclusiveOmissis(dispositivo) !== undefined) {\n        acoes.push(moverElementoAcimaAction);\n      }\n\n      if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n        acoes.push(iniciarBlocoAlteracao);\n      }\n\n      if (isArticulacao(dispositivo.pai!) && getDispositivoAnterior(dispositivo) !== undefined) {\n        acoes.push(transformarOmissisEmArtigo);\n      }\n\n      if (isDispositivoAlteracao(dispositivo.pai!) && isDispositivoAlteracao(dispositivo) && isAgrupador(dispositivo.pai!) && !isArticulacao(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmArtigo);\n      }\n\n      if (isCaput(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoCaput);\n      }\n      if (isArtigo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmParagrafo);\n      }\n      if (isParagrafo(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmIncisoParagrafo);\n      }\n      if (isInciso(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmAlinea);\n      }\n      if (isAlinea(dispositivo.pai!)) {\n        acoes.push(transformarOmissisEmItem);\n      }\n\n      if (podeEditarNotaAlteracao(dispositivo)) {\n        acoes.push(atualizarNotaAlteracaoAction);\n      }\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Conteudo } from '../../dispositivo/conteudo';\nimport { normalizaSeForOmissis, TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO } from './conteudoUtil';\nimport { TEXTO_OMISSIS } from './textoOmissis';\nimport { TipoConteudo } from './tipoConteudo';\n\nexport function ConteudoOmissis<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Conteudo {\n    readonly tipoConteudo = TipoConteudo.ConteudoTexto;\n    _texto = TEXTO_OMISSIS;\n\n    get texto(): string {\n      return this._texto;\n    }\n\n    set texto(texto: string) {\n      const t = normalizaSeForOmissis(texto);\n      this._texto = t === TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO ? TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO : TEXTO_OMISSIS;\n    }\n  };\n}\n","// import { adicionarAgrupadorArtigoAction } from './../acao/adicionarAgrupadorArtigoAction';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isEmenta } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { adicionarAgrupadorArtigoAction } from '../acao/adicionarAgrupadorArtigoAction';\nimport { adicionarArtigoDepois } from '../acao/adicionarElementoAction';\nimport { Regras } from './regras';\n\nexport function RegrasEmenta<TBase extends Constructor>(Base: TBase): any {\n  return class extends Base implements Regras {\n    getAcoesPossiveis(dispositivo: Dispositivo): ElementoAction[] {\n      const acoes: ElementoAction[] = [];\n\n      if (!isEmenta(dispositivo)) {\n        return [];\n      }\n\n      acoes.push(adicionarArtigoDepois);\n      acoes.push(adicionarAgrupadorArtigoAction);\n\n      return dispositivo.getAcoesPermitidas(dispositivo, acoes);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    getAcaoPossivelShiftTab(dispositivo: Dispositivo): any {\n      return undefined;\n    }\n  };\n}\n","import { Artigo } from './../../dispositivo/dispositivo';\nimport { Dispositivo } from '../../dispositivo/dispositivo';\nimport { isAlinea, isArtigo, Tipo } from '../../dispositivo/tipo';\nimport { ClassificacaoDocumento } from '../../documento/classificacao';\nimport { createAlteracao, createArticulacao, criaDispositivo, criaDispositivoCabecaAlteracao } from '../dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../dispositivo/dispositivoValidator';\nimport { DispositivoAdicionado } from '../situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { buildId } from '../util/idUtil';\n\nexport interface ReferenciaDispositivo {\n  tipo: Tipo;\n  numero?: string;\n}\n\nconst regex = new Map();\nregex.set('Alinea', /(al[i]nea|ali.?\\s)\\s*([u]nica|[a-z]+[)]?(?:-[a-z])?).*/i);\nregex.set('Artigo', /(art\\.?|artigo)\\s*([u]nico\\s*|\\d+(?:-[a-z])?).*/i);\nregex.set('Inciso', /(inciso|inc.?\\s)\\s*([u]nico|[MDCLXVI]+[)]?(?:-[a-z])?).*/i);\nregex.set('Item', /(item)\\s*([u]nico\\s*|\\d+(?:-[a-z])?).*/i);\nregex.set('Paragrafo', /(|par[a]grafo|par.?\\s)\\s*([u]nico\\s*|\\d+(?:-[a-z])?).*/i);\n\nconst processaFilhos = (dispositivo: Dispositivo, referencias: ReferenciaDispositivo[], modo?: ClassificacaoDocumento): void => {\n  let parent = dispositivo;\n  referencias?.forEach(referencia => {\n    if (!parent.tiposPermitidosFilhos?.includes(referencia.tipo?.tipo)) {\n      if (referencia.numero && referencia.numero.match(/\\d.*/)) {\n        parent = criaDispositivo(parent, isArtigo(parent) ? TipoDispositivo.paragrafo.tipo : isAlinea(parent) ? TipoDispositivo.item.tipo : TipoDispositivo.generico.tipo);\n        referencia.numero && parent.createNumeroFromRotulo(referencia.numero);\n        parent.createRotulo(parent);\n      } else {\n        parent = criaDispositivo(parent, TipoDispositivo.generico.tipo);\n        parent.rotulo = referencia.numero!;\n      }\n    } else {\n      parent = criaDispositivo(parent, referencia.tipo.tipo);\n      referencia.numero && parent.createNumeroFromRotulo(referencia.numero);\n      parent.createRotulo(parent);\n    }\n    if (modo) {\n      (parent.situacao as DispositivoAdicionado).tipoEmenda = modo;\n    }\n    parent.isDispositivoAlteracao = true;\n    parent.situacao = new DispositivoAdicionado();\n    (parent.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n    parent.id = buildId(parent);\n\n    if (isArtigo(parent)) {\n      (parent as Artigo).caput!.situacao = new DispositivoAdicionado();\n      if (modo) {\n        ((parent as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n      }\n    }\n    parent.mensagens = validaDispositivo(parent);\n  });\n};\n\nconst buildCabecaAlteracao = (dispositivo: Dispositivo, referencia: ReferenciaDispositivo, modo): Dispositivo => {\n  if (!dispositivo.hasAlteracao()) {\n    createAlteracao(dispositivo);\n    dispositivo.alteracoes!.situacao = new DispositivoAdicionado();\n    (dispositivo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  }\n  const cabeca = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, dispositivo.alteracoes!, undefined, 0);\n  cabeca.isDispositivoAlteracao = true;\n  cabeca.situacao = new DispositivoAdicionado();\n  (cabeca.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  (cabeca.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n  referencia.numero && cabeca.createNumeroFromRotulo(referencia.numero);\n  cabeca.createRotulo(cabeca);\n  cabeca.id = buildId(cabeca);\n\n  if (isArtigo(cabeca)) {\n    (cabeca as Artigo).caput!.situacao = new DispositivoAdicionado();\n    ((cabeca as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  }\n\n  return cabeca;\n};\n\nexport const buildDispositivosAssistente = (texto: string, dispositivo: Dispositivo, modo = ClassificacaoDocumento.EMENDA): Dispositivo => {\n  const referencias = identificaReferencias(texto);\n  let artigoInformado = true;\n\n  if (!referencias || referencias.length === 0) {\n    throw new Error('No foi possvel informado o dispositivo');\n  }\n\n  if (referencias[0].tipo !== TipoDispositivo.artigo) {\n    if (referencias.reverse()[0].tipo !== TipoDispositivo.artigo) {\n      artigoInformado = false;\n    }\n  }\n  const c = artigoInformado ? referencias.shift() : undefined;\n  const cabeca = buildCabecaAlteracao(dispositivo, c ?? { tipo: TipoDispositivo.artigo }, modo);\n\n  processaFilhos(cabeca, referencias, modo);\n\n  return cabeca;\n};\n\nexport const validaDispositivoAssistente = (texto: string): Dispositivo => {\n  return buildDispositivosAssistente(texto, criaDispositivo(createArticulacao(), TipoDispositivo.artigo.tipo));\n};\n\nconst identificaTipo = (texto: string): Tipo | undefined => {\n  if (texto.trim().match(/ali|al[i]nea.*/i)) {\n    return TipoDispositivo.alinea;\n  }\n  if (texto.trim().match(/art[igo]?.*/i)) {\n    return TipoDispositivo.artigo;\n  }\n\n  if (texto.trim().match(/inc|inciso.*/i)) {\n    return TipoDispositivo.inciso;\n  }\n\n  if (texto.trim().match(/item.*/i)) {\n    return TipoDispositivo.item;\n  }\n\n  if (texto.trim().match(/|par[grafo]?.*/i)) {\n    return TipoDispositivo.paragrafo;\n  }\n\n  return;\n};\n\nexport const buildReferencia = (texto: string, tipoDispositivo?: Tipo): ReferenciaDispositivo => {\n  const tipo = tipoDispositivo ?? identificaTipo(texto);\n\n  if (!tipo) {\n    throw new Error(`No pude identificar o tipo em ${texto}`);\n  }\n\n  const r = regex.get(tipo.tipo);\n\n  if (!r) {\n    throw new Error(`Tipo no suportado: ${tipo.descricao}`);\n  }\n\n  const matches = texto?.trim().match(r);\n\n  if (matches && matches.length === 3) {\n    return { tipo, numero: matches[2] };\n  }\n\n  return { tipo, numero: undefined };\n};\n\n// const normaliza = (p: string[]): string[] => {\n//   for (let i = 0; i < p.length - 1; i += 2) {\n//     const tipo = identificaTipo(p[i]);\n\n//     if (tipo === TipoDispositivo.generico) {\n//       if (isRomano(p[i][0].trim())) {\n//         p.splice(i, 0, 'inciso');\n//       } else if (isLetra(p[i][0].trim())) {\n//         p.splice(i, 0, 'alinea');\n//       } else {\n//         p.splice(i, 0, 'generico');\n//       }\n//       continue;\n//     }\n//   }\n//   return p;\n// };\n\nexport const identificaReferencias = (texto: string): ReferenciaDispositivo[] | undefined => {\n  const resultParser = new ReferenciaDispositivoParser(texto);\n  if (resultParser.valido) {\n    return resultParser.referencias;\n  }\n  return undefined;\n  // let p = texto\n  //   .replace(',', '')\n  //   .replace('', '')\n  //   .replace(/\\s+d[ao]+\\s+/gi, ' ')\n  //   .replace(/\\s*caput\\s*/, ' ')\n  //   .split(' ')\n  //   .filter(e => e.length !== 0);\n\n  // p = normaliza(p);\n\n  // const resultado: ReferenciaDispositivo[] = [];\n\n  // for (let i = 0, j = 1; i < p.length - 1, j <= p.length - 1; i += 2, j += 2) {\n  //   const tipo = identificaTipo(p[i]);\n\n  //   if (!tipo) {\n  //     throw new Error(`No pude identificar o tipo no texto informado: ${p[i]}`);\n  //   }\n  //   const r = regex.get(tipo.tipo);\n\n  //   if (!r) {\n  //     resultado.push({ tipo, numero: p[j] });\n  //     continue;\n  //   }\n\n  //   const matches = `${p[i]} ${p[j]}`.match(r);\n\n  //   if (matches && matches.length === 3) {\n  //     resultado.push({ tipo, numero: matches[2] });\n  //   } else {\n  //     resultado.push({ tipo, numero: undefined });\n  //   }\n  // }\n\n  // return resultado;\n};\n\nexport class ReferenciaDispositivoParser {\n  valido = false;\n\n  referencias: ReferenciaDispositivo[] = [];\n\n  private regexEncaixe = '(?:-[a-z]+){0,3}';\n  private regexArtigo = `(art|artigo)\\\\s([u]nico|\\\\d+${this.regexEncaixe})`;\n  private regexParagrafo = `(|par[a]grafo|par)\\\\s([u]nico|\\\\d+${this.regexEncaixe})`;\n  private regexInciso = `(inciso|inc)\\\\s([u]nico|X{0,3}(?:IX|IV|[XV]?I{0,3})${this.regexEncaixe})`;\n  private regexAlinea = `(al[i]nea|al[i])\\\\s([a-z]+${this.regexEncaixe})`;\n  private regexItem = `(item)\\\\s(\\\\d+${this.regexEncaixe})`;\n\n  private regex = `^(?:(?:(?:(?:${this.regexItem}\\\\s)?(?:${this.regexAlinea}\\\\s))?(?:${this.regexInciso}\\\\s))?(?:${this.regexParagrafo}\\\\s)?)?(?:${this.regexArtigo})$`;\n\n  constructor(private texto) {\n    this.parse();\n  }\n\n  private parse(): void {\n    this.preparaTexto();\n\n    const execArray = new RegExp(this.regex, 'gi').exec(this.texto);\n\n    if (execArray) {\n      this.valido = true;\n      const p = execArray.slice(1).filter(s => s !== undefined);\n\n      for (let i = 0, j = 1; i < p.length - 1, j <= p.length - 1; i += 2, j += 2) {\n        const tipo = identificaTipo(p[i]);\n\n        if (!tipo) {\n          throw new Error(`No pude identificar o tipo no texto informado: ${p[i]}`);\n        }\n        this.referencias.push({ tipo, numero: p[j] });\n      }\n    }\n  }\n\n  private preparaTexto(): void {\n    this.texto = this.texto\n      .toLowerCase()\n      .replace(/[\\\\.]/g, '')\n      .replace(/[,;]/g, ' ')\n      .replace(/\\sd[ao]\\s/g, ' ')\n      .replace(/\\scaput\\s/g, ' ')\n      .replace(/\\s+/g, ' ')\n      .trim();\n  }\n}\n","export const ATIVAR_DESATIVAR_REVISAO = 'ATIVAR_DESATIVAR_REVISAO';\n\nexport class AtivarDesativarRevisao {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Ativar/Desativar reviso';\n  }\n\n  execute(quantidade = 0): any {\n    return {\n      type: ATIVAR_DESATIVAR_REVISAO,\n      quantidade: quantidade,\n    };\n  }\n}\n\nexport const ativarDesativarRevisaoAction = new AtivarDesativarRevisao();\n","export enum Modo {\n  JUSTIFICATIVA = 'justificativa',\n  TEXTO_LIVRE = 'textoLivre',\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n}\n","import { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isCaput } from '../../../model/dispositivo/tipo';\nimport { Elemento, Referencia } from '../../../model/elemento';\nimport { getDispositivoFromElemento, createElemento } from '../../../model/elemento/elementoUtil';\nimport { ADICIONAR_ELEMENTO } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { ADICIONAR_ELEMENTOS_FROM_CLIPBOARD } from '../../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { ativarDesativarRevisaoAction } from '../../../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { ATUALIZAR_TEXTO_ELEMENTO } from '../../../model/lexml/acao/atualizarTextoElementoAction';\nimport { MOVER_ELEMENTO_ABAIXO } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { MOVER_ELEMENTO_ACIMA } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { REMOVER_ELEMENTO } from '../../../model/lexml/acao/removerElementoAction';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { SUPRIMIR_ELEMENTO } from '../../../model/lexml/acao/suprimirElemento';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { getDispositivoAndFilhosAsLista, getUltimoFilho, isArticulacaoAlteracao, isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Modo } from '../enum/enumUtil';\nimport { unificarEvento } from '../evento/eventosUtil';\nimport { buildPast } from './stateReducerUtil';\n\nexport const getRevisoesElemento = (revisoes: Revisao[] = []): RevisaoElemento[] => {\n  return revisoes.filter(isRevisaoElemento).map(r => r as RevisaoElemento);\n};\n\nexport const findRevisaoById = (revisoes: Revisao[] = [], idRevisao: string): Revisao | undefined => {\n  return revisoes?.find(r => r.id === idRevisao);\n};\n\nexport const findRevisaoByElementoUuid = (revisoes: Revisao[] = [], uuid = 0): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid === uuid)\n    .slice(-1)[0];\n};\n\nexport const findRevisaoByElementoUuidAndStateType = (revisoes: Revisao[] = [], uuid = 0, stateType: StateType): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid === uuid && r.stateType === stateType)\n    .slice(-1)[0];\n};\n\nexport const findRevisaoByElementoUuid2 = (revisoes: Revisao[] = [], uuid2 = ''): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.uuid2 === uuid2)\n    .slice(-1)[0];\n};\n\nexport const findRevisoesByElementoUuid = (revisoes: Revisao[] = [], uuid = 0): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.uuid === uuid);\n};\n\nexport const findRevisoesByElementoUuid2 = (revisoes: Revisao[] = [], uuid2 = ''): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.uuid2 === uuid2);\n};\n\nexport const findRevisoesByElementoLexmlId = (revisoes: Revisao[] = [], lexmlId = ''): RevisaoElemento[] => {\n  return getRevisoesElemento(revisoes).filter(r => r.elementoAposRevisao.lexmlId === lexmlId);\n};\n\nexport const findRevisaoByElementoLexmlId = (revisoes: Revisao[] = [], lexmlId = '?'): RevisaoElemento | undefined => {\n  return getRevisoesElemento(revisoes)\n    .filter(r => r.elementoAposRevisao.lexmlId === lexmlId)\n    .slice(-1)[0];\n};\n\nexport const existeRevisaoParaElementos = (revisoes: Revisao[] = [], elementos: Elemento[]): boolean => {\n  const revisoesElemento = getRevisoesElemento(revisoes);\n  return elementos.some(e => revisoesElemento.some(r => r.elementoAposRevisao.uuid === e.uuid));\n};\n\nexport const identificarRevisaoElementoPai = (state: State, revisoes: Revisao[]): Revisao[] => {\n  const result: Revisao[] = [];\n\n  revisoes?.forEach(r => {\n    if (isRevisaoElemento(r)) {\n      const rAux = r as RevisaoElemento;\n      const uuidPai = rAux.stateType === StateType.ElementoIncluido ? getUuidPaiElementoRevisado(state, rAux) : rAux.elementoAntesRevisao?.hierarquia?.pai?.uuid;\n      const rPai = uuidPai ? findRevisaoByElementoUuid(rAux.actionType === ADICIONAR_ELEMENTO ? state.revisoes : revisoes, uuidPai) : undefined;\n      if (rPai && isRevisaoMesmaSituacao(rAux, rPai)) {\n        rAux.idRevisaoElementoPai = rPai.id;\n        rAux.idRevisaoElementoPrincipal = findRevisaoElementoPrincipal(state, revisoes!, rPai)?.id;\n      }\n    }\n    result.push(r);\n  });\n\n  return result;\n};\n\nexport const findRevisaoElementoPrincipal = (state: State, revisoes: Revisao[], rPai: RevisaoElemento): RevisaoElemento | undefined => {\n  const uuid = rPai.stateType === StateType.ElementoIncluido ? getUuidPaiElementoRevisado(state, rPai) : rPai.elementoAntesRevisao?.hierarquia?.pai?.uuid;\n  const rAux = rPai && findRevisaoByElementoUuid(revisoes, uuid);\n  return rAux ? findRevisaoElementoPrincipal(state, revisoes, rAux) : rPai;\n};\n\nexport const buildDescricaoRevisao = (revisao: Revisao): string => {\n  return isRevisaoElemento(revisao) ? buildDescricaoRevisaoElemento(revisao as RevisaoElemento) : buildDescricaoRevisaoTexto(revisao);\n};\n\nconst mapperActionTypeToDescricao = {\n  [ADICIONAR_ELEMENTO]: (): string => 'Dispositivo adicionado',\n  [REMOVER_ELEMENTO]: (): string => 'Dispositivo removido',\n  [SUPRIMIR_ELEMENTO]: (): string => 'Dispositivo suprimido',\n  [ATUALIZAR_TEXTO_ELEMENTO]: (): string => 'Texto do dispositivo foi alterado',\n  [MOVER_ELEMENTO_ABAIXO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromMovimentacaoElemento(revisao),\n  [MOVER_ELEMENTO_ACIMA]: (): string => 'Dispositivo movido',\n  [RESTAURAR_ELEMENTO]: (): string => 'Dispositivo restaurado',\n  [ADICIONAR_ELEMENTOS_FROM_CLIPBOARD]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n  [UNDO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n  [REDO]: (revisao: RevisaoElemento): string => buildDescricaoRevisaoFromStateType(revisao),\n};\n\nconst mapperStateTypeToDescricao = {\n  [StateType.ElementoIncluido]: (): string => 'Dispositivo adicionado',\n  [StateType.ElementoRemovido]: (): string => 'Dispositivo removido',\n  [StateType.ElementoRestaurado]: (): string => 'Dispositivo restaurado',\n  [StateType.ElementoModificado]: (): string => 'Texto do dispositivo foi alterado',\n  [StateType.ElementoSuprimido]: (): string => 'Dispositivo suprimido',\n  // [StateType.ElementoMovido]: (): string => 'Dispositivo movido',\n};\n\nexport const buildDescricaoRevisaoElemento = (revisao: RevisaoElemento): string => {\n  const fn = mapperActionTypeToDescricao[revisao.actionType];\n  return fn ? mapperActionTypeToDescricao[revisao.actionType](revisao) : buildDescricaoRevisaoFromStateType(revisao);\n};\n\nexport const buildDescricaoRevisaoTexto = (revisao: Revisao): string => {\n  return revisao.descricao ?? '';\n};\n\nexport const buildDescricaoRevisaoFromMovimentacaoElemento = (revisao: RevisaoElemento): string => {\n  const { tipo, rotulo } = revisao.elementoAntesRevisao || { tipo: '', numero: 0 };\n  return `Dispositivo movido${tipo ? ` (antes era \"${tipo} ${rotulo}\")` : ''}`;\n};\n\nexport const buildDescricaoRevisaoFromStateType = (revisao: RevisaoElemento, elementoAposRevisao?: Elemento): string => {\n  const isUndoRedoDeMovimentacao = revisao.elementoAntesRevisao && elementoAposRevisao && revisao.elementoAntesRevisao.numero !== elementoAposRevisao.numero;\n  return isUndoRedoDeMovimentacao ? buildDescricaoRevisaoFromMovimentacaoElemento(revisao) : mapperStateTypeToDescricao[revisao.stateType]();\n};\n\nconst getUuidPaiElementoRevisado = (state: State, revisao: RevisaoElemento): number => {\n  // return revisao.elementoAposRevisao.hierarquia?.pai?.uuid || 0;\n  return getUuidPai(state, revisao.elementoAposRevisao) || 0;\n};\n\nconst getUuidPai = (state: State, elemento?: Partial<Elemento>): number | undefined => {\n  const d = getDispositivoFromElemento(state.articulacao!, elemento!)!;\n  if (!d) {\n    return undefined;\n  } else if (isDispositivoAlteracao(d)) {\n    return isArticulacaoAlteracao(d.pai!) || isCaput(d.pai!) ? d.pai?.pai?.uuid : d.pai?.uuid;\n  } else {\n    return isCaput(d.pai!) ? d.pai?.pai?.uuid : d.pai?.uuid;\n  }\n};\n\nconst isRevisaoMesmaSituacao = (r: RevisaoElemento, rPai: RevisaoElemento): boolean => {\n  // return r.stateType !== StateType.ElementoModificado && rPai.elementoAntesRevisao?.descricaoSituacao === r.elementoAntesRevisao?.descricaoSituacao;\n  return (\n    r.stateType !== StateType.ElementoModificado && rPai.elementoAntesRevisao?.descricaoSituacao === r.elementoAntesRevisao?.descricaoSituacao && r.stateType === rPai.stateType\n  );\n};\n\nexport const getRevisoesElementoAssociadas = (revisoes: Revisao[] = [], revisao: RevisaoElemento): RevisaoElemento[] => {\n  return [revisao, ...getRevisoesElemento(revisoes).filter(r => r.idRevisaoElementoPrincipal === revisao.id)];\n};\n\nexport const getElementosFromRevisoes = (revisoes: Revisao[] = [], state?: State): Elemento[] => {\n  return revisoes.filter(isRevisaoElemento).map(r => {\n    const e = (r as RevisaoElemento).elementoAposRevisao! as Elemento;\n    return state ? createElemento(getDispositivoFromElemento(state.articulacao!, e)!) : e;\n  });\n};\n\nexport const getRevisoesFromElementos = (elementos: Elemento[] = []): RevisaoElemento[] => elementos!.map(e => e.revisao! as RevisaoElemento);\n\nexport const isRevisaoElemento = (revisao: Revisao): boolean => 'elementoAposRevisao' in revisao;\n\nexport const isRevisaoJustificativa = (revisao: Revisao): boolean => !isRevisaoElemento(revisao);\n\nexport const existeFilhoExcluidoDuranteRevisao = (state: State, dispositivo: Dispositivo): boolean => {\n  if (!state.revisoes?.length) {\n    return false;\n  }\n  const uuids = getDispositivoAndFilhosAsLista(dispositivo).map(d => d.uuid);\n  return state.revisoes\n    .filter(r => isRevisaoElemento(r) && isRevisaoDeExclusao(r as RevisaoElemento))\n    .map(r => r as RevisaoElemento)\n    .some(r => uuids.includes(r.elementoAntesRevisao?.uuid) || uuids.includes(r.elementoAntesRevisao?.hierarquia?.pai?.uuid));\n};\n\nexport const existeFilhoExcluidoOuAlteradoDuranteRevisao = (state: State, dispositivo: Dispositivo): boolean => {\n  if (!state.revisoes?.length) {\n    return false;\n  }\n  const uuids = getDispositivoAndFilhosAsLista(dispositivo).map(d => d.uuid);\n  return state.revisoes\n    .filter(isRevisaoElemento)\n    .map(r => r as RevisaoElemento)\n    .some(r => uuids.includes(r.elementoAntesRevisao?.uuid) || uuids.includes(r.elementoAntesRevisao?.hierarquia?.pai?.uuid));\n};\n\nexport const isRevisaoPrincipal = (revisao: Revisao): boolean => isRevisaoElemento(revisao) && !(revisao as RevisaoElemento).idRevisaoElementoPrincipal;\n\nexport const existeRevisaoCriadaPorExclusao = (revisoes: Revisao[] = []): boolean => revisoes.some(r => isRevisaoDeExclusao(r as RevisaoElemento));\n\nexport enum RevisaoJustificativaEnum {\n  JustificativaAlterada = 'Justificao Alterada',\n}\n\nexport enum RevisaoTextoLivreEnum {\n  TextoLivreAlterado = 'Texto Livre Alterado',\n}\n\nexport const ordernarRevisoes = (revisoes: Revisao[] = []): Revisao[] => {\n  const result: Revisao[] = revisoes.filter(r => isRevisaoElemento(r) && !isRevisaoDeExclusao(r as RevisaoElemento));\n  result.push(...getRevisoesDeExclusaoOrdenadasPorUuid(revisoes));\n  result.push(...revisoes.filter(isRevisaoJustificativa));\n  return result;\n};\n\nconst getRevisoesDeExclusaoOrdenadasPorUuid = (revisoes: Revisao[] = []): Revisao[] => {\n  return revisoes\n    .filter(r => isRevisaoElemento(r) && isRevisaoDeExclusao(r as RevisaoElemento))\n    .sort((r1, r2) => (r1 as RevisaoElemento).elementoAposRevisao.uuid! - (r2 as RevisaoElemento).elementoAposRevisao.uuid!);\n};\n\nexport const isRevisaoDeExclusao = (revisao: RevisaoElemento): boolean => revisao.stateType === StateType.ElementoRemovido;\n\nexport const removeAtributosDoElemento = (elemento: Partial<Elemento> | undefined): void => {\n  if (!elemento) {\n    return;\n  }\n\n  delete elemento.acoesPossiveis;\n  delete elemento.tiposAgrupadoresQuePodemSerInseridosAntes;\n  delete elemento.tiposAgrupadoresQuePodemSerInseridosDepois;\n\n  if (elemento.revisao) {\n    elemento.revisao;\n  }\n\n  removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elemento.elementoAnteriorNaSequenciaDeLeitura);\n};\n\nconst atributosPermitidos = ['tipo', 'uuid', 'uuid2', 'lexmlId', 'conteudo', 'descricaoSituacao', 'uuidAlteracao', 'uuid2Alteracao', 'existeNaNormaAlterada'];\n\nexport const removeAtributosDoElementoAnteriorNaSequenciaDeLeitura = (elemento: Partial<Elemento> | undefined): void => {\n  if (!elemento) {\n    return;\n  }\n\n  for (const key in elemento) {\n    if (!atributosPermitidos.includes(key)) {\n      delete elemento[key];\n    }\n  }\n};\n\nexport const getQuantidadeRevisoes = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(isRevisaoPrincipal).length;\n};\n\nexport const getQuantidadeRevisoesJustificativa = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(e => e.descricao === RevisaoJustificativaEnum.JustificativaAlterada).length;\n};\n\nexport const mostrarDialogDisclaimerRevisao = (): void => {\n  if (localStorage.getItem('naoMostrarNovamenteDisclaimerMarcaAlteracao') !== 'true') {\n    const dialog = document.createElement('sl-dialog');\n    dialog.label = 'Marcas de reviso';\n    const botoesHtml = ` <sl-button slot=\"footer\" variant=\"primary\" id=\"closeButton\">Fechar</sl-button>`;\n    dialog.innerHTML = `\n      Todas as alteraes realizadas no texto sero registradas e ficaro disponveis para consulta.\n      Esta  uma verso inicial da funcionalidade de controle de alteraes/marcas de reviso.\n      <br><br>\n      <sl-switch id=\"chk-nao-mostrar-modal-novamente\">No mostrar mais essa mensagem</sl-switch>\n    `.concat(botoesHtml);\n    document.body.appendChild(dialog);\n    dialog.show();\n\n    dialog.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const chkNaoMostrarNovamente = dialog.querySelector('#chk-nao-mostrar-modal-novamente') as any;\n    chkNaoMostrarNovamente?.addEventListener('sl-change', () => {\n      salvaNoNavegadorOpcaoNaoMostrarNovamente();\n    });\n\n    const closeButton = dialog.querySelector('#closeButton[slot=\"footer\"]');\n    closeButton?.addEventListener('click', () => {\n      dialog.hide();\n      dialog.remove();\n    });\n  }\n};\n\nexport const getQuantidadeRevisoesTextoLivre = (revisoes: Revisao[] = []): number => {\n  return revisoes.filter(e => e.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado).length;\n};\n\nexport const getQuantidadeRevisoesAll = (revisoesDispositivos: Revisao[] = []): number => {\n  const cursorCode = 65279;\n\n  const listaRevisoes = document.querySelectorAll('ins, del') || [];\n  const revisoes = [] as any;\n\n  for (let index = 0; index < listaRevisoes.length; index++) {\n    const revisao = listaRevisoes[index] as any;\n    if (revisao.innerText?.charCodeAt(0) !== cursorCode) {\n      revisoes.push(revisao);\n    }\n  }\n\n  return revisoes.length + getQuantidadeRevisoes(revisoesDispositivos);\n};\n\nconst salvaNoNavegadorOpcaoNaoMostrarNovamente = (): void => {\n  const checkbox = document.getElementById('chk-nao-mostrar-modal-novamente') as any;\n  if (checkbox) {\n    localStorage.setItem('naoMostrarNovamenteDisclaimerMarcaAlteracao', checkbox.checked ? 'true' : 'false');\n  }\n};\n\nexport const ativarDesativarMarcaDeRevisao = (rootStore: any, quantidade: number): void => {\n  rootStore.dispatch(ativarDesativarRevisaoAction.execute(quantidade));\n};\n\nexport const atualizaQuantidadeRevisao = (revisoes: Revisao[] = [], element: any, modo: string): void => {\n  const quantidade = modo === Modo.EMENDA ? getQuantidadeRevisoes(revisoes) : 0;\n  if (element) {\n    element.innerHTML = quantidade;\n  }\n};\n\nexport const atualizaQuantidadeRevisaoTextoRico = (quantidade: number, element: any): void => {\n  if (element) {\n    element.innerHTML = quantidade;\n  }\n};\n\nexport const setCheckedElement = (element: any, checked: boolean): void => {\n  if (element) {\n    if (checked) {\n      element.setAttribute('checked', '');\n    } else {\n      element.removeAttribute('checked');\n    }\n  }\n};\n\nexport const atualizaReferenciaElementoAnteriorSeNecessario = (articulacao: Articulacao, revisoes: Revisao[] = [], elemento: Elemento, tipoProcessamento: string): void => {\n  // Procura o elemento anterior ao excludo/includo nos elementos anteriores das outras revises.\n  const rAux = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(revisoes, elemento.elementoAnteriorNaSequenciaDeLeitura!);\n  if (rAux) {\n    if (tipoProcessamento === 'exclusao') {\n      // Pega a ltima reviso do grupo da reviso principal (rAux) e utiliza o \"elementoAposRevisao\" como elemento anterior do atual elemento removido\n      elemento.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(findUltimaRevisaoDoGrupo(revisoes, rAux).elementoAposRevisao));\n      removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elemento.elementoAnteriorNaSequenciaDeLeitura!);\n    } else {\n      // Pega o ltimo filho do elemento includo e utiliza como elemento anterior da reviso principal (rAux)\n      const dPrimeiroElementoIncluido = getDispositivoFromElemento(articulacao, elemento)!;\n      const ultimoFilho = createElemento(getUltimoFilho(dPrimeiroElementoIncluido));\n      removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(ultimoFilho);\n      rAux.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = ultimoFilho;\n      rAux.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = ultimoFilho;\n\n      const ePrimeiroElementoIncluido = createElemento(dPrimeiroElementoIncluido);\n      if (isAtualizarPosicaoDeElementoExcluido(ePrimeiroElementoIncluido, rAux.elementoAposRevisao)) {\n        rAux.elementoAposRevisao.hierarquia!.posicao = ePrimeiroElementoIncluido.hierarquia!.posicao! + 1;\n        rAux.elementoAntesRevisao!.hierarquia!.posicao = ePrimeiroElementoIncluido.hierarquia!.posicao! + 1;\n      }\n    }\n  }\n};\n\nexport const findRevisaoDeExclusaoComElementoAnteriorApontandoPara = (revisoes: Revisao[] = [], elementoAnteriorNaSequenciaDeLeitura: Referencia): RevisaoElemento | undefined => {\n  return revisoes\n    .filter(isRevisaoElemento)\n    .map(r => r as RevisaoElemento)\n    .filter(isRevisaoDeExclusao)\n    .find(r => r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.uuid === elementoAnteriorNaSequenciaDeLeitura.uuid);\n};\n\nexport const findUltimaRevisaoDoGrupo = (revisoes: Revisao[] = [], revisao: RevisaoElemento): RevisaoElemento => {\n  return (\n    revisoes\n      .map(r => r as RevisaoElemento)\n      .filter(r => r.idRevisaoElementoPrincipal === revisao.id)\n      .slice(-1)[0] || revisao\n  );\n};\n\nexport const isRevisaoDeMovimentacao = (revisao: Revisao): boolean => {\n  const r = revisao as RevisaoElemento;\n  return !!(\n    isRevisaoElemento(revisao) &&\n    r.stateType === StateType.ElementoIncluido &&\n    r.elementoAntesRevisao &&\n    r.elementoAposRevisao &&\n    r.elementoAntesRevisao.tipo === r.elementoAposRevisao.tipo\n  );\n};\n\nexport const isRevisaoDeTransformacao = (revisao: Revisao): boolean => {\n  const r = revisao as RevisaoElemento;\n  return !!(isRevisaoElemento(revisao) && r.elementoAntesRevisao && r.elementoAposRevisao && r.elementoAntesRevisao.tipo !== r.elementoAposRevisao.tipo);\n};\n\nexport const isRevisaoDeModificacao = (revisao: Revisao): boolean => {\n  return isRevisaoElemento(revisao) && (revisao as RevisaoElemento).stateType === StateType.ElementoModificado;\n};\n\nexport const isRevisaoDeRestauracao = (revisao: Revisao): boolean => {\n  return isRevisaoElemento(revisao) && (revisao as RevisaoElemento).stateType === StateType.ElementoRestaurado;\n};\n\nexport const isAtualizarPosicaoDeElementoExcluido = (elementoIncluido: Elemento, elementoExcluido: Partial<Elemento>): boolean => {\n  return elementoIncluido.hierarquia?.pai?.lexmlId === elementoExcluido.hierarquia?.pai?.lexmlId && elementoIncluido.uuid! < elementoExcluido.uuid!;\n};\n\nexport const findRevisaoDeRestauracaoByUuid = (revisoes: Revisao[] = [], uuid: number): RevisaoElemento | undefined => {\n  return revisoes.map(r => r as RevisaoElemento).find(r => isRevisaoElemento(r) && r.stateType === StateType.ElementoRestaurado && r.elementoAposRevisao.uuid === uuid);\n};\n\nexport const associarRevisoesAosElementosDosEventos = (state: State): void => {\n  state.ui?.events\n    .filter(se => se.stateType !== StateType.RevisaoRejeitada)\n    .filter(se => se.stateType !== StateType.RevisaoAdicionalRejeitada)\n    .forEach(se => associarRevisoesAosElementos(state.revisoes, se.elementos));\n};\n\nexport const associarRevisoesAosElementos = (revisoes: Revisao[] = [], elementos: Elemento[] = []): void => {\n  elementos.filter(Boolean).forEach(e => {\n    const r = findRevisaoByElementoUuid(revisoes, e.uuid);\n    e.revisao = r ? JSON.parse(JSON.stringify(r)) : undefined;\n  });\n};\n\nexport const mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes = (state: State, tempStates: State[], revisoes: Revisao[], operacao: 'aceitar' | 'rejeitar'): State => {\n  const eventosParaUnificar = {\n    aceitar: [StateType.ElementoValidado],\n    rejeitar: [\n      StateType.ElementoIncluido,\n      StateType.ElementoRemovido,\n      StateType.ElementoSuprimido,\n      StateType.ElementoRenumerado,\n      StateType.ElementoValidado,\n      StateType.ElementoSelecionado,\n      StateType.ElementoMarcado,\n      StateType.SituacaoElementoModificada,\n    ],\n  };\n\n  let eventosPast: StateEvent[] = [];\n  let eventos: StateEvent[] = [];\n\n  tempStates.forEach(tempState => {\n    eventosPast.push(...(tempState.past![0] as any as StateEvent[]));\n    eventos.push(...tempState.ui!.events);\n  });\n\n  const tempState: State = { ...state };\n\n  eventosParaUnificar[operacao].forEach(stateType => {\n    eventosPast = unificarEvento(tempState, eventosPast, stateType);\n    eventos = unificarEvento(tempState, eventos, stateType);\n  });\n\n  const idsRevisoes = revisoes.map(r => r.id);\n\n  tempState.past = buildPast(tempState, eventosPast);\n  tempState.present = eventos;\n  tempState.future = [];\n  tempState.ui = {\n    events: eventos,\n    alertas: state.ui?.alertas,\n  };\n  tempState.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoes.includes(r.id));\n\n  return tempState;\n};\n\nexport const countRevisoesByType = (revisoes: Revisao[] = [], type: string): number => {\n  return revisoes.filter(r => r.type === type).length;\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda, TipoSituacao } from '../../dispositivo/situacao';\nimport { isAgrupador, isEmenta } from '../../dispositivo/tipo';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { InformarNorma } from '../acao/informarNormaAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { suprimirAgrupadorAction } from '../acao/suprimirAgrupador';\nimport { suprimirElementoAction } from '../acao/suprimirElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\nimport { getDispositivoAndFilhosAsLista, isDispositivoAlteracao } from '../hierarquia/hierarquiaUtil';\n\nexport class DispositivoOriginal implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento))\n      .filter((a: ElementoAction) => !(a instanceof InformarNorma));\n\n    if (\n      !isEmenta(dispositivo) &&\n      (!isAgrupador(dispositivo) || !isDispositivoAlteracao(dispositivo)) &&\n      getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length === 0\n    ) {\n      acoesFiltradas.push(suprimirElementoAction);\n    }\n\n    if (isAgrupador(dispositivo) && isDispositivoAlteracao(dispositivo)) {\n      acoesFiltradas.push(suprimirAgrupadorAction);\n    }\n\n    return acoesFiltradas;\n  }\n}\n","import { getParagrafosEOmissis, hasEmenta, isArticulacaoAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo, isCaput, isDispositivoGenerico } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, getDispositivoFromElemento, getElementos } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { AdicionarElemento } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { hasIndicativoDesdobramento } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnteriorMesmoTipo,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  isDispositivoAlteracao,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Counter } from '../../../util/counter';\nimport { StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\n\nexport const textoFoiModificado = (atual: Dispositivo, action: any, state?: any): boolean => {\n  if (state && state.ui?.events) {\n    const ev = getEvento(state.ui.events, StateType.ElementoModificado);\n    if (ev && ev.elementos && ev.elementos[0]?.conteudo?.texto === atual.texto) {\n      return true;\n    }\n  }\n  return (atual.texto !== '' && action.atual?.conteudo?.texto === '') || (action.atual?.conteudo?.texto && atual.texto.localeCompare(action.atual?.conteudo?.texto) !== 0);\n};\n\nexport const resetUuidTodaArvore = (dispositivo: Dispositivo): void => {\n  dispositivo.uuid = Counter.next();\n  dispositivo.filhos?.forEach(f => resetUuidTodaArvore(f));\n  dispositivo.alteracoes?.filhos?.forEach(f => resetUuidTodaArvore(f));\n};\n\nexport const copiaDispositivosParaOutroPai = (pai: Dispositivo, dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos.map(d => {\n    const posicaoAtualArtigo = isArtigo(d) ? getArticulacao(d).indexOfArtigo(d) : -1;\n    const paiAtual = d.pai;\n    const anterior = isArtigo(d) ? getDispositivoAnteriorMesmoTipo(d) : undefined;\n    paiAtual?.removeFilho(d);\n    d.pai = pai;\n\n    pai.addFilho(d, anterior);\n\n    if (isArtigo(d) && !anterior) {\n      const articulacao = getArticulacao(d);\n      articulacao.removeArtigo(d);\n      articulacao.addArtigoOnPosition(d, posicaoAtualArtigo);\n    }\n\n    return d;\n  });\n};\n\nconst isPrimeiroArtigo = (dispositivo: Dispositivo): boolean => {\n  return isArtigo(dispositivo) && getArticulacao(dispositivo).indexOfArtigo(dispositivo as Artigo) === 0;\n};\n\nexport const isDesdobramentoAgrupadorAtual = (dispositivo: Dispositivo, tipo: string): boolean => {\n  return dispositivo.pai!.tipo === tipo;\n};\n\nexport const ajustaReferencia = (referencia: Dispositivo, dispositivo: Dispositivo): Dispositivo => {\n  if (isArticulacao(referencia) && !isArticulacaoAlteracao(referencia) && hasEmenta(referencia)) {\n    return (referencia as Articulacao).projetoNorma!.ementa!;\n  }\n\n  return isArticulacao(referencia) || (isPrimeiroArtigo(dispositivo) && !isDispositivoAlteracao(dispositivo)) || dispositivo.pai!.indexOf(dispositivo) === 0\n    ? referencia\n    : isPrimeiroParagrafo(dispositivo)\n    ? getUltimoFilho((dispositivo.pai! as Artigo).caput!)\n    : getUltimoFilho(referencia);\n};\n\nfunction isPrimeiroParagrafo(dispositivo: Dispositivo): boolean {\n  return isArtigo(dispositivo.pai!) && getParagrafosEOmissis(dispositivo.pai! as Artigo).indexOf(dispositivo) === 0;\n}\n\nexport const naoPodeCriarFilho = (pDispositivo: Dispositivo, action: any): boolean => {\n  const dispositivo = isCaput(pDispositivo) ? pDispositivo.pai! : pDispositivo;\n\n  return (\n    isDispositivoGenerico(dispositivo) ||\n    (hasIndicativoDesdobramento(dispositivo) && !isAcaoPermitida(dispositivo, AdicionarElemento)) ||\n    (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto))\n  );\n};\n\nexport const isNovoDispositivoDesmembrandoAtual = (texto: string): boolean => {\n  return texto !== undefined && texto !== '';\n};\n\nexport const getElementosDoDispositivo = (dispositivo: Dispositivo, valida = false): Elemento[] => {\n  const lista: Elemento[] = [];\n\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => {\n    if (valida) {\n      const mensagens = validaDispositivo(d);\n      if (mensagens) {\n        d.mensagens = mensagens;\n        lista.push(createElemento(d, true, true));\n      }\n    } else {\n      lista.push(createElemento(d, true, true));\n    }\n  });\n  return lista;\n};\n\nexport const getElementosAlteracaoASeremAtualizados = (articulacao: Articulacao, elementos: Elemento[]): Elemento[] => {\n  const result: Elemento[] = [];\n  getDispositivosCabecaAlteracaoFromElementos(articulacao, elementos).forEach(d => result.push(...getElementos(d, true)));\n  return result;\n};\n\nconst getDispositivosCabecaAlteracaoFromElementos = (articulacao: Articulacao, elementos: Elemento[]): Dispositivo[] => {\n  const map = new Map();\n  elementos.forEach(elemento => {\n    const d = getDispositivoFromElemento(articulacao, elemento) || (elemento.hierarquia?.pai && getDispositivoFromElemento(articulacao, elemento.hierarquia.pai));\n    if (d && isDispositivoAlteracao(d)) {\n      const ca = getDispositivoCabecaAlteracao(d);\n      map.set(ca.id, ca);\n    }\n  });\n  return Array.from(map.values());\n};\n","import { createElementoValidado } from './../../../model/elemento/elementoUtil';\nimport { findRevisaoByElementoUuid, isRevisaoDeExclusao } from './../util/revisaoUtil';\nimport { Artigo } from './../../../model/dispositivo/dispositivo';\nimport { hasFilhos, getAgrupadorAntes, getArticulacaoAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isArticulacao, isArtigo, isCaput } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport {\n  buildListaElementosRenumerados,\n  createElemento,\n  criaListaElementosAfinsValidados,\n  getDispositivoFromElemento,\n  getElementos,\n  listaDispositivosRenumerados,\n} from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnterior,\n  getDispositivoAnteriorMesmoTipo,\n  getUltimoFilho,\n  irmaosMesmoTipo,\n  isArticulacaoAlteracao,\n  isArtigoUnico,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isParagrafoUnico,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateEvent, StateType } from '../../state';\nimport { ajustaReferencia, getElementosDoDispositivo } from '../util/reducerUtil';\nimport { Eventos } from './eventos';\n\nexport const buildEventoAdicionarElemento = (atual: Dispositivo, novo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementosDoDispositivo(novo));\n  eventos.add(StateType.ElementoRenumerado, buildListaElementosRenumerados(novo));\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(novo, false));\n\n  if (isDispositivoAlteracao(atual)) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(atual)]);\n  }\n\n  return eventos;\n};\n\nexport const buildEventoAtualizacaoElemento = (dispositivo: Dispositivo): Eventos => {\n  const eventos = new Eventos();\n\n  const elemento = createElemento(dispositivo);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventos.add(StateType.ElementoModificado, [elemento]);\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  return eventos;\n};\n\nexport const buildUpdateEvent = (dispositivo: Dispositivo, original?: Elemento): StateEvent[] => {\n  dispositivo.mensagens = validaDispositivo(dispositivo);\n  const elemento = createElemento(dispositivo);\n\n  const elementos = original ? [original] : [];\n  elementos.push(elemento);\n\n  return [\n    {\n      stateType: StateType.ElementoModificado,\n      elementos: elementos,\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: criaListaElementosAfinsValidados(dispositivo, true),\n    },\n  ];\n};\n\nexport const buildEventoExclusaoElemento = (elementosRemovidos: Elemento[], dispositivosRenumerados: Dispositivo[], elementosValidados: Elemento[]): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    dispositivosRenumerados.map(d => createElemento(d))\n  );\n  eventos.add(StateType.ElementoValidado, elementosValidados);\n\n  return eventos;\n};\n\nexport const buildEventoTransformacaooElemento = (\n  atual: Dispositivo,\n  novo: Dispositivo,\n  elementosRemovidos: Elemento[],\n  elementosRenumerados: Elemento[],\n  elementosValidados: Elemento[]\n): Eventos => {\n  const eventos = new Eventos();\n\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementos(novo));\n  eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  eventos.add(StateType.ElementoRenumerado, elementosRenumerados);\n  eventos.add(StateType.ElementoValidado, elementosValidados);\n\n  return eventos;\n};\n\nexport const removeAndBuildEvents = (state: State, dispositivo: Dispositivo): StateEvent[] => {\n  const articulacao = state.articulacao!;\n  const removidos = getElementos(dispositivo, false, true);\n  const dispositivosRenumerados = listaDispositivosRenumerados(dispositivo);\n  const dispositivoAnterior = getDispositivoAnterior(dispositivo);\n\n  const ehDispositivoAlteracao = isDispositivoAlteracao(dispositivo);\n\n  const pai = dispositivo.pai!;\n  pai.removeFilho(dispositivo);\n  pai.renumeraFilhos();\n\n  if (isArticulacaoAlteracao(pai) && pai.filhos.length === 0) {\n    pai.pai!.alteracoes = undefined;\n  }\n\n  const dispositivoValidado =\n    dispositivoAnterior && (isArtigoUnico(dispositivoAnterior) || isParagrafoUnico(dispositivoAnterior)) ? dispositivoAnterior : isCaput(pai!) ? pai!.pai! : pai!;\n\n  if (articulacao.artigos.length === 1) {\n    dispositivosRenumerados.push(articulacao.artigos[0]);\n  }\n\n  const eventos = buildEventoExclusaoElemento(removidos, dispositivosRenumerados, criaListaElementosAfinsValidados(dispositivoValidado, false));\n\n  if (ehDispositivoAlteracao) {\n    eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(pai, true));\n\n    if (dispositivoAnterior || pai) {\n      try {\n        const dispositivoParaAtualizar = dispositivoAnterior || (pai.tipo === 'Caput' ? pai.pai! : pai);\n        eventos.add(StateType.SituacaoElementoModificada, getElementos(dispositivoParaAtualizar));\n      } catch (error) {\n        eventos.add(StateType.SituacaoElementoModificada, []);\n      }\n    }\n  }\n\n  return eventos.build();\n};\n\nexport const removeAgrupadorAndBuildEvents = (articulacao: Articulacao, atual: Dispositivo): StateEvent[] => {\n  let pos = atual.pai!.indexOf(atual);\n  const agrupadoresAnteriorMesmoTipo = atual.pai!.filhos.filter((d, i) => i < pos && isAgrupador(d));\n  const paiOriginal = atual.pai;\n  const removido = createElemento(atual, false, true);\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(atual);\n\n  const notaAlteracao = isDispositivoAlteracao(atual) && isDispositivoCabecaAlteracao(atual) ? atual.notaAlteracao : undefined;\n\n  const agrupadorAntes = getAgrupadorAntes(atual);\n\n  const pai = agrupadoresAnteriorMesmoTipo?.length > 0 ? agrupadoresAnteriorMesmoTipo.reverse()[0] : atual.pai!;\n\n  const dispositivoAnterior = agrupadoresAnteriorMesmoTipo?.length > 0 ? agrupadoresAnteriorMesmoTipo.reverse()[0] : pos > 0 ? getUltimoFilho(pai.filhos[pos - 1]) : pai;\n\n  const referencia = isArticulacao(dispositivoAnterior) || (hasFilhos(pai) && pai.filhos[0].id === atual.id) ? pai : getUltimoFilho(dispositivoAnterior);\n\n  const transferidosParaOutroPai: Elemento[] = [];\n  let posNoPaiNovo = pai.filhos.length;\n  atual.filhos.forEach(d => {\n    let novoPai: Dispositivo;\n    if (isArtigo(d)) {\n      novoPai = agrupadorAntes ?? (isDispositivoAlteracao(d) ? getArticulacaoAlteracao(d) : articulacao);\n    } else if (pai.tiposPermitidosFilhos?.includes(d.tipo)) {\n      novoPai = pai;\n    } else if (dispositivoAnterior.tiposPermitidosFilhos?.includes(d.tipo)) {\n      novoPai = dispositivoAnterior;\n    } else {\n      novoPai = getPaiQuePodeReceberFilhoDoTipo(atual.pai!, d.tipo, [])!;\n    }\n\n    d.pai = novoPai;\n    if (isDispositivoAlteracao(d) && isArtigo(d) && isArticulacaoAlteracao(d.pai!)) {\n      d.notaAlteracao = notaAlteracao;\n    }\n    atual.removeFilho(d);\n\n    if (agrupadoresAnteriorMesmoTipo?.length > 0) {\n      // TODO: revisar valor de \"posNoPaiNovo\" e \"pos\" (novoPai pode variar, como fica a posio???)\n      novoPai!.addFilhoOnPosition(d, posNoPaiNovo++);\n    } else {\n      novoPai!.addFilhoOnPosition(d, pos++);\n    }\n\n    transferidosParaOutroPai.push(createElemento(d));\n    return d;\n  });\n\n  atual.pai!.removeFilho(atual);\n  pai?.renumeraFilhos();\n  paiOriginal!.renumeraFilhos();\n\n  const renumerados = pai!.filhos\n    .filter((f, index) => index >= pos && (isAgrupador(f) || isDispositivoCabecaAlteracao(f)))\n    .map(d => createElemento(d))\n    .flat();\n\n  const renumeradosPaiOriginal =\n    paiOriginal?.filhos\n      .filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_NOVO)\n      .map(d => createElemento(d)) || [];\n\n  if (irmaoAnterior && irmaosMesmoTipo(irmaoAnterior).length === 1) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  eventos.setReferencia(isArticulacao(referencia) && isArticulacaoAlteracao(referencia as Articulacao) ? createElemento(referencia.pai!) : createElemento(referencia));\n\n  eventos.add(StateType.ElementoRemovido, [removido]);\n  eventos.add(StateType.SituacaoElementoModificada, transferidosParaOutroPai);\n  eventos.add(StateType.ElementoRenumerado, [...renumerados, ...renumeradosPaiOriginal]);\n  return eventos.build();\n};\n\nexport const getPaiQuePodeReceberFilhoDoTipo = (dispositivo: Dispositivo, tipoFilho: string, dispositivosPermitidos: Dispositivo[]): Dispositivo | undefined => {\n  if (!dispositivo) {\n    return undefined;\n  }\n  return dispositivo.tiposPermitidosFilhos?.includes(tipoFilho)\n    ? dispositivosPermitidos.length === 0 || dispositivosPermitidos.includes(dispositivo)\n      ? dispositivo\n      : undefined\n    : getPaiQuePodeReceberFilhoDoTipo(dispositivo.pai!, tipoFilho, dispositivosPermitidos);\n};\n\nconst restaura = (d: Dispositivo): void => {\n  d.numero = d.situacao.dispositivoOriginal?.numero ?? '';\n  d.rotulo = d.situacao.dispositivoOriginal?.rotulo ?? '';\n  d.id = d.situacao.dispositivoOriginal?.lexmlId ?? '';\n  d.texto = d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ? d.situacao.dispositivoOriginal?.conteudo?.texto ?? '' : d.texto;\n  d.situacao = new DispositivoOriginal();\n  if (isArtigo(d)) {\n    (d as Artigo).caput!.situacao = new DispositivoOriginal();\n  }\n};\n\nexport const restauraAndBuildEvents = (dispositivo: Dispositivo): StateEvent[] => {\n  const result: StateEvent[] = [];\n\n  const addRestauracao = (d: Dispositivo): void => {\n    const elementoAntesRestauracao = createElemento(d);\n    restaura(d);\n    result.push({ stateType: StateType.ElementoRestaurado, elementos: [elementoAntesRestauracao, createElemento(d)] });\n  };\n\n  if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    const aRestaurar = getDispositivoAndFilhosAsLista(dispositivo).filter(f => f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    aRestaurar.forEach(addRestauracao);\n\n    const elementoPai = getElementoPaiDeEnumerodos(dispositivo);\n    if (elementoPai) {\n      result.push({ stateType: StateType.ElementoValidado, elementos: [elementoPai] });\n    }\n  } else {\n    addRestauracao(dispositivo);\n  }\n\n  result.push({ stateType: StateType.ElementoSelecionado, elementos: [createElemento(dispositivo, true)] });\n  return result;\n};\n\nexport const suprimeAndBuildEvents = (articulacao: Articulacao, dispositivo: Dispositivo): StateEvent[] => {\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d))));\n\n  if (dispositivo.alteracoes && dispositivo.alteracoes.filhos.length > 0) {\n    dispositivo.alteracoes.filhos.forEach(f => getDispositivoAndFilhosAsLista(f).forEach(d => (d.situacao = new DispositivoSuprimido(createElemento(d)))));\n  }\n  const eventos = new Eventos();\n  eventos.add(StateType.ElementoSuprimido, getElementos(dispositivo));\n\n  const elementoPai = getElementoPaiDeEnumerodos(dispositivo);\n  if (elementoPai) {\n    eventos.add(StateType.ElementoValidado, [elementoPai]);\n  }\n\n  eventos.add(StateType.ElementoSelecionado, [createElemento(dispositivo, true)]);\n  return eventos.build();\n};\n\nexport const getElementoPaiDeEnumerodos = (dispositivo: Dispositivo): Elemento | null => {\n  const dipositivoPai = dispositivo.pai && !isAgrupador(dispositivo.pai) ? (isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai) : null;\n\n  if (dipositivoPai) {\n    dipositivoPai.mensagens = validaDispositivo(dipositivoPai);\n    return createElemento(dipositivoPai, true);\n  }\n\n  return null;\n};\n\nexport const getEvento = (eventos: StateEvent[], stateType: StateType): StateEvent => {\n  return eventos?.filter(ev => ev.stateType === stateType)[0];\n};\n\nexport const getEventosQuePossuemElementos = (eventos: StateEvent[]): StateEvent[] => {\n  return eventos?.filter(ev => ev?.elementos && ev.elementos?.length > 0);\n};\n\nexport const addElementosAoEvento = (evento: StateEvent, elementos: Elemento[]): void => {\n  elementos.forEach(elemento => (evento.elementos?.filter(atual => atual.uuid === elemento.uuid).length === 0 ? evento.elementos.push(elemento) : undefined));\n};\n\nexport const eventoContem = (stateEvents: StateEvent, elemento: Elemento): boolean => {\n  return (\n    stateEvents?.elementos!.map(ev => ev.uuid === elemento!.uuid && ev.rotulo === elemento!.rotulo && ev.conteudo?.texto === elemento.conteudo?.texto).filter(value => value)\n      .length > 0\n  );\n};\n\nexport const createEventos = (): StateEvent[] => {\n  return [\n    {\n      stateType: StateType.ElementoIncluido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRemovido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoModificado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRenumerado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoRestaurado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSuprimido,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoValidado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoSelecionado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoMarcado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.SituacaoElementoModificada,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.ElementoReferenciado,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.RevisaoAceita,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n    {\n      stateType: StateType.RevisaoRejeitada,\n      referencia: undefined,\n      pai: undefined,\n      elementos: [],\n    },\n  ];\n};\n\nexport const getElementosRemovidosEIncluidos = (eventos: StateEvent[]): Elemento[] => {\n  const map = new Map();\n  eventos.filter(ev => [StateType.ElementoRemovido, StateType.ElementoIncluido].includes(ev.stateType)).forEach(ev => ev.elementos?.forEach(el => map.set(el.uuid!, el)));\n  return Array.from(map.values());\n};\n\nexport const unificarEvento = (state: State, eventos: StateEvent[], stateType: StateType): StateEvent[] => {\n  const result = eventos.filter(ev => ev.stateType !== stateType);\n\n  if (stateType === StateType.ElementoRemovido) {\n    const elementos = eventos\n      .filter(ev => ev.stateType === StateType.ElementoRemovido)\n      .map(ev => ev.elementos || [])\n      .flat();\n    elementos.length && result.push({ stateType: stateType, elementos });\n  } else {\n    const elementos: Elemento[] = [];\n    const mapDispositivos: Map<number, Dispositivo> = new Map();\n\n    eventos\n      .filter(ev => ev.stateType === stateType)\n      .forEach(ev => {\n        ev.elementos?.forEach(e => {\n          const r = [StateType.ElementoIncluido, StateType.ElementoMarcado, StateType.SituacaoElementoModificada, StateType.ElementoRenumerado].includes(stateType)\n            ? findRevisaoByElementoUuid(state.revisoes, e.uuid!)\n            : undefined;\n          if (r && isRevisaoDeExclusao(r)) {\n            elementos.push(e);\n          } else if (!mapDispositivos.has(e.uuid!)) {\n            const dispositivo = getDispositivoFromElemento(state.articulacao!, e)!;\n            if (dispositivo) {\n              mapDispositivos.set(e.uuid!, dispositivo);\n              elementos.push(createElementoValidado(dispositivo, stateType === StateType.ElementoIncluido));\n            }\n          }\n        });\n      });\n\n    elementos.length && result.push({ stateType: stateType, elementos });\n  }\n  return result;\n};\n","import { Elemento } from '../../../model/elemento';\nimport { StateEvent, StateType } from '../../state';\nimport { createEventos, eventoContem } from './eventosUtil';\n\nexport class Eventos {\n  eventos: StateEvent[] = [];\n\n  constructor() {\n    this.eventos = createEventos();\n  }\n\n  add(stateType: StateType, elementos: Elemento[]): void {\n    const evento = this.get(stateType);\n    elementos.forEach(el => (!eventoContem(evento, el) ? evento.elementos?.push(el) : undefined));\n  }\n\n  build(): StateEvent[] {\n    return this.eventos.filter(ev => ev.elementos && ev.elementos.length > 0);\n  }\n\n  get(stateType: StateType): StateEvent {\n    return this.eventos.filter(ev => ev.stateType === stateType)[0];\n  }\n\n  setReferencia(referencia: Elemento): void {\n    this.get(StateType.ElementoIncluido).referencia = referencia;\n  }\n}\n","import { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isArtigo } from '../../../model/dispositivo/tipo';\nimport { createElemento, criaListaElementosAfinsValidados, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\nimport { createAlteracao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { formataNumero, getDataPorExtenso, getNumero, getTipo, validaUrn } from '../../../model/lexml/documento/urnUtil';\nimport { getUltimoFilho, buildListaDispositivos, getDispositivoAnterior } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { buildDispositivosAssistente } from '../../../model/lexml/numeracao/parserReferenciaDispositivo';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, getElementosDoDispositivo } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const adicionaAlteracaoComAssistente = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined || !isArtigo(atual)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const novo = criaDispositivo(atual.pai!, atual.tipo, atual);\n  novo.situacao = new DispositivoAdicionado();\n  (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n  novo.isDispositivoAlteracao = false;\n  (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = undefined;\n  novo.pai?.renumeraFilhos();\n  novo.id = buildId(novo);\n\n  (novo as Artigo).caput!.situacao = novo.situacao = new DispositivoAdicionado();\n  ((novo as Artigo).caput!.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n\n  createAlteracao(novo);\n\n  novo.alteracoes!.situacao = new DispositivoAdicionado();\n  (novo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n\n  if (action.dispositivos) {\n    try {\n      buildDispositivosAssistente(action.dispositivos, novo, state.modo);\n    } catch (e) {\n      return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: (e as Error).message });\n    }\n  }\n\n  if (action.norma) {\n    novo.alteracoes!.base = action.norma;\n\n    const genero = getTipo(action.norma)?.genero;\n\n    if (action.norma && validaUrn(action.norma)) {\n      const textoUrn = `${getTipo(action.norma).descricao} n ${formataNumero(getNumero(action.norma))}, de ${getDataPorExtenso(action.norma)}`;\n      novo.texto = `${genero && genero === 'M' ? 'O' : 'A'} <a href=\"${action.norma}\">${textoUrn}</a>, passa a vigorar com as seguintes alteraes:`;\n    }\n  }\n\n  const novosDispositivos = buildListaDispositivos(novo, []);\n  novosDispositivos.forEach((d, i: number) => {\n    if (i > 0 && i < novosDispositivos.length - 1) {\n      d.texto = TEXTO_OMISSIS;\n    }\n    if (i > 1) {\n      adicionarOmissisObrigatorios(d);\n    }\n  });\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(atual, novo)));\n  eventos.add(StateType.ElementoIncluido, getElementosDoDispositivo(novo, true));\n  eventos.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(novo, false));\n  eventos.add(StateType.ElementoMarcado, [createElemento(getUltimoFilho(novo)), createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst adicionarOmissisObrigatorios = (atual: Dispositivo): void => {\n  if (parseInt(atual.numero!) > 1) {\n    const anterior = getDispositivoAnterior(atual);\n    const novo = criaDispositivo(atual.pai!, TipoDispositivo.omissis.tipo, anterior, anterior ? undefined : 0);\n    novo.situacao = new DispositivoAdicionado();\n    atual.pai?.addFilhoOnPosition(novo, 0);\n  }\n};\n","import { isArtigo, isCaput, isEmenta } from './../../../model/dispositivo/tipo';\nimport { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isAgrupador, isIncisoCaput, isOmissis, isParagrafo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, createElementos, createElementoValidado, getDispositivoFromElemento, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { hasIndicativoDesdobramento, normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { createByInferencia, criaDispositivo, criaDispositivoCabecaAlteracao } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { copiaFilhos } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport {\n  hasFilhos,\n  irmaosMesmoTipo,\n  isArtigoUnico,\n  isDispositivoAlteracao,\n  isDispositivoCabecaAlteracao,\n  isOriginal,\n  isParagrafoUnico,\n  podeRenumerarFilhosAutomaticamente,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { buildEventoAdicionarElemento } from '../evento/eventosUtil';\nimport { isNovoDispositivoDesmembrandoAtual, naoPodeCriarFilho, textoFoiModificado } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { isArticulacaoAlteracao, getDispositivoAnteriorNaSequenciaDeLeitura, getArtigo } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoArtigo } from '../../../model/lexml/tipo/tipoArtigo';\n\nconst calculaPosicao = (atual: Dispositivo, posicao: string): number | undefined => {\n  const posicaoAtual = atual.pai!.indexOf(atual);\n  if (posicao === 'antes') {\n    return posicaoAtual;\n  }\n  return posicaoAtual === atual.pai!.filhos.length - 1 ? undefined : posicaoAtual + 1;\n};\n\nexport const adicionaElemento = (state: any, action: any): State => {\n  let textoModificado = false;\n\n  const refAtual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const atualCaputPosicaoFilho = refAtual && isArtigo(refAtual) && action.novo.tipo === TipoDispositivo.inciso.tipo ? (refAtual as TipoArtigo).caput : undefined;\n  const atual = action.posicao === 'filho' && atualCaputPosicaoFilho ? atualCaputPosicaoFilho : refAtual;\n  const refUltimoFilho = atual && action.posicao === 'filho' ? (hasFilhos(atual) ? atual.filhos[atual.filhos.length - 1] : undefined) : undefined;\n\n  if (atual === undefined || (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && hasIndicativoDesdobramento(atual))) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (\n    atual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_NOVO &&\n    atual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    hasIndicativoDesdobramento(atual) &&\n    !isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)\n  ) {\n    if (\n      atual.hasAlteracao() &&\n      atual.alteracoes?.filhos &&\n      isOriginal(atual.alteracoes.filhos[0]) &&\n      !isOmissis(atual.alteracoes.filhos[0]) &&\n      atual.alteracoes.filhos[0].numero === '1' &&\n      action.posicao !== 'antes' &&\n      atual.tipo !== action.novo.tipo\n    ) {\n      state.ui.events = [];\n      return state;\n    }\n    if (\n      action.posicao === undefined &&\n      isDispositivoAlteracao(atual) &&\n      hasFilhos(atual) &&\n      isOriginal(atual.filhos[0]) &&\n      !isOmissis(atual.filhos[0]) &&\n      !isParagrafo(atual.filhos[0]) &&\n      atual.filhos[0].numero === '1'\n    ) {\n      state.ui.events = [];\n      return state;\n    }\n  }\n\n  let ref =\n    atual.pai!.indexOf(atual) === 0\n      ? !action.posicao && atual.hasAlteracao()\n        ? atual\n        : isIncisoCaput(atual!) || isDispositivoCabecaAlteracao(atual!)\n        ? atual.pai!.pai!\n        : atual.pai\n      : atual.pai!.filhos[atual.pai!.indexOf(atual) - 1];\n\n  if (atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    action.atual.conteudo.texto = atual.texto;\n    action.novo.conteudo.texto = undefined;\n  }\n\n  const originalmenteUnico = isArtigoUnico(atual) || isParagrafoUnico(atual);\n\n  const elementoAtualOriginal = createElementoValidado(atual);\n\n  const elementosRemovidos: Elemento[] = [];\n\n  createElementos(elementosRemovidos, atual);\n\n  if (textoFoiModificado(atual, action, state)) {\n    atual.texto = !isDispositivoAlteracao(atual) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n    textoModificado = true;\n  }\n\n  if (naoPodeCriarFilho(atual, action)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'No  possvel criar dispositivos nessa situao' });\n  }\n\n  let novo;\n\n  if (action.posicao && action.posicao !== 'filho' && !isEmenta(atual)) {\n    if (atual.tipo === action.novo.tipo) {\n      novo =\n        action.posicao === 'antes'\n          ? criaDispositivo(atual.pai!, action.novo.tipo, undefined, calculaPosicao(atual, action.posicao))\n          : criaDispositivo(atual.pai!, action.novo.tipo, atual); // depois\n    } else if (isAgrupador(atual) && action.novo.tipo === TipoDispositivo.artigo.tipo) {\n      if (action.posicao === 'antes') {\n        const anterior = getDispositivoAnteriorNaSequenciaDeLeitura(atual);\n        ref = anterior;\n        const paiDoNovo = !anterior ? atual.pai! : isAgrupador(anterior!) ? anterior : isArtigo(anterior) ? anterior.pai! : getArtigo(anterior).pai!;\n        const posicao = anterior && isAgrupador(anterior) ? 0 : undefined;\n        const referencia = !anterior || isAgrupador(anterior) ? undefined : isArtigo(anterior) ? anterior : getArtigo(anterior);\n        novo = criaDispositivo(paiDoNovo, action.novo.tipo, referencia, posicao);\n      } else {\n        novo = criaDispositivo(atual, action.novo.tipo, undefined, 0);\n      }\n    }\n  } else if (atual.hasAlteracao()) {\n    novo = criaDispositivoCabecaAlteracao(TipoDispositivo.artigo.tipo, atual.alteracoes!, undefined, 0);\n  } else if (isEmenta(atual) && action.novo.tipo) {\n    novo = criaDispositivo(state.articulacao, action.novo.tipo, undefined, 0);\n  } else if (action.novo.tipo && atual.tipo !== action.novo.tipo) {\n    novo = criaDispositivo(atual, action.novo.tipo, refUltimoFilho);\n  } else {\n    novo = createByInferencia(atual, action);\n  }\n\n  if (isDispositivoCabecaAlteracao(novo)) {\n    // novo.cabecaAlteracao = isDispositivoCabecaAlteracao(novo);\n    novo.notaAlteracao = 'NR';\n  }\n\n  if (isDispositivoCabecaAlteracao(novo)) {\n    novo.notaAlteracao = 'NR';\n  }\n\n  if (\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL ||\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n    atual.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO ||\n    atual.situacao instanceof DispositivoAdicionado\n  ) {\n    novo.situacao = new DispositivoAdicionado();\n    if (isArtigo(novo)) {\n      (novo as Artigo).caput!.situacao = new DispositivoAdicionado();\n    }\n    (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n    const pai = novo.pai!;\n    if (isArticulacaoAlteracao(pai) && pai.filhos.length === 1) {\n      pai.situacao = new DispositivoAdicionado();\n    }\n  }\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && hasFilhos(atual)) {\n    copiaFilhos(atual, novo);\n  }\n\n  if (isDispositivoAlteracao(novo)) {\n    novo.createRotulo(novo);\n    novo.id = buildId(novo);\n    novo.mensagens?.push({ tipo: TipoMensagem.WARNING, descricao: ` necessrio informar o rtulo do dispositivo` });\n  }\n\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai);\n  }\n\n  novo.pai!.renumeraFilhos();\n\n  if (novo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    novo.id = buildId(novo);\n  }\n\n  const eventos =\n    action.posicao && action.posicao === 'antes'\n      ? buildEventoAdicionarElemento(ref!, novo)\n      : action.posicao === 'filho' && refUltimoFilho\n      ? buildEventoAdicionarElemento(refUltimoFilho, novo)\n      : action.posicao === 'filho' && !refUltimoFilho && isCaput(atual)\n      ? buildEventoAdicionarElemento(atual.pai!, novo)\n      : buildEventoAdicionarElemento(atual, novo);\n\n  const elementoAtualAtualizado = createElementoValidado(atual);\n\n  if (isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) && atual.tipo === novo.tipo && elementosRemovidos && elementosRemovidos.length > 0) {\n    eventos.add(StateType.ElementoRemovido, elementosRemovidos);\n  }\n\n  if (isAgrupador(novo) && irmaosMesmoTipo(novo).length === 2) {\n    const irmao = irmaosMesmoTipo(novo).filter(a => a !== novo);\n    eventos.add(StateType.ElementoModificado, [createElemento(irmao[0]!)]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto)) {\n    eventos.add(StateType.ElementoModificado, [elementoAtualOriginal, elementoAtualAtualizado]);\n  }\n\n  if (textoModificado || isNovoDispositivoDesmembrandoAtual(action.novo?.conteudo?.texto) || isOmissis(atual)) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n  }\n\n  if (isArtigoUnico(atual) || originalmenteUnico) {\n    eventos.add(StateType.ElementoValidado, [elementoAtualAtualizado]);\n    eventos.add(StateType.ElementoRenumerado, [elementoAtualAtualizado]);\n  }\n\n  if (action.posicao && action.posicao === 'antes') {\n    eventos.add(\n      StateType.ElementoRenumerado,\n      listaDispositivosRenumerados(novo).map(d => createElemento(d))\n    );\n  }\n\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo), createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { TipoDispositivo } from './../../../model/lexml/tipo/tipoDispositivo';\nimport { retornaEstadoAtualComMensagem } from './../util/stateReducerUtil';\nimport {\n  getUltimoFilho,\n  isDispositivoAlteracao,\n  // isUltimaAlteracao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoCabecaAlteracao,\n  getArticulacao,\n  podeRenumerarFilhosAutomaticamente,\n  getTiposAgrupadoresQuePodemSerInseridosAntes,\n  getTiposAgrupadoresQuePodemSerInseridosDepois,\n  getPrimeiroAgrupadorNaArticulacao,\n  hasEmenta,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { getElementos } from './../../../model/elemento/elementoUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { getPaiQuePodeReceberFilhoDoTipo } from './../evento/eventosUtil';\nimport { isAgrupador, isArticulacao, isArtigo, isEmenta } from './../../../model/dispositivo/tipo';\nimport { Alteracoes } from '../../../model/dispositivo/blocoAlteracao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { criaDispositivo, criaDispositivoCabecaAlteracao } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { getDispositivoAnteriorMesmoTipo, irmaosMesmoTipo, isDispositivoCabecaAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { copiaDispositivosParaOutroPai, isDesdobramentoAgrupadorAtual } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { Dispositivo } from '../../../model/dispositivo/dispositivo';\n\nexport const agrupaElemento = (state: any, action: any): State => {\n  let atual = getDispositivoFromElemento(state.articulacao, action.atual, true)!;\n\n  if (atual === undefined) {\n    return state;\n  }\n\n  if (!isArtigo(atual) && !isAgrupador(atual) && !isEmenta(atual)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  permitido adicionar agrupador de artigo a partir da seleo atual' });\n  }\n\n  if ((isArticulacao(atual) || isEmenta(atual)) && action.novo.posicao === 'antes') {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  permitido adicionar agrupador de artigo antes da ementa' });\n  }\n\n  // if (isArtigo(atual) && action.novo.posicao !== 'antes') {\n  //   return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Operao no permitida.' });\n  // }\n\n  const descricaoTipo = TipoDispositivo[action.novo.tipo.toLowerCase()].descricao;\n\n  if (!action.isAbrindoEmenda && action.novo.posicao === 'antes' && !getTiposAgrupadoresQuePodemSerInseridosAntes(atual).includes(action.novo.tipo)) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\" antes do dispositivo selecionado [${atual.rotulo}]`,\n    });\n  }\n\n  if (!action.isAbrindoEmenda && action.novo.posicao === 'depois' && !getTiposAgrupadoresQuePodemSerInseridosDepois(atual).includes(action.novo.tipo)) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\" aps o dispositivo selecionado [${atual.rotulo}]`,\n    });\n  }\n\n  if (isEmenta(atual)) {\n    atual = state.articulacao;\n  }\n\n  const posicaoDoNovoAgrupador: string = action.novo.posicao;\n  const manterNovoNoMesmoGrupoDeAspas: boolean = action.novo.manterNoMesmoGrupoDeAspas;\n\n  const cabecaAlteracao = isDispositivoAlteracao(atual) ? getDispositivoCabecaAlteracao(atual) : undefined;\n  const dispositivosAlteracao = cabecaAlteracao ? getDispositivoAndFilhosAsLista(cabecaAlteracao) : [];\n  const dispositivosArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n\n  if (isDispositivoAlteracao(atual)) {\n    if (isDispositivoCabecaAlteracao(atual) && manterNovoNoMesmoGrupoDeAspas && posicaoDoNovoAgrupador === 'antes' && !atual.tiposPermitidosPai?.includes(action.novo.tipo)) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\", no mesmo grupo de aspas, antes do dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (!isDispositivoCabecaAlteracao(atual) && manterNovoNoMesmoGrupoDeAspas && !dispositivosAlteracao.some(d => d.tiposPermitidosFilhos?.includes(action.novo.tipo))) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\", no mesmo grupo de aspas, aps o dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (isArtigo(atual) && !isDispositivoCabecaAlteracao(atual) && !manterNovoNoMesmoGrupoDeAspas) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\", na alterao de norma, a partir do atual dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    if (!manterNovoNoMesmoGrupoDeAspas) {\n      return criarNovaCabecaDeAlteracao(state, atual, posicaoDoNovoAgrupador, action.novo.tipo, false, { rotulo: action.novo.rotulo, uuid: action.novo.uuid });\n    }\n\n    if (isDispositivoCabecaAlteracao(atual) && posicaoDoNovoAgrupador === 'antes') {\n      return criarNovaCabecaDeAlteracao(state, atual, posicaoDoNovoAgrupador, action.novo.tipo, true, { rotulo: action.novo.rotulo, uuid: action.novo.uuid });\n    }\n  }\n\n  let novo: Dispositivo;\n  // const ref = dispositivosArticulacao[dispositivosArticulacao.indexOf(atual) - (posicaoDoNovoAgrupador === 'antes' ? 1 : 0)];\n  const ref = getReferencia(atual, posicaoDoNovoAgrupador, dispositivosArticulacao);\n\n  if (!isArticulacao(atual) && isDesdobramentoAgrupadorAtual(atual, action.novo.tipo)) {\n    novo = criaDispositivo(atual.pai!.pai!, action.novo.tipo, undefined, atual.pai!.pai!.indexOf(atual.pai!) + 1);\n  } else {\n    const paiQuePodeReceberNovoAgrupador = getPaiQuePodeReceberFilhoDoTipo(ref, action.novo.tipo, dispositivosAlteracao)!;\n    if (!paiQuePodeReceberNovoAgrupador) {\n      return retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.ERROR,\n        descricao: `No  permitido adicionar agrupador \"${descricaoTipo}\" a partir do atual dispositivo selecionado [${atual.rotulo}]`,\n      });\n    }\n\n    const posNovoAgrupador =\n      atual.pai === paiQuePodeReceberNovoAgrupador\n        ? atual.pai!.indexOf(atual) + (posicaoDoNovoAgrupador === 'antes' ? 0 : 1)\n        : calculaPosNovoAgrupador(atual, paiQuePodeReceberNovoAgrupador, dispositivosArticulacao, dispositivosAlteracao);\n    novo = criaDispositivo(paiQuePodeReceberNovoAgrupador, action.novo.tipo, undefined, posNovoAgrupador);\n  }\n\n  // Reutiliza \"uuid\" quando o agrupador  criado por ao de undo ou redo\n  novo.uuid = action.novo.uuid ?? novo.uuid;\n\n  novo.situacao = new DispositivoAdicionado();\n  (novo.situacao as DispositivoAdicionado).tipoEmenda = state.modo;\n  novo.texto = action.novo.texto ?? '';\n  novo.createRotulo(novo);\n  novo.rotulo = action.novo.rotulo ?? novo.rotulo;\n  novo.id = buildId(novo);\n\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai!);\n  }\n\n  const dispositivos = getDispositivosASeremCopiadosParaOutroPai(atual, novo, posicaoDoNovoAgrupador, dispositivosAlteracao);\n  copiaDispositivosParaOutroPai(novo, dispositivos);\n\n  novo.pai!.renumeraFilhos();\n  novo.pai!.filhos.forEach(f => f.renumeraFilhos());\n  // novo.renumeraFilhos();\n\n  const dispositivosAux = getDispositivoAndFilhosAsLista(novo.pai!);\n\n  dispositivosAux.filter(d => isAgrupador(d) && !(d.tipo === 'Articulacao' && d.pai === undefined)).forEach(d => (d.id = buildId(d)));\n\n  const renumerados = dispositivosAux.filter(fnFilterAgrupadorAdicionado).map((d: Dispositivo) => createElemento(d));\n\n  const irmaoAnterior = getDispositivoAnteriorMesmoTipo(novo);\n\n  if (irmaoAnterior && irmaosMesmoTipo(novo).length === 2) {\n    renumerados.unshift(createElemento(irmaoAnterior));\n  }\n\n  const eventos = new Eventos();\n  if (isArticulacao(ref) && hasEmenta(ref)) {\n    eventos.setReferencia(createElemento(state.articulacao.projetoNorma.ementa));\n  } else if (isArtigo(atual) && posicaoDoNovoAgrupador === 'depois') {\n    eventos.setReferencia(createElemento(getUltimoFilho(ref)));\n  } else if (isArtigo(ref) && posicaoDoNovoAgrupador === 'antes') {\n    eventos.setReferencia(createElemento(getUltimoFilho(ref)));\n  } else {\n    eventos.setReferencia(createElemento(ref));\n  }\n\n  const transferidosParaOutroPai = novo.filhos.map((d: Dispositivo) => createElemento(d));\n\n  // eventos.add(StateType.ElementoIncluido, [createElemento(novo)]);\n  const elementoIncluido = createElemento(novo);\n  elementoIncluido.manterNoMesmoGrupoDeAspas = manterNovoNoMesmoGrupoDeAspas;\n  eventos.add(StateType.ElementoIncluido, [elementoIncluido]);\n\n  eventos.add(StateType.SituacaoElementoModificada, [createElemento(atual), ...transferidosParaOutroPai]);\n  eventos.add(StateType.ElementoRenumerado, renumerados);\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo)]);\n\n  const dArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n  const dReferenciado = dArticulacao[dArticulacao.indexOf(novo) + 1];\n  eventos.add(StateType.ElementoReferenciado, dReferenciado ? [createElemento(dReferenciado)] : []);\n\n  if (novo === getPrimeiroAgrupadorNaArticulacao(novo) && hasEmenta(novo)) {\n    eventos.get(StateType.SituacaoElementoModificada).elementos!.push(createElemento(state.articulacao.projetoNorma.ementa));\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst calculaPosNovoAgrupador = (\n  dispositivo: Dispositivo,\n  paiQuePodeReceberFilho: Dispositivo,\n  dispositivosArticulacao: Dispositivo[],\n  dispositivosAlteracao: Dispositivo[]\n): number | undefined => {\n  const ds = dispositivosArticulacao.filter(d => isDispositivoValidoNoConjunto(d, dispositivosAlteracao) && (d === dispositivo || paiQuePodeReceberFilho.filhos.includes(d)));\n  return ds.indexOf(dispositivo);\n};\n\n// const isUltimoArtigoOuAgrupadorDaAlteracao = (dispositivo: Dispositivo): boolean => {\n//   return isUltimaAlteracao(dispositivo) || isUltimaAlteracao(getUltimoFilho(dispositivo));\n// };\n\nconst fnFilterAgrupadorAdicionado = (d: Dispositivo): boolean => !isArtigo(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n\nconst criarNovaCabecaDeAlteracao = (state: any, atual: Dispositivo, posicao: string, tipo: string, manterNovoNoMesmoGrupoDeAspas = false, dadosComplementares: any = {}): State => {\n  const cabecaAlteracao = getDispositivoCabecaAlteracao(atual);\n  const pos = cabecaAlteracao.pai!.indexOf(cabecaAlteracao) + (posicao === 'antes' ? 0 : 1);\n  const novo = criaDispositivoCabecaAlteracao(tipo, cabecaAlteracao.pai! as Alteracoes, undefined, pos);\n  novo.rotulo = dadosComplementares.rotulo ?? novo.rotulo;\n  novo.uuid = dadosComplementares.uuid ?? novo.uuid;\n  novo.texto = dadosComplementares.texto ?? novo.texto ?? '';\n  novo.id = buildId(novo);\n  if (isDispositivoAlteracao(novo) && novo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = isDispositivoCabecaAlteracao(novo) || !podeRenumerarFilhosAutomaticamente(novo.pai!);\n  }\n\n  const ref = pos === 0 ? novo.pai!.pai! : getUltimoFilho(novo.pai!.filhos[pos - 1]);\n\n  const eventos = new Eventos();\n\n  if (manterNovoNoMesmoGrupoDeAspas) {\n    atual.cabecaAlteracao = false;\n    copiaDispositivosParaOutroPai(novo, [atual]);\n\n    novo.pai!.renumeraFilhos();\n    novo.renumeraFilhos();\n\n    const renumerados = [\n      ...novo.pai!.filhos.filter(fnFilterAgrupadorAdicionado).map(d => createElemento(d)),\n      ...novo.filhos.filter(fnFilterAgrupadorAdicionado).map(d => createElemento(d)),\n    ];\n\n    eventos.add(StateType.ElementoRenumerado, renumerados);\n  }\n\n  eventos.setReferencia(createElemento(ref));\n\n  // eventos.add(StateType.ElementoIncluido, [createElemento(novo)]);\n  const elementoIncluido = createElemento(novo);\n  elementoIncluido.manterNoMesmoGrupoDeAspas = manterNovoNoMesmoGrupoDeAspas;\n  eventos.add(StateType.ElementoIncluido, [elementoIncluido]);\n\n  eventos.add(StateType.SituacaoElementoModificada, getElementos(novo));\n  eventos.add(StateType.ElementoMarcado, [createElemento(novo)]);\n\n  const dArticulacao = getDispositivoAndFilhosAsLista(state.articulacao);\n  const dReferenciado = dArticulacao[dArticulacao.indexOf(novo) + 1];\n  eventos.add(StateType.ElementoReferenciado, dReferenciado ? [createElemento(dReferenciado)] : []);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst isDispositivoValidoNoConjunto = (d: Dispositivo, dispositivosAlteracao: Dispositivo[]): boolean => dispositivosAlteracao.length === 0 || dispositivosAlteracao.includes(d);\n\nconst getDispositivosASeremCopiadosParaOutroPai = (atual: Dispositivo, novo: Dispositivo, posicaoDoNovoAgrupador: string, dispositivosAlteracao: Dispositivo[]): Dispositivo[] => {\n  const dArticulacao = getDispositivoAndFilhosAsLista(getArticulacao(atual));\n  const pais = getPais(atual, novo.tipo);\n  if (isAgrupador(atual) && posicaoDoNovoAgrupador === 'depois') {\n    pais.push(atual);\n  }\n  const indexAtual = dArticulacao.indexOf(atual) + (posicaoDoNovoAgrupador === 'antes' ? 0 : 1);\n  const podeCopiar = (d: Dispositivo, index: number): boolean =>\n    index >= indexAtual && d !== novo && !!novo.tiposPermitidosFilhos?.includes(d.tipo) && pais.includes(d.pai!) && isDispositivoValidoNoConjunto(d, dispositivosAlteracao);\n  return dArticulacao.filter(podeCopiar);\n};\n\nconst getPais = (dispositivo: Dispositivo, tipo: string, result: Dispositivo[] = []): Dispositivo[] => {\n  const tiposAgrupadorArtigo = ['Parte', 'Livro', 'Titulo', 'Capitulo', 'Secao', 'Subsecao', 'Artigo'];\n  if (dispositivo && tiposAgrupadorArtigo.indexOf(dispositivo.tipo) >= tiposAgrupadorArtigo.indexOf(tipo)) {\n    result.push(dispositivo.pai!);\n    return getPais(dispositivo.pai!, tipo, result);\n  }\n  return result;\n};\n\nconst getReferencia = (atual: Dispositivo, posicaoDoNovoAgrupador: string, dispositivosArticulacao: Dispositivo[]): Dispositivo => {\n  const atuaEhDispositivoDeAlteracao = isDispositivoAlteracao(atual);\n  const dispositivos = dispositivosArticulacao.filter(d => isDispositivoAlteracao(d) === atuaEhDispositivoDeAlteracao);\n  return dispositivos[dispositivos.indexOf(atual) - (posicaoDoNovoAgrupador === 'antes' ? 1 : 0)];\n};\n","import { Dispositivo } from '../../dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../dispositivo/situacao';\nimport { Elemento } from '../../elemento';\nimport { ElementoAction } from '../acao';\nimport { AgruparElemento } from '../acao/agruparElementoAction';\nimport { RemoverElemento } from '../acao/removerElementoAction';\nimport { RenumerarElemento } from '../acao/renumerarElementoAction';\nimport { restaurarElementoAction } from '../acao/restaurarElemento';\nimport { TransformarElemento } from '../acao/transformarElementoAction';\n\nexport class DispositivoModificado implements TipoSituacao {\n  descricaoSituacao = DescricaoSituacao.DISPOSITIVO_MODIFICADO;\n  dispositivoOriginal: Elemento;\n\n  constructor(dispositivoOriginal: Elemento) {\n    this.dispositivoOriginal = dispositivoOriginal;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getAcoesPermitidas(dispositivo: Dispositivo, acoes: any[]): any[] {\n    const acoesFiltradas = acoes\n      .filter((a: ElementoAction) => !(a instanceof AgruparElemento))\n      .filter((a: ElementoAction) => !(a instanceof RemoverElemento))\n      .filter((a: ElementoAction) => !(a instanceof RenumerarElemento))\n      .filter((a: ElementoAction) => !a.descricao?.startsWith('Mover'))\n      .filter((acao: ElementoAction): boolean => acao.descricao !== 'Adicionar' && acao.descricao !== 'Atualizar dispositivo')\n      .filter((a: ElementoAction) => !(a instanceof TransformarElemento));\n\n    acoesFiltradas.push(restaurarElementoAction);\n\n    return acoesFiltradas.filter(a => a !== undefined).sort((a, b) => a.descricao!.localeCompare(b.descricao!));\n  }\n}\n","import { isRevisaoDeMovimentacao, isRevisaoDeTransformacao } from './../util/revisaoUtil';\nimport { isAgrupador, isArticulacao, isCaput, isOmissis, isParagrafo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { createAlteracao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport {\n  buscaDispositivoById,\n  findDispositivoByUuid2,\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoCabecaAlteracao,\n  getTiposAgrupadorArtigoOrdenados,\n  hasEmenta,\n  isAdicionado,\n  isDispositivoAlteracao,\n  isModificado,\n  isSuprimido,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { Counter } from '../../../util/counter';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { findRevisaoById, identificarRevisaoElementoPai, isRevisaoDeExclusao, isRevisaoElemento, isRevisaoPrincipal } from '../util/revisaoUtil';\nimport { Articulacao, Artigo, Dispositivo } from './../../../model/dispositivo/dispositivo';\nimport { ClassificacaoDocumento } from './../../../model/documento/classificacao';\nimport { getDispositivoFromElemento } from './../../../model/elemento/elementoUtil';\nimport { DispositivoEmendaAdicionado, DispositivosEmenda } from './../../../model/emenda/emenda';\nimport { isArticulacaoAlteracao, percorreHierarquiaDispositivos, getIrmaoAnteriorIndependenteDeTipo } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { agrupaElemento } from './agrupaElemento';\n\nexport const aplicaAlteracoesEmenda = (state: any, action: any): State => {\n  let alertas = [];\n  if (state.ui?.alertas?.length > 0) {\n    alertas = state.ui.alertas;\n  }\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: [],\n    present: [],\n    future: [],\n    ui: {\n      events: [],\n      alertas: alertas,\n    },\n    revisoes: [],\n    emRevisao: state.emRevisao,\n    numEventosPassadosAntesDaRevisao: 0,\n  };\n\n  const eventos = new Eventos();\n\n  if (action.alteracoesEmenda.dispositivosSuprimidos) {\n    eventos.add(StateType.ElementoSuprimido, []);\n\n    action.alteracoesEmenda.dispositivosSuprimidos.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.id);\n\n      if (d) {\n        percorreHierarquiaDispositivos(d, d => {\n          d.situacao = new DispositivoSuprimido(createElemento(d));\n          eventos.get(StateType.ElementoSuprimido).elementos?.push(createElemento(d));\n        });\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosModificados) {\n    eventos.add(StateType.ElementoModificado, []);\n\n    action.alteracoesEmenda.dispositivosModificados.forEach(dispositivo => {\n      const d = buscaDispositivoById(state.articulacao, dispositivo.tipo === 'Caput' ? idSemCpt(dispositivo.id) : dispositivo.id);\n\n      if (d) {\n        d.situacao = new DispositivoModificado(createElemento(d));\n        d.texto = dispositivo.texto;\n        eventos.get(StateType.ElementoModificado).elementos?.push(createElemento(d));\n      }\n    });\n  }\n\n  if (action.alteracoesEmenda.dispositivosAdicionados) {\n    eventos.eventos.push(...processaDispositivosAdicionados(state, action.alteracoesEmenda));\n  }\n\n  if (action.revisoes?.length) {\n    eventos.eventos.push(...processaRevisoes(retorno, action.revisoes));\n    retorno.emRevisao = true;\n  }\n\n  retorno.ui!.events = eventos.build();\n\n  state.articulacao && renumeraParagrafosUnicos(retorno);\n\n  const elementosInseridos: Elemento[] = [];\n  retorno.ui!.events.filter(stateEvent => stateEvent.stateType === StateType.ElementoIncluido).forEach(se => elementosInseridos.push(...se.elementos!));\n\n  retorno.ui!.events.push({\n    stateType: StateType.SituacaoElementoModificada,\n    elementos: getElementosAlteracaoASeremAtualizados(state.articulacao, elementosInseridos),\n  });\n\n  if (retorno.emRevisao) {\n    retorno.ui!.events.push({ stateType: StateType.RevisaoAtivada });\n  }\n\n  if (state.articulacao) {\n    const d = getDispositivoAndFilhosAsLista(state.articulacao).find(d => !isArticulacao(d) && (isAdicionado(d) || isSuprimido(d) || isModificado(d)));\n    if (d) {\n      retorno.ui!.events.push({ stateType: StateType.ElementoMarcado, elementos: [createElemento(d)] });\n    }\n  }\n\n  return retorno;\n};\n\nconst renumeraParagrafosUnicos = (state: any): Dispositivo[] => {\n  // Trata renumerao de pargrafo nico\n  let paragrafosUnicos = getDispositivoAndFilhosAsLista(state.articulacao)\n    .filter(d => isAdicionado(d) && isParagrafo(d) && d.pai?.filhos.find(f => f.id?.endsWith('par1u')))\n    .map(d => d.pai!.filhos.find(f => f.id?.endsWith('par1u'))!);\n  paragrafosUnicos = [...new Set(paragrafosUnicos)];\n  paragrafosUnicos.map(d => d.pai!).forEach(d => d.renumeraFilhos());\n  return paragrafosUnicos;\n};\n\nconst processaDispositivosAdicionados = (state: any, alteracoesEmenda: DispositivosEmenda): StateEvent[] => {\n  const tiposAgrupadorArtigo = getTiposAgrupadorArtigoOrdenados();\n  const eventos: StateEvent[] = [];\n\n  for (const da of alteracoesEmenda.dispositivosAdicionados) {\n    if (tiposAgrupadorArtigo.includes(da.tipo)) {\n      eventos.push(...criaEventosParaDispositivoAgrupador(state, da));\n    } else {\n      eventos.push(criaEventoElementosIncluidos(state, da));\n    }\n  }\n\n  return eventos;\n};\n\nconst isPrimeiroDispositivoEmAlteracaoDeNorma = (ref: Dispositivo, dea: DispositivoEmendaAdicionado): boolean => {\n  return !isDispositivoAlteracao(ref) && isEmendaEmAlteracaoDeNorma(dea);\n};\n\nconst isEmendaEmAlteracaoDeNorma = (dea: DispositivoEmendaAdicionado): boolean => {\n  return dea.id.split('_').some(p => p.startsWith('alt'));\n};\n\nconst criaEventosParaDispositivoAgrupador = (state: any, dea: DispositivoEmendaAdicionado): StateEvent[] => {\n  const articulacao = state.articulacao;\n  let ref = buscaDispositivoById(state.articulacao, dea.idPosicaoAgrupador!)!;\n  let posicao = 'depois';\n\n  // Soluo de contorno para emendas com adio de artigo que altera norma vigente e com agrupadores adicionados na alterao.\n  if (buscaDispositivoById(state.articulacao, dea.id)) {\n    return [];\n  }\n  // ---------------------------------------------------------------------------\n\n  if (ref) {\n    if (isArticulacao(ref) && !isArticulacaoAlteracao(ref) && hasEmenta(ref)) {\n      ref = (ref as Articulacao).projetoNorma!.ementa!;\n    } else if (isPrimeiroDispositivoEmAlteracaoDeNorma(ref, dea)) {\n      ref = ref.alteracoes!.filhos[0];\n      posicao = 'antes';\n    }\n\n    const atual = createElemento(ref);\n\n    const manterNoMesmoGrupoDeAspas = dea.abreAspas ? false : !dea.fechaAspas;\n    const tempState = agrupaElemento(state, { atual, novo: { tipo: dea.tipo, posicao, manterNoMesmoGrupoDeAspas, rotulo: dea.rotulo }, isAbrindoEmenda: true });\n    const events = tempState.ui!.events.filter(ev => ev.stateType !== StateType.ElementoMarcado);\n\n    const elementosIncluidos = events.find(e => e.stateType === StateType.ElementoIncluido)!.elementos!;\n    const novoAgrupador = elementosIncluidos[0];\n\n    const novo = getDispositivoFromElemento(articulacao, novoAgrupador)!;\n\n    ajustaAtributosDispositivoAdicionado(novo, dea, ClassificacaoDocumento.EMENDA);\n\n    elementosIncluidos.length = 0;\n    elementosIncluidos.push(createElemento(novo));\n\n    return events;\n  }\n\n  return [];\n};\n\nconst criaEventoElementosIncluidos = (state: any, dispositivo: DispositivoEmendaAdicionado): StateEvent => {\n  const evento: StateEvent = {\n    stateType: StateType.ElementoIncluido,\n    referencia: undefined,\n    pai: undefined,\n    elementos: [],\n  };\n\n  const novo = criaArvoreDispositivos(state.articulacao, dispositivo, state.modo);\n\n  if (novo) {\n    if (novo.rotulo) {\n      novo.createNumeroFromRotulo(novo.rotulo);\n    }\n\n    if (!evento.referencia) {\n      const dispositivoAnterior = getIrmaoAnteriorIndependenteDeTipo(novo);\n      let pai = isCaput(novo!.pai!) ? novo!.pai!.pai : novo.pai;\n      pai = isArticulacaoAlteracao(pai!) ? buscaDispositivoById(state.articulacao, pai!.pai!.id!) : pai;\n      if (dispositivo.idPai && isAgrupador(pai!)) {\n        evento.referencia = createElemento(pai!);\n      } else {\n        evento.referencia = createElemento(referenciaAjustada(dispositivoAnterior || pai!, novo));\n      }\n    }\n\n    percorreHierarquiaDispositivos(novo, d => {\n      if (!isCaput(d) && !isArticulacaoAlteracao(d)) {\n        const novoEl = createElemento(d);\n        novoEl.lexmlId = buildId(d);\n        evento.elementos?.push(novoEl);\n      }\n    });\n  }\n\n  return evento;\n};\n\nconst referenciaAjustada = (referencia: Dispositivo, dispositivo: Dispositivo): Dispositivo => {\n  const ref = ajustaReferencia(referencia, dispositivo);\n  return ref.id !== dispositivo.id ? ref : dispositivo.pai!.filhos[dispositivo.pai!.filhos.length - 2];\n};\n\nconst criaArvoreDispositivos = (articulacao: Articulacao, da: DispositivoEmendaAdicionado, modo: ClassificacaoDocumento): Dispositivo | undefined => {\n  let novo: Dispositivo | undefined;\n\n  const ehCaput = da.tipo === 'Caput';\n\n  if (da.idIrmaoAnterior) {\n    const d = buscaDispositivoById(articulacao, idSemCpt(da.idIrmaoAnterior));\n\n    if (d) {\n      if (d.id === da.idIrmaoAnterior) {\n        novo = criaDispositivo(d.pai!, da.tipo, d);\n      } else {\n        // Entra aqui quando dispositivo  do tipo \"Paragrafo\" e irmo anterior procurado  o \"Caput\" do artigo\n        // Nesse caso, \"d\" j  o \"Artigo\" que ser \"pai\" do novo dispositivo\n        // Em outras palavras: quando o idIrmaoAnterior  de \"caput\" a funo \"buscaDispositivoById\" traz o artigo\n        novo = criaDispositivo(d, da.tipo, undefined, 0);\n      }\n    }\n  } else if (da.idPai) {\n    const d = buscaDispositivoById(articulacao, idSemCpt(da.idPai));\n\n    if (d) {\n      if ((da.tipo === 'Inciso' || da.tipo === 'Omissis') && d.tipo === 'Artigo') {\n        novo = criaDispositivo((d as Artigo).caput!, da.tipo, undefined, 0);\n      } else if (ehCaput) {\n        d.texto = da.texto ?? '';\n        novo = (d as Artigo).caput!;\n      } else if (da.tipo === 'Alteracao') {\n        createAlteracao(d);\n        novo = d.alteracoes!;\n        d.alteracoes!.id = da.id;\n        d.alteracoes!.base = da.urnNormaAlterada;\n      } else {\n        novo = criaDispositivo(d, da.tipo, undefined, 0);\n        novo.texto = da.texto ?? '';\n      }\n    }\n  } else {\n    novo = criaDispositivo(articulacao, da.tipo, undefined, 0);\n  }\n\n  if (novo) {\n    ajustaAtributosDispositivoAdicionado(novo, da, modo);\n  }\n\n  if (novo && da.filhos) {\n    da.filhos.forEach((f, i) => {\n      if (i === 0) {\n        f.idPai = da.id;\n        f.id = corrigeIdDispositivoSeNecessario(f.id, da.id);\n      } else {\n        f.idIrmaoAnterior = da.filhos![i - 1].id;\n      }\n      criaArvoreDispositivos(articulacao, f, modo);\n    });\n  }\n\n  return novo;\n};\n\n// O cdigo abaixo  necessrio para permitir abertura de emendas que foram salvas com o id incorreto (no caput de artigos em alterao de norma).\n// Novas emendas no tero esse problema.\nconst corrigeIdDispositivoSeNecessario = (id: string, idPai: string): string => {\n  return id.startsWith(idPai) ? id : idPai.split('_').slice(0, -1).join('_') + '_' + id;\n};\n\nconst ajustaAtributosDispositivoAdicionado = (dispositivo: Dispositivo, da: DispositivoEmendaAdicionado, modo: ClassificacaoDocumento): void => {\n  dispositivo.texto = da.texto ?? '';\n  dispositivo.id = da.id;\n  const situacao = new DispositivoAdicionado();\n  situacao.tipoEmenda = modo;\n  dispositivo.situacao = situacao;\n  if (dispositivo.isDispositivoAlteracao) {\n    situacao.existeNaNormaAlterada = !!da.existeNaNormaAlterada;\n  }\n\n  if (!isCaput(dispositivo) && !isOmissis(dispositivo) && !isArticulacao(dispositivo)) {\n    dispositivo.createNumeroFromRotulo(da.rotulo!);\n    dispositivo.rotulo = da.rotulo;\n    if (da.abreAspas) {\n      dispositivo.cabecaAlteracao = true;\n    }\n  }\n\n  if (!isArticulacao(dispositivo)) {\n    dispositivo.texto = da.texto ?? '';\n    if (da.fechaAspas) {\n      const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n      cabecaAlteracao.notaAlteracao = da.notaAlteracao;\n    }\n  }\n};\n\nconst idSemCpt = (id: string): string => id.replace(/(_cpt)$/, '');\n\nconst processaRevisoes = (state: State, revisoes: Revisao[]): StateEvent[] => {\n  const elementosExcluidosEmModoDeRevisao: Elemento[] = [];\n  let elementoAnterior: Partial<Elemento>;\n\n  revisoes.forEach(r => {\n    try {\n      if (isRevisaoElemento(r)) {\n        const rAux = r as RevisaoElemento;\n        processarElementoDaRevisao(state, rAux, elementoAnterior, elementosExcluidosEmModoDeRevisao);\n        if (isRevisaoDeExclusao(rAux)) {\n          elementoAnterior = rAux.elementoAposRevisao;\n        }\n      }\n      state.revisoes?.push(r);\n    } catch (error) {\n      // TODO: tratar erro\n    }\n  });\n\n  state.revisoes = identificarRevisaoElementoPai(state, state.revisoes!);\n\n  return [...buildEventoRevisaoDispositivoRestaurado(state, revisoes), { stateType: StateType.ElementoIncluido, elementos: elementosExcluidosEmModoDeRevisao }];\n};\n\nconst buildEventoRevisaoDispositivoRestaurado = (state: State, revisoes: Revisao[]): StateEvent[] => {\n  const result: StateEvent[] = [];\n  const revisoesRestauracao = revisoes.map(r => r as RevisaoElemento).filter(r => r.actionType === RESTAURAR_ELEMENTO) || [];\n\n  if (revisoesRestauracao.length) {\n    const elementos = revisoesRestauracao.map(r => buscaDispositivoById(state.articulacao!, r.elementoAposRevisao.lexmlId!)!).map(d => createElemento(d));\n    result.push({ stateType: StateType.ElementoRestaurado, elementos });\n  }\n\n  return result;\n};\n\nconst processarElementoDaRevisao = (state: State, revisao: RevisaoElemento, elementoAnterior: Partial<Elemento>, elementosExcluidosEmModoDeRevisao: Elemento[]): void => {\n  if (isRevisaoDeExclusao(revisao)) {\n    let e: Partial<Elemento> | undefined;\n\n    if (isRevisaoPrincipal(revisao)) {\n      let d = findDispositivoByUuid2(state.articulacao!, revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.uuid2!);\n      d = d || buscaDispositivoById(state.articulacao!, idSemCpt(revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!.lexmlId!)) || null;\n      e = d ? createElemento(d) : elementoAnterior;\n    } else {\n      e = elementoAnterior;\n    }\n\n    revisao.elementoAposRevisao.uuid = Counter.next();\n    revisao.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e));\n\n    revisao.elementoAntesRevisao!.uuid = revisao.elementoAposRevisao.uuid;\n    revisao.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e));\n\n    atualizarUuidDoPaiDoElementoRemovido(state, revisao);\n\n    elementosExcluidosEmModoDeRevisao.push(revisao.elementoAposRevisao as Elemento);\n    elementoAnterior = revisao.elementoAposRevisao as Elemento;\n  } else {\n    const e = createElemento(buscaDispositivoById(state.articulacao!, revisao.elementoAposRevisao.lexmlId!)!);\n    revisao.elementoAposRevisao.uuid = e.uuid;\n    revisao.elementoAposRevisao.uuid2 = e.uuid2;\n    revisao.elementoAposRevisao.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n    revisao.elementoAposRevisao.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n\n    if (isRevisaoDeMovimentacao(revisao) || isRevisaoDeTransformacao(revisao)) {\n      revisao.elementoAntesRevisao!.uuid = Counter.next();\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n    } else if (revisao.stateType !== StateType.ElementoIncluido) {\n      revisao.elementoAntesRevisao!.uuid = e.uuid;\n      revisao.elementoAntesRevisao!.uuid2 = e.uuid2;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = e.hierarquia?.pai?.uuid;\n      revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = e.hierarquia?.pai?.uuid2;\n    }\n\n    if (e.dispositivoAlteracao) {\n      revisao.elementoAposRevisao.hierarquia!.pai!.uuidAlteracao = e.hierarquia?.pai?.uuidAlteracao;\n      revisao.elementoAposRevisao.hierarquia!.pai!.uuid2Alteracao = e.hierarquia?.pai?.uuid2Alteracao;\n    }\n  }\n};\n\nconst atualizarUuidDoPaiDoElementoRemovido = (state: State, revisao: RevisaoElemento): void => {\n  let uuid: number | undefined = 0;\n  let uuid2: string | undefined = '';\n  let uuidAlteracao: number | undefined = undefined;\n  let uuid2Alteracao: string | undefined = undefined;\n\n  if (isRevisaoPrincipal(revisao)) {\n    const pai = buscaDispositivoById(state.articulacao!, revisao.elementoAposRevisao.hierarquia!.pai!.lexmlId!);\n    uuid = pai?.uuid;\n    uuid2 = pai?.uuid2;\n    if (pai && isDispositivoAlteracao(pai)) {\n      const articulacaoAlteracao = getArticulacao(pai);\n      uuidAlteracao = articulacaoAlteracao?.uuid;\n      uuid2Alteracao = articulacaoAlteracao?.uuid2;\n    }\n  } else {\n    const revisaoPai = findRevisaoById(state.revisoes!, revisao.idRevisaoElementoPai!) as RevisaoElemento;\n    uuid = revisaoPai!.elementoAposRevisao.uuid;\n    uuid2 = revisaoPai!.elementoAposRevisao.uuid2;\n  }\n\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid = uuid;\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid2 = uuid2;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid = uuid;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2 = uuid2;\n\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuidAlteracao = uuidAlteracao;\n  revisao.elementoAposRevisao.hierarquia!.pai!.uuid2Alteracao = uuid2Alteracao;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuidAlteracao = uuidAlteracao;\n  revisao.elementoAntesRevisao!.hierarquia!.pai!.uuid2Alteracao = uuid2Alteracao;\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildHtmlLink, formataNumero, getDataPorExtenso, getNomeExtensoComDataExtenso, getNumero, getTipo, validaUrn } from '../../../model/lexml/documento/urnUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaReferenciaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  const urnNova = action.atual.norma;\n  const urnAnterior = dispositivo?.alteracoes!.base || '';\n  const regex = new RegExp(`<a.+href=.${urnAnterior}.*?>.*?</a>`, 'ig');\n  const normaExtenso = getNomeExtensoComDataExtenso(urnNova);\n\n  if (dispositivo === undefined || !dispositivo.alteracoes || (urnAnterior === urnNova && dispositivo.texto.match(regex))) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const normaLink = buildHtmlLink(urnNova);\n  const textoDispositivo = dispositivo.texto;\n\n  if (dispositivo.texto.match(regex)) {\n    dispositivo.texto = textoDispositivo.replace(regex, normaLink);\n  } else if (dispositivo.texto.includes(normaExtenso)) {\n    dispositivo.texto = textoDispositivo.replace(normaExtenso, normaLink);\n  } else if (urnNova && validaUrn(urnNova) && (dispositivo.texto === undefined || dispositivo.texto?.trim() === '')) {\n    const genero = getTipo(urnNova)?.genero;\n\n    const textoUrn = `${getTipo(urnNova).descricao} n ${formataNumero(getNumero(urnNova))}, de ${getDataPorExtenso(urnNova)}`;\n    dispositivo.texto = `${genero && genero === 'M' ? 'O' : 'A'} <a href=\"${urnNova}\">${textoUrn}</a>, passa a vigorar com as seguintes alteraes:`;\n  } else {\n    const index = parseInt(localStorage.indexCursor);\n    dispositivo.texto = [textoDispositivo.slice(0, index), normaLink, textoDispositivo.slice(index)].join(' ');\n    localStorage.removeItem('indexCursor');\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.alteracoes!.base = urnNova;\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  eventosUi.add(StateType.ElementoValidado, [elemento]);\n  eventosUi.add(StateType.ElementoModificado, [elemento]);\n  eventosUi.add(StateType.SituacaoElementoModificada, [elemento]);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventosUi.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isTextoMaiusculo } from '../../../model/dispositivo/tipo';\nimport { createElemento, criaListaElementosAfinsValidados, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\n// const houveAlteracaoNoTextoAposAcao = (dispositivo: Dispositivo, action: any): boolean => {\n//   const textoAtual = action.atual?.conteudo?.texto;\n//   const textoOriginal = dispositivo.situacao.dispositivoOriginal?.conteudo?.texto;\n//   return textoAtual !== dispositivo.texto && textoAtual !== textoOriginal;\n// };\n\nexport const atualizaTextoElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const textoOriginal = dispositivo?.situacao.dispositivoOriginal?.conteudo?.texto;\n  const textoAtual = action.atual?.conteudo?.texto;\n  const dispositivoOriginalNovamente = dispositivo && textoOriginal === textoAtual;\n\n  if (dispositivo === undefined || dispositivo.texto === textoAtual) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? textoAtual : normalizaSeForOmissis(textoAtual ?? '');\n\n  if (dispositivoOriginalNovamente) {\n    dispositivo.situacao = new DispositivoOriginal();\n  } else if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventosUi = new Eventos();\n\n  const elemento = createElemento(dispositivo, true);\n  elemento.mensagens = validaDispositivo(dispositivo);\n\n  // if (houveAlteracaoNoTextoAposAcao(dispositivo, action)) {\n  //   eventosUi.add(StateType.ElementoModificado, [elemento]);\n  // }\n\n  if (isTextoMaiusculo(dispositivo)) {\n    dispositivo.texto = dispositivo.texto.toUpperCase();\n  }\n\n  eventosUi.add(StateType.ElementoModificado, [elemento]);\n  eventosUi.add(StateType.ElementoValidado, criaListaElementosAfinsValidados(dispositivo));\n\n  if (textoAtual === '') {\n    eventosUi.add(StateType.ElementoMarcado, [elemento]);\n  }\n\n  eventosUi.eventos.push({ stateType: StateType.ElementoSelecionado, elementos: [elemento] });\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventosUi.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const solicitaNorma = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.InformarNorma,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isAgrupador, isOmissis } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { InformarExistenciaDoElementoNaNorma } from '../../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { getDispositivoAndFilhosAsLista, isDispositivoCabecaAlteracao, isDispositivoNovoNaNormaAlterada } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { Mensagem, TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { createElemento, getElementos } from './../../../model/elemento/elementoUtil';\nimport { StateEvent } from './../../state';\n\nexport const informaExistenciaDoElementoNaNorma = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, InformarExistenciaDoElementoNaNorma)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel alterar esse dado do dispositivo' });\n  }\n\n  const currentValueExisteNaNormaAlterada = !isDispositivoNovoNaNormaAlterada(dispositivo);\n  const newValueExisteNaNormaAlterada = action.existeNaNormaAlterada;\n\n  if (currentValueExisteNaNormaAlterada === newValueExisteNaNormaAlterada) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const mensagemValidacao = validaAlteracaoExistenciaDispositivo(dispositivo, newValueExisteNaNormaAlterada);\n  if (mensagemValidacao) {\n    return retornaEstadoAtualComMensagem(state, mensagemValidacao);\n  }\n\n  const mudouIndicacaoDeExistenteParaNovo = currentValueExisteNaNormaAlterada && !action.existeNaNormaAlterada;\n\n  const eventos: StateEvent[] = [];\n\n  if (mudouIndicacaoDeExistenteParaNovo) {\n    const dispositivos = getDispositivoAndFilhosAsLista(dispositivo).filter(d => !isAgrupador(dispositivo) || isAgrupador(d));\n\n    dispositivos.forEach(d => {\n      const original = createElemento(d);\n      (d.situacao as DispositivoAdicionado).existeNaNormaAlterada = action.existeNaNormaAlterada;\n      const alterado = createElemento(d);\n      eventos.push({\n        stateType: StateType.ElementoModificado,\n        elementos: [original, alterado],\n      });\n\n      eventos.push({\n        stateType: StateType.SituacaoElementoModificada,\n        elementos: getElementos(dispositivo),\n      });\n    });\n  } else {\n    const original = createElemento(dispositivo);\n    (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada = action.existeNaNormaAlterada;\n    const alterado = createElemento(dispositivo);\n    eventos.push({\n      stateType: StateType.ElementoModificado,\n      elementos: [original, alterado],\n    });\n\n    eventos.push({\n      stateType: StateType.SituacaoElementoModificada,\n      elementos: getElementos(dispositivo),\n    });\n  }\n\n  eventos.push({\n    stateType: StateType.ElementoSelecionado,\n    elementos: [createElemento(dispositivo)],\n  });\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [], //state.future,\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nexport const validaAlteracaoExistenciaDispositivo = (dispositivo: Dispositivo, newValueExisteNaNormaAlterada: boolean): Mensagem | undefined => {\n  const currentValueExisteNaNormaAlterada = !isDispositivoNovoNaNormaAlterada(dispositivo);\n  if (currentValueExisteNaNormaAlterada === newValueExisteNaNormaAlterada) {\n    return;\n  }\n\n  const mudouIndicacaoDeExistenteParaNovo = currentValueExisteNaNormaAlterada && !newValueExisteNaNormaAlterada;\n  return mudouIndicacaoDeExistenteParaNovo ? validaAlteracaoExistenteParaNovo(dispositivo) : validaAlteracaoNovoParaExistente(dispositivo);\n};\n\nconst validaAlteracaoNovoParaExistente = (dispositivo: Dispositivo): Mensagem | undefined => {\n  if (isDispositivoPossuiPaiNovoNaNormaAlterada(dispositivo)) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'No  permitido mudar a indicao de dispositivo \"Novo\" para \"Existente\" quando dispositivo hierarquicamente superior  novo na norma alterada.',\n    };\n  }\n};\n\nconst validaAlteracaoExistenteParaNovo = (dispositivo: Dispositivo): Mensagem | undefined => {\n  const dispositivos = getDispositivoAndFilhosAsLista(dispositivo);\n\n  if (isAgrupador(dispositivo) && existeSubordinadoComStatusExistente(dispositivo.filhos.filter(d => !isOmissis(d)))) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: `No  permitido mudar a indicao de dispositivo \"Existente\" para \"Novo\" quando existe dispositivo subordinado com status \"Existente\".`,\n    };\n  }\n\n  if (existeDispositivoSemNumeroNaoOmissis(dispositivos.slice(1))) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'No  permitido mudar a indicao de dispositivo \"Existente\" para \"Novo\" quando existe dispositivo subordinado sem numerao.',\n    };\n  }\n\n  if (existeOmissis(dispositivo)) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'No  permitido mudar a indicao de dispositivo \"Existente\" para \"Novo\" quando existe texto omitido na estrutura do dispositivo.',\n    };\n  }\n\n  if (existeNecessidadeDeOmissis(dispositivos.slice(1))) {\n    return {\n      tipo: TipoMensagem.INFO,\n      descricao: 'No  permitido mudar a indicao de dispositivo \"Existente\" para \"Novo\" quando existe numerao no sequencial nos dispositivos subordinados.',\n    };\n  }\n};\n\nconst isDispositivoPossuiPaiNovoNaNormaAlterada = (dispositivo: Dispositivo): boolean => {\n  const existe = (dispositivo.pai?.situacao as DispositivoAdicionado).existeNaNormaAlterada;\n  return !isDispositivoCabecaAlteracao(dispositivo) && !(existe ?? true);\n};\n\nconst existeSubordinadoComStatusExistente = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => !isDispositivoNovoNaNormaAlterada(d));\n};\n\nconst existeDispositivoSemNumeroNaoOmissis = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => (d.mensagens?.some(m => m.descricao?.toLowerCase().includes('numere o dispositivo')) || d.numero === undefined) && !isOmissis(d));\n};\n\nconst existeOmissis = (dispositivo: Dispositivo): boolean => {\n  const dispositivos = getDispositivoAndFilhosAsLista(dispositivo);\n  return dispositivos.some(d => d.tipo === 'Omissis' || d.texto?.includes(TEXTO_OMISSIS));\n};\n\nconst existeNecessidadeDeOmissis = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => validaDispositivo(d).find(m => m.descricao?.includes('linha pontilhada antes')));\n};\n","import {\n  isDispositivoAlteracao,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  isDispositivoNovoNaNormaAlterada,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoTransformacaoPermitida, normalizaNomeAcaoTransformacao } from '../../../model/lexml/acao/acaoUtil';\nimport { converteDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { getDispositivoAnterior, isParagrafoUnico } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { buildEventoTransformacaooElemento } from '../evento/eventosUtil';\nimport { getElementosDoDispositivo } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { buildId } from '../../../model/lexml/util/idUtil';\n\nexport const transformaTipoElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  const cabecaAlteracao = atual && isDispositivoAlteracao(atual) && getDispositivoCabecaAlteracao(atual);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoTransformacaoPermitida(atual, action)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel transformar o dispositivo' });\n  }\n\n  const dispositivoAnteriorAtual = getDispositivoAnterior(atual);\n\n  if (dispositivoAnteriorAtual && isDispositivoNovoNaNormaAlterada(dispositivoAnteriorAtual) && !isDispositivoNovoNaNormaAlterada(atual)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Dispositivo existente no pode ser transformado em filho de dispositivo novo' });\n  }\n\n  const ultimoFilhoDispositivoAnteriorAtual = cabecaAlteracao && dispositivoAnteriorAtual && getUltimoFilho(dispositivoAnteriorAtual);\n\n  action.subType = normalizaNomeAcaoTransformacao(atual, action.subType);\n\n  const removidos = [...getElementos(atual, false, true)];\n\n  const atualRenumerados = listaDispositivosRenumerados(atual);\n\n  const novo = converteDispositivo(atual, action);\n\n  //novo.id = buildId(novo);\n  getDispositivoAndFilhosAsLista(novo).forEach(d => (d.id = buildId(d)));\n\n  const novoRenumerados = listaDispositivosRenumerados(novo);\n\n  const renumerados = novoRenumerados.concat(atualRenumerados);\n\n  const validados = getElementosDoDispositivo(novo, true);\n\n  const paiNovo = isCaput(novo.pai!) ? novo.pai!.pai! : novo.pai!;\n\n  if (dispositivoAnteriorAtual && isParagrafoUnico(dispositivoAnteriorAtual)) {\n    dispositivoAnteriorAtual.pai!.renumeraFilhos();\n    renumerados.unshift(dispositivoAnteriorAtual);\n  }\n\n  const dispositivoAnterior = getDispositivoAnterior(novo);\n\n  if (dispositivoAnterior) {\n    const mensagens = validaDispositivo(dispositivoAnterior);\n    if (dispositivoAnterior.mensagens !== mensagens) {\n      validados.unshift(createElemento(dispositivoAnterior));\n    }\n  }\n\n  const parent = validados.filter(v => v.uuid === paiNovo.uuid).length > 0 ? atual.pai : paiNovo;\n\n  if (parent) {\n    getDispositivoAndFilhosAsLista(parent).forEach(d => {\n      d.mensagens = validaDispositivo(d);\n      validados.unshift(createElemento(d));\n    });\n  }\n\n  const referencia = dispositivoAnterior ?? novo.pai!;\n  const eventos = buildEventoTransformacaooElemento(\n    isCaput(referencia) ? referencia.pai! : referencia,\n    novo,\n    removidos,\n    renumerados.map(d => {\n      d.mensagens = validaDispositivo(d);\n      const el = createElemento(d);\n      //el.lexmlId = buildId(d);\n      return el;\n    }),\n    validados\n  );\n\n  if (novo.tipo === 'Artigo' && cabecaAlteracao) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(getUltimoFilho(cabecaAlteracao))]);\n  } else if (novo.tipo === 'Paragrafo' && ultimoFilhoDispositivoAnteriorAtual) {\n    eventos.add(StateType.SituacaoElementoModificada, [createElemento(ultimoFilhoDispositivoAnteriorAtual)]);\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { StateType } from './../../state';\nimport {\n  getDispositivoPosterior,\n  getDispositivoAnterior,\n  getPrimeiroAgrupadorNaArticulacao,\n  hasEmenta,\n  getTiposAgrupadorArtigoPermitidosNaArticulacao,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isArticulacao, isArtigo } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RemoverElemento } from '../../../model/lexml/acao/removerElementoAction';\nimport { hasFilhos, isArtigoUnico, isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { getPaiQuePodeReceberFilhoDoTipo, removeAgrupadorAndBuildEvents, removeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { existeFilhoExcluidoOuAlteradoDuranteRevisao, findRevisaoByElementoUuid2, isRevisaoDeMovimentacao, isRevisaoPrincipal } from '../util/revisaoUtil';\n\nexport const removeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (isAgrupador(dispositivo) && !isDispositivoAlteracao(dispositivo)) {\n    // S deixa remover agrupador se articulao permenecer consistente\n    if (isArticulacao(dispositivo.pai!)) {\n      const tipos = getTiposAgrupadorArtigoPermitidosNaArticulacao();\n      if (!dispositivo.filhos.every(f => isArtigo(f) || tipos.includes(f.tipo))) {\n        return retornaEstadoAtualComMensagem(state, {\n          tipo: TipoMensagem.ERROR,\n          descricao: `Operao no permitida (se houver sees abaixo do \"${dispositivo.rotulo}\", elas devem ser removidas antes)`,\n        });\n      }\n    } else if (dispositivo.filhos.filter(f => !isArtigo(f)).length) {\n      const dispositivos = getDispositivoAndFilhosAsLista(dispositivo.pai!).filter(isAgrupador);\n      const agrupadorAntes = dispositivos[dispositivos.indexOf(dispositivo) - 1] || {};\n      const agrupadorDepois = dispositivos[dispositivos.indexOf(dispositivo) + 1] || {};\n      if (agrupadorAntes.tipo !== agrupadorDepois.tipo && !getPaiQuePodeReceberFilhoDoTipo(dispositivo.pai!, agrupadorDepois.tipo, [])) {\n        return retornaEstadoAtualComMensagem(state, {\n          tipo: TipoMensagem.ERROR,\n          descricao: `Operao no permitida (o agrupador \"${agrupadorDepois.rotulo}\" no poder estar diretamente subordinado ao agrupador \"${agrupadorAntes.rotulo}\")`,\n        });\n      }\n    }\n  }\n\n  if (!isAcaoPermitida(dispositivo, RemoverElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir um dispositivo original mas apenas suprimi-lo.' });\n  }\n\n  if (\n    !isDispositivoAlteracao(dispositivo) &&\n    (isArtigoUnico(dispositivo) || (state.articulacao.filhos.length === 1 && state.articulacao.filhos[0] === dispositivo && !hasFilhos(dispositivo)))\n  ) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'No  possvel excluir o nico dispositivo disponvel.' });\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoOuAlteradoDuranteRevisao(state, dispositivo) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No  possvel remover dispositivo que possua dispositivo subordinado j removido ou alterado em modo de reviso.',\n    });\n  }\n\n  const revisao = findRevisaoByElementoUuid2(state.revisoes, dispositivo.uuid2);\n  if (state.emRevisao && revisao && isRevisaoPrincipal(revisao) && isRevisaoDeMovimentacao(revisao) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No  possvel remover dispositivo movido em modo de reviso.',\n    });\n  }\n\n  const primeiroFilhoDoAgrupador = isAgrupador(dispositivo) ? dispositivo.filhos[0] || getDispositivoPosterior(dispositivo) || getDispositivoAnterior(dispositivo) : undefined;\n  const elPrimeiroFilhoDoAgrupador = primeiroFilhoDoAgrupador ? createElemento(primeiroFilhoDoAgrupador) : undefined;\n  const isAtualizarElementoEmenta = hasEmenta(dispositivo) && dispositivo === getPrimeiroAgrupadorNaArticulacao(dispositivo);\n\n  const events = isAgrupador(dispositivo) ? removeAgrupadorAndBuildEvents(state.articulacao, dispositivo) : removeAndBuildEvents(state, dispositivo);\n\n  if (elPrimeiroFilhoDoAgrupador) {\n    events.push({ stateType: StateType.ElementoMarcado, elementos: [elPrimeiroFilhoDoAgrupador] });\n    events.push({ stateType: StateType.ElementoReferenciado, elementos: [elPrimeiroFilhoDoAgrupador] });\n  }\n\n  if (isAtualizarElementoEmenta) {\n    events.push({ stateType: StateType.SituacaoElementoModificada, elementos: [createElemento(state.articulacao.projetoNorma.ementa)] });\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao, TipoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo } from '../../../model/dispositivo/tipo';\nimport { Elemento } from '../../../model/elemento';\nimport { createElemento, getDispositivoFromElemento, isElementoDispositivoAlteracao } from '../../../model/elemento/elementoUtil';\nimport { createAlteracao, createArticulacao, criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buscaDispositivoById,\n  findDispositivoByUuid,\n  getDispositivoAndFilhosAsLista,\n  getDispositivoAnterior,\n  getTiposAgrupadorArtigoOrdenados,\n  getUltimoFilho,\n  isAdicionado,\n  isArticulacaoAlteracao,\n  isSuprimido,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { DispositivoNovo } from '../../../model/lexml/situacao/dispositivoNovo';\nimport { DispositivoOriginal } from '../../../model/lexml/situacao/dispositivoOriginal';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getEvento } from '../evento/eventosUtil';\nimport { getDispositivoCabecaAlteracao, isDispositivoAlteracao, isUltimaAlteracao, hasEmenta } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport {\n  associarRevisoesAosElementos,\n  existeRevisaoCriadaPorExclusao,\n  findRevisaoDeExclusaoComElementoAnteriorApontandoPara,\n  findRevisaoDeRestauracaoByUuid,\n  findUltimaRevisaoDoGrupo,\n  getElementosFromRevisoes,\n  isRevisaoPrincipal,\n  removeAtributosDoElementoAnteriorNaSequenciaDeLeitura,\n} from './revisaoUtil';\nimport { retornaEstadoAtualComMensagem } from './stateReducerUtil';\nimport { removeElemento } from '../reducer/removeElemento';\nimport { buildId } from '../../../model/lexml/util/idUtil';\n\nconst getTipoSituacaoByDescricao = (descricao: string): TipoSituacao => {\n  switch (descricao) {\n    case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n      return new DispositivoAdicionado();\n    case DescricaoSituacao.DISPOSITIVO_NOVO:\n      return new DispositivoNovo();\n    default:\n      return new DispositivoOriginal();\n  }\n};\n\nconst getDispositivoPaiFromElemento = (articulacao: Articulacao, elemento: Partial<Elemento>): Dispositivo | null => {\n  if (isElementoDispositivoAlteracao(elemento)) {\n    const artigo = isArticulacaoAlteracao(articulacao)\n      ? articulacao.pai!\n      : findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuidAlteracao!) || buscaDispositivoById(articulacao, elemento.hierarquia!.pai!.lexmlId!);\n\n    if (artigo) {\n      if (!artigo.alteracoes) {\n        artigo!.alteracoes = createArticulacao();\n        artigo.alteracoes.pai = artigo;\n      }\n      if (elemento.hierarquia!.pai!.tipo! === TipoDispositivo.articulacao.tipo) {\n        return artigo.alteracoes;\n      }\n      return findDispositivoByUuid(artigo.alteracoes, elemento.hierarquia!.pai!.uuid!) || buscaDispositivoById(artigo.alteracoes, elemento.hierarquia!.pai!.lexmlId!) || null;\n    }\n  }\n  return findDispositivoByUuid(articulacao, elemento.hierarquia!.pai!.uuid!) || buscaDispositivoById(articulacao, elemento.hierarquia!.pai!.lexmlId!) || null;\n};\n\nconst isOmissisCaput = (elemento: Elemento): boolean => {\n  return elemento.tipo === TipoDispositivo.omissis.tipo && elemento.tipoOmissis === 'inciso-caput';\n};\n\nconst redodDispositivoExcluido = (elemento: Elemento, pai: Dispositivo, modo: string | undefined): Dispositivo => {\n  const novo = criaDispositivo(\n    isArtigo(pai) && (elemento.tipo === TipoDispositivo.inciso.name || isOmissisCaput(elemento)) ? (pai as Artigo).caput! : pai,\n    elemento.tipo!,\n    undefined,\n    elemento.hierarquia!.posicao\n  );\n  novo.uuid = elemento.uuid;\n  novo.uuid2 = elemento.uuid2;\n  novo.id = elemento.lexmlId;\n  novo!.texto = elemento?.conteudo?.texto ?? '';\n  novo!.numero = elemento?.hierarquia?.numero;\n  novo.rotulo = elemento?.rotulo;\n  novo.mensagens = elemento?.mensagens;\n  novo.situacao = getTipoSituacaoByDescricao(elemento!.descricaoSituacao!);\n  if (elemento.descricaoSituacao === 'Dispositivo Adicionado') {\n    (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n    if (modo) {\n      (novo.situacao as DispositivoAdicionado).tipoEmenda = modo as any;\n    }\n  }\n  if (isArtigo(novo)) {\n    (novo as Artigo).caput!.situacao = getTipoSituacaoByDescricao(elemento!.descricaoSituacao!);\n    if (elemento.norma) {\n      createAlteracao(novo);\n      (novo as Artigo).alteracoes!.base = elemento.norma;\n      novo.alteracoes!.situacao = new DispositivoAdicionado();\n      (novo.alteracoes!.situacao as DispositivoAdicionado).tipoEmenda = modo as any;\n      novo.alteracoes!.id = buildId(novo.alteracoes!);\n    }\n  }\n  return novo;\n};\n\nconst redoDispositivosExcluidos = (articulacao: any, elementos: Elemento[], modo: string | undefined): Dispositivo[] => {\n  const primeiroElemento = elementos.shift();\n\n  const pai = getDispositivoPaiFromElemento(articulacao, primeiroElemento!) || buscaDispositivoById(articulacao, primeiroElemento!.hierarquia!.pai!.lexmlId!);\n  const primeiro = redodDispositivoExcluido(primeiroElemento!, pai!, modo);\n  const idPrimeiroDispositivo = primeiro.id!;\n\n  const novos: Dispositivo[] = [primeiro];\n  elementos?.forEach(filho => {\n    const parent =\n      filho.hierarquia?.pai === primeiroElemento?.hierarquia?.pai\n        ? primeiro.pai!\n        : getDispositivoPaiFromElemento(articulacao, filho) || buscaDispositivoById(articulacao, idPrimeiroDispositivo);\n\n    const novo = redodDispositivoExcluido(filho, parent!, modo);\n    novos.push(novo);\n  });\n\n  return novos;\n};\n\nexport const incluir = (state: State, evento: StateEvent, novosEvento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const elemento = evento.elementos[0];\n    const procurarElementoAnterior = evento.elementos.some(e => e.elementoAnteriorNaSequenciaDeLeitura);\n\n    const pai = getDispositivoPaiFromElemento(state.articulacao!, elemento!);\n\n    const novos = redoDispositivosExcluidos(state.articulacao, evento.elementos, state.modo);\n    pai?.renumeraFilhos();\n\n    if (novosEvento) {\n      const posicao = elemento!.hierarquia!.posicao;\n\n      let referencia = posicao === 0 ? (isArticulacao(pai!) && isArticulacaoAlteracao(pai as Articulacao) ? pai!.pai! : pai) : getUltimoFilho(getDispositivoAnterior(novos[0])!);\n\n      if (referencia) {\n        referencia = isArticulacao(referencia) && hasEmenta(referencia) ? (referencia as Articulacao).projetoNorma!.ementa! : referencia;\n        const dispositivo = getDispositivoFromElemento(state.articulacao!, referencia);\n        dispositivo ? (novosEvento.referencia = createElemento(dispositivo!)) : retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'Erro inesperado' });\n      }\n    }\n\n    if (evento.stateType === StateType.ElementoIncluido) {\n      novosEvento.referencia = evento.referencia;\n    }\n\n    return novos.map(n => createElemento(n, true, procurarElementoAnterior));\n  }\n  return [];\n};\n\nexport const remover = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, el, true);\n      if (dispositivo) {\n        const pai = dispositivo.pai!;\n        pai.removeFilho(dispositivo);\n        pai.renumeraFilhos();\n      }\n    });\n    return evento.elementos;\n  }\n  return [];\n};\n\nexport const restaurarSituacao = (state: State, evento: StateEvent, eventoRestaurados: StateEvent, Situacao: any): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    evento.elementos.forEach(el => {\n      const d = getDispositivoFromElemento(state.articulacao!, el, true);\n\n      if (Situacao instanceof DispositivoOriginal) {\n        d!.numero = d!.situacao.dispositivoOriginal?.numero ?? '';\n        d!.rotulo = d!.situacao.dispositivoOriginal?.rotulo ?? '';\n        d!.texto = d!.situacao.dispositivoOriginal?.conteudo?.texto ?? '';\n        d!.situacao = new DispositivoOriginal();\n      } else {\n        d!.situacao = new Situacao(createElemento(d!));\n      }\n      eventoRestaurados.elementos!.push(createElemento(d!));\n    });\n    return eventoRestaurados.elementos!;\n  }\n  return [];\n};\n\nexport const processarModificados = (state: State, evento: StateEvent, operacao: 'UNDO' | 'REDO', revisoes: RevisaoElemento[] = []): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    let anterior = 0;\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        const permiteAtualizar = anterior !== dispositivo.uuid || (operacao === 'REDO' && anterior === dispositivo.uuid);\n        if (permiteAtualizar) {\n          if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n            if (findRevisaoDeRestauracaoByUuid(revisoes, dispositivo.uuid!) || dispositivo.situacao.dispositivoOriginal!.conteudo!.texto === e.conteudo?.texto) {\n              dispositivo.texto = dispositivo.situacao.dispositivoOriginal!.conteudo?.texto ?? '';\n              dispositivo.situacao = new DispositivoOriginal();\n            } else {\n              dispositivo.texto = e.conteudo?.texto ?? '';\n            }\n          } else {\n            if (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n              dispositivo.situacao = new DispositivoModificado(createElemento(dispositivo));\n            }\n            dispositivo.texto = e.conteudo?.texto ?? '';\n          }\n          if (dispositivo.alteracoes) {\n            dispositivo.alteracoes.base = e.norma;\n          }\n\n          if (dispositivo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n            (dispositivo.situacao as DispositivoAdicionado).existeNaNormaAlterada = e.existeNaNormaAlterada;\n            if (isDispositivoAlteracao(dispositivo) && isUltimaAlteracao(dispositivo)) {\n              const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n              cabecaAlteracao.notaAlteracao = e.notaAlteracao;\n            }\n          }\n\n          dispositivo.mensagens = validaDispositivo(dispositivo);\n          novosElementos.push(createElemento(dispositivo));\n          anterior = dispositivo.uuid!;\n        }\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaRenumerados = (state: State, evento: StateEvent): Elemento[] => {\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const novosElementos: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        novosElementos.push(createElemento(dispositivo!));\n      }\n    });\n\n    return novosElementos;\n  }\n  return [];\n};\n\nexport const processaValidados = (state: State, eventos: StateEvent[]): Elemento[] => {\n  const evento = getEvento(eventos, StateType.ElementoValidado);\n  if (evento !== undefined && evento.elementos !== undefined && evento.elementos[0] !== undefined) {\n    const validados: Elemento[] = [];\n\n    evento.elementos.forEach(e => {\n      const dispositivo = getDispositivoFromElemento(state.articulacao!, e, true);\n      if (dispositivo) {\n        dispositivo.mensagens = validaDispositivo(dispositivo);\n        validados.push(createElemento(dispositivo));\n      }\n    });\n    return validados;\n  }\n  return [];\n};\n\nexport const processaSituacoesAlteradas = (state: State, eventos: StateEvent[]): Elemento[] => {\n  const elementos: Elemento[] = [];\n  eventos\n    .filter(ev => ev.stateType === StateType.SituacaoElementoModificada)\n    .forEach(ev => {\n      ev.elementos?.forEach((el: Elemento) => {\n        const dispositivo = getDispositivoFromElemento(state.articulacao!, el, true);\n        if (dispositivo) {\n          elementos.push(createElemento(dispositivo));\n        }\n      });\n    });\n  return elementos;\n};\n\nexport const isUndoRedoInclusaoExclusaoAgrupador = (eventos: StateEvent[]): boolean => {\n  const tiposAgrupadorArtigo = getTiposAgrupadorArtigoOrdenados();\n  const eventosFiltrados = eventos.filter(ev => ![StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(ev.stateType));\n  return (\n    eventosFiltrados.length > 0 &&\n    [StateType.ElementoIncluido, StateType.ElementoRemovido].includes(eventosFiltrados[0].stateType) &&\n    eventosFiltrados[0].elementos!.length > 0 &&\n    tiposAgrupadorArtigo.includes(eventosFiltrados[0].elementos![0].tipo!)\n  );\n};\n\nexport const ajustarAtributosAgrupadorIncluidoPorUndoRedo = (articulacao: Articulacao, eventosFonte: StateEvent[], eventosResultantes: StateEvent[]): void => {\n  const refFonteAgrupadorIncluido = eventosFonte[0].elementos![0];\n  const agrupadorIncluido = eventosResultantes[0].elementos![0];\n  const dispositivo = getDispositivoFromElemento(articulacao, agrupadorIncluido)!;\n  dispositivo.texto = refFonteAgrupadorIncluido.conteudo!.texto ?? '';\n  dispositivo.numero = refFonteAgrupadorIncluido.numero;\n  dispositivo.id = refFonteAgrupadorIncluido.lexmlId;\n  dispositivo.rotulo = refFonteAgrupadorIncluido.rotulo;\n  eventosResultantes[0].elementos!.length = 0;\n  eventosResultantes[0].elementos!.push(createElemento(dispositivo));\n};\n\nexport const ajustarHierarquivoAgrupadorIncluidoPorUndoRedo = (articulacao: Articulacao, eventosFonte: StateEvent[], eventosResultantes: StateEvent[]): void => {\n  const elAgrupador = eventosFonte[0].elementos![0];\n\n  if (!elAgrupador.dispositivoAlteracao || !elAgrupador.ultimoFilhoDireto) {\n    return;\n  }\n\n  const agrupador = getDispositivoFromElemento(articulacao, elAgrupador)!;\n  const pai = agrupador.pai!;\n  const ultimoFilhoDireto = getDispositivoFromElemento(articulacao, elAgrupador.ultimoFilhoDireto)!;\n\n  let index = pai.filhos.indexOf(agrupador) + 1;\n\n  while (index < pai.filhos.length) {\n    const d = pai.filhos[index];\n    if (isAdicionado(d)) {\n      pai.removeFilho(d);\n      d.pai = agrupador;\n      agrupador.addFilho(d);\n\n      if (d.uuid === ultimoFilhoDireto.uuid) {\n        break;\n      }\n    } else {\n      index++;\n    }\n  }\n\n  eventosResultantes.push({ stateType: StateType.SituacaoElementoModificada, elementos: getDispositivoAndFilhosAsLista(agrupador).map(d => createElemento(d)) });\n};\n\nexport const processarRestaurados = (state: State, evento: StateEvent, acao: string): StateEvent => {\n  const elementoDeReferencia = evento.elementos![acao === 'UNDO' ? 0 : 1];\n  const d = getDispositivoFromElemento(state.articulacao!, elementoDeReferencia, true)!;\n\n  const elementoAntesDeRestaurarSituacao = createElemento(d);\n  let stateType: StateType;\n\n  if (elementoDeReferencia.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    d.situacao = new DispositivoModificado(createElemento(d));\n    stateType = StateType.ElementoRestaurado;\n  } else if (elementoDeReferencia.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    d.situacao = new DispositivoSuprimido(createElemento(d));\n    stateType = StateType.ElementoRestaurado;\n  } else {\n    d.situacao = new DispositivoOriginal();\n    stateType = StateType.ElementoRestaurado;\n  }\n\n  d.numero = elementoDeReferencia.numero ?? '';\n  d.rotulo = elementoDeReferencia.rotulo ?? '';\n  d.texto = elementoDeReferencia.conteudo?.texto ?? '';\n\n  const elementos = isSuprimido(d) ? [createElemento(d)] : [elementoAntesDeRestaurarSituacao, createElemento(d)];\n\n  return { stateType, elementos };\n};\n\nexport const processarSuprimidos = (state: State, evento: StateEvent): StateEvent[] => {\n  const result: StateEvent[] = [];\n\n  evento.elementos?.forEach(e => {\n    const d = getDispositivoFromElemento(state.articulacao!, e, true)!;\n    const elementoAntesRestauracao = createElemento(d);\n    d.situacao = new DispositivoOriginal();\n    result.push({ stateType: StateType.ElementoRestaurado, elementos: [elementoAntesRestauracao, createElemento(d!)] });\n  });\n\n  return result;\n};\n\nexport const processarRevisoesAceitasOuRejeitadas = (state: State, eventos: StateEvent[], stateType: StateType): StateEvent[] => {\n  const atualizaReferenciaElementoAnteriorSeNecessario = (revisoesRetornadasParaState: RevisaoElemento[]): void => {\n    revisoesRetornadasParaState.filter(isRevisaoPrincipal).forEach(r => {\n      const e = r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura!;\n      const revisaoASerAtualizada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(state.revisoes!, e);\n      if (revisaoASerAtualizada && revisaoASerAtualizada.id !== r.id) {\n        const revisaoRetornada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(revisoesRetornadasParaState, e);\n        const ultimaRevisaoDoGrupo = findUltimaRevisaoDoGrupo(revisoesRetornadasParaState, revisaoRetornada!);\n\n        const elementoAnterior = JSON.parse(JSON.stringify(ultimaRevisaoDoGrupo.elementoAposRevisao));\n        removeAtributosDoElementoAnteriorNaSequenciaDeLeitura(elementoAnterior);\n        revisaoASerAtualizada.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = elementoAnterior;\n        revisaoASerAtualizada.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = elementoAnterior;\n      }\n    });\n  };\n\n  const result: StateEvent[] = [];\n  const eventosFiltrados = eventos.filter((se: StateEvent) => se.stateType === stateType);\n  if (eventosFiltrados.length) {\n    eventosFiltrados.forEach((ev: StateEvent) => {\n      const revisoesRetornadasParaState = ev.elementos!.map(e => e.revisao! as RevisaoElemento);\n      state.revisoes!.push(...revisoesRetornadasParaState);\n\n      result.push({ stateType: ev.stateType, elementos: ev.elementos });\n\n      if (existeRevisaoCriadaPorExclusao(revisoesRetornadasParaState)) {\n        const elementos = revisoesRetornadasParaState.map(r => r.elementoAntesRevisao as Elemento);\n        if (stateType === StateType.RevisaoAdicionalRejeitada) {\n          elementos.forEach(e => removeElemento({ ...state, emRevisao: false }, { atual: e }));\n        }\n\n        // Reapresenta, no editor, os dispositivos removidos em modo de reviso\n        if (stateType === StateType.RevisaoAceita) {\n          result.push({ stateType: StateType.ElementoIncluido, elementos: elementos });\n          result.push({ stateType: StateType.ElementoMarcado, elementos: [elementos[0]] });\n        }\n\n        atualizaReferenciaElementoAnteriorSeNecessario(revisoesRetornadasParaState);\n      } else {\n        const elementos = getElementosFromRevisoes(revisoesRetornadasParaState, state).map(e => JSON.parse(JSON.stringify(e)));\n        associarRevisoesAosElementos(state.revisoes, elementos);\n        result.push({ stateType: StateType.SituacaoElementoModificada, elementos: elementos });\n\n        if (stateType === StateType.RevisaoAceita) {\n          result.push({ stateType: StateType.ElementoMarcado, elementos: [elementos[0]] });\n        }\n      }\n    });\n  }\n  return result;\n};\n","import {\n  ajustarAtributosAgrupadorIncluidoPorUndoRedo,\n  ajustarHierarquivoAgrupadorIncluidoPorUndoRedo,\n  isUndoRedoInclusaoExclusaoAgrupador,\n  processarRestaurados,\n} from './../util/undoRedoReducerUtil';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getElementosRemovidosEIncluidos, getEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaSituacoesAlteradas, processaValidados, remover, restaurarSituacao } from '../util/undoRedoReducerUtil';\nimport { agrupaElemento } from './agrupaElemento';\nimport { removeElemento } from './removeElemento';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport { Revisao } from '../../../model/revisao/revisao';\nimport { findRevisoesByElementoUuid } from '../util/revisaoUtil';\n\nexport const redo = (state: any): State => {\n  if (state.future === undefined || state.future.length === 0) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = state.future.pop();\n  const past = buildPast(state, eventos);\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past,\n    present: [],\n    future: state.future,\n    ui: {\n      events: [],\n      alertas: state.ui?.alertas,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n\n  if (isUndoRedoInclusaoExclusaoAgrupador(eventos)) {\n    let tempState: State;\n    tempState = { ...retorno };\n    tempState.past = [];\n    tempState.present = [];\n    tempState.future = [];\n\n    const listaSemEventosDeRevisao = eventos.filter(\n      (se: StateEvent) => ![StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(se.stateType)\n    );\n\n    if (listaSemEventosDeRevisao[0].stateType === StateType.ElementoIncluido) {\n      const ref = listaSemEventosDeRevisao.find((ev: StateEvent) => ev.stateType === StateType.ElementoReferenciado)!.elementos[0];\n      const elementoASerIncluido = listaSemEventosDeRevisao[0].elementos[0];\n      tempState = agrupaElemento(tempState, {\n        atual: ref,\n        novo: { tipo: elementoASerIncluido.tipo, uuid: elementoASerIncluido.uuid, posicao: 'antes', manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas },\n      });\n      ajustarAtributosAgrupadorIncluidoPorUndoRedo(state.articulacao, listaSemEventosDeRevisao, tempState.ui!.events);\n      ajustarHierarquivoAgrupadorIncluidoPorUndoRedo(state.articulacao, listaSemEventosDeRevisao, tempState.ui!.events);\n    } else {\n      tempState = removeElemento(tempState, { atual: listaSemEventosDeRevisao[0].elementos[0] });\n    }\n\n    const eventosRevisao = getEventosDeRevisao(eventos);\n    if (eventosRevisao.length) {\n      const idsRevisoesAssociadas = eventosRevisao\n        .map((se: StateEvent) => se.elementos || [])\n        .flat()\n        .map((e: Elemento) => findRevisoesByElementoUuid(retorno.revisoes, e.uuid))\n        .flat()\n        .map(r => r.id)\n        .filter(Boolean);\n\n      retorno.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n    }\n\n    retorno.ui!.events = [...eventosRevisao, ...tempState.ui!.events];\n    retorno.present = [...eventosRevisao, ...tempState.ui!.events];\n\n    return retorno;\n  }\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoRemovido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoIncluido), getEvento(events.eventos, StateType.ElementoIncluido)));\n\n  eventos\n    .filter((ev: StateEvent) => ev.stateType === StateType.ElementoModificado)\n    .forEach((ev: StateEvent) => events.eventos.push({ stateType: StateType.ElementoModificado, elementos: processarModificados(state, ev, 'REDO') }));\n\n  events.add(\n    StateType.ElementoSuprimido,\n    restaurarSituacao(state, getEvento(eventos, StateType.ElementoSuprimido), getEvento(events.eventos, StateType.ElementoSuprimido), DispositivoSuprimido)\n  );\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoRestaurado).forEach((ev: StateEvent) => events.eventos.push(processarRestaurados(state, ev, 'REDO')));\n\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos;\n  if (elementosParaMarcar) {\n    events.add(StateType.ElementoMarcado, elementosParaMarcar);\n    events.add(StateType.ElementoSelecionado, [elementosParaMarcar[0]]);\n  }\n\n  events.add(StateType.SituacaoElementoModificada, getElementosAlteracaoASeremAtualizados(state.articulacao, getElementosRemovidosEIncluidos(events.eventos)));\n  events.eventos.push({ stateType: StateType.SituacaoElementoModificada, elementos: processaSituacoesAlteradas(state, eventos) });\n\n  const eventosRevisao = getEventosDeRevisao(eventos);\n  if (eventosRevisao.length) {\n    const idsRevisoesAssociadas = eventosRevisao\n      .map((se: StateEvent) => se.elementos || [])\n      .flat()\n      .map((e: Elemento) => findRevisoesByElementoUuid(retorno.revisoes, e.uuid))\n      .flat()\n      .map(r => r.id)\n      .filter(Boolean);\n\n    retorno.revisoes = state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n  }\n\n  retorno.ui!.events = [...eventosRevisao, ...events.build()];\n  retorno.present = [...eventosRevisao, ...events.build()];\n\n  return retorno;\n};\n\nconst getEventosDeRevisao = (eventos: StateEvent[]): StateEvent[] => {\n  return eventos.filter((se: StateEvent) => [StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(se.stateType));\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { getDispositivoAnterior } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { removeElemento } from './removeElemento';\n// import { isAgrupador } from '../../../model/dispositivo/tipo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { hasFilhos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Dispositivo } from '../../../model/dispositivo/dispositivo';\n\nexport const removeElementoSemTexto = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || !podeRemoverDispositivo(state, dispositivo)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const dispositivoAnterior = getDispositivoAnterior(dispositivo);\n\n  const retorno = removeElemento(state, action);\n  if (action.key === 'Backspace' && dispositivoAnterior) {\n    retorno.ui?.events.push(getEventoMarcacaoElemento(dispositivoAnterior));\n  }\n  return retorno;\n};\n\nconst getEventoMarcacaoElemento = (dispositivo: Dispositivo): StateEvent => {\n  return {\n    stateType: StateType.ElementoMarcado,\n    elementos: [createElemento(dispositivo)],\n    moverParaFimLinha: true,\n  };\n};\n\nconst podeRemoverDispositivo = (state: any, dispositivo: Dispositivo): boolean => {\n  if (state.modo.startsWith('emenda') && dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n    return false;\n  }\n  return !hasFilhos(dispositivo);\n};\n","import { Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { RenumerarElemento } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nconst ajustarNumero = (dispositivo: Dispositivo, numero: string | undefined): string => {\n  if (!numero) {\n    return '';\n  }\n\n  if (dispositivo.tipo !== 'Alinea') {\n    return numero.toUpperCase();\n  }\n\n  const partes = numero.split('-');\n  return partes.map((parte, index) => (index > 0 ? parte.toUpperCase() : parte)).join('-');\n};\n\nexport const renumeraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, RenumerarElemento)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel renumerar o dispositivo' });\n  }\n\n  if (isDispositivoAlteracao(dispositivo) && ajustarNumero(dispositivo, action.novo?.numero)?.startsWith('0')) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'No pode haver um dispositivo com esse rtulo em alterao de norma' });\n  }\n\n  const past = buildPast(state, buildUpdateEvent(dispositivo));\n\n  try {\n    const numero = ajustarNumero(dispositivo, action.novo?.numero);\n    dispositivo.createNumeroFromRotulo(numero);\n    dispositivo.id = buildId(dispositivo);\n    if (dispositivo.tipo === 'Artigo') {\n      (dispositivo as Artigo).caput!.id = buildId((dispositivo as Artigo).caput!);\n    }\n  } catch (error) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'O rtulo informado  invlido', detalhe: error });\n  }\n\n  dispositivo.createRotulo(dispositivo);\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past,\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao, isSituacaoExclusivaDispositivoEmenda } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAndFilhosAsLista } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State } from '../../state';\nimport { restauraAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const restauraElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const possuiFilhosModificados = getDispositivoAndFilhosAsLista(dispositivo).filter(f => isSituacaoExclusivaDispositivoEmenda(f)).length > 0;\n\n  if (\n    !possuiFilhosModificados &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO &&\n    dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n  ) {\n    return state;\n  }\n\n  const events = restauraAndBuildEvents(dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { suprimeAndBuildEvents } from '../evento/eventosUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nconst getSituacoesFilhos = (dispositivos: Dispositivo[], situacoes: Set<string>): void => {\n  if (dispositivos.length === 0) {\n    return;\n  }\n  dispositivos?.forEach(d => {\n    situacoes.add(d.situacao.descricaoSituacao);\n    getSituacoesFilhos(d.filhos, situacoes);\n  });\n};\n\nexport const podeSuprimir = (dispositivo: Dispositivo): boolean => {\n  const situacoes = new Set<string>();\n  situacoes.add(dispositivo.situacao.descricaoSituacao);\n  getSituacoesFilhos(dispositivo.filhos, situacoes);\n\n  if (dispositivo.alteracoes) {\n    getSituacoesFilhos(dispositivo.alteracoes?.filhos, situacoes);\n  }\n  return situacoes.size === 1 && [...situacoes][0] === DescricaoSituacao.DISPOSITIVO_ORIGINAL;\n};\n\nexport const suprimeElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!podeSuprimir(dispositivo)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: 'S  possvel suprimir dispositivos que no tenham sofrido modificao.' });\n  }\n\n  const events = suprimeAndBuildEvents(state.articulacao, dispositivo);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { agrupaElemento } from './agrupaElemento';\nimport { removeElemento } from './removeElemento';\nimport {\n  ajustarAtributosAgrupadorIncluidoPorUndoRedo,\n  isUndoRedoInclusaoExclusaoAgrupador,\n  processaSituacoesAlteradas,\n  processarRestaurados,\n  processarSuprimidos,\n  processarRevisoesAceitasOuRejeitadas,\n  ajustarHierarquivoAgrupadorIncluidoPorUndoRedo,\n} from './../util/undoRedoReducerUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { getElementosRemovidosEIncluidos, getEvento, unificarEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport { buildFuture } from '../util/stateReducerUtil';\nimport { incluir, processaRenumerados, processarModificados, processaValidados, remover } from '../util/undoRedoReducerUtil';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getRevisoesFromElementos } from '../util/revisaoUtil';\n\nexport const undo = (state: any): State => {\n  if (state.past === undefined || state.past.length === 0) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = state.past.pop();\n  const future = buildFuture(state, eventos);\n\n  const retorno: State = {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: [],\n    future,\n    ui: {\n      events: [],\n      alertas: state.ui?.alertas,\n    },\n    emRevisao: state.emRevisao,\n    usuario: state.usuario,\n    revisoes: state.revisoes,\n    numEventosPassadosAntesDaRevisao: state.numEventosPassadosAntesDaRevisao,\n  };\n\n  if (isUndoRedoInclusaoExclusaoAgrupador(eventos)) {\n    let tempState: State;\n    tempState = { ...retorno };\n    tempState.past = [];\n    tempState.present = [];\n    tempState.future = [];\n\n    const eventosFiltrados = eventos.filter((ev: StateEvent) => ![StateType.RevisaoAceita, StateType.RevisaoRejeitada, StateType.RevisaoAdicionalRejeitada].includes(ev.stateType));\n\n    if (eventosFiltrados[0].stateType === StateType.ElementoIncluido) {\n      tempState = removeElemento(tempState, { atual: eventosFiltrados[0].elementos[0] });\n    } else {\n      const ref = eventosFiltrados.find((ev: StateEvent) => ev.stateType === StateType.ElementoReferenciado)!.elementos[0];\n      const elementoASerIncluido = eventosFiltrados[0].elementos[0];\n      tempState = agrupaElemento(tempState, {\n        atual: ref,\n        novo: { tipo: elementoASerIncluido.tipo, uuid: elementoASerIncluido.uuid, posicao: 'antes', manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas },\n      });\n      ajustarAtributosAgrupadorIncluidoPorUndoRedo(state.articulacao, eventosFiltrados, tempState.ui!.events);\n      ajustarHierarquivoAgrupadorIncluidoPorUndoRedo(state.articulacao, eventosFiltrados, tempState.ui!.events);\n    }\n\n    const eventosRevisao = [\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAceita),\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoRejeitada),\n      ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAdicionalRejeitada),\n    ].filter(ev => ev.elementos?.length);\n\n    retorno.ui!.events = [...eventosRevisao, ...tempState.ui!.events];\n    retorno.present = [...eventosRevisao, ...tempState.ui!.events];\n\n    return retorno;\n  }\n\n  const events = new Eventos();\n\n  events.add(StateType.ElementoRemovido, remover(state, getEvento(eventos, StateType.ElementoIncluido)));\n  events.add(StateType.ElementoIncluido, incluir(state, getEvento(eventos, StateType.ElementoRemovido), getEvento(events.eventos, StateType.ElementoIncluido)));\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoSuprimido).forEach((ev: StateEvent) => events.eventos.push(...processarSuprimidos(state, ev)));\n\n  eventos.filter((ev: StateEvent) => ev.stateType === StateType.ElementoRestaurado).forEach((ev: StateEvent) => events.eventos.push(processarRestaurados(state, ev, 'UNDO')));\n\n  const revisoesDeRejeicaoDeRestauracaoASeremRetornadas = getRevisoesFromElementos(\n    eventos\n      .filter((ev: StateEvent) => ev.stateType === StateType.RevisaoRejeitada)\n      .map((ev: StateEvent) => ev.elementos || [])\n      .flat()\n  );\n\n  eventos\n    .filter((ev: StateEvent) => ev.stateType === StateType.ElementoModificado)\n    .forEach((ev: StateEvent) =>\n      events.eventos.push({ stateType: StateType.ElementoModificado, elementos: processarModificados(state, ev, 'UNDO', revisoesDeRejeicaoDeRestauracaoASeremRetornadas) })\n    );\n\n  events.add(StateType.ElementoRenumerado, processaRenumerados(state, getEvento(eventos, StateType.ElementoRenumerado)));\n  events.add(StateType.ElementoValidado, processaValidados(state, eventos));\n\n  const incluidos = events.get(StateType.ElementoIncluido);\n  const primeiroElementoIncluidoEhAgrupador = !incluidos.elementos || !incluidos.elementos.length ? false : incluidos.elementos[0].agrupador;\n  if (primeiroElementoIncluidoEhAgrupador) {\n    events.add(StateType.ElementoMarcado, [incluidos.elementos![0]]);\n    events.add(StateType.ElementoSelecionado, [incluidos.elementos![0]]);\n  } else {\n    const elementosParaMarcar = getEvento(eventos, StateType.ElementoMarcado)?.elementos?.filter(e => getDispositivoFromElemento(state.articulacao, e, true));\n    if (elementosParaMarcar) {\n      events.add(StateType.ElementoMarcado, [elementosParaMarcar[1], elementosParaMarcar[0]].filter(Boolean));\n      events.add(StateType.ElementoSelecionado, [elementosParaMarcar[1]].filter(Boolean));\n    }\n  }\n\n  events.add(StateType.SituacaoElementoModificada, events.get(StateType.ElementoIncluido).elementos || []);\n  events.add(StateType.SituacaoElementoModificada, getElementosAlteracaoASeremAtualizados(state.articulacao, getElementosRemovidosEIncluidos(events.eventos)));\n  events.add(StateType.SituacaoElementoModificada, processaSituacoesAlteradas(state, eventos));\n\n  let eventosRevisao = [\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAceita),\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoRejeitada),\n    ...processarRevisoesAceitasOuRejeitadas(retorno, eventos, StateType.RevisaoAdicionalRejeitada),\n  ].filter(ev => ev.elementos?.length);\n\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.ElementoIncluido);\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.SituacaoElementoModificada);\n  eventosRevisao = unificarEvento(retorno, eventosRevisao, StateType.ElementoMarcado);\n\n  retorno.ui!.events = [...eventosRevisao, ...events.build()];\n  retorno.present = [...eventosRevisao, ...events.build()];\n\n  return retorno;\n};\n","import { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isOmissis } from '../../../dispositivo/tipo';\nimport { Metadado, ParteInicial, TextoArticulado } from '../../../documento';\nimport { ClassificacaoDocumento } from '../../../documento/classificacao';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { createAlteracao, createArticulacao, criaDispositivo } from '../../dispositivo/dispositivoLexmlFactory';\nimport { getDispositivoAndFilhosAsLista } from '../../hierarquia/hierarquiaUtil';\nimport { DispositivoOriginal } from '../../situacao/dispositivoOriginal';\nimport { ProjetoNorma } from '../projetoNorma';\nimport { getTipo } from '../urnUtil';\nimport { isArtigo } from './../../../dispositivo/tipo';\n\nexport let isEmendamento = false;\nlet ultimoDispositivoCriado: Dispositivo;\n\n// Workaround para o problema de textos que possuam tags <b> ou <i> contendo <a> no meio\n// O Quill faz um tratamento para que as tags <b> e <i> fiquem dentro da tag <a>\n// Nesse caso,  necessrio fazer esse ajuste antecipadamente para que o editor no trate a transformao como uma alterao\nconst ajustarTextosParaQuill = (projetoNorma: ProjetoNorma): void => {\n  if (window.process.env.testMode) return;\n\n  const fnAjustaFormatoQuill = (texto: string, container: any, quill: Quill): string => {\n    const regexMatchTagsBoldOuItalicContendoTagAnchorDentro = /<(b|i)>(?:(?!(<\\/\\1>)).)*<a[^>]*>.*<\\/a>.*<\\/\\1>/gi;\n    if (texto?.match(regexMatchTagsBoldOuItalicContendoTagAnchorDentro)) {\n      quill.setContents(quill.clipboard.convert(texto));\n      return container.querySelector('.ql-editor p')!.innerHTML;\n    }\n    return texto;\n  };\n\n  const tempContainer = document.createElement('div');\n  const tempQuill = new Quill(tempContainer, {});\n\n  if (projetoNorma.ementa) {\n    projetoNorma.ementa.texto = fnAjustaFormatoQuill(projetoNorma.ementa.texto, tempContainer, tempQuill);\n  }\n\n  if (projetoNorma.articulacao) {\n    getDispositivoAndFilhosAsLista(projetoNorma.articulacao).forEach(d => {\n      d.texto = fnAjustaFormatoQuill(d.texto, tempContainer, tempQuill);\n    });\n  }\n};\n\nexport const buildProjetoNormaFromJsonix = (documentoLexml: any, emendamento = false): ProjetoNorma => {\n  isEmendamento = emendamento;\n\n  if (!documentoLexml?.value?.projetoNorma) {\n    throw new Error('No se trata de um documento lexml vlido');\n  }\n\n  const projetoNorma: ProjetoNorma = {\n    classificacao: documentoLexml.value?.projetoNorma.norma ? ClassificacaoDocumento.NORMA : ClassificacaoDocumento.PROJETO,\n    tipo: getTipo(getUrn(documentoLexml)),\n    ...getMetadado(documentoLexml),\n    ...getParteInicial(documentoLexml),\n    ...getTextoArticulado(documentoLexml.value.projetoNorma.norma || documentoLexml.value.projetoNorma.projeto),\n  };\n\n  if (projetoNorma.articulacao) {\n    projetoNorma.articulacao.projetoNorma = projetoNorma;\n    if (projetoNorma.ementa) {\n      projetoNorma.ementa.pai = projetoNorma.articulacao;\n    }\n  }\n\n  ajustarTextosParaQuill(projetoNorma);\n\n  return projetoNorma;\n};\n\nconst retiraCaracteresDesnecessarios = (texto: string): any => {\n  return texto?.replace(/[\\n]/g, '').trim();\n};\n\nexport const getUrn = (documento: any): string => {\n  return documento?.value?.metadado?.identificacao?.urn;\n};\n\nconst getMetadado = (documento: any): Metadado => {\n  return {\n    urn: getUrn(documento),\n  };\n};\n\nconst getParteInicial = (documento: any): ParteInicial => {\n  const parteInicial = documento?.value?.projetoNorma?.norma?.parteInicial;\n  const epigrafe = parteInicial?.epigrafe?.content[0] ?? '';\n  const ementa = buildContent(parteInicial?.ementa.content);\n  const preambulo = parteInicial?.preambulo?.p?.length ? parteInicial?.preambulo?.p[0].content[0] : '';\n\n  return {\n    epigrafe: retiraCaracteresDesnecessarios(epigrafe),\n    ementa: buildDispositivoEmenta(retiraCaracteresDesnecessarios(ementa)),\n    preambulo: retiraCaracteresDesnecessarios(preambulo),\n  };\n};\n\nexport const getTextoArticulado = (norma: any): TextoArticulado => {\n  return {\n    articulacao: buildArticulacao(norma.articulacao),\n  };\n};\n\nconst buildDispositivoEmenta = (texto?: string): Dispositivo | undefined => {\n  if (!texto) {\n    return;\n  }\n\n  const dispositivo = criaDispositivo(createArticulacao(), 'Ementa');\n  dispositivo.pai = undefined;\n  dispositivo.texto = substituiAspasRetasPorCurvas(texto);\n  dispositivo.rotulo = '';\n  dispositivo.id = 'ementa';\n  if (isEmendamento) {\n    dispositivo.situacao = new DispositivoOriginal();\n  }\n\n  return dispositivo;\n};\n\nconst buildArticulacao = (tree: any): Articulacao => {\n  const articulacao = createArticulacao();\n\n  buildTree(articulacao, tree.lXhier, []);\n\n  return articulacao;\n};\n\nconst buildTree = (pai: Dispositivo, filhos: any, cabecasAlteracao: Dispositivo[]): void => {\n  if (!pai || !filhos) {\n    return;\n  }\n\n  filhos?.forEach((el: any) => {\n    let dispositivo;\n    const notaAlteracao = el.value?.notaAlteracao;\n\n    if (el.value?.fechaAspas) {\n      const cabecaAlteracao = cabecasAlteracao.pop();\n      if (cabecaAlteracao) {\n        cabecaAlteracao.notaAlteracao = el.value?.notaAlteracao;\n      }\n    }\n\n    if (el.name?.localPart === 'Caput') {\n      if (el.value?.abreAspas === 's') {\n        cabecasAlteracao.push(dispositivo);\n        dispositivo.rotulo = el.value?.rotulo;\n        dispositivo.cabecaAlteracao = true;\n        dispositivo.notaAlteracao = notaAlteracao;\n      } else if (el.value?.rotulo) {\n        dispositivo.rotulo = el.value.rotulo;\n        dispositivo.createNumeroFromRotulo(dispositivo.rotulo);\n      }\n\n      pai.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el));\n\n      (pai as Artigo).caput!.href = el.value?.href;\n      (pai as Artigo).caput!.id = el.value?.id;\n      buildAlteracao(pai, el.value?.alteracao, cabecasAlteracao);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis, cabecasAlteracao);\n    } else if (el.name?.localPart === 'alteracao') {\n      buildAlteracao(pai, el, cabecasAlteracao);\n      buildTree((pai as Artigo).caput!, el.value?.lXcontainersOmissis, cabecasAlteracao);\n    } else {\n      if (el.name?.localPart === 'p') {\n        adicionaTextoAoUltimoDispositivoCriado(el);\n      } else {\n        // Impede que sejam criados filhos em artigos que j possuam alteraes\n        if (!pai.alteracoes) {\n          dispositivo = buildDispositivo(pai, el, cabecasAlteracao);\n          buildTree(dispositivo, el.value?.lXhier ?? el.value?.lXcontainersOmissis, cabecasAlteracao);\n        }\n      }\n    }\n  });\n};\n\nconst buildAlteracao = (pai: Dispositivo, el: any, cabecasAlteracao: Dispositivo[]): void => {\n  if (el) {\n    createAlteracao(pai);\n    pai.alteracoes!.id = el.id;\n    pai.alteracoes!.base = el.base;\n    if (isEmendamento) {\n      pai.alteracoes!.situacao = new DispositivoOriginal();\n    }\n    el.content?.forEach((c: any) => {\n      if (c.name?.localPart === 'p') {\n        adicionaTextoAoUltimoDispositivoCriado(c);\n      } else {\n        const d = buildDispositivo(pai.alteracoes!, c, cabecasAlteracao);\n        d.isDispositivoAlteracao = true;\n        d.rotulo = c.value?.rotulo;\n        buildTree(d!, c.value?.lXhier ?? c.value?.lXcontainersOmissis, cabecasAlteracao);\n      }\n    });\n  }\n};\n\nconst adicionaTextoAoUltimoDispositivoCriado = (el: any): void => {\n  ultimoDispositivoCriado.texto = (ultimoDispositivoCriado.texto + ' ' + retiraCaracteresDesnecessarios(buildContent(el.value?.content))).replace(/\\s+/g, ' ');\n};\n\nconst buildDispositivo = (pai: Dispositivo, el: any, cabecasAlteracao: Dispositivo[]): Dispositivo => {\n  const dispositivo = criaDispositivo(pai, el.name?.localPart);\n\n  const notaAlteracao = el.value?.notaAlteracao;\n\n  if (el.value?.fechaAspas) {\n    const cabecaAlteracao = cabecasAlteracao.pop();\n    if (cabecaAlteracao) {\n      cabecaAlteracao.notaAlteracao = el.value?.notaAlteracao;\n    }\n  }\n\n  if (!isOmissis(dispositivo)) {\n    if (el.value?.abreAspas === 's') {\n      cabecasAlteracao.push(dispositivo);\n      dispositivo.rotulo = el.value?.rotulo;\n      dispositivo.cabecaAlteracao = true;\n      dispositivo.notaAlteracao = notaAlteracao;\n    } else {\n      dispositivo.rotulo = el.value?.rotulo;\n    }\n    dispositivo.createNumeroFromRotulo(dispositivo.rotulo!);\n  }\n\n  dispositivo.href = el.value?.href;\n  dispositivo.id = el.value?.id;\n  if (isEmendamento) {\n    dispositivo.situacao = new DispositivoOriginal();\n    if (isArtigo(dispositivo)) {\n      (dispositivo as Artigo).caput!.situacao = new DispositivoOriginal();\n    }\n  }\n  dispositivo.texto = el.value?.textoOmitido ? TEXTO_OMISSIS : retiraCaracteresDesnecessarios(buildContentDispositivo(el));\n\n  ultimoDispositivoCriado = dispositivo;\n  return dispositivo;\n};\n\n// const montaReferencia = (value: any): string => {\n//   return `<a href=\"${value.href}\"> ${value.content[0]} </a>`;\n// };\n\nconst buildContentDispositivo = (el: any): string => {\n  let texto = '';\n  if (el.value?.nomeAgrupador) {\n    return getTextoSemHtml(el.value.nomeAgrupador.content);\n  } else {\n    el.value?.p\n      ?.map((p: any) => p)\n      ?.map((a: any) => a.content)\n      .forEach((content: any) => (texto += buildContent(content)));\n  }\n  return substituiAspasRetasPorCurvas(texto);\n};\n\nconst getTextoSemHtml = (c: any): string => {\n  let ret = '';\n  c.forEach(ci => {\n    if (ci.value) {\n      ret += getTextoSemHtml(ci.value.content);\n    } else {\n      ret += ci ?? '';\n    }\n    ret += ' ';\n  });\n  return ret.trim();\n};\n\nconst substituiAspasRetasPorCurvas = (html: string): string => {\n  const div = document.createElement('div');\n  div.innerHTML = html;\n  const elements = div.getElementsByTagName('*');\n  for (let i = 0; i < elements.length; i++) {\n    const innerHTML = elements[i].innerHTML;\n    if (innerHTML.indexOf('\"') !== -1) {\n      const newInnerHTML = innerHTML.replace(/\"(?=\\w|$)/g, '&#8220;').replace(/(?=[\\w,.?!\\-\")]|^)\"/g, '&#8221;');\n      elements[i].innerHTML = newInnerHTML;\n    }\n  }\n  return div.innerHTML.replace(/&nbsp;/g, ' ');\n};\n\nexport const buildContent = (content: any): string => {\n  let texto = '';\n  content?.forEach((element: any) => {\n    if (element.value) {\n      texto += montaTag(element.name, element.value);\n    } else {\n      let elementTexto = element;\n      elementTexto = elementTexto.replace(/\"(?=\\w|$)/g, '&#8220;');\n      elementTexto = elementTexto.replace(/(?=[\\w,.?!\\-\")]|^)\"/g, '&#8221;');\n      texto += elementTexto;\n    }\n  });\n  return texto;\n};\n\nconst montaTag = (name: any, value: any): string => {\n  const localPart = name.localPart;\n  if (localPart === 'span' && value.href) {\n    return `<a href=\"${value.href}\">${buildContent(value.content)}</a>`;\n  }\n  if (localPart === 'b' || localPart === 'i' || localPart === 'sub' || localPart === 'sup') {\n    return `<${localPart}>${buildContent(value.content)}</${localPart}>`;\n  }\n  return '';\n};\n","import { TextoArticulado } from '../../../documento';\nimport { getTextoArticulado } from './buildProjetoNormaFromJsonix';\n\nexport const buildDispositivoFromJsonix = (documentoLexml: any): TextoArticulado => {\n  if (!documentoLexml?.value?.projetoNorma) {\n    throw new Error('No se trata de um documento lexml vlido');\n  }\n\n  return {\n    ...getTextoArticulado(documentoLexml.value.projetoNorma.norma ? documentoLexml.value.projetoNorma.norma : documentoLexml.value.projetoNorma.projeto),\n  };\n};\n","import { createElemento } from './../../../model/elemento/elementoUtil';\nimport { isAgrupador, isArticulacao, isCaput, isItem, Tipo, isAlinea, isAgrupadorGenerico } from './../../../model/dispositivo/tipo';\nimport { buildDispositivoFromJsonix } from './../../../model/lexml/documento/conversor/buildDispositivoFromJsonix';\nimport { Elemento } from './../../../model/elemento/elemento';\nimport { Articulacao, Artigo, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { isArtigo, isInciso, isOmissis } from '../../../model/dispositivo/tipo';\nimport {\n  getArticulacao,\n  getDispositivoAndFilhosAsLista,\n  isDispositivoAlteracao,\n  irmaosMesmoTipo,\n  isModificadoOuSuprimido,\n  isOriginal,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { escapeRegex, removeAllHtmlTags, removeAllHtmlTagsExcept } from '../../../util/string-util';\n\nexport interface MensageInfoTextoColado {\n  oQueEstaSendoColado: string;\n  proibidoColarAnaliseInicial: string[];\n  proibidoColarAnaliseContextualizada: string[];\n}\n\nexport interface InfoDispositivos {\n  tiposColados: string[];\n  atual: Dispositivo;\n  referencia?: Dispositivo;\n  existentes: Dispositivo[];\n  novos: Dispositivo[];\n}\n\nexport interface InfoElementos {\n  tiposColados: string[];\n  atual: Elemento;\n  referencia?: Elemento;\n  existentes: Elemento[];\n  novos: Elemento[];\n}\n\nexport enum TipoRestricaoEnum {\n  ARTICULACAO_SEM_FILHOS,\n  AGRUPADOR_GENERICO_NA_ARTICULACAO,\n  AGRUPADORES_DE_ARTIGO,\n  DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n  DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n  ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO,\n  ALTERACAO_DENTRO_DE_ALTERACAO,\n  FILHOS_EM_DISPOSITIVO_SUPRIMIDO,\n  DISPOSITIVO_JA_MODIFICADO,\n  DISPOSITIVO_EM_POSICAO_INVALIDA,\n  DISPOSITIVO_ANTES_DO_ATUAL,\n  ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES,\n  ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS,\n  ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA,\n  ARTICULACAO_INCONSISTENTE, // Exemplo: alnea debaixo de artigo, item debaixo de artigo, etc\n}\n\nexport interface Restricao {\n  tipo: TipoRestricaoEnum;\n  titulo?: string;\n  mensagens: string[];\n  isPermitidoColarAdicionando?: boolean;\n}\n\nexport class InfoTextoColado {\n  textoColadoOriginal: string; // texto como est no clipboard\n  textoColadoAjustado: string; // pode conter alguns ajustes se texto no clipboard for html\n  textoColadoAjustadoParaParser: string; // texto a ser enviado para o parser (derivado de textoColadoAjustado. exemplo: contm nmeros \"fake\" em artigos originalmente sem numerao)\n  isColandoArtigoSemNumeracao: boolean;\n  jsonix: any;\n  articulacaoProposicao: Articulacao;\n  articulacaoColada: Articulacao;\n  posicao: string;\n  isColarSubstituindo = true;\n  podeColarAntes: boolean;\n  private infoDispositivos: InfoDispositivos;\n  infoElementos: InfoElementos;\n  tipoColado: Tipo;\n  restricoes: Restricao[];\n\n  private constructor(\n    articulacaoProposicao: Articulacao,\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    textoColadoAjustadoParaParser: string,\n    jsonix: any,\n    articulacaoColada: Articulacao,\n    atual: Elemento,\n    isColarSubstituindo = true,\n    posicao = 'depois'\n  ) {\n    this.textoColadoOriginal = textoColadoOriginal;\n    this.textoColadoAjustado = textoColadoAjustado;\n    this.textoColadoAjustadoParaParser = textoColadoAjustadoParaParser;\n    this.isColandoArtigoSemNumeracao = hasArtigoOndeCouber(textoColadoAjustado);\n    this.jsonix = jsonix;\n    this.articulacaoProposicao = articulacaoProposicao;\n    this.articulacaoColada = articulacaoColada;\n\n    this.isColarSubstituindo = isColarSubstituindo;\n    this.posicao = posicao;\n\n    this.infoDispositivos = {\n      tiposColados: montarListaTiposDispositivosColados(this.articulacaoColada),\n      atual: getDispositivoFromElemento(this.articulacaoProposicao, atual)!,\n      existentes: [],\n      novos: [],\n    };\n\n    this.tipoColado = getTipoColadoFromArticulacao(this.articulacaoColada);\n\n    this.infoDispositivos.referencia = getDispositivoReferencia(articulacaoColada.filhos[0].tipo, this.infoDispositivos.atual);\n    this.infoDispositivos.existentes = montarListaDispositivosExistentes(this.articulacaoProposicao, this.articulacaoColada, this.infoDispositivos.referencia);\n    this.infoDispositivos.novos = montarListaDispositivosNovos(this.articulacaoProposicao, this.articulacaoColada, this.infoDispositivos.referencia);\n\n    this.infoElementos = {\n      tiposColados: this.infoDispositivos.tiposColados,\n      atual: createElemento(this.infoDispositivos.atual),\n      existentes: this.infoDispositivos.existentes.map(d => createElemento(d)),\n      novos: this.getElementos(this.infoDispositivos.novos),\n      referencia: this.infoDispositivos.referencia ? createElemento(this.infoDispositivos.referencia) : undefined,\n    };\n\n    this.podeColarAntes = this.infoDispositivos.referencia?.tipo === this.infoDispositivos.tiposColados[0];\n\n    this.restricoes = this.montarRestricoes();\n  }\n\n  private getElementos(dispositivos: Dispositivo[]): Elemento[] {\n    try {\n      return dispositivos.map(d => createElemento(d));\n    } catch (error) {\n      return [];\n    }\n  }\n\n  public static async newInstanceFromTexto(\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    articulacaoProposicao: Articulacao,\n    atual: Elemento\n  ): Promise<InfoTextoColado> {\n    let textoColadoAjustadoParaParser = converterSufixoDosRotulos(\n      ajustarRotuloArtigo(removeAspasENRSeNecessario(hasArtigoOndeCouber(textoColadoAjustado) ? numerarArtigosOndeCouber(textoColadoAjustado) : textoColadoAjustado))\n    );\n    let jsonix = await getJsonixFromTexto(textoColadoAjustadoParaParser);\n    let projetoNorma = buildDispositivoFromJsonix(jsonix);\n\n    const dispositivos = getDispositivoAndFilhosAsLista(projetoNorma.articulacao!);\n    if (existeItemSemPaiAlinea(dispositivos)) {\n      textoColadoAjustadoParaParser = ajustaFalsosItensParaParser(textoColadoAjustadoParaParser, dispositivos);\n      jsonix = await getJsonixFromTexto(textoColadoAjustadoParaParser);\n      projetoNorma = buildDispositivoFromJsonix(jsonix);\n    }\n\n    return new InfoTextoColado(articulacaoProposicao, textoColadoOriginal, textoColadoAjustado, textoColadoAjustadoParaParser, jsonix, projetoNorma.articulacao!, atual);\n  }\n\n  public static newInstanceFromJsonix(jsonix: any, articulacaoProposicao: Articulacao, atual: Elemento, isColarSubstituindo = true, posicao = 'depois'): InfoTextoColado {\n    const projetoNorma = buildDispositivoFromJsonix(jsonix);\n    return new InfoTextoColado(articulacaoProposicao, '', '', '', jsonix, projetoNorma.articulacao!, atual, isColarSubstituindo, posicao);\n  }\n\n  public static newInstanceFromTextoEJsonix(\n    textoColadoOriginal: string,\n    textoColadoAjustado: string,\n    jsonix: any,\n    articulacaoProposicao: Articulacao,\n    atual: Elemento\n  ): InfoTextoColado {\n    const projetoNorma = buildDispositivoFromJsonix(jsonix);\n    return new InfoTextoColado(articulacaoProposicao, textoColadoOriginal, textoColadoAjustado, textoColadoAjustado, jsonix, projetoNorma.articulacao!, atual);\n  }\n\n  public static newInstanceFromArticulacao(articulacaoColada: Articulacao, articulacaoProposicao: Articulacao, atual: Elemento): InfoTextoColado {\n    return new InfoTextoColado(articulacaoProposicao, '', '', '', undefined, articulacaoColada, atual);\n  }\n\n  private montarRestricoes = (): Restricao[] => {\n    return [...validarArticulacaoColadaAnaliseInicial(this.articulacaoColada), ...validarArticulacaoColadaAnaliseContextualizada(this, this.infoDispositivos)];\n  };\n\n  public atualizarAtributosEAnaliseContextualizada(isColarSubstituindo: boolean, posicao: string): void {\n    const tiposRestricoesAnaliseInicial = [\n      TipoRestricaoEnum.ARTICULACAO_SEM_FILHOS,\n      TipoRestricaoEnum.AGRUPADORES_DE_ARTIGO,\n      TipoRestricaoEnum.DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n      TipoRestricaoEnum.DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n    ];\n\n    this.posicao = posicao;\n    this.isColarSubstituindo = isColarSubstituindo;\n\n    this.restricoes = this.restricoes.filter(r => tiposRestricoesAnaliseInicial.includes(r.tipo));\n\n    this.restricoes.push(...validarArticulacaoColadaAnaliseContextualizada(this, this.infoDispositivos));\n  }\n}\n\n// Retira a quebra de linha anterior ao texto que foi identificado como item (sem que houvesse um alnea antes)\nconst ajustaFalsosItensParaParser = (texto: string, dispositivos: Dispositivo[]): string => {\n  let textoAux = texto;\n  const lista = dispositivos.filter(d => isItem(d) && !isAlinea(d.pai!));\n  lista.forEach(d => {\n    const textoItemAjustadoParaPesquisa = escapeRegex(d.texto).split(' ').join('[\\\\s\\\\n]?');\n    const regex = new RegExp(`(\\\\n)(.*${d.numero}.*${textoItemAjustadoParaPesquisa})`, 'i');\n    textoAux = textoAux.replace(regex, ' $2');\n  });\n  return textoAux;\n};\n\nexport const existeItemSemPaiAlinea = (dispositivos: Dispositivo[]): boolean => {\n  return dispositivos.some(d => isItem(d) && !isAlinea(d.pai!) && !isArticulacao(d.pai!));\n};\n\nexport const removeAspasENRSeNecessario = (texto: string): string => {\n  const textoAux = texto\n    .replace(/\\r/g, '')\n    .replace(/\\n\\s*\\(NR\\)/gi, ' (NR)')\n    .replace(/(\\(NR\\))\\./gi, '$1');\n\n  if (!comecaComAspas(textoAux)) {\n    return textoAux;\n  }\n\n  const regexMatchTextoArtigoEntreAspasOuNao = /(?<=\\n|^)[\"']?art(?:\\.|\\s|\\d)(?:.|\\n)+?(?:(?=\\n[\"']?art(?:\\.|\\s|\\d))|$)/gi;\n  if (!textoAux.match(regexMatchTextoArtigoEntreAspasOuNao)) {\n    return textoAux;\n  }\n\n  // Grupo 1 do regex abaixo corresponde ao texto do artigo sem aspas iniciais e finais e sem o (NR)\n  const regexMatchTextoArtigoEntreAspasOuNaoComCapturaDeGrupo = /(?<=\\n|^)\\s*[\"']?(art(?:\\.|\\s|\\d)(?:.|\\n)+?)([\"]\\s*(?:\\(NR\\))?[\\s]*)?(?:(?=\\n\\s*[\"']?art(?:\\.|\\s|\\d))|$)/gi;\n  return textoAux.replace(regexMatchTextoArtigoEntreAspasOuNaoComCapturaDeGrupo, '\\n$1').trim();\n};\n\nexport const ajustarRotuloArtigo = (texto: string): string => removeEspacosExcendentesEntreRotuloENumeracao(texto, 'Art');\n\nconst removeEspacosExcendentesEntreRotuloENumeracao = (texto: string, rotulo: string, newChar = ' '): string => {\n  return texto.replace(new RegExp(`(^${rotulo}\\\\.?)([^\\\\S\\\\n\\\\r]+)`, 'gim'), `$1${newChar}`);\n};\n\nexport const comecaComAspas = (texto: string): boolean => !!texto.match(/^[\"']/);\n\nexport const getJsonixFromTexto = async (texto: string): Promise<any> => {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': 'text/plain' },\n    body: texto,\n  };\n\n  try {\n    const response = await fetch('https://www6ghml.senado.leg.br/editor-emendas/api/parser/jsonix', options);\n    return await response.json();\n  } catch (err) {\n    return console.error(err);\n  }\n};\n\nexport const montarListaTiposDispositivosColados = (articulacao: Articulacao): string[] => {\n  return [...new Set(articulacao.filhos.filter(f => f.tipo !== 'Omissis').map(f => f.tipo))];\n};\n\nconst getTipoColadoFromArticulacao = (articulacao: Articulacao): Tipo => getTipoColadoFromDispositipo(articulacao.filhos[0]);\n\nconst getTipoColadoFromDispositipo = (dispositivo: Dispositivo): Tipo => getTipo(dispositivo.tipo);\n\nconst getTipo = (nomeTipo: string): Tipo => TipoDispositivo[nomeTipo?.toLowerCase()];\n\nexport const montarListaDispositivosExistentes = (articulacao: Articulacao, articulacaoColada: Articulacao, referencia?: Dispositivo): Dispositivo[] => {\n  if (referencia && (!isArtigo(articulacaoColada.filhos[0]) || isDispositivoAlteracao(referencia))) {\n    ajustaIdsNaArticulacaoColada(articulacaoColada.filhos, referencia);\n  }\n\n  const idsColados = getDispositivoAndFilhosAsLista(articulacaoColada)\n    .filter(d => d.tipo !== 'Articulacao')\n    .map(d => d.id)\n    .reduce((acc, cur) => {\n      if (cur) {\n        acc.push(cur);\n        if (cur.endsWith('_par1')) {\n          acc.push(cur.replace('_par1', '_par1u'));\n        }\n      }\n      return acc;\n    }, [] as string[]);\n  return getDispositivoAndFilhosAsLista(articulacao).filter(d => isOriginal(d) && idsColados.includes(d.id!));\n};\n\nexport const montarListaDispositivosNovos = (articulacao: Articulacao, articulacaoColada: Articulacao, referencia?: Dispositivo): Dispositivo[] => {\n  const idsExistentes = montarListaDispositivosExistentes(articulacao, articulacaoColada, referencia).map(d => d.id);\n  return getDispositivoAndFilhosAsLista(articulacaoColada).filter(d => !isArticulacao(d) && !idsExistentes.includes(d.id));\n};\n\nexport const validarArticulacaoColadaAnaliseInicial = (articulacaoColada: Articulacao): Restricao[] => {\n  const result: Restricao[] = [];\n\n  if (!articulacaoColada || !articulacaoColada.filhos.length) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTICULACAO_SEM_FILHOS,\n      mensagens: ['No foi possvel identificar dispositivos no texto informado'],\n    });\n    return result;\n  }\n\n  if (getDispositivoAndFilhosAsLista(articulacaoColada).some(isAgrupadorGenerico)) {\n    result.push({\n      tipo: TipoRestricaoEnum.AGRUPADOR_GENERICO_NA_ARTICULACAO,\n      mensagens: ['No foi possvel identificar, corretamente, os dispositivos no texto a ser colado.'],\n    });\n  }\n\n  if (hasAgrupador(articulacaoColada)) {\n    result.push({\n      tipo: TipoRestricaoEnum.AGRUPADORES_DE_ARTIGO,\n      mensagens: ['No  permitido colar texto com agrupadores de artigo.', 'Por favor, adicione-os manualmente no editor e depois cole os artigos, se houverem.'],\n    });\n  }\n\n  if (articulacaoColada.filhos.filter(f => !isOmissis(f)).length !== irmaosMesmoTipo(articulacaoColada.filhos.filter(f => !isOmissis(f))[0]).length) {\n    const tipos = [...new Set(articulacaoColada.filhos.map(f => TipoDispositivo[f.tipo.toLowerCase()].descricaoPlural?.toLocaleLowerCase()))];\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVOS_DE_TIPOS_DIFERENTES,\n      mensagens: [`No  permitido colar texto com dispositivos de tipos diferentes: ${tipos.join(', ')}.`, 'Por favor, cole-os separadamente.'],\n    });\n  }\n\n  if (existeDispositivoComRotuloDuplicado(articulacaoColada)) {\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVOS_COM_ROTULO_DUPLICADO,\n      mensagens: ['No  permitido colar dispositivos com rtulos duplicados.'],\n    });\n  }\n\n  if (isArticulacaoInconsistente(articulacaoColada)) {\n    const mensagens = [\n      'No foi possvel identificar, corretamente, os dispositivos no texto a ser colado.',\n      getTextoInconsistencia(getDispositivoAndFilhosAsLista(articulacaoColada)),\n      'Por favor, verifique se o texto est correto e tente novamente.',\n    ].filter(Boolean);\n\n    result.push({\n      tipo: TipoRestricaoEnum.ARTICULACAO_INCONSISTENTE,\n      mensagens,\n    });\n  }\n\n  return result;\n};\n\nconst hasAgrupador = (dispositivo: Dispositivo): boolean => {\n  return dispositivo.filhos.filter(a => isAgrupador(a) && a.tipo !== 'DispositivoAgrupadorGenerico').length > 0;\n};\n\nconst isArticulacaoInconsistente = (articulacao: Articulacao): boolean => {\n  const dispositivos = getDispositivoAndFilhosAsLista(articulacao).slice(1);\n  return dispositivos.some(d => isDispositivoInconsistente(d));\n};\n\nconst isDispositivoInconsistente = (dispositivo: Dispositivo): boolean => {\n  return !dispositivo.pai?.tiposPermitidosFilhos?.includes(dispositivo.tipo) && !isOmissis(dispositivo) && !!dispositivo.pai && !isArticulacao(dispositivo.pai!);\n};\n\nconst getTextoInconsistencia = (dispositivos: Dispositivo[]): string => {\n  const dispositivo = dispositivos.find(d => isDispositivoInconsistente(d));\n  if (dispositivo && dispositivo.pai) {\n    const pai = isCaput(dispositivo.pai) ? dispositivo.pai.pai : dispositivo.pai;\n    const tiposPermitidos = pai?.tiposPermitidosFilhos?.map(t => TipoDispositivo[t.toLowerCase()].descricao?.toLowerCase());\n    return `O dispositivo \"${dispositivo.rotulo}\" no pode ser colado como filho de \"${pai?.rotulo}\" pois o tipo do dispositivo  ${TipoDispositivo[\n      dispositivo.tipo.toLowerCase()\n    ].descricao?.toLowerCase()} e o tipo permitido  ${tiposPermitidos?.join(' ou ')}.`;\n  }\n  return '';\n};\n\nconst existeDispositivoComRotuloDuplicado = (articulacaoColada: Articulacao): boolean => {\n  const rotulos = articulacaoColada.filhos.map(f => f.rotulo);\n  return rotulos.length > new Set(rotulos).size;\n};\n\nconst validarArticulacaoColadaAnaliseContextualizada = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): Restricao[] => {\n  const result: Restricao[] = [];\n\n  const { textoColadoAjustado, articulacaoColada, articulacaoProposicao, tipoColado, isColarSubstituindo, posicao } = infoTextoColado;\n  const { atual, referencia, existentes: dispositivosExistentes } = infoDispositivos;\n\n  if (infoTextoColado.infoElementos.tiposColados.includes('DispositivoAgrupadorGenerico')) {\n    return result;\n  }\n\n  if (!articulacaoColada.filhos.length) {\n    return result;\n  }\n\n  const pluralTipoColado = tipoColado.descricaoPlural;\n\n  if (isDispositivoAlteracao(atual) && hasArtigoOndeCouber(textoColadoAjustado)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO,\n      mensagens: [`No  permitido colar artigo sem numerao dentro de alterao de norma.`],\n    });\n  }\n\n  if (isDispositivoAlteracao(atual) && articulacaoColada.filhos.some(f => isArtigo(f) && f.alteracoes?.filhos.length)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ALTERACAO_DENTRO_DE_ALTERACAO,\n      mensagens: ['No  permitido colar alterao de norma dentro de alterao de norma'],\n    });\n  }\n\n  const dispositivosExistentesAux = dispositivosExistentes || montarListaDispositivosExistentes(getArticulacao(atual), articulacaoColada, referencia);\n\n  if (atual.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && articulacaoColada.filhos && isColandoFilhos(articulacaoColada.filhos, atual)) {\n    result.push({\n      tipo: TipoRestricaoEnum.FILHOS_EM_DISPOSITIVO_SUPRIMIDO,\n      mensagens: ['No  permitido colar filhos em dispositivo suprimido'],\n    });\n  }\n\n  if (isColarSubstituindo && dispositivosExistentesAux.some(isModificadoOuSuprimido)) {\n    const ids = dispositivosExistentesAux.filter(isModificadoOuSuprimido).map(d => d.id!);\n    const dispositivos = getDispositivoAndFilhosAsLista(articulacaoProposicao)\n      .filter(d => tipoColado.name === d.tipo && ids.includes(d.id!))\n      .map(d => d.rotulo?.replace(/ [-)]/, ''))\n      .join(', ');\n\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_JA_MODIFICADO,\n      titulo: 'Ateno, dispositivo j modificado encontrado',\n      mensagens: [`No  permitido colar dispositivos que j foram alterados na emenda${dispositivos ? ` (veja ${pluralTipoColado}: ${dispositivos})` : ''}.`],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  const referenciaAux = referencia || getDispositivoReferencia(articulacaoColada.filhos[0].tipo, atual);\n\n  if (!referenciaAux) {\n    const pluralTipoAtual = getTipo(atual.tipo).descricaoPlural;\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_EM_POSICAO_INVALIDA,\n      mensagens: [`No  permitido colar ${pluralTipoColado?.toLowerCase()} sobre ${pluralTipoAtual?.toLowerCase()}`],\n    });\n    return result;\n  }\n\n  if (posicao === 'antes' && referenciaAux.tipo !== articulacaoColada.filhos[0].tipo) {\n    result.push({\n      tipo: TipoRestricaoEnum.DISPOSITIVO_ANTES_DO_ATUAL,\n      mensagens: [`No  permitido colar ${pluralTipoColado} antes do atual dispositivo selecionado`],\n    });\n  }\n\n  if (isColandoArtigosComFilhosSobreArtigosComAlteracoes(infoTextoColado, infoDispositivos)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES,\n      mensagens: ['No  permitido adicionar incisos ou pargrafos a artigo que j possua alteraes de norma'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  if (isColandoArtigosComAlteracoesSobreArtigosComFilhos(infoTextoColado, infoDispositivos)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS,\n      mensagens: ['No  permitido adicionar alteraes de norma a artigo que j possua incisos ou pargrafos'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  if (isColandoArtigoExistenteComMudancaDaNormaAlterada(infoTextoColado)) {\n    result.push({\n      tipo: TipoRestricaoEnum.ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA,\n      mensagens: ['No  permitido colar artigo com mudana na identificao da norma alterada'],\n      isPermitidoColarAdicionando: true,\n    });\n  }\n\n  return result;\n};\n\nconst isColandoArtigosComFilhosSobreArtigosComAlteracoes = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): boolean => {\n  return infoTextoColado.isColarSubstituindo && hasArtigosComAlteracoes(infoDispositivos.existentes) && hasArtigosComFilhos(infoTextoColado.articulacaoColada.filhos);\n};\n\nconst isColandoArtigosComAlteracoesSobreArtigosComFilhos = (infoTextoColado: InfoTextoColado, infoDispositivos: InfoDispositivos): boolean => {\n  return infoTextoColado.isColarSubstituindo && hasArtigosComFilhos(infoDispositivos.existentes) && hasArtigosComAlteracoes(infoTextoColado.articulacaoColada.filhos);\n};\n\nconst isColandoArtigoExistenteComMudancaDaNormaAlterada = (infoTextoColado: InfoTextoColado): boolean => {\n  // TODO: Implementar quando parser estiver rodando o linker\n  return !infoTextoColado;\n};\n\nconst hasArtigosComAlteracoes = (dispositivos: Dispositivo[]): boolean => dispositivos.some(d => isArtigo(d) && !isDispositivoAlteracao(d) && d.alteracoes?.filhos.length);\n\nconst hasArtigosComFilhos = (dispositivos: Dispositivo[]): boolean => dispositivos.some(d => isArtigo(d) && !isDispositivoAlteracao(d) && d.filhos?.length);\n\nconst getDispositivoReferencia = (tipoASerColado: string, ref?: Dispositivo): Dispositivo | undefined => {\n  if (!ref) {\n    return;\n  } else if (ref.tipo === tipoASerColado || (ref.tiposPermitidosFilhos || []).includes(tipoASerColado)) {\n    return ref;\n  } else {\n    return getDispositivoReferencia(tipoASerColado, ref.pai);\n  }\n};\n\nconst isColandoFilhos = (filhos: Dispositivo[], atual: Dispositivo): boolean => {\n  return filhos[0].tipo !== atual.tipo && !!atual.tiposPermitidosFilhos?.includes(filhos[0].tipo);\n};\n\nexport const ajustaIdsNaArticulacaoColada = (filhos: Dispositivo[], referencia: Dispositivo): void => {\n  let prefixo: string;\n  if (referencia.tipo === filhos[0].tipo) {\n    prefixo = referencia.pai!.id!;\n  } else {\n    prefixo = referencia.id!;\n  }\n\n  if (isArtigo(referencia) && isInciso(filhos[0])) {\n    prefixo += '_cpt';\n  }\n\n  filhos.forEach(f => getDispositivoAndFilhosAsLista(f).forEach(f2 => ajustaIdSeNecessario(f2, prefixo)));\n};\n\nconst ajustaIdSeNecessario = (dispositivo: Dispositivo, prefixo: string): void => {\n  !dispositivo.id?.startsWith(prefixo) && ajustarId(dispositivo, prefixo);\n};\n\nconst ajustarId = (dispositivo: Dispositivo, prefixo: string): void => {\n  dispositivo.id = prefixo + '_' + dispositivo.id;\n  if (isArtigo(dispositivo) && (dispositivo as Artigo).caput) {\n    (dispositivo as Artigo).caput!.id = prefixo + '_' + (dispositivo as Artigo).caput!.id;\n  }\n};\n\nexport const getRegexRotuloArtigoOndeCouber = (): RegExp => /^([\"'])?(art\\.\\s+(?!\\d+)[x. ]*[0]?)/gim;\n\nconst hasArtigoOndeCouber = (texto: string): boolean => {\n  const t = removeAllHtmlTags(texto)\n    ?.replace(/&nbsp;/g, ' ')\n    .replace(/[\"']/g, '')\n    .replace(/(^Art\\.?)([^\\S\\n\\r]+)/gim, '$1 ')\n    .trim();\n\n  return getRegexRotuloArtigoOndeCouber().test(t);\n};\n\nconst numerarArtigosOndeCouber = (texto: string): string => {\n  if (hasArtigoOndeCouber(texto)) {\n    let contador = 5000;\n    let novoTexto = texto.replaceAll(getRegexRotuloArtigoOndeCouber(), '$1ArtigoANumerar');\n\n    //numera artigos\n    while (novoTexto.indexOf('ArtigoANumerar') !== -1) {\n      novoTexto = novoTexto.replace('ArtigoANumerar', 'Art. ' + contador++ + '. ');\n    }\n\n    return novoTexto;\n  }\n  return texto;\n};\n\nexport const ajustaHtmlParaColagem = (htmlInicial: string): string => {\n  let html = htmlInicial\n    .replace(/\\xA0/g, ' ') // &nbsp; (non breaking space to space) (\\xA0 = 160)\n    .replace(/<![^>]*>/g, '')\n    .replace(/<p/g, '\\n<p')\n    .replace(/<br\\b[^>]*>/gi, '\\n')\n    .replace(/&nbsp;/g, ' ')\n    .replace(/(<br\\s*\\/?>)/gi, ' ')\n    .replace(/<([a-z]+) .*?=\".*?( *\\/?>)/gi, '<$1$2')\n    .replace(/;[/s]?[e][/s]?$/, '; ')\n    .replace(';', '; ')\n    .replace(/^[\"']/g, '')\n    .replace(/<\\/?body[^>]*>/gi, '')\n    .replace(/\\r/g, '')\n    .replace(/\\n+/g, '\\n')\n    .replace(/&ldquo; |&ldquo;/g, '')\n    .replace(/&rdquo;/g, '');\n\n  const allowedTags = ['B', 'STRONG', 'I', 'EM', 'SUP', 'SUB', 'P'];\n\n  allowedTags.map(tag => tag.toLowerCase()).forEach(tag => (html = html.replace(new RegExp(`<${tag}[^>]*>`, 'gi'), `<${tag}>`)));\n\n  // Substitui tags \"strong\" por \"b\" e \"em\" por \"i\"\n  html = html.replace(/<(\\/?)strong>/gi, '<$1b>').replace(/<(\\/?)em(>)/gi, '<$1i>');\n\n  // Remove quebras de linha dentro de pargrafos\n  html = html.replace(/<p[^>]*>(?:.|\\n)*?<\\/p>/gi, s => s.replace(/\\n/g, ' ')).replace(/[\\t ]+/g, ' ');\n\n  html = html.replace(/&gt;/g, '>').replace(/&lt;/g, '<');\n\n  html = removeAllHtmlTagsExcept(html, allowedTags)\n    .replace(/<p[^>]*>/gi, '\\n<p>') // Garante que cada pargrafo comece em uma nova linha\n    .replace(/(?<=<\\/p>).*/gi, '') // Remove tudo que vem depois do fim do pargrafo, na mesma linha (remove o que no estiver dentro de um pargrafo)\n    .replace(/<\\/?p[^>]*>/g, '\\n')\n    .replace(/\\n+/g, '\\n')\n    .replace(/ +/g, ' ')\n    .replace(/\\n\\s+/g, '\\n')\n    .replace(/\\n *<i>(Pargrafo nico\\. *)<\\/i>/gi, '\\n$1') // Remove itlico de rtulo de pargrafo nico\n    .trim();\n\n  return html;\n};\n\nexport const converterSufixoDosRotulos = (texto: string): string => {\n  const regexRotulo = /^((?:(?:art\\.?||par[a]grafo [u]nico)\\s*\\d+?)|(?:[IVXMDC]{1,3}|[a-z]{1,2}|\\d{1,3}))-(\\d+)/gim;\n\n  const fnSubstituicao = (match: string, grupo1: string, grupo2: string): string => {\n    const numero = parseInt(grupo2);\n    let letra = '';\n    if (numero <= 26) {\n      letra = String.fromCharCode(65 + numero - 1);\n    } else {\n      const primeiraLetra = String.fromCharCode(65 + Math.floor((numero - 1) / 26) - 1);\n      const segundaLetra = String.fromCharCode(65 + ((numero - 1) % 26));\n      letra = primeiraLetra + segundaLetra;\n    }\n\n    return `${grupo1}-${letra}`;\n  };\n\n  return texto.replace(regexRotulo, fnSubstituicao);\n};\n","import { validaDispositivo } from './../../../model/lexml/dispositivo/dispositivoValidator';\nimport { InfoTextoColado } from './../util/colarUtil';\nimport { DispositivoSuprimido } from './../../../model/lexml/situacao/dispositivoSuprimido';\nimport { DispositivoModificado } from './../../../model/lexml/situacao/dispositivoModificado';\nimport { Artigo } from './../../../model/dispositivo/dispositivo';\nimport { ClassificacaoDocumento } from './../../../model/documento/classificacao';\nimport { isArtigo, isOmissis, isInciso, isParagrafo, isCaput } from './../../../model/dispositivo/tipo';\nimport {\n  buscaDispositivoById,\n  getArticulacao,\n  isModificado,\n  isAdicionado,\n  isSuprimido,\n  isDispositivoAlteracao,\n  getDispositivoCabecaAlteracao,\n  getUltimoFilho,\n  getDispositivoAnteriorNaSequenciaDeLeitura,\n  isArticulacaoAlteracao,\n  isDispositivoCabecaAlteracao,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { createElemento, createElementoValidado, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAndFilhosAsLista } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { buildId } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateEvent, StateType } from '../../state';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { ajustaIdsNaArticulacaoColada } from '../util/colarUtil';\nimport { removeAllHtmlTags } from '../../../util/string-util';\nimport { Elemento } from '../../../model/elemento/elemento';\n\nconst REGEX_OMISSIS = /^\\.{2,}/;\n\ninterface InfoOmissis {\n  omissis: Dispositivo;\n  anterior: Dispositivo;\n  posterior: Dispositivo;\n  omitidos: Dispositivo[];\n}\n\nexport const adicionaElementosNaProposicaoFromClipboard = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const infoTextoColado: InfoTextoColado =\n    action.infoTextoColado ?? InfoTextoColado.newInstanceFromJsonix(action.novo?.conteudo?.texto, state.articulacao, action.atual, action.isColarSubstituindo, action.posicao);\n\n  if (infoTextoColado.restricoes.length) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.ERROR, descricao: infoTextoColado.restricoes[0].mensagens[0] });\n  }\n\n  const articulacaoColada = infoTextoColado.articulacaoColada;\n  const ref = getDispositivoFromElemento(state.articulacao, infoTextoColado.infoElementos.referencia!)!;\n\n  if (!isArtigo(articulacaoColada.filhos[0]) || isDispositivoAlteracao(atual)) {\n    ajustaIdsNaArticulacaoColada(articulacaoColada.filhos, ref);\n  }\n\n  const eventos = colarDispositivos(\n    state.articulacao,\n    articulacaoColada,\n    atual,\n    ref,\n    action.posicao,\n    action.isColarSubstituindo,\n    action.isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao,\n    state.modo,\n    infoTextoColado.infoElementos.tiposColados[0]\n  );\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [],\n\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst colarDispositivos = (\n  articulacao: Articulacao,\n  articulacaoColada: Articulacao,\n  atual: Dispositivo,\n  referencia: Dispositivo,\n  posicao: string,\n  isColarSubstituindo: boolean,\n  isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao: boolean,\n  modo: ClassificacaoDocumento,\n  tipoColado: string\n): StateEvent[] => {\n  const isColandoEmAlteracaoDeNorma = isDispositivoAlteracao(atual);\n  let refAux = referencia;\n\n  const adicionados: Dispositivo[] = [];\n  const modificados: Dispositivo[] = [];\n  const suprimidos: Dispositivo[] = [];\n\n  articulacaoColada.filhos.forEach(f => {\n    if (isColandoEmAlteracaoDeNorma || !isOmissis(f)) {\n      const d = buscarDispositivoByIdTratandoParagrafoUnico(articulacao, f.id!);\n      if (d && isColarSubstituindo) {\n        const d2 = colarDispositivoSubstituindo(d, f, modo, isColandoEmAlteracaoDeNorma);\n        modificados.push(...getDispositivoAndFilhosAsLista(d2).filter(isModificado));\n        adicionados.push(...getDispositivoAndFilhosAsLista(d2).filter(isAdicionado));\n        suprimidos.push(...getDispositivoAndFilhosAsLista(d2).filter(isSuprimido));\n        refAux = d2;\n      } else {\n        refAux = d && isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao ? d : refAux;\n        const d2 = colarDispositivoAdicionando(refAux, f, isColandoEmAlteracaoDeNorma, false, modo, posicao === 'antes' && refAux === referencia ? posicao : undefined);\n        adicionados.push(...getDispositivoAndFilhosAsLista(d2));\n        suprimidos.push(...getDispositivoAndFilhosAsLista(d2).filter(isSuprimido));\n        refAux = d2;\n      }\n    }\n  });\n\n  const eventos: StateEvent[] = [];\n  let eventoElementoRemovido: StateEvent | undefined;\n\n  if (isAdicionarNaPosicaoAtual(articulacaoColada, atual, referencia)) {\n    eventoElementoRemovido = buildEventoElementoRemovido(referencia);\n\n    referencia.pai!.removeFilho(referencia);\n    referencia.pai!.renumeraFilhos();\n    adicionados.forEach(d => (d.id = buildId(d)));\n  }\n\n  eventos.push(buildEventoElementoIncluido(adicionados, referencia));\n  eventoElementoRemovido && eventos.push(eventoElementoRemovido);\n  eventos.push(...buildEventosElementoModificado(modificados));\n  eventos.push(buildEventoElementosRenumerados(adicionados, referencia, tipoColado));\n  processaEventosSuprimidos(eventos, modificados, suprimidos);\n  eventos.push(buildEventoSituacaoElementoModificada(adicionados, isColandoEmAlteracaoDeNorma));\n  adicionados[0] && eventos.push(buildEventoElementoMarcado([adicionados[0], atual]));\n\n  return eventos.filter(ev => ev.elementos?.length);\n};\n\nconst buildEventoElementosRenumerados = (adicionados: Dispositivo[], referencia: Dispositivo, tipoColado: string): StateEvent => {\n  const refAux = referencia.tipo === tipoColado ? referencia.pai! : referencia;\n  const filhosASeremRenumerados = refAux.filhos.filter(f => isAdicionado(f) && !adicionados.includes(f));\n\n  return {\n    stateType: StateType.ElementoRenumerado,\n    elementos: filhosASeremRenumerados.map(f => createElemento(f)),\n  };\n};\n\nconst isAdicionarNaPosicaoAtual = (articulacaoColada: Articulacao, atual: Dispositivo, referencia: Dispositivo): boolean => {\n  const primeiroDispositivoColado = getDispositivoAndFilhosAsLista(articulacaoColada).filter(d => !['Articulacao', 'Omissis'].includes(d.tipo))[0];\n  return atual === referencia && primeiroDispositivoColado.tipo === referencia.tipo && !referencia.texto && isAdicionado(referencia);\n};\n\nconst buildEventoElementoRemovido = (dispositivo: Dispositivo): StateEvent => {\n  return {\n    stateType: StateType.ElementoRemovido,\n    elementos: [createElementoValidado(dispositivo)],\n  };\n};\n\nconst buildEventoElementoIncluido = (adicionados: Dispositivo[], referencia: Dispositivo): StateEvent => {\n  const elementoAdicionados: Elemento[] = [];\n  const paiRef = referencia.pai!;\n  let referenciaUI: Elemento | undefined;\n\n  if (adicionados.length) {\n    let dispositivos = getDispositivoAndFilhosAsLista(paiRef);\n    let index = dispositivos.indexOf(adicionados[0]);\n    if (index === -1) {\n      dispositivos = getDispositivoAndFilhosAsLista(getArticulacao(paiRef));\n      index = dispositivos.indexOf(adicionados[0]);\n    }\n\n    adicionados.forEach(d => {\n      const elemento = createElemento(d, true, true);\n      elemento.mensagens = validaDispositivo(d);\n      elementoAdicionados.push(elemento);\n    });\n\n    referenciaUI = createElemento(dispositivos[index - 1]);\n  }\n\n  return {\n    stateType: StateType.ElementoIncluido,\n    elementos: elementoAdicionados,\n    referencia: referenciaUI,\n  };\n};\n\nconst buildEventosElementoModificado = (modificados: Dispositivo[]): StateEvent[] => {\n  const eventos: StateEvent[] = [];\n  modificados.forEach(d => {\n    eventos.push({\n      stateType: StateType.ElementoModificado,\n      elementos: [(d.situacao as DispositivoModificado).dispositivoOriginal, createElementoValidado(d)],\n    });\n  });\n  return eventos;\n};\n\nconst processaEventosSuprimidos = (eventos: StateEvent[], modificados: Dispositivo[], suprimidos: Dispositivo[]): void => {\n  const dispositivosProcessar = [] as any;\n\n  // if(modificados.length > 0){\n  //   modificados.forEach(m => {\n  //     dispositivosProcessar.push(m);\n  //   });\n  // }\n\n  if (suprimidos.length > 0) {\n    suprimidos.forEach(s => {\n      dispositivosProcessar.push(s);\n    });\n  }\n\n  if (dispositivosProcessar.length > 0) {\n    const suprimidos: Dispositivo[] = [];\n    dispositivosProcessar.forEach(d => {\n      getDispositivosToElementoSuprimido(d).forEach(d => {\n        if (suprimidos.filter(s => s.id === d.id).length === 0) {\n          suprimidos.push(d);\n        }\n      });\n    });\n    eventos.push({ stateType: StateType.ElementoSuprimido, elementos: suprimidos.map(d => createElementoValidado(d)) });\n  }\n};\n\nconst getDispositivosToElementoSuprimido = (referencia: Dispositivo): Dispositivo[] => {\n  const suprimidos = getDispositivoAndFilhosAsLista(referencia.pai!)\n    .filter(isSuprimido)\n    .map(d => getDispositivoAndFilhosAsLista(d))\n    .flat();\n\n  return suprimidos;\n};\n\nconst buildEventoSituacaoElementoModificada = (dispositivos: Dispositivo[], isColandoEmAlteracaoDeNorma: boolean): StateEvent => {\n  const elementosComSituacaoModificada: Elemento[] = []; // elementos a serem atualizados na UI\n  if (isColandoEmAlteracaoDeNorma) {\n    elementosComSituacaoModificada.push(...getDispositivosEmAlteracaoDeNormaASeremAtualizados(dispositivos).map(d => createElementoValidado(d)));\n  }\n  elementosComSituacaoModificada.push(...getParagrafosDeNumero1(dispositivos).map(d => createElementoValidado(d)));\n  elementosComSituacaoModificada.push(...getArtigosComAlteracaoDeNorma(dispositivos).map(d => createElementoValidado(d)));\n  return {\n    stateType: StateType.SituacaoElementoModificada,\n    elementos: elementosComSituacaoModificada,\n  };\n};\n\nconst buildEventoElementoMarcado = (dispositivos: Dispositivo[]): StateEvent => {\n  return {\n    stateType: StateType.ElementoMarcado,\n    elementos: dispositivos.map(d => createElementoValidado(d)),\n  };\n};\n\nconst getParagrafosDeNumero1 = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return [...new Set(dispositivos.filter(isParagrafo).map(d => d.pai!))].map(art => art.filhos.filter(f => isParagrafo(f) && f.numero === '1')).flat();\n};\n\nconst getArtigosComAlteracaoDeNorma = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  return dispositivos.filter(d => isArtigo(d) && !isArticulacaoAlteracao(d) && d.alteracoes?.filhos.length);\n};\n\nconst colarDispositivoSubstituindo = (\n  dOriginal: Dispositivo,\n  dColado: Dispositivo,\n  modo: ClassificacaoDocumento,\n  isColandoEmAlteracaoDeNorma: boolean,\n  colecaoInfoOmissis: InfoOmissis[] = []\n): Dispositivo => {\n  let refAux = dOriginal;\n\n  if (removeAllHtmlTags(dOriginal.texto) !== removeAllHtmlTags(dColado.texto) && !dColado.texto.match(REGEX_OMISSIS) && dColado.texto.trim()) {\n    dOriginal.situacao = new DispositivoModificado(createElementoValidado(dOriginal));\n    // dOriginal.isDispositivoAlteracao = false;\n    dOriginal.texto = dColado.texto;\n  }\n\n  let omissisImediatamenteAnterior: Dispositivo | undefined;\n\n  const filhosColados = dColado.alteracoes?.filhos || dColado.filhos;\n\n  filhosColados.forEach(fColado => {\n    if (isOmissis(fColado)) {\n      colecaoInfoOmissis.push(montarInfoOmissis(dOriginal, fColado));\n    }\n\n    if (!isOmissis(fColado) || isColandoEmAlteracaoDeNorma) {\n      const fOriginal = buscarDispositivoByIdTratandoParagrafoUnico(getArticulacao(dOriginal), fColado.id!);\n      if (fOriginal) {\n        refAux = fOriginal;\n        colarDispositivoSubstituindo(fOriginal, fColado, modo, isColandoEmAlteracaoDeNorma || isDispositivoAlteracao(fColado), colecaoInfoOmissis);\n      } else {\n        refAux = (omissisImediatamenteAnterior && getUltimoDispositivoDoIntervaloOmitido(omissisImediatamenteAnterior, colecaoInfoOmissis, fColado)) || refAux;\n        colarDispositivoAdicionando(refAux, fColado, isColandoEmAlteracaoDeNorma || isDispositivoAlteracao(fColado), !!omissisImediatamenteAnterior, modo, 'depois');\n        refAux = fColado;\n      }\n    }\n    omissisImediatamenteAnterior = isOmissis(fColado) ? fColado : undefined;\n  });\n\n  if (!isColandoEmAlteracaoDeNorma) {\n    suprimirDispositivosForaDosIntervalosOmitidos(dOriginal, dColado, colecaoInfoOmissis);\n  }\n\n  return dOriginal;\n};\n\nconst getUltimoDispositivoDoIntervaloOmitido = (omissis: Dispositivo, colecaoInfoOmissis: InfoOmissis[], dColado: Dispositivo): Dispositivo | undefined => {\n  return colecaoInfoOmissis\n    .find(i => i.omissis === omissis)\n    ?.omitidos.filter(o => o.tipo === dColado.tipo)\n    .slice(-1)[0];\n};\n\nconst suprimirDispositivosForaDosIntervalosOmitidos = (dOriginal: Dispositivo, dColado: Dispositivo, colecaoInfoOmissis: InfoOmissis[]): void => {\n  const articulacaoColada = getArticulacao(dColado);\n  const dispositivosOriginaisOmitidosNaArticulacaoColada = colecaoInfoOmissis.map(i => i.omitidos).flat();\n\n  dOriginal.filhos.forEach(fOriginal => {\n    const fColado =\n      buscarDispositivoByIdTratandoParagrafoUnico(articulacaoColada, fOriginal.id!) || buscaDispositivoById(articulacaoColada, fOriginal.id!.replace('par1u', 'par1'));\n\n    if (!fColado && !dispositivosOriginaisOmitidosNaArticulacaoColada.find(d => d.id === fOriginal.id)) {\n      getDispositivoAndFilhosAsLista(fOriginal).forEach(d => (d.situacao = new DispositivoSuprimido(createElementoValidado(d))));\n    }\n  });\n};\n\nconst buscarDispositivoByIdTratandoParagrafoUnico = (articulacao: Articulacao, id: string): Dispositivo | undefined => {\n  const d = buscaDispositivoById(articulacao, id);\n  if (d) {\n    return d;\n  } else {\n    if (id.endsWith('par1') || id.split('_').includes('par1')) {\n      return buscaDispositivoById(articulacao, id.replace('_par1_', '_par1u_').replace(/par1$/, 'par1u'));\n    } else {\n      return;\n    }\n  }\n};\n\nconst colarDispositivoAdicionando = (\n  referencia: Dispositivo,\n  dColado: Dispositivo,\n  isColandoEmAlteracaoDeNorma: boolean,\n  isPrecedidoPorOmissis: boolean,\n  modo: ClassificacaoDocumento,\n  posicao?: string\n): Dispositivo => {\n  if (!isOmissis(referencia) && referencia.tiposPermitidosFilhos?.includes(dColado.tipo)) {\n    if (isArtigo(referencia) && isInciso(dColado)) {\n      dColado.pai = (referencia as Artigo).caput;\n      if (isPrecedidoPorOmissis) {\n        (referencia as Artigo).caput!.addFilho(dColado);\n      } else {\n        (referencia as Artigo).caput!.addFilhoOnPosition(dColado, 0);\n      }\n    } else {\n      dColado.pai = referencia;\n      if (isPrecedidoPorOmissis) {\n        referencia.addFilho(dColado);\n      } else {\n        referencia.addFilhoOnPosition(dColado, 0);\n      }\n    }\n  } else if (!isDispositivoAlteracao(referencia) && isDispositivoAlteracao(dColado)) {\n    dColado.pai = referencia.alteracoes;\n    referencia.alteracoes!.addFilhoOnPosition(dColado, 0);\n  } else {\n    dColado.pai = referencia.pai;\n    referencia.pai?.addFilhoOnPosition(dColado, referencia.pai!.indexOf(referencia) + (posicao === 'antes' ? 0 : 1));\n  }\n\n  if (dColado.texto.match(REGEX_OMISSIS) && !isColandoEmAlteracaoDeNorma) {\n    dColado.texto = '';\n  }\n\n  ajustaSituacaoDispositivoAdicionado(dColado, modo);\n\n  if (isColandoEmAlteracaoDeNorma) {\n    dColado.notaAlteracao = isDispositivoCabecaAlteracao(dColado) ? 'NR' : undefined;\n  } else {\n    removeOmissis(dColado);\n  }\n\n  if (!dColado.pai?.tiposPermitidosFilhos?.includes(dColado.tipo) && !isOmissis(dColado)) {\n    throw new Error('Erro ao colar dispositivo adicionado');\n  }\n\n  renumerarEAjustarIds(dColado);\n  return dColado;\n};\n\nconst renumerarEAjustarIds = (dispositivo: Dispositivo): void => {\n  dispositivo.pai?.renumeraFilhos();\n\n  getDispositivoAndFilhosAsLista(dispositivo).forEach(d => {\n    d.id = buildId(d);\n    if (isArtigo(d)) {\n      (d as Artigo).caput!.id = buildId((d as Artigo).caput!);\n    }\n  });\n};\n\nconst criaAtributosComunsAdicionado = (filho: Dispositivo, modo: ClassificacaoDocumento): void => {\n  filho.situacao = new DispositivoAdicionado();\n  filho.isDispositivoAlteracao = isDispositivoAlteracao(filho);\n  (filho.situacao as DispositivoAdicionado).tipoEmenda = modo;\n  if (filho.isDispositivoAlteracao && !isOmissis(filho)) {\n    (filho.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n  }\n};\n\nconst removeOmissis = (atual: Dispositivo): void => {\n  const omissis = atual.filhos.filter(isOmissis);\n  omissis.forEach(o => o.pai!.removeFilho(o));\n  atual.filhos.forEach(removeOmissis);\n  atual.id = buildId(atual);\n  atual.renumeraFilhos();\n};\n\nconst ajustaSituacaoDispositivoAdicionado = (atual: Dispositivo, modo: ClassificacaoDocumento): void => {\n  criaAtributosComunsAdicionado(atual, modo);\n  atual.filhos.forEach(filho => {\n    criaAtributosComunsAdicionado(filho, modo);\n    filho.filhos && ajustaSituacaoDispositivoAdicionado(filho, modo);\n  });\n\n  if (atual.alteracoes) {\n    criaAtributosComunsAdicionado(atual.alteracoes, modo);\n    atual.alteracoes.filhos.forEach(filho => {\n      criaAtributosComunsAdicionado(filho, modo);\n      filho.filhos && ajustaSituacaoDispositivoAdicionado(filho, modo);\n    });\n  }\n};\n\nconst montarInfoOmissis = (dOriginal: Dispositivo, omissisColado: Dispositivo): InfoOmissis => {\n  const dispositivosDaArvoreDoOmisses = getDispositivoAndFilhosAsLista(isCaput(omissisColado.pai!) ? omissisColado.pai!.pai! : omissisColado.pai!);\n  const dispositivosDaArvoreDoOriginal = getDispositivoAndFilhosAsLista(isArtigo(dOriginal) ? dOriginal : dOriginal.pai!);\n\n  const indexOmissis = dispositivosDaArvoreDoOmisses.indexOf(omissisColado);\n  const anteriorOmissis = dispositivosDaArvoreDoOmisses[indexOmissis - 1];\n  const posteriorOmissis = dispositivosDaArvoreDoOmisses[indexOmissis + 1];\n\n  const anteriorOmissisNaArvoreDoOriginal = dispositivosDaArvoreDoOriginal.find(d => d.id === anteriorOmissis.id)!;\n  const posteriorOmissisNaArvoreDoOriginal = posteriorOmissis && dispositivosDaArvoreDoOriginal.find(d => d.id === posteriorOmissis.id);\n\n  const omitidos = getDispositivosOriginais(dispositivosDaArvoreDoOriginal, anteriorOmissisNaArvoreDoOriginal, posteriorOmissisNaArvoreDoOriginal, posteriorOmissis);\n\n  const prefixos = [...new Set(omitidos.map(d => d.id!.split('_')[0]))];\n  if (prefixos.length > 1) {\n    throw new Error('Erro ao montar lista de dispositivos omitidos');\n  }\n\n  return {\n    omissis: omissisColado,\n    anterior: anteriorOmissis,\n    posterior: posteriorOmissis,\n    omitidos,\n  };\n};\n\nconst getDispositivosOriginais = (\n  dispositivosDaArvoreDoOriginal: Dispositivo[],\n  anteriorOmissisNaArvoreDoOriginal: Dispositivo,\n  posteriorOmissisNaArvoreDoOriginal: Dispositivo | undefined,\n  posteriorOmissisNaArvoreDoOmissis: Dispositivo | undefined\n): Dispositivo[] => {\n  const result: Dispositivo[] = [];\n\n  if (posteriorOmissisNaArvoreDoOriginal) {\n    const indexAnteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === anteriorOmissisNaArvoreDoOriginal.id);\n    const indexPosteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === posteriorOmissisNaArvoreDoOriginal.id);\n    result.push(...dispositivosDaArvoreDoOriginal.filter((_, index) => index > indexAnteriorNaListaOriginal && index < indexPosteriorNaListaOriginal));\n  } else {\n    const indexAnteriorNaListaOriginal = dispositivosDaArvoreDoOriginal.findIndex(d => d.id === anteriorOmissisNaArvoreDoOriginal.id);\n    result.push(\n      ...dispositivosDaArvoreDoOriginal.filter(\n        (d, index) => index > indexAnteriorNaListaOriginal && (!posteriorOmissisNaArvoreDoOmissis || d.id!.startsWith(posteriorOmissisNaArvoreDoOmissis.pai!.id!))\n      )\n    );\n  }\n\n  return result;\n};\n\nconst getDispositivosEmAlteracaoDeNormaASeremAtualizados = (dispositivos: Dispositivo[]): Dispositivo[] => {\n  const mapa = new Map();\n  dispositivos.forEach(d => {\n    const cabeca = getDispositivoCabecaAlteracao(d);\n    mapa.set(cabeca.id, cabeca);\n  });\n  const cabecas = [...mapa.values()];\n  return cabecas\n    .map(d => {\n      const ultimoFilho = getUltimoFilho(d);\n      const irmaoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(ultimoFilho, d1 => !!(d1.pai && d1.pai === ultimoFilho.pai));\n      return irmaoAnterior ? [irmaoAnterior, ultimoFilho] : [ultimoFilho];\n    })\n    .flat()\n    .filter(d => d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n};\n","import { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { RevisaoJustificativaEnum } from '../util/revisaoUtil';\nimport { retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const ativaDesativaRevisao = (state: any, action: any): State => {\n  const isActive = !state.emRevisao;\n  if (!isActive && action.quantidade > 0) {\n    return {\n      ...retornaEstadoAtualComMensagem(state, {\n        tipo: TipoMensagem.INFO,\n        descricao: ' necessrio resolver todas as marcas de reviso' + getMensagemTipoRevisoes(state) + 'para desativar o modo de controle de alteraes',\n      }),\n      emRevisao: true,\n    };\n  }\n\n  return {\n    ...state,\n    emRevisao: isActive,\n    ui: {\n      events: [{ stateType: isActive ? StateType.RevisaoAtivada : StateType.RevisaoDesativada }],\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n\nconst getMensagemTipoRevisoes = (state: State): string => {\n  const contemRevisoesDispositivos = state.revisoes!.filter(e => e.descricao !== RevisaoJustificativaEnum.JustificativaAlterada).length > 0;\n  const contemRevisoesJustificativa = state.revisoes!.filter(e => e.descricao === RevisaoJustificativaEnum.JustificativaAlterada).length > 0;\n\n  return contemRevisoesDispositivos && contemRevisoesJustificativa\n    ? ' das abas texto e justificao '\n    : contemRevisoesDispositivos\n    ? ' da aba texto '\n    : contemRevisoesJustificativa\n    ? ' da aba justificao '\n    : ' ';\n};\n","import { generateUUID } from './../../util/uuid';\nimport { StateType } from '../../redux/state';\nimport { Elemento } from '../elemento';\nimport { Usuario } from './usuario';\nimport { removeAtributosDoElemento, buildDescricaoRevisao } from '../../redux/elemento/util/revisaoUtil';\n\nexport abstract class Revisao {\n  abstract type: string; // Necessrio para identificao da classe no Java\n  id: string;\n  usuario: Usuario;\n  dataHora: string;\n  descricao?: string;\n\n  constructor(usuario: Usuario, dataHora: string, descricao?: string) {\n    this.id = generateUUID();\n    this.usuario = usuario;\n    this.dataHora = dataHora;\n    this.descricao = descricao;\n  }\n}\n\nexport class RevisaoJustificativa extends Revisao {\n  type = 'RevisaoJustificativa';\n  constructor(usuario: Usuario, dataHora: string, descricao: string) {\n    super(usuario, dataHora, descricao);\n  }\n}\n\nexport class RevisaoTextoLivre extends Revisao {\n  type = 'RevisaoTextoLivre';\n  constructor(usuario: Usuario, dataHora: string, descricao: string) {\n    super(usuario, dataHora, descricao);\n  }\n}\n\nexport class RevisaoElemento extends Revisao {\n  type = 'RevisaoElemento';\n  actionType: string;\n  stateType: StateType;\n  elementoAntesRevisao: Partial<Elemento> | undefined;\n  elementoAposRevisao: Partial<Elemento>; // No caso de excluso de elemento, o elementoAposRevisao ter o mesmo valor que o elementoAntesRevisao\n  idRevisaoElementoPai?: string;\n  idRevisaoElementoPrincipal?: string;\n\n  constructor(\n    actionType: string,\n    stateType: StateType,\n    descricao: string,\n    usuario: Usuario,\n    dataHora: string,\n    elementoAntesRevisao: Partial<Elemento> | undefined,\n    elementoAposRevisao: Partial<Elemento>\n  ) {\n    super(usuario, dataHora, descricao);\n    this.actionType = actionType;\n    this.stateType = stateType;\n    this.elementoAntesRevisao = elementoAntesRevisao;\n    this.elementoAposRevisao = elementoAposRevisao;\n    this.descricao = descricao || buildDescricaoRevisao(this);\n\n    removeAtributosDoElemento(this.elementoAntesRevisao);\n    removeAtributosDoElemento(this.elementoAposRevisao);\n  }\n}\n","export const padTo2Digits = (num: number): string => {\n  return num.toString().padStart(2, '0');\n};\n\nexport const formatDDMMYYYY = (date: Date): string => {\n  return [padTo2Digits(date.getDate()), padTo2Digits(date.getMonth() + 1), date.getFullYear()].join('/');\n};\n\nexport const formatDateTime = (date: Date): string => {\n  const data = [date.getFullYear(), padTo2Digits(date.getMonth() + 1), padTo2Digits(date.getDate())].join('-');\n  const hora = [padTo2Digits(date.getHours()), padTo2Digits(date.getMinutes()), padTo2Digits(date.getSeconds())].join(':');\n  return `${data} ${hora}`;\n};\n","import { ElementoAction } from '.';\n\nexport const ATUALIZAR_USUARIO = 'ATUALIZAR_USUARIO';\n\nexport class AtualizarUsuario implements ElementoAction {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Atualizar o usurio da reviso.';\n  }\n\n  execute(usuario: any): any {\n    return {\n      type: ATUALIZAR_USUARIO,\n      usuario: usuario,\n    };\n  }\n}\n\nexport const atualizarUsuarioAction = new AtualizarUsuario();\n","import { getRevisoesElemento, isRevisaoDeExclusao, isRevisaoDeRestauracao } from './../util/revisaoUtil';\nimport { createElemento } from './../../../model/elemento/elementoUtil';\nimport { DescricaoSituacao } from './../../../model/dispositivo/situacao';\nimport { Elemento } from '../../../model/elemento';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport {\n  // findRevisaoByElementoUuid2,\n  findRevisaoByElementoUuid,\n  isRevisaoDeTransformacao,\n  identificarRevisaoElementoPai,\n  existeRevisaoParaElementos,\n  buildDescricaoRevisaoFromStateType,\n  removeAtributosDoElemento,\n  atualizaReferenciaElementoAnteriorSeNecessario,\n  isRevisaoPrincipal,\n  isRevisaoDeMovimentacao,\n  findRevisoesByElementoUuid2,\n  findRevisoesByElementoLexmlId,\n  isRevisaoDeModificacao,\n  associarRevisoesAosElementosDosEventos,\n} from '../util/revisaoUtil';\nimport { aceitarRevisaoAction } from '../../../model/lexml/acao/aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from '../../../model/lexml/acao/rejeitarRevisaoAction';\nimport { APLICAR_ALTERACOES_EMENDA } from '../../../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { ATUALIZAR_USUARIO } from '../../../model/lexml/acao/atualizarUsuarioAction';\nimport { ABRIR_ARTICULACAO } from '../../../model/lexml/acao/openArticulacaoAction';\nimport { VALIDAR_ARTICULACAO } from '../../../model/lexml/acao/validarArticulacaoAction';\nimport { getEvento } from '../evento/eventosUtil';\nimport { TEXTO_OMISSIS } from '../../../model/lexml/conteudo/textoOmissis';\n\nexport const atualizaRevisao = (state: State, actionType: any): State => {\n  const numElementos = state.ui?.events.map(se => se.elementos).flat().length;\n  if ([ABRIR_ARTICULACAO, ATUALIZAR_USUARIO, VALIDAR_ARTICULACAO].includes(actionType) || !state.emRevisao || !actionType || !numElementos) {\n    return state;\n  } else if (actionType === APLICAR_ALTERACOES_EMENDA) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (UNDO === actionType && (state.past?.length || 0) < state.numEventosPassadosAntesDaRevisao!) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (REDO === actionType && (state.past?.length || 0) <= state.numEventosPassadosAntesDaRevisao!) {\n    associarRevisoesAosElementosDosEventos(state);\n    return state;\n  }\n\n  if (state.ui?.message?.tipo === TipoMensagem.ERROR) {\n    return state;\n  }\n\n  let revisoes: Revisao[] = [];\n  if ((UNDO !== actionType || !isUndoDeRevisaoAceitaOuRejeitada(state)) && !isAcaoDeRevisaoRejeitada(state)) {\n    revisoes.push(...processaEventosDeSupressao(state, actionType));\n    revisoes.push(...processaEventosDeModificacao(state, actionType));\n    revisoes.push(...processaEventosDeRestauracao(state, actionType));\n    // revisoes.push(...processaEventosDeRenumeracao(state, actionType, elementoAntesAcao));\n\n    if (isAcaoMoverOuTransformar(state)) {\n      revisoes.push(...processaEventosDeMoverOuTransformar(state, actionType));\n    } else {\n      revisoes.push(...processaEventosDeInclusao(state, actionType));\n      revisoes.push(...processaEventosDeRemocao(state, actionType));\n    }\n  }\n  revisoes = identificarRevisaoElementoPai(state, revisoes);\n\n  if (existeEventoDeInclusaoOuExclusao(state)) {\n    atualizarLexmlIdEmElementosDeRevisoes(state);\n    atualizarPosicaoDeElementosEmRevisoes(state);\n  }\n\n  state.revisoes!.push(...revisoes);\n\n  associarRevisoesAosElementosDosEventos(state);\n\n  adicionarOpcoesAoMenu(state);\n\n  return state;\n};\n\nconst isUndoDeRevisaoAceitaOuRejeitada = (state: State): boolean => {\n  return !!state.future?.length && [StateType.RevisaoAceita, StateType.RevisaoRejeitada].includes(state.future[state.future.length - 1][0].stateType);\n};\n\nconst isAcaoDeRevisaoRejeitada = (state: State): boolean => !!state.ui?.events.some(ev => ev.stateType === StateType.RevisaoRejeitada);\n\nconst processaEventosDeSupressao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoSuprimido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao && revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      const d = getDispositivoFromElemento(state.articulacao!, e)!;\n      const eAux = revisao?.elementoAntesRevisao || (JSON.parse(JSON.stringify(d.situacao.dispositivoOriginal)) as Elemento);\n      result.push(new RevisaoElemento(actionType, StateType.ElementoSuprimido, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      if (revisao) {\n        revisoesParaRemover.push(revisao);\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeModificacao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoModificado);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao) {\n      if ((isRevisaoDeModificacao(revisao) || isRevisaoDeRestauracao(revisao)) && revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, e)) {\n        revisoesParaRemover.push(revisao);\n      }\n      revisao.elementoAposRevisao = JSON.parse(JSON.stringify(e));\n      state.usuario && (revisao.usuario = state.usuario);\n      revisao.dataHora = formatDateTime(new Date());\n    } else {\n      const eAux = getElementoAntesModificacao(state, e);\n      // result.push(new RevisaoElemento(actionType, StateType.ElementoModificado, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      if (!isAjusteTextoOmitido(eAux, e)) {\n        result.push(new RevisaoElemento(actionType, StateType.ElementoModificado, '', state.usuario!, formatDateTime(new Date()), eAux, JSON.parse(JSON.stringify(e))));\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst isAjusteTextoOmitido = (eAntesRevisao: Elemento | undefined, eAposRevisao: Elemento): boolean => {\n  // O texto omitido do dispositivo original pode possuir um span com a classe texto__omissis, que no deve ser considerado para fins de comparao de modificao.\n  return !!(\n    eAposRevisao.tipo === eAntesRevisao?.tipo &&\n    eAposRevisao.conteudo?.texto?.includes(TEXTO_OMISSIS) &&\n    eAntesRevisao?.conteudo?.texto?.includes(TEXTO_OMISSIS) &&\n    eAposRevisao.conteudo?.texto?.replace('<span class=\"texto__omissis\">', '').replace('</span>', '') === eAntesRevisao?.conteudo?.texto\n  );\n};\n\nconst processaEventosDeMoverOuTransformar = (state: State, actionType: any): Revisao[] => {\n  const incluidos = getElementosFromEventos(getEventos(state, StateType.ElementoIncluido));\n  const removidos = getElementosFromEventos(getEventos(state, StateType.ElementoRemovido));\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  const montarNovaRevisao = (eAntesRevisao: Elemento, eAposRevisao: Elemento): RevisaoElemento => {\n    const revInclusao = new RevisaoElemento(\n      actionType,\n      StateType.ElementoIncluido,\n      '',\n      state.usuario!,\n      formatDateTime(new Date()),\n      eAntesRevisao ? JSON.parse(JSON.stringify(eAntesRevisao)) : undefined,\n      JSON.parse(JSON.stringify(eAposRevisao))\n    );\n\n    revInclusao.descricao = buildDescricaoRevisaoFromStateType(revInclusao, eAposRevisao);\n    // revExclusao.idRevisaoAssociada = revInclusao.id;\n    // revInclusao.idRevisaoAssociada = revExclusao.id;\n    // result.push(revExclusao);\n    return revInclusao;\n  };\n\n  if (existeRevisaoParaElementos(state.revisoes, removidos)) {\n    removidos.forEach((e, index) => {\n      const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid)!;\n      // A reviso pode no existir se houver dispositivo removido aps a movimentao em modo de reviso\n      // Exemplo: moveu inciso com alneas, removeu alnea e depois moveu novamente o inciso\n      if (!revisao) {\n        result.push(montarNovaRevisao(e, incluidos[index]));\n      } else if (isRevisaoDeTransformacao(revisao) && revisaoDeElementoComMesmoLexmlIdRotuloEConteudo(revisao, incluidos[index])) {\n        revisoesParaRemover.push(...findRevisoesByElementoLexmlId(state.revisoes, e.lexmlId));\n      } else if (revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, incluidos[index]) && revisao.elementoAntesRevisao!.uuid !== e.uuid) {\n        revisoesParaRemover.push(...findRevisoesByElementoUuid2(state.revisoes, incluidos[index].uuid2));\n      } else {\n        state.revisoes = state.revisoes?.filter(r => r.id !== revisao.id);\n\n        // result.push(montarNovaRevisao(revisao.elementoAntesRevisao! as Elemento, incluidos[index]));\n\n        revisao.stateType = StateType.ElementoIncluido;\n        revisao.actionType = actionType;\n        revisao.dataHora = formatDateTime(new Date());\n        revisao.elementoAposRevisao = JSON.parse(JSON.stringify(incluidos[index]));\n        removeAtributosDoElemento(revisao.elementoAposRevisao);\n        revisao.usuario = state.usuario!;\n        revisao.descricao = buildDescricaoRevisaoFromStateType(revisao, incluidos[index]);\n\n        revisao.idRevisaoElementoPai = revisoesParaRemover.find(r => r.id === revisao.idRevisaoElementoPai) ? undefined : revisao.idRevisaoElementoPai;\n        revisao.idRevisaoElementoPrincipal = revisoesParaRemover.find(r => r.id === revisao.idRevisaoElementoPrincipal) ? undefined : revisao.idRevisaoElementoPrincipal;\n\n        result.push(revisao);\n      }\n    });\n  } else {\n    removidos.forEach((e, index) => result.push(montarNovaRevisao(e, incluidos[index])));\n  }\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeInclusao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoIncluido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n  const elementosIncluidos = getElementosFromEventos(eventos);\n  const uuidsElementosIncluidos = elementosIncluidos.map(e => e.uuid);\n\n  getElementosFromEventos(eventos).forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      if (!uuidsElementosIncluidos.includes(e.hierarquia?.pai?.uuid)) {\n        atualizaReferenciaElementoAnteriorSeNecessario(state.articulacao!, state.revisoes, e, 'inclusao');\n      }\n      result.push(new RevisaoElemento(actionType, StateType.ElementoIncluido, '', state.usuario!, formatDateTime(new Date()), undefined, JSON.parse(JSON.stringify(e))));\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeRemocao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoRemovido);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n  const elementosRemovidos = getElementosFromEventos(eventos);\n  const uuidsElementosRemovidos = elementosRemovidos.map(e => e.uuid);\n\n  elementosRemovidos.forEach(e => {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, e.uuid);\n    if (revisao && (isRevisaoPrincipal(revisao) || !isRevisaoDeMovimentacao(revisao))) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      if (!uuidsElementosRemovidos.includes(e.hierarquia?.pai?.uuid)) {\n        atualizaReferenciaElementoAnteriorSeNecessario(state.articulacao!, state.revisoes, e, 'exclusao');\n      }\n      const eAux = JSON.parse(JSON.stringify(e)) as Elemento;\n      result.push(new RevisaoElemento(actionType, StateType.ElementoRemovido, '', state.usuario!, formatDateTime(new Date()), eAux, { ...eAux, acoesPossiveis: [] }));\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst processaEventosDeRestauracao = (state: State, actionType: any): Revisao[] => {\n  const eventos = getEventos(state, StateType.ElementoRestaurado);\n\n  const result: Revisao[] = [];\n  const revisoesParaRemover: Revisao[] = [];\n\n  eventos.forEach(se => {\n    const elementoAtual = se.elementos![1];\n    const elementoAnterior = se.elementos![0];\n    const eAux = elementoAtual || elementoAnterior;\n\n    const revisao = findRevisaoByElementoUuid(state.revisoes, elementoAnterior.uuid);\n    if (revisao && revisao.elementoAntesRevisao?.descricaoSituacao === eAux.descricaoSituacao && revisaoDeElementoComMesmoUuid2RotuloEConteudo(revisao, eAux)) {\n      revisoesParaRemover.push(revisao);\n    } else {\n      const d = getDispositivoFromElemento(state.articulacao!, elementoAnterior)!;\n      const eAntesRevisao = !elementoAtual ? d.situacao.dispositivoOriginal : elementoAnterior;\n      const eAposRevisao = createElemento(d);\n      result.push(\n        new RevisaoElemento(\n          actionType,\n          StateType.ElementoRestaurado,\n          '',\n          state.usuario!,\n          formatDateTime(new Date()),\n          JSON.parse(JSON.stringify(eAntesRevisao)),\n          JSON.parse(JSON.stringify(eAposRevisao))\n        )\n      );\n      if (revisao) {\n        revisoesParaRemover.push(revisao);\n      }\n    }\n  });\n\n  state.revisoes = state.revisoes?.filter(r => !revisoesParaRemover.includes(r));\n\n  return result;\n};\n\nconst getEventos = (state: State, stateType: StateType): StateEvent[] => {\n  return state.ui?.events.filter(se => se.stateType === stateType) || [];\n};\n\nconst getElementosFromEventos = (eventos: StateEvent[]): Elemento[] => {\n  return removeDuplicidades(eventos.map(se => se.elementos || []).flat());\n};\n\nconst removeDuplicidades = (elementos: Elemento[]): Elemento[] => {\n  const map = new Map<number, Elemento>();\n  const result: Elemento[] = [];\n  elementos.reverse().forEach(e => {\n    if (!map.has(e.uuid!)) {\n      map.set(e.uuid!, e);\n      result.unshift(e);\n    }\n  });\n  return result;\n};\n\nconst revisaoDeElementoComMesmoLexmlIdRotuloEConteudo = (r: RevisaoElemento, e: Elemento): boolean => {\n  return r.elementoAntesRevisao?.lexmlId === e.lexmlId && r.elementoAntesRevisao?.rotulo === e.rotulo && r.elementoAntesRevisao?.conteudo?.texto === e.conteudo?.texto;\n};\n\nconst revisaoDeElementoComMesmoUuid2RotuloEConteudo = (r: RevisaoElemento, e: Elemento): boolean => {\n  return (\n    r.elementoAntesRevisao?.uuid2 === e.uuid2 &&\n    r.elementoAntesRevisao?.rotulo === e.rotulo &&\n    r.elementoAntesRevisao?.conteudo?.texto === e.conteudo?.texto &&\n    r.elementoAntesRevisao?.hierarquia?.pai?.lexmlId === e.hierarquia?.pai?.lexmlId // Checa se elementos esto na mesma hierarquia\n  );\n};\n\nconst isAcaoMoverOuTransformar = (state: State): boolean => {\n  const incluidos = getEventos(state, StateType.ElementoIncluido);\n  const removidos = getEventos(state, StateType.ElementoRemovido);\n  return !!incluidos.length && incluidos.length === removidos.length;\n};\n\nconst getElementoAntesModificacao = (state: State, elemento: Elemento): Elemento | undefined => {\n  const eventos = [...state.past!].pop() as any as StateEvent[];\n  const modificacoes = eventos.filter(se => se.stateType === StateType.ElementoModificado && se.elementos?.some(e => e.uuid === elemento.uuid));\n  const modificacao = modificacoes.pop();\n  return modificacao ? JSON.parse(JSON.stringify(modificacao.elementos![0])) : undefined;\n};\n\nconst adicionarOpcoesAoMenu = (state: State): void => {\n  state.ui?.events.forEach(se =>\n    se.elementos?.filter(Boolean).forEach(e => {\n      if (e.revisao && !(e.revisao as RevisaoElemento).idRevisaoElementoPrincipal) {\n        e.acoesPossiveis = se.stateType === StateType.ElementoRemovido ? [] : [...(e.acoesPossiveis || [])];\n        !e.acoesPossiveis.includes(aceitarRevisaoAction) && e.acoesPossiveis.push(aceitarRevisaoAction);\n        !e.acoesPossiveis.includes(rejeitarRevisaoAction) && e.acoesPossiveis.push(rejeitarRevisaoAction);\n      }\n    })\n  );\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst existeEventoDeInclusaoOuExclusao = (state: State): boolean => {\n  const eventos = state.ui?.events || [];\n  return eventos.some(se => se.stateType === StateType.ElementoIncluido || se.stateType === StateType.ElementoRemovido);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst atualizarLexmlIdEmElementosDeRevisoes = (state: State): void => {\n  let revisoes = getRevisoesElemento(state.revisoes || [])\n    .filter(r => r.elementoAposRevisao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n    .filter(r => !isRevisaoDeExclusao(r));\n\n  revisoes.forEach(r => {\n    const d = getDispositivoFromElemento(state.articulacao!, r.elementoAposRevisao);\n    if (d) {\n      const e = createElemento(d, false, true);\n      r.elementoAposRevisao.lexmlId = d.id;\n      r.elementoAposRevisao.hierarquia!.pai!.lexmlId = d.pai!.id;\n      r.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura));\n\n      if (r.elementoAntesRevisao) {\n        r.elementoAntesRevisao.lexmlId = d.id;\n        r.elementoAntesRevisao.hierarquia!.pai!.lexmlId = d.pai!.id;\n        r.elementoAntesRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(e.elementoAnteriorNaSequenciaDeLeitura));\n      }\n    }\n  });\n\n  revisoes = getRevisoesElemento(state.revisoes || []).filter(r => isRevisaoPrincipal(r) && isRevisaoDeExclusao(r));\n  revisoes.forEach(r => {\n    const d = getDispositivoFromElemento(state.articulacao!, r.elementoAposRevisao.hierarquia!.pai!)!;\n    if (d) {\n      r.elementoAposRevisao.hierarquia!.pai!.lexmlId = d.id;\n    }\n  });\n};\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst atualizarPosicaoDeElementosEmRevisoes = (state: State): void => {\n  const revisoes = getRevisoesElemento(state.revisoes || []).filter(r => isRevisaoPrincipal(r) && isRevisaoDeExclusao(r));\n  atualizarPosicaoDeElementosEmRevisoesByEvento(revisoes, getEvento(state.ui!.events, StateType.ElementoIncluido));\n  atualizarPosicaoDeElementosEmRevisoesByEvento(revisoes, getEvento(state.ui!.events, StateType.ElementoRemovido));\n};\n\nconst atualizarPosicaoDeElementosEmRevisoesByEvento = (revisoes: RevisaoElemento[] = [], evento: StateEvent | undefined): void => {\n  if (!evento) {\n    return;\n  }\n  const fator = evento.stateType === StateType.ElementoIncluido ? 1 : -1;\n  const fnCondicaoInclusao = (e: Elemento, posicaoAtual: number): boolean => e.hierarquia!.posicao! <= posicaoAtual;\n  const fnCondicaoExclusao = (e: Elemento, posicaoAtual: number): boolean => e.hierarquia!.posicao! < posicaoAtual;\n  const fnCondicao2 = evento.stateType === StateType.ElementoIncluido ? fnCondicaoInclusao : fnCondicaoExclusao;\n  revisoes.forEach(r => {\n    const lexmlIdPai = r.elementoAposRevisao.hierarquia!.pai!.lexmlId;\n    const posicaoAtual = r.elementoAposRevisao.hierarquia!.posicao!;\n    const deslocamento = evento.elementos!.filter(e => e.hierarquia?.pai?.lexmlId === lexmlIdPai && fnCondicao2(e, posicaoAtual)).length * fator;\n    r.elementoAposRevisao.hierarquia!.posicao! += deslocamento;\n  });\n};\n","import { isRevisaoPrincipal, mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes } from './../util/revisaoUtil';\nimport { createElementoValidado, getDispositivoFromElemento } from './../../../model/elemento/elementoUtil';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { findRevisaoByElementoUuid, getRevisoesElementoAssociadas, isRevisaoDeExclusao } from '../util/revisaoUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const aceitaRevisao = (state: any, action: any): State => {\n  if (action.revisao || action.elemento) {\n    return aceitarRevisao(state, action);\n  } else {\n    return aceitarRevisaoEmLote(state, state.revisoes);\n  }\n};\n\nexport const aceitarRevisaoEmLote = (state: State, revisoes: Revisao[] = []): State => {\n  const tempStates: State[] = [];\n  revisoes.filter(isRevisaoPrincipal).forEach((revisao: Revisao) => {\n    const tempState = { ...state, past: [], present: [], future: [], ui: { ...state.ui, events: [] } };\n    tempStates.push(aceitarRevisao(tempState, { revisao }));\n  });\n\n  const tempState = mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes(state, tempStates, revisoes, 'aceitar');\n  tempState.revisoes = state.revisoes?.filter(r => !isRevisaoPrincipal(r));\n  return tempState;\n};\n\nconst aceitarRevisao = (state: any, action: any): State => {\n  const revisao = (action.revisao || findRevisaoByElementoUuid(state.revisoes, action.elemento.uuid)) as RevisaoElemento;\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const idsRevisoesAssociadas = revisoesAssociadas.map(r => r.id);\n\n  const elementos = revisoesAssociadas.map(r => {\n    const e = isRevisaoDeExclusao(r) ? r.elementoAposRevisao : createElementoValidado(getDispositivoFromElemento(state.articulacao, r.elementoAposRevisao)!);\n    e.revisao = JSON.parse(JSON.stringify(r));\n    return e as Elemento;\n  });\n\n  const elementosValidados = elementos\n    .map(e => getDispositivoFromElemento(state.articulacao, e))\n    .filter(Boolean)\n    .map(d => createElementoValidado(d!));\n\n  const events: StateEvent[] = [{ stateType: StateType.RevisaoAceita, elementos }];\n\n  if (elementosValidados.length) {\n    events.push({ stateType: StateType.ElementoValidado, elementos: elementosValidados });\n  }\n\n  const revisoes = state.revisoes.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id));\n  if (isRevisaoDeExclusao(revisao)) {\n    // Se est aceitando uma reviso de excluso,  preciso atualizar os elementos de outras revises de excluso que referenciam o elemento REALMENTE excludo durante a aceitao\n    atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao(revisoes, revisoesAssociadas);\n  }\n\n  return {\n    ...state,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n    revisoes: state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id)),\n  };\n};\n\nconst atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao = (revisoes: Revisao[], revisoesAssociadas: RevisaoElemento[]): void => {\n  const revisaoPrincipal = revisoesAssociadas[0];\n  const ultimaRevisao = revisoesAssociadas[revisoesAssociadas.length - 1];\n\n  const revisao = revisoes.find(r => (r as RevisaoElemento).elementoAposRevisao?.elementoAnteriorNaSequenciaDeLeitura?.uuid === ultimaRevisao.elementoAposRevisao.uuid);\n  if (revisao) {\n    (revisao as RevisaoElemento).elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = revisaoPrincipal.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura;\n    (revisao as RevisaoElemento).elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = revisaoPrincipal.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura;\n  }\n};\n","import { isRevisaoDeModificacao, isRevisaoDeTransformacao, mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes } from './../util/revisaoUtil';\nimport { isCaput } from './../../../model/dispositivo/tipo';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { Elemento } from '../../../model/elemento/elemento';\nimport {\n  createElemento,\n  createElementoValidado,\n  criaListaElementosAfinsValidados,\n  getDispositivoFromElemento,\n  listaDispositivosRenumerados,\n} from '../../../model/elemento/elementoUtil';\nimport { getDispositivoAnteriorNaSequenciaDeLeitura, getUltimoFilho, isAdicionado } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { Revisao, RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State, StateEvent, StateType } from '../../state';\nimport { getElementosRemovidosEIncluidos, unificarEvento } from '../evento/eventosUtil';\nimport { getElementosAlteracaoASeremAtualizados } from '../util/reducerUtil';\nimport {\n  findRevisaoByElementoUuid,\n  findRevisaoDeExclusaoComElementoAnteriorApontandoPara,\n  findUltimaRevisaoDoGrupo,\n  getRevisoesElementoAssociadas,\n  isRevisaoDeMovimentacao,\n  isRevisaoPrincipal,\n} from '../util/revisaoUtil';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { ajustarAtributosAgrupadorIncluidoPorUndoRedo, ajustarHierarquivoAgrupadorIncluidoPorUndoRedo, incluir } from '../util/undoRedoReducerUtil';\nimport { agrupaElemento } from './agrupaElemento';\nimport { atualizaTextoElemento } from './atualizaTextoElemento';\nimport { removeElemento } from './removeElemento';\nimport { restauraElemento } from './restauraElemento';\nimport { suprimeElemento } from './suprimeElemento';\n\nexport const rejeitaRevisao = (state: any, action: any): State => {\n  if (action.revisao || action.elemento) {\n    return rejeitarRevisao(state, action);\n  } else {\n    return rejeitarRevisaoEmLote(state, state.revisoes);\n  }\n};\n\nexport const rejeitarRevisaoEmLote = (state: State, revisoes: Revisao[] = []): State => {\n  const tempStates: State[] = [];\n  revisoes.filter(isRevisaoPrincipal).forEach((revisao: Revisao) => {\n    const tempState = { ...state, past: [], present: [], future: [], ui: { ...state.ui, events: [] } };\n    tempStates.push(rejeitarRevisao(tempState, { revisao }));\n  });\n  const tempState = mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes(state, tempStates, revisoes, 'rejeitar');\n  tempState.revisoes = state.revisoes?.filter(r => !isRevisaoPrincipal(r));\n  return tempState;\n};\n\nexport const rejeitarRevisao = (state: any, action: any): State => {\n  const revisao = (action.revisao || findRevisaoByElementoUuid(state.revisoes, action.elemento.uuid)) as RevisaoElemento;\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const idsRevisoesAssociadas = revisoesAssociadas.map(r => r.id);\n\n  const elementos = revisoesAssociadas.map(r => {\n    r.elementoAposRevisao.revisao = JSON.parse(JSON.stringify(r));\n    return r.elementoAposRevisao as Elemento;\n  });\n\n  const eventos: StateEvent[] = [{ stateType: StateType.RevisaoRejeitada, elementos }];\n\n  if (isRevisaoDeMovimentacao(revisao) || isRevisaoDeTransformacao(revisao)) {\n    // Elementos com reviso de movimentao tambm podem ter reviso de excluso (desde que no seja o elemento principal)\n    // Nesse caso, a reviso de excluso deve ser removida do state (no precisa ser rejeitada)\n    const uuid2Elementos = elementos.map(e => e.uuid2);\n    const outrasRevisoes = state.revisoes\n      .filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id))\n      .filter((r: Revisao) => uuid2Elementos.includes((r as RevisaoElemento).elementoAposRevisao.uuid2)) as RevisaoElemento[];\n    idsRevisoesAssociadas.push(...outrasRevisoes.map(r => r.id));\n\n    // Desfaz as aes feitas aps a movimentao do dispositivo e que geraram revises adicionais\n    processaRevisoes(state, outrasRevisoes.filter(isRevisaoPrincipal));\n\n    const elementosDeOutrasRevisoes = outrasRevisoes.map(r => {\n      r.elementoAposRevisao.revisao = JSON.parse(JSON.stringify(r));\n      return r.elementoAposRevisao as Elemento;\n    });\n\n    eventos.push({ stateType: StateType.RevisaoAdicionalRejeitada, elementos: elementosDeOutrasRevisoes });\n  }\n\n  const tempState = { ...state, past: [] };\n\n  eventos.push(...processaRevisoes(tempState, revisoesAssociadas.filter(isRevisaoPrincipal)));\n  const eventosPast = isRevisaoDeModificacao(revisao) ? montarEventosDeModificacaoParaHistorico(eventos, revisao, state) : eventos;\n\n  return {\n    ...state,\n    past: buildPast(state, eventosPast),\n    present: eventos,\n    future: [],\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n    revisoes: state.revisoes?.filter((r: Revisao) => !idsRevisoesAssociadas.includes(r.id)),\n  };\n};\n\nconst montarEventosDeModificacaoParaHistorico = (eventos: StateEvent[], revisao: RevisaoElemento, state: State): StateEvent[] => {\n  // O PASSADO de evento de modificao (StateType.ElementoModificado) deve possuir 2 itens no array elemento:\n  // Item 0: valor a ser retornado para a articulao em caso de UNDO\n  // Item 1: valor a ser retornado para a articulao em caso de REDO\n  const eventosPast = eventos.filter(ev => ev.stateType !== StateType.ElementoModificado) as StateEvent[];\n  const dispositivo = getDispositivoFromElemento(state.articulacao!, revisao.elementoAposRevisao)!;\n  eventosPast.push({ stateType: StateType.ElementoModificado, elementos: [revisao.elementoAposRevisao! as Elemento, revisao.elementoAntesRevisao as Elemento] });\n  eventosPast.push({ stateType: StateType.ElementoValidado, elementos: criaListaElementosAfinsValidados(dispositivo, true) });\n  return eventosPast;\n};\n\nconst processaRevisoes = (state: State, revisoes: RevisaoElemento[]): StateEvent[] => {\n  const eventos: StateEvent[] = [];\n\n  revisoes.forEach(r => {\n    r.stateType === StateType.ElementoSuprimido && eventos.push(...rejeitaSupressao(state, r));\n    r.stateType === StateType.ElementoModificado && eventos.push(...rejeitaModificacao(state, r));\n    r.stateType === StateType.ElementoRestaurado && eventos.push(...rejeitaRestauracao(state, r));\n    r.stateType === StateType.ElementoIncluido && eventos.push(...rejeitaInclusao(state, r));\n    r.stateType === StateType.ElementoRemovido && eventos.push(...rejeitaExclusao(state, r));\n  });\n\n  return unificarEvento(state, eventos, StateType.ElementoRenumerado);\n};\n\nconst rejeitaSupressao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  return restauraElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n};\n\nconst rejeitaModificacao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  return atualizaTextoElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n};\n\nconst rejeitaRestauracao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  if (revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n    return suprimeElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n  } else if (revisao.elementoAntesRevisao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO) {\n    return atualizaTextoElemento(state, { atual: revisao.elementoAntesRevisao }).ui?.events || [];\n  }\n  return [];\n};\n\nconst rejeitaInclusao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  const dispositivoASerRemovido = getDispositivoFromElemento(state.articulacao!, revisao.elementoAposRevisao)!;\n  const dispositivoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(dispositivoASerRemovido, d => !isCaput(d));\n\n  const result = removeElemento(state, { atual: revisao.elementoAposRevisao, isRejeitandoRevisao: true }).ui?.events || [];\n\n  // Se existe elemento antes da reviso, ento reinclui elemento (havia sido excludo por se tratar de uma movimentao)\n  if (revisao.elementoAntesRevisao) {\n    result.push(...rejeitaExclusao(state, revisao));\n  }\n\n  const ultimaRevisaoDoGrupo = findUltimaRevisaoDoGrupo(state.revisoes, revisao);\n  const rAux2 = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(state.revisoes, ultimaRevisaoDoGrupo.elementoAposRevisao);\n\n  if (rAux2) {\n    const e = dispositivoAnterior ? createElemento(dispositivoAnterior) : undefined;\n    rAux2.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = e ? JSON.parse(JSON.stringify(e)) : undefined;\n    rAux2.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = e ? JSON.parse(JSON.stringify(e)) : undefined;\n  }\n\n  return result;\n};\n\nconst rejeitaExclusao = (state: State, revisao: RevisaoElemento): StateEvent[] => {\n  const revisoesAssociadas = getRevisoesElementoAssociadas(state.revisoes, revisao);\n  const evento: StateEvent = { stateType: StateType.ElementoRemovido, elementos: revisoesAssociadas.map(r => r.elementoAntesRevisao as Elemento) };\n  const eventoAux: StateEvent = { stateType: StateType.ElementoIncluido, elementos: [] };\n\n  const result: StateEvent[] = [];\n\n  const elementoASerIncluido = revisao.elementoAposRevisao;\n\n  if (elementoASerIncluido.agrupador) {\n    let tempState: State = { ...state, past: [], present: [], future: [], ui: { events: [] } };\n    tempState = agrupaElemento(tempState, {\n      atual: elementoASerIncluido.elementoAnteriorNaSequenciaDeLeitura,\n      novo: {\n        tipo: elementoASerIncluido.tipo,\n        uuid: elementoASerIncluido.uuid,\n        posicao: 'depois',\n        manterNoMesmoGrupoDeAspas: elementoASerIncluido.manterNoMesmoGrupoDeAspas,\n      },\n    });\n\n    const ev: StateEvent = { stateType: StateType.SituacaoElementoModificada, elementos: [elementoASerIncluido as Elemento] };\n    ajustarAtributosAgrupadorIncluidoPorUndoRedo(state.articulacao!, [ev], tempState.ui!.events);\n    ajustarHierarquivoAgrupadorIncluidoPorUndoRedo(state.articulacao!, [ev], tempState.ui!.events);\n\n    // Atualiza elemento que seja agrupador de artigo em alterao de norma em eventos de incluso\n    // Isso  necessrio porque a rejeio da excluso desse tipo de dispositivo pode ter alterado a hierarquia\n    tempState\n      .ui!.events!.filter(ev => ev.stateType === StateType.ElementoIncluido)\n      .forEach(ev => {\n        ev.elementos = ev.elementos?.map(e => {\n          if (e.agrupador && e.dispositivoAlteracao) {\n            const d = getDispositivoFromElemento(tempState.articulacao!, e)!;\n            return createElemento(d);\n          } else {\n            return e;\n          }\n        });\n      });\n\n    result.push(...tempState.ui!.events!);\n  } else {\n    result.push({ stateType: StateType.ElementoIncluido, elementos: incluir(state, evento, eventoAux) });\n  }\n\n  atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao(state, revisao, result[0].elementos![0]);\n\n  const dispositivosRenumerados = listaDispositivosRenumerados(getDispositivoFromElemento(state.articulacao!, result[0].elementos![0])!).filter(isAdicionado);\n  result.push({ stateType: StateType.ElementoRenumerado, elementos: dispositivosRenumerados.map(d => createElemento(d)) });\n\n  result.push({ stateType: StateType.SituacaoElementoModificada, elementos: getElementosAlteracaoASeremAtualizados(state.articulacao!, getElementosRemovidosEIncluidos(result)) });\n  result.push({ stateType: StateType.ElementoValidado, elementos: montarListaElementosValidados(state, result) });\n\n  return result.filter(ev => ev.elementos?.length);\n};\n\nconst atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao = (state: State, revisao: RevisaoElemento, primeiroElementoReincluido: Elemento): void => {\n  // Atualizar referncia\n  const dUltimoFilho = getUltimoFilho(getDispositivoFromElemento(state.articulacao!, primeiroElementoReincluido)!);\n  const eUltimoFilho = createElemento(dUltimoFilho, false, true);\n  const revisaoASerAtualizada = findRevisaoDeExclusaoComElementoAnteriorApontandoPara(\n    state.revisoes?.filter(r => r.id !== revisao.id),\n    eUltimoFilho\n  );\n\n  if (revisaoASerAtualizada && revisaoASerAtualizada.id !== revisao.id) {\n    // Atualiza referncia\n    revisaoASerAtualizada.elementoAposRevisao.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(eUltimoFilho));\n    revisaoASerAtualizada.elementoAntesRevisao!.elementoAnteriorNaSequenciaDeLeitura = JSON.parse(JSON.stringify(eUltimoFilho));\n\n    // // Atualiza posio\n    // if (isAtualizarPosicaoDeElementoExcluido(primeiroElementoReincluido, revisaoASerAtualizada.elementoAposRevisao)) {\n    //   revisaoASerAtualizada.elementoAposRevisao.hierarquia!.posicao = primeiroElementoReincluido.hierarquia!.posicao! + 1;\n    //   revisaoASerAtualizada.elementoAntesRevisao!.hierarquia!.posicao = primeiroElementoReincluido.hierarquia!.posicao! + 1;\n    // }\n  }\n};\n\nconst montarListaElementosValidados = (state: State, result: StateEvent[]): Elemento[] => {\n  return result\n    .filter(ev => ev.stateType === StateType.ElementoIncluido)\n    .map(ev => ev.elementos || [])\n    .flat()\n    .map(e => getDispositivoFromElemento(state.articulacao!, e)!)\n    .map(d => createElementoValidado(d));\n};\n","import { ElementoAction } from '.';\nimport { Revisao } from '../../revisao/revisao';\n\nexport const LIMPAR_REVISAO = 'LIMPAR_REVISAO';\n\nexport class LimparRevisao implements ElementoAction {\n  tipo?: string;\n\n  execute(): any {\n    const revisoes: Revisao[] = [];\n    return {\n      type: LIMPAR_REVISAO,\n      revisoes,\n    };\n  }\n}\n\nexport const limparRevisaoAction = new LimparRevisao();\n","export const ERROR_INICIALIZAR_EDICAO = 'ERROR_INICIALIZAR_EDICAO';\n\nexport class ErrorInicializarEdicao {\n  descricao: string;\n\n  constructor() {\n    this.descricao = 'Erro inicializar edio';\n  }\n\n  execute(err: any): any {\n    return {\n      type: ERROR_INICIALIZAR_EDICAO,\n      erro: err,\n    };\n  }\n}\n\nexport const errorInicializarEdicaoAction = new ErrorInicializarEdicao();\n","import { ADICIONAR_AGRUPADOR_ARTIGO } from './../../../model/lexml/acao/adicionarAgrupadorArtigoAction';\nimport { ADICIONAR_ALERTA } from '../../../model/alerta/acao/adicionarAlerta';\nimport { LIMPAR_ALERTAS } from '../../../model/alerta/acao/limparAlertas';\nimport { REMOVER_ALERTA } from '../../../model/alerta/acao/removerAlerta';\nimport { ASSISTENTE_ALTERACAO } from '../../../model/lexml/acao/adicionarAlteracaoComAssistenteAction';\nimport { ADICIONAR_ELEMENTO } from '../../../model/lexml/acao/adicionarElementoAction';\nimport { ADICIONAR_ELEMENTOS_FROM_CLIPBOARD } from '../../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { AGRUPAR_ELEMENTO } from '../../../model/lexml/acao/agruparElementoAction';\nimport { APLICAR_ALTERACOES_EMENDA } from '../../../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { ATUALIZAR_ELEMENTO } from '../../../model/lexml/acao/atualizarElementoAction';\nimport { ATUALIZAR_REFERENCIA_ELEMENTO } from '../../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { ATUALIZAR_TEXTO_ELEMENTO } from '../../../model/lexml/acao/atualizarTextoElementoAction';\nimport { AUTO_FIX } from '../../../model/lexml/acao/autoFixAction';\nimport { ELEMENTO_SELECIONADO } from '../../../model/lexml/acao/elementoSelecionadoAction';\nimport { INFORMAR_DADOS_ASSISTENTE } from '../../../model/lexml/acao/informarDadosAssistenteAction';\nimport { INFORMAR_EXISTENCIA_NA_NORMA } from '../../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { INFORMAR_NORMA } from '../../../model/lexml/acao/informarNormaAction';\nimport { MOVER_ELEMENTO_ABAIXO } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { MOVER_ELEMENTO_ACIMA } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { ABRIR_ARTICULACAO } from '../../../model/lexml/acao/openArticulacaoAction';\nimport { REDO } from '../../../model/lexml/acao/redoAction';\nimport { REMOVER_ELEMENTO } from '../../../model/lexml/acao/removerElementoAction';\nimport { RENUMERAR_ELEMENTO } from '../../../model/lexml/acao/renumerarElementoAction';\nimport { RESTAURAR_ELEMENTO } from '../../../model/lexml/acao/restaurarElemento';\nimport { SHIFT_TAB } from '../../../model/lexml/acao/shiftTabAction';\nimport { SUPRIMIR_AGRUPADOR } from '../../../model/lexml/acao/suprimirAgrupador';\nimport { SUPRIMIR_ELEMENTO } from '../../../model/lexml/acao/suprimirElemento';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { UNDO } from '../../../model/lexml/acao/undoAction';\nimport { VALIDAR_ARTICULACAO } from '../../../model/lexml/acao/validarArticulacaoAction';\nimport { VALIDAR_ELEMENTO } from '../../../model/lexml/acao/validarElementoAction';\nimport { ATUALIZAR_NOTA_ALTERACAO } from './../../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { REMOVER_ELEMENTO_SEM_TEXTO } from './../../../model/lexml/acao/removerElementoSemTextoAction';\nimport { abreArticulacao } from './abreArticulacao';\nimport { adicionaAlteracaoComAssistente } from './adicionaAlteracaoComAssistente';\nimport { adicionaElemento } from './adicionaElemento';\nimport { adicionarAlerta as adicionaAlerta } from './adicionarAlerta';\nimport { agrupaElemento } from './agrupaElemento';\nimport { aplicaAlteracoesEmenda } from './aplicaAlteracoesEmenda';\nimport { atualizaElemento } from './atualizaElemento';\nimport { atualizaNotaAlteracao } from './atualizaNotaAlteracao';\nimport { atualizaReferenciaElemento } from './atualizaReferenciaElemento';\nimport { atualizaTextoElemento } from './atualizaTextoElemento';\nimport { autoFixElemento } from './autoFixElemento';\nimport { informaExistenciaDoElementoNaNorma } from './informaExistenciaDoElementoNaNorma';\nimport { limparAlertas } from './limparAlertas';\nimport { modificaTipoElementoWithTab } from './modificaTipoElementoWithTab';\nimport { moveElementoAbaixo } from './moveElementoAbaixo';\nimport { moveElementoAcima } from './moveElementoAcima';\nimport { redo } from './redo';\nimport { removeAlerta } from './removeAlerta';\nimport { removeElemento } from './removeElemento';\nimport { removeElementoSemTexto } from './removeElementoSemTexto';\nimport { renumeraElemento } from './renumeraElemento';\nimport { restauraElemento } from './restauraElemento';\nimport { selecionaElemento } from './selecionaElemento';\nimport { solicitaDadosAssistente } from './solicitaDadosAssistente';\nimport { solicitaNorma } from './solicitaNorma';\nimport { suprimeAgrupador } from './suprimeAgrupador';\nimport { suprimeElemento } from './suprimeElemento';\nimport { transformaTipoElemento } from './transformaTipoElemento';\nimport { undo } from './undo';\nimport { validaArticulacao } from './validaArticulacao';\nimport { validaElemento } from './validaElemento';\nimport { adicionaElementosNaProposicaoFromClipboard } from './adicionaElementosNaProposicaoFromClipboard';\nimport { ATIVAR_DESATIVAR_REVISAO } from '../../../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { ativaDesativaRevisao } from './ativaDesativaRevisao';\nimport { atualizaRevisao } from './atualizaRevisao';\nimport { State, StateType } from '../../state';\nimport { ATUALIZAR_USUARIO } from '../../../model/lexml/acao/atualizarUsuarioAction';\nimport { atualizaUsuario } from './atualizaUsuario';\nimport { ACEITAR_REVISAO } from '../../../model/lexml/acao/aceitarRevisaoAction';\nimport { REJEITAR_REVISAO } from '../../../model/lexml/acao/rejeitarRevisaoAction';\nimport { aceitaRevisao } from './aceitaRevisao';\nimport { rejeitaRevisao } from './rejeitaRevisao';\nimport { adicionaDiffMenuOpcoes } from './adicionaDiffMenuOpcoes';\nimport { LIMPAR_REVISAO } from '../../../model/lexml/acao/limparRevisoes';\nimport { limpaRevisao } from './limpaRevisao';\nimport { ERROR_INICIALIZAR_EDICAO } from '../../../model/lexml/acao/errorInicializarEdicaoAction';\nimport { erroInicializaEdicao } from './erroInicializaEdicao';\n\nexport const elementoReducer = (state = {}, action: any): any => {\n  let tempState: State;\n\n  let usuario = (state as State).usuario;\n  let actionType = action.type;\n  let emRevisao = (state as State).emRevisao;\n  let revisoes = (state as State).revisoes || [];\n  let numEventosPassadosAntesDaRevisao = (state as State).numEventosPassadosAntesDaRevisao || 0;\n\n  switch (action.type) {\n    case ADICIONAR_AGRUPADOR_ARTIGO:\n      tempState = agrupaElemento(state, action);\n      break;\n    case INFORMAR_EXISTENCIA_NA_NORMA:\n      tempState = informaExistenciaDoElementoNaNorma(state, action);\n      break;\n    case ATUALIZAR_NOTA_ALTERACAO:\n      tempState = atualizaNotaAlteracao(state, action);\n      break;\n    case APLICAR_ALTERACOES_EMENDA:\n      tempState = aplicaAlteracoesEmenda(state, action);\n      emRevisao = tempState.emRevisao;\n      break;\n    case ASSISTENTE_ALTERACAO:\n      tempState = adicionaAlteracaoComAssistente(state, action);\n      break;\n    case ATUALIZAR_ELEMENTO:\n      tempState = atualizaElemento(state, action);\n      break;\n    case ATUALIZAR_REFERENCIA_ELEMENTO:\n      tempState = atualizaReferenciaElemento(state, action);\n      break;\n    case ATUALIZAR_TEXTO_ELEMENTO:\n      tempState = atualizaTextoElemento(state, action);\n      break;\n    case AUTO_FIX:\n      tempState = autoFixElemento(state, action);\n      break;\n    case ADICIONAR_ELEMENTO:\n      tempState = adicionaElemento(state, action);\n      break;\n    case ADICIONAR_ELEMENTOS_FROM_CLIPBOARD:\n      tempState = adicionaElementosNaProposicaoFromClipboard(state, action);\n      break;\n    case AGRUPAR_ELEMENTO:\n      tempState = agrupaElemento(state, action);\n      break;\n    case TRANSFORMAR_TIPO_ELEMENTO:\n      tempState = transformaTipoElemento(state, action);\n      break;\n    case ELEMENTO_SELECIONADO:\n      tempState = selecionaElemento(state, action);\n      break;\n    case INFORMAR_DADOS_ASSISTENTE:\n      tempState = solicitaDadosAssistente(state, action);\n      break;\n    case INFORMAR_NORMA:\n      tempState = solicitaNorma(state, action);\n      break;\n    case MOVER_ELEMENTO_ABAIXO:\n      tempState = moveElementoAbaixo(state, action);\n      break;\n    case MOVER_ELEMENTO_ACIMA:\n      tempState = moveElementoAcima(state, action);\n      break;\n    case RENUMERAR_ELEMENTO:\n      tempState = renumeraElemento(state, action);\n      break;\n    case RESTAURAR_ELEMENTO:\n      tempState = restauraElemento(state, action);\n      break;\n    case SUPRIMIR_AGRUPADOR:\n      tempState = suprimeAgrupador(state, action);\n      break;\n    case SUPRIMIR_ELEMENTO:\n      tempState = suprimeElemento(state, action);\n      break;\n    case ABRIR_ARTICULACAO:\n      tempState = abreArticulacao(state, action);\n      break;\n    case REDO:\n      tempState = redo(state);\n      break;\n    case REMOVER_ELEMENTO:\n      tempState = removeElemento(state, action);\n      break;\n    case REMOVER_ELEMENTO_SEM_TEXTO:\n      tempState = removeElementoSemTexto(state, action);\n      break;\n    case SHIFT_TAB:\n    case TAB:\n      tempState = modificaTipoElementoWithTab(state, action);\n      break;\n    case UNDO:\n      tempState = undo(state);\n      break;\n    case VALIDAR_ELEMENTO:\n      tempState = validaElemento(state, action);\n      break;\n    case VALIDAR_ARTICULACAO:\n      tempState = validaArticulacao(state);\n      break;\n    case ADICIONAR_ALERTA:\n      tempState = adicionaAlerta(state, action);\n      break;\n    case REMOVER_ALERTA:\n      tempState = removeAlerta(state, action);\n      break;\n    case LIMPAR_ALERTAS:\n      tempState = limparAlertas(state);\n      break;\n    case ATIVAR_DESATIVAR_REVISAO:\n      tempState = ativaDesativaRevisao(state, action);\n      emRevisao = tempState.emRevisao;\n      numEventosPassadosAntesDaRevisao = tempState.past?.length || 0;\n      break;\n    case ATUALIZAR_USUARIO:\n      tempState = atualizaUsuario(state, action);\n      usuario = tempState.usuario;\n      break;\n    case ACEITAR_REVISAO:\n      tempState = aceitaRevisao(state, action);\n      break;\n    case REJEITAR_REVISAO:\n      tempState = rejeitaRevisao(state, action);\n      break;\n    case LIMPAR_REVISAO:\n      tempState = limpaRevisao(state);\n      break;\n    case ERROR_INICIALIZAR_EDICAO:\n      tempState = erroInicializaEdicao(state);\n      break;\n    default:\n      actionType = undefined;\n      tempState = state as State;\n      break;\n  }\n\n  if ([LIMPAR_REVISAO].includes(actionType)) {\n    //tempState.revisoes = [];\n    revisoes = [];\n  }\n\n  if (\n    ![ABRIR_ARTICULACAO, APLICAR_ALTERACOES_EMENDA, ACEITAR_REVISAO, REJEITAR_REVISAO].includes(actionType) &&\n    !isRedoDeRevisaoAceita(actionType, tempState) &&\n    !isRedoDeRevisaoRejeitada(actionType, tempState)\n  ) {\n    tempState.revisoes = revisoes;\n    tempState.numEventosPassadosAntesDaRevisao = emRevisao ? numEventosPassadosAntesDaRevisao : tempState.past?.length || 0;\n  }\n\n  tempState.emRevisao = emRevisao;\n  tempState.usuario = usuario;\n\n  tempState = atualizaRevisao(tempState, actionType);\n  return adicionaDiffMenuOpcoes(tempState);\n};\n\nconst isRedoDeRevisaoAceita = (actionType: string | undefined, state: State): boolean => {\n  return actionType === REDO && !!state.ui?.events.some(event => event.stateType === StateType.RevisaoAceita);\n};\n\nconst isRedoDeRevisaoRejeitada = (actionType: string | undefined, state: State): boolean => {\n  return actionType === REDO && !!state.ui?.events.some(event => event.stateType === StateType.RevisaoRejeitada);\n};\n","export const REDO = 'REDO';\n\nexport const redoAction = (): any => {\n  return {\n    type: REDO,\n  };\n};\n","import { combineReducers, createStore } from 'redux';\nimport { appReducer } from './app/appReducer';\nimport { elementoReducer } from './elemento/reducer/elementoReducer';\n\nconst combinedReducer = combineReducers({\n  appReducer: appReducer,\n  elementoReducer: elementoReducer,\n});\n\nexport const rootStore = createStore(combinedReducer, (window as any).__REDUX_DEVTOOLS_EXTENSION__ && (window as any).__REDUX_DEVTOOLS_EXTENSION__());\n","export const appReducer = (state = {}, action: any): any => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\n","import { getDispositivoCabecaAlteracao } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { AtualizarNotaAlteracao } from './../../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { State, StateEvent, StateType } from '../../state';\nimport { isAcaoPermitida } from '../../../model/lexml/acao/acaoUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\n\nexport const atualizaNotaAlteracao = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(dispositivo, AtualizarNotaAlteracao)) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel alterar esse dado do dispositivo' });\n  }\n\n  const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivo);\n\n  if (cabecaAlteracao === undefined) {\n    return retornaEstadoAtualComMensagem(state, { tipo: TipoMensagem.INFO, descricao: 'Nessa situao, no  possvel alterar esse dado do dispositivo' });\n  }\n\n  if (cabecaAlteracao.notaAlteracao === action.notaAlteracao) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n  cabecaAlteracao.notaAlteracao = action.notaAlteracao || undefined;\n  const alterado = createElemento(dispositivo);\n\n  const eventos: StateEvent[] = [];\n  eventos.push({\n    stateType: StateType.ElementoModificado,\n    elementos: [original, alterado],\n  });\n  eventos.push({\n    stateType: StateType.ElementoValidado,\n    elementos: [alterado],\n  });\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos),\n    present: eventos,\n    future: [],\n    ui: {\n      events: eventos,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { ElementoAction } from '.';\nimport { Referencia } from '../../elemento';\n\nexport const ATUALIZAR_ELEMENTO = 'ATUALIZAR_ELEMENTO';\n\nexport class AtualizarElemento implements ElementoAction {\n  descricao: string;\n  tipo?: string;\n\n  constructor() {\n    this.descricao = 'Atualizar dispositivo';\n  }\n\n  execute(atual: Referencia): any {\n    this.tipo = atual.tipo;\n    return {\n      type: ATUALIZAR_ELEMENTO,\n      atual,\n    };\n  }\n}\n\nexport const atualizarElementoAction = new AtualizarElemento();\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../../model/lexml/conteudo/conteudoUtil';\nimport { isDispositivoAlteracao } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoModificado } from '../../../model/lexml/situacao/dispositivoModificado';\nimport { State } from '../../state';\nimport { buildEventoAtualizacaoElemento, buildUpdateEvent } from '../evento/eventosUtil';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const atualizaElemento = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.texto === action.atual.conteudo.texto) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const original = createElemento(dispositivo);\n\n  dispositivo.texto = !isDispositivoAlteracao(dispositivo) ? action.atual.conteudo?.texto : normalizaSeForOmissis(action.atual.conteudo?.texto ?? '');\n\n  if (dispositivo.situacao?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    dispositivo.situacao = new DispositivoModificado(original);\n  }\n\n  const eventos = buildEventoAtualizacaoElemento(dispositivo);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, buildUpdateEvent(dispositivo, original)),\n    present: eventos.build(),\n    future: state.future,\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Dispositivo } from '../../../model/dispositivo/dispositivo';\nimport { isArtigo, isIncisoCaput, isOmissis } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { criaDispositivo } from '../../../model/lexml/dispositivo/dispositivoLexmlFactory';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport {\n  buscaProximoOmissis as buscaProximoOmissisSequencial,\n  getDispositivoAnterior,\n  getDispositivoPosterior,\n  getUltimoFilho,\n  hasFilhos,\n} from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../../../model/lexml/situacao/dispositivoAdicionado';\nimport { TipoDispositivo } from '../../../model/lexml/tipo/tipoDispositivo';\nimport { AutoFix } from '../../../model/lexml/util/mensagem';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildPast } from '../util/stateReducerUtil';\nimport { solicitaNorma } from './solicitaNorma';\n\nconst hasFix = (dispositivo: Dispositivo): boolean => {\n  return (dispositivo.mensagens?.filter(m => m.fix) ?? []).length > 0;\n};\n\nexport const autoFixElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined || !hasFix(atual)) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const eventos = new Eventos();\n\n  switch (action.mensagem?.descricao) {\n    case AutoFix.INFORMAR_NORMA: {\n      return solicitaNorma(state, action);\n    }\n    case AutoFix.OMISSIS_ANTES: {\n      const anterior = getDispositivoAnterior(atual);\n\n      const novo = criaDispositivo(atual.pai!, TipoDispositivo.omissis.tipo, anterior, anterior ? undefined : 0);\n      novo.situacao = new DispositivoAdicionado();\n      (novo.situacao as DispositivoAdicionado).existeNaNormaAlterada = true;\n      novo.mensagens = validaDispositivo(novo);\n      const elementoNovo = createElemento(novo, true);\n\n      atual.mensagens = validaDispositivo(atual);\n      const elementoAtual = createElemento(atual);\n      eventos.add(StateType.ElementoIncluido, [elementoNovo]);\n      eventos.add(StateType.ElementoValidado, [elementoAtual]);\n\n      let ref;\n\n      if (anterior) {\n        ref = isArtigo(anterior) && hasFilhos(anterior) ? getUltimoFilho(anterior) : anterior;\n      } else {\n        ref = isIncisoCaput(atual) ? atual.pai!.pai! : atual.pai!;\n      }\n\n      eventos.setReferencia(createElemento(ref));\n      break;\n    }\n    case AutoFix.OMISSIS_SEQUENCIAIS: {\n      const removido = createElemento(atual);\n      let proximo = getDispositivoPosterior(atual);\n\n      if (!proximo || !isOmissis(proximo)) {\n        proximo = buscaProximoOmissisSequencial(atual.pai!);\n      }\n\n      const pai = atual.pai!;\n      pai.removeFilho(atual);\n      pai.renumeraFilhos();\n\n      eventos.add(StateType.ElementoRemovido, [removido]);\n      proximo && eventos.add(StateType.ElementoValidado, [createElemento(proximo)]);\n\n      break;\n    }\n    default:\n      state.ui.events = [];\n      return state;\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\nimport { findRevisaoByElementoUuid } from '../util/revisaoUtil';\n\nexport const selecionaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n  if (atual === undefined) {\n    const revisao = findRevisaoByElementoUuid(state.revisoes, action.atual.uuid);\n    if (!revisao) {\n      state.ui.events = [];\n    } else {\n      const e = { ...revisao.elementoAntesRevisao!, acoesPossiveis: [] };\n      state.ui.events = [{ stateType: StateType.ElementoSelecionado, elementos: [e] }];\n    }\n    return state;\n  }\n\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoSelecionado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const solicitaDadosAssistente = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.InformarDadosAssistente,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { isAgrupadorNaoArticulacao } from './../../../model/dispositivo/tipo';\nimport { getDispositivoAndFilhosAsLista, getIrmaoPosteriorIndependenteDeTipo, getUltimoFilho } from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isArtigo } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos, listaDispositivosRenumerados } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida, montaEMostraMensagensErro } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAbaixo } from '../../../model/lexml/acao/moverElementoAbaixoAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos, getProximoAgrupadorAposArtigo } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { ajustaReferencia, resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { buildId, buildIdCaputEAlteracao } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { existeFilhoExcluidoDuranteRevisao } from '../util/revisaoUtil';\n\nexport const moveElementoAbaixo = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAbaixo)) {\n    return montaEMostraMensagensErro(atual, state);\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoDuranteRevisao(state, atual) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No  possvel mover dispositivo que possua dispositivo subordinado j removido ou alterado em modo de reviso.',\n    });\n  }\n\n  // Dispositivo cuja posio ser trocada com o atual\n  let proximo = getIrmaoPosteriorIndependenteDeTipo(atual);\n  if (!proximo && isArtigo(atual)) {\n    proximo = getProximoAgrupadorAposArtigo(atual);\n  }\n\n  if (!proximo) {\n    return state;\n  }\n\n  const movendoArtigoParaAgrupador = isAgrupadorNaoArticulacao(proximo);\n\n  const removidos = [...getElementos(atual, false, true)];\n  const renumerados = listaDispositivosRenumerados(atual);\n\n  const paiAntigo = atual.pai!;\n  const novoPai = movendoArtigoParaAgrupador ? proximo : proximo.pai!;\n  const pos = movendoArtigoParaAgrupador ? 0 : novoPai.indexOf(atual) + 1;\n\n  resetUuidTodaArvore(atual);\n\n  atual.pai!.removeFilho(atual);\n  novoPai.addFilhoOnPosition(atual, pos);\n\n  novoPai.renumeraFilhos();\n  if (paiAntigo !== novoPai) {\n    paiAntigo.renumeraFilhos();\n  }\n\n  getDispositivoAndFilhosAsLista(atual).forEach(d => {\n    d.id = buildId(d);\n    isArtigo(d) && buildIdCaputEAlteracao(d);\n  });\n  const dAnterior = atual.pai!.filhos[atual.pai!.indexOf(atual) - 1];\n  dAnterior &&\n    getDispositivoAndFilhosAsLista(dAnterior).forEach(d => {\n      d.id = buildId(d);\n      isArtigo(d) && buildIdCaputEAlteracao(d);\n    });\n\n  const referencia = movendoArtigoParaAgrupador ? proximo : getUltimoFilho(proximo);\n\n  const eventos = new Eventos();\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia!, atual)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(atual, []).map(v => {\n      v.mensagens = validaDispositivo(v);\n      return createElemento(v);\n    })\n  );\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento ser usado para marcar o elemento no editor\n  // Segundo elemento ser usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { ajustaReferencia } from './../util/reducerUtil';\nimport {\n  getDispositivoAnteriorNaSequenciaDeLeitura,\n  isDispositivoRaiz,\n  getIrmaoAnteriorIndependenteDeTipo,\n  isArticulacaoAlteracao,\n  irmaosMesmoTipo,\n  isDispositivoAlteracao,\n  getDispositivoAndFilhosAsLista,\n} from './../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isEmenta } from './../../../model/dispositivo/tipo';\nimport { isArtigo, isCaput } from '../../../model/dispositivo/tipo';\nimport { createElemento, getDispositivoFromElemento, getElementos } from '../../../model/elemento/elementoUtil';\nimport { isAcaoPermitida, montaEMostraMensagensErro } from '../../../model/lexml/acao/acaoUtil';\nimport { MoverElementoAcima } from '../../../model/lexml/acao/moverElementoAcimaAction';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { resetUuidTodaArvore } from '../util/reducerUtil';\nimport { buildPast, retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\nimport { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { buildId, buildIdCaputEAlteracao } from '../../../model/lexml/util/idUtil';\nimport { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { existeFilhoExcluidoDuranteRevisao } from '../util/revisaoUtil';\n\nexport const moveElementoAcima = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  if (!isAcaoPermitida(atual, MoverElementoAcima)) {\n    return montaEMostraMensagensErro(atual, state);\n  }\n\n  if (state.emRevisao && existeFilhoExcluidoDuranteRevisao(state, atual) && !action.isRejeitandoRevisao) {\n    return retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.ERROR,\n      descricao: 'No  possvel mover dispositivo que possua dispositivo subordinado j removido ou alterado em modo de reviso.',\n    });\n  }\n\n  // Dispositivo cuja posio ser trocada com o atual\n  const emAlteracao = isDispositivoAlteracao(atual);\n  const anterior = isArtigo(atual)\n    ? getDispositivoAnteriorNaSequenciaDeLeitura(atual, d => (isArtigo(d) || isAgrupador(d)) && isDispositivoAlteracao(d) === emAlteracao)\n    : getIrmaoAnteriorIndependenteDeTipo(atual);\n\n  if (anterior === undefined || isDispositivoRaiz(anterior) || isEmenta(anterior)) {\n    return state;\n  }\n\n  const removidos = getElementos(atual, false, true);\n  const renumerados = irmaosMesmoTipo(atual).filter(d => d !== atual && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL);\n\n  resetUuidTodaArvore(atual);\n\n  // Partindo do caso feliz (movendo entre irmos)\n  const paiAntigo = atual.pai!;\n  let novoPai = anterior.pai!;\n  let pos = novoPai.indexOf(anterior);\n  /*\n    Verifica casos de artigo pulando agrupador.\n\n    Agrupador\n      Agrupador\n    Agrupador\n      Art <movendo este para cima>\n    ---\n    Agrupador\n      Art\n    Agrupador\n      Art <movendo este para cima>\n  */\n  // Artigo pulando agrupador\n  if (isAgrupador(anterior)) {\n    const anteriorAoAgrupador = getDispositivoAnteriorNaSequenciaDeLeitura(anterior, d => (isArtigo(d) || isAgrupador(d)) && isDispositivoAlteracao(d) === emAlteracao)!;\n    if (isAgrupador(anteriorAoAgrupador)) {\n      novoPai = anteriorAoAgrupador;\n      pos = 0;\n    } else {\n      // Artigo\n      novoPai = anteriorAoAgrupador.pai!;\n      pos = novoPai.indexOf(anteriorAoAgrupador) + 1;\n    }\n  }\n\n  atual.pai!.removeFilho(atual);\n  novoPai.addFilhoOnPosition(atual, pos);\n  novoPai.renumeraFilhos();\n  if (paiAntigo !== novoPai) {\n    paiAntigo.renumeraFilhos();\n  }\n\n  getDispositivoAndFilhosAsLista(atual).forEach(d => {\n    d.id = buildId(d);\n    isArtigo(d) && buildIdCaputEAlteracao(d);\n  });\n  const dPosterior = atual.pai!.filhos[atual.pai!.indexOf(atual) + 1];\n  dPosterior &&\n    getDispositivoAndFilhosAsLista(dPosterior).forEach(d => {\n      d.id = buildId(d);\n      isArtigo(d) && buildIdCaputEAlteracao(d);\n    });\n\n  const referencia = getDispositivoAnteriorNaSequenciaDeLeitura(atual, d => !isCaput(d) && !isArticulacaoAlteracao(d))!;\n\n  const eventos = new Eventos();\n  eventos.add(StateType.ElementoRemovido, removidos);\n  eventos.setReferencia(createElemento(ajustaReferencia(referencia, atual)));\n  eventos.add(\n    StateType.ElementoIncluido,\n    buildListaDispositivos(atual, []).map(v => {\n      v.mensagens = validaDispositivo(v);\n      return createElemento(v);\n    })\n  );\n  eventos.add(\n    StateType.ElementoRenumerado,\n    renumerados.map(r => createElemento(r))\n  );\n\n  // Elementos em StateType.ElementoMarcado:\n  // Primeiro elemento ser usado para marcar o elemento no editor\n  // Segundo elemento ser usado para marcar o elemento em caso de \"undo\"\n  eventos.add(StateType.ElementoMarcado, [createElemento(atual), action.atual]);\n  eventos.add(StateType.ElementoSelecionado, [createElemento(atual)]);\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, eventos.build()),\n    present: eventos.build(),\n    future: [],\n    ui: {\n      events: eventos.build(),\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { DispositivoSuprimido } from '../../../model/lexml/situacao/dispositivoSuprimido';\nimport { State, StateType } from '../../state';\nimport { Eventos } from '../evento/eventos';\nimport { buildPast } from '../util/stateReducerUtil';\n\nexport const suprimeAgrupador = (state: any, action: any): State => {\n  const dispositivo = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (dispositivo === undefined || dispositivo.situacao?.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n    state.ui.events = [];\n    return state;\n  }\n\n  dispositivo.situacao = new DispositivoSuprimido(createElemento(dispositivo));\n  const eventos = new Eventos();\n\n  eventos.add(StateType.ElementoSuprimido, [createElemento(dispositivo)]);\n\n  const events = eventos.build();\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: buildPast(state, events),\n    present: events,\n    future: [],\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Referencia } from '../../elemento';\nexport const SHIFT_TAB = 'SHIFT_TAB';\n\nexport const shiftTabAction = (atual: Referencia): any => {\n  return {\n    type: SHIFT_TAB,\n    atual,\n  };\n};\n","import { Referencia } from '../../elemento';\nexport const TAB = 'TAB';\n\nexport const tabAction = (atual: Referencia): any => {\n  return {\n    type: TAB,\n    atual,\n  };\n};\n","import { getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { TAB } from '../../../model/lexml/acao/tabAction';\nimport { TransformarElemento, TRANSFORMAR_TIPO_ELEMENTO } from '../../../model/lexml/acao/transformarElementoAction';\nimport { State } from '../../state';\nimport { transformaTipoElemento } from './transformaTipoElemento';\n\nexport const modificaTipoElementoWithTab = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n  const acao = action.type === TAB ? atual.getAcaoPossivelTab(atual) : atual.getAcaoPossivelShiftTab(atual);\n\n  if (!acao) {\n    state.ui.events = [];\n    return state;\n  }\n\n  const newAction = {\n    type: TRANSFORMAR_TIPO_ELEMENTO,\n    subType: (acao as TransformarElemento).nomeAcao,\n    atual: action.atual,\n    novo: {\n      tipo: acao.tipo,\n    },\n  };\n\n  return transformaTipoElemento(state, newAction);\n};\n","export const UNDO = 'UNDO';\n\nexport const UndoAction = (): any => {\n  return {\n    type: UNDO,\n  };\n};\n","import { createElemento, getDispositivoFromElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { State, StateType } from '../../state';\n\nexport const validaElemento = (state: any, action: any): State => {\n  const atual = getDispositivoFromElemento(state.articulacao, action.atual, true);\n\n  if (atual === undefined) {\n    state.ui.events = [];\n    return state;\n  }\n\n  atual.mensagens = validaDispositivo(atual);\n  const elemento = createElemento(atual, true);\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: [elemento],\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Elemento } from '../../../model/elemento';\nimport { createElemento } from '../../../model/elemento/elementoUtil';\nimport { validaDispositivo } from '../../../model/lexml/dispositivo/dispositivoValidator';\nimport { buildListaDispositivos } from '../../../model/lexml/hierarquia/hierarquiaUtil';\nimport { State, StateType } from '../../state';\n\nexport const validaArticulacao = (state: any): State => {\n  const elementos: Elemento[] = [];\n  buildListaDispositivos(state.articulacao, []).forEach(d => {\n    const mensagens = validaDispositivo(d);\n\n    if (mensagens?.length > 0) {\n      d.mensagens = mensagens;\n      elementos.push(createElemento(d));\n    }\n  });\n\n  const events = [\n    {\n      stateType: StateType.ElementoValidado,\n      elementos: elementos,\n    },\n  ];\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events,\n      alertas: state.ui?.alertas,\n    },\n  };\n};\n","import { Alerta } from '../../../model/alerta/alerta';\nimport { State, StateType } from '../../state';\n\nexport const adicionarAlerta = (state: any, action: any): State => {\n  let alertas: Alerta[] = state.ui?.alertas || [];\n  if (state.ui?.alertas?.filter(({ id }) => id === action.alerta.id).length > 0) {\n    alertas = [...alertas];\n  } else {\n    alertas = [...alertas, action.alerta];\n  }\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: alertas,\n    },\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const removeAlerta = (state: any, action: any): State => {\n  const alertas = state.ui?.alertas?.filter(({ id }) => id !== action.id);\n\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: alertas,\n    },\n  };\n};\n","export const LIMPAR_ALERTAS = 'LIMPAR_ALERTAS';\n\nexport function limparAlertas(): any {\n  return {\n    type: 'LIMPAR_ALERTAS',\n  };\n}\n","import { State, StateType } from '../../state';\n\nexport const limparAlertas = (state: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: [],\n    },\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const atualizaUsuario = (state: any, action: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizaUsuario }],\n      message: state.ui?.mensagem,\n      alertas: state.ui?.alertas,\n    },\n    usuario: action.usuario,\n  };\n};\n","import { State, StateType } from '../../state';\n\nexport const limpaRevisao = (state: any): State => {\n  return {\n    articulacao: state.articulacao,\n    modo: state.modo,\n    past: state.past,\n    present: state.present,\n    future: state.future,\n    ui: {\n      events: [{ stateType: StateType.AtualizacaoAlertas }],\n      message: state.ui?.mensagem,\n      alertas: state.alertas,\n    },\n    revisoes: [],\n    emRevisao: false,\n    usuario: state.usuario,\n  };\n};\n","import { TipoMensagem } from '../../../model/lexml/util/mensagem';\nimport { State } from '../../state';\nimport { retornaEstadoAtualComMensagem } from '../util/stateReducerUtil';\n\nexport const erroInicializaEdicao = (state: any): State => {\n  return {\n    ...retornaEstadoAtualComMensagem(state, {\n      tipo: TipoMensagem.INFO,\n      descricao: 'Ocorreu algum erro ao abrir a emenda',\n    }),\n  };\n};\n","import { DescricaoSituacao } from '../../../model/dispositivo/situacao';\nimport { exibirDiferencaAction } from '../../../model/lexml/acao/exibirDiferencaAction';\nimport { RevisaoElemento } from '../../../model/revisao/revisao';\nimport { State } from '../../state';\n\nexport const adicionaDiffMenuOpcoes = (state: State): State => {\n  state.ui?.events.forEach(se =>\n    se.elementos?.filter(Boolean).forEach(e => {\n      if (\n        e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n        (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && e.revisao && e.revisao.descricao === 'Texto do dispositivo foi alterado') ||\n        (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && e.revisao && (e.revisao as RevisaoElemento).elementoAntesRevisao?.conteudo?.texto !== e.conteudo?.texto)\n      ) {\n        !e.acoesPossiveis!.includes(exibirDiferencaAction) && e.acoesPossiveis!.push(exibirDiferencaAction);\n      }\n    })\n  );\n\n  return state;\n};\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { connect } from 'pwa-helpers';\n\nimport { Elemento } from '../model/elemento';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { rootStore } from '../redux/store';\n\n@customElement('lexml-eta-articulacao')\nexport class ArticulacaoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Array }) elementos: Elemento[] = [];\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        lexml-eta-editor {\n          display: block;\n          height: 100%;\n        }\n\n        lexml-eta-editor:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n      <lexml-eta-editor .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-editor>\n    `;\n  }\n}\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this.ft=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this.ft;this.it=r;const s=[r];return s.raw=s,this.ft={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { Alerta } from '../../model/alerta/alerta';\nimport { rootStore } from '../../redux/store';\nimport { connect } from 'pwa-helpers';\n@customElement('lexml-emenda-comando')\nexport class ComandoEmendaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) emenda;\n  @property({ type: Array }) alertas: Alerta[] = [];\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  stateChanged(state: any): void {\n    this.alertas = state.elementoReducer.ui?.alertas || [];\n  }\n\n  buildTemplateComando(comandos: any[]): TemplateResult {\n    const res = comandos?.reduce((acumulador, comando) => acumulador + `<p> ${comando.cabecalho} </p>`, '');\n    return html`${res}`;\n  }\n\n  buildTemplateCitacao(citacao: any): string {\n    // eslint-disable-next-line prettier/prettier\n    const corpo = citacao\n      .replaceAll(/<p[^>]*?>((?:(?!<p).)*?<Omissis\\/>[^<]*?)<\\/p>/gm, '<div class=\"container-omissis\">$1</div>')\n      .replaceAll(\n        '<Omissis/>',\n        '<span>................................................................................................................................................................................................................................................................................................................................................</span>'\n      )\n      .replaceAll('<Rotulo>', '<b>')\n      .replaceAll('</Rotulo>', '</b> ')\n      .replaceAll('<Rotulo/>', '')\n      .replaceAll('<Alteracao>', '<div class=\"alteracao\">')\n      .replaceAll('</Alteracao>', '</div> ');\n\n    return corpo;\n  }\n\n  render(): TemplateResult {\n    const cabecalhoComum = this.emenda?.cabecalhoComum;\n    const comandos = this.emenda?.comandos;\n    return html`\n      <style>\n        :host {\n          --lexml-emenda-comando-height: 100%;\n          --lexml-emenda-comando-overflow: hidden;\n          --lexml-emenda-comando-border: 1px solid #ccc;\n        }\n        .lexml-emenda-comando {\n          display: block;\n          height: var(--lexml-emenda-comando-height);\n          overflow: var(--lexml-emenda-comando-overflow);\n          overflow-y: auto;\n          padding: 0px 10px;\n          font-size: 18px;\n          font-family: 'Times New Roman', Times, serif;\n          text-align: justify;\n        }\n        .lexml-emenda-comando:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n\n        .lexml-emenda-cabecalhoComando {\n          display: block;\n          margin-top: 1em;\n          text-indent: 3em;\n        }\n\n        .lexml-emenda-citacaoComando {\n          display: block;\n          margin-top: 1em;\n        }\n\n        .lexml-emenda-complementoComando {\n          margin-top: 1em;\n        }\n\n        .lexml-emenda-citacaoComando p {\n          /* text-align: justify; */\n          text-indent: 3em;\n          margin: 0;\n        }\n\n        .lexml-emenda-citacaoComando p.ementa {\n          text-indent: 0;\n          margin-left: 30%;\n        }\n\n        .lexml-emenda-citacaoComando p.agrupador {\n          text-indent: 0;\n          text-align: center;\n        }\n\n        .lexml-emenda-citacaoComando p.secao,\n        .lexml-emenda-citacaoComando p.subsecao {\n          font-weight: bold;\n        }\n\n        .lexml-emenda-citacaoComando div.alteracao {\n          margin-left: 4em;\n        }\n\n        .lexml-emenda-citacaoComando div.alteracao p {\n          text-indent: 2em;\n        }\n\n        .lexml-emenda-citacaoComando .container-omissis {\n          margin-left: 3em;\n          display: flex;\n          flex-direction: row;\n          align-items: flex-start;\n        }\n\n        .lexml-emenda-citacaoComando div.alteracao .container-omissis {\n          margin-left: 2em;\n        }\n\n        .lexml-emenda-citacaoComando .container-omissis b {\n          font-weight: bold;\n          padding-right: 4px;\n        }\n\n        .lexml-emenda-citacaoComando .container-omissis span {\n          display: -webkit-box;\n          -webkit-line-clamp: 1;\n          -webkit-box-orient: vertical;\n          overflow: hidden;\n          flex-grow: 1;\n          width: 50px;\n          white-space: nowrap;\n        }\n\n        .mensagem {\n          font-size: 0.8em;\n          font-weight: normal;\n          text-align: left;\n          border: 1px solid;\n          padding: 4px 10px;\n          margin: 10px 0;\n          display: inline-block;\n          border-radius: 2px;\n          font-family: var(--sl-font-sans);\n        }\n        .mensagem--warning {\n          color: #856404;\n          background-color: #fff3cd;\n          border-color: #ffeeba;\n        }\n        .mensagem--danger {\n          color: #721c24;\n          background-color: #f8d7da;\n          border-color: #f5c6cb;\n        }\n      </style>\n\n      <div class=\"lexml-emenda-comando\">\n        ${(this.alertas || [])\n          .filter(alerta => alerta.exibirComandoEmenda)\n          .map(alerta => html`<div class=\"lexml-emenda-complementoComando mensagem mensagem--danger\">${alerta.mensagem}</div>`)}\n        ${cabecalhoComum ? unsafeHTML(`<p class=\"lexml-emenda-cabecalhoComando\">${cabecalhoComum}</p>`) : ''}\n        ${comandos?.map(comando => {\n          return unsafeHTML(\n            '<div class=\"lexml-emenda-cabecalhoComando\">' +\n              (comando.rotulo ? `<strong>${comando.rotulo}</strong> ` : '') +\n              comando.cabecalho +\n              '</div>' +\n              '<div class=\"lexml-emenda-citacaoComando\">' +\n              this.buildTemplateCitacao(comando.citacao) +\n              '</div>' +\n              (comando.complemento ? '<div class=\"lexml-emenda-complementoComando mensagem mensagem--warning\">' + comando.complemento + '</div>' : '')\n          );\n        })}\n      </div>\n    `;\n  }\n}\n","export class Subscription {\n  private canceled?: boolean;\n\n  constructor(public callback: any, canceled?: boolean) {\n    this.canceled = canceled;\n  }\n\n  isCanceled(): boolean {\n    return this.canceled ?? false;\n  }\n\n  cancel(): void {\n    this.canceled = true;\n  }\n}\n\nexport class Observable<T = void> {\n  private subscriptions: Subscription[];\n\n  constructor() {\n    this.subscriptions = [];\n  }\n\n  subscribe(callback: any): Subscription {\n    const inscricao: Subscription = new Subscription(callback);\n    this.subscriptions.push(inscricao);\n    return inscricao;\n  }\n\n  notify(data: T): void {\n    this.subscriptions.forEach((subscription: Subscription) => {\n      if (!subscription.isCanceled()) {\n        setTimeout(() => {\n          subscription.callback(data);\n        }, 1);\n      }\n    });\n  }\n\n  clean(): void {\n    this.subscriptions = [];\n  }\n}\n","import { Observable } from '../../util/observable';\nimport { InfoTextoColado } from '../../redux/elemento/util/colarUtil';\nimport { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { SlDialog } from '@shoelace-style/shoelace';\nimport { adicionarElementoFromClipboardAction } from '../../model/lexml/acao/AdicionarElementosFromClipboardAction';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\n\nconst ID_DIALOGO_TIPO_COLAGEM = 'slDialogoTipoColagem';\nconst ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO = 'slDialogoModificarExistenteAdicionarNovo';\nconst ID_DIALOGO_MODIFICAR_DISPOSITIVOS_EXISTENTES = 'slDialogoModificarDispositivosExistentes';\nconst ID_DIALOGO_ADICIONAR_APOS_ATUAL = 'slDialogoAdicionarAposAtual';\nconst ID_DIALOGO_AVISO = 'slDialogoAviso';\n\nconst RODAPE_CONFIRMAR = 'RODAPE_CONFIRMAR';\nconst RODAPE_FECHAR = 'RODAPE_FECHAR';\n\nconst ANTES_DE_PROSSEGUIR = 'Antes de prosseguir';\nconst OPERACAO_NAO_PERMITIDA = 'Operao no permitida';\nconst DISPOSITIVO_JA_EXISTE = 'Ateno, dispositivo j existe no texto';\nconst IMPORTANTE = 'Importante!';\nconst DANGER = 'danger';\nconst INFO = 'primary';\nconst SVG_DANGER = `<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40041 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987\n10.8231 16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627 13.2\n16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736 13.8235\n12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235 10.8\n13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6 12.6235\n6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z\" fill=\"#CA3A31\"/>\n</svg>`;\nconst SVG_INFO = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\">\n<path d=\"M12 0C9.62663 0 7.30655 0.703788 5.33316 2.02236C3.35977 3.34094 1.8217 5.21508 0.913451 7.4078C0.00519941\n9.60051 -0.232441 12.0133 0.230582 14.3411C0.693605 16.6689 1.83649 18.807 3.51472 20.4853C5.19295 22.1635 7.33115\n23.3064 9.65892 23.7694C11.9867 24.2324 14.3995 23.9948 16.5922 23.0865C18.7849 22.1783 20.6591 20.6402 21.9776\n18.6668C23.2962 16.6934 24 14.3734 24 12C24 10.4241 23.6896 8.8637 23.0866 7.4078C22.4835 5.95189 21.5996 4.62902\n20.4853 3.51472C19.371 2.40042 18.0481 1.5165 16.5922 0.913445C15.1363 0.310389 13.5759 0 12 0V0ZM12 18C11.7627 18\n11.5307 17.9296 11.3333 17.7978C11.136 17.6659 10.9822 17.4785 10.8913 17.2592C10.8005 17.0399 10.7768 16.7987 10.8231\n16.5659C10.8694 16.3331 10.9837 16.1193 11.1515 15.9515C11.3193 15.7836 11.5331 15.6694 11.7659 15.6231C11.9987\n15.5768 12.24 15.6005 12.4592 15.6913C12.6785 15.7822 12.8659 15.936 12.9978 16.1333C13.1296 16.3307 13.2 16.5627\n13.2 16.8C13.2 17.1183 13.0736 17.4235 12.8485 17.6485C12.6235 17.8736 12.3183 18 12 18ZM13.2 13.2C13.2 13.5183 13.0736\n13.8235 12.8485 14.0485C12.6235 14.2736 12.3183 14.4 12 14.4C11.6817 14.4 11.3765 14.2736 11.1515 14.0485C10.9264 13.8235\n10.8 13.5183 10.8 13.2V7.2C10.8 6.88174 10.9264 6.57651 11.1515 6.35147C11.3765 6.12643 11.6817 6 12 6C12.3183 6\n12.6235 6.12643 12.8485 6.35147C13.0736 6.57651 13.2 6.88174 13.2 7.2V13.2Z\" fill=\"#3982C1\"/>\n</svg>`;\n\nexport const onChangeColarDialog: Observable<string> = new Observable<string>();\n\nexport class DialogColagem {\n  quill!: EtaQuill;\n  rootStore?: any;\n  infoTextoColado!: InfoTextoColado;\n  idDialog!: string;\n  labelDialog!: string;\n  tipoRodape!: string;\n  mensagens: string[] = [];\n  variante?: string;\n  range?: any;\n  nomeDispositivoSingular = '';\n  nomeDispositivoPlural = '';\n  isPrimeiroDialogoTipoColagem = true;\n  exibeDialogAviso = true;\n}\n\nconst montaDialogoTipoColagem = (dialogColagem: DialogColagem): void => {\n  const mensagens = ['Selecione abaixo o formato com o qual gostaria de colar seu texto.'];\n  dialogColagem.mensagens = mensagens;\n  dialogColagem.idDialog = ID_DIALOGO_TIPO_COLAGEM;\n  dialogColagem.labelDialog = ANTES_DE_PROSSEGUIR;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialagoNaoPermitidoPadrao = (dialogColagem: DialogColagem): void => {\n  dialogColagem.mensagens = dialogColagem.infoTextoColado.restricoes[0].mensagens;\n  dialogColagem.idDialog = 'slDialogoNaoPermitido';\n  dialogColagem.labelDialog = OPERACAO_NAO_PERMITIDA;\n  dialogColagem.tipoRodape = RODAPE_FECHAR;\n  dialogColagem.variante = DANGER;\n  dialogColagem.exibeDialogAviso = false;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoAdicionarAposAtual = (dialogColagem: DialogColagem): void => {\n  const mensagens = [\n    ...dialogColagem.infoTextoColado.restricoes[0].mensagens,\n    'Voc deseja adicionar ' +\n      getConcordanciaTodosTodas(dialogColagem.nomeDispositivoSingular) +\n      getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n      dialogColagem.nomeDispositivoPlural +\n      ' aps a posio atual?',\n  ];\n  dialogColagem.mensagens = mensagens;\n  dialogColagem.idDialog = ID_DIALOGO_ADICIONAR_APOS_ATUAL;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoModificarExistenteAdicionarNovo = (dialogColagem: DialogColagem): void => {\n  dialogColagem.idDialog = ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO;\n  dialogColagem.labelDialog = DISPOSITIVO_JA_EXISTE;\n  dialogColagem.tipoRodape = RODAPE_CONFIRMAR;\n  dialogColagem.variante = INFO;\n  const mensagens = [\n    'Voc gostaria de modificar ' +\n      getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n      dialogColagem.nomeDispositivoPlural +\n      ' existentes ou adicionar novos aps o atual?',\n  ];\n  dialogColagem.mensagens = mensagens;\n  montaDialogo(dialogColagem);\n};\n\nconst montaDialogoAviso = (dialogColagem: DialogColagem): void => {\n  if (dialogColagem.exibeDialogAviso) {\n    dialogColagem.idDialog = ID_DIALOGO_AVISO;\n    dialogColagem.labelDialog = IMPORTANTE;\n    dialogColagem.tipoRodape = RODAPE_FECHAR;\n    dialogColagem.variante = INFO;\n    const mensagens = ['Por favor, verifique se o texto e a estrutura de dispositivos colados est de acordo com o esperado. ', 'Podem ser necessrios ajustes.'];\n    dialogColagem.mensagens = mensagens;\n    montaDialogo(dialogColagem);\n  }\n};\n\n/**\n * Inicializa caixas de dilogo\n */\nexport const colarTextoArticuladoDialog = (quill: EtaQuill, rootStore: any, infoTextoColado: InfoTextoColado, range: any, isPrimeiroDialogoTipoColagem = true): void => {\n  const dialogColagem: DialogColagem = new DialogColagem();\n  dialogColagem.quill = quill;\n  dialogColagem.rootStore = rootStore;\n  dialogColagem.infoTextoColado = infoTextoColado;\n  dialogColagem.range = range;\n  dialogColagem.nomeDispositivoSingular = getNomeDispositivo(TipoSubstantivoEnum.SINGULAR, dialogColagem.infoTextoColado);\n  dialogColagem.nomeDispositivoPlural = getNomeDispositivo(TipoSubstantivoEnum.PLURAL, dialogColagem.infoTextoColado);\n  dialogColagem.isPrimeiroDialogoTipoColagem = isPrimeiroDialogoTipoColagem;\n\n  if (infoTextoColado.infoElementos.novos.length > 1 || infoTextoColado.infoElementos.existentes.length > 1) {\n    executarValidacaoRestricao(dialogColagem);\n    dialogColagem.isPrimeiroDialogoTipoColagem = false;\n    montaDialogoAviso(dialogColagem);\n  } else {\n    montaDialogoTipoColagem(dialogColagem);\n    dialogColagem.isPrimeiroDialogoTipoColagem = false;\n  }\n};\n\n/**\n * Mtodo utilizado para criar caixas de dilogo conforme restries encontradas\n *\n * @param dialogColagem\n */\nconst executarValidacaoRestricao = (dialogColagem: DialogColagem): void => {\n  if (dialogColagem.infoTextoColado.restricoes.length) {\n    const restricao = dialogColagem.infoTextoColado.restricoes[0];\n    dialogColagem.labelDialog = restricao.titulo || OPERACAO_NAO_PERMITIDA;\n    restricao.isPermitidoColarAdicionando ? montaDialogoAdicionarAposAtual(dialogColagem) : montaDialagoNaoPermitidoPadrao(dialogColagem);\n    dialogColagem.exibeDialogAviso = false;\n  } else if (dialogColagem.infoTextoColado.restricoes.length === 0 && dialogColagem.infoTextoColado.infoElementos.existentes.length === 0) {\n    adicionaElemento(dialogColagem, false);\n  } else {\n    dialogColagem.exibeDialogAviso = false;\n    montaDialogoModificarExistenteAdicionarNovo(dialogColagem);\n  }\n};\n\n/**\n * Constri dinamicamente html e aes de cada caixa de dilogo\n */\nconst montaDialogo = (dialogColagem: DialogColagem): void => {\n  Array.from(document.querySelectorAll('.dialogo-colagem')).forEach(el => document.body.removeChild(el));\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.classList.add('dialogo-colagem');\n  dialogElem.id = dialogColagem.idDialog;\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = dialogColagem.labelDialog as string;\n\n  const content = document.createRange().createContextualFragment(`\n    <style>\n      .rodape-confirmar {\n        float: right;\n      }\n      .tiposColagem {\n        font-weight: normal;\n      }\n      sl-dialog::part(title) {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n      }\n    </style>\n      <div class=\"tiposColagem\">\n        ${buildMessages(dialogColagem.mensagens)}\n        <br><br>\n        ${getRadioGroup(dialogColagem)}\n        <div class=\"rodape-confirmar\">\n        ${getTipoRodape(dialogColagem)}\n        <div/>\n      </div>\n  `);\n\n  buildButtons(content, dialogElem, dialogColagem);\n\n  buildRadioClick(content);\n\n  dialogColagem.quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n\n  setTimeout(() => addIconBeforeTitle(dialogColagem), 0);\n\n  if (dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    setTimeout(() => setFocusButtonConfirmar(), 0);\n  }\n};\n\nconst setFocusButtonConfirmar = (): void => {\n  document.getElementById('btnConfirmar')!.focus();\n};\n\nconst addIconBeforeTitle = (dialogColagem: DialogColagem): void => {\n  const elDialogTitle = document.querySelector('#' + dialogColagem.idDialog)!.shadowRoot!.querySelector('#title');\n  elDialogTitle?.insertAdjacentHTML('afterbegin', getIcon(dialogColagem));\n};\n\nconst getIcon = (dialogColagem: DialogColagem): string => {\n  if (dialogColagem.variante === DANGER) {\n    return SVG_DANGER;\n  }\n  return SVG_INFO;\n};\n\n/**\n * Define os botes da caixa de dilogo\n */\nconst buildButtons = (content: DocumentFragment, dialogElem: SlDialog, dialogColagem: DialogColagem): void => {\n  const botoes = content.querySelectorAll('sl-button');\n\n  if (botoes.length === 1) {\n    const fechar = botoes[0];\n    fechar.onclick = (): void => {\n      fecharDialog(dialogElem, dialogColagem);\n    };\n  } else if (botoes.length > 1) {\n    const confirma = botoes[0];\n    const fechar = botoes[1];\n\n    fechar.onclick = (): void => {\n      fecharDialog(dialogElem, dialogColagem);\n    };\n\n    confirma.onclick = (): void => {\n      executeByIdDialog(dialogColagem, dialogElem);\n    };\n  }\n};\n\nconst buildRadioClick = (content: DocumentFragment): void => {\n  const radio = content.querySelectorAll('sl-radio');\n\n  if (radio.length > 0) {\n    const opt1 = radio[0];\n    const opt2 = radio[1];\n\n    opt1.onclick = (): void => {\n      habilitaBotaoConfirmar();\n    };\n    opt2.onclick = (): void => {\n      habilitaBotaoConfirmar();\n    };\n  }\n};\n\nconst getValueFromRadioGroup = (idRadioGroup: string): string => {\n  return (document.getElementById(idRadioGroup)!.querySelector('sl-radio[checked]') as any).value;\n};\n\n/**\n * Realiza validao e constri ao de cada situao de cada caixa de dilogo de acordo com o texto colado\n */\nconst executeByIdDialog = (dialogColagem: DialogColagem, dialogElem: SlDialog): void => {\n  const { idDialog } = dialogColagem;\n  let valor = '';\n  let colarSubstituindo = false;\n\n  if (idDialog === ID_DIALOGO_ADICIONAR_APOS_ATUAL) {\n    valor = getValueFromRadioGroup('rdgSimNao') === '1' ? '1' : '';\n  } else if (idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    valor = getValueFromRadioGroup('rdgTipoColagem');\n    if (valor === '1') {\n      colarComoTextoSimples(dialogColagem);\n      valor = ''; // para no executar adicionarElementoFromClipboardAction\n    } else if (valor === '2' && dialogColagem.isPrimeiroDialogoTipoColagem) {\n      dialogColagem.isPrimeiroDialogoTipoColagem = false;\n      valor = '';\n      colarTextoArticuladoDialog(dialogColagem.quill, dialogColagem.rootStore, dialogColagem.infoTextoColado, dialogColagem.range, false);\n    } else if (valor === '2' && !dialogColagem.isPrimeiroDialogoTipoColagem) {\n      executarValidacaoRestricao(dialogColagem);\n      valor = '';\n    }\n  } else if (idDialog === ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO) {\n    valor = getValueFromRadioGroup('rdgModificarExistenteAdicionarNovo');\n    colarSubstituindo = valor === '1';\n  }\n\n  if (valor) {\n    adicionaElemento(dialogColagem, colarSubstituindo);\n  }\n\n  fecharDialog(dialogElem, dialogColagem);\n  montaDialogoAviso(dialogColagem);\n};\n\nconst adicionaElemento = (dialogColagem: DialogColagem, colarSubstituindo: boolean): void => {\n  const { infoTextoColado, rootStore } = dialogColagem;\n  rootStore.dispatch(\n    adicionarElementoFromClipboardAction.execute(\n      infoTextoColado.infoElementos.atual,\n      infoTextoColado.jsonix,\n      undefined,\n      infoTextoColado.infoElementos.atual.dispositivoAlteracao,\n      colarSubstituindo,\n      'depois'\n    )\n  );\n};\n\nconst colarComoTextoSimples = (dialogColagem: DialogColagem): void => {\n  const { quill, range, infoTextoColado } = dialogColagem;\n  quill.clipboard.dangerouslyPasteHTML(range.index, infoTextoColado.textoColadoOriginal);\n  onChangeColarDialog.notify('clipboard');\n};\n\nconst fecharDialog = (dialogElem: SlDialog, dialogColagem: DialogColagem): void => {\n  dialogElem?.hide();\n  if (document.body.contains(dialogElem)) {\n    document.body.removeChild(dialogElem);\n  }\n  dialogColagem.quill.focus();\n};\n\nconst buildMessages = (mensagens: string[]): string => mensagens.join('<br><br>');\n\nconst getRadioGroup = (dialogColagem: DialogColagem): string => {\n  if (dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM) {\n    return getRadioGroupTipoColagem();\n  } else if (dialogColagem.idDialog === ID_DIALOGO_MODIFICAR_EXISTENTE_ADICIONAR_NOVO) {\n    return getRadioGroupModificarExistenteAdicionarNovo(dialogColagem);\n  } else if (dialogColagem.idDialog === ID_DIALOGO_MODIFICAR_DISPOSITIVOS_EXISTENTES || dialogColagem.idDialog === ID_DIALOGO_ADICIONAR_APOS_ATUAL) {\n    return getRadioGroupSimNao();\n  }\n  return '';\n};\n\nconst getRadioGroupTipoColagem = (): string => {\n  return `\n  <sl-radio-group id=\"rdgTipoColagem\">\n    <sl-radio class=\"tipo-colagem\" id=\"colarSimples\" value=\"1\">Colar como texto simples</sl-radio>\n    <sl-radio class=\"tipo-colagem\" id=\"colarEstruturado\" value=\"2\" checked>Colar como dispositivo</sl-radio>\n  </sl-radio-group>\n  `;\n};\n\nconst getRadioGroupModificarExistenteAdicionarNovo = (dialogColagem: DialogColagem): string => {\n  return (\n    `\n  <sl-radio-group id=\"rdgModificarExistenteAdicionarNovo\">\n    <sl-radio id=\"modificarExistente\" value=\"1\">Modificar ` +\n    dialogColagem.nomeDispositivoPlural +\n    ` existentes</sl-radio>\n    <sl-radio id=\"adicionarNovo\" value=\"2\">Adicionar nov` +\n    getConcordanciaAsOs(dialogColagem.nomeDispositivoSingular) +\n    dialogColagem.nomeDispositivoPlural +\n    `</sl-radio>\n  </sl-radio-group>\n  `\n  );\n};\n\nconst getRadioGroupSimNao = (): string => {\n  return `\n  <sl-radio-group id=\"rdgSimNao\">\n    <sl-radio id=\"sim\" value=\"1\">Sim</sl-radio>\n    <sl-radio id=\"nao\" value=\"2\">No</sl-radio>\n  </sl-radio-group>\n  `;\n};\n\nconst getTipoRodape = (dialogColagem: DialogColagem): string => (dialogColagem.tipoRodape === RODAPE_CONFIRMAR ? getRodapeConfirmar(dialogColagem) : getRodapeFechar());\n\nconst getRodapeFechar = (): string => {\n  return `\n    <div class=\"rodape-confirmar\">\n      <br/>\n      <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n    </div>\n  `;\n};\n\nconst getRodapeConfirmar = (dialogColagem: DialogColagem): string => {\n  const disabled = dialogColagem.idDialog === ID_DIALOGO_TIPO_COLAGEM ? '' : 'disabled';\n  return `\n    <div class=\"rodape-confirmar\" id=\"rodapeConfirmar\">\n      <br/>\n      <sl-button id=\"btnConfirmar\" slot=\"footer\" variant=\"primary\" ${disabled}>Confirmar</sl-button>\n      <sl-button slot=\"footer\" variant=\"default\">Fechar</sl-button>\n    </div>\n  `;\n};\n\nconst habilitaBotaoConfirmar = (): void => {\n  (document.getElementById('btnConfirmar') as any).disabled = false;\n  setFocusButtonConfirmar();\n};\n\nenum TipoSubstantivoEnum {\n  PLURAL,\n  SINGULAR,\n}\n\n/**\n * Retorna o nome do dispositivo no singular ou plural\n */\nconst getNomeDispositivo = (tipoSubstantivo: TipoSubstantivoEnum, infoTextoColado: InfoTextoColado): string => {\n  if (infoTextoColado.infoElementos.tiposColados.includes('DispositivoAgrupadorGenerico')) {\n    return '';\n  }\n  const dispositivo = infoTextoColado.infoElementos.tiposColados[0].toLowerCase();\n  return tipoSubstantivo === TipoSubstantivoEnum.PLURAL ? TipoDispositivo[dispositivo].descricaoPlural!.toLowerCase() : TipoDispositivo[dispositivo].descricao!.toLowerCase();\n};\n\n// /**\n//  * Retorna a concordncia de incio de frase\n//  */\n// const getConcordanciaInicialMensagem = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'A ' : 'O ');\n\nconst isGeneroFeminino = (nomeDispositivo: string): boolean => ['parte', 'seo', 'subseo', 'alnea'].includes(nomeDispositivo);\n\n/**\n * retorna concordncia de meio de frase 'todos' e 'todas'\n */\nconst getConcordanciaTodosTodas = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'todas ' : 'todos ');\n\n/**\n * retorna concordncia de meio de frase 'as' e 'os'\n */\nconst getConcordanciaAsOs = (nomeDispositivo: string): string => (isGeneroFeminino(nomeDispositivo) ? 'as ' : 'os ');\n","import { Conteudo } from '../dispositivo/conteudo';\nimport { ElementoAction } from '../lexml/acao';\nimport { Mensagem } from '../lexml/util/mensagem';\nimport { Revisao } from '../revisao/revisao';\n\nexport class Referencia {\n  tipo?: string;\n  uuid?: number;\n  uuid2?: string;\n  lexmlId?: string;\n  conteudo?: Partial<Conteudo>;\n  descricaoSituacao?: string;\n  uuidAlteracao?: number;\n  uuid2Alteracao?: string;\n  existeNaNormaAlterada?: boolean;\n}\nexport class Elemento extends Referencia {\n  nivel = 0;\n  numero?: string;\n  rotulo = '';\n  agrupador = false;\n  editavel = true;\n  mensagens?: Mensagem[];\n  hierarquia?: {\n    pai?: Referencia;\n    posicao?: number;\n    numero?: string;\n  };\n  sendoEditado = false;\n  index = 0;\n  acoesPossiveis?: ElementoAction[];\n  norma?: string;\n  existeNaNormaAlterada?: boolean;\n  abreAspas?: boolean;\n  fechaAspas?: boolean;\n  notaAlteracao?: string;\n  dispositivoAlteracao?: boolean;\n  tipoOmissis?: string;\n  podeEditarNotaAlteracao?: boolean;\n  manterNoMesmoGrupoDeAspas?: boolean;\n  tiposAgrupadoresQuePodemSerInseridosAntes?: string[];\n  tiposAgrupadoresQuePodemSerInseridosDepois?: string[];\n  artigoDefinido?: string;\n  elementoAnteriorNaSequenciaDeLeitura?: Referencia;\n  revisao?: Revisao;\n  ultimoFilhoDireto?: Referencia;\n}\n","import { EtaContainerTable } from './eta-container-table';\n\nconst Block = Quill.import('blots/block');\n\nexport class EtaBlot extends Block {\n  [key: string]: any;\n  static blotName = 'EtaBlot';\n\n  get instanceBlotName(): string {\n    return EtaBlot.blotName;\n  }\n\n  get linha(): EtaContainerTable {\n    return this.parent.parent.parent;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get tagName(): string {\n    return this.domNode.tagName;\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML.replace('&nbsp;', '') : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  constructor(domNode: HTMLElement) {\n    super(domNode);\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { SlDropdown } from '@shoelace-style/shoelace';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotMenu extends EtaBlot {\n  // Site https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_dropdown_right\n  static blotName = 'EtaBlotMenu';\n  static tagName = 'sl-dropdown';\n  static className = 'lx-eta-dropdown';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenu.blotName;\n  }\n\n  static create(): any {\n    const node: SlDropdown = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenu.className);\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenu.create());\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { SlButton } from '@shoelace-style/shoelace';\n\nexport class EtaBlotMenuBotao extends EtaBlot {\n  static blotName = 'EtaBlotMenuBotao';\n  static tagName = 'sl-button';\n  static className = 'lx-eta-dropbtn';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuBotao.blotName;\n  }\n\n  static create(): any {\n    const node: SlButton = super.create();\n\n    node.setAttribute('variant', 'text');\n    node.setAttribute('size', 'small');\n    node.setAttribute('slot', 'trigger');\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuBotao.className);\n    node.innerHTML = '&vellip;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMenuBotao.create());\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaBlot } from './eta-blot';\nimport { SlMenu } from '@shoelace-style/shoelace';\n\nexport class EtaBlotMenuConteudo extends EtaBlot {\n  static blotName = 'EtaBlotMenuConteudo';\n  static tagName = 'sl-menu';\n  static className = 'lx-eta-dropdown-content';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuConteudo.blotName;\n  }\n\n  static create(alinhamentoMenu: AlinhamentoMenu): any {\n    const node: SlMenu = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? '' : ' lx-eta-dropdown-content-right';\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuConteudo.className + classeAdicional);\n    return node;\n  }\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaBlotMenuConteudo.create(alinhamentoMenu));\n  }\n}\n","import { SlMenuItem } from '@shoelace-style/shoelace';\nimport { ElementoAction } from '../../model/lexml/acao';\nimport { InformarDadosAssistenteAction } from '../../model/lexml/acao/informarDadosAssistenteAction';\nimport { informarNormaAction } from '../../model/lexml/acao/informarNormaAction';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMenuItem extends EtaBlot {\n  static blotName = 'EtaBlotMenuItem';\n  static tagName = 'sl-menu-item';\n  static className = 'lx-eta-dropdown-content-item';\n\n  get instanceBlotName(): string {\n    return EtaBlotMenuItem.blotName;\n  }\n\n  static create(acao: ElementoAction, callback: any): any {\n    const node: SlMenuItem = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotMenuItem.className);\n    node.innerHTML = (acao.descricao ?? '') + (acao.hotkey ? `<span slot=\"suffix\"> ${acao.hotkey} </span>` : '');\n\n    node.addEventListener('mousedown', () => {\n      if (acao.descricao === informarNormaAction.descricao || acao.descricao === InformarDadosAssistenteAction.descricao) {\n        const index = document.getSelection()?.focusOffset;\n        localStorage.setItem('indexCursor', JSON.stringify(index));\n      }\n\n      callback(acao);\n    });\n    return node;\n  }\n\n  constructor(acao: ElementoAction, callback: any) {\n    super(EtaBlotMenuItem.create(acao, callback));\n  }\n}\n","import { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { isRevisaoDeExclusao, isRevisaoPrincipal } from '../../redux/elemento/util/revisaoUtil';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotRotulo extends EtaBlot {\n  static blotName = 'EtaBlotRotulo';\n  static tagName = 'LABEL';\n\n  static formatoStyle = 'STYLE';\n\n  get instanceBlotName(): string {\n    return EtaBlotRotulo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRotulo.getClasseCSS(elemento));\n    node.setAttribute('data-rotulo', elemento.rotulo);\n\n    if (elemento.abreAspas) {\n      node.setAttribute('abre-aspas', 'true');\n    }\n\n    if (podeInformarNumeracao(elemento)) {\n      node.setAttribute('pode-informar-numeracao', 'true');\n    }\n\n    if (elemento.tipo) {\n      node.setAttribute('tipo-dispositivo', elemento.tipo);\n    }\n\n    node.innerHTML = EtaBlotRotulo.montarRotulo(elemento);\n    if (elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && elemento.dispositivoAlteracao) {\n      node.title = elemento.existeNaNormaAlterada ? 'Dispositivo existente na norma alterada' : 'Dispositivo a ser adicionado  norma';\n    }\n    // node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('rotulo', { bubbles: true, cancelable: true, detail: { elemento } }));\n    node.onclick = onclick(node, elemento);\n    return node;\n  }\n\n  get rotulo(): string {\n    return this.domNode.getAttribute('data-rotulo');\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRotulo.create(elemento));\n  }\n\n  format(name: string, value: any, abreAspas?: boolean): void {\n    if (name === EtaBlotRotulo.blotName) {\n      this.domNode.setAttribute('data-rotulo', (abreAspas ? '\\u201C' : '') + value);\n      if (abreAspas) {\n        this.domNode.setAttribute('abre-aspas', 'true');\n      }\n      this.domNode.innerHTML = value;\n    } else if (name === EtaBlotRotulo.formatoStyle) {\n      this.domNode.setAttribute('style', EtaBlotRotulo.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style = elemento.tipo === 'Articulacao' ? 'color: #373634; font-weight: 600; line-height: 0.42;' : 'color: #373634; font-weight: 600; line-height: 1.42;';\n\n    if (elemento.agrupador) {\n      style = `${style} display: block; font-size: 1rem; text-align: center;`;\n    } else {\n      style = `${style} float: left; margin-right: 10px;`;\n    }\n    return style;\n  }\n\n  public static getClasseCSS(elemento: Elemento): string {\n    const classeSituacao = {\n      [DescricaoSituacao.DISPOSITIVO_ADICIONADO]: 'dispositivo--adicionado',\n      [DescricaoSituacao.DISPOSITIVO_MODIFICADO]: 'dispositivo--modificado',\n      [DescricaoSituacao.DISPOSITIVO_SUPRIMIDO]: 'dispositivo--suprimido',\n    };\n\n    const isAdicionado = elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n    return (\n      'texto__rotulo' +\n      (elemento.agrupador ? ' texto__rotulo--agrupador' : ' texto__rotulo--padrao') +\n      (isAdicionado && elemento.dispositivoAlteracao ? ' rotulo' : '') +\n      (' texto__rotulo--' + elemento.tipo?.toLowerCase()) +\n      (' ' + (classeSituacao[elemento.descricaoSituacao ?? ''] ?? ''))\n    );\n  }\n\n  public setEstilo(elemento: Elemento): void {\n    this.domNode.setAttribute('class', `${EtaBlotRotulo.getClasseCSS(elemento)}`);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.setEstilo(elemento);\n\n    this.domNode.setAttribute('data-rotulo', elemento.rotulo);\n\n    if (elemento.abreAspas) {\n      this.domNode.setAttribute('abre-aspas', 'true');\n    } else {\n      this.domNode.removeAttribute('abre-aspas');\n    }\n\n    if (podeInformarNumeracao(elemento)) {\n      this.domNode.setAttribute('pode-informar-numeracao', 'true');\n    } else {\n      this.domNode.removeAttribute('pode-informar-numeracao');\n    }\n\n    this.domNode.onclick = onclick(this.domNode, elemento);\n    this.domNode.innerHTML = EtaBlotRotulo.montarRotulo(elemento);\n  }\n\n  private static montarRotulo(elemento: Elemento): string {\n    const descricaoTipo = TipoDispositivo[elemento.tipo!.toLowerCase()]?.descricao;\n    return elemento.revisao && EtaBlotRotulo.isRevisaoPrincipalDeExclusaoDeDispositivo(elemento) ? descricaoTipo ?? '' : elemento.rotulo;\n  }\n\n  private static isRevisaoPrincipalDeExclusaoDeDispositivo(elemento: Elemento): boolean {\n    const r = elemento.revisao as RevisaoElemento;\n    return isRevisaoPrincipal(r) && isRevisaoDeExclusao(r);\n  }\n}\n\nconst podeInformarNumeracao = (elemento: Elemento): boolean => {\n  return !!(\n    elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n    elemento.dispositivoAlteracao &&\n    (elemento.abreAspas || elemento.tipo === 'Artigo' || (elemento.hierarquia?.pai?.existeNaNormaAlterada ?? true))\n  );\n};\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (podeInformarNumeracao(elemento)) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('rotulo', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotAbreAspas extends EtaBlot {\n  static blotName = 'EtaBlotAbreAspas';\n  static tagName = 'abre-aspas';\n  static className = 'abre-aspas';\n\n  private elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaBlotAbreAspas.create(elemento));\n    this.elemento = elemento;\n  }\n\n  get instanceBlotName(): string {\n    return EtaBlotAbreAspas.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotAbreAspas.className);\n\n    EtaBlotAbreAspas.__atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.elemento = elemento;\n    EtaBlotAbreAspas.__atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static __atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    if (elemento.abreAspas) {\n      node.setAttribute('exibir', '');\n    } else {\n      node.removeAttribute('exibir');\n    }\n    node.innerHTML = EtaBlotAbreAspas.montarHTML(elemento);\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    return elemento.abreAspas ? '' : '';\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisaoRecusar extends EtaBlot {\n  static blotName = 'EtaBlotRevisaoRecusar';\n  static className = 'blot__revisao_recusar';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisaoRecusar.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisaoRecusar.className);\n    node.setAttribute('title', 'Recusar reviso');\n    EtaBlotRevisaoRecusar.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisaoRecusar.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisaoRecusar.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonRevisaoRecusar' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('rejeitar-revisao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisaoAceitar extends EtaBlot {\n  static blotName = 'EtaBlotRevisaoAceitar';\n  static className = 'blot__revisao_aceitar';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisaoAceitar.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisaoAceitar.className);\n    node.setAttribute('title', 'Aceitar reviso');\n    EtaBlotRevisaoAceitar.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisaoAceitar.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisaoAceitar.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonRevisaoAceitar' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('aceitar-revisao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nconst Container = Quill.import('blots/container');\n\nexport interface IContainerEta {\n  get instanceBlotName(): string;\n}\n\nexport abstract class EtaContainer extends Container implements IContainerEta {\n  abstract get instanceBlotName(): string;\n\n  constructor(node: any) {\n    super(node);\n  }\n\n  private get firstBlot(): EtaBlot | undefined {\n    return this.children.head;\n  }\n\n  protected findBlot(blotName: string): EtaBlot | undefined {\n    if (!this.firstBlot) {\n      return undefined;\n    }\n    return this.findBlotByBlotName(this.firstBlot, blotName);\n  }\n\n  protected findBlotByBlotName(node: any, blotName: string): any | undefined {\n    if (node?.instanceBlotName === blotName) {\n      return node;\n    }\n\n    // Verifica se o n atual  um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.findBlotByBlotName(node[key], blotName);\n\n          if (result?.instanceBlotName === blotName) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return undefined;\n  }\n\n  protected findBlotByClass<T>(node: any, clazz: { new (...args: any[]): T }): T | undefined {\n    // Verifica se o n atual  do tipo T\n    if (node instanceof clazz) {\n      return node;\n    }\n\n    // Verifica se o n atual  um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.findBlotByClass(node[key], clazz);\n\n          // Se um n do tipo T for encontrado, retorna o resultado\n          if (result instanceof clazz) {\n            return result;\n          }\n        }\n      }\n    }\n\n    // Caso nenhum n do tipo T seja encontrado, retorna undefined\n    return undefined;\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\nimport { getIniciais } from '../string-util';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotRevisao extends EtaBlot {\n  static blotName = 'EtaBlotRevisao';\n  static className = 'blot__revisao';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotRevisao.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotRevisao.className);\n    EtaBlotRevisao.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotRevisao.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotRevisao.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonInfoRevisao' + elemento.uuid);\n    node.setAttribute('title', EtaBlotRevisao.montarMensagem(elemento));\n\n    node.innerHTML = elemento.revisao!.usuario.sigla || getIniciais(elemento.revisao!.usuario.nome).charAt(0) || 'R';\n    // node.onclick =\n    //   isRevisaoDeModificacao(elemento.revisao!) || isRevisaoDeRestauracao(elemento.revisao!)\n    //     ? (): boolean => node.dispatchEvent(new CustomEvent('exibir-diferencas', { bubbles: true, cancelable: true, detail: { elemento } }))\n    //     : (): boolean => false;\n  }\n\n  static montarMensagem(elemento: Elemento): string {\n    const revisao = elemento.revisao!;\n    const pipe = ' | ';\n    return 'Ao: ' + revisao.descricao + pipe + 'Usurio: ' + revisao.usuario.nome + pipe + 'Data/Hora: ' + revisao.dataHora;\n  }\n}\n","import { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\n\nexport class EtaContainerRevisao extends EtaContainer {\n  static blotName = 'EtaContainerRevisao';\n  static tagName = 'DIV';\n  static className = 'container__revisao';\n\n  get instanceBlotName(): string {\n    return EtaContainerRevisao.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerRevisao.className);\n    EtaContainerRevisao.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerRevisao.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaContainerRevisao.atualizarAtributos(elemento, this.domNode);\n    this.atualizarBlots(elemento);\n  }\n\n  atualizarBlots(elemento: Elemento): void {\n    this.blotBotaoAceitarRevisao?.atualizarElemento(elemento);\n    this.blotBotaoRejeitarRevisao?.atualizarElemento(elemento);\n    this.blotInfoRevisao?.atualizarElemento(elemento);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', EtaContainerRevisao.className + elemento.uuid);\n  }\n\n  get blotBotaoAceitarRevisao(): EtaBlotRevisaoAceitar | undefined {\n    return this.findBlot(EtaBlotRevisaoAceitar.blotName) as EtaBlotRevisaoAceitar;\n  }\n\n  get blotBotaoRejeitarRevisao(): EtaBlotRevisaoRecusar | undefined {\n    return this.findBlot(EtaBlotRevisaoRecusar.blotName) as EtaBlotRevisaoRecusar;\n  }\n\n  get blotInfoRevisao(): EtaBlotRevisao | undefined {\n    return this.findBlot(EtaBlotRevisao.blotName) as EtaBlotRevisao;\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotQuebraLinha extends EtaBlot {\n  static blotName = 'EtaBlotQuebraLinha';\n  static tagName = 'BR';\n  // static className = 'espaco';\n\n  get instanceBlotName(): string {\n    return EtaBlotQuebraLinha.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    //node.setAttribute('contenteditable', 'false');\n    //node.innerHTML = '&nbsp;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotQuebraLinha.create());\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotTipoOmissis extends EtaBlot {\n  static blotName = 'EtaBlotTipoOmissis';\n  static tagName = 'blot-tipo-omissis';\n  static className = 'blot-tipo-omissis';\n\n  get instanceBlotName(): string {\n    return EtaBlotTipoOmissis.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotTipoOmissis.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.classList.add(EtaBlotTipoOmissis.className);\n    EtaBlotTipoOmissis._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarElemento(elemento: Elemento): void {\n    this.atualizarAtributos(elemento);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotTipoOmissis._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotTipoOmissis.getDescricaoTipoOmissis(elemento);\n    if (elemento.tipo === 'Omissis') {\n      node.classList.add('tipo-omissis');\n    } else {\n      node.classList.remove('tipo-omissis');\n    }\n  }\n\n  private static getDescricaoTipoOmissis(elemento: Elemento): string {\n    switch (elemento.tipoOmissis) {\n      case 'inciso-caput':\n      case 'inciso-paragrafo':\n        return ' Incisos omitidos ';\n      case 'paragrafo':\n        return ' Pargrafos omitidos ';\n      case 'alinea':\n        return ' Alneas omitidas ';\n      case 'item':\n        return ' Itens omitidos ';\n      default:\n        return '';\n    }\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { podeAdicionarAtributoDeExistencia } from '../../model/elemento/elementoUtil';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotExistencia extends EtaBlot {\n  static blotName = 'EtaBlotExistencia';\n  static tagName = 'blot-existencia';\n  static className = 'blot-existencia';\n\n  get instanceBlotName(): string {\n    return EtaBlotExistencia.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotExistencia.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('id', 'blot-existencia' + elemento.uuid);\n    node.classList.add(EtaBlotExistencia.className);\n    EtaBlotExistencia._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarElemento(elemento: Elemento): void {\n    this.atualizarAtributos(elemento);\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotExistencia._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotExistencia.montarHTML(elemento);\n    node.onclick = onclick(node, elemento);\n\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      node.classList.add('existencia');\n      node.title = elemento.existeNaNormaAlterada ? 'Dispositivo existente na norma alterada' : 'Dispositivo a ser adicionado  norma';\n    } else {\n      node.classList.remove('existencia');\n    }\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      return elemento.existeNaNormaAlterada ? 'Existente' : 'Novo';\n    } else {\n      return '';\n    }\n  }\n}\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (podeAdicionarAtributoDeExistencia(elemento)) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('toggle-existencia', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotFechaAspas extends EtaBlot {\n  static blotName = 'EtaBlotFechaAspas';\n  static tagName = 'fecha-aspas';\n  static className = 'fecha-aspas';\n\n  get instanceBlotName(): string {\n    return EtaBlotFechaAspas.blotName;\n  }\n\n  private elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaBlotFechaAspas.create(elemento));\n    this.elemento = elemento;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotFechaAspas.className);\n\n    EtaBlotFechaAspas.__atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.elemento = elemento;\n    EtaBlotFechaAspas.__atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static __atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    if (elemento.fechaAspas) {\n      node.setAttribute('exibir', '');\n    } else {\n      node.removeAttribute('exibir');\n    }\n    node.innerHTML = EtaBlotFechaAspas.montarHTML(elemento);\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    return elemento.fechaAspas ? ' ' : ' ';\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotNotaAlteracao extends EtaBlot {\n  static blotName = 'EtaBlotNotaAlteracao';\n  static tagName = 'nota-alteracao';\n  static className = 'nota-alteracao';\n\n  get instanceBlotName(): string {\n    return EtaBlotNotaAlteracao.blotName;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotNotaAlteracao.create(elemento));\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotNotaAlteracao.className);\n    EtaBlotNotaAlteracao._atualizarAtributos(elemento, node);\n\n    return node;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    EtaBlotNotaAlteracao._atualizarAtributos(elemento, this.domNode);\n  }\n\n  private static _atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.innerHTML = EtaBlotNotaAlteracao.montarHTML(elemento);\n    node.onclick = onclick(node, elemento);\n\n    if (elemento.notaAlteracao) {\n      node.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n      node.setAttribute('exibir', '');\n    } else {\n      node.removeAttribute('nota-alteracao');\n      node.removeAttribute('exibir');\n    }\n\n    if (elemento.podeEditarNotaAlteracao) {\n      node.classList.add('nota-alteracao-editavel');\n    } else {\n      node.classList.remove('nota-alteracao-editavel');\n    }\n  }\n\n  private static montarHTML(elemento: Elemento): string {\n    if (!elemento.dispositivoAlteracao) {\n      return '';\n    }\n    return elemento.notaAlteracao ? '(' + elemento.notaAlteracao + ')' : ' ';\n    // if (!elemento.notaAlteracao) {\n    //   return '';\n    // } else {\n    //   if (elemento.podeEditarNotaAlteracao) {\n    //     return ' <span class=\"nota-alteracao-editavel\">(' + elemento.notaAlteracao + ')</span>';\n    //   } else {\n    //     return ' (' + elemento.notaAlteracao + ')';\n    //   }\n    // }\n  }\n}\n\nconst onclick = (node: HTMLElement, elemento: Elemento): (() => boolean) => {\n  if (elemento.podeEditarNotaAlteracao) {\n    return (): boolean => node.dispatchEvent(new CustomEvent('nota-alteracao', { bubbles: true, cancelable: true, detail: { elemento } }));\n  } else {\n    return (): boolean => false;\n  }\n};\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotEspaco extends EtaBlot {\n  static blotName = 'EtaBlotEspaco';\n  static tagName = 'ESPACO';\n  static className = 'espaco';\n\n  get instanceBlotName(): string {\n    return EtaBlotEspaco.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.innerHTML = '&nbsp;';\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotEspaco.create());\n  }\n}\n","import { Mensagem, TipoMensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagem extends EtaBlot {\n  static blotName = 'EtaBlotMensagem';\n  static tagName = 'div';\n  static className = 'mensagem';\n\n  get instanceBlotName(): string {\n    return EtaBlotMensagem.blotName;\n  }\n\n  static create(mensagem: Mensagem): any {\n    const node: HTMLElement = super.create();\n    let classe = '';\n\n    if (mensagem.nomeEvento !== '') {\n      node.setAttribute('id', mensagem.nomeEvento!);\n    }\n\n    if (mensagem.tipo === TipoMensagem.INFO) {\n      classe = 'mensagem--info';\n    } else if (mensagem.tipo === TipoMensagem.WARNING) {\n      classe = 'mensagem--warning';\n    } else {\n      classe = 'mensagem--danger';\n    }\n\n    node.setAttribute('contenteditable', 'false');\n\n    node.classList.add(classe);\n    node.innerHTML = mensagem.descricao ? mensagem.descricao : '';\n    if (mensagem.fix) {\n      node.innerHTML += `. <span class=\"mensagem__fix\">Corrigir agora.</span>`;\n      node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('mensagem', { bubbles: true, cancelable: true, detail: { mensagem } }));\n    }\n\n    if (mensagem.nomeEvento && mensagem.nomeEvento !== '') {\n      node.innerHTML += `. <span class=\"mensagem__fix\">Saiba mais</span>`;\n      node.onclick = (): boolean => node.dispatchEvent(new CustomEvent(mensagem.nomeEvento!, { bubbles: true, cancelable: true, detail: { mensagem } }));\n    }\n    return node;\n  }\n\n  constructor(mensagem: Mensagem) {\n    super(EtaBlotMensagem.create(mensagem));\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTdDireito extends EtaContainer {\n  static blotName = 'EtaContainerTdDireito';\n  static tagName = 'DIV';\n  static className = 'container__menu';\n\n  alinhamentoMenu: AlinhamentoMenu;\n\n  get instanceBlotName(): string {\n    return EtaContainerTdDireito.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerTdDireito.className);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTdDireito.create());\n    this.alinhamentoMenu = alinhamentoMenu;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTdEsquerdo extends EtaContainer {\n  static blotName = 'EtaContainerTdEsquerdo';\n  static tagName = 'DIV';\n  static className = 'container__texto';\n  static classLevel = 'level';\n\n  get instanceBlotName(): string {\n    return EtaContainerTdEsquerdo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    // node.setAttribute('contenteditable', 'false');\n    // node.setAttribute('contenteditable', elemento.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTdEsquerdo.className + ' container__texto--nivel' + elemento.nivel);\n\n    const fator = Number(getComputedStyle(document.documentElement).getPropertyValue('--elemento-padding-factor'));\n    if (fator) {\n      const padding: number = (elemento.agrupador || elemento.tipo === 'Ementa' ? 0 : elemento.nivel) * fator + 5;\n      node.setAttribute('style', `padding-left: ${padding}px;`);\n    }\n    if (elemento.tipoOmissis) {\n      node.setAttribute('tipo-omissis', elemento.tipoOmissis);\n    }\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerTdEsquerdo.create(elemento));\n  }\n}\n","import { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTr extends EtaContainer {\n  static blotName = 'EtaContainerTr';\n  static tagName = 'DIV';\n  static className = 'container__linha';\n\n  get instanceBlotName(): string {\n    return EtaContainerTr.blotName;\n  }\n\n  static create(editavel: boolean, alinhamentoMenu: AlinhamentoMenu): any {\n    const node: HTMLElement = super.create();\n\n    const classeAdicional = alinhamentoMenu === AlinhamentoMenu.Esquerda ? ' container__linha--reverse' : '';\n\n    // node.setAttribute('contenteditable', editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTr.className + classeAdicional);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(editavel: boolean, alinhamentoMenu: AlinhamentoMenu) {\n    super(EtaContainerTr.create(editavel, alinhamentoMenu));\n  }\n}\n","import { EtaBlot } from './eta-blot';\nimport { Elemento } from '../../model/elemento';\n\nexport enum AlinhamentoMenu {\n  Esquerda,\n  Direita,\n}\n\nexport class EtaBlotOpcoesDiff extends EtaBlot {\n  static blotName = 'EtaBlotOpcoesDiff';\n  static className = 'blot__opcoes_diff';\n  static tagName = 'button';\n\n  get instanceBlotName(): string {\n    return EtaBlotOpcoesDiff.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    node.innerHTML = ' ';\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaBlotOpcoesDiff.className);\n    node.setAttribute('title', 'Exibir diferenas');\n    EtaBlotOpcoesDiff.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotOpcoesDiff.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaBlotOpcoesDiff.atualizarAtributos(elemento, this.domNode);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', 'buttonExibirDiferencas' + elemento.uuid);\n    node.onclick = (): boolean => node.dispatchEvent(new CustomEvent('exibir-diferencas', { bubbles: true, cancelable: true, detail: { elemento } }));\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaContainer } from './eta-container';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\n\nexport class EtaContainerOpcoes extends EtaContainer {\n  static blotName = 'EtaContainerOpcoes';\n  static tagName = 'DIV';\n  static className = 'container__opcoes';\n\n  get instanceBlotName(): string {\n    return EtaContainerOpcoes.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('class', EtaContainerOpcoes.className);\n    EtaContainerOpcoes.atualizarAtributos(elemento, node);\n    return node;\n  }\n\n  [key: string]: any;\n\n  constructor(elemento: Elemento) {\n    super(EtaContainerOpcoes.create(elemento));\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    EtaContainerOpcoes.atualizarAtributos(elemento, this.domNode);\n    this.atualizarBlots(elemento);\n  }\n\n  atualizarBlots(elemento: Elemento): void {\n    this.blotBotaoExibirDiferencas?.atualizarElemento(elemento);\n  }\n\n  static atualizarAtributos(elemento: Elemento, node: HTMLElement): void {\n    node.setAttribute('id', EtaContainerOpcoes.className + elemento.uuid);\n  }\n\n  get blotBotaoExibirDiferencas(): EtaBlotOpcoesDiff | undefined {\n    return this.findBlot(EtaBlotOpcoesDiff.blotName) as EtaBlotOpcoesDiff;\n  }\n}\n","import { EtaContainerRevisao } from './eta-container-revisao';\nimport { DescricaoSituacao } from './../../model/dispositivo/situacao';\nimport { EtaBlotQuebraLinha } from './eta-blot-quebra-linha';\nimport { EtaBlotTipoOmissis } from './eta-blot-tipo-omissis';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { Elemento } from '../../model/elemento';\nimport { Mensagem } from '../../model/lexml/util/mensagem';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { AlinhamentoMenu } from './eta-blot-menu';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { isRevisaoPrincipal } from '../../redux/elemento/util/revisaoUtil';\nimport { EtaContainerOpcoes } from './eta-container-opcoes';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\n\nexport class EtaQuillUtil {\n  static alinhamentoMenu = AlinhamentoMenu.Esquerda;\n\n  static criarContainerLinha(elemento: Elemento): EtaContainerTable {\n    const etaTable: EtaContainerTable = new EtaContainerTable(elemento);\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(elemento.editavel, this.alinhamentoMenu);\n    const etaTdTexto: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    const isDispositivoAlteracaoAdicionado = elemento.dispositivoAlteracao && elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n\n    if (elemento.abreAspas || isDispositivoAlteracaoAdicionado) {\n      new EtaBlotAbreAspas(elemento).insertInto(etaTdTexto);\n    }\n\n    new EtaBlotRotulo(elemento).insertInto(etaTdTexto);\n\n    if (isDispositivoAlteracaoAdicionado) {\n      new EtaBlotExistencia(elemento).insertInto(etaTdTexto);\n    }\n\n    if (elemento.tipo === 'Omissis') {\n      new EtaBlotTipoOmissis(elemento).insertInto(etaTdTexto);\n    }\n\n    if (elemento.agrupador) {\n      new EtaBlotQuebraLinha().insertInto(etaTdTexto);\n    }\n\n    new EtaBlotConteudo(elemento).insertInto(etaTdTexto);\n\n    // new EtaBlotFechaAspas(elemento).insertInto(etaTdTexto);\n    // new EtaBlotNotaAlteracao(elemento).insertInto(etaTdTexto);\n    if (elemento.fechaAspas !== undefined && elemento.fechaAspas) {\n      new EtaBlotFechaAspas(elemento).insertInto(etaTdTexto);\n      new EtaBlotNotaAlteracao(elemento).insertInto(etaTdTexto);\n    }\n\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n\n    if (\n      elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n      (elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && elemento.revisao && elemento.revisao.descricao === 'Texto do dispositivo foi alterado')\n    ) {\n      EtaQuillUtil.criarContainerOpcoes(elemento).insertInto(etaTrContainer);\n    }\n\n    if (elemento.revisao && isRevisaoPrincipal(elemento.revisao)) {\n      EtaQuillUtil.criarContainerRevisao(elemento).insertInto(etaTrContainer);\n    }\n\n    etaTdTexto.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    etaTrContainer.insertInto(etaTable);\n\n    return etaTable;\n  }\n\n  static criarContainerRevisao(elemento: Elemento): EtaContainerRevisao {\n    const etaContainerRevisao: EtaContainerRevisao = new EtaContainerRevisao(elemento);\n    new EtaBlotRevisaoAceitar(elemento).insertInto(etaContainerRevisao);\n    new EtaBlotRevisaoRecusar(elemento).insertInto(etaContainerRevisao);\n    new EtaBlotRevisao(elemento).insertInto(etaContainerRevisao);\n    return etaContainerRevisao;\n  }\n\n  static criarContainerOpcoes(elemento: Elemento): EtaContainerOpcoes {\n    const etaContainerOpcoes: EtaContainerOpcoes = new EtaContainerOpcoes(elemento);\n    new EtaBlotOpcoesDiff(elemento).insertInto(etaContainerOpcoes);\n    return etaContainerOpcoes;\n  }\n\n  static criarContainerMensagens(elemento: Elemento): EtaContainerTr {\n    const etaTrContainer: EtaContainerTr = new EtaContainerTr(false, this.alinhamentoMenu);\n    const etaTdMensagens: EtaContainerTdEsquerdo = new EtaContainerTdEsquerdo(elemento);\n    const etaTdEspaco: EtaContainerTdDireito = new EtaContainerTdDireito(this.alinhamentoMenu);\n\n    if (elemento.mensagens && elemento.mensagens.length > 0) {\n      elemento.mensagens.forEach((mensagem: Mensagem): void => {\n        if (!mensagem.nomeEvento || mensagem.nomeEvento === '') {\n          new EtaBlotMensagem(mensagem).insertInto(etaTdMensagens);\n        } else {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n          if (mensagem.nomeEvento && mensagem.nomeEvento !== '' && !avisoJaExiste) {\n            new EtaBlotMensagem(mensagem).insertInto(etaTdMensagens);\n          }\n        }\n      });\n    }\n    new EtaBlotEspaco().insertInto(etaTdEspaco);\n    etaTdMensagens.domNode.classList.add('container__texto--mensagem');\n    etaTdMensagens.insertInto(etaTrContainer);\n    etaTdEspaco.insertInto(etaTrContainer);\n\n    return etaTrContainer;\n  }\n\n  static montarSpanOmissisAsString(): string {\n    return '<span class=\"texto__omissis\">' + TEXTO_OMISSIS + '</span>';\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { EtaBlot } from './eta-blot';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { EtaQuillUtil } from './eta-quill-util';\n\nexport class EtaBlotConteudo extends EtaBlot {\n  static blotName = 'EtaBlotConteudo';\n  static tagName = 'P';\n  static className = 'texto__dispositivo';\n\n  get instanceBlotName(): string {\n    return EtaBlotConteudo.blotName;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n    const conteudo: string = normalizaSeForOmissis(elemento.conteudo?.texto ?? '').trim();\n\n    node.setAttribute('class', EtaBlotConteudo.getClasseCSS(elemento));\n    node.setAttribute('contenteditable', elemento?.editavel ? 'true' : 'false');\n    node.setAttribute('id', 'texto__dispositivo' + elemento.uuid);\n\n    if (elemento.notaAlteracao) {\n      node.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n    }\n\n    if (elemento.fechaAspas) {\n      node.setAttribute('fecha-aspas', 'true');\n    }\n\n    if (elemento.tipo === 'Omissis' || conteudo.indexOf(TEXTO_OMISSIS) >= 0) {\n      node.innerHTML = EtaQuillUtil.montarSpanOmissisAsString();\n    } else {\n      node.innerHTML = conteudo !== '' ? conteudo : '<br>';\n    }\n\n    return node;\n  }\n\n  private _htmlAnt: string;\n  set htmlAnt(htmlAnt: string) {\n    this._htmlAnt = htmlAnt;\n  }\n\n  get htmlAnt(): string {\n    return this._htmlAnt;\n  }\n\n  get alterado(): boolean {\n    return this._htmlAnt !== this.html;\n  }\n\n  constructor(elemento: Elemento) {\n    super(EtaBlotConteudo.create(elemento));\n    this._htmlAnt = '';\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public static getClasseCSS(elemento: Elemento): string {\n    return 'texto__dispositivo';\n  }\n\n  public atualizarAtributos(elemento: Elemento): void {\n    this.htmlAnt = this.html;\n    if (elemento.notaAlteracao) {\n      this.domNode.setAttribute('nota-alteracao', elemento.notaAlteracao || '');\n    } else {\n      this.domNode.removeAttribute('nota-alteracao');\n    }\n\n    if (elemento.fechaAspas) {\n      this.domNode.setAttribute('fecha-aspas', 'true');\n    } else {\n      this.domNode.removeAttribute('fecha-aspas');\n    }\n  }\n}\n","import { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { Elemento } from '../../model/elemento';\nimport { podeAdicionarAtributoDeExistencia } from '../../model/elemento/elementoUtil';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { EtaBlot } from './eta-blot';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotMenu } from './eta-blot-menu';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { EtaContainerRevisao } from './eta-container-revisao';\nimport { EtaContainer } from './eta-container';\n\nexport class EtaContainerTable extends EtaContainer {\n  static blotName = 'EtaContainerTable';\n  static tagName = 'DIV';\n  static className = 'container__elemento';\n\n  get instanceBlotName(): string {\n    return EtaContainerTable.blotName;\n  }\n\n  static criarId(uuid?: number): string {\n    return `lxEtaId${uuid ?? 0}`;\n  }\n\n  static create(elemento: Elemento): any {\n    const node: HTMLElement = super.create();\n\n    // node.setAttribute('contenteditable', 'false'); //elemento?.editavel ? 'true' : 'false');\n    node.setAttribute('class', EtaContainerTable.className + ' ' + EtaContainerTable.getClasseCSS(elemento));\n    node.setAttribute('id', EtaContainerTable.criarId(elemento.uuid));\n\n    EtaContainerTable.atualizarAtributoRevisao(elemento, node);\n    EtaContainerTable.atualizarAtributoExistenciaNormaAlterada(elemento, node);\n    EtaContainerTable.atualizarAtributoOmissis(elemento, node);\n\n    return node;\n  }\n\n  [key: string]: any;\n\n  protected findBlot(blotName: string): EtaBlot | undefined {\n    if (!this.blotRotulo) {\n      return undefined;\n    }\n    return this.findBlotRef(this.blotRotulo.next, blotName);\n  }\n\n  protected findBlotRef(blotRef: EtaBlot, blotName: string): EtaBlot | undefined {\n    if (!blotRef) {\n      return;\n    }\n    return blotRef.instanceBlotName === blotName ? blotRef : this.findBlotRef(blotRef.next, blotName);\n  }\n\n  private searchBlotRotuloNode(node: any): EtaBlotRotulo | undefined {\n    // Verifica se o n atual  do tipo BlotRotulo\n    if (node instanceof EtaBlotRotulo) {\n      return node;\n    }\n\n    // Verifica se o n atual  um objeto\n    if (typeof node === 'object' && node) {\n      // Percorre as propriedades do objeto\n      for (const key in node) {\n        if (['children', 'head', 'next'].includes(key)) {\n          // Chamada recursiva para cada propriedade do objeto\n          const result = this.searchBlotRotuloNode(node[key]);\n\n          // Se um n EtaBlotRotulo for encontrado, retorna o resultado\n          if (result instanceof EtaBlotRotulo) {\n            return result;\n          }\n        }\n      }\n    }\n\n    // Caso nenhum n EtaBlotRotulo seja encontrado, retorna undefined\n    return undefined;\n  }\n\n  get blotRotulo(): EtaBlotRotulo | undefined {\n    // const node = this.children.head?.children?.head.children.head || this.children.head.children.head.next.children.head;\n    // return node instanceof EtaBlotRotulo ? node : node?.next;\n    return this.searchBlotRotuloNode(this.children.head);\n  }\n\n  get blotExistencia(): EtaBlotExistencia {\n    return this.findBlot(EtaBlotExistencia.blotName) as EtaBlotExistencia;\n  }\n\n  get blotConteudo(): EtaBlotConteudo {\n    return this.findBlot(EtaBlotConteudo.blotName) as EtaBlotConteudo;\n  }\n\n  get blotAbreAspas(): EtaBlotAbreAspas {\n    const blot = this.blotRotulo?.prev;\n    return blot?.instanceBlotName === EtaBlotAbreAspas.blotName ? blot : undefined;\n  }\n\n  get blotFechaAspas(): EtaBlotFechaAspas {\n    return this.findBlot(EtaBlotFechaAspas.blotName) as EtaBlotFechaAspas;\n  }\n\n  get blotNotaAlteracao(): EtaBlotNotaAlteracao {\n    return this.findBlot(EtaBlotNotaAlteracao.blotName) as EtaBlotNotaAlteracao;\n  }\n\n  get containerRevisao(): EtaContainerRevisao | undefined {\n    return this.findBlotByBlotName(this.children, EtaContainerRevisao.blotName);\n  }\n\n  get containerDireito(): EtaContainerTdDireito {\n    return this.children.head.children.tail;\n  }\n\n  get blotInsideContainerDireito(): EtaBlot {\n    return this.containerDireito.children.head;\n  }\n\n  get tamanho(): number {\n    return this.length() - 1;\n  }\n\n  get id(): string {\n    return this.domNode.getAttribute('id') ?? '';\n  }\n\n  private _agrupador: boolean;\n  set agrupador(agrupador: boolean) {\n    this._agrupador = agrupador;\n  }\n\n  get agrupador(): boolean {\n    return this._agrupador;\n  }\n\n  private _editavel: boolean;\n  set editavel(editavel: boolean) {\n    this._editavel = editavel;\n    // this.blotConteudo.domNode.contentEditable = this._editavel;\n  }\n\n  get editavel(): boolean {\n    return this._editavel;\n  }\n\n  private _hierarquia: any;\n  set hierarquia(hierarquia: any) {\n    this._hierarquia = hierarquia;\n  }\n\n  get hierarquia(): any {\n    return this._hierarquia;\n  }\n\n  private _nivel: number;\n  set nivel(nivel: number) {\n    this._nivel = nivel;\n  }\n\n  get nivel(): number {\n    return this._nivel;\n  }\n\n  private _numero: string;\n  set numero(numero: string) {\n    this._numero = numero;\n  }\n\n  get numero(): string {\n    return this._numero;\n  }\n\n  private _tipo: string;\n  set tipo(tipo: string) {\n    this._tipo = tipo;\n  }\n\n  get tipo(): string {\n    return this._tipo;\n  }\n\n  private _descricaoSituacao: any;\n  set descricaoSituacao(situacao: any) {\n    this._descricaoSituacao = situacao;\n  }\n\n  get descricaoSituacao(): any {\n    return this._descricaoSituacao;\n  }\n\n  private _existeNaNormaAlterada: any;\n  set existeNaNormaAlterada(existeNaNormaAlterada: any) {\n    this._existeNaNormaAlterada = existeNaNormaAlterada;\n  }\n\n  get existeNaNormaAlterada(): any {\n    return this._existeNaNormaAlterada;\n  }\n\n  get uuid(): number {\n    return parseInt(this.id.substr(7), 0);\n  }\n\n  private _uuid2: string;\n  set uuid2(uuid2: string) {\n    this._uuid2 = uuid2;\n  }\n\n  get uuid2(): string {\n    return this._uuid2;\n  }\n\n  private _lexmlId: string;\n  set lexmlId(lexmlId: string) {\n    this._lexmlId = lexmlId;\n  }\n\n  get lexmlId(): string {\n    return this._lexmlId ?? '';\n  }\n\n  get html(): string {\n    return this.domNode.innerHTML !== '<br>' ? this.domNode.innerHTML : '';\n  }\n\n  set html(html: string) {\n    this.domNode.innerHTML = html;\n  }\n\n  private resetClasses(): void {\n    this.domNode.classList.remove('dispositivo--adicionado');\n    this.domNode.classList.remove('dispositivo--modificado');\n    this.domNode.classList.remove('dispositivo--suprimido');\n  }\n\n  // TODO Rever a forma atual de se atribuir estilos\n  setEstilo(elemento: Elemento): void {\n    let classeCSS = '';\n\n    this.resetClasses();\n\n    switch (elemento.descricaoSituacao) {\n      case DescricaoSituacao.DISPOSITIVO_ADICIONADO:\n        classeCSS = 'dispositivo--adicionado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_MODIFICADO:\n        classeCSS = 'dispositivo--modificado';\n        break;\n      case DescricaoSituacao.DISPOSITIVO_SUPRIMIDO:\n        classeCSS = 'dispositivo--suprimido';\n        break;\n    }\n\n    if (classeCSS) {\n      this.domNode.classList.add(classeCSS);\n    }\n\n    this.blotRotulo!.setEstilo(elemento);\n  }\n\n  static atualizarAtributoRevisao(elemento: Elemento, node: HTMLElement): void {\n    if (elemento.revisao) {\n      node.setAttribute('em-revisao', 'true');\n      if ((elemento.revisao as RevisaoElemento).stateType === 'ElementoRemovido') {\n        node.setAttribute('excluido', 'true');\n      } else {\n        node.removeAttribute('excluido');\n      }\n    } else {\n      node.removeAttribute('em-revisao');\n      node.removeAttribute('excluido');\n    }\n  }\n\n  static atualizarAtributoExistenciaNormaAlterada(elemento: Elemento, node: HTMLElement): void {\n    if (podeAdicionarAtributoDeExistencia(elemento)) {\n      node.setAttribute('existenanormaalterada', (!!elemento.existeNaNormaAlterada).toString());\n    } else {\n      node.removeAttribute('existenanormaalterada');\n    }\n  }\n\n  static atualizarAtributoOmissis(elemento: Elemento, node: HTMLElement): void {\n    const conteudo: string = normalizaSeForOmissis(elemento.conteudo?.texto ?? '').trim();\n    if (elemento.tipo === 'Omissis' || conteudo.indexOf(TEXTO_OMISSIS) >= 0) {\n      node.classList.add('container_elemento--omissis');\n    } else {\n      node.classList.remove('container_elemento--omissis');\n    }\n  }\n\n  atualizarAtributos(elemento: Elemento): void {\n    EtaContainerTable.atualizarAtributoRevisao(elemento, this.domNode);\n    EtaContainerTable.atualizarAtributoExistenciaNormaAlterada(elemento, this.domNode);\n    EtaContainerTable.atualizarAtributoOmissis(elemento, this.domNode);\n\n    this.blotAbreAspas?.atualizarAtributos(elemento);\n    this.blotRotulo?.atualizarAtributos(elemento);\n    this.blotExistencia?.atualizarAtributos(elemento);\n    this.blotConteudo.atualizarAtributos(elemento);\n    this.blotFechaAspas?.atualizarAtributos(elemento);\n    this.blotNotaAlteracao?.atualizarAtributos(elemento);\n  }\n\n  atualizarElemento(elemento: Elemento): void {\n    this.elemento = elemento;\n\n    this._lexmlId = elemento.lexmlId ?? '';\n    this._uuid2 = elemento.uuid2 ?? '';\n    this._editavel = elemento.editavel;\n    this._nivel = elemento.nivel;\n    this._numero = elemento.numero ?? '';\n    this._tipo = elemento.tipo ?? '';\n    this._agrupador = elemento.agrupador;\n    this._hierarquia = elemento.hierarquia;\n    this._descricaoSituacao = elemento.descricaoSituacao ? elemento.descricaoSituacao : undefined;\n    this._existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n\n    this.setEstilo(elemento);\n    this.atualizarAtributos(elemento);\n  }\n\n  elemento: Elemento;\n  constructor(elemento: Elemento) {\n    super(EtaContainerTable.create(elemento));\n    this.elemento = elemento;\n    this._lexmlId = elemento.lexmlId ?? '';\n    this._uuid2 = elemento.uuid2 ?? '';\n    this._editavel = elemento.editavel;\n    this._nivel = elemento.nivel;\n    this._numero = elemento.numero ?? '';\n    this._tipo = elemento.tipo ?? '';\n    this._agrupador = elemento.agrupador;\n    this._hierarquia = elemento.hierarquia;\n    this._descricaoSituacao = elemento.descricaoSituacao ? elemento.descricaoSituacao : undefined;\n    this._existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n  }\n\n  format(name: string, value: any): void {\n    if (name === EtaContainerTable.blotName) {\n      this.domNode.setAttribute('style', EtaContainerTable.criarAtributoStyle(value));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  ativarBorda(): void {\n    this.domNode.classList.add('container__elemento--ativo');\n  }\n\n  desativarBorda(): void {\n    this.domNode.classList.remove('container__elemento--ativo');\n    this.limparContainerDireito();\n  }\n\n  limparContainerDireito(): void {\n    if (this.blotInsideContainerDireito instanceof EtaBlotMenu) {\n      this.blotInsideContainerDireito.remove();\n      new EtaBlotEspaco().insertInto(this.containerDireito);\n    }\n  }\n\n  private static criarAtributoStyle(elemento: Elemento): string {\n    let style =\n      elemento.tipo === 'Articulacao'\n        ? `width: 100%; min-height: 1px; line-height: 0.42; margin: 1px`\n        : `width: 100%; min-height: 26px; border: 1px solid #ffffff; line-height: 1.42; margin: 0px 2px 0px 5px !important;`;\n\n    if (elemento.agrupador) {\n      style = `${style} text-align: center;`;\n    }\n\n    return style;\n  }\n  private static getClasseCSS(elemento: Elemento): string {\n    let classe = elemento.tipo === 'Articulacao' ? 'container__elemento--articulacao' : 'container__elemento--padrao';\n    classe = `${classe} elemento-tipo-${elemento.tipo?.toLowerCase()}`;\n\n    if (elemento.agrupador) {\n      classe = `${classe} agrupador`;\n    } else if (elemento.tipo === 'Ementa') {\n      classe = `${classe} ementa`;\n    } else {\n      classe = `${classe} h-artigo`;\n    }\n    if (elemento.dispositivoAlteracao) {\n      classe = `${classe} dispositivo-alteracao`;\n    }\n    return classe;\n  }\n\n  public isLinhaComMarcacaoDeExclusao(): boolean {\n    return this.domNode.hasAttribute('excluido');\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n// Baseado no tutorial \"Using Event Decorators with lit-element and Web Components\"\n//   https://coryrylan.com/blog/using-event-decorators-with-lit-element-and-web-components\n\nexport interface EventOptions {\n  bubbles?: boolean;\n  cancelable?: boolean;\n  composed?: boolean;\n}\n\nexport class EventEmitter<T> {\n  constructor(private target: HTMLElement, private eventName: string) {}\n\n  emit(value: T, options?: EventOptions): void {\n    this.target.dispatchEvent(new CustomEvent<T>(this.eventName, { detail: value, ...options }));\n  }\n}\n\nexport function event() {\n  return (protoOrDescriptor: any, name: string): any => {\n    const descriptor = {\n      get(this: HTMLElement): EventEmitter<unknown> {\n        return new EventEmitter(this, name !== undefined ? name : protoOrDescriptor.key);\n      },\n      enumerable: true,\n      configurable: true,\n    };\n\n    return name !== undefined ? Object.defineProperty(protoOrDescriptor, name, descriptor) : { kind: 'method', placement: 'prototype', key: protoOrDescriptor.key, descriptor };\n  };\n}\n\nexport function cancelarPropagacaoDoEvento(ev: MouseEvent | KeyboardEvent | ClipboardEvent): void {\n  ev.stopPropagation();\n  ev.preventDefault();\n}\n","import { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { cancelarPropagacaoDoEvento } from '../event-util';\nimport { Observable } from '../observable';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaQuill, TextoSelecionado } from './eta-quill';\n\nconst strCaracteresValidos = \"a-z0-9\\\\s'!@#$%&\\\\*\\\\(\\\\)_\\\\-+=`{}\\\\[\\\\]\\\\^~<,>.:;?/|\\\\\";\nexport const CaracteresValidos = new RegExp(`[${strCaracteresValidos}]`, 'i');\nexport const CaracteresNaoValidos = new RegExp(`[^${strCaracteresValidos}]`, 'gi');\n\nexport const Keyboard = Quill.import('modules/keyboard');\n\nexport class EtaKeyboard extends Keyboard {\n  operacaoTecladoInvalida: Observable<void> = new Observable<void>();\n  adicionaElementoTeclaEnter: Observable<RangeStatic> = new Observable<RangeStatic>();\n  removeElemento: Observable<void> = new Observable<void>();\n  removeElementoSemTexto: Observable<string> = new Observable<string>();\n  renumeraElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  transformaElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  moveElemento: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  onChange: Observable<string> = new Observable<string>();\n  toggleExistencia: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n  adicionaAgrupador: Observable<KeyboardEvent> = new Observable<KeyboardEvent>();\n\n  private altGraphPressionado = false;\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n  }\n\n  listen(): void {\n    this.quill.root.addEventListener('keyup', (ev: KeyboardEvent): void => {\n      // Trata atalhos de formatao (negrito, itlico, ...)\n      if (ev.ctrlKey && !ev.altKey && !ev.shiftKey && 'biBI'.includes(ev.key)) {\n        this.onHotKeyToolbar();\n        return;\n      }\n    });\n\n    this.quill.root.addEventListener('keypress', (ev: KeyboardEvent): void => {\n      this.bloqueiaAcentuacaoOmissis(ev);\n    });\n\n    this.quill.root.addEventListener('keydown', (ev: KeyboardEvent): void => {\n      this.altGraphPressionado = ev.altKey && ev.location === 2;\n      const elementoLinhaAtual = this.quill.linhaAtual?.elemento;\n      if (!(this.quill.cursorDeTextoEstaSobreLink() || (ev.key === 'Backspace' && this.quill.cursorDeTextoEstaSobreLink(-1))) && this.isTeclaQueAlteraTexto(ev)) {\n        this.onChange.notify('keyboard');\n      }\n\n      if (this.quill.cursorDeTextoEstaSobreLink() && this.quill.cursorDeTextoEstaSobreLink(-1) && !['Delete', 'Backspace'].includes(ev.key)) {\n        if ((!ev.ctrlKey && ev.key.length === 1) || (ev.ctrlKey && 'xvXV'.includes(ev.key)) || (ev.altKey && '0123456789'.includes(ev.key)) || ev.key === 'Enter') {\n          cancelarPropagacaoDoEvento(ev);\n          return;\n        }\n      } else if (this.verificaSelecaoComLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (\n        this.quill.linhaAtual.tipo === 'Omissis' &&\n        !['ArrowUp', 'ArrowDown'].includes(ev.key) &&\n        (this.isTeclaQueAlteraTexto(ev) || ev.key === 'Enter' || ev.altKey || ev.metaKey) &&\n        !ev.ctrlKey\n      ) {\n        if (ev.key === 'Enter') {\n          this.enterEmOmissis();\n        }\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (\n        this.quill.cursorDeTextoEstaSobreOmissis() &&\n        !['Delete', 'Backspace'].includes(ev.key) &&\n        (this.isTeclaQueAlteraTexto(ev) || ev.key === 'Enter' || ev.altKey) &&\n        !ev.ctrlKey\n      ) {\n        if (ev.key === 'Enter') {\n          this.enterEmOmissis();\n        }\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      } else if (elementoLinhaAtual?.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && this.isNotTeclasDeNavegacao(ev)) {\n        cancelarPropagacaoDoEvento(ev);\n      } else if (ev.ctrlKey) {\n        if (!ev.altKey && !ev.metaKey) {\n          if (['Delete', 'Backspace'].includes(ev.key)) {\n            cancelarPropagacaoDoEvento(ev);\n          } else if (ev.key === 'Home') {\n            this.onTeclaHome(ev);\n          } else if (ev.key === 'End') {\n            this.onTeclaEnd(ev);\n          } else if (ev.key.toLowerCase() === 'a' && !ev.shiftKey) {\n            this.onTeclaCtrlA(ev);\n          } else if (ev.key.toLowerCase() === 'd') {\n            this.onTeclaCtrlD(ev);\n          } else if (ev.key.toLowerCase() === 'z') {\n            this.onTeclaCtrlZ(ev);\n          } else if (ev.key.toLowerCase() === 'y') {\n            this.onTeclaCtrlY(ev);\n          } else if (ev.ctrlKey && ev.shiftKey && ev.key.toLowerCase() === 'a') {\n            this.onTeclaCtrlShiftA(ev);\n          } else if (ev.key === 'b' || ev.key === 'i' || ev.key === 'x' || ev.key === 'v') {\n            this.onValidarTecla(ev);\n          }\n        }\n        if (ev.altKey || ev.metaKey) {\n          if (['o'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyTransformacaoTipo(ev);\n          } else if (['n', ''].includes(ev.key.toLowerCase())) {\n            this.onHotKeyRenumeraDispositivo(ev);\n          } else if (['x', ''].includes(ev.key.toLowerCase())) {\n            this.onHotKeyToggleExistencia(ev);\n          } else if (['g'].includes(ev.key.toLowerCase())) {\n            this.onHotKeyAdicionaAgrupador(ev);\n          }\n          // Trata caracteres especiais da tecla Alt mo MacOS/Chrome\n          // para os atalhos a, l, n, o, p, t\n          if (['229', '172', '68', '248', '960', '8224'].includes(ev.key.charCodeAt(0).toString())) {\n            let keyFake = '';\n            switch (ev.key.charCodeAt(0).toString()) {\n              case '229':\n                keyFake = 'a';\n                break;\n              case '172':\n                keyFake = 'l';\n                break;\n              case '68':\n                keyFake = 'n';\n                break;\n              case '248':\n                keyFake = 'o';\n                break;\n              case '960':\n                keyFake = 'p';\n                break;\n              case '8224':\n                keyFake = 't';\n                break;\n            }\n            if (keyFake) {\n              // Cria um evento para manipular a tecla pressionada\n              const keyDownFake = new KeyboardEvent('keydown', {\n                key: keyFake,\n              });\n              this.onHotKeyTransformacaoTipo(keyDownFake);\n            }\n          }\n        }\n      } else if (ev.altKey) {\n        if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n          this.onHotKeyMover(ev);\n        }\n      } else if (ev.key === 'ArrowRight') {\n        this.onTeclaArrowRight(ev);\n      } else if (ev.key === 'ArrowLeft') {\n        this.onTeclaArrowLeft(ev);\n      } else if (ev.key === 'ArrowDown') {\n        this.onTeclaArrowDown(ev);\n      } else if (ev.key === 'ArrowUp') {\n        this.onTeclaArrowUp(ev);\n      } else if (ev.key === 'Enter') {\n        this.onTeclaEnter(ev);\n      } else if (ev.key === 'Escape') {\n        this.onTeclaEscape(ev);\n      } else if (ev.key === 'Delete') {\n        this.onTeclaDelete(ev);\n      } else if (ev.key === 'Backspace') {\n        this.onTeclaBackspace(ev);\n      } else if (ev.key === 'Tab') {\n        this.onTeclaTab(ev);\n      } else if (ev.key.length === 1 && CaracteresValidos.test(ev.key)) {\n        this.onValidarTecla(ev);\n      }\n    });\n\n    super.listen();\n  }\n\n  private isNotTeclasDeNavegacao(ev: KeyboardEvent): boolean {\n    return (\n      !ev.ctrlKey && ev.key !== 'ArrowUp' && ev.key !== 'ArrowDown' && ev.key !== 'ArrowRight' && ev.key !== 'ArrowLeft' && ev.key !== 'Home' && ev.key !== 'End' && !ev.shiftKey\n    );\n  }\n\n  private isTeclaComCaracterGrafico(ev: KeyboardEvent): boolean {\n    const teclasComCaracterGrafico = '123456=[]/';\n    const DOM_KEY_LOCATION_NUMPAD = 3; //\n    return ev.location !== DOM_KEY_LOCATION_NUMPAD && teclasComCaracterGrafico.includes(ev.key);\n  }\n\n  private bloqueiaAcentuacaoOmissis(ev: KeyboardEvent): void {\n    if (this.quill.cursorDeTextoEstaSobreOmissis()) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  private isTeclaQueAlteraTexto(ev: KeyboardEvent): boolean {\n    // Se teclas Ctrl, Alt ou Meta(?) estiverem pressionadas no faz nada\n    // Atalhos para recortar e colar sero tratados em outro lugar\n    if (ev.ctrlKey || ev.altKey || ev.metaKey) {\n      return false;\n    }\n\n    if (this.altGraphPressionado && !this.isTeclaComCaracterGrafico(ev)) {\n      return false;\n    }\n\n    // Verifica se  um caracter que altera texto\n    // OBS: 'Enter' no ser tratado porque essa tecla cria um novo elemento e esta ao ir disparar\n    //      um evento onchange por conta prpria.\n    if (['Delete', 'Backspace'].includes(ev.key) || ev.key.length === 1) {\n      return true;\n    }\n\n    return false;\n  }\n\n  verificarOperacaoTecladoPermitida(): boolean {\n    const textoSelec: TextoSelecionado = this.quill.textoSelecionado;\n    if (textoSelec.conteudo) {\n      if (textoSelec.quantidadeCR > 0) {\n        if (textoSelec.quantidadeCR === 1 && /\\n$/gi.test(textoSelec.conteudo)) {\n          const range = this.quill.getSelection();\n          range && this.quill.setSelection(range.index, range.length - 1, Quill.sources.API);\n          return true;\n        } else {\n          this.operacaoTecladoInvalida.notify();\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  private onTeclaArrowRight(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === blotCursor.tamanho) {\n      if (blotCursor.linha.next) {\n        this.quill.setIndex(this.quill.getIndex(blotCursor.linha.next.blotConteudo), Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowLeft(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === 0) {\n      if (blotCursor.linha.prev) {\n        const linhaAnt: EtaContainerTable = blotCursor.linha.prev;\n        const index: number = this.quill.getIndex(linhaAnt.blotConteudo) + linhaAnt.blotConteudo.tamanho;\n        this.quill.setIndex(index, Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowUp(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === 0 || this.quill.cursorDeTextoEstaSobreOmissis()) {\n      if (blotCursor.linha.prev) {\n        const linhaAnt: EtaContainerTable = blotCursor.linha.prev;\n        const index: number = this.quill.getIndex(linhaAnt.blotConteudo) + linhaAnt.blotConteudo.tamanho;\n        this.quill.setIndex(index, Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n\n    if (this.quill.isProcessandoMudancaLinha) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaArrowDown(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    const [blotCursor, offset] = this.quill.getLine(range.index);\n\n    if (offset === blotCursor.tamanho || this.quill.cursorDeTextoEstaSobreOmissis()) {\n      if (blotCursor.linha.next) {\n        this.quill.setIndex(this.quill.getIndex(blotCursor.linha.next.blotConteudo), Quill.sources.USER);\n      }\n      cancelarPropagacaoDoEvento(ev);\n    }\n\n    if (this.quill.isProcessandoMudancaLinha) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaEnter(ev: KeyboardEvent): void {\n    if (this.verificarOperacaoTecladoPermitida() && !this.quill.cursorDeTextoEstaSobreLink(-1)) {\n      const range: RangeStatic = this.quill.getSelection(true);\n      this.quill.setSelection(range.index, 0, Quill.sources.SILENT);\n      this.adicionaElementoTeclaEnter.notify(range);\n    }\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEscape(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    this.quill.setIndex(range.index, Quill.sources.SILENT);\n    this.quill.setSelection(this.quill.inicioConteudoAtual, 0, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaDelete(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.quill.linhaAtual.blotConteudo.html) {\n      cancelarPropagacaoDoEvento(ev);\n      this.removeElementoSemTexto.notify(ev.key);\n    } else if (!this.verificarOperacaoTecladoPermitida() || range.index === this.quill.fimConteudoAtual) {\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreLink()) {\n      let posicao = this.quill.getSelection().index;\n      if (!this.quill.cursorDeTextoEstaSobreLink(-1)) {\n        posicao += 1;\n      }\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreOmissis()) {\n      this.quill.linhaAtual.domNode.classList.remove('container_elemento--omissis');\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaBackspace(ev: KeyboardEvent): void {\n    const range: RangeStatic = this.quill.getSelection(true);\n    if (!this.quill.linhaAtual.blotConteudo.html) {\n      cancelarPropagacaoDoEvento(ev);\n      this.removeElementoSemTexto.notify(ev.key);\n    } else if (!this.verificarOperacaoTecladoPermitida() || (range.index === this.quill.inicioConteudoAtual && range.length === 0)) {\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreLink(-1)) {\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    } else if (this.quill.cursorDeTextoEstaSobreOmissis()) {\n      this.quill.linhaAtual.domNode.classList.remove('container_elemento--omissis');\n      const posicao = this.quill.getSelection().index;\n      this.apagaTextoNaPosicao(posicao);\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onValidarTecla(ev: KeyboardEvent): void {\n    if (!this.verificarOperacaoTecladoPermitida()) {\n      cancelarPropagacaoDoEvento(ev);\n    }\n  }\n\n  private onTeclaHome(ev: KeyboardEvent): void {\n    const articulacao = this.quill.getPrimeiraLinha();\n    const index: number = this.quill.getIndex(articulacao.next.blotConteudo);\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, 0);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaEnd(ev: KeyboardEvent): void {\n    const index: number = this.quill.getIndex(this.quill.getUltimaLinha().blotConteudo) + this.quill.getUltimaLinha().blotConteudo?.tamanho ?? 0;\n    this.quill.setIndex(index, Quill.sources.USER);\n    this.quill.scroll.domNode.scrollTo(0, this.quill.scroll.domNode.scrollHeight);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlD(ev: KeyboardEvent): void {\n    this.removeElemento.notify();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaTab(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlZ(ev: KeyboardEvent): void {\n    this.quill.undo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlY(ev: KeyboardEvent): void {\n    this.quill.redo();\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlA(ev: KeyboardEvent): void {\n    // const index: number = this.quill.getIndex(this.quill.scroll.children.head.blotConteudo);\n    // this.quill.setSelection(index, this.quill.getLength(), Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onTeclaCtrlShiftA(ev: KeyboardEvent): void {\n    this.quill.setSelection(this.quill.inicioConteudoAtual, this.quill.linhaAtual.blotConteudo.tamanho, Quill.sources.SILENT);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyRenumeraDispositivo(ev: KeyboardEvent): void {\n    this.renumeraElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyMover(ev: KeyboardEvent): void {\n    this.moveElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyTransformacaoTipo(ev: KeyboardEvent): void {\n    this.transformaElemento.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyToolbar(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.onChange.notify('toolbar(hotkey)');\n    }\n  }\n\n  private onHotKeyToggleExistencia(ev: KeyboardEvent): void {\n    this.toggleExistencia.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private onHotKeyAdicionaAgrupador(ev: KeyboardEvent): void {\n    this.adicionaAgrupador.notify(ev);\n    cancelarPropagacaoDoEvento(ev);\n  }\n\n  private verificaSelecaoComLink(): boolean {\n    const range = this.quill.getSelection();\n    if (!range) {\n      return false;\n    }\n\n    let iniciaOuTerminaComLink = false;\n    const ops = this.quill.getContents(range).ops;\n    if (ops[0]?.attributes?.link || ops[ops.length - 1]?.attributes?.link) {\n      iniciaOuTerminaComLink = true;\n    }\n    return iniciaOuTerminaComLink;\n  }\n\n  private apagaTextoNaPosicao(posicao: number): void {\n    const [leaf, offset] = this.quill.getLeaf(posicao);\n    this.quill.deleteText(posicao - offset, leaf.text.length);\n  }\n\n  private enterEmOmissis(): void {\n    if (this.verificarOperacaoTecladoPermitida()) {\n      const range: RangeStatic = this.quill.getSelection(true);\n      const inicioLinha = this.quill.getIndex(this.quill.linhaAtual.blotConteudo);\n      const tamanho = this.quill.linhaAtual.blotConteudo.length();\n\n      if (range.index !== inicioLinha) {\n        range.index = inicioLinha + tamanho - 1;\n      }\n      this.adicionaElementoTeclaEnter.notify(range);\n    }\n  }\n}\n","export const negrito = `\n<svg class=\"icon-negrito\" id=\"negrito\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M10.7,13.5c-0.1,0-0.4,0-0.6-0.2L6,7.8C6,7.7,5.8,7.7,5.8,7.8l0,5.1c0,0.3-0.2,0.5-0.5,0.5H3.7\n\tc-0.3,0-0.5-0.2-0.5-0.5l0-9.5c-0.1-0.2,0-0.4,0.1-0.5c0.1-0.2,0.4-0.4,0.7-0.4h1c0.1,0,0.4,0,0.6,0.2l4.4,5.9\n\tc0.1,0.1,0.2,0,0.2-0.1V3c0-0.3,0.2-0.5,0.5-0.5h1.5c0.3,0,0.5,0.2,0.5,0.5V13c0,0.3-0.2,0.5-0.5,0.5H10.7z\"/>\n</svg>\n`;\n\nexport const sublinhado = `\n<svg class=\"icon-sublinhado\" id=\"sublinhado\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M4.3,9.4c0-0.2,0.1-0.3,0.4-0.3h0.7c0.2,0,0.4,0.1,0.4,0.3C5.8,10.4,6.7,11,8.1,11c1.3,0,2.2-0.5,2.2-1.4\n\tc0-1.1-1.2-1.4-2.5-1.9C6.3,7.3,4.5,6.8,4.5,5c0-1.6,1.5-2.7,3.5-2.7c1.9,0,3.3,1.1,3.4,2.6c0,0.2-0.1,0.3-0.4,0.3h-0.7\n\tc-0.2,0-0.3-0.1-0.4-0.3C9.9,4.1,9.2,3.7,8.1,3.7C6.8,3.7,6,4.2,6,5c0,0.9,0.9,1.2,2.2,1.6c1.6,0.5,3.5,1.1,3.5,3.1\n\tc0,1.6-1.5,2.7-3.6,2.7C5.9,12.3,4.3,11.2,4.3,9.4z\"/>\n<rect x=\"3\" y=\"12.9\" class=\"ql-fill\" width=\"9.9\" height=\"0.8\"/>\n</svg>\n`;\n\nexport const controleDropdown =\n  '<svg viewBox=\"0 0 18 18\"> <polygon class=\"ql-stroke\" points=\"7 11 9 13 11 11 7 11\"></polygon> <polygon class=\"ql-stroke\" points=\"7 7 9 5 11 7 7 7\"></polygon> </svg>';\n\nexport const anexo =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"#000000\" width=\"15px\" height=\"15px\" viewBox=\"0 0 35 35\" data-name=\"Layer 2\" id=\"Layer_2\"><path d=\"M18,34.75A11.32,11.32,0,0,1,6.69,23.45V8A7.78,7.78,0,0,1,22.25,8V22.49a4.58,4.58,0,1,1-9.15,0V9.29a1.25,1.25,0,0,1,2.5,0v13.2a2.08,2.08,0,1,0,4.15,0V8A5.28,5.28,0,0,0,9.19,8V23.45A8.82,8.82,0,0,0,18,32.25c4.6,0,7.81-3.62,7.81-8.8V9.66a1.25,1.25,0,0,1,2.5,0V23.45C28.31,30,24,34.75,18,34.75Z\"/></svg>';\nexport const lixeiro =\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"15\" height=\"15\" viewBox=\"0 0 256 256\" xml:space=\"preserve\"><defs></defs><g style=\"stroke: none; stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;\" transform=\"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)\"><path d=\"M 76.777 2.881 H 57.333 V 2.412 C 57.333 1.08 56.253 0 54.921 0 H 35.079 c -1.332 0 -2.412 1.08 -2.412 2.412 v 0.469 H 13.223 c -1.332 0 -2.412 1.08 -2.412 2.412 v 9.526 c 0 1.332 1.08 2.412 2.412 2.412 h 63.554 c 1.332 0 2.412 -1.08 2.412 -2.412 V 5.293 C 79.189 3.961 78.109 2.881 76.777 2.881 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\"/><path d=\"M 73.153 22.119 H 16.847 c -1.332 0 -2.412 1.08 -2.412 2.412 v 63.057 c 0 1.332 1.08 2.412 2.412 2.412 h 56.306 c 1.332 0 2.412 -1.08 2.412 -2.412 V 24.531 C 75.565 23.199 74.485 22.119 73.153 22.119 z M 33.543 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z M 48.535 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z M 63.526 81.32 c 0 1.332 -1.08 2.412 -2.412 2.412 h -2.245 c -1.332 0 -2.412 -1.08 -2.412 -2.412 V 30.799 c 0 -1.332 1.08 -2.412 2.412 -2.412 h 2.245 c 1.332 0 2.412 1.08 2.412 2.412 V 81.32 z\" style=\"stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; fill: rgb(0,0,0); fill-rule: nonzero; opacity: 1;\" transform=\" matrix(1 0 0 1 0 0) \" stroke-linecap=\"round\"/></g></svg>';\n\nexport const iconeMarginBottom = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n<path class=\"ql-fill\" d=\"M 13.55 8.55 L 13.55 7.4 1.8 7.4 1.8 8.55 13.55 8.55 M 13.05 2.55 L 13.05 1.4 1.8 1.4 1.8 2.55 13.05 2.55 M 10.55 5.55 L 10.55 4.4 1.8 4.4 1.8 5.55 10.55 5.55 M 10.3 14.65 L 10.3 10.4 1.8 10.4 1.8 14.65 10.3 14.65 M 2.8 11.4 L 9.3 11.4 9.3 13.55 2.8 13.55 2.8 11.4 M 14.6 10.55 L 13.85 9.8 11.3 12.55 13.85 15.2 14.6 14.45 12.8 12.55 14.6 10.55 Z\"/>\n</svg>\n`;\n\nexport const iconeTextIndent = `\n<svg width=\"16\" height=\"16\" xmlns=\"http://www.w3.org/2000/svg\">\n<path class=\"ql-fill\" d=\"M 1.65,2.3 0.9,3.05 2.65,4.95 0.9,6.9 1.65,7.65 4.15,4.95 1.65,2.3 M 2.5,12.45 v 1.1 h 11.25 v -1.1 H 2.5 m 11.25,-2.1 V 9.25 H 2.5 v 1.1 h 11.25 m 0,-4.3 H 6.25 V 7.1 h 7.5 V 6.05 m 0,-3.25 h -7.5 v 1.1 h 7.5 z\"></path>\n</svg>\n`;\n\nexport const iconeNotaDeRodape = `\n<svg width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path class=\"ql-fill\" d=\"M 5,12.5 C 5,12.223858 5.2238576,12 5.5,12 h 2 c 0.6666664,0 0.6666664,1 0,1 h -2 C 5.2238576,13 5,12.776142 5,12.5 m 0,-2 C 5,10.223858 5.2238576,10 5.5,10 h 5 c 0.666666,0 0.666666,1 0,1 h -5 C 5.2238576,11 5,10.776142 5,10.5\" />\n  <path class=\"ql-fill\" d=\"M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2\" />\n  <path class=\"ql-fill\" d=\"M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1z\" />\n</svg>\n`;\n","const Inline = Quill.import('blots/inline');\n\nexport class EtaBlotConteudoOmissis extends Inline {\n  static blotName = 'EtaBlotConteudoOmissis';\n  static tagName = 'span';\n  static className = 'texto__omissis';\n\n  get instanceBlotName(): string {\n    return EtaBlotConteudoOmissis.blotName;\n  }\n\n  static formats(): boolean {\n    return true;\n  }\n}\n","import { EtaBlot } from './eta-blot';\n\nexport class EtaBlotMensagens extends EtaBlot {\n  static blotName = 'mensagens';\n  static tagName = 'MENSAGENS';\n\n  get instanceBlotName(): string {\n    return EtaBlotMensagens.blotName;\n  }\n\n  static create(): any {\n    const node: HTMLElement = super.create();\n\n    node.setAttribute('contenteditable', 'false');\n    node.setAttribute('style', 'font-size: 0.8em;');\n    return node;\n  }\n\n  constructor() {\n    super(EtaBlotMensagens.create());\n  }\n}\n","import { removeTagScript, removeTagStyle, removeTagHead } from './../string-util';\nimport { connect } from 'pwa-helpers';\nimport { rootStore } from '../../redux/store';\nimport { cancelarPropagacaoDoEvento } from '../event-util';\nimport { Observable } from '../observable';\nimport { removeAllHtmlTags } from '../string-util';\nimport { CaracteresNaoValidos } from './eta-keyboard';\nimport { EtaQuill } from './eta-quill';\nimport { ajustaHtmlParaColagem } from '../../redux/elemento/util/colarUtil';\n\nconst Clipboard = Quill.import('modules/clipboard');\n\nexport class EtaClipboard extends connect(rootStore)(Clipboard) {\n  onChange: Observable<string> = new Observable<string>();\n  onPasteTextoArticulado: Observable<any> = new Observable<any>();\n\n  constructor(quill: EtaQuill, options: any) {\n    super(quill, options);\n\n    this.quill.root.addEventListener('cut', (ev: ClipboardEvent) => {\n      if (this.quill.cursorDeTextoEstaSobreLink()) {\n        cancelarPropagacaoDoEvento(ev);\n        return;\n      }\n      const text = document.getSelection()?.toString();\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    });\n  }\n\n  convert(html?: any): DeltaStatic {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html;\n      return super.convert();\n    }\n\n    this.container.innerHTML = this.container.innerHTML\n      .replace(CaracteresNaoValidos, '')\n      .replace(/(<p\\s*)/gi, ' <p')\n      .replace(/(<br\\s*\\/>)/gi, ' ')\n      .replace(/<(?!strong)(?!\\/strong)(?!em)(?!\\/em)(?!sub)(?!\\/sub)(?!sup)(?!\\/sup)(.*?)>/gi, '')\n      .replace(/<([a-z]+) .*?=\".*?( *\\/?>)/gi, '<$1$2');\n\n    const delta: DeltaStatic = super.convert();\n    this.container.innerHTML = '';\n    return delta;\n  }\n\n  onPaste(e: ClipboardEvent): void {\n    if (this.quill.cursorDeTextoEstaSobreLink() || this.quill.cursorDeTextoEstaSobreOmissis()) {\n      cancelarPropagacaoDoEvento(e);\n      return;\n    }\n\n    e.preventDefault();\n\n    let html = e?.clipboardData?.getData('text/html');\n    const textoClipboard = e?.clipboardData?.getData('text/plain');\n\n    const range = this.quill.getSelection();\n    if (html) {\n      html = removeTagHead(removeTagScript(removeTagStyle(html)));\n    }\n\n    if (html && html.length > 0 && removeAllHtmlTags(html).length > 0) {\n      const text = ajustaHtmlParaColagem(html);\n\n      if (text !== undefined && this.hasRotulo(text)) {\n        this.adicionaDispositivos(textoClipboard!, text, range);\n        return;\n      }\n      this.quill.deleteText(range.index, range.length);\n      this.quill.clipboard.dangerouslyPasteHTML(range.index, text);\n      if (text) {\n        this.onChange.notify('clipboard');\n      }\n    } else if (textoClipboard) {\n      if (textoClipboard.trim() !== '' && this.hasRotulo(textoClipboard)) {\n        this.adicionaDispositivos(textoClipboard, textoClipboard, range);\n        return;\n      }\n      this.quill.clipboard.dangerouslyPasteHTML(range.index, textoClipboard);\n      if (textoClipboard) {\n        this.onChange.notify('clipboard');\n      }\n    }\n  }\n\n  private hasRotulo(texto: string): boolean {\n    const t = removeAllHtmlTags(texto)\n      ?.replace(/&nbsp;/g, ' ')\n      .replace(/[\"']/g, '')\n      .trim();\n\n    const regexRotulo = /^(parte|livro|t[i]tulo|cap[i]tulo|se[c][a]o|subse[c][a]o|art\\.|art||par[a]grafo [u]nico|[IVXMDC]{1,3}\\s*[-]{1}|[az]{1,2}\\)|\\d{1,3}[\\t .]+).*/i;\n\n    if (t && t.length > 0 && regexRotulo.test(t)) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private adicionaDispositivos(textoColadoOriginal: string, textoColadoAjustado: string, range: any): void {\n    this.onPasteTextoArticulado.notify({ textoColadoOriginal, textoColadoAjustado, range });\n  }\n}\n","export class EtaQuillBuffer extends Quill {\n  constructor(editorHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n  }\n\n  getConteudoHtml(html: string, offset: number, tamanho: number): string {\n    const blotBuffer: any = this.scroll.children.head;\n\n    this.setConteudo(this.converterHtmlParaDelta(html), Quill.sources.SILENT);\n    this.deleteText(offset + tamanho, blotBuffer.length() - tamanho - 1, Quill.sources.SILENT);\n\n    if (offset > 0) {\n      this.deleteText(0, offset, Quill.sources.SILENT);\n    }\n    return blotBuffer.domNode.innerHTML;\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.clipboard!.convert(html ?? '');\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    this.setConteudo(delta, Quill.sources.SILENT);\n    return this.scroll.children.head.domNode.innerHTML;\n  }\n\n  private setConteudo(delta: DeltaStatic, source?: Sources): void {\n    const blotBuffer: any = this.scroll.children.head;\n    let index = 0;\n\n    if (blotBuffer.length() > 1) {\n      this.deleteText(index, blotBuffer.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n}\n","import { negrito } from '../../../assets/icons/icons';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { Observable } from '../observable';\nimport { EtaBlot } from './eta-blot';\nimport { EtaBlotAbreAspas } from './eta-blot-abre-aspas';\nimport { EtaBlotConteudo } from './eta-blot-conteudo';\nimport { EtaBlotConteudoOmissis } from './eta-blot-conteudo-omissis';\nimport { EtaBlotEspaco } from './eta-blot-espaco';\nimport { EtaBlotExistencia } from './eta-blot-existencia';\nimport { EtaBlotFechaAspas } from './eta-blot-fecha-aspas';\nimport { EtaBlotMensagem } from './eta-blot-mensagem';\nimport { EtaBlotMensagens } from './eta-blot-mensagens';\nimport { EtaBlotMenu } from './eta-blot-menu';\nimport { EtaBlotMenuBotao } from './eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from './eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from './eta-blot-menu-item';\nimport { EtaBlotNotaAlteracao } from './eta-blot-nota-alteracao';\nimport { EtaBlotOpcoesDiff } from './eta-blot-opcoes-diff';\nimport { EtaBlotRevisao } from './eta-blot-revisao';\nimport { EtaBlotRevisaoAceitar } from './eta-blot-revisao-aceitar';\nimport { EtaBlotRevisaoRecusar } from './eta-blot-revisao-recusar';\nimport { EtaBlotRotulo } from './eta-blot-rotulo';\nimport { EtaBlotTipoOmissis } from './eta-blot-tipo-omissis';\nimport { EtaClipboard } from './eta-clipboard';\nimport { EtaContainerOpcoes } from './eta-container-opcoes';\nimport { EtaContainerRevisao } from './eta-container-revisao';\nimport { EtaContainerTable } from './eta-container-table';\nimport { EtaContainerTdDireito } from './eta-container-td-direito';\nimport { EtaContainerTdEsquerdo } from './eta-container-td-esquerdo';\nimport { EtaContainerTr } from './eta-container-tr';\nimport { EtaKeyboard } from './eta-keyboard';\nimport { EtaQuillBuffer } from './eta-quill-buffer';\n\nexport interface TextoSelecionado {\n  conteudo: string;\n  quantidadeCR: number;\n}\n\nexport class EtaQuill extends Quill {\n  static readonly UNDO: string = 'undo';\n  static readonly REDO: string = 'redo';\n\n  private _mudouDeLinha?: boolean;\n  get mudouDeLinha(): boolean {\n    return this._mudouDeLinha ?? false;\n  }\n\n  private _linhaAnterior?: EtaContainerTable;\n  get linhaAnterior(): EtaContainerTable {\n    return this._linhaAnterior as EtaContainerTable;\n  }\n\n  private _linhaAtual?: EtaContainerTable;\n  get linhaAtual(): EtaContainerTable {\n    return this._linhaAtual as EtaContainerTable;\n  }\n\n  get inicioConteudoAtual(): number {\n    return this.linhaAtual.blotConteudo ? this.getIndex(this.linhaAtual.blotConteudo) : 0;\n  }\n\n  get fimConteudoAtual(): number {\n    return this.inicioConteudoAtual + this.linhaAtual.blotConteudo.tamanho;\n  }\n\n  get textoSelecionado(): TextoSelecionado {\n    const range = this.getSelection() ?? { index: 0, length: 0 };\n    const texto: string = this.getText().substr(range.index, range.length);\n    return {\n      conteudo: texto,\n      quantidadeCR: texto.match(/(\\n)/gi)?.length ?? 0,\n    };\n  }\n\n  private _undoEstruturaVazio = true;\n  get isUndoEstruturaVazio(): boolean {\n    return this._undoEstruturaVazio;\n  }\n\n  set undoEstruturaVazio(undoVazio: boolean) {\n    this._undoEstruturaVazio = undoVazio;\n  }\n\n  private _redoEstruturaVazio = true;\n  get isRedoEstruturaVazio(): boolean {\n    return this._redoEstruturaVazio;\n  }\n\n  set redoEstruturaVazio(redoVazio: boolean) {\n    this._redoEstruturaVazio = redoVazio;\n  }\n\n  // Utilizado no modulo keyboard para anular eventos subrepostos durante o\n  // processamento da mudana de elemento atual. Isso acontece quando o usurio\n  // aperta as teclas que provocam a mudana de elemento muito rpido\n  // (ArrowDown e ArrowUp).\n  private _processandoMudancaLinha = false;\n  get isProcessandoMudancaLinha(): boolean {\n    return this._processandoMudancaLinha;\n  }\n\n  set processandoMudancaLinha(processando: boolean) {\n    this._processandoMudancaLinha = processando;\n  }\n\n  undoRedoEstrutura: Observable<string> = new Observable<string>();\n  elementoSelecionado: Observable<number> = new Observable<number>();\n\n  private buffer: EtaQuillBuffer;\n\n  static configurar(): void {\n    const Parchment: any = EtaQuill.import('parchment');\n    const id = new Parchment.Attributor.Attribute('id', 'id', { scope: Parchment.Scope.BLOCK });\n    const paddingLeft = new Parchment.Attributor.Style('paddingLeft', 'padding-left', { scope: Parchment.Scope.BLOCK });\n    const border = new Parchment.Attributor.Style('border', 'border', { scope: Parchment.Scope.BLOCK });\n    const borderColor = new Parchment.Attributor.Style('borderColor', 'border-color', { scope: Parchment.Scope.BLOCK });\n    const display = new Parchment.Attributor.Style('display', 'display', { scope: Parchment.Scope.BLOCK });\n    const ariaLabel = new Parchment.Attributor.Style('aria-label', 'aria-label', { scope: Parchment.Scope.BLOCK });\n    const DataRotulo = new Parchment.Attributor.Attribute('dataRotulo', 'data-rotulo', { scope: Parchment.Scope.BLOCK });\n\n    const icons = Quill.import('ui/icons');\n    icons['bold'] = negrito;\n\n    // set Quill to use <b> and <i>, not <strong> and <em>\n\n    const bold = Quill.import('formats/bold');\n    bold.tagName = 'b'; // Quill uses <strong> by default\n    Quill.register(bold, true);\n\n    const italic = Quill.import('formats/italic');\n    italic.tagName = 'i'; // Quill uses <em> by default\n    Quill.register(italic, true);\n\n    EtaQuill.register('modules/clipboard', EtaClipboard, true);\n    EtaQuill.register('modules/keyboard', EtaKeyboard, true);\n    EtaQuill.register(EtaBlotConteudoOmissis, true);\n    EtaQuill.register(EtaBlotAbreAspas, true);\n    EtaQuill.register(EtaBlotFechaAspas, true);\n    EtaQuill.register(EtaBlotNotaAlteracao, true);\n    EtaQuill.register(EtaBlotExistencia, true);\n    EtaQuill.register(EtaBlotTipoOmissis, true);\n    EtaQuill.register(EtaBlotConteudo, true);\n    EtaQuill.register(EtaBlotEspaco, true);\n    EtaQuill.register(EtaBlotMensagem, true);\n    EtaQuill.register(EtaBlotMensagens, true);\n    EtaQuill.register(EtaBlotMenuBotao, true);\n    EtaQuill.register(EtaBlotMenuConteudo, true);\n    EtaQuill.register(EtaBlotMenuItem, true);\n    EtaQuill.register(EtaBlotMenu, true);\n    EtaQuill.register(EtaBlotRotulo, true);\n    EtaQuill.register(EtaContainerTable, true);\n    EtaQuill.register(EtaContainerTdEsquerdo, true);\n    EtaQuill.register(EtaContainerTdDireito, true);\n    EtaQuill.register(EtaContainerTr, true);\n    EtaQuill.register(EtaContainerRevisao, true);\n    EtaQuill.register(EtaBlotRevisao, true);\n    EtaQuill.register(EtaBlotRevisaoAceitar, true);\n    EtaQuill.register(EtaBlotRevisaoRecusar, true);\n    EtaQuill.register(EtaContainerOpcoes, true);\n    EtaQuill.register(EtaBlotOpcoesDiff, true);\n    EtaQuill.register(id, true);\n    EtaQuill.register(paddingLeft, true);\n    EtaQuill.register(border, true);\n    EtaQuill.register(borderColor, true);\n    EtaQuill.register(display, true);\n    EtaQuill.register(ariaLabel, true);\n    EtaQuill.register(DataRotulo, true);\n  }\n\n  constructor(editorHtml: HTMLElement, bufferHtml: HTMLElement, op: QuillOptionsStatic) {\n    super(editorHtml, op);\n    this.on('text-change', this.onTextChange);\n    this.on('selection-change', this.onSelectionChange);\n    this.buffer = new EtaQuillBuffer(bufferHtml, {});\n    this.root.addEventListener('dragstart', (e: Event) => {\n      e.preventDefault();\n    });\n    this.root.addEventListener('drop', (e: Event) => {\n      e.preventDefault();\n    });\n    this.root.addEventListener('click', this.customClickHandler);\n  }\n\n  customClickHandler = (ev: MouseEvent): void => {\n    try {\n      let blot = EtaQuill.find(ev.target as HTMLElement);\n      if (['EtaBlotOpcoesDiff'].includes(blot.instanceBlotName)) {\n        return;\n      }\n      while (blot && blot.instanceBlotName !== 'EtaContainerTable') {\n        blot = blot.parent;\n      }\n      blot && blot === this.linhaAtual && blot.blotConteudo.domNode.focus();\n    } catch (error) {\n      // no faz nada\n    }\n  };\n\n  destroi(): void {\n    this.root?.removeEventListener('click', this.customClickHandler);\n    this.off('text-change', this.onTextChange);\n    this.off('selection-change', this.onSelectionChange);\n    this.keyboard?.operacaoTecladoInvalida.clean();\n    this.keyboard?.adicionaElementoTeclaEnter.clean();\n  }\n\n  getConteudoHtmlParteLinha(blotConteudo: EtaBlotConteudo, offset: number, tamanho: number): string {\n    return this.buffer.getConteudoHtml(blotConteudo.html, offset, tamanho);\n  }\n\n  getPrimeiraLinha(): EtaContainerTable {\n    return this.scroll.children.head;\n  }\n\n  getUltimaLinha(): EtaContainerTable {\n    return this.scroll.children.tail;\n  }\n\n  getLinhaByUuid2(uuid2: string, linha: EtaContainerTable = this.getPrimeiraLinha()): EtaContainerTable | undefined {\n    if (linha.uuid2 === uuid2) {\n      return linha;\n    }\n    if (linha.next) {\n      return this.getLinhaByUuid2(uuid2, linha.next);\n    } else {\n      return undefined;\n    }\n  }\n\n  getLinha(uuid: number, linha: EtaContainerTable = this.getPrimeiraLinha()): EtaContainerTable | undefined {\n    if (linha.uuid === uuid) {\n      return linha;\n    }\n    if (linha.next) {\n      return this.getLinha(uuid, linha.next);\n    } else {\n      return undefined;\n    }\n  }\n\n  getLinhaPorId(uuid: number): EtaContainerTable {\n    return Quill.find(this.getHtmlElement(EtaContainerTable.criarId(uuid)), false);\n  }\n\n  setIndex(index: number, source: Sources = Quill.sources.USER): void {\n    const range: RangeStatic = this.getSelection(true) ?? { index: 0, length: 0 };\n    if (index !== range.index || range.length !== 0) {\n      try {\n        this.setSelection(index, 0, source);\n      } catch (error) {\n        this.setSelection(index - 1, 0, source);\n      }\n    }\n  }\n\n  setConteudoLinha(blotConteudo: EtaBlotConteudo, delta: DeltaStatic, source?: Sources): void {\n    let index = this.getIndex(blotConteudo);\n\n    if (blotConteudo.length() > 1) {\n      this.deleteText(index, blotConteudo.length() - 1, source ?? Quill.sources.SILENT);\n    }\n    this.insertText(index, ' ', Quill.sources.SILENT);\n\n    delta.ops?.forEach((op: DeltaOperation): void => {\n      if (op.attributes) {\n        this.insertText(index, op.insert, op.attributes, source ?? Quill.sources.SILENT);\n      } else {\n        this.insertText(index, op.insert, source ?? Quill.sources.SILENT);\n      }\n      index += op.insert.length;\n    });\n    this.deleteText(index, 1, Quill.sources.SILENT);\n  }\n\n  converterHtmlParaDelta(html: string): DeltaStatic {\n    return this.buffer.converterHtmlParaDelta(html);\n  }\n\n  converterDeltaParaHtml(delta: DeltaStatic): string {\n    return this.buffer.converterDeltaParaHtml(delta);\n  }\n\n  irProximaLinha(): void {\n    const index: number = this.getIndex(this._linhaAtual?.next.blotConteudo);\n    this.setSelection(index, 0);\n  }\n\n  desmarcarLinhaAtual(linhaCursorAnt: EtaContainerTable): void {\n    this._linhaAnterior = linhaCursorAnt;\n    linhaCursorAnt?.desativarBorda();\n  }\n\n  marcarLinhaAtual(linhaCursor: EtaContainerTable): void {\n    if (linhaCursor && linhaCursor.tipo !== 'Articulacao') {\n      this.atualizarLinhaCorrente(linhaCursor);\n      this.elementoSelecionado.notify(linhaCursor.uuid);\n    }\n  }\n\n  undo(): void {\n    if (this.history.stack.undo.length === 0) {\n      if (!this.isUndoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.UNDO);\n      }\n    } else {\n      this.history.undo();\n      this.focus();\n    }\n  }\n\n  redo(): void {\n    if (this.history.stack.redo.length === 0) {\n      if (!this.isRedoEstruturaVazio) {\n        this.undoRedoEstrutura.notify(EtaQuill.REDO);\n      }\n    } else {\n      this.history.redo();\n      this.focus();\n    }\n  }\n\n  limparHistory(): void {\n    setTimeout(() => {\n      this.history.clear();\n    }, 0);\n  }\n\n  private desmarcarLinhas(): void {\n    document.querySelectorAll('.container__elemento--ativo').forEach(elemento => {\n      const linha = this.getLinhaPorId(parseInt(elemento.id.substr(7), 0));\n      linha.desativarBorda();\n    });\n  }\n\n  private verificarMudouLinha(range: RangeStatic, oldRange?: RangeStatic): boolean {\n    // correo bug: cursor se perde ao teclar  na primeira linha\n    if (oldRange && range?.index === 0 && range?.length === 0) {\n      this.setSelection(oldRange.index, 0);\n      return false;\n    }\n\n    if (range) {\n      const blotCursor: EtaBlot = this.getLine(range.index)[0];\n      const linhaCursor: EtaContainerTable = blotCursor.linha;\n\n      if (\n        blotCursor.tagName === EtaBlotRotulo.tagName ||\n        blotCursor.tagName === EtaBlotEspaco.tagName ||\n        blotCursor.tagName === EtaBlotMenu.tagName ||\n        blotCursor.tagName === EtaBlotMensagens.tagName ||\n        blotCursor.tagName === EtaBlotAbreAspas.tagName ||\n        blotCursor.tagName === EtaBlotTipoOmissis.tagName ||\n        blotCursor.tagName === EtaBlotExistencia.tagName\n      ) {\n        this.setSelection(this.getIndex(blotCursor.linha.blotConteudo), 0, Quill.sources.SILENT);\n      } else if (blotCursor.tagName === EtaBlotFechaAspas.tagName || blotCursor.tagName === EtaBlotNotaAlteracao.tagName) {\n        this.setSelection(this.getIndex(blotCursor.linha.blotFechaAspas) - 1, 0, Quill.sources.SILENT);\n      }\n\n      if (oldRange) {\n        const blotCursorAnt: EtaBlot = this.getLine(oldRange.index)[0];\n\n        if (blotCursorAnt) {\n          const linhaCursorAnt: EtaContainerTable = blotCursorAnt.linha;\n\n          if (linhaCursor === linhaCursorAnt) {\n            return false;\n          }\n        }\n      }\n\n      this.desmarcarLinhas();\n      this.marcarLinhaAtual(linhaCursor);\n      return true;\n    }\n    return false;\n  }\n\n  observableSelectionChange = new Observable<EtaContainerTable>();\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic): void => {\n    // Guarda a linhaAtual corrente\n    // OBS: o valor de \"this.linhaAtual\" ser alterado dentro de \"this.verificarMudouLinha\" de acordo com alguns critrios.\n    const linhaAtualAux = this.linhaAtual;\n\n    this._mudouDeLinha = this.verificarMudouLinha(range, oldRange);\n\n    if (this._mudouDeLinha) {\n      this.observableSelectionChange.notify(linhaAtualAux);\n      this.limparHistory();\n    }\n  };\n\n  private onTextChange: TextChangeHandler = (): void => {\n    if (this._linhaAtual) {\n      setTimeout(() => {\n        this.linhaAtual?.blotConteudo && this.acertarAspas();\n      }, 0);\n    }\n  };\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.root.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private acertarAspas(): void {\n    if (this._linhaAtual) {\n      const index: number = this.inicioConteudoAtual;\n      const texto: string = this.getText(index, this.linhaAtual?.blotConteudo.tamanho) ?? '';\n      let posicaoTexto = index;\n\n      if (texto.indexOf('\"') > -1) {\n        for (let i = 0; i < texto.length; i++) {\n          if (texto[i] === '\"') {\n            const novaAspas = i === 0 || texto[i - 1].match(/\\s/) ? '' : '';\n            posicaoTexto += i;\n            this.deleteText(posicaoTexto, 1, Quill.sources.SILENT);\n            this.insertText(posicaoTexto, novaAspas, Quill.sources.SILENT);\n            posicaoTexto = index;\n          }\n        }\n      }\n    }\n  }\n\n  atualizarLinhaCorrente(linha: EtaContainerTable): void {\n    this.processandoMudancaLinha = true;\n\n    this._linhaAtual = linha;\n    this._linhaAtual.blotConteudo.htmlAnt = this._linhaAtual.blotConteudo.html;\n    linha.ativarBorda();\n    this.scrollToElemento(linha.uuid);\n  }\n\n  private scrollToElemento(uuid: number): void {\n    const el = this.getHtmlElement(EtaContainerTable.criarId(uuid));\n    setTimeout(() => {\n      if (!this.isInEtaBoxViewport(el)) {\n        this.scrollIntoEtaBox(el);\n        // el.scrollIntoView({behavior: 'smooth', block: 'center'});\n      }\n    }, 0);\n  }\n\n  private scrollIntoEtaBox(el: HTMLElement): void {\n    const offsetTopElement = el.offsetTop;\n    el.closest('.ql-editor')?.scrollTo(0, offsetTopElement);\n  }\n\n  private isInEtaBoxViewport(el: HTMLElement): boolean {\n    const rect = el.getBoundingClientRect();\n\n    const lxEtaBox = el.closest('#lx-eta-box');\n    const etaBoxHeight = lxEtaBox?.getBoundingClientRect().bottom || 0;\n\n    return rect.top >= 0 && rect.bottom <= etaBoxHeight;\n  }\n\n  cursorDeTextoEstaSobreLink(deslocamento = 0): boolean {\n    const range = this.getSelection();\n    if (range) {\n      const ops = this.getContents(range.index + deslocamento, 1).ops;\n      return !ops || !ops[0] ? false : ops[0].attributes?.link;\n    }\n    return false;\n  }\n\n  cursorDeTextoEstaSobreOmissis(): boolean {\n    const range = this.getSelection();\n    if (range) {\n      const textBlot = this.getLeaf(range.index);\n      return textBlot[0].text === TEXTO_OMISSIS;\n    }\n    return false;\n  }\n}\n","import { formatDDMMYYYY } from '../../util/date-util';\n\nexport class Norma {\n  urn = '';\n  nomePreferido = '';\n  nomesAlternativos = [];\n  nomes = [];\n  ementa = '';\n  nomePorExtenso = '';\n\n  constructor(urn = '', nomePreferido = '', nomePorExtenso = '', nomes = [], nomesAlternativos = [], ementa = '') {\n    this.urn = urn;\n    this.nomePreferido = nomePreferido;\n    this.nomesAlternativos = nomesAlternativos;\n    this.nomes = nomes;\n    this.ementa = ementa;\n    this.nomePorExtenso = nomePorExtenso;\n  }\n\n  public numero(): string {\n    return this.urn.split(';')[1];\n  }\n\n  public tipo(): string {\n    return this.urn.split(':')[4];\n  }\n\n  public sData(): string {\n    return this.urn.split(':')[5].split(';')[0];\n  }\n\n  public data(): Date {\n    const stringData = this.sData();\n    return new Date(stringData);\n  }\n\n  public dataDDMMYYYY(): string {\n    return formatDDMMYYYY(this.data());\n  }\n}\n","import { LitElement, html, TemplateResult, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('autocomplete-async')\nexport class AutocompleteAsync extends LitElement {\n  @property({ type: String })\n  placeholder = '';\n  @property({ type: String })\n  label = '';\n  @property({ type: Array, reflect: true })\n  items: Option[] = [];\n\n  @property({ type: Boolean, reflect: true })\n  disabled = false;\n\n  @property({ type: Boolean, reflect: true })\n  opened = false;\n\n  @property({ type: Boolean, reflect: true })\n  async = true;\n\n  @property({ type: Number })\n  maxSuggestions = 10;\n\n  @property({ type: Function })\n  onSearch = (value: string): void => console.log('Texto da pesquisa', value);\n\n  @property({ type: Function })\n  onSelect = (value: Option): void => console.log('Item selecionado:', value);\n\n  @property({ type: Function })\n  onChange = (value: string): void => console.log('Mudana texto:', value);\n\n  @property({ type: Function })\n  onClick = (value: string): void => console.log('Click:', value);\n\n  _interval = 1000;\n\n  _timer: any;\n\n  _bound: any = {};\n\n  _inputEl: any;\n\n  _suggestionEl: any;\n\n  _highlightedEl: any;\n\n  _blur = false;\n\n  _mouseEnter = false;\n\n  _search = (): void => {\n    const { value } = this.contentElement;\n    if (this.async) {\n      clearTimeout(this._timer);\n      if (value.length >= 5 || !this.async) {\n        this._timer = setTimeout(\n          () => {\n            this.onSearch(value);\n          },\n          this.async ? this._interval : 0\n        );\n      }\n    } else {\n      this.onSearch(value);\n    }\n  };\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        .suggest-container {\n          position: relative;\n        }\n\n        ul {\n          position: absolute;\n          display: block;\n          list-style-type: none;\n          margin: 0;\n          padding: 0;\n          z-index: 10000;\n          border: 1px solid grey;\n          background: white;\n        }\n        li {\n          padding: 4px;\n          cursor: pointer;\n        }\n        li.active {\n          background: whitesmoke;\n        }\n        [hidden] {\n          display: none;\n        }\n\n        .lexml-autocomplete-input {\n          width: 100%;\n        }\n\n        @media (max-width: 576px) {\n          .lexml-autocomplete-label {\n            width: calc(100% - 2px);\n            display: block;\n          }\n          .lexml-autocomplete-input {\n            width: calc(100% - 2px);\n          }\n        }\n      </style>\n      <slot id=\"dropdown-input\">\n        <sl-input\n          id=\"defaultInput\"\n          class=\"lexml-autocomplete-input\"\n          type=\"text\"\n          label=${this.label}\n          placeholder=${this.placeholder}\n          .value=${this.value?.description || ''}\n          @change=${e => this._handleChange(e.target.value)}\n          @click=${e => this._handleClick(e.target.value)}\n          ?disabled=${this.disabled}\n        ></sl-input>\n      </slot>\n      <div class=\"suggest-container\">\n        <ul id=\"suggestions\" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>\n          ${this.items.map((item: Option) => html`<li @click=${(): void => this.autocomplete(item)}>${item.description}</li>`)}\n        </ul>\n      </div>\n    `;\n  }\n\n  /**\n   * Input element getter\n   */\n  get contentElement(): any {\n    if (this._inputEl) return this._inputEl; // Cache\n    if (!this.hasUpdated) return undefined; // No shadow root, no element to use\n\n    const slotElement = this.shadowRoot!.getElementById('dropdown-input') as HTMLSlotElement;\n    const slotInputList = slotElement.assignedElements();\n    this._inputEl = slotInputList.length ? slotInputList[0] : this.shadowRoot!.getElementById('defaultInput');\n    return this._inputEl;\n  }\n\n  private _tempValue?: Option;\n  /**\n   * Value getter from input element.\n   */\n  get value(): any {\n    return this.contentElement && this.contentElement.value;\n  }\n\n  /**\n   * Value setter to input element.\n   */\n  @property({ type: String })\n  set value(value) {\n    if (!this.contentElement) {\n      this._tempValue = value;\n      return;\n    }\n\n    this.contentElement.value = value;\n  }\n\n  firstUpdated(): void {\n    this._suggestionEl = this.shadowRoot!.getElementById('suggestions');\n    this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n\n    this._bound.onKeyDown = this._handleKeyDown.bind(this);\n    this._bound.onKeyUp = this._handleKeyUp.bind(this);\n    this._bound.onFocus = this._handleFocus.bind(this);\n    this._bound.onBlur = this._handleBlur.bind(this);\n    this._bound.onChange = this._handleChange.bind(this);\n    this._bound.onClick = this._handleClick.bind(this);\n\n    this.contentElement.addEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.addEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.addEventListener('focus', this._bound.onFocus);\n    this.contentElement.addEventListener('blur', this._bound.onBlur);\n    this.contentElement.addEventListener('sl-input', this._bound.onChange);\n    this.contentElement.addEventListener('click', this._bound.onClick);\n\n    if (this._tempValue !== undefined) {\n      this.contentElement.value = this._tempValue;\n    }\n  }\n\n  disconnectedCallback(): void {\n    if (!this.contentElement) return; // no events to remove\n    this.contentElement.removeEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.removeEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.removeEventListener('focus', this._bound.onFocus);\n    this.contentElement.removeEventListener('blur', this._bound.onBlur);\n    this.contentElement.removeEventListener('sl-input', this._bound.onChange);\n    this.contentElement.removeEventListener('click', this._bound.onClick);\n  }\n\n  focus(options?: FocusOptions): void {\n    if (this.contentElement) {\n      this.contentElement.focus(options);\n    }\n  }\n\n  updated(changed: PropertyValues): void {\n    if (changed.has('items')) {\n      this.items.length > 1 || (this.items.length === 1 && this.items[0] !== this.contentElement.value) ? this.open() : this.close();\n    }\n\n    if (changed.has('opened') && this.opened && this._suggestionEl.childElementCount) {\n      // Highlight the first when there are suggestions\n      // eslint-disable-next-line prefer-destructuring\n      this._highlightedEl = this._suggestionEl.children[0];\n      this._highlightedEl.classList.add('active');\n    }\n  }\n\n  /**\n   * Open suggestions.\n   */\n  open(): void {\n    if (this._suggestionEl.style.width === '0px') {\n      this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n    }\n\n    if (this.items.length) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Close suggestions.\n   */\n  close(): void {\n    this.opened = false;\n    this._highlightedEl = null;\n  }\n\n  /**\n   * Autocomplete input with `value`.\n   * @param {String} value\n   */\n  autocomplete(value: Option): void {\n    this.contentElement.value = value;\n    this.onSelect(value);\n    this.close();\n  }\n\n  _highlightPrev(): void {\n    if (!this._highlightedEl || !this._highlightedEl.previousElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.previousElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  _highlightNext(): void {\n    if (!this._highlightedEl || !this._highlightedEl.nextElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.nextElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _handleChange(value: string): void {\n    this.onChange(value);\n  }\n\n  _handleKeyDown(ev: KeyboardEvent): void {\n    // Prevent up and down from behaving as home and end on some browsers\n    if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  _handleKeyUp(ev: KeyboardEvent): void {\n    switch (ev.key) {\n      case 'ArrowUp':\n        if (this._highlightedEl?.previousElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightPrev();\n        }\n        break;\n      case 'ArrowDown':\n        if (this._highlightedEl?.nextElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightNext();\n        }\n        break;\n      case 'Enter':\n        // eslint-disable-next-line no-unused-expressions\n        this._highlightedEl && this._highlightedEl.click();\n        this.contentElement.blur();\n        break;\n      default:\n        this._search();\n    }\n  }\n\n  _handleFocus(): void {\n    this._blur = false;\n    // eslint-disable-next-line no-unused-expressions\n    this.items.length > 1 && this.open();\n  }\n\n  _handleBlur(): void {\n    this._blur = true;\n    // eslint-disable-next-line no-unused-expressions\n    setTimeout(() => this.close(), 200);\n    //this.items = [];\n  }\n\n  // Handle mouse change focus to suggestions\n  _handleItemMouseEnter(): void {\n    this._mouseEnter = true;\n  }\n\n  _handleItemMouseLeave(): void {\n    this._mouseEnter = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._blur && setTimeout(() => this.close(), 500); // Give user some slack before closing\n  }\n\n  _handleClick(value: string): void {\n    this.onClick(value);\n  }\n}\n\nexport class Option {\n  description: string;\n  value: string;\n\n  constructor(value, description) {\n    this.description = description;\n    this.value = value;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'autocomplete-async': AutocompleteAsync;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, state, query } from 'lit/decorators.js';\nimport { Option, AutocompleteAsync } from './autocomplete-async';\nimport { Norma } from '../../model/emenda/norma';\n\n@customElement('autocomplete-norma')\nexport class AutocompleteNorma extends LitElement {\n  @property({ type: String })\n  urnInicial = '';\n\n  @property({ type: String })\n  urlAutocomplete;\n\n  @property({ type: Function })\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars, @typescript-eslint/no-empty-function\n  onSelect = (value: Norma): void => {};\n  //onSelect = (value: Norma): void => console.log('Norma selecionado:', value);\n\n  @state()\n  _selectedNorma: Norma = new Norma();\n\n  @state()\n  _optionsNorma: Option[] = [];\n\n  _normas: Norma[] = [];\n\n  @query('#auto-complete-async')\n  _autoCompleteAsync!: AutocompleteAsync;\n\n  async _searchNormas(query: string): Promise<Norma[]> {\n    try {\n      const _response = await fetch(`${this.urlAutocomplete}?query=${query}`);\n      const _normas = await _response.json();\n      return _normas.map(n => new Norma(n.urn, n.nomePreferido, n.nomePorExtenso, n.nomes, n.nomesAlternativos, n.ementa));\n    } catch (err) {\n      console.log('Erro inesperado ao consultar as normas');\n      console.log(err);\n    }\n    return Promise.resolve([]);\n  }\n\n  _updateNormas(paramQuery: string): void {\n    const query = paramQuery\n      .replace(/[,;]| n /gi, ' ')\n      .replaceAll('.', '')\n      .toLowerCase();\n    this._searchNormas(query).then(normas => {\n      this._normas = normas;\n      this._optionsNorma = normas.map(n => new Option(n.urn, n.nomePreferido));\n    });\n  }\n\n  _handleSearch(value: string): void {\n    this._updateNormas(value);\n  }\n\n  _handleSelect(option: Option): void {\n    const norma = this._normas.find(norma => norma.urn === option.value);\n    if (norma) {\n      this._selectedNorma = norma as Norma;\n      this.onSelect(this._selectedNorma);\n    }\n  }\n\n  _getNormaByURN(urn: string): void {\n    const norma = new Norma(urn);\n    const query = `${norma.sData()} ${norma.numero()}`;\n    this._searchNormas(query).then(normas => {\n      this._selectedNorma = normas.find(n => n.urn === urn) as Norma;\n      this.onSelect(this._selectedNorma);\n      this._autoCompleteAsync.value = this._selectedNorma.nomePreferido;\n    });\n  }\n\n  firstUpdated(): void {\n    if (this.urnInicial) {\n      this._getNormaByURN(this.urnInicial);\n    }\n    this.focusAutoComplete();\n  }\n\n  focusAutoComplete(): void {\n    setTimeout(() => {\n      this._autoCompleteAsync.focus();\n    }, 100);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  _handleChange(value: string): void {\n    // console.log('_handleChange', value);\n    this._selectedNorma = new Norma();\n    this.onSelect(this._selectedNorma);\n  }\n\n  render(): TemplateResult {\n    return html`<style>\n        .ajuda,\n        .sp-ementa {\n          font-size: var(--sl-font-size-small);\n          font-weight: normal;\n        }\n        .wp-ementa {\n          height: 85px;\n          margin-top: 10px;\n          overflow-y: auto;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 5px;\n          border-radius: var(--sl-border-radius-small);\n          background-color: var(--sl-color-gray-100);\n        }\n        .wp-ementa p {\n          margin: 0;\n        }\n        .lb-ementa {\n          display: block;\n          margin-top: 10px;\n        }\n      </style>\n      <div>\n        <autocomplete-async\n          id=\"auto-complete-async\"\n          label=\"Identificao da norma\"\n          placeholder=\"ex: Lei 10406 ou Cdigo Civil\"\n          .items=${this._optionsNorma}\n          .onSearch=${value => this._handleSearch(value)}\n          .onSelect=${value => this._handleSelect(value)}\n          .onChange=${value => this._handleChange(value)}\n        ></autocomplete-async>\n        <span class=\"ajuda\">Informar a identificao da norma com tipo e nmero ou o apelido da norma. So aceitas abreviaes como LCP e MPV.</span>\n        <label class=\"lb-ementa\">Ementa:</label>\n        <div class=\"wp-ementa\"><span class=\"sp-ementa\">${(this._selectedNorma.ementa || '').slice(0, 450)}</span></div>\n      </div>`;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'autocomplete-norma': AutocompleteNorma;\n  }\n}\n","import { Elemento } from '../../model/elemento';\nimport { Norma } from '../../model/emenda/norma';\nimport { validaDispositivoAssistente } from '../../model/lexml/numeracao/parserReferenciaDispositivo';\nimport './autocomplete-norma';\n\nexport async function assistenteAlteracaoDialog(elemento: Elemento, quill: any, store: any, action: any, urlAutocomplete: string): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Assistente de alterao de norma';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n    .ajuda {\n      font-size: var(--sl-font-size-small);\n      font-weight: normal;\n    }\n\n    sl-radio-group::part(base) {\n      display: grid;\n      grid-template-columns: 230px 1fr;\n      grid-gap: 0px;\n      flex-wrap: wrap;\n    }\n\n    sl-radio::part(base) {\n      display: flex;\n      flex-direction: row;\n    }\n\n    sl-radio-group sl-input::part(form-control) {\n      display: flex;\n      flex-direction: row;\n      gap: 10px;\n      align-items: center;\n      flex-wrap: wrap;\n    }\n\n    #dataNorma::part(form-control-input){\n      max-width: 160px;\n    }\n    #anoNorma::part(form-control-input){\n      max-width: 90px;\n    }\n\n    @media (max-width: 520px) {\n      sl-radio-group::part(base) {\n        display: flex;\n        grid-template-columns: column;\n        gap: 10px;\n        flex-wrap: wrap;\n      }\n    }\n  </style>\n  <autocomplete-norma id=\"auto-norma\" urlAutocomplete=\"${urlAutocomplete}\"></autocomplete-norma>\n  <br />\n    <sl-input name=\"dispositivos\" id=\"dispositivos\" placeholder=\"ex: inciso I do  3 do Art.1\" label=\"Dispositivo da norma\" clearable></sl-input>\n    <span class=\"ajuda\">Informar apenas um dispositivo. Depois podero ser adicionados outros.</span>\n    <p class=\"ajuda\" style=\"margin-block-end: 0;\">\n      Terminar sempre com o artigo, por exemplo:\n    </p>\n    <ul class=\"ajuda\" style=\"margin-block-start: .3em; margin-block-end: 0;\">\n      <li>item 9 da alnea b do inciso V do pargrafo 4 do artigo 12-B</li>\n      <li>ali c, inc X, par 6, art 1</li>\n      <li> 8 art 32</li>\n      <li>pargrafo nico do art 7</li>\n    </ul>\n  </div>\n  <br/>\n  <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n    <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n    <strong>Dados invlidos.</strong><br/>\n    <span>Revise os dados informados.</span>\n  </sl-alert>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  let normaAlteracao: Norma = new Norma();\n  const autocompleteNorma = content.querySelector('#auto-norma');\n  const dispositivos = content.querySelector('#dispositivos');\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const alerta = content.querySelector('sl-alert');\n  const alertaMensagem = alerta!.querySelector('strong');\n  const alertaComplemento = alerta!.querySelector('span');\n\n  const preencheAlerta = (mensagem = 'Dados invlidos.', complemento = 'Revise os dados informados.'): void => {\n    alertaMensagem!['innerHTML'] = mensagem;\n    alertaComplemento!['innerHTML'] = complemento;\n  };\n\n  autocompleteNorma!['onSelect'] = (norma): void => {\n    normaAlteracao = norma;\n  };\n\n  ok.onclick = (): void => {\n    let temErro = false;\n    const textoDispositivo = (dispositivos as HTMLInputElement)?.value;\n\n    preencheAlerta();\n\n    if (!normaAlteracao.urn) {\n      preencheAlerta('Dados invlidos', 'Identifique uma norma a ser alterada.');\n      temErro = true;\n    } else if (textoDispositivo && textoDispositivo.length > 0) {\n      try {\n        validaDispositivoAssistente(textoDispositivo);\n      } catch (err) {\n        preencheAlerta('Dispositivo da norma no identificado.', 'Informe apenas um dispositivo em um dos formatos acima. Depois ser possvel alterar outros dispositivos.');\n        temErro = true;\n      }\n    } else {\n      preencheAlerta('Informe o dispositivo da norma a ser alterada.', 'Informe apenas um dispositivo em um dos formatos acima. Depois ser possvel alterar outros dispositivos.');\n      temErro = true;\n    }\n\n    if (!temErro) {\n      quill.focus();\n      alerta?.hide();\n      dialogElem?.hide();\n      dialogElem?.remove();\n      elemento.norma = normaAlteracao.urn;\n      store.dispatch(action.execute(elemento, normaAlteracao.urn, textoDispositivo));\n    } else {\n      alerta?.show();\n    }\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    dialogElem?.remove();\n  };\n  quill.blur();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  const elementoFocavel = document\n    .querySelector('#auto-norma')\n    ?.shadowRoot?.querySelector('#auto-complete-async')\n    ?.shadowRoot?.querySelector('#defaultInput')\n    ?.shadowRoot?.querySelector('#input') as HTMLInputElement;\n  elementoFocavel?.focus();\n}\n","import { atualizarNotaAlteracaoAction } from './../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { Elemento } from '../../model/elemento';\n\nexport const editarNotaAlteracaoDialog = (elemento: Elemento, quill: any, store: any): void => {\n  if (podeMostrarDialog(elemento)) {\n    const dialogElem = document.createElement('sl-dialog');\n    document.body.appendChild(dialogElem);\n    dialogElem.label = 'Nota de alterao';\n    dialogElem.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const content = document.createRange().createContextualFragment(`\n    <sl-radio-group fieldset label=\"Selecione o tipo de nota de alterao:\">\n      <sl-radio class=\"nota\" id=\"nota-nr\" value=\"NR\">Nova redao '(NR)'</sl-radio>\n      <sl-radio class=\"nota\" id=\"nota-vazia\" value=\"\">Sem nota de alterao</sl-radio>\n    </sl-radio-group>\n    <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n    <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n    `);\n\n    const opcoes = {\n      NR: content.querySelector('#nota-nr'),\n      VZ: content.querySelector('#nota-vazia'),\n    };\n\n    const notaAlteracao = elemento.notaAlteracao === 'AC' ? undefined : elemento.notaAlteracao;\n    opcoes[notaAlteracao || 'VZ'].checked = true;\n\n    const botoes = content.querySelectorAll('sl-button');\n    const cancelar = botoes[0];\n    const ok = botoes[1];\n\n    ok.onclick = (): void => {\n      const newValue = (document.querySelector('sl-radio.nota[aria-checked=\"true\"]') as any).value;\n      if (elemento.notaAlteracao !== newValue) {\n        store.dispatch(atualizarNotaAlteracaoAction.execute(elemento, newValue));\n      }\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    cancelar.onclick = (): void => {\n      quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    quill.blur();\n    dialogElem.appendChild(content);\n    dialogElem.show();\n    setTimeout(() => {\n      opcoes[elemento.notaAlteracao || 'VZ'].focus();\n    }, 0);\n  }\n};\n\nconst podeMostrarDialog = (elemento: Elemento): boolean => {\n  if (elemento.revisao) {\n    if (elemento.revisao.descricao === 'Dispositivo removido') {\n      return false;\n    }\n  }\n  return true;\n};\n","import { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { substituiEspacosEntreTagsPorNbsp, substituiMultiplosEspacosPorNbsp, textoDiffAsHtml } from '../../util/string-util';\n\nexport class TextoDiff {\n  quill!: EtaQuill;\n  textoOriginal!: string;\n  textoAntesRevisao!: string;\n  textoAtual!: string;\n  adicionado = false;\n}\n\nconst OMISSIS = '....................';\n\nexport const exibirDiferencasDialog = (diff: TextoDiff): void => {\n  Array.from(document.querySelectorAll('#slDialogExibirDiferencas')).forEach(el => document.body.removeChild(el));\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.id = 'slDialogExibirDiferencas';\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Exibir diferenas do texto atual com';\n\n  const fnDestroy = (): void => {\n    try {\n      diff.quill && diff.quill.focus();\n      dialogElem?.hide();\n      document.body.removeChild(dialogElem);\n    } catch (error) {\n      // console.log(error);\n    }\n  };\n\n  dialogElem.addEventListener('sl-after-hide', () => {\n    setTimeout(() => fnDestroy(), 0);\n  });\n\n  diff = trataOmissisDiff(diff);\n\n  const contemRevisao = !!diff.textoAntesRevisao;\n\n  let diferencaModificado = textoDiffAsHtml(diff.textoOriginal, diff.textoAtual, 'diffWords');\n  let diferencaSemEspacosDuplicados = diferencaModificado.replace(/\\s+/g, ' ');\n  diferencaModificado = substituiEspacosEntreTagsPorNbsp(textoDiffAsHtml(diferencaSemEspacosDuplicados, diferencaModificado, 'diffChars'), ['ins', 'del']);\n\n  const tabModificado = !diff.adicionado && diferencaModificado !== diff.textoOriginal ? `<sl-tab slot=\"nav\" panel=\"modificado\"> Texto original </sl-tab>` : '';\n  const tabModificadoRevisao = contemRevisao ? `<sl-tab slot=\"nav\" panel=\"modificadoRevisao\">Texto antes da reviso</sl-tab>` : '';\n\n  let diferencaEntreTextoAtualETextoAntesRevisao = contemRevisao ? textoDiffAsHtml(diff.textoAntesRevisao, diff.textoAtual, 'diffWords') : undefined;\n  if (contemRevisao) {\n    diferencaSemEspacosDuplicados = diferencaEntreTextoAtualETextoAntesRevisao!.replace(/\\s+/g, ' ');\n    diferencaEntreTextoAtualETextoAntesRevisao = substituiEspacosEntreTagsPorNbsp(\n      textoDiffAsHtml(diferencaSemEspacosDuplicados, diferencaEntreTextoAtualETextoAntesRevisao!, 'diffChars'),\n      ['ins', 'del']\n    );\n  }\n\n  diff.textoOriginal = substituiMultiplosEspacosPorNbsp(diff.textoOriginal);\n  diff.textoAtual = substituiMultiplosEspacosPorNbsp(diff.textoAtual);\n  if (contemRevisao) {\n    diff.textoAntesRevisao = substituiMultiplosEspacosPorNbsp(diff.textoAntesRevisao);\n  }\n  const tabPanelModificado =\n    !diff.adicionado && diferencaModificado !== diff.textoOriginal\n      ? `<sl-tab-panel name=\"modificado\">\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n            Texto original\n          </div>\n          <p class=\"texto-quill\">\n            ${diff.textoOriginal}\n          </p>\n        </sl-card>\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n            Diferena\n          </div>\n          <p class=\"texto-quill\">\n            ${diferencaModificado}\n          </p>\n        </sl-card>\n\n        <sl-card class=\"card-header texto-alterado\">\n          <div slot=\"header\">\n          Texto atual\n          </div>\n          <p class=\"texto-quill\">\n            ${diff.textoAtual}\n          </p>\n        </sl-card>\n\n      </sl-tab-panel>`\n      : '';\n\n  const tabPanelModificadoRevisao = contemRevisao\n    ? `<sl-tab-panel name=\"modificadoRevisao\">\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Texto antes da reviso\n            </div>\n            <p class=\"texto-quill\">\n              ${diff.textoAntesRevisao}\n            </p>\n          </sl-card>\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Diferena\n            </div>\n            <p class=\"texto-quill\">\n              ${diferencaEntreTextoAtualETextoAntesRevisao!}\n            </p>\n          </sl-card>\n\n          <sl-card class=\"card-header texto-alterado\">\n            <div slot=\"header\">\n              Texto atual\n            </div>\n            <p class=\"texto-quill\">\n              ${diff.textoAtual}\n            </p>\n          </sl-card>\n\n        </sl-tab-panel>`\n    : '';\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n\n    sl-dialog {\n      --width: 90vw;\n    }\n    sl-dialog::part(base) {\n      max-width: 1200px;\n      margin: 0 auto;\n    }\n\n    .texto-alterado ins {\n      background-color: #c6ffc6;\n      text-decoration: none;\n    }\n\n    .texto-alterado del {\n      background-color: #ffc6c6;\n    }\n\n    p .texto-quill {\n      white-space: pre-wrap;\n      text-align: justify;\n      text-indent: 0 !important;\n    }\n\n    sl-tab-panel::part(base) {\n      padding-top: 1rem;\n      display: flex;\n      flex-direction: row;\n      gap: 1rem;\n      align-items: stretch;\n      justify-content: center;\n    }\n\n    sl-card {\n      box-shadow: var(--sl-shadow-x-large) !important;\n      width: 33%;\n      word-wrap: break-word;\n      overflow-wrap: break-word;\n    }\n\n    @media (max-width: 768px) {\n      sl-card {\n        width: 100%;\n      }\n    }\n\n    sl-card::part(base){\n      height: 100%;\n    }\n\n    sl-card::part(header) {\n      background-color: var(--sl-color-neutral-200);\n    }\n\n\n    @media (max-width: 768px) {\n      sl-tab-panel::part(base) {\n        flex-direction: column;\n      }\n      sl-dialog {\n        --width: 100vw !important;\n      }\n    }\n\n  </style>\n  <div class=\"texto-alterado\">\n    <sl-tab-group>\n      ${tabModificado}\n      ${tabModificadoRevisao}\n\n      ${tabPanelModificado}\n      ${tabPanelModificadoRevisao}\n    </sl-tab-group>\n  </div>\n\n\n  <sl-button slot=\"footer\" variant=\"primary\">Fechar</sl-button>\n  `);\n\n  const fechar = content.querySelectorAll('sl-button')[0];\n\n  fechar.onclick = (): Promise<void> => dialogElem?.hide();\n\n  diff.quill && diff.quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n};\n\nconst trataOmissisDiff = (diff: TextoDiff): TextoDiff => {\n  if (diff.textoAtual.includes('....')) {\n    diff.textoAtual = OMISSIS;\n  }\n  return diff;\n};\n","export const alertarInfo = (mensagem: string): void => {\n  const idAlert = 'alertaInfo';\n  const currentAlert = document.getElementById(idAlert);\n\n  if (!currentAlert) {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n          <sl-icon name=\"exclamation-octagon\" slot=\"icon\" id=\"${idAlert}\"></sl-icon>\n          ${mensagem}\n        `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n};\n","import { isRevisaoPrincipal, getQuantidadeRevisoes } from './../../redux/elemento/util/revisaoUtil';\nimport { colarTextoArticuladoDialog, onChangeColarDialog } from './colarTextoArticuladoDialog';\nimport { InfoTextoColado } from './../../redux/elemento/util/colarUtil';\nimport { AdicionarAgrupadorArtigo } from './../../model/lexml/acao/adicionarAgrupadorArtigoAction';\nimport { adicionarAgrupadorArtigoDialog } from './adicionarAgrupadorArtigoDialog';\nimport { SlButton, SlInput } from '@shoelace-style/shoelace';\nimport { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\nimport { CmdEmdUtil } from '../../emenda/comando-emenda-util';\nimport { adicionarAlerta } from '../../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\nimport { ClassificacaoDocumento } from '../../model/documento/classificacao';\nimport { Elemento } from '../../model/elemento';\nimport { ElementoAction, isAcaoMenu } from '../../model/lexml/acao';\nimport { adicionarAlteracaoComAssistenteAction } from '../../model/lexml/acao/adicionarAlteracaoComAssistenteAction';\nimport { adicionarElementoAction } from '../../model/lexml/acao/adicionarElementoAction';\nimport { atualizarReferenciaElementoAction } from '../../model/lexml/acao/atualizarReferenciaElementoAction';\nimport { atualizarTextoElementoAction } from '../../model/lexml/acao/atualizarTextoElementoAction';\nimport { autofixAction } from '../../model/lexml/acao/autoFixAction';\nimport { elementoSelecionadoAction } from '../../model/lexml/acao/elementoSelecionadoAction';\nimport { considerarElementoExistenteNaNorma, considerarElementoNovoNaNorma } from '../../model/lexml/acao/informarExistenciaDoElementoNaNormaAction';\nimport { moverElementoAbaixoAction } from '../../model/lexml/acao/moverElementoAbaixoAction';\nimport { moverElementoAcimaAction } from '../../model/lexml/acao/moverElementoAcimaAction';\nimport { redoAction } from '../../model/lexml/acao/redoAction';\nimport { removerElementoAction } from '../../model/lexml/acao/removerElementoAction';\nimport { removerElementoSemTextoAction } from '../../model/lexml/acao/removerElementoSemTextoAction';\nimport { renumerarElementoAction } from '../../model/lexml/acao/renumerarElementoAction';\nimport { shiftTabAction } from '../../model/lexml/acao/shiftTabAction';\nimport { tabAction } from '../../model/lexml/acao/tabAction';\nimport { UndoAction } from '../../model/lexml/acao/undoAction';\nimport { validarArticulacaAction } from '../../model/lexml/acao/validarArticulacaoAction';\nimport { validarElementoAction } from '../../model/lexml/acao/validarElementoAction';\nimport { normalizaSeForOmissis } from '../../model/lexml/conteudo/conteudoUtil';\nimport { TEXTO_OMISSIS } from '../../model/lexml/conteudo/textoOmissis';\nimport { getNomeExtenso } from '../../model/lexml/documento/urnUtil';\nimport { podeRenumerar, rotuloParaEdicao } from '../../model/lexml/numeracao/numeracaoUtil';\nimport { TipoDispositivo } from '../../model/lexml/tipo/tipoDispositivo';\nimport { AutoFix } from '../../model/lexml/util/mensagem';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { rootStore } from '../../redux/store';\nimport { EtaBlotConteudo } from '../../util/eta-quill/eta-blot-conteudo';\nimport { EtaBlotMenu } from '../../util/eta-quill/eta-blot-menu';\nimport { EtaBlotMenuBotao } from '../../util/eta-quill/eta-blot-menu-botao';\nimport { EtaBlotMenuConteudo } from '../../util/eta-quill/eta-blot-menu-conteudo';\nimport { EtaBlotMenuItem } from '../../util/eta-quill/eta-blot-menu-item';\nimport { EtaBlotRotulo } from '../../util/eta-quill/eta-blot-rotulo';\nimport { EtaContainerTable } from '../../util/eta-quill/eta-container-table';\nimport { Keyboard } from '../../util/eta-quill/eta-keyboard';\nimport { EtaQuill } from '../../util/eta-quill/eta-quill';\nimport { EtaQuillUtil } from '../../util/eta-quill/eta-quill-util';\nimport { Subscription } from '../../util/observable';\nimport { AjudaModalComponent } from '../ajuda/ajuda.modal.component';\nimport { AtalhosModalComponent } from '../ajuda/atalhos.modal.component';\nimport { LexmlEtaComponent } from '../lexml-eta.component';\nimport { atualizarNotaAlteracaoAction } from './../../model/lexml/acao/atualizarNotaAlteracaoAction';\nimport { isNumeracaoValidaPorTipo } from './../../model/lexml/numeracao/numeracaoUtil';\nimport { ComandoEmendaModalComponent } from './../comandoEmenda/comandoEmenda.modal.component';\nimport { assistenteAlteracaoDialog } from './assistenteAlteracaoDialog';\nimport { editarNotaAlteracaoDialog } from './editarNotaAlteracaoDialog';\nimport { informarNormaDialog } from './informarNormaDialog';\nimport { RevisaoElemento } from '../../model/revisao/revisao';\nimport { transformarAction } from '../../model/lexml/acao/transformarAction';\nimport { LexmlEmendaConfig } from '../../model/lexmlEmendaConfig';\nimport { isRevisaoDeExclusao, setCheckedElement } from '../../redux/elemento/util/revisaoUtil';\nimport { aceitarRevisaoAction } from '../../model/lexml/acao/aceitarRevisaoAction';\nimport { rejeitarRevisaoAction } from '../../model/lexml/acao/rejeitarRevisaoAction';\nimport { TextoDiff, exibirDiferencasDialog } from './exibirDiferencaDialog';\nimport { EtaContainerRevisao } from '../../util/eta-quill/eta-container-revisao';\nimport { DescricaoSituacao } from '../../model/dispositivo/situacao';\nimport { EtaContainerOpcoes } from '../../util/eta-quill/eta-container-opcoes';\nimport { buscaDispositivoById } from '../../model/lexml/hierarquia/hierarquiaUtil';\nimport { exibirDiferencaAction } from '../../model/lexml/acao/exibirDiferencaAction';\nimport { alertarInfo } from '../../redux/elemento/util/alertaUtil';\nimport { SufixosModalComponent } from '../sufixos/sufixos.modal.componet';\n\n@customElement('lexml-eta-editor')\nexport class EditorComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  @query('lexml-ajuda-modal')\n  private ajudaModal!: AjudaModalComponent;\n\n  @query('lexml-atalhos-modal')\n  private atalhosModal!: AtalhosModalComponent;\n\n  @query('lexml-emenda-comando-modal')\n  private comandoEmendaModal!: ComandoEmendaModalComponent;\n\n  @query('lexml-sufixos-modal')\n  private sufixosModal!: SufixosModalComponent;\n\n  @query('#btnAceitarTodasRevisoes')\n  private btnAceitarTodasRevisoes!: HTMLButtonElement;\n\n  @query('#btnRejeitarTodasRevisoes')\n  private btnRejeitarTodasRevisoes!: HTMLButtonElement;\n\n  private modo = ClassificacaoDocumento.EMENDA;\n\n  private _quill?: EtaQuill;\n  private get quill(): EtaQuill {\n    return this._quill as EtaQuill;\n  }\n\n  private eventosOnChange: StateType[] = [];\n\n  private inscricoes: Subscription[] = [];\n  private timerOnChange?: any;\n\n  private _idSwitchRevisao = 'chk-em-revisao';\n  private _idBadgeQuantidadeRevisao = 'badge-marca-alteracao';\n\n  constructor() {\n    super();\n    this.tabIndex = -1;\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  async firstUpdated(): Promise<void> {\n    this.inicializar(this.configEditor());\n    this.querySelectorAll('.ql-bold, .ql-italic, .ql-script').forEach(tool => {\n      tool.addEventListener('click', (event: any) => {\n        event.stopImmediatePropagation();\n      });\n    });\n  }\n\n  stateChanged(state: any): void {\n    if (!this.quill) {\n      this.quillNaoInicializado(state);\n      return;\n    }\n    this.quill!.undoEstruturaVazio = (state.elementoReducer.past ?? []).length === 0;\n    this.quill!.redoEstruturaVazio = (state.elementoReducer.future ?? []).length === 0;\n\n    if (state.elementoReducer.ui) {\n      if (state.elementoReducer.ui.message) {\n        //this.alertar(state.elementoReducer.ui.message.descricao);\n        alertarInfo(state.elementoReducer.ui.message.descricao);\n      } else if (state.elementoReducer.ui.events[0]?.stateType !== 'AtualizacaoAlertas') {\n        this.processarStateEvents(state.elementoReducer.ui.events);\n      }\n    }\n  }\n\n  disconnectedCallback(): void {\n    this.inscricoes.forEach((i: Subscription) => i.cancel());\n    this.destroiQuill();\n    super.disconnectedCallback();\n  }\n\n  @property({ type: Boolean })\n  exibirBotoesParaTratarTodas = false;\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          --lx-eta-editor-height: 100%;\n          --lx-eta-editor-overflow: display;\n        }\n\n        lexml-eta-editor .ql-editor {\n          white-space: normal;\n        }\n\n        #lx-eta-editor {\n          overflow: var(--lx-eta-editor-overflow);\n          display: block;\n          height: var(--heightEmenda);\n        }\n        .sl-toast-stack sl-alert::part(base) {\n          background-color: var(--sl-color-danger-100);\n        }\n        .checkBoxRevisao {\n          padding: 3px 5px;\n          margin: 5px 5px 5px 4px;\n        }\n      </style>\n      <div id=\"lx-eta-box\">\n        <div id=\"lx-eta-barra-ferramenta\">\n          <button class=\"ql-bold\" title=\"Negrito (Ctrl+b)\"></button>\n          <button class=\"ql-italic\" title=\"Itlico (Ctrl+i)\"></button>\n          <button class=\"ql-script\" value=\"sub\" title=\"Subscrito\"></button>\n          <button class=\"ql-script\" value=\"super\" title=\"Sobrescrito\"></button>\n\n          <button @click=${this.onClickUndo} class=\"lx-eta-ql-button lx-eta-btn-desfazer\" title=\"Desfazer (Ctrl+Z)\">\n            <svg class=\"icon-undo-redo\" id=\"undo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n          <button @click=${this.onClickRedo} class=\"lx-eta-ql-button\" title=\"Refazer (Ctrl+y)\">\n            <svg class=\"icon-undo-redo lx-eta-rebate-180-graus\" id=\"redo\" viewBox=\"0 0 512 512\">\n              <path\n                d=\"M488,256c0,123.4-100.5,223.9-223.9,223.9c-48.8,0-95.2-15.6-134.2-44.9c-14.1-10.6-17-30.7-6.4-44.8 c10.6-14.1,30.6-16.9,44.8-6.4c27.8,20.9,61,31.9,95.9,31.9c88.1,0,159.8-71.7,159.8-159.8S352.3,96.2,264.2,96.2 c-37.5,0-73.1,13.5-101.3,36.6L208,178c17,17,5,46.1-19.1,46.1H43.2c-10.6,0-19.2-8.6-19.2-19.2V59C24,35,53.1,23,70.1,40l47.6,47.6 c40.2-34.9,91.8-55.5,146.4-55.5C387.5,32.1,488,132.6,488,256z\"\n              />\n            </svg>\n          </button>\n          <button type=\"button\" class=\"ql-clean\" title=\"Remover formatao\">\n            <svg class=\"\" viewBox=\"0 0 18 18\">\n              <line class=\"ql-stroke\" x1=\"5\" x2=\"13\" y1=\"3\" y2=\"3\"></line>\n              <line class=\"ql-stroke\" x1=\"6\" x2=\"9.35\" y1=\"12\" y2=\"3\"></line>\n              <line class=\"ql-stroke\" x1=\"11\" x2=\"15\" y1=\"11\" y2=\"15\"></line>\n              <line class=\"ql-stroke\" x1=\"15\" x2=\"11\" y1=\"11\" y2=\"15\"></line>\n              <rect class=\"ql-fill\" height=\"1\" rx=\"0.5\" ry=\"0.5\" width=\"7\" x=\"2\" y=\"14\"></rect>\n            </svg>\n          </button>\n\n          <lexml-switch-revisao\n          class=\"revisao-container\"\n          .nomeSwitch=\"${this._idSwitchRevisao}\"\n          .nomeBadgeQuantidadeRevisao=\"${this._idBadgeQuantidadeRevisao}\"\n          modo=\"${this.modo}\"\n          >\n          </lexml-switch-revisao>\n\n          <sl-button class=\"button-navegacao-marca\" variant=\"default\" size=\"small\" circle @click=${(): void => this.navegarEntreMarcasRevisao('abaixo')}>\n            <sl-icon-button name=\"arrow-down\"></sl-icon-button>\n          </sl-button>\n\n          <sl-button class=\"button-navegacao-marca\" variant=\"default\" size=\"small\" circle @click=${(): void => this.navegarEntreMarcasRevisao('acima')}>\n            <sl-icon-button name=\"arrow-up\"></sl-icon-button>\n          </sl-button>\n\n          ${this.exibirBotoesParaTratarTodas ? this.renderBotoesParaTratarTodasRevisoes() : ''}\n\n          <input type=\"button\" @click=${this.artigoOndeCouber} class=\"${'ql-hidden'} btn--artigoOndeCouber\" value=\"Propor artigo onde couber\" title=\"Artigo onde couber\"></input>\n          <div class=\"mobile-buttons\">\n            <button class=\"mobile-button btn-comando\" title=\"Comando\" @click=${this.showComandoEmendaModal}>\n              <sl-icon name=\"code\"></sl-icon>\n              <span>Comando</span>\n            </button>\n            <button class=\"mobile-button btn-dicas\" title=\"Dicas\" @click=${this.showAjudaModal}>\n              <sl-icon name=\"lightbulb\"></sl-icon>\n              <span>Dicas</span>\n            </button>\n            <button class=\"mobile-button\" title=\"Atalhos\" @click=${this.showAtalhosModal}>\n              <sl-icon name=\"keyboard\"></sl-icon>\n              <span>Atalhos</span>\n            </button>\n          </div>\n        </div>\n        <div id=\"lx-eta-editor\"></div>\n      </div>\n      <div id=\"lx-eta-buffer\"><p></p></div>\n      <lexml-ajuda-modal></lexml-ajuda-modal>\n      <lexml-emenda-comando-modal></lexml-emenda-comando-modal>\n      <lexml-atalhos-modal></lexml-atalhos-modal>\n      <lexml-sufixos-modal></lexml-sufixos-modal>\n    `;\n  }\n\n  private renderBotoesParaTratarTodasRevisoes(): TemplateResult {\n    return html`\n      <sl-icon-button id=\"btnRejeitarTodasRevisoes\" name=\"x\" label=\"\" title=\"Rejeitar Revises\" ?disabled=${true} @click=${(): void => this.rejeitarTodasRevisoes()}>\n        Rejeitar Revises\n      </sl-icon-button>\n\n      <sl-icon-button id=\"btnAceitarTodasRevisoes\" name=\"check-lg\" label=\"\" title=\"Aceitar Revises\" ?disabled=${true} @click=${(): void => this.aceitarTodasRevisoes()}>\n        Aceitar Revises\n      </sl-icon-button>\n    `;\n  }\n\n  private showAjudaModal(): void {\n    this.ajudaModal.show();\n  }\n\n  private showAtalhosModal(): void {\n    this.atalhosModal.show();\n  }\n\n  private showComandoEmendaModal(): void {\n    this.comandoEmendaModal.show();\n  }\n\n  private formatacaoAlterada(): void {\n    const texto = document.getSelection()?.toString();\n    if (texto) {\n      this.agendarEmissaoEventoOnChange('toolbar');\n    }\n  }\n\n  private onClickUndo(): void {\n    this.quill.undo();\n  }\n\n  private onClickRedo(): void {\n    this.quill.redo();\n  }\n\n  private artigoOndeCouber(): void {\n    //rootStore.dispatch(validarArticulacaAction.execute());\n  }\n\n  private onSelectionChange: SelectionChangeHandler = (range: RangeStatic, oldRange: RangeStatic, source: Sources): void => {\n    if (range?.length === 0 && source === Quill.sources.USER) {\n      this.ajustarLinkParaNorma();\n    }\n  };\n\n  private ajustarLinkParaNorma(): void {\n    const linkTooltip = document.querySelector('a.ql-preview');\n    const href = linkTooltip?.getAttribute('href');\n    if (href?.startsWith('urn')) {\n      const url = 'https://normas.leg.br/?urn=' + href;\n      linkTooltip!.setAttribute('href', url);\n      linkTooltip!.innerHTML = getNomeExtenso(href);\n    }\n  }\n\n  private onBold(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('bold', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onItalic(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('italic', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onScript(value: any): void {\n    if (this.quill.keyboard.verificarOperacaoTecladoPermitida()) {\n      this.quill.format('script', value);\n      this.formatacaoAlterada();\n    }\n  }\n\n  private onOperacaoInvalida(): void {\n    this.alertar('Operao no permitida.');\n  }\n\n  private isDesmembramento(textoAnterior: string, textoLinhaAtual: string, textoNovaLinha: string): boolean {\n    return (textoLinhaAtual + textoNovaLinha).localeCompare(textoAnterior) !== 0;\n  }\n\n  private adicionarElemento(range: RangeStatic): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n\n    const indexInicio: number = this.quill.inicioConteudoAtual ?? 0;\n    const indexFim: number = indexInicio + blotConteudo!.tamanho ?? 0;\n    let textoLinha = '';\n    let textoNovaLinha = '';\n\n    if (range.index === indexInicio) {\n      textoLinha = '';\n      textoNovaLinha = blotConteudo.html;\n    } else if (range.index === indexFim) {\n      textoLinha = blotConteudo.html;\n      textoNovaLinha = '';\n    } else {\n      const tamanhoNovaLinha: number = indexFim - range.index;\n      textoLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, 0, blotConteudo.tamanho - tamanhoNovaLinha);\n      textoNovaLinha = this.quill.getConteudoHtmlParteLinha(blotConteudo, range.index - indexInicio, tamanhoNovaLinha);\n    }\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (this.isDesmembramento(blotConteudo.htmlAnt, textoLinha, textoNovaLinha)) {\n      const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha + textoNovaLinha, linha.numero, linha.hierarquia);\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n    rootStore.dispatch(adicionarElementoAction.execute(elemento, textoNovaLinha));\n  }\n\n  private editarNotaAlteracao(elemento: Elemento): void {\n    editarNotaAlteracaoDialog(elemento, this.quill, rootStore);\n  }\n\n  private async renumerarElemento(): Promise<any> {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(\n      linha!.uuid ?? 0,\n      linha!.uuid2 ?? '',\n      linha.lexmlId,\n      linha!.tipo ?? '',\n      '',\n      linha.numero,\n      linha.hierarquia,\n      linha.descricaoSituacao,\n      linha.existeNaNormaAlterada\n    );\n\n    if (!podeRenumerar(rootStore.getState().elementoReducer.articulacao, elemento)) {\n      this.alertar('Nessa situao, no  possvel renumerar o dispositivo');\n      return;\n    }\n\n    const dialogElem = document.createElement('sl-dialog');\n    document.body.appendChild(dialogElem);\n\n    dialogElem.label = 'Informar numerao';\n    dialogElem.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    const getMsgPlaceholder = (tipo: string): string => {\n      const tp = tipo.toLowerCase();\n      const descricao = TipoDispositivo[tp].descricao?.toLowerCase();\n      if (!tp) {\n        return '';\n      } else if (['artigo', 'paragrafo', 'item'].includes(tp)) {\n        return 'Digite o nmero do ' + descricao + '. Ex: 5, 6-A' + (tp === 'paragrafo' ? ', nico' : '');\n      } else if (tp === 'alinea') {\n        return 'Digite a letra da ' + descricao + '. Ex: b, c-A';\n      } else {\n        const genero = ['parte', 'secao', 'subsecao'].includes(tp) ? 'a' : 'o';\n        return `Digite o nmero romano d${genero} ${descricao}. Ex: II, III-A'`;\n      }\n    };\n\n    const content = document.createRange().createContextualFragment(`\n      <div class=\"input-validation-required\">\n        <sl-input type=\"text\" help-text=\"${getMsgPlaceholder(elemento.tipo ?? '')}\" label=\"Numerao do dispositivo:\" clearable></sl-input>\n        <br/>\n      </div>\n      <br/>\n      <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n        <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n        <div class=\"erro\"></div>\n      </sl-alert>\n      <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n      <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n    `);\n\n    const input = <SlInput>content.querySelector('sl-input');\n    const rotuloAtual = `${rotuloParaEdicao(linha.blotRotulo!.rotulo)}`;\n    input.value = rotuloAtual;\n\n    const botoes = content.querySelectorAll('sl-button');\n    const cancelar = botoes[0];\n    const ok = botoes[1];\n\n    const erro = <HTMLDivElement>content.querySelector('.erro');\n    const alerta = content.querySelector('sl-alert');\n\n    ok.onclick = (): void => {\n      this.quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n\n      if (input.value?.trim().toLowerCase() !== rotuloAtual?.toLowerCase()) {\n        rootStore.dispatch(renumerarElementoAction.execute(elemento, input.value.trim()));\n      }\n    };\n\n    cancelar.onclick = (): void => {\n      this.quill.focus();\n      dialogElem?.hide();\n      dialogElem?.remove();\n    };\n\n    const validar = (): string => {\n      const numeracao = input.value;\n      if (/^\\s*$/.test(numeracao)) {\n        return 'A numerao no pode ser vazia.';\n      }\n      return '';\n    };\n\n    const validarInput = (evt: any): void => {\n      let msgErro = validar();\n      if (!msgErro && elemento.tipo && !isNumeracaoValidaPorTipo(input.value, elemento.tipo)) {\n        msgErro = 'Numerao invlida.';\n      }\n      erro.innerText = msgErro;\n      msgErro ? alerta?.show() : alerta?.hide();\n      ok.disabled = Boolean(msgErro);\n      if (!ok.disabled) {\n        if (evt.key === 'Enter') {\n          ok.click();\n        }\n      }\n    };\n\n    input.addEventListener('keyup', validarInput);\n    input.addEventListener('sl-clear', validarInput);\n\n    dialogElem.appendChild(content);\n    dialogElem?.show();\n    ok.disabled = Boolean(validar());\n    setTimeout(() => (input as SlInput).focus(), 0);\n  }\n\n  private toggleExistencia(): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(\n      linha!.uuid ?? 0,\n      linha!.uuid2 ?? '',\n      linha.lexmlId,\n      linha!.tipo ?? '',\n      '',\n      linha.numero,\n      linha.hierarquia,\n      linha.descricaoSituacao,\n      linha.existeNaNormaAlterada\n    );\n    this.toggleExistenciaElemento(elemento);\n  }\n\n  private adicionaAgrupador(): void {\n    this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento);\n  }\n\n  private adicionarAgrupadorArtigo(elemento: Elemento): void {\n    adicionarAgrupadorArtigoDialog(elemento, this.quill, rootStore);\n  }\n\n  private toggleExistenciaElemento(elemento: Elemento): void {\n    const action = elemento.existeNaNormaAlterada ? considerarElementoNovoNaNorma : considerarElementoExistenteNaNorma;\n    rootStore.dispatch(action.execute(elemento));\n  }\n\n  private removerElementoSemTexto(key: string): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n    rootStore.dispatch(removerElementoSemTextoAction.execute(elemento, key));\n  }\n\n  private removerElemento(): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const elementoLinhaAnterior = this.quill.linhaAtual.prev?.elemento;\n    const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n    rootStore.dispatch(removerElementoAction.execute(elemento, elementoLinhaAnterior));\n  }\n\n  private moverElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    if (linha) {\n      const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n      const textoLinha = blotConteudo.html;\n\n      const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n      if (ev.key === 'ArrowUp') {\n        rootStore.dispatch(moverElementoAcimaAction.execute(elemento));\n      } else if (ev.key === 'ArrowDown') {\n        rootStore.dispatch(moverElementoAbaixoAction.execute(elemento));\n      }\n    }\n  }\n\n  private transformarElemento(ev: KeyboardEvent): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n    const textoLinha = blotConteudo.html;\n\n    const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, textoLinha, linha.numero, linha.hierarquia);\n\n    if (ev.key.toLowerCase() === 'o') {\n      rootStore.dispatch(transformarAction(elemento, TipoDispositivo.omissis.name!));\n    } else if (Keyboard.keys.TAB) {\n      rootStore.dispatch(ev.shiftKey ? shiftTabAction(elemento) : tabAction(elemento));\n    }\n  }\n\n  private elementoSelecionado(uuid: number): void {\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n    if (linha) {\n      const elemento: Elemento = this.criarElemento(uuid, linha!.uuid2, linha.lexmlId, linha.tipo ?? '', '', linha.numero, linha.hierarquia);\n      rootStore.dispatch(elementoSelecionadoAction.execute(elemento));\n      this.quill.processandoMudancaLinha = false;\n    }\n  }\n\n  private undoRedoEstrutura(tipo: string): void {\n    //\n    // TODO: Chamar action para undo ou redo - estrutura.\n    //\n    if (tipo === 'undo') {\n      rootStore.dispatch(UndoAction());\n    } else {\n      rootStore.dispatch(redoAction());\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    const ultimoEventoElementoSelecionado = events.filter((ev: StateEvent) => ev.stateType === StateType.ElementoSelecionado).slice(-1)[0];\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.DocumentoCarregado:\n          this.destroiQuill();\n          this.inicializar(this.configEditor());\n          this.carregarArticulacao(event.elementos ?? []);\n          break;\n\n        case StateType.InformarDadosAssistente:\n          assistenteAlteracaoDialog(event.elementos![0], this.quill, rootStore, adicionarAlteracaoComAssistenteAction, this.lexmlEtaConfig.urlAutocomplete);\n          break;\n\n        case StateType.InformarNorma:\n          informarNormaDialog(event.elementos![0], this.quill, rootStore, atualizarReferenciaElementoAction, this.lexmlEtaConfig.urlAutocomplete);\n          break;\n\n        case StateType.ElementoIncluido:\n          this.inserirNovoElementoNoQuill(event.elementos![0], event.referencia as Elemento, true);\n          this.inserirNovosElementosNoQuill(event, true);\n          // this.atualizarReferenciaEmRevisoesDeExclusaoSeNecessario(events, event);\n          break;\n\n        case StateType.ElementoModificado:\n        case StateType.ElementoRestaurado:\n          this.atualizarQuill(event);\n          this.atualizarOmissis(event);\n          if (events[events.length - 1] === event) {\n            this.marcarLinha(event);\n          }\n          break;\n\n        case StateType.ElementoSuprimido:\n          this.atualizarSituacao(event);\n          if (events[events.length - 1] === event) {\n            this.marcarLinha(event);\n          }\n          break;\n\n        case StateType.ElementoRemovido:\n          this.removerLinhaQuill(event);\n          break;\n\n        case StateType.ElementoRenumerado:\n          this.renumerarQuill(event);\n          break;\n\n        case StateType.ElementoValidado:\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoSelecionado:\n          this.atualizarAtributos(event);\n          if (ultimoEventoElementoSelecionado === event) {\n            this.montarMenuContexto(event);\n          }\n          this.atualizarMensagemQuill(event);\n          break;\n\n        case StateType.ElementoMarcado:\n          setTimeout(() => this.marcarLinha(event), 100);\n          break;\n\n        case StateType.SituacaoElementoModificada:\n          this.atualizarQuill(event);\n          this.atualizarSituacao(event);\n          this.atualizarAtributos(event);\n          this.atualizarMensagemQuill(event);\n          this.atualizarOmissis(event);\n          break;\n\n        case StateType.RevisaoAtivada:\n          this.checkedSwitchMarcaAlteracao();\n          break;\n        case StateType.RevisaoDesativada:\n          this.checkedSwitchMarcaAlteracao();\n          this.atualizarEstiloBotaoRevisao();\n          break;\n        case StateType.RevisaoAceita:\n          this.processaRevisoesAceitas(events, event);\n          break;\n        case StateType.RevisaoAdicionalRejeitada:\n          this.removerLinhaQuill(event);\n          break;\n      }\n\n      this.disabledParagrafoElementoRemovido(event);\n      this.quill.limparHistory();\n    });\n\n    this.indicadorMarcaRevisao(events);\n    this.indicadorTextoModificado(events);\n    //this.atualizaQuantidadeRevisao();\n    this.atualizarStatusBotoesRevisao();\n\n    // Os eventos que esto no array abaixo devem emitir um custom event \"ontextchange\"\n    const eventosQueDevemEmitirTextChange = [\n      StateType.ElementoModificado,\n      StateType.ElementoSuprimido,\n      StateType.ElementoRestaurado,\n      StateType.ElementoIncluido,\n      StateType.ElementoRemovido,\n      StateType.ElementoRenumerado,\n    ];\n\n    const eventosFiltrados = events?.filter(ev => eventosQueDevemEmitirTextChange.includes(ev.stateType)).map(ev => ev.stateType);\n\n    if (eventosFiltrados?.length) {\n      // TODO: Implementar lgica do atributo eventosFiltrados, sem repetir os itens\n      this.eventosOnChange.push(...eventosFiltrados);\n\n      this.agendarEmissaoEventoOnChange('stateEvents', eventosFiltrados);\n    }\n  }\n\n  private processaRevisoesAceitas(events: StateEvent[], event: StateEvent): void {\n    if (this.isAceitandoRevisoesDeExclusao(event)) {\n      this.removerLinhaQuill(event);\n    } else {\n      this.atualizarAtributos(event);\n      if (events[events.length - 1] === event) {\n        this.montarMenuContexto(event);\n      }\n      this.atualizarMensagemQuill(event);\n    }\n  }\n\n  private isAceitandoRevisoesDeExclusao(event: StateEvent): boolean {\n    return event.elementos?.some(e => (this.quill.getLinha(e.uuid!)?.elemento.revisao as RevisaoElemento)?.stateType === StateType.ElementoRemovido) ?? false;\n  }\n\n  private existeReinclusaoDoElemento(elementosIncluidos: Elemento[], elemento: Elemento): boolean {\n    return elementosIncluidos.some(elementoIncluido => elementoIncluido.uuid === elemento.uuid);\n  }\n\n  private marcarLinha(event: StateEvent): void {\n    try {\n      this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n      const elemento = event.elementos![0];\n      const linha = this.quill.getLinha(elemento.uuid!)!;\n      this.quill.atualizarLinhaCorrente(linha);\n      this.elementoSelecionado(linha.uuid);\n      const index = this.quill.getIndex(linha.blotConteudo);\n      try {\n        this.quill.setIndex(index, Quill.sources.SILENT);\n        // eslint-disable-next-line no-empty\n      } catch (error) {}\n      if (event.moverParaFimLinha) {\n        setTimeout(() => {\n          const posicao = this.quill.getSelection()!.index + this.quill.linhaAtual.blotConteudo.html.length;\n          this.quill.setSelection(posicao, 0, Quill.sources.USER);\n        }, 0);\n      }\n    } catch (error) {\n      // linha, provavelmente, foi removida do Quill\n    }\n  }\n\n  private processarEscolhaMenu(itemMenu: any): void {\n    if (itemMenu === renumerarElementoAction) {\n      this.renumerarElemento();\n    } else if (itemMenu === atualizarNotaAlteracaoAction) {\n      this.editarNotaAlteracao(this.quill.linhaAtual.elemento);\n    } else if (itemMenu instanceof AdicionarAgrupadorArtigo) {\n      this.adicionarAgrupadorArtigo(this.quill.linhaAtual.elemento);\n    } else if (itemMenu === removerElementoAction) {\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n      const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n      elemento.conteudo!.texto = linha.blotConteudo.html ?? '';\n\n      const elementoLinhaAnterior = this.quill.linhaAtual.prev?.elemento;\n      rootStore.dispatch(itemMenu.execute(elemento, elementoLinhaAnterior));\n    } else if (itemMenu === exibirDiferencaAction) {\n      this.exibirDiferencas(this.quill.linhaAtual.elemento);\n    } else {\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n      const elemento: Elemento = this.criarElemento(linha!.uuid ?? 0, linha!.uuid2, linha.lexmlId, linha!.tipo ?? '', '', linha.numero, linha.hierarquia);\n      elemento.conteudo!.texto = linha.blotConteudo.html ?? '';\n      rootStore.dispatch(itemMenu.execute(elemento));\n    }\n  }\n\n  private inserirNovoElementoNoQuill(elemento: Elemento, referencia: Elemento, selecionarLinha?: boolean): void {\n    const fnSelecionarNovaLinha = (linha: EtaContainerTable, linhaAtual: EtaContainerTable): void => {\n      this.quill.desmarcarLinhaAtual(linhaAtual);\n      this.quill.marcarLinhaAtual(linha);\n      try {\n        this.quill.setIndex(this.quill.getIndex(linha.blotConteudo), Quill.sources.SILENT);\n      } catch (e) {\n        // console.log(e);\n      }\n    };\n\n    const linhaASerReinserida = this.quill.getLinha(elemento.uuid!);\n\n    if (linhaASerReinserida) {\n      linhaASerReinserida.atualizarElemento(elemento);\n      selecionarLinha && fnSelecionarNovaLinha(linhaASerReinserida, this.quill.linhaAtual);\n      return;\n    }\n\n    const linhaRef: EtaContainerTable | undefined = this.quill.getLinha(elemento.elementoAnteriorNaSequenciaDeLeitura?.uuid || referencia.uuid!);\n\n    if (linhaRef) {\n      const novaLinha: EtaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n\n      if (linhaRef.next) {\n        novaLinha.insertInto(this.quill.scroll, linhaRef.next);\n      } else {\n        novaLinha.insertInto(this.quill.scroll);\n      }\n\n      const isEmendaArtigoOndeCouber = rootStore.getState().elementoReducer.modo === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n      if (this.quill.linhaAtual?.blotConteudo.html !== '' || novaLinha.blotConteudo.html === '' || isEmendaArtigoOndeCouber || elemento.tipo === 'Omissis') {\n        selecionarLinha && !this.timerOnChange && fnSelecionarNovaLinha(novaLinha, this.quill.linhaAtual);\n      } else {\n        this.quill.linhaAtual.blotConteudo.htmlAnt = this.quill.linhaAtual.blotConteudo.html;\n      }\n\n      novaLinha.descricaoSituacao = elemento.descricaoSituacao;\n      novaLinha.existeNaNormaAlterada = elemento.existeNaNormaAlterada;\n      novaLinha.setEstilo(elemento!);\n    }\n  }\n\n  private inserirNovosElementosNoQuill(event: StateEvent, selecionarLinha?: boolean): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n\n    for (let i = 1; i < elementos.length; i++) {\n      this.inserirNovoElementoNoQuill(elementos[i], elementos[i - 1], selecionarLinha);\n    }\n  }\n\n  private atualizarSituacao(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento);\n          linha.atualizarElemento(elemento);\n        }\n      }\n    });\n  }\n\n  private atualizarAtributos(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        linha.atualizarElemento(elemento);\n      }\n    });\n  }\n\n  private atualizarOmissis(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento) => {\n      if (elemento.dispositivoAlteracao) {\n        linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n        if (linha && normalizaSeForOmissis(linha.blotConteudo?.html).indexOf(TEXTO_OMISSIS) >= 0) {\n          linha.blotConteudo.html = EtaQuillUtil.montarSpanOmissisAsString();\n        }\n        if (elemento.conteudo?.texto !== linha?.blotConteudo.html) {\n          const texto = normalizaSeForOmissis(elemento.conteudo?.texto ?? '');\n          if (texto.indexOf(TEXTO_OMISSIS) >= 0) {\n            linha?.domNode.classList.add('container_elemento--omissis');\n          }\n        }\n      }\n    });\n  }\n\n  private atualizarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, elemento.tipo === 'Ementa' ? undefined : linha);\n      if (linha) {\n        let nivelAlerado = false;\n\n        if (elemento.editavel !== linha.editavel) {\n          linha.editavel = elemento.editavel;\n        }\n\n        if (elemento.rotulo !== linha.blotRotulo?.html) {\n          linha.numero = elemento.numero ?? '';\n          linha.blotRotulo?.format(EtaBlotRotulo.blotName, elemento.rotulo);\n        }\n\n        if (elemento.nivel !== linha.nivel) {\n          linha.nivel = elemento.nivel;\n          linha.format(EtaContainerTable.blotName, elemento);\n          nivelAlerado = true;\n        }\n\n        if (elemento.agrupador !== linha.agrupador) {\n          linha.agrupador = elemento.agrupador;\n          linha.blotRotulo?.format(EtaBlotRotulo.formatoStyle, elemento);\n          if (!nivelAlerado) {\n            linha.format(EtaContainerTable.blotName, elemento);\n          }\n        }\n\n        // Substituir o texto apenas quando precisa evita retorno do cursor para o incio da linha.\n        const novoTexto = elemento.conteudo?.texto ?? '';\n        if (linha.blotConteudo.html !== novoTexto) {\n          linha.blotConteudo.html = elemento.tipo === 'Omissis' ? EtaQuillUtil.montarSpanOmissisAsString() : novoTexto;\n        }\n\n        if (elemento.descricaoSituacao !== linha.descricaoSituacao) {\n          linha.descricaoSituacao = elemento.descricaoSituacao;\n          linha.setEstilo(elemento);\n        }\n\n        linha.atualizarElemento(elemento);\n\n        if (linha.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0 && !this.elementoRemovidoEmRevisao(elemento)) {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n\n          if (this.isMensagemSufixos(elemento)) {\n            if (avisoJaExiste === null) {\n              EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n            }\n          } else {\n            EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n          }\n        }\n      }\n    });\n  }\n\n  private elementoRemovidoEmRevisao(elemento: Elemento): boolean {\n    if (elemento.revisao && (elemento.revisao as RevisaoElemento).stateType === StateType.ElementoRemovido) {\n      return true;\n    }\n    return false;\n  }\n\n  private removerLinhaQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.forEach((elemento: Elemento, index) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha) || this.quill.getLinha(elemento.uuid ?? 0);\n      if (linha) {\n        if (elemento.revisao && (!linha.elemento.revisao || !isRevisaoDeExclusao(linha.elemento.revisao as RevisaoElemento))) {\n          linha.atualizarElemento(elemento);\n          index === 0 && this.montarMenuContexto(event);\n        } else {\n          linha.remove();\n        }\n      }\n    });\n\n    const range = this.quill.getSelection();\n    if (range) {\n      const linhaCursor: EtaContainerTable = this.quill.getLine(range.index - 1)[0].linha;\n\n      const index: number = this.quill.getIndex(linhaCursor.blotConteudo);\n\n      this.quill.setSelection(index, 0, Quill.sources.SILENT);\n      this.quill.marcarLinhaAtual(linhaCursor);\n    }\n  }\n\n  private renumerarQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha) || this.quill.getLinha(elemento.uuid ?? 0);\n      if (linha) {\n        linha.blotRotulo?.format(EtaBlotRotulo.blotName, elemento.rotulo);\n      }\n    });\n  }\n\n  private atualizarMensagemQuill(event: StateEvent): void {\n    const elementos: Elemento[] = event.elementos ?? [];\n    let linha: EtaContainerTable | undefined;\n\n    elementos.map((elemento: Elemento) => {\n      linha = this.quill.getLinha(elemento.uuid ?? 0, linha);\n\n      if (linha) {\n        if (linha?.children.length === 2) {\n          linha.children.tail.remove();\n        }\n\n        if (elemento.mensagens && elemento.mensagens.length > 0 && !this.elementoRemovidoEmRevisao(elemento)) {\n          const avisoJaExiste = document.getElementById('onmodalsufixos');\n\n          if (this.isMensagemSufixos(elemento)) {\n            if (avisoJaExiste === null) {\n              EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n            }\n          } else {\n            EtaQuillUtil.criarContainerMensagens(elemento).insertInto(linha);\n          }\n        }\n      }\n    });\n  }\n\n  private isMensagemSufixos(elemento: Elemento): boolean | undefined {\n    return elemento.mensagens && elemento.mensagens.length === 1 && elemento.mensagens[0].nomeEvento === 'onmodalsufixos';\n  }\n\n  private montarMenuContexto(event: StateEvent): void {\n    const elemento: Elemento = event.elementos ? event.elementos[0] : new Elemento();\n    const acoesMenu: ElementoAction[] = (elemento?.acoesPossiveis ?? []).filter((acao: ElementoAction) => isAcaoMenu(acao));\n\n    if (acoesMenu.length > 0) {\n      const blotMenu: EtaBlotMenu = new EtaBlotMenu();\n      const blotMenuConteudo: EtaBlotMenuConteudo = new EtaBlotMenuConteudo(this.quill.linhaAtual.containerDireito.alinhamentoMenu);\n      const callback: any = (itemMenu: string) => {\n        this.processarEscolhaMenu(itemMenu);\n        this.quill.focus();\n      };\n\n      new EtaBlotMenuBotao().insertInto(blotMenu);\n\n      acoesMenu.forEach((acao: ElementoAction) => {\n        new EtaBlotMenuItem(acao, callback).insertInto(blotMenuConteudo);\n      });\n      blotMenuConteudo.insertInto(blotMenu);\n\n      this.quill.linhaAtual.blotInsideContainerDireito?.remove();\n      blotMenu.insertInto(this.quill.linhaAtual.containerDireito);\n    }\n  }\n\n  private criarElemento(\n    uuid: number,\n    uuid2: string,\n    lexmlId: string,\n    tipo: string,\n    html: string,\n    numero: string,\n    hierarquia: any,\n    descricaoSituacao?: string,\n    existeNaNormaAlterada?: boolean\n  ): Elemento {\n    const elemento: Elemento = new Elemento();\n    elemento.uuid = uuid;\n    elemento.uuid2 = uuid2;\n    elemento.lexmlId = lexmlId;\n    elemento.tipo = tipo;\n    elemento.numero = numero;\n    elemento.conteudo = { texto: html };\n    elemento.hierarquia = hierarquia;\n    elemento.descricaoSituacao = descricaoSituacao;\n    elemento.existeNaNormaAlterada = existeNaNormaAlterada;\n    return elemento;\n  }\n\n  private inicializar(op: QuillOptionsStatic): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    const bufferHtml: HTMLElement = this.getHtmlElement('lx-eta-buffer');\n\n    EtaQuill.configurar();\n    this._quill = new EtaQuill(editorHtml, bufferHtml, op);\n    this.quill.on('selection-change', this.onSelectionChange);\n    this.inscricoes.push(this.quill.keyboard.operacaoTecladoInvalida.subscribe(this.onOperacaoInvalida.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.adicionaElementoTeclaEnter.subscribe(this.adicionarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.moveElemento.subscribe(this.moverElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.removeElemento.subscribe(this.removerElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.removeElementoSemTexto.subscribe(this.removerElementoSemTexto.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.renumeraElemento.subscribe(this.renumerarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.transformaElemento.subscribe(this.transformarElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.toggleExistencia.subscribe(this.toggleExistencia.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.adicionaAgrupador.subscribe(this.adicionaAgrupador.bind(this)));\n    this.inscricoes.push(this.quill.undoRedoEstrutura.subscribe(this.undoRedoEstrutura.bind(this)));\n    this.inscricoes.push(this.quill.elementoSelecionado.subscribe(this.elementoSelecionado.bind(this)));\n\n    this.inscricoes.push(this.quill.observableSelectionChange.subscribe(this.atualizarTextoElemento.bind(this)));\n    this.inscricoes.push(this.quill.keyboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(this.quill.clipboard.onChange.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(onChangeColarDialog.subscribe(this.agendarEmissaoEventoOnChange.bind(this)));\n    this.inscricoes.push(this.quill.clipboard.onPasteTextoArticulado.subscribe(this.onPasteTextoArticulado.bind(this)));\n\n    editorHtml.addEventListener('rotulo', (event: any) => {\n      event.stopImmediatePropagation();\n      this.renumerarElemento();\n    });\n\n    editorHtml.addEventListener('nota-alteracao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.editarNotaAlteracao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('toggle-existencia', (event: any) => {\n      event.stopImmediatePropagation();\n      this.toggleExistenciaElemento(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('mensagem', (event: any) => {\n      event.stopImmediatePropagation();\n\n      const linha: EtaContainerTable = this.quill.linhaAtual;\n\n      if (linha) {\n        if (AutoFix.RENUMERAR_DISPOSITIVO === event.detail?.mensagem?.descricao) {\n          this.renumerarElemento();\n        } else {\n          const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n          const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, blotConteudo.html, linha.numero, linha.hierarquia);\n          rootStore.dispatch(autofixAction.execute(elemento, event.detail.mensagem));\n        }\n      }\n    });\n\n    editorHtml.addEventListener('aceitar-revisao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.aceitarRevisao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('rejeitar-revisao', (event: any) => {\n      event.stopImmediatePropagation();\n      this.rejeitarRevisao(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('exibir-diferencas', (event: any) => {\n      event.stopImmediatePropagation();\n      this.exibirDiferencas(event.detail.elemento);\n    });\n\n    editorHtml.addEventListener('onmodalsufixos', (event: any) => {\n      event.stopImmediatePropagation();\n      this.exibirModalSufixos();\n    });\n    this.configListenersEta();\n  }\n\n  exibirModalSufixos(): void {\n    if (this.sufixosModal !== null) {\n      this.sufixosModal.show();\n    }\n  }\n\n  exibirDiferencas(elemento: Elemento): void {\n    const diff: TextoDiff = new TextoDiff();\n    diff.textoAtual = elemento.conteudo!.texto!;\n    diff.quill = this.quill;\n\n    const revisao = elemento.revisao as RevisaoElemento;\n    const d = buscaDispositivoById(rootStore.getState().elementoReducer.articulacao, elemento.lexmlId!);\n\n    if (revisao) {\n      diff.textoAntesRevisao = revisao.elementoAntesRevisao!.conteudo!.texto!;\n\n      if (d && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO && d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        diff.textoOriginal = d!.situacao.dispositivoOriginal!.conteudo!.texto!;\n      } else {\n        diff.textoOriginal = elemento.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL ? diff.textoAtual : diff.textoAntesRevisao;\n        diff.adicionado = true;\n      }\n\n      exibirDiferencasDialog(diff);\n    } else {\n      if (d && d!.situacao.dispositivoOriginal?.conteudo !== undefined) {\n        diff.textoOriginal = d!.situacao.dispositivoOriginal!.conteudo!.texto!;\n      }\n      exibirDiferencasDialog(diff);\n    }\n  }\n\n  aceitarRevisao(elemento: Elemento): void {\n    rootStore.dispatch(aceitarRevisaoAction.execute(elemento, undefined));\n    this.alertaGlobalRevisao();\n    this.setCursorCurrentLine();\n  }\n\n  setCursorCurrentLine(): void {\n    this.quill.focus();\n  }\n\n  rejeitarRevisao(elemento: Elemento): void {\n    rootStore.dispatch(rejeitarRevisaoAction.execute(elemento, undefined));\n    this.setCursorCurrentLine();\n  }\n\n  aceitarTodasRevisoes(): void {\n    rootStore.dispatch(aceitarRevisaoAction.execute(undefined as any, undefined));\n  }\n\n  rejeitarTodasRevisoes(): void {\n    rootStore.dispatch(rejeitarRevisaoAction.execute(undefined as any, undefined));\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string, statesType: StateType[] = []): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = setTimeout(() => this.emitirEventoOnChange(origemEvento, statesType), 1000);\n  }\n\n  private atualizarTextoElemento(linhaAtual: EtaContainerTable): void {\n    if (linhaAtual?.blotConteudo?.alterado) {\n      const elemento: Elemento = this.criarElemento(\n        linhaAtual.uuid,\n        linhaAtual.uuid2,\n        linhaAtual.lexmlId,\n        linhaAtual.tipo,\n        linhaAtual.blotConteudo?.html ?? '',\n        linhaAtual.numero,\n        linhaAtual.hierarquia\n      );\n      rootStore.dispatch(atualizarTextoElementoAction.execute(elemento));\n    }\n  }\n\n  private alertaGlobalVerificaRenumeracao(): void {\n    const idAlerta = 'alerta-global-renumeracao';\n    const dispositivos = CmdEmdUtil.getDispositivosAdicionados(rootStore.getState().elementoReducer.articulacao);\n\n    if (dispositivos.length && CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(dispositivos)) {\n      const alerta = {\n        id: idAlerta,\n        tipo: 'warning',\n        mensagem:\n          'Os rtulos apresentados servem apenas para o posicionamento correto do novo dispositivo no texto. Sero feitas as renumeraes necessrias no momento da consolidao das emendas.',\n        podeFechar: true,\n      };\n\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else {\n      rootStore.dispatch(removerAlerta(idAlerta));\n    }\n  }\n\n  private alertaGlobalVerificaCorrelacao(): void {\n    const dispositivosEmenda = (document.querySelector('lexml-eta') as LexmlEtaComponent).getDispositivosEmenda() || [];\n    const listaLexmlIds = Object.values(dispositivosEmenda)\n      .flat(1)\n      .map(obj => obj.id);\n    const artigos = [...new Set(listaLexmlIds.map(lexmlId => lexmlId.split('_').filter(dispositivo => dispositivo.startsWith('art'))[0]))];\n\n    if (artigos.length > 1) {\n      const alerta = {\n        id: 'alerta-global-correlacao',\n        tipo: 'info',\n        mensagem:\n          'Cada emenda pode referir-se a apenas um dispositivo, salvo se houver correlao entre dispositivos. Verifique se h correlao entre os dispositivos emendados antes de submet-la.',\n        podeFechar: true,\n        exibirComandoEmenda: true,\n      };\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === 'alerta-global-correlacao')) {\n      rootStore.dispatch(removerAlerta('alerta-global-correlacao'));\n    }\n  }\n\n  private alertaGlobalRevisao(): void {\n    const id = 'alerta-global-revisao';\n    const revisoesElementos = document.getElementsByClassName('blot__revisao');\n\n    if (revisoesElementos.length > 0) {\n      const alerta = {\n        id: id,\n        tipo: 'info',\n        mensagem: 'Este documento contm marcas de reviso e no deve ser protocolado at que estas sejam removidas.',\n        podeFechar: true,\n        exibirComandoEmenda: true,\n      };\n      rootStore.dispatch(adicionarAlerta(alerta));\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === id)) {\n      rootStore.dispatch(removerAlerta(id));\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  private emitirEventoOnChange(origemEvento: string, statesType: StateType[] = []): void {\n    this.atualizarTextoElemento(this.quill.linhaAtual);\n\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n\n    if (this.eventosOnChange?.length && (this.eventosOnChange.includes(StateType.ElementoIncluido) || this.eventosOnChange.includes(StateType.ElementoRemovido))) {\n      this.alertaGlobalVerificaRenumeracao();\n    }\n\n    this.alertaGlobalVerificaCorrelacao();\n    this.alertaGlobalRevisao();\n    this.eventosOnChange = [];\n    this.timerOnChange = null;\n  }\n\n  private carregarArticulacao(elementos: Elemento[]): void {\n    setTimeout(() => {\n      if (!this.quill) return;\n      this.quill.getLine(0)[0].remove();\n      elementos.forEach((elemento: Elemento) => {\n        const etaContainerTable = EtaQuillUtil.criarContainerLinha(elemento);\n        etaContainerTable.insertInto(this.quill.scroll);\n        etaContainerTable.setEstilo(elemento);\n\n        elemento.tipo === TipoDispositivo.generico.tipo && rootStore.dispatch(validarElementoAction.execute(elemento));\n      });\n      this.quill.limparHistory();\n      if (elementos.length > 1) {\n        setTimeout(() => {\n          const el = this.quill.getLinha(elementos[1].uuid!);\n          if (el?.blotConteudo) {\n            this.quill.setSelection(this.quill.getIndex(el?.blotConteudo), 0, Quill.sources.USER);\n          }\n        }, 0);\n      }\n      rootStore.dispatch(validarArticulacaAction.execute());\n    }, 0);\n  }\n\n  private configEditor(): QuillOptionsStatic {\n    return {\n      formats: ['bold', 'italic', 'link', 'script', 'EtaBlotConteudoOmissis'],\n      modules: {\n        toolbar: {\n          container: '#lx-eta-barra-ferramenta',\n          handlers: {\n            bold: this.onBold.bind(this),\n            italic: this.onItalic.bind(this),\n            script: this.onScript.bind(this),\n          },\n        },\n        history: {\n          delay: 0,\n          maxStack: 500,\n          userOnly: true,\n        },\n      },\n      theme: 'snow',\n    };\n  }\n\n  private async confirmar(mensagem: string, botoes: string[], callback: any): Promise<void> {\n    let choice = '';\n    const dialog = document.createElement('sl-dialog');\n    dialog.label = 'Confirmao';\n    const botoesHtml = `\n      <sl-button slot=\"footer\" variant=\"default\">No</sl-button>\n      <sl-button slot=\"footer\" variant=\"primary\">Sim</sl-button>\n    `;\n    dialog.innerHTML = mensagem + botoesHtml;\n    document.body.appendChild(dialog);\n    await dialog.show();\n    const botoesDialog = dialog.querySelectorAll('sl-button');\n    const nao = botoesDialog[0] as SlButton;\n    const sim = botoesDialog[1] as SlButton;\n    sim.focus();\n\n    nao.onclick = (): void => {\n      choice = 'No';\n      dialog?.hide();\n      dialog?.remove();\n    };\n\n    sim.onclick = (): void => {\n      choice = 'Sim';\n      dialog?.hide();\n      dialog?.remove();\n    };\n\n    dialog.addEventListener('sl-request-close', (event: any) => {\n      if (event.detail.source === 'overlay') {\n        event.preventDefault();\n      }\n    });\n\n    dialog.addEventListener('sl-hide', (event: any) => {\n      event.detail.closeResult = choice;\n      callback(event);\n    });\n  }\n  private alertar(mensagem: string): void {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n        <sl-icon name=\"exclamation-octagon\" slot=\"icon\"></sl-icon>\n        ${mensagem}\n      `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n\n  private quillNaoInicializado(state: any): void {\n    let elementos: Elemento[] = [];\n    const verificarQuillInicializado: any = (elementos: Elemento[]): void => {\n      setTimeout(() => {\n        if (!this.quill) {\n          verificarQuillInicializado(elementos);\n        } else if (elementos.length > 0) {\n          this.carregarArticulacao(elementos);\n        }\n      }, 70);\n    };\n\n    if (state.elementoReducer.ui) {\n      const event: StateEvent | undefined = state.elementoReducer.ui.events.find((event: StateEvent): boolean => event.stateType === StateType.DocumentoCarregado);\n      elementos = event?.elementos ?? [];\n    }\n    verificarQuillInicializado(elementos);\n  }\n\n  private getHtmlElement(id: string): HTMLElement {\n    return this.querySelector(`#${id}`) as HTMLElement;\n  }\n\n  private destroiQuill(): void {\n    this.removeListenersEta();\n\n    this.getHtmlElement('lx-eta-editor')!.innerHTML = '';\n    this.getHtmlElement('lx-eta-buffer')!.innerHTML = '';\n    if (this.quill) {\n      this.quill.off('selection-change', this.onSelectionChange);\n      this.quill.destroi();\n    }\n    this._quill = undefined;\n  }\n\n  private listenerRotulo = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.renumerarElemento();\n  };\n\n  private listenerNotaAlteracao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.editarNotaAlteracao(event.detail.elemento);\n  };\n\n  private listenerToggleExistencia = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.toggleExistenciaElemento(event.detail.elemento);\n  };\n\n  private listenerMensagem = (event: any): void => {\n    event.stopImmediatePropagation();\n\n    const linha: EtaContainerTable = this.quill.linhaAtual;\n\n    if (linha) {\n      if (AutoFix.RENUMERAR_DISPOSITIVO === event.detail?.mensagem?.descricao) {\n        this.renumerarElemento();\n      } else {\n        const blotConteudo: EtaBlotConteudo = linha.blotConteudo;\n        const elemento: Elemento = this.criarElemento(linha.uuid, linha.uuid2, linha.lexmlId, linha.tipo, blotConteudo.html, linha.numero, linha.hierarquia);\n        rootStore.dispatch(autofixAction.execute(elemento, event.detail.mensagem));\n      }\n    }\n  };\n\n  private listenerAceitarRevisao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.aceitarRevisao(event.detail.elemento);\n  };\n\n  private listenerRejeitarRevisao = (event: any): void => {\n    event.stopImmediatePropagation();\n    this.rejeitarRevisao(event.detail.elemento);\n  };\n\n  private configListenersEta(): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    editorHtml.addEventListener('rotulo', this.listenerRotulo);\n    editorHtml.addEventListener('nota-alteracao', this.listenerNotaAlteracao);\n    editorHtml.addEventListener('toggle-existencia', this.listenerToggleExistencia);\n    editorHtml.addEventListener('mensagem', this.listenerMensagem);\n    editorHtml.addEventListener('aceitar-revisao', this.listenerAceitarRevisao);\n    editorHtml.addEventListener('rejeitar-revisao', this.listenerRejeitarRevisao);\n  }\n\n  private removeListenersEta(): void {\n    const editorHtml: HTMLElement = this.getHtmlElement('lx-eta-editor');\n    editorHtml.removeEventListener('rotulo', this.listenerRotulo);\n    editorHtml.removeEventListener('nota-alteracao', this.listenerNotaAlteracao);\n    editorHtml.removeEventListener('toggle-existencia', this.listenerToggleExistencia);\n    editorHtml.removeEventListener('mensagem', this.listenerMensagem);\n    editorHtml.removeEventListener('aceitar-revisao', this.listenerAceitarRevisao);\n    editorHtml.removeEventListener('rejeitar-revisao', this.listenerRejeitarRevisao);\n  }\n\n  private async onPasteTextoArticulado(payload: any): Promise<void> {\n    const linha = this.quill.linhaAtual;\n    const elemento: Elemento = new Elemento();\n    elemento.uuid = linha.uuid;\n    elemento.tipo = linha.tipo;\n\n    const infoTextoColado = await InfoTextoColado.newInstanceFromTexto(\n      payload.textoColadoOriginal,\n      payload.textoColadoAjustado,\n      rootStore.getState().elementoReducer.articulacao,\n      linha.elemento\n    );\n    colarTextoArticuladoDialog(this.quill, rootStore, infoTextoColado, payload.range);\n  }\n\n  private atualizarEstiloBotaoRevisao(): void {\n    const botaoRevisao = this.getHtmlElement('lx-eta-btn-revisao');\n    if (botaoRevisao) {\n      botaoRevisao.classList.toggle('revisao-ativa', rootStore.getState().elementoReducer.emRevisao);\n    }\n  }\n\n  private indicadorTextoModificado(events: StateEvent[]): void {\n    const ignorarStateTypes: StateType[] = [\n      StateType.DocumentoCarregado,\n      StateType.ElementoIncluido,\n      StateType.ElementoValidado,\n      StateType.AtualizaUsuario,\n      StateType.AtualizacaoAlertas,\n    ];\n    const mapElementos: Map<number, Elemento> = new Map();\n\n    events\n      .filter(ev => !ignorarStateTypes.includes(ev.stateType))\n      .map(ev => ev.elementos || [])\n      .flat()\n      .forEach(e => mapElementos.set(e.uuid!, e));\n\n    const elementos: Elemento[] = [...mapElementos.values()];\n    const uuidsElementosSemModificacao = elementos.filter(e => e.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_MODIFICADO).map(e => e.uuid!);\n    const uuidsElementosComModificacao = elementos\n      .filter(\n        e =>\n          e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO ||\n          (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && e.revisao && e.revisao.descricao === 'Texto do dispositivo foi alterado') ||\n          (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL &&\n            e.revisao &&\n            (e.revisao as RevisaoElemento).elementoAntesRevisao?.conteudo?.texto !== e.conteudo?.texto)\n        // || (e.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && e.revisao\n        //   && (e.revisao.descricao === 'Dispositivo restaurado' || e.revisao.descricao === 'Texto do dispositivo foi alterado'))\n      )\n      .map(e => e.uuid!);\n\n    uuidsElementosSemModificacao.forEach(uuid => {\n      const containerOpcoes = document.getElementById(EtaContainerOpcoes.className + uuid);\n      if (containerOpcoes) {\n        const linha = this.quill.getLinha(uuid);\n        linha?.containerOpcoes?.remove();\n        containerOpcoes.remove();\n      }\n    });\n\n    uuidsElementosComModificacao.forEach(uuid => {\n      const linha = this.quill.getLinha(uuid);\n      if (linha) {\n        this.adicionaRemoveOpcaoDiffMenu(linha.elemento, uuidsElementosComModificacao);\n\n        if (linha.containerOpcoes?.blotBotaoExibirDiferencas) {\n          linha.containerOpcoes.atualizarElemento(mapElementos.get(uuid)!);\n        } else {\n          const containerOpcoes = document.getElementById(EtaContainerOpcoes.className + uuid);\n          if (containerOpcoes) {\n            containerOpcoes.remove();\n          }\n          const containerTr = linha.children.head;\n          containerTr.insertBefore(EtaQuillUtil.criarContainerOpcoes(mapElementos.get(uuid)!), linha.containerDireito.prev);\n        }\n      }\n    });\n  }\n\n  private adicionaRemoveOpcaoDiffMenu(elemento: Elemento, uuidsElementosComModificacao: any): void {\n    if (uuidsElementosComModificacao.includes(elemento.uuid)) {\n      elemento.acoesPossiveis?.push(exibirDiferencaAction);\n    }\n  }\n\n  private indicadorMarcaRevisao(events: StateEvent[]): void {\n    const ignorarStateTypes: StateType[] = [\n      StateType.DocumentoCarregado,\n      StateType.ElementoIncluido,\n      StateType.ElementoValidado,\n      StateType.AtualizaUsuario,\n      StateType.AtualizacaoAlertas,\n    ];\n    const mapElementos: Map<number, Elemento> = new Map();\n    events\n      .filter(ev => !ignorarStateTypes.includes(ev.stateType))\n      .map(ev => ev.elementos || [])\n      .flat()\n      .forEach(e => mapElementos.set(e.uuid!, e));\n\n    const elementos: Elemento[] = [...mapElementos.values()];\n    const uuidsElementosSemRevisao = elementos.filter(e => !e.revisao).map(e => e.uuid!);\n    const uuidsElementosComRevisao = elementos.filter(e => e.revisao && isRevisaoPrincipal(e.revisao)).map(e => e.uuid!);\n\n    // Remove container de reviso de elementos que no esto mais em reviso\n    uuidsElementosSemRevisao.forEach(uuid => {\n      const containerRevisao = document.getElementById(EtaContainerRevisao.className + uuid);\n      if (containerRevisao) {\n        const linha = this.quill.getLinha(uuid);\n        linha?.containerRevisao?.remove();\n      }\n    });\n\n    // Adiciona (ou atualiza) container de reviso para elementos que esto em reviso\n    uuidsElementosComRevisao.forEach(uuid => {\n      const linha = this.quill.getLinha(uuid);\n      if (linha) {\n        if (linha.containerRevisao?.blotBotaoAceitarRevisao) {\n          linha.containerRevisao.atualizarElemento(mapElementos.get(uuid)!);\n        } else {\n          const containerTr = linha.children.head;\n          containerTr.insertBefore(EtaQuillUtil.criarContainerRevisao(mapElementos.get(uuid)!), linha.containerDireito.prev);\n        }\n      }\n    });\n  }\n\n  // private atualizaQuantidadeRevisao = (): void => {\n  //   atualizaQuantidadeRevisao(rootStore.getState().elementoReducer.revisoes, document.getElementById(this._idBadgeQuantidadeRevisao) as any);\n  // };\n\n  private atualizarStatusBotoesRevisao(): void {\n    const numRevisoes = getQuantidadeRevisoes(rootStore.getState().elementoReducer.revisoes);\n    this.btnAceitarTodasRevisoes && (this.btnAceitarTodasRevisoes.disabled = numRevisoes === 0);\n    this.btnRejeitarTodasRevisoes && (this.btnRejeitarTodasRevisoes.disabled = numRevisoes === 0);\n  }\n\n  /**\n   * Mtodo utilizado para navegar entre as marcas de reviso\n   * @param direcao\n   */\n  private navegarEntreMarcasRevisao = (direcao: string): void => {\n    const atributo = direcao === 'abaixo' ? 'next' : 'prev';\n    let linha = this.quill.linhaAtual;\n    if (linha.elemento.revisao) {\n      linha = linha[atributo];\n    }\n\n    while (linha && !linha.elemento.revisao) {\n      linha = linha[atributo];\n    }\n\n    if (linha) {\n      this.quill.desmarcarLinhaAtual(this.quill.linhaAtual);\n      this.quill.marcarLinhaAtual(linha);\n    }\n  };\n\n  private checkedSwitchMarcaAlteracao = (): void => {\n    const switchMarcaAlteracaoView = document.getElementById(this._idSwitchRevisao) as any;\n    setCheckedElement(switchMarcaAlteracaoView, rootStore.getState().elementoReducer.emRevisao);\n  };\n\n  private disabledParagrafoElementoRemovido = (event: StateEvent): void => {\n    const elementos: Elemento[] = event.elementos ?? [];\n    elementos!.forEach((elemento: Elemento) => {\n      const paragrafo = document.getElementById('texto__dispositivo' + elemento.uuid) as any;\n\n      if (paragrafo) {\n        if (elemento.revisao && elemento.revisao.descricao === 'Dispositivo removido') {\n          paragrafo.setAttribute('contenteditable', 'false');\n        } else {\n          paragrafo.setAttribute('contenteditable', 'true');\n        }\n      }\n    });\n  };\n}\n","import { Elemento } from '../../model/elemento';\nimport { adicionarAgrupadorArtigoAction, adicionarAgrupadorArtigoAntesAction } from './../../model/lexml/acao/adicionarAgrupadorArtigoAction';\n\nexport const adicionarAgrupadorArtigoDialog = (elemento: Elemento, quill: any, store: any): void => {\n  Array.from(document.querySelectorAll('#slDialogAdicionarAgrupadorArtigo')).forEach(el => document.body.removeChild(el));\n\n  const tipoPai = elemento.hierarquia?.pai?.tipo;\n  const defaultValue = elemento.agrupador ? elemento.tipo : tipoPai === 'Articulacao' ? 'Capitulo' : tipoPai;\n\n  const dialogElem = document.createElement('sl-dialog');\n  dialogElem.id = 'slDialogAdicionarAgrupadorArtigo';\n\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Adicionar agrupador de artigo';\n\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n\n    #chkManterNoMesmoGrupoDeAspas {\n      margin: 10px;\n    }\n    #chkManterNoMesmoGrupoDeAspas[disabled] {\n      display: none;\n    }\n    #rdgPosicao {\n      margin-top: 20px;\n    }\n\n  </style>\n  <div class=\"agrupadores\">\n    <sl-radio-group fieldset label=\"Tipo de agrupador\" id=\"rdgTipoAgrupador\">\n      <sl-radio class=\"tipo-agrupador\" id=\"Parte\" value=\"Parte\">Parte</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Livro\" value=\"Livro\">Livro</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Titulo\" value=\"Titulo\">Ttulo</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Capitulo\" value=\"Capitulo\">Captulo</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Secao\" value=\"Secao\">Seo</sl-radio>\n      <sl-radio class=\"tipo-agrupador\" id=\"Subsecao\" value=\"Subsecao\">Subseo</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div style=\"display: ${elemento.tipo === 'Artigo' ? 'none' : 'block'};\">\n    <sl-radio-group fieldset label=\"Posicionamento\" id=\"rdgPosicao\">\n      <sl-radio class=\"posicao-agrupador\" id=\"posicao-antes\" value=\"antes\">Antes</sl-radio>\n      <sl-radio class=\"posicao-agrupador\" id=\"posicao-depois\" value=\"depois\" checked>Depois</sl-radio>\n    </sl-radio-group>\n  </div>\n  <div>\n    <sl-checkbox id=\"chkManterNoMesmoGrupoDeAspas\">Manter no mesmo grupo de aspas</sl-checkbox>\n  </div>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  const opcoes = Array.from(content.querySelectorAll('.tipo-agrupador'));\n\n  const tiposPermitidos = [...elemento.tiposAgrupadoresQuePodemSerInseridosAntes!];\n  if (elemento.tipo !== 'Artigo') {\n    tiposPermitidos.push(...elemento.tiposAgrupadoresQuePodemSerInseridosDepois!);\n  }\n\n  const defaultAux = tiposPermitidos.length === 1 ? tiposPermitidos[0] : defaultValue;\n  const elTipoAgrupadorDefault = opcoes.find(el => (el as any).value === defaultAux) as any;\n  elTipoAgrupadorDefault.checked = true;\n\n  opcoes.forEach(el => {\n    const element = el as HTMLInputElement;\n    element.disabled = !tiposPermitidos.includes(element.value);\n    element.checked = element.disabled ? false : element.checked;\n    if (element.checked) {\n      setTimeout(() => {\n        element.focus();\n      }, 0);\n    }\n  });\n\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const optPosicaoAntes = content.querySelector('#posicao-antes')! as any;\n  const optPosicaoDepois = content.querySelector('#posicao-depois')! as any;\n\n  const chkManterNoMesmoGrupoDeAspas = content.querySelector('#chkManterNoMesmoGrupoDeAspas')! as HTMLInputElement;\n\n  let ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario = false;\n  chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n\n  const action = elemento.tipo === 'Artigo' ? adicionarAgrupadorArtigoAction : adicionarAgrupadorArtigoAntesAction;\n\n  const validarStatusChkManterNoMesmoGrupoDeAspas = (): void => {\n    const posicao = (document.querySelector('sl-radio.posicao-agrupador[aria-checked=\"true\"]') as any)?.value;\n    const isCabecaAlteracao = elemento.abreAspas && elemento.fechaAspas;\n\n    if (elemento.agrupador) {\n      if (isCabecaAlteracao) {\n        chkManterNoMesmoGrupoDeAspas.disabled = false;\n        chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n      } else if ((!elemento.abreAspas && !elemento.fechaAspas) || (elemento.abreAspas && posicao === 'depois') || (elemento.fechaAspas && posicao === 'antes')) {\n        chkManterNoMesmoGrupoDeAspas.disabled = true;\n        chkManterNoMesmoGrupoDeAspas.checked = true;\n      } else {\n        chkManterNoMesmoGrupoDeAspas.disabled = false;\n        chkManterNoMesmoGrupoDeAspas.checked = ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario;\n      }\n    } else {\n      chkManterNoMesmoGrupoDeAspas.disabled = true;\n      chkManterNoMesmoGrupoDeAspas.checked = !elemento.abreAspas;\n    }\n  };\n\n  chkManterNoMesmoGrupoDeAspas.onchange = (evt: any): void => {\n    ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario = evt.target.checked;\n  };\n\n  setTimeout(() => validarStatusChkManterNoMesmoGrupoDeAspas(), 0);\n\n  (content.querySelector('#rdgPosicao')! as any).onclick = (): void => {\n    validarStatusChkManterNoMesmoGrupoDeAspas();\n  };\n\n  (content.querySelector('#rdgTipoAgrupador')! as any).onclick = (evt: any): void => {\n    if (elemento.tipo === 'Artigo' || !tiposPermitidos.includes(evt.target.value)) {\n      return;\n    }\n\n    optPosicaoAntes.disabled = !elemento.tiposAgrupadoresQuePodemSerInseridosAntes!.includes(evt.target.value);\n    optPosicaoDepois.disabled = !elemento.tiposAgrupadoresQuePodemSerInseridosDepois!.includes(evt.target.value);\n\n    if (!optPosicaoAntes.disabled && !optPosicaoDepois.disabled) {\n      optPosicaoAntes.checked = false;\n      optPosicaoDepois.checked = true;\n    } else {\n      optPosicaoAntes.checked = !optPosicaoAntes.disabled;\n      optPosicaoDepois.checked = !optPosicaoDepois.disabled;\n    }\n\n    // optPosicaoDepois.checked = tiposAgrupadorArtigo.indexOf(evt.target.value) >= tiposAgrupadorArtigo.indexOf(elemento.tipo!);\n    // optPosicaoAntes.checked = !optPosicaoDepois.checked;\n\n    validarStatusChkManterNoMesmoGrupoDeAspas();\n  };\n\n  ok.onclick = (): void => {\n    const tipo = (document.querySelector('sl-radio.tipo-agrupador[aria-checked=\"true\"]') as any).value;\n    const posicao = elemento.tipo === 'Artigo' ? 'antes' : (document.querySelector('sl-radio.posicao-agrupador[aria-checked=\"true\"]') as any).value;\n    const manterNoMesmoGrupoDeAspas = chkManterNoMesmoGrupoDeAspas.checked;\n    if (tipo) {\n      // const manterNoMesmoGrupoDeAspas = elemento.tipo !== 'Artigo' || elemento.hierarquia?.pai?.tipo !== 'Articulacao';\n      store.dispatch(action.execute(elemento, tipo, undefined, posicao, manterNoMesmoGrupoDeAspas));\n    }\n    dialogElem?.hide();\n    document.body.removeChild(dialogElem);\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    document.body.removeChild(dialogElem);\n  };\n\n  setTimeout(() => elTipoAgrupadorDefault.click(), 0);\n\n  quill.blur();\n  dialogElem.appendChild(content);\n  dialogElem.show();\n};\n","import { Elemento } from '../../elemento';\nimport { TipoDispositivo } from '../tipo/tipoDispositivo';\nimport { TransformarElemento } from './transformarElementoAction';\n\nexport const transformarAction = (elemento: Elemento, novoTipo: string): any => {\n  const action = new TransformarElemento(\n    TipoDispositivo[novoTipo.toLowerCase()],\n    'Transformar ' + elemento.tipo + 'em ' + TipoDispositivo[novoTipo.toLowerCase()].name,\n    'transformar' + elemento.tipo + 'Em' + TipoDispositivo[novoTipo.toLowerCase()].name\n  );\n\n  return action.execute(elemento);\n};\n","import { Elemento } from '../../model/elemento';\nimport './autocomplete-norma';\n\nexport async function informarNormaDialog(elemento: Elemento, quill: any, store: any, action: any, urlAutocomplete: string): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n  document.body.appendChild(dialogElem);\n  dialogElem.label = 'Dados da norma vigente';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n\n  <div class=\"input-validation-required\">\n    <autocomplete-norma id=\"auto-norma\" urnInicial=\"${elemento.norma}\" urlAutocomplete=\"${urlAutocomplete}\"></autocomplete-norma>\n  </div>\n  <br/>\n  <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n    <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n    <strong>Dados invlidos.</strong><br/>\n    Identifique uma norma a ser alterada.\n  </sl-alert>\n  <sl-button slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  <sl-button slot=\"footer\" variant=\"primary\">Ok</sl-button>\n  `);\n\n  const autocompleteNorma = content.querySelector('#auto-norma') as any;\n  const botoes = content.querySelectorAll('sl-button');\n  const cancelar = botoes[0];\n  const ok = botoes[1];\n  const alerta = content.querySelector('sl-alert');\n\n  let urn = '';\n\n  autocompleteNorma!['onSelect'] = (norma): void => {\n    urn = norma.urn;\n  };\n\n  ok!['onclick'] = (): void => {\n    if (urn) {\n      quill.focus();\n      alerta?.hide();\n      dialogElem?.hide();\n      dialogElem?.remove();\n      elemento.norma = urn;\n      store.dispatch(action.execute(elemento));\n    } else {\n      alerta?.show();\n    }\n  };\n\n  cancelar.onclick = (): void => {\n    quill.focus();\n    dialogElem?.hide();\n    dialogElem?.remove();\n  };\n\n  quill.blur();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  autocompleteNorma.focusAutoComplete();\n}\n","import { LitElement, html, TemplateResult, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\nimport { Elemento } from '../../model/elemento';\n\n@customElement('lexml-eta-elemento')\nexport class ElementoComponent extends LitElement {\n  @property({ type: Object }) elemento!: Elemento;\n\n  static styles = css`\n    :host {\n      display: block;\n      padding: 0px;\n      margin: 0px;\n      font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n        'Noto Color Emoji';\n      font-size: 1.1em;\n      line-height: 1.2;\n      color: #646260;\n      text-transform: none !important;\n    }\n\n    p.rotulo {\n      margin: 5px !important;\n      color: #373634;\n      font-weight: 600;\n      text-align: center;\n    }\n\n    p.texto {\n      margin: 5px !important;\n    }\n\n    p.texto-agrupador {\n      margin: 5px !important;\n      text-align: center;\n    }\n\n    span.rotulo {\n      color: #373634;\n      font-weight: 600;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"box\">\n        <div class=\"conteudo\">${this.elemento.agrupador ? this.htmlAgrupador() : this.htmlDispositivo()}</div>\n      </div>\n    `;\n  }\n\n  private htmlAgrupador = (): TemplateResult =>\n    html`<p class=\"rotulo\">${this.elemento.rotulo}</p>\n      <p class=\"texto-agrupador\">${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}</p>`;\n\n  private htmlDispositivo = (): TemplateResult =>\n    html`\n      <p class=\"texto\" style=\"${`padding-left: ${this.elemento.nivel * 20}px;`}\">\n        <span class=\"rotulo\">${this.elemento.rotulo}</span>\n        ${unsafeHTML(this.elemento?.conteudo?.texto ?? '')}\n      </p>\n    `;\n}\n","import { css, html, LitElement, TemplateResult } from 'lit';\nimport { customElement } from 'lit/decorators.js';\n\n@customElement('lexml-eta-atalhos')\nexport class AtalhosComponent extends LitElement {\n  static styles = css`\n    :host {\n      display: block;\n      padding: 10px;\n      font-family: var(--sl-font-sans);\n    }\n    .lx-eta-help-content div div {\n      color: black;\n      padding: 0.4rem 0;\n      text-decoration: none;\n      display: block;\n      white-space: wrap;\n      font-size: 0.8em;\n      font-weight: normal !important;\n      text-align: left;\n    }\n\n    .lx-eta-help-info {\n      display: block;\n      font-weight: normal !important;\n      text-align: left;\n      color: #555555;\n      background-color: #fefefe;\n      border: 0.5px solid #ccc;\n      padding: 0.5rem;\n      margin-block: 0.1rem;\n      border-radius: 0.5rem;\n      font-style: italic;\n    }\n    .lx-eta-help-content h4 {\n      padding: 1rem 0 0.5rem 0;\n      margin: 0;\n    }\n\n    .lx-eta-help-group {\n      background-color: #eeeeee;\n      padding: 0.5rem;\n      border-radius: 0.5rem;\n      border: 0.5px solid #ccc;\n      box-shadow: var(--sl-shadow-x-large);\n      margin-block-end: 1rem;\n    }\n  `;\n\n  render(): TemplateResult {\n    return html`\n      <div class=\"lx-eta-help\">\n        <div class=\"lx-eta-help-content\">\n          <h4>Desfazer e refazer</h4>\n          <div class=\"lx-eta-help-group\">\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Z</sl-badge>&nbsp;-&nbsp;Desfaz ultima alterao</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Y</sl-badge>&nbsp;-&nbsp;Refaz alterao</div>\n          </div>\n          <h4>Seleo e navegao</h4>\n          <div class=\"lx-eta-help-group\">\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Shift</sl-badge>+<sl-badge variant=\"neutral\">A</sl-badge>&nbsp;-&nbsp;Seleciona o texto do\n              dispositivo atual\n            </div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Home</sl-badge>&nbsp;-&nbsp;Vai para o primeiro dispositivo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">End</sl-badge>&nbsp;-&nbsp;Vai para o ltimo dispositivo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">F</sl-badge>&nbsp;-&nbsp;Localizar texto</div>\n          </div>\n          <h4>Criao e edio de dispositivos adicionados</h4>\n          <div class=\"lx-eta-help-group\">\n            <div>\n              <sl-badge variant=\"neutral\">Enter</sl-badge>&nbsp;-&nbsp;Cria um novo dispositivo do mesmo tipo ou cria dispositivo subordinado quando termina com dois pontos\n            </div>\n            <div><span class=\"lx-eta-help-info\">Os atalhos abaixo funcionam apenas para dispositivos adicionados</span></div>\n            <div><sl-badge variant=\"neutral\">Tab</sl-badge>&nbsp;-&nbsp;Indenta para a direita o dispositivo, transformando-o no tipo mais provvel</div>\n            <div>\n              <sl-badge variant=\"neutral\">Shift</sl-badge>+<sl-badge variant=\"neutral\">Tab</sl-badge>&nbsp;-&nbsp;Recua o dispositivo para a esquerda, transformando-o no tipo mais\n              provvel\n            </div>\n            <div><sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">&uarr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para cima</div>\n            <div><sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">&darr;</sl-badge>&nbsp;-&nbsp;Move o dispositivo para baixo</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">D</sl-badge>&nbsp;-&nbsp;Remove dispositivo atual</div>\n            <div><span class=\"lx-eta-help-info\">Os atalhos abaixo funcionam apenas para dispositivos adicionados em alterao de normas</span></div>\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">N</sl-badge>&nbsp;-&nbsp;Numera o dispositivo que\n              foi adicionado em alterao de norma\n            </div>\n            <div>\n              <sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">Alt</sl-badge>+<sl-badge variant=\"neutral\">O</sl-badge>&nbsp;-&nbsp;Omite dispositivos\n              (transforma em linha pontilhada que representa um ou mais dispositivos omitidos)\n            </div>\n            <div><sl-badge variant=\"neutral\">...</sl-badge>&nbsp;-&nbsp;Digitando trs pontos no texto do dispositivo, cria-se uma linha pontilhada</div>\n          </div>\n          <h4>Formatao de texto</h4>\n          <div class=\"lx-eta-help-group\">\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">B</sl-badge>&nbsp;-&nbsp;Aplica <b>negrito</b> ao texto selecionado</div>\n            <div><sl-badge variant=\"neutral\">Ctrl</sl-badge>+<sl-badge variant=\"neutral\">I</sl-badge>&nbsp;-&nbsp;Aplica <i>itlico</i> ao texto selecionado</div>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-eta-atalhos': AtalhosComponent;\n  }\n}\n","import { html } from 'lit';\n\nexport const editorTextoRicoCss = html`\n  <style>\n    .editor-texto-rico {\n      height: 375px;\n      font-size: 18px !important;\n    }\n    .editor-texto-rico p,\n    .editor-texto-rico ol,\n    .editor-texto-rico ul {\n      margin-bottom: 0.7rem;\n    }\n    .editor-texto-rico p:not(.ql-align-rigth, .ql-align-center) {\n      text-indent: 3rem;\n    }\n    .ql-toolbar.ql-snow .ql-formats {\n      margin-right: 8px;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip {\n      font-family: var(--eta-font-sans);\n      font-size: 0.9rem;\n    }\n    .ql-tooltip .ql-action,\n    .ql-tooltip .ql-remove {\n      background-color: var(--sl-color-gray-100);\n      border: 1px solid var(--sl-color-gray-500);\n      border-radius: 3px;\n      color: var(--sl-color-gray-900);\n      width: fit-content !important;\n      padding: 0 15px;\n      margin: 0 0 0 10px;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip.ql-editing a.ql-action::after {\n      content: 'Salvar';\n      margin: 0 !important;\n      padding: 0 !important;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip a.ql-action::after {\n      display: inline;\n      content: 'Editar';\n      margin: 0 !important;\n      padding: 0 !important;\n      border: 0;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip a.ql-remove::before {\n      display: inline;\n      content: 'Remover';\n      margin: 0 !important;\n      padding: 0 !important;\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip[data-mode='link']::before {\n      content: 'Insira o link:';\n    }\n    .editor-texto-rico.ql-snow .ql-tooltip::before {\n      content: 'Visite o link:';\n    }\n    @media (max-width: 600px) {\n      .editor-texto-rico.ql-snow .ql-tooltip {\n        display: flex;\n        gap: 5px;\n        flex-direction: column;\n      }\n      .ql-tooltip .ql-action,\n      .ql-tooltip .ql-remove {\n        margin: 0;\n      }\n      .editor-texto-rico.ql-snow .ql-tooltip.ql-hidden {\n        display: none;\n      }\n    }\n\n    .editor-texto-rico .estilo-ementa {\n      text-indent: 0 !important;\n      text-align: justify;\n      margin-left: 40%;\n    }\n    .editor-texto-rico .estilo-norma-alterada {\n      margin-left: 3rem;\n    }\n\n    #revisoes-justificativa-icon sl-icon,\n    #revisoes-texto-livre-icon sl-icon,\n    #aceita-revisao-justificativa {\n      margin-right: 0.1rem;\n    }\n\n    .revisoes-justificativa-icon__ativo {\n      color: white;\n      background-color: var(--sl-color-warning-600) !important;\n      border-color: white !important;\n    }\n    .revisoes-texto-livre-icon__ativo {\n      color: white;\n      background-color: var(--sl-color-warning-600) !important;\n      border-color: white !important;\n    }\n    .lista-revisoes-justificativa {\n      padding-left: 1rem;\n      padding-right: 0.5rem;\n    }\n    #chk-em-revisao-justificativa {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao-justificativa[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    #chk-em-revisao-texto-livre {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao-texto-livre[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    #toolbar {\n      padding: 1.5px 0 1.5px 8px;\n    }\n\n    #badge-marca-alteracao-justificativa::part(base) {\n      min-width: 1.4rem;\n    }\n\n    #badge-marca-alteracao-texto-livre::part(base) {\n      min-width: 1.4rem;\n    }\n    revisao-container {\n      margin-left: auto;\n    }\n\n    .ql-toolbar .panel-revisao {\n      display: flex;\n      flex-grow: 1;\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label {\n      width: 160px;\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label::before,\n    .ql-picker.ql-estilo .ql-picker-item::before {\n      content: 'Texto normal';\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label[data-value='ementa']:before,\n    .ql-picker.ql-estilo .ql-picker-item[data-value='ementa']:before {\n      content: 'Ementa';\n    }\n\n    .ql-picker.ql-estilo .ql-picker-label[data-value='norma-alterada']:before,\n    .ql-picker.ql-estilo .ql-picker-item[data-value='norma-alterada']:before {\n      content: 'Norma alterada';\n    }\n\n    .ql-estilo span.ql-picker-label {\n      border-color: #ccc !important;\n    }\n\n    .ql-picker-item[data-value='insert']::after {\n      content: 'Inserir tabela';\n    }\n\n    .ql-picker-item[data-value='append-col']::after {\n      content: 'Inserir coluna';\n    }\n\n    .ql-picker-item[data-value='append-col-before']::after {\n      content: 'Inserir coluna  esquerda';\n    }\n\n    .ql-picker-item[data-value='append-col-after']::after {\n      content: 'Inserir coluna  direita';\n    }\n\n    .ql-picker-item[data-value='remove-col']::after {\n      content: 'Remover coluna';\n    }\n\n    .ql-picker-item[data-value='change-width-col-modal']::after {\n      content: 'Alterar a largura da coluna';\n    }\n\n    .ql-picker-item[data-value='change-width-table-modal']::after {\n      content: 'Alterar a largura da tabela';\n    }\n\n    .ql-picker-item[data-value='append-row']::after {\n      content: 'Inserir linha';\n    }\n\n    .ql-picker-item[data-value='append-row-above']::after {\n      content: 'Inserir linha acima';\n    }\n\n    .ql-picker-item[data-value='append-row-below']::after {\n      content: 'Inserir linha abaixo';\n    }\n\n    .ql-picker-item[data-value='remove-row']::after {\n      content: 'Remover linha';\n    }\n\n    .ql-picker-item[data-value='split-cell']::after {\n      content: 'Dividir clula';\n    }\n\n    .ql-picker-item[data-value='merge-selection']::after {\n      content: 'Mesclar clulas';\n    }\n\n    .ql-picker-item[data-value='remove-cell']::after {\n      content: 'Remover clula';\n    }\n\n    .ql-picker-item[data-value='remove-selection']::after {\n      content: 'Remover seleo';\n    }\n\n    .ql-picker-item[data-value='undo']::after {\n      content: 'Desfazer';\n    }\n\n    .ql-picker-item[data-value='redo']::after {\n      content: 'Refazer';\n    }\n\n    .ql-picker-item[data-value='remove-table']:before {\n      content: 'Remover tabela';\n    }\n\n    .ql-editor td > p {\n      text-indent: 0 !important;\n      margin-bottom: 0 !important;\n    }\n\n    .table-selected {\n      border: 1px solid #87ceeb; /* Define a borda slida em tom azul claro */\n      box-shadow: 0 0 10px rgba(135, 206, 235, 0.5); /* Adiciona sombra com tom azul claro */\n    }\n\n    .ql-snow .ql-editor img {\n      max-width: 100%;\n    }\n\n    .editor-texto-rico p.ql-text-indent-0px {\n      text-indent: 0;\n    }\n\n    .editor-texto-rico p.ql-margin-bottom-0px {\n      margin-bottom: 0;\n    }\n\n    .ql-editor ins {\n      text-decoration: none;\n      background-color: #b2e6be;\n      /* #d4edda; */\n    }\n\n    .ql-editor del {\n      text-decoration: strikethrough;\n      background-color: #f4a9b0;\n      /* #f8d7da; */\n    }\n\n    .editor-texto-rico .ql-tooltip input:invalid {\n      color: red;\n    }\n\n    .editor-texto-rico .ql-tooltip div.tooltip-invalid-message {\n      color: red;\n      display: none;\n      font-family: var(--eta-font-sans);\n      font-size: 0.9rem;\n    }\n\n    .editor-texto-rico .ql-tooltip[data-mode='link'] div.tooltip-invalid-message::after {\n      content: 'A URL deve iniciar com http:// ou https://';\n    }\n\n    .editor-texto-rico .ql-tooltip[data-mode='link'] input:invalid ~ div.tooltip-invalid-message {\n      display: block;\n    }\n\n    @media (max-width: 768px) {\n      .mobile-buttons {\n        display: inline-block !important;\n      }\n      #chk-em-revisao-justificativa span {\n        display: none;\n      }\n      .ql-snow .ql-editor img {\n        max-width: 100%;\n      }\n    }\n  </style>\n`;\n","import { html } from 'lit';\n\nexport const quillTableCss = html`<style>\n  .ql-editor table {\n    width: 100%;\n    border-collapse: collapse;\n    table-layout: fixed;\n    overflow: hidden;\n    white-space: nowrap;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .ql-editor table td {\n    border: 1px solid black;\n    padding: 2px 5px;\n    height: 25px;\n    vertical-align: top;\n    white-space: pre-wrap; /* https://github.com/quilljs/quill/issues/1760 */\n  }\n\n  .ql-editor table td[rowspan='2'] {\n    height: 50px;\n  }\n\n  .ql-editor table td[rowspan='3'] {\n    height: 75px;\n  }\n\n  .ql-editor table td[rowspan='4'] {\n    height: 100px;\n  }\n\n  .ql-editor table td[rowspan='5'] {\n    height: 125px;\n  }\n\n  .ql-editor table td[rowspan='6'] {\n    height: 150px;\n  }\n\n  .ql-editor table td[rowspan='7'] {\n    height: 175px;\n  }\n\n  .ql-editor table td[rowspan='8'] {\n    height: 200px;\n  }\n\n  .ql-editor table td[rowspan='9'] {\n    height: 225px;\n  }\n\n  .ql-editor table td.ql-cell-selected {\n    background-color: #cce0f8;\n  }\n\n  .ql-editor table td[merge_id] {\n    display: none;\n  }\n\n  .quill-better-table-wrapper {\n    overflow-x: auto;\n  }\n\n  .ql-picker.ql-table {\n    width: auto !important;\n    margin-right: 0;\n  }\n\n  .ql-picker.ql-table .ql-picker-label svg {\n    display: none;\n  }\n\n  .ql-picker.ql-table .ql-picker-label::before {\n    display: block;\n    font-size: 14px;\n  }\n\n  .ql-table:nth-of-type(1) .ql-picker-label {\n    background: url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-table\" viewBox=\"0 0 16 16\"><path d=\"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z\"/></svg>')\n        no-repeat center,\n      white;\n    background-size: 16px;\n  }\n\n  .ql-picker.ql-table .ql-picker-label::before {\n    font-family: 'Font Awesome 6 Free';\n    font-weight: 900;\n    padding-top: 2px;\n    line-height: 1em;\n  }\n\n  .ql-table:nth-of-type(1),\n  .ql-contain {\n    width: 90px;\n    margin-right: 0;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) {\n    font-size: 11px;\n    font-weight: normal;\n  }\n\n  .ql-picker.ql-table .ql-picker-label {\n    padding: 2px 3px;\n    width: 23px;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-options {\n    width: 180px;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {\n    display: block;\n    float: left;\n    width: 30px;\n    height: 30px;\n    line-height: 30px;\n    text-align: center;\n    padding: 0px;\n    margin: 1px;\n  }\n\n  .ql-toolbar .ql-picker.ql-table .ql-picker-item {\n    display: none;\n  }\n\n  .ql-toolbar .ql-picker.ql-table .ql-picker-item.enabled {\n    display: block;\n  }\n\n  .ql-picker.ql-table:nth-of-type(2) {\n    display: flex;\n    width: 145px;\n  }\n\n  .ql-table:nth-of-type(2) .ql-picker-label {\n    background: url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-border\" viewBox=\"0 0 16 16\"><path d=\"M0 0h.969v.5H1v.469H.969V1H.5V.969H0V0zm2.844 1h-.938V0h.938v1zm1.875 0H3.78V0h.938v1zm1.875 0h-.938V0h.938v1zm.937 0V.969H7.5V.5h.031V0h.938v.5H8.5v.469h-.031V1H7.53zm2.813 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zm1.875 0h-.938V0h.938v1zM15.5 1h-.469V.969H15V.5h.031V0H16v.969h-.5V1zM1 1.906v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM1 3.78v.938H0V3.78h1zm6.5.938V3.78h1v.938h-1zm7.5 0V3.78h1v.938h-1zM1 5.656v.938H0v-.938h1zm6.5.938v-.938h1v.938h-1zm7.5 0v-.938h1v.938h-1zM.969 8.5H.5v-.031H0V7.53h.5V7.5h.469v.031H1v.938H.969V8.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875-.031V8.5H7.53v-.031H7.5V7.53h.031V7.5h.938v.031H8.5v.938h-.031zm1.875.031h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.406 0h-.469v-.031H15V7.53h.031V7.5h.469v.031h.5v.938h-.5V8.5zM0 10.344v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 12.22v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM0 14.094v-.938h1v.938H0zm7.5 0v-.938h1v.938h-1zm8.5-.938v.938h-1v-.938h1zM.969 16H0v-.969h.5V15h.469v.031H1v.469H.969v.5zm1.875 0h-.938v-1h.938v1zm1.875 0H3.78v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H7.5v-.469h.031V15h.938v.031H8.5v.469h-.031v.5H7.53zm2.813 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm1.875 0h-.938v-1h.938v1zm.937 0v-.5H15v-.469h.031V15h.469v.031h.5V16h-.969z\"/></svg>')\n        no-repeat center,\n      white;\n    background-size: 16px;\n  }\n  .ql-picker.ql-table:nth-of-type(2) {\n    color: #444;\n  }\n\n  .ql-picker.ql-table:nth-of-type(1) .ql-picker-item {\n    border: 1px solid #444;\n    color: #444;\n  }\n\n  .ql-table:nth-of-type(2) .ql-picker-label.ql-active {\n    color: #444 !important;\n  }\n\n  .ql-toolbar .ql-picker-item.ql-selected:before,\n  .ql-picker.ql-table:nth-of-type(2) .ql-picker-item {\n    color: #444;\n  }\n\n  /* .ql-picker-label.ql-active .ql-stroke {\n    stroke: #444 !important;\n  } */\n\n  .ql-picker-item[data-value='remove-table'] {\n    border: none !important;\n    width: 100%;\n  }\n\n  .ql-picker-item[data-value='newtable_1_1']:before {\n    content: '1x1';\n  }\n\n  .ql-picker-item[data-value='newtable_1_2']:before {\n    content: '1x2';\n  }\n\n  .ql-picker-item[data-value='newtable_1_3']:before {\n    content: '1x3';\n  }\n\n  .ql-picker-item[data-value='newtable_1_4']:before {\n    content: '1x4';\n  }\n\n  .ql-picker-item[data-value='newtable_1_5']:before {\n    content: '1x5';\n  }\n\n  .ql-picker-item[data-value='newtable_2_1']:before {\n    content: '2x1';\n  }\n\n  .ql-picker-item[data-value='newtable_2_2']:before {\n    content: '2x2';\n  }\n\n  .ql-picker-item[data-value='newtable_2_3']:before {\n    content: '2x3';\n  }\n\n  .ql-picker-item[data-value='newtable_2_4']:before {\n    content: '2x4';\n  }\n\n  .ql-picker-item[data-value='newtable_2_5']:before {\n    content: '2x5';\n  }\n\n  .ql-picker-item[data-value='newtable_3_1']:before {\n    content: '3x1';\n  }\n\n  .ql-picker-item[data-value='newtable_3_2']:before {\n    content: '3x2';\n  }\n\n  .ql-picker-item[data-value='newtable_3_3']:before {\n    content: '3x3';\n  }\n\n  .ql-picker-item[data-value='newtable_3_4']:before {\n    content: '3x4';\n  }\n\n  .ql-picker-item[data-value='newtable_3_5']:before {\n    content: '3x5';\n  }\n\n  .ql-picker-item[data-value='newtable_4_1']:before {\n    content: '4x1';\n  }\n\n  .ql-picker-item[data-value='newtable_4_2']:before {\n    content: '4x2';\n  }\n\n  .ql-picker-item[data-value='newtable_4_3']:before {\n    content: '4x3';\n  }\n\n  .ql-picker-item[data-value='newtable_4_4']:before {\n    content: '4x4';\n  }\n\n  .ql-picker-item[data-value='newtable_4_5']:before {\n    content: '4x5';\n  }\n\n  .ql-picker-item[data-value='newtable_5_1']:before {\n    content: '5x1';\n  }\n\n  .ql-picker-item[data-value='newtable_5_2']:before {\n    content: '5x2';\n  }\n\n  .ql-picker-item[data-value='newtable_5_3']:before {\n    content: '5x3';\n  }\n\n  .ql-picker-item[data-value='newtable_5_4']:before {\n    content: '5x4';\n  }\n\n  .ql-picker-item[data-value='newtable_5_5']:before {\n    content: '5x5';\n  }\n\n  p:has(img) {\n    text-align: center !important;\n    text-indent: 0 !important;\n  }\n</style>`;\n","// import Quill from 'quill';\n\nconst Container = Quill.import('blots/container');\nconst Block = Quill.import('blots/block');\nconst BlockEmbed = Quill.import('blots/block/embed');\nconst Parchment = Quill.import('parchment');\n\nclass ContainBlot extends Container {\n  static create(value) {\n    return super.create(value);\n  }\n\n  // formats(domNode) {\n  //   if (domNode) {\n  //     return domNode.tagName;\n  //   }\n  //   return this.domNode.tagName;\n  // }\n}\n\nContainBlot.blotName = 'contain';\nContainBlot.tagName = 'contain';\nContainBlot.scope = Parchment.Scope.BLOCK_BLOT;\nContainBlot.defaultChild = 'block';\nContainBlot.allowedChildren = [Block, BlockEmbed, Container];\n\nexport default ContainBlot;\n","// import Quill from 'quill';\nimport ContainBlot from './ContainBlot';\n\nconst Container = Quill.import('blots/container');\nconst Block = Quill.import('blots/block');\nconst BlockEmbed = Quill.import('blots/block/embed');\nconst Parchment = Quill.import('parchment');\n\nclass TableCell extends ContainBlot {\n  static create(value) {\n    const tagName = 'td';\n    let node = super.create(tagName);\n    let ids = value.split('|');\n    node.setAttribute('table_id', ids[0]);\n    node.setAttribute('row_id', ids[1]);\n    node.setAttribute('cell_id', ids[2]);\n    if (ids[3]) {\n      node.setAttribute('merge_id', ids[3]);\n    }\n    if (ids[4]) {\n      node.setAttribute('colspan', ids[4]);\n    }\n    if (ids[5]) {\n      node.setAttribute('rowspan', ids[5]);\n    }\n    return node;\n  }\n\n  format() {}\n\n  formats() {\n    // We don't inherit from FormatBlot\n    return {\n      [this.statics.blotName]:\n        [\n          this.domNode.getAttribute('table_id'),\n          this.domNode.getAttribute('row_id'),\n          this.domNode.getAttribute('cell_id'),\n          this.domNode.getAttribute('merge_id'),\n          this.domNode.getAttribute('colspan'),\n          this.domNode.getAttribute('rowspan')\n        ].join('|')\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n\n    let parent = this.parent;\n    if (parent != null) {\n      if (parent.statics.blotName === 'td') {\n        this.moveChildren(parent, this);\n        this.remove();\n        return;\n      } else if (parent.statics.blotName !== 'tr') {\n        // we will mark td position, put in table and replace mark\n        let mark = Parchment.create('block');\n        this.parent.insertBefore(mark, this.next);\n        let table = Parchment.create('table', this.domNode.getAttribute('table_id'));\n        let tr = Parchment.create('tr', this.domNode.getAttribute('row_id'));\n        table.appendChild(tr);\n        tr.appendChild(this);\n        table.replace(mark);\n      }\n    }\n\n    // merge same TD id\n    let next = this.next;\n    if (next != null && next.prev === this &&\n      next.statics.blotName === this.statics.blotName &&\n      next.domNode.tagName === this.domNode.tagName &&\n      next.domNode.getAttribute('cell_id') === this.domNode.getAttribute('cell_id')\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = Parchment.create(this.statics.defaultChild);\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot)\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = Parchment.create(this.statics.defaultChild);\n      target.moveChildren(item);\n      this.appendChild(item);\n    }\n    if (target.parent == null) return;\n    super.replace(target)\n  }\n\n  moveChildren(targetParent, refNode) {\n    this.children.forEach(function (child) {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n}\n\nTableCell.blotName = 'td';\nTableCell.tagName = 'td';\nTableCell.className = 'td-q';\nTableCell.scope = Parchment.Scope.BLOCK_BLOT;\nTableCell.allowedChildren = [Block, BlockEmbed, Container];\n\nexport default TableCell;\n","// import Quill from 'quill';\nimport TableTrick from './TableTrick';\n\nconst Parchment = Quill.import('parchment');\n\nclass TableHistory {\n  // Register DOM change into current table history entry\n  static register(type, change) {\n    TableHistory.changes.push({ type, ...change });\n  }\n\n  // Add table history entry\n  static add(quill) {\n    if (!TableHistory.changes.length) return;\n\n    const historyChangeStatus = quill.history.ignoreChange;\n    // ignore history change and reset last recorded time for adding later changes in a new history entry\n    quill.history.ignoreChange = true;\n    quill.history.lastRecorded = 0;\n\n    // wait history update\n    setTimeout(() => {\n      // reset history changes value\n      quill.history.ignoreChange = historyChangeStatus;\n\n      // add new entry in table stack\n      const id = TableTrick.random_id();\n      quill.history.tableStack[id] = TableHistory.changes;\n\n      // set reference to table stack entry in a new history entry\n      quill.history.stack.undo.push({ type: 'tableHistory', id: id });\n\n      TableHistory.changes = [];\n    }, 0);\n  }\n\n  static undo(quill, id) {\n    const historyChangeStatus = quill.history.ignoreChange;\n    quill.history.ignoreChange = true;\n\n    const entry = quill.history.tableStack[id];\n    if (typeof entry !== 'undefined') {\n      // apply changes from last change to first change (undo)\n      entry.reverse().forEach(change => {\n        const oldDelta = quill.getContents();\n        switch (change.type) {\n          case 'insert':\n            // remove node (undo)\n            TableHistory.remove(change);\n            break;\n          case 'remove':\n            // add node (undo)\n            TableHistory.insert(change);\n            break;\n          case 'split':\n            // merge cell (redo)\n            TableHistory.merge(change, true);\n            // force triggering text-change event\n            TableTrick.emitTextChange(quill, oldDelta);\n            break;\n          case 'merge':\n            // split cell (redo)\n            TableHistory.split(change, true);\n            break;\n          case 'propertyChange':\n            // property change (undo)\n            TableHistory.propertyChange(change, true);\n            break;\n        }\n      });\n    }\n\n    // wait history update\n    setTimeout(() => {\n      // update history\n      const historyEntry = quill.history.stack.undo.pop();\n      quill.history.stack.redo.push(historyEntry);\n      quill.history.ignoreChange = historyChangeStatus;\n    }, 0);\n  }\n\n  static redo(quill, id) {\n    const historyChangeStatus = quill.history.ignoreChange;\n    quill.history.ignoreChange = true;\n\n    const entry = quill.history.tableStack[id];\n    if (typeof entry !== 'undefined') {\n      // apply changes from first change to last change (redo)\n      entry.forEach(change => {\n        switch (change.type) {\n          case 'insert':\n            // add node (redo)\n            TableHistory.insert(change);\n            break;\n          case 'remove':\n            // remove node (redo)\n            TableHistory.remove(change);\n            break;\n          case 'split':\n            // split cell (redo)\n            TableHistory.split(change, false);\n            break;\n          case 'merge':\n            // merge cell (redo)\n            TableHistory.merge(change, false);\n            break;\n          case 'propertyChange':\n            // property change (redo)\n            TableHistory.propertyChange(change, false);\n            break;\n        }\n      });\n    }\n\n    // wait history update\n    setTimeout(() => {\n      // update history\n      const historyEntry = quill.history.stack.redo.pop();\n      quill.history.stack.undo.push(historyEntry);\n      quill.history.ignoreChange = historyChangeStatus;\n    }, 0);\n  }\n\n  static insert(change) {\n    const parentNode = change.parentNode || change.nextNode.parentNode;\n    if (parentNode) {\n      const _parentNode = Parchment.find(parentNode);\n      if (_parentNode) {\n        const _node = Parchment.create(change.node);\n        if (change.nextNode) {\n          const _nextNode = Parchment.find(change.nextNode);\n          if (_nextNode) {\n            _parentNode.insertBefore(_node, _nextNode);\n          }\n        } else {\n          _parentNode.appendChild(_node);\n        }\n      }\n\n      // force re-rendering cells border (Firefox bug)\n      const tableNode = change.node.nodeName === 'TABLE' ? change.node : parentNode.closest('table');\n      tableNode.style.setProperty('overflow', (window.getComputedStyle(tableNode)['overflow'] || 'visible') === 'visible' ? 'hidden' : 'visible');\n      setTimeout(() => {\n        tableNode.style.removeProperty('overflow');\n      }, 0);\n\n      return true;\n    }\n    return false;\n  }\n\n  static remove(change) {\n    change.node.remove();\n    return true;\n  }\n\n  static split(change, revert) {\n    const td = change.node;\n    // remove colspan and rowspan attributes\n    td.removeAttribute('colspan');\n    td.removeAttribute('rowspan');\n    // for each merged node, remove merge_id attribute and restore content\n    change.mergedNodes.forEach(cell => {\n      cell.node.removeAttribute('merge_id');\n      cell.node.innerHTML = cell[revert ? 'oldContent' : 'newContent'];\n    });\n    // restore content\n    td.innerHTML = change[revert ? 'oldContent' : 'newContent'];\n    return true;\n  }\n\n  static merge(change, revert) {\n    const td = change.node;\n    const cell_id = td.getAttribute('cell_id');\n    // set colspan and rowspan attributes\n    td.setAttribute('colspan', change.colSpan);\n    td.setAttribute('rowspan', change.rowSpan);\n    // for each node to merge, set merge_id attribute and restore content\n    change.mergedNodes.forEach(cell => {\n      cell.node.innerHTML = cell[revert ? 'oldContent' : 'newContent'];\n      cell.node.setAttribute('merge_id', cell_id);\n    });\n    // restore content\n    td.innerHTML = change[revert ? 'oldContent' : 'newContent'];\n    return true;\n  }\n\n  static propertyChange(change, revert) {\n    const { node, property, oldValue, newValue } = change;\n    const value = revert ? oldValue : newValue;\n    if (value !== null) {\n      node.setAttribute(property, value);\n    } else {\n      node.removeAttribute(property);\n    }\n  }\n}\n\nTableHistory.changes = [];\nexport default TableHistory;\n","export default class TableToolbar {\n  static get(quill) {\n    if (quill.container.previousSibling && quill.container.previousSibling.classList && quill.container.previousSibling.classList.contains('ql-toolbar')) {\n      return quill.container.previousSibling;\n    }\n    return null;\n  }\n\n  static toggle(quill, actions = [], enable = true) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return;\n    if (typeof actions === 'string') actions = [actions];\n\n    actions.forEach(action => {\n      let selector = `.ql-table .ql-picker-item[data-value=\"${action}\"], .ql-table[value=\"${action}\"]`;\n      if (action.startsWith('*') && action.endsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value*=\"${action.substring(1, action.length - 1)}\"], .ql-table[value*=\"${action.substring(1, action.length - 1)}\"]`;\n      } else if (action.startsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value$=\"${action.substring(1)}\"], .ql-table[value$=\"${action.substring(1)}\"]`;\n      } else if (action.endsWith('*')) {\n        selector = `.ql-table .ql-picker-item[data-value^=\"${action.substring(0, action.length - 1)}\"], .ql-table[value^=\"${action.substring(0, action.length - 1)}\"]`;\n      }\n\n      toolbar.querySelectorAll(selector).forEach(item => {\n        item.classList[enable ? 'add' : 'remove']('enabled');\n      });\n    });\n  }\n\n  static enable(quill, actions) {\n    TableToolbar.toggle(quill, actions, true);\n  }\n\n  static disable(quill, actions) {\n    TableToolbar.toggle(quill, actions, false);\n  }\n\n  static disableAll(quill) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return false;\n    toolbar.querySelectorAll('.ql-table .ql-picker-item.enabled, .ql-table.enabled[value]').forEach(item => item.classList.remove('enabled'));\n  }\n\n  static isEnabled(quill, action) {\n    const toolbar = TableToolbar.get(quill);\n    if (!toolbar) return false;\n    const item = toolbar.querySelector(`.ql-table .ql-picker-item[data-value=\"${action}\"], .ql-table[value=\"${action}\"]`);\n    return item && item.classList.contains('enabled');\n  }\n}\n","import TableToolbar from './TableToolbar';\n\nclass TableSelection {\n  static mouseDown(quill, e, inCellSelectionOnClick) {\n    if (inCellSelectionOnClick !== undefined){ //we may have no options set for onClick\n      TableSelection.cellSelectionOnClick = inCellSelectionOnClick;\n    }\n\n    if (e.which !== 1) {\n      // do nothing with center or right click\n      return;\n    }\n\n    TableSelection.resetSelection();\n\n    if ((!TableSelection.cellSelectionOnClick && e.ctrlKey) || TableSelection.cellSelectionOnClick){\n      TableSelection.isMouseDown = true;\n      // reset cell selection\n      TableSelection.previousSelection = [TableSelection.selectionStartElement, TableSelection.selectionEndElement];\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableSelection.resetSelection();\n\n      const targetCell = TableSelection.getTargetCell(e);\n      if (!targetCell) {\n        // default mouse down event when clicking outside a cell\n        TableSelection.focusedCell = null;\n        return;\n      }\n\n      if ((!TableSelection.preventMouseDown && targetCell === TableSelection.clickedCellTimeout) || TableSelection.focusedCell === targetCell) {\n        // default mouse down event when multiple click in less than 500ms in the same cell or if the cell is already focused\n        TableSelection.focusedCell = targetCell;\n        return;\n      }\n\n      // single mouse left click = start selection\n      e.preventDefault();\n      TableSelection.focusedCell = null;\n\n      clearTimeout(TableSelection.dblClickTimeout);\n      TableSelection.dblClickTimeout = setTimeout(() => {\n        TableSelection.preventMouseDown = true;\n        TableSelection.clickedCellTimeout = null;\n      }, 500);\n      TableSelection.preventMouseDown = false;\n\n      TableSelection.selectionStartElement = TableSelection.clickedCellTimeout = targetCell;\n\n      if (TableSelection.selectionStartElement) {\n        TableSelection.selectionStartElement.classList.add('ql-cell-selected');\n      }\n    }\n  }\n\n  static mouseMove(quill, e) {\n    if (TableSelection.isMouseDown && TableSelection.selectionStartElement) {\n      const previousSelectionEndElement = TableSelection.selectionEndElement;\n      TableSelection.selectionEndElement = TableSelection.getTargetCell(e);\n      // Update selection if: mouse button is down, selection changed, start and end element exist and are in the same table\n      if (\n        TableSelection.selectionEndElement &&\n        TableSelection.selectionEndElement !== previousSelectionEndElement &&\n        TableSelection.selectionStartElement.closest('table') === TableSelection.selectionEndElement.closest('table')\n      ) {\n        TableSelection.resetSelection();\n\n        // set new selection\n        const coords = TableSelection.getSelectionCoords();\n        for (let y = coords.minY; y <= coords.maxY; y++) {\n          for (let x = coords.minX; x <= coords.maxX; x++) {\n            let cell = TableSelection.getCellAt(x, y);\n            if (cell) {\n              cell.classList.add('ql-cell-selected');\n            }\n          }\n        }\n      }\n    }\n  }\n\n  static mouseUp(quill, e) {\n    TableSelection.isMouseDown = false;\n    if (!TableSelection.selectionEndElement) {\n      TableSelection.selectionEndElement = TableSelection.selectionStartElement;\n    }\n\n    if (\n      TableSelection.previousSelection[0] !== TableSelection.selectionStartElement &&\n      TableSelection.previousSelection[1] !== TableSelection.selectionEndElement\n    ) {\n      TableSelection.selectionChange(quill);\n    }\n  }\n\n  static selectionChange(quill, range = null, oldRange = null) {\n    let isInTable = false;\n    if (TableSelection.selectionStartElement || TableSelection.selectionEndElement) {\n      // there is a table selection\n      isInTable = true;\n      TableToolbar.enable(quill, ['split-cell', 'merge-selection', 'remove-selection']);\n    } else {\n      // Text selection\n      TableToolbar.disable(quill, ['split-cell', 'merge-selection', 'remove-selection']);\n      let selectionStartElement, selectionEndElement;\n      if (range === null && oldRange !== null) {\n        // There is a previous Quill selection but editor is no longer focused (selection-change event)\n        const [startLeaf] = quill.getLeaf(oldRange.index);\n        const [endLeaf] = quill.getLeaf(oldRange.index + oldRange.length);\n        selectionStartElement = startLeaf.parent.domNode;\n        selectionEndElement = endLeaf.parent.domNode;\n      } else {\n        // No Quill selection, use window.getSelection instead\n        const selection = window.getSelection();\n        selectionStartElement = selection.anchorNode ? (selection.anchorNode.nodeType === Node.TEXT_NODE ? selection.anchorNode.parentElement : selection.anchorNode) : null;\n        selectionEndElement = selection.focusNode ? (selection.focusNode.nodeType === Node.TEXT_NODE ? selection.focusNode.parentElement : selection.focusNode) : null;\n      }\n\n      if (selectionStartElement && selectionEndElement) {\n        // there is a text selection\n        let closestTable = selectionStartElement.closest('table');\n        if (closestTable && closestTable.closest('.ql-editor')) {\n          if (selectionEndElement !== selectionStartElement) {\n            closestTable = selectionEndElement.closest('table');\n            isInTable = closestTable && closestTable.closest('.ql-editor');\n          } else {\n            isInTable = true;\n          }\n        }\n      } // no selection = not in table\n    }\n\n    if (!isInTable && quill.table.isInTable) {\n      // disable\n      quill.table.isInTable = false;\n      TableToolbar.disableAll(quill);\n      TableToolbar.enable(quill, ['newtable_*', 'insert', 'undo', 'redo']);\n    }\n\n    if (isInTable && !quill.table.isInTable) {\n      // enable\n      quill.table.isInTable = true;\n      TableToolbar.enable(quill, ['append-row*', 'append-col*', 'remove-cell', 'remove-row', 'remove-col', 'change-width-col-modal', 'change-width-table-modal', 'remove-table']);\n    }\n  }\n\n  static getSelectionCoords() {\n    if (TableSelection.selectionStartElement && TableSelection.selectionEndElement) {\n      const coords = [\n        [\n          Array.prototype.indexOf.call(TableSelection.selectionStartElement.parentElement.children, TableSelection.selectionStartElement),\n          Array.prototype.indexOf.call(TableSelection.selectionStartElement.parentElement.parentElement.children, TableSelection.selectionStartElement.parentElement)\n        ],\n        [\n          Array.prototype.indexOf.call(TableSelection.selectionEndElement.parentElement.children, TableSelection.selectionEndElement),\n          Array.prototype.indexOf.call(TableSelection.selectionEndElement.parentElement.parentElement.children, TableSelection.selectionEndElement.parentElement)\n        ]\n      ];\n\n      return {\n        coords,\n        minX: Math.min(coords[0][0], coords[1][0]),\n        maxX: Math.max(coords[0][0], coords[1][0]),\n        minY: Math.min(coords[0][1], coords[1][1]),\n        maxY: Math.max(coords[0][1], coords[1][1])\n      };\n    }\n    return null;\n  }\n\n  static getCellAt(x, y) {\n    const currentTable = TableSelection.selectionStartElement.closest('table');\n    if (currentTable) {\n      if (typeof currentTable.children[y] !== 'undefined' && typeof currentTable.children[y].children[x] !== 'undefined') {\n        return currentTable.children[y].children[x];\n      }\n    }\n    return null;\n  }\n\n  static getTargetCell(e) {\n    let element = e.target;\n    let cell = null;\n    do {\n      if (['td', 'th'].includes(element.tagName.toLowerCase())) {\n        cell = element;\n        break;\n      }\n      element = element.parentNode;\n    } while (element && element !== e.currentTarget);\n    return cell;\n  }\n\n  static resetSelection(container) {\n    // reset selection for all instances\n    document.querySelectorAll('.ql-editor td.ql-cell-selected').forEach(cell => {\n      cell.classList.remove('ql-cell-selected');\n    });\n  }\n}\n\nTableSelection.focusedCell = null;\nTableSelection.isMouseDown = false;\nTableSelection.selectionStartElement = null;\nTableSelection.selectionEndElement = null;\nTableSelection.previousSelection = [];\n\nTableSelection.dblClickTimeout = null;\nTableSelection.clickedCellTimeout = null;\nTableSelection.preventMouseDown = true;\nTableSelection.cellSelectionOnClick = true\n\nexport default TableSelection;\n","// import Quill from 'quill';\nimport TableHistory from './TableHistory';\nimport TableSelection from './TableSelection';\n\nconst Parchment = Quill.import('parchment');\nconst Container = Quill.import('blots/container');\nconst Scroll = Quill.import('blots/scroll');\n\nexport default class TableTrick {\n  static random_id() {\n    return Math.random().toString(36).slice(2);\n  }\n\n  static getBlot(quill) {\n    let blot = null;\n    const selection = quill.getSelection();\n    if (selection) {\n      blot = quill.getLeaf(selection['index'])[0];\n    }\n    return blot;\n  }\n\n  static find_td(quill) {\n    let blot = TableTrick.getBlot(quill);\n    if (blot) {\n      for (; blot != null && blot.statics.blotName !== 'td';) {\n        blot = blot.parent;\n      }\n    }\n    return blot; // return TD or NULL\n  }\n\n  static find_td_node(quill) {\n    let td = TableTrick.find_td(quill);\n    if(td) {\n      return td.domNode;\n    }\n  }\n\n  static find_table(quill) {\n    const td = TableTrick.find_td(quill);\n    if (td) {\n      return td.parent.parent;\n    }\n  }\n\n  static find_table_node(quill) {\n    const table = TableTrick.find_table(quill);\n    if (table) {\n      return table.domNode;\n    }\n  }\n\n\n  static getQuill(el) {\n    // Get Quill instance from node/element or blot\n    let quill = null;\n    if (el instanceof Node) {\n      if (!el instanceof Element) {\n        el = el.parentElement;\n      }\n    } else if (typeof el === 'object' && typeof el.domNode !== 'undefined') {\n      el = el.domNode;\n    }\n\n    if (el instanceof Element) {\n      const editorNode = el.closest('.ql-container');\n      if (editorNode) {\n        quill = Quill.find(editorNode);\n      }\n    }\n    return quill;\n  }\n\n  static insertTable(quill, col_count, row_count) {\n    const table_id = TableTrick.random_id();\n    const table = Parchment.create('table', table_id);\n    for (let ri = 0; ri < row_count; ri++) {\n      const row_id = TableTrick.random_id();\n      const tr = Parchment.create('tr', row_id);\n      table.appendChild(tr);\n      for (let ci = 0; ci < col_count; ci++) {\n        const cell_id = TableTrick.random_id();\n        const value = [table_id, row_id, cell_id].join('|');\n        const td = Parchment.create('td', value);\n        tr.appendChild(td);\n        const p = Parchment.create('block');\n        td.appendChild(p);\n        const br = Parchment.create('break');\n        p.appendChild(br);\n      }\n    }\n    let blot = TableTrick.getBlot(quill);\n    let top_branch = null;\n    for (; blot != null && !(blot instanceof Container || blot instanceof Scroll);) {\n      top_branch = blot;\n      blot = blot.parent;\n    }\n    blot.insertBefore(table, top_branch);\n    // TableHistory.register('insert', { node: table.domNode, nextNode: top_branch.domNode });\n    // TableHistory.add(quill);\n  }\n\n  static removeTable(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table;\n    if (coords) {\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n    } else {\n      const td = TableTrick.find_td(quill);\n      if (td) {\n        table = td.parent.parent;\n      }\n    }\n\n    if (table) {\n      TableHistory.register('remove', { node: table.domNode, nextNode: table.next ? table.next.domNode : null, parentNode: table.parent.domNode });\n      TableHistory.add(quill);\n      table.remove();\n    }\n  }\n\n\n  static changeWidthTable(quill, width) {\n    const widthValue = width + '%';\n    const styleValue = `width:${widthValue}`;\n    const table = TableTrick.find_table(quill);\n\n    if (table) {\n      const tableNode = table.domNode;\n      TableHistory.register('propertyChange',{ node: tableNode, property: 'style', oldValue: tableNode.style, newValue: styleValue });\n      tableNode.setAttribute('style', styleValue);\n      TableHistory.add(quill);\n    }\n  }\n\n  static addCol(quill, direction = 'after') {\n    // direction = before: append col before current cell or before leftmost cell of selection\n    // direction = after: append col after current cell or after rightmost cell of selection\n    const coords = TableSelection.getSelectionCoords();\n    let td = TableTrick.find_td(quill);\n    if (coords) {\n      const cell = TableSelection.getCellAt(coords.maxX, coords.minY) || TableSelection.getCellAt(coords.maxX, coords.maxY);\n      if (cell) {\n        td = Parchment.find(cell);\n      }\n    }\n\n    if (td) {\n      if (direction !== 'before' && td.domNode.getAttribute('colspan')) {\n        // for direction = after, if the cell is merged, append column at the end of merged cell (not after the first cell)\n        const endCell = td.parent.domNode.children[\n          Array.prototype.indexOf.call(td.parent.domNode.children, td.domNode) + Number.parseInt(td.domNode.getAttribute('colspan')) - 1\n        ];\n        if (endCell) {\n          td = Parchment.find(endCell);\n        }\n      }\n\n      // get cell index\n      const index = Array.prototype.indexOf.call(td.parent.domNode.children, td.domNode) + (direction === 'before' ? 0 : 1);\n      // is this the last cell?\n      const last_cell = index === td.parent.domNode.children.length;\n      const table = td.parent.parent;\n      const table_id = table.domNode.getAttribute('table_id');\n      let managed_merged_cells = [];\n\n      table.children.forEach(function (tr) {\n        const row_id = tr.domNode.getAttribute('row_id');\n        const cell_id = TableTrick.random_id();\n        const new_td = Parchment.create('td', [table_id, row_id, cell_id].join('|'));\n        // do not add the cell for this row if selected cell is the last cell and if this row has more or less cells\n        if (!last_cell || index === tr.domNode.children.length) {\n          if (typeof tr.domNode.children[index] === 'undefined') {\n            tr.appendChild(new_td);\n            TableHistory.register('insert', { node: new_td.domNode, parentNode: tr.domNode });\n          } else {\n            const td = Parchment.find(tr.domNode.children[index]);\n            if (td) {\n              // manage merged cells\n              if (td.domNode.previousSibling) {\n                let merge_id = td.domNode.previousSibling.getAttribute('merge_id');\n                const _colSpan = Number.parseInt(td.domNode.previousSibling.getAttribute('colspan') || 1);\n                if (_colSpan > 1) {\n                  merge_id = td.domNode.previousSibling.getAttribute('cell_id');\n                }\n\n                if (merge_id) {\n                  new_td.domNode.setAttribute('merge_id', merge_id);\n                  if (managed_merged_cells.indexOf(merge_id) === -1) {\n                    managed_merged_cells.push(merge_id);\n                    const _cell = table.domNode.querySelector('td[cell_id=\"' + merge_id + '\"]');\n                    if (_cell) {\n                      const colSpan = Number.parseInt(_cell.getAttribute('colspan'));\n                      _cell.setAttribute('colspan', colSpan + 1);\n                      TableHistory.register('propertyChange', { node: _cell, property: 'colspan', oldValue: colSpan, newValue: colSpan + 1 });\n                    }\n                  }\n                }\n              }\n              tr.insertBefore(new_td, td);\n              TableHistory.register('insert', { node: new_td.domNode, nextNode: td.domNode });\n            }\n          }\n        }\n      });\n      TableHistory.add(quill);\n    }\n  }\n\n  static addRow(quill, direction = 'after') {\n    // direction = before: append row above current cell or above topmost cell of selection\n    // direction = after: append row below current cell or below bottommost cell of selection\n    const coords = TableSelection.getSelectionCoords();\n    let td = TableTrick.find_td(quill);\n    if (coords) {\n      const cell = TableSelection.getCellAt(coords.minX, coords.maxY) || TableSelection.getCellAt(coords.maxX, coords.maxY);\n      if (cell) {\n        td = Parchment.find(cell);\n      }\n    }\n\n    if (td) {\n      const tr = td.parent;\n      const col_count = tr.domNode.children.length;\n      const table = tr.parent;\n      const new_row = tr.clone();\n      // get row index\n      let index = Array.prototype.indexOf.call(table.domNode.children, tr.domNode) + (direction === 'before' ? 0 : 1);\n\n      let manage_merged_cells = true;\n      const rowSpan = Number.parseInt(td.domNode.getAttribute('rowspan') || 1);\n      if (rowSpan > 1) {\n        manage_merged_cells = false;\n        if (direction !== 'before') {\n          // add row below merged cell\n          index += rowSpan - 1;\n        }\n      }\n\n      const table_id = table.domNode.getAttribute('table_id');\n      const row_id = TableTrick.random_id();\n      new_row.domNode.setAttribute('row_id', row_id);\n      let managed_merged_cells = [];\n      let managed_unmerged_cells = [];\n\n      for (let i = 0; i < col_count; i++) {\n        const prev_cell = tr.domNode.children[i];\n        const cell_id = TableTrick.random_id();\n        const td = Parchment.create('td', [table_id, row_id, cell_id].join('|'));\n        if (prev_cell && manage_merged_cells) {\n          // manage merged cells\n          let merge_id, merged_cell;\n          if (prev_cell.getAttribute('rowspan')) {\n            merge_id = prev_cell.getAttribute('cell_id');\n            merged_cell = prev_cell;\n            if (direction === 'before') {\n              // do not merge cells if we add a row before a merged cell\n              if (managed_unmerged_cells.indexOf(merge_id) === -1) {\n                managed_unmerged_cells.push(merge_id);\n              }\n            }\n          } else if (prev_cell.getAttribute('merge_id')) {\n            merge_id = prev_cell.getAttribute('merge_id');\n            merged_cell = table.domNode.querySelector('td[cell_id=\"' + merge_id + '\"]');\n          }\n\n          if (merge_id && merged_cell && managed_unmerged_cells.indexOf(merge_id) === -1 && merged_cell.getAttribute('rowspan')) {\n            // merge cells of the new row according to previous row\n            let merge_rowspan = Number.parseInt(merged_cell.getAttribute('rowspan'));\n            if (merge_rowspan > 1) {\n              if (managed_merged_cells.indexOf(merge_id) === -1) {\n                managed_merged_cells.push(merge_id);\n                merged_cell.setAttribute('rowspan', merge_rowspan + 1);\n                TableHistory.register('propertyChange', { node: merged_cell, property: 'rowspan', oldValue: merge_rowspan, newValue: merge_rowspan + 1 });\n              }\n              td.domNode.setAttribute('merge_id', merge_id);\n            }\n          }\n        }\n\n        new_row.appendChild(td);\n        const p = Parchment.create('block');\n        td.appendChild(p);\n        const br = Parchment.create('break');\n        p.appendChild(br);\n      }\n\n      if (typeof table.domNode.children[index] === 'undefined') {\n        table.appendChild(new_row);\n        TableHistory.register('insert', { node: new_row.domNode, parentNode: table.domNode });\n      } else {\n        const row = Parchment.find(table.domNode.children[index]);\n        if (row) {\n          table.insertBefore(new_row, row);\n          TableHistory.register('insert', { node: new_row.domNode, nextNode: row.domNode });\n        }\n      }\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeCol(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table, colIndex, colsToRemove;\n    if (coords) {\n      // if we have a selection, remove all selected columns\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n      colIndex = coords.minX;\n      colsToRemove = coords.maxX - coords.minX + 1;\n    } else {\n      // otherwise, remove only the column of current cell\n      colsToRemove = 1;\n      const currentCell = TableTrick.find_td(quill);\n      if (currentCell) {\n        table = currentCell.parent.parent;\n        colIndex = Array.prototype.indexOf.call(currentCell.parent.domNode.children, currentCell.domNode);\n      }\n    }\n\n    if (table && typeof colIndex === 'number' && typeof colsToRemove === 'number') {\n      // Remove all TDs with the colIndex and repeat it colsToRemove times if there are multiple columns to delete\n      for (let i = 0; i < colsToRemove; i++) {\n        table.children.forEach(function (tr) {\n          const td = tr.domNode.children[colIndex];\n          if (td) {\n            const merge_id = td.getAttribute('merge_id');\n            if (merge_id) {\n              // if a cell is merged to another cell, get target cell and decrement colspan\n              const cell = table.domNode.querySelector(`td[cell_id=\"${merge_id}\"]`);\n              if (cell) {\n                const colSpan = Number.parseInt(cell.getAttribute('colspan'));\n                cell.setAttribute('colspan', colSpan - 1);\n                TableHistory.register('propertyChange', { node: cell, property: 'colspan', oldValue: colSpan, newValue: colSpan - 1 });\n              }\n            }\n\n            if (td.getAttribute('colspan')) {\n              TableTrick._split(td);\n            }\n\n            TableHistory.register('remove', { node: td, nextNode: td.nextSibling, parentNode: tr.domNode });\n            const _td = Parchment.find(td);\n            if (_td) { // remove node this way in order to update delta\n              _td.remove();\n            }\n          }\n        });\n      }\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static changeWidthCol(quill, width) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let table, colIndex, colsToRemove;\n    if (coords) {\n      // if we have a selection, remove all selected columns\n      const _table = TableSelection.selectionStartElement.closest('table');\n      table = Parchment.find(_table);\n      colIndex = coords.minX;\n      colsToRemove = coords.maxX - coords.minX + 1;\n    } else {\n      // otherwise, remove only the column of current cell\n      colsToRemove = 1;\n      const currentCell = TableTrick.find_td(quill);\n      if (currentCell) {\n        table = currentCell.parent.parent;\n        colIndex = Array.prototype.indexOf.call(currentCell.parent.domNode.children, currentCell.domNode);\n      }\n    }\n\n    if (table && typeof colIndex === 'number' && typeof colsToRemove === 'number') {\n      const widthValue = width + '%';\n      // Remove all TDs with the colIndex and repeat it colsToRemove times if there are multiple columns to delete\n      for (let i = 0; i < colsToRemove; i++) {\n        table.children.forEach(function (tr) {\n          const td = tr.domNode.children[colIndex];\n          if (td) {\n            TableHistory.register('propertyChange', { node: td, property: 'width', oldValue: td.width, newValue: widthValue });\n            td.setAttribute('width', widthValue);\n          }\n        });\n      }\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeRow(quill) {\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n\n    const manageMergedCells = (tr) => {\n      let managed_merged_cells = [];\n      [...tr.children].forEach(function(td) {\n        const merge_id = td.getAttribute('merge_id');\n        if (merge_id && managed_merged_cells.indexOf(merge_id) === -1) {\n          // if a cell is merged to another cell, get target cell and decrement rowspan\n          const cell = tr.parentNode.querySelector(`td[cell_id=\"${merge_id}\"]`);\n          managed_merged_cells.push(merge_id);\n          if (cell) {\n            const rowSpan = Number.parseInt(cell.getAttribute('rowspan'));\n            cell.setAttribute('rowspan', rowSpan - 1);\n            TableHistory.register('propertyChange', { node: cell, property: 'rowspan', oldValue: rowSpan, newValue: rowSpan - 1 });\n          }\n        }\n\n        if (td.getAttribute('rowspan')) {\n          TableTrick._split(td);\n        }\n      });\n    };\n\n    if (coords) {\n      // if we have a selection, remove all selected rows\n      const table = TableSelection.selectionStartElement.closest('table');\n      const rowIndex = coords.minY;\n      const rowsToRemove = coords.maxY - coords.minY + 1;\n\n      for (let i = 0; i < rowsToRemove; i++) {\n        const tr = table.children[rowIndex];\n        if (tr) {\n          manageMergedCells(tr);\n          TableHistory.register('remove', { node: tr, nextNode: tr.nextSibling, parentNode: table });\n          const _tr = Parchment.find(tr);\n          if (_tr) { // remove node this way in order to update delta\n            _tr.remove();\n          }\n        }\n      }\n    } else {\n      // otherwise, remove only the row of current cell\n      const td = TableTrick.find_td(quill);\n      if (td) {\n        const tr = td.parent;\n        manageMergedCells(tr.domNode);\n        TableHistory.register('remove', { node: tr.domNode, nextNode: tr.next ? tr.next.domNode : null, parentNode: tr.parent.domNode });\n        const _tr = Parchment.find(tr.domNode);\n        if (_tr) { // remove node this way in order to update delta\n          _tr.remove();\n        }\n      }\n    }\n    TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n    TableHistory.add(quill);\n  }\n\n  static splitCell(quill) {\n    // get cell\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let td = TableTrick.find_td(quill);\n    if (coords && coords.maxX - coords.minX === 0 && coords.maxY - coords.minY === 0) {\n      const _td = TableSelection.getCellAt(coords.minX, coords.minY);\n      td = Parchment.find(_td);\n    }\n\n    if (td && TableTrick._split(td.domNode)) {\n      // add changes to history\n      // TableTrick._split already register 'split' change to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      // force triggering text-change event\n      td.domNode.innerHTML = td.domNode.innerHTML;\n      TableHistory.add(quill);\n    }\n  }\n\n  static mergeSelection(quill) {\n    // get selection\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    if (coords) {\n      const table = TableSelection.selectionStartElement.closest('table');\n      const colSpan = coords.maxX - coords.minX + 1;\n      const rowSpan = coords.maxY - coords.minY + 1;\n      if (colSpan > 1 || rowSpan > 1) {\n        let node = null;\n        let oldContent = null;\n        let mergedNodes = [];\n        let mergedCellContent = [];\n        let cell_id;\n        // get selected cells\n        for (let y = coords.minY; y <= coords.maxY; y++) {\n          for (let x = coords.minX; x <= coords.maxX; x++) {\n            const cell = table.children[y].children[x];\n            if (cell) {\n              if (cell.textContent !== '') {\n                // merge all contents\n                mergedCellContent.push(cell.innerHTML);\n              }\n\n              if (!node) {\n                // first cell (this cell will be kept)\n                cell_id = cell.getAttribute('cell_id');\n                node = cell;\n                oldContent = node.innerHTML;\n              } else {\n                // other cells that will be merged\n                let _oldContent = cell.innerHTML;\n                // update mergedNodes array for history purposes\n                mergedNodes.push({ node: cell, oldContent: _oldContent, newContent: '<p><br></p>' });\n              }\n\n              if (cell.getAttribute('colspan') || cell.getAttribute('rowspan')) {\n                // cannot merge cell already merged\n                alert('Cannot merge already merged cell');\n                return false;\n              }\n            }\n          }\n        }\n\n        if (node && mergedNodes.length) {\n          mergedNodes.forEach(mergedNode => {\n            mergedNode.node.setAttribute('merge_id', cell_id);\n            mergedNode.node.innerHTML = mergedNode.newContent;\n          });\n\n          // set colspan and rowspan attributes\n          node.setAttribute('colspan', colSpan);\n          node.setAttribute('rowspan', rowSpan);\n          // set merged content\n          node.innerHTML = mergedCellContent.join('');\n        }\n        // add changes to history\n        TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n        TableHistory.register('merge', { node, mergedNodes, colSpan, rowSpan, oldContent, newContent: node.innerHTML });\n        TableHistory.add(quill);\n      }\n    }\n  }\n\n  static removeCell(quill) {\n    // get cell\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    let td = TableTrick.find_td(quill);\n    if (coords && coords.maxX - coords.minX === 0 && coords.maxY - coords.minY === 0) {\n      const _td = TableSelection.getCellAt(coords.minX, coords.minY);\n      td = Parchment.find(_td);\n    }\n\n    if (td && TableTrick._removeCell(td.domNode)) {\n      // add changes to history\n      // TableTrick._removeCell already register 'remove' change to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static removeSelection(quill) {\n    // get selection\n    const coords = TableSelection.getSelectionCoords();\n    TableSelection.resetSelection(quill.container);\n    if (coords) {\n      const table = TableSelection.selectionStartElement.closest('table');\n      let nodesToRemove = [];\n      for (let y = coords.minY; y <= coords.maxY; y++) {\n        for (let x = coords.minX; x <= coords.maxX; x++) {\n          const cell = table.children[y].children[x];\n          if (cell) {\n            // if a cell is merged to another cell, split target cell\n            const merge_id = cell.getAttribute('merge_id');\n            if (merge_id) {\n              const targetCell = table.querySelector(`td[cell_id=\"${merge_id}\"]`);\n              if (targetCell) {\n                TableTrick._split(targetCell);\n              }\n            }\n\n            if (cell.getAttribute('rowspan') || cell.getAttribute('colspan')) {\n              TableTrick._split(cell);\n            }\n\n            // remove cell (and row if empty)\n            let node = cell;\n            let nextNode = cell.nextSibling;\n            let parentNode = cell.parentNode;\n            if (parentNode.nodeName === 'TR' && parentNode.childNodes.length <= 1) {\n              // remove row if only one node (cell to be removed)\n              node = parentNode;\n              nextNode = node.nextSibling;\n              parentNode = node.parentNode;\n            }\n            nodesToRemove.push(node);\n            TableHistory.register('remove', { node, nextNode, parentNode });\n          }\n        }\n      }\n\n      nodesToRemove.forEach(node => {\n        const _node = Parchment.find(node);\n        if (_node) { // remove node this way in order to update delta\n          _node.remove();\n        }\n      });\n\n      // add changes to history\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableHistory.add(quill);\n    }\n  }\n\n  static _removeCell(cell, recursive = true) {\n    let cell_id = cell.getAttribute('cell_id');\n    if (cell.nodeName === 'TD') {\n      if (recursive) {\n        if (cell.getAttribute('merge_id')) {\n          // remove merged cells\n          cell = cell.closest('table').querySelector('td[cell_id=\"' + cell.getAttribute('merge_id') + '\"]');\n          if (!cell) return false;\n          cell_id = cell.getAttribute('cell_id');\n        }\n\n        if (cell.getAttribute('colspan') || cell.getAttribute('rowspan')) {\n          // remove merged cells\n          cell.parentNode.parentNode.querySelectorAll(`td[merge_id=\"${cell_id}\"`).forEach(node => {\n            TableTrick._removeCell(node, false);\n          });\n        }\n      }\n\n      let node = cell;\n      let nextNode = cell.nextSibling;\n      let parentNode = cell.parentNode;\n      if (parentNode.nodeName === 'TR' && parentNode.childNodes.length <= 1) {\n        // remove row if only one node (cell to be removed)\n        node = parentNode;\n        nextNode = node.nextSibling;\n        parentNode = node.parentNode;\n        if (parentNode.nodeName === 'TABLE' && parentNode.childNodes.length <= 1) {\n          // remove table if only one node (row to be removed)\n          node = parentNode;\n          nextNode = node.nextSibling;\n          parentNode = node.parentNode;\n        }\n      }\n\n      const _node = Parchment.find(node);\n      if (_node) { // remove node this way in order to update delta\n        _node.remove();\n      }\n\n      TableHistory.register('remove', { node, nextNode, parentNode });\n      return true;\n    }\n    return false;\n  }\n\n  static _split(cell) {\n    const cell_id = cell.getAttribute('cell_id');\n    // get merged nodes and update mergedNodes array for history purposes, remove merge_id attribute\n    let mergedNodes = [];\n    cell.parentNode.parentNode.querySelectorAll(`td[merge_id=\"${cell_id}\"`).forEach(node => {\n      mergedNodes.push({ node, oldContent: node.innerHTML, newContent: node.innerHTML });\n      node.removeAttribute('merge_id');\n    });\n\n    const colSpan = Number.parseInt(cell.getAttribute('colspan') || 1);\n    const rowSpan = Number.parseInt(cell.getAttribute('rowspan') || 1);\n    if (colSpan > 1 || rowSpan > 1) {\n      // remove colspan and rowspan attributes\n      cell.removeAttribute('colspan');\n      cell.removeAttribute('rowspan');\n      // register changes to history\n      TableHistory.register('split', { node: cell, mergedNodes, colSpan, rowSpan, oldContent: cell.innerHTML, newContent: cell.innerHTML });\n      return true;\n    }\n    return false;\n  }\n\n  static emitTextChange(quill, oldDelta, source = 'user') {\n    const newDelta = quill.getContents();\n    quill.emitter.emit('text-change', oldDelta.diff(newDelta), oldDelta, source);\n  }\n\n  static table_handler(value, quill) {\n    // Check if the selection is for the same Quill instance, otherwise reset selection\n    if (\n      (TableSelection.selectionStartElement && !quill.container.contains(TableSelection.selectionStartElement)) ||\n      (TableSelection.selectionEndElement && !quill.container.contains(TableSelection.selectionEndElement))\n    ) {\n      TableSelection.selectionStartElement = TableSelection.selectionEndElement = null;\n      TableSelection.resetSelection();\n    }\n\n    if (value.includes('newtable_')) {\n      const sizes = value.split('_');\n      const row_count = Number.parseInt(sizes[1]);\n      const col_count = Number.parseInt(sizes[2]);\n      TableTrick.insertTable(quill, col_count, row_count);\n    } else {\n      let append_direction = 'after';\n      switch (value) {\n        case 'append-col-before':\n          append_direction = 'before';\n        case 'append-col':\n        case 'append-col-after':\n          TableTrick.addCol(quill, append_direction);\n          break;\n        case 'remove-col':\n          TableTrick.removeCol(quill);\n          break;\n        case 'append-row-above':\n          append_direction = 'before';\n        case 'append-row':\n        case 'append-row-below':\n          TableTrick.addRow(quill, append_direction);\n          break;\n        case 'remove-row':\n          TableTrick.removeRow(quill);\n          break;\n        case 'insert':\n          TableTrick.insertTable(quill, 1, 1);\n          break;\n        case 'remove-table':\n          TableTrick.removeTable(quill);\n          break;\n        case 'split-cell':\n          TableTrick.splitCell(quill);\n          break;\n        case 'merge-selection':\n          TableTrick.mergeSelection(quill);\n          break;\n        case 'remove-cell':\n          TableTrick.removeCell(quill);\n          break;\n        case 'remove-selection':\n          TableTrick.removeSelection(quill);\n          break;\n        case 'undo':\n          if (quill.history.stack.undo.length) {\n            const entry = quill.history.stack.undo[quill.history.stack.undo.length - 1];\n            if (typeof entry.type !== 'undefined' && typeof entry.id !== 'undefined' && entry.type === 'tableHistory') {\n              // Table history entry\n              TableHistory.undo(quill, entry.id);\n              return false;\n            } else if (entry.undo && entry.undo.ops.some(op => op.attributes && op.attributes.td === null)) {\n              // Ajusta histrico: operao de undo possui um item com atributo td=null que mantm uma clula vazia\n              const index = entry.undo.ops.findIndex(op => op.attributes && op.attributes.td === null);\n              entry.undo.ops.splice(index, 1);\n            }\n            // Classic history entry\n          }\n          return true;\n        case 'redo':\n          if (quill.history.stack.redo.length) {\n            const entry = quill.history.stack.redo[quill.history.stack.redo.length - 1];\n            if (typeof entry.type !== 'undefined' && typeof entry.id !== 'undefined' && entry.type === 'tableHistory') {\n              // Table history entry\n              TableHistory.redo(quill, entry.id);\n              return false;\n            }\n            // Classic history entry\n          }\n          return true;\n        case 'copy':\n          if (TableSelection.selectionStartElement && TableSelection.selectionEndElement) {\n            // Copy text in selection\n            // Save previous selection\n            let { anchorNode, anchorOffset, focusNode, focusOffset } = window.getSelection();\n            // Get table selection position\n            // Set selection and copy\n            window.getSelection().removeAllRanges();\n            let range = document.createRange();\n            range.setStart(TableSelection.selectionStartElement, 0);\n            range.setEnd(TableSelection.selectionEndElement, TableSelection.selectionEndElement.childNodes.length);\n            window.getSelection().addRange(range);\n            if (TableSelection.selectionStartElement === TableSelection.selectionEndElement) {\n              TableSelection.selectionStartElement.classList.remove('ql-cell-selected');\n            }\n            document.execCommand('copy');\n            if (TableSelection.selectionStartElement === TableSelection.selectionEndElement) {\n              TableSelection.selectionStartElement.classList.add('ql-cell-selected');\n            }\n            // Remove selection and restore previous selection\n            window.getSelection().removeAllRanges();\n            range.setStart(anchorNode, anchorOffset);\n            range.setEnd(focusNode, focusOffset);\n            window.getSelection().addRange(range);\n            return false;\n          }\n          return true;\n      }\n    }\n  }\n}\n","// import Quill from 'quill';\nimport TableCell from './TableCellBlot';\nimport ContainBlot from './ContainBlot';\nimport TableTrick from './TableTrick';\n\nconst Parchment = Quill.import('parchment');\n\nclass TableRow extends ContainBlot {\n  static create(value) {\n    const tagName = 'tr';\n    let node = super.create(tagName);\n    node.setAttribute('row_id', value ? value : TableTrick.random_id());\n    return node;\n  }\n\n  format() {}\n\n  optimize(context) {\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        var child = this.createDefaultChild();\n        this.appendChild(child);\n        child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n    let next = this.next;\n    if (next != null && next.prev === this &&\n      next.statics.blotName === this.statics.blotName &&\n      next.domNode.tagName === this.domNode.tagName &&\n      next.domNode.getAttribute('row_id') === this.domNode.getAttribute('row_id')\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = this.createDefaultChild(refBlot);\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot);\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = this.createDefaultChild();\n      target.moveChildren(item, this);\n      this.appendChild(item);\n    }\n    super.replace(target);\n  }\n\n  createDefaultChild(refBlot) {\n    let table_id = null;\n    if (refBlot) {\n      table_id = refBlot.domNode.getAttribute('table_id');\n    } else if (this.parent) {\n      table_id = this.parent.domNode.getAttribute('table_id');\n    } else {\n      table_id = this.domNode.parent.getAttribute('table_id');\n    }\n\n    return Parchment.create(this.statics.defaultChild, [table_id, this.domNode.getAttribute('row_id'), TableTrick.random_id()].join('|'));\n  }\n}\n\nTableRow.blotName = 'tr';\nTableRow.tagName = 'tr';\nTableRow.scope = Parchment.Scope.BLOCK_BLOT;\nTableRow.defaultChild = 'td';\nTableRow.allowedChildren = [TableCell];\n\nexport default TableRow;\n","// import Quill from 'quill';\nimport TableTrick from './TableTrick';\nimport TableRow from './TableRowBlot';\nimport TableHistory from './TableHistory';\nimport ContainBlot from './ContainBlot';\n\nconst Parchment = Quill.import('parchment');\n\nclass Table extends ContainBlot {\n  static create(value) {\n    const tagName = 'table';\n    let node = super.create(tagName);\n    node.setAttribute('table_id', value ? value : TableTrick.random_id());\n    node.setAttribute('border', '1');\n    return node;\n  }\n\n  format() {}\n\n  optimize(context) {\n    super.optimize(context);\n    let quill = TableTrick.getQuill(this.domNode);\n    if (!quill) return;\n    let next = this.next;\n    const table_id = this.domNode.getAttribute('table_id');\n\n    if (\n      next != null && next.prev === this && next.domNode.getAttribute('table_id') === table_id &&\n      next.statics.blotName === this.statics.blotName && next.domNode.tagName === this.domNode.tagName\n    ) {\n      // merge table containing single cell with table\n      next.moveChildren(this);\n      next.remove();\n    }\n\n    if (\n      typeof quill.table.tables[table_id] !== 'undefined' &&\n      quill.table.tables[table_id].cell_counter === this.domNode.querySelectorAll('td').length &&\n      quill.table.tables[table_id].row_counter === this.domNode.querySelectorAll('tr').length\n    ) {\n      // our table is fully initialized, we can do more optimizations\n\n      // add hidden merged cells\n      this.domNode.querySelectorAll('td[cell_id][colspan], td[cell_id][rowspan]').forEach(cell => {\n        const index = Array.prototype.indexOf.call(cell.parentNode.children, cell);\n        const colSpan = Number.parseInt(cell.getAttribute('colspan') || 1);\n        const rowSpan = Number.parseInt(cell.getAttribute('rowspan') || 1);\n\n        if (!this.domNode.querySelector('td[merge_id=\"' + cell.getAttribute('cell_id') + '\"]') && (colSpan > 1 || rowSpan > 1)) {\n          let row = cell.parentNode;\n          for (let y = 1; y <= rowSpan; y++) {\n            if (!row) break;\n            // we want to add the cell between cell with colspan/rowspan and next cell\n            // for next rows, add the cell before the cell with the same index\n            let nextCell = y === 1 ? row.children[index + 1] : row.children[index];\n            for (let x = 1; x <= colSpan; x++) {\n              if (x === 1 && y === 1) {\n                continue; // do not add a cell at the original cell position\n              }\n              let newCell = document.createElement('td');\n              newCell.setAttribute('cell_id', TableTrick.random_id());\n              newCell.setAttribute('row_id', row.getAttribute('row_id'));\n              newCell.setAttribute('table_id', this.domNode.getAttribute('table_id'));\n              newCell.setAttribute('merge_id', cell.getAttribute('cell_id'));\n              let p = document.createElement('p');\n              let br = document.createElement('br');\n              p.appendChild(br);\n              newCell.appendChild(p);\n              row.insertBefore(newCell, nextCell);\n            }\n            row = row.nextSibling;\n          }\n        }\n      });\n\n      if (quill.table.tables[table_id].pasted) {\n        // add to history\n        TableHistory.register('insert', { node: this.domNode, nextNode: this.domNode.nextSibling, parentNode: this.domNode.parentNode });\n        TableHistory.add(quill);\n      }\n\n      // delete entry for optimizing only once\n      delete quill.table.tables[table_id];\n    }\n  }\n\n  insertBefore(childBlot, refBlot) {\n    if (this.statics.allowedChildren != null && !this.statics.allowedChildren.some(function (child) {\n      return childBlot instanceof child;\n    })) {\n      let newChild = Parchment.create(this.statics.defaultChild, TableTrick.random_id());\n      newChild.appendChild(childBlot);\n      childBlot = newChild;\n    }\n    super.insertBefore(childBlot, refBlot)\n  }\n}\n\nTable.blotName = 'table';\nTable.tagName = 'table';\nTable.scope = Parchment.Scope.BLOCK_BLOT;\nTable.defaultChild = 'tr';\nTable.allowedChildren = [TableRow];\n\nexport default Table;\n","// import Quill from 'quill';\n// import Delta from 'quill-delta';\n// import './css/quill.table.css';\nimport TableCell from './js/TableCellBlot';\nimport TableRow from './js/TableRowBlot';\nimport TableHistory from './js/TableHistory';\nimport Table from './js/TableBlot';\nimport Contain from './js/ContainBlot';\nimport TableTrick from './js/TableTrick';\nimport TableSelection from './js/TableSelection';\nimport TableToolbar from './js/TableToolbar';\n\nconst Container = Quill.import('blots/container');\nconst Parchment = Quill.import('parchment');\nconst Delta = Quill.import(\"delta\");\n\nconst nodeListToArray = collection => {\n  const elementsIndex = [];\n  for (let i = 0; i < collection.length; i++) {\n    elementsIndex.push(i);\n  }\n  return elementsIndex.map(i => collection.item(i));\n};\n\nContainer.order = [\n  'list', 'contain',   // Must be lower\n  'td', 'tr', 'table'  // Must be higher\n];\n\nconst emitirEventoTableInTable = (quill) => {\n  quill.container.dispatchEvent(\n    new CustomEvent('onTableInTable', {\n      bubbles: true,\n      composed: true,\n    })\n  );\n};\n\nexport default class TableModule {\n  static register() {\n    Quill.register(TableCell, true);\n    Quill.register(TableRow, true);\n    Quill.register(Table, true);\n    Quill.register(Contain, true);\n  }\n\n  constructor(quill, options) {\n    quill.history.tableStack = {};\n    quill.table = {\n      isInTable: false,\n      tables: {}\n    };\n\n    // selection mouse events\n    quill.container.addEventListener('mousedown', (e) => TableSelection.mouseDown(quill, e, options.cellSelectionOnClick));\n    quill.container.addEventListener('mousemove', (e) => TableSelection.mouseMove(quill, e));\n    quill.container.addEventListener('mouseup', (e) => TableSelection.mouseUp(quill, e));\n    quill.on('selection-change', (range, oldRange) => TableSelection.selectionChange(quill, range, oldRange));\n\n    const toolbar = quill.getModule('toolbar');\n\n    toolbar.addHandler('table', function (value) {\n      TableModule.configToolbar(quill, value);\n    });\n\n    const clipboard = quill.getModule('clipboard');\n    clipboard.addMatcher('TABLE', function (node, delta) {\n      if (isInTable(quill)) {\n        emitirEventoTableInTable(quill);\n        return new Delta();\n      }\n\n      const is_pasted_data = node.closest('.ql-editor') === null;\n      const table_id = node.getAttribute('table_id');\n      if (table_id) {\n        quill.table.tables[table_id] = {\n          pasted: is_pasted_data,\n          row_counter: node.querySelectorAll('tr').length,\n          cell_counter: node.querySelectorAll('td').length\n        };\n      }\n      return delta;\n    });\n    clipboard.addMatcher('TR', function (node, delta) {\n      return delta;\n    });\n    clipboard.addMatcher('TD, TH', function (node, delta) {\n      if (delta.length() === 0) {\n        // fix https://github.com/dclement8/quill1-table/issues/7 (empty td removed)\n        delta.ops = [\n          {insert: '\\n'}\n        ];\n      } else if (delta.ops && delta.ops.length) {\n        // fix https://github.com/dclement8/quill1-table/issues/7 (td with no child node)\n        const lastIndex = delta.ops.reduce((lastIndex, op, idx) => typeof op.insert !== 'undefined' ? idx : lastIndex, -1);\n        if (lastIndex >= 0 && !delta.ops[lastIndex].insert.endsWith('\\n')) {\n          delta.ops[lastIndex].insert += '\\n';\n        }\n      }\n\n      const tableNode = node.closest('table');\n      if (!node.getAttribute('table_id') && tableNode) {\n        if (!tableNode.getAttribute('table_id')) {\n          tableNode.setAttribute('table_id', TableTrick.random_id());\n        }\n        node.setAttribute('table_id', tableNode.getAttribute('table_id'));\n      }\n\n      if (!node.getAttribute('row_id')) {\n        const rowNode = node.closest('tr');\n        if (rowNode) {\n          if (!rowNode.getAttribute('row_id')) {\n            rowNode.setAttribute('row_id', TableTrick.random_id());\n          }\n          node.setAttribute('row_id', rowNode.getAttribute('row_id'));\n        }\n      }\n\n      if (!node.getAttribute('cell_id')) {\n        node.setAttribute('cell_id', TableTrick.random_id());\n      }\n\n      const newDelta = delta.compose(new Delta().retain(delta.length(), {\n        td: [\n          node.getAttribute('table_id'),\n          node.getAttribute('row_id'),\n          node.getAttribute('cell_id'),\n          node.getAttribute('merge_id'),\n          node.getAttribute('colspan'),\n          node.getAttribute('rowspan')\n        ].join('|')\n      }));\n      return newDelta;\n    });\n\n    TableToolbar.enable(quill, ['newtable_*', 'insert', 'undo', 'redo']);\n  }\n\n  static tableOptions() {\n    const maxRows = 5;\n    const maxCols = 5;\n    const tableOptions = [];\n    for (let r = 1; r <= maxRows; r++) {\n      for (let c = 1; c <= maxCols; c++) {\n        tableOptions.push('newtable_' + r + '_' + c);\n      }\n    }\n    return tableOptions;\n  }\n\n  static configToolbar(quill, value) {\n    if (isInsertTable(value) && isInTable(quill)) {\n      emitirEventoTableInTable(quill);\n      return false;\n    }\n    return TableTrick.table_handler(value, quill);\n  }\n\n\n  static removeNodeChildren(node) {\n    while (node.firstChild) {\n      node.removeChild(node.firstChild);\n    }\n  }\n\n  static keyboardHandler(quill, key, range, keycontext) {\n    const format_start = quill.getFormat(range.index - 1);\n    const format_end = quill.getFormat(range.index + range.length);\n\n    if (key === 'undo' || key === 'redo' || key === 'copy') {\n      return TableTrick.table_handler(key, quill);\n    }\n\n    // If the event is not in a cell, then pass the standard handler\n    if (!format_start.td && !keycontext.format.td && !format_end.td) {\n      return true;\n    }\n\n    if (key === 'backspace') {\n      // if the selection is at the cell border\n      // BUG: after undo brings back deleted cell when backspace comes in the keycontext offset is 0, which throws it to the end\n      if (!keycontext.offset && !range.length) {\n        const selection = window.getSelection();\n        const nodeList = document.querySelectorAll(\".ql-editor p\");\n        // remove selected content\n        const resultNodes = nodeListToArray(nodeList).filter(cell =>\n          selection.containsNode(cell, true)\n        );\n\n        // deletion does not affect the cell\n        if (!resultNodes.length) {\n          return true;\n        }\n        // do not delete if we have a selection (TODO: manage selection deletion)\n        if (TableSelection.getSelectionCoords()) {\n          return false;\n        }\n\n        let nodeRemoved = false;\n        resultNodes.forEach((resultNode, i) => {\n          if (resultNode.previousSibling) {\n            if (resultNode.previousSibling.nodeName === 'TABLE') {\n              // remove last cell if we are right after a table\n              const cells = resultNode.previousSibling.querySelectorAll('td');\n              if (cells.length && TableTrick._removeCell(cells[cells.length - 1])) {\n                nodeRemoved = true;\n              }\n            }\n          } else if (resultNode.parentNode.nodeName === 'TD') {\n            // remove current cell if we are inside it\n            if (TableTrick._removeCell(resultNode.parentNode)) {\n              nodeRemoved = true;\n            }\n          }\n        });\n\n        if (nodeRemoved) {\n          TableHistory.add(quill);\n        }\n\n        // if at least one node has been removed, then return false (do not call standard handler)\n        return !nodeRemoved;\n      }\n\n      // If we delete not at the cell border, then pass the standard handler\n      return true;\n    }\n\n    if (key === 'tab') {\n      TableSelection.resetSelection();\n      const [leaf] = quill.getLeaf(quill.getSelection().index);\n      let selectionIndex;\n      let blot;\n      let unmergedCell;\n      if (leaf.parent.domNode.closest('td')) {\n        if (leaf.parent.domNode.closest('td').nextSibling) {\n          unmergedCell = leaf.parent.domNode.closest('td').nextSibling\n          while (unmergedCell && unmergedCell.getAttribute('merge_id')) {\n            unmergedCell = unmergedCell.nextSibling\n          }\n          blot = Quill.find(unmergedCell ? unmergedCell : leaf.parent.domNode.closest('tr').nextSibling) //we truly dont have any more cells\n        } else { //we dont need to find the first child here since quill does the right thing\n          if (leaf.parent.domNode.closest('tr').nextSibling) { //no more cells, go to the next row\n            blot = Quill.find(leaf.parent.domNode.closest('tr').nextSibling)\n          } else { //no more rows to the tables next sibling which will be the next quill run p,h1-h4\n            if (leaf.parent.domNode.closest('table').nextSibling) {\n              blot = Quill.find(leaf.parent.domNode.closest('table').nextSibling)\n            }\n          }\n        }\n        //we get the actual editor index when we have the blot aka element in editor\n        selectionIndex = blot.offset(quill.scroll);\n        quill.setSelection(selectionIndex, 0)\n\n        return false\n      }\n      return true\n    }\n\n    if (key === \"shiftTab\") {\n      //previous cell\n      TableSelection.resetSelection();\n      const [leaf] = quill.getLeaf(quill.getSelection().index);\n      let selectionIndex;\n      let blot;\n      let unmergedCell;\n      if (leaf.parent.domNode.closest('td')) {\n        if (leaf.parent.domNode.closest('td').previousSibling) {\n          unmergedCell = leaf.parent.domNode.closest('td').previousSibling;\n          while (unmergedCell.getAttribute('merge_id')) { //this a merged cell, in dom but styled/css out\n            unmergedCell = unmergedCell.previousSibling;\n          }\n          blot = Quill.find(unmergedCell);\n        } else {\n          if (leaf.parent.domNode.closest('tr').previousSibling) { //no more cells, go to the next row\n            unmergedCell = leaf.parent.domNode.closest('tr').previousSibling.lastChild;\n            while (unmergedCell.getAttribute('merge_id')) { //this a merged cell, in dom but styled/css out\n              unmergedCell = unmergedCell.previousSibling;\n            }\n            blot = Quill.find(unmergedCell);\n          } else {\n            if (leaf.parent.domNode.closest('table').previousSibling) { //no more rows to the tables prev sibling which will just go to electron default.\n              return true;\n            }\n          }\n        }\n        //we get the actual editor index when we have the blot aka element in editor\n        selectionIndex = blot.offset(quill.scroll);\n        quill.setSelection(selectionIndex, 0)\n\n        return false;\n      }\n      return true;\n    }\n\n    let node = quill.selection.getNativeRange().start.node;\n    if (!node) return false;\n    let blot = Parchment.find(node);\n\n    if (\n      key === 'delete' && blot &&\n      keycontext.offset < (blot.text ? blot.text.length : 0)\n    ) {\n      return true;\n    }\n\n    const [prev] = quill.getLine(range.index - 1);\n    const [next] = quill.getLine(range.index + 1);\n    // If a cell has multiple rows, you can delete as standard\n\n    if (key === 'selectAll') {\n      let [line] = quill.getLine(quill.getSelection().index);\n      let blot;\n      let nextBlot;\n      if (line.parent.domNode.nodeName === \"TD\") {\n        if (line.parent.domNode.nextSibling){\n          nextBlot = Quill.find(line.parent.domNode.nextSibling);\n        } else { //no next cell to bounce the end to\n          if (line.parent.domNode.closest('tr').nextSibling) { //no next row either\n            nextBlot = Quill.find(line.parent.domNode.closest('tr').nextSibling);\n          } else { //the only other thing is get tables sibling which is the next p in editor\n            nextBlot = Quill.find(line.parent.domNode.closest('table').nextSibling);\n          }\n        }\n        blot = Quill.find(line.parent.domNode);\n        let selectionIndex = blot.offset(quill.scroll); //index for cell start\n        let nextBlotIndex = nextBlot.offset(quill.scroll); //index for cell ending\n        quill.setSelection(selectionIndex, nextBlotIndex-selectionIndex-1);\n        return false;\n      }\n      return true;\n    }\n    if (key === 'backspace' && prev && prev.next) {\n      return true;\n    }\n    if (key === 'delete' && next && next.prev) {\n      return true;\n    }\n  }\n}\n\nconst isInsertTable = (value = '') => value.includes('newtable_');\n\nconst isInTable = (quill) => quill && quill.getSelection(true) && quill.getFormat(quill.getSelection(true)).td;\n","import { html } from 'lit';\n\nexport const notaRodapeCss = html`\n  <style>\n    .nota-rodape {\n      position: relative;\n      cursor: pointer;\n      font-size: 0.8em;\n      line-height: 1;\n      vertical-align: super;\n      z-index: 1;\n      margin-left: 0.1em;\n    }\n\n    .nota-rodape::after {\n      content: attr(data-nota);\n      color: transparent;\n      position: absolute;\n      bottom: 50%;\n      left: 50%;\n      transform: translate(-50%, 50%);\n      opacity: 0;\n      background-color: var(--sl-color-red-300);\n      color: black;\n      width: 20px;\n      height: 20px;\n      line-height: 20px;\n      text-align: center;\n      border-radius: 50%;\n      font-size: 0.7em;\n      text-indent: 0;\n      z-index: -1;\n      transition: transform opacity 0.3s ease;\n    }\n\n    .nota-rodape:hover::after {\n      animation: pulseAnimation 1s infinite;\n      opacity: 0.5;\n    }\n\n    @keyframes pulseAnimation {\n      0% {\n        transform: translate(-50%, 50%) scale(0.8);\n        opacity: 0;\n      }\n      50% {\n        transform: translate(-50%, 50%) scale(1.2);\n        opacity: 0.5;\n      }\n      100% {\n        transform: translate(-50%, 50%) scale(1.6);\n        opacity: 0;\n      }\n    }\n\n    .nota-rodape.pulse::after {\n      animation: pulseAnimation 1s infinite;\n    }\n  </style>\n`;\n","import { Revisao, RevisaoJustificativa } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State } from '../../state';\nimport { RevisaoJustificativaEnum } from '../util/revisaoUtil';\n\nexport const atualizaRevisaoJustificativa = (state: State, removeAllRevisoesJustificativa = false): State => {\n  if (!state.emRevisao) {\n    return state;\n  }\n\n  if (!removeAllRevisoesJustificativa) {\n    let revisoes: Revisao[] = [];\n    revisoes = criaRevisaoJustificativa(state);\n\n    if (revisoes.length > 0) {\n      state.revisoes!.push(...revisoes);\n    }\n  } else {\n    remove(state);\n  }\n\n  return state;\n};\n\nconst remove = (state: State): void => {\n  state.revisoes = state.revisoes?.filter(r => r.descricao !== RevisaoJustificativaEnum.JustificativaAlterada);\n};\n\nconst criaRevisaoJustificativa = (state: State): Revisao[] => {\n  const result: Revisao[] = [];\n\n  if (!jaExisteRevisaoUsuarioAtual(state)) {\n    result.push(new RevisaoJustificativa(state.usuario!, formatDateTime(new Date()), RevisaoJustificativaEnum.JustificativaAlterada));\n  }\n\n  return result;\n};\n\nconst jaExisteRevisaoUsuarioAtual = (state: State): boolean => {\n  const revisoesUsuarioAtual = state.revisoes?.filter(r => r.usuario.nome === state.usuario?.nome && r.descricao === RevisaoJustificativaEnum.JustificativaAlterada);\n\n  if (revisoesUsuarioAtual!.length > 0) {\n    const revisaoDataHoraModificada = revisoesUsuarioAtual![0];\n    revisaoDataHoraModificada.dataHora = formatDateTime(new Date());\n    return true;\n  }\n  return false;\n};\n","import { Revisao, RevisaoTextoLivre } from '../../../model/revisao/revisao';\nimport { formatDateTime } from '../../../util/date-util';\nimport { State } from '../../state';\nimport { RevisaoTextoLivreEnum } from '../util/revisaoUtil';\n\nexport const atualizaRevisaoTextoLivre = (state: State, removeAllRevisoesTextoLivre = false): State => {\n  if (!state.emRevisao) {\n    return state;\n  }\n\n  if (!removeAllRevisoesTextoLivre) {\n    let revisoes: Revisao[] = [];\n    revisoes = criaRevisaoTextoLivre(state);\n\n    if (revisoes.length > 0) {\n      state.revisoes!.push(...revisoes);\n    }\n  } else {\n    remove(state);\n  }\n\n  return state;\n};\n\nconst remove = (state: State): void => {\n  state.revisoes = state.revisoes?.filter(r => r.descricao !== RevisaoTextoLivreEnum.TextoLivreAlterado);\n};\n\nconst criaRevisaoTextoLivre = (state: State): Revisao[] => {\n  const result: Revisao[] = [];\n\n  //if (!jaExisteRevisaoUsuarioAtual(state)) {\n  if (!jaExisteRevisao(state)) {\n    result.push(new RevisaoTextoLivre(state.usuario!, formatDateTime(new Date()), RevisaoTextoLivreEnum.TextoLivreAlterado));\n  }\n\n  return result;\n};\n\nconst jaExisteRevisao = (state: State): boolean => {\n  const revisaoUtil = state.revisoes?.filter(r => r.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado) || [];\n\n  return revisaoUtil.length > 0;\n};\n\n// const jaExisteRevisaoUsuarioAtual = (state: State): boolean => {\n//   const revisoesUsuarioAtual = state.revisoes?.filter(r => r.usuario.nome === state.usuario?.nome && r.descricao === RevisaoTextoLivreEnum.TextoLivreAlterado);\n\n//   if (revisoesUsuarioAtual!.length > 0) {\n//     const revisaoDataHoraModificada = revisoesUsuarioAtual![0];\n//     revisaoDataHoraModificada.dataHora = formatDateTime(new Date());\n//     return true;\n//   }\n//   return false;\n// };\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { iconeMarginBottom, iconeTextIndent, negrito, sublinhado, iconeNotaDeRodape } from '../../../assets/icons/icons';\nimport { Observable } from '../../util/observable';\nimport { rootStore } from '../../redux/store';\nimport {\n  atualizaQuantidadeRevisaoTextoRico,\n  getQuantidadeRevisoes,\n  getQuantidadeRevisoesJustificativa,\n  getQuantidadeRevisoesTextoLivre,\n} from '../../redux/elemento/util/revisaoUtil';\nimport { connect } from 'pwa-helpers';\nimport { uploadAnexoDialog } from './uploadAnexoDialog';\nimport { showMenuImagem } from './menu-imagem';\nimport { Anexo } from '../../model/emenda/emenda';\nimport { Modo } from '../../redux/elemento/enum/enumUtil';\nimport { editorTextoRicoCss } from '../editor-texto-rico/editor-texto-rico.css';\nimport { EstiloTextoClass } from '../editor-texto-rico/estilos-texto';\nimport { quillTableCss } from '../editor-texto-rico/quill.table.css';\nimport TableModule from '../../assets/js/quill1-table/index.js';\nimport TableTrick from '../../assets/js/quill1-table/js/TableTrick.js';\nimport { removeElementosTDOcultos } from './texto-rico-util';\nimport { NoIndentClass } from './text-indent';\nimport { MarginBottomClass } from './margin-bottom';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { LexmlEmendaConfig } from '../../model/lexmlEmendaConfig';\nimport { AlterarLarguraTabelaColunaModalComponent } from './alterar-largura-tabela-coluna-modal';\nimport { AlterarLarguraImagemModalComponent } from './alterar-largura-imagem-modal';\nimport { notaRodapeCss } from './notaRodape.css';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './notaRodape';\nimport { SwitchRevisaoComponent } from '../switchRevisao/switch-revisao.component';\nimport { atualizaRevisaoJustificativa } from '../../redux/elemento/reducer/atualizaRevisaoJustificativa';\nimport { atualizaRevisaoTextoLivre } from '../../redux/elemento/reducer/atualizaRevisaoTextoLivre';\nimport { adicionarAlerta } from '../../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\nimport { QuillUtil } from './quill-util';\n\nconst DefaultKeyboardModule = Quill.import('modules/keyboard');\nconst DefaultClipboardModule = Quill.import('modules/clipboard');\nconst Delta = Quill.import('delta');\n\nconst CLASS_BUTTON_ACEITAR_REVISAO = 'aceitar-revisao';\nconst CLASS_BUTTON_REJEITAR_REVISAO = 'rejeitar-revisao';\n\n@customElement('editor-texto-rico')\nexport class EditorTextoRicoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: String }) texto = '';\n  @property({ type: Array }) anexos: Anexo[] = [];\n  @property({ type: Array }) notasRodape: NotaRodape[] = [];\n  @property({ type: String, attribute: 'registro-evento' }) registroEvento = '';\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  @property({ type: String })\n  modo = '';\n\n  onChange: Observable<string> = new Observable<string>();\n  private timerOnChange?: any;\n\n  quill?: Quill;\n\n  lastSelecion?: any;\n\n  icons = Quill.import('ui/icons');\n\n  @query('#lexml-alterar-largura-coluna-modal')\n  private alterarLarguraColunaModal!: AlterarLarguraTabelaColunaModalComponent;\n\n  @query('#lexml-alterar-largura-tabela-modal')\n  private alterarLarguraTabelaModal!: AlterarLarguraTabelaColunaModalComponent;\n\n  @query('#lexml-alterar-largura-img-modal')\n  private alterarLarguraImagemModal!: AlterarLarguraImagemModalComponent;\n\n  @query('#lexml-switch-revisao-component')\n  private switchRevisaoComponent!: SwitchRevisaoComponent;\n\n  _textoAntesRevisao?: string;\n  get textoAntesRevisao(): string | undefined {\n    // TODO: se contm reviso e texto antes da reviso for igual ao texto atual, ainda assim retorna texto antes da reviso\n    //return (!this.existeRevisaoByModo() && this._textoAntesRevisao === this.texto) || !this._textoAntesRevisao ? undefined : this._textoAntesRevisao;\n    return !this.existeRevisaoByModo() ? undefined : this._textoAntesRevisao;\n  }\n\n  public setTextoAntesRevisao(texto: string | undefined): void {\n    this._textoAntesRevisao = texto;\n  }\n\n  private existeRevisaoByModo = (): boolean => {\n    if (this.modo === Modo.TEXTO_LIVRE) {\n      return getQuantidadeRevisoesTextoLivre(rootStore.getState().elementoReducer.revisoes) > 0;\n    } else {\n      return getQuantidadeRevisoesJustificativa(rootStore.getState().elementoReducer.revisoes) > 0;\n    }\n  };\n\n  showAlterarLarguraImagemModal(img: any, width: string): void {\n    this.alterarLarguraImagemModal.show(img, width);\n  }\n\n  private showAlterarLarguraColunaModal(width: string): void {\n    this.alterarLarguraColunaModal.show(width);\n  }\n\n  private hideAlterarLarguraColunaModal(): void {\n    this.alterarLarguraColunaModal.hide();\n  }\n\n  private showAlterarLarguraTabelaModal(width: string): void {\n    this.alterarLarguraTabelaModal.show(width);\n  }\n\n  private hideAlterarLarguraTabelaModal(): void {\n    this.alterarLarguraTabelaModal.hide();\n  }\n\n  private agendarEmissaoEventoOnChange(): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = setTimeout(() => {\n      this.dispatchEvent(\n        new CustomEvent('onchange', {\n          bubbles: true,\n          composed: true,\n          detail: {\n            origemEvento: this.registroEvento,\n          },\n        })\n      );\n      this.onChange.notify(this.registroEvento);\n    }, 1000);\n  }\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  stateChanged(state: any): void {\n    const moduloRevisao = (this.quill as any)?.revisao;\n    const events: StateEvent[] = state.elementoReducer.ui?.events;\n    if (events) {\n      if (events.some(ev => ev.stateType === StateType.RevisaoAtivada)) {\n        moduloRevisao && (moduloRevisao.emRevisao = true);\n        if (!this._textoAntesRevisao) {\n          this._textoAntesRevisao = this.texto;\n        }\n      } else if (events.some(ev => ev.stateType === StateType.RevisaoDesativada)) {\n        moduloRevisao && (moduloRevisao.emRevisao = false);\n        this._textoAntesRevisao = undefined;\n      }\n\n      if (events.some(ev => ev.stateType === StateType.AtualizaUsuario) && moduloRevisao) {\n        moduloRevisao.usuario = state.elementoReducer.usuario?.nome || 'Annimo';\n      }\n    }\n  }\n\n  labelAnexo = (): string => {\n    const lengthAnexos = this.anexos?.length;\n    return lengthAnexos === 1 ? '1 anexo' : lengthAnexos > 1 ? `${lengthAnexos} anexos` : '';\n  };\n\n  render(): TemplateResult {\n    return html`\n      ${quillTableCss} ${editorTextoRicoCss} ${notaRodapeCss} ${this.modo === Modo.TEXTO_LIVRE ? this.renderBotaoAnexo() : ''}\n\n      <div class=\"panel-revisao\">\n        <lexml-switch-revisao\n          id=\"lexml-switch-revisao-component\"\n          modo=\"${this.modo}\"\n          class=\"revisao-container\"\n          .nomeSwitch=\"${this.getNomeSwitch()}\"\n          .nomeBadgeQuantidadeRevisao=\"${this.getNomeBadge()}\"\n        >\n        </lexml-switch-revisao>\n\n        <sl-button class=\"aceitar-revisao\" variant=\"default\" size=\"small\" title=\"Aceitar revises\" @click=${(): void => this.aceitarRevisoes()} disabled circle>\n          <sl-icon name=\"check-lg\"></sl-icon>\n        </sl-button>\n        <sl-button class=\"rejeitar-revisao\" variant=\"default\" size=\"small\" title=\"Rejeitar revises\" @click=${(): void => this.rejeitarRevisoes()} disabled circle>\n          <sl-icon name=\"x\"></sl-icon>\n        </sl-button>\n      </div>\n      <div id=\"${this.id}-inner\" class=\"editor-texto-rico\" @onTableInTable=${this.onTableInTable}></div>\n      <lexml-alterar-largura-tabela-coluna-modal id=\"lexml-alterar-largura-tabela-modal\" tipo=\"tabela\"></lexml-alterar-largura-tabela-coluna-modal>\n      <lexml-alterar-largura-tabela-coluna-modal id=\"lexml-alterar-largura-coluna-modal\" tipo=\"coluna\"></lexml-alterar-largura-tabela-coluna-modal>\n      <lexml-alterar-largura-imagem-modal id=\"lexml-alterar-largura-img-modal\"></lexml-alterar-largura-imagem-modal>\n    `;\n  }\n\n  constructor() {\n    super();\n    this.icons['undo'] = `<svg viewbox=\"0 0 18 18\">\n    <polygon class=\"ql-fill ql-stroke\" points=\"6 10 4 12 2 10 6 10\"></polygon>\n    <path class=\"ql-stroke\" d=\"M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9\"></path>\n    </svg>`;\n    this.icons['redo'] = `<svg viewbox=\"0 0 18 18\">\n    <polygon class=\"ql-fill ql-stroke\" points=\"12 10 14 12 16 10 12 10\"></polygon>\n    <path class=\"ql-stroke\" d=\"M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5\"></path>\n    </svg>`;\n    //this.icons['anexo'] = anexo + ;\n    this.icons['bold'] = negrito;\n    this.icons['underline'] = sublinhado;\n    this.icons['text-indent'] = iconeTextIndent;\n    this.icons['margin-bottom'] = iconeMarginBottom;\n    this.icons['nota-rodape'] = iconeNotaDeRodape;\n  }\n\n  private renderBotaoAnexo(): TemplateResult {\n    return html`\n      <div class=\"panel-anexo\">\n        <button type=\"button\" style=\"width:auto\" title=\"Anexo\" @click=${(): any => uploadAnexoDialog(this.anexos, this.atualizaAnexo, this)}>\n          <span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15px\" height=\"15px\" viewBox=\"0 0 35 35\" data-name=\"Layer 2\" id=\"Layer_2\">\n              <path\n                d=\"M18,34.75A11.32,11.32,0,0,1,6.69,23.45V8A7.78,7.78,0,0,1,22.25,8V22.49a4.58,4.58,0,1,1-9.15,0V9.29a1.25,1.25,0,0,1,2.5,0v13.2a2.08,2.08,0,1,0,4.15,0V8A5.28,5.28,0,0,0,9.19,8V23.45A8.82,8.82,0,0,0,18,32.25c4.6,0,7.81-3.62,7.81-8.8V9.66a1.25,1.25,0,0,1,2.5,0V23.45C28.31,30,24,34.75,18,34.75Z\"\n              />\n            </svg>\n            ${this.labelAnexo()}\n          </span>\n        </button>\n      </div>\n    `;\n  }\n\n  private timerAlerta?: any;\n  private onTableInTable = (): void => {\n    clearTimeout(this.timerAlerta);\n    this.timerAlerta = setTimeout(() => this.alertar('No  permitido inserir uma tabela dentro de outra tabela.'), 100);\n  };\n\n  private alertar(mensagem: string): void {\n    const alert = Object.assign(document.createElement('sl-alert'), {\n      variant: 'danger',\n      closable: true,\n      duration: 4000,\n      innerHTML: `\n        <sl-icon name=\"exclamation-octagon\" slot=\"icon\"></sl-icon>\n        ${mensagem}\n      `,\n    });\n    document.body.append(alert);\n    alert.toast();\n  }\n\n  firstUpdated(): void {\n    this.init();\n  }\n\n  disconnectedCallback(): void {\n    this.quill?.off('text-change', this.updateTexto);\n    this.quill?.off('selection-change', this.onSelectionChange);\n    super.disconnectedCallback();\n  }\n\n  init = (): void => {\n    const quillContainer = this.querySelector(`#${this.id}-inner`) as HTMLElement;\n    if (quillContainer) {\n      Quill.register('modules/keyboard', DefaultKeyboardModule, true);\n      Quill.register('modules/clipboard', DefaultClipboardModule, true);\n      Quill.register('modules/table', TableModule, true);\n      Quill.register('formats/estilo-texto', EstiloTextoClass, true);\n      Quill.register('formats/text-indent', NoIndentClass, true);\n      Quill.register('formats/margin-bottom', MarginBottomClass, true);\n\n      const customToolbarOptions = [...toolbarOptions];\n      const customFormatsOptions = [...formatsOptions];\n      if (this.modo === Modo.JUSTIFICATIVA) {\n        customToolbarOptions.push(['nota-rodape']);\n        customToolbarOptions[1] = ['bold', 'italic', 'underline', 'link'];\n        customFormatsOptions.push('nota-rodape');\n        customFormatsOptions.push('link');\n      }\n\n      this.quill = new Quill(quillContainer, {\n        formats: customFormatsOptions,\n        modules: {\n          toolbar: {\n            container: customToolbarOptions,\n            handlers: {\n              undo: this.undo,\n              redo: this.redo,\n              image: this.imageHandler,\n            },\n          },\n          aspasCurvas: true,\n          notaRodape: true,\n          table: {\n            cellSelectionOnClick: false,\n          },\n          revisao: {\n            usuario: rootStore.getState().elementoReducer.usuario?.nome || 'Annimo',\n            emRevisao: false,\n            gerenciarKeydown: true,\n            tableModule: TableModule,\n            tableTrick: TableTrick,\n          },\n          history: {\n            delay: 1000,\n            maxStack: 500,\n            userOnly: true,\n          },\n          clipboard: {},\n          keyboard: {\n            // Since Quills default handlers are added at initialization, the only way to prevent them is to add yours in the configuration.\n            bindings: {\n              tab: {\n                key: 'tab',\n                handler: (range: any, keycontext: any): any => {\n                  const outSideOfTable = TableModule.keyboardHandler(this.quill, 'tab', range, keycontext);\n                  if (outSideOfTable && this.quill) {\n                    //for some reason when you return true as quill says it should hand it to the default like the other bindings... for tab it doesnt.\n                    this.quill.history.cutoff(); //mimic the exact same thing quill does\n                    const delta = new Delta().retain(range.index).delete(range.length).insert('\\t');\n                    this.quill.updateContents(delta as any, Quill.sources.USER);\n                    this.quill.history.cutoff();\n                    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n                  }\n                },\n              },\n              shiftTab: {\n                key: 'tab',\n                shiftKey: true,\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'shiftTab', range, keycontext);\n                },\n              },\n              selectAll: {\n                key: 'a',\n                ctrlKey: true,\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'selectAll', range, keycontext);\n                },\n              },\n              backspace: {\n                key: 'backspace',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'backspace', range, keycontext);\n                },\n              },\n              delete: {\n                key: 'delete',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'delete', range, keycontext);\n                },\n              },\n              undo: {\n                ctrlKey: true,\n                key: 'z',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'undo', range, keycontext);\n                },\n              },\n              redo: {\n                ctrlKey: true,\n                key: 'y',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'redo', range, keycontext);\n                },\n              },\n              redo2: {\n                ctrlKey: true,\n                shiftKey: true,\n                key: 'z',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'redo', range, keycontext);\n                },\n              },\n              copy: {\n                ctrlKey: true,\n                key: 'c',\n                handler: (range: any, keycontext: any): any => {\n                  return TableModule.keyboardHandler(this.quill, 'copy', range, keycontext);\n                },\n              },\n              // Desabilita autoformatao de listas\n              // Referncia: https://github.com/quilljs/quill/blob/1.3.7/modules/keyboard.js (linha 249)\n              'list autofill': {\n                key: ' ',\n                handler: (): boolean => true,\n              },\n            },\n          },\n        },\n        placeholder: '',\n        theme: 'snow',\n      });\n\n      this.setContent(this.texto, this.notasRodape);\n      this.addBotoesExtra();\n      this.configureTooltip();\n      this.elTableManagerButton = this.querySelectorAll('span.ql-table')[1] as HTMLSpanElement;\n      this.quill?.on('text-change', this.updateTexto);\n      this.quill?.on('selection-change', this.onSelectionChange);\n      this.alterarLarguraColunaModal.callback = this.alterarLarguraDaColuna;\n      this.alterarLarguraTabelaModal.callback = this.alterarLarguraDaTabela;\n      this.alterarLarguraImagemModal.callback = this.alterarLarguraDaImagem;\n\n      quillContainer.addEventListener('contextmenu', this.menuContextImagem);\n      quillContainer.addEventListener('click', this.onClick);\n\n      const toolbar = this.quill.getModule('toolbar');\n      toolbar.addHandler('table', (value: string) => {\n        TableModule.configToolbar(this.quill, value);\n\n        if (value === 'change-width-col-modal') {\n          this.lastSelecion = this.quill?.getSelection();\n          const td = TableTrick.find_td_node(this.quill);\n          this.showAlterarLarguraColunaModal(td.width);\n        } else if (value === 'change-width-table-modal') {\n          this.lastSelecion = this.quill?.getSelection();\n          const table = TableTrick.find_table_node(this.quill);\n          this.showAlterarLarguraTabelaModal(table.width);\n        }\n      });\n\n      this.quill.root.addEventListener(NOTA_RODAPE_CHANGE_EVENT, this.updateNotasRodape);\n      this.quill.root.addEventListener(NOTA_RODAPE_REMOVE_EVENT, this.updateNotasRodape);\n      this.buildRevisoes();\n\n      QuillUtil.configurarAcoesLink(this.quill!);\n    }\n  };\n\n  menuContextImagem = (ev: MouseEvent): void => {\n    const elemento = ev.target as Element;\n    if (elemento.tagName === 'IMG') {\n      ev.preventDefault();\n      showMenuImagem(this, elemento, ev.pageY, ev.pageX);\n    }\n  };\n\n  onClick = (ev: MouseEvent): void => {\n    const elemento = ev.target as Element;\n    if (elemento.tagName === 'IMG') {\n      ev.preventDefault();\n      this.selectImage(elemento);\n    }\n  };\n\n  selectImage = (img: any): void => {\n    const imgBlot = Quill.find(img);\n    imgBlot && this.quill!.setSelection(this.quill!.getIndex(imgBlot), 1);\n  };\n\n  imageHandler = (): void => {\n    let fileInput = this.querySelector('input.ql-image[type=file]') as any;\n    if (fileInput === null) {\n      fileInput = document.createElement('input');\n      fileInput.setAttribute('type', 'file');\n      fileInput.setAttribute('hidden', 'true');\n      fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n      fileInput.classList.add('ql-image');\n      fileInput.addEventListener('change', () => {\n        if (fileInput.files !== null && fileInput.files[0] !== null) {\n          const reader = new FileReader();\n          reader.onload = e => {\n            if (this.tamanhoPermitido(e)) {\n              const range = this.quill!.getSelection(true);\n              this.quill!.updateContents(new Delta().retain(range.index).delete(range.length).insert({ image: e.target!.result }), Quill.sources.USER);\n              fileInput.value = '';\n              fileInput.remove();\n            } else {\n              this.alertar(`Essa imagem ultrapassa o tamanho mximo permitido (${Math.trunc(this.lexmlEtaConfig.tamanhoMaximoImagem / 1024)}MB)`);\n              fileInput.remove();\n            }\n          };\n          reader.readAsDataURL(fileInput.files[0]);\n        }\n      });\n      this.appendChild(fileInput);\n    }\n    fileInput.click();\n  };\n\n  tamanhoPermitido = (e: any): boolean => {\n    const size = Math.round(e.loaded / 1024);\n    return size < this.lexmlEtaConfig.tamanhoMaximoImagem;\n  };\n\n  alterarLarguraDaColuna = (valor: number): void => {\n    this.quill!.setSelection(this.lastSelecion);\n    TableTrick.changeWidthCol(this.quill, valor);\n    this.updateApenasTexto();\n    this.hideAlterarLarguraColunaModal();\n  };\n\n  alterarLarguraDaTabela = (valor: number): void => {\n    this.quill!.setSelection(this.lastSelecion);\n    TableTrick.changeWidthTable(this.quill, valor);\n    this.updateApenasTexto();\n    this.hideAlterarLarguraTabelaModal();\n  };\n\n  alterarLarguraDaImagem = (img: any, valor: number): void => {\n    const blot = Quill.find(img);\n    blot && blot.format('width', `${valor}%`);\n  };\n\n  private elTableManagerButton?: HTMLSpanElement;\n  onSelectionChange = (range: any): void => {\n    setTimeout(() => {\n      const format = range && this.quill?.getFormat(range);\n      this.highLightBotaoGerenciarTabela(format);\n    }, 0);\n  };\n\n  highLightBotaoGerenciarTabela = (format: any): void => {\n    format?.td ? this.elTableManagerButton?.classList.add('table-selected') : this.elTableManagerButton?.classList.remove('table-selected');\n  };\n\n  addBotoesExtra = (): void => {\n    const toolbarContainer = this.quill!.getModule('toolbar').container;\n    const elAnexo = this.querySelector('.panel-anexo');\n    const elRevisao = this.querySelector('.panel-revisao')!;\n\n    if (elAnexo) {\n      elAnexo.parentNode!.removeChild(elAnexo);\n      toolbarContainer.appendChild(elAnexo);\n    }\n\n    elRevisao.parentNode!.removeChild(elRevisao);\n    toolbarContainer.appendChild(elRevisao);\n  };\n\n  configureTooltip = (): void => {\n    const toolbarContainer = this.quill!.getModule('toolbar').container;\n    this.setTitle(toolbarContainer, 'button.ql-bold', 'Negrito (Ctrl+b)');\n    this.setTitle(toolbarContainer, 'button.ql-italic', 'Itlico (Ctrl+i)');\n    this.setTitle(toolbarContainer, 'button.ql-underline', 'Sublinhado (Ctrl+u)');\n    this.setTitle(toolbarContainer, 'button.ql-list[value=\"ordered\"]', 'Lista ordenada');\n    this.setTitle(toolbarContainer, 'button.ql-list[value=\"bullet\"]', 'Lista no ordenada');\n    this.setTitle(toolbarContainer, 'button.ql-blockquote', 'Bloco de citao');\n    this.setTitle(toolbarContainer, 'button.ql-script[value=\"sub\"]', 'Subscrito');\n    this.setTitle(toolbarContainer, 'button.ql-script[value=\"super\"]', 'Sobrescrito');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(1)', 'Alinhar  esquerda');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(2)', 'Centralizar');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(3)', 'Alinhar  direita');\n    this.setTitle(toolbarContainer, '.ql-align .ql-picker-options > span:nth-child(4)', 'Justificar');\n    this.setTitle(toolbarContainer, 'button.ql-clean', 'Limpar formatao');\n    this.setTitle(toolbarContainer, 'button.ql-image', 'Inserir imagem');\n    this.setTitle(toolbarContainer, 'button.ql-undo', 'Desfazer (Ctrl+z)');\n    this.setTitle(toolbarContainer, 'button.ql-redo', 'Refazer (Ctrl+y)');\n    this.setTitle(toolbarContainer, 'button.ql-margin-bottom', 'Distncia entre pargrafos');\n    this.setTitle(toolbarContainer, 'button.ql-text-indent', 'Recuo de pargrafo');\n    this.setTitle(toolbarContainer, 'button.ql-table', 'Tabela');\n    this.setTitle(toolbarContainer, 'button.ql-nota-rodape', 'Nota de rodap');\n  };\n\n  setTitle = (toolbarContainer: HTMLElement, seletor: string, title: string): void => toolbarContainer.querySelector(seletor)?.setAttribute('title', title);\n\n  setContent = (texto: string, notasRodape: NotaRodape[] = []): void => {\n    if (!this.quill || !this.quill.root) {\n      return;\n    }\n\n    this.texto = texto;\n\n    const textoAjustado = (texto || '')\n      .replace(/align-justify/g, 'ql-align-justify')\n      .replace(/align-center/g, 'ql-align-center')\n      .replace(/align-right/g, 'ql-align-right');\n\n    this.quill!.history.clear(); // No remover: isso  um workaround para o bug que ocorre ao limpar contedo depois de alguma insero de tabela\n    (this.quill as any).revisao.modo = this.modo;\n    this.configAbrindoTexto(true);\n    this.quill.setContents(this.quill.clipboard.convert(textoAjustado), 'silent');\n    this.configAbrindoTexto(false);\n    this.notasRodape = notasRodape;\n\n    setTimeout(() => {\n      this.quill!.history.clear();\n      (this.quill as any).notasRodape.associar(notasRodape);\n    }, 100); // A linha anterior gera um history, ento  necessrio limpar novamente.\n\n    if (!textoAjustado) this.quill.format('align', 'justify');\n\n    this.atualizaStatusElementosRevisao();\n  };\n\n  configAbrindoTexto = (valor: boolean): void => {\n    (this.quill as any).revisao.isAbrindoTexto = valor;\n    (this.quill as any).notasRodape.isAbrindoTexto = valor;\n    const emRevisao = (this.quill as any).revisao.emRevisao;\n    if (!valor) {\n      if (this.getQuantidadeDeRevisoes() > 0 && !emRevisao) {\n        if (this.switchRevisaoComponent) {\n          this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(false);\n          setTimeout(() => {\n            this.alertaGlobalRevisao();\n          }, 0);\n        }\n      }\n    }\n    // setTimeout(() => {\n    //   this.atualizaQuantidadeRevisao(this.getQuantidadeDeRevisoes());\n    // }, 0);\n  };\n\n  updateApenasTexto = (): void => {\n    const texto = this.ajustaHtml(this.quill?.root.innerHTML);\n    this.texto = texto === '<p><br></p>' ? '' : texto;\n  };\n\n  updateTexto = (): void => {\n    const texto = this.ajustaHtml(this.quill?.root.innerHTML);\n    this.texto = texto === '<p><br></p>' ? '' : texto;\n    this.agendarEmissaoEventoOnChange();\n    this.onSelectionChange(this.quill?.getSelection());\n    this.atualizaStatusElementosRevisao(false);\n    this.buildRevisoes();\n    this.alertaGlobalRevisao();\n  };\n\n  public alertaGlobalRevisao(): void {\n    const id = 'alerta-global-revisao';\n\n    if (this.getQuantidadeDeRevisoes() > 0 || getQuantidadeRevisoes(rootStore.getState().elementoReducer.revisoes) > 0) {\n      if (rootStore.getState().elementoReducer.ui?.alertas?.filter(a => a.id === id).length === 0) {\n        const alerta = {\n          id: id,\n          tipo: 'info',\n          mensagem: 'Este documento contm marcas de reviso e no deve ser protocolado at que estas sejam removidas.',\n          podeFechar: true,\n          exibirComandoEmenda: true,\n        };\n        setTimeout(() => {\n          rootStore.dispatch(adicionarAlerta(alerta));\n        }, 0);\n      }\n    } else if (rootStore.getState().elementoReducer.ui?.alertas?.some(alerta => alerta.id === id)) {\n      rootStore.dispatch(removerAlerta(id));\n    }\n  }\n\n  updateNotasRodape = (): void => {\n    this.notasRodape = (this.quill as any).notasRodape.getNotasRodape();\n    // this.agendarEmissaoEventoOnChange();\n  };\n\n  ajustaHtml = (html = ''): string => {\n    let result = html\n      .replace(/ql-indent/g, 'indent')\n      .replace(/ql-align-justify/g, 'align-justify')\n      .replace(/ql-align-center/g, 'align-center')\n      .replace(/ql-align-right/g, 'align-right');\n\n    result = removeElementosTDOcultos(result);\n    return (this.quill as any).notasRodape.ajustarConteudoTagsNotaRodape(result);\n  };\n\n  undo = (): any => {\n    this.quill?.focus();\n    if ((this.quill as any).revisao.handleUndo(this.quill?.getSelection(), undefined)) {\n      this.quill?.history.undo();\n      this.atualizaStatusElementosRevisao();\n    }\n  };\n\n  redo = (): any => {\n    this.quill?.focus();\n    if ((this.quill as any).revisao.handleRedo(this.quill?.getSelection(), undefined)) {\n      this.quill?.history.redo();\n      this.atualizaStatusElementosRevisao();\n    }\n  };\n\n  atualizaAnexo = (anexo: Anexo[]): void => {\n    this.anexos = [...anexo];\n  };\n\n  isEditorVazio = (): boolean => {\n    const delta = this.quill?.getContents();\n    if (!delta || !delta.ops || delta.ops.length === 0) {\n      return true;\n    }\n    for (let i = 0; i < delta.ops.length; i++) {\n      if (delta.ops[i]?.insert.trim() !== '') {\n        return false;\n      }\n    }\n    return true;\n  };\n\n  private getNomeSwitch = (): string => {\n    return this.modo === Modo.JUSTIFICATIVA ? 'chk-em-revisao-justificativa' : 'chk-em-revisao-texto-livre';\n  };\n\n  private getNomeBadge = (): string => {\n    return this.modo === Modo.JUSTIFICATIVA ? 'badge-marca-alteracao-justificativa' : 'badge-marca-alteracao-texto-livre';\n  };\n\n  private aceitarRevisoes = (): void => {\n    (this.quill as any).revisao.revisarTodos(true);\n    this.setTextoAntesRevisao(undefined);\n    this.atualizaStatusElementosRevisao();\n    this.removeRevisoes();\n  };\n\n  private getQuantidadeDeRevisoes = (): number => {\n    return (this.quill as any)?.revisao?.getQuantidadeRevisoes() ?? 0;\n  };\n\n  private rejeitarRevisoes = (): void => {\n    (this.quill as any).revisao.revisarTodos(false);\n    this.setTextoAntesRevisao(undefined);\n    this.atualizaStatusElementosRevisao();\n    this.removeRevisoes();\n  };\n\n  private timerAtualizaStatusElementosRevisao?: any;\n  private atualizaStatusElementosRevisao = (immediate = true): void => {\n    const fnUpdate = (): void => {\n      const quantidade = this.getQuantidadeDeRevisoes();\n      if (quantidade > 0 && !rootStore.getState().elementoReducer.emRevisao) {\n        if (this.switchRevisaoComponent) {\n          this.switchRevisaoComponent.ativarDesativarMarcaDeRevisao(false);\n        }\n      }\n\n      if (quantidade === 0) {\n        this.removeRevisoes();\n      } else if (quantidade > 0) {\n        this.buildRevisoes();\n      }\n      this.desabilitaBtn(quantidade === 0, CLASS_BUTTON_REJEITAR_REVISAO);\n      this.desabilitaBtn(quantidade === 0, CLASS_BUTTON_ACEITAR_REVISAO);\n      this.atualizaQuantidadeRevisao(quantidade);\n    };\n\n    if (immediate) {\n      fnUpdate();\n    } else {\n      clearTimeout(this.timerAtualizaStatusElementosRevisao);\n      this.timerAtualizaStatusElementosRevisao = setTimeout(fnUpdate, 100);\n    }\n  };\n\n  private desabilitaBtn = (desabilita: boolean, button: string): void => {\n    const contadorView = this.querySelector(`.${button}`) as any;\n    if (contadorView) {\n      if (desabilita) {\n        contadorView.setAttribute('disabled', desabilita);\n      } else {\n        contadorView.removeAttribute('disabled');\n      }\n    }\n  };\n\n  private buildRevisoes = (): void => {\n    if (this.modo === Modo.JUSTIFICATIVA) {\n      atualizaRevisaoJustificativa(rootStore.getState().elementoReducer);\n    } else {\n      atualizaRevisaoTextoLivre(rootStore.getState().elementoReducer);\n    }\n  };\n\n  private removeRevisoes = (): void => {\n    atualizaRevisaoJustificativa(rootStore.getState().elementoReducer, true);\n    atualizaRevisaoTextoLivre(rootStore.getState().elementoReducer, true);\n  };\n\n  private atualizaQuantidadeRevisao = (quantidade: number): void => {\n    const elemento = this.querySelector(`#${this.getNomeBadge()}`) as any;\n    atualizaQuantidadeRevisaoTextoRico(quantidade, elemento);\n\n    // if (elemento) {\n    //   elemento.innerHTML = quantidade;\n    // }\n  };\n\n  editarNotaRodape(idNotaRodape: string): void {\n    (this.quill as any).notasRodape.editar(idNotaRodape);\n  }\n\n  removerNotaRodape(idNotaRodape: string): void {\n    (this.quill as any).notasRodape.remover(idNotaRodape);\n  }\n}\n\nconst formatsOptions = [\n  'estilo',\n  'bold',\n  'italic',\n  'image',\n  'underline',\n  'align',\n  'list',\n  'script',\n  'image',\n  'table',\n  'tr',\n  'td',\n  'link',\n  'text-indent',\n  'margin-bottom',\n  'width',\n  'added',\n  'removed',\n];\n\nconst toolbarOptions = [\n  [{ estilo: [false, 'ementa', 'norma-alterada'] }],\n  ['bold', 'italic', 'underline'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  [{ script: 'sub' }, { script: 'super' }],\n  // ['blockquote'],\n  ['undo', 'redo'],\n  [{ align: [] }],\n  [{ 'text-indent': '0px' }],\n  [{ 'margin-bottom': '0px' }],\n  ['clean'],\n  [\n    {\n      table: TableModule.tableOptions(),\n    },\n    {\n      table: [\n        // 'insert',\n        'change-width-col-modal',\n        'change-width-table-modal',\n        'append-row-above',\n        'append-row-below',\n        'append-col-before',\n        'append-col-after',\n        'remove-col',\n        'remove-row',\n        'remove-table',\n        'split-cell',\n        'merge-selection',\n        // 'remove-cell',\n        // 'remove-selection',\n      ],\n    },\n  ],\n  ['image'],\n];\n","import { SlMenuItem } from '@shoelace-style/shoelace';\n\nexport async function showMenuImagem(editorTextoRico: any, img: any, top: number, left: number): Promise<any> {\n  const content = document.createRange().createContextualFragment(`\n    <div>\n      <style>\n      #bg-wp-menu-img {\n        position:absolute; top:0; left:0; width:100%; height:100%; z-index:999;\n      }\n      #menu-img {\n        position:absolute; z-index:9999;\n      }\n      </style>\n      <div id=\"bg-wp-menu-img\">\n        <sl-menu id=\"menu-img\" style=\"top:${top}px;left:${left}px;\">\n          <sl-menu-item id=\"item-menu-largura-img\" value=\"alterar-largura-imagem\">Alterar a largura da imagem</sl-menu-item>\n        </sl-menu>\n      </div>\n    </div>\n  `);\n\n  const itemMenu = content.querySelector('#item-menu-largura-img') as SlMenuItem;\n  const bgWpMenuImagem = content.querySelector('#bg-wp-menu-img') as HTMLDivElement;\n\n  itemMenu.onclick = (): void => {\n    const width = img.getAttribute('width');\n    editorTextoRico.showAlterarLarguraImagemModal(img, width);\n  };\n\n  bgWpMenuImagem.onclick = (): void => {\n    bgWpMenuImagem.parentElement?.remove();\n  };\n\n  await editorTextoRico.appendChild(content);\n}\n","export const ajustaHtmlToEditor = (html = ''): string => {\n  return html\n    .replace(/indent/g, 'ql-indent')\n    .replace(/align-justify/g, 'ql-align-justify')\n    .replace(/align-center/g, 'ql-align-center')\n    .replace(/align-right/g, 'ql-align-right');\n};\n\nexport const ajustaHtmlFromEditor = (html = ''): string => {\n  const result = html\n    .replace(/ql-indent/g, 'indent')\n    .replace(/ql-align-justify/g, 'align-justify')\n    .replace(/ql-align-center/g, 'align-center')\n    .replace(/ql-align-right/g, 'align-right');\n\n  return removeElementosTDOcultos(result);\n};\n\nexport const removeElementosTDOcultos = (html = ''): string => {\n  // O quill1table adiciona elementos td ocultos para identificar/gerenciar undo de clulas mescladas.\n  // Esses elementos no devem fazer parte do texto html a ser salvo.\n\n  const tempDiv = document.createElement('div');\n  tempDiv.innerHTML = html;\n  const elementosOcultos = tempDiv.querySelectorAll('td[merge_id]');\n  elementosOcultos.forEach((elemento: any) => elemento.parentNode?.removeChild(elemento));\n  return tempDiv.innerHTML;\n};\n\nexport const removeElementosTDOcultosByRegex = (html = ''): string => {\n  const regex = /<td[^>]*\\smerge_id=\"[^\"]*\"[^>]*>[\\s\\S]*?<\\/td>/gim;\n  return html.replace(regex, '');\n};\n","import { SlButton } from '@shoelace-style/shoelace';\nimport { Anexo } from '../../model/emenda/emenda';\n\nexport async function uploadAnexoDialog(anexos: Anexo[], atualizaAnexo: (Anexo) => any, editorTextoRico: any): Promise<any> {\n  const dialogElem = document.createElement('sl-dialog');\n  editorTextoRico.appendChild(dialogElem);\n  //tamanhoMaximoAnexo = editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo;\n  dialogElem.label = 'Anexo';\n  dialogElem.addEventListener('sl-request-close', (event: any) => {\n    if (event.detail.source === 'overlay') {\n      event.preventDefault();\n    }\n  });\n\n  const content = document.createRange().createContextualFragment(`\n  <style>\n    .anexo-item {\n      display: flex;\n      align-items: center;\n      gap: 0.5em;\n      margin-bottom: 1em;\n    }\n\n    sl-icon[name=\"paperclip\"] {\n      width: 1.5em;\n      height: 1.5em;\n    }\n\n    sl-button sl-icon {\n      font-size: 1.5em;\n      pointer-events: none;\n      vertical-align: -4px;\n    }\n\n    #input-upload::part(form-control) {\n      display: flex;\n      flex-direction: column;\n      align-items: stretch;\n      gap: 1em;\n    }\n  </style>\n  <div id=\"wp-upload\">\n    <label for=\"input-upload\">Selecione o arquivo a ser anexado  emenda</label>\n    <br/>\n    <br/>\n    <input id=\"input-upload\" type=\"file\" accept=\"application/pdf\" size=\"small\"></input>\n    <br/>\n    <label class=\"tipoErrado\" style=\"color: red;\" hidden=\"true\" id=\"tipoErrado\">Esse arquivo no  um PDF</label>\n    <br/>\n    <label class=\"tamanhoMaximoAtingido\" style=\"color: red;\" hidden=\"true\" id=\"tamanhoMaximoAtingido\">Ultrapassou o tamanho mximo permitido (${Math.trunc(\n      editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo / 1024\n    )}MB)</label>\n  </div>\n  <br/>\n  <div id=\"form\" class=\"input-validation-required\"></div>\n  <br/>\n  <sl-button id=\"btnConfirmarAnexo\" class=\"controls\" slot=\"footer\" variant=\"primary\">Confirmar</sl-button>\n  <sl-button class=\"controls\" slot=\"footer\" variant=\"default\">Cancelar</sl-button>\n  `);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const removerAnexo = (e: MouseEvent) => {\n    const nomeArquivo = (e.target as SlButton).getAttribute('nomeArquivo');\n    anexos = anexos.filter(a => a.nomeArquivo !== nomeArquivo);\n    conteudoDinamico();\n  };\n\n  // cria funo para exibir anexo em nova aba\n  const exibirAnexo = (e: MouseEvent) => {\n    const nomeArquivo = (e.target as SlButton).getAttribute('nomeArquivo');\n    const anexo = anexos.find(a => a.nomeArquivo === nomeArquivo);\n    const win = window.open();\n\n    if (anexo?.nomeArquivo?.match(/\\.(pdf)$/)) {\n      win?.document.write(`<embed src=\"${anexo?.base64}\" width=\"100%\" height=\"100%\" type=\"application/pdf\"></embed>`);\n      return;\n    }\n    if (anexo?.nomeArquivo?.match(/\\.(jpeg|jpg|gif|png|svg)$/)) {\n      win?.document.write(`<img src=\"${anexo?.base64}\" style=\"width:100%; height:auto;\">`);\n      return;\n    }\n    win?.document.write(`<a href=\"${anexo?.base64}\" download=\"${anexo?.nomeArquivo}\">Download do arquivo anexo</a>`);\n  };\n\n  const conteudoDinamico = (): void => {\n    let htmlConteudo = '';\n    wpUpload.hidden = anexos.length ? true : false;\n\n    anexos.forEach(\n      a =>\n        (htmlConteudo += `<span class=\"anexo-item\">\n                            <sl-icon name=\"paperclip\"></sl-icon>\n                            <a download=\"${a.nomeArquivo}\" href=\"data:application/pdf;base64,${a.base64}\">\n                              <span>\n                                ${a.nomeArquivo}\n                              </span>\n                            </a>\n                            <!--\n                            <sl-button class=\"btn-preview-anexo\" size=\"small\" title=\"Visualizar o anexo em uma nova janela\" nomeArquivo=\"${a.nomeArquivo}\">\n                              <sl-icon name=\"eye\"></sl-icon>\n                            </sl-button>\n                            -->\n                            <sl-button class=\"btn-remove-anexo\" size=\"small\" title=\"Remover anexo\" nomeArquivo=\"${a.nomeArquivo}\">\n                              <sl-icon name=\"x\"></sl-icon>\n                            </sl-button>\n                          </span>`)\n    );\n    form!.innerHTML = htmlConteudo;\n    const btns = form?.querySelectorAll('.btn-remove-anexo');\n    (btns || []).forEach(btn => (btn.onclick = removerAnexo));\n    const btns_preview = form?.querySelectorAll('.btn-preview-anexo');\n    (btns_preview || []).forEach(btn_preview => (btn_preview.onclick = exibirAnexo));\n  };\n\n  const wpUpload = content.querySelector('#wp-upload') as HTMLDivElement;\n  const inputUpload = content.querySelector('#input-upload') as HTMLInputElement;\n  const form = content.querySelector('#form');\n  const botoes = content.querySelectorAll('.controls');\n  const confirmar = botoes[0] as SlButton;\n  const fechar = botoes[1] as SlButton;\n\n  inputUpload.oninput = (): void => {\n    addAnexo(editorTextoRico);\n  };\n\n  confirmar.onclick = (): void => {\n    atualizaAnexo(anexos);\n    agendarEmissaoEventoOnChange(dialogElem);\n    dialogElem?.hide();\n    dialogElem?.remove();\n    anexos = [];\n  };\n\n  fechar.onclick = (): void => {\n    dialogElem?.hide();\n    dialogElem?.remove();\n    anexos = [];\n  };\n\n  const agendarEmissaoEventoOnChange = (elemento: HTMLElement): void => {\n    elemento.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento: 'anexo',\n        },\n      })\n    );\n  };\n\n  const addAnexo = async (editorTextoRico: any) => {\n    if (inputUpload?.files) {\n      const file = inputUpload.files[0];\n\n      const listaRestricoes = restricoes(file, editorTextoRico);\n\n      if (listaRestricoes.length === 0) {\n        const anexo = await convertAnexo(file);\n        anexos.push(anexo);\n        inputUpload.files = null;\n        conteudoDinamico();\n        document.getElementById('btnConfirmarAnexo')?.removeAttribute('disabled');\n      } else {\n        document.getElementById('btnConfirmarAnexo')?.setAttribute('disabled', 'true');\n\n        listaRestricoes.forEach(restricao => {\n          document.getElementById(restricao)?.removeAttribute('hidden');\n        });\n\n        listaRestricoesCompleta.forEach(restricaoCompleta => {\n          if (!listaRestricoes.includes(restricaoCompleta)) {\n            document.getElementById(restricaoCompleta)?.setAttribute('hidden', 'true');\n          }\n        });\n      }\n    }\n  };\n\n  const listaRestricoesCompleta: string[] = ['tamanhoMaximoAtingido', 'tipoErrado'];\n\n  const restricoes = (file: any, editorTextoRico: any): string[] => {\n    const restricoes: string[] = [];\n    if (file) {\n      const size = Math.round(file.size / 1024);\n\n      if (size > editorTextoRico.lexmlEtaConfig.tamanhoMaximoAnexo) {\n        restricoes.push('tamanhoMaximoAtingido');\n      }\n\n      if (file.type !== 'application/pdf') {\n        restricoes.push('tipoErrado');\n      }\n\n      if (restricoes.length > 0) {\n        restricoes.push('restricao');\n      }\n    }\n\n    //const retorno = file && file.type === 'application/pdf' && size <= 4096;\n    return restricoes;\n  };\n\n  const convertAnexo = (file): Promise<Anexo> => {\n    return new Promise((resolve, reject) => {\n      confirmar.disabled = true;\n      fechar.disabled = true;\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n      fileReader.onload = () => {\n        confirmar.disabled = false;\n        fechar.disabled = false;\n        resolve({ nomeArquivo: file.name, base64: (fileReader.result?.toString() || '').replace(/.*;base64,/, '') });\n      };\n      fileReader.onerror = error => reject(error);\n    });\n  };\n\n  conteudoDinamico();\n  await dialogElem.appendChild(content);\n  await dialogElem.show();\n  setTimeout(() => {\n    inputUpload.focus();\n  }, 0);\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-alterar-largura-tabela-coluna-modal')\nexport class AlterarLarguraTabelaColunaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('sl-alert')\n  private slAlert!: any;\n\n  @property({ type: String })\n  private valorLargura = '';\n\n  @property({ type: String })\n  private tipo = '';\n\n  @property({ type: Function })\n  callback;\n\n  public show(width: string): void {\n    this.valorLargura = width ? width.replace('%', '') : '';\n    this.slAlert.hide();\n    this.slDialog.show();\n    setTimeout(() => {\n      this.shadowRoot?.querySelector('sl-input')?.focus();\n    }, 0);\n  }\n\n  public hide(): void {\n    this.slDialog.hide();\n  }\n\n  private alterarLargura(): void {\n    const width = parseInt(this.valorLargura);\n    if (isNaN(width) || width < 1 || width > 100) {\n      this.slAlert.show();\n    } else if (this.callback) {\n      this.callback(width);\n      this.hide();\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n        sl-input::part(base) {\n          width: 150px;\n          margin-top: 5px;\n        }\n        sl-alert {\n          margin-top: 20px;\n        }\n      </style>\n      <sl-dialog label=\"Alterar a largura da ${this.tipo}\">\n        <label>Informe o percentual da largura da ${this.tipo}</label>\n        <sl-input type=\"number\" value=${this.valorLargura} width=\"30px\" @input=${e => (this.valorLargura = e.target.value)}>\n          <sl-icon name=\"percent\" slot=\"suffix\"></sl-icon>\n        </sl-input>\n        <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n          <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n          Informe uma valor numrico de 1 a 100.\n        </sl-alert>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.alterarLargura()}>Alterar</sl-button>\n        <sl-button slot=\"footer\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-alterar-largura-tabela-coluna-modal': AlterarLarguraTabelaColunaModalComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-alterar-largura-imagem-modal')\nexport class AlterarLarguraImagemModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('sl-alert')\n  private slAlert!: any;\n\n  @property({ type: String })\n  private valorLargura = '';\n\n  @property({ type: String })\n  private tipo = '';\n\n  @property({ type: Function })\n  callback;\n\n  private img: any;\n\n  public show(img: any, width: string): void {\n    this.valorLargura = width ? width.replace('%', '') : '';\n    this.img = img;\n    this.slAlert.hide();\n    this.slDialog.show();\n    setTimeout(() => {\n      this.shadowRoot?.querySelector('sl-input')?.focus();\n    }, 0);\n  }\n\n  public hide(): void {\n    this.slDialog.hide();\n  }\n\n  private alterarLargura(): void {\n    const width = parseInt(this.valorLargura);\n    if (isNaN(width) || width < 1 || width > 100) {\n      this.slAlert.show();\n    } else if (this.callback) {\n      this.callback(this.img, width);\n      this.hide();\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n        sl-input::part(base) {\n          width: 150px;\n          margin-top: 5px;\n        }\n        sl-alert {\n          margin-top: 20px;\n        }\n      </style>\n      <sl-dialog label=\"Alterar a largura da Imagem\">\n        <label>Informe o percentual da largura da Imagem</label>\n        <sl-input type=\"number\" value=${this.valorLargura} width=\"30px\" @input=${e => (this.valorLargura = e.target.value)}>\n          <sl-icon name=\"percent\" slot=\"suffix\"></sl-icon>\n        </sl-input>\n        <sl-alert variant=\"warning\" closable class=\"alert-closable\">\n          <sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>\n          Informe uma valor numrico de 1 a 100.\n        </sl-alert>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.alterarLargura()}>Alterar</sl-button>\n        <sl-button slot=\"footer\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-alterar-largura-imagem-modal': AlterarLarguraImagemModalComponent;\n  }\n}\n","import { html } from 'lit';\n// Foi utilizado TemplateResult porque o articulacao.component.ts no usa ShadowDom\nexport const shoelaceLightThemeStyles = html`\n  <style>\n    :root,\n    :host,\n    .sl-theme-light {\n      --sl-color-gray-50: hsl(0 0% 97.5%);\n      --sl-color-gray-100: hsl(240 4.8% 95.9%);\n      --sl-color-gray-200: hsl(240 5.9% 90%);\n      --sl-color-gray-300: hsl(240 4.9% 83.9%);\n      --sl-color-gray-400: hsl(240 5% 64.9%);\n      --sl-color-gray-500: hsl(240 3.8% 46.1%);\n      --sl-color-gray-600: hsl(240 5.2% 33.9%);\n      --sl-color-gray-700: hsl(240 5.3% 26.1%);\n      --sl-color-gray-800: hsl(240 3.7% 15.9%);\n      --sl-color-gray-900: hsl(240 5.9% 10%);\n      --sl-color-gray-950: hsl(240 7.3% 8%);\n\n      --sl-color-red-50: hsl(0 85.7% 97.3%);\n      --sl-color-red-100: hsl(0 93.3% 94.1%);\n      --sl-color-red-200: hsl(0 96.3% 89.4%);\n      --sl-color-red-300: hsl(0 93.5% 81.8%);\n      --sl-color-red-400: hsl(0 90.6% 70.8%);\n      --sl-color-red-500: hsl(0 84.2% 60.2%);\n      --sl-color-red-600: hsl(0 72.2% 50.6%);\n      --sl-color-red-700: hsl(0 73.7% 41.8%);\n      --sl-color-red-800: hsl(0 70% 35.3%);\n      --sl-color-red-900: hsl(0 62.8% 30.6%);\n      --sl-color-red-950: hsl(0 60% 19.6%);\n\n      --sl-color-orange-50: hsl(33.3 100% 96.5%);\n      --sl-color-orange-100: hsl(34.3 100% 91.8%);\n      --sl-color-orange-200: hsl(32.1 97.7% 83.1%);\n      --sl-color-orange-300: hsl(30.7 97.2% 72.4%);\n      --sl-color-orange-400: hsl(27 96% 61%);\n      --sl-color-orange-500: hsl(24.6 95% 53.1%);\n      --sl-color-orange-600: hsl(20.5 90.2% 48.2%);\n      --sl-color-orange-700: hsl(17.5 88.3% 40.4%);\n      --sl-color-orange-800: hsl(15 79.1% 33.7%);\n      --sl-color-orange-900: hsl(15.3 74.6% 27.8%);\n      --sl-color-orange-950: hsl(15.2 69.1% 19%);\n\n      --sl-color-amber-50: hsl(48 100% 96.1%);\n      --sl-color-amber-100: hsl(48 96.5% 88.8%);\n      --sl-color-amber-200: hsl(48 96.6% 76.7%);\n      --sl-color-amber-300: hsl(45.9 96.7% 64.5%);\n      --sl-color-amber-400: hsl(43.3 96.4% 56.3%);\n      --sl-color-amber-500: hsl(37.7 92.1% 50.2%);\n      --sl-color-amber-600: hsl(32.1 94.6% 43.7%);\n      --sl-color-amber-700: hsl(26 90.5% 37.1%);\n      --sl-color-amber-800: hsl(22.7 82.5% 31.4%);\n      --sl-color-amber-900: hsl(21.7 77.8% 26.5%);\n      --sl-color-amber-950: hsl(22.9 74.1% 16.7%);\n\n      --sl-color-yellow-50: hsl(54.5 91.7% 95.3%);\n      --sl-color-yellow-100: hsl(54.9 96.7% 88%);\n      --sl-color-yellow-200: hsl(52.8 98.3% 76.9%);\n      --sl-color-yellow-300: hsl(50.4 97.8% 63.5%);\n      --sl-color-yellow-400: hsl(47.9 95.8% 53.1%);\n      --sl-color-yellow-500: hsl(45.4 93.4% 47.5%);\n      --sl-color-yellow-600: hsl(40.6 96.1% 40.4%);\n      --sl-color-yellow-700: hsl(35.5 91.7% 32.9%);\n      --sl-color-yellow-800: hsl(31.8 81% 28.8%);\n      --sl-color-yellow-900: hsl(28.4 72.5% 25.7%);\n      --sl-color-yellow-950: hsl(33.1 69% 13.9%);\n\n      --sl-color-lime-50: hsl(78.3 92% 95.1%);\n      --sl-color-lime-100: hsl(79.6 89.1% 89.2%);\n      --sl-color-lime-200: hsl(80.9 88.5% 79.6%);\n      --sl-color-lime-300: hsl(82 84.5% 67.1%);\n      --sl-color-lime-400: hsl(82.7 78% 55.5%);\n      --sl-color-lime-500: hsl(83.7 80.5% 44.3%);\n      --sl-color-lime-600: hsl(84.8 85.2% 34.5%);\n      --sl-color-lime-700: hsl(85.9 78.4% 27.3%);\n      --sl-color-lime-800: hsl(86.3 69% 22.7%);\n      --sl-color-lime-900: hsl(87.6 61.2% 20.2%);\n      --sl-color-lime-950: hsl(86.5 60.6% 13.9%);\n\n      --sl-color-green-50: hsl(138.5 76.5% 96.7%);\n      --sl-color-green-100: hsl(140.6 84.2% 92.5%);\n      --sl-color-green-200: hsl(141 78.9% 85.1%);\n      --sl-color-green-300: hsl(141.7 76.6% 73.1%);\n      --sl-color-green-400: hsl(141.9 69.2% 58%);\n      --sl-color-green-500: hsl(142.1 70.6% 45.3%);\n      --sl-color-green-600: hsl(142.1 76.2% 36.3%);\n      --sl-color-green-700: hsl(142.4 71.8% 29.2%);\n      --sl-color-green-800: hsl(142.8 64.2% 24.1%);\n      --sl-color-green-900: hsl(143.8 61.2% 20.2%);\n      --sl-color-green-950: hsl(144.3 60.7% 12%);\n\n      --sl-color-emerald-50: hsl(151.8 81% 95.9%);\n      --sl-color-emerald-100: hsl(149.3 80.4% 90%);\n      --sl-color-emerald-200: hsl(152.4 76% 80.4%);\n      --sl-color-emerald-300: hsl(156.2 71.6% 66.9%);\n      --sl-color-emerald-400: hsl(158.1 64.4% 51.6%);\n      --sl-color-emerald-500: hsl(160.1 84.1% 39.4%);\n      --sl-color-emerald-600: hsl(161.4 93.5% 30.4%);\n      --sl-color-emerald-700: hsl(162.9 93.5% 24.3%);\n      --sl-color-emerald-800: hsl(163.1 88.1% 19.8%);\n      --sl-color-emerald-900: hsl(164.2 85.7% 16.5%);\n      --sl-color-emerald-950: hsl(164.3 87.5% 9.4%);\n\n      --sl-color-teal-50: hsl(166.2 76.5% 96.7%);\n      --sl-color-teal-100: hsl(167.2 85.5% 89.2%);\n      --sl-color-teal-200: hsl(168.4 83.8% 78.2%);\n      --sl-color-teal-300: hsl(170.6 76.9% 64.3%);\n      --sl-color-teal-400: hsl(172.5 66% 50.4%);\n      --sl-color-teal-500: hsl(173.4 80.4% 40%);\n      --sl-color-teal-600: hsl(174.7 83.9% 31.6%);\n      --sl-color-teal-700: hsl(175.3 77.4% 26.1%);\n      --sl-color-teal-800: hsl(176.1 69.4% 21.8%);\n      --sl-color-teal-900: hsl(175.9 60.8% 19%);\n      --sl-color-teal-950: hsl(176.5 58.6% 11.4%);\n\n      --sl-color-cyan-50: hsl(183.2 100% 96.3%);\n      --sl-color-cyan-100: hsl(185.1 95.9% 90.4%);\n      --sl-color-cyan-200: hsl(186.2 93.5% 81.8%);\n      --sl-color-cyan-300: hsl(187 92.4% 69%);\n      --sl-color-cyan-400: hsl(187.9 85.7% 53.3%);\n      --sl-color-cyan-500: hsl(188.7 94.5% 42.7%);\n      --sl-color-cyan-600: hsl(191.6 91.4% 36.5%);\n      --sl-color-cyan-700: hsl(192.9 82.3% 31%);\n      --sl-color-cyan-800: hsl(194.4 69.6% 27.1%);\n      --sl-color-cyan-900: hsl(196.4 63.6% 23.7%);\n      --sl-color-cyan-950: hsl(196.8 61% 16.1%);\n\n      --sl-color-sky-50: hsl(204 100% 97.1%);\n      --sl-color-sky-100: hsl(204 93.8% 93.7%);\n      --sl-color-sky-200: hsl(200.6 94.4% 86.1%);\n      --sl-color-sky-300: hsl(199.4 95.5% 73.9%);\n      --sl-color-sky-400: hsl(198.4 93.2% 59.6%);\n      --sl-color-sky-500: hsl(198.6 88.7% 48.4%);\n      --sl-color-sky-600: hsl(200.4 98% 39.4%);\n      --sl-color-sky-700: hsl(201.3 96.3% 32.2%);\n      --sl-color-sky-800: hsl(201 90% 27.5%);\n      --sl-color-sky-900: hsl(202 80.3% 23.9%);\n      --sl-color-sky-950: hsl(202.3 73.8% 16.5%);\n\n      --sl-color-blue-50: hsl(213.8 100% 96.9%);\n      --sl-color-blue-100: hsl(214.3 94.6% 92.7%);\n      --sl-color-blue-200: hsl(213.3 96.9% 87.3%);\n      --sl-color-blue-300: hsl(211.7 96.4% 78.4%);\n      --sl-color-blue-400: hsl(213.1 93.9% 67.8%);\n      --sl-color-blue-500: hsl(217.2 91.2% 59.8%);\n      --sl-color-blue-600: hsl(221.2 83.2% 53.3%);\n      --sl-color-blue-700: hsl(224.3 76.3% 48%);\n      --sl-color-blue-800: hsl(225.9 70.7% 40.2%);\n      --sl-color-blue-900: hsl(224.4 64.3% 32.9%);\n      --sl-color-blue-950: hsl(226.2 55.3% 18.4%);\n\n      --sl-color-indigo-50: hsl(225.9 100% 96.7%);\n      --sl-color-indigo-100: hsl(226.5 100% 93.9%);\n      --sl-color-indigo-200: hsl(228 96.5% 88.8%);\n      --sl-color-indigo-300: hsl(229.7 93.5% 81.8%);\n      --sl-color-indigo-400: hsl(234.5 89.5% 73.9%);\n      --sl-color-indigo-500: hsl(238.7 83.5% 66.7%);\n      --sl-color-indigo-600: hsl(243.4 75.4% 58.6%);\n      --sl-color-indigo-700: hsl(244.5 57.9% 50.6%);\n      --sl-color-indigo-800: hsl(243.7 54.5% 41.4%);\n      --sl-color-indigo-900: hsl(242.2 47.4% 34.3%);\n      --sl-color-indigo-950: hsl(243.5 43.6% 22.9%);\n\n      --sl-color-violet-50: hsl(250 100% 97.6%);\n      --sl-color-violet-100: hsl(251.4 91.3% 95.5%);\n      --sl-color-violet-200: hsl(250.5 95.2% 91.8%);\n      --sl-color-violet-300: hsl(252.5 94.7% 85.1%);\n      --sl-color-violet-400: hsl(255.1 91.7% 76.3%);\n      --sl-color-violet-500: hsl(258.3 89.5% 66.3%);\n      --sl-color-violet-600: hsl(262.1 83.3% 57.8%);\n      --sl-color-violet-700: hsl(263.4 70% 50.4%);\n      --sl-color-violet-800: hsl(263.4 69.3% 42.2%);\n      --sl-color-violet-900: hsl(263.5 67.4% 34.9%);\n      --sl-color-violet-950: hsl(265.1 61.5% 21.4%);\n\n      --sl-color-purple-50: hsl(270 100% 98%);\n      --sl-color-purple-100: hsl(268.7 100% 95.5%);\n      --sl-color-purple-200: hsl(268.6 100% 91.8%);\n      --sl-color-purple-300: hsl(269.2 97.4% 85.1%);\n      --sl-color-purple-400: hsl(270 95.2% 75.3%);\n      --sl-color-purple-500: hsl(270.7 91% 65.1%);\n      --sl-color-purple-600: hsl(271.5 81.3% 55.9%);\n      --sl-color-purple-700: hsl(272.1 71.7% 47.1%);\n      --sl-color-purple-800: hsl(272.9 67.2% 39.4%);\n      --sl-color-purple-900: hsl(273.6 65.6% 32%);\n      --sl-color-purple-950: hsl(276 59.5% 16.5%);\n\n      --sl-color-fuchsia-50: hsl(289.1 100% 97.8%);\n      --sl-color-fuchsia-100: hsl(287 100% 95.5%);\n      --sl-color-fuchsia-200: hsl(288.3 95.8% 90.6%);\n      --sl-color-fuchsia-300: hsl(291.1 93.1% 82.9%);\n      --sl-color-fuchsia-400: hsl(292 91.4% 72.5%);\n      --sl-color-fuchsia-500: hsl(292.2 84.1% 60.6%);\n      --sl-color-fuchsia-600: hsl(293.4 69.5% 48.8%);\n      --sl-color-fuchsia-700: hsl(294.7 72.4% 39.8%);\n      --sl-color-fuchsia-800: hsl(295.4 70.2% 32.9%);\n      --sl-color-fuchsia-900: hsl(296.7 63.6% 28%);\n      --sl-color-fuchsia-950: hsl(297.1 56.8% 14.5%);\n\n      --sl-color-pink-50: hsl(327.3 73.3% 97.1%);\n      --sl-color-pink-100: hsl(325.7 77.8% 94.7%);\n      --sl-color-pink-200: hsl(325.9 84.6% 89.8%);\n      --sl-color-pink-300: hsl(327.4 87.1% 81.8%);\n      --sl-color-pink-400: hsl(328.6 85.5% 70.2%);\n      --sl-color-pink-500: hsl(330.4 81.2% 60.4%);\n      --sl-color-pink-600: hsl(333.3 71.4% 50.6%);\n      --sl-color-pink-700: hsl(335.1 77.6% 42%);\n      --sl-color-pink-800: hsl(335.8 74.4% 35.3%);\n      --sl-color-pink-900: hsl(335.9 69% 30.4%);\n      --sl-color-pink-950: hsl(336.2 65.4% 15.9%);\n\n      --sl-color-rose-50: hsl(355.7 100% 97.3%);\n      --sl-color-rose-100: hsl(355.6 100% 94.7%);\n      --sl-color-rose-200: hsl(352.7 96.1% 90%);\n      --sl-color-rose-300: hsl(352.6 95.7% 81.8%);\n      --sl-color-rose-400: hsl(351.3 94.5% 71.4%);\n      --sl-color-rose-500: hsl(349.7 89.2% 60.2%);\n      --sl-color-rose-600: hsl(346.8 77.2% 49.8%);\n      --sl-color-rose-700: hsl(345.3 82.7% 40.8%);\n      --sl-color-rose-800: hsl(343.4 79.7% 34.7%);\n      --sl-color-rose-900: hsl(341.5 75.5% 30.4%);\n      --sl-color-rose-950: hsl(341.3 70.1% 17.1%);\n\n      --sl-color-primary-50: var(--sl-color-sky-50);\n      --sl-color-primary-100: var(--sl-color-sky-100);\n      --sl-color-primary-200: var(--sl-color-sky-200);\n      --sl-color-primary-300: var(--sl-color-sky-300);\n      --sl-color-primary-400: var(--sl-color-sky-400);\n      --sl-color-primary-500: var(--sl-color-sky-500);\n      --sl-color-primary-600: var(--sl-color-sky-600);\n      --sl-color-primary-700: var(--sl-color-sky-700);\n      --sl-color-primary-800: var(--sl-color-sky-800);\n      --sl-color-primary-900: var(--sl-color-sky-900);\n      --sl-color-primary-950: var(--sl-color-sky-950);\n\n      --sl-color-success-50: var(--sl-color-green-50);\n      --sl-color-success-100: var(--sl-color-green-100);\n      --sl-color-success-200: var(--sl-color-green-200);\n      --sl-color-success-300: var(--sl-color-green-300);\n      --sl-color-success-400: var(--sl-color-green-400);\n      --sl-color-success-500: var(--sl-color-green-500);\n      --sl-color-success-600: var(--sl-color-green-600);\n      --sl-color-success-700: var(--sl-color-green-700);\n      --sl-color-success-800: var(--sl-color-green-800);\n      --sl-color-success-900: var(--sl-color-green-900);\n      --sl-color-success-950: var(--sl-color-green-950);\n\n      --sl-color-warning-50: var(--sl-color-amber-50);\n      --sl-color-warning-100: var(--sl-color-amber-100);\n      --sl-color-warning-200: var(--sl-color-amber-200);\n      --sl-color-warning-300: var(--sl-color-amber-300);\n      --sl-color-warning-400: var(--sl-color-amber-400);\n      --sl-color-warning-500: var(--sl-color-amber-500);\n      --sl-color-warning-600: var(--sl-color-amber-600);\n      --sl-color-warning-700: var(--sl-color-amber-700);\n      --sl-color-warning-800: var(--sl-color-amber-800);\n      --sl-color-warning-900: var(--sl-color-amber-900);\n      --sl-color-warning-950: var(--sl-color-amber-950);\n\n      --sl-color-danger-50: var(--sl-color-red-50);\n      --sl-color-danger-100: var(--sl-color-red-100);\n      --sl-color-danger-200: var(--sl-color-red-200);\n      --sl-color-danger-300: var(--sl-color-red-300);\n      --sl-color-danger-400: var(--sl-color-red-400);\n      --sl-color-danger-500: var(--sl-color-red-500);\n      --sl-color-danger-600: var(--sl-color-red-600);\n      --sl-color-danger-700: var(--sl-color-red-700);\n      --sl-color-danger-800: var(--sl-color-red-800);\n      --sl-color-danger-900: var(--sl-color-red-900);\n      --sl-color-danger-950: var(--sl-color-red-950);\n\n      --sl-color-neutral-50: var(--sl-color-gray-50);\n      --sl-color-neutral-100: var(--sl-color-gray-100);\n      --sl-color-neutral-200: var(--sl-color-gray-200);\n      --sl-color-neutral-300: var(--sl-color-gray-300);\n      --sl-color-neutral-400: var(--sl-color-gray-400);\n      --sl-color-neutral-500: var(--sl-color-gray-500);\n      --sl-color-neutral-600: var(--sl-color-gray-600);\n      --sl-color-neutral-700: var(--sl-color-gray-700);\n      --sl-color-neutral-800: var(--sl-color-gray-800);\n      --sl-color-neutral-900: var(--sl-color-gray-900);\n      --sl-color-neutral-950: var(--sl-color-gray-950);\n\n      --sl-color-neutral-0: hsl(0, 0%, 100%);\n      --sl-color-neutral-1000: hsl(0, 0%, 0%);\n\n      --sl-border-radius-small: 0.1875rem;\n      --sl-border-radius-medium: 0.25rem;\n      --sl-border-radius-large: 0.5rem;\n      --sl-border-radius-x-large: 1rem;\n\n      --sl-border-radius-circle: 50%;\n      --sl-border-radius-pill: 9999px;\n\n      --sl-shadow-x-small: 0 1px 2px hsl(240 3.8% 46.1% / 6%);\n      --sl-shadow-small: 0 1px 2px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-medium: 0 2px 4px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-large: 0 2px 8px hsl(240 3.8% 46.1% / 12%);\n      --sl-shadow-x-large: 0 4px 16px hsl(240 3.8% 46.1% / 12%);\n\n      --sl-spacing-3x-small: 0.125rem;\n      --sl-spacing-2x-small: 0.25rem;\n      --sl-spacing-x-small: 0.5rem;\n      --sl-spacing-small: 0.75rem;\n      --sl-spacing-medium: 1rem;\n      --sl-spacing-large: 1.25rem;\n      --sl-spacing-x-large: 1.75rem;\n      --sl-spacing-2x-large: 2.25rem;\n      --sl-spacing-3x-large: 3rem;\n      --sl-spacing-4x-large: 4.5rem;\n\n      --sl-transition-x-slow: 1000ms;\n      --sl-transition-slow: 500ms;\n      --sl-transition-medium: 250ms;\n      --sl-transition-fast: 150ms;\n      --sl-transition-x-fast: 50ms;\n\n      --sl-font-mono: SFMono-Regular, Consolas, 'Liberation Mono', Menlo, monospace;\n      --sl-font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      --sl-font-serif: Georgia, 'Times New Roman', serif;\n\n      --sl-font-size-2x-small: 0.625rem;\n      --sl-font-size-x-small: 0.75rem;\n      --sl-font-size-small: 0.875rem;\n      --sl-font-size-medium: 1rem;\n      --sl-font-size-large: 1.25rem;\n      --sl-font-size-x-large: 1.5rem;\n      --sl-font-size-2x-large: 2.25rem;\n      --sl-font-size-3x-large: 3rem;\n      --sl-font-size-4x-large: 4.5rem;\n\n      --sl-font-weight-light: 300;\n      --sl-font-weight-normal: 400;\n      --sl-font-weight-semibold: 500;\n      --sl-font-weight-bold: 700;\n\n      --sl-letter-spacing-denser: -0.03em;\n      --sl-letter-spacing-dense: -0.015em;\n      --sl-letter-spacing-normal: normal;\n      --sl-letter-spacing-loose: 0.075em;\n      --sl-letter-spacing-looser: 0.15em;\n\n      --sl-line-height-denser: 1;\n      --sl-line-height-dense: 1.4;\n      --sl-line-height-normal: 1.8;\n      --sl-line-height-loose: 2.2;\n      --sl-line-height-looser: 2.6;\n\n      --sl-focus-ring-alpha: 40%;\n      --sl-focus-ring-width: 3px;\n      --sl-focus-ring: 0 0 0 var(--sl-focus-ring-width) hsl(198.6 88.7% 48.4% / var(--sl-focus-ring-alpha));\n\n      --sl-button-font-size-small: var(--sl-font-size-x-small);\n      --sl-button-font-size-medium: var(--sl-font-size-small);\n      --sl-button-font-size-large: var(--sl-font-size-medium);\n\n      --sl-input-height-small: 1.875rem;\n      --sl-input-height-medium: 2.5rem;\n      --sl-input-height-large: 3.125rem;\n\n      --sl-input-background-color: var(--sl-color-neutral-0);\n      --sl-input-background-color-hover: var(--sl-input-background-color);\n      --sl-input-background-color-focus: var(--sl-input-background-color);\n      --sl-input-background-color-disabled: var(--sl-color-neutral-100);\n      --sl-input-border-color: var(--sl-color-neutral-300);\n      --sl-input-border-color-hover: var(--sl-color-neutral-400);\n      --sl-input-border-color-focus: var(--sl-color-primary-500);\n      --sl-input-border-color-disabled: var(--sl-color-neutral-300);\n      --sl-input-border-width: 1px;\n\n      --sl-input-border-radius-small: var(--sl-border-radius-medium);\n      --sl-input-border-radius-medium: var(--sl-border-radius-medium);\n      --sl-input-border-radius-large: var(--sl-border-radius-medium);\n\n      --sl-input-font-family: var(--sl-font-sans);\n      --sl-input-font-weight: var(--sl-font-weight-normal);\n      --sl-input-font-size-small: var(--sl-font-size-small);\n      --sl-input-font-size-medium: var(--sl-font-size-medium);\n      --sl-input-font-size-large: var(--sl-font-size-large);\n      --sl-input-letter-spacing: var(--sl-letter-spacing-normal);\n\n      --sl-input-color: var(--sl-color-neutral-700);\n      --sl-input-color-hover: var(--sl-color-neutral-700);\n      --sl-input-color-focus: var(--sl-color-neutral-700);\n      --sl-input-color-disabled: var(--sl-color-neutral-900);\n      --sl-input-icon-color: var(--sl-color-neutral-500);\n      --sl-input-icon-color-hover: var(--sl-color-neutral-600);\n      --sl-input-icon-color-focus: var(--sl-color-neutral-600);\n      --sl-input-placeholder-color: var(--sl-color-neutral-500);\n      --sl-input-placeholder-color-disabled: var(--sl-color-neutral-600);\n      --sl-input-spacing-small: var(--sl-spacing-small);\n      --sl-input-spacing-medium: var(--sl-spacing-medium);\n      --sl-input-spacing-large: var(--sl-spacing-large);\n\n      --sl-input-filled-background-color: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-hover: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-focus: var(--sl-color-neutral-100);\n      --sl-input-filled-background-color-disabled: var(--sl-color-neutral-100);\n      --sl-input-filled-color: var(--sl-color-neutral-800);\n      --sl-input-filled-color-hover: var(--sl-color-neutral-800);\n      --sl-input-filled-color-focus: var(--sl-color-neutral-700);\n      --sl-input-filled-color-disabled: var(--sl-color-neutral-800);\n\n      --sl-input-label-font-size-small: var(--sl-font-size-small);\n      --sl-input-label-font-size-medium: var(--sl-font-size-medium);\n      --sl-input-label-font-size-large: var(--sl-font-size-large);\n\n      --sl-input-label-color: inherit;\n\n      --sl-input-help-text-font-size-small: var(--sl-font-size-x-small);\n      --sl-input-help-text-font-size-medium: var(--sl-font-size-small);\n      --sl-input-help-text-font-size-large: var(--sl-font-size-medium);\n\n      --sl-input-help-text-color: var(--sl-color-neutral-500);\n\n      --sl-toggle-size: 1rem;\n\n      --sl-overlay-background-color: hsl(240 3.8% 46.1% / 33%);\n\n      --sl-panel-background-color: var(--sl-color-neutral-0);\n      --sl-panel-border-color: var(--sl-color-neutral-200);\n      --sl-panel-border-width: 1px;\n\n      --sl-tooltip-border-radius: var(--sl-border-radius-medium);\n      --sl-tooltip-background-color: var(--sl-color-neutral-800);\n      --sl-tooltip-color: var(--sl-color-neutral-0);\n      --sl-tooltip-font-family: var(--sl-font-sans);\n      --sl-tooltip-font-weight: var(--sl-font-weight-normal);\n      --sl-tooltip-font-size: var(--sl-font-size-small);\n      --sl-tooltip-line-height: var(--sl-line-height-dense);\n      --sl-tooltip-padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-small);\n      --sl-tooltip-arrow-size: 4px;\n\n      --sl-z-index-drawer: 700;\n      --sl-z-index-dialog: 800;\n      --sl-z-index-dropdown: 900;\n      --sl-z-index-toast: 950;\n      --sl-z-index-tooltip: 1000;\n    }\n\n    .sl-scroll-lock {\n      overflow: hidden !important;\n    }\n\n    .sl-toast-stack {\n      position: fixed;\n      top: 0;\n      right: 0;\n      z-index: var(--sl-z-index-toast);\n      width: 28rem;\n      max-width: 100%;\n      max-height: 100%;\n      overflow: auto;\n    }\n\n    .sl-toast-stack sl-alert {\n      --box-shadow: var(--sl-shadow-large);\n      margin: var(--sl-spacing-medium);\n    }\n  </style>\n`;\n","import { NotaRodape } from '../../components/editor-texto-rico/notaRodape';\nimport { Revisao } from '../revisao/revisao';\n\nexport class Emenda {\n  // Metadados padronizados para o lexml-eta\n  dataUltimaModificacao = new Date().toISOString();\n  aplicacao = '';\n  versaoAplicacao = '';\n  modoEdicao = ModoEdicaoEmenda.EMENDA;\n  // Metadados especficos de sistemas\n  metadados: MetadadosEmenda = {};\n  proposicao = new RefProposicaoEmendada();\n  epigrafe = new Epigrafe();\n  componentes = [new ComponenteEmendado()];\n  comandoEmendaTextoLivre = new ComandoEmendaTextoLivre();\n  comandoEmenda = new ComandoEmenda();\n  substituicaoTermo?: SubstituicaoTermo;\n  anexos: Anexo[] = [];\n  justificativa = '';\n  justificativaAntesRevisao?: string;\n  local = '';\n  data?: string = new Date().toISOString().replace(/T.*/, ''); // formato YYYY-MM-DD\n  autoria = new Autoria();\n  opcoesImpressao = new OpcoesImpressao();\n  revisoes: Revisao[] = [];\n  colegiadoApreciador = new ColegiadoApreciador();\n  notasRodape: NotaRodape[] = [];\n}\n\nexport type MetadadosEmenda = {\n  [key: string]: string | number | boolean | string[] | number[] | boolean[];\n};\n\nexport enum ModoEdicaoEmenda {\n  EMENDA = 'emenda',\n  EMENDA_ARTIGO_ONDE_COUBER = 'emendaArtigoOndeCouber',\n  EMENDA_TEXTO_LIVRE = 'emendaTextoLivre',\n  EMENDA_SUBSTITUICAO_TERMO = 'emendaSubstituicaoTermo',\n}\n\n// Dados da proposio ----------------------------\nexport class RefProposicaoEmendada {\n  urn = '';\n  sigla = '';\n  numero = '';\n  ano = '';\n  ementa = '';\n  identificacaoTexto = '';\n}\n\n// Colegiado apreciador da emenda ----------------------------\nexport class ColegiadoApreciador {\n  siglaCasaLegislativa?: 'CN' | 'SF' | 'CD' = 'CN';\n  tipoColegiado: 'Plenrio' | 'Comisso' | 'Plenrio via Comisso' = 'Plenrio';\n  siglaComissao?: string;\n}\n\n// Epgrafe ----------------------------\nexport class Epigrafe {\n  texto = '';\n  complemento = '';\n}\n\n// Componente emendado -------------------------------\nexport class ComponenteEmendado {\n  urn = '';\n  articulado = true;\n  rotuloAnexo?: string;\n  tituloAnexo?: string;\n  dispositivos = new DispositivosEmenda();\n}\n\n// Dispositivos da emenda ----------------------------\nexport class DispositivosEmenda {\n  dispositivosSuprimidos: DispositivoEmendaSuprimido[] = [];\n  dispositivosModificados: DispositivoEmendaModificado[] = [];\n  dispositivosAdicionados: DispositivoEmendaAdicionado[] = [];\n}\n\nexport class DispositivoEmenda {\n  tipo = ''; // Tipo do dispositivo\n  id = ''; // ID LexML\n  rotulo?: string;\n  urnNormaAlterada?: string;\n}\n\nexport class DispositivoEmendaSuprimido extends DispositivoEmenda {}\n\nexport class DispositivoEmendaModificado extends DispositivoEmenda {\n  texto?: string;\n  textoOmitido?: boolean;\n  abreAspas?: boolean;\n  fechaAspas?: boolean;\n  notaAlteracao?: 'NR' | 'AC';\n}\n\nexport class DispositivoEmendaAdicionado extends DispositivoEmendaModificado {\n  idPai?: string;\n  idIrmaoAnterior?: string;\n  idPosicaoAgrupador?: string;\n  existeNaNormaAlterada?: boolean;\n  filhos?: Array<DispositivoEmendaAdicionado>;\n}\n\nexport class ComandoEmenda {\n  cabecalhoComum?: string;\n  comandos: ItemComandoEmenda[] = [];\n}\n\nexport class ComandoEmendaTextoLivre {\n  motivo?: string;\n  texto?: string;\n  textoAntesRevisao?: string;\n}\n\nexport class ItemComandoEmenda {\n  constructor(public cabecalho: string, public citacao?: string) {}\n  rotulo?: string;\n  complemento?: string;\n}\n\n// Autoria ----------------------------\nexport enum TipoAutoria {\n  NAO_IDENTIFICADO = 'No identificado',\n  PARLAMENTAR = 'Parlamentar',\n  COMISSAO = 'Comisso',\n  CASA_LEGISLATIVA = 'Casa Legislativa',\n}\nexport class Autoria {\n  tipo = TipoAutoria.PARLAMENTAR;\n  imprimirPartidoUF = true;\n  quantidadeAssinaturasAdicionaisSenadores = 0;\n  quantidadeAssinaturasAdicionaisDeputados = 0;\n  // TODO - Tornar opcional quando formos implementar outro tipo de autoria.\n  parlamentares: Array<Parlamentar> = [];\n  colegiado?: ColegiadoAutor;\n}\n\nexport class Parlamentar {\n  identificacao = '';\n  nome = '';\n  sexo: 'M' | 'F' = 'M';\n  siglaPartido = '';\n  siglaUF = '';\n  siglaCasaLegislativa: 'SF' | 'CD' = 'CD';\n  cargo = '';\n}\n\nexport class ColegiadoAutor {\n  identificacao = '';\n  nome = '';\n  sigla = '';\n}\n\n// Opes de impresso -----------------------------\nexport class OpcoesImpressao {\n  imprimirBrasao = true;\n  textoCabecalho = '';\n  reduzirEspacoEntreLinhas = false;\n  tamanhoFonte = 14;\n}\n\nexport class Anexo {\n  nomeArquivo = '';\n  base64 = '';\n}\n\nexport type TipoSubstituicaoTermo = 'Expresso' | 'Palavra' | 'Nmero';\nexport class SubstituicaoTermo {\n  tipo: TipoSubstituicaoTermo = 'Expresso';\n  termo = '';\n  novoTermo = '';\n  flexaoGenero = false;\n  flexaoNumero = false;\n}\n","import { isArticulacaoAlteracao, getDispositivoCabecaAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArtigo, isCaput } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { TagNode } from '../util/tag-node';\nimport { isOmissis, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoMultiplaAlteracaoNormaVigente {\n  private ultimoProcessado: Dispositivo | undefined = undefined;\n\n  private adjacentesOmissis: Dispositivo[] = []; // Dispositivos da lista que so adjacentes s omissis modificadas\n\n  private fecharAspasAposOmissis = false;\n\n  public getTexto(dispositivos: Dispositivo[]): string {\n    dispositivos = dispositivos.filter(d => d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isAgrupadorNaoArticulacao(d.pai!));\n    this.adjacentesOmissis = this.buscaDispositivosAdjacentesAsOmissis(dispositivos);\n    dispositivos.push(...this.adjacentesOmissis);\n    dispositivos.sort(DispositivoComparator.compare);\n\n    const arvoreDispositivos = CmdEmdUtil.getArvoreDispositivosDeAlteracaoDeNorma(dispositivos);\n\n    const sb = new StringBuilder();\n    this.montaCitacaoComando(sb, arvoreDispositivos);\n\n    const fechaAspas = this.fecharAspasAposOmissis || CmdEmdUtil.isFechaAspas(this.ultimoProcessado!);\n    if (fechaAspas) {\n      const primeiro = [...arvoreDispositivos.keys()][0];\n      const cabeca = getDispositivoCabecaAlteracao(primeiro);\n      const notaAlteracao = cabeca.notaAlteracao ? ' (' + cabeca.notaAlteracao + ')' : '';\n      return sb.toString().replace(/(<\\/p>)$/, '' + notaAlteracao + '$1');\n    }\n    return sb.toString();\n  }\n\n  private buscaDispositivosAdjacentesAsOmissis(dispositivos: Dispositivo[]): Dispositivo[] {\n    const ret = new Array<Dispositivo>();\n\n    for (const d of dispositivos) {\n      if (isOmissis(d) && !isAgrupadorNaoArticulacao(d.pai!)) {\n        // TODO - Verificar necessidade de tratamento de bloco de alterao com omissis como primeiro elemento.\n        //    if (!d.isAbreAspas()) {\n        const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n        if (!dispositivos.includes(anterior)) {\n          ret.push(anterior);\n        }\n        //    }\n        if (!CmdEmdUtil.isFechaAspas(d)) {\n          const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n          if (posterior && !dispositivos.includes(posterior)) {\n            ret.push(posterior);\n          }\n        }\n      }\n    }\n\n    return ret;\n  }\n\n  private montaCitacaoComando(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const cabeca = [...arvoreDispositivos.keys()][0];\n    arvoreDispositivos = arvoreDispositivos.get(cabeca);\n\n    const ehAgrupador = isAgrupadorNaoArticulacao(cabeca);\n\n    const classes = cabeca.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n    const node = new TagNode('p').addAtributo('class', classes);\n    if (isArticulacaoAlteracao(cabeca.pai!)) {\n      node.add('');\n    }\n    node.add(new TagNode('Rotulo').add(cabeca.rotulo!));\n    if (ehAgrupador) {\n      if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n        sb.append(node.toString());\n      } else {\n        sb.append(node.toString());\n        const nodeDenominacao = new TagNode('p').addAtributo('class', classes).add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n        sb.append(nodeDenominacao.toString());\n      }\n    } else {\n      node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca, true));\n      sb.append(node.toString());\n    }\n\n    this.ultimoProcessado = cabeca;\n    if (arvoreDispositivos.size > 0 && cabeca.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      this.writeDispositivoTo(sb, arvoreDispositivos);\n    }\n\n    if (!isAgrupadorNaoArticulacao(cabeca)) {\n      this.writeOmissisFinal(sb, cabeca);\n    }\n  }\n\n  private writeDispositivoTo(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const filhos = [...arvoreDispositivos.keys()];\n    filhos.sort(DispositivoComparator.compare);\n\n    for (const d of filhos) {\n      const arvoreAtual = arvoreDispositivos.get(d) as Map<Dispositivo, any>;\n\n      const dispositivoAnterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n\n      // -------------------------------------------\n      // Omisses antes\n\n      // Trata caso especfico de primeiro pargrafo\n      if (isArtigo(this.ultimoProcessado as Dispositivo) && !isCaput(d)) {\n        // Omissis entre o caput e o dispositivo\n        if (!isCaput(dispositivoAnterior) && !isOmissis(d)) {\n          sb.append(this.tagOmissisSemRotulo().toString());\n        }\n      } else if (this.ultimoProcessado !== dispositivoAnterior && !isOmissis(d) && dispositivoAnterior.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      // -------------------------------------------\n      // o dispositivo atual\n      if (!isCaput(d)) {\n        const ehAgrupador = isAgrupadorNaoArticulacao(d);\n        const classes = d.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n        if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n          const node = new TagNode('p').addAtributo('classe', classes);\n          if (!isOmissis(d)) {\n            node.add(new TagNode('Rotulo').add(d.rotulo));\n          }\n          node.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(d, true));\n          sb.append(node.toString());\n        } else if (this.hasFilhosPropostos(arvoreAtual) || this.adjacentesOmissis.includes(d)) {\n          const tag = new TagNode('p').addAtributo('classe', classes);\n          tag.add(new TagNode('Rotulo').add(d.rotulo));\n          tag.add(new TagNode('Omissis'));\n          sb.append(tag.toString());\n        } else {\n          sb.append(new TagNode('Omissis').toString());\n        }\n      }\n\n      this.ultimoProcessado = d;\n\n      // -------------------------------------------\n      // varre os filhos do dispositivo atual\n      if (arvoreAtual && arvoreAtual.size > 0) {\n        this.writeDispositivoTo(sb, arvoreAtual);\n      }\n    }\n  }\n\n  private tagOmissisSemRotulo(): TagNode {\n    return new TagNode('p').addAtributo('class', 'omissis').add(new TagNode('Omissis'));\n  }\n\n  private writeOmissisFinal(sb: StringBuilder, artigo: Dispositivo): void {\n    if (artigo.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO) {\n      return;\n    }\n\n    // Busca ltimo n  direita\n    let d = artigo;\n    let filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    while (filhos.length) {\n      d = filhos[filhos.length - 1];\n      filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    }\n    if (isCaput(d)) {\n      d = d.pai!;\n    }\n\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && (!this.adjacentesOmissis.includes(d) || isOmissis(d))) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n      this.fecharAspasAposOmissis = true;\n    } else if (!CmdEmdUtil.isFechaAspas(d)) {\n      const proximo = CmdEmdUtil.getDispositivoPosteriorDireto(d);\n      if (proximo && isOmissis(proximo)) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n        this.fecharAspasAposOmissis = true;\n      }\n    }\n  }\n\n  private hasFilhosPropostos(arvoreDispositivos: Map<Dispositivo, any>): boolean {\n    if (!arvoreDispositivos || !arvoreDispositivos.size) {\n      return false;\n    }\n\n    const arvore = arvoreDispositivos;\n    let hasPropostos = false;\n\n    for (const [d, value] of arvore.entries()) {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        hasPropostos = true;\n        break;\n      }\n\n      if (!hasPropostos && value) {\n        hasPropostos = this.hasFilhosPropostos(value as Map<Dispositivo, any>);\n      }\n    }\n    return hasPropostos;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { StringBuilder } from '../util/string-util';\nimport { isAgrupadorNaoArticulacao, isArtigo, isOmissis } from './../model/dispositivo/tipo';\nimport { getArtigo, isArticulacaoAlteracao, percorreHierarquiaDispositivos } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoMultiplaAlteracaoNormaVigente } from './citacao-cmd-multipla-de-norma-vigente';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoDeNormaVigente {\n  public getTexto(alteracao: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    // Identifica dispositivos alterados\n    const dispositivos = new Array<Dispositivo>();\n    percorreHierarquiaDispositivos(alteracao, d => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        dispositivos.push(d);\n      }\n    });\n\n    dispositivos.sort(DispositivoComparator.compare);\n\n    const qtdDispositivos = dispositivos.length;\n\n    const qtdSemCitacaoObrigatoria = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isOmissis(d)).length;\n\n    if (qtdDispositivos - qtdSemCitacaoObrigatoria > 0) {\n      this.getCitacoesMultiplas(sb, dispositivos);\n    }\n\n    return sb.toString();\n  }\n\n  private getCitacoesMultiplas(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    let dispositivosDaCabeca = new Array<Dispositivo>();\n    let cabeca, cabecaAtual;\n\n    for (const d of dispositivos) {\n      cabeca = this.getCabeca(d);\n\n      if (cabeca !== cabecaAtual) {\n        if (dispositivosDaCabeca.length) {\n          this.getCitacaoMultipla(sb, dispositivosDaCabeca);\n        }\n\n        dispositivosDaCabeca = [cabeca];\n        cabecaAtual = cabeca;\n      }\n\n      if (!dispositivosDaCabeca.includes(d)) {\n        dispositivosDaCabeca.push(d);\n      }\n    }\n\n    if (dispositivosDaCabeca.length) {\n      this.getCitacaoMultipla(sb, dispositivosDaCabeca);\n    }\n  }\n\n  private getCabeca(d: Dispositivo): Dispositivo {\n    if (isArticulacaoAlteracao(d.pai!) || isArtigo(d) || isAgrupadorNaoArticulacao(d) || (isOmissis(d) && isAgrupadorNaoArticulacao(d.pai!))) {\n      return d;\n    }\n    return getArtigo(d);\n  }\n\n  private getCitacaoMultipla(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    const cit = new CitacaoComandoMultiplaAlteracaoNormaVigente();\n    sb.append(cit.getTexto(dispositivos));\n  }\n}\n","import { isAgrupadorNaoArticulacao, isEmenta } from './../model/dispositivo/tipo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArtigo, isCaput } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { TagNode } from '../util/tag-node';\nimport { Artigo, Dispositivo } from './../model/dispositivo/dispositivo';\nimport {\n  getDispositivoCabecaAlteracao,\n  isArticulacaoAlteracao,\n  isAscendente,\n  isDescendenteDeSuprimido,\n  isDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoMultipla {\n  private ultimoProcessado?: Dispositivo;\n  private emAlteracao = false;\n\n  public getTexto(dispositivos: Dispositivo[], abreAspas = true, fechaAspas = true): string {\n    let arvoreDispositivos = CmdEmdUtil.getArvoreDispositivos(dispositivos);\n\n    const sb = new StringBuilder();\n\n    const cabeca = [...arvoreDispositivos.keys()][0];\n    arvoreDispositivos = arvoreDispositivos.get(cabeca);\n\n    const ehAgrupador = isAgrupadorNaoArticulacao(cabeca);\n\n    const classes = cabeca.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n    const node = new TagNode('p').addAtributo('class', classes);\n    if (abreAspas) {\n      node.add('');\n    }\n    if (!isEmenta(cabeca)) {\n      node.add(new TagNode('Rotulo').add(cabeca.rotulo));\n    }\n    if (isAgrupadorNaoArticulacao(cabeca)) {\n      sb.append(node.toString());\n      const nodeDenominacao = new TagNode('p').addAtributo('class', classes).add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca));\n      sb.append(nodeDenominacao.toString());\n    } else {\n      const texto = CmdEmdUtil.getTextoDoDispositivoOuOmissis(cabeca);\n      node.add(isEmenta(cabeca) ? texto.trim() : texto);\n      sb.append(node.toString());\n    }\n\n    if (arvoreDispositivos.size) {\n      this.ultimoProcessado = cabeca;\n      this.writeDispositivoTo(sb, arvoreDispositivos);\n    }\n\n    this.writeOmissisFinal(sb, cabeca);\n\n    return fechaAspas ? sb.toString().replace(/(<\\/p>(?:<\\/Alteracao>)?)$/, '$1') : sb.toString();\n  }\n\n  writeDispositivoTo(sb: StringBuilder, arvoreDispositivos: Map<Dispositivo, any>): void {\n    const dispositivos = Array.from(arvoreDispositivos.keys());\n    dispositivos.sort(DispositivoComparator.compare);\n\n    for (const d of dispositivos) {\n      const mapFilhos = arvoreDispositivos.get(d);\n      if (isArticulacaoAlteracao(d)) {\n        sb.append('<Alteracao>');\n        this.emAlteracao = true;\n        this.ultimoProcessado = d;\n        if (mapFilhos.size) {\n          this.writeDispositivoTo(sb, mapFilhos);\n        }\n        sb.append('</Alteracao>');\n        continue;\n      }\n\n      if (isCaput(d)) {\n        this.ultimoProcessado = d;\n        if (mapFilhos.size) {\n          this.writeDispositivoTo(sb, mapFilhos);\n        }\n        continue;\n      }\n\n      const dispositivoAnterior = CmdEmdUtil.getDispositivoAnteriorDireto(d);\n\n      // -------------------------------------------\n      // Omisses antes\n\n      // Trata caso especfico de pargrafo modificado sem caput modificado\n      if (isArtigo(this.ultimoProcessado!) && !isCaput(d)) {\n        // Omissis entre o caput e o dispositivo\n        if (!isCaput(dispositivoAnterior)) {\n          sb.append(this.tagOmissisSemRotulo().toString());\n        }\n      } else if (\n        this.ultimoProcessado !== dispositivoAnterior &&\n        !(this.ultimoProcessado!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && isAscendente(dispositivoAnterior, this.ultimoProcessado!))\n      ) {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      // -------------------------------------------\n      // o dispositivo atual\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL || this.hasFilhosPropostos(mapFilhos)) {\n        const dispRotulo = isArtigo(d) ? (d as Artigo).caput! : d;\n        const rotulo = this.emAlteracao ? d.rotulo?.replace('', '') : d.rotulo;\n        const ehAgrupador = isAgrupadorNaoArticulacao(d);\n        const classes = d.tipo.toLowerCase() + (ehAgrupador ? ' agrupador' : '');\n\n        let tag = new TagNode('p').addAtributo('class', classes);\n        if (isDispositivoCabecaAlteracao(d)) {\n          tag.add('');\n        }\n        tag.add(new TagNode('Rotulo').add(rotulo));\n        if (ehAgrupador) {\n          sb.append(tag.toString());\n          tag = new TagNode('p').addAtributo('class', classes);\n        }\n        tag.add(CmdEmdUtil.getTextoDoDispositivoOuOmissis(dispRotulo));\n        if (d.isDispositivoAlteracao && isUltimaAlteracao(d)) {\n          tag.add('');\n          const cabecaAlteracao = getDispositivoCabecaAlteracao(d);\n          if (cabecaAlteracao.notaAlteracao) {\n            tag.add(' (' + cabecaAlteracao.notaAlteracao + ')');\n          }\n        }\n        sb.append(tag.toString());\n      } else {\n        sb.append(this.tagOmissisSemRotulo().toString());\n      }\n\n      this.ultimoProcessado = d;\n\n      // -------------------------------------------\n      // varre os filhos do dispositivo atual\n      if (mapFilhos.size) {\n        this.writeDispositivoTo(sb, mapFilhos);\n      }\n    }\n  }\n\n  private tagOmissisSemRotulo(): TagNode {\n    return new TagNode('p').addAtributo('class', 'omissis').add(new TagNode('Omissis'));\n  }\n\n  private writeOmissisFinal(sb: StringBuilder, cabeca: Dispositivo): void {\n    if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO || isAgrupadorNaoArticulacao(cabeca)) {\n      return;\n    }\n\n    let d = cabeca as Dispositivo;\n\n    // Trata caso especfico de alterao de caput de artigo com alterao de norma\n    if (cabeca.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO && isArtigo(d) && (d as Artigo).hasAlteracao()) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n      return;\n    }\n\n    // Busca ltimo n  direita\n    while (d.filhos.length) {\n      d = d.filhos[d.filhos.length - 1];\n    }\n\n    if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ORIGINAL && !isDescendenteDeSuprimido(d)) {\n      sb.append(this.tagOmissisSemRotulo().toString());\n    }\n  }\n\n  private hasFilhosPropostos(map: Map<Dispositivo, any>): boolean {\n    if (!map.size) {\n      return false;\n    }\n\n    let hasPropostos = false;\n\n    for (const [d, mapFilhos] of map.entries()) {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ORIGINAL) {\n        hasPropostos = true;\n        break;\n      }\n\n      if (!hasPropostos && mapFilhos.size) {\n        hasPropostos = this.hasFilhosPropostos(mapFilhos);\n        if (hasPropostos) {\n          break;\n        }\n      }\n    }\n\n    return hasPropostos;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { isArtigo, isEmenta } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { Articulacao } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isAgrupador, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport {\n  buscaNaHierarquiaDispositivos,\n  getArtigoDoProjeto,\n  isArticulacaoAlteracao,\n  isDescendenteDeSuprimido,\n  isDispositivoAlteracao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoMultipla } from './citacao-cmd-multipla';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nexport class CitacaoComandoDispPrj {\n  constructor(private articulacao: Articulacao) {}\n\n  getTexto(): string {\n    const sb = new StringBuilder();\n\n    const dispositivos = this.getDispositivosParaCitacao();\n\n    const qtdDispositivos = dispositivos.length;\n    const qtdSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO).length;\n\n    if (qtdDispositivos - qtdSuprimidos > 0) {\n      this.getCitacoesMultiplas(sb, dispositivos);\n    }\n\n    return sb.toString();\n  }\n\n  private getDispositivosParaCitacao(): Dispositivo[] {\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao).filter(\n      d => !(isAgrupadorNaoArticulacao(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO)\n    );\n    dispositivosEmenda.sort(DispositivoComparator.compare);\n\n    const ret = new Array<Dispositivo>();\n\n    dispositivosEmenda.forEach(d => {\n      if (isArticulacaoAlteracao(d)) {\n        // Entram alteraes de norma vigente em dispositivos novos,\n        if (d.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(d);\n        }\n      } else if (isDispositivoAlteracao(d)) {\n        // dispositivos de alterao de norma vigente em dispositivos novos, e\n        if (ret.indexOf(d.pai!) >= 0) {\n          ret.push(d);\n        }\n      } else if (!isDescendenteDeSuprimido(d)) {\n        // dispositivos que no so de alterao de norma vigente e que no so descendentes de suprimidos.\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n\n  getCitacoesMultiplas(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    // O dispositivo de referncia ser um artigo ou um agrupador de artigo.\n    let listaDispRef = new Array<Dispositivo>();\n    let dispRef;\n    let dispRefAtual;\n\n    let noGrupoDeAspas: Dispositivo[] = [];\n\n    dispositivos.forEach(d => {\n      dispRef = (isArtigo(d) || isAgrupadorNaoArticulacao(d) || isEmenta(d)) && !isDispositivoAlteracao(d) ? d : getArtigoDoProjeto(d);\n\n      if (dispRef !== dispRefAtual) {\n        if (listaDispRef.length) {\n          const abreAspas = dispRefAtual.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO || noGrupoDeAspas.indexOf(dispRefAtual) < 0;\n          const fechaAspas = noGrupoDeAspas.indexOf(dispRef) < 0;\n          if (fechaAspas) {\n            noGrupoDeAspas = [];\n          }\n          sb.append(new CitacaoComandoMultipla().getTexto(listaDispRef, abreAspas, fechaAspas));\n        }\n\n        listaDispRef = [];\n        listaDispRef.push(dispRef);\n\n        dispRefAtual = dispRef;\n      }\n\n      // Preenche noGrupoDeAspas para agrupadores adicionados que no esto no ltimo grupo de aspas\n      if (isAgrupador(dispRef) && dispRef.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && noGrupoDeAspas.indexOf(dispRef) < 0) {\n        noGrupoDeAspas = this.getDispositivosMesmoGrupoDeAspas(dispRef);\n      }\n\n      if (listaDispRef.indexOf(d) < 0) {\n        listaDispRef.push(d);\n      }\n    });\n\n    if (listaDispRef.length) {\n      const abreAspas = noGrupoDeAspas.indexOf(dispRefAtual) < 0;\n      sb.append(new CitacaoComandoMultipla().getTexto(listaDispRef, abreAspas, true));\n    }\n  }\n\n  getDispositivosMesmoGrupoDeAspas(agrupador: Dispositivo): Dispositivo[] {\n    const ret = new Array<Dispositivo>();\n    buscaNaHierarquiaDispositivos(agrupador, d => {\n      if (!isDispositivoAlteracao(d) && (isAgrupadorNaoArticulacao(d) || isArtigo(d))) {\n        if (d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          ret.push(d);\n          return false;\n        }\n        return true;\n      }\n      return false;\n    });\n    return ret.slice(1);\n  }\n}\n","export class ObjetoUtil {\n  static arrayIgual(valor1: unknown, valor2: unknown): boolean {\n    if (!Array.isArray(valor1) || !Array.isArray(valor2)) {\n      return false;\n    }\n    const v1: unknown[] = valor1 as unknown[];\n    const v2: unknown[] = valor2 as unknown[];\n\n    if (v1.length !== v2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < v1.length; i++) {\n      if (!ObjetoUtil.igual(v1[i], v2[1])) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  static igual(valor1: unknown, valor2: unknown): boolean {\n    if (typeof valor1 !== typeof valor2) {\n      return false;\n    }\n\n    if (Array.isArray(valor1) || Array.isArray(valor2)) {\n      return ObjetoUtil.arrayIgual(valor1, valor2);\n    }\n\n    if (typeof valor1 !== 'object') {\n      return valor1 === valor2;\n    }\n\n    if (valor1 === valor2) {\n      return true;\n    }\n    const chaves1: string[] = Object.keys(valor1 as any);\n    const chaves2: string[] = Object.keys(valor2 as any);\n\n    if (chaves1.length !== chaves2.length) {\n      return false;\n    }\n\n    for (let i = 0; i < chaves1.length; i++) {\n      if (!ObjetoUtil.igual(chaves1[i], chaves2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nexport const removeFromArray = (array: any[], element: any): void => {\n  array.splice(array.indexOf(element), 1);\n};\n","import { isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { StringBuilder } from '../util/string-util';\nimport { Dispositivo } from './../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { getDispositivoPosteriorMesmoTipo } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\nexport class RangeDispositivos {\n  private dispositivos: Dispositivo[] = [];\n\n  constructor(disp?: Dispositivo) {\n    if (disp) {\n      this.add(disp);\n    }\n  }\n\n  isSituacao(descricaoSituacao: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].situacao.descricaoSituacao === descricaoSituacao;\n  }\n\n  isTipo(nomeTipo: string): boolean {\n    return !!this.dispositivos.length && this.dispositivos[0].tipo === nomeTipo;\n  }\n\n  add(dispositivo: Dispositivo): boolean {\n    if (!this.podeAdicionarAoRange(dispositivo)) {\n      return false;\n    }\n    this.dispositivos.push(dispositivo);\n    return true;\n  }\n\n  addInicio(dispositivo: Dispositivo): void {\n    this.dispositivos.splice(0, 0, dispositivo);\n  }\n\n  isUltimo(dispositivo: Dispositivo): boolean {\n    return this.dispositivos.indexOf(dispositivo) === this.dispositivos.length - 1;\n  }\n\n  getPrimeiro(): Dispositivo {\n    return this.dispositivos[0];\n  }\n\n  getUltimo(): Dispositivo {\n    return this.dispositivos[this.dispositivos.length - 1];\n  }\n\n  getQuantidadeDispositivos(): number {\n    return this.dispositivos.length;\n  }\n\n  getAnterior(i: number): Dispositivo | undefined {\n    if (i < 1) {\n      return undefined;\n    }\n    return this.dispositivos[i - 1];\n  }\n\n  getNumeracaoParaComandoEmenda(): string {\n    let numeracao = this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0]);\n    if (this.dispositivos.length > 1) {\n      numeracao += ' a ' + this.getUltimo().getNumeracaoParaComandoEmenda(this.getUltimo());\n    }\n    return numeracao;\n  }\n\n  print(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    if (this.isRotuloNecessario(ranges)) {\n      this.printRotuloInicio(comando, ranges);\n    } else {\n      comando.append(this.dispositivos[0].getNumeracaoParaComandoEmenda(this.dispositivos[0]));\n    }\n\n    this.printSeparadorProximoDispositivo(comando, ranges);\n\n    this.printRotuloFimSeExistir(comando);\n  }\n\n  private printRotuloFimSeExistir(comando: StringBuilder): void {\n    if (this.dispositivos.length >= 2) {\n      const d = this.dispositivos[this.dispositivos.length - 1];\n      comando.append(d.getNumeracaoParaComandoEmenda(d));\n    }\n  }\n\n  private printSeparadorProximoDispositivo(comando: StringBuilder, ranges: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(ranges);\n\n    if (this.dispositivos.length >= 3) {\n      comando.append(' a ');\n    } else if (this.dispositivos.length === 2 && !rangePosterior) {\n      comando.append(' e ');\n    } else if (this.dispositivos.length > 1 && this.dispositivos.length < 3 && rangePosterior) {\n      comando.append(', ');\n    }\n  }\n\n  private printRotuloInicio(comando: StringBuilder, range: RangeDispositivos[]): void {\n    const rangePosterior = this.getRangeDispositivosPosterior(range);\n    if ((this.hasApenasUmDispositivo() && !rangePosterior) || (rangePosterior && !this.isMesmoTipoSituacao(rangePosterior))) {\n      comando.append(this.getRotuloCompletoSingular(this.dispositivos[0]));\n    } else {\n      comando.append(this.getRotuloCompletoPlural(this.dispositivos[0]));\n    }\n  }\n\n  private isMesmoTipoSituacao(range: RangeDispositivos): boolean {\n    return range.isTipo(this.dispositivos[0].tipo) && range.isSituacao(this.dispositivos[0].situacao.descricaoSituacao);\n  }\n\n  private hasApenasUmDispositivo(): boolean {\n    return this.dispositivos.length === 1;\n  }\n\n  private isRotuloNecessario(ranges: RangeDispositivos[]): boolean {\n    const anterior = this.getRangeDispositivosAnterior(ranges);\n    if (!anterior || !anterior.isMesmoTipoSituacao(this)) {\n      return true;\n    }\n    if (this.isSituacao(DescricaoSituacao.DISPOSITIVO_ADICIONADO) && !this.isMesmoPai(anterior)) {\n      return true;\n    }\n    return false;\n  }\n\n  private isMesmoPai(range: RangeDispositivos): boolean {\n    return this.getPrimeiro().pai === range.getPrimeiro().pai;\n  }\n\n  private getRotuloCompletoSingular(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoSingular);\n    } else {\n      sb.append(' ');\n    }\n    const rotulo = dispositivo.getNumeracaoComRotuloParaComandoEmenda(dispositivo);\n\n    if (rotulo.endsWith('.')) {\n      sb.append(rotulo.substring(0, rotulo.indexOf('.')));\n    } else {\n      sb.append(rotulo);\n    }\n\n    return sb.toString();\n  }\n\n  private getRotuloCompletoPlural(dispositivo: Dispositivo): string {\n    const sb = new StringBuilder();\n    if (dispositivo.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n      sb.append(dispositivo.artigoDefinidoPlural);\n    } else {\n      sb.append(' ');\n    }\n\n    sb.append(this.getTipoDispositivoPlural(dispositivo));\n    sb.append(' ');\n    sb.append(dispositivo.getNumeracaoParaComandoEmenda(dispositivo));\n\n    return sb.toString();\n  }\n\n  private getRangeDispositivosAnterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    const pos = ranges.indexOf(this);\n    if (pos > 0) {\n      return ranges[pos - 1];\n    }\n    return undefined;\n  }\n\n  private getRangeDispositivosPosterior(ranges: RangeDispositivos[]): RangeDispositivos | undefined {\n    if (ranges.length === 1) {\n      return undefined;\n    }\n    const pos = ranges.indexOf(this);\n    if (pos >= 0 && pos < ranges.length - 1) {\n      return ranges[pos + 1];\n    }\n    return undefined;\n  }\n\n  private getTipoDispositivoPlural(dispositivo: Dispositivo): string {\n    if (dispositivo.tipo === TipoDispositivo.artigo.tipo) {\n      return 'arts.';\n    } else if (dispositivo.tipo === TipoDispositivo.paragrafo.tipo) {\n      return '';\n    }\n\n    return dispositivo.descricaoPlural?.toLocaleLowerCase() + '';\n  }\n\n  private podeAdicionarAoRange(atual: Dispositivo): boolean {\n    if (this.isVazio()) {\n      return true;\n    }\n\n    const ultimo = this.getUltimo();\n\n    // Mesmo tipo\n    if (ultimo.tipo !== atual.tipo) {\n      return false;\n    }\n\n    // Mesma situao\n    if (!CmdEmdUtil.isMesmaSituacaoParaComandoEmenda(ultimo, atual)) {\n      return false;\n    }\n\n    // Devem ter o mesmo pai, exceto no caso de artigo\n    if (!isArtigo(atual) && atual.pai !== ultimo.pai) {\n      return false;\n    }\n\n    // Atual segue o ltimo\n    if (getDispositivoPosteriorMesmoTipo(ultimo) !== atual) {\n      return false;\n    }\n\n    if (isAgrupadorNaoArticulacao(atual)) {\n      return CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(ultimo, atual);\n    }\n\n    // Ambos (ltimo e atual) apresentam alterao integral\n    // ou ambos no apresentam alterao integral\n    if (CmdEmdUtil.isAlteracaoIntegral(ultimo) !== CmdEmdUtil.isAlteracaoIntegral(atual)) {\n      return false;\n    }\n\n    return true;\n  }\n\n  isVazio(): boolean {\n    return this.dispositivos.length === 0;\n  }\n\n  toString(): string {\n    const sb = new StringBuilder();\n    this.dispositivos.forEach(d => {\n      sb.append(' ');\n      sb.append('' + d.rotulo);\n    });\n    return sb.toString();\n  }\n\n  getDispositivos(): Dispositivo[] {\n    return this.dispositivos;\n  }\n\n  getDispositivo(i: number): Dispositivo {\n    return this.dispositivos[i];\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { removeFromArray } from '../util/objeto-util';\nimport { StringBuilder } from '../util/string-util';\nimport { RangeDispositivos } from './range-dispositivos';\n\nexport class SequenciaRangeDispositivos {\n  private ranges = new Array<RangeDispositivos>();\n  localizarEmAgrupador = false;\n  informarCaputDoDispositivo = false;\n\n  isVazio(): boolean {\n    return this.ranges.length === 0;\n  }\n\n  add(range: RangeDispositivos): void {\n    this.ranges.push(range);\n  }\n\n  addInicio(range: RangeDispositivos): void {\n    this.ranges.unshift(range);\n  }\n\n  getQuantidadeRanges(): number {\n    return this.ranges.length;\n  }\n\n  getPrimeiroRange(): RangeDispositivos {\n    return this.ranges[0];\n  }\n\n  getPrimeiroDispositivo(): Dispositivo {\n    return this.ranges[0].getPrimeiro();\n  }\n\n  getUltimoDispositivo(): Dispositivo {\n    return this.ranges[this.ranges.length - 1].getUltimo();\n  }\n\n  getRanges(): RangeDispositivos[] {\n    return this.ranges;\n  }\n\n  setRanges(ranges: RangeDispositivos[]): void {\n    this.ranges = ranges;\n  }\n\n  getRange(i: number): RangeDispositivos {\n    return this.ranges[i];\n  }\n\n  getTextoListaDeDispositivos(): string {\n    const sb = new StringBuilder();\n    const qtdRanges = this.ranges.length;\n    let posRange = 1;\n    for (const range of this.ranges) {\n      // Conector\n      if (posRange > 1) {\n        if (posRange === qtdRanges) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      sb.append(range.getNumeracaoParaComandoEmenda());\n\n      posRange++;\n    }\n    return sb.toString();\n  }\n\n  static debug(sequencias: SequenciaRangeDispositivos[]): void {\n    const sb = new StringBuilder();\n    for (const sequencia of sequencias) {\n      sb.append('seq: ' + sequencia);\n    }\n    console.log(sb);\n  }\n\n  toString(): string {\n    return this.ranges.toString();\n  }\n\n  remove(nr: RangeDispositivos): void {\n    removeFromArray(this.ranges, nr);\n  }\n}\n","import { isAgrupador } from './../model/dispositivo/tipo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { getDispositivoPosterior } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from './../model/lexml/tipo/tipoDispositivo';\nimport { removeFromArray } from './../util/objeto-util';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class AgrupadorDispositivosCmdEmd {\n  getSequencias(dispositivos: Dispositivo[]): SequenciaRangeDispositivos[] {\n    const ranges = this.getRanges(dispositivos);\n\n    const sequencias = this.agrupaRanges(ranges);\n\n    // SequenciaRangeDispositivos.debug(sequencias);\n\n    return sequencias;\n  }\n\n  private getRanges(dispositivos: Dispositivo[]): RangeDispositivos[] {\n    let ranges = new Array<RangeDispositivos>();\n\n    let range = new RangeDispositivos();\n    for (const dispositivo of dispositivos) {\n      if (!range.add(dispositivo)) {\n        ranges.push(range);\n        range = new RangeDispositivos();\n        range.add(dispositivo);\n      }\n    }\n\n    if (!range.isVazio()) {\n      ranges.push(range);\n    }\n\n    ranges = AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(ranges);\n\n    return ranges;\n  }\n\n  static separaRangesDeDoisDispositivos(ranges: RangeDispositivos[]): RangeDispositivos[] {\n    const ret = new Array<RangeDispositivos>();\n    for (const range of ranges) {\n      if (range.getQuantidadeDispositivos() === 2) {\n        ret.push(new RangeDispositivos(range.getPrimeiro()));\n        ret.push(new RangeDispositivos(range.getUltimo()));\n      } else {\n        ret.push(range);\n      }\n    }\n    return ret;\n  }\n\n  private separaRangesDeDoisDispositivosEmSequencias(sequencias: SequenciaRangeDispositivos[]): void {\n    for (const s of sequencias) {\n      s.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s.getRanges()));\n    }\n  }\n\n  private agrupaRanges(ranges: RangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    let sequencia = new SequenciaRangeDispositivos();\n    for (const range of ranges) {\n      if (sequencia.isVazio()) {\n        sequencia.add(range);\n        sequencias.push(sequencia);\n      } else {\n        if (this.isMesmaSequencia(sequencia, range)) {\n          sequencia.add(range);\n        } else {\n          sequencia = new SequenciaRangeDispositivos();\n          sequencia.add(range);\n          sequencias.push(sequencia);\n        }\n      }\n    }\n\n    return sequencias;\n  }\n\n  private isMesmaSequencia(sequencia: SequenciaRangeDispositivos, range: RangeDispositivos): boolean {\n    const dispSequencia = sequencia.getPrimeiroDispositivo();\n    const dispRange = range.getUltimo();\n    return (\n      CmdEmdUtil.isMesmoTipoParaComandoEmenda(dispSequencia, dispRange) &&\n      CmdEmdUtil.isMesmaSituacaoParaComandoEmenda(dispSequencia, dispRange) &&\n      (dispSequencia.tipo === TipoDispositivo.artigo.tipo || dispSequencia.pai === dispRange.pai) &&\n      dispSequencia.tipo !== TipoDispositivo.omissis.tipo &&\n      (!isAgrupador(dispSequencia) || CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(sequencia.getUltimoDispositivo(), range.getPrimeiro()))\n    );\n  }\n\n  separaDispositivosSeguidosDeOmissis(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n    for (const s of sequencias) {\n      ret.push(...this.separaDispositivosSeguidosDeOmissis2(s));\n    }\n    return ret;\n  }\n\n  private separaDispositivosSeguidosDeOmissis2(s: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    let ns = new SequenciaRangeDispositivos();\n    ret.push(ns);\n\n    let nr = new RangeDispositivos();\n    ns.add(nr);\n\n    for (const r of s.getRanges()) {\n      if (nr.getQuantidadeDispositivos() > 0) {\n        nr = new RangeDispositivos();\n        ns.add(nr);\n      }\n\n      for (const d of r.getDispositivos()) {\n        // Identifica dispositivo seguido de omissis\n        const posterior = getDispositivoPosterior(d);\n        if (posterior && posterior.tipo === TipoDispositivo.omissis.tipo) {\n          // Quebra em sequncia com apenas este dispositivo\n          if (this.adicionaouDispositivos(ns, nr)) {\n            if (nr.getQuantidadeDispositivos() === 0) {\n              ns.remove(nr);\n            }\n            ns = new SequenciaRangeDispositivos();\n            ret.push(ns);\n            nr = new RangeDispositivos();\n            ns.add(nr);\n          }\n          ns.informarCaputDoDispositivo = true;\n          nr.add(d);\n\n          ns = new SequenciaRangeDispositivos();\n          ret.push(ns);\n          nr = new RangeDispositivos();\n          ns.add(nr);\n        } else {\n          nr.add(d);\n        }\n      }\n    }\n\n    if (nr.getQuantidadeDispositivos() === 0) {\n      ns.remove(nr);\n    }\n    if (ns.getQuantidadeRanges() === 0) {\n      removeFromArray(ret, ns);\n    }\n\n    this.separaRangesDeDoisDispositivosEmSequencias(ret);\n\n    return ret;\n  }\n\n  private adicionaouDispositivos(s: SequenciaRangeDispositivos, r: RangeDispositivos): boolean {\n    return s.getQuantidadeRanges() > 1 || r.getQuantidadeDispositivos() > 0;\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\n/**\n * Representa um comando de emenda que pode ser combinado com outros.\n */\nexport abstract class CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {}\n\n  abstract getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string;\n\n  static compare(c1: CmdEmdCombinavel, c2: CmdEmdCombinavel): number {\n    if (!c1.dispositivos?.length) {\n      return 1;\n    }\n    if (!c2.dispositivos?.length) {\n      return -1;\n    }\n    return DispositivoComparator.compare(c1.dispositivos[0], c2.dispositivos[0]);\n  }\n}\n","import { RangeDispositivos } from './range-dispositivos';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero } from '../model/dispositivo/genero';\nimport { isAgrupador, isAgrupadorNaoArticulacao, isArtigo, isOmissis, isParagrafo } from '../model/dispositivo/tipo';\nimport { isDispositivoAlteracao, isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { TipoDispositivo } from '../model/lexml/tipo/tipoDispositivo';\nimport { primeiraLetraMaiuscula, StringBuilder } from '../util/string-util';\nimport { generoMasculino, generoFeminino } from './../model/dispositivo/genero';\nimport { DescricaoSituacao } from './../model/dispositivo/situacao';\nimport { isArticulacao, isCaput } from './../model/dispositivo/tipo';\nimport { isArticulacaoAlteracao, getDispositivoAnteriorNaSequenciaDeLeitura, getDispositivoPosteriorNaSequenciaDeLeitura } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoEmendaUtil } from './dispositivo-emenda-util';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport enum ArtigoAntesDispositivo {\n  NENHUM,\n  DEFINIDO,\n  DEFINIDO_COM_PREPOSICAO_A,\n}\n\nexport enum TipoReferenciaAgrupador {\n  APENAS_ROTULO,\n  DENOMINACAO_DO_AGRUPADOR, // 'a denominao do/a'\n  TODO_AGRUPADOR, // 'todo/a o/a'\n  O_AGRUPADOR, // 'o agrupador '\n  ADICAO, // Sesso X ' ao ' Captulo Y\n}\n\nexport class DispositivosWriterCmdEmd {\n  public artigoAntesDispositivo = ArtigoAntesDispositivo.NENHUM;\n\n  public tipoReferenciaAgrupador = TipoReferenciaAgrupador.APENAS_ROTULO;\n\n  getTexto(sequencias: SequenciaRangeDispositivos[], citarPais = true): string {\n    const sb = new StringBuilder();\n\n    const qtdSequencias = sequencias.length;\n    let posSequencia = 1;\n    for (const sequencia of sequencias) {\n      // Conector (, ou e)\n      if (posSequencia > 1) {\n        if (posSequencia === qtdSequencias) {\n          sb.append(' e ');\n        } else {\n          sb.append(', ');\n        }\n      }\n\n      const primeiroDispSeq = sequencia.getPrimeiroDispositivo();\n      const primeiroEhAgrupador = isAgrupadorNaoArticulacao(primeiroDispSeq);\n      const referenciarDenominacao = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR && primeiroEhAgrupador;\n      const referenciarTodoAgrupador = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.TODO_AGRUPADOR && primeiroEhAgrupador;\n      const referenciarOAgrupador = this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.O_AGRUPADOR && primeiroEhAgrupador && !!primeiroDispSeq.filhos.length;\n      const posicionarAgrupadores = primeiroEhAgrupador && this.tipoReferenciaAgrupador === TipoReferenciaAgrupador.ADICAO;\n\n      if (sequencia.informarCaputDoDispositivo) {\n        sb.append(this.getReferenciaCaputDoDispositivo(sequencia));\n      } else {\n        // Artigo antes do dispositivo\n        sb.append(this.getTextoArtigoAntesSequencia(sequencia, referenciarDenominacao, referenciarTodoAgrupador, referenciarOAgrupador));\n      }\n\n      // Rtulo do tipo do dispositivo ou denominao\n      if (referenciarDenominacao) {\n        sb.append('denominao ' + primeiroDispSeq.pronomePossessivoSingular + ' ');\n      } else if (referenciarOAgrupador) {\n        sb.append('agrupador ');\n      }\n      sb.append(this.getRotuloTipoDispositivo(sequencia, primeiroEhAgrupador));\n\n      sb.append(' ');\n\n      // Dispositivos\n      sb.append(sequencia.getTextoListaDeDispositivos());\n\n      // Pai dos dispositivos\n      if (citarPais && !posicionarAgrupadores) {\n        sb.append(this.getRotuloPaisSequencia(sequencia));\n      }\n\n      // Escreve posio do agrupador. 'antes ou depois de xxx'\n      if (posicionarAgrupadores) {\n        sb.append(DispositivosWriterCmdEmd.getLocalizacaoAgrupadores(sequencia.getRanges()));\n      }\n\n      posSequencia++;\n    }\n\n    return sb.toString().replace('ementa ', 'ementa');\n  }\n\n  private getReferenciaCaputDoDispositivo(sequencia: SequenciaRangeDispositivos): string {\n    const sb = new StringBuilder();\n\n    const disp = sequencia.getPrimeiroDispositivo();\n\n    if (disp.tipo === TipoDispositivo.caput.tipo) {\n      return this.getTextoArtigoAntesSequencia(sequencia);\n    }\n\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    sb.append(this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, generoMasculino, plural));\n\n    sb.append(' caput ');\n\n    if (sequencia.getRange(0).getQuantidadeDispositivos() === 1) {\n      sb.append(disp.pronomePossessivoSingular);\n    } else {\n      sb.append(disp.pronomePossessivoPlural);\n    }\n\n    return sb.toString();\n  }\n\n  private getTextoArtigoAntesSequencia(\n    sequencia: SequenciaRangeDispositivos,\n    referenciarDenominacao = false,\n    referenciarTodoAgrupador = false,\n    referenciarOAgrupador = false\n  ): string {\n    const primeiro = sequencia.getPrimeiroDispositivo();\n    const genero = referenciarDenominacao ? generoFeminino : referenciarOAgrupador ? generoMasculino : primeiro;\n    const plural = CmdEmdUtil.isSequenciaPlural(sequencia);\n\n    const textoTodo = referenciarTodoAgrupador ? (primeiro.tipoGenero === 'feminino' ? 'toda ' : 'todo ') : '';\n\n    return textoTodo + this.getTextoArtigoAntesDispositivo(this.artigoAntesDispositivo, genero, plural);\n  }\n\n  private getTextoArtigoAntesDispositivo(tipo: ArtigoAntesDispositivo, genero: Genero, plural: boolean): string {\n    switch (tipo) {\n      case ArtigoAntesDispositivo.DEFINIDO:\n        if (plural) {\n          return genero.artigoDefinidoPlural;\n        }\n        return genero.artigoDefinidoSingular;\n      case ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A:\n        if (plural) {\n          return genero.artigoDefinidoPrecedidoPreposicaoAPlural;\n        }\n        return genero.artigoDefinidoPrecedidoPreposicaoASingular;\n      default:\n        return '';\n    }\n  }\n\n  private getRotuloTipoDispositivo(sequencia: SequenciaRangeDispositivos, iniciarComMaiuscula: boolean): string {\n    const disp = sequencia.getPrimeiroDispositivo();\n    const rotulo = DispositivosWriterCmdEmd.getRotuloTipoDispositivo(disp, CmdEmdUtil.isSequenciaPlural(sequencia));\n    return iniciarComMaiuscula ? primeiraLetraMaiuscula(rotulo) : rotulo;\n  }\n\n  static getRotuloTipoDispositivo(disp: Dispositivo, plural: boolean): string {\n    // TODO Verificar melhor forma de identificar que no deve ser impresso o rtulo\n    // do tipo do dispositivo antes do pargrafo nico e do artigo nico.\n    if (disp.getNumeracaoParaComandoEmenda(disp).indexOf('nico') >= 0) {\n      return '';\n    }\n\n    if (plural) {\n      // Plural\n      if (isArtigo(disp)) {\n        return 'arts.';\n      } else if (isParagrafo(disp)) {\n        return '';\n      }\n\n      return String(disp.descricaoPlural).toLocaleLowerCase();\n    }\n\n    // Singular\n    if (isArtigo(disp)) {\n      if (disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO && !CmdEmdUtil.isAlteracaoIntegral(disp)) {\n        return 'caput do art.';\n      }\n      return 'art.';\n    } else if (isParagrafo(disp)) {\n      return '';\n    }\n\n    return String(disp.descricao).toLowerCase();\n  }\n\n  private getRotuloPaisSequencia(sequencia: SequenciaRangeDispositivos): string {\n    return this.getRotuloPais(sequencia.getPrimeiroDispositivo(), sequencia.localizarEmAgrupador);\n  }\n\n  private getRotuloPais(disp: Dispositivo, localizarEmAgrupador: boolean): string {\n    let pai: Dispositivo | undefined;\n\n    const dispOrig = disp;\n\n    if (isAgrupador(disp)) {\n      return DispositivosWriterCmdEmd.getRotuloPaisAgrupador(disp);\n    }\n\n    const sb = new StringBuilder();\n\n    while (!isDispositivoRaiz(disp)) {\n      pai = disp.pai;\n\n      if (pai && isArticulacaoAlteracao(pai)) {\n        if (disp.tipo === TipoDispositivo.omissis.tipo) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          if (anterior.tipo !== TipoDispositivo.alteracao.tipo) {\n            sb.append('aps ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda(anterior));\n            sb.append(this.getRotuloPais(anterior, localizarEmAgrupador));\n            return sb.toString();\n          }\n        }\n        break;\n      }\n\n      if (pai && !isDispositivoRaiz(pai) && (!isAgrupador(pai) || (isArtigo(dispOrig) && localizarEmAgrupador))) {\n        const dispAlteracao = isDispositivoAlteracao(disp);\n        const dispositivoNovoForaDeAlteracao = !dispAlteracao && disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO;\n        const dispositivoNovoEmAlteracao =\n          dispAlteracao &&\n          !CmdEmdUtil.isTextoOmitido(disp) &&\n          disp.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          !DispositivoEmendaUtil.existeNaNormaAlterada(disp);\n        // TODO Tratar diferentes situaes na norma vigente\n        // && StringUtils\n        //         .defaultString(disp.getSituacaoNaNormaVigente())\n        //         .equals(Dispositivo.ACRESCIMO);\n        if (dispositivoNovoForaDeAlteracao || dispositivoNovoEmAlteracao) {\n          sb.append(pai.artigoDefinidoPrecedidoPreposicaoASingular);\n        } else if (isOmissis(disp)) {\n          const anterior = CmdEmdUtil.getDispositivoAnteriorDireto(disp);\n          const posterior = CmdEmdUtil.getDispositivoPosteriorDireto(disp);\n\n          if (anterior === pai && posterior && posterior.pai === pai) {\n            // Entre pai e irmo\n            const refIrmao = posterior.pronomePossessivoSingular + ' ' + posterior.descricao?.toLowerCase() + ' ' + posterior.getNumeracaoParaComandoEmenda(posterior);\n            sb.append('antes ' + refIrmao);\n            sb.append(pai.pronomePossessivoSingular);\n          } else if (!(isArticulacao(anterior) && anterior.pai)) {\n            sb.append('aps ');\n            sb.append(anterior.artigoDefinidoSingular);\n            sb.append(anterior.getNumeracaoComRotuloParaComandoEmenda(anterior));\n            sb.append(this.getRotuloPais(anterior, localizarEmAgrupador));\n            return sb.toString();\n          }\n        } else {\n          sb.append(pai.pronomePossessivoSingular);\n        }\n        sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(pai));\n      } else if (isArtigo(disp) && isDispositivoRaiz(pai!) && localizarEmAgrupador) {\n        const agrupador = CmdEmdUtil.getProximoAgrupador(disp);\n        if (agrupador) {\n          sb.append(' antes ');\n          sb.append(agrupador.pronomePossessivoSingular);\n          sb.append(agrupador.getNumeracaoComRotuloParaComandoEmenda(agrupador));\n        }\n      }\n\n      if (!pai) break;\n      disp = pai;\n    }\n\n    return sb.toString();\n  }\n\n  static getRotuloPaisAgrupador(disp: Dispositivo): string {\n    const sb = new StringBuilder();\n    let pai = disp.pai;\n    while (pai && !isDispositivoRaiz(pai) && !isArticulacao(pai)) {\n      sb.append(' ');\n      sb.append(pai.pronomePossessivoSingular);\n      sb.append(' ');\n      sb.append(pai.getNumeracaoComRotuloParaComandoEmenda(pai));\n      pai = pai.pai;\n    }\n    return sb.toString();\n  }\n\n  static getLocalizacaoAgrupadores(ranges: RangeDispositivos[]): string {\n    const ultimoAgrupador = ranges[ranges.length - 1].getUltimo();\n    const dispositivoSeguinte = getDispositivoPosteriorNaSequenciaDeLeitura(\n      ultimoAgrupador,\n      d => d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO && !isCaput(d) && !isArticulacaoAlteracao(d)\n    );\n    const sb = new StringBuilder();\n    sb.append(' ');\n    if (dispositivoSeguinte) {\n      sb.append('antes ');\n      sb.append(dispositivoSeguinte.pronomePossessivoSingular);\n      sb.append(' ');\n      sb.append(dispositivoSeguinte.getNumeracaoComRotuloParaComandoEmenda(dispositivoSeguinte));\n      if (isAgrupadorNaoArticulacao(dispositivoSeguinte)) {\n        sb.append(DispositivosWriterCmdEmd.getRotuloPaisAgrupador(dispositivoSeguinte));\n      }\n    } else {\n      const primeiroAgrupador = ranges[0].getPrimeiro();\n      const dispositvoAnterior = getDispositivoAnteriorNaSequenciaDeLeitura(primeiroAgrupador, d => isArtigo(d) || isAgrupadorNaoArticulacao(d));\n      if (dispositvoAnterior) {\n        sb.append('aps ');\n        sb.append(dispositvoAnterior.artigoDefinido);\n        sb.append(' ');\n        sb.append(dispositvoAnterior.getNumeracaoComRotuloParaComandoEmenda(dispositvoAnterior));\n        if (isAgrupadorNaoArticulacao(dispositvoAnterior)) {\n          sb.append(DispositivosWriterCmdEmd.getRotuloPaisAgrupador(dispositvoAnterior));\n        }\n      } else {\n        sb.append('!!! localizao no encontrada !!!');\n      }\n    }\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { isArtigo, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdAdicaoANormaVigente extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[], private generoNormaAlterada: Genero, private textoTodos: string) {\n    super(dispositivos);\n  }\n\n  public getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = this.dispositivos.length > 1;\n    if (isPrimeiro) {\n      sb.append(plural ? 'Acrescentem-se ' : 'Acrescente-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'acrescentem-se ' : 'acrescente-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      const ultimaSequencia = sequencias[sequencias.length - 1];\n      const primeiroDaUltimaSequencia = ultimaSequencia.getPrimeiroDispositivo();\n      if (isArtigo(primeiroDaUltimaSequencia) || isAgrupadorNaoArticulacao(primeiroDaUltimaSequencia)) {\n        sb.append(this.generoNormaAlterada.artigoDefinidoPrecedidoPreposicaoASingular);\n      } else {\n        if (this.textoTodos !== '') {\n          sb.append(this.textoTodos);\n        }\n        sb.append(' ');\n        sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      }\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdModificacaoDeNormaVigente extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[], private generoNormaAlterada: Genero, private textoTodos: string) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // pargrafo nico ao art. 15-A da\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.separaDispositivosSeguidosDeOmissis(agrupador.getSequencias(this.dispositivos));\n\n    // Prefixo\n    if (isPrimeiro) {\n      sb.append('D-se nova redao ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append('d-se nova redao ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      if (this.textoTodos !== '') {\n        sb.append(this.textoTodos);\n      }\n      sb.append(' ');\n      sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { Genero, NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdSupressaoDeNormaVigente extends CmdEmdCombinavel {\n  constructor(\n    protected dispositivos: Dispositivo[],\n    private alteracao: Dispositivo,\n    private urnNormaAlterada: string,\n    private generoNormaAlterada: Genero,\n    private textoTodos: string\n  ) {\n    super(dispositivos);\n  }\n\n  public getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Suprimam-se ' : 'Suprima-se ');\n    } else {\n      if (!isPrimeiro) {\n        sb.append(isUltimo ? '; e ' : '; ');\n      }\n      sb.append(plural ? 'suprimam-se ' : 'suprima-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.O_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    if (isUltimo) {\n      if (this.textoTodos !== '') {\n        sb.append(this.textoTodos);\n      }\n      sb.append(' ');\n      sb.append(this.generoNormaAlterada.pronomePossessivoSingular);\n      sb.append(' ');\n    }\n\n    return sb.toString();\n  }\n\n  private escreveDispositivoAlterado(sb: StringBuilder, d: Dispositivo): void {\n    sb.append(d.pronomePossessivoSingular);\n    sb.append(DispositivosWriterCmdEmd.getRotuloTipoDispositivo(d, false));\n    sb.append(' ');\n    sb.append(d.getNumeracaoParaComandoEmenda(d));\n    sb.append(CmdEmdUtil.getRotuloPais(d));\n  }\n}\n","import { hasFilhos } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Alteracoes } from '../model/dispositivo/blocoAlteracao';\nimport { Articulacao, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { generoFeminino, NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isOmissis } from '../model/dispositivo/tipo';\nimport { getGeneroUrnNorma, getNomeExtensoComDataExtenso } from '../model/lexml/documento/urnUtil';\nimport { StringBuilder } from '../util/string-util';\nimport { CmdEmdAdicaoANormaVigente } from './cmd-emd-adicao-a-norma-vigente';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdModificacaoDeNormaVigente } from './cmd-emd-modificacao-de-norma-vigente';\nimport { CmdEmdSupressaoDeNormaVigente } from './cmd-emd-supressao-norma-vigente';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivosWriterCmdEmd } from './dispositivos-writer-cmd-emd';\n\n/**\n * Comando de emenda que trata comandos de alterao de norma vigente.\n */\nexport class CmdEmdDispNormaVigente {\n  constructor(private alteracao: Articulacao) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    const sb = new StringBuilder();\n\n    const dispositivos = CmdEmdUtil.getDispositivosNaAlteracaoParaComando(this.alteracao);\n\n    const urnNormaAlterada = (this.alteracao as Alteracoes).base;\n    if (!urnNormaAlterada) {\n      return 'No foi possvel gerar o comando de emenda porque a norma alterada no foi informada.';\n    }\n\n    const generoNormaAlterada = getGeneroUrnNorma(urnNormaAlterada);\n\n    // let imprimirPrefixoESufixo = false;\n\n    // Combinar comandos\n    const comandos = new Array<CmdEmdCombinavel>();\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n\n    // Consideramos modificados os dispositivos j existentes na proposio e os que foram\n    // adicionados pela emenda, mas que j existiam na norma vigente.\n    const dispositivosModificados = dispositivos.filter(d => CmdEmdUtil.getDescricaoSituacaoParaComandoEmenda(d) === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n\n    // Consideramos adicionados os dispositivos adicionados pela emenda e que no existiam na\n    // norma vigente\n    const dispositivosAdicionados = dispositivos.filter(d => CmdEmdUtil.getDescricaoSituacaoParaComandoEmenda(d) === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n\n    const dispositivosReferenciados = dispositivosSuprimidos.concat(dispositivosModificados).concat(dispositivosAdicionados);\n    const qtdDispositivos = dispositivosReferenciados.length;\n    const temDispositivoMasculino = dispositivosReferenciados.reduce((tem, d) => tem || d.tipoGenero === 'masculino', false);\n    let textoTodos = '';\n    if (qtdDispositivos === 2) {\n      textoTodos = temDispositivoMasculino ? ', ambos' : ', ambas';\n    } else if (qtdDispositivos > 2) {\n      textoTodos = temDispositivoMasculino ? ', todos' : ', todas';\n    }\n\n    if (dispositivosSuprimidos.length) {\n      comandos.push(new CmdEmdSupressaoDeNormaVigente(dispositivosSuprimidos, this.alteracao, urnNormaAlterada, generoNormaAlterada, textoTodos));\n    }\n\n    if (dispositivosModificados.length) {\n      comandos.push(new CmdEmdModificacaoDeNormaVigente(dispositivosModificados, generoNormaAlterada, textoTodos));\n    }\n\n    if (dispositivosAdicionados.length) {\n      comandos.push(new CmdEmdAdicaoANormaVigente(dispositivosAdicionados, generoNormaAlterada, textoTodos));\n    }\n\n    comandos.sort(CmdEmdCombinavel.compare);\n\n    let i = 0;\n    const iUltimo = comandos.length - 1;\n    comandos.forEach(cmd => {\n      sb.append(cmd.getTexto(refGenericaProjeto, i === 0, i === iUltimo));\n      i++;\n    });\n\n    // da/ Lei n 11.340, de 7 de agosto de 2006\n    this.escreveLei(sb, urnNormaAlterada);\n    const temDispositivoNovo = dispositivos.reduce((tem, d) => tem || d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO, false);\n    if (temDispositivoNovo) {\n      // , na forma proposta pelo art. 6 do Projeto\n      if (textoTodos !== '' && !sb.toString().includes(textoTodos)) {\n        sb.append(textoTodos);\n      } else {\n        sb.append(',');\n      }\n      sb.append(' na forma proposta ');\n    } else {\n      // , como propost(o/a)(s)\n      sb.append(', como ');\n      this.escreveProposto(\n        sb,\n        dispositivos.filter(d => !CmdEmdUtil.isTextoOmitido(d) || hasFilhos(d))\n      );\n    }\n    // pelo art. 6 do Projeto\n    sb.append(' ');\n    this.escreveDispositivoAlterado(sb, this.alteracao.pai!);\n    sb.append(' ');\n    sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n    sb.append(' ');\n    sb.append(refGenericaProjeto.nome);\n    if (this.temCitacao(dispositivosModificados, dispositivosAdicionados)) {\n      sb.append(', nos termos a seguir:');\n    } else {\n      sb.append('.');\n    }\n\n    return CmdEmdUtil.normalizaCabecalhoComandoEmenda(sb.toString());\n  }\n\n  private temCitacao(dispositivosModificados: Dispositivo[], dispositivosAdicionados: Dispositivo[]): boolean {\n    if (dispositivosModificados.length) {\n      return true;\n    }\n    return !!dispositivosAdicionados.find(d => !isOmissis(d));\n  }\n\n  private escreveDispositivoAlterado(sb: StringBuilder, d: Dispositivo): void {\n    sb.append('pel' + d.artigoDefinidoSingular.trim());\n    sb.append(' ');\n    sb.append(DispositivosWriterCmdEmd.getRotuloTipoDispositivo(d, false));\n    sb.append(' ');\n    sb.append(d.getNumeracaoParaComandoEmenda(d));\n    sb.append(CmdEmdUtil.getRotuloPais(d));\n  }\n\n  private escreveLei(sb: StringBuilder, urn: string): void {\n    sb.append(getNomeExtensoComDataExtenso(urn));\n  }\n\n  private escreveProposto(sb: StringBuilder, dispositivos: Dispositivo[]): void {\n    const plural = dispositivos.length > 1;\n    const feminino = dispositivos.filter(d => d.tipoGenero === generoFeminino.tipoGenero).length === dispositivos.length;\n    sb.append('propost' + (feminino ? 'a' : 'o') + (plural ? 's' : ''));\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { isArtigo } from '../model/dispositivo/tipo';\nimport { isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { isAgrupador, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { StringBuilder } from './../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\nimport { RangeDispositivos } from './range-dispositivos';\nimport { SequenciaRangeDispositivos } from './sequencia-range-dispositivos';\n\nexport class CmdEmdAdicao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    dispositivos = CmdEmdUtil.retiraPrimeirosFilhosAdicionadosAgrupador(dispositivos);\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Acrescente-se art. 7-A ao Captulo II do Projeto, com a seguinte redao:\n    // Acrescentem-se arts. 7-A e 7-B ao Captulo II do Projeto, com a seguinte redao:\n    // Acrescente-se art. 2-A antes do Captulo I do Projeto, com a seguinte redao:\n    // Acrescentem-se art. 2-A antes do Captulo I e art. 2-B ao Captulo I do Projeto, com a\n    // seguinte redao:\n    // Acrescentem-se pargrafo nico ao art. 1 e pargrafo nico ao art. 2 do Projeto, com a\n    // seguinte redao:\n    // Acrescentem-se  1 e 2 ao art. 1 e  1 e 2 ao art. 2 do Projeto, com a seguinte\n    // redao:\n    // Acrescentem-se  0 ao art. 9, alnea a inciso I do  4 do art. 9 e  8 ao art. 9\n    // do Projeto, com a seguinte redao:\n\n    // Agrupadores de artigo\n    // Acrescentem-se, antes do art. 3 da Medida Provisria, os seguintes Captulos II e III:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    let sequencias = agrupador.getSequencias(this.dispositivos);\n    sequencias = this.trataLocalizacaoEmAgrupador(sequencias);\n\n    if (isPrimeiro && isUltimo && this.trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(sb, refGenericaProjeto, sequencias)) {\n      return sb.toString();\n    }\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Acrescentem-se ' : 'Acrescente-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'acrescentem-se ' : 'acrescente-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.ADICAO;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      const ultimaSequencia = sequencias[sequencias.length - 1];\n      const primeiroDosUltimos = ultimaSequencia.getPrimeiroDispositivo();\n      if (!isArtigo(primeiroDosUltimos) || ultimaSequencia.localizarEmAgrupador) {\n        sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n      } else {\n        sb.append(refGenericaProjeto.genero.artigoDefinidoPrecedidoPreposicaoASingular);\n      }\n      sb.append(refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ', com a seguinte redao:' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n\n  private trataLocalizacaoEmAgrupador(sequencias: SequenciaRangeDispositivos[]): SequenciaRangeDispositivos[] {\n    const ret = new Array<SequenciaRangeDispositivos>();\n\n    for (const sequencia of sequencias) {\n      const primeiro = sequencia.getPrimeiroDispositivo();\n      if (isArtigo(primeiro)) {\n        ret.push(...this.trataLocalizacaoEmAgrupadorSequencia(sequencia));\n      } else {\n        ret.push(sequencia);\n      }\n    }\n\n    return ret;\n  }\n\n  private trataLocalizacaoEmAgrupadorSequencia(sequencia: SequenciaRangeDispositivos): SequenciaRangeDispositivos[] {\n    const sequencias = new Array<SequenciaRangeDispositivos>();\n\n    // Junta todos os artigos/agrupadores dos ranges da sequencia em uma nica lista\n    const dispositivos = new Array<Dispositivo>();\n    for (const range of sequencia.getRanges()) {\n      dispositivos.push(...range.getDispositivos());\n    }\n\n    // Verifica a necessidade de reagrupar\n    let reagrupar = false;\n    for (const disp of dispositivos) {\n      if (this.isInclusaoDeArtigoProximoAAgrupador(disp)) {\n        reagrupar = true;\n        break;\n      }\n    }\n\n    // Se no for necessrio repassa a sequncia como veio\n    if (!reagrupar) {\n      sequencias.push(sequencia);\n      return sequencias;\n    }\n\n    // Vamos reagrup-los em ranges dentro do mesmo pai\n    let s = new SequenciaRangeDispositivos(); // Nova sequncia\n    s.localizarEmAgrupador = true;\n    sequencias.push(s);\n\n    let r = new RangeDispositivos(); // Novo range\n    s.add(r);\n\n    let artAnterior: Dispositivo | undefined = undefined;\n    for (const disp of dispositivos) {\n      if (!r.isVazio()) {\n        if (disp.pai !== (artAnterior as Dispositivo).pai) {\n          s = new SequenciaRangeDispositivos();\n          s.localizarEmAgrupador = true;\n          sequencias.push(s);\n\n          r = new RangeDispositivos();\n          s.add(r);\n        } else if (CmdEmdUtil.getDispositivoIrmaoPosterior(artAnterior as Dispositivo) !== disp) {\n          r = new RangeDispositivos();\n          s.add(r);\n        }\n      }\n\n      r.add(disp);\n\n      artAnterior = disp;\n    }\n\n    // Quebra ranges com 2 dispositivos em duas\n    for (const s2 of sequencias) {\n      s2.setRanges(AgrupadorDispositivosCmdEmd.separaRangesDeDoisDispositivos(s2.getRanges()));\n    }\n\n    return sequencias;\n  }\n\n  private isInclusaoDeArtigoProximoAAgrupador(artigo: Dispositivo): boolean {\n    return this.isInclusaoNoInicioDeAgrupador(artigo) || this.isInclusaoImediatamenteAntesDeAgrupador(artigo);\n  }\n\n  private isInclusaoNoInicioDeAgrupador(artigo: Dispositivo): boolean {\n    // Dentro de agrupador de artigo\n    const pai = artigo.pai as Dispositivo;\n    if (isDispositivoRaiz(pai) || !isAgrupador(pai)) {\n      return false;\n    }\n\n    // Verifica se ele  o primeiro artigo do pai\n    return pai.filhos.indexOf(artigo) === 0;\n  }\n\n  private isInclusaoImediatamenteAntesDeAgrupador(disp: Dispositivo): boolean {\n    // TODO Testar tambm ltimo artigo do projeto seguido de agrupador\n\n    // Verifica se o prximo artigo est no mesmo agrupador\n    const pai = disp.pai;\n    const irmao = CmdEmdUtil.getDispositivoIrmaoPosterior(disp);\n\n    // Se existe prximo artigo com outro pai,  porque existe um agrupador entre eles\n    return !!irmao && pai !== irmao.pai;\n  }\n\n  /*\n  Caso de acrscimo apenas de agrupadores consecutivos:\n\n  Acrescente-se, antes do art. 3 da Medida Provisria, o seguinte Captulo II:\n  Acrescentem-se, antes do art. 3 da Medida Provisria, os seguintes Captulos II e III:\n  Acrescentem-se, antes do art. 3 da Medida Provisria, os seguintes Captulos II a IV:\n  */\n  trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos(sb: StringBuilder, refGenericaProjeto: NomeComGenero, sequencias: SequenciaRangeDispositivos[]): boolean {\n    // console.log(sequencias);\n    const sequencia = sequencias[0];\n    const dispositivo = sequencia.getPrimeiroDispositivo();\n    if (sequencias.length === 1 && isAgrupadorNaoArticulacao(dispositivo)) {\n      // Verifica apenas uma range ou duas ranges de um dispositivo sequenciais.\n      const ranges = sequencia.getRanges();\n      if (\n        ranges.length === 1 ||\n        (ranges.length === 2 &&\n          ranges[0].getDispositivos().length === 1 &&\n          ranges[1].getDispositivos().length === 1 &&\n          CmdEmdUtil.verificaAgrupadoresAdicionadosEmSequencia(ranges[0].getPrimeiro(), ranges[1].getPrimeiro()))\n      ) {\n        const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n        sb.append(plural ? 'Acrescentem-se,' : 'Acrescente-se,');\n        sb.append(DispositivosWriterCmdEmd.getLocalizacaoAgrupadores(ranges));\n        sb.append(refGenericaProjeto.genero.pronomePossessivoSingular);\n        sb.append(' ');\n        sb.append(refGenericaProjeto.nome);\n        sb.append(', ');\n        sb.append(dispositivo.artigoDefinido);\n        sb.append(plural ? 's seguintes ' : ' seguinte ');\n        const dispositivosWriter = new DispositivosWriterCmdEmd();\n        sb.append(dispositivosWriter.getTexto(sequencias, false));\n        sb.append(':');\n        return true;\n      }\n    }\n    return false;\n  }\n}\n","import { isArtigo, isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { removeEspacosDuplicados, StringBuilder } from '../util/string-util';\n\nexport class CmdEmdAdicaoDispositivosOndeCouber {\n  constructor(private dispositivos: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    // \"Acrescente-se, onde couber, no Projeto o seguinte artigo:\"\n    // \"Acrescentem-se, onde couber, no Projeto os seguintes artigos:\"\n\n    if (!this.dispositivos.length) {\n      return '';\n    }\n\n    const strRefProjeto = refGenericaProjeto.genero.contracaoEmArtigoDefinidoSingular + ' ' + refGenericaProjeto.nome;\n\n    const qtdArtigos = this.dispositivos.filter(d => isArtigo(d) && !isAgrupadorNaoArticulacao(d.pai!)).length;\n    const qtdAgrupadores = this.dispositivos.filter(d => isAgrupadorNaoArticulacao(d)).length;\n\n    const sb = new StringBuilder();\n\n    const pluralTodos = qtdArtigos + qtdAgrupadores > 1;\n    if (pluralTodos) {\n      sb.append('Acrescentem-se, onde couber, ' + strRefProjeto + ' '); //os seguintes artigos:';\n    } else {\n      sb.append('Acrescente-se, onde couber, ' + strRefProjeto + ' ');\n    }\n\n    const temArtigos = qtdArtigos > 0;\n    if (temArtigos) {\n      sb.append(pluralTodos ? 'os seguintes ' : 'o seguinte ');\n      sb.append(qtdArtigos > 1 ? 'artigos' : 'artigo');\n    }\n\n    if (qtdAgrupadores > 0) {\n      const agrupador = this.dispositivos.find(d => isAgrupadorNaoArticulacao(d))!;\n      if (temArtigos) {\n        sb.append(' e ');\n        sb.append(qtdAgrupadores > 1 ? agrupador.descricaoPlural?.toLocaleLowerCase() : agrupador.descricao?.toLocaleLowerCase());\n      } else if (qtdAgrupadores > 1) {\n        sb.append(agrupador.artigoDefinidoPlural + ' seguintes ' + agrupador.descricaoPlural?.toLocaleLowerCase());\n      } else {\n        sb.append(agrupador.artigoDefinido + ' seguinte ' + agrupador.descricao?.toLocaleLowerCase());\n      }\n    }\n\n    sb.append(':');\n\n    return removeEspacosDuplicados(sb.toString());\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdModificacao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // D-se ao art. 7-A do Captulo II do Projeto a seguinte redao:\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    if (isPrimeiro) {\n      sb.append('D-se ');\n      if (!isUltimo) {\n        sb.append('nova redao ');\n      }\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append('d-se nova redao ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO_COM_PREPOSICAO_A;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.DENOMINACAO_DO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias).trim());\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? ' a seguinte redao:' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { StringBuilder } from '../util/string-util';\nimport { AgrupadorDispositivosCmdEmd } from './agrupador-dispositivos-cmd-emd';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { ArtigoAntesDispositivo, DispositivosWriterCmdEmd, TipoReferenciaAgrupador } from './dispositivos-writer-cmd-emd';\n\nexport class CmdEmdSupressao extends CmdEmdCombinavel {\n  constructor(protected dispositivos: Dispositivo[]) {\n    super(dispositivos);\n  }\n\n  getTexto(refGenericaProjeto: NomeComGenero, isPrimeiro: boolean, isUltimo: boolean): string {\n    // Suprima-se o  1 do art. 9 do Projeto.\n    // Suprima-se o inciso I do  6 do art. 9 do Projeto.\n    // Suprimam-se os  1 e 2 do art. 9 do Projeto.\n    // Suprimam-se os  1, 3 e 5 do art. 9 do Projeto.\n    // Suprimam-se os  1 a 3 do art. 9 do Projeto.\n    // Suprimam-se os  3, 4 e 7 do art. 9 do Projeto.\n    // Suprimam-se os  1, 3 a 5 e 7 do art. 9 do Projeto.\n    // Suprima-se o pargrafo nico do art. 8 do Projeto.\n    // Suprimam-se os  1, 3 a 5 e o inciso I do  6 do art. 9 do Projeto.\n    // Suprimam-se o inciso IX do caput do art. 2, o art. 3, o pargrafo nico do art. 8 e o\n    // art. 9 do Projeto.\n\n    const sb = new StringBuilder();\n\n    const agrupador = new AgrupadorDispositivosCmdEmd();\n    const sequencias = agrupador.getSequencias(this.dispositivos);\n\n    // Prefixo\n    const plural = CmdEmdUtil.isSequenciasPlural(sequencias);\n    if (isPrimeiro) {\n      sb.append(plural ? 'Suprimam-se ' : 'Suprima-se ');\n    } else {\n      sb.append(isUltimo ? '; e ' : '; ');\n      sb.append(plural ? 'suprimam-se ' : 'suprima-se ');\n    }\n\n    // Dispositivos\n    const dispositivosWriter = new DispositivosWriterCmdEmd();\n    dispositivosWriter.artigoAntesDispositivo = ArtigoAntesDispositivo.DEFINIDO;\n    dispositivosWriter.tipoReferenciaAgrupador = TipoReferenciaAgrupador.TODO_AGRUPADOR;\n    sb.append(dispositivosWriter.getTexto(sequencias));\n\n    // Sufixo\n    if (isUltimo) {\n      sb.append(' ' + refGenericaProjeto.genero.pronomePossessivoSingular + ' ' + refGenericaProjeto.nome);\n      sb.append(isPrimeiro ? '.' : ', nos termos a seguir:');\n    }\n\n    return sb.toString();\n  }\n}\n","import { Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { CmdEmdAdicao } from './cmd-emd-adicao';\nimport { CmdEmdAdicaoDispositivosOndeCouber } from './cmd-emd-adicao-dispositivos-onde-couber';\nimport { CmdEmdCombinavel } from './cmd-emd-combinavel';\nimport { CmdEmdModificacao } from './cmd-emd-modificacao';\nimport { CmdEmdSupressao } from './cmd-emd-supressao';\nimport { CmdEmdUtil } from './comando-emenda-util';\n\n/**\n * Comando de emenda que trata supresso, modificao e adio de dispositivos do projeto.\n */\nexport class CmdEmdDispPrj {\n  constructor(private dispositivosEmenda: Dispositivo[]) {}\n\n  getTexto(refGenericaProjeto: NomeComGenero): string {\n    let texto = '';\n\n    const dispositivos = CmdEmdUtil.getDispositivosComando(this.dispositivosEmenda);\n\n    const artigosOndeCouber = dispositivos.filter(d => {\n      return d.situacao instanceof DispositivoAdicionado && (d.situacao as DispositivoAdicionado).tipoEmenda === ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n    });\n    // Se for caso de artigos onde couber, no pode ter outro tipo de alterao\n    if (artigosOndeCouber.length) {\n      if (artigosOndeCouber.length < dispositivos.length) {\n        throw new Error('Adio de artigos onde couber e outras alteraes na mesma emenda.');\n      }\n\n      const cmd = new CmdEmdAdicaoDispositivosOndeCouber(artigosOndeCouber);\n      return cmd.getTexto(refGenericaProjeto);\n    }\n\n    // Combinar comandos\n    const comandos: CmdEmdCombinavel[] = [];\n\n    const dispositivosSuprimidos = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO);\n    if (dispositivosSuprimidos.length) {\n      comandos.push(new CmdEmdSupressao(dispositivosSuprimidos));\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      comandos.push(new CmdEmdModificacao(dispositivosModificados));\n    }\n\n    const dispositivosAdicionados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO);\n    if (dispositivosAdicionados.length) {\n      comandos.push(new CmdEmdAdicao(dispositivosAdicionados));\n    }\n\n    comandos.sort(CmdEmdCombinavel.compare);\n\n    let i = 0;\n    const iUltimo = comandos.length - 1;\n    comandos.forEach(cmd => {\n      texto += cmd.getTexto(refGenericaProjeto, i === 0, i === iUltimo);\n      i++;\n    });\n\n    return CmdEmdUtil.normalizaCabecalhoComandoEmenda(texto);\n  }\n}\n","import { SubstituicaoTermo } from '../model/emenda/emenda';\nimport { getRefGenericaProjeto } from '../model/lexml/documento/urnUtil';\n\nexport class CmdEmdSubstituicaoTermo {\n  constructor(private substituicaoTermo: SubstituicaoTermo, private urn: string) {}\n\n  private getComplementoFlexoes(flexaoGenero: boolean, flexaoNumero: boolean): string {\n    const flexoes: string[] = [];\n    flexaoGenero && flexoes.push('gnero');\n    flexaoNumero && flexoes.push('nmero');\n    return flexoes.length ? `, fazendo-se as flexes de ${flexoes.join(' e ')} necessrias` : '';\n  }\n\n  getTexto(): string {\n    const { tipo, termo, novoTermo, flexaoGenero, flexaoNumero } = this.substituicaoTermo;\n    const refProjeto = getRefGenericaProjeto(this.urn);\n    const artigoDefinido = tipo.toLowerCase() == 'nmero' ? 'o' : 'a';\n    return `Substitua-se n${refProjeto.genero.artigoDefinido} ${refProjeto.nome} ${artigoDefinido} ${tipo.toLowerCase()} ${termo} por ${novoTermo}${this.getComplementoFlexoes(\n      flexaoGenero,\n      flexaoNumero\n    )}.`;\n  }\n}\n","import { Articulacao, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { NomeComGenero } from '../model/dispositivo/genero';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { ComandoEmenda, ItemComandoEmenda, SubstituicaoTermo } from '../model/emenda/emenda';\nimport { getArticulacao } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { isAgrupadorNaoArticulacao, isArticulacao } from './../model/dispositivo/tipo';\nimport { getRefGenericaProjeto } from './../model/lexml/documento/urnUtil';\nimport { buscaNaHierarquiaDispositivos, isArticulacaoAlteracao, isDispositivoAlteracao } from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { CitacaoComandoDeNormaVigente } from './citacao-cmd-de-norma-vigente';\nimport { CitacaoComandoDispPrj } from './citacao-cmd-disp-prj';\nimport { CmdEmdDispNormaVigente } from './cmd-emd-disp-norma-vigente';\nimport { CmdEmdDispPrj } from './cmd-emd-disp-prj';\nimport { CmdEmdSubstituicaoTermo } from './cmd-emd-substituicao-termo';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { DispositivoComparator } from './dispositivo-comparator';\n\nconst isInstanceOfSubstituicaoTermo = (payload: any = {}): boolean => 'termo' in payload;\n\nexport class ComandoEmendaBuilder {\n  constructor(private urn: string, private payload: Articulacao | SubstituicaoTermo) {}\n\n  getComandoEmenda(): ComandoEmenda {\n    if (isInstanceOfSubstituicaoTermo(this.payload)) {\n      return this.getComandoEmendaSubstituicaoTermo();\n    } else {\n      return this.getComandoEmendaArticulacao();\n    }\n  }\n\n  private getComandoEmendaSubstituicaoTermo(): ComandoEmenda {\n    const ret = new ComandoEmenda();\n    const cmdEmdSubstituicaoTermo = new CmdEmdSubstituicaoTermo(this.payload as SubstituicaoTermo, this.urn);\n    ret.comandos.push(new ItemComandoEmenda(cmdEmdSubstituicaoTermo.getTexto(), ''));\n    return ret;\n  }\n\n  private getComandoEmendaArticulacao(): ComandoEmenda {\n    const articulacao = this.payload as Articulacao;\n    const ret = new ComandoEmenda();\n\n    const dispositivosEmenda = CmdEmdUtil.getDispositivosNaoOriginais(articulacao);\n\n    const list = this.getDispositivosRepresentativosDeCadaComando(dispositivosEmenda);\n    list.sort(DispositivoComparator.compare);\n\n    if (!list.length) {\n      return ret;\n    }\n\n    const refProjeto = getRefGenericaProjeto(this.urn);\n\n    list.forEach(d => {\n      let cabecalho: string;\n      let citacao: string;\n      let complemento: string | undefined = undefined;\n\n      if (isArticulacao(d)) {\n        const cmd = new CmdEmdDispNormaVigente(d as Articulacao);\n        cabecalho = cmd.getTexto(refProjeto);\n\n        const cit = new CitacaoComandoDeNormaVigente();\n        citacao = cit.getTexto(d);\n\n        complemento = this.getTextoComplementoDispAlteracao(d);\n      } else {\n        const cmd = new CmdEmdDispPrj(dispositivosEmenda);\n        cabecalho = cmd.getTexto(refProjeto);\n\n        const cit = new CitacaoComandoDispPrj(articulacao);\n        citacao = cit.getTexto();\n\n        complemento = this.getTextoComplementoDispProposicao(dispositivosEmenda);\n      }\n\n      const item = new ItemComandoEmenda(cabecalho, citacao);\n      if (complemento) {\n        item.complemento = complemento;\n      }\n      ret.comandos.push(item);\n    });\n\n    if (ret.comandos.length > 1) {\n      ret.cabecalhoComum = this.montaCabecalhoComum(refProjeto, ret.comandos.length);\n      ret.comandos.forEach((c, i) => {\n        c.rotulo = `Item ${i + 1} `;\n      });\n    }\n\n    return ret;\n  }\n\n  private getDispositivosRepresentativosDeCadaComando(dispositivosEmenda: Dispositivo[]): Dispositivo[] {\n    const ret: Dispositivo[] = [];\n\n    let temDispositivoDeProjeto = false;\n\n    dispositivosEmenda.forEach(d => {\n      const articulacao = getArticulacao(d);\n      // Separa alteraes\n      if (articulacao && isArticulacaoAlteracao(articulacao)) {\n        if (\n          !ret.includes(articulacao) &&\n          articulacao.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n          articulacao.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n        ) {\n          ret.push(articulacao);\n        }\n      } else if (!temDispositivoDeProjeto) {\n        temDispositivoDeProjeto = true;\n        ret.push(d);\n      }\n    });\n\n    return ret;\n  }\n\n  montaCabecalhoComum(refProjeto: NomeComGenero, qtdItens: number): string {\n    return `D-se nova redao ${refProjeto.genero.artigoDefinidoPrecedidoPreposicaoASingular} ${refProjeto.nome} nos termos dos itens ${this.listarItens(qtdItens)} a seguir.`;\n  }\n\n  listarItens(qtdItens: number): string {\n    return Array(qtdItens)\n      .fill(0)\n      .map((_, i) => i + 1)\n      .join(', ')\n      .replace(/, (\\d+?)$/, ' e $1');\n  }\n\n  getTextoComplementoDispProposicao(dispositivosNaoOriginais: Dispositivo[]): string | undefined {\n    // Complemento renumerao\n    const adicionadosProposicao = dispositivosNaoOriginais.filter(\n      d =>\n        !isDispositivoAlteracao(d) &&\n        d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO &&\n        (d.situacao as DispositivoAdicionado).tipoEmenda !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER &&\n        d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO\n    );\n    if (adicionadosProposicao.length && CmdEmdUtil.verificaNecessidadeRenumeracaoRedacaoFinal(adicionadosProposicao)) {\n      return 'Os dispositivos acima propostos e adjacentes devero ser devidamente renumerados no momento da consolidao das emendas ao texto da proposio pela Redao Final.';\n    }\n\n    return undefined;\n  }\n\n  getTextoComplementoDispAlteracao(articulacao: Dispositivo): string | undefined {\n    // Complemento supresso de agrupador em bloco de alterao\n    const temAgrupadorSuprimido = buscaNaHierarquiaDispositivos(articulacao, d => {\n      return isAgrupadorNaoArticulacao(d) && d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO;\n    });\n\n    if (temAgrupadorSuprimido) {\n      return 'O comando de supresso do agrupador no se refere aos dispositivos a ele subordinados.';\n    }\n\n    return undefined;\n  }\n}\n","import { isAgrupadorNaoArticulacao } from './../model/dispositivo/tipo';\nimport {\n  isDispositivoCabecaAlteracao,\n  isUltimaAlteracao,\n  getDispositivoCabecaAlteracao,\n  getDispositivoAnteriorDireto,\n  getArtigo,\n  isDispositivoAlteracao,\n  getArticulacao,\n} from './../model/lexml/hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../model/dispositivo/dispositivo';\nimport { DescricaoSituacao } from '../model/dispositivo/situacao';\nimport { isArticulacao, isArtigo, isCaput, isOmissis } from '../model/dispositivo/tipo';\nimport {\n  DispositivoEmenda,\n  DispositivoEmendaAdicionado,\n  DispositivoEmendaModificado,\n  DispositivoEmendaSuprimido,\n  DispositivosEmenda,\n  ModoEdicaoEmenda,\n} from '../model/emenda/emenda';\nimport { TEXTO_OMISSIS } from '../model/lexml/conteudo/textoOmissis';\nimport { isArticulacaoAlteracao, isDispositivoRaiz } from '../model/lexml/hierarquia/hierarquiaUtil';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { buildId } from '../model/lexml/util/idUtil';\nimport { CmdEmdUtil } from './comando-emenda-util';\nimport { Alteracoes } from '../model/dispositivo/blocoAlteracao';\n\nexport class DispositivosEmendaBuilder {\n  constructor(private tipoEmenda: ModoEdicaoEmenda, private urn: string, private articulacao: Articulacao) {}\n\n  getDispositivosEmenda(): DispositivosEmenda {\n    const dispositivos = new DispositivosEmenda();\n    this.preencheDispositivos(dispositivos);\n    return dispositivos;\n  }\n\n  private preencheDispositivos(dispositivosEmenda: DispositivosEmenda): void {\n    const dispositivos = CmdEmdUtil.getDispositivosNaoOriginais(this.articulacao);\n\n    const dispositivosSuprimidos = dispositivos.filter(\n      d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_SUPRIMIDO && d.pai!.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_SUPRIMIDO\n    );\n    if (dispositivosSuprimidos.length) {\n      for (const d of dispositivosSuprimidos) {\n        const ds = new DispositivoEmendaSuprimido();\n        ds.tipo = this.getTipoDispositivoParaEmenda(d);\n        ds.id = d.id!;\n        ds.rotulo = d.rotulo;\n        this.addUrnNormaAlteradaSeNecessario(d, ds);\n        dispositivosEmenda.dispositivosSuprimidos.push(ds);\n      }\n    }\n\n    const dispositivosModificados = dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_MODIFICADO);\n    if (dispositivosModificados.length) {\n      for (const d of dispositivosModificados) {\n        const dm = new DispositivoEmendaModificado();\n        if (isArtigo(d)) {\n          const caput = (d as Artigo).caput!;\n          dm.tipo = this.getTipoDispositivoParaEmenda(caput);\n          dm.id = caput.id!;\n          dm.rotulo = d.rotulo;\n          dm.texto = this.trataTexto(caput.texto);\n        } else {\n          dm.tipo = this.getTipoDispositivoParaEmenda(d);\n          dm.id = d.id!;\n          dm.rotulo = d.rotulo;\n          dm.texto = this.trataTexto(d.texto);\n        }\n        if (d.isDispositivoAlteracao) {\n          this.preencheAtributosAlteracao(d, dm);\n        }\n        this.addUrnNormaAlteradaSeNecessario(d, dm);\n        dispositivosEmenda.dispositivosModificados.push(dm);\n      }\n    }\n\n    const dispositivosAdicionados = this.separaAgrupadores(\n      dispositivos.filter(d => d.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO && !this.isDispositivoFilhoDeAdicionado(d))\n    );\n\n    if (dispositivosAdicionados.length) {\n      for (const d of dispositivosAdicionados) {\n        const da = this.criaDispositivoEmendaAdicionado(d);\n        this.addUrnNormaAlteradaSeNecessario(d, da);\n        dispositivosEmenda.dispositivosAdicionados.push(da);\n      }\n    }\n  }\n\n  private separaAgrupadores(disps: Dispositivo[]): Dispositivo[] {\n    const fSeparacao = (d: Dispositivo): Dispositivo[] => {\n      if (d.situacao.descricaoSituacao !== DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n        return [];\n      }\n      if (isAgrupadorNaoArticulacao(d)) {\n        return [d, ...d.filhos.flatMap(f => fSeparacao(f))];\n      }\n      return [d];\n    };\n\n    return disps.flatMap(d => fSeparacao(d));\n  }\n\n  private isDispositivoFilhoDeAdicionado(d: Dispositivo): boolean {\n    return !!(\n      d.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO ||\n      (isCaput(d.pai!) && d.pai!.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) ||\n      (d.isDispositivoAlteracao && isArtigo(d) && d.pai!.pai!.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO)\n    );\n  }\n\n  private criaDispositivoEmendaAdicionado(d: Dispositivo, posicionar = true): DispositivoEmendaAdicionado {\n    const da = new DispositivoEmendaAdicionado();\n\n    da.tipo = this.getTipoDispositivoParaEmenda(d);\n\n    if (!d.id) {\n      d.id = buildId(d);\n    }\n    da.id = d.id;\n\n    if (!isCaput(d) && !isArticulacaoAlteracao(d) && !isOmissis(d)) {\n      da.rotulo = d.rotulo;\n    }\n    if (!isArtigo(d) && !isArticulacaoAlteracao(d)) {\n      da.texto = this.trataTexto(d.texto);\n    }\n\n    if (posicionar) {\n      if (isCaput(d) || isArticulacaoAlteracao(d)) {\n        da.idPai = d.pai?.id;\n      } else if (isAgrupadorNaoArticulacao(d)) {\n        da.idPosicaoAgrupador = this.calculaPosicaoAgrupador(d);\n      } else {\n        const irmaos = CmdEmdUtil.getFilhosEstiloLexML(d.pai!);\n        if (d !== irmaos[0]) {\n          da.idIrmaoAnterior = irmaos[irmaos.indexOf(d) - 1].id;\n        } else if (!isDispositivoRaiz(d.pai!)) {\n          da.idPai = d.pai?.id;\n        }\n      }\n    }\n\n    if (isArticulacaoAlteracao(d)) {\n      const base = (d as Alteracoes).base;\n      if (base) {\n        da.urnNormaAlterada = base;\n      }\n    } else if (d.isDispositivoAlteracao) {\n      da.existeNaNormaAlterada = (d.situacao as DispositivoAdicionado)?.existeNaNormaAlterada;\n      this.preencheAtributosAlteracao(d, da);\n    }\n\n    // Adiciona filhos\n    const filhos = CmdEmdUtil.getFilhosEstiloLexML(d);\n    // TODO - As alteraes deveriam estar listadas nos getFilhosEstiloLexML (tem que rever todo o cdigo que usa esse mtodo)\n    if (isCaput(d) && d.pai!.alteracoes) {\n      filhos.push(d.pai!.alteracoes);\n    }\n    if (filhos.length) {\n      da.filhos = [];\n      filhos.forEach(f => {\n        // Pode ocorrer do filho nao ser um dispositivo adicionado no caso de filho de agrupador de artigo.\n        if (isCaput(f) || isArticulacaoAlteracao(f) || f.situacao.descricaoSituacao === DescricaoSituacao.DISPOSITIVO_ADICIONADO) {\n          da.filhos!.push(this.criaDispositivoEmendaAdicionado(f, false));\n        }\n      });\n    }\n\n    return da;\n  }\n\n  private calculaPosicaoAgrupador(d: Dispositivo): string | undefined {\n    const dPos = getDispositivoAnteriorDireto(d);\n    if (!dPos || isDispositivoRaiz(dPos)) {\n      return undefined;\n    }\n    if (isAgrupadorNaoArticulacao(dPos) || isArtigo(dPos)) {\n      return dPos.id;\n    }\n    return getArtigo(dPos).id;\n  }\n\n  private getTipoDispositivoParaEmenda(d: Dispositivo): string {\n    return isArticulacao(d) ? 'Alteracao' : d.tipo;\n  }\n\n  private preencheAtributosAlteracao(d: Dispositivo, dm: DispositivoEmendaModificado): void {\n    if (!isOmissis(d) && dm.texto && dm.texto.indexOf(TEXTO_OMISSIS) >= 0) {\n      dm.textoOmitido = true;\n    }\n    if (isDispositivoCabecaAlteracao(d)) {\n      dm.abreAspas = true;\n    }\n    if (isUltimaAlteracao(d)) {\n      dm.fechaAspas = true;\n      const cabecaAlteracao = getDispositivoCabecaAlteracao(d);\n      dm.notaAlteracao = cabecaAlteracao.notaAlteracao as any;\n    }\n  }\n\n  private trataTexto(str: string): string {\n    if (str.indexOf(TEXTO_OMISSIS) >= 0) {\n      return TEXTO_OMISSIS;\n    }\n    return str.trim();\n  }\n\n  private addUrnNormaAlteradaSeNecessario(d: Dispositivo, de: DispositivoEmenda): void {\n    if (isDispositivoAlteracao(d)) {\n      const base = getArticulacao(d)?.pai?.alteracoes?.base;\n      if (base) {\n        de.urnNormaAlterada = base;\n      }\n    }\n  }\n}\n","import { isDispositivoAlteracao, isUltimaAlteracao, getDispositivoCabecaAlteracao, isDispositivoCabecaAlteracao } from './../../hierarquia/hierarquiaUtil';\nimport { Articulacao, Artigo, Dispositivo } from '../../../dispositivo/dispositivo';\nimport { isAgrupador, isArtigo, isCaput, isOmissis } from '../../../dispositivo/tipo';\nimport { TEXTO_OMISSIS } from '../../conteudo/textoOmissis';\nimport { buildHref, buildId, buildIdAlteracao } from '../../util/idUtil';\nimport { isNorma, ProjetoNorma } from '../projetoNorma';\n\nexport const buildJsonixFromProjetoNorma = (projetoNorma: ProjetoNorma, urn: string): any => {\n  const resultado = montaCabecalho(urn);\n\n  resultado.value.projetoNorma = montaProjetoNorma(projetoNorma);\n\n  return resultado;\n};\n\nexport const buildJsonixArticulacaoFromProjetoNorma = (articulacaoProjetoNorma: Articulacao): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(articulacaoProjetoNorma, { articulacao: {} }),\n  };\n\n  return articulacao;\n};\n\nconst montaCabecalho = (urn: string): any => {\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'LexML',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}LexML',\n      string: '{http://www.lexml.gov.br/1.0}LexML',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.LexML',\n      metadado: {\n        TYPE_NAME: 'br_gov_lexml__1.Metadado',\n        identificacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n          urn: urn,\n        },\n      },\n    },\n  };\n};\n\nconst montaProjetoNorma = (projetoNorma: any): any => {\n  const p = {\n    TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n  };\n\n  p[isNorma(projetoNorma) ? 'norma' : 'projeto'] = {\n    TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n    parteInicial: montaParteInicial(projetoNorma),\n    articulacao: montaArticulacao(projetoNorma),\n  };\n\n  return p;\n};\n\nconst montaParteInicial = (projetoNorma: any): any => {\n  return {\n    TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n    epigrafe: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'epigrafe',\n      content: projetoNorma.epigrafe,\n    },\n    ementa: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      id: 'ementa',\n      content: projetoNorma.ementa,\n    },\n    preambulo: {\n      TYPE_NAME: 'br_gov_lexml__1.TextoType',\n      id: 'preambulo',\n      p: projetoNorma.preambulo,\n    },\n  };\n};\n\nconst montaArticulacao = (projetoNorma: any): any => {\n  const articulacao = {\n    TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n    lXhier: buildTree(projetoNorma.articulacao, projetoNorma.articulacao),\n  };\n\n  return articulacao;\n};\n\nconst buildTree = (dispositivo: Dispositivo, obj: any): any => {\n  let tree;\n  if (isAgrupador(dispositivo)) {\n    tree = obj.lXhier = [];\n  } else {\n    tree = obj.lXcontainersOmissis = [];\n  }\n\n  if (isArtigo(dispositivo)) {\n    const node = buildNode((dispositivo as Artigo).caput!);\n    buildAlteracaoSeNecessario(dispositivo, node.value);\n\n    tree.push(node);\n\n    buildFilhos(\n      dispositivo.filhos?.filter(f => !isCaput(f.pai!)),\n      tree\n    );\n\n    buildTree((dispositivo as Artigo).caput!, node.value);\n  } else {\n    buildFilhos(dispositivo.filhos, tree);\n  }\n\n  return tree;\n};\n\nconst buildAlteracaoSeNecessario = (dispositivo: Dispositivo, node: any): void => {\n  if (dispositivo.hasAlteracao()) {\n    node['alteracao'] = {\n      TYPE_NAME: 'br_gov_lexml__1.Alteracao',\n      base: '',\n      id: '',\n      content: [],\n    };\n\n    node.alteracao.base = dispositivo.alteracoes?.base ?? '';\n    node.alteracao.id = buildIdAlteracao((dispositivo as Artigo).caput!);\n\n    dispositivo.alteracoes!.filhos?.forEach(filho => {\n      const n = buildNode(filho);\n\n      node.alteracao.content.push(n);\n\n      buildTree(filho, n.value);\n    });\n  }\n};\n\nconst buildFilhos = (filhos: Dispositivo[], tree: any): any => {\n  filhos?.forEach(filho => {\n    const node = buildNode(filho);\n    tree.push(node);\n\n    buildTree(filho, node.value);\n  });\n};\n\nconst buildNode = (dispositivo: Dispositivo): any => {\n  const node = {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: dispositivo.tipo,\n      prefix: '',\n      key: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n      string: `{http://www.lexml.gov.br/1.0}${dispositivo.tipo}`,\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n    },\n  };\n\n  buildDispositivo(dispositivo, node.value);\n\n  return node;\n};\n\nconst buildDispositivo = (dispositivo: Dispositivo, value: any): void => {\n  value['href'] = isCaput(dispositivo) ? buildHref(dispositivo.pai!) + '_' + buildHref(dispositivo) : buildHref(dispositivo);\n\n  value['id'] = buildId(dispositivo);\n\n  if (isDispositivoCabecaAlteracao(dispositivo)) {\n    value['abreAspas'] = 's';\n    value.rotulo = dispositivo.rotulo;\n  } else if (!isCaput(dispositivo) && !isOmissis(dispositivo)) {\n    value.rotulo = dispositivo.rotulo;\n  }\n\n  const dispositivoTemp = isCaput(dispositivo) ? dispositivo.pai! : dispositivo;\n  if (isDispositivoAlteracao(dispositivoTemp) && isUltimaAlteracao(dispositivoTemp)) {\n    value['fechaAspas'] = 's';\n    const cabecaAlteracao = getDispositivoCabecaAlteracao(dispositivoTemp);\n    value['notaAlteracao'] = cabecaAlteracao.notaAlteracao || 'NR';\n  }\n\n  if (isAgrupador(dispositivo)) {\n    value.nomeAgrupador = {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      content: buildContent(dispositivo),\n    };\n  } else if (!isArtigo(dispositivo)) {\n    if (dispositivo.texto === TEXTO_OMISSIS) {\n      value['textoOmitido'] = 's';\n    } else {\n      value['p'] = [{ TYPE_NAME: 'br_gov_lexml__1.GenInline', content: buildContent(dispositivo) }];\n    }\n  }\n};\n\nconst buildContent = (dispositivo: Dispositivo): any[] => {\n  const regex = /<a[^>]+href=\"(.*?)\"[^>]*>(.*?)<\\/a>/gi;\n  const result: any[] = [];\n\n  const ocorrencias = dispositivo.texto.match(regex);\n\n  if (!ocorrencias) {\n    const fim = dispositivo.texto.indexOf(' (NR)');\n    result.push(dispositivo.texto.substring(0, fim === -1 ? undefined : fim));\n  } else if (!dispositivo.texto.startsWith(ocorrencias[0])) {\n    result.push(dispositivo.texto.substring(0, dispositivo.texto.indexOf(ocorrencias![0])));\n  }\n\n  ocorrencias?.forEach((m, i) => {\n    const http = m.match(regex) ? m : '';\n\n    result.push(buildSpan(http ?? ''));\n\n    const from = dispositivo.texto?.indexOf(m) + m.length;\n\n    if (from < dispositivo.texto.length - 1) {\n      const to = ocorrencias[i + 1] ? dispositivo.texto.indexOf(ocorrencias[i + 1]) : dispositivo.texto.length;\n      result.push(\n        dispositivo.texto\n          .substring(from, to)\n          ?.replace(/strong>/gi, 'b>')\n          .replace(/em>/gi, 'i>')\n      );\n    }\n  });\n  return result;\n};\n\nconst buildSpan = (m: string): any => {\n  const resultHref = m.match(/href=\"(.*?)\"*>/i);\n  const href = resultHref && resultHref[1] ? resultHref[1] : '';\n\n  const contentHref = m.match(/<a[^>]+href=\".*?\"[^>]*>(.*?)<\\/a>/);\n  const content = contentHref && contentHref[1] ? [contentHref[1]?.trim()] : [''];\n\n  return {\n    name: {\n      namespaceURI: 'http://www.lexml.gov.br/1.0',\n      localPart: 'span',\n      prefix: '',\n      key: '{http://www.lexml.gov.br/1.0}span',\n      string: '{http://www.lexml.gov.br/1.0}span',\n    },\n    value: {\n      TYPE_NAME: 'br_gov_lexml__1.GenInline',\n      href,\n      content,\n    },\n  };\n};\n","export const DOCUMENTO_PADRAO = {\n  name: {\n    namespaceURI: 'http://www.lexml.gov.br/1.0',\n    localPart: 'LexML',\n    prefix: '',\n    key: '{http://www.lexml.gov.br/1.0}LexML',\n    string: '{http://www.lexml.gov.br/1.0}LexML',\n  },\n  value: {\n    TYPE_NAME: 'br_gov_lexml__1.LexML',\n    metadado: {\n      TYPE_NAME: 'br_gov_lexml__1.Metadado',\n      identificacao: {\n        TYPE_NAME: 'br_gov_lexml__1.Identificacao',\n        urn: '',\n      },\n    },\n    projetoNorma: {\n      TYPE_NAME: 'br_gov_lexml__1.ProjetoNorma',\n      norma: {\n        TYPE_NAME: 'br_gov_lexml__1.HierarchicalStructure',\n        parteInicial: {\n          TYPE_NAME: 'br_gov_lexml__1.ParteInicial',\n          epigrafe: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'epigrafe',\n            content: [''],\n          },\n          ementa: {\n            TYPE_NAME: 'br_gov_lexml__1.GenInline',\n            id: 'ementa',\n            content: [''],\n          },\n          preambulo: {\n            TYPE_NAME: 'br_gov_lexml__1.TextoType',\n            id: 'preambulo',\n            p: [\n              {\n                TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                content: [''],\n              },\n            ],\n          },\n        },\n        articulacao: {\n          TYPE_NAME: 'br_gov_lexml__1.Articulacao',\n          lXhier: [\n            {\n              name: {\n                namespaceURI: 'http://www.lexml.gov.br/1.0',\n                localPart: 'Artigo',\n                prefix: '',\n                key: '{http://www.lexml.gov.br/1.0}Artigo',\n                string: '{http://www.lexml.gov.br/1.0}Artigo',\n              },\n              value: {\n                TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                id: 'art1',\n                rotulo: 'Art. 1',\n                lXcontainersOmissis: [\n                  {\n                    name: {\n                      namespaceURI: 'http://www.lexml.gov.br/1.0',\n                      localPart: 'Caput',\n                      prefix: '',\n                      key: '{http://www.lexml.gov.br/1.0}Caput',\n                      string: '{http://www.lexml.gov.br/1.0}Caput',\n                    },\n                    value: {\n                      TYPE_NAME: 'br_gov_lexml__1.DispositivoType',\n                      id: 'art1_cpt',\n                      p: [\n                        {\n                          TYPE_NAME: 'br_gov_lexml__1.GenInline',\n                          content: [''],\n                        },\n                      ],\n                    },\n                  },\n                ],\n              },\n            },\n          ],\n        },\n      },\n    },\n  },\n};\n","import { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\n\nimport { shoelaceLightThemeStyles } from '../assets/css/shoelace.theme.light.css';\nimport { ComandoEmendaBuilder } from '../emenda/comando-emenda-builder';\nimport { DispositivosEmendaBuilder } from '../emenda/dispositivos-emenda-builder';\nimport { ClassificacaoDocumento } from '../model/documento/classificacao';\nimport { ComandoEmenda, ModoEdicaoEmenda } from '../model/emenda/emenda';\nimport { aplicarAlteracoesEmendaAction } from '../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { openArticulacaoAction } from '../model/lexml/acao/openArticulacaoAction';\nimport { buildJsonixArticulacaoFromProjetoNorma } from '../model/lexml/documento/conversor/buildJsonixFromProjetoNorma';\nimport { buildProjetoNormaFromJsonix } from '../model/lexml/documento/conversor/buildProjetoNormaFromJsonix';\nimport { DOCUMENTO_PADRAO } from '../model/lexml/documento/modelo/documentoPadrao';\nimport { DispositivoAdicionado } from '../model/lexml/situacao/dispositivoAdicionado';\nimport { DispositivosEmenda } from './../model/emenda/emenda';\nimport { ProjetoNorma } from './../model/lexml/documento/projetoNorma';\nimport { rootStore } from './../redux/store';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { Revisao } from '../model/revisao/revisao';\n\n@customElement('lexml-eta')\nexport class LexmlEtaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Object }) lexmlEtaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  private modo: any = '';\n\n  private urn = '';\n\n  private projetoNorma?: any;\n\n  private dispositivosEmenda: DispositivosEmenda | undefined;\n  private revisoes: Revisao[] | undefined;\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  inicializarEdicao(modo: string, urn: string, projetoNorma?: ProjetoNorma, preparaAberturaEmenda = false): void {\n    this.modo = modo;\n    this.urn = urn;\n    if (projetoNorma) {\n      this.projetoNorma = projetoNorma;\n    }\n    this.loadProjetoNorma(preparaAberturaEmenda);\n    document.querySelector('lexml-eta-articulacao')!['style'].display = 'block';\n  }\n\n  getDispositivosEmenda(): DispositivosEmenda | undefined {\n    if (this.modo !== ClassificacaoDocumento.EMENDA && this.modo !== ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER) {\n      return undefined;\n    }\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new DispositivosEmendaBuilder(this.modo, this.urn, articulacao).getDispositivosEmenda();\n  }\n\n  setDispositivosERevisoesEmenda(dispositivosEmenda: DispositivosEmenda | undefined, revisoes?: Revisao[]): void {\n    this.revisoes = revisoes;\n    if (dispositivosEmenda) {\n      this.dispositivosEmenda = dispositivosEmenda;\n      this.loadEmenda();\n    }\n  }\n\n  getComandoEmenda(): ComandoEmenda {\n    const articulacao = rootStore.getState().elementoReducer.articulacao;\n    return new ComandoEmendaBuilder(this.urn, articulacao).getComandoEmenda();\n  }\n\n  getProjetoAtualizado(): any {\n    const out = { ...this.projetoNorma };\n    const articulacaoAtualizada = buildJsonixArticulacaoFromProjetoNorma(rootStore.getState().elementoReducer.articulacao);\n    (out as any).value.projetoNorma[(out as any).value.projetoNorma.norma ? 'norma' : 'projeto'].articulacao.lXhier = articulacaoAtualizada.lXhier;\n    return out;\n  }\n\n  private loadProjetoNorma(preparaAberturaEmenda: boolean): void {\n    let documento;\n\n    if (!this.projetoNorma || !this.projetoNorma.value) {\n      this.projetoNorma = DOCUMENTO_PADRAO;\n    }\n\n    if (this.modo === ModoEdicaoEmenda.EMENDA_ARTIGO_ONDE_COUBER) {\n      documento = buildProjetoNormaFromJsonix(DOCUMENTO_PADRAO, true);\n      const artigo = documento.articulacao!.artigos[0]!;\n      artigo.rotulo = 'Art.';\n      artigo.numero = '1';\n      artigo.id = 'art1';\n      const situacao = new DispositivoAdicionado();\n      situacao.tipoEmenda = ClassificacaoDocumento.EMENDA_ARTIGO_ONDE_COUBER;\n      artigo.situacao = situacao;\n\n      // Se estiver abrindo emenda, remove artigo inicial do documento padro\n      if (preparaAberturaEmenda) {\n        documento.articulacao.removeFilho(documento.articulacao.filhos[0]);\n      }\n    } else {\n      documento = buildProjetoNormaFromJsonix(this.projetoNorma, this.modo === ClassificacaoDocumento.EMENDA);\n    }\n\n    documento.urn = this.urn;\n\n    document.querySelector('lexml-emenda')?.querySelector('sl-tab')?.click();\n    rootStore.dispatch(openArticulacaoAction(documento.articulacao!, this.modo));\n  }\n\n  private _timerLoadEmenda = 0;\n  private loadEmenda(): void {\n    if (this.dispositivosEmenda) {\n      clearInterval(this._timerLoadEmenda);\n      this._timerLoadEmenda = window.setTimeout(() => {\n        rootStore.dispatch(aplicarAlteracoesEmendaAction.execute(this.dispositivosEmenda!, this.revisoes));\n      }, 1000);\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${shoelaceLightThemeStyles}\n      <style>\n        #gtx-trans {\n          display: block;\n        }\n\n        lexml-eta-articulacao {\n          display: none;\n          height: 100%;\n        }\n\n        lexml-eta-articulacao:focus {\n          outline: 0;\n          border: 0px solid #f1f1f1;\n          -webkit-box-shadow: 0px;\n          box-shadow: none;\n        }\n      </style>\n      <lexml-eta-articulacao .lexmlEtaConfig=${this.lexmlEtaConfig}></lexml-eta-articulacao>\n    `;\n  }\n}\n","import { Parlamentar } from '../emenda/emenda';\n\nexport const incluirParlamentar = (parlamentares: Parlamentar[], parlamentar: Parlamentar): Parlamentar[] => {\n  const novoArray = [...parlamentares];\n  novoArray.push(parlamentar);\n  return novoArray;\n};\n\nexport const excluirParlamentar = (parlamentares: Parlamentar[], index: number): Parlamentar[] => {\n  const novoArray = [...parlamentares];\n  novoArray.splice(index, 1);\n  return novoArray;\n};\n\nexport const moverParlamentar = (parlamentares: Parlamentar[], index: number, deslocamento: number): Parlamentar[] => {\n  const newIndex = index + deslocamento;\n\n  if (newIndex < 0 || newIndex >= parlamentares.length) {\n    return parlamentares;\n  }\n\n  const novoArray = [...parlamentares];\n  novoArray.splice(newIndex, 0, novoArray.splice(index, 1)[0]);\n  return novoArray;\n};\n","import { css } from 'lit';\nexport const autoriaCss = css`\n  .lexml-autoria {\n    display: block;\n    font-size: var(--sl-font-size-small);\n    font-family: var(--sl-font-sans);\n    max-width: 700px;\n  }\n\n  .lexml-autocomplete {\n    width: 100%;\n  }\n\n  .grid-autoria {\n    display: grid;\n    grid-template-columns: 3fr 2fr 250px;\n  }\n\n  .autoria-grid {\n    display: flex;\n    flex-direction: row;\n    align-items: flex-start;\n    width: 100%;\n    padding: 0 0 4px 0;\n    flex-wrap: wrap;\n  }\n\n  .autoria-grid--col1 {\n    flex: none;\n    order: 0;\n    flex-grow: 1;\n  }\n\n  .autoria-grid--col2 {\n    flex: none;\n    order: 1;\n    flex-grow: 1;\n  }\n\n  .autoria-grid--col3 {\n    flex: none;\n    order: 2;\n    flex-grow: 1;\n  }\n\n  [class^='autoria-grid--'] {\n    margin: 0px 2px;\n  }\n\n  .autoria-grid:first-child {\n    padding: 0 0 2px 0;\n  }\n\n  .autoria-header {\n    width: 180px;\n    padding: 0px 2px;\n  }\n\n  .autoria-buttons {\n    width: 124px;\n    text-align: right;\n  }\n\n  .autoria-input {\n    width: 100%;\n    margin: 0px;\n  }\n\n  .autoria-button {\n    background-color: white;\n    border: 1px solid #555;\n    border-radius: 2px;\n    padding: 2px 4px;\n    cursor: pointer;\n  }\n\n  .autoria-label {\n    display: none;\n  }\n\n  .autoria-icon {\n    background-color: #555;\n  }\n\n  .icon-up {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z'/></svg>\");\n  }\n\n  .icon-down {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/></svg>\");\n  }\n\n  .icon-delete {\n    display: block;\n    width: 24px;\n    height: 24px;\n    -webkit-mask-position-y: 1px;\n    -webkit-mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>\");\n    mask-image: url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' class='autoria-iccm' viewBox='0 0 16 16'><path d='M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z'/><path fill-rule='evenodd' d='M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z'/></svg>\");\n  }\n\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip: rect(0, 0, 0, 0);\n    white-space: nowrap;\n    border-width: 0;\n  }\n\n  .assinaturas-adicionais {\n    padding-top: 10px;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    vertical-align: center;\n    gap: 10px;\n  }\n\n  .assinaturas-adicionais div {\n    padding-top: 5px;\n  }\n\n  .assinaturas-adicionais .autoria-input {\n    display: block;\n    max-width: 400px;\n  }\n\n  @media (max-width: 576px) {\n    .autoria-grid {\n      flex-direction: column;\n    }\n\n    .autoria-labels {\n      display: none;\n    }\n    .autoria-label {\n      display: block;\n    }\n\n    .autoria-buttons {\n      width: calc(100% - 3px);\n    }\n\n    .autoria-input {\n      width: calc(100% - 2px);\n    }\n\n    [class^='autoria-grid--'] {\n      width: 100%;\n      padding: 2px 0;\n    }\n  }\n`;\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, state, query, queryAll } from 'lit/decorators.js';\n\nimport { REGEX_ACCENTS } from './../../util/string-util';\nimport { Parlamentar, Autoria } from '../../model/emenda/emenda';\nimport { incluirParlamentar, excluirParlamentar, moverParlamentar } from '../../model/autoria/parlamentarUtil';\nimport { autoriaCss } from '../../assets/css/autoria.css';\nimport { LexmlAutocomplete } from '../lexml-autocomplete';\n\nconst parlamentarVazio = new Parlamentar();\n\n// Decorator para aguardar fim da validao para executar um mtodo\nfunction executarAposValidacao(interval = 200) {\n  return function (_target: unknown, key: string | symbol, descriptor: PropertyDescriptor): any {\n    return {\n      get(): any {\n        const wrapperFn = (...args: any[]): any => {\n          let timer = 0;\n\n          const executarMetodo = (): void => {\n            clearInterval(timer);\n            if (this['_isProcessandoValidacao']) {\n              timer = window.setTimeout(() => executarMetodo(), interval);\n              return;\n            }\n\n            descriptor.value.apply(this, args);\n          };\n\n          executarMetodo();\n        };\n\n        Object.defineProperty(this, key, { value: wrapperFn, configurable: true, writable: true });\n\n        return wrapperFn;\n      },\n    };\n  };\n}\n\n@customElement('lexml-autoria')\nexport class AutoriaComponent extends LitElement {\n  static styles = [autoriaCss];\n\n  @query('#btnNovoParlamentar')\n  private _btnNovoParlamentar!: HTMLButtonElement;\n\n  @queryAll('input#tex-cargo')\n  private _inputCargos!: NodeListOf<HTMLInputElement>;\n\n  @queryAll('lexml-autocomplete')\n  private _autocompletes!: NodeListOf<LexmlAutocomplete>;\n\n  @state()\n  private _nomesAutocomplete: string[] = [];\n\n  @state()\n  private _podeIncluirParlamentar = true;\n\n  private _parlamentaresAutocomplete: Parlamentar[] = [];\n  @property({ type: Array })\n  set parlamentares(value: Parlamentar[]) {\n    const oldValue = this._parlamentaresAutocomplete;\n    this._parlamentaresAutocomplete = value;\n    this._nomesAutocomplete = value.map(p => p.nome);\n    this.requestUpdate('parlamentares', oldValue);\n  }\n\n  get parlamentares(): Parlamentar[] {\n    return this._parlamentaresAutocomplete;\n  }\n\n  private _autoriaOriginal?: Autoria;\n  private _autoria!: Autoria;\n  @property({ type: Object })\n  set autoria(value: Autoria | undefined) {\n    const oldValue = this._autoriaOriginal;\n    this._autoriaOriginal = value;\n\n    this._autoria = value ? { ...value, parlamentares: [...value.parlamentares] } : new Autoria();\n    if (!this._autoria.parlamentares.length) {\n      this._autoria.parlamentares = [{ ...parlamentarVazio }];\n    }\n\n    this._podeIncluirParlamentar = this._isAllAutoresOk();\n    this.requestUpdate('autoria', oldValue);\n  }\n\n  get autoria(): Autoria | undefined {\n    return this._autoriaOriginal;\n  }\n\n  getAutoriaAtualizada(): Autoria {\n    return { ...this._autoria, parlamentares: this._autoria.parlamentares.filter(p => p.identificacao) };\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        fieldset {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5em;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n          border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n          border-radius: var(--sl-border-radius-medium);\n          max-width: 655px;\n          margin: 1em 0 2em 0;\n        }\n        legend {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold !important;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n        sl-button {\n          width: fit-content;\n        }\n      </style>\n      <fieldset>\n        <legend>Autoria</legend>\n        ${this._getTipoAutoriaTemplate()}\n        <div class=\"autoria-list\">${this._getParlamentaresTemplate()}</div>\n        <sl-button id=\"btnNovoParlamentar\" variant=\"primary\" @click=${this._incluirNovoParlamentar} ?disabled=${!this._podeIncluirParlamentar}>\n          Incluir ${this._autoria?.parlamentares.length ? 'outro' : ''} parlamentar\n        </sl-button>\n\n        ${this._getAssinaturasAdicionaisTemplate()}\n\n        <div class=\"assinaturas-adicionais\">\n          <label>\n            <input type=\"checkbox\" id=\"chk-exibir-partido-uf\" ?checked=${this._autoria?.imprimirPartidoUF} @input=${(ev: Event): void => this._atualizarExibirPartidoUF(ev)} />\n            Imprimir partido e UF para os signatrios\n          </label>\n        </div>\n      </fieldset>\n    `;\n  }\n\n  private _exibirTemplateTipoAutoria = false; // varivel temporria\n  private _getTipoAutoriaTemplate(): TemplateResult {\n    return !this._exibirTemplateTipoAutoria\n      ? html`<div></div>`\n      : html`\n          <fieldset class=\"autoria-label--tipo-autoria\">\n            <legend>Tipo de autoria</legend>\n            <div class=\"control\">\n              <label class=\"radio\">\n                <input type=\"radio\" id=\"opt-parlamentar\" name=\"tipoAutoria\" value=\"Parlamentar\" ?checked=${this._autoria?.tipo === 'Parlamentar'} />\n                Parlamentar\n              </label>\n              <label class=\"radio\">\n                <input type=\"radio\" id=\"opt-comissao\" name=\"tipoAutoria\" value=\"Comisso\" ?checked=${this._autoria?.tipo === 'Comisso'} />\n                Comisso\n              </label>\n            </div>\n          </fieldset>\n        `;\n  }\n\n  private _getParlamentaresTemplate(): TemplateResult {\n    return html`\n      <div class=\"autoria-grid autoria-labels\">\n        <div class=\"autoria-grid--col1\"><div class=\"autoria-header\">Parlamentar</div></div>\n        <div class=\"autoria-grid--col2\"><div class=\"autoria-header\">Cargo</div></div>\n        <div class=\"autoria-grid--col3\"><div class=\"autoria-buttons\"></div></div>\n      </div>\n      ${this._autoria?.parlamentares.map((_, index) => this._getParlamentarAutocompleteTemplate(index))}\n    `;\n  }\n\n  private _getParlamentarAutocompleteTemplate(index: number): TemplateResult {\n    return html`\n      <div class=\"autoria-grid\">\n        <div class=\"autoria-grid--col1\">\n          <label for=\"defaultInput\" class=\"autoria-label\">Parlamentar</label>\n          <lexml-autocomplete\n            class=\"lexml-autocomplete\"\n            .items=${this._nomesAutocomplete}\n            value=${this._autoria.parlamentares[index].nome}\n            @input=${(ev: Event): void => this._validarNomeParlamentar(ev, index)}\n            @blur=${(ev: Event): void => this._validarNomeParlamentar(ev, index)}\n            @autocomplete=${(ev: CustomEvent): void => this._atualizarParlamentar(ev, index)}\n            @keyup=${(ev: KeyboardEvent): void => this._handleKeyUp(ev, index)}\n            @click=${this._handleClickAutoComplete}\n          ></lexml-autocomplete>\n        </div>\n\n        <div class=\"autoria-grid--col2\">\n          <label for=\"tex-cargo\" class=\"autoria-label\">Cargo</label>\n          <sl-input\n            type=\"text\"\n            id=\"tex-cargo\"\n            placeholder=\"ex: Presidente da Comisso ..., Lder do ...\"\n            class=\"autoria-input\"\n            aria-label=\"Cargo\"\n            size=\"small\"\n            .value=${this._autoria.parlamentares[index].cargo ?? ''}\n            @input=${(ev: Event): void => this._atualizarCargo(ev, index)}\n            @keyup=${(ev: KeyboardEvent): void => this._handleKeyUp(ev, index)}\n          ></sl-input>\n        </div>\n\n        <div class=\"autoria-grid--col3\">\n          <div class=\"autoria-buttons\">\n            <sl-button\n              id=\"paraBaixo\"\n              size=\"small\"\n              aria-label=\"Para baixo\"\n              title=\"Para baixo\"\n              @click=${(): void => this._moverParlamentar(index, 1)}\n              .disabled=${index === this._autoria.parlamentares.length - 1 ? true : false}\n            >\n              <sl-icon name=\"arrow-down\"></sl-icon>\n            </sl-button>\n            <sl-button\n              id=\"paraCima\"\n              size=\"small\"\n              aria-label=\"Para cima\"\n              title=\"Para cima\"\n              @click=${(): void => this._moverParlamentar(index, -1)}\n              .disabled=${index === 0 ? true : false}\n            >\n              <sl-icon name=\"arrow-up\"></sl-icon>\n            </sl-button>\n            <sl-button\n              id=\"excluir\"\n              size=\"small\"\n              aria-label=\"Excluir\"\n              title=\"Excluir\"\n              @click=${(): void => this._excluirParlamentar(index)}\n              .disabled=${this._autoria.parlamentares.length === 1 ? true : false}\n            >\n              <sl-icon name=\"trash\"></sl-icon>\n            </sl-button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private _getAssinaturasAdicionaisTemplate(): TemplateResult {\n    return html`\n      <div class=\"assinaturas-adicionais\">\n        <sl-input\n          label=\"Quantidade de assinaturas adicionais de Senadores\"\n          type=\"number\"\n          id=\"num-assinaturas-adicionais-senadores\"\n          class=\"autoria-input\"\n          aria-label=\"Assinaturas Adicionais Senadores\"\n          size=\"small\"\n          .value=${this._autoria?.quantidadeAssinaturasAdicionaisSenadores.toString() ?? '0'}\n          @input=${(ev: Event): void => this._atualizarQtdAssinaturasAdicionaisSenadores(ev)}\n        ></sl-input>\n        <sl-input\n          label=\"Quantidade de assinaturas adicionais de Deputados Federais\"\n          type=\"number\"\n          id=\"num-assinaturas-adicionais-deputados\"\n          class=\"autoria-input\"\n          aria-label=\"Assinaturas Adicionais deputados\"\n          size=\"small\"\n          .value=${this._autoria?.quantidadeAssinaturasAdicionaisDeputados.toString() ?? '0'}\n          @input=${(ev: Event): void => this._atualizarQtdAssinaturasAdicionaisDeputados(ev)}\n        ></sl-input>\n      </div>\n    `;\n  }\n\n  updated(): void {\n    this._isProcessandoMovimentacao = false;\n  }\n\n  private _isAllAutoresOk(): boolean {\n    return this._autoria.parlamentares.every(p => p.identificacao);\n  }\n\n  private _incluirNovoParlamentar(): void {\n    this._autoria.parlamentares = incluirParlamentar(this._autoria.parlamentares, { ...parlamentarVazio });\n    this._podeIncluirParlamentar = false;\n    setTimeout(() => this._autocompletes[this._autoria.parlamentares.length - 1].focus(), 200);\n  }\n\n  @executarAposValidacao()\n  private _moverParlamentar(index: number, deslocamento: number): void {\n    this._autoria.parlamentares = moverParlamentar(this._autoria.parlamentares, index, deslocamento);\n    this.agendarEmissaoEventoOnChange('moverAutor');\n    this.requestUpdate();\n  }\n\n  @executarAposValidacao()\n  private _excluirParlamentar(index: number): void {\n    this._autoria.parlamentares = excluirParlamentar(this._autoria.parlamentares, index);\n    if (!this._autoria.parlamentares.length) {\n      this._autoria.parlamentares = [{ ...parlamentarVazio }];\n    }\n    this._podeIncluirParlamentar = this._isAllAutoresOk();\n    this.agendarEmissaoEventoOnChange('excluirAutor');\n    this.requestUpdate();\n  }\n\n  private _timerValidacao = 0;\n  protected _isProcessandoValidacao = false;\n  private _validarNomeParlamentar(ev: Event, index: number): void {\n    this._isProcessandoValidacao = true;\n    const isBlur = ev.type === 'blur';\n\n    if (!isBlur) {\n      clearInterval(this._timerValidacao);\n    }\n\n    // O trecho abaixo est dentro de um setTimeout por dois motivos:\n    // 1 - Debounce quando ev.type  \"input\"\n    // 2 - O clique de um nome na lista do autocomplete dispara o evento \"blur\"\n    //     e  preciso dar tempo do @autocomplete ser executado e preencher o input com o nome selecionado antes da validao\n    this._timerValidacao = window.setTimeout(\n      () => {\n        const auxValorPodeIncluirOriginal = this._podeIncluirParlamentar;\n\n        const elLexmlAutocomplete = this._autocompletes[index];\n        const cargoAtual = this._autoria.parlamentares[index].cargo;\n        const nomeAtual = elLexmlAutocomplete.value ?? '';\n\n        const regex = new RegExp('^' + nomeAtual.normalize('NFD').replace(REGEX_ACCENTS, '') + '$', 'i');\n        const parlamentar = this.parlamentares.find(p =>\n          p.nome\n            .normalize('NFD')\n            .replace(/[\\u0300-\\u036f]/g, '')\n            .match(regex)\n        ) || { ...parlamentarVazio, nome: isBlur ? '' : nomeAtual };\n\n        const parlamentarEhValido = !!parlamentar.identificacao;\n\n        parlamentar.cargo = isBlur && !parlamentarEhValido ? '' : cargoAtual;\n\n        this._autoria.parlamentares[index] = { ...parlamentar };\n        this._podeIncluirParlamentar = parlamentarEhValido && this._isAllAutoresOk();\n\n        if (isBlur && !parlamentarEhValido) {\n          elLexmlAutocomplete.value = '';\n        }\n\n        this._isProcessandoValidacao = false;\n\n        if (auxValorPodeIncluirOriginal !== this._podeIncluirParlamentar) {\n          this.agendarEmissaoEventoOnChange('atualizarAutor');\n        }\n      },\n      ev.type === 'blur' ? 200 : 0\n    );\n  }\n\n  private timerEmitirEventoOnChange = 0;\n  private _atualizarParlamentar(ev: CustomEvent, index: number): void {\n    const parlamentarAutocomplete = this.parlamentares.find(p => p.nome === ev.detail.value);\n    if (parlamentarAutocomplete) {\n      const { cargo } = this._autoria.parlamentares[index];\n      this._autoria.parlamentares[index] = {\n        ...parlamentarAutocomplete,\n        cargo,\n      };\n    }\n    this._podeIncluirParlamentar = !!parlamentarAutocomplete && this._isAllAutoresOk();\n    (ev.target as HTMLElement).focus();\n    this._lastIndexAutoCompleted = index;\n\n    this.agendarEmissaoEventoOnChange('atualizarAutor');\n    this.requestUpdate();\n  }\n\n  private _atualizarCargo(ev: Event, index: number): void {\n    const cargoAtual = this._autoria.parlamentares[index].cargo;\n    const newValue = (ev.target as HTMLInputElement).value;\n    this._autoria.parlamentares[index].cargo = newValue;\n    if (cargoAtual !== newValue) {\n      this.agendarEmissaoEventoOnChange('atualizarAutor');\n    }\n  }\n\n  private _atualizarQtdAssinaturasAdicionaisSenadores(ev: Event): void {\n    this._autoria.quantidadeAssinaturasAdicionaisSenadores = Number((ev.target as HTMLInputElement).value);\n  }\n\n  private _atualizarQtdAssinaturasAdicionaisDeputados(ev: Event): void {\n    this._autoria.quantidadeAssinaturasAdicionaisDeputados = Number((ev.target as HTMLInputElement).value);\n  }\n\n  private _atualizarExibirPartidoUF(ev: Event): void {\n    this._autoria.imprimirPartidoUF = (ev.target as HTMLInputElement).checked;\n  }\n\n  private _isProcessandoMovimentacao = false;\n  private _lastIndexAutoCompleted = -1;\n  private _handleKeyUp(ev: KeyboardEvent, index: number): void {\n    if (!ev.ctrlKey && !ev.altKey && !ev.shiftKey) {\n      if (ev.key === 'Enter' && this._podeIncluirParlamentar && index !== this._lastIndexAutoCompleted) {\n        this._btnNovoParlamentar.click();\n        this._lastIndexAutoCompleted = -1;\n      } else if (['ArrowUp', 'ArrowDown'].includes(ev.key) && this._autoria.parlamentares[index].identificacao) {\n        this._focarAutocompleteOuCargo(ev.target!, index, ev.key === 'ArrowUp' ? -1 : 1);\n      }\n    } else if (ev.ctrlKey && !ev.altKey && !ev.shiftKey) {\n      if (ev.key === 'ArrowUp') {\n        if (!this._isProcessandoMovimentacao) {\n          this._isProcessandoMovimentacao = true;\n          this._moverParlamentar(index, -1);\n          this._focarAutocompleteOuCargo(ev.target!, index, -1);\n        }\n      } else if (ev.key === 'ArrowDown') {\n        if (!this._isProcessandoMovimentacao) {\n          this._isProcessandoMovimentacao = true;\n          this._moverParlamentar(index, 1);\n          this._focarAutocompleteOuCargo(ev.target!, index, 1);\n        }\n      }\n    }\n  }\n\n  private _focarAutocompleteOuCargo(el: EventTarget, index: number, deslocamento: number): void {\n    const nodes = (el as HTMLElement).tagName === 'LEXML-AUTOCOMPLETE' ? this._autocompletes : this._inputCargos;\n    const newIndex = index + deslocamento;\n    if (newIndex < 0 || newIndex >= nodes.length) {\n      return;\n    }\n    setTimeout(() => nodes[newIndex].focus(), 0);\n  }\n\n  private _handleClickAutoComplete(): void {\n    window.setTimeout(() => (this._lastIndexAutoCompleted = -1), 0);\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-autoria': AutoriaComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, property, query, state } from 'lit/decorators.js';\nimport { AutocompleteAsync, Option } from '../editor/autocomplete-async';\nimport { ColegiadoApreciador, RefProposicaoEmendada } from '../../model/emenda/emenda';\nimport { Comissao } from './comissao';\nimport { rootStore } from '../../redux/store';\nimport { adicionarAlerta } from '../../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\n\n@customElement('lexml-destino')\nexport class DestinoComponent extends LitElement {\n  @query('#auto-complete-async')\n  private _autocomplete!: AutocompleteAsync;\n\n  @state()\n  private _comissoesAutocomplete: Option[] = [];\n\n  private isMPV = false;\n\n  private isPlenario = false;\n\n  private tipoColegiadoPlenario = false;\n\n  public isMateriaOrcamentaria = false;\n\n  @state()\n  private isErroComissaoSelecionada = false;\n\n  private _proposicao!: RefProposicaoEmendada;\n\n  @property({ type: RefProposicaoEmendada })\n  set proposicao(value: RefProposicaoEmendada) {\n    this._proposicao = value;\n    this.isMPV = false;\n    if (this._proposicao.sigla === 'MPV') {\n      this.isMPV = true;\n      this._colegiadoApreciador.tipoColegiado = 'Comisso';\n      if (this.isMateriaOrcamentaria) {\n        this._colegiadoApreciador.siglaComissao = 'CMO';\n        this._autocomplete.value = `${this._colegiadoApreciador.siglaComissao} - COMISSO MISTA DE PLANOS, ORAMENTOS PBLICOS E FISCALIZAO`;\n      } else {\n        this._colegiadoApreciador.siglaComissao = `CMMPV ${this._proposicao.numero}/${this._proposicao.ano}`;\n        this._autocomplete.value = `${this._colegiadoApreciador.siglaComissao} - COMISSO MISTA DA MEDIDA PROVISRIA N ${this._proposicao.numero}, DE ${this._proposicao.ano}`;\n      }\n    }\n\n    this.requestUpdate();\n  }\n\n  get proposicao(): RefProposicaoEmendada {\n    return this._proposicao;\n  }\n\n  private _comissoes: Comissao[] = [];\n  @property({ type: Array, state: true })\n  set comissoes(value: Comissao[]) {\n    this.isPlenario = false;\n    if (!this._comissoes || this._comissoes.length === 0) {\n      this._comissoes = value ? value : [];\n      this._comissoesOptions = this.comissoes.map(comissao => new Option(comissao.sigla, `${comissao.sigla} - ${comissao.nome}`));\n      this.ajustarValorAutocomplete();\n      this.requestUpdate();\n    }\n    if (typeof value === 'undefined') {\n      this.isPlenario = true;\n    }\n  }\n\n  get comissoes(): Comissao[] {\n    return this._comissoes;\n  }\n\n  private _comissoesOptions: Option[] = [];\n\n  private ajustarValorAutocomplete(): void {\n    if (this._colegiadoApreciador?.siglaComissao) {\n      const option: Option = this._comissoesOptions.find(op => op.value === this._colegiadoApreciador.siglaComissao) || new Option('', '');\n      this._selecionarComissao(option);\n      this._autocomplete.value = option.description || this._colegiadoApreciador.siglaComissao;\n    }\n  }\n\n  private _colegiadoApreciador!: ColegiadoApreciador;\n  @property({ type: Object, state: true })\n  set colegiadoApreciador(value: ColegiadoApreciador | undefined) {\n    this._colegiadoApreciador = value ? value : new ColegiadoApreciador();\n    this.tipoColegiadoPlenario = this._colegiadoApreciador.tipoColegiado === 'Plenrio';\n    if (this.tipoColegiadoPlenario) {\n      this.ajustarTipoColegiadoPlenario();\n    } else if (this._colegiadoApreciador.siglaComissao) {\n      this.ajustarValorAutocomplete();\n    } else {\n      this._autocomplete.value = '';\n    }\n    if (!this.tipoColegiadoPlenario && !this._colegiadoApreciador.siglaComissao) {\n      this.criarAlertaErroComissao();\n    }\n    this.requestUpdate();\n  }\n\n  public get colegiadoApreciador(): ColegiadoApreciador {\n    return this._colegiadoApreciador;\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        fieldset {\n          display: flex;\n          flex-direction: column;\n          gap: 1em;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n          border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n          border-radius: var(--sl-border-radius-medium);\n          max-width: 655px;\n        }\n\n        legend {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n\n        .mensagem {\n          font-size: 0.8em;\n          font-weight: normal;\n          text-align: left;\n          border: 1px solid;\n          padding: 4px 10px;\n          margin: 10px 0;\n          display: inline-block;\n          border-radius: 2px;\n          font-family: var(--sl-font-sans);\n        }\n\n        .mensagem--danger {\n          color: #721c24;\n          background-color: #f8d7da;\n          border-color: #f5c6cb;\n        }\n      </style>\n      <fieldset class=\"lexml-destino\">\n        <legend>Destino</legend>\n        <div>\n          <sl-radio-group id=\"tipoColegiado\">\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Plenrio')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Plenrio')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Plenrio'}\n              value=\"Plenrio\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Plenrio</sl-radio\n            >\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Comisso')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Comisso')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Comisso'}\n              value=\"Comisso\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Comisso</sl-radio\n            >\n            <sl-radio\n              name=\"tipoColegiado\"\n              @click=${(): void => this.updateTipoColegiado('Plenrio via Comisso')}\n              @sl-change=${(evt: any): void => evt.target?.checked && this.updateTipoColegiado('Plenrio via Comisso')}\n              ?checked=${this._colegiadoApreciador?.tipoColegiado === 'Plenrio via Comisso'}\n              value=\"Plenrio via Comisso\"\n              ?disabled=${this.isMPV || this.isPlenario}\n              >Plenrio via Comisso</sl-radio\n            >\n          </sl-radio-group>\n        </div>\n        <div style=\"width:100%;margin-top:10px\">\n          <autocomplete-async\n            id=\"auto-complete-async\"\n            label=\"Comisso\"\n            .async=${false}\n            ?readonly=${this.isMPV || this.isPlenario}\n            placeholder=\"ex: Comisso\"\n            .items=${this._comissoesAutocomplete}\n            .onSearch=${value => this._filtroComissao(value)}\n            .onSelect=${value => this._selecionarComissao(value)}\n            .onChange=\"${() => true}\"\n            .onClick=\"${() => this._exibirComissoes()}\"\n            @blur=${this._blurAutoComplete}\n            ?disabled=${this.isMPV || this.isPlenario || this.tipoColegiadoPlenario || !this.comissoes?.length}\n          ></autocomplete-async>\n          ${this.isErroComissaoSelecionada ? html` <div class=\"mensagem mensagem--danger\">A comisso de destino deve ser selecionada.</div> ` : ''}\n        </div>\n      </fieldset>\n    `;\n  }\n\n  private _exibirComissoes() {\n    this._autocomplete.value = '';\n    this._comissoesAutocomplete = [];\n  }\n\n  private criarAlertaErroComissao(): void {\n    this.isErroComissaoSelecionada = true;\n    const alerta = {\n      id: 'alerta-global-comissao-nao-selecionada',\n      tipo: 'error',\n      mensagem: 'A comisso de destino deve ser selecionada.',\n      podeFechar: false,\n    };\n    rootStore.dispatch(adicionarAlerta(alerta));\n  }\n\n  private removerAlertaErroComissao(): void {\n    this.isErroComissaoSelecionada = false;\n    rootStore.dispatch(removerAlerta('alerta-global-comissao-nao-selecionada'));\n  }\n\n  private updateTipoColegiado(value: any): void {\n    if (!this.isMPV && !this.isPlenario) {\n      this._colegiadoApreciador.tipoColegiado = value;\n      this.tipoColegiadoPlenario = this._colegiadoApreciador.tipoColegiado === 'Plenrio';\n      if (this.tipoColegiadoPlenario) this.ajustarTipoColegiadoPlenario();\n      this.requestUpdate();\n    }\n  }\n\n  private _selecionarComissao(item: Option): void {\n    const comissaoSelecionada: Comissao = this._comissoes.find(op => op.sigla === item.value)!;\n    if (comissaoSelecionada) {\n      this._colegiadoApreciador.siglaCasaLegislativa = comissaoSelecionada.siglaCasaLegislativa;\n      this._colegiadoApreciador.siglaComissao = comissaoSelecionada.sigla;\n      this.removerAlertaErroComissao();\n    }\n  }\n\n  private _filtroComissao(query: string): void {\n    const regex = new RegExp(query, 'i');\n    this._comissoesAutocomplete = this._comissoesOptions.filter(comissao => comissao.description.match(regex));\n  }\n\n  private _blurAutoComplete(): void {\n    if (!this.comissoes?.length) return;\n\n    setTimeout(() => {\n      const comissao = this._autocomplete.value ?? '';\n      const comissaoSelecionada = this._comissoesOptions.find(comissaoOp => comissao === comissaoOp.description);\n\n      if (!comissaoSelecionada) {\n        this._colegiadoApreciador.siglaComissao = '';\n        this.criarAlertaErroComissao();\n        this._autocomplete.value = '';\n      }\n    }, 200);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n\n  private ajustarTipoColegiadoPlenario(): void {\n    this._autocomplete.value = '';\n    this._colegiadoApreciador.siglaComissao = '';\n    this._colegiadoApreciador.siglaCasaLegislativa = 'SF';\n    this.removerAlertaErroComissao();\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-destino': DestinoComponent;\n  }\n}\n","import { REGEX_ACCENTS } from '../util/string-util';\nimport { LitElement, html, TemplateResult, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('lexml-autocomplete')\nexport class LexmlAutocomplete extends LitElement {\n  @property({ type: Array })\n  items: string[] = [];\n\n  @property({ type: Boolean, reflect: true })\n  opened = false;\n\n  @property({ type: Number })\n  maxSuggestions = 10;\n\n  _suggestions: string[] = [];\n\n  _bound: any = {};\n\n  _inputEl: any;\n\n  _suggestionEl: any;\n\n  _highlightedEl: any;\n\n  _blur = false;\n\n  _mouseEnter = false;\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        .suggest-container {\n          position: relative;\n        }\n\n        ul {\n          position: absolute;\n          display: block;\n          list-style-type: none;\n          margin: 0;\n          padding: 0;\n          z-index: 10000;\n          border: 1px solid grey;\n          background: white;\n        }\n        li {\n          padding: 4px;\n          cursor: pointer;\n        }\n        li.active {\n          background: whitesmoke;\n        }\n        [hidden] {\n          display: none;\n        }\n\n        .lexml-autocomplete-input {\n          width: 100%;\n        }\n\n        @media (max-width: 576px) {\n          .lexml-autocomplete-label {\n            width: calc(100% - 2px);\n            display: block;\n          }\n          .lexml-autocomplete-input {\n            width: calc(100% - 2px);\n          }\n        }\n      </style>\n      <slot id=\"dropdown-input\">\n        <!-- <input id=\"defaultInput\" class=\"lexml-autocomplete-input\" type=\"text\" placeholder=\"Parlamentar\" .value=${this.value || ''} /> -->\n        <sl-input id=\"defaultInput\" class=\"lexml-autocomplete-input\" type=\"text\" placeholder=\"\" size=\"small\" .value=${this.value || ''}></sl-input>\n      </slot>\n      <div class=\"suggest-container\">\n        <ul id=\"suggestions\" ?hidden=${!this.opened} @mouseenter=${this._handleItemMouseEnter} @mouseleave=${this._handleItemMouseLeave}>\n          ${this._suggestions.map(item => html`<li @click=${(): void => this.autocomplete(item)}>${item}</li>`)}\n        </ul>\n      </div>\n    `;\n  }\n\n  /**\n   * Input element getter\n   */\n  get contentElement(): any {\n    if (this._inputEl) return this._inputEl; // Cache\n    if (!this.hasUpdated) return undefined; // No shadow root, no element to use\n\n    const slotElement = this.shadowRoot!.getElementById('dropdown-input') as HTMLSlotElement;\n    const slotInputList = slotElement.assignedElements();\n    this._inputEl = slotInputList.length ? slotInputList[0] : this.shadowRoot!.getElementById('defaultInput');\n    return this._inputEl;\n  }\n\n  private _tempValue?: string;\n  /**\n   * Value getter from input element.\n   */\n  get value(): any {\n    return this.contentElement && this.contentElement.value;\n  }\n\n  /**\n   * Value setter to input element.\n   */\n  @property({ type: String })\n  set value(value) {\n    if (!this.contentElement) {\n      this._tempValue = value;\n      return;\n    }\n\n    this.contentElement.value = value;\n  }\n\n  firstUpdated(): void {\n    this._suggestionEl = this.shadowRoot!.getElementById('suggestions');\n    this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n\n    this._bound.onKeyDown = this._handleKeyDown.bind(this);\n    this._bound.onKeyUp = this._handleKeyUp.bind(this);\n    this._bound.onFocus = this._handleFocus.bind(this);\n    this._bound.onBlur = this._handleBlur.bind(this);\n\n    this.contentElement.addEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.addEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.addEventListener('focus', this._bound.onFocus);\n    this.contentElement.addEventListener('blur', this._bound.onBlur);\n\n    if (this._tempValue !== undefined) {\n      this.contentElement.value = this._tempValue;\n    }\n  }\n\n  disconnectedCallback(): void {\n    if (!this.contentElement) return; // no events to remove\n    this.contentElement.removeEventListener('keydown', this._bound.onKeyDown);\n    this.contentElement.removeEventListener('keyup', this._bound.onKeyUp);\n    this.contentElement.removeEventListener('focus', this._bound.onFocus);\n    this.contentElement.removeEventListener('blur', this._bound.onBlur);\n  }\n\n  focus(options?: FocusOptions): void {\n    if (this.contentElement) {\n      this.contentElement.focus(options);\n    }\n  }\n\n  updated(changed: PropertyValues): void {\n    if (changed.has('opened') && this.opened && this._suggestionEl.childElementCount) {\n      // Highlight the first when there are suggestions\n      // eslint-disable-next-line prefer-destructuring\n      this._highlightedEl = this._suggestionEl.children[0];\n      this._highlightedEl.classList.add('active');\n    }\n  }\n\n  /**\n   * Open suggestions.\n   */\n  open(): void {\n    if (this._suggestionEl.style.width === '0px') {\n      this._suggestionEl.style.width = `${this.contentElement.getBoundingClientRect().width}px`;\n    }\n\n    if (this._suggestions.length) {\n      this.opened = true;\n    }\n  }\n\n  /**\n   * Close suggestions.\n   */\n  close(): void {\n    this.opened = false;\n    this._highlightedEl = null;\n  }\n\n  /**\n   * Suggest autocomplete items.\n   * @param {Array<String>} suggestions\n   */\n  suggest(suggestions: string[]): void {\n    this._suggestions = suggestions || [];\n    // eslint-disable-next-line no-unused-expressions\n    this._suggestions.length > 1 || (this._suggestions.length === 1 && this._suggestions[0] !== this.contentElement.value) ? this.open() : this.close();\n    this.requestUpdate();\n  }\n\n  /**\n   * Autocomplete input with `value`.\n   * @param {String} value\n   */\n  autocomplete(value: string): void {\n    this.contentElement.value = value;\n    this.close();\n    this.dispatchEvent(\n      new CustomEvent('autocomplete', {\n        detail: { value },\n        composed: true,\n        bubbles: true,\n      })\n    );\n  }\n\n  _highlightPrev(): void {\n    if (!this._highlightedEl || !this._highlightedEl.previousElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.previousElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  _highlightNext(): void {\n    if (!this._highlightedEl || !this._highlightedEl.nextElementSibling) return;\n\n    this._highlightedEl.classList.remove('active');\n    this._highlightedEl = this._highlightedEl.nextElementSibling;\n    this._highlightedEl.classList.add('active');\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  _handleKeyDown(ev: KeyboardEvent): void {\n    // Prevent up and down from behaving as home and end on some browsers\n    if (ev.key === 'ArrowUp' || ev.key === 'ArrowDown') {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }\n\n  _handleKeyUp(ev: KeyboardEvent): void {\n    switch (ev.key) {\n      case 'ArrowUp':\n        if (this._highlightedEl?.previousElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightPrev();\n        }\n        break;\n      case 'ArrowDown':\n        if (this._highlightedEl?.nextElementSibling) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          this._highlightNext();\n        }\n        break;\n      case 'Enter':\n        // Select\n        // eslint-disable-next-line no-unused-expressions\n        this._highlightedEl && this._highlightedEl.click();\n        break;\n      default:\n        // TODO debounce\n        if (this.items.length) {\n          const { value } = this.contentElement;\n          const normalizedValue = value.normalize('NFD').replace(REGEX_ACCENTS, '');\n          this.suggest(this._findSuggetions(normalizedValue));\n        }\n    }\n  }\n\n  _findSuggetions(value?: string, nItemsResult = this.maxSuggestions): string[] {\n    if (!value) {\n      return [];\n    }\n    let suggestions = this._filterStartWith(value, nItemsResult);\n    if (suggestions.length < this.maxSuggestions) {\n      suggestions = [...suggestions, ...this._filterContains(value, this.maxSuggestions - suggestions.length).filter(item => !suggestions.includes(item))];\n    }\n    return suggestions;\n  }\n\n  _filterStartWith(value: string, itemsResult = this.maxSuggestions): string[] {\n    const regexStartWith = new RegExp('^' + value, 'gi');\n    return (\n      (value &&\n        this.items\n          .filter(item =>\n            item\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '')\n              .match(regexStartWith)\n          )\n          .slice(0, itemsResult)) ||\n      []\n    );\n  }\n\n  _filterContains(value: string, itemsResult = this.maxSuggestions): string[] {\n    const regexContains = new RegExp(value, 'gi');\n    return (\n      (value &&\n        this.items\n          .filter(item =>\n            item\n              .normalize('NFD')\n              .replace(/[\\u0300-\\u036f]/g, '')\n              .match(regexContains)\n          )\n          .slice(0, itemsResult)) ||\n      []\n    );\n  }\n\n  _handleFocus(): void {\n    this._blur = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._suggestions.length > 1 && this.open();\n  }\n\n  _handleBlur(): void {\n    this._blur = true;\n    // eslint-disable-next-line no-unused-expressions\n    // !this._mouseEnter && this.close();\n    setTimeout(() => this.close(), 200);\n    this._suggestions = [];\n  }\n\n  // Handle mouse change focus to suggestions\n  _handleItemMouseEnter(): void {\n    this._mouseEnter = true;\n  }\n\n  _handleItemMouseLeave(): void {\n    this._mouseEnter = false;\n    // eslint-disable-next-line no-unused-expressions\n    this._blur && setTimeout(() => this.close(), 500); // Give user some slack before closing\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-autocomplete': LexmlAutocomplete;\n  }\n}\n","import { css, html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\n\n@customElement('lexml-data')\nexport class DataComponent extends LitElement {\n  static styles = css`\n    .lexml-data {\n      display: block;\n      font-size: 1em;\n      max-width: 700px;\n    }\n  `;\n\n  @query('#input-data')\n  inputData!: HTMLInputElement;\n\n  @query('#no-date')\n  optionNaoInformarData!: any;\n\n  // @query('#opt-data')\n  // optData!: HTMLInputElement;\n\n  @property({ type: String })\n  data = '';\n\n  updated(): void {\n    this.inputData.value = this.data || this.inputData.value || new Date().toISOString().replace(/T.+$/, '');\n    if (!this.data && !this.optionNaoInformarData.checked) {\n      this.optionNaoInformarData.checked = true;\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        sl-radio-group::part(base) {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          gap: 10px;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n        }\n        sl-radio-group::part(label) {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n        sl-radio-group > sl-radio:first-child {\n          display: inline-flex;\n          padding: 0 20px 0 0;\n        }\n        sl-input::part(form-control) {\n          display: flex;\n          flex-direction: row;\n          gap: 10px;\n          align-items: center;\n          flex-wrap: wrap;\n        }\n        sl-input::part(base) {\n          max-width: 190px;\n        }\n        @media (max-width: 480px) {\n          sl-input::part(base) {\n            max-width: 150px;\n          }\n        }\n      </style>\n      <div class=\"lexml-data\">\n        <sl-radio-group label=\"Data\" fieldset>\n          <sl-radio name=\"data\" value=\"2\" ?checked=${!!this.data} @click=${this.setDate}>\n            <sl-input id=\"input-data\" label=\"Data\" type=\"date\" ?disabled=${!this.data} @input=${this.setDate}></sl-input>\n          </sl-radio>\n          <sl-radio name=\"data\" id=\"no-date\" value=\"1\" ?checked=${!this.data} @click=${this.resetDate}>No informar</sl-radio>\n        </sl-radio-group>\n      </div>\n    `;\n  }\n\n  private getCurrentDate(): string {\n    return new Date().toLocaleDateString().split('/').reverse().join('-');\n  }\n\n  private resetDate(): void {\n    const original = this.data;\n    this.data = '';\n    if (original !== this.data) {\n      this.agendarEmissaoEventoOnChange();\n    }\n  }\n\n  private setDate(): void {\n    if (this.inputData) {\n      const original = this.data;\n      this.data = this.inputData.value;\n      if (original !== this.data) {\n        this.agendarEmissaoEventoOnChange();\n      }\n    }\n  }\n\n  private timerOnChange = 0;\n  private agendarEmissaoEventoOnChange(): void {\n    clearTimeout(this.timerOnChange);\n    this.timerOnChange = window.setTimeout(() => this.emitirEventoOnChange(), 1000);\n  }\n\n  private emitirEventoOnChange(): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento: 'data',\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-data': DataComponent;\n  }\n}\n","export class Usuario {\n  nome = 'Annimo';\n  id: any;\n  sigla?: string;\n\n  constructor(nome?: string, id?: any, sigla?: string) {\n    this.nome = nome || 'Annimo';\n    this.id = id;\n    this.sigla = sigla;\n  }\n}\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/badge/badge.styles.ts\nvar badge_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-flex;\n  }\n\n  .badge {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: var(--sl-font-size-x-small);\n    font-weight: var(--sl-font-weight-semibold);\n    letter-spacing: var(--sl-letter-spacing-normal);\n    line-height: 1;\n    border-radius: var(--sl-border-radius-small);\n    border: solid 1px var(--sl-color-neutral-0);\n    white-space: nowrap;\n    padding: 3px 6px;\n    user-select: none;\n    cursor: inherit;\n  }\n\n  /* Variant modifiers */\n  .badge--primary {\n    background-color: var(--sl-color-primary-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--success {\n    background-color: var(--sl-color-success-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--neutral {\n    background-color: var(--sl-color-neutral-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--warning {\n    background-color: var(--sl-color-warning-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  .badge--danger {\n    background-color: var(--sl-color-danger-600);\n    color: var(--sl-color-neutral-0);\n  }\n\n  /* Pill modifier */\n  .badge--pill {\n    border-radius: var(--sl-border-radius-pill);\n  }\n\n  /* Pulse modifier */\n  .badge--pulse {\n    animation: pulse 1.5s infinite;\n  }\n\n  .badge--pulse.badge--primary {\n    --pulse-color: var(--sl-color-primary-600);\n  }\n\n  .badge--pulse.badge--success {\n    --pulse-color: var(--sl-color-success-600);\n  }\n\n  .badge--pulse.badge--neutral {\n    --pulse-color: var(--sl-color-neutral-600);\n  }\n\n  .badge--pulse.badge--warning {\n    --pulse-color: var(--sl-color-warning-600);\n  }\n\n  .badge--pulse.badge--danger {\n    --pulse-color: var(--sl-color-danger-600);\n  }\n\n  @keyframes pulse {\n    0% {\n      box-shadow: 0 0 0 0 var(--pulse-color);\n    }\n    70% {\n      box-shadow: 0 0 0 0.5rem transparent;\n    }\n    100% {\n      box-shadow: 0 0 0 0 transparent;\n    }\n  }\n`;\n\nexport {\n  badge_styles_default\n};\n","import {\n  badge_styles_default\n} from \"./chunk.7PNSFSF6.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/badge/badge.ts\nvar SlBadge = class extends s {\n  constructor() {\n    super(...arguments);\n    this.variant = \"primary\";\n    this.pill = false;\n    this.pulse = false;\n  }\n  render() {\n    return $`\n      <span\n        part=\"base\"\n        class=${o({\n      badge: true,\n      \"badge--primary\": this.variant === \"primary\",\n      \"badge--success\": this.variant === \"success\",\n      \"badge--neutral\": this.variant === \"neutral\",\n      \"badge--warning\": this.variant === \"warning\",\n      \"badge--danger\": this.variant === \"danger\",\n      \"badge--pill\": this.pill,\n      \"badge--pulse\": this.pulse\n    })}\n        role=\"status\"\n      >\n        <slot></slot>\n      </span>\n    `;\n  }\n};\nSlBadge.styles = badge_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlBadge.prototype, \"variant\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlBadge.prototype, \"pill\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlBadge.prototype, \"pulse\", 2);\nSlBadge = __decorateClass([\n  n(\"sl-badge\")\n], SlBadge);\n\nexport {\n  SlBadge\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab-group/tab-group.styles.ts\nvar tab_group_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --track-color: var(--sl-color-neutral-200);\n    --indicator-color: var(--sl-color-primary-600);\n\n    display: block;\n  }\n\n  .tab-group {\n    display: flex;\n    border: solid 1px transparent;\n    border-radius: 0;\n  }\n\n  .tab-group .tab-group__tabs {\n    display: flex;\n    position: relative;\n  }\n\n  .tab-group .tab-group__indicator {\n    position: absolute;\n    left: 0;\n    transition: var(--sl-transition-fast) transform ease, var(--sl-transition-fast) width ease;\n  }\n\n  .tab-group--has-scroll-controls .tab-group__nav-container {\n    position: relative;\n    padding: 0 var(--sl-spacing-x-large);\n  }\n\n  .tab-group__scroll-button {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    width: var(--sl-spacing-x-large);\n  }\n\n  .tab-group__scroll-button--start {\n    left: 0;\n  }\n\n  .tab-group__scroll-button--end {\n    right: 0;\n  }\n\n  /*\n   * Top\n   */\n\n  .tab-group--top {\n    flex-direction: column;\n  }\n\n  .tab-group--top .tab-group__nav-container {\n    order: 1;\n  }\n\n  .tab-group--top .tab-group__nav {\n    display: flex;\n    overflow-x: auto;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .tab-group--top .tab-group__nav::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .tab-group--top .tab-group__tabs {\n    flex: 1 1 auto;\n    position: relative;\n    flex-direction: row;\n    border-bottom: solid 2px var(--track-color);\n  }\n\n  .tab-group--top .tab-group__indicator {\n    bottom: -2px;\n    border-bottom: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--top .tab-group__body {\n    order: 2;\n  }\n\n  .tab-group--top ::slotted(sl-tab-panel) {\n    --padding: var(--sl-spacing-medium) 0;\n  }\n\n  /*\n   * Bottom\n   */\n\n  .tab-group--bottom {\n    flex-direction: column;\n  }\n\n  .tab-group--bottom .tab-group__nav-container {\n    order: 2;\n  }\n\n  .tab-group--bottom .tab-group__nav {\n    display: flex;\n    overflow-x: auto;\n\n    /* Hide scrollbar in Firefox */\n    scrollbar-width: none;\n  }\n\n  /* Hide scrollbar in Chrome/Safari */\n  .tab-group--bottom .tab-group__nav::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n  }\n\n  .tab-group--bottom .tab-group__tabs {\n    flex: 1 1 auto;\n    position: relative;\n    flex-direction: row;\n    border-top: solid 2px var(--track-color);\n  }\n\n  .tab-group--bottom .tab-group__indicator {\n    top: calc(-1 * 2px);\n    border-top: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--bottom .tab-group__body {\n    order: 1;\n  }\n\n  .tab-group--bottom ::slotted(sl-tab-panel) {\n    --padding: var(--sl-spacing-medium) 0;\n  }\n\n  /*\n   * Start\n   */\n\n  .tab-group--start {\n    flex-direction: row;\n  }\n\n  .tab-group--start .tab-group__nav-container {\n    order: 1;\n  }\n\n  .tab-group--start .tab-group__tabs {\n    flex: 0 0 auto;\n    flex-direction: column;\n    border-right: solid 2px var(--track-color);\n  }\n\n  .tab-group--start .tab-group__indicator {\n    right: calc(-1 * 2px);\n    border-right: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--start .tab-group__body {\n    flex: 1 1 auto;\n    order: 2;\n  }\n\n  .tab-group--start ::slotted(sl-tab-panel) {\n    --padding: 0 var(--sl-spacing-medium);\n  }\n\n  /*\n   * End\n   */\n\n  .tab-group--end {\n    flex-direction: row;\n  }\n\n  .tab-group--end .tab-group__nav-container {\n    order: 2;\n  }\n\n  .tab-group--end .tab-group__tabs {\n    flex: 0 0 auto;\n    flex-direction: column;\n    border-left: solid 2px var(--track-color);\n  }\n\n  .tab-group--end .tab-group__indicator {\n    left: calc(-1 * 2px);\n    border-left: solid 2px var(--indicator-color);\n  }\n\n  .tab-group--end .tab-group__body {\n    flex: 1 1 auto;\n    order: 1;\n  }\n\n  .tab-group--end ::slotted(sl-tab-panel) {\n    --padding: 0 var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  tab_group_styles_default\n};\n","import {\n  tab_group_styles_default\n} from \"./chunk.55G5Z2SG.js\";\nimport {\n  scrollIntoView\n} from \"./chunk.H262HIXG.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n,\n  t\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass,\n  __spreadValues\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab-group/tab-group.ts\nvar SlTabGroup = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.tabs = [];\n    this.panels = [];\n    this.hasScrollControls = false;\n    this.placement = \"top\";\n    this.activation = \"auto\";\n    this.noScrollControls = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.resizeObserver = new ResizeObserver(() => {\n      this.preventIndicatorTransition();\n      this.repositionIndicator();\n      this.updateScrollControls();\n    });\n    this.mutationObserver = new MutationObserver((mutations) => {\n      if (mutations.some((m) => ![\"aria-labelledby\", \"aria-controls\"].includes(m.attributeName))) {\n        setTimeout(() => this.setAriaLabels());\n      }\n      if (mutations.some((m) => m.attributeName === \"disabled\")) {\n        this.syncTabsAndPanels();\n      }\n    });\n    this.updateComplete.then(() => {\n      this.syncTabsAndPanels();\n      this.mutationObserver.observe(this, { attributes: true, childList: true, subtree: true });\n      this.resizeObserver.observe(this.nav);\n      const intersectionObserver = new IntersectionObserver((entries, observer) => {\n        var _a;\n        if (entries[0].intersectionRatio > 0) {\n          this.setAriaLabels();\n          this.setActiveTab((_a = this.getActiveTab()) != null ? _a : this.tabs[0], { emitEvents: false });\n          observer.unobserve(entries[0].target);\n        }\n      });\n      intersectionObserver.observe(this.tabGroup);\n    });\n  }\n  disconnectedCallback() {\n    this.mutationObserver.disconnect();\n    this.resizeObserver.unobserve(this.nav);\n  }\n  show(panel) {\n    const tab = this.tabs.find((el) => el.panel === panel);\n    if (tab) {\n      this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n    }\n  }\n  getAllTabs(includeDisabled = false) {\n    const slot = this.shadowRoot.querySelector('slot[name=\"nav\"]');\n    return [...slot.assignedElements()].filter((el) => {\n      return includeDisabled ? el.tagName.toLowerCase() === \"sl-tab\" : el.tagName.toLowerCase() === \"sl-tab\" && !el.disabled;\n    });\n  }\n  getAllPanels() {\n    const slot = this.body.querySelector(\"slot\");\n    return [...slot.assignedElements()].filter((el) => el.tagName.toLowerCase() === \"sl-tab-panel\");\n  }\n  getActiveTab() {\n    return this.tabs.find((el) => el.active);\n  }\n  handleClick(event) {\n    const target = event.target;\n    const tab = target.closest(\"sl-tab\");\n    const tabGroup = tab == null ? void 0 : tab.closest(\"sl-tab-group\");\n    if (tabGroup !== this) {\n      return;\n    }\n    if (tab !== null) {\n      this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n    }\n  }\n  handleKeyDown(event) {\n    const target = event.target;\n    const tab = target.closest(\"sl-tab\");\n    const tabGroup = tab == null ? void 0 : tab.closest(\"sl-tab-group\");\n    if (tabGroup !== this) {\n      return;\n    }\n    if ([\"Enter\", \" \"].includes(event.key)) {\n      if (tab !== null) {\n        this.setActiveTab(tab, { scrollBehavior: \"smooth\" });\n        event.preventDefault();\n      }\n    }\n    if ([\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\", \"Home\", \"End\"].includes(event.key)) {\n      const activeEl = document.activeElement;\n      if ((activeEl == null ? void 0 : activeEl.tagName.toLowerCase()) === \"sl-tab\") {\n        let index = this.tabs.indexOf(activeEl);\n        if (event.key === \"Home\") {\n          index = 0;\n        } else if (event.key === \"End\") {\n          index = this.tabs.length - 1;\n        } else if ([\"top\", \"bottom\"].includes(this.placement) && event.key === \"ArrowLeft\" || [\"start\", \"end\"].includes(this.placement) && event.key === \"ArrowUp\") {\n          index--;\n        } else if ([\"top\", \"bottom\"].includes(this.placement) && event.key === \"ArrowRight\" || [\"start\", \"end\"].includes(this.placement) && event.key === \"ArrowDown\") {\n          index++;\n        }\n        if (index < 0) {\n          index = this.tabs.length - 1;\n        }\n        if (index > this.tabs.length - 1) {\n          index = 0;\n        }\n        this.tabs[index].focus({ preventScroll: true });\n        if (this.activation === \"auto\") {\n          this.setActiveTab(this.tabs[index], { scrollBehavior: \"smooth\" });\n        }\n        if ([\"top\", \"bottom\"].includes(this.placement)) {\n          scrollIntoView(this.tabs[index], this.nav, \"horizontal\");\n        }\n        event.preventDefault();\n      }\n    }\n  }\n  handleScrollToStart() {\n    this.nav.scroll({\n      left: this.nav.scrollLeft - this.nav.clientWidth,\n      behavior: \"smooth\"\n    });\n  }\n  handleScrollToEnd() {\n    this.nav.scroll({\n      left: this.nav.scrollLeft + this.nav.clientWidth,\n      behavior: \"smooth\"\n    });\n  }\n  updateScrollControls() {\n    if (this.noScrollControls) {\n      this.hasScrollControls = false;\n    } else {\n      this.hasScrollControls = [\"top\", \"bottom\"].includes(this.placement) && this.nav.scrollWidth > this.nav.clientWidth;\n    }\n  }\n  setActiveTab(tab, options) {\n    options = __spreadValues({\n      emitEvents: true,\n      scrollBehavior: \"auto\"\n    }, options);\n    if (tab !== this.activeTab && !tab.disabled) {\n      const previousTab = this.activeTab;\n      this.activeTab = tab;\n      this.tabs.map((el) => el.active = el === this.activeTab);\n      this.panels.map((el) => {\n        var _a;\n        return el.active = el.name === ((_a = this.activeTab) == null ? void 0 : _a.panel);\n      });\n      this.syncIndicator();\n      if ([\"top\", \"bottom\"].includes(this.placement)) {\n        scrollIntoView(this.activeTab, this.nav, \"horizontal\", options.scrollBehavior);\n      }\n      if (options.emitEvents) {\n        if (previousTab) {\n          emit(this, \"sl-tab-hide\", { detail: { name: previousTab.panel } });\n        }\n        emit(this, \"sl-tab-show\", { detail: { name: this.activeTab.panel } });\n      }\n    }\n  }\n  setAriaLabels() {\n    this.tabs.forEach((tab) => {\n      const panel = this.panels.find((el) => el.name === tab.panel);\n      if (panel) {\n        tab.setAttribute(\"aria-controls\", panel.getAttribute(\"id\"));\n        panel.setAttribute(\"aria-labelledby\", tab.getAttribute(\"id\"));\n      }\n    });\n  }\n  syncIndicator() {\n    const tab = this.getActiveTab();\n    if (tab) {\n      this.indicator.style.display = \"block\";\n      this.repositionIndicator();\n    } else {\n      this.indicator.style.display = \"none\";\n    }\n  }\n  repositionIndicator() {\n    const currentTab = this.getActiveTab();\n    if (!currentTab) {\n      return;\n    }\n    const width = currentTab.clientWidth;\n    const height = currentTab.clientHeight;\n    const allTabs = this.getAllTabs(true);\n    const precedingTabs = allTabs.slice(0, allTabs.indexOf(currentTab));\n    const offset = precedingTabs.reduce((previous, current) => ({\n      left: previous.left + current.clientWidth,\n      top: previous.top + current.clientHeight\n    }), { left: 0, top: 0 });\n    switch (this.placement) {\n      case \"top\":\n      case \"bottom\":\n        this.indicator.style.width = `${width}px`;\n        this.indicator.style.height = \"auto\";\n        this.indicator.style.transform = `translateX(${offset.left}px)`;\n        break;\n      case \"start\":\n      case \"end\":\n        this.indicator.style.width = \"auto\";\n        this.indicator.style.height = `${height}px`;\n        this.indicator.style.transform = `translateY(${offset.top}px)`;\n        break;\n    }\n  }\n  preventIndicatorTransition() {\n    const transitionValue = this.indicator.style.transition;\n    this.indicator.style.transition = \"none\";\n    requestAnimationFrame(() => {\n      this.indicator.style.transition = transitionValue;\n    });\n  }\n  syncTabsAndPanels() {\n    this.tabs = this.getAllTabs();\n    this.panels = this.getAllPanels();\n    this.syncIndicator();\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      \"tab-group\": true,\n      \"tab-group--top\": this.placement === \"top\",\n      \"tab-group--bottom\": this.placement === \"bottom\",\n      \"tab-group--start\": this.placement === \"start\",\n      \"tab-group--end\": this.placement === \"end\",\n      \"tab-group--has-scroll-controls\": this.hasScrollControls\n    })}\n        @click=${this.handleClick}\n        @keydown=${this.handleKeyDown}\n      >\n        <div class=\"tab-group__nav-container\" part=\"nav\">\n          ${this.hasScrollControls ? $`\n                <sl-icon-button\n                  part=\"scroll-button scroll-button--start\"\n                  exportparts=\"base:scroll-button__base\"\n                  class=\"tab-group__scroll-button tab-group__scroll-button--start\"\n                  name=\"chevron-left\"\n                  library=\"system\"\n                  label=${this.localize.term(\"scrollToStart\")}\n                  @click=${this.handleScrollToStart}\n                ></sl-icon-button>\n              ` : \"\"}\n\n          <div class=\"tab-group__nav\">\n            <div part=\"tabs\" class=\"tab-group__tabs\" role=\"tablist\">\n              <div part=\"active-tab-indicator\" class=\"tab-group__indicator\"></div>\n              <slot name=\"nav\" @slotchange=${this.syncTabsAndPanels}></slot>\n            </div>\n          </div>\n\n          ${this.hasScrollControls ? $`\n                <sl-icon-button\n                  part=\"scroll-button scroll-button--end\"\n                  exportparts=\"base:scroll-button__base\"\n                  class=\"tab-group__scroll-button tab-group__scroll-button--end\"\n                  name=\"chevron-right\"\n                  library=\"system\"\n                  label=${this.localize.term(\"scrollToEnd\")}\n                  @click=${this.handleScrollToEnd}\n                ></sl-icon-button>\n              ` : \"\"}\n        </div>\n\n        <div part=\"body\" class=\"tab-group__body\">\n          <slot @slotchange=${this.syncTabsAndPanels}></slot>\n        </div>\n      </div>\n    `;\n  }\n};\nSlTabGroup.styles = tab_group_styles_default;\n__decorateClass([\n  i(\".tab-group\")\n], SlTabGroup.prototype, \"tabGroup\", 2);\n__decorateClass([\n  i(\".tab-group__body\")\n], SlTabGroup.prototype, \"body\", 2);\n__decorateClass([\n  i(\".tab-group__nav\")\n], SlTabGroup.prototype, \"nav\", 2);\n__decorateClass([\n  i(\".tab-group__indicator\")\n], SlTabGroup.prototype, \"indicator\", 2);\n__decorateClass([\n  t()\n], SlTabGroup.prototype, \"hasScrollControls\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"placement\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"activation\", 2);\n__decorateClass([\n  e({ attribute: \"no-scroll-controls\", type: Boolean })\n], SlTabGroup.prototype, \"noScrollControls\", 2);\n__decorateClass([\n  e()\n], SlTabGroup.prototype, \"lang\", 2);\n__decorateClass([\n  watch(\"noScrollControls\", { waitUntilFirstUpdate: true })\n], SlTabGroup.prototype, \"updateScrollControls\", 1);\n__decorateClass([\n  watch(\"placement\", { waitUntilFirstUpdate: true })\n], SlTabGroup.prototype, \"syncIndicator\", 1);\nSlTabGroup = __decorateClass([\n  n(\"sl-tab-group\")\n], SlTabGroup);\n\nexport {\n  SlTabGroup\n};\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab-panel/tab-panel.styles.ts\nvar tab_panel_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    --padding: 0;\n\n    display: block;\n  }\n\n  .tab-panel {\n    border: solid 1px transparent;\n    padding: var(--padding);\n  }\n`;\n\nexport {\n  tab_panel_styles_default\n};\n","// src/internal/auto-increment.ts\nvar id = 0;\nfunction autoIncrement() {\n  return ++id;\n}\n\nexport {\n  autoIncrement\n};\n","import {\n  tab_panel_styles_default\n} from \"./chunk.XGXDQT2J.js\";\nimport {\n  autoIncrement\n} from \"./chunk.KFR7NC2M.js\";\nimport {\n  e,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab-panel/tab-panel.ts\nvar SlTabPanel = class extends s {\n  constructor() {\n    super(...arguments);\n    this.attrId = autoIncrement();\n    this.componentId = `sl-tab-panel-${this.attrId}`;\n    this.name = \"\";\n    this.active = false;\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.id = this.id.length > 0 ? this.id : this.componentId;\n  }\n  render() {\n    this.style.display = this.active ? \"block\" : \"none\";\n    return $`\n      <div part=\"base\" class=\"tab-panel\" role=\"tabpanel\" aria-hidden=${this.active ? \"false\" : \"true\"}>\n        <slot></slot>\n      </div>\n    `;\n  }\n};\nSlTabPanel.styles = tab_panel_styles_default;\n__decorateClass([\n  e({ reflect: true })\n], SlTabPanel.prototype, \"name\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTabPanel.prototype, \"active\", 2);\nSlTabPanel = __decorateClass([\n  n(\"sl-tab-panel\")\n], SlTabPanel);\n\nexport {\n  SlTabPanel\n};\n","import {\n  focusVisibleSelector\n} from \"./chunk.IVOHDN3H.js\";\nimport {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/tab/tab.styles.ts\nvar tab_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: inline-block;\n  }\n\n  .tab {\n    display: inline-flex;\n    align-items: center;\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-small);\n    font-weight: var(--sl-font-weight-semibold);\n    border-radius: var(--sl-border-radius-medium);\n    color: var(--sl-color-neutral-600);\n    padding: var(--sl-spacing-medium) var(--sl-spacing-large);\n    white-space: nowrap;\n    user-select: none;\n    cursor: pointer;\n    transition: var(--transition-speed) box-shadow, var(--transition-speed) color;\n  }\n\n  .tab:hover:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .tab:focus {\n    outline: none;\n  }\n\n  .tab${focusVisibleSelector}:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n    box-shadow: inset var(--sl-focus-ring);\n  }\n\n  .tab.tab--active:not(.tab--disabled) {\n    color: var(--sl-color-primary-600);\n  }\n\n  .tab.tab--closable {\n    padding-right: var(--sl-spacing-small);\n  }\n\n  .tab.tab--disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  .tab__close-button {\n    font-size: var(--sl-font-size-large);\n    margin-left: var(--sl-spacing-2x-small);\n  }\n\n  .tab__close-button::part(base) {\n    padding: var(--sl-spacing-3x-small);\n  }\n`;\n\nexport {\n  tab_styles_default\n};\n","import {\n  autoIncrement\n} from \"./chunk.KFR7NC2M.js\";\nimport {\n  tab_styles_default\n} from \"./chunk.ETKBJAAO.js\";\nimport {\n  LocalizeController\n} from \"./chunk.H2OTHIKD.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  emit\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/tab/tab.ts\nvar SlTab = class extends s {\n  constructor() {\n    super(...arguments);\n    this.localize = new LocalizeController(this);\n    this.attrId = autoIncrement();\n    this.componentId = `sl-tab-${this.attrId}`;\n    this.panel = \"\";\n    this.active = false;\n    this.closable = false;\n    this.disabled = false;\n  }\n  focus(options) {\n    this.tab.focus(options);\n  }\n  blur() {\n    this.tab.blur();\n  }\n  handleCloseClick() {\n    emit(this, \"sl-close\");\n  }\n  render() {\n    this.id = this.id.length > 0 ? this.id : this.componentId;\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      tab: true,\n      \"tab--active\": this.active,\n      \"tab--closable\": this.closable,\n      \"tab--disabled\": this.disabled\n    })}\n        role=\"tab\"\n        aria-disabled=${this.disabled ? \"true\" : \"false\"}\n        aria-selected=${this.active ? \"true\" : \"false\"}\n        tabindex=${this.disabled || !this.active ? \"-1\" : \"0\"}\n      >\n        <slot></slot>\n        ${this.closable ? $`\n              <sl-icon-button\n                part=\"close-button\"\n                exportparts=\"base:close-button__base\"\n                name=\"x\"\n                library=\"system\"\n                label=${this.localize.term(\"close\")}\n                class=\"tab__close-button\"\n                @click=${this.handleCloseClick}\n                tabindex=\"-1\"\n              ></sl-icon-button>\n            ` : \"\"}\n      </div>\n    `;\n  }\n};\nSlTab.styles = tab_styles_default;\n__decorateClass([\n  i(\".tab\")\n], SlTab.prototype, \"tab\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlTab.prototype, \"panel\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTab.prototype, \"active\", 2);\n__decorateClass([\n  e({ type: Boolean })\n], SlTab.prototype, \"closable\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlTab.prototype, \"disabled\", 2);\n__decorateClass([\n  e()\n], SlTab.prototype, \"lang\", 2);\nSlTab = __decorateClass([\n  n(\"sl-tab\")\n], SlTab);\n\nexport {\n  SlTab\n};\n","import { html } from 'lit';\n\n// Foi utilizado TemplateResult porque o editor.component.ts no usa ShadowDom\nexport const editorStyles = html`\n  <style>\n    :root {\n      --elemento-padding-factor: 20;\n      --eta-font-serif: 'Times New Roman', Times, serif;\n      --eta-font-sans: var(--sl-font-sans);\n    }\n\n    #lx-eta-box {\n      /* display: grid;\n      grid-template-columns: 1fr;\n      grid-template-rows: 42px calc(100% - 30px); */\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    /* #lx-eta-box .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      padding: 3px 10px 3px 10px;\n    } */\n\n    .ql-toolbar.ql-snow {\n      border: 1px solid #ccc;\n      box-sizing: border-box;\n      font-family: 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;\n      /* padding: 8px; */\n      display: flex;\n      flex-wrap: wrap;\n      align-items: center;\n      min-height: 55px;\n    }\n    #lx-eta-box .ql-snow.ql-toolbar button,\n    .ql-snow .ql-toolbar button {\n      /* height: 20px !important;\n      padding: 0px !important;\n      width: 24px !important;\n      margin: 0px !important; */\n      background: none;\n      border: none;\n      cursor: pointer;\n      display: inline-block;\n      float: left;\n      height: 24px;\n      padding: 3px 5px;\n      width: 28px;\n    }\n\n    #lx-eta-barra-ferramenta button:focus {\n      outline: 0;\n      border: 0px solid #f1f1f1;\n      -webkit-box-shadow: 0px;\n      box-shadow: none;\n    }\n\n    #lx-eta-barra-ferramenta .lx-eta-ql-button {\n      font-size: 1.1em;\n      color: #444444;\n    }\n\n    .lx-eta-rebate-180-graus {\n      -moz-transform: scaleX(-1);\n      -o-transform: scaleX(-1);\n      -webkit-transform: scaleX(-1);\n      transform: scaleX(-1);\n    }\n\n    #lx-eta-editor {\n      overflow-y: hidden;\n    }\n\n    #lx-eta-editor .ql-editor {\n      /* font-family: sans-serif, 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n        'Noto Color Emoji'; */\n      font-family: var(--eta-font-serif);\n      font-size: 18px;\n      line-height: 1.42;\n      color: #646260;\n      text-transform: none !important;\n      padding: 0 10px 0 8px;\n      min-height: 250px;\n      overflow-x: hidden;\n    }\n\n    #lx-eta-editor .ql-editor *:focus {\n      outline: 0;\n      border: 0px solid #f1f1f1;\n      -webkit-box-shadow: 0px;\n      box-shadow: none;\n    }\n\n    #lx-eta-editor .ql-editor label:before {\n      /* content: attr(data-rotulo) ' '; */\n    }\n\n    #toast-msg {\n      padding: 1em;\n      font-size: 1.1em;\n    }\n\n    .lx-eta-dropbtn {\n      background-color: transparent;\n      color: #444444;\n      width: 26px;\n      font-weight: bold;\n      vertical-align: middle;\n      border: none;\n      cursor: pointer;\n      text-align: center;\n    }\n\n    .container__menu sl-button::part(base) {\n      position: absolute;\n      margin: -13px 0 0 -15px;\n      background-color: #e1e1e1;\n      line-height: 20px;\n      height: 23px;\n      color: black;\n      font-weight: bold;\n      font-size: 15px;\n    }\n\n    .container__menu sl-menu-item::part(suffix) {\n      font-size: 14px;\n      padding-left: 20px;\n    }\n\n    .container__menu sl-menu-item:hover .lx-eta-dropbtn {\n      background-color: #e1e1e1;\n    }\n\n    .lx-eta-btn-desfazer {\n      margin-left: 10px;\n    }\n\n    .icon-undo-redo {\n      width: 19px;\n      height: 16px !important;\n    }\n\n    .icon-undo-redo:hover {\n      fill: #0066cc;\n    }\n\n    .icon-negrito {\n      fill: #444;\n    }\n\n    .icon-negrito:hover {\n      fill: #0066cc;\n    }\n\n    .icon-sublinhado {\n      fill: #444;\n    }\n\n    .icon-sublinhado:hover {\n      fill: #0066cc;\n    }\n\n    .lx-eta-dropdown-content-right {\n      right: 0;\n    }\n\n    .ql-snow .ql-hidden {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip::before {\n      content: 'Acesse a norma:';\n    }\n\n    .ql-snow .ql-tooltip a.ql-action::after {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip a.ql-remove::before {\n      display: none;\n    }\n\n    .ql-snow .ql-tooltip a.ql-preview {\n      max-width: 300px;\n    }\n\n    .btn--artigoOndeCouber {\n    }\n\n    .container__linha {\n      display: flex;\n      width: 100%;\n    }\n\n    .container__linha--reverse {\n      flex-direction: row-reverse;\n    }\n\n    .container__texto {\n      flex: 1;\n      white-space: pre-wrap;\n    }\n\n    .container_elemento--omissis .container__texto {\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n    }\n\n    .container_elemento--omissis .container__texto--mensagem {\n      flex: 1;\n      display: inline-block;\n    }\n\n    .container_elemento--omissis .texto__rotulo {\n      box-sizing: border-box;\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n      flex: none;\n      order: 0;\n      flex-grow: 0;\n    }\n\n    .container_elemento--omissis .texto__dispositivo {\n      display: flex;\n      flex-direction: row;\n      align-items: flex-start;\n      padding: 0px;\n      flex-grow: 1;\n    }\n\n    .container_elemento--omissis .texto__omissis {\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      flex-grow: 1;\n      width: 50px;\n      white-space: nowrap;\n    }\n\n    .elemento-tipo-capitulo .texto__dispositivo,\n    .elemento-tipo-titulo .texto__dispositivo,\n    .elemento-tipo-livro .texto__dispositivo,\n    .elemento-tipo-parte .texto__dispositivo {\n      text-transform: uppercase;\n    }\n\n    .elemento-tipo-secao .texto__dispositivo,\n    .elemento-tipo-subsecao .texto__dispositivo {\n      font-weight: bold;\n    }\n\n    .container__menu {\n      width: 30px;\n      vertical-align: top;\n      text-align: center;\n    }\n\n    .container__elemento--padrao {\n      width: 100%;\n      min-height: 26px;\n      border: 3px solid #ffffff;\n      line-height: 1.42;\n      margin: 0;\n      padding: 0 5px 0 0;\n    }\n\n    .container__elemento--articulacao {\n      width: 100%;\n      min-height: 1px;\n      line-height: 0.42;\n      margin: 1px;\n    }\n\n    .agrupador {\n      text-align: center;\n    }\n\n    label[pode-informar-numeracao='true'] {\n      cursor: pointer;\n      /* border-bottom: 1px dashed; */\n      -webkit-box-shadow: 0px -1px 0px green inset;\n      -moz-box-shadow: 0px -1px 0px green inset;\n      box-shadow: 0px -1px 0px green inset;\n    }\n\n    /* [existenanormaalterada] label:after, */\n    .existencia {\n      font-family: var(--sl-font-sans);\n      position: relative;\n      left: 5px;\n      top: -1px;\n      margin-right: 5px;\n      border: 1px solid green;\n      padding: 0 4px;\n      font-weight: normal;\n      -webkit-border-radius: 4px;\n      -moz-border-radius: 4px;\n      border-radius: 4px;\n      font-size: 12px;\n    }\n\n    .existencia {\n      margin-left: -10px;\n      margin-right: 15px;\n    }\n\n    .existencia:hover {\n      cursor: pointer;\n    }\n\n    /* [existenanormaalterada='true'] label:after {\n      content: 'Existente';\n    }\n\n    [existenanormaalterada='false'] label:after {\n      content: 'Novo';\n    } */\n\n    .texto__rotulo {\n      color: black;\n      font-weight: 600;\n    }\n\n    .texto__rotulo--padrao {\n      display: inline-block;\n      padding-right: 10px; /* Manter padding em vez de margin para evitar problema de layout ao apagar todo o texto do dispositivo.\n        Fica um sublinhado a mais, mas  melhor que a alternativa.\n      */\n    }\n\n    .texto__rotulo--omissis,\n    .tipo-omissis {\n      font-family: var(--sl-font-sans);\n      box-shadow: none;\n    }\n\n    .texto__rotulo--omissis:before,\n    .tipo-omissis {\n      position: relative;\n      left: 0;\n      top: -1px;\n      margin-right: 5px;\n      border: 1px solid green;\n      padding: 0 4px;\n      font-weight: normal;\n      -webkit-border-radius: 4px;\n      -moz-border-radius: 4px;\n      border-radius: 4px;\n      font-size: 12px;\n      white-space: nowrap;\n      display: none;\n    }\n\n    .agrupador .blot-tipo-omissis {\n      display: block;\n    }\n\n    /* .container__texto[tipo-omissis='inciso-caput'] .texto__rotulo--omissis:before {\n      content: ' Incisos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='inciso-paragrafo'] .texto__rotulo--omissis:before {\n      content: ' Incisos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='paragrafo'] .texto__rotulo--omissis:before {\n      content: ' Pargrafos omitidos ';\n    }\n\n    .container__texto[tipo-omissis='alinea'] .texto__rotulo--omissis:before {\n      content: ' Alneas omitidas ';\n    }\n\n    .container__texto[tipo-omissis='item'] .texto__rotulo--omissis:before {\n      content: ' Itens omitidos ';\n    } */\n\n    .Omissis {\n      word-break: break-all;\n      word-break: break-word;\n      -webkit-hyphens: auto;\n      -moz-hyphens: auto;\n      -ms-hyphens: auto;\n      hyphens: auto;\n    }\n\n    .agrupador .existencia {\n      margin-left: 0;\n      margin-right: 0;\n    }\n\n    .dispositivo--adicionado {\n      color: green;\n    }\n\n    .dispositivo--modificado {\n      color: blue;\n    }\n\n    .dispositivo--suprimido {\n      color: red;\n    }\n\n    .dispositivo--suprimido .texto__dispositivo {\n      text-decoration: line-through;\n    }\n\n    /* .texto--suprimido {\n      text-decoration: line-through;\n    } */\n\n    .ementa {\n      margin-bottom: 30px;\n    }\n\n    .ementa .container__texto {\n      margin-left: 35%;\n    }\n\n    .texto__rotulo--ementa {\n      display: none;\n    }\n\n    .container__elemento--ativo {\n      border: 3px solid #24d421;\n      border-radius: 4px;\n    }\n\n    .mensagem {\n      font-family: var(--sl-font-sans);\n      font-size: 0.8em;\n      font-weight: normal;\n      border: 1px solid;\n      padding: 4px 10px;\n      margin: 2px;\n      display: inline-block;\n      border-radius: 2px;\n    }\n\n    .mensagem--success {\n      color: #155724;\n      background-color: #d4edda;\n      border-color: #c3e6cb;\n    }\n\n    .mensagem--info {\n      color: #0c5460;\n      background-color: #d1ecf1;\n      border-color: #bee5eb;\n    }\n\n    .mensagem--warning {\n      color: #856404;\n      background-color: #fff3cd;\n      border-color: #ffeeba;\n    }\n\n    .mensagem--danger {\n      color: #721c24;\n      background-color: #f8d7da;\n      border-color: #f5c6cb;\n    }\n    .mensagem__fix {\n      color: blue;\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    #lx-eta-buffer {\n      display: none;\n      height: 0px;\n    }\n\n    /* [fecha-aspas]::after {\n      content: ' (' attr(nota-alteracao) ')';\n      font-weight: bold;\n    }\n\n    [abre-aspas]::before {\n      content: '';\n      font-weight: bold;\n    } */\n\n    .nota-alteracao,\n    .abre-aspas,\n    .fecha-aspas {\n      font-weight: bold;\n    }\n\n    .nota-alteracao[exibir],\n    .abre-aspas[exibir],\n    .fecha-aspas[exibir] {\n      display: inline;\n    }\n\n    .nota-alteracao:not([exibir]),\n    .abre-aspas:not([exibir]),\n    .fecha-aspas:not([exibir]) {\n      display: none;\n    }\n\n    .nota-alteracao-editavel {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    .texto__dispositivo {\n      display: inline;\n      /* background-color: lightblue; */\n    }\n\n    @-moz-document url-prefix() {\n      .agrupador .texto__dispositivo {\n        display: inline-block;\n        min-height: 1rem;\n      }\n    }\n\n    .blot-existencia br,\n    .blot-tipo-omissis br,\n    .agrupador.dispositivo-alteracao p[fecha-aspas] br,\n    .h-artigo br {\n      display: inline; /* faz o BR no pular linha em texto__dispositivo vazio */\n      content: ''; /* descola cursor do rtulo e remove quebra de linha quando \"(NR) */\n    }\n\n    .mobile-buttons {\n      float: right;\n      /* margin-right: 30px; */\n      width: auto !important;\n      display: none !important;\n    }\n\n    .mobile-button {\n      margin-right: 2px;\n      width: auto !important;\n    }\n\n    .mobile-button sl-icon {\n      font-size: 18px;\n    }\n\n    .mobile-button span {\n      vertical-align: 4px;\n    }\n\n    @media (max-width: 768px) {\n      .mobile-buttons {\n        display: inline-block !important;\n      }\n      #chk-em-revisao span {\n        display: none;\n      }\n      .button-navegacao-marca {\n        display: none;\n      }\n      sl-dialog {\n        --sl-font-size-large: 1rem;\n      }\n      .modal {\n        --sl-font-size-large: 1rem;\n      }\n    }\n\n    @media (max-width: 640px) {\n      .mobile-button span {\n        display: none;\n      }\n      .mobile-button:last-child {\n        display: none !important;\n      }\n    }\n\n    .revisao-ativa {\n      background-color: #add8e6 !important;\n    }\n\n    [em-revisao='true'] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    [excluido='true'] .texto__dispositivo {\n      text-decoration: line-through;\n      /* background-color: #d3d3d3; */\n    }\n\n    .blot__revisao {\n      padding: 3px 7px;\n      border: 1px solid white;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      top: -1px;\n    }\n\n    .blot__revisao_aceitar {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/check-lg.svg') no-repeat center, white;\n      background-size: 1rem;\n    }\n\n    .blot__revisao_aceitar:hover {\n      filter: invert(100%);\n    }\n\n    .blot__opcoes_diff {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/plus-minus.svg') no-repeat center, white;\n      background-size: 0.8rem;\n      margin-right: 1.2px;\n    }\n\n    .blot__opcoes_diff:hover {\n      filter: invert(100%);\n    }\n\n    .blot__revisao_recusar {\n      padding: 5px;\n      border: 1px solid black;\n      border-radius: 1rem;\n      background-color: rgb(217, 119, 6);\n      color: white;\n      cursor: pointer;\n      position: relative;\n      width: 1.3rem;\n      height: 1.3rem;\n      top: -1px;\n      background: url('assets/icons/x.svg') no-repeat center, white;\n      background-size: 1rem;\n    }\n\n    .blot__revisao_recusar:hover {\n      filter: invert(100%);\n    }\n\n    .blot__revisao_aceitar:focus,\n    .blot__opcoes_diff:focus .blot__revisao_recusar:focus {\n      outline: 1px solid #000;\n      border: 1px solid #000;\n    }\n\n    #chk-em-revisao {\n      border: 1px solid #ccc !important;\n      padding: 5px 10px !important;\n      border-radius: 20px !important;\n      margin-left: auto;\n      margin-right: 5px;\n      font-weight: bold;\n      background-color: #eee;\n    }\n    #chk-em-revisao[checked] {\n      background-color: var(--sl-color-blue-100);\n    }\n\n    .container__revisao {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      gap: 0.1rem;\n      @media (max-width: 768px) {\n        flex-direction: column;\n      }\n    }\n\n    .container__opcoes {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      margin-left: 0.1rem;\n      gap: 0.1rem;\n      @media (max-width: 768px) {\n        flex-direction: column;\n      }\n    }\n\n    @media (max-width: 480px) {\n      .lx-eta-btn-desfazer {\n        margin-left: 0px;\n      }\n    }\n\n    @media (max-width: 398px) {\n      .btn-dicas {\n        display: none !important;\n      }\n    }\n  </style>\n`;\n","import { Usuario } from './../model/revisao/usuario';\nimport '@shoelace-style/shoelace/dist/components/badge/badge';\nimport '@shoelace-style/shoelace/dist/components/tab-group/tab-group';\nimport '@shoelace-style/shoelace/dist/components/tab-panel/tab-panel';\nimport '@shoelace-style/shoelace/dist/components/tab/tab';\n\nimport { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query, state } from 'lit/decorators.js';\nimport { connect } from 'pwa-helpers';\n\nimport { editorStyles } from '../assets/css/editor.css';\nimport { quillSnowStyles } from '../assets/css/quill.snow.css';\nimport { shoelaceLightThemeStyles } from '../assets/css/shoelace.theme.light.css';\n\nimport { adicionarAlerta } from '../model/alerta/acao/adicionarAlerta';\nimport { removerAlerta } from '../model/alerta/acao/removerAlerta';\nimport { Autoria, ColegiadoApreciador, Emenda, Epigrafe, ModoEdicaoEmenda, Parlamentar, RefProposicaoEmendada, OpcoesImpressao, SubstituicaoTermo } from '../model/emenda/emenda';\nimport { buildFakeUrn, getAno, getNumero, getSigla, getTipo } from '../model/lexml/documento/urnUtil';\nimport { rootStore } from '../redux/store';\nimport { ClassificacaoDocumento } from './../model/documento/classificacao';\nimport { ProjetoNorma } from './../model/lexml/documento/projetoNorma';\nimport { ComandoEmendaComponent } from './comandoEmenda/comandoEmenda.component';\nimport { ComandoEmendaModalComponent } from './comandoEmenda/comandoEmenda.modal.component';\nimport { LexmlEtaComponent } from './lexml-eta.component';\nimport { limparAlertas } from '../model/alerta/acao/limparAlertas';\nimport { LexmlEmendaConfig } from '../model/lexmlEmendaConfig';\nimport { atualizarUsuarioAction } from '../model/lexml/acao/atualizarUsuarioAction';\nimport { getQuantidadeRevisoesAll, isRevisaoElemento, mostrarDialogDisclaimerRevisao, ordernarRevisoes, removeAtributosDoElemento } from '../redux/elemento/util/revisaoUtil';\nimport { Revisao, RevisaoElemento } from '../model/revisao/revisao';\nimport { ativarDesativarRevisaoAction } from '../model/lexml/acao/ativarDesativarRevisaoAction';\nimport { StateEvent, StateType } from '../redux/state';\nimport { limparRevisaoAction } from '../model/lexml/acao/limparRevisoes';\nimport { aplicarAlteracoesEmendaAction } from '../model/lexml/acao/aplicarAlteracoesEmenda';\nimport { buildContent, getUrn } from '../model/lexml/documento/conversor/buildProjetoNormaFromJsonix';\nimport { generoFromLetra } from '../model/dispositivo/genero';\nimport { Comissao } from './destino/comissao';\nimport { SubstituicaoTermoComponent } from './substituicao-termo/substituicao-termo.component';\nimport { NOTA_RODAPE_CHANGE_EVENT, NOTA_RODAPE_REMOVE_EVENT, NotaRodape } from './editor-texto-rico/notaRodape';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\nimport { DestinoComponent } from './destino/destino.component';\nimport { errorInicializarEdicaoAction } from '../model/lexml/acao/errorInicializarEdicaoAction';\n\n/**\n * Parmetros de inicializao de edio de documento\n */\nexport class LexmlEmendaParametrosEdicao {\n  modo = 'Emenda';\n\n  // Identificao da proposio (texto) emendado.\n  // Opcional se for informada a emenda ou o projetoNorma\n  proposicao?: {\n    sigla: string;\n    numero: string;\n    ano: string;\n    ementa: string;\n  };\n\n  // Preenchido automaticamente se for informada a emenda ou o projetoNorma\n  ementa = '';\n\n  // Indicao de matria oramentria. Utilizado inicalmente para definir destino de emenda a MP\n  isMateriaOrcamentaria = false;\n\n  // Texto json da proposio para emenda ou edio estruturada (modo 'emenda' ou 'edicao')\n  // Obrigatrio para modo 'emenda'\n  // Opcional para modo 'edicao'\n  projetoNorma?: ProjetoNorma;\n\n  // Emenda a ser aberta para edio\n  emenda?: Emenda;\n\n  // Motivo de uma nova emenda de texto livre\n  // Preenchido automaticamente se for informada a emenda\n  motivo = '';\n\n  // Identificao do usurio para registro de marcas de reviso\n  usuario?: Usuario;\n\n  // Preferncias de usurio ----\n\n  // Autoria padro\n  autoriaPadrao?: { identificacao: string; siglaCasaLegislativa: 'SF' | 'CD' };\n\n  // Opes de impresso padro\n  opcoesImpressaoPadrao?: { imprimirBrasao: boolean; textoCabecalho: string; tamanhoFonte: number };\n\n  // Casa legislativa resposavel pela apreciaao da emenda\n  casaLegislativa: 'SF' | 'CD' | 'CN' = 'CN';\n}\n\n@customElement('lexml-emenda')\nexport class LexmlEmendaComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Boolean }) existeObserverEmenda = false;\n  @property({ type: Number }) totalAlertas = 0;\n  @property({ type: Boolean }) exibirAjuda = true;\n  @property({ type: Array }) parlamentares: Parlamentar[] = [];\n  @property({ type: Array }) comissoes: Comissao[] = [];\n  @property({ type: Object }) lexmlEmendaConfig: LexmlEmendaConfig = new LexmlEmendaConfig();\n\n  private modo: any = ClassificacaoDocumento.EMENDA;\n\n  private urn = '';\n\n  private ementa = '';\n\n  private isMateriaOrcamentaria = false;\n\n  private projetoNorma: any;\n\n  private motivo = '';\n\n  private casaLegislativa = 'CN';\n\n  private parlamentaresCarregados = false;\n  private comissoesCarregadas = false;\n\n  // Para forar atualizao da interface\n  @state()\n  private updateState: any;\n\n  @state()\n  private notasRodape: NotaRodape[] = [];\n\n  @state()\n  autoria = new Autoria();\n\n  @query('lexml-substituicao-termo')\n  _substituicaoTermo?: SubstituicaoTermoComponent;\n\n  @query('lexml-eta')\n  _lexmlEta?: LexmlEtaComponent;\n  @query('#editor-texto-rico-emenda')\n  _lexmlEmendaTextoRico;\n  @query('#editor-texto-rico-justificativa')\n  _lexmlJustificativa;\n  @query('lexml-destino')\n  _lexmlDestino?: DestinoComponent;\n  @query('lexml-autoria')\n  _lexmlAutoria;\n  @query('lexml-data')\n  _lexmlData;\n  @query('lexml-opcoes-impressao')\n  _lexmlOpcoesImpressao;\n  @query('#tabs-esquerda')\n  _tabsEsquerda;\n  @query('#tabs-direita')\n  _tabsDireita;\n  @query('lexml-emenda-comando')\n  _lexmlEmendaComando!: ComandoEmendaComponent;\n\n  @query('lexml-emenda-comando-modal')\n  _lexmlEmendaComandoModal!: ComandoEmendaModalComponent;\n\n  @query('sl-split-panel')\n  private slSplitPanel!: any;\n\n  async getParlamentares(): Promise<Parlamentar[]> {\n    try {\n      const _response = await fetch(this.lexmlEmendaConfig.urlConsultaParlamentares);\n      const _parlamentares = await _response.json();\n      return _parlamentares.map(p => ({\n        identificacao: p.id + '',\n        nome: p.nome,\n        sexo: p.sexo,\n        siglaPartido: p.siglaPartido,\n        siglaUF: p.siglaUF,\n        siglaCasaLegislativa: p.siglaCasa,\n      }));\n    } catch (err) {\n      console.log('Erro inesperado ao carregar lista de parlamentares');\n      console.log(err);\n    } finally {\n      this.parlamentaresCarregados = true;\n      // this.habilitarBotoes();\n    }\n    return Promise.resolve([]);\n  }\n\n  async getComissoes(siglaCasaLegislativa: string): Promise<Comissao[]> {\n    try {\n      if (!this.lexmlEmendaConfig.urlComissoes) {\n        return Promise.resolve([]);\n      }\n      const _response = await fetch(`${this.lexmlEmendaConfig.urlComissoes}?siglaCasaLegislativa=${siglaCasaLegislativa}`);\n      const _comissoes = await _response.json();\n      return _comissoes\n        .filter(c => c.siglaCasaLegislativa === siglaCasaLegislativa)\n        .map(c => ({\n          siglaCasaLegislativa: c.siglaCasaLegislativa,\n          sigla: c.sigla,\n          nome: c.nome,\n        }));\n    } catch (err) {\n      console.log('Erro inesperado ao carregar lista de comisses');\n      console.log(err);\n    } finally {\n      this.comissoesCarregadas = true;\n      // this.habilitarBotoes();\n    }\n    return Promise.resolve([]);\n  }\n\n  atualizaListaParlamentares(): void {\n    this.getParlamentares().then(parlamentares => (this.parlamentares = parlamentares));\n  }\n\n  atualizaListaComissoes(): void {\n    this.getComissoes(this.casaLegislativa).then(comissoes => (this.comissoes = comissoes));\n  }\n\n  private montarColegiadoApreciador(sigla: string, numero: string, ano: string): ColegiadoApreciador {\n    if (sigla.toUpperCase() === 'MPV') {\n      return {\n        siglaCasaLegislativa: 'CN',\n        tipoColegiado: 'Comisso',\n        siglaComissao: `CMMPV ${numero}/${ano}`,\n      };\n    }\n    // Inicialmente registra destino plenrio do SF para demais matrias\n    return {\n      siglaCasaLegislativa: 'SF',\n      tipoColegiado: 'Plenrio',\n    };\n  }\n\n  private montarLocalFromColegiadoApreciador(colegiado: ColegiadoApreciador): any {\n    return colegiado.tipoColegiado === 'Comisso' ? 'Sala da comisso' : 'Sala das sesses';\n  }\n\n  private montarEmendaBasica(): Emenda {\n    const emenda = new Emenda();\n    emenda.modoEdicao = this.modo;\n    emenda.componentes[0].urn = this.urn;\n    emenda.proposicao = this.montarProposicaoPorUrn(this.urn, this.ementa);\n    return emenda;\n  }\n\n  private montarProposicaoPorUrn(urn: string, ementa: string): RefProposicaoEmendada {\n    if (urn) {\n      return {\n        urn: urn,\n        sigla: getSigla(urn),\n        numero: getNumero(urn),\n        ano: getAno(urn),\n        ementa: ementa,\n        identificacaoTexto: 'Texto inicial',\n      };\n    }\n    return new RefProposicaoEmendada();\n  }\n\n  getEmenda(): Emenda {\n    // Para evitar erros de referncia nula quando chamado antes da inicializao do componente\n    if (!this.urn) {\n      return new Emenda();\n    }\n\n    const emenda = this.montarEmendaBasica();\n    const numeroProposicao = emenda.proposicao.numero.replace(/^0+/, '');\n    if (this.isEmendaSubstituicaoTermo()) {\n      emenda.substituicaoTermo = this._substituicaoTermo!.getSubstituicaoTermo();\n      emenda.comandoEmenda = this._substituicaoTermo!.getComandoEmenda(this.urn);\n      emenda.comandoEmendaTextoLivre.texto = '';\n    } else if (this.isEmendaTextoLivre()) {\n      emenda.comandoEmendaTextoLivre.motivo = this.motivo;\n      emenda.comandoEmendaTextoLivre.texto = this._lexmlEmendaTextoRico.texto; // visualizar ? this.removeRevisaoFormat(this._lexmlEmendaTextoRico.texto) : this._lexmlEmendaTextoRico.texto;\n      emenda.anexos = this._lexmlEmendaTextoRico.anexos;\n      emenda.comandoEmendaTextoLivre.textoAntesRevisao = this._lexmlEmendaTextoRico.textoAntesRevisao;\n    } else {\n      emenda.comandoEmendaTextoLivre.texto = '';\n      emenda.componentes[0].dispositivos = this._lexmlEta!.getDispositivosEmenda()!;\n      emenda.comandoEmenda = this._lexmlEta!.getComandoEmenda();\n    }\n    emenda.justificativa = this._lexmlJustificativa.texto; // visualizar ? this.removeRevisaoFormat(this._lexmlJustificativa.texto) : this._lexmlJustificativa.texto;\n    emenda.notasRodape = this._lexmlJustificativa.notasRodape;\n    emenda.autoria = this._lexmlAutoria.getAutoriaAtualizada();\n    emenda.data = this._lexmlData.data || undefined;\n    emenda.opcoesImpressao = this._lexmlOpcoesImpressao.opcoesImpressao;\n    emenda.colegiadoApreciador = this._lexmlDestino!.colegiadoApreciador;\n    emenda.epigrafe = new Epigrafe();\n    emenda.epigrafe.texto = 'EMENDA N         ';\n    if (emenda.colegiadoApreciador.tipoColegiado !== 'Plenrio' && emenda.colegiadoApreciador.siglaComissao) {\n      emenda.epigrafe.texto += `- ${emenda.colegiadoApreciador.siglaComissao}`;\n    }\n\n    const generoProposicao = generoFromLetra(getTipo(emenda.proposicao.urn).genero);\n    emenda.epigrafe.complemento = `(${generoProposicao.artigoDefinidoPrecedidoPreposicaoASingular.trim()} ${emenda.proposicao.sigla} ${numeroProposicao}/${emenda.proposicao.ano})`;\n    emenda.local = this.montarLocalFromColegiadoApreciador(emenda.colegiadoApreciador);\n    emenda.revisoes = this.getRevisoes();\n    emenda.justificativaAntesRevisao = this._lexmlJustificativa.textoAntesRevisao;\n    return emenda;\n  }\n\n  private removeRevisaoFormat(texto: string): string {\n    let novoTexto = '';\n\n    if (texto !== '') {\n      texto = texto.replace(/<ins\\b[^>]*>(.*?)<\\/ins>/s, '');\n      texto = texto.replace(/<del\\b[^>]*>(.*?)<\\/del>/s, '');\n      novoTexto = texto;\n    }\n\n    return novoTexto;\n  }\n\n  private getRevisoes(): Revisao[] {\n    const revisoes = ordernarRevisoes([...rootStore.getState().elementoReducer.revisoes]);\n\n    revisoes.filter(isRevisaoElemento).forEach(r => {\n      const re = r as RevisaoElemento;\n      removeAtributosDoElemento(re.elementoAposRevisao);\n      re.elementoAntesRevisao && removeAtributosDoElemento(re.elementoAntesRevisao);\n    });\n\n    return revisoes;\n  }\n\n  inicializarEdicao(params: LexmlEmendaParametrosEdicao): void {\n    try {\n      this._lexmlEmendaComando.emenda = [];\n      this.modo = params.modo;\n      this.projetoNorma = params.projetoNorma;\n      this.isMateriaOrcamentaria = params.isMateriaOrcamentaria || (!!params.emenda && params.emenda.colegiadoApreciador.siglaComissao === 'CMO');\n      this._lexmlDestino!.isMateriaOrcamentaria = this.isMateriaOrcamentaria;\n\n      this.inicializaProposicao(params);\n\n      this.motivo = params.motivo;\n      if (this.isEmendaTextoLivre() && params.emenda) {\n        this.motivo = params.emenda.comandoEmendaTextoLivre.motivo || 'Motivo no informado na emenda';\n      }\n\n      this.setUsuario(params.usuario ?? rootStore.getState().elementoReducer.usuario);\n\n      if (!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo()) {\n        this._lexmlEta!.inicializarEdicao(this.modo, this.urn, params.projetoNorma, !!params.emenda);\n      }\n\n      if (params.emenda) {\n        this.casaLegislativa = params.emenda.colegiadoApreciador.siglaCasaLegislativa ?? 'CN';\n        this.setEmenda(params.emenda);\n      } else {\n        this.casaLegislativa = this.inicializaColegiadoApreciador(params);\n        this.resetaEmenda(params);\n      }\n\n      this.atualizaListaComissoes();\n\n      this.limparAlertas();\n\n      if (this.isEmendaTextoLivre() && this._lexmlEmendaTextoRico.isEditorVazio()) {\n        this.showAlertaEmendaTextoLivre();\n      }\n      setTimeout(this.handleResize, 0);\n\n      if (!params.emenda?.revisoes?.length) {\n        this.desativarMarcaRevisao();\n      }\n\n      this._tabsEsquerda.show('lexml-eta');\n\n      if (this.modo.startsWith('emenda') && !this.isEmendaTextoLivre()) {\n        setTimeout(() => {\n          this._tabsDireita?.show('comando');\n        });\n      } else {\n        setTimeout(() => {\n          this._tabsDireita?.show('notas');\n        });\n      }\n\n      this.updateView();\n    } catch (err) {\n      console.error(err);\n      setTimeout(() => {\n        rootStore.dispatch(errorInicializarEdicaoAction.execute(err));\n      }, 0);\n    }\n  }\n\n  private inicializaColegiadoApreciador(params: LexmlEmendaParametrosEdicao): string {\n    const siglaProposicao = params.emenda?.proposicao.sigla ?? '';\n    return ['MPV', 'PDN', 'PRN'].indexOf(siglaProposicao) > -1 ? 'CN' : params.casaLegislativa;\n  }\n\n  public trocarModoEdicao(modo: string, motivo = ''): void {\n    if (this.modo === modo) {\n      console.log('Ignorando tentativa de mudana para o mesmo modo de edio.');\n      return;\n    }\n\n    if (!this.projetoNorma && modo === 'emenda') {\n      throw 'No  possvel trocar para o modo \"emenda\" quando no h texto da proposio.';\n    }\n\n    this._lexmlEmendaComando.emenda = [];\n    this.modo = modo;\n\n    this.motivo = motivo;\n    if (this.isEmendaTextoLivre() && !this.motivo) {\n      throw 'Deve ser informado um motivo para a emenda de texto livre.';\n    }\n\n    if (!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo()) {\n      this._lexmlEta!.inicializarEdicao(this.modo, this.urn, this.projetoNorma, false);\n    }\n\n    rootStore.dispatch(limparAlertas());\n\n    if (this.isEmendaTextoLivre()) {\n      this._lexmlEmendaTextoRico.setContent('');\n      this._lexmlEmendaTextoRico.anexos = [];\n    } else if (this.isEmendaSubstituicaoTermo()) {\n      this._substituicaoTermo!.setSubstituicaoTermo(new SubstituicaoTermo());\n    }\n\n    this.limparAlertas();\n\n    if (this.isEmendaTextoLivre() && this._lexmlEmendaTextoRico.isEditorVazio()) {\n      this.showAlertaEmendaTextoLivre();\n    }\n    setTimeout(this.handleResize, 0);\n\n    this._tabsEsquerda.show('lexml-eta');\n\n    if (this.modo.startsWith('emenda') && !this.isEmendaTextoLivre()) {\n      setTimeout(() => {\n        this._tabsDireita?.show('comando');\n      });\n    } else {\n      setTimeout(() => {\n        this._tabsDireita?.show('notas');\n      });\n    }\n\n    this.updateView();\n  }\n\n  private inicializaProposicao(params: LexmlEmendaParametrosEdicao): void {\n    this.urn = '';\n    this.ementa = '';\n\n    if (params.proposicao) {\n      // Preferncia para a proposio informada\n      this.urn = buildFakeUrn(params.proposicao.sigla, params.proposicao.numero, params.proposicao.ano);\n      this.ementa = params.proposicao.ementa; // Preferncia para a ementa informada\n    }\n\n    // Se no forem informados, utilizar da Emenda\n    if (params.emenda) {\n      if (!this.urn) {\n        this.urn = params.emenda.proposicao.urn;\n      }\n      if (!this.ementa) {\n        this.ementa = params.emenda.proposicao.ementa;\n      }\n    }\n\n    // Por ltimo do ProjetoNorma\n    if (this.projetoNorma) {\n      if (!this.urn) {\n        this.urn = getUrn(this.projetoNorma);\n      }\n      if (!this.ementa) {\n        this.ementa = this.getEmentaFromProjetoNorma(this.projetoNorma);\n      }\n    }\n  }\n\n  getEmentaFromProjetoNorma(projetoNorma: any): string {\n    return buildContent(projetoNorma.value?.projetoNorma?.norma?.parteInicial?.ementa.content);\n  }\n\n  stateChanged(state: any): void {\n    const revisaoAtivada = state?.elementoReducer?.ui?.events?.some((ev: StateEvent) => ev.stateType === StateType.RevisaoAtivada);\n    const revisaoDesativada = state?.elementoReducer?.ui?.events?.some((ev: StateEvent) => ev.stateType === StateType.RevisaoDesativada);\n    revisaoAtivada && this.mostrarDialogDisclaimerRevisao();\n    if (revisaoAtivada || revisaoDesativada) {\n      this.emitiEventoOnRevisao(rootStore.getState().elementoReducer.emRevisao);\n    }\n  }\n\n  private emitiEventoOnRevisao(emRevisao: boolean): void {\n    this.dispatchEvent(\n      new CustomEvent('onrevisao', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          emRevisao,\n        },\n      })\n    );\n  }\n\n  private desativarMarcaRevisao = (): void => {\n    if (rootStore.getState().elementoReducer.emRevisao) {\n      const quantidade = getQuantidadeRevisoesAll(rootStore.getState().elementoReducer.revisoes);\n      if (quantidade === 0) {\n        rootStore.dispatch(ativarDesativarRevisaoAction.execute(quantidade));\n      }\n    }\n  };\n\n  public setUsuario(usuario = new Usuario()): void {\n    rootStore.dispatch(atualizarUsuarioAction.execute(usuario));\n  }\n\n  private setEmenda(emenda: Emenda): void {\n    rootStore.dispatch(limparAlertas());\n\n    if (!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo()) {\n      this._lexmlEta!.setDispositivosERevisoesEmenda(emenda.componentes[0].dispositivos, emenda.revisoes);\n    }\n\n    this._lexmlAutoria.autoria = emenda.autoria;\n    this._lexmlOpcoesImpressao.opcoesImpressao = emenda.opcoesImpressao;\n    this._lexmlJustificativa.setTextoAntesRevisao(emenda.justificativaAntesRevisao);\n    this._lexmlDestino!.colegiadoApreciador = emenda.colegiadoApreciador;\n    this._lexmlDestino!.proposicao = emenda.proposicao;\n    this.notasRodape = emenda.notasRodape || [];\n    this._lexmlJustificativa.setContent(emenda.justificativa, emenda.notasRodape);\n\n    if (this.isEmendaTextoLivre()) {\n      this._lexmlEmendaTextoRico.setContent(emenda?.comandoEmendaTextoLivre.texto || '');\n      this._lexmlEmendaTextoRico.anexos = emenda.anexos || [];\n      this._lexmlEmendaTextoRico.setTextoAntesRevisao(emenda.comandoEmendaTextoLivre.textoAntesRevisao);\n      rootStore.dispatch(aplicarAlteracoesEmendaAction.execute(emenda.componentes[0].dispositivos, emenda.revisoes));\n    } else if (this.isEmendaSubstituicaoTermo()) {\n      this._substituicaoTermo!.setSubstituicaoTermo(emenda.substituicaoTermo || new SubstituicaoTermo());\n    }\n    this._lexmlData.data = emenda.data;\n  }\n\n  private resetaEmenda(params: LexmlEmendaParametrosEdicao): void {\n    const emenda = new Emenda();\n    emenda.modoEdicao = params.modo as ModoEdicaoEmenda;\n    emenda.proposicao = this.montarProposicaoPorUrn(this.urn, params.ementa);\n    emenda.autoria = this.montarAutoriaPadrao(params);\n    emenda.opcoesImpressao = this.montarOpcoesImpressaoPadrao(params);\n    emenda.colegiadoApreciador.siglaCasaLegislativa = params.casaLegislativa;\n    this._lexmlEmendaComando.emenda = {};\n    this.setEmenda(emenda);\n    rootStore.dispatch(limparRevisaoAction.execute());\n  }\n\n  private montarAutoriaPadrao(params: LexmlEmendaParametrosEdicao): Autoria {\n    const autoria = new Autoria();\n    const autoriaPadrao = params.autoriaPadrao;\n    const parlamentarAutor = this.parlamentares.find(par => par.identificacao === autoriaPadrao?.identificacao && par.siglaCasaLegislativa === autoriaPadrao?.siglaCasaLegislativa);\n\n    if (parlamentarAutor) {\n      autoria.parlamentares = [parlamentarAutor];\n    }\n    return autoria;\n  }\n\n  private montarOpcoesImpressaoPadrao(params: LexmlEmendaParametrosEdicao): OpcoesImpressao {\n    const opcoesImpressao = new OpcoesImpressao();\n    if (params.opcoesImpressaoPadrao) {\n      opcoesImpressao.imprimirBrasao = params.opcoesImpressaoPadrao.imprimirBrasao;\n      opcoesImpressao.textoCabecalho = params.opcoesImpressaoPadrao.textoCabecalho;\n      opcoesImpressao.tamanhoFonte = params.opcoesImpressaoPadrao.tamanhoFonte;\n    }\n    return opcoesImpressao;\n  }\n\n  constructor() {\n    super();\n    this.addEventListener(NOTA_RODAPE_CHANGE_EVENT, this.onChangeNotasRodape);\n    this.addEventListener(NOTA_RODAPE_REMOVE_EVENT, this.onChangeNotasRodape);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  private MOBILE_WIDTH = 768;\n  private splitPanelPosition = 67;\n  private sizeMode = '';\n\n  private updateLayoutSplitPanel(forceUpdate = false): void {\n    if (this.sizeMode === 'desktop') {\n      this.slSplitPanel.position = this.splitPanelPosition;\n    }\n\n    if (window.innerWidth <= this.MOBILE_WIDTH && (this.sizeMode !== 'mobile' || forceUpdate)) {\n      this.sizeMode = 'mobile';\n      this.slSplitPanel.position = 100;\n      this.slSplitPanel.setAttribute('disabled', 'true');\n    } else if (window.innerWidth > this.MOBILE_WIDTH && (this.sizeMode !== 'desktop' || forceUpdate)) {\n      this.sizeMode = 'desktop';\n      this.slSplitPanel.position = this.splitPanelPosition;\n      this.slSplitPanel.removeAttribute('disabled');\n    }\n  }\n\n  // Documentao de tratamento de eventos no Lit\n  // https://lit.dev/docs/components/events/\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    window.addEventListener('resize', this.handleResize);\n  }\n\n  disconnectedCallback(): void {\n    window.removeEventListener('resize', this.handleResize);\n    super.disconnectedCallback();\n  }\n\n  handleResize = (): void => {\n    this.updateLayoutSplitPanel();\n    this.ajustarAltura();\n  };\n\n  protected firstUpdated(): void {\n    // this.habilitarBotoes();\n    setTimeout(() => this.atualizaListaParlamentares(), 0);\n    // setTimeout(() => this.atualizaListaComissoes(), 0);\n\n    this._tabsEsquerda?.addEventListener('sl-tab-show', (event: any) => {\n      const tabName = event.detail.name;\n      if (tabName === 'avisos') {\n        const badge = (event.target as Element).querySelector('sl-badge');\n        if (badge) {\n          badge.pulse = false;\n        }\n      } else if (tabName === 'autoria') {\n        this.parlamentares.length === 0 && this.atualizaListaParlamentares();\n        // this.comissoes?.length === 0 && this.atualizaListaComissoes();\n      }\n    });\n\n    this.slSplitPanel.addEventListener('sl-reposition', () => {\n      this.ajustarAltura();\n    });\n\n    const badgeAtalhos = this._tabsDireita?.querySelector('#badgeAtalhos');\n    if (badgeAtalhos) {\n      const naoPulsarBadgeAtalhos = localStorage.getItem('naoPulsarBadgeAtalhos');\n      if (!naoPulsarBadgeAtalhos) {\n        badgeAtalhos.pulse = true;\n        badgeAtalhos.setAttribute('variant', 'warning');\n      }\n    }\n\n    this._tabsDireita?.addEventListener('sl-tab-show', (event: any) => {\n      const tabName = event.detail.name;\n      if (tabName === 'atalhos') {\n        const badge = (event.target as Element).querySelector('sl-badge');\n        if (badge) {\n          badge.pulse = false;\n          badge.setAttribute('variant', 'primmay');\n        }\n        localStorage.setItem('naoPulsarBadgeAtalhos', 'true');\n      }\n    });\n  }\n\n  updated(): void {\n    // if (this.modo.startsWith('emenda') && !this.isEmendaTextoLivre()) {\n    //   this.slSplitPanel.removeAttribute('disabled');\n    //   this.slSplitPanel.position = this.splitPanelPosition;\n    // } else {\n    //   this.slSplitPanel.setAttribute('disabled', 'true');\n    //   this.slSplitPanel.position = 100;\n    // }\n  }\n\n  private pesquisarAlturaParentElement(elemento): number {\n    if (elemento.parentElement === null) {\n      // chegou no HTML e no encontrou altura\n      return 0;\n    } else {\n      const minHeight = getComputedStyle(this).getPropertyValue('--min-height').replace('px', '');\n      if (elemento.clientHeight >= minHeight) {\n        return elemento.clientHeight;\n      } else {\n        return this.pesquisarAlturaParentElement(elemento.parentElement);\n      }\n    }\n  }\n\n  private ajustarAltura(altura?: number): boolean {\n    const alturaElementoBase = altura ?? this.pesquisarAlturaParentElement(this);\n    const lexmlEtaTabs = document.querySelector('sl-tab-group')?.shadowRoot?.querySelector('.tab-group__nav-container');\n    const alturaLexmlEtaTabs = lexmlEtaTabs?.clientHeight;\n\n    if (!alturaLexmlEtaTabs) return false;\n\n    const alturaElemento = alturaElementoBase - alturaLexmlEtaTabs - 12;\n    if (alturaElemento <= 0) return false;\n\n    const getElement = (selector: string): HTMLElement => document.querySelector(selector) as HTMLElement;\n\n    const justificativaTabPanel = getElement('sl-tab-panel[name=\"justificativa\"]');\n    const emendaTabPanel = getElement('sl-tab-panel[name=\"lexml-eta\"]');\n    const qlToolbarJustificativa = getElement('#editor-texto-rico-justificativa .ql-toolbar');\n    const qlToolbarEmenda = getElement('#lx-eta-barra-ferramenta');\n\n    const estilosOriginais = {\n      justificativa: {\n        display: justificativaTabPanel.style.display,\n        opacity: justificativaTabPanel.style.opacity,\n        pointerEvents: justificativaTabPanel.style.pointerEvents,\n      },\n      emenda: {\n        display: emendaTabPanel.style.display,\n        opacity: emendaTabPanel.style.opacity,\n        pointerEvents: emendaTabPanel.style.pointerEvents,\n      },\n    };\n\n    const setTabPanelStyles = (tabPanel: HTMLElement, estilos: any, isTemporary = false): void => {\n      if (isTemporary) {\n        tabPanel.style.opacity = '0';\n        tabPanel.style.pointerEvents = 'none';\n        tabPanel.style.display = 'block';\n      } else {\n        tabPanel.style.opacity = estilos.opacity;\n        tabPanel.style.pointerEvents = estilos.pointerEvents;\n        tabPanel.style.display = estilos.display;\n      }\n    };\n\n    if (estilosOriginais.justificativa.display === 'none') {\n      setTabPanelStyles(justificativaTabPanel, estilosOriginais.justificativa, true);\n    }\n    if (estilosOriginais.emenda.display === 'none') {\n      setTabPanelStyles(emendaTabPanel, estilosOriginais.emenda, true);\n    }\n\n    const alturaToolBarJustificativa = qlToolbarJustificativa?.clientHeight + 10;\n    const alturaToolBarEmenda = qlToolbarEmenda?.clientHeight + 10;\n\n    setTabPanelStyles(justificativaTabPanel, estilosOriginais.justificativa);\n    setTabPanelStyles(emendaTabPanel, estilosOriginais.emenda);\n\n    this.style.setProperty('--heightJustificativa', `${alturaElemento - alturaToolBarJustificativa}px`);\n    this.style.setProperty('--heightEmenda', `${alturaElemento - alturaToolBarEmenda}px`);\n    this.style.setProperty('--height', `${alturaElemento}px`);\n    this.style.setProperty('--overflow', 'hidden');\n\n    return true;\n  }\n\n  private onChange(): void {\n    let comandoEmenda = null as any;\n    if (this.isEmendaSubstituicaoTermo()) {\n      comandoEmenda = this._substituicaoTermo!.getComandoEmenda(this.urn);\n      this._lexmlEmendaComando.emenda = comandoEmenda;\n      this._lexmlEmendaComandoModal.atualizarComandoEmenda(comandoEmenda);\n    } else if (this.isEmendaTextoLivre()) {\n      if (!this._lexmlEmendaTextoRico.isEditorVazio() && this._lexmlJustificativa.isEditorVazio()) {\n        this.disparaAlerta();\n      } else {\n        rootStore.dispatch(removerAlerta('alerta-global-justificativa'));\n      }\n      if (this._lexmlEmendaTextoRico.isEditorVazio()) {\n        this.showAlertaEmendaTextoLivre();\n      } else {\n        rootStore.dispatch(removerAlerta('alerta-global-emenda-texto-livre'));\n      }\n    }\n\n    if (!this.isEmendaTextoLivre()) {\n      this.buildAlertaJustificativa(comandoEmenda);\n    }\n  }\n\n  buildAlertaJustificativa(comandoEmenda: any): void {\n    if (comandoEmenda === null) {\n      comandoEmenda = this._lexmlEta!.getComandoEmenda();\n      this._lexmlEmendaComando.emenda = comandoEmenda;\n      this._lexmlEmendaComandoModal.atualizarComandoEmenda(comandoEmenda);\n    }\n\n    if (comandoEmenda !== null && comandoEmenda.comandos?.length > 0 && this._lexmlJustificativa.isEditorVazio()) {\n      this.disparaAlerta();\n    } else {\n      rootStore.dispatch(removerAlerta('alerta-global-justificativa'));\n    }\n  }\n\n  disparaAlerta(): void {\n    const alerta = {\n      id: 'alerta-global-justificativa',\n      tipo: 'error',\n      mensagem: 'A emenda no possui uma justificao',\n      podeFechar: false,\n    };\n    rootStore.dispatch(adicionarAlerta(alerta));\n  }\n\n  getJustificativa(): string {\n    return '';\n  }\n\n  limparAlertas(): void {\n    rootStore.dispatch(limparAlertas());\n  }\n\n  showAlertaEmendaTextoLivre(): void {\n    const alerta = {\n      id: 'alerta-global-emenda-texto-livre',\n      tipo: 'error',\n      mensagem: 'O comando de emenda deve ser preenchido.',\n      podeFechar: false,\n    };\n    rootStore.dispatch(adicionarAlerta(alerta));\n  }\n\n  mostrarDialogDisclaimerRevisao(): void {\n    mostrarDialogDisclaimerRevisao();\n  }\n\n  private isEmendaTextoLivre(): boolean {\n    return this.modo && this.modo === 'emendaTextoLivre';\n  }\n\n  private isEmendaSubstituicaoTermo(): boolean {\n    return this.modo === 'emendaSubstituicaoTermo';\n  }\n\n  private updateView(): void {\n    this.updateState = new Date();\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${shoelaceLightThemeStyles} ${quillSnowStyles} ${editorStyles}\n      <style>\n        :root {\n          --height: 100%;\n          --overflow: visible;\n          --min-height: 300px;\n          --heightJustificativa: 100%;\n          --heightEmenda: 100%;\n          --visibilityNotasAcao: hidden;\n        }\n        sl-tab-panel {\n          --padding: 0px;\n        }\n        sl-tab-panel::part(base) {\n          height: var(--height);\n        }\n        sl-tab-panel.overflow-hidden::part(base) {\n          overflow-y: auto;\n        }\n        lexml-emenda-comando {\n          font-family: var(--eta-font-serif);\n          display: ${this.modo.startsWith('emenda') && !this.isEmendaTextoLivre() ? 'block' : 'none'};\n          height: 100%;\n        }\n        lexml-eta {\n          font-family: var(--eta-font-serif);\n          text-align: left;\n        }\n        /* #editor-texto-rico-justificativa #editor-texto-rico {\n          height: calc(var(--height) - 44px);\n          overflow: var(--overflow);\n        } */\n\n        #editor-texto-rico-emenda-inner {\n          height: calc(var(--heightJustificativa));\n          overflow: var(--overflow);\n        }\n        #editor-texto-rico-justificativa-inner {\n          height: calc(var(--heightJustificativa));\n          overflow: var(--overflow);\n        }\n        .badge-pulse {\n          margin-left: 7px;\n          height: 16px;\n          margin-top: -4px;\n        }\n\n        #badgeAtalhos::part(base) {\n          height: 16px;\n          margin-top: 2px;\n          font-size: var(--sl-font-size-small);\n          background-color: transparent;\n          color: var(--sl-color-neutral-600);\n        }\n        sl-tab[panel='atalhos'][active] #badgeAtalhos::part(base) {\n          color: var(--sl-color-primary-600);\n        }\n\n        sl-split-panel {\n          --divider-width: 15px;\n        }\n        sl-tab sl-icon {\n          margin-right: 5px;\n          font-size: 18px;\n        }\n        .tab-autoria__container {\n          padding: 10px;\n        }\n        .notas-rodape {\n          font-family: var(--eta-font-serif);\n          font-style: normal;\n          padding: 10px;\n        }\n        .notas-rodape h4 {\n          font-family: var(--eta-font-sans);\n          font-style: normal;\n          padding: 1rem 0px 0.5rem;\n          margin: 0px;\n        }\n        .notas-texto-vazio {\n          padding-left: 20px;\n          color: var(--sl-color-gray-500);\n          font-style: italic;\n        }\n\n        .notas-rodape ol {\n          padding-left: 20px;\n          list-style: none;\n          counter-reset: item;\n          margin: 0px;\n        }\n\n        .notas-rodape li {\n          padding: 0px;\n          position: relative;\n          cursor: pointer;\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .notas-rodape li:hover {\n          --visibilityNotasAcao: visible;\n          background-color: var(--sl-color-gray-100);\n        }\n\n        .notas-rodape li::before {\n          content: counter(item);\n          counter-increment: item;\n          position: absolute;\n          width: 20px;\n          left: -20px;\n          top: 4px;\n          font-size: smaller;\n          vertical-align: super;\n          font-weight: bold;\n          font-size: 12px;\n          color: var(--sl-color-gray-500);\n          text-align: right;\n        }\n\n        .notas-texto {\n          flex-grow: 1;\n          cursor: pointer;\n          padding: 5px;\n          color: var(--sl-color-gray-500);\n        }\n\n        .notas-texto p {\n          margin-block-start: 0;\n          margin-block-end: 0;\n        }\n\n        .notas-acoes {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n\n        .notas-acao {\n          margin-left: 5px;\n          visibility: var(--visibilityNotasAcao);\n          cursor: pointer;\n        }\n\n        .notas-checkbox {\n          appearance: none;\n          background: transparent;\n          display: none;\n        }\n\n        .notas-checkbox:checked + .notas-texto {\n          color: black;\n          font-style: italic;\n        }\n\n        @media (max-width: 768px) {\n          sl-split-panel {\n            --divider-width: 0px;\n          }\n        }\n      </style>\n\n      <sl-split-panel position=\"67\">\n        <sl-icon slot=\"handle\" name=\"grip-vertical\"></sl-icon>\n        <div slot=\"start\">\n          <sl-tab-group id=\"tabs-esquerda\">\n            <sl-tab slot=\"nav\" panel=\"lexml-eta\">Texto</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"justificativa\">Justificao</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"autoria\">Destino, Data, Autoria e Impresso</sl-tab>\n            <sl-tab slot=\"nav\" panel=\"avisos\">\n              Avisos\n              <div class=\"badge-pulse\" id=\"contadorAvisos\">${this.totalAlertas > 0 ? html` <sl-badge variant=\"danger\" pill pulse>${this.totalAlertas}</sl-badge> ` : ''}</div>\n            </sl-tab>\n            <sl-tab-panel name=\"lexml-eta\" class=\"overflow-hidden\">\n              <lexml-eta\n                style=\"display: ${!this.isEmendaTextoLivre() && !this.isEmendaSubstituicaoTermo() ? 'block' : 'none'}\"\n                id=\"lexmlEta\"\n                .lexmlEtaConfig=${this.lexmlEmendaConfig}\n                @onchange=${this.onChange}\n              ></lexml-eta>\n              <editor-texto-rico\n                style=\"display: ${this.isEmendaTextoLivre() ? 'block' : 'none'}\"\n                modo=\"textoLivre\"\n                id=\"editor-texto-rico-emenda\"\n                registroEvento=\"justificativa\"\n                @onchange=${this.onChange}\n              ></editor-texto-rico>\n              <lexml-substituicao-termo style=\"display: ${this.isEmendaSubstituicaoTermo() ? 'block' : 'none'}\" @onchange=${this.onChange}></lexml-substituicao-termo>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"justificativa\" class=\"overflow-hidden\">\n              <editor-texto-rico\n                .lexmlEtaConfig=${this.lexmlEmendaConfig}\n                modo=\"justificativa\"\n                id=\"editor-texto-rico-justificativa\"\n                registroEvento=\"justificativa\"\n                @onchange=${this.onChange}\n              ></editor-texto-rico>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"autoria\" class=\"overflow-hidden\">\n              <div class=\"tab-autoria__container\">\n                <lexml-destino .comissoes=${this.comissoes}></lexml-destino>\n                <br />\n                <lexml-data></lexml-data>\n                <br />\n                <lexml-autoria .parlamentares=${this.parlamentares}></lexml-autoria>\n                <lexml-opcoes-impressao></lexml-opcoes-impressao>\n              </div>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"avisos\" class=\"overflow-hidden\">\n              <lexml-eta-alertas></lexml-eta-alertas>\n            </sl-tab-panel>\n          </sl-tab-group>\n        </div>\n        <div slot=\"end\">\n          <sl-tab-group id=\"tabs-direita\">\n            ${this.tabIsVisible('comando')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"comando\">\n                    <sl-icon name=\"code\"></sl-icon>\n                    Comando\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('notas')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"notas\" title=\"Notas de rodap\">\n                    <sl-badge variant=\"primary\" id=\"badgeAtalhos\" pill>\n                      <sl-icon name=\"footnote\"></sl-icon>\n                      Notas\n                    </sl-badge>\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('dicas')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"dicas\">\n                    <sl-icon name=\"lightbulb\"></sl-icon>\n                    Dicas\n                  </sl-tab>\n                `\n              : ''}\n            ${this.tabIsVisible('atalhos')\n              ? html`\n                  <sl-tab slot=\"nav\" panel=\"atalhos\">\n                    <sl-badge variant=\"primary\" id=\"badgeAtalhos\" pill>\n                      <sl-icon name=\"keyboard\"></sl-icon>\n                      Atalhos\n                    </sl-badge>\n                  </sl-tab>\n                `\n              : ''}\n            <sl-tab-panel name=\"comando\" class=\"overflow-hidden\">\n              <lexml-emenda-comando></lexml-emenda-comando>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"notas\" class=\"overflow-hidden\">\n              <div class=\"notas-rodape\">\n                <h4>Notas de rodap</h4>\n                ${this.renderNotasRodape()}\n              </div>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"dicas\" class=\"overflow-hidden\">\n              <lexml-ajuda></lexml-ajuda>\n            </sl-tab-panel>\n            <sl-tab-panel name=\"atalhos\" class=\"overflow-hidden\">\n              <lexml-eta-atalhos></lexml-eta-atalhos>\n            </sl-tab-panel>\n          </sl-tab-group>\n        </div>\n      </sl-split-panel>\n    `;\n  }\n\n  tabIsVisible(tab: string): boolean {\n    if ((tab === 'atalhos' || tab === 'dicas') && this.modo === 'emendaSubstituicaoTermo') {\n      return false;\n    } else if (tab === 'notas' && (this.isEmendaTextoLivre() || this.modo === 'edicao')) {\n      return true;\n    }\n    return this.modo.startsWith('emenda') && !this.isEmendaTextoLivre();\n  }\n\n  onChangeNotasRodape(): void {\n    this.notasRodape = this._lexmlJustificativa.notasRodape;\n    this.focusOnTab('notas');\n  }\n\n  renderNotasRodape(): TemplateResult {\n    return !this.notasRodape.length\n      ? html`<span class=\"notas-texto-vazio\">No h notas de rodap registradas.</span>`\n      : html`\n          <ol>\n            ${this._lexmlJustificativa.notasRodape.map(\n              (nr: NotaRodape) =>\n                html`\n                  <li>\n                    <input type=\"checkbox\" idNotaRodape=\"${nr.id}\" class=\"notas-checkbox\" id=\"checkbox-${nr.id}\" @change=${() => this.selecionarNotaRodape(nr.id)} />\n                    <label for=\"checkbox-${nr.id}\" class=\"notas-texto\">${unsafeHTML(nr.texto)}</label>\n                    <span class=\"notas-acoes\">\n                      <sl-button\n                        class=\"notas-acao\"\n                        variant=\"default\"\n                        size=\"small\"\n                        aria-label=\"Editar nota de rodap\"\n                        title=\"Editar nota de rodap\"\n                        idNotaRodape=\"${nr.id}\"\n                        @click=${this.editarNotaRodape}\n                      >\n                        <sl-icon slot=\"prefix\" name=\"pencil-square\"></sl-icon>\n                      </sl-button>\n                      <sl-button\n                        class=\"notas-acao\"\n                        variant=\"default\"\n                        size=\"small\"\n                        aria-label=\"Excluir nota de rodap\"\n                        title=\"Excluir nota de rodap\"\n                        idNotaRodape=\"${nr.id}\"\n                        @click=${this.removerNotaRodape}\n                      >\n                        <sl-icon slot=\"prefix\" name=\"trash\"></sl-icon>\n                      </sl-button>\n                    </span>\n                  </li>\n                `\n            )}\n          </ol>\n        `;\n  }\n\n  focusOnTab(tabName: string): void {\n    const tab = this.querySelector(`sl-tab[panel=\"${tabName}\"]`) as HTMLElement | null;\n    if (!tab) return;\n\n    this._tabsDireita?.show('notas');\n\n    if (tabName === 'notas') {\n      const badgeElement = tab?.querySelector('sl-badge');\n      if (!badgeElement) return;\n\n      if (!tab.hasAttribute('active')) {\n        if (tabName === 'notas') {\n          badgeElement.setAttribute('pulse', '');\n          setTimeout(() => {\n            badgeElement.removeAttribute('pulse');\n          }, 4000);\n        }\n      }\n    }\n  }\n\n  localizarNotaRodape(idNotaRodape: any): void {\n    // const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const tab = this.getTabFromElement(notaRodapeElement);\n    this.focusOnTab(tab.getAttribute('name'));\n    notaRodapeElement && setTimeout(() => notaRodapeElement.scrollIntoView({ behavior: 'smooth', block: 'center' }), 100);\n    const notasRodape = this.querySelectorAll('.ql-editor nota-rodape');\n    notasRodape.forEach(nr => {\n      if (nr.attributes['id-nota-rodape'].value === idNotaRodape) {\n        nr?.classList.add('pulse');\n      } else {\n        nr.classList.remove('pulse');\n      }\n    });\n  }\n\n  selecionarNotaRodape(idNotaRodape: any): void {\n    const checkbox = document.getElementById(`checkbox-${idNotaRodape}`) as HTMLInputElement | null;\n    if (checkbox) {\n      if (checkbox.checked) {\n        const checkboxes = document.querySelectorAll('.notas-checkbox') as NodeListOf<HTMLInputElement>;\n        checkboxes.forEach(cb => {\n          if (cb.id !== checkbox.id) {\n            cb.checked = false;\n          }\n        });\n        this.localizarNotaRodape(idNotaRodape);\n      } else {\n        this.removerPulsarNotaRodape(idNotaRodape);\n      }\n    }\n  }\n\n  removerPulsarNotaRodape(idNotaRodape: any): void {\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    notaRodapeElement?.classList.remove('pulse');\n  }\n\n  editarNotaRodape(event: any): void {\n    const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const editorTextoRico = this.getEditorTextoRicoFromElement(notaRodapeElement);\n    editorTextoRico?.focus();\n    editorTextoRico.editarNotaRodape(idNotaRodape);\n  }\n\n  removerNotaRodape(event: any): void {\n    const idNotaRodape = event.target.getAttribute('idNotaRodape');\n    const notaRodapeElement = this.querySelector(`.ql-editor nota-rodape[id-nota-rodape=\"${idNotaRodape}\"]`);\n    const editorTextoRico = this.getEditorTextoRicoFromElement(notaRodapeElement);\n    editorTextoRico?.focus();\n    editorTextoRico.removerNotaRodape(idNotaRodape);\n  }\n\n  getEditorTextoRicoFromElement(element: any): any {\n    return element.closest('editor-texto-rico');\n  }\n\n  getTabFromElement(element: any): any {\n    return element.closest('sl-tab-panel');\n  }\n\n  getRestricoesConhecidas(): string[] {\n    return [\n      'Emendamento ou adio de anexos.',\n      'Emendamento ou adio de pena, penalidade etc.',\n      'Emendamento ou adio de especificao temtica do dispositivo (usado para nome do tipo penal e outros).',\n      'Alterao de anexo de MP de crdito extraordinrio.',\n      'Alterao do texto da proposio e proposta de adio de dispositivos onde couber na mesma emenda.',\n      'Alterao de norma que no segue a LC n 95 de 98 (ex: norma com alneas em pargrafos).',\n      'Casos especiais de numerao de parte (PARTE GERAL, PARTE ESPECIAL e uso de numeral ordinal por extenso).',\n      'Tabelas e imagens no texto da proposio.',\n    ];\n  }\n}\n","import {\n  component_styles_default\n} from \"./chunk.KNVYX3FQ.js\";\nimport {\n  r\n} from \"./chunk.PEQICPKO.js\";\n\n// src/components/alert/alert.styles.ts\nvar alert_styles_default = r`\n  ${component_styles_default}\n\n  :host {\n    display: contents;\n\n    /* For better DX, we'll reset the margin here so the base part can inherit it */\n    margin: 0;\n  }\n\n  .alert {\n    position: relative;\n    display: flex;\n    align-items: stretch;\n    background-color: var(--sl-panel-background-color);\n    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n    border-top-width: calc(var(--sl-panel-border-width) * 3);\n    border-radius: var(--sl-border-radius-medium);\n    box-shadow: var(--box-shadow);\n    font-family: var(--sl-font-sans);\n    font-size: var(--sl-font-size-small);\n    font-weight: var(--sl-font-weight-normal);\n    line-height: 1.6;\n    color: var(--sl-color-neutral-700);\n    margin: inherit;\n  }\n\n  .alert:not(.alert--has-icon) .alert__icon,\n  .alert:not(.alert--closable) .alert__close-button {\n    display: none;\n  }\n\n  .alert__icon {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-large);\n    padding-left: var(--sl-spacing-large);\n  }\n\n  .alert--primary {\n    border-top-color: var(--sl-color-primary-600);\n  }\n\n  .alert--primary .alert__icon {\n    color: var(--sl-color-primary-600);\n  }\n\n  .alert--success {\n    border-top-color: var(--sl-color-success-600);\n  }\n\n  .alert--success .alert__icon {\n    color: var(--sl-color-success-600);\n  }\n\n  .alert--neutral {\n    border-top-color: var(--sl-color-neutral-600);\n  }\n\n  .alert--neutral .alert__icon {\n    color: var(--sl-color-neutral-600);\n  }\n\n  .alert--warning {\n    border-top-color: var(--sl-color-warning-600);\n  }\n\n  .alert--warning .alert__icon {\n    color: var(--sl-color-warning-600);\n  }\n\n  .alert--danger {\n    border-top-color: var(--sl-color-danger-600);\n  }\n\n  .alert--danger .alert__icon {\n    color: var(--sl-color-danger-600);\n  }\n\n  .alert__message {\n    flex: 1 1 auto;\n    padding: var(--sl-spacing-large);\n    overflow: hidden;\n  }\n\n  .alert__close-button {\n    flex: 0 0 auto;\n    display: flex;\n    align-items: center;\n    font-size: var(--sl-font-size-large);\n    padding-right: var(--sl-spacing-medium);\n  }\n`;\n\nexport {\n  alert_styles_default\n};\n","import {\n  animateTo,\n  stopAnimations\n} from \"./chunk.YBI4N56R.js\";\nimport {\n  getAnimation,\n  setDefaultAnimation\n} from \"./chunk.6SAGALY4.js\";\nimport {\n  HasSlotController\n} from \"./chunk.3IYPB6RR.js\";\nimport {\n  o\n} from \"./chunk.7BXY5XRG.js\";\nimport {\n  alert_styles_default\n} from \"./chunk.JXDWJJGV.js\";\nimport {\n  watch\n} from \"./chunk.PQ5VRVXF.js\";\nimport {\n  emit,\n  waitForEvent\n} from \"./chunk.CDTZZV7W.js\";\nimport {\n  e,\n  i,\n  n\n} from \"./chunk.72DLNKYZ.js\";\nimport {\n  $,\n  s\n} from \"./chunk.PEQICPKO.js\";\nimport {\n  __decorateClass\n} from \"./chunk.ICGTMF5Z.js\";\n\n// src/components/alert/alert.ts\nvar toastStack = Object.assign(document.createElement(\"div\"), { className: \"sl-toast-stack\" });\nvar SlAlert = class extends s {\n  constructor() {\n    super(...arguments);\n    this.hasSlotController = new HasSlotController(this, \"icon\", \"suffix\");\n    this.open = false;\n    this.closable = false;\n    this.variant = \"primary\";\n    this.duration = Infinity;\n  }\n  firstUpdated() {\n    this.base.hidden = !this.open;\n  }\n  async show() {\n    if (this.open) {\n      return void 0;\n    }\n    this.open = true;\n    return waitForEvent(this, \"sl-after-show\");\n  }\n  async hide() {\n    if (!this.open) {\n      return void 0;\n    }\n    this.open = false;\n    return waitForEvent(this, \"sl-after-hide\");\n  }\n  async toast() {\n    return new Promise((resolve) => {\n      if (toastStack.parentElement === null) {\n        document.body.append(toastStack);\n      }\n      toastStack.appendChild(this);\n      requestAnimationFrame(() => {\n        this.clientWidth;\n        this.show();\n      });\n      this.addEventListener(\"sl-after-hide\", () => {\n        toastStack.removeChild(this);\n        resolve();\n        if (toastStack.querySelector(\"sl-alert\") === null) {\n          toastStack.remove();\n        }\n      }, { once: true });\n    });\n  }\n  restartAutoHide() {\n    clearTimeout(this.autoHideTimeout);\n    if (this.open && this.duration < Infinity) {\n      this.autoHideTimeout = window.setTimeout(() => this.hide(), this.duration);\n    }\n  }\n  handleCloseClick() {\n    this.hide();\n  }\n  handleMouseMove() {\n    this.restartAutoHide();\n  }\n  async handleOpenChange() {\n    if (this.open) {\n      emit(this, \"sl-show\");\n      if (this.duration < Infinity) {\n        this.restartAutoHide();\n      }\n      await stopAnimations(this.base);\n      this.base.hidden = false;\n      const { keyframes, options } = getAnimation(this, \"alert.show\");\n      await animateTo(this.base, keyframes, options);\n      emit(this, \"sl-after-show\");\n    } else {\n      emit(this, \"sl-hide\");\n      clearTimeout(this.autoHideTimeout);\n      await stopAnimations(this.base);\n      const { keyframes, options } = getAnimation(this, \"alert.hide\");\n      await animateTo(this.base, keyframes, options);\n      this.base.hidden = true;\n      emit(this, \"sl-after-hide\");\n    }\n  }\n  handleDurationChange() {\n    this.restartAutoHide();\n  }\n  render() {\n    return $`\n      <div\n        part=\"base\"\n        class=${o({\n      alert: true,\n      \"alert--open\": this.open,\n      \"alert--closable\": this.closable,\n      \"alert--has-icon\": this.hasSlotController.test(\"icon\"),\n      \"alert--primary\": this.variant === \"primary\",\n      \"alert--success\": this.variant === \"success\",\n      \"alert--neutral\": this.variant === \"neutral\",\n      \"alert--warning\": this.variant === \"warning\",\n      \"alert--danger\": this.variant === \"danger\"\n    })}\n        role=\"alert\"\n        aria-live=\"assertive\"\n        aria-atomic=\"true\"\n        aria-hidden=${this.open ? \"false\" : \"true\"}\n        @mousemove=${this.handleMouseMove}\n      >\n        <span part=\"icon\" class=\"alert__icon\">\n          <slot name=\"icon\"></slot>\n        </span>\n\n        <span part=\"message\" class=\"alert__message\">\n          <slot></slot>\n        </span>\n\n        ${this.closable ? $`\n              <sl-icon-button\n                part=\"close-button\"\n                exportparts=\"base:close-button__base\"\n                class=\"alert__close-button\"\n                name=\"x\"\n                library=\"system\"\n                @click=${this.handleCloseClick}\n              ></sl-icon-button>\n            ` : \"\"}\n      </div>\n    `;\n  }\n};\nSlAlert.styles = alert_styles_default;\n__decorateClass([\n  i('[part=\"base\"]')\n], SlAlert.prototype, \"base\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlAlert.prototype, \"open\", 2);\n__decorateClass([\n  e({ type: Boolean, reflect: true })\n], SlAlert.prototype, \"closable\", 2);\n__decorateClass([\n  e({ reflect: true })\n], SlAlert.prototype, \"variant\", 2);\n__decorateClass([\n  e({ type: Number })\n], SlAlert.prototype, \"duration\", 2);\n__decorateClass([\n  watch(\"open\", { waitUntilFirstUpdate: true })\n], SlAlert.prototype, \"handleOpenChange\", 1);\n__decorateClass([\n  watch(\"duration\")\n], SlAlert.prototype, \"handleDurationChange\", 1);\nSlAlert = __decorateClass([\n  n(\"sl-alert\")\n], SlAlert);\nsetDefaultAnimation(\"alert.show\", {\n  keyframes: [\n    { opacity: 0, transform: \"scale(0.8)\" },\n    { opacity: 1, transform: \"scale(1)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\nsetDefaultAnimation(\"alert.hide\", {\n  keyframes: [\n    { opacity: 1, transform: \"scale(1)\" },\n    { opacity: 0, transform: \"scale(0.8)\" }\n  ],\n  options: { duration: 250, easing: \"ease\" }\n});\n\nexport {\n  SlAlert\n};\n","import { LitElement, html, TemplateResult, css, PropertyValues } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport '@shoelace-style/shoelace/dist/components/alert/alert.js';\nimport '@shoelace-style/shoelace/dist/components/icon/icon.js';\nimport { connect } from 'pwa-helpers';\nimport { rootStore } from '../../redux/store';\nimport { Alerta } from '../../model/alerta/alerta';\nimport { limparAlertas } from '../../model/alerta/acao/limparAlertas';\nimport { removerAlerta } from '../../model/alerta/acao/removerAlerta';\nimport { LexmlEmendaComponent } from '../lexml-emenda.component';\nimport SlBadge from '@shoelace-style/shoelace/dist/components/badge/badge';\n\n@customElement('lexml-eta-alertas')\nexport class AlertasComponent extends connect(rootStore)(LitElement) {\n  static styles = css`\n    sl-alert {\n      --box-shadow: var(--sl-shadow-x-large);\n      margin: 20px;\n    }\n    .alert__close-button {\n      font-size: 1.25rem;\n      float: right;\n    }\n  `;\n\n  @property({ type: Array }) alertas: Alerta[] = [];\n\n  stateChanged(state: any): void {\n    this.alertas = state.elementoReducer.ui?.alertas || [];\n  }\n\n  getAlertIcon(tipo: string): TemplateResult {\n    if (tipo === 'success') {\n      return html`<sl-icon slot=\"icon\" name=\"check2-circle\"></sl-icon>`;\n    } else if (tipo === 'warning') {\n      return html`<sl-icon slot=\"icon\" name=\"exclamation-triangle\"></sl-icon>`;\n    } else if (tipo === 'danger') {\n      return html`<sl-icon slot=\"icon\" name=\"exclamation-octagon\"></sl-icon>`;\n    } else {\n      return html`<sl-icon slot=\"icon\" name=\"info-circle\"></sl-icon>`;\n    }\n  }\n\n  limparAlertas(): void {\n    // limpa o array de alertas para do state.ui.alertas\n    rootStore.dispatch(limparAlertas());\n  }\n\n  removeAlertaById(id: string): void {\n    rootStore.dispatch(removerAlerta(id));\n  }\n\n  updated(changedProperties: PropertyValues): void {\n    if (changedProperties.has('alertas')) {\n      this.alertas?.forEach(alerta => {\n        this.shadowRoot?.getElementById(alerta.id)?.addEventListener('click', event => {\n          event.stopImmediatePropagation();\n          this.removeAlertaById((event.target as Element).id);\n        });\n      });\n      const lexmlEmenda = document.querySelector('lexml-emenda') as LexmlEmendaComponent;\n      lexmlEmenda.totalAlertas = this.alertas.length;\n      const oldValue = changedProperties.get('alertas')?.length || 0;\n\n      if (lexmlEmenda.totalAlertas > oldValue) {\n        const badge = document.querySelector('#contadorAvisos')?.querySelector('sl-badge') as SlBadge;\n        if (badge) {\n          badge.pulse = true;\n        }\n      }\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      ${this.alertas.map(\n        alerta =>\n          html` ${alerta.podeFechar\n            ? html`\n                <sl-alert variant=\"${alerta.tipo}\" open>\n                  <sl-icon-button name=\"x\" class=\"alert__close-button\" id=\"${alerta.id}\" label=\"fechar\"></sl-icon-button>\n                  ${this.getAlertIcon(alerta.tipo)} ${alerta.mensagem}\n                </sl-alert>\n              `\n            : html` <sl-alert variant=\"${alerta.tipo}\" open> ${this.getAlertIcon(alerta.tipo)} ${alerta.mensagem} </sl-alert> `}`\n      )}\n    `;\n  }\n}\n","import { LitElement, html, TemplateResult, css } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\n\nimport { connect } from 'pwa-helpers';\nimport { Elemento } from '../../model/elemento';\nimport { ElementoAction, isAcaoMenu } from '../../model/lexml/acao';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { rootStore } from '../../redux/store';\n\n@customElement('lexml-ajuda')\nexport class AjudaComponent extends connect(rootStore)(LitElement) {\n  static styles = css`\n    :host {\n      padding: 0 10px;\n      display: block;\n      font-family: var(--sl-font-sans);\n      font-size: var(--sl-font-size-small);\n      font-weight: var(--sl-font-weight-normal);\n    }\n  `;\n  @state()\n  private elementoSelecionado?: Elemento;\n\n  @state()\n  private acoesMenu: ElementoAction[] = [];\n\n  stateChanged(state: any): void {\n    if (state.elementoReducer.ui?.events && state.elementoReducer.ui.events[0]?.stateType !== 'AtualizacaoAlertas') {\n      this.processarStateEvents(state.elementoReducer.ui.events);\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.ElementoSelecionado:\n        case StateType.ElementoMarcado:\n          if (events[events.length - 1] === event && event.elementos) {\n            this.atualizarAjuda(event.elementos[0]);\n          }\n          break;\n      }\n    });\n  }\n\n  private atualizarAjuda(elemento: Elemento): void {\n    this.elementoSelecionado = elemento;\n    this.acoesMenu = (elemento.acoesPossiveis ?? []).filter((acao: ElementoAction) => isAcaoMenu(acao));\n  }\n\n  render(): TemplateResult {\n    return !this.elementoSelecionado || !this.acoesMenu.length\n      ? html``\n      : html`\n          <p>O que voc pode fazer com o dispositivo selecionado:</p>\n          <ul>\n            <li>Sugerir uma nova redao para o dispositivo. Para isso basta alterar o texto do dispositivo selecionado.</li>\n            <li>\n              Adicionar um novo dispositivo aps o dispositivo atual. Para isso v para o final do texto e pressione a tecla\n              <span class=\"badge\">enter</span>.\n            </li>\n          </ul>\n\n          <p>\n            Alm disso, clicando no menu de aes\n            <span class=\"badge\"><strong></strong></span> que fica  esquerda do dispositivo selecionado voc tambm pode:\n          </p>\n          <ul>\n            ${this.acoesMenu.map(am => html` <li>${am.descricao}</li> `)}\n          </ul>\n        `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-ajuda': AjudaComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\n@customElement('lexml-ajuda-modal')\nexport class AjudaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Dicas\">\n        <lexml-ajuda></lexml-ajuda>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-ajuda-modal': AjudaModalComponent;\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { LitElement, html, css, TemplateResult } from 'lit';\n\n@customElement('lexml-sufixos-modal')\nexport class SufixosModalComponent extends LitElement {\n  @property({ type: Number }) private step = 1;\n  @query('sl-dialog') private slDialog!: any;\n\n  static styles = css`\n    .footer-container {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      flex-wrap: wrap; /* Quebra de linha no mobile ou quando o espao for insuficiente */\n    }\n\n    .footer-container sl-switch {\n      order: 1; /* Garante que o switch sempre venha primeiro */\n      margin-right: auto; /* Empurra qualquer contedo  sua direita para o canto mais distante */\n    }\n\n    .footer-container sl-button {\n      order: 2; /* Garante que o boto sempre venha depois do switch */\n      margin-left: auto; /* Empurra qualquer contedo  sua esquerda para o canto mais distante */\n    }\n  `;\n\n  public show(): void {\n    const noShowAgain = localStorage.getItem('naoMostrarExplicacaoSufixo');\n    const noShowAgainSwitch = this.shadowRoot?.querySelector('#noShowAgain') as any;\n    if (noShowAgain && noShowAgainSwitch) {\n      noShowAgainSwitch.checked = true;\n    }\n    this.slDialog.show();\n  }\n\n  private handleSwitchChange(event: any): void {\n    const isChecked = event.target.checked;\n    if (isChecked) {\n      localStorage.setItem('naoMostrarExplicacaoSufixo', 'true');\n    } else {\n      localStorage.removeItem('naoMostrarExplicacaoSufixo');\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog>\n        <span slot=\"label\">Sufixos de posicionamento</span>\n\n        <div>\n          <p>\n            Os sufixos na numerao de dispositivos, como -1, -2 e assim por diante, so usados para orientar o posicionamento na redao final. Eles no indicam uma numerao\n            definitiva.\n          </p>\n          <p>Os dispositivos propostos e adjacentes devero ser devidamente renumerados no momento da consolidao das emendas ao texto da proposio pela Redao Final.</p>\n        </div>\n\n        <div slot=\"footer\" class=\"footer-container\">\n          <sl-switch id=\"noShowAgain\" @sl-change=${this.handleSwitchChange}> No mostrar novamente </sl-switch>\n\n          <sl-button variant=\"default\" @click=${(): void => this.slDialog.hide()}> Fechar </sl-button>\n        </div>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-sufixos-modal': SufixosModalComponent;\n  }\n}\n","import { ComandoEmenda } from './../../model/emenda/emenda';\nimport { ComandoEmendaComponent } from './comandoEmenda.component';\nimport { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query, property } from 'lit/decorators.js';\n\n@customElement('lexml-emenda-comando-modal')\nexport class ComandoEmendaModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  @query('#comando-emenda-modal')\n  private lexmlComandoEmenda!: ComandoEmendaComponent;\n\n  @property({ type: Object })\n  private comandoEmenda?: ComandoEmenda;\n\n  public atualizarComandoEmenda(comandoEmenda: ComandoEmenda): void {\n    this.lexmlComandoEmenda.emenda = comandoEmenda;\n  }\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Comando\">\n        <lexml-emenda-comando id=\"comando-emenda-modal\" .emenda=${this.comandoEmenda}></lexml-emenda-comando>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-emenda-comando-modal': ComandoEmendaModalComponent;\n  }\n}\n","import { LitElement, html, TemplateResult } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\n@customElement('lexml-atalhos-modal')\nexport class AtalhosModalComponent extends LitElement {\n  @query('sl-dialog')\n  private slDialog!: any;\n\n  public show(): void {\n    this.slDialog.show();\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        :host {\n          font-family: var(--sl-font-sans);\n        }\n      </style>\n      <sl-dialog label=\"Atalhos\">\n        <lexml-eta-atalhos></lexml-eta-atalhos>\n        <sl-button slot=\"footer\" variant=\"primary\" @click=${(): void => this.slDialog.hide()}>Fechar</sl-button>\n      </sl-dialog>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-atalhos-modal': AtalhosModalComponent;\n  }\n}\n","import { html, LitElement, TemplateResult } from 'lit';\nimport { customElement, property, query } from 'lit/decorators.js';\nimport { OpcoesImpressao } from '../../model/emenda/emenda';\nimport { SlSelect } from '@shoelace-style/shoelace';\n\n@customElement('lexml-opcoes-impressao')\nexport class OpcoesImpressaoComponent extends LitElement {\n  @query('#select-tamanho-fonte')\n  tamanhoFonte!: SlSelect;\n\n  private _opcoesImpressao!: OpcoesImpressao;\n  @property({ type: Object, state: true })\n  set opcoesImpressao(value: OpcoesImpressao) {\n    this._opcoesImpressao = value ? value : new OpcoesImpressao();\n    this.requestUpdate();\n  }\n\n  get opcoesImpressao(): OpcoesImpressao {\n    return this._opcoesImpressao;\n  }\n\n  private timerEmitirEventoOnChange = 0;\n\n  protected firstUpdated(): void {\n    this.tamanhoFonte.addEventListener('sl-change', (ev: Event) => this._atualizarTamanhoFonte(ev));\n  }\n  render(): TemplateResult {\n    return html`\n      <style>\n        fieldset {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5em;\n          background-color: var(--sl-color-gray-100);\n          box-shadow: var(--sl-shadow-x-large);\n          flex-wrap: wrap;\n          padding: 20px 20px;\n          border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n          border-radius: var(--sl-border-radius-medium);\n          max-width: 655px;\n          margin: 1em 0 2em 0;\n        }\n\n        legend {\n          background-color: var(--sl-color-gray-200);\n          font-weight: bold;\n          border-radius: 5px;\n          border: 1px solid var(--sl-color-gray-300);\n          padding: 2px 5px;\n          box-shadow: var(--sl-shadow-small);\n        }\n\n        sl-input::part(form-control) {\n        }\n        sl-input::part(base) {\n        }\n        @media (max-width: 480px) {\n          sl-input::part(base) {\n          }\n        }\n        sl-select {\n          max-width: 400px;\n        }\n        label {\n          line-height: var(--sl-toggle-size);\n          font-size: var(--sl-font-size-small);\n          display: flex;\n          align-items: center;\n          gap: 5px;\n        }\n      </style>\n\n      <fieldset class=\"lexml-opcoes-impressao\">\n        <legend>Opes de impresso</legend>\n        <div>\n          <label class=\"lbl-imprimir-brasao\" for=\"chk-imprimir-brasao\">\n            <input type=\"checkbox\" id=\"chk-imprimir-brasao\" ?checked=${this._opcoesImpressao?.imprimirBrasao} @input=${(ev: Event): void => this._atualizarImprimirBrasao(ev)} />\n            Imprimir braso\n          </label>\n        </div>\n        <sl-input\n          type=\"text\"\n          id=\"input-cabecalho\"\n          name=\"textoCabecalho\"\n          label=\"Texto do cabealho\"\n          value=${this._opcoesImpressao?.textoCabecalho}\n          @input=${(ev: Event): void => this._atualizarTextoCabecalho(ev)}\n          size=\"small\"\n        ></sl-input>\n        <div>\n          <sl-select id=\"select-tamanho-fonte\" label=\"Tamanho da letra\" size=\"small\" value=${this._opcoesImpressao?.tamanhoFonte}>\n            <sl-menu-item value=\"14\">14</sl-menu-item>\n            <sl-menu-item value=\"16\">16</sl-menu-item>\n            <sl-menu-item value=\"18\">18</sl-menu-item>\n          </sl-select>\n        </div>\n        <div>\n          <label class=\"lbl-reduzir-espaco\" for=\"chk-reduzir-espaco\">\n            <input\n              type=\"checkbox\"\n              id=\"chk-reduzir-espaco\"\n              ?checked=${this._opcoesImpressao?.reduzirEspacoEntreLinhas}\n              @input=${(ev: Event): void => this._atualizarReduzirEspacoEntreLinhas(ev)}\n            />\n            Reduzir espao entre linhas\n          </label>\n        </div>\n      </fieldset>\n    `;\n  }\n\n  private _atualizarTextoCabecalho(ev: Event): void {\n    this._opcoesImpressao.textoCabecalho = (ev.target as HTMLInputElement).value;\n    this.requestUpdate();\n  }\n\n  private _atualizarImprimirBrasao(ev: Event): void {\n    this._opcoesImpressao.imprimirBrasao = (ev.target as HTMLInputElement).checked;\n    this.requestUpdate();\n  }\n\n  private _atualizarTamanhoFonte(ev: Event): void {\n    const valorFonte = parseInt((ev.target as SlSelect).value as string);\n    this._opcoesImpressao.tamanhoFonte = valorFonte;\n    this.requestUpdate();\n  }\n\n  private _atualizarReduzirEspacoEntreLinhas(ev: Event): void {\n    this._opcoesImpressao.reduzirEspacoEntreLinhas = (ev.target as HTMLInputElement).checked;\n    this.requestUpdate();\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento: string): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-opcoes-impressao': OpcoesImpressaoComponent;\n  }\n}\n","import { html, LitElement, PropertyValues, TemplateResult } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { Observable } from '../../util/observable';\nimport { ativarDesativarMarcaDeRevisao, atualizaQuantidadeRevisao, getQuantidadeRevisoesAll, setCheckedElement } from '../../redux/elemento/util/revisaoUtil';\nimport { rootStore } from '../../redux/store';\nimport { connect } from 'pwa-helpers';\nimport { StateEvent, StateType } from '../../redux/state';\nimport { alertarInfo } from '../../redux/elemento/util/alertaUtil';\nimport { Modo } from '../../redux/elemento/enum/enumUtil';\n\n@customElement('lexml-switch-revisao')\nexport class SwitchRevisaoComponent extends connect(rootStore)(LitElement) {\n  @property({ type: Number })\n  quantidadeRevisao = 0;\n\n  @property({ type: String })\n  nomeSwitch = '';\n\n  @property({ type: String })\n  nomeBadgeQuantidadeRevisao = '';\n\n  @property({ type: Boolean, reflect: true })\n  checkedRevisao = false;\n\n  @property({ type: String })\n  modo = '';\n\n  onChange: Observable<string> = new Observable<string>();\n\n  update(changedProperties: PropertyValues): void {\n    super.update(changedProperties);\n  }\n\n  createRenderRoot(): LitElement {\n    return this;\n  }\n\n  stateChanged(state: any): void {\n    if (state.elementoReducer.ui) {\n      if (state.elementoReducer.ui.events) {\n        if (state.elementoReducer.ui.message && state.elementoReducer.ui.events[0]?.stateType === 'AtualizacaoAlertas') {\n          alertarInfo(state.elementoReducer.ui.message.descricao);\n        }\n        this.processarStateEvents(state.elementoReducer.ui.events);\n      }\n    }\n  }\n\n  private processarStateEvents(events: StateEvent[]): void {\n    events?.forEach((event: StateEvent): void => {\n      switch (event.stateType) {\n        case StateType.RevisaoAtivada:\n        case StateType.RevisaoDesativada:\n          this.checkedSwitchMarcaAlteracao();\n          break;\n      }\n\n      this.atualizaQuantidadeRevisao();\n    });\n  }\n\n  render(): TemplateResult {\n    return html`\n      <style>\n        #revisoes-justificativa-icon sl-icon {\n          border: 1px solid #ccc !important;\n          padding: 0.4rem 0.4rem !important;\n          border-radius: 15px !important;\n          font-weight: bold;\n          background-color: #eee;\n          cursor: pointer;\n        }\n\n        #revisoes-texto-livre-icon sl-icon {\n          border: 1px solid #ccc !important;\n          padding: 0.4rem 0.4rem !important;\n          border-radius: 15px !important;\n          font-weight: bold;\n          background-color: #eee;\n          cursor: pointer;\n        }\n        #chk-em-revisao {\n          border: 1px solid #ccc !important;\n          padding: 5px 10px !important;\n          border-radius: 20px !important;\n          margin-left: auto;\n          margin-right: 5px;\n          font-weight: bold;\n          background-color: #eee;\n        }\n        #chk-em-revisao[checked] {\n          background-color: var(--sl-color-blue-100);\n        }\n        .revisao-container {\n          margin-left: auto;\n        }\n        .sl-toast-stack sl-alert::part(base) {\n          background-color: var(--sl-color-danger-100);\n        }\n        @media (max-width: 992px) {\n          .mobile-buttons {\n            display: inline-block !important;\n          }\n          #chk-em-revisao span {\n            display: none;\n          }\n        }\n      </style>\n      <div id=\"toolbar\">\n        <sl-switch id=\"${this.nomeSwitch}\" size=\"small\" @sl-change=${(): void => this.ativarDesativarMarcaDeRevisao()}>\n          <span>Marcas de reviso</span>\n          <sl-badge id=\"${this.nomeBadgeQuantidadeRevisao}\" variant=\"warning\" pill>0</sl-badge>\n        </sl-switch>\n      </div>\n    `;\n  }\n\n  constructor() {\n    super();\n  }\n\n  private atualizaQuantidadeRevisao = (): void => {\n    if (this.modo === Modo.EMENDA || this.modo === Modo.EMENDA_ARTIGO_ONDE_COUBER) {\n      atualizaQuantidadeRevisao(rootStore.getState().elementoReducer.revisoes, document.getElementById(this.nomeBadgeQuantidadeRevisao) as any, this.modo);\n    }\n  };\n\n  public ativarDesativarMarcaDeRevisao(consideraQuantidade = true): void {\n    const quantidade = getQuantidadeRevisoesAll(rootStore.getState().elementoReducer.revisoes);\n    ativarDesativarMarcaDeRevisao(rootStore, consideraQuantidade ? quantidade : 0);\n    this.checkedSwitchMarcaAlteracao();\n  }\n\n  private checkedSwitchMarcaAlteracao = (): void => {\n    const switchMarcaAlteracaoView = document.getElementById(this.nomeSwitch) as any;\n    setCheckedElement(switchMarcaAlteracaoView, rootStore.getState().elementoReducer.emRevisao);\n  };\n}\n","import { LitElement, TemplateResult, css, html } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\nimport { ComandoEmenda, SubstituicaoTermo } from '../../model/emenda/emenda';\nimport { ComandoEmendaBuilder } from '../../emenda/comando-emenda-builder';\n\n@customElement('lexml-substituicao-termo')\nexport class SubstituicaoTermoComponent extends LitElement {\n  static styles = css`\n    span.alerta {\n      color: red;\n    }\n\n    fieldset {\n      display: flex;\n      flex-direction: column;\n      gap: 1em;\n      background-color: var(--sl-color-gray-100);\n      box-shadow: var(--sl-shadow-x-large);\n      flex-wrap: wrap;\n      padding: 20px 20px;\n      margin: 10px;\n      border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);\n      border-radius: var(--sl-border-radius-medium);\n    }\n\n    legend {\n      background-color: var(--sl-color-gray-200);\n      font-weight: bold;\n      border-radius: 5px;\n      border: 1px solid var(--sl-color-gray-300);\n      padding: 2px 5px;\n      box-shadow: var(--sl-shadow-small);\n    }\n\n    sl-radio-group::part(base) {\n      display: flex;\n      flex-direction: row;\n      gap: 20px;\n    }\n    #flexaoGenero {\n      margin-left: 20px;\n    }\n  `;\n\n  @query('#tipoSubstituicaoTermo')\n  elTipoSubstituicaoTermo!: HTMLInputElement;\n\n  @query('#termoASerSubstituido')\n  elTermoASerSubstituido!: HTMLInputElement;\n\n  @query('#novoTermo')\n  elNovoTermo!: HTMLInputElement;\n\n  @query('#alertaTermoASerSubstituido')\n  elAlertaTermoASerSubstituido!: HTMLSpanElement;\n\n  @query('#alertaNovoTermo')\n  elAlertaNovoTermo!: HTMLSpanElement;\n\n  @query('#flexaoGenero')\n  elFlexaoGenero!: HTMLInputElement;\n\n  @query('#flexaoNumero')\n  elFlexaoNumero!: HTMLInputElement;\n\n  private timerEmitirEventoOnChange = 0;\n\n  private onDadosAlterados(evt?: Event): void {\n    const el = evt?.target as HTMLInputElement;\n    el === this.elTermoASerSubstituido && this.elAlertaTermoASerSubstituido.style.setProperty('visibility', el.value ? 'hidden' : 'unset');\n    el === this.elNovoTermo && this.elAlertaNovoTermo.style.setProperty('visibility', el.value ? 'hidden' : 'unset');\n    this.agendarEmissaoEventoOnChange();\n  }\n\n  private agendarEmissaoEventoOnChange(origemEvento = 'substituicao-termo'): void {\n    clearInterval(this.timerEmitirEventoOnChange);\n    this.timerEmitirEventoOnChange = window.setTimeout(() => this.emitirEventoOnChange(origemEvento), 500);\n  }\n\n  private emitirEventoOnChange(origemEvento: string): void {\n    this.dispatchEvent(\n      new CustomEvent('onchange', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          origemEvento,\n        },\n      })\n    );\n  }\n\n  getComandoEmenda(urn: string): ComandoEmenda {\n    return new ComandoEmendaBuilder(urn, this.getSubstituicaoTermo()).getComandoEmenda();\n  }\n\n  getSubstituicaoTermo(): SubstituicaoTermo {\n    const ret = new SubstituicaoTermo();\n    ret.tipo = (this.elTipoSubstituicaoTermo.querySelector('sl-radio[checked]') as any)?.value || 'Expresso';\n    ret.termo = this.elTermoASerSubstituido.value || '(termo a ser substitudo)';\n    ret.novoTermo = this.elNovoTermo.value || '(novo termo)';\n    ret.flexaoGenero = this.elFlexaoGenero.checked;\n    ret.flexaoNumero = this.elFlexaoNumero.checked;\n    return ret;\n  }\n\n  setSubstituicaoTermo(substituicaoTermo: SubstituicaoTermo): void {\n    this.elTermoASerSubstituido.value = substituicaoTermo.tipo;\n    this.elTermoASerSubstituido.value = substituicaoTermo.termo;\n    this.elNovoTermo.value = substituicaoTermo.novoTermo;\n    this.elFlexaoGenero.checked = substituicaoTermo.flexaoGenero;\n    this.elFlexaoNumero.checked = substituicaoTermo.flexaoNumero;\n    (this.shadowRoot?.querySelector(`sl-radio[value=\"${substituicaoTermo.tipo}\"]`) as HTMLElement)?.click();\n    this.agendarEmissaoEventoOnChange();\n\n    if (this.elTermoASerSubstituido.value !== '') {\n      this.elAlertaTermoASerSubstituido.style.setProperty('visibility', 'hidden');\n    }\n\n    if (this.elNovoTermo.value !== '') {\n      this.elAlertaNovoTermo.style.setProperty('visibility', 'hidden');\n    }\n  }\n\n  render(): TemplateResult {\n    return html`\n      <fieldset @input=${this.onDadosAlterados}>\n        <legend>Substituio de termo em todo o texto</legend>\n        <sl-radio-group id=\"tipoSubstituicaoTermo\" value=\"Expresso\" @sl-change=${this.onDadosAlterados}>\n          <sl-radio value=\"Expresso\">Expresso</sl-radio>\n          <sl-radio value=\"Palavra\">Palavra</sl-radio>\n          <sl-radio value=\"Nmero\">Nmero</sl-radio>\n        </sl-radio-group>\n        <div>\n          <sl-input id=\"termoASerSubstituido\" type=\"text\" required label=\"Termo a ser substitudo: *\"></sl-input>\n          <span id=\"alertaTermoASerSubstituido\" class=\"alerta\">Este campo deve ser preenchido</span>\n        </div>\n        <div>\n          <sl-input id=\"novoTermo\" type=\"text\" required label=\"Novo termo: *\"></sl-input>\n          <span id=\"alertaNovoTermo\" class=\"alerta\">Este campo deve ser preenchido</span>\n        </div>\n        <div>\n          <span>Propor fazer flexes de:</span>\n          <sl-checkbox id=\"flexaoGenero\">Gnero</sl-checkbox>\n          <sl-checkbox id=\"flexaoNumero\">Nmero</sl-checkbox>\n        </div>\n      </fieldset>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'lexml-substituicao-termo': SubstituicaoTermoComponent;\n  }\n}\n","// ---------------------------------------------------\n// DEPENDNCIAS\n// ---------------------------------------------------\n// import 'quill/dist/quill.snow.css';\n// import 'font-awesome/css/font-awesome.css';\n\nimport 'quill/dist/quill';\n\nimport '@shoelace-style/shoelace/dist/components/radio-group/radio-group.js';\nimport '@shoelace-style/shoelace/dist/components/radio-button/radio-button';\nimport '@shoelace-style/shoelace/dist/components/input/input';\nimport '@shoelace-style/shoelace/dist/components/dialog/dialog';\nimport '@shoelace-style/shoelace/dist/components/menu-item/menu-item';\nimport '@shoelace-style/shoelace/dist/components/select/select';\nimport '@shoelace-style/shoelace/dist/components/button/button';\nimport '@shoelace-style/shoelace/dist/components/split-panel/split-panel';\nimport '@shoelace-style/shoelace/dist/components/radio/radio';\nimport '@shoelace-style/shoelace/dist/components/details/details';\nimport '@shoelace-style/shoelace/dist/components/checkbox/checkbox';\nimport '@shoelace-style/shoelace/dist/components/switch/switch';\nimport '@shoelace-style/shoelace/dist/components/tooltip/tooltip';\nimport '@shoelace-style/shoelace/dist/components/card/card';\nimport { ModuloAspasCurvas } from './components/editor-texto-rico/moduloAspasCurvas';\nimport { ModuloRevisao } from './components/editor-texto-rico/moduloRevisao';\nimport { ModuloNotaRodape } from './components/editor-texto-rico/moduloNotaRodape';\n\n// ---------------------------------------------------\n\nexport { ArticulacaoComponent } from './components/articulacao.component';\nexport { ComandoEmendaComponent } from './components/comandoEmenda/comandoEmenda.component';\nexport { EditorComponent } from './components/editor/editor.component';\nexport { ElementoComponent } from './components/elemento/elemento.component';\nexport { AtalhosComponent as HelpComponent } from './components/ajuda/atalhos.component';\nexport { EditorTextoRicoComponent } from './components/editor-texto-rico/editor-texto-rico.component';\nexport { AlterarLarguraTabelaColunaModalComponent } from './components/editor-texto-rico/alterar-largura-tabela-coluna-modal';\nexport { AlterarLarguraImagemModalComponent } from './components/editor-texto-rico/alterar-largura-imagem-modal';\nexport { LexmlEtaComponent } from './components/lexml-eta.component';\nexport { AutoriaComponent } from './components/autoria/autoria.component';\nexport { DestinoComponent } from './components/destino/destino.component';\nexport { LexmlAutocomplete } from './components/lexml-autocomplete';\nexport { DataComponent } from './components/data/data.component';\nexport { LexmlEmendaComponent, LexmlEmendaParametrosEdicao } from './components/lexml-emenda.component';\nexport { LexmlEmendaConfig } from './model/lexmlEmendaConfig';\nexport { AlertasComponent } from './components/alertas/alertas.component';\nexport { AjudaComponent } from './components/ajuda/ajuda.component';\nexport { AjudaModalComponent } from './components/ajuda/ajuda.modal.component';\nexport { SufixosModalComponent } from './components/sufixos/sufixos.modal.componet';\nexport { ComandoEmendaModalComponent } from './components/comandoEmenda/comandoEmenda.modal.component';\nexport { AtalhosModalComponent } from './components/ajuda/atalhos.modal.component';\nexport { OpcoesImpressaoComponent } from './components/opcoesImpressao/opcoesImpressao.component';\nexport { SwitchRevisaoComponent } from './components/switchRevisao/switch-revisao.component';\nexport { SubstituicaoTermoComponent } from './components/substituicao-termo/substituicao-termo.component';\nexport { Usuario } from './model/revisao/usuario';\n\nQuill.register('modules/aspasCurvas', ModuloAspasCurvas, true);\nQuill.register('modules/revisao', ModuloRevisao, true);\nQuill.register('modules/notaRodape', ModuloNotaRodape, true);\n"],"names":["root","factory","self","this","modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","container_1","format_1","leaf_1","scroll_1","inline_1","block_1","embed_1","text_1","attributor_1","class_1","style_1","store_1","Registry","Parchment","Scope","create","find","query","register","Container","default","Format","Leaf","Embed","Scroll","Block","Inline","Text","Attributor","Attribute","Class","Style","Store","extendStatics","__extends","setPrototypeOf","__proto__","Array","b","__","constructor","ParchmentError","_super","message","_this","Error","attributes","classes","tags","types","scope","match","ANY","Node","TEXT_NODE","LEVEL","BLOCK","INLINE","HTMLElement","names","getAttribute","split","tagName","TYPE","DATA_KEY","input","BlotClass","node","bubble","blot","parentNode","Definitions","_i","arguments","length","map","Definition","blotName","attrName","keyName","className","isArray","toUpperCase","tagNames","forEach","tag","diff","equal","extend","op","NULL_CHARACTER","String","fromCharCode","Delta","ops","insert","text","newOp","keys","push","delete","retain","index","lastOp","unshift","splice","chop","pop","filter","predicate","partition","passed","failed","reduce","initial","changeLength","elem","slice","start","end","Infinity","iter","iterator","hasNext","nextOp","next","compose","other","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","delta","Math","min","thisOp","otherOp","rest","concat","strings","join","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","line","indexOf","transform","priority","transformPosition","offset","nextType","hasOwn","toStr","toString","gOPD","getOwnPropertyDescriptor","arr","isPlainObject","obj","key","hasOwnConstructor","hasIsPrototypeOf","setProperty","target","options","newValue","writable","getProperty","src","copy","copyIsArray","clone","deep","BlockEmbed","bubbleFormats","undefined","_createClass","defineProperties","props","descriptor","Constructor","protoProps","staticProps","_get","receiver","Function","desc","parent","getPrototypeOf","_extend2","_interopRequireDefault","_quillDelta2","_parchment2","_break2","_inline2","_text2","_classCallCheck","instance","TypeError","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","_Parchment$Embed","apply","domNode","formats","values","attribute","BLOCK_ATTRIBUTE","format","def","endsWith","block","insertBefore","insertAt","BLOCK_BLOT","_Parchment$Block","_this2","cache","descendants","leaf","lines","shift","children","tail","ref","head","remove","context","child","force","statics","defaultChild","allowedChildren","overload","expandConfig","_typeof","Symbol","_slicedToArray","_arr","_n","_d","_e","_s","done","err","sliceIterator","_editor2","_emitter4","_module2","_selection","_selection2","_logger2","_theme2","_defineProperty","debug","Quill","container","error","html","innerHTML","trim","classList","add","__quill","addContainer","setAttribute","scrollingContainer","emitter","scroll","whitelist","editor","selection","theme","keyboard","addModule","clipboard","history","init","on","events","EDITOR_CHANGE","type","TEXT_CHANGE","toggle","isBlank","SCROLL_UPDATE","source","mutations","range","lastRange","modify","update","contents","convert","setContents","clear","placeholder","readOnly","disable","limit","level","imports","path","overwrite","warn","startsWith","refNode","document","createElement","setRange","_this3","_overload","_overload2","deleteText","enable","enabled","scrollTop","focus","scrollIntoView","_this4","sources","API","getSelection","change","formatLine","formatText","setSelection","SILENT","_this5","_overload3","_overload4","_this6","_overload5","_overload6","bounds","getBounds","containerBounds","getBoundingClientRect","bottom","top","height","left","right","width","getLength","_overload7","_overload8","getContents","getFormat","Number","MAX_VALUE","getRange","_overload9","_overload10","getText","hasFocus","embed","_this7","insertEmbed","_this8","_overload11","_overload12","insertText","contains","off","once","dangerouslyPasteHTML","_this9","_overload13","_overload14","removeFormat","_this10","deleted","applied","applyDelta","_overload15","_overload16","Range","USER","_this11","userConfig","DEFAULTS","import","themeConfig","config","moduleConfig","moduleClass","toolbar","querySelector","modifier","strict","isEnabled","oldDelta","shiftRange","_emitter","_emitter2","args","emit","_map","pos","_map2","_map3","max","_map4","version","parchment","_Parchment$Inline","compare","BLOT","isolate","wrap","moveChildren","selfIndex","order","otherIndex","_parchment","TextBlot","_Parchment$Text","_eventemitter2","eventName","addEventListener","_len","_key","querySelectorAll","_node$__quill$emitter","handleDOM","Emitter","_EventEmitter","listeners","log","event","_len2","_key2","_ref","handler","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SELECTION_CHANGE","Module","quill","levels","method","_console","console","namespace","ns","logger","bind","newLevel","pSlice","objectKeys","isArguments","deepEqual","actual","expected","opts","Date","getTime","a","isUndefinedOrNull","isBuffer","ka","kb","e","sort","objEquiv","x","attributeBit","ATTRIBUTE","item","canAdd","replace","removeAttribute","Code","_block2","_Inline","CodeBlock","_Block","textContent","frag","_descendant","descendant","deleteAt","nextNewline","newlineIndex","prevNewline","isolateLength","formatAt","_descendant3","_descendant4","searchIndex","reverse","lastIndexOf","appendChild","prev","optimize","removeChild","unwrap","TAB","_op2","_code2","_cursor2","_block","_clone2","_deepEqual2","ASCII","Editor","getDelta","consumeNextNewline","scrollLength","batchStart","image","list","bullet","normalizeDelta","_scroll$line","_scroll$line2","_line$descendant","batchEnd","lengthRemaining","lineLength","codeIndex","codeLength","leaves","formatsArr","blots","combineFormats","_scroll$line3","_scroll$line4","suffixLength","suffix","cursorIndex","data","textBlot","oldValue","CONTENTS","oldText","newText","diffDelta","combined","merged","_toConsumableArray","arr2","from","Selection","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","listenDOM","setTimeout","native","getNativeRange","textNode","setNativeRange","ignored","_context$range","startNode","startOffset","endNode","endOffset","restore","body","_format","nativeRange","collapsed","after","attach","_scroll$leaf","_scroll$leaf2","_leaf$position","position","_leaf$position2","createRange","setStart","_scroll$leaf3","_scroll$leaf4","_leaf$position3","_leaf$position4","setEnd","side","rect","rangeCount","getRangeAt","normalizeNative","info","normalized","normalizedToRange","activeElement","positions","indexes","_position","startContainer","endContainer","childNodes","lastChild","_scroll$leaf5","_scroll$leaf6","_leaf$position5","_leaf$position6","first","last","scrollBounds","removeAllRanges","addRange","blur","rangeToNative","oldRange","_getRange","_getRange2","Break","linked_list_1","shadow_1","ContainerBlot","build","makeBlot","forEachAt","criteria","_a","lengthLeft","detach","childBlot","refBlot","some","insertInto","memo","targetParent","inclusive","addedNodes","removedNodes","mutation","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","DOCUMENT_POSITION_FOLLOWING","nextSibling","replaceChild","FormatBlot","toLowerCase","replaceWith","replacement","wrapper","move","LeafBlot","INLINE_BLOT","lib","keepNull","Iterator","retOp","substr","_instanceof","nativeMap","nativeSet","nativePromise","Map","_","Set","Promise","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","proto","resolve","reject","then","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","allocUnsafe","keyChild","valueChild","set","entryChild","attrs","getOwnPropertySymbols","symbols","symbol","allPropertyNames","getOwnPropertyNames","propertyName","__objToStr","re","flags","global","ignoreCase","multiline","clonePrototype","_container2","isLine","_Parchment$Scroll","batch","_line","_line2","_line3","_newlineIndex","getLines","observer","takeRecords","SHORTKEY","_quill2","test","navigator","platform","Keyboard","_Module","bindings","addBinding","ENTER","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","BACKSPACE","handleBackspace","handleDelete","prefix","handleDeleteRange","listen","evt","binding","normalize","which","keyCode","defaultPrevented","_quill$getLine","getLine","_quill$getLine2","_quill$getLeaf","getLeaf","_quill$getLeaf2","leafStart","offsetStart","_ref2","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","preventDefault","makeEmbedArrowHandler","_ref3","where","LEFT","RIGHT","_quill$getLeaf3","_quill$getLine11","_quill$getLine13","curFormats","prevFormats","nextLength","_quill$getLine15","_quill$getLine17","nextFormats","firstFormats","lastFormats","lineFormats","makeCodeBlockHandler","indent","_quill$scroll$descend","_quill$scroll$descend2","scrollIndex","getIndex","makeFormatHandler","shortKey","charCodeAt","ESCAPE","UP","DOWN","bold","italic","underline","outdent","tab","cutoff","updateContents","_quill$getLine3","_quill$getLine4","_quill$getLine5","_quill$getLine6","header","_quill$getLine7","_quill$getLine8","_quill$getLine9","_quill$getLine10","Cursor","createTextNode","_length","restoreText","_Parchment$Container","ColorStyle","ColorClass","ColorAttributor","_Parchment$Attributor","parseInt","sanitize","_inline","Link","url","_sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","_keyboard2","_dropdown2","optionsCounter","toggleAriaAttribute","element","Picker","select","buildPicker","style","display","label","togglePicker","escape","option","tabIndex","hasAttribute","selectItem","id","buildItem","selected","buildLabel","buildOptions","close","trigger","selectedIndex","Event","dispatchEvent","createEvent","initEvent","isActive","_embed2","_scroll2","_clipboard2","_history2","ShadowBlot","cloneNode","parentBlot","refDomNode","AttributorStore","styles","attr","ClassAttributor","camelize","parts","part","StyleAttributor","Theme","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","AlignStyle","AlignClass","AlignAttribute","BackgroundStyle","BackgroundClass","_color","DirectionStyle","DirectionClass","DirectionAttribute","FontClass","FontStyle","FontStyleAttributor","SizeStyle","SizeClass","align","center","justify","background","blockquote","clean","code","color","direction","rtl","float","full","formula","link","ordered","check","script","sub","super","strike","video","getLastChangeIndex","History","lastRecorded","ignoreChange","userOnly","record","undo","redo","dest","stack","changeDelta","undoDelta","timestamp","now","delay","maxStack","deleteLength","changeIndex","endsWithNewlineChange","BaseTooltip","_colorPicker2","_iconPicker2","_picker2","_tooltip2","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","_Theme","listener","removeEventListener","tooltip","textbox","hide","pickers","picker","extendToolbar","buttons","icons","button","selects","fillSelect","handlers","edit","fileInput","files","reader","FileReader","onload","result","readAsDataURL","click","_Tooltip","boundsContainer","save","cancel","mode","preview","linkRange","restoreFocus","defaultValue","LinkedList","append","nodes","cur","curNode","ret","callback","curIndex","curLength","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","ScrollBlot","MutationObserver","observe","disconnect","records","mark","markParent","remaining","previousSibling","grandChild","InlineBlot","obj1","obj2","prop","isEqual","BlockBlot","EmbedBlot","splitText","_toggle","DOMTokenList","token","searchString","subjectString","isFinite","floor","thisArg","execCommand","DIFF_DELETE","diff_main","text1","text2","cursor_pos","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","j","best_common","prefixLength","text1_a","text1_b","text2_a","text2_b","hm1","ceil","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","norm","current_pos","next_pos","split_pos","d_left","d_right","cursor_normalize_diff","ndiffs","cursor_pointer","d_next","merge_tuples","fix_cursor","compact","starts_with_pair_end","str","ends_with_pair_start","fixed_diffs","fix_emoji","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","pointerend","pointer","count_delete","count_insert","text_delete","text_insert","changes","left_d","right_d","shim","supportsArgumentsClass","supported","unsupported","propertyIsEnumerable","has","Events","EE","fn","EventEmitter","_events","_eventsCount","eventNames","exists","available","ee","a1","a2","a3","a4","a5","len","removeListener","removeAllListeners","addListener","setMaxListeners","prefixed","matchText","matchSpacing","matchNewline","matchBlot","matchAttributor","_extend3","_align","_background","_direction","_font","_size","DOM_KEY","CLIPBOARD_CONFIG","deltaEndsWith","ELEMENT_NODE","fontStyle","computeStyle","fontWeight","applyFormat","parseFloat","textIndent","matchAlias","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","innerText","_prepareMatching","prepareMatching","_prepareMatching2","elementMatchers","textMatchers","traverse","paste","pair","_pair","nodeType","window","getComputedStyle","endText","childrenDelta","nextElementSibling","nodeHeight","offsetHeight","marginTop","marginBottom","offsetTop","whiteSpace","replacer","collapse","Bold","addControls","Toolbar","_ret","controls","addHandler","_this$quill$selection","_quill$selection$getR","prompt","addButton","groups","group","control","addSelect","_picker","ColorPicker","_Picker","backgroundColor","colorLabel","stroke","fill","IconPicker","defaultItem","Tooltip","TEMPLATE","reference","offsetWidth","rootBounds","verticalShift","_base","_base2","_link2","_icons2","TOOLBAR_CONFIG","SnowTheme","_BaseTheme","buildButtons","buildPickers","SnowTooltip","_BaseTooltip","show","_core2","_indent","_blockquote2","_header2","_list","_list2","_bold2","_italic2","_script2","_strike2","_underline2","_image2","_video2","_code","_formula2","_syntax2","_toolbar2","_bubble2","_snow2","IndentClass","ListItem","IdentAttributor","Blockquote","Header","List","_Container","listEventHandler","_bold","Italic","_Bold","Script","Strike","Underline","_link","ATTRIBUTES","Image","Video","_BlockEmbed","FormulaBlot","_Embed","katex","render","throwOnError","errorColor","Formula","CodeToken","SyntaxCodeBlock","_CodeBlock","_highlight","cachedText","Syntax","highlight","timer","clearTimeout","interval","hljs","highlightAuto","BubbleTooltip","BubbleTheme","lastLine","_bounds","arrow","marginLeft","define","amd","s2","t2","t","ShadowRoot","ShadyCSS","nativeShadow","Document","CSSStyleSheet","t3","n5","_$cssResult$","cssText","styleSheet","e4","replaceSync","r","o5","n6","s5","t4","S","cssRules","e2","trustedTypes","r2","emptyScript","h","reactiveElementPolyfillSupport","o2","toAttribute","i3","Boolean","JSON","stringify","fromAttribute","parse","n2","converter","reflect","hasChanged","_$Et","isUpdatePending","hasUpdated","_$Ei","static","observedAttributes","finalize","elementProperties","_$Eh","_$Eu","state","noAccessor","getPropertyDescriptor","r4","requestUpdate","finalized","properties","createProperty","elementStyles","finalizeStyles","flat","i4","_$Ep","enableUpdating","_$AL","_$Em","addController","_$Eg","renderRoot","isConnected","hostConnected","removeController","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","litNonce","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$ES","h3","getPropertyOptions","l4","_$E_","_$EC","async","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","ReactiveElement","globalThis","reactiveElementVersions","i2","s3","createPolicy","createHTML","e3","random","o3","n3","l2","h2","createComment","r3","v","f","g","$","_$litType$","for","w","T","WeakMap","A","createTreeWalker","E","d2","u2","c2","o6","u3","p2","$2","exec","C","el","currentNode","content","firstChild","nextNode","hasAttributes","getAttributeNames","s6","t5","ctor","M","H","I","S2","P","_$Cl","_$Cu","_$litDirective$","_$AO","_$AT","_$AS","l3","o4","N","_$AH","_$AN","_$AA","_$AB","_$AM","_$Cg","_$AU","_$AI","_$AR","u","_$AC","_$AD","creationScope","importNode","L","_$AP","setConnected","e5","k","capture","passive","handleEvent","host","z","litHtmlPolyfillSupport","litHtmlVersions","s4","renderOptions","_$Dt","renderBefore","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","n4","litElementPolyfillSupport","litElementVersions","component_styles_default","radio_group_styles_default","_$Ct","_$Ci","st","et","__defProp","__defProps","__getOwnPropDesc","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","__spreadValues","__spreadProps","__objRest","exclude","__decorateClass","decorators","kind","decorator","customElements","elements","finisher","e6","placement","originalKey","initializer","HTMLSlotElement","assignedElements","RADIO_CHILDREN","SlRadioGroup","hasButtonGroup","fieldset","getAllRadios","includes","handleRadioClick","checkedRadio","closest","radio","checked","handleKeyDown","radios","disabled","incr","handleSlotChange","defaultSlot","button_group_styles_default","BUTTON_CHILDREN","SlButtonGroup","handleFocus","findButton","handleBlur","handleMouseOver","handleMouseOut","slottedElements","flatten","hasFocusVisible","isSupported","sheet","insertRule","focusVisibleSelector","button_styles_default","radio_button_styles_default","_$litStatic$","raw","FormDataEventPolyfill","formData","FormDataPolyfill","FormData","form","entries","getAll","polyfillFormData","cancelable","supportsFormDataEvent","readyState","FormSubmitController","reportValidity","handleFormData","handleFormSubmit","val","noValidate","stopImmediatePropagation","submit","submitter","clipPath","overflow","HasSlotController","slotNames","hasDefaultSlot","hasNamedSlot","slotName","slot","getTextContent","assignedNodes","watch","propName","resolvedOptions","waitUntilFirstUpdate","decoratedFnName","propNameKey","changedProps","CustomEvent","bubbles","composed","detail","waitForEvent","SlRadioButton","formSubmitController","hasSlotController","invalid","variant","size","pill","hiddenInput","setCustomValidity","handleClick","handleCheckedChange","handleDisabledChange","checkValidity","fallback","form_control_styles_default","input_styles_default","connectedElements","documentElementObserver","translations","documentLanguage","documentElement","lang","language","attributeFilter","LocalizeController","term","subcode","primary","secondary","term2","date","dateToFormat","Intl","DateTimeFormat","number","numberToFormat","isNaN","NumberFormat","relativeTime","unit","RelativeTimeFormat","translation2","$code","registerTranslation","$name","$dir","clearEntry","currentValue","hidePassword","progress","resize","scrollToEnd","scrollToStart","selectAColorFromTheScreen","showPassword","toggleColorFormat","SlInput","localize","isPasswordVisible","filled","helpText","clearable","togglePassword","readonly","required","valueAsDate","_b","valueAsNumber","setSelectionRange","selectionStart","selectionEnd","selectionDirection","setRangeText","selectMode","handleChange","handleClearClick","stopPropagation","handleInput","handleInvalid","hasModifier","handlePasswordToggle","handleValueChange","hasLabelSlot","hasHelpTextSlot","hasLabel","hasHelpText","minlength","maxlength","step","autocapitalize","autocomplete","autocorrect","autofocus","spellcheck","pattern","enterkeyhint","inputmode","basePath","setBasePath","scripts","getElementsByTagName","configScript","fallbackScript","eye","eyedropper","registry","resolver","encodeURIComponent","watchedIcons","getIconLibrary","includeFiles","iconFiles","requestIcon","fileData","fileDataPromise","fetch","response","ok","status","requestInclude","iconFileData","svg","div","firstElementChild","outerHTML","icon_styles_default","it","directiveName","vt","resultType","parser","DOMParser","SlIcon","library","icon","setIcon","getUrl","redraw","file","svgEl","parseFromString","mutator","isTabbable","offsetParent","visibility","getTabbableBoundary","allElements","walk","activeModals","locks","lockBodyScrolling","lockingEl","unlockBodyScrolling","behavior","round","getOffset","offsetLeft","scrollLeft","minX","maxX","minY","maxY","scrollTo","clientWidth","clientHeight","dialog_styles_default","animateTo","keyframes","duration","animation","animate","prefersReducedMotion","parseDuration","matchMedia","matches","stopAnimations","all","getAnimations","handleAnimationEvent","requestAnimationFrame","shimKeyframesHeightAuto","calculatedHeight","keyframe","defaultAnimationRegistry","customAnimationRegistry","setDefaultAnimation","animationName","ensureAnimation","getAnimation","customAnimation","defaultAnimation","SlDialog","open","noHeader","modal","tabDirection","handleFocusIn","handleKeyUp","activate","deactivate","checkFocus","preventScroll","dialog","hidden","requestClose","panel","originalTrigger","autoFocusTarget","overlay","panelAnimation","overlayAnimation","opacity","easing","icon_button_styles_default","SlIconButton","isLink","interior","download","menu_item_styles_default","SlMenuItem","select_styles_default","SlSelect","isOpen","displayLabel","displayTags","multiple","maxTagsVisible","hoist","handleMenuSlotChange","resizeObserver","ResizeObserver","resizeMenu","syncItemsFromValue","unobserve","getItemLabel","getItems","getValueAsArray","dropdown","items","firstItem","lastItem","menu","setCurrentItem","typeToSelect","handleLabelClick","handleMenuSelect","handleMenuShow","handleMenuHide","handleMultipleChange","handleTagInteraction","composedPath","reposition","checkedItems","syncValueFromItems","total","checkedItem","checkedValues","hasSelection","tag_styles_default","SlTag","removable","handleRemoveClick","menu_styles_default","SlMenu","typeToSelectString","getAllItems","includeDisabled","getCurrentItem","activeItem","typeToSelectTimeout","handleMouseDown","getSide","getAlignment","getMainAxisFromPlacement","getLengthFromAxis","axis","computeCoordsFromPlacement","floating","commonX","commonY","mainAxis","commonAlign","isVertical","coords","getSideObjectFromPadding","padding","expandPaddingObject","rectToClientRect","detectOverflow","middlewareArguments","_await$platform$isEle","platform2","rects","strategy","boundary","rootBoundary","elementContext","altBoundary","paddingObject","clippingClientRect","getClippingRect","isElement","contextElement","getDocumentElement","elementClientRect","convertOffsetParentRelativeRectToViewportRelativeRect","getOffsetParent","within","min$1","max$1","hash$1","getOppositePlacement","matched","hash","getOppositeAlignmentPlacement","flip","_middlewareData$flip","middlewareData","initialPlacement","checkMainAxis","crossAxis","checkCrossAxis","fallbackPlacements","specifiedFallbackPlacements","fallbackStrategy","flipAlignment","detectOverflowOptions","oppositePlacement","getExpandedPlacements","placements","overflows","overflowsData","main","cross","alignment","mainAlignmentSide","getAlignmentSides","isRTL","side2","_middlewareData$flip$","_middlewareData$flip2","nextIndex","nextPlacement","reset","skip","resetPlacement","_overflowsData$slice$","placement2","overflow2","acc","diffCoords","mainAxisMulti","crossAxisMulti","rawValue","convertValueToCoords","limiter","mainAxisCoord","crossAxisCoord","maxSide","limitedCoords","isWindow","getWindow","ownerDocument","defaultView","getComputedStyle$1","getNodeName","nodeName","isHTMLElement","Element","isShadowRoot","isOverflowElement","overflowX","overflowY","isTableElement","isContainingBlock","isFirefox","css","perspective","contain","willChange","min2","max2","includeScale","clientRect","scaleX","scaleY","getNodeScroll","pageXOffset","pageYOffset","getWindowScrollBarX","getRectRelativeToOffsetParent","isOffsetParentAnElement","isScaled","offsets","offsetRect","clientLeft","clientTop","getParentNode","assignedSlot","getTrueOffsetParent","window2","getContainingBlock","getDimensions","getNearestOverflowAncestor","getOverflowAncestors","_node$ownerDocument","scrollableAncestor","isBody","win","visualViewport","updatedList","getClientRectFromClippingAncestor","clippingParent","abs","innerWidth","scale","getViewportRect","getInnerBoundingClientRect","_element$ownerDocumen","scrollWidth","scrollHeight","getDocumentRect","getClippingAncestors","clippingAncestors","clipperElement","clippingAncestors2","rootNode","getRootNode","firstClippingAncestor","clippingRect","accRect","clippingAncestor","getElementRects","getClientRects","autoUpdate","ancestorScroll","_ancestorScroll","ancestorResize","_ancestorResize","elementResize","_elementResize","animationFrame","cleanedUp","ancestors","ancestor","frameId","prevRefRect","frameLoop","nextRefRect","_observer","cancelAnimationFrame","computePosition2","middleware","statefulPlacement","skippedMiddlewareNames","nextX","nextY","computePosition","dropdown_styles_default","SlDropdown","stayOpenOnSelect","distance","skidding","handleMenuItemActivate","handlePanelSelect","handleDocumentKeyDown","handleDocumentMouseDown","containingElement","addOpenListeners","startPositioner","removeOpenListeners","stopPositioner","focusOnTrigger","getMenu","_a2","_c","handlePopoverOptionsChange","updatePositioner","handleTriggerClick","handleTriggerKeyDown","menuItems","firstMenuItem","lastMenuItem","ignoredKeys","handleTriggerKeyUp","handleTriggerSlotChange","updateAccessibleTrigger","accessibleTrigger","positionerCleanup","positioner","assign","maxWidth","maxHeight","heightSide","widthSide","xMin","xMax","yMin","yMax","dimensions","SlButton","doc","formId","getElementById","caret","loading","outline","circle","spinner_styles_default","SlSpinner","split_panel_styles_default","clamp","SlSplitPanel","vertical","snapThreshold","handleResize","detectSize","cachedPositionInPixels","percentageToPixels","pixelsToPercentage","handleDrag","onMove","pointerEvent","dims","offsetX","offsetY","pageX","pageY","stop","drag","newPositionInPixels","snap","snapPoint","newPosition","handlePositionChange","positionInPixels","handlePositionInPixelsChange","handleVerticalChange","contentRect","gridTemplate","gridTemplateAlt","radio_styles_default","SlRadio","details_styles_default","SlDetails","handleSummaryClick","handleSummaryKeyDown","details","summary","checkbox_styles_default","SlCheckbox","indeterminate","handleStateChange","checkbox","switch_styles_default","SlSwitch","switch","tooltip_styles_default","SlTooltip","getTarget","hasTrigger","getPropertyValue","hoverTimeout","handleOptionsChange","triggerType","arrowDimensions","minProp","maxProp","endDiff","startDiff","arrowOffsetParent","clientSize","centerToReference","min3","max3","offset2","centerOffset","arrowX","arrowY","staticSide","card_styles_default","SlCard","card","generateUUID","uuid","randomNumber","RevisaoUtil","partes","formatDDMMYYYYAndTime","num","padStart","getFullYear","padTo2Digits","getMonth","getDate","getHours","getMinutes","InlineRevisionBaseFormat","valueToAttributes","formatoAtual","InsBlot","DelBlot","cursorEstaSobreBlotDel","CustomKeyboard","onKeyDown","onKeyPress","revisao","gerenciarKeydown","emRevisao","CustomClipboard","onCut","copiarSelecaoParaClipboard","handleRemove","tempElement","cloneContents","write","ClipboardItem","Blob","finally","ModuloRevisao","ignorarEventoTextChange","isAbrindoTexto","usuario","tableModule","tableTrick","addClipboardMatcher","addKeyboardBindings","onTextChange","tratarClick","getModule","isInsertTable","td","isInTable","setIgnorarEventoTextChange","table_handler","isTagRevisao","param","getTagRevisaoMaisProxima","elemento","elRevisao","mostrarTooltipRevisao","revisarTodos","aceitar","revisar","getRevisoes","elementosRevisao","todos","isTagIns","fnActionRevisao","elementos","closeTooltip","ajustaPosicaoTooltip","limpaTooltip","topOffset","scrollY","leftOffset","scrollX","createTooltip","tooltipElem","createContextualFragment","removed","added","buildAttributes","addBindingOnTop","keyBinding","newBinding","handleUndo","handleRedo","hasModuloTabela","keyboardHandler","formatDate","deslocamento","isEmbedBlot","posicao","numChars","oldContent","isInsertJaFormatadoEmModoDeRevisao","apenasNovaLinha","numCaracteresRemovidos","itemUndo","rev","idx","op2","setUsuario","setEmRevisao","getQuantidadeRevisoes","getRevisoesSemDuplicidade","listElements","revisoesSemDuplicidade","Diff","buildValues","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","count","tmp","lastComponent","equals","clonePath","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","addPath","removePath","_oldPos","canRemove","pushComponent","commonCount","comparator","array","chars","characterDiff","diffChars","oldStr","newStr","extendedWordChars","reWhitespace","wordDiff","diffWords","defaults","generateOptions","ignoreWhitespace","tokens","lineDiff","retLines","linesAndNewlines","newlineIsToken","objectPrototypeToString","jsonDiff","canonicalize","replacementStack","canonicalizedObj","toJSON","sortedKeys","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","arrayDiff","getTextoSemHtml","removeEspacosDuplicados","endsWithWord","texto","indicadores","word","addSpaceRegex","escapeRegex","converteIndicadorParaTexto","primeiraLetraMaiuscula","removeAllHtmlTags","StringBuilder","strs","REGEX_ACCENTS","removeTagEConteudo","textoDiffAsHtml","texto1","texto2","typeDiff","buildPartRemoved","substituiEspacosEntreTagsPorNbsp","regex","substituiMultiplosEspacosPorNbsp","decodeHtml","txt","V","quillSnowStyles","EstiloTextoClass","MarginBottomClass","NotaRodape","numero","QuillUtil","originalEditTooltip","originalSaveTooltip","NoIndentClass","DefaultKeyboardModule","DefaultClipboardModule","NotaRodapeModal","ajustaHtml","idNotaRodape","textoInicialNotaRodape","domNodeNotaRodape","tituloModal","modalElement","overlayElement","transition","zIndex","keydownListener","quillContainer","configurarAcoesLink","modalTitle","fromSave","shouldClose","removeModal","confirm","cfgInline","INLINE_ATTRIBUTE","IdNotaRodapeAttribute","NumeroAttribute","TextoAttribute","NotaRodapeBlot","notaRodape","buildNotaRodape","encodeHtml","__decorate","Reflect","decorate","SuppressedError","connect","store","baseElement","_storeUnsubscribe","subscribe","stateChanged","getState","_state","LexmlEmendaConfig","urlConsultaParlamentares","urlAutocomplete","tamanhoMaximoAnexo","tamanhoMaximoImagem","formatProdErrorMessage","$$observable","observable","randomString","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","miniKindOf","toDateString","setDate","isDate","stackTraceLimit","isError","constructorName","ctorName","kindOf","typeOfVal","process","env","NODE_ENV","warning","isCrushed","AdicionarAgrupadorArtigo","hotkey","descricao","execute","atual","tipo","refAux","manterNoMesmoGrupoDeAspas","novo","adicionarAgrupadorArtigoAction","adicionarAgrupadorArtigoAntesAction","adicionarAlerta","alerta","mensagem","podeFechar","exibirComandoEmenda","removerAlerta","adicionarAlteracaoComAssistenteAction","norma","dispositivos","TipoDispositivo","agrupadorGenerico","tagId","descricaoPlural","tiposPermitidosPai","tiposPermitidosFilhos","tipoProvavelFilho","INDICADOR_SEQUENCIA","INDICADOR_FIM_SEQUENCIA","INDICADOR_DESDOBRAMENTO","alinea","articulacao","artigo","capitulo","caput","generico","inciso","livro","omissis","paragrafo","parte","secao","subsecao","titulo","ementa","AdicionarElemento","isDispositivoAlteracao","conteudo","hasDesmembramento","adicionarElementoAction","adicionarArtigo","adicionarArtigoAntes","adicionarArtigoDepois","adicionarAlinea","adicionarAlineaAntes","adicionarAlineaDepois","adicionarAlineaFilho","adicionarInciso","adicionarIncisoAntes","adicionarIncisoDepois","adicionarIncisoFilho","adicionarItem","adicionarItemAntes","adicionarItemDepois","adicionarItemFilho","adicionarParagrafo","adicionarParagrafoAntes","adicionarParagrafoDepois","adicionarParagrafoFilho","adicionarElementoFromClipboardAction","isColarSubstituindo","AgruparElemento","adicionarParte","adicionarLivro","adicionarTitulo","adicionarCapitulo","adicionarSecao","adicionarSubsecao","APLICAR_ALTERACOES_EMENDA","aplicarAlteracoesEmendaAction","alteracoesEmenda","revisoes","atualizarReferenciaElementoAction","atualizarTextoElementoAction","autofixAction","elementoSelecionadoAction","InformarDadosAssistenteAction","InformarExistenciaDoElementoNaNorma","nomeAcao","existeNaNormaAlterada","subType","considerarElementoExistenteNaNorma","considerarElementoNovoNaNorma","InformarNorma","informarNormaAction","MoverElementoAbaixo","moverElementoAbaixoAction","MoverElementoAcima","moverElementoAcimaAction","ABRIR_ARTICULACAO","RemoverElemento","elementoLinhaAnterior","removerElementoAction","RenumerarElemento","renumerarElementoAction","restaurarElementoAction","suprimirAgrupadorAction","suprimirElementoAction","TransformarElemento","transformarEmOmissisAlinea","transformarEmOmissisIncisoCaput","transformarEmOmissisItem","transformarEmOmissisParagrafo","transformarEmOmissisArtigo","transformarEmOmissisIncisoParagrafo","transformarAlineaEmIncisoCaput","transformarAlineaEmIncisoParagrafo","transformaAlineaEmItem","transformarArtigoEmParagrafo","transformarGenericoEmInciso","transformarGenericoEmAlinea","transformarGenericoEmItem","transformarIncisoParagrafoEmParagrafo","transformarIncisoCaputEmParagrafo","transformarIncisoCaputEmAlinea","transformarIncisoParagrafoEmAlinea","transformarOmissisEmAlinea","transformarOmissisEmArtigo","transformarOmissisEmIncisoCaput","transformarOmissisEmIncisoParagrafo","transformarOmissisEmItem","transformarOmissisEmParagrafo","transformarItemEmAlinea","transformarParagrafoEmArtigo","transformarParagrafoEmIncisoParagrafo","transformarParagrafoEmIncisoCaput","VALIDAR_ARTICULACAO","validarArticulacaAction","validarElementoAction","AtualizarNotaAlteracao","notaAlteracao","atualizarNotaAlteracaoAction","removerElementoSemTextoAction","DescricaoSituacao","isSituacaoExclusivaDispositivoEmenda","dispositivo","DISPOSITIVO_ADICIONADO","DISPOSITIVO_MODIFICADO","DISPOSITIVO_SUPRIMIDO","situacao","descricaoSituacao","TEXTO_OMISSIS","isArticulacao","isDispositivoGenerico","isArtigo","isCaput","isParagrafo","isInciso","isIncisoCaput","pai","isIncisoParagrafo","isAlinea","isItem","isOmissis","isAgrupador","isAgrupadorNaoArticulacao","isAgrupadorGenerico","isDispositivoDeArtigo","isEmenta","isTextoMaiusculo","isCapitulo","isParte","isLivro","isTitulo","isTextoOmitido","ClassificacaoDocumento","getArticulacao","getArticulacaoAlteracao","isArticulacaoAlteracao","getDispositivo","filhos","hasAlteracao","alteracoes","findDispositivoByUuid","getUltimoFilho","hasFilhos","getFilhosEstiloLexML","irmaosMesmoTipo","artigos","getAgrupadoresAcima","referencia","agrupadores","getArtigo","getArtigoDoProjeto","getDispositivoAnteriorNaSequenciaDeLeitura","disp","accept","anterior","irmaos","getFilhosArtigoEstiloLexML","getDispositivoPosteriorNaSequenciaDeLeitura","aPartirDe","proximo","getIrmaoPosteriorIndependenteDeTipo","isDispositivoRaiz","art","getParagrafosEOmissis","getProximoArtigoAnterior","buscaArtigoAnteriorAbaixo","getAgrupadorPosterior","hasFilhoGenerico","isUnicoMesmoTipo","isUltimoMesmoTipo","isPrimeiroMesmoTipo","getDispositivoAnterior","getDispositivoAnteriorMesmoTipo","getDispositivoAnteriorMesmoTipoInclusiveOmissis","getIrmaoAnteriorIndependenteDeTipo","getDispositivoAnteriorDireto","getDispositivoPosterior","getDispositivoPosteriorMesmoTipo","getDispositivosAnterioresMesmoTipo","getDispositivosPosterioresMesmoTipo","getDispositivoPosteriorMesmoTipoInclusiveOmissis","getDispositivosPosteriores","isExclusao","indexOfArtigo","isArtigoUnico","isParagrafoUnico","getDispositivoCabecaAlteracao","cabecaAlteracao","isDispositivoCabecaAlteracao","isAntesDoPrimeiroDispositivoOriginal","isOriginal","isUltimaAlteracao","lista","getDispositivoAndFilhosAsLista","buscaDispositivoDeArtigoPosterior","isUltimaEnumeracao","proximoDispositivoDeArtigo","isTodosFilhosTipoEnumeracaoSuprimidos","getSomenteFilhosDispositivoAsLista","isSuprimido","DISPOSITIVO_ORIGINAL","isAdicionado","DISPOSITIVO_NOVO","isModificado","isModificadoOuSuprimido","buildListaDispositivos","percorreHierarquiaDispositivos","visit","buscaNaHierarquiaDispositivos","buscaDispositivoById","projetoNorma","idArtigo","extraiIdArtigo","raiz","isAscendente","dAscendente","isDescendenteDeSuprimido","buscaProximoOmissis","posterior","isDispositivoNovoNaNormaAlterada","podeRenumerarFilhosAutomaticamente","podeEditarNotaAlteracao","getProximoAgrupadorAposAgrupador","ignorarFilhos","filhoAgrupador","proximoIrmao","getProximoAgrupadorAposArtigo","getTiposAgrupadoresQuePodemSerInseridosDepois","primeiroAgrupador","getPrimeiroAgrupadorNaArticulacao","agrupadorDepois","getPrimeiroAgrupadorDepois","getTipoAgrupadorNivelAcima","agrupadorRef","getRangeTiposAgrupador","getTipoAgrupadorNivelAbaixo","tipos","indexPrimeiroAgrupador","getIndexTipoAgrupador","getTiposAgrupadoresQuePodemSerInseridosAntes","tipoAgrupadorNivelAcima","agrupadorAntes","getAgrupadorAntes","tipoInicial","tipoFinal","tipoAgrupador","tiposAgrupadorArtigoOrdenados","indexRef","hasEmenta","findDispositivoByUuid2","uuid2","getDispositivoByUuid2","TagNode","nome","valores","atributos","resultado","valor","addAtributo","atributo","DispositivoComparator","d1","i1","getIndices","comparaIndices","indices","getPaiParaComparacao","getIndexDoFilho","indices1","indices2","size1","size2","DispositivoEmendaUtil","alteracao","CmdEmdUtil","dispositivosEmenda","dispositivoAfetado","getDispositivoAfetado","isAlteracaoIntegral","primeiro","filhosAdicionadosComAgrupador","listaFilhosAdicionadosComAgrupador","isOmissisAdjacenteADispositivoDeEmenda","isAlteracaoIntegralEmAlteracao","getDispositivoAfetadoEmAlteracao","getDescricaoSituacaoParaComandoEmenda","filho","mapa","atualizaMapa","hierarquia","getHierarquiaDispositivosDeUmDispositivo","mapaAtual","dispositivoAtual","mapaFilho","novoMapa","atualizaMapaDeAlteracaoDeNorma","sequencias","qtdSequencias","isSequenciaPlural","sequencia","qtdRanges","getQuantidadeRanges","getPrimeiroRange","getQuantidadeDispositivos","getArtigoPosterior","isUltimoDispositivoDoMesmoTipo","buscaProximoArtigo","getProximoIrmaoRecursivo","irmao","sb","pronomePossessivoSingular","getNumeracaoComRotuloParaComandoEmenda","dispositivosAlterados","getDispositivoPosteriorDireto","alteracaoNormaVigente","trataTextoParaCitacao","dispositivosAdicionadosProposicao","implicaEmRenumeracaoRedacaoFinal","rotulo","getFilhoNaoAdicionadoDeAgrupadorAdicionado","agrupador","TipoMensagem","AutoFix","hasIndicativoDesdobramento","hasIndicativoFinalSequencia","hasIndicativoContinuacaoSequencia","TEXTO_DEFAULT_DISPOSITIVO_ALTERACAO","hasIndicativoInicioAlteracao","normalizaSeForOmissis","validaTextoDispositivo","mensagens","addMensagem","ERROR","artigoDefinido","isValidHTML","WARNING","base","INFORMAR_NORMA","isSeguidoDeOmissis","tipoEmenda","EMENDA_ARTIGO_ONDE_COUBER","verificaNecessidadeRenumeracaoRedacaoFinal","localStorage","getItem","fix","nomeEvento","existe","validaTexto","validaTextoAgrupador","TipoGenero","GeneroFeminino","Base","tipoGenero","pronomePossessivoPlural","artigoDefinidoSingular","artigoDefinidoPlural","artigoIndefinidoSingular","artigoDefinidoPrecedidoPreposicaoASingular","artigoDefinidoPrecedidoPreposicaoAPlural","contracaoEmArtigoDefinidoSingular","GeneroIndefinido","GeneroMasculino","generoFeminino","generoMasculino","generoIndefinido","generoFromLetra","letraGenero","NomeComGenero","genero","VOCABULARIO","autoridades","urn","tiposDocumento","fakeUrns","sigla","urnAutoridade","urnTipoDocumento","siglas","atalhosUrn","eventos","tipoTextoProcessoLegislativo","substitutivo","getSigla","getTipo","fnProcurarPorUrnTipoDocumento","getNumero","anoNumero","formataNumero","getData","getDataPorExtenso","mes","dataInformada","getAno","retiraFragmento","converteDataFormatoBrasileiroParaUrn","dataRegex","buildFakeUrn","ano","fake","autoridade","buildUrn","validaUrn","getAutoridade","getNomeExtensoComDataExtenso","atalho","dataString","diaOuApenasAno","dataExtenso","getDataExtenso","toLocaleString","toLocaleDateString","month","getRefGenericaProjeto","ALGARISMOS_ROMANOS","CM","D","CD","XC","XL","X","IX","IV","isNumeracaoZero","isNumero","isNumeracaoValida","isLetra","letra","isRomano","converteLetraParaNumeroArabico","acumulador","converteNumeroArabicoParaLetra","strNumero","intToAlpha","converteNumeroRomanoParaArabico","numeroRomano","tot","numberCharToInt","converteNumeroArabicoParaRomano","temp","search","resto","trataNumeroAndComplemento","funcNumero","funcComplemento","converteNumerosComplementoParaLetra","converteLetrasComplementoParaNumero","comparaNumeracao","partesA","partesB","numA","remainingA","numB","remainingB","rA","rB","calculaNumeracao","getNumeracao","mapValidacaoNumeracao","Artigo","Paragrafo","Inciso","Alinea","Item","getProximoNumero","getNumeroAbaixo","dispositivosAnteriores","getArtigosAnterioresIndependenteAgrupador","dispositivoPosteriores","getArtigosPosterioresIndependenteAgrupador","dispositivoOriginalAnterior","dispositivoOriginalPosterior","dispositivoAnteriorAdicionado","seqDispEmenda","contaIrmaosNaoOriginaisConsecutivosAte","validaNumeracao","_f","RENUMERAR_DISPOSITIVO","_g","OMISSIS_ANTES","_h","validaOrdemDispositivo","_j","isLastFilho","validaNumeracaoDispositivoAlteracao","validaNumeracaoDispositivo","validaDispositivo","relacaoFilhos","dispositivo1","dispositivo2","OMISSIS_SEQUENCIAIS","isDispositivosSequenciais","validaHierarquia","validaReferencia","DispositivoSuprimido","dispositivoOriginal","getAcoesPermitidas","acoes","acao","buildHref","calculaSequencialOmissis","buildHierarquia","idArray","buildId","buildIdCaputEAlteracao","isElementoDispositivoAlteracao","uuidAlteracao","getNivel","buildElementoPai","articulacaoAlteracao","lexmlId","uuid2Alteracao","createElemento","procurarElementoAnterior","fechaAspas","elementoAnteriorNaSequenciaDeLeitura","dispositivoAnteriorNaSequenciaDeLeitura","nivel","editavel","sendoEditado","acoesPossiveis","getAcoesPossiveis","abreAspas","dispositivoAlteracao","tipoOmissis","tiposAgrupadoresQuePodemSerInseridosAntes","tiposAgrupadoresQuePodemSerInseridosDepois","ultimoFilhoDireto","createElementoValidado","createElementos","validados","fnCreateElemento","getElementos","getDispositivoFromElemento","ignorarElementoAlteracao","getArticulacaoFromElemento","flatMap","criaElementoValidadoSeNecessario","incluiAcoes","criaListaElementosAfinsValidados","incluiDispositivo","listaDispositivosRenumerados","podeAdicionarAtributoDeExistencia","StateType","abreArticulacao","action","modo","past","present","future","ui","stateType","DocumentoCarregado","alertas","numEventosPassadosAntesDaRevisao","load","classificacao","Counter","generateId","ValidacaoDispositivo","BlocoAlteracao","tipoAcao","iniciarBlocoAlteracao","finalizarBlocoAlteracao","BlocoAlteracaoNaoPermitido","TipoConteudo","ConteudoDispositivo","tipoConteudo","ConteudoTexto","HierarquiaAgrupador","addFilho","addArtigo","addFilhoOnPosition","addArtigoOnPosition","hasArtigos","_filhos","removeFilho","removeArtigo","renumeraFilhos","createRotulo","renumeraArtigos","HierarquiaDispositivo","novoId","NumeracaoAgrupador","informouAgrupadorUnico","getNomeAgrupadorUnico","normalizaNumeracao","numeracao","createNumeroFromRotulo","numAux","prefixo","toLocaleUpperCase","setMaiusculaPrimeiraLetraDaDescricao","palavras","toLocaleLowerCase","getNumeracaoParaComandoEmenda","NumeracaoIndisponivel","adicionarTextoOmissisAction","removerTextoOmissisAction","ACEITAR_REVISAO","aceitarRevisaoAction","REJEITAR_REVISAO","rejeitarRevisaoAction","exibirDiferencaAction","acoesMenu","acoesExclusivasEdicao","isAcaoMenu","acoesDisponiveis","getAcaoAgrupamento","podeConverterEmOmissis","MotivosOperacaoNaoPermitida","buildPast","retornaEstadoAtualComMensagem","normalizaNomeAcaoTransformacao","tipoDispositivo","replaceAll","isAcaoPermitida","montaEMostraMensagensErro","verificaExistenciaEAdicionaMotivoOperacaoNaoPermitida","ORIGINAL","buildMessages","motivosOperacaoNaoPermitida","motivo","RegrasAgrupadores","AGRUPADOR","getAcaoPossivelTab","getAcaoPossivelShiftTab","DispositivoNovo","localeCompare","DispositivoAdicionado","EMENDA","SituacaoDispositivo","TipoLexml","converteFilhos","destino","criaDispositivo","copiaFilhos","AlineaLexml","PROXIMO_DIFERENTE_ALINEA","RegrasAlinea","SUFIXO","ArtigoLexml","PROXIMO_DIFERENTE_ARTIGO_ALTERACAO_NORMA","hasAgrupadoresPosteriores","hasAgrupadoresAcima","tiposExistentes","RegrasArtigo","BlocoAlteracaoPermitido","PREFIXO","ARTIGO_UNICO","informouArtigoUnico","isNumeracaoComComplementoAlfabetico","isNumeracaoComComplementoNumerico","getNumeroAndSufixoNumeracao","paraComandoEmenda","ordinal","NumeracaoArtigo","incisos","getIncisosCaput","paragrafos","_paragrafos","addIncisoCaput","addParagrafo","removeParagrafo","renumeraIncisos","renumeraParagrafos","ajustaRotuloParagrafoUnicoSeNecessario","nParagrafos","paragrafoUnico","HierarquiaArtigo","CaputLexml","RegrasCaput","NumeracaoCaput","DispositivoGenericoLexml","RegrasDispositivoGenerico","NumeracaoGenerico","IncisoLexml","PROXIMO_DIFERENTE_INCISO","complemento","RegrasInciso","NumeracaoInciso","ItemLexml","RegrasItem","isNumeracaoValidaParaRotulo","NumeracaoItem","ParagrafoLexml","PROXIMO_DIFERENTE_PARAGRAFO","RegrasParagrafo","PARAGRAFO_UNICO","informouParagrafoUnico","NumeracaoParagrafo","ArticulacaoLexml","_artigos","CapituloLexml","DispositivoAgrupadorGenericoLexml","LivroLexml","ParteLexml","SubsecaoLexml","SecaoLexml","TituloLexml","OmissisLexml","RegrasOmissis","_texto","ConteudoOmissis","EmentaLexml","RegrasEmenta","desativaRotuloAutomaticoSeDispositivoAlteracao","createArticulacao","createAlteracao","createByInferencia","criaDispositivoCabecaAlteracao","createFromReferencia","podeSerUltimaalteracao","_l","_k","_p","_o","_m","_r","_q","_u","_t","_v","_x","_w","_0","_z","_3","_1","_2","createWhenReferenciaBlocoAlteracao","createWhenReferenciaIsArtigo","createWhenReferenciaIsAgrupador","createFromReferenciaDefault","buildDispositivosAssistente","referencias","identificaReferencias","artigoInformado","cabeca","buildCabecaAlteracao","processaFilhos","resultParser","ReferenciaDispositivoParser","valido","regexEncaixe","regexArtigo","regexParagrafo","regexInciso","regexAlinea","regexItem","preparaTexto","execArray","ativarDesativarRevisaoAction","quantidade","Modo","getRevisoesElemento","isRevisaoElemento","findRevisaoByElementoUuid","elementoAposRevisao","findRevisoesByElementoUuid","identificarRevisaoElementoPai","rAux","uuidPai","ElementoIncluido","getUuidPaiElementoRevisado","elementoAntesRevisao","rPai","actionType","isRevisaoMesmaSituacao","idRevisaoElementoPai","idRevisaoElementoPrincipal","findRevisaoElementoPrincipal","mapperActionTypeToDescricao","ADICIONAR_ELEMENTO","REMOVER_ELEMENTO","SUPRIMIR_ELEMENTO","ATUALIZAR_TEXTO_ELEMENTO","buildDescricaoRevisaoFromMovimentacaoElemento","RESTAURAR_ELEMENTO","ADICIONAR_ELEMENTOS_FROM_CLIPBOARD","buildDescricaoRevisaoFromStateType","UNDO","REDO","mapperStateTypeToDescricao","ElementoRemovido","ElementoRestaurado","ElementoModificado","ElementoSuprimido","buildDescricaoRevisaoElemento","buildDescricaoRevisaoTexto","getUuidPai","getRevisoesElementoAssociadas","isRevisaoJustificativa","existeFilhoExcluidoDuranteRevisao","uuids","isRevisaoDeExclusao","isRevisaoPrincipal","RevisaoJustificativaEnum","RevisaoTextoLivreEnum","getRevisoesDeExclusaoOrdenadasPorUuid","r1","removeAtributosDoElemento","removeAtributosDoElementoAnteriorNaSequenciaDeLeitura","atributosPermitidos","getQuantidadeRevisoesAll","revisoesDispositivos","listaRevisoes","salvaNoNavegadorOpcaoNaoMostrarNovamente","setItem","setCheckedElement","atualizaReferenciaElementoAnteriorSeNecessario","tipoProcessamento","findRevisaoDeExclusaoComElementoAnteriorApontandoPara","findUltimaRevisaoDoGrupo","dPrimeiroElementoIncluido","ultimoFilho","ePrimeiroElementoIncluido","isAtualizarPosicaoDeElementoExcluido","isRevisaoDeMovimentacao","isRevisaoDeTransformacao","isRevisaoDeModificacao","elementoIncluido","elementoExcluido","associarRevisoesAosElementosDosEventos","se","RevisaoRejeitada","RevisaoAdicionalRejeitada","associarRevisoesAosElementos","mergeEventosStatesAposAceitarOuRejeitarMultiplasRevisoes","tempStates","operacao","eventosParaUnificar","ElementoValidado","rejeitar","ElementoRenumerado","ElementoSelecionado","ElementoMarcado","SituacaoElementoModificada","eventosPast","tempState","unificarEvento","idsRevisoes","DispositivoOriginal","acoesFiltradas","resetUuidTodaArvore","copiaDispositivosParaOutroPai","posicaoAtualArtigo","paiAtual","ajustaReferencia","isPrimeiroArtigo","isPrimeiroParagrafo","isNovoDispositivoDesmembrandoAtual","getElementosDoDispositivo","valida","getElementosAlteracaoASeremAtualizados","getDispositivosCabecaAlteracaoFromElementos","ca","buildEventoAdicionarElemento","Eventos","setReferencia","buildEventoAtualizacaoElemento","buildUpdateEvent","original","removeAndBuildEvents","removidos","dispositivosRenumerados","dispositivoAnterior","ehDispositivoAlteracao","dispositivoValidado","elementosRemovidos","elementosValidados","buildEventoExclusaoElemento","dispositivoParaAtualizar","removeAgrupadorAndBuildEvents","agrupadoresAnteriorMesmoTipo","paiOriginal","removido","irmaoAnterior","transferidosParaOutroPai","posNoPaiNovo","novoPai","getPaiQuePodeReceberFilhoDoTipo","renumerados","renumeradosPaiOriginal","tipoFilho","dispositivosPermitidos","restauraAndBuildEvents","addRestauracao","elementoAntesRestauracao","restaura","aRestaurar","elementoPai","getElementoPaiDeEnumerodos","dipositivoPai","getEvento","ev","getElementosRemovidosEIncluidos","mapDispositivos","ElementoReferenciado","RevisaoAceita","evento","stateEvents","adicionarOmissisObrigatorios","adicionaElemento","textoModificado","refAtual","atualCaputPosicaoFilho","refUltimoFilho","originalmenteUnico","elementoAtualOriginal","textoFoiModificado","pDispositivo","naoPodeCriarFilho","INFO","posicaoAtual","calculaPosicao","paiDoNovo","elementoAtualAtualizado","_y","agrupaElemento","descricaoTipo","isAbrindoEmenda","posicaoDoNovoAgrupador","manterNovoNoMesmoGrupoDeAspas","dispositivosAlteracao","dispositivosArticulacao","criarNovaCabecaDeAlteracao","getReferencia","paiQuePodeReceberNovoAgrupador","posNovoAgrupador","calculaPosNovoAgrupador","getDispositivosASeremCopiadosParaOutroPai","dispositivosAux","fnFilterAgrupadorAdicionado","dArticulacao","dReferenciado","paiQuePodeReceberFilho","ds","isDispositivoValidoNoConjunto","dadosComplementares","pais","getPais","indexAtual","tiposAgrupadorArtigo","atuaEhDispositivoDeAlteracao","DispositivoModificado","renumeraParagrafosUnicos","paragrafosUnicos","processaDispositivosAdicionados","da","dispositivosAdicionados","criaEventosParaDispositivoAgrupador","criaEventoElementosIncluidos","isEmendaEmAlteracaoDeNorma","dea","idPosicaoAgrupador","isPrimeiroDispositivoEmAlteracaoDeNorma","elementosIncluidos","novoAgrupador","ajustaAtributosDispositivoAdicionado","criaArvoreDispositivos","idPai","referenciaAjustada","novoEl","ehCaput","idIrmaoAnterior","idSemCpt","urnNormaAlterada","corrigeIdDispositivoSeNecessario","processaRevisoes","elementosExcluidosEmModoDeRevisao","elementoAnterior","processarElementoDaRevisao","buildEventoRevisaoDispositivoRestaurado","revisoesRestauracao","atualizarUuidDoPaiDoElementoRemovido","revisaoPai","idRevisao","findRevisaoById","atualizaReferenciaElemento","urnNova","urnAnterior","normaExtenso","normaLink","textoDispositivo","textoUrn","indexCursor","removeItem","eventosUi","atualizaTextoElemento","textoOriginal","textoAtual","dispositivoOriginalNovamente","solicitaNorma","validaAlteracaoExistenciaDispositivo","newValueExisteNaNormaAlterada","currentValueExisteNaNormaAlterada","validaAlteracaoExistenteParaNovo","validaAlteracaoNovoParaExistente","isDispositivoPossuiPaiNovoNaNormaAlterada","existeSubordinadoComStatusExistente","existeDispositivoSemNumeroNaoOmissis","existeOmissis","existeNecessidadeDeOmissis","transformaTipoElemento","isAcaoTransformacaoPermitida","dispositivoAnteriorAtual","ultimoFilhoDispositivoAnteriorAtual","atualRenumerados","paiNovo","converteDispositivo","elementosRenumerados","buildEventoTransformacaooElemento","removeElemento","existeFilhoExcluidoOuAlteradoDuranteRevisao","isRejeitandoRevisao","findRevisaoByElementoUuid2","primeiroFilhoDoAgrupador","elPrimeiroFilhoDoAgrupador","isAtualizarElementoEmenta","getTipoSituacaoByDescricao","getDispositivoPaiFromElemento","redodDispositivoExcluido","isOmissisCaput","incluir","novosEvento","novos","primeiroElemento","idPrimeiroDispositivo","redoDispositivosExcluidos","remover","processarModificados","novosElementos","findRevisaoDeRestauracaoByUuid","processaRenumerados","processaValidados","processaSituacoesAlteradas","isUndoRedoInclusaoExclusaoAgrupador","eventosFiltrados","ajustarAtributosAgrupadorIncluidoPorUndoRedo","eventosFonte","eventosResultantes","refFonteAgrupadorIncluido","agrupadorIncluido","ajustarHierarquivoAgrupadorIncluidoPorUndoRedo","elAgrupador","processarRestaurados","elementoDeReferencia","elementoAntesDeRestaurarSituacao","processarRevisoesAceitasOuRejeitadas","revisoesRetornadasParaState","existeRevisaoCriadaPorExclusao","revisaoASerAtualizada","revisaoRetornada","ultimaRevisaoDoGrupo","getElementosFromRevisoes","retorno","listaSemEventosDeRevisao","elementoASerIncluido","eventosRevisao","getEventosDeRevisao","idsRevisoesAssociadas","eventoRestaurados","Situacao","restaurarSituacao","elementosParaMarcar","getEventoMarcacaoElemento","moverParaFimLinha","podeRemoverDispositivo","ajustarNumero","restauraElemento","possuiFilhosModificados","getSituacoesFilhos","situacoes","suprimeElemento","podeSuprimir","suprimeAndBuildEvents","buildFuture","processarSuprimidos","revisoesDeRejeicaoDeRestauracaoASeremRetornadas","getRevisoesFromElementos","incluidos","ultimoDispositivoCriado","isEmendamento","buildProjetoNormaFromJsonix","documentoLexml","emendamento","NORMA","PROJETO","getUrn","getMetadado","getParteInicial","getTextoArticulado","projeto","testMode","fnAjustaFormatoQuill","tempContainer","tempQuill","ajustarTextosParaQuill","retiraCaracteresDesnecessarios","documento","metadado","identificacao","parteInicial","epigrafe","buildContent","preambulo","buildDispositivoEmenta","buildArticulacao","substituiAspasRetasPorCurvas","tree","buildTree","lXhier","cabecasAlteracao","localPart","textoOmitido","buildContentDispositivo","buildAlteracao","lXcontainersOmissis","adicionaTextoAoUltimoDispositivoCriado","buildDispositivo","nomeAgrupador","ci","newInnerHTML","montaTag","elementTexto","buildDispositivoFromJsonix","TipoRestricaoEnum","InfoTextoColado","articulacaoProposicao","textoColadoOriginal","textoColadoAjustado","textoColadoAjustadoParaParser","jsonix","articulacaoColada","montarRestricoes","validarArticulacaoColadaAnaliseInicial","validarArticulacaoColadaAnaliseContextualizada","infoDispositivos","isColandoArtigoSemNumeracao","hasArtigoOndeCouber","tiposColados","montarListaTiposDispositivosColados","existentes","tipoColado","getTipoColadoFromArticulacao","getDispositivoReferencia","montarListaDispositivosExistentes","montarListaDispositivosNovos","infoElementos","podeColarAntes","restricoes","converterSufixoDosRotulos","ajustarRotuloArtigo","removeAspasENRSeNecessario","numerarArtigosOndeCouber","getJsonixFromTexto","existeItemSemPaiAlinea","ajustaFalsosItensParaParser","atualizarAtributosEAnaliseContextualizada","tiposRestricoesAnaliseInicial","ARTICULACAO_SEM_FILHOS","AGRUPADORES_DE_ARTIGO","DISPOSITIVOS_DE_TIPOS_DIFERENTES","DISPOSITIVOS_COM_ROTULO_DUPLICADO","textoAux","textoItemAjustadoParaPesquisa","comecaComAspas","removeEspacosExcendentesEntreRotuloENumeracao","newChar","headers","json","getTipoColadoFromDispositipo","nomeTipo","ajustaIdsNaArticulacaoColada","idsColados","idsExistentes","AGRUPADOR_GENERICO_NA_ARTICULACAO","hasAgrupador","existeDispositivoComRotuloDuplicado","isArticulacaoInconsistente","getTextoInconsistencia","ARTICULACAO_INCONSISTENTE","isDispositivoInconsistente","tiposPermitidos","rotulos","infoTextoColado","dispositivosExistentes","pluralTipoColado","ARTIGOS_SEM_NUMERACAO_DENTRO_DE_ALTERACAO","ALTERACAO_DENTRO_DE_ALTERACAO","dispositivosExistentesAux","isColandoFilhos","FILHOS_EM_DISPOSITIVO_SUPRIMIDO","ids","DISPOSITIVO_JA_MODIFICADO","isPermitidoColarAdicionando","referenciaAux","pluralTipoAtual","DISPOSITIVO_EM_POSICAO_INVALIDA","DISPOSITIVO_ANTES_DO_ATUAL","isColandoArtigosComFilhosSobreArtigosComAlteracoes","ARTIGO_COM_FILHOS_SOBRE_ARTIGO_COM_ALTERACOES","isColandoArtigosComAlteracoesSobreArtigosComFilhos","ARTIGO_COM_ALTERACOES_SOBRE_ARTIGO_COM_FILHOS","isColandoArtigoExistenteComMudancaDaNormaAlterada","ARTIGO_COM_MUDANCA_IDENTIFICACAO_NORMA_ALTERADA","hasArtigosComAlteracoes","hasArtigosComFilhos","tipoASerColado","f2","ajustaIdSeNecessario","ajustarId","contador","novoTexto","ajustaHtmlParaColagem","htmlInicial","allowedTags","removeAllHtmlTagsExcept","grupo1","grupo2","REGEX_OMISSIS","colarDispositivos","isUsarDispositivoDeMesmoRotuloComoReferenciaDuranteAdicao","isColandoEmAlteracaoDeNorma","adicionados","modificados","suprimidos","buscarDispositivoByIdTratandoParagrafoUnico","colarDispositivoSubstituindo","colarDispositivoAdicionando","eventoElementoRemovido","isAdicionarNaPosicaoAtual","buildEventoElementoRemovido","buildEventoElementoIncluido","buildEventosElementoModificado","buildEventoElementosRenumerados","processaEventosSuprimidos","buildEventoSituacaoElementoModificada","buildEventoElementoMarcado","filhosASeremRenumerados","primeiroDispositivoColado","elementoAdicionados","paiRef","referenciaUI","dispositivosProcessar","getDispositivosToElementoSuprimido","elementosComSituacaoModificada","getDispositivosEmAlteracaoDeNormaASeremAtualizados","getParagrafosDeNumero1","getArtigosComAlteracaoDeNorma","dOriginal","dColado","colecaoInfoOmissis","omissisImediatamenteAnterior","fColado","montarInfoOmissis","fOriginal","getUltimoDispositivoDoIntervaloOmitido","suprimirDispositivosForaDosIntervalosOmitidos","omitidos","dispositivosOriginaisOmitidosNaArticulacaoColada","isPrecedidoPorOmissis","ajustaSituacaoDispositivoAdicionado","removeOmissis","renumerarEAjustarIds","criaAtributosComunsAdicionado","omissisColado","dispositivosDaArvoreDoOmisses","dispositivosDaArvoreDoOriginal","indexOmissis","anteriorOmissis","posteriorOmissis","anteriorOmissisNaArvoreDoOriginal","posteriorOmissisNaArvoreDoOriginal","getDispositivosOriginais","prefixos","posteriorOmissisNaArvoreDoOmissis","indexAnteriorNaListaOriginal","findIndex","indexPosteriorNaListaOriginal","getMensagemTipoRevisoes","contemRevisoesDispositivos","JustificativaAlterada","contemRevisoesJustificativa","Revisao","dataHora","RevisaoJustificativa","RevisaoTextoLivre","RevisaoElemento","formatDateTime","getSeconds","ATUALIZAR_USUARIO","atualizarUsuarioAction","isUndoDeRevisaoAceitaOuRejeitada","isAcaoDeRevisaoRejeitada","processaEventosDeSupressao","getEventos","revisoesParaRemover","getElementosFromEventos","eAux","processaEventosDeModificacao","isRevisaoDeRestauracao","revisaoDeElementoComMesmoUuid2RotuloEConteudo","getElementoAntesModificacao","isAjusteTextoOmitido","eAntesRevisao","eAposRevisao","processaEventosDeMoverOuTransformar","montarNovaRevisao","revInclusao","revisoesElemento","existeRevisaoParaElementos","revisaoDeElementoComMesmoLexmlIdRotuloEConteudo","findRevisoesByElementoLexmlId","findRevisoesByElementoUuid2","processaEventosDeInclusao","uuidsElementosIncluidos","processaEventosDeRemocao","uuidsElementosRemovidos","processaEventosDeRestauracao","elementoAtual","removeDuplicidades","isAcaoMoverOuTransformar","modificacoes","modificacao","adicionarOpcoesAoMenu","existeEventoDeInclusaoOuExclusao","atualizarLexmlIdEmElementosDeRevisoes","atualizarPosicaoDeElementosEmRevisoes","atualizarPosicaoDeElementosEmRevisoesByEvento","fator","fnCondicao2","lexmlIdPai","aceitarRevisaoEmLote","aceitarRevisao","revisoesAssociadas","atualizaReferenciaElementoAnteriorEmRevisoesExclusaoAposAceitacao","revisaoPrincipal","ultimaRevisao","rejeitarRevisaoEmLote","rejeitarRevisao","uuid2Elementos","outrasRevisoes","elementosDeOutrasRevisoes","montarEventosDeModificacaoParaHistorico","rejeitaSupressao","rejeitaModificacao","rejeitaRestauracao","rejeitaInclusao","rejeitaExclusao","dispositivoASerRemovido","rAux2","eventoAux","atualizaReferenciaElementoAnteriorEmRevisoesDeExclusaoAposRejeicao","montarListaElementosValidados","primeiroElementoReincluido","dUltimoFilho","eUltimoFilho","LIMPAR_REVISAO","limparRevisaoAction","errorInicializarEdicaoAction","erro","isRedoDeRevisaoAceita","isRedoDeRevisaoRejeitada","combinedReducer","reducers","reducerKeys","finalReducers","unexpectedKeyCache","shapeAssertionError","finalReducerKeys","reducer","assertReducerShape","warningMessage","inputState","argumentName","unexpectedKeys","getUnexpectedStateShapeWarningMessage","nextState","previousStateForKey","nextStateForKey","combineReducers","appReducer","elementoReducer","mensagemValidacao","mudouIndicacaoDeExistenteParaNovo","alterado","informaExistenciaDoElementoNaNorma","atualizaNotaAlteracao","dispositivosSuprimidos","dispositivosModificados","elementosInseridos","stateEvent","RevisaoAtivada","aplicaAlteracoesEmenda","novosDispositivos","adicionaAlteracaoComAssistente","atualizaElemento","hasFix","elementoNovo","buscaProximoOmissisSequencial","autoFixElemento","newInstanceFromJsonix","adicionaElementosNaProposicaoFromClipboard","selecionaElemento","InformarDadosAssistente","solicitaDadosAssistente","movendoArtigoParaAgrupador","paiAntigo","dAnterior","moveElementoAbaixo","emAlteracao","anteriorAoAgrupador","dPosterior","moveElementoAcima","detalhe","renumeraElemento","suprimeAgrupador","removeElementoSemTexto","newAction","modificaTipoElementoWithTab","validaElemento","validaArticulacao","AtualizacaoAlertas","adicionaAlerta","removeAlerta","limparAlertas","RevisaoDesativada","ativaDesativaRevisao","AtualizaUsuario","atualizaUsuario","aceitaRevisao","rejeitaRevisao","limpaRevisao","erroInicializaEdicao","numElementos","atualizaRevisao","adicionaDiffMenuOpcoes","rootStore","createStore","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","dispatch","replaceReducer","nextReducer","outerSubscribe","observeState","unsubscribe","__REDUX_DEVTOOLS_EXTENSION__","ArticulacaoComponent","lexmlEtaConfig","customElement","ft","ComandoEmendaComponent","changedProperties","buildTemplateComando","comandos","res","comando","cabecalho","buildTemplateCitacao","citacao","cabecalhoComum","emenda","unsafeHTML","Subscription","canceled","isCanceled","Observable","subscriptions","inscricao","notify","subscription","onChangeColarDialog","DialogColagem","nomeDispositivoSingular","nomeDispositivoPlural","isPrimeiroDialogoTipoColagem","exibeDialogAviso","montaDialogoAviso","dialogColagem","idDialog","labelDialog","tipoRodape","variante","montaDialogo","colarTextoArticuladoDialog","getNomeDispositivo","TipoSubstantivoEnum","SINGULAR","PLURAL","executarValidacaoRestricao","montaDialogoTipoColagem","restricao","getConcordanciaTodosTodas","getConcordanciaAsOs","montaDialogoAdicionarAposAtual","montaDialagoNaoPermitidoPadrao","montaDialogoModificarExistenteAdicionarNovo","dialogElem","getRadioGroup","getTipoRodape","buildRadioClick","addIconBeforeTitle","setFocusButtonConfirmar","elDialogTitle","insertAdjacentHTML","getIcon","botoes","onclick","fecharDialog","confirma","executeByIdDialog","opt1","opt2","habilitaBotaoConfirmar","getValueFromRadioGroup","idRadioGroup","colarSubstituindo","colarComoTextoSimples","getRadioGroupTipoColagem","getRadioGroupModificarExistenteAdicionarNovo","getRadioGroupSimNao","getRodapeConfirmar","getRodapeFechar","tipoSubstantivo","isGeneroFeminino","nomeDispositivo","Elemento","EtaBlot","instanceBlotName","linha","tamanho","AlinhamentoMenu","EtaBlotMenu","EtaBlotMenuBotao","EtaBlotMenuConteudo","alinhamentoMenu","classeAdicional","Esquerda","EtaBlotMenuItem","focusOffset","EtaBlotRotulo","getClasseCSS","podeInformarNumeracao","montarRotulo","title","formatoStyle","criarAtributoStyle","classeSituacao","setEstilo","atualizarAtributos","isRevisaoPrincipalDeExclusaoDeDispositivo","EtaBlotAbreAspas","__atualizarAtributos","montarHTML","EtaBlotRevisaoRecusar","atualizarElemento","EtaBlotRevisaoAceitar","EtaContainer","firstBlot","findBlot","findBlotByBlotName","findBlotByClass","clazz","EtaBlotRevisao","montarMensagem","getIniciais","EtaContainerRevisao","atualizarBlots","blotBotaoAceitarRevisao","blotBotaoRejeitarRevisao","blotInfoRevisao","EtaBlotQuebraLinha","EtaBlotTipoOmissis","_atualizarAtributos","getDescricaoTipoOmissis","EtaBlotExistencia","EtaBlotFechaAspas","EtaBlotNotaAlteracao","EtaBlotEspaco","EtaBlotMensagem","classe","EtaContainerTdDireito","EtaContainerTdEsquerdo","classLevel","EtaContainerTr","EtaBlotOpcoesDiff","EtaContainerOpcoes","blotBotaoExibirDiferencas","EtaQuillUtil","etaTable","EtaContainerTable","etaTrContainer","etaTdTexto","etaTdEspaco","isDispositivoAlteracaoAdicionado","EtaBlotConteudo","criarContainerOpcoes","criarContainerRevisao","etaContainerRevisao","etaContainerOpcoes","etaTdMensagens","avisoJaExiste","_htmlAnt","montarSpanOmissisAsString","htmlAnt","_lexmlId","_uuid2","_editavel","_nivel","_numero","_tipo","_agrupador","_hierarquia","_descricaoSituacao","_existeNaNormaAlterada","criarId","atualizarAtributoRevisao","atualizarAtributoExistenciaNormaAlterada","atualizarAtributoOmissis","blotRotulo","findBlotRef","blotRef","searchBlotRotuloNode","blotExistencia","blotConteudo","blotAbreAspas","blotFechaAspas","blotNotaAlteracao","containerRevisao","containerDireito","blotInsideContainerDireito","resetClasses","classeCSS","ativarBorda","desativarBorda","limparContainerDireito","isLinhaComMarcacaoDeExclusao","cancelarPropagacaoDoEvento","strCaracteresValidos","CaracteresValidos","CaracteresNaoValidos","EtaKeyboard","operacaoTecladoInvalida","adicionaElementoTeclaEnter","transformaElemento","moveElemento","onChange","toggleExistencia","adicionaAgrupador","altGraphPressionado","onHotKeyToolbar","bloqueiaAcentuacaoOmissis","location","elementoLinhaAtual","linhaAtual","cursorDeTextoEstaSobreLink","isTeclaQueAlteraTexto","verificaSelecaoComLink","enterEmOmissis","cursorDeTextoEstaSobreOmissis","isNotTeclasDeNavegacao","onTeclaHome","onTeclaEnd","onTeclaCtrlD","onTeclaCtrlZ","onTeclaCtrlY","onTeclaCtrlShiftA","onValidarTecla","onTeclaCtrlA","onHotKeyTransformacaoTipo","onHotKeyRenumeraDispositivo","onHotKeyToggleExistencia","onHotKeyAdicionaAgrupador","keyFake","keyDownFake","KeyboardEvent","onHotKeyMover","onTeclaArrowRight","onTeclaArrowLeft","onTeclaArrowDown","onTeclaArrowUp","onTeclaEnter","onTeclaEscape","onTeclaDelete","onTeclaBackspace","onTeclaTab","isTeclaComCaracterGrafico","verificarOperacaoTecladoPermitida","textoSelec","textoSelecionado","quantidadeCR","blotCursor","setIndex","linhaAnt","isProcessandoMudancaLinha","inicioConteudoAtual","fimConteudoAtual","apagaTextoNaPosicao","getPrimeiraLinha","getUltimaLinha","iniciaOuTerminaComLink","inicioLinha","negrito","EtaBlotConteudoOmissis","EtaBlotMensagens","EtaClipboard","onPasteTextoArticulado","clipboardData","textoClipboard","removeTagHead","removeTagScript","hasRotulo","adicionaDispositivos","EtaQuillBuffer","editorHtml","getConteudoHtml","blotBuffer","setConteudo","converterHtmlParaDelta","converterDeltaParaHtml","EtaQuill","bufferHtml","_undoEstruturaVazio","_redoEstruturaVazio","_processandoMudancaLinha","undoRedoEstrutura","elementoSelecionado","customClickHandler","observableSelectionChange","onSelectionChange","linhaAtualAux","_mudouDeLinha","verificarMudouLinha","limparHistory","_linhaAtual","acertarAspas","buffer","mudouDeLinha","linhaAnterior","_linhaAnterior","isUndoEstruturaVazio","undoEstruturaVazio","undoVazio","isRedoEstruturaVazio","redoEstruturaVazio","redoVazio","processandoMudancaLinha","processando","paddingLeft","border","borderColor","ariaLabel","DataRotulo","destroi","getConteudoHtmlParteLinha","getLinhaByUuid2","getLinha","getLinhaPorId","getHtmlElement","setConteudoLinha","irProximaLinha","desmarcarLinhaAtual","linhaCursorAnt","marcarLinhaAtual","linhaCursor","atualizarLinhaCorrente","desmarcarLinhas","blotCursorAnt","posicaoTexto","novaAspas","scrollToElemento","isInEtaBoxViewport","scrollIntoEtaBox","offsetTopElement","lxEtaBox","etaBoxHeight","Norma","nomePreferido","nomePorExtenso","nomes","nomesAlternativos","sData","stringData","dataDDMMYYYY","formatDDMMYYYY","AutocompleteAsync","opened","maxSuggestions","onSearch","onSelect","onClick","_interval","_bound","_blur","_mouseEnter","_search","contentElement","_timer","description","_handleChange","_handleClick","_handleItemMouseEnter","_handleItemMouseLeave","_inputEl","slotInputList","_tempValue","_suggestionEl","_handleKeyDown","onKeyUp","_handleKeyUp","onFocus","_handleFocus","onBlur","_handleBlur","changed","childElementCount","_highlightedEl","_highlightPrev","previousElementSibling","_highlightNext","Option","AutocompleteNorma","urnInicial","_selectedNorma","_optionsNorma","_normas","_response","_updateNormas","paramQuery","_searchNormas","normas","_handleSearch","_handleSelect","_getNormaByURN","_autoCompleteAsync","focusAutoComplete","assistenteAlteracaoDialog","normaAlteracao","autocompleteNorma","cancelar","alertaMensagem","alertaComplemento","preencheAlerta","temErro","elementoFocavel","podeMostrarDialog","TextoDiff","adicionado","exibirDiferencasDialog","fnDestroy","contemRevisao","trataOmissisDiff","textoAntesRevisao","diferencaModificado","diferencaSemEspacosDuplicados","tabModificado","tabModificadoRevisao","diferencaEntreTextoAtualETextoAntesRevisao","tabPanelModificado","tabPanelModificadoRevisao","alertarInfo","idAlert","alert","closable","toast","EditorComponent","eventosOnChange","inscricoes","_idSwitchRevisao","_idBadgeQuantidadeRevisao","exibirBotoesParaTratarTodas","ajustarLinkParaNorma","listenerRotulo","renumerarElemento","listenerNotaAlteracao","editarNotaAlteracao","listenerToggleExistencia","toggleExistenciaElemento","listenerMensagem","criarElemento","listenerAceitarRevisao","listenerRejeitarRevisao","navegarEntreMarcasRevisao","direcao","checkedSwitchMarcaAlteracao","switchMarcaAlteracaoView","disabledParagrafoElementoRemovido","_quill","inicializar","configEditor","tool","processarStateEvents","quillNaoInicializado","destroiQuill","onClickUndo","onClickRedo","renderBotoesParaTratarTodasRevisoes","artigoOndeCouber","showComandoEmendaModal","showAjudaModal","showAtalhosModal","rejeitarTodasRevisoes","aceitarTodasRevisoes","ajudaModal","atalhosModal","comandoEmendaModal","formatacaoAlterada","agendarEmissaoEventoOnChange","linkTooltip","getNomeExtenso","onBold","onItalic","onScript","onOperacaoInvalida","alertar","isDesmembramento","textoAnterior","textoLinhaAtual","textoNovaLinha","adicionarElemento","indexInicio","indexFim","textoLinha","tamanhoNovaLinha","opcoes","NR","VZ","editarNotaAlteracaoDialog","podeRenumerar","tp","getMsgPlaceholder","rotuloAtual","validar","validarInput","msgErro","partePrincipal","parteSufixo","resultPartePrincipal","isNumeracaoValidaPorTipo","adicionarAgrupadorArtigo","tipoPai","defaultAux","elTipoAgrupadorDefault","optPosicaoAntes","optPosicaoDepois","chkManterNoMesmoGrupoDeAspas","ultimoValorDeChkManterNoMesmoGrupoDeAspasSelecionadoPorUsuario","validarStatusChkManterNoMesmoGrupoDeAspas","isCabecaAlteracao","onchange","adicionarAgrupadorArtigoDialog","removerElementoSemTexto","removerElemento","moverElemento","transformarElemento","novoTipo","transformarAction","tabAction","ultimoEventoElementoSelecionado","carregarArticulacao","informarNormaDialog","inserirNovoElementoNoQuill","inserirNovosElementosNoQuill","atualizarQuill","atualizarOmissis","marcarLinha","atualizarSituacao","removerLinhaQuill","renumerarQuill","atualizarMensagemQuill","montarMenuContexto","atualizarEstiloBotaoRevisao","processaRevisoesAceitas","indicadorMarcaRevisao","indicadorTextoModificado","atualizarStatusBotoesRevisao","eventosQueDevemEmitirTextChange","isAceitandoRevisoesDeExclusao","existeReinclusaoDoElemento","processarEscolhaMenu","itemMenu","exibirDiferencas","selecionarLinha","fnSelecionarNovaLinha","linhaASerReinserida","linhaRef","novaLinha","criarContainerLinha","isEmendaArtigoOndeCouber","timerOnChange","nivelAlerado","elementoRemovidoEmRevisao","isMensagemSufixos","criarContainerMensagens","blotMenu","blotMenuConteudo","configurar","atualizarTextoElemento","exibirModalSufixos","configListenersEta","sufixosModal","alertaGlobalRevisao","setCursorCurrentLine","origemEvento","statesType","emitirEventoOnChange","alertaGlobalVerificaRenumeracao","idAlerta","getDispositivosAdicionados","alertaGlobalVerificaCorrelacao","getDispositivosEmenda","listaLexmlIds","getElementsByClassName","etaContainerTable","choice","botoesDialog","nao","sim","closeResult","verificarQuillInicializado","removeListenersEta","payload","newInstanceFromTexto","botaoRevisao","ignorarStateTypes","mapElementos","uuidsElementosSemModificacao","uuidsElementosComModificacao","containerOpcoes","adicionaRemoveOpcaoDiffMenu","uuidsElementosSemRevisao","uuidsElementosComRevisao","numRevisoes","btnAceitarTodasRevisoes","btnRejeitarTodasRevisoes","ElementoComponent","htmlAgrupador","htmlDispositivo","AtalhosComponent","editorTextoRicoCss","quillTableCss","ContainBlot","TableCell","table","tr","newChild","TableHistory","historyChangeStatus","TableTrick","random_id","tableStack","entry","merge","emitTextChange","propertyChange","historyEntry","_parentNode","_node","_nextNode","tableNode","removeProperty","revert","mergedNodes","cell","cell_id","colSpan","rowSpan","TableToolbar","actions","TableSelection","inCellSelectionOnClick","cellSelectionOnClick","resetSelection","isMouseDown","previousSelection","selectionStartElement","selectionEndElement","targetCell","getTargetCell","focusedCell","preventMouseDown","clickedCellTimeout","dblClickTimeout","previousSelectionEndElement","getSelectionCoords","getCellAt","selectionChange","startLeaf","endLeaf","anchorNode","parentElement","focusNode","closestTable","disableAll","currentTable","currentTarget","getBlot","find_td","find_table","editorNode","col_count","row_count","table_id","ri","row_id","br","top_branch","_table","styleValue","endCell","last_cell","managed_merged_cells","new_td","merge_id","_cell","new_row","manage_merged_cells","managed_unmerged_cells","prev_cell","merged_cell","merge_rowspan","row","colIndex","colsToRemove","currentCell","_split","_td","widthValue","manageMergedCells","rowIndex","rowsToRemove","_tr","mergedCellContent","_oldContent","newContent","mergedNode","_removeCell","nodesToRemove","recursive","newDelta","sizes","insertTable","append_direction","addCol","removeCol","addRow","removeRow","removeTable","splitCell","mergeSelection","removeCell","removeSelection","anchorOffset","TableRow","createDefaultChild","Table","getQuill","tables","cell_counter","row_counter","nextCell","newCell","pasted","emitirEventoTableInTable","TableModule","Contain","mouseMove","mouseUp","configToolbar","is_pasted_data","rowNode","tableOptions","keycontext","format_start","format_end","resultNodes","collection","elementsIndex","nodeListToArray","containsNode","nodeRemoved","resultNode","cells","selectionIndex","unmergedCell","nextBlot","nextBlotIndex","notaRodapeCss","atualizaRevisaoJustificativa","removeAllRevisoesJustificativa","criaRevisaoJustificativa","jaExisteRevisaoUsuarioAtual","revisoesUsuarioAtual","atualizaRevisaoTextoLivre","removeAllRevisoesTextoLivre","criaRevisaoTextoLivre","TextoLivreAlterado","jaExisteRevisao","revisaoUtil","EditorTextoRicoComponent","anexos","notasRodape","registroEvento","existeRevisaoByModo","TEXTO_LIVRE","getQuantidadeRevisoesTextoLivre","getQuantidadeRevisoesJustificativa","labelAnexo","lengthAnexos","onTableInTable","timerAlerta","customToolbarOptions","toolbarOptions","customFormatsOptions","formatsOptions","JUSTIFICATIVA","imageHandler","aspasCurvas","shiftTab","selectAll","backspace","redo2","setContent","addBotoesExtra","configureTooltip","elTableManagerButton","updateTexto","alterarLarguraColunaModal","alterarLarguraDaColuna","alterarLarguraTabelaModal","alterarLarguraDaTabela","alterarLarguraImagemModal","alterarLarguraDaImagem","menuContextImagem","lastSelecion","find_td_node","showAlterarLarguraColunaModal","find_table_node","showAlterarLarguraTabelaModal","updateNotasRodape","buildRevisoes","editorTextoRico","img","bgWpMenuImagem","showAlterarLarguraImagemModal","showMenuImagem","selectImage","imgBlot","tamanhoPermitido","trunc","loaded","changeWidthCol","updateApenasTexto","hideAlterarLarguraColunaModal","changeWidthTable","hideAlterarLarguraTabelaModal","highLightBotaoGerenciarTabela","toolbarContainer","elAnexo","setTitle","seletor","textoAjustado","configAbrindoTexto","associar","atualizaStatusElementosRevisao","getQuantidadeDeRevisoes","switchRevisaoComponent","ativarDesativarMarcaDeRevisao","getNotasRodape","tempDiv","removeElementosTDOcultos","ajustarConteudoTagsNotaRodape","atualizaAnexo","anexo","isEditorVazio","getNomeSwitch","getNomeBadge","aceitarRevisoes","setTextoAntesRevisao","removeRevisoes","rejeitarRevisoes","immediate","fnUpdate","desabilitaBtn","atualizaQuantidadeRevisao","timerAtualizaStatusElementosRevisao","desabilita","contadorView","atualizaQuantidadeRevisaoTextoRico","_textoAntesRevisao","moduloRevisao","renderBotaoAnexo","removerAnexo","nomeArquivo","conteudoDinamico","exibirAnexo","base64","htmlConteudo","wpUpload","btn","btn_preview","inputUpload","confirmar","fechar","oninput","addAnexo","listaRestricoes","convertAnexo","listaRestricoesCompleta","restricaoCompleta","fileReader","onerror","uploadAnexoDialog","editarNotaRodape","editar","removerNotaRodape","estilo","AlterarLarguraTabelaColunaModalComponent","valorLargura","slAlert","slDialog","alterarLargura","AlterarLarguraImagemModalComponent","shoelaceLightThemeStyles","Emenda","dataUltimaModificacao","toISOString","aplicacao","versaoAplicacao","modoEdicao","ModoEdicaoEmenda","metadados","proposicao","RefProposicaoEmendada","Epigrafe","componentes","ComponenteEmendado","comandoEmendaTextoLivre","ComandoEmendaTextoLivre","comandoEmenda","ComandoEmenda","justificativa","local","autoria","Autoria","opcoesImpressao","OpcoesImpressao","colegiadoApreciador","ColegiadoApreciador","TipoAutoria","identificacaoTexto","siglaCasaLegislativa","tipoColegiado","articulado","DispositivosEmenda","DispositivoEmenda","DispositivoEmendaSuprimido","DispositivoEmendaModificado","DispositivoEmendaAdicionado","ItemComandoEmenda","PARLAMENTAR","imprimirPartidoUF","quantidadeAssinaturasAdicionaisSenadores","quantidadeAssinaturasAdicionaisDeputados","parlamentares","imprimirBrasao","textoCabecalho","reduzirEspacoEntreLinhas","tamanhoFonte","SubstituicaoTermo","termo","novoTermo","flexaoGenero","flexaoNumero","CitacaoComandoMultiplaAlteracaoNormaVigente","ultimoProcessado","adjacentesOmissis","fecharAspasAposOmissis","getTexto","buscaDispositivosAdjacentesAsOmissis","arvoreDispositivos","getArvoreDispositivosDeAlteracaoDeNorma","montaCitacaoComando","isFechaAspas","ehAgrupador","getTextoDoDispositivoOuOmissis","nodeDenominacao","writeDispositivoTo","writeOmissisFinal","arvoreAtual","tagOmissisSemRotulo","hasFilhosPropostos","arvore","hasPropostos","CitacaoComandoDeNormaVigente","qtdDispositivos","qtdSemCitacaoObrigatoria","getCitacoesMultiplas","cabecaAtual","dispositivosDaCabeca","getCabeca","getCitacaoMultipla","cit","CitacaoComandoMultipla","getArvoreDispositivos","mapFilhos","dispRotulo","CitacaoComandoDispPrj","getDispositivosParaCitacao","qtdSuprimidos","getDispositivosNaoOriginais","dispRef","dispRefAtual","listaDispRef","noGrupoDeAspas","getDispositivosMesmoGrupoDeAspas","removeFromArray","RangeDispositivos","isSituacao","isTipo","podeAdicionarAoRange","addInicio","isUltimo","getPrimeiro","getUltimo","getAnterior","print","ranges","isRotuloNecessario","printRotuloInicio","printSeparadorProximoDispositivo","printRotuloFimSeExistir","rangePosterior","getRangeDispositivosPosterior","hasApenasUmDispositivo","isMesmoTipoSituacao","getRotuloCompletoSingular","getRotuloCompletoPlural","getRangeDispositivosAnterior","isMesmoPai","getTipoDispositivoPlural","isVazio","ultimo","isMesmaSituacaoParaComandoEmenda","verificaAgrupadoresAdicionadosEmSequencia","getDispositivos","SequenciaRangeDispositivos","localizarEmAgrupador","informarCaputDoDispositivo","getPrimeiroDispositivo","getUltimoDispositivo","getRanges","setRanges","getTextoListaDeDispositivos","posRange","nr","AgrupadorDispositivosCmdEmd","getSequencias","agrupaRanges","separaRangesDeDoisDispositivos","separaRangesDeDoisDispositivosEmSequencias","isMesmaSequencia","dispSequencia","dispRange","isMesmoTipoParaComandoEmenda","separaDispositivosSeguidosDeOmissis","separaDispositivosSeguidosDeOmissis2","adicionaouDispositivos","CmdEmdCombinavel","c1","ArtigoAntesDispositivo","TipoReferenciaAgrupador","DispositivosWriterCmdEmd","artigoAntesDispositivo","NENHUM","tipoReferenciaAgrupador","APENAS_ROTULO","citarPais","posSequencia","primeiroDispSeq","primeiroEhAgrupador","referenciarDenominacao","DENOMINACAO_DO_AGRUPADOR","referenciarTodoAgrupador","TODO_AGRUPADOR","referenciarOAgrupador","O_AGRUPADOR","posicionarAgrupadores","ADICAO","getReferenciaCaputDoDispositivo","getTextoArtigoAntesSequencia","getRotuloTipoDispositivo","getRotuloPaisSequencia","getLocalizacaoAgrupadores","plural","getTextoArtigoAntesDispositivo","DEFINIDO","DEFINIDO_COM_PREPOSICAO_A","iniciarComMaiuscula","getRotuloPais","dispOrig","getRotuloPaisAgrupador","dispAlteracao","dispositivoNovoForaDeAlteracao","dispositivoNovoEmAlteracao","refIrmao","getProximoAgrupador","ultimoAgrupador","dispositivoSeguinte","dispositvoAnterior","CmdEmdAdicaoANormaVigente","generoNormaAlterada","textoTodos","refGenericaProjeto","isPrimeiro","dispositivosWriter","primeiroDaUltimaSequencia","CmdEmdModificacaoDeNormaVigente","CmdEmdSupressaoDeNormaVigente","isSequenciasPlural","escreveDispositivoAlterado","CmdEmdDispNormaVigente","getDispositivosNaAlteracaoParaComando","getGeneroUrnNorma","dispositivosReferenciados","temDispositivoMasculino","tem","iUltimo","cmd","escreveLei","temDispositivoNovo","escreveProposto","temCitacao","normalizaCabecalhoComandoEmenda","feminino","CmdEmdAdicao","retiraPrimeirosFilhosAdicionadosAgrupador","trataLocalizacaoEmAgrupador","trataComandoUnicoDeAcrescimoDeAgrupadoresConsecutivos","ultimaSequencia","primeiroDosUltimos","trataLocalizacaoEmAgrupadorSequencia","reagrupar","isInclusaoDeArtigoProximoAAgrupador","artAnterior","getDispositivoIrmaoPosterior","isInclusaoNoInicioDeAgrupador","isInclusaoImediatamenteAntesDeAgrupador","CmdEmdAdicaoDispositivosOndeCouber","strRefProjeto","qtdArtigos","qtdAgrupadores","pluralTodos","temArtigos","CmdEmdModificacao","CmdEmdSupressao","CmdEmdDispPrj","getDispositivosComando","artigosOndeCouber","CmdEmdSubstituicaoTermo","substituicaoTermo","getComplementoFlexoes","flexoes","refProjeto","ComandoEmendaBuilder","getComandoEmenda","isInstanceOfSubstituicaoTermo","getComandoEmendaSubstituicaoTermo","getComandoEmendaArticulacao","cmdEmdSubstituicaoTermo","getDispositivosRepresentativosDeCadaComando","getTextoComplementoDispAlteracao","getTextoComplementoDispProposicao","montaCabecalhoComum","temDispositivoDeProjeto","qtdItens","listarItens","dispositivosNaoOriginais","adicionadosProposicao","temAgrupadorSuprimido","DispositivosEmendaBuilder","preencheDispositivos","getTipoDispositivoParaEmenda","addUrnNormaAlteradaSeNecessario","dm","trataTexto","preencheAtributosAlteracao","separaAgrupadores","isDispositivoFilhoDeAdicionado","criaDispositivoEmendaAdicionado","disps","fSeparacao","posicionar","calculaPosicaoAgrupador","dPos","de","buildNode","buildAlteracaoSeNecessario","buildFilhos","TYPE_NAME","buildIdAlteracao","namespaceURI","string","dispositivoTemp","ocorrencias","fim","http","buildSpan","to","resultHref","contentHref","DOCUMENTO_PADRAO","LexmlEtaComponent","_timerLoadEmenda","inicializarEdicao","preparaAberturaEmenda","loadProjetoNorma","setDispositivosERevisoesEmenda","loadEmenda","getProjetoAtualizado","out","articulacaoAtualizada","articulacaoProjetoNorma","clearInterval","autoriaCss","parlamentarVazio","sexo","siglaPartido","siglaUF","cargo","executarAposValidacao","_target","wrapperFn","executarMetodo","AutoriaComponent","_nomesAutocomplete","_podeIncluirParlamentar","_parlamentaresAutocomplete","_exibirTemplateTipoAutoria","_timerValidacao","_isProcessandoValidacao","timerEmitirEventoOnChange","_isProcessandoMovimentacao","_lastIndexAutoCompleted","_autoriaOriginal","_autoria","_isAllAutoresOk","getAutoriaAtualizada","_getTipoAutoriaTemplate","_getParlamentaresTemplate","_incluirNovoParlamentar","_getAssinaturasAdicionaisTemplate","_atualizarExibirPartidoUF","_getParlamentarAutocompleteTemplate","_validarNomeParlamentar","_atualizarParlamentar","_handleClickAutoComplete","_atualizarCargo","_moverParlamentar","_excluirParlamentar","_atualizarQtdAssinaturasAdicionaisSenadores","_atualizarQtdAssinaturasAdicionaisDeputados","parlamentar","novoArray","incluirParlamentar","_autocompletes","newIndex","moverParlamentar","excluirParlamentar","isBlur","auxValorPodeIncluirOriginal","elLexmlAutocomplete","cargoAtual","nomeAtual","parlamentarEhValido","parlamentarAutocomplete","_focarAutocompleteOuCargo","_btnNovoParlamentar","_inputCargos","queryAll","DestinoComponent","_comissoesAutocomplete","isMPV","isPlenario","tipoColegiadoPlenario","isMateriaOrcamentaria","isErroComissaoSelecionada","_comissoes","_comissoesOptions","_proposicao","_colegiadoApreciador","siglaComissao","_autocomplete","comissoes","comissao","ajustarValorAutocomplete","_selecionarComissao","ajustarTipoColegiadoPlenario","criarAlertaErroComissao","updateTipoColegiado","_filtroComissao","_exibirComissoes","_blurAutoComplete","removerAlertaErroComissao","comissaoSelecionada","comissaoOp","LexmlAutocomplete","_suggestions","suggest","suggestions","normalizedValue","_findSuggetions","nItemsResult","_filterStartWith","_filterContains","itemsResult","regexStartWith","regexContains","DataComponent","inputData","optionNaoInformarData","resetDate","getCurrentDate","Usuario","badge_styles_default","SlBadge","pulse","badge","tab_group_styles_default","SlTabGroup","tabs","panels","hasScrollControls","activation","noScrollControls","preventIndicatorTransition","repositionIndicator","updateScrollControls","mutationObserver","attributeName","setAriaLabels","syncTabsAndPanels","nav","IntersectionObserver","intersectionRatio","setActiveTab","getActiveTab","emitEvents","tabGroup","scrollBehavior","getAllTabs","getAllPanels","active","activeEl","handleScrollToStart","handleScrollToEnd","activeTab","previousTab","syncIndicator","indicator","currentTab","allTabs","previous","current","transitionValue","tab_panel_styles_default","autoIncrement","SlTabPanel","attrId","componentId","tab_styles_default","SlTab","handleCloseClick","editorStyles","LexmlEmendaParametrosEdicao","casaLegislativa","LexmlEmendaComponent","existeObserverEmenda","totalAlertas","exibirAjuda","lexmlEmendaConfig","parlamentaresCarregados","comissoesCarregadas","desativarMarcaRevisao","MOBILE_WIDTH","splitPanelPosition","sizeMode","updateLayoutSplitPanel","ajustarAltura","onChangeNotasRodape","siglaCasa","urlComissoes","atualizaListaParlamentares","getParlamentares","atualizaListaComissoes","getComissoes","montarColegiadoApreciador","montarLocalFromColegiadoApreciador","colegiado","montarEmendaBasica","montarProposicaoPorUrn","getEmenda","numeroProposicao","isEmendaSubstituicaoTermo","_substituicaoTermo","getSubstituicaoTermo","isEmendaTextoLivre","_lexmlEmendaTextoRico","_lexmlEta","_lexmlJustificativa","_lexmlAutoria","_lexmlData","_lexmlOpcoesImpressao","_lexmlDestino","generoProposicao","justificativaAntesRevisao","removeRevisaoFormat","ordernarRevisoes","params","_lexmlEmendaComando","inicializaProposicao","setEmenda","inicializaColegiadoApreciador","resetaEmenda","showAlertaEmendaTextoLivre","_tabsEsquerda","_tabsDireita","updateView","siglaProposicao","trocarModoEdicao","setSubstituicaoTermo","getEmentaFromProjetoNorma","revisaoAtivada","revisaoDesativada","mostrarDialogDisclaimerRevisao","emitiEventoOnRevisao","montarAutoriaPadrao","montarOpcoesImpressaoPadrao","autoriaPadrao","parlamentarAutor","par","opcoesImpressaoPadrao","forceUpdate","slSplitPanel","tabName","badgeAtalhos","pesquisarAlturaParentElement","minHeight","altura","alturaElementoBase","lexmlEtaTabs","alturaLexmlEtaTabs","alturaElemento","getElement","justificativaTabPanel","emendaTabPanel","qlToolbarJustificativa","qlToolbarEmenda","estilosOriginais","pointerEvents","setTabPanelStyles","tabPanel","estilos","isTemporary","alturaToolBarJustificativa","alturaToolBarEmenda","_lexmlEmendaComandoModal","atualizarComandoEmenda","disparaAlerta","buildAlertaJustificativa","getJustificativa","botoesHtml","chkNaoMostrarNovamente","closeButton","updateState","tabIsVisible","renderNotasRodape","focusOnTab","selecionarNotaRodape","badgeElement","localizarNotaRodape","notaRodapeElement","getTabFromElement","cb","removerPulsarNotaRodape","getEditorTextoRicoFromElement","getRestricoesConhecidas","alert_styles_default","toastStack","SlAlert","restartAutoHide","autoHideTimeout","handleMouseMove","handleDurationChange","AlertasComponent","getAlertIcon","removeAlertaById","lexmlEmenda","AjudaComponent","atualizarAjuda","am","AjudaModalComponent","SufixosModalComponent","noShowAgain","noShowAgainSwitch","handleSwitchChange","ComandoEmendaModalComponent","lexmlComandoEmenda","AtalhosModalComponent","OpcoesImpressaoComponent","_opcoesImpressao","_atualizarTamanhoFonte","_atualizarImprimirBrasao","_atualizarTextoCabecalho","_atualizarReduzirEspacoEntreLinhas","valorFonte","SwitchRevisaoComponent","quantidadeRevisao","nomeSwitch","nomeBadgeQuantidadeRevisao","checkedRevisao","consideraQuantidade","SubstituicaoTermoComponent","onDadosAlterados","elTermoASerSubstituido","elAlertaTermoASerSubstituido","elNovoTermo","elAlertaNovoTermo","elTipoSubstituicaoTermo","elFlexaoGenero","elFlexaoNumero","tratarAspas","caracter","isAspasDuplas","aspasTransformada","setEnabled","_isAbrindoTexto","numeroInicial","solicitarTexto","tratarRespostaModal","gerarId","hasNotaRodape","renumerarTodasNotas","emitirEventoNotaRodapeAdicionadaOuRemovida","removerEspacosAoRedorNotaRodape","findBlotsNotaRodape","isAdicionadaOuAtualizada","timerEmitirEventoNotaRodapeChange","findNodeById","atualizarTexto","adicionar","nota"],"mappings":"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AoBhC,GAC1B,MAAO,CACL14D,KAAMuwF,GACN71B,SAAAA,EACAhC,QAAAA,KCIC,MAAM+3B,GAAwB,UAZnCrgG,cACEtE,KAAKw8E,UAAY,oBAGnBC,QAAQ7N,GACN,MAAO,CACL16D,KAZ0B,mBAa1B06D,SAAAA,KCiEOg2B,GAA8B,GAE3CA,GAAU38F,KAAKm6E,IACfwiB,GAAU38F,KAAK25E,IACfgjB,GAAU38F,KAAKg6E,IACf2iB,GAAU38F,KAAKi6E,IACf0iB,GAAU38F,KAAKk9E,IACfyf,GAAU38F,KAAKq6E,IACfsiB,GAAU38F,KAAKu6E,IACfoiB,GAAU38F,KAAK66E,IACf8hB,GAAU38F,KAAKi6F,IACf0C,GAAU38F,KAAKk6F,IACfyC,GAAU38F,KAAKk7E,IACfyhB,GAAU38F,KAAKm7E,IACfwhB,GAAU38F,KAAKo7E,IACfuhB,GAAU38F,KAAKq7E,IACfshB,GAAU38F,KAAKu7E,IACfohB,GAAU38F,KAAKs7E,IAEfqhB,GAAU38F,KAAKw7E,IACfmhB,GAAU38F,KAAKy7E,IACfkhB,GAAU38F,KAAK07E,IACfihB,GAAU38F,KAAK27E,IACfghB,GAAU38F,KAAK47E,IACf+gB,GAAU38F,KAAK67E,IACf8gB,GAAU38F,KAAK87E,IACf6gB,GAAU38F,KAAKk8E,IACfygB,GAAU38F,KAAK+7E,IACf4gB,GAAU38F,KAAKy8E,IACfkgB,GAAU38F,KAAKg8E,IACf2gB,GAAU38F,KAAKi8E,IAEf0gB,GAAU38F,KAAKm8E,IACfwgB,GAAU38F,KAAKo8E,IACfugB,GAAU38F,KAAKq8E,IACfsgB,GAAU38F,KAAKs8E,IACfqgB,GAAU38F,KAAKu8E,IACfogB,GAAU38F,KAAKw8E,IACfmgB,GAAU38F,KAAK08E,IACfigB,GAAU38F,KAAK28E,IACfggB,GAAU38F,KAAK48E,IACf+f,GAAU38F,KAAK26E,IACfgiB,GAAU38F,KAAK86E,IACf6hB,GAAU38F,KAAKg7E,IACf2hB,GAAU38F,KAAK+6E,IACf4hB,GAAU38F,KAAK+8E,IACf4f,GAAU38F,KAAK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"}